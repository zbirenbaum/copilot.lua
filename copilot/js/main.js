"use strict";var Lwt=Object.create;var Q4=Object.defineProperty;var NBe=Object.getOwnPropertyDescriptor;var Fwt=Object.getOwnPropertyNames;var Owt=Object.getPrototypeOf,Qwt=Object.prototype.hasOwnProperty;var DBe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),BBe=t=>{throw TypeError(t)};var a=(t,e)=>Q4(t,"name",{value:e,configurable:!0});var Wm=(t,e)=>()=>(t&&(e=t(t=0)),e);var W=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Sa=(t,e)=>{for(var r in e)Q4(t,r,{get:e[r],enumerable:!0})},MBe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Fwt(e))!Qwt.call(t,o)&&o!==r&&Q4(t,o,{get:()=>e[o],enumerable:!(n=NBe(e,o))||n.enumerable});return t};var Ne=(t,e,r)=>(r=t!=null?Lwt(Owt(t)):{},MBe(e||!t||!t.__esModule?Q4(r,"default",{value:t,enumerable:!0}):r,t)),Uwt=t=>MBe(Q4({},"__esModule",{value:!0}),t),mf=(t,e,r,n)=>{for(var o=n>1?void 0:n?NBe(e,r):e,s=t.length-1,c;s>=0;s--)(c=t[s])&&(o=(n?c(e,r,o):c(o))||o);return n&&o&&Q4(e,r,o),o},Ra=(t,e)=>(r,n)=>e(r,n,t);var tpe=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&BBe("Object expected");var n,o;r&&(n=e[DBe("asyncDispose")]),n===void 0&&(n=e[DBe("dispose")],r&&(o=n)),typeof n!="function"&&BBe("Object not disposable"),o&&(n=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),t.push([r,n,e])}else r&&t.push([r]);return e},rpe=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(c,l,u,d){return d=Error(u),d.name="SuppressedError",d.error=c,d.suppressed=l,d},o=c=>e=r?new n(c,e,"An error was suppressed during disposal"):(r=!0,c),s=c=>{for(;c=t.pop();)try{var l=c[1]&&c[1].call(c[2]);if(c[0])return Promise.resolve(l).then(s,u=>(o(u),s()))}catch(u){o(u)}if(r)throw e};return s()};var importMetaUrlShim,f=Wm(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var FBe=W(npe=>{f();var LBe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");npe.encode=function(t){if(0<=t&&t<LBe.length)return LBe[t];throw new TypeError("Must be between 0 and 63: "+t)};npe.decode=function(t){var e=65,r=90,n=97,o=122,s=48,c=57,l=43,u=47,d=26,p=52;return e<=t&&t<=r?t-e:n<=t&&t<=o?t-n+d:s<=t&&t<=c?t-s+p:t==l?62:t==u?63:-1}});var spe=W(ope=>{f();var OBe=FBe(),ipe=5,QBe=1<<ipe,UBe=QBe-1,qBe=QBe;function qwt(t){return t<0?(-t<<1)+1:(t<<1)+0}a(qwt,"toVLQSigned");function Hwt(t){var e=(t&1)===1,r=t>>1;return e?-r:r}a(Hwt,"fromVLQSigned");ope.encode=a(function(e){var r="",n,o=qwt(e);do n=o&UBe,o>>>=ipe,o>0&&(n|=qBe),r+=OBe.encode(n);while(o>0);return r},"base64VLQ_encode");ope.decode=a(function(e,r,n){var o=e.length,s=0,c=0,l,u;do{if(r>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(u=OBe.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));l=!!(u&qBe),u&=UBe,s=s+(u<<c),c+=ipe}while(l);n.value=Hwt(s),n.rest=r},"base64VLQ_decode")});var H4=W(Rd=>{f();function Wwt(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}a(Wwt,"getArg");Rd.getArg=Wwt;var HBe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,$wt=/^data:.+\,.+$/;function GF(t){var e=t.match(HBe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}a(GF,"urlParse");Rd.urlParse=GF;function U4(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}a(U4,"urlGenerate");Rd.urlGenerate=U4;function ape(t){var e=t,r=GF(t);if(r){if(!r.path)return t;e=r.path}for(var n=Rd.isAbsolute(e),o=e.split(/\/+/),s,c=0,l=o.length-1;l>=0;l--)s=o[l],s==="."?o.splice(l,1):s===".."?c++:c>0&&(s===""?(o.splice(l+1,c),c=0):(o.splice(l,2),c--));return e=o.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,U4(r)):e}a(ape,"normalize");Rd.normalize=ape;function WBe(t,e){t===""&&(t="."),e===""&&(e=".");var r=GF(e),n=GF(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),U4(r);if(r||e.match($wt))return e;if(n&&!n.host&&!n.path)return n.host=e,U4(n);var o=e.charAt(0)==="/"?e:ape(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=o,U4(n)):o}a(WBe,"join");Rd.join=WBe;Rd.isAbsolute=function(t){return t.charAt(0)==="/"||HBe.test(t)};function jwt(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}a(jwt,"relative");Rd.relative=jwt;var $Be=function(){var t=Object.create(null);return!("__proto__"in t)}();function jBe(t){return t}a(jBe,"identity");function Gwt(t){return GBe(t)?"$"+t:t}a(Gwt,"toSetString");Rd.toSetString=$Be?jBe:Gwt;function Vwt(t){return GBe(t)?t.slice(1):t}a(Vwt,"fromSetString");Rd.fromSetString=$Be?jBe:Vwt;function GBe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}a(GBe,"isProtoString");function zwt(t,e,r){var n=q4(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:q4(t.name,e.name)}a(zwt,"compareByOriginalPositions");Rd.compareByOriginalPositions=zwt;function Kwt(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=q4(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:q4(t.name,e.name)}a(Kwt,"compareByGeneratedPositionsDeflated");Rd.compareByGeneratedPositionsDeflated=Kwt;function q4(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}a(q4,"strcmp");function Ywt(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=q4(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:q4(t.name,e.name)}a(Ywt,"compareByGeneratedPositionsInflated");Rd.compareByGeneratedPositionsInflated=Ywt;function Jwt(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}a(Jwt,"parseSourceMapInput");Rd.parseSourceMapInput=Jwt;function Xwt(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=GF(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var o=n.path.lastIndexOf("/");o>=0&&(n.path=n.path.substring(0,o+1))}e=WBe(U4(n),e)}return ape(e)}a(Xwt,"computeSourceURL");Rd.computeSourceURL=Xwt});var upe=W(VBe=>{f();var cpe=H4(),lpe=Object.prototype.hasOwnProperty,zS=typeof Map<"u";function U1(){this._array=[],this._set=zS?new Map:Object.create(null)}a(U1,"ArraySet");U1.fromArray=a(function(e,r){for(var n=new U1,o=0,s=e.length;o<s;o++)n.add(e[o],r);return n},"ArraySet_fromArray");U1.prototype.size=a(function(){return zS?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");U1.prototype.add=a(function(e,r){var n=zS?e:cpe.toSetString(e),o=zS?this.has(e):lpe.call(this._set,n),s=this._array.length;(!o||r)&&this._array.push(e),o||(zS?this._set.set(e,s):this._set[n]=s)},"ArraySet_add");U1.prototype.has=a(function(e){if(zS)return this._set.has(e);var r=cpe.toSetString(e);return lpe.call(this._set,r)},"ArraySet_has");U1.prototype.indexOf=a(function(e){if(zS){var r=this._set.get(e);if(r>=0)return r}else{var n=cpe.toSetString(e);if(lpe.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");U1.prototype.at=a(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");U1.prototype.toArray=a(function(){return this._array.slice()},"ArraySet_toArray");VBe.ArraySet=U1});var YBe=W(KBe=>{f();var zBe=H4();function Zwt(t,e){var r=t.generatedLine,n=e.generatedLine,o=t.generatedColumn,s=e.generatedColumn;return n>r||n==r&&s>=o||zBe.compareByGeneratedPositionsInflated(t,e)<=0}a(Zwt,"generatedPositionAfter");function Y$(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}a(Y$,"MappingList");Y$.prototype.unsortedForEach=a(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");Y$.prototype.add=a(function(e){Zwt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");Y$.prototype.toArray=a(function(){return this._sorted||(this._array.sort(zBe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");KBe.MappingList=Y$});var dpe=W(JBe=>{f();var VF=spe(),tl=H4(),J$=upe().ArraySet,e_t=YBe().MappingList;function $m(t){t||(t={}),this._file=tl.getArg(t,"file",null),this._sourceRoot=tl.getArg(t,"sourceRoot",null),this._skipValidation=tl.getArg(t,"skipValidation",!1),this._sources=new J$,this._names=new J$,this._mappings=new e_t,this._sourcesContents=null}a($m,"SourceMapGenerator");$m.prototype._version=3;$m.fromSourceMap=a(function(e){var r=e.sourceRoot,n=new $m({file:e.file,sourceRoot:r});return e.eachMapping(function(o){var s={generated:{line:o.generatedLine,column:o.generatedColumn}};o.source!=null&&(s.source=o.source,r!=null&&(s.source=tl.relative(r,s.source)),s.original={line:o.originalLine,column:o.originalColumn},o.name!=null&&(s.name=o.name)),n.addMapping(s)}),e.sources.forEach(function(o){var s=o;r!==null&&(s=tl.relative(r,o)),n._sources.has(s)||n._sources.add(s);var c=e.sourceContentFor(o);c!=null&&n.setSourceContent(o,c)}),n},"SourceMapGenerator_fromSourceMap");$m.prototype.addMapping=a(function(e){var r=tl.getArg(e,"generated"),n=tl.getArg(e,"original",null),o=tl.getArg(e,"source",null),s=tl.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,o,s),o!=null&&(o=String(o),this._sources.has(o)||this._sources.add(o)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:o,name:s})},"SourceMapGenerator_addMapping");$m.prototype.setSourceContent=a(function(e,r){var n=e;this._sourceRoot!=null&&(n=tl.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[tl.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[tl.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");$m.prototype.applySourceMap=a(function(e,r,n){var o=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);o=e.file}var s=this._sourceRoot;s!=null&&(o=tl.relative(s,o));var c=new J$,l=new J$;this._mappings.unsortedForEach(function(u){if(u.source===o&&u.originalLine!=null){var d=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});d.source!=null&&(u.source=d.source,n!=null&&(u.source=tl.join(n,u.source)),s!=null&&(u.source=tl.relative(s,u.source)),u.originalLine=d.line,u.originalColumn=d.column,d.name!=null&&(u.name=d.name))}var p=u.source;p!=null&&!c.has(p)&&c.add(p);var m=u.name;m!=null&&!l.has(m)&&l.add(m)},this),this._sources=c,this._names=l,e.sources.forEach(function(u){var d=e.sourceContentFor(u);d!=null&&(n!=null&&(u=tl.join(n,u)),s!=null&&(u=tl.relative(s,u)),this.setSourceContent(u,d))},this)},"SourceMapGenerator_applySourceMap");$m.prototype._validateMapping=a(function(e,r,n,o){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!o)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:o}))}},"SourceMapGenerator_validateMapping");$m.prototype._serializeMappings=a(function(){for(var e=0,r=1,n=0,o=0,s=0,c=0,l="",u,d,p,m,h=this._mappings.toArray(),g=0,A=h.length;g<A;g++){if(d=h[g],u="",d.generatedLine!==r)for(e=0;d.generatedLine!==r;)u+=";",r++;else if(g>0){if(!tl.compareByGeneratedPositionsInflated(d,h[g-1]))continue;u+=","}u+=VF.encode(d.generatedColumn-e),e=d.generatedColumn,d.source!=null&&(m=this._sources.indexOf(d.source),u+=VF.encode(m-c),c=m,u+=VF.encode(d.originalLine-1-o),o=d.originalLine-1,u+=VF.encode(d.originalColumn-n),n=d.originalColumn,d.name!=null&&(p=this._names.indexOf(d.name),u+=VF.encode(p-s),s=p)),l+=u}return l},"SourceMapGenerator_serializeMappings");$m.prototype._generateSourcesContent=a(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=tl.relative(r,n));var o=tl.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,o)?this._sourcesContents[o]:null},this)},"SourceMapGenerator_generateSourcesContent");$m.prototype.toJSON=a(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");$m.prototype.toString=a(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");JBe.SourceMapGenerator=$m});var XBe=W(KS=>{f();KS.GREATEST_LOWER_BOUND=1;KS.LEAST_UPPER_BOUND=2;function fpe(t,e,r,n,o,s){var c=Math.floor((e-t)/2)+t,l=o(r,n[c],!0);return l===0?c:l>0?e-c>1?fpe(c,e,r,n,o,s):s==KS.LEAST_UPPER_BOUND?e<n.length?e:-1:c:c-t>1?fpe(t,c,r,n,o,s):s==KS.LEAST_UPPER_BOUND?c:t<0?-1:t}a(fpe,"recursiveSearch");KS.search=a(function(e,r,n,o){if(r.length===0)return-1;var s=fpe(-1,r.length,e,r,n,o||KS.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&n(r[s],r[s-1],!0)===0;)--s;return s},"search")});var e3e=W(ZBe=>{f();function ppe(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}a(ppe,"swap");function t_t(t,e){return Math.round(t+Math.random()*(e-t))}a(t_t,"randomIntInRange");function mpe(t,e,r,n){if(r<n){var o=t_t(r,n),s=r-1;ppe(t,o,n);for(var c=t[n],l=r;l<n;l++)e(t[l],c)<=0&&(s+=1,ppe(t,s,l));ppe(t,s+1,l);var u=s+1;mpe(t,e,r,u-1),mpe(t,e,u+1,n)}}a(mpe,"doQuickSort");ZBe.quickSort=function(t,e){mpe(t,e,0,t.length-1)}});var r3e=W(X$=>{f();var Hr=H4(),hpe=XBe(),W4=upe().ArraySet,r_t=spe(),zF=e3e().quickSort;function Xs(t,e){var r=t;return typeof t=="string"&&(r=Hr.parseSourceMapInput(t)),r.sections!=null?new Xg(r,e):new Wu(r,e)}a(Xs,"SourceMapConsumer");Xs.fromSourceMap=function(t,e){return Wu.fromSourceMap(t,e)};Xs.prototype._version=3;Xs.prototype.__generatedMappings=null;Object.defineProperty(Xs.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:a(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});Xs.prototype.__originalMappings=null;Object.defineProperty(Xs.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:a(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});Xs.prototype._charIsMappingSeparator=a(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");Xs.prototype._parseMappings=a(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");Xs.GENERATED_ORDER=1;Xs.ORIGINAL_ORDER=2;Xs.GREATEST_LOWER_BOUND=1;Xs.LEAST_UPPER_BOUND=2;Xs.prototype.eachMapping=a(function(e,r,n){var o=r||null,s=n||Xs.GENERATED_ORDER,c;switch(s){case Xs.GENERATED_ORDER:c=this._generatedMappings;break;case Xs.ORIGINAL_ORDER:c=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;c.map(function(u){var d=u.source===null?null:this._sources.at(u.source);return d=Hr.computeSourceURL(l,d,this._sourceMapURL),{source:d,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,o)},"SourceMapConsumer_eachMapping");Xs.prototype.allGeneratedPositionsFor=a(function(e){var r=Hr.getArg(e,"line"),n={source:Hr.getArg(e,"source"),originalLine:r,originalColumn:Hr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var o=[],s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Hr.compareByOriginalPositions,hpe.LEAST_UPPER_BOUND);if(s>=0){var c=this._originalMappings[s];if(e.column===void 0)for(var l=c.originalLine;c&&c.originalLine===l;)o.push({line:Hr.getArg(c,"generatedLine",null),column:Hr.getArg(c,"generatedColumn",null),lastColumn:Hr.getArg(c,"lastGeneratedColumn",null)}),c=this._originalMappings[++s];else for(var u=c.originalColumn;c&&c.originalLine===r&&c.originalColumn==u;)o.push({line:Hr.getArg(c,"generatedLine",null),column:Hr.getArg(c,"generatedColumn",null),lastColumn:Hr.getArg(c,"lastGeneratedColumn",null)}),c=this._originalMappings[++s]}return o},"SourceMapConsumer_allGeneratedPositionsFor");X$.SourceMapConsumer=Xs;function Wu(t,e){var r=t;typeof t=="string"&&(r=Hr.parseSourceMapInput(t));var n=Hr.getArg(r,"version"),o=Hr.getArg(r,"sources"),s=Hr.getArg(r,"names",[]),c=Hr.getArg(r,"sourceRoot",null),l=Hr.getArg(r,"sourcesContent",null),u=Hr.getArg(r,"mappings"),d=Hr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);c&&(c=Hr.normalize(c)),o=o.map(String).map(Hr.normalize).map(function(p){return c&&Hr.isAbsolute(c)&&Hr.isAbsolute(p)?Hr.relative(c,p):p}),this._names=W4.fromArray(s.map(String),!0),this._sources=W4.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(p){return Hr.computeSourceURL(c,p,e)}),this.sourceRoot=c,this.sourcesContent=l,this._mappings=u,this._sourceMapURL=e,this.file=d}a(Wu,"BasicSourceMapConsumer");Wu.prototype=Object.create(Xs.prototype);Wu.prototype.consumer=Xs;Wu.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Hr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Wu.fromSourceMap=a(function(e,r){var n=Object.create(Wu.prototype),o=n._names=W4.fromArray(e._names.toArray(),!0),s=n._sources=W4.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(g){return Hr.computeSourceURL(n.sourceRoot,g,r)});for(var c=e._mappings.toArray().slice(),l=n.__generatedMappings=[],u=n.__originalMappings=[],d=0,p=c.length;d<p;d++){var m=c[d],h=new t3e;h.generatedLine=m.generatedLine,h.generatedColumn=m.generatedColumn,m.source&&(h.source=s.indexOf(m.source),h.originalLine=m.originalLine,h.originalColumn=m.originalColumn,m.name&&(h.name=o.indexOf(m.name)),u.push(h)),l.push(h)}return zF(n.__originalMappings,Hr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");Wu.prototype._version=3;Object.defineProperty(Wu.prototype,"sources",{get:a(function(){return this._absoluteSources.slice()},"get")});function t3e(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}a(t3e,"Mapping");Wu.prototype._parseMappings=a(function(e,r){for(var n=1,o=0,s=0,c=0,l=0,u=0,d=e.length,p=0,m={},h={},g=[],A=[],y,v,b,I,_;p<d;)if(e.charAt(p)===";")n++,p++,o=0;else if(e.charAt(p)===",")p++;else{for(y=new t3e,y.generatedLine=n,I=p;I<d&&!this._charIsMappingSeparator(e,I);I++);if(v=e.slice(p,I),b=m[v],b)p+=v.length;else{for(b=[];p<I;)r_t.decode(e,p,h),_=h.value,p=h.rest,b.push(_);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");m[v]=b}y.generatedColumn=o+b[0],o=y.generatedColumn,b.length>1&&(y.source=l+b[1],l+=b[1],y.originalLine=s+b[2],s=y.originalLine,y.originalLine+=1,y.originalColumn=c+b[3],c=y.originalColumn,b.length>4&&(y.name=u+b[4],u+=b[4])),A.push(y),typeof y.originalLine=="number"&&g.push(y)}zF(A,Hr.compareByGeneratedPositionsDeflated),this.__generatedMappings=A,zF(g,Hr.compareByOriginalPositions),this.__originalMappings=g},"SourceMapConsumer_parseMappings");Wu.prototype._findMapping=a(function(e,r,n,o,s,c){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return hpe.search(e,r,s,c)},"SourceMapConsumer_findMapping");Wu.prototype.computeColumnSpans=a(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");Wu.prototype.originalPositionFor=a(function(e){var r={generatedLine:Hr.getArg(e,"line"),generatedColumn:Hr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Hr.compareByGeneratedPositionsDeflated,Hr.getArg(e,"bias",Xs.GREATEST_LOWER_BOUND));if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===r.generatedLine){var s=Hr.getArg(o,"source",null);s!==null&&(s=this._sources.at(s),s=Hr.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var c=Hr.getArg(o,"name",null);return c!==null&&(c=this._names.at(c)),{source:s,line:Hr.getArg(o,"originalLine",null),column:Hr.getArg(o,"originalColumn",null),name:c}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");Wu.prototype.hasContentsOfAllSources=a(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");Wu.prototype.sourceContentFor=a(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var o=e;this.sourceRoot!=null&&(o=Hr.relative(this.sourceRoot,o));var s;if(this.sourceRoot!=null&&(s=Hr.urlParse(this.sourceRoot))){var c=o.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(c))return this.sourcesContent[this._sources.indexOf(c)];if((!s.path||s.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(r)return null;throw new Error('"'+o+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");Wu.prototype.generatedPositionFor=a(function(e){var r=Hr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Hr.getArg(e,"line"),originalColumn:Hr.getArg(e,"column")},o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Hr.compareByOriginalPositions,Hr.getArg(e,"bias",Xs.GREATEST_LOWER_BOUND));if(o>=0){var s=this._originalMappings[o];if(s.source===n.source)return{line:Hr.getArg(s,"generatedLine",null),column:Hr.getArg(s,"generatedColumn",null),lastColumn:Hr.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");X$.BasicSourceMapConsumer=Wu;function Xg(t,e){var r=t;typeof t=="string"&&(r=Hr.parseSourceMapInput(t));var n=Hr.getArg(r,"version"),o=Hr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new W4,this._names=new W4;var s={line:-1,column:0};this._sections=o.map(function(c){if(c.url)throw new Error("Support for url field in sections not implemented.");var l=Hr.getArg(c,"offset"),u=Hr.getArg(l,"line"),d=Hr.getArg(l,"column");if(u<s.line||u===s.line&&d<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=l,{generatedOffset:{generatedLine:u+1,generatedColumn:d+1},consumer:new Xs(Hr.getArg(c,"map"),e)}})}a(Xg,"IndexedSourceMapConsumer");Xg.prototype=Object.create(Xs.prototype);Xg.prototype.constructor=Xs;Xg.prototype._version=3;Object.defineProperty(Xg.prototype,"sources",{get:a(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});Xg.prototype.originalPositionFor=a(function(e){var r={generatedLine:Hr.getArg(e,"line"),generatedColumn:Hr.getArg(e,"column")},n=hpe.search(r,this._sections,function(s,c){var l=s.generatedLine-c.generatedOffset.generatedLine;return l||s.generatedColumn-c.generatedOffset.generatedColumn}),o=this._sections[n];return o?o.consumer.originalPositionFor({line:r.generatedLine-(o.generatedOffset.generatedLine-1),column:r.generatedColumn-(o.generatedOffset.generatedLine===r.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");Xg.prototype.hasContentsOfAllSources=a(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");Xg.prototype.sourceContentFor=a(function(e,r){for(var n=0;n<this._sections.length;n++){var o=this._sections[n],s=o.consumer.sourceContentFor(e,!0);if(s)return s}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");Xg.prototype.generatedPositionFor=a(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Hr.getArg(e,"source"))!==-1){var o=n.consumer.generatedPositionFor(e);if(o){var s={line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");Xg.prototype._parseMappings=a(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var o=this._sections[n],s=o.consumer._generatedMappings,c=0;c<s.length;c++){var l=s[c],u=o.consumer._sources.at(l.source);u=Hr.computeSourceURL(o.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var d=null;l.name&&(d=o.consumer._names.at(l.name),this._names.add(d),d=this._names.indexOf(d));var p={source:u,generatedLine:l.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(o.generatedOffset.generatedLine===l.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:d};this.__generatedMappings.push(p),typeof p.originalLine=="number"&&this.__originalMappings.push(p)}zF(this.__generatedMappings,Hr.compareByGeneratedPositionsDeflated),zF(this.__originalMappings,Hr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");X$.IndexedSourceMapConsumer=Xg});var i3e=W(n3e=>{f();var n_t=dpe().SourceMapGenerator,Z$=H4(),i_t=/(\r?\n)/,o_t=10,$4="$$$isSourceNode$$$";function A0(t,e,r,n,o){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=o??null,this[$4]=!0,n!=null&&this.add(n)}a(A0,"SourceNode");A0.fromStringWithSourceMap=a(function(e,r,n){var o=new A0,s=e.split(i_t),c=0,l=a(function(){var h=A(),g=A()||"";return h+g;function A(){return c<s.length?s[c++]:void 0}},"shiftNextLine"),u=1,d=0,p=null;return r.eachMapping(function(h){if(p!==null)if(u<h.generatedLine)m(p,l()),u++,d=0;else{var g=s[c]||"",A=g.substr(0,h.generatedColumn-d);s[c]=g.substr(h.generatedColumn-d),d=h.generatedColumn,m(p,A),p=h;return}for(;u<h.generatedLine;)o.add(l()),u++;if(d<h.generatedColumn){var g=s[c]||"";o.add(g.substr(0,h.generatedColumn)),s[c]=g.substr(h.generatedColumn),d=h.generatedColumn}p=h},this),c<s.length&&(p&&m(p,l()),o.add(s.splice(c).join(""))),r.sources.forEach(function(h){var g=r.sourceContentFor(h);g!=null&&(n!=null&&(h=Z$.join(n,h)),o.setSourceContent(h,g))}),o;function m(h,g){if(h===null||h.source===void 0)o.add(g);else{var A=n?Z$.join(n,h.source):h.source;o.add(new A0(h.originalLine,h.originalColumn,A,g,h.name))}}a(m,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");A0.prototype.add=a(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[$4]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");A0.prototype.prepend=a(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[$4]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");A0.prototype.walk=a(function(e){for(var r,n=0,o=this.children.length;n<o;n++)r=this.children[n],r[$4]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");A0.prototype.join=a(function(e){var r,n,o=this.children.length;if(o>0){for(r=[],n=0;n<o-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");A0.prototype.replaceRight=a(function(e,r){var n=this.children[this.children.length-1];return n[$4]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");A0.prototype.setSourceContent=a(function(e,r){this.sourceContents[Z$.toSetString(e)]=r},"SourceNode_setSourceContent");A0.prototype.walkSourceContents=a(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][$4]&&this.children[r].walkSourceContents(e);for(var o=Object.keys(this.sourceContents),r=0,n=o.length;r<n;r++)e(Z$.fromSetString(o[r]),this.sourceContents[o[r]])},"SourceNode_walkSourceContents");A0.prototype.toString=a(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");A0.prototype.toStringWithSourceMap=a(function(e){var r={code:"",line:1,column:0},n=new n_t(e),o=!1,s=null,c=null,l=null,u=null;return this.walk(function(d,p){r.code+=d,p.source!==null&&p.line!==null&&p.column!==null?((s!==p.source||c!==p.line||l!==p.column||u!==p.name)&&n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:r.line,column:r.column},name:p.name}),s=p.source,c=p.line,l=p.column,u=p.name,o=!0):o&&(n.addMapping({generated:{line:r.line,column:r.column}}),s=null,o=!1);for(var m=0,h=d.length;m<h;m++)d.charCodeAt(m)===o_t?(r.line++,r.column=0,m+1===h?(s=null,o=!1):o&&n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:r.line,column:r.column},name:p.name})):r.column++}),this.walkSourceContents(function(d,p){n.setSourceContent(d,p)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");n3e.SourceNode=A0});var o3e=W(ej=>{f();ej.SourceMapGenerator=dpe().SourceMapGenerator;ej.SourceMapConsumer=r3e().SourceMapConsumer;ej.SourceNode=i3e().SourceNode});var a3e=W((aBr,s3e)=>{f();var s_t=Object.prototype.toString,gpe=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function a_t(t){return s_t.call(t).slice(8,-1)==="ArrayBuffer"}a(a_t,"isArrayBuffer");function c_t(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return gpe?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}a(c_t,"fromArrayBuffer");function l_t(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return gpe?Buffer.from(t,e):new Buffer(t,e)}a(l_t,"fromString");function u_t(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return a_t(t)?c_t(t,e,r):typeof t=="string"?l_t(t,e):gpe?Buffer.from(t):new Buffer(t)}a(u_t,"bufferFrom");s3e.exports=u_t});var h3e=W((JS,vpe)=>{f();var d_t=o3e().SourceMapConsumer,Ape=require("path"),dC;try{dC=require("fs"),(!dC.existsSync||!dC.readFileSync)&&(dC=null)}catch{}var f_t=a3e();function c3e(t,e){return t.require(e)}a(c3e,"dynamicRequire");var l3e=!1,u3e=!1,ype=!1,KF="auto",YS={},YF={},p_t=/^data:application\/json[^,]+base64,/,vI=[],xI=[];function xpe(){return KF==="browser"?!0:KF==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}a(xpe,"isInBrowser");function m_t(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}a(m_t,"hasGlobalProcessEventEmitter");function h_t(){return typeof process=="object"&&process!==null?process.version:""}a(h_t,"globalProcessVersion");function g_t(){if(typeof process=="object"&&process!==null)return process.stderr}a(g_t,"globalProcessStderr");function A_t(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}a(A_t,"globalProcessExit");function tj(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}a(tj,"handlerExec");var Epe=tj(vI);vI.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,o){return o?"":"/"})),t in YS)return YS[t];var e="";try{if(dC)dC.existsSync(t)&&(e=dC.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return YS[t]=e});function Cpe(t,e){if(!t)return e;var r=Ape.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),o=n?n[0]:"",s=r.slice(o.length);return o&&/^\/\w\:/.test(s)?(o+="/",o+Ape.resolve(r.slice(o.length),e).replace(/\\/g,"/")):o+Ape.resolve(r.slice(o.length),e)}a(Cpe,"supportRelativeURL");function y_t(t){var e;if(xpe())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=Epe(t);for(var o=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,s,c;c=o.exec(e);)s=c;return s?s[1]:null}a(y_t,"retrieveSourceMapURL");var bpe=tj(xI);xI.push(function(t){var e=y_t(t);if(!e)return null;var r;if(p_t.test(e)){var n=e.slice(e.indexOf(",")+1);r=f_t(n,"base64").toString(),e=t}else e=Cpe(t,e),r=Epe(e);return r?{url:e,map:r}:null});function Ipe(t){var e=YF[t.source];if(!e){var r=bpe(t.source);r?(e=YF[t.source]={url:r.url,map:new d_t(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(o,s){var c=e.map.sourcesContent[s];if(c){var l=Cpe(e.url,o);YS[l]=c}})):e=YF[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=Cpe(e.url,n.source),n}return t}a(Ipe,"mapSourcePosition");function f3e(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=Ipe({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+f3e(e[2])+")":t}a(f3e,"mapEvalOrigin");function C_t(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var o="",s=this.getFunctionName(),c=!0,l=this.isConstructor(),u=!(this.isToplevel()||l);if(u){var d=this.getTypeName();d==="[object Object]"&&(d="null");var p=this.getMethodName();s?(d&&s.indexOf(d)!=0&&(o+=d+"."),o+=s,p&&s.indexOf("."+p)!=s.length-p.length-1&&(o+=" [as "+p+"]")):o+=d+"."+(p||"<anonymous>")}else l?o+="new "+(s||"<anonymous>"):s?o+=s:(o+=e,c=!1);return c&&(o+=" ("+e+")"),o}a(C_t,"CallSiteToString");function d3e(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=C_t,e}a(d3e,"cloneCallSite");function p3e(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),o=t.getColumnNumber()-1,s=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,c=s.test(h_t())?0:62;n===1&&o>c&&!xpe()&&!t.isEval()&&(o-=c);var l=Ipe({source:r,line:n,column:o});e.curPosition=l,t=d3e(t);var u=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?u():e.nextPosition.name||u()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var d=t.isEval()&&t.getEvalOrigin();return d&&(d=f3e(d),t=d3e(t),t.getEvalOrigin=function(){return d}),t}a(p3e,"wrapCallSite");function v_t(t,e){ype&&(YS={},YF={});for(var r=t.name||"Error",n=t.message||"",o=r+": "+n,s={nextPosition:null,curPosition:null},c=[],l=e.length-1;l>=0;l--)c.push(`
    at `+p3e(e[l],s)),s.nextPosition=s.curPosition;return s.curPosition=s.nextPosition=null,o+c.reverse().join("")}a(v_t,"prepareStackTrace");function m3e(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],o=+e[3],s=YS[r];if(!s&&dC&&dC.existsSync(r))try{s=dC.readFileSync(r,"utf8")}catch{s=""}if(s){var c=s.split(/(?:\r\n|\r|\n)/)[n-1];if(c)return r+":"+n+`
`+c+`
`+new Array(o).join(" ")+"^"}}return null}a(m3e,"getErrorSource");function x_t(t){var e=m3e(t),r=g_t();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),A_t(1)}a(x_t,"printErrorAndExit");function E_t(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return x_t(arguments[1])}return t.apply(this,arguments)}}a(E_t,"shimEmitUncaughtException");var b_t=vI.slice(0),I_t=xI.slice(0);JS.wrapCallSite=p3e;JS.getErrorSource=m3e;JS.mapSourcePosition=Ipe;JS.retrieveSourceMap=bpe;JS.install=function(t){if(t=t||{},t.environment&&(KF=t.environment,["node","browser","auto"].indexOf(KF)===-1))throw new Error("environment "+KF+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(vI.length=0),vI.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(xI.length=0),xI.unshift(t.retrieveSourceMap)),t.hookRequire&&!xpe()){var e=c3e(vpe,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(s,c){return YS[c]=s,YF[c]=void 0,r.call(this,s,c)},e.prototype._compile.__sourceMapSupport=!0)}if(ype||(ype="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),l3e||(l3e=!0,Error.prepareStackTrace=v_t),!u3e){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var o=c3e(vpe,"worker_threads");o.isMainThread===!1&&(n=!1)}catch{}n&&m_t()&&(u3e=!0,E_t())}};JS.resetRetrieveHandlers=function(){vI.length=0,xI.length=0,vI=b_t.slice(0),xI=I_t.slice(0),bpe=tj(xI),Epe=tj(vI)}});var co=W((ij,C3e)=>{f();(function(t,e){typeof ij=="object"?C3e.exports=ij=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(ij,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var o=a(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),s=Object.create||function(){function b(){}return a(b,"F"),function(I){var _;return b.prototype=I,_=new b,b.prototype=null,_}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:a(function(b){var I=s(this);return b&&I.mixIn(b),(!I.hasOwnProperty("init")||this.init===I.init)&&(I.init=function(){I.$super.init.apply(this,arguments)}),I.init.prototype=I,I.$super=this,I},"extend"),create:a(function(){var b=this.extend();return b.init.apply(b,arguments),b},"create"),init:a(function(){},"init"),mixIn:a(function(b){for(var I in b)b.hasOwnProperty(I)&&(this[I]=b[I]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},"mixIn"),clone:a(function(){return this.init.prototype.extend(this)},"clone")}}(),d=l.WordArray=u.extend({init:a(function(b,I){b=this.words=b||[],I!=r?this.sigBytes=I:this.sigBytes=b.length*4},"init"),toString:a(function(b){return(b||m).stringify(this)},"toString"),concat:a(function(b){var I=this.words,_=b.words,k=this.sigBytes,N=b.sigBytes;if(this.clamp(),k%4)for(var F=0;F<N;F++){var O=_[F>>>2]>>>24-F%4*8&255;I[k+F>>>2]|=O<<24-(k+F)%4*8}else for(var Y=0;Y<N;Y+=4)I[k+Y>>>2]=_[Y>>>2];return this.sigBytes+=N,this},"concat"),clamp:a(function(){var b=this.words,I=this.sigBytes;b[I>>>2]&=4294967295<<32-I%4*8,b.length=e.ceil(I/4)},"clamp"),clone:a(function(){var b=u.clone.call(this);return b.words=this.words.slice(0),b},"clone"),random:a(function(b){for(var I=[],_=0;_<b;_+=4)I.push(o());return new d.init(I,b)},"random")}),p=c.enc={},m=p.Hex={stringify:a(function(b){for(var I=b.words,_=b.sigBytes,k=[],N=0;N<_;N++){var F=I[N>>>2]>>>24-N%4*8&255;k.push((F>>>4).toString(16)),k.push((F&15).toString(16))}return k.join("")},"stringify"),parse:a(function(b){for(var I=b.length,_=[],k=0;k<I;k+=2)_[k>>>3]|=parseInt(b.substr(k,2),16)<<24-k%8*4;return new d.init(_,I/2)},"parse")},h=p.Latin1={stringify:a(function(b){for(var I=b.words,_=b.sigBytes,k=[],N=0;N<_;N++){var F=I[N>>>2]>>>24-N%4*8&255;k.push(String.fromCharCode(F))}return k.join("")},"stringify"),parse:a(function(b){for(var I=b.length,_=[],k=0;k<I;k++)_[k>>>2]|=(b.charCodeAt(k)&255)<<24-k%4*8;return new d.init(_,I)},"parse")},g=p.Utf8={stringify:a(function(b){try{return decodeURIComponent(escape(h.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:a(function(b){return h.parse(unescape(encodeURIComponent(b)))},"parse")},A=l.BufferedBlockAlgorithm=u.extend({reset:a(function(){this._data=new d.init,this._nDataBytes=0},"reset"),_append:a(function(b){typeof b=="string"&&(b=g.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},"_append"),_process:a(function(b){var I,_=this._data,k=_.words,N=_.sigBytes,F=this.blockSize,O=F*4,Y=N/O;b?Y=e.ceil(Y):Y=e.max((Y|0)-this._minBufferSize,0);var z=Y*F,V=e.min(z*4,N);if(z){for(var U=0;U<z;U+=F)this._doProcessBlock(k,U);I=k.splice(0,z),_.sigBytes-=V}return new d.init(I,V)},"_process"),clone:a(function(){var b=u.clone.call(this);return b._data=this._data.clone(),b},"clone"),_minBufferSize:0}),y=l.Hasher=A.extend({cfg:u.extend(),init:a(function(b){this.cfg=this.cfg.extend(b),this.reset()},"init"),reset:a(function(){A.reset.call(this),this._doReset()},"reset"),update:a(function(b){return this._append(b),this._process(),this},"update"),finalize:a(function(b){b&&this._append(b);var I=this._doFinalize();return I},"finalize"),blockSize:512/32,_createHelper:a(function(b){return function(I,_){return new b.init(_).finalize(I)}},"_createHelper"),_createHmacHelper:a(function(b){return function(I,_){return new v.HMAC.init(b,_).finalize(I)}},"_createHmacHelper")}),v=c.algo={};return c}(Math);return t})});var e6=W((oj,v3e)=>{f();(function(t,e){typeof oj=="object"?v3e.exports=oj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(oj,function(t){return function(e){var r=t,n=r.lib,o=n.Base,s=n.WordArray,c=r.x64={},l=c.Word=o.extend({init:a(function(d,p){this.high=d,this.low=p},"init")}),u=c.WordArray=o.extend({init:a(function(d,p){d=this.words=d||[],p!=e?this.sigBytes=p:this.sigBytes=d.length*8},"init"),toX32:a(function(){for(var d=this.words,p=d.length,m=[],h=0;h<p;h++){var g=d[h];m.push(g.high),m.push(g.low)}return s.create(m,this.sigBytes)},"toX32"),clone:a(function(){for(var d=o.clone.call(this),p=d.words=this.words.slice(0),m=p.length,h=0;h<m;h++)p[h]=p[h].clone();return d},"clone")})}(),t})});var E3e=W((sj,x3e)=>{f();(function(t,e){typeof sj=="object"?x3e.exports=sj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(sj,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,o=n.init,s=n.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],d=0;d<l;d++)u[d>>>2]|=c[d]<<24-d%4*8;o.call(this,u,l)}else o.apply(this,arguments)};s.prototype=n}}(),t.lib.WordArray})});var I3e=W((aj,b3e)=>{f();(function(t,e){typeof aj=="object"?b3e.exports=aj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(aj,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.enc,s=o.Utf16=o.Utf16BE={stringify:a(function(l){for(var u=l.words,d=l.sigBytes,p=[],m=0;m<d;m+=2){var h=u[m>>>2]>>>16-m%4*8&65535;p.push(String.fromCharCode(h))}return p.join("")},"stringify"),parse:a(function(l){for(var u=l.length,d=[],p=0;p<u;p++)d[p>>>1]|=l.charCodeAt(p)<<16-p%2*16;return n.create(d,u*2)},"parse")};o.Utf16LE={stringify:a(function(l){for(var u=l.words,d=l.sigBytes,p=[],m=0;m<d;m+=2){var h=c(u[m>>>2]>>>16-m%4*8&65535);p.push(String.fromCharCode(h))}return p.join("")},"stringify"),parse:a(function(l){for(var u=l.length,d=[],p=0;p<u;p++)d[p>>>1]|=c(l.charCodeAt(p)<<16-p%2*16);return n.create(d,u*2)},"parse")};function c(l){return l<<8&4278255360|l>>>8&16711935}a(c,"swapEndian")}(),t.enc.Utf16})});var bI=W((cj,T3e)=>{f();(function(t,e){typeof cj=="object"?T3e.exports=cj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(cj,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.enc,s=o.Base64={stringify:a(function(l){var u=l.words,d=l.sigBytes,p=this._map;l.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,A=u[h+1>>>2]>>>24-(h+1)%4*8&255,y=u[h+2>>>2]>>>24-(h+2)%4*8&255,v=g<<16|A<<8|y,b=0;b<4&&h+b*.75<d;b++)m.push(p.charAt(v>>>6*(3-b)&63));var I=p.charAt(64);if(I)for(;m.length%4;)m.push(I);return m.join("")},"stringify"),parse:a(function(l){var u=l.length,d=this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=l.indexOf(h);g!==-1&&(u=g)}return c(l,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(l,u,d){for(var p=[],m=0,h=0;h<u;h++)if(h%4){var g=d[l.charCodeAt(h-1)]<<h%4*2,A=d[l.charCodeAt(h)]>>>6-h%4*2,y=g|A;p[m>>>2]|=y<<24-m%4*8,m++}return n.create(p,m)}a(c,"parseLoop")}(),t.enc.Base64})});var _3e=W((lj,w3e)=>{f();(function(t,e){typeof lj=="object"?w3e.exports=lj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(lj,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.enc,s=o.Base64url={stringify:a(function(l,u){u===void 0&&(u=!0);var d=l.words,p=l.sigBytes,m=u?this._safe_map:this._map;l.clamp();for(var h=[],g=0;g<p;g+=3)for(var A=d[g>>>2]>>>24-g%4*8&255,y=d[g+1>>>2]>>>24-(g+1)%4*8&255,v=d[g+2>>>2]>>>24-(g+2)%4*8&255,b=A<<16|y<<8|v,I=0;I<4&&g+I*.75<p;I++)h.push(m.charAt(b>>>6*(3-I)&63));var _=m.charAt(64);if(_)for(;h.length%4;)h.push(_);return h.join("")},"stringify"),parse:a(function(l,u){u===void 0&&(u=!0);var d=l.length,p=u?this._safe_map:this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var h=0;h<p.length;h++)m[p.charCodeAt(h)]=h}var g=p.charAt(64);if(g){var A=l.indexOf(g);A!==-1&&(d=A)}return c(l,d,m)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function c(l,u,d){for(var p=[],m=0,h=0;h<u;h++)if(h%4){var g=d[l.charCodeAt(h-1)]<<h%4*2,A=d[l.charCodeAt(h)]>>>6-h%4*2,y=g|A;p[m>>>2]|=y<<24-m%4*8,m++}return n.create(p,m)}a(c,"parseLoop")}(),t.enc.Base64url})});var II=W((uj,S3e)=>{f();(function(t,e){typeof uj=="object"?S3e.exports=uj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(uj,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,s=n.Hasher,c=r.algo,l=[];(function(){for(var g=0;g<64;g++)l[g]=e.abs(e.sin(g+1))*4294967296|0})();var u=c.MD5=s.extend({_doReset:a(function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:a(function(g,A){for(var y=0;y<16;y++){var v=A+y,b=g[v];g[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var I=this._hash.words,_=g[A+0],k=g[A+1],N=g[A+2],F=g[A+3],O=g[A+4],Y=g[A+5],z=g[A+6],V=g[A+7],U=g[A+8],H=g[A+9],ee=g[A+10],J=g[A+11],G=g[A+12],j=g[A+13],Z=g[A+14],ie=g[A+15],ne=I[0],re=I[1],fe=I[2],ye=I[3];ne=d(ne,re,fe,ye,_,7,l[0]),ye=d(ye,ne,re,fe,k,12,l[1]),fe=d(fe,ye,ne,re,N,17,l[2]),re=d(re,fe,ye,ne,F,22,l[3]),ne=d(ne,re,fe,ye,O,7,l[4]),ye=d(ye,ne,re,fe,Y,12,l[5]),fe=d(fe,ye,ne,re,z,17,l[6]),re=d(re,fe,ye,ne,V,22,l[7]),ne=d(ne,re,fe,ye,U,7,l[8]),ye=d(ye,ne,re,fe,H,12,l[9]),fe=d(fe,ye,ne,re,ee,17,l[10]),re=d(re,fe,ye,ne,J,22,l[11]),ne=d(ne,re,fe,ye,G,7,l[12]),ye=d(ye,ne,re,fe,j,12,l[13]),fe=d(fe,ye,ne,re,Z,17,l[14]),re=d(re,fe,ye,ne,ie,22,l[15]),ne=p(ne,re,fe,ye,k,5,l[16]),ye=p(ye,ne,re,fe,z,9,l[17]),fe=p(fe,ye,ne,re,J,14,l[18]),re=p(re,fe,ye,ne,_,20,l[19]),ne=p(ne,re,fe,ye,Y,5,l[20]),ye=p(ye,ne,re,fe,ee,9,l[21]),fe=p(fe,ye,ne,re,ie,14,l[22]),re=p(re,fe,ye,ne,O,20,l[23]),ne=p(ne,re,fe,ye,H,5,l[24]),ye=p(ye,ne,re,fe,Z,9,l[25]),fe=p(fe,ye,ne,re,F,14,l[26]),re=p(re,fe,ye,ne,U,20,l[27]),ne=p(ne,re,fe,ye,j,5,l[28]),ye=p(ye,ne,re,fe,N,9,l[29]),fe=p(fe,ye,ne,re,V,14,l[30]),re=p(re,fe,ye,ne,G,20,l[31]),ne=m(ne,re,fe,ye,Y,4,l[32]),ye=m(ye,ne,re,fe,U,11,l[33]),fe=m(fe,ye,ne,re,J,16,l[34]),re=m(re,fe,ye,ne,Z,23,l[35]),ne=m(ne,re,fe,ye,k,4,l[36]),ye=m(ye,ne,re,fe,O,11,l[37]),fe=m(fe,ye,ne,re,V,16,l[38]),re=m(re,fe,ye,ne,ee,23,l[39]),ne=m(ne,re,fe,ye,j,4,l[40]),ye=m(ye,ne,re,fe,_,11,l[41]),fe=m(fe,ye,ne,re,F,16,l[42]),re=m(re,fe,ye,ne,z,23,l[43]),ne=m(ne,re,fe,ye,H,4,l[44]),ye=m(ye,ne,re,fe,G,11,l[45]),fe=m(fe,ye,ne,re,ie,16,l[46]),re=m(re,fe,ye,ne,N,23,l[47]),ne=h(ne,re,fe,ye,_,6,l[48]),ye=h(ye,ne,re,fe,V,10,l[49]),fe=h(fe,ye,ne,re,Z,15,l[50]),re=h(re,fe,ye,ne,Y,21,l[51]),ne=h(ne,re,fe,ye,G,6,l[52]),ye=h(ye,ne,re,fe,F,10,l[53]),fe=h(fe,ye,ne,re,ee,15,l[54]),re=h(re,fe,ye,ne,k,21,l[55]),ne=h(ne,re,fe,ye,U,6,l[56]),ye=h(ye,ne,re,fe,ie,10,l[57]),fe=h(fe,ye,ne,re,z,15,l[58]),re=h(re,fe,ye,ne,j,21,l[59]),ne=h(ne,re,fe,ye,O,6,l[60]),ye=h(ye,ne,re,fe,J,10,l[61]),fe=h(fe,ye,ne,re,N,15,l[62]),re=h(re,fe,ye,ne,H,21,l[63]),I[0]=I[0]+ne|0,I[1]=I[1]+re|0,I[2]=I[2]+fe|0,I[3]=I[3]+ye|0},"_doProcessBlock"),_doFinalize:a(function(){var g=this._data,A=g.words,y=this._nDataBytes*8,v=g.sigBytes*8;A[v>>>5]|=128<<24-v%32;var b=e.floor(y/4294967296),I=y;A[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,A[(v+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,g.sigBytes=(A.length+1)*4,this._process();for(var _=this._hash,k=_.words,N=0;N<4;N++){var F=k[N];k[N]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return _},"_doFinalize"),clone:a(function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g},"clone")});function d(g,A,y,v,b,I,_){var k=g+(A&y|~A&v)+b+_;return(k<<I|k>>>32-I)+A}a(d,"FF");function p(g,A,y,v,b,I,_){var k=g+(A&v|y&~v)+b+_;return(k<<I|k>>>32-I)+A}a(p,"GG");function m(g,A,y,v,b,I,_){var k=g+(A^y^v)+b+_;return(k<<I|k>>>32-I)+A}a(m,"HH");function h(g,A,y,v,b,I,_){var k=g+(y^(A|~v))+b+_;return(k<<I|k>>>32-I)+A}a(h,"II"),r.MD5=s._createHelper(u),r.HmacMD5=s._createHmacHelper(u)}(Math),t.MD5})});var _pe=W((dj,R3e)=>{f();(function(t,e){typeof dj=="object"?R3e.exports=dj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(dj,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=r.Hasher,s=e.algo,c=[],l=s.SHA1=o.extend({_doReset:a(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:a(function(u,d){for(var p=this._hash.words,m=p[0],h=p[1],g=p[2],A=p[3],y=p[4],v=0;v<80;v++){if(v<16)c[v]=u[d+v]|0;else{var b=c[v-3]^c[v-8]^c[v-14]^c[v-16];c[v]=b<<1|b>>>31}var I=(m<<5|m>>>27)+y+c[v];v<20?I+=(h&g|~h&A)+1518500249:v<40?I+=(h^g^A)+1859775393:v<60?I+=(h&g|h&A|g&A)-1894007588:I+=(h^g^A)-899497514,y=A,A=g,g=h<<30|h>>>2,h=m,m=I}p[0]=p[0]+m|0,p[1]=p[1]+h|0,p[2]=p[2]+g|0,p[3]=p[3]+A|0,p[4]=p[4]+y|0},"_doProcessBlock"),_doFinalize:a(function(){var u=this._data,d=u.words,p=this._nDataBytes*8,m=u.sigBytes*8;return d[m>>>5]|=128<<24-m%32,d[(m+64>>>9<<4)+14]=Math.floor(p/4294967296),d[(m+64>>>9<<4)+15]=p,u.sigBytes=d.length*4,this._process(),this._hash},"_doFinalize"),clone:a(function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u},"clone")});e.SHA1=o._createHelper(l),e.HmacSHA1=o._createHmacHelper(l)}(),t.SHA1})});var pj=W((fj,k3e)=>{f();(function(t,e){typeof fj=="object"?k3e.exports=fj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(fj,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,s=n.Hasher,c=r.algo,l=[],u=[];(function(){function m(y){for(var v=e.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}a(m,"isPrime");function h(y){return(y-(y|0))*4294967296|0}a(h,"getFractionalBits");for(var g=2,A=0;A<64;)m(g)&&(A<8&&(l[A]=h(e.pow(g,1/2))),u[A]=h(e.pow(g,1/3)),A++),g++})();var d=[],p=c.SHA256=s.extend({_doReset:a(function(){this._hash=new o.init(l.slice(0))},"_doReset"),_doProcessBlock:a(function(m,h){for(var g=this._hash.words,A=g[0],y=g[1],v=g[2],b=g[3],I=g[4],_=g[5],k=g[6],N=g[7],F=0;F<64;F++){if(F<16)d[F]=m[h+F]|0;else{var O=d[F-15],Y=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,z=d[F-2],V=(z<<15|z>>>17)^(z<<13|z>>>19)^z>>>10;d[F]=Y+d[F-7]+V+d[F-16]}var U=I&_^~I&k,H=A&y^A&v^y&v,ee=(A<<30|A>>>2)^(A<<19|A>>>13)^(A<<10|A>>>22),J=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),G=N+J+U+u[F]+d[F],j=ee+H;N=k,k=_,_=I,I=b+G|0,b=v,v=y,y=A,A=G+j|0}g[0]=g[0]+A|0,g[1]=g[1]+y|0,g[2]=g[2]+v|0,g[3]=g[3]+b|0,g[4]=g[4]+I|0,g[5]=g[5]+_|0,g[6]=g[6]+k|0,g[7]=g[7]+N|0},"_doProcessBlock"),_doFinalize:a(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,A=m.sigBytes*8;return h[A>>>5]|=128<<24-A%32,h[(A+64>>>9<<4)+14]=e.floor(g/4294967296),h[(A+64>>>9<<4)+15]=g,m.sigBytes=h.length*4,this._process(),this._hash},"_doFinalize"),clone:a(function(){var m=s.clone.call(this);return m._hash=this._hash.clone(),m},"clone")});r.SHA256=s._createHelper(p),r.HmacSHA256=s._createHmacHelper(p)}(Math),t.SHA256})});var D3e=W((mj,P3e)=>{f();(function(t,e,r){typeof mj=="object"?P3e.exports=mj=e(co(),pj()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(mj,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.algo,s=o.SHA256,c=o.SHA224=s.extend({_doReset:a(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:a(function(){var l=s._doFinalize.call(this);return l.sigBytes-=4,l},"_doFinalize")});e.SHA224=s._createHelper(c),e.HmacSHA224=s._createHmacHelper(c)}(),t.SHA224})});var Spe=W((hj,B3e)=>{f();(function(t,e,r){typeof hj=="object"?B3e.exports=hj=e(co(),e6()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(hj,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,o=e.x64,s=o.Word,c=o.WordArray,l=e.algo;function u(){return s.create.apply(s,arguments)}a(u,"X64Word_create");var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],p=[];(function(){for(var h=0;h<80;h++)p[h]=u()})();var m=l.SHA512=n.extend({_doReset:a(function(){this._hash=new c.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:a(function(h,g){for(var A=this._hash.words,y=A[0],v=A[1],b=A[2],I=A[3],_=A[4],k=A[5],N=A[6],F=A[7],O=y.high,Y=y.low,z=v.high,V=v.low,U=b.high,H=b.low,ee=I.high,J=I.low,G=_.high,j=_.low,Z=k.high,ie=k.low,ne=N.high,re=N.low,fe=F.high,ye=F.low,Qe=O,we=Y,Xe=z,Oe=V,ut=U,Rt=H,Et=ee,At=J,de=G,qe=j,Ce=Z,$e=ie,ce=ne,ue=re,He=fe,Me=ye,be=0;be<80;be++){var Ge,rt,ht=p[be];if(be<16)rt=ht.high=h[g+be*2]|0,Ge=ht.low=h[g+be*2+1]|0;else{var Ot=p[be-15],Zt=Ot.high,qt=Ot.low,Yr=(Zt>>>1|qt<<31)^(Zt>>>8|qt<<24)^Zt>>>7,Mr=(qt>>>1|Zt<<31)^(qt>>>8|Zt<<24)^(qt>>>7|Zt<<25),fn=p[be-2],xe=fn.high,Ve=fn.low,mt=(xe>>>19|Ve<<13)^(xe<<3|Ve>>>29)^xe>>>6,wt=(Ve>>>19|xe<<13)^(Ve<<3|xe>>>29)^(Ve>>>6|xe<<26),ar=p[be-7],tr=ar.high,Sr=ar.low,fr=p[be-16],or=fr.high,dr=fr.low;Ge=Mr+Sr,rt=Yr+tr+(Ge>>>0<Mr>>>0?1:0),Ge=Ge+wt,rt=rt+mt+(Ge>>>0<wt>>>0?1:0),Ge=Ge+dr,rt=rt+or+(Ge>>>0<dr>>>0?1:0),ht.high=rt,ht.low=Ge}var sr=de&Ce^~de&ce,Fr=qe&$e^~qe&ue,Jr=Qe&Xe^Qe&ut^Xe&ut,ln=we&Oe^we&Rt^Oe&Rt,xn=(Qe>>>28|we<<4)^(Qe<<30|we>>>2)^(Qe<<25|we>>>7),oi=(we>>>28|Qe<<4)^(we<<30|Qe>>>2)^(we<<25|Qe>>>7),Rn=(de>>>14|qe<<18)^(de>>>18|qe<<14)^(de<<23|qe>>>9),ri=(qe>>>14|de<<18)^(qe>>>18|de<<14)^(qe<<23|de>>>9),un=d[be],Xn=un.high,De=un.low,X=Me+ri,ve=He+Rn+(X>>>0<Me>>>0?1:0),X=X+Fr,ve=ve+sr+(X>>>0<Fr>>>0?1:0),X=X+De,ve=ve+Xn+(X>>>0<De>>>0?1:0),X=X+Ge,ve=ve+rt+(X>>>0<Ge>>>0?1:0),Te=oi+ln,Q=xn+Jr+(Te>>>0<oi>>>0?1:0);He=ce,Me=ue,ce=Ce,ue=$e,Ce=de,$e=qe,qe=At+X|0,de=Et+ve+(qe>>>0<At>>>0?1:0)|0,Et=ut,At=Rt,ut=Xe,Rt=Oe,Xe=Qe,Oe=we,we=X+Te|0,Qe=ve+Q+(we>>>0<X>>>0?1:0)|0}Y=y.low=Y+we,y.high=O+Qe+(Y>>>0<we>>>0?1:0),V=v.low=V+Oe,v.high=z+Xe+(V>>>0<Oe>>>0?1:0),H=b.low=H+Rt,b.high=U+ut+(H>>>0<Rt>>>0?1:0),J=I.low=J+At,I.high=ee+Et+(J>>>0<At>>>0?1:0),j=_.low=j+qe,_.high=G+de+(j>>>0<qe>>>0?1:0),ie=k.low=ie+$e,k.high=Z+Ce+(ie>>>0<$e>>>0?1:0),re=N.low=re+ue,N.high=ne+ce+(re>>>0<ue>>>0?1:0),ye=F.low=ye+Me,F.high=fe+He+(ye>>>0<Me>>>0?1:0)},"_doProcessBlock"),_doFinalize:a(function(){var h=this._data,g=h.words,A=this._nDataBytes*8,y=h.sigBytes*8;g[y>>>5]|=128<<24-y%32,g[(y+128>>>10<<5)+30]=Math.floor(A/4294967296),g[(y+128>>>10<<5)+31]=A,h.sigBytes=g.length*4,this._process();var v=this._hash.toX32();return v},"_doFinalize"),clone:a(function(){var h=n.clone.call(this);return h._hash=this._hash.clone(),h},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(m),e.HmacSHA512=n._createHmacHelper(m)}(),t.SHA512})});var M3e=W((gj,N3e)=>{f();(function(t,e,r){typeof gj=="object"?N3e.exports=gj=e(co(),e6(),Spe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(gj,function(t){return function(){var e=t,r=e.x64,n=r.Word,o=r.WordArray,s=e.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:a(function(){this._hash=new o.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:a(function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u},"_doFinalize")});e.SHA384=c._createHelper(l),e.HmacSHA384=c._createHmacHelper(l)}(),t.SHA384})});var F3e=W((Aj,L3e)=>{f();(function(t,e,r){typeof Aj=="object"?L3e.exports=Aj=e(co(),e6()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(Aj,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,s=n.Hasher,c=r.x64,l=c.Word,u=r.algo,d=[],p=[],m=[];(function(){for(var A=1,y=0,v=0;v<24;v++){d[A+5*y]=(v+1)*(v+2)/2%64;var b=y%5,I=(2*A+3*y)%5;A=b,y=I}for(var A=0;A<5;A++)for(var y=0;y<5;y++)p[A+5*y]=y+(2*A+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var N=0,F=0,O=0;O<7;O++){if(_&1){var Y=(1<<O)-1;Y<32?F^=1<<Y:N^=1<<Y-32}_&128?_=_<<1^113:_<<=1}m[k]=l.create(N,F)}})();var h=[];(function(){for(var A=0;A<25;A++)h[A]=l.create()})();var g=u.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:a(function(){for(var A=this._state=[],y=0;y<25;y++)A[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:a(function(A,y){for(var v=this._state,b=this.blockSize/2,I=0;I<b;I++){var _=A[y+2*I],k=A[y+2*I+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var N=v[I];N.high^=k,N.low^=_}for(var F=0;F<24;F++){for(var O=0;O<5;O++){for(var Y=0,z=0,V=0;V<5;V++){var N=v[O+5*V];Y^=N.high,z^=N.low}var U=h[O];U.high=Y,U.low=z}for(var O=0;O<5;O++)for(var H=h[(O+4)%5],ee=h[(O+1)%5],J=ee.high,G=ee.low,Y=H.high^(J<<1|G>>>31),z=H.low^(G<<1|J>>>31),V=0;V<5;V++){var N=v[O+5*V];N.high^=Y,N.low^=z}for(var j=1;j<25;j++){var Y,z,N=v[j],Z=N.high,ie=N.low,ne=d[j];ne<32?(Y=Z<<ne|ie>>>32-ne,z=ie<<ne|Z>>>32-ne):(Y=ie<<ne-32|Z>>>64-ne,z=Z<<ne-32|ie>>>64-ne);var re=h[p[j]];re.high=Y,re.low=z}var fe=h[0],ye=v[0];fe.high=ye.high,fe.low=ye.low;for(var O=0;O<5;O++)for(var V=0;V<5;V++){var j=O+5*V,N=v[j],Qe=h[j],we=h[(O+1)%5+5*V],Xe=h[(O+2)%5+5*V];N.high=Qe.high^~we.high&Xe.high,N.low=Qe.low^~we.low&Xe.low}var N=v[0],Oe=m[F];N.high^=Oe.high,N.low^=Oe.low}},"_doProcessBlock"),_doFinalize:a(function(){var A=this._data,y=A.words,v=this._nDataBytes*8,b=A.sigBytes*8,I=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(e.ceil((b+1)/I)*I>>>5)-1]|=128,A.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,N=k/8,F=[],O=0;O<N;O++){var Y=_[O],z=Y.high,V=Y.low;z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,F.push(V),F.push(z)}return new o.init(F,k)},"_doFinalize"),clone:a(function(){for(var A=s.clone.call(this),y=A._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return A},"clone")});r.SHA3=s._createHelper(g),r.HmacSHA3=s._createHmacHelper(g)}(Math),t.SHA3})});var Q3e=W((yj,O3e)=>{f();(function(t,e){typeof yj=="object"?O3e.exports=yj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(yj,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,s=n.Hasher,c=r.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),p=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=o.create([0,1518500249,1859775393,2400959708,2840853838]),h=o.create([1352829926,1548603684,1836072691,2053994217,0]),g=c.RIPEMD160=s.extend({_doReset:a(function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:a(function(k,N){for(var F=0;F<16;F++){var O=N+F,Y=k[O];k[O]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}var z=this._hash.words,V=m.words,U=h.words,H=l.words,ee=u.words,J=d.words,G=p.words,j,Z,ie,ne,re,fe,ye,Qe,we,Xe;fe=j=z[0],ye=Z=z[1],Qe=ie=z[2],we=ne=z[3],Xe=re=z[4];for(var Oe,F=0;F<80;F+=1)Oe=j+k[N+H[F]]|0,F<16?Oe+=A(Z,ie,ne)+V[0]:F<32?Oe+=y(Z,ie,ne)+V[1]:F<48?Oe+=v(Z,ie,ne)+V[2]:F<64?Oe+=b(Z,ie,ne)+V[3]:Oe+=I(Z,ie,ne)+V[4],Oe=Oe|0,Oe=_(Oe,J[F]),Oe=Oe+re|0,j=re,re=ne,ne=_(ie,10),ie=Z,Z=Oe,Oe=fe+k[N+ee[F]]|0,F<16?Oe+=I(ye,Qe,we)+U[0]:F<32?Oe+=b(ye,Qe,we)+U[1]:F<48?Oe+=v(ye,Qe,we)+U[2]:F<64?Oe+=y(ye,Qe,we)+U[3]:Oe+=A(ye,Qe,we)+U[4],Oe=Oe|0,Oe=_(Oe,G[F]),Oe=Oe+Xe|0,fe=Xe,Xe=we,we=_(Qe,10),Qe=ye,ye=Oe;Oe=z[1]+ie+we|0,z[1]=z[2]+ne+Xe|0,z[2]=z[3]+re+fe|0,z[3]=z[4]+j+ye|0,z[4]=z[0]+Z+Qe|0,z[0]=Oe},"_doProcessBlock"),_doFinalize:a(function(){var k=this._data,N=k.words,F=this._nDataBytes*8,O=k.sigBytes*8;N[O>>>5]|=128<<24-O%32,N[(O+64>>>9<<4)+14]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,k.sigBytes=(N.length+1)*4,this._process();for(var Y=this._hash,z=Y.words,V=0;V<5;V++){var U=z[V];z[V]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}return Y},"_doFinalize"),clone:a(function(){var k=s.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function A(k,N,F){return k^N^F}a(A,"f1");function y(k,N,F){return k&N|~k&F}a(y,"f2");function v(k,N,F){return(k|~N)^F}a(v,"f3");function b(k,N,F){return k&F|N&~F}a(b,"f4");function I(k,N,F){return k^(N|~F)}a(I,"f5");function _(k,N){return k<<N|k>>>32-N}a(_,"rotl"),r.RIPEMD160=s._createHelper(g),r.HmacRIPEMD160=s._createHmacHelper(g)}(Math),t.RIPEMD160})});var vj=W((Cj,U3e)=>{f();(function(t,e){typeof Cj=="object"?U3e.exports=Cj=e(co()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Cj,function(t){(function(){var e=t,r=e.lib,n=r.Base,o=e.enc,s=o.Utf8,c=e.algo,l=c.HMAC=n.extend({init:a(function(u,d){u=this._hasher=new u.init,typeof d=="string"&&(d=s.parse(d));var p=u.blockSize,m=p*4;d.sigBytes>m&&(d=u.finalize(d)),d.clamp();for(var h=this._oKey=d.clone(),g=this._iKey=d.clone(),A=h.words,y=g.words,v=0;v<p;v++)A[v]^=1549556828,y[v]^=909522486;h.sigBytes=g.sigBytes=m,this.reset()},"init"),reset:a(function(){var u=this._hasher;u.reset(),u.update(this._iKey)},"reset"),update:a(function(u){return this._hasher.update(u),this},"update"),finalize:a(function(u){var d=this._hasher,p=d.finalize(u);d.reset();var m=d.finalize(this._oKey.clone().concat(p));return m},"finalize")})})()})});var H3e=W((xj,q3e)=>{f();(function(t,e,r){typeof xj=="object"?q3e.exports=xj=e(co(),pj(),vj()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(xj,function(t){return function(){var e=t,r=e.lib,n=r.Base,o=r.WordArray,s=e.algo,c=s.SHA256,l=s.HMAC,u=s.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:c,iterations:25e4}),init:a(function(d){this.cfg=this.cfg.extend(d)},"init"),compute:a(function(d,p){for(var m=this.cfg,h=l.create(m.hasher,d),g=o.create(),A=o.create([1]),y=g.words,v=A.words,b=m.keySize,I=m.iterations;y.length<b;){var _=h.update(p).finalize(A);h.reset();for(var k=_.words,N=k.length,F=_,O=1;O<I;O++){F=h.finalize(F),h.reset();for(var Y=F.words,z=0;z<N;z++)k[z]^=Y[z]}g.concat(_),v[0]++}return g.sigBytes=b*4,g},"compute")});e.PBKDF2=function(d,p,m){return u.create(m).compute(d,p)}}(),t.PBKDF2})});var H1=W((Ej,W3e)=>{f();(function(t,e,r){typeof Ej=="object"?W3e.exports=Ej=e(co(),_pe(),vj()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(Ej,function(t){return function(){var e=t,r=e.lib,n=r.Base,o=r.WordArray,s=e.algo,c=s.MD5,l=s.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:c,iterations:1}),init:a(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:a(function(u,d){for(var p,m=this.cfg,h=m.hasher.create(),g=o.create(),A=g.words,y=m.keySize,v=m.iterations;A.length<y;){p&&h.update(p),p=h.update(u).finalize(d),h.reset();for(var b=1;b<v;b++)p=h.finalize(p),h.reset();g.concat(p)}return g.sigBytes=y*4,g},"compute")});e.EvpKDF=function(u,d,p){return l.create(p).compute(u,d)}}(),t.EvpKDF})});var Dl=W((bj,$3e)=>{f();(function(t,e,r){typeof bj=="object"?$3e.exports=bj=e(co(),H1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(bj,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,o=n.Base,s=n.WordArray,c=n.BufferedBlockAlgorithm,l=r.enc,u=l.Utf8,d=l.Base64,p=r.algo,m=p.EvpKDF,h=n.Cipher=c.extend({cfg:o.extend(),createEncryptor:a(function(U,H){return this.create(this._ENC_XFORM_MODE,U,H)},"createEncryptor"),createDecryptor:a(function(U,H){return this.create(this._DEC_XFORM_MODE,U,H)},"createDecryptor"),init:a(function(U,H,ee){this.cfg=this.cfg.extend(ee),this._xformMode=U,this._key=H,this.reset()},"init"),reset:a(function(){c.reset.call(this),this._doReset()},"reset"),process:a(function(U){return this._append(U),this._process()},"process"),finalize:a(function(U){U&&this._append(U);var H=this._doFinalize();return H},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function U(H){return typeof H=="string"?V:O}return a(U,"selectCipherStrategy"),function(H){return{encrypt:a(function(ee,J,G){return U(J).encrypt(H,ee,J,G)},"encrypt"),decrypt:a(function(ee,J,G){return U(J).decrypt(H,ee,J,G)},"decrypt")}}}()}),g=n.StreamCipher=h.extend({_doFinalize:a(function(){var U=this._process(!0);return U},"_doFinalize"),blockSize:1}),A=r.mode={},y=n.BlockCipherMode=o.extend({createEncryptor:a(function(U,H){return this.Encryptor.create(U,H)},"createEncryptor"),createDecryptor:a(function(U,H){return this.Decryptor.create(U,H)},"createDecryptor"),init:a(function(U,H){this._cipher=U,this._iv=H},"init")}),v=A.CBC=function(){var U=y.extend();U.Encryptor=U.extend({processBlock:a(function(ee,J){var G=this._cipher,j=G.blockSize;H.call(this,ee,J,j),G.encryptBlock(ee,J),this._prevBlock=ee.slice(J,J+j)},"processBlock")}),U.Decryptor=U.extend({processBlock:a(function(ee,J){var G=this._cipher,j=G.blockSize,Z=ee.slice(J,J+j);G.decryptBlock(ee,J),H.call(this,ee,J,j),this._prevBlock=Z},"processBlock")});function H(ee,J,G){var j,Z=this._iv;Z?(j=Z,this._iv=e):j=this._prevBlock;for(var ie=0;ie<G;ie++)ee[J+ie]^=j[ie]}return a(H,"xorBlock"),U}(),b=r.pad={},I=b.Pkcs7={pad:a(function(U,H){for(var ee=H*4,J=ee-U.sigBytes%ee,G=J<<24|J<<16|J<<8|J,j=[],Z=0;Z<J;Z+=4)j.push(G);var ie=s.create(j,J);U.concat(ie)},"pad"),unpad:a(function(U){var H=U.words[U.sigBytes-1>>>2]&255;U.sigBytes-=H},"unpad")},_=n.BlockCipher=h.extend({cfg:h.cfg.extend({mode:v,padding:I}),reset:a(function(){var U;h.reset.call(this);var H=this.cfg,ee=H.iv,J=H.mode;this._xformMode==this._ENC_XFORM_MODE?U=J.createEncryptor:(U=J.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==U?this._mode.init(this,ee&&ee.words):(this._mode=U.call(J,this,ee&&ee.words),this._mode.__creator=U)},"reset"),_doProcessBlock:a(function(U,H){this._mode.processBlock(U,H)},"_doProcessBlock"),_doFinalize:a(function(){var U,H=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(H.pad(this._data,this.blockSize),U=this._process(!0)):(U=this._process(!0),H.unpad(U)),U},"_doFinalize"),blockSize:128/32}),k=n.CipherParams=o.extend({init:a(function(U){this.mixIn(U)},"init"),toString:a(function(U){return(U||this.formatter).stringify(this)},"toString")}),N=r.format={},F=N.OpenSSL={stringify:a(function(U){var H,ee=U.ciphertext,J=U.salt;return J?H=s.create([1398893684,1701076831]).concat(J).concat(ee):H=ee,H.toString(d)},"stringify"),parse:a(function(U){var H,ee=d.parse(U),J=ee.words;return J[0]==1398893684&&J[1]==1701076831&&(H=s.create(J.slice(2,4)),J.splice(0,4),ee.sigBytes-=16),k.create({ciphertext:ee,salt:H})},"parse")},O=n.SerializableCipher=o.extend({cfg:o.extend({format:F}),encrypt:a(function(U,H,ee,J){J=this.cfg.extend(J);var G=U.createEncryptor(ee,J),j=G.finalize(H),Z=G.cfg;return k.create({ciphertext:j,key:ee,iv:Z.iv,algorithm:U,mode:Z.mode,padding:Z.padding,blockSize:U.blockSize,formatter:J.format})},"encrypt"),decrypt:a(function(U,H,ee,J){J=this.cfg.extend(J),H=this._parse(H,J.format);var G=U.createDecryptor(ee,J).finalize(H.ciphertext);return G},"decrypt"),_parse:a(function(U,H){return typeof U=="string"?H.parse(U,this):U},"_parse")}),Y=r.kdf={},z=Y.OpenSSL={execute:a(function(U,H,ee,J,G){if(J||(J=s.random(64/8)),G)var j=m.create({keySize:H+ee,hasher:G}).compute(U,J);else var j=m.create({keySize:H+ee}).compute(U,J);var Z=s.create(j.words.slice(H),ee*4);return j.sigBytes=H*4,k.create({key:j,iv:Z,salt:J})},"execute")},V=n.PasswordBasedCipher=O.extend({cfg:O.cfg.extend({kdf:z}),encrypt:a(function(U,H,ee,J){J=this.cfg.extend(J);var G=J.kdf.execute(ee,U.keySize,U.ivSize,J.salt,J.hasher);J.iv=G.iv;var j=O.encrypt.call(this,U,H,G.key,J);return j.mixIn(G),j},"encrypt"),decrypt:a(function(U,H,ee,J){J=this.cfg.extend(J),H=this._parse(H,J.format);var G=J.kdf.execute(ee,U.keySize,U.ivSize,H.salt,J.hasher);J.iv=G.iv;var j=O.decrypt.call(this,U,H,G.key,J);return j},"decrypt")})}()})});var G3e=W((Ij,j3e)=>{f();(function(t,e,r){typeof Ij=="object"?j3e.exports=Ij=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Ij,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:a(function(n,o){var s=this._cipher,c=s.blockSize;r.call(this,n,o,c,s),this._prevBlock=n.slice(o,o+c)},"processBlock")}),e.Decryptor=e.extend({processBlock:a(function(n,o){var s=this._cipher,c=s.blockSize,l=n.slice(o,o+c);r.call(this,n,o,c,s),this._prevBlock=l},"processBlock")});function r(n,o,s,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var d=0;d<s;d++)n[o+d]^=l[d]}return a(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var z3e=W((Tj,V3e)=>{f();(function(t,e,r){typeof Tj=="object"?V3e.exports=Tj=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Tj,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:a(function(n,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var d=u.slice(0);s.encryptBlock(d,0),u[c-1]=u[c-1]+1|0;for(var p=0;p<c;p++)n[o+p]^=d[p]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var Y3e=W((wj,K3e)=>{f();(function(t,e,r){typeof wj=="object"?K3e.exports=wj=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(wj,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(s){if((s>>24&255)===255){var c=s>>16&255,l=s>>8&255,u=s&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,s=0,s+=c<<16,s+=l<<8,s+=u}else s+=1<<24;return s}a(r,"incWord");function n(s){return(s[0]=r(s[0]))===0&&(s[1]=r(s[1])),s}a(n,"incCounter");var o=e.Encryptor=e.extend({processBlock:a(function(s,c){var l=this._cipher,u=l.blockSize,d=this._iv,p=this._counter;d&&(p=this._counter=d.slice(0),this._iv=void 0),n(p);var m=p.slice(0);l.encryptBlock(m,0);for(var h=0;h<u;h++)s[c+h]^=m[h]},"processBlock")});return e.Decryptor=o,e}(),t.mode.CTRGladman})});var X3e=W((_j,J3e)=>{f();(function(t,e,r){typeof _j=="object"?J3e.exports=_j=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(_j,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:a(function(n,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),s.encryptBlock(u,0);for(var d=0;d<c;d++)n[o+d]^=u[d]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var eNe=W((Sj,Z3e)=>{f();(function(t,e,r){typeof Sj=="object"?Z3e.exports=Sj=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Sj,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:a(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:a(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var rNe=W((Rj,tNe)=>{f();(function(t,e,r){typeof Rj=="object"?tNe.exports=Rj=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Rj,function(t){return t.pad.AnsiX923={pad:a(function(e,r){var n=e.sigBytes,o=r*4,s=o-n%o,c=n+s-1;e.clamp(),e.words[c>>>2]|=s<<24-c%4*8,e.sigBytes+=s},"pad"),unpad:a(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var iNe=W((kj,nNe)=>{f();(function(t,e,r){typeof kj=="object"?nNe.exports=kj=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(kj,function(t){return t.pad.Iso10126={pad:a(function(e,r){var n=r*4,o=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(o-1)).concat(t.lib.WordArray.create([o<<24],1))},"pad"),unpad:a(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var sNe=W((Pj,oNe)=>{f();(function(t,e,r){typeof Pj=="object"?oNe.exports=Pj=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Pj,function(t){return t.pad.Iso97971={pad:a(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:a(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var cNe=W((Dj,aNe)=>{f();(function(t,e,r){typeof Dj=="object"?aNe.exports=Dj=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Dj,function(t){return t.pad.ZeroPadding={pad:a(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:a(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var uNe=W((Bj,lNe)=>{f();(function(t,e,r){typeof Bj=="object"?lNe.exports=Bj=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Bj,function(t){return t.pad.NoPadding={pad:a(function(){},"pad"),unpad:a(function(){},"unpad")},t.pad.NoPadding})});var fNe=W((Nj,dNe)=>{f();(function(t,e,r){typeof Nj=="object"?dNe.exports=Nj=e(co(),Dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Nj,function(t){return function(e){var r=t,n=r.lib,o=n.CipherParams,s=r.enc,c=s.Hex,l=r.format,u=l.Hex={stringify:a(function(d){return d.ciphertext.toString(c)},"stringify"),parse:a(function(d){var p=c.parse(d);return o.create({ciphertext:p})},"parse")}}(),t.format.Hex})});var mNe=W((Mj,pNe)=>{f();(function(t,e,r){typeof Mj=="object"?pNe.exports=Mj=e(co(),bI(),II(),H1(),Dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Mj,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,o=e.algo,s=[],c=[],l=[],u=[],d=[],p=[],m=[],h=[],g=[],A=[];(function(){for(var b=[],I=0;I<256;I++)I<128?b[I]=I<<1:b[I]=I<<1^283;for(var _=0,k=0,I=0;I<256;I++){var N=k^k<<1^k<<2^k<<3^k<<4;N=N>>>8^N&255^99,s[_]=N,c[N]=_;var F=b[_],O=b[F],Y=b[O],z=b[N]*257^N*16843008;l[_]=z<<24|z>>>8,u[_]=z<<16|z>>>16,d[_]=z<<8|z>>>24,p[_]=z;var z=Y*16843009^O*65537^F*257^_*16843008;m[N]=z<<24|z>>>8,h[N]=z<<16|z>>>16,g[N]=z<<8|z>>>24,A[N]=z,_?(_=F^b[b[b[Y^F]]],k^=b[b[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=n.extend({_doReset:a(function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,_=I.words,k=I.sigBytes/4,N=this._nRounds=k+6,F=(N+1)*4,O=this._keySchedule=[],Y=0;Y<F;Y++)Y<k?O[Y]=_[Y]:(b=O[Y-1],Y%k?k>6&&Y%k==4&&(b=s[b>>>24]<<24|s[b>>>16&255]<<16|s[b>>>8&255]<<8|s[b&255]):(b=b<<8|b>>>24,b=s[b>>>24]<<24|s[b>>>16&255]<<16|s[b>>>8&255]<<8|s[b&255],b^=y[Y/k|0]<<24),O[Y]=O[Y-k]^b);for(var z=this._invKeySchedule=[],V=0;V<F;V++){var Y=F-V;if(V%4)var b=O[Y];else var b=O[Y-4];V<4||Y<=4?z[V]=b:z[V]=m[s[b>>>24]]^h[s[b>>>16&255]]^g[s[b>>>8&255]]^A[s[b&255]]}}},"_doReset"),encryptBlock:a(function(b,I){this._doCryptBlock(b,I,this._keySchedule,l,u,d,p,s)},"encryptBlock"),decryptBlock:a(function(b,I){var _=b[I+1];b[I+1]=b[I+3],b[I+3]=_,this._doCryptBlock(b,I,this._invKeySchedule,m,h,g,A,c);var _=b[I+1];b[I+1]=b[I+3],b[I+3]=_},"decryptBlock"),_doCryptBlock:a(function(b,I,_,k,N,F,O,Y){for(var z=this._nRounds,V=b[I]^_[0],U=b[I+1]^_[1],H=b[I+2]^_[2],ee=b[I+3]^_[3],J=4,G=1;G<z;G++){var j=k[V>>>24]^N[U>>>16&255]^F[H>>>8&255]^O[ee&255]^_[J++],Z=k[U>>>24]^N[H>>>16&255]^F[ee>>>8&255]^O[V&255]^_[J++],ie=k[H>>>24]^N[ee>>>16&255]^F[V>>>8&255]^O[U&255]^_[J++],ne=k[ee>>>24]^N[V>>>16&255]^F[U>>>8&255]^O[H&255]^_[J++];V=j,U=Z,H=ie,ee=ne}var j=(Y[V>>>24]<<24|Y[U>>>16&255]<<16|Y[H>>>8&255]<<8|Y[ee&255])^_[J++],Z=(Y[U>>>24]<<24|Y[H>>>16&255]<<16|Y[ee>>>8&255]<<8|Y[V&255])^_[J++],ie=(Y[H>>>24]<<24|Y[ee>>>16&255]<<16|Y[V>>>8&255]<<8|Y[U&255])^_[J++],ne=(Y[ee>>>24]<<24|Y[V>>>16&255]<<16|Y[U>>>8&255]<<8|Y[H&255])^_[J++];b[I]=j,b[I+1]=Z,b[I+2]=ie,b[I+3]=ne},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(v)}(),t.AES})});var gNe=W((Lj,hNe)=>{f();(function(t,e,r){typeof Lj=="object"?hNe.exports=Lj=e(co(),bI(),II(),H1(),Dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Lj,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=r.BlockCipher,s=e.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],p=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=s.DES=o.extend({_doReset:a(function(){for(var y=this._key,v=y.words,b=[],I=0;I<56;I++){var _=c[I]-1;b[I]=v[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],N=0;N<16;N++){for(var F=k[N]=[],O=u[N],I=0;I<24;I++)F[I/6|0]|=b[(l[I]-1+O)%28]<<31-I%6,F[4+(I/6|0)]|=b[28+(l[I+24]-1+O)%28]<<31-I%6;F[0]=F[0]<<1|F[0]>>>31;for(var I=1;I<7;I++)F[I]=F[I]>>>(I-1)*4+3;F[7]=F[7]<<5|F[7]>>>27}for(var Y=this._invSubKeys=[],I=0;I<16;I++)Y[I]=k[15-I]},"_doReset"),encryptBlock:a(function(y,v){this._doCryptBlock(y,v,this._subKeys)},"encryptBlock"),decryptBlock:a(function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},"decryptBlock"),_doCryptBlock:a(function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],h.call(this,4,252645135),h.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),h.call(this,1,1431655765);for(var I=0;I<16;I++){for(var _=b[I],k=this._lBlock,N=this._rBlock,F=0,O=0;O<8;O++)F|=d[O][((N^_[O])&p[O])>>>0];this._lBlock=N,this._rBlock=k^F}var Y=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Y,h.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function h(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}a(h,"exchangeLR");function g(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}a(g,"exchangeRL"),e.DES=o._createHelper(m);var A=s.TripleDES=o.extend({_doReset:a(function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),I=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=m.createEncryptor(n.create(b)),this._des2=m.createEncryptor(n.create(I)),this._des3=m.createEncryptor(n.create(_))},"_doReset"),encryptBlock:a(function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},"encryptBlock"),decryptBlock:a(function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=o._createHelper(A)}(),t.TripleDES})});var yNe=W((Fj,ANe)=>{f();(function(t,e,r){typeof Fj=="object"?ANe.exports=Fj=e(co(),bI(),II(),H1(),Dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Fj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,o=e.algo,s=o.RC4=n.extend({_doReset:a(function(){for(var u=this._key,d=u.words,p=u.sigBytes,m=this._S=[],h=0;h<256;h++)m[h]=h;for(var h=0,g=0;h<256;h++){var A=h%p,y=d[A>>>2]>>>24-A%4*8&255;g=(g+m[h]+y)%256;var v=m[h];m[h]=m[g],m[g]=v}this._i=this._j=0},"_doReset"),_doProcessBlock:a(function(u,d){u[d]^=c.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function c(){for(var u=this._S,d=this._i,p=this._j,m=0,h=0;h<4;h++){d=(d+1)%256,p=(p+u[d])%256;var g=u[d];u[d]=u[p],u[p]=g,m|=u[(u[d]+u[p])%256]<<24-h*8}return this._i=d,this._j=p,m}a(c,"generateKeystreamWord"),e.RC4=n._createHelper(s);var l=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:a(function(){s._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)},"_doReset")});e.RC4Drop=n._createHelper(l)}(),t.RC4})});var vNe=W((Oj,CNe)=>{f();(function(t,e,r){typeof Oj=="object"?CNe.exports=Oj=e(co(),bI(),II(),H1(),Dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Oj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,o=e.algo,s=[],c=[],l=[],u=o.Rabbit=n.extend({_doReset:a(function(){for(var p=this._key.words,m=this.cfg.iv,h=0;h<4;h++)p[h]=(p[h]<<8|p[h]>>>24)&16711935|(p[h]<<24|p[h]>>>8)&4278255360;var g=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],A=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var h=0;h<4;h++)d.call(this);for(var h=0;h<8;h++)A[h]^=g[h+4&7];if(m){var y=m.words,v=y[0],b=y[1],I=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=I>>>16|_&4294901760,N=_<<16|I&65535;A[0]^=I,A[1]^=k,A[2]^=_,A[3]^=N,A[4]^=I,A[5]^=k,A[6]^=_,A[7]^=N;for(var h=0;h<4;h++)d.call(this)}},"_doReset"),_doProcessBlock:a(function(p,m){var h=this._X;d.call(this),s[0]=h[0]^h[5]>>>16^h[3]<<16,s[1]=h[2]^h[7]>>>16^h[5]<<16,s[2]=h[4]^h[1]>>>16^h[7]<<16,s[3]=h[6]^h[3]>>>16^h[1]<<16;for(var g=0;g<4;g++)s[g]=(s[g]<<8|s[g]>>>24)&16711935|(s[g]<<24|s[g]>>>8)&4278255360,p[m+g]^=s[g]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function d(){for(var p=this._X,m=this._C,h=0;h<8;h++)c[h]=m[h];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<c[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<c[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<c[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<c[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<c[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<c[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<c[6]>>>0?1:0)|0,this._b=m[7]>>>0<c[7]>>>0?1:0;for(var h=0;h<8;h++){var g=p[h]+m[h],A=g&65535,y=g>>>16,v=((A*A>>>17)+A*y>>>15)+y*y,b=((g&4294901760)*g|0)+((g&65535)*g|0);l[h]=v^b}p[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,p[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,p[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,p[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,p[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,p[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,p[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,p[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}a(d,"nextState"),e.Rabbit=n._createHelper(u)}(),t.Rabbit})});var ENe=W((Qj,xNe)=>{f();(function(t,e,r){typeof Qj=="object"?xNe.exports=Qj=e(co(),bI(),II(),H1(),Dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Qj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,o=e.algo,s=[],c=[],l=[],u=o.RabbitLegacy=n.extend({_doReset:a(function(){var p=this._key.words,m=this.cfg.iv,h=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],g=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var A=0;A<4;A++)d.call(this);for(var A=0;A<8;A++)g[A]^=h[A+4&7];if(m){var y=m.words,v=y[0],b=y[1],I=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=I>>>16|_&4294901760,N=_<<16|I&65535;g[0]^=I,g[1]^=k,g[2]^=_,g[3]^=N,g[4]^=I,g[5]^=k,g[6]^=_,g[7]^=N;for(var A=0;A<4;A++)d.call(this)}},"_doReset"),_doProcessBlock:a(function(p,m){var h=this._X;d.call(this),s[0]=h[0]^h[5]>>>16^h[3]<<16,s[1]=h[2]^h[7]>>>16^h[5]<<16,s[2]=h[4]^h[1]>>>16^h[7]<<16,s[3]=h[6]^h[3]>>>16^h[1]<<16;for(var g=0;g<4;g++)s[g]=(s[g]<<8|s[g]>>>24)&16711935|(s[g]<<24|s[g]>>>8)&4278255360,p[m+g]^=s[g]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function d(){for(var p=this._X,m=this._C,h=0;h<8;h++)c[h]=m[h];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<c[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<c[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<c[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<c[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<c[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<c[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<c[6]>>>0?1:0)|0,this._b=m[7]>>>0<c[7]>>>0?1:0;for(var h=0;h<8;h++){var g=p[h]+m[h],A=g&65535,y=g>>>16,v=((A*A>>>17)+A*y>>>15)+y*y,b=((g&4294901760)*g|0)+((g&65535)*g|0);l[h]=v^b}p[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,p[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,p[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,p[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,p[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,p[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,p[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,p[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}a(d,"nextState"),e.RabbitLegacy=n._createHelper(u)}(),t.RabbitLegacy})});var INe=W((Uj,bNe)=>{f();(function(t,e,r){typeof Uj=="object"?bNe.exports=Uj=e(co(),bI(),II(),H1(),Dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Uj,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,o=e.algo;let s=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(A,y){let v=y>>24&255,b=y>>16&255,I=y>>8&255,_=y&255,k=A.sbox[0][v]+A.sbox[1][b];return k=k^A.sbox[2][I],k=k+A.sbox[3][_],k}a(d,"F");function p(A,y,v){let b=y,I=v,_;for(let k=0;k<s;++k)b=b^A.pbox[k],I=d(A,b)^I,_=b,b=I,I=_;return _=b,b=I,I=_,I=I^A.pbox[s],b=b^A.pbox[s+1],{left:b,right:I}}a(p,"BlowFish_Encrypt");function m(A,y,v){let b=y,I=v,_;for(let k=s+1;k>1;--k)b=b^A.pbox[k],I=d(A,b)^I,_=b,b=I,I=_;return _=b,b=I,I=_,I=I^A.pbox[1],b=b^A.pbox[0],{left:b,right:I}}a(m,"BlowFish_Decrypt");function h(A,y,v){for(let N=0;N<4;N++){A.sbox[N]=[];for(let F=0;F<256;F++)A.sbox[N][F]=l[N][F]}let b=0;for(let N=0;N<s+2;N++)A.pbox[N]=c[N]^y[b],b++,b>=v&&(b=0);let I=0,_=0,k=0;for(let N=0;N<s+2;N+=2)k=p(A,I,_),I=k.left,_=k.right,A.pbox[N]=I,A.pbox[N+1]=_;for(let N=0;N<4;N++)for(let F=0;F<256;F+=2)k=p(A,I,_),I=k.left,_=k.right,A.sbox[N][F]=I,A.sbox[N][F+1]=_;return!0}a(h,"BlowFishInit");var g=o.Blowfish=n.extend({_doReset:a(function(){if(this._keyPriorReset!==this._key){var A=this._keyPriorReset=this._key,y=A.words,v=A.sigBytes/4;h(u,y,v)}},"_doReset"),encryptBlock:a(function(A,y){var v=p(u,A[y],A[y+1]);A[y]=v.left,A[y+1]=v.right},"encryptBlock"),decryptBlock:a(function(A,y){var v=m(u,A[y],A[y+1]);A[y]=v.left,A[y+1]=v.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(g)}(),t.Blowfish})});var TI=W((qj,TNe)=>{f();(function(t,e,r){typeof qj=="object"?TNe.exports=qj=e(co(),e6(),E3e(),I3e(),bI(),_3e(),II(),_pe(),pj(),D3e(),Spe(),M3e(),F3e(),Q3e(),vj(),H3e(),H1(),Dl(),G3e(),z3e(),Y3e(),X3e(),eNe(),rNe(),iNe(),sNe(),cNe(),uNe(),fNe(),mNe(),gNe(),yNe(),vNe(),ENe(),INe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(qj,function(t){return t})});var ID=W(Ld=>{"use strict";f();Object.defineProperty(Ld,"__esModule",{value:!0});Ld.stringArray=Ld.array=Ld.func=Ld.error=Ld.number=Ld.string=Ld.boolean=void 0;function q4t(t){return t===!0||t===!1}a(q4t,"boolean");Ld.boolean=q4t;function hLe(t){return typeof t=="string"||t instanceof String}a(hLe,"string");Ld.string=hLe;function H4t(t){return typeof t=="number"||t instanceof Number}a(H4t,"number");Ld.number=H4t;function W4t(t){return t instanceof Error}a(W4t,"error");Ld.error=W4t;function $4t(t){return typeof t=="function"}a($4t,"func");Ld.func=$4t;function gLe(t){return Array.isArray(t)}a(gLe,"array");Ld.array=gLe;function j4t(t){return gLe(t)&&t.every(e=>hLe(e))}a(j4t,"stringArray");Ld.stringArray=j4t});var ime=W(mn=>{"use strict";f();Object.defineProperty(mn,"__esModule",{value:!0});mn.Message=mn.NotificationType9=mn.NotificationType8=mn.NotificationType7=mn.NotificationType6=mn.NotificationType5=mn.NotificationType4=mn.NotificationType3=mn.NotificationType2=mn.NotificationType1=mn.NotificationType0=mn.NotificationType=mn.RequestType9=mn.RequestType8=mn.RequestType7=mn.RequestType6=mn.RequestType5=mn.RequestType4=mn.RequestType3=mn.RequestType2=mn.RequestType1=mn.RequestType=mn.RequestType0=mn.AbstractMessageSignature=mn.ParameterStructures=mn.ResponseError=mn.ErrorCodes=void 0;var p2=ID(),N0e;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(N0e||(mn.ErrorCodes=N0e={}));var M0e=class t extends Error{static{a(this,"ResponseError")}constructor(e,r,n){super(r),this.code=p2.number(e)?e:N0e.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};mn.ResponseError=M0e;var pp=class t{static{a(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};mn.ParameterStructures=pp;pp.auto=new pp("auto");pp.byPosition=new pp("byPosition");pp.byName=new pp("byName");var ia=class{static{a(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return pp.auto}};mn.AbstractMessageSignature=ia;var L0e=class extends ia{static{a(this,"RequestType0")}constructor(e){super(e,0)}};mn.RequestType0=L0e;var F0e=class extends ia{static{a(this,"RequestType")}constructor(e,r=pp.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};mn.RequestType=F0e;var O0e=class extends ia{static{a(this,"RequestType1")}constructor(e,r=pp.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};mn.RequestType1=O0e;var Q0e=class extends ia{static{a(this,"RequestType2")}constructor(e){super(e,2)}};mn.RequestType2=Q0e;var U0e=class extends ia{static{a(this,"RequestType3")}constructor(e){super(e,3)}};mn.RequestType3=U0e;var q0e=class extends ia{static{a(this,"RequestType4")}constructor(e){super(e,4)}};mn.RequestType4=q0e;var H0e=class extends ia{static{a(this,"RequestType5")}constructor(e){super(e,5)}};mn.RequestType5=H0e;var W0e=class extends ia{static{a(this,"RequestType6")}constructor(e){super(e,6)}};mn.RequestType6=W0e;var $0e=class extends ia{static{a(this,"RequestType7")}constructor(e){super(e,7)}};mn.RequestType7=$0e;var j0e=class extends ia{static{a(this,"RequestType8")}constructor(e){super(e,8)}};mn.RequestType8=j0e;var G0e=class extends ia{static{a(this,"RequestType9")}constructor(e){super(e,9)}};mn.RequestType9=G0e;var V0e=class extends ia{static{a(this,"NotificationType")}constructor(e,r=pp.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};mn.NotificationType=V0e;var z0e=class extends ia{static{a(this,"NotificationType0")}constructor(e){super(e,0)}};mn.NotificationType0=z0e;var K0e=class extends ia{static{a(this,"NotificationType1")}constructor(e,r=pp.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};mn.NotificationType1=K0e;var Y0e=class extends ia{static{a(this,"NotificationType2")}constructor(e){super(e,2)}};mn.NotificationType2=Y0e;var J0e=class extends ia{static{a(this,"NotificationType3")}constructor(e){super(e,3)}};mn.NotificationType3=J0e;var X0e=class extends ia{static{a(this,"NotificationType4")}constructor(e){super(e,4)}};mn.NotificationType4=X0e;var Z0e=class extends ia{static{a(this,"NotificationType5")}constructor(e){super(e,5)}};mn.NotificationType5=Z0e;var eme=class extends ia{static{a(this,"NotificationType6")}constructor(e){super(e,6)}};mn.NotificationType6=eme;var tme=class extends ia{static{a(this,"NotificationType7")}constructor(e){super(e,7)}};mn.NotificationType7=tme;var rme=class extends ia{static{a(this,"NotificationType8")}constructor(e){super(e,8)}};mn.NotificationType8=rme;var nme=class extends ia{static{a(this,"NotificationType9")}constructor(e){super(e,9)}};mn.NotificationType9=nme;var ALe;(function(t){function e(o){let s=o;return s&&p2.string(s.method)&&(p2.string(s.id)||p2.number(s.id))}a(e,"isRequest"),t.isRequest=e;function r(o){let s=o;return s&&p2.string(s.method)&&o.id===void 0}a(r,"isNotification"),t.isNotification=r;function n(o){let s=o;return s&&(s.result!==void 0||!!s.error)&&(p2.string(s.id)||p2.number(s.id)||s.id===null)}a(n,"isResponse"),t.isResponse=n})(ALe||(mn.Message=ALe={}))});var sme=W(FI=>{"use strict";f();var yLe;Object.defineProperty(FI,"__esModule",{value:!0});FI.LRUCache=FI.LinkedMap=FI.Touch=void 0;var Fd;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Fd||(FI.Touch=Fd={}));var RG=class{static{a(this,"LinkedMap")}constructor(){this[yLe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=Fd.None){let n=this._map.get(e);if(n)return r!==Fd.None&&this.touch(n,r),n.value}set(e,r,n=Fd.None){let o=this._map.get(e);if(o)o.value=r,n!==Fd.None&&this.touch(o,n);else{switch(o={key:e,value:r,next:void 0,previous:void 0},n){case Fd.None:this.addItemLast(o);break;case Fd.First:this.addItemFirst(o);break;case Fd.Last:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,o=this._head;for(;o;){if(r?e.bind(r)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:a(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:a(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:a(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}},"next")};return n}[(yLe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Fd.First&&r!==Fd.Last)){if(r===Fd.First){if(e===this._head)return;let n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===Fd.Last){if(e===this._tail)return;let n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};FI.LinkedMap=RG;var ome=class extends RG{static{a(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=Fd.AsNew){return super.get(e,r)}peek(e){return super.get(e,Fd.None)}set(e,r){return super.set(e,r,Fd.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};FI.LRUCache=ome});var vLe=W(kG=>{"use strict";f();Object.defineProperty(kG,"__esModule",{value:!0});kG.Disposable=void 0;var CLe;(function(t){function e(r){return{dispose:r}}a(e,"create"),t.create=e})(CLe||(kG.Disposable=CLe={}))});var OI=W(lme=>{"use strict";f();Object.defineProperty(lme,"__esModule",{value:!0});var ame;function cme(){if(ame===void 0)throw new Error("No runtime abstraction layer installed");return ame}a(cme,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");ame=r}a(e,"install"),t.install=e})(cme||(cme={}));lme.default=cme});var wD=W(TD=>{"use strict";f();Object.defineProperty(TD,"__esModule",{value:!0});TD.Emitter=TD.Event=void 0;var G4t=OI(),xLe;(function(t){let e={dispose(){}};t.None=function(){return e}})(xLe||(TD.Event=xLe={}));var ume=class{static{a(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:a(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let o=0,s=this._callbacks.length;o<s;o++)if(this._callbacks[o]===e)if(this._contexts[o]===r){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),o=this._contexts.slice(0);for(let s=0,c=n.length;s<c;s++)try{r.push(n[s].apply(o[s],e))}catch(l){(0,G4t.default)().console.error(l)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},PG=class t{static{a(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new ume),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let o={dispose:a(()=>{this._callbacks&&(this._callbacks.remove(e,r),o.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};TD.Emitter=PG;PG._noop=function(){}});var NG=W(_D=>{"use strict";f();Object.defineProperty(_D,"__esModule",{value:!0});_D.CancellationTokenSource=_D.CancellationToken=void 0;var V4t=OI(),z4t=ID(),dme=wD(),DG;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:dme.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:dme.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||z4t.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}a(e,"is"),t.is=e})(DG||(_D.CancellationToken=DG={}));var K4t=Object.freeze(function(t,e){let r=(0,V4t.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),BG=class{static{a(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?K4t:(this._emitter||(this._emitter=new dme.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},fme=class{static{a(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new BG),this._token}cancel(){this._token?this._token.cancel():this._token=DG.Cancelled}dispose(){this._token?this._token instanceof BG&&this._token.dispose():this._token=DG.None}};_D.CancellationTokenSource=fme});var ELe=W(SD=>{"use strict";f();Object.defineProperty(SD,"__esModule",{value:!0});SD.SharedArrayReceiverStrategy=SD.SharedArraySenderStrategy=void 0;var Y4t=NG(),x6;(function(t){t.Continue=0,t.Cancelled=1})(x6||(x6={}));var pme=class{static{a(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=x6.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let o=new Int32Array(n,0,1);Atomics.store(o,0,x6.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};SD.SharedArraySenderStrategy=pme;var mme=class{static{a(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===x6.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},hme=class{static{a(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new mme(e)}cancel(){}dispose(){}},gme=class{static{a(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new Y4t.CancellationTokenSource:new hme(r)}};SD.SharedArrayReceiverStrategy=gme});var yme=W(MG=>{"use strict";f();Object.defineProperty(MG,"__esModule",{value:!0});MG.Semaphore=void 0;var J4t=OI(),Ame=class{static{a(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,J4t.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};MG.Semaphore=Ame});var ILe=W(QI=>{"use strict";f();Object.defineProperty(QI,"__esModule",{value:!0});QI.ReadableStreamMessageReader=QI.AbstractMessageReader=QI.MessageReader=void 0;var vme=OI(),RD=ID(),Cme=wD(),X4t=yme(),bLe;(function(t){function e(r){let n=r;return n&&RD.func(n.listen)&&RD.func(n.dispose)&&RD.func(n.onError)&&RD.func(n.onClose)&&RD.func(n.onPartialMessage)}a(e,"is"),t.is=e})(bLe||(QI.MessageReader=bLe={}));var LG=class{static{a(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new Cme.Emitter,this.closeEmitter=new Cme.Emitter,this.partialMessageEmitter=new Cme.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${RD.string(e.message)?e.message:"unknown"}`)}};QI.AbstractMessageReader=LG;var xme;(function(t){function e(r){let n,o,s,c=new Map,l,u=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(s=r.contentDecoder,c.set(s.name,s)),r.contentDecoders!==void 0)for(let d of r.contentDecoders)c.set(d.name,d);if(r.contentTypeDecoder!==void 0&&(l=r.contentTypeDecoder,u.set(l.name,l)),r.contentTypeDecoders!==void 0)for(let d of r.contentTypeDecoders)u.set(d.name,d)}return l===void 0&&(l=(0,vme.default)().applicationJson.decoder,u.set(l.name,l)),{charset:n,contentDecoder:s,contentDecoders:c,contentTypeDecoder:l,contentTypeDecoders:u}}a(e,"fromOptions"),t.fromOptions=e})(xme||(xme={}));var Eme=class extends LG{static{a(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=xme.fromOptions(r),this.buffer=(0,vme.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new X4t.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let o=n.get("content-length");if(!o){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let s=parseInt(o);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${o}`));return}this.nextMessageLength=s}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,o=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(o)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,vme.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};QI.ReadableStreamMessageReader=Eme});var RLe=W(UI=>{"use strict";f();Object.defineProperty(UI,"__esModule",{value:!0});UI.WriteableStreamMessageWriter=UI.AbstractMessageWriter=UI.MessageWriter=void 0;var TLe=OI(),E6=ID(),Z4t=yme(),wLe=wD(),eDt="Content-Length: ",_Le=`\r
`,SLe;(function(t){function e(r){let n=r;return n&&E6.func(n.dispose)&&E6.func(n.onClose)&&E6.func(n.onError)&&E6.func(n.write)}a(e,"is"),t.is=e})(SLe||(UI.MessageWriter=SLe={}));var FG=class{static{a(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new wLe.Emitter,this.closeEmitter=new wLe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${E6.string(e.message)?e.message:"unknown"}`)}};UI.AbstractMessageWriter=FG;var bme;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,TLe.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,TLe.default)().applicationJson.encoder}}a(e,"fromOptions"),t.fromOptions=e})(bme||(bme={}));var Ime=class extends FG{static{a(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=bme.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Z4t.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let o=[];return o.push(eDt,n.byteLength.toString(),_Le),o.push(_Le),this.doWrite(e,o,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(o){return this.handleError(o,e),Promise.reject(o)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};UI.WriteableStreamMessageWriter=Ime});var kLe=W(OG=>{"use strict";f();Object.defineProperty(OG,"__esModule",{value:!0});OG.AbstractMessageBuffer=void 0;var tDt=13,rDt=10,nDt=`\r
`,Tme=class{static{a(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,o=0,s=0;e:for(;n<this._chunks.length;){let d=this._chunks[n];for(o=0;o<d.length;){switch(d[o]){case tDt:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case rDt:switch(r){case 1:r=2;break;case 3:r=4,o++;break e;default:r=0}break;default:r=0}o++}s+=d.byteLength,n++}if(r!==4)return;let c=this._read(s+o),l=new Map,u=this.toString(c,"ascii").split(nDt);if(u.length<2)return l;for(let d=0;d<u.length-2;d++){let p=u[d],m=p.indexOf(":");if(m===-1)throw new Error(`Message header must separate key and value using ':'
${p}`);let h=p.substr(0,m),g=p.substr(m+1).trim();l.set(e?h.toLowerCase():h,g)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],c=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,c}let r=this.allocNative(e),n=0,o=0;for(;e>0;){let s=this._chunks[o];if(s.byteLength>e){let c=s.slice(0,e);r.set(c,n),n+=e,this._chunks[o]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}};OG.AbstractMessageBuffer=Tme});var MLe=W(Ai=>{"use strict";f();Object.defineProperty(Ai,"__esModule",{value:!0});Ai.createMessageConnection=Ai.ConnectionOptions=Ai.MessageStrategy=Ai.CancellationStrategy=Ai.CancellationSenderStrategy=Ai.CancellationReceiverStrategy=Ai.RequestCancellationReceiverStrategy=Ai.IdCancellationReceiverStrategy=Ai.ConnectionStrategy=Ai.ConnectionError=Ai.ConnectionErrors=Ai.LogTraceNotification=Ai.SetTraceNotification=Ai.TraceFormat=Ai.TraceValues=Ai.Trace=Ai.NullLogger=Ai.ProgressType=Ai.ProgressToken=void 0;var PLe=OI(),Ja=ID(),Hn=ime(),DLe=sme(),b6=wD(),wme=NG(),w6;(function(t){t.type=new Hn.NotificationType("$/cancelRequest")})(w6||(w6={}));var _me;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}a(e,"is"),t.is=e})(_me||(Ai.ProgressToken=_me={}));var I6;(function(t){t.type=new Hn.NotificationType("$/progress")})(I6||(I6={}));var Sme=class{static{a(this,"ProgressType")}constructor(){}};Ai.ProgressType=Sme;var Rme;(function(t){function e(r){return Ja.func(r)}a(e,"is"),t.is=e})(Rme||(Rme={}));Ai.NullLogger=Object.freeze({error:a(()=>{},"error"),warn:a(()=>{},"warn"),info:a(()=>{},"info"),log:a(()=>{},"log")});var Jo;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Jo||(Ai.Trace=Jo={}));var BLe;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(BLe||(Ai.TraceValues=BLe={}));(function(t){function e(n){if(!Ja.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}a(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}a(r,"toString"),t.toString=r})(Jo||(Ai.Trace=Jo={}));var S0;(function(t){t.Text="text",t.JSON="json"})(S0||(Ai.TraceFormat=S0={}));(function(t){function e(r){return Ja.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}a(e,"fromString"),t.fromString=e})(S0||(Ai.TraceFormat=S0={}));var kme;(function(t){t.type=new Hn.NotificationType("$/setTrace")})(kme||(Ai.SetTraceNotification=kme={}));var QG;(function(t){t.type=new Hn.NotificationType("$/logTrace")})(QG||(Ai.LogTraceNotification=QG={}));var T6;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(T6||(Ai.ConnectionErrors=T6={}));var kD=class t extends Error{static{a(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};Ai.ConnectionError=kD;var Pme;(function(t){function e(r){let n=r;return n&&Ja.func(n.cancelUndispatched)}a(e,"is"),t.is=e})(Pme||(Ai.ConnectionStrategy=Pme={}));var UG;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Ja.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ja.func(n.dispose))}a(e,"is"),t.is=e})(UG||(Ai.IdCancellationReceiverStrategy=UG={}));var Dme;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Ja.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ja.func(n.dispose))}a(e,"is"),t.is=e})(Dme||(Ai.RequestCancellationReceiverStrategy=Dme={}));var qG;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new wme.CancellationTokenSource}});function e(r){return UG.is(r)||Dme.is(r)}a(e,"is"),t.is=e})(qG||(Ai.CancellationReceiverStrategy=qG={}));var HG;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(w6.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Ja.func(n.sendCancellation)&&Ja.func(n.cleanup)}a(e,"is"),t.is=e})(HG||(Ai.CancellationSenderStrategy=HG={}));var WG;(function(t){t.Message=Object.freeze({receiver:qG.Message,sender:HG.Message});function e(r){let n=r;return n&&qG.is(n.receiver)&&HG.is(n.sender)}a(e,"is"),t.is=e})(WG||(Ai.CancellationStrategy=WG={}));var $G;(function(t){function e(r){let n=r;return n&&Ja.func(n.handleMessage)}a(e,"is"),t.is=e})($G||(Ai.MessageStrategy=$G={}));var NLe;(function(t){function e(r){let n=r;return n&&(WG.is(n.cancellationStrategy)||Pme.is(n.connectionStrategy)||$G.is(n.messageStrategy))}a(e,"is"),t.is=e})(NLe||(Ai.ConnectionOptions=NLe={}));var hA;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(hA||(hA={}));function iDt(t,e,r,n){let o=r!==void 0?r:Ai.NullLogger,s=0,c=0,l=0,u="2.0",d,p=new Map,m,h=new Map,g=new Map,A,y=new DLe.LinkedMap,v=new Map,b=new Set,I=new Map,_=Jo.Off,k=S0.Text,N,F=hA.New,O=new b6.Emitter,Y=new b6.Emitter,z=new b6.Emitter,V=new b6.Emitter,U=new b6.Emitter,H=n&&n.cancellationStrategy?n.cancellationStrategy:WG.Message;function ee(xe){if(xe===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+xe.toString()}a(ee,"createRequestQueueKey");function J(xe){return xe===null?"res-unknown-"+(++l).toString():"res-"+xe.toString()}a(J,"createResponseQueueKey");function G(){return"not-"+(++c).toString()}a(G,"createNotificationQueueKey");function j(xe,Ve){Hn.Message.isRequest(Ve)?xe.set(ee(Ve.id),Ve):Hn.Message.isResponse(Ve)?xe.set(J(Ve.id),Ve):xe.set(G(),Ve)}a(j,"addMessageToQueue");function Z(xe){}a(Z,"cancelUndispatched");function ie(){return F===hA.Listening}a(ie,"isListening");function ne(){return F===hA.Closed}a(ne,"isClosed");function re(){return F===hA.Disposed}a(re,"isDisposed");function fe(){(F===hA.New||F===hA.Listening)&&(F=hA.Closed,Y.fire(void 0))}a(fe,"closeHandler");function ye(xe){O.fire([xe,void 0,void 0])}a(ye,"readErrorHandler");function Qe(xe){O.fire(xe)}a(Qe,"writeErrorHandler"),t.onClose(fe),t.onError(ye),e.onClose(fe),e.onError(Qe);function we(){A||y.size===0||(A=(0,PLe.default)().timer.setImmediate(()=>{A=void 0,Oe()}))}a(we,"triggerMessageQueue");function Xe(xe){Hn.Message.isRequest(xe)?Rt(xe):Hn.Message.isNotification(xe)?At(xe):Hn.Message.isResponse(xe)?Et(xe):de(xe)}a(Xe,"handleMessage");function Oe(){if(y.size===0)return;let xe=y.shift();try{let Ve=n?.messageStrategy;$G.is(Ve)?Ve.handleMessage(xe,Xe):Xe(xe)}finally{we()}}a(Oe,"processMessageQueue");let ut=a(xe=>{try{if(Hn.Message.isNotification(xe)&&xe.method===w6.type.method){let Ve=xe.params.id,mt=ee(Ve),wt=y.get(mt);if(Hn.Message.isRequest(wt)){let tr=n?.connectionStrategy,Sr=tr&&tr.cancelUndispatched?tr.cancelUndispatched(wt,Z):void 0;if(Sr&&(Sr.error!==void 0||Sr.result!==void 0)){y.delete(mt),I.delete(Ve),Sr.id=wt.id,ce(Sr,xe.method,Date.now()),e.write(Sr).catch(()=>o.error("Sending response for canceled message failed."));return}}let ar=I.get(Ve);if(ar!==void 0){ar.cancel(),He(xe);return}else b.add(Ve)}j(y,xe)}finally{we()}},"callback");function Rt(xe){if(re())return;function Ve(or,dr,sr){let Fr={jsonrpc:u,id:xe.id};or instanceof Hn.ResponseError?Fr.error=or.toJson():Fr.result=or===void 0?null:or,ce(Fr,dr,sr),e.write(Fr).catch(()=>o.error("Sending response failed."))}a(Ve,"reply");function mt(or,dr,sr){let Fr={jsonrpc:u,id:xe.id,error:or.toJson()};ce(Fr,dr,sr),e.write(Fr).catch(()=>o.error("Sending response failed."))}a(mt,"replyError");function wt(or,dr,sr){or===void 0&&(or=null);let Fr={jsonrpc:u,id:xe.id,result:or};ce(Fr,dr,sr),e.write(Fr).catch(()=>o.error("Sending response failed."))}a(wt,"replySuccess"),ue(xe);let ar=p.get(xe.method),tr,Sr;ar&&(tr=ar.type,Sr=ar.handler);let fr=Date.now();if(Sr||d){let or=xe.id??String(Date.now()),dr=UG.is(H.receiver)?H.receiver.createCancellationTokenSource(or):H.receiver.createCancellationTokenSource(xe);xe.id!==null&&b.has(xe.id)&&dr.cancel(),xe.id!==null&&I.set(or,dr);try{let sr;if(Sr)if(xe.params===void 0){if(tr!==void 0&&tr.numberOfParams!==0){mt(new Hn.ResponseError(Hn.ErrorCodes.InvalidParams,`Request ${xe.method} defines ${tr.numberOfParams} params but received none.`),xe.method,fr);return}sr=Sr(dr.token)}else if(Array.isArray(xe.params)){if(tr!==void 0&&tr.parameterStructures===Hn.ParameterStructures.byName){mt(new Hn.ResponseError(Hn.ErrorCodes.InvalidParams,`Request ${xe.method} defines parameters by name but received parameters by position`),xe.method,fr);return}sr=Sr(...xe.params,dr.token)}else{if(tr!==void 0&&tr.parameterStructures===Hn.ParameterStructures.byPosition){mt(new Hn.ResponseError(Hn.ErrorCodes.InvalidParams,`Request ${xe.method} defines parameters by position but received parameters by name`),xe.method,fr);return}sr=Sr(xe.params,dr.token)}else d&&(sr=d(xe.method,xe.params,dr.token));let Fr=sr;sr?Fr.then?Fr.then(Jr=>{I.delete(or),Ve(Jr,xe.method,fr)},Jr=>{I.delete(or),Jr instanceof Hn.ResponseError?mt(Jr,xe.method,fr):Jr&&Ja.string(Jr.message)?mt(new Hn.ResponseError(Hn.ErrorCodes.InternalError,`Request ${xe.method} failed with message: ${Jr.message}`),xe.method,fr):mt(new Hn.ResponseError(Hn.ErrorCodes.InternalError,`Request ${xe.method} failed unexpectedly without providing any details.`),xe.method,fr)}):(I.delete(or),Ve(sr,xe.method,fr)):(I.delete(or),wt(sr,xe.method,fr))}catch(sr){I.delete(or),sr instanceof Hn.ResponseError?Ve(sr,xe.method,fr):sr&&Ja.string(sr.message)?mt(new Hn.ResponseError(Hn.ErrorCodes.InternalError,`Request ${xe.method} failed with message: ${sr.message}`),xe.method,fr):mt(new Hn.ResponseError(Hn.ErrorCodes.InternalError,`Request ${xe.method} failed unexpectedly without providing any details.`),xe.method,fr)}}else mt(new Hn.ResponseError(Hn.ErrorCodes.MethodNotFound,`Unhandled method ${xe.method}`),xe.method,fr)}a(Rt,"handleRequest");function Et(xe){if(!re())if(xe.id===null)xe.error?o.error(`Received response message without id: Error is: 
${JSON.stringify(xe.error,void 0,4)}`):o.error("Received response message without id. No further error information provided.");else{let Ve=xe.id,mt=v.get(Ve);if(Me(xe,mt),mt!==void 0){v.delete(Ve);try{if(xe.error){let wt=xe.error;mt.reject(new Hn.ResponseError(wt.code,wt.message,wt.data))}else if(xe.result!==void 0)mt.resolve(xe.result);else throw new Error("Should never happen.")}catch(wt){wt.message?o.error(`Response handler '${mt.method}' failed with message: ${wt.message}`):o.error(`Response handler '${mt.method}' failed unexpectedly.`)}}}}a(Et,"handleResponse");function At(xe){if(re())return;let Ve,mt;if(xe.method===w6.type.method){let wt=xe.params.id;b.delete(wt),He(xe);return}else{let wt=h.get(xe.method);wt&&(mt=wt.handler,Ve=wt.type)}if(mt||m)try{if(He(xe),mt)if(xe.params===void 0)Ve!==void 0&&Ve.numberOfParams!==0&&Ve.parameterStructures!==Hn.ParameterStructures.byName&&o.error(`Notification ${xe.method} defines ${Ve.numberOfParams} params but received none.`),mt();else if(Array.isArray(xe.params)){let wt=xe.params;xe.method===I6.type.method&&wt.length===2&&_me.is(wt[0])?mt({token:wt[0],value:wt[1]}):(Ve!==void 0&&(Ve.parameterStructures===Hn.ParameterStructures.byName&&o.error(`Notification ${xe.method} defines parameters by name but received parameters by position`),Ve.numberOfParams!==xe.params.length&&o.error(`Notification ${xe.method} defines ${Ve.numberOfParams} params but received ${wt.length} arguments`)),mt(...wt))}else Ve!==void 0&&Ve.parameterStructures===Hn.ParameterStructures.byPosition&&o.error(`Notification ${xe.method} defines parameters by position but received parameters by name`),mt(xe.params);else m&&m(xe.method,xe.params)}catch(wt){wt.message?o.error(`Notification handler '${xe.method}' failed with message: ${wt.message}`):o.error(`Notification handler '${xe.method}' failed unexpectedly.`)}else z.fire(xe)}a(At,"handleNotification");function de(xe){if(!xe){o.error("Received empty message.");return}o.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(xe,null,4)}`);let Ve=xe;if(Ja.string(Ve.id)||Ja.number(Ve.id)){let mt=Ve.id,wt=v.get(mt);wt&&wt.reject(new Error("The received response has neither a result nor an error property."))}}a(de,"handleInvalidMessage");function qe(xe){if(xe!=null)switch(_){case Jo.Verbose:return JSON.stringify(xe,null,4);case Jo.Compact:return JSON.stringify(xe);default:return}}a(qe,"stringifyTrace");function Ce(xe){if(!(_===Jo.Off||!N))if(k===S0.Text){let Ve;(_===Jo.Verbose||_===Jo.Compact)&&xe.params&&(Ve=`Params: ${qe(xe.params)}

`),N.log(`Sending request '${xe.method} - (${xe.id})'.`,Ve)}else be("send-request",xe)}a(Ce,"traceSendingRequest");function $e(xe){if(!(_===Jo.Off||!N))if(k===S0.Text){let Ve;(_===Jo.Verbose||_===Jo.Compact)&&(xe.params?Ve=`Params: ${qe(xe.params)}

`:Ve=`No parameters provided.

`),N.log(`Sending notification '${xe.method}'.`,Ve)}else be("send-notification",xe)}a($e,"traceSendingNotification");function ce(xe,Ve,mt){if(!(_===Jo.Off||!N))if(k===S0.Text){let wt;(_===Jo.Verbose||_===Jo.Compact)&&(xe.error&&xe.error.data?wt=`Error data: ${qe(xe.error.data)}

`:xe.result?wt=`Result: ${qe(xe.result)}

`:xe.error===void 0&&(wt=`No result returned.

`)),N.log(`Sending response '${Ve} - (${xe.id})'. Processing request took ${Date.now()-mt}ms`,wt)}else be("send-response",xe)}a(ce,"traceSendingResponse");function ue(xe){if(!(_===Jo.Off||!N))if(k===S0.Text){let Ve;(_===Jo.Verbose||_===Jo.Compact)&&xe.params&&(Ve=`Params: ${qe(xe.params)}

`),N.log(`Received request '${xe.method} - (${xe.id})'.`,Ve)}else be("receive-request",xe)}a(ue,"traceReceivedRequest");function He(xe){if(!(_===Jo.Off||!N||xe.method===QG.type.method))if(k===S0.Text){let Ve;(_===Jo.Verbose||_===Jo.Compact)&&(xe.params?Ve=`Params: ${qe(xe.params)}

`:Ve=`No parameters provided.

`),N.log(`Received notification '${xe.method}'.`,Ve)}else be("receive-notification",xe)}a(He,"traceReceivedNotification");function Me(xe,Ve){if(!(_===Jo.Off||!N))if(k===S0.Text){let mt;if((_===Jo.Verbose||_===Jo.Compact)&&(xe.error&&xe.error.data?mt=`Error data: ${qe(xe.error.data)}

`:xe.result?mt=`Result: ${qe(xe.result)}

`:xe.error===void 0&&(mt=`No result returned.

`)),Ve){let wt=xe.error?` Request failed: ${xe.error.message} (${xe.error.code}).`:"";N.log(`Received response '${Ve.method} - (${xe.id})' in ${Date.now()-Ve.timerStart}ms.${wt}`,mt)}else N.log(`Received response ${xe.id} without active response promise.`,mt)}else be("receive-response",xe)}a(Me,"traceReceivedResponse");function be(xe,Ve){if(!N||_===Jo.Off)return;let mt={isLSPMessage:!0,type:xe,message:Ve,timestamp:Date.now()};N.log(mt)}a(be,"logLSPMessage");function Ge(){if(ne())throw new kD(T6.Closed,"Connection is closed.");if(re())throw new kD(T6.Disposed,"Connection is disposed.")}a(Ge,"throwIfClosedOrDisposed");function rt(){if(ie())throw new kD(T6.AlreadyListening,"Connection is already listening")}a(rt,"throwIfListening");function ht(){if(!ie())throw new Error("Call listen() first.")}a(ht,"throwIfNotListening");function Ot(xe){return xe===void 0?null:xe}a(Ot,"undefinedToNull");function Zt(xe){if(xe!==null)return xe}a(Zt,"nullToUndefined");function qt(xe){return xe!=null&&!Array.isArray(xe)&&typeof xe=="object"}a(qt,"isNamedParam");function Yr(xe,Ve){switch(xe){case Hn.ParameterStructures.auto:return qt(Ve)?Zt(Ve):[Ot(Ve)];case Hn.ParameterStructures.byName:if(!qt(Ve))throw new Error("Received parameters by name but param is not an object literal.");return Zt(Ve);case Hn.ParameterStructures.byPosition:return[Ot(Ve)];default:throw new Error(`Unknown parameter structure ${xe.toString()}`)}}a(Yr,"computeSingleParam");function Mr(xe,Ve){let mt,wt=xe.numberOfParams;switch(wt){case 0:mt=void 0;break;case 1:mt=Yr(xe.parameterStructures,Ve[0]);break;default:mt=[];for(let ar=0;ar<Ve.length&&ar<wt;ar++)mt.push(Ot(Ve[ar]));if(Ve.length<wt)for(let ar=Ve.length;ar<wt;ar++)mt.push(null);break}return mt}a(Mr,"computeMessageParams");let fn={sendNotification:a((xe,...Ve)=>{Ge();let mt,wt;if(Ja.string(xe)){mt=xe;let tr=Ve[0],Sr=0,fr=Hn.ParameterStructures.auto;Hn.ParameterStructures.is(tr)&&(Sr=1,fr=tr);let or=Ve.length,dr=or-Sr;switch(dr){case 0:wt=void 0;break;case 1:wt=Yr(fr,Ve[Sr]);break;default:if(fr===Hn.ParameterStructures.byName)throw new Error(`Received ${dr} parameters for 'by Name' notification parameter structure.`);wt=Ve.slice(Sr,or).map(sr=>Ot(sr));break}}else{let tr=Ve;mt=xe.method,wt=Mr(xe,tr)}let ar={jsonrpc:u,method:mt,params:wt};return $e(ar),e.write(ar).catch(tr=>{throw o.error("Sending notification failed."),tr})},"sendNotification"),onNotification:a((xe,Ve)=>{Ge();let mt;return Ja.func(xe)?m=xe:Ve&&(Ja.string(xe)?(mt=xe,h.set(xe,{type:void 0,handler:Ve})):(mt=xe.method,h.set(xe.method,{type:xe,handler:Ve}))),{dispose:a(()=>{mt!==void 0?h.delete(mt):m=void 0},"dispose")}},"onNotification"),onProgress:a((xe,Ve,mt)=>{if(g.has(Ve))throw new Error(`Progress handler for token ${Ve} already registered`);return g.set(Ve,mt),{dispose:a(()=>{g.delete(Ve)},"dispose")}},"onProgress"),sendProgress:a((xe,Ve,mt)=>fn.sendNotification(I6.type,{token:Ve,value:mt}),"sendProgress"),onUnhandledProgress:V.event,sendRequest:a((xe,...Ve)=>{Ge(),ht();let mt,wt,ar;if(Ja.string(xe)){mt=xe;let or=Ve[0],dr=Ve[Ve.length-1],sr=0,Fr=Hn.ParameterStructures.auto;Hn.ParameterStructures.is(or)&&(sr=1,Fr=or);let Jr=Ve.length;wme.CancellationToken.is(dr)&&(Jr=Jr-1,ar=dr);let ln=Jr-sr;switch(ln){case 0:wt=void 0;break;case 1:wt=Yr(Fr,Ve[sr]);break;default:if(Fr===Hn.ParameterStructures.byName)throw new Error(`Received ${ln} parameters for 'by Name' request parameter structure.`);wt=Ve.slice(sr,Jr).map(xn=>Ot(xn));break}}else{let or=Ve;mt=xe.method,wt=Mr(xe,or);let dr=xe.numberOfParams;ar=wme.CancellationToken.is(or[dr])?or[dr]:void 0}let tr=s++,Sr;ar&&(Sr=ar.onCancellationRequested(()=>{let or=H.sender.sendCancellation(fn,tr);return or===void 0?(o.log(`Received no promise from cancellation strategy when cancelling id ${tr}`),Promise.resolve()):or.catch(()=>{o.log(`Sending cancellation messages for id ${tr} failed`)})}));let fr={jsonrpc:u,id:tr,method:mt,params:wt};return Ce(fr),typeof H.sender.enableCancellation=="function"&&H.sender.enableCancellation(fr),new Promise(async(or,dr)=>{let sr=a(ln=>{or(ln),H.sender.cleanup(tr),Sr?.dispose()},"resolveWithCleanup"),Fr=a(ln=>{dr(ln),H.sender.cleanup(tr),Sr?.dispose()},"rejectWithCleanup"),Jr={method:mt,timerStart:Date.now(),resolve:sr,reject:Fr};try{await e.write(fr),v.set(tr,Jr)}catch(ln){throw o.error("Sending request failed."),Jr.reject(new Hn.ResponseError(Hn.ErrorCodes.MessageWriteError,ln.message?ln.message:"Unknown reason")),ln}})},"sendRequest"),onRequest:a((xe,Ve)=>{Ge();let mt=null;return Rme.is(xe)?(mt=void 0,d=xe):Ja.string(xe)?(mt=null,Ve!==void 0&&(mt=xe,p.set(xe,{handler:Ve,type:void 0}))):Ve!==void 0&&(mt=xe.method,p.set(xe.method,{type:xe,handler:Ve})),{dispose:a(()=>{mt!==null&&(mt!==void 0?p.delete(mt):d=void 0)},"dispose")}},"onRequest"),hasPendingResponse:a(()=>v.size>0,"hasPendingResponse"),trace:a(async(xe,Ve,mt)=>{let wt=!1,ar=S0.Text;mt!==void 0&&(Ja.boolean(mt)?wt=mt:(wt=mt.sendNotification||!1,ar=mt.traceFormat||S0.Text)),_=xe,k=ar,_===Jo.Off?N=void 0:N=Ve,wt&&!ne()&&!re()&&await fn.sendNotification(kme.type,{value:Jo.toString(xe)})},"trace"),onError:O.event,onClose:Y.event,onUnhandledNotification:z.event,onDispose:U.event,end:a(()=>{e.end()},"end"),dispose:a(()=>{if(re())return;F=hA.Disposed,U.fire(void 0);let xe=new Hn.ResponseError(Hn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ve of v.values())Ve.reject(xe);v=new Map,I=new Map,b=new Set,y=new DLe.LinkedMap,Ja.func(e.dispose)&&e.dispose(),Ja.func(t.dispose)&&t.dispose()},"dispose"),listen:a(()=>{Ge(),rt(),F=hA.Listening,t.listen(ut)},"listen"),inspect:a(()=>{(0,PLe.default)().console.log("inspect")},"inspect")};return fn.onNotification(QG.type,xe=>{if(_===Jo.Off||!N)return;let Ve=_===Jo.Verbose||_===Jo.Compact;N.log(xe.message,Ve?xe.verbose:void 0)}),fn.onNotification(I6.type,xe=>{let Ve=g.get(xe.token);Ve?Ve(xe.value):V.fire(xe)}),fn}a(iDt,"createMessageConnection");Ai.createMessageConnection=iDt});var jG=W(Ct=>{"use strict";f();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.ProgressType=Ct.ProgressToken=Ct.createMessageConnection=Ct.NullLogger=Ct.ConnectionOptions=Ct.ConnectionStrategy=Ct.AbstractMessageBuffer=Ct.WriteableStreamMessageWriter=Ct.AbstractMessageWriter=Ct.MessageWriter=Ct.ReadableStreamMessageReader=Ct.AbstractMessageReader=Ct.MessageReader=Ct.SharedArrayReceiverStrategy=Ct.SharedArraySenderStrategy=Ct.CancellationToken=Ct.CancellationTokenSource=Ct.Emitter=Ct.Event=Ct.Disposable=Ct.LRUCache=Ct.Touch=Ct.LinkedMap=Ct.ParameterStructures=Ct.NotificationType9=Ct.NotificationType8=Ct.NotificationType7=Ct.NotificationType6=Ct.NotificationType5=Ct.NotificationType4=Ct.NotificationType3=Ct.NotificationType2=Ct.NotificationType1=Ct.NotificationType0=Ct.NotificationType=Ct.ErrorCodes=Ct.ResponseError=Ct.RequestType9=Ct.RequestType8=Ct.RequestType7=Ct.RequestType6=Ct.RequestType5=Ct.RequestType4=Ct.RequestType3=Ct.RequestType2=Ct.RequestType1=Ct.RequestType0=Ct.RequestType=Ct.Message=Ct.RAL=void 0;Ct.MessageStrategy=Ct.CancellationStrategy=Ct.CancellationSenderStrategy=Ct.CancellationReceiverStrategy=Ct.ConnectionError=Ct.ConnectionErrors=Ct.LogTraceNotification=Ct.SetTraceNotification=Ct.TraceFormat=Ct.TraceValues=Ct.Trace=void 0;var Us=ime();Object.defineProperty(Ct,"Message",{enumerable:!0,get:a(function(){return Us.Message},"get")});Object.defineProperty(Ct,"RequestType",{enumerable:!0,get:a(function(){return Us.RequestType},"get")});Object.defineProperty(Ct,"RequestType0",{enumerable:!0,get:a(function(){return Us.RequestType0},"get")});Object.defineProperty(Ct,"RequestType1",{enumerable:!0,get:a(function(){return Us.RequestType1},"get")});Object.defineProperty(Ct,"RequestType2",{enumerable:!0,get:a(function(){return Us.RequestType2},"get")});Object.defineProperty(Ct,"RequestType3",{enumerable:!0,get:a(function(){return Us.RequestType3},"get")});Object.defineProperty(Ct,"RequestType4",{enumerable:!0,get:a(function(){return Us.RequestType4},"get")});Object.defineProperty(Ct,"RequestType5",{enumerable:!0,get:a(function(){return Us.RequestType5},"get")});Object.defineProperty(Ct,"RequestType6",{enumerable:!0,get:a(function(){return Us.RequestType6},"get")});Object.defineProperty(Ct,"RequestType7",{enumerable:!0,get:a(function(){return Us.RequestType7},"get")});Object.defineProperty(Ct,"RequestType8",{enumerable:!0,get:a(function(){return Us.RequestType8},"get")});Object.defineProperty(Ct,"RequestType9",{enumerable:!0,get:a(function(){return Us.RequestType9},"get")});Object.defineProperty(Ct,"ResponseError",{enumerable:!0,get:a(function(){return Us.ResponseError},"get")});Object.defineProperty(Ct,"ErrorCodes",{enumerable:!0,get:a(function(){return Us.ErrorCodes},"get")});Object.defineProperty(Ct,"NotificationType",{enumerable:!0,get:a(function(){return Us.NotificationType},"get")});Object.defineProperty(Ct,"NotificationType0",{enumerable:!0,get:a(function(){return Us.NotificationType0},"get")});Object.defineProperty(Ct,"NotificationType1",{enumerable:!0,get:a(function(){return Us.NotificationType1},"get")});Object.defineProperty(Ct,"NotificationType2",{enumerable:!0,get:a(function(){return Us.NotificationType2},"get")});Object.defineProperty(Ct,"NotificationType3",{enumerable:!0,get:a(function(){return Us.NotificationType3},"get")});Object.defineProperty(Ct,"NotificationType4",{enumerable:!0,get:a(function(){return Us.NotificationType4},"get")});Object.defineProperty(Ct,"NotificationType5",{enumerable:!0,get:a(function(){return Us.NotificationType5},"get")});Object.defineProperty(Ct,"NotificationType6",{enumerable:!0,get:a(function(){return Us.NotificationType6},"get")});Object.defineProperty(Ct,"NotificationType7",{enumerable:!0,get:a(function(){return Us.NotificationType7},"get")});Object.defineProperty(Ct,"NotificationType8",{enumerable:!0,get:a(function(){return Us.NotificationType8},"get")});Object.defineProperty(Ct,"NotificationType9",{enumerable:!0,get:a(function(){return Us.NotificationType9},"get")});Object.defineProperty(Ct,"ParameterStructures",{enumerable:!0,get:a(function(){return Us.ParameterStructures},"get")});var Bme=sme();Object.defineProperty(Ct,"LinkedMap",{enumerable:!0,get:a(function(){return Bme.LinkedMap},"get")});Object.defineProperty(Ct,"LRUCache",{enumerable:!0,get:a(function(){return Bme.LRUCache},"get")});Object.defineProperty(Ct,"Touch",{enumerable:!0,get:a(function(){return Bme.Touch},"get")});var oDt=vLe();Object.defineProperty(Ct,"Disposable",{enumerable:!0,get:a(function(){return oDt.Disposable},"get")});var LLe=wD();Object.defineProperty(Ct,"Event",{enumerable:!0,get:a(function(){return LLe.Event},"get")});Object.defineProperty(Ct,"Emitter",{enumerable:!0,get:a(function(){return LLe.Emitter},"get")});var FLe=NG();Object.defineProperty(Ct,"CancellationTokenSource",{enumerable:!0,get:a(function(){return FLe.CancellationTokenSource},"get")});Object.defineProperty(Ct,"CancellationToken",{enumerable:!0,get:a(function(){return FLe.CancellationToken},"get")});var OLe=ELe();Object.defineProperty(Ct,"SharedArraySenderStrategy",{enumerable:!0,get:a(function(){return OLe.SharedArraySenderStrategy},"get")});Object.defineProperty(Ct,"SharedArrayReceiverStrategy",{enumerable:!0,get:a(function(){return OLe.SharedArrayReceiverStrategy},"get")});var Nme=ILe();Object.defineProperty(Ct,"MessageReader",{enumerable:!0,get:a(function(){return Nme.MessageReader},"get")});Object.defineProperty(Ct,"AbstractMessageReader",{enumerable:!0,get:a(function(){return Nme.AbstractMessageReader},"get")});Object.defineProperty(Ct,"ReadableStreamMessageReader",{enumerable:!0,get:a(function(){return Nme.ReadableStreamMessageReader},"get")});var Mme=RLe();Object.defineProperty(Ct,"MessageWriter",{enumerable:!0,get:a(function(){return Mme.MessageWriter},"get")});Object.defineProperty(Ct,"AbstractMessageWriter",{enumerable:!0,get:a(function(){return Mme.AbstractMessageWriter},"get")});Object.defineProperty(Ct,"WriteableStreamMessageWriter",{enumerable:!0,get:a(function(){return Mme.WriteableStreamMessageWriter},"get")});var sDt=kLe();Object.defineProperty(Ct,"AbstractMessageBuffer",{enumerable:!0,get:a(function(){return sDt.AbstractMessageBuffer},"get")});var Ku=MLe();Object.defineProperty(Ct,"ConnectionStrategy",{enumerable:!0,get:a(function(){return Ku.ConnectionStrategy},"get")});Object.defineProperty(Ct,"ConnectionOptions",{enumerable:!0,get:a(function(){return Ku.ConnectionOptions},"get")});Object.defineProperty(Ct,"NullLogger",{enumerable:!0,get:a(function(){return Ku.NullLogger},"get")});Object.defineProperty(Ct,"createMessageConnection",{enumerable:!0,get:a(function(){return Ku.createMessageConnection},"get")});Object.defineProperty(Ct,"ProgressToken",{enumerable:!0,get:a(function(){return Ku.ProgressToken},"get")});Object.defineProperty(Ct,"ProgressType",{enumerable:!0,get:a(function(){return Ku.ProgressType},"get")});Object.defineProperty(Ct,"Trace",{enumerable:!0,get:a(function(){return Ku.Trace},"get")});Object.defineProperty(Ct,"TraceValues",{enumerable:!0,get:a(function(){return Ku.TraceValues},"get")});Object.defineProperty(Ct,"TraceFormat",{enumerable:!0,get:a(function(){return Ku.TraceFormat},"get")});Object.defineProperty(Ct,"SetTraceNotification",{enumerable:!0,get:a(function(){return Ku.SetTraceNotification},"get")});Object.defineProperty(Ct,"LogTraceNotification",{enumerable:!0,get:a(function(){return Ku.LogTraceNotification},"get")});Object.defineProperty(Ct,"ConnectionErrors",{enumerable:!0,get:a(function(){return Ku.ConnectionErrors},"get")});Object.defineProperty(Ct,"ConnectionError",{enumerable:!0,get:a(function(){return Ku.ConnectionError},"get")});Object.defineProperty(Ct,"CancellationReceiverStrategy",{enumerable:!0,get:a(function(){return Ku.CancellationReceiverStrategy},"get")});Object.defineProperty(Ct,"CancellationSenderStrategy",{enumerable:!0,get:a(function(){return Ku.CancellationSenderStrategy},"get")});Object.defineProperty(Ct,"CancellationStrategy",{enumerable:!0,get:a(function(){return Ku.CancellationStrategy},"get")});Object.defineProperty(Ct,"MessageStrategy",{enumerable:!0,get:a(function(){return Ku.MessageStrategy},"get")});var aDt=OI();Ct.RAL=aDt.default});var qLe=W(Qme=>{"use strict";f();Object.defineProperty(Qme,"__esModule",{value:!0});var QLe=require("util"),nx=jG(),GG=class t extends nx.AbstractMessageBuffer{static{a(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new QLe.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};GG.emptyBuffer=Buffer.allocUnsafe(0);var Lme=class{static{a(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),nx.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),nx.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),nx.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),nx.Disposable.create(()=>this.stream.off("data",e))}},Fme=class{static{a(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),nx.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),nx.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),nx.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,o)=>{let s=a(c=>{c==null?n():o(c)},"callback");typeof e=="string"?this.stream.write(e,r,s):this.stream.write(e,s)})}end(){this.stream.end()}},ULe=Object.freeze({messageBuffer:Object.freeze({create:a(t=>new GG(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:a((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:a((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new QLe.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:a(t=>new Lme(t),"asReadableStream"),asWritableStream:a(t=>new Fme(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:a(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:a(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:a(()=>clearInterval(n),"dispose")}}})});function Ome(){return ULe}a(Ome,"RIL");(function(t){function e(){nx.RAL.install(ULe)}a(e,"install"),t.install=e})(Ome||(Ome={}));Qme.default=Ome});var g2=W(Eo=>{"use strict";f();var cDt=Eo&&Eo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lDt=Eo&&Eo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&cDt(e,t,r)};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.createMessageConnection=Eo.createServerSocketTransport=Eo.createClientSocketTransport=Eo.createServerPipeTransport=Eo.createClientPipeTransport=Eo.generateRandomPipeName=Eo.StreamMessageWriter=Eo.StreamMessageReader=Eo.SocketMessageWriter=Eo.SocketMessageReader=Eo.PortMessageWriter=Eo.PortMessageReader=Eo.IPCMessageWriter=Eo.IPCMessageReader=void 0;var PD=qLe();PD.default.install();var HLe=require("path"),uDt=require("os"),dDt=require("crypto"),KG=require("net"),R0=jG();lDt(jG(),Eo);var Ume=class extends R0.AbstractMessageReader{static{a(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),R0.Disposable.create(()=>this.process.off("message",e))}};Eo.IPCMessageReader=Ume;var qme=class extends R0.AbstractMessageWriter{static{a(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Eo.IPCMessageWriter=qme;var Hme=class extends R0.AbstractMessageReader{static{a(this,"PortMessageReader")}constructor(e){super(),this.onData=new R0.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};Eo.PortMessageReader=Hme;var Wme=class extends R0.AbstractMessageWriter{static{a(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Eo.PortMessageWriter=Wme;var m2=class extends R0.ReadableStreamMessageReader{static{a(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,PD.default)().stream.asReadableStream(e),r)}};Eo.SocketMessageReader=m2;var h2=class extends R0.WriteableStreamMessageWriter{static{a(this,"SocketMessageWriter")}constructor(e,r){super((0,PD.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Eo.SocketMessageWriter=h2;var VG=class extends R0.ReadableStreamMessageReader{static{a(this,"StreamMessageReader")}constructor(e,r){super((0,PD.default)().stream.asReadableStream(e),r)}};Eo.StreamMessageReader=VG;var zG=class extends R0.WriteableStreamMessageWriter{static{a(this,"StreamMessageWriter")}constructor(e,r){super((0,PD.default)().stream.asWritableStream(e),r)}};Eo.StreamMessageWriter=zG;var WLe=process.env.XDG_RUNTIME_DIR,fDt=new Map([["linux",107],["darwin",103]]);function pDt(){let t=(0,dDt.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;WLe?e=HLe.join(WLe,`vscode-ipc-${t}.sock`):e=HLe.join(uDt.tmpdir(),`vscode-${t}.sock`);let r=fDt.get(process.platform);return r!==void 0&&e.length>r&&(0,PD.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}a(pDt,"generateRandomPipeName");Eo.generateRandomPipeName=pDt;function mDt(t,e="utf-8"){let r,n=new Promise((o,s)=>{r=o});return new Promise((o,s)=>{let c=(0,KG.createServer)(l=>{c.close(),r([new m2(l,e),new h2(l,e)])});c.on("error",s),c.listen(t,()=>{c.removeListener("error",s),o({onConnected:a(()=>n,"onConnected")})})})}a(mDt,"createClientPipeTransport");Eo.createClientPipeTransport=mDt;function hDt(t,e="utf-8"){let r=(0,KG.createConnection)(t);return[new m2(r,e),new h2(r,e)]}a(hDt,"createServerPipeTransport");Eo.createServerPipeTransport=hDt;function gDt(t,e="utf-8"){let r,n=new Promise((o,s)=>{r=o});return new Promise((o,s)=>{let c=(0,KG.createServer)(l=>{c.close(),r([new m2(l,e),new h2(l,e)])});c.on("error",s),c.listen(t,"127.0.0.1",()=>{c.removeListener("error",s),o({onConnected:a(()=>n,"onConnected")})})})}a(gDt,"createClientSocketTransport");Eo.createClientSocketTransport=gDt;function ADt(t,e="utf-8"){let r=(0,KG.createConnection)(t,"127.0.0.1");return[new m2(r,e),new h2(r,e)]}a(ADt,"createServerSocketTransport");Eo.createServerSocketTransport=ADt;function yDt(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}a(yDt,"isReadableStream");function CDt(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}a(CDt,"isWritableStream");function vDt(t,e,r,n){r||(r=R0.NullLogger);let o=yDt(t)?new VG(t):t,s=CDt(e)?new zG(e):e;return R0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,R0.createMessageConnection)(o,s,r,n)}a(vDt,"createMessageConnection");Eo.createMessageConnection=vDt});var $me=W((lKr,$Le)=>{"use strict";f();$Le.exports=g2()});var JG=W((jLe,YG)=>{f();(function(t){if(typeof YG=="object"&&typeof YG.exports=="object"){var e=t(require,jLe);e!==void 0&&(YG.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(X){function ve(Te){return typeof Te=="string"}a(ve,"is"),X.is=ve})(r||(e.DocumentUri=r={}));var n;(function(X){function ve(Te){return typeof Te=="string"}a(ve,"is"),X.is=ve})(n||(e.URI=n={}));var o;(function(X){X.MIN_VALUE=-2147483648,X.MAX_VALUE=2147483647;function ve(Te){return typeof Te=="number"&&X.MIN_VALUE<=Te&&Te<=X.MAX_VALUE}a(ve,"is"),X.is=ve})(o||(e.integer=o={}));var s;(function(X){X.MIN_VALUE=0,X.MAX_VALUE=2147483647;function ve(Te){return typeof Te=="number"&&X.MIN_VALUE<=Te&&Te<=X.MAX_VALUE}a(ve,"is"),X.is=ve})(s||(e.uinteger=s={}));var c;(function(X){function ve(Q,B){return Q===Number.MAX_VALUE&&(Q=s.MAX_VALUE),B===Number.MAX_VALUE&&(B=s.MAX_VALUE),{line:Q,character:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.uinteger(B.line)&&De.uinteger(B.character)}a(Te,"is"),X.is=Te})(c||(e.Position=c={}));var l;(function(X){function ve(Q,B,te,Ae){if(De.uinteger(Q)&&De.uinteger(B)&&De.uinteger(te)&&De.uinteger(Ae))return{start:c.create(Q,B),end:c.create(te,Ae)};if(c.is(Q)&&c.is(B))return{start:Q,end:B};throw new Error("Range#create called with invalid arguments[".concat(Q,", ").concat(B,", ").concat(te,", ").concat(Ae,"]"))}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&c.is(B.start)&&c.is(B.end)}a(Te,"is"),X.is=Te})(l||(e.Range=l={}));var u;(function(X){function ve(Q,B){return{uri:Q,range:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&l.is(B.range)&&(De.string(B.uri)||De.undefined(B.uri))}a(Te,"is"),X.is=Te})(u||(e.Location=u={}));var d;(function(X){function ve(Q,B,te,Ae){return{targetUri:Q,targetRange:B,targetSelectionRange:te,originSelectionRange:Ae}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&l.is(B.targetRange)&&De.string(B.targetUri)&&l.is(B.targetSelectionRange)&&(l.is(B.originSelectionRange)||De.undefined(B.originSelectionRange))}a(Te,"is"),X.is=Te})(d||(e.LocationLink=d={}));var p;(function(X){function ve(Q,B,te,Ae){return{red:Q,green:B,blue:te,alpha:Ae}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.numberRange(B.red,0,1)&&De.numberRange(B.green,0,1)&&De.numberRange(B.blue,0,1)&&De.numberRange(B.alpha,0,1)}a(Te,"is"),X.is=Te})(p||(e.Color=p={}));var m;(function(X){function ve(Q,B){return{range:Q,color:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&l.is(B.range)&&p.is(B.color)}a(Te,"is"),X.is=Te})(m||(e.ColorInformation=m={}));var h;(function(X){function ve(Q,B,te){return{label:Q,textEdit:B,additionalTextEdits:te}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.string(B.label)&&(De.undefined(B.textEdit)||N.is(B))&&(De.undefined(B.additionalTextEdits)||De.typedArray(B.additionalTextEdits,N.is))}a(Te,"is"),X.is=Te})(h||(e.ColorPresentation=h={}));var g;(function(X){X.Comment="comment",X.Imports="imports",X.Region="region"})(g||(e.FoldingRangeKind=g={}));var A;(function(X){function ve(Q,B,te,Ae,Re,ft){var St={startLine:Q,endLine:B};return De.defined(te)&&(St.startCharacter=te),De.defined(Ae)&&(St.endCharacter=Ae),De.defined(Re)&&(St.kind=Re),De.defined(ft)&&(St.collapsedText=ft),St}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.uinteger(B.startLine)&&De.uinteger(B.startLine)&&(De.undefined(B.startCharacter)||De.uinteger(B.startCharacter))&&(De.undefined(B.endCharacter)||De.uinteger(B.endCharacter))&&(De.undefined(B.kind)||De.string(B.kind))}a(Te,"is"),X.is=Te})(A||(e.FoldingRange=A={}));var y;(function(X){function ve(Q,B){return{location:Q,message:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&u.is(B.location)&&De.string(B.message)}a(Te,"is"),X.is=Te})(y||(e.DiagnosticRelatedInformation=y={}));var v;(function(X){X.Error=1,X.Warning=2,X.Information=3,X.Hint=4})(v||(e.DiagnosticSeverity=v={}));var b;(function(X){X.Unnecessary=1,X.Deprecated=2})(b||(e.DiagnosticTag=b={}));var I;(function(X){function ve(Te){var Q=Te;return De.objectLiteral(Q)&&De.string(Q.href)}a(ve,"is"),X.is=ve})(I||(e.CodeDescription=I={}));var _;(function(X){function ve(Q,B,te,Ae,Re,ft){var St={range:Q,message:B};return De.defined(te)&&(St.severity=te),De.defined(Ae)&&(St.code=Ae),De.defined(Re)&&(St.source=Re),De.defined(ft)&&(St.relatedInformation=ft),St}a(ve,"create"),X.create=ve;function Te(Q){var B,te=Q;return De.defined(te)&&l.is(te.range)&&De.string(te.message)&&(De.number(te.severity)||De.undefined(te.severity))&&(De.integer(te.code)||De.string(te.code)||De.undefined(te.code))&&(De.undefined(te.codeDescription)||De.string((B=te.codeDescription)===null||B===void 0?void 0:B.href))&&(De.string(te.source)||De.undefined(te.source))&&(De.undefined(te.relatedInformation)||De.typedArray(te.relatedInformation,y.is))}a(Te,"is"),X.is=Te})(_||(e.Diagnostic=_={}));var k;(function(X){function ve(Q,B){for(var te=[],Ae=2;Ae<arguments.length;Ae++)te[Ae-2]=arguments[Ae];var Re={title:Q,command:B};return De.defined(te)&&te.length>0&&(Re.arguments=te),Re}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.title)&&De.string(B.command)}a(Te,"is"),X.is=Te})(k||(e.Command=k={}));var N;(function(X){function ve(te,Ae){return{range:te,newText:Ae}}a(ve,"replace"),X.replace=ve;function Te(te,Ae){return{range:{start:te,end:te},newText:Ae}}a(Te,"insert"),X.insert=Te;function Q(te){return{range:te,newText:""}}a(Q,"del"),X.del=Q;function B(te){var Ae=te;return De.objectLiteral(Ae)&&De.string(Ae.newText)&&l.is(Ae.range)}a(B,"is"),X.is=B})(N||(e.TextEdit=N={}));var F;(function(X){function ve(Q,B,te){var Ae={label:Q};return B!==void 0&&(Ae.needsConfirmation=B),te!==void 0&&(Ae.description=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.string(B.label)&&(De.boolean(B.needsConfirmation)||B.needsConfirmation===void 0)&&(De.string(B.description)||B.description===void 0)}a(Te,"is"),X.is=Te})(F||(e.ChangeAnnotation=F={}));var O;(function(X){function ve(Te){var Q=Te;return De.string(Q)}a(ve,"is"),X.is=ve})(O||(e.ChangeAnnotationIdentifier=O={}));var Y;(function(X){function ve(te,Ae,Re){return{range:te,newText:Ae,annotationId:Re}}a(ve,"replace"),X.replace=ve;function Te(te,Ae,Re){return{range:{start:te,end:te},newText:Ae,annotationId:Re}}a(Te,"insert"),X.insert=Te;function Q(te,Ae){return{range:te,newText:"",annotationId:Ae}}a(Q,"del"),X.del=Q;function B(te){var Ae=te;return N.is(Ae)&&(F.is(Ae.annotationId)||O.is(Ae.annotationId))}a(B,"is"),X.is=B})(Y||(e.AnnotatedTextEdit=Y={}));var z;(function(X){function ve(Q,B){return{textDocument:Q,edits:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&ne.is(B.textDocument)&&Array.isArray(B.edits)}a(Te,"is"),X.is=Te})(z||(e.TextDocumentEdit=z={}));var V;(function(X){function ve(Q,B,te){var Ae={kind:"create",uri:Q};return B!==void 0&&(B.overwrite!==void 0||B.ignoreIfExists!==void 0)&&(Ae.options=B),te!==void 0&&(Ae.annotationId=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&B.kind==="create"&&De.string(B.uri)&&(B.options===void 0||(B.options.overwrite===void 0||De.boolean(B.options.overwrite))&&(B.options.ignoreIfExists===void 0||De.boolean(B.options.ignoreIfExists)))&&(B.annotationId===void 0||O.is(B.annotationId))}a(Te,"is"),X.is=Te})(V||(e.CreateFile=V={}));var U;(function(X){function ve(Q,B,te,Ae){var Re={kind:"rename",oldUri:Q,newUri:B};return te!==void 0&&(te.overwrite!==void 0||te.ignoreIfExists!==void 0)&&(Re.options=te),Ae!==void 0&&(Re.annotationId=Ae),Re}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&B.kind==="rename"&&De.string(B.oldUri)&&De.string(B.newUri)&&(B.options===void 0||(B.options.overwrite===void 0||De.boolean(B.options.overwrite))&&(B.options.ignoreIfExists===void 0||De.boolean(B.options.ignoreIfExists)))&&(B.annotationId===void 0||O.is(B.annotationId))}a(Te,"is"),X.is=Te})(U||(e.RenameFile=U={}));var H;(function(X){function ve(Q,B,te){var Ae={kind:"delete",uri:Q};return B!==void 0&&(B.recursive!==void 0||B.ignoreIfNotExists!==void 0)&&(Ae.options=B),te!==void 0&&(Ae.annotationId=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&B.kind==="delete"&&De.string(B.uri)&&(B.options===void 0||(B.options.recursive===void 0||De.boolean(B.options.recursive))&&(B.options.ignoreIfNotExists===void 0||De.boolean(B.options.ignoreIfNotExists)))&&(B.annotationId===void 0||O.is(B.annotationId))}a(Te,"is"),X.is=Te})(H||(e.DeleteFile=H={}));var ee;(function(X){function ve(Te){var Q=Te;return Q&&(Q.changes!==void 0||Q.documentChanges!==void 0)&&(Q.documentChanges===void 0||Q.documentChanges.every(function(B){return De.string(B.kind)?V.is(B)||U.is(B)||H.is(B):z.is(B)}))}a(ve,"is"),X.is=ve})(ee||(e.WorkspaceEdit=ee={}));var J=function(){function X(ve,Te){this.edits=ve,this.changeAnnotations=Te}return a(X,"TextEditChangeImpl"),X.prototype.insert=function(ve,Te,Q){var B,te;if(Q===void 0?B=N.insert(ve,Te):O.is(Q)?(te=Q,B=Y.insert(ve,Te,Q)):(this.assertChangeAnnotations(this.changeAnnotations),te=this.changeAnnotations.manage(Q),B=Y.insert(ve,Te,te)),this.edits.push(B),te!==void 0)return te},X.prototype.replace=function(ve,Te,Q){var B,te;if(Q===void 0?B=N.replace(ve,Te):O.is(Q)?(te=Q,B=Y.replace(ve,Te,Q)):(this.assertChangeAnnotations(this.changeAnnotations),te=this.changeAnnotations.manage(Q),B=Y.replace(ve,Te,te)),this.edits.push(B),te!==void 0)return te},X.prototype.delete=function(ve,Te){var Q,B;if(Te===void 0?Q=N.del(ve):O.is(Te)?(B=Te,Q=Y.del(ve,Te)):(this.assertChangeAnnotations(this.changeAnnotations),B=this.changeAnnotations.manage(Te),Q=Y.del(ve,B)),this.edits.push(Q),B!==void 0)return B},X.prototype.add=function(ve){this.edits.push(ve)},X.prototype.all=function(){return this.edits},X.prototype.clear=function(){this.edits.splice(0,this.edits.length)},X.prototype.assertChangeAnnotations=function(ve){if(ve===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},X}(),G=function(){function X(ve){this._annotations=ve===void 0?Object.create(null):ve,this._counter=0,this._size=0}return a(X,"ChangeAnnotations"),X.prototype.all=function(){return this._annotations},Object.defineProperty(X.prototype,"size",{get:a(function(){return this._size},"get"),enumerable:!1,configurable:!0}),X.prototype.manage=function(ve,Te){var Q;if(O.is(ve)?Q=ve:(Q=this.nextId(),Te=ve),this._annotations[Q]!==void 0)throw new Error("Id ".concat(Q," is already in use."));if(Te===void 0)throw new Error("No annotation provided for id ".concat(Q));return this._annotations[Q]=Te,this._size++,Q},X.prototype.nextId=function(){return this._counter++,this._counter.toString()},X}(),j=function(){function X(ve){var Te=this;this._textEditChanges=Object.create(null),ve!==void 0?(this._workspaceEdit=ve,ve.documentChanges?(this._changeAnnotations=new G(ve.changeAnnotations),ve.changeAnnotations=this._changeAnnotations.all(),ve.documentChanges.forEach(function(Q){if(z.is(Q)){var B=new J(Q.edits,Te._changeAnnotations);Te._textEditChanges[Q.textDocument.uri]=B}})):ve.changes&&Object.keys(ve.changes).forEach(function(Q){var B=new J(ve.changes[Q]);Te._textEditChanges[Q]=B})):this._workspaceEdit={}}return a(X,"WorkspaceChange"),Object.defineProperty(X.prototype,"edit",{get:a(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),X.prototype.getTextEditChange=function(ve){if(ne.is(ve)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Te={uri:ve.uri,version:ve.version},Q=this._textEditChanges[Te.uri];if(!Q){var B=[],te={textDocument:Te,edits:B};this._workspaceEdit.documentChanges.push(te),Q=new J(B,this._changeAnnotations),this._textEditChanges[Te.uri]=Q}return Q}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var Q=this._textEditChanges[ve];if(!Q){var B=[];this._workspaceEdit.changes[ve]=B,Q=new J(B),this._textEditChanges[ve]=Q}return Q}},X.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new G,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},X.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},X.prototype.createFile=function(ve,Te,Q){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var B;F.is(Te)||O.is(Te)?B=Te:Q=Te;var te,Ae;if(B===void 0?te=V.create(ve,Q):(Ae=O.is(B)?B:this._changeAnnotations.manage(B),te=V.create(ve,Q,Ae)),this._workspaceEdit.documentChanges.push(te),Ae!==void 0)return Ae},X.prototype.renameFile=function(ve,Te,Q,B){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var te;F.is(Q)||O.is(Q)?te=Q:B=Q;var Ae,Re;if(te===void 0?Ae=U.create(ve,Te,B):(Re=O.is(te)?te:this._changeAnnotations.manage(te),Ae=U.create(ve,Te,B,Re)),this._workspaceEdit.documentChanges.push(Ae),Re!==void 0)return Re},X.prototype.deleteFile=function(ve,Te,Q){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var B;F.is(Te)||O.is(Te)?B=Te:Q=Te;var te,Ae;if(B===void 0?te=H.create(ve,Q):(Ae=O.is(B)?B:this._changeAnnotations.manage(B),te=H.create(ve,Q,Ae)),this._workspaceEdit.documentChanges.push(te),Ae!==void 0)return Ae},X}();e.WorkspaceChange=j;var Z;(function(X){function ve(Q){return{uri:Q}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.uri)}a(Te,"is"),X.is=Te})(Z||(e.TextDocumentIdentifier=Z={}));var ie;(function(X){function ve(Q,B){return{uri:Q,version:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.uri)&&De.integer(B.version)}a(Te,"is"),X.is=Te})(ie||(e.VersionedTextDocumentIdentifier=ie={}));var ne;(function(X){function ve(Q,B){return{uri:Q,version:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.uri)&&(B.version===null||De.integer(B.version))}a(Te,"is"),X.is=Te})(ne||(e.OptionalVersionedTextDocumentIdentifier=ne={}));var re;(function(X){function ve(Q,B,te,Ae){return{uri:Q,languageId:B,version:te,text:Ae}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.uri)&&De.string(B.languageId)&&De.integer(B.version)&&De.string(B.text)}a(Te,"is"),X.is=Te})(re||(e.TextDocumentItem=re={}));var fe;(function(X){X.PlainText="plaintext",X.Markdown="markdown";function ve(Te){var Q=Te;return Q===X.PlainText||Q===X.Markdown}a(ve,"is"),X.is=ve})(fe||(e.MarkupKind=fe={}));var ye;(function(X){function ve(Te){var Q=Te;return De.objectLiteral(Te)&&fe.is(Q.kind)&&De.string(Q.value)}a(ve,"is"),X.is=ve})(ye||(e.MarkupContent=ye={}));var Qe;(function(X){X.Text=1,X.Method=2,X.Function=3,X.Constructor=4,X.Field=5,X.Variable=6,X.Class=7,X.Interface=8,X.Module=9,X.Property=10,X.Unit=11,X.Value=12,X.Enum=13,X.Keyword=14,X.Snippet=15,X.Color=16,X.File=17,X.Reference=18,X.Folder=19,X.EnumMember=20,X.Constant=21,X.Struct=22,X.Event=23,X.Operator=24,X.TypeParameter=25})(Qe||(e.CompletionItemKind=Qe={}));var we;(function(X){X.PlainText=1,X.Snippet=2})(we||(e.InsertTextFormat=we={}));var Xe;(function(X){X.Deprecated=1})(Xe||(e.CompletionItemTag=Xe={}));var Oe;(function(X){function ve(Q,B,te){return{newText:Q,insert:B,replace:te}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&De.string(B.newText)&&l.is(B.insert)&&l.is(B.replace)}a(Te,"is"),X.is=Te})(Oe||(e.InsertReplaceEdit=Oe={}));var ut;(function(X){X.asIs=1,X.adjustIndentation=2})(ut||(e.InsertTextMode=ut={}));var Rt;(function(X){function ve(Te){var Q=Te;return Q&&(De.string(Q.detail)||Q.detail===void 0)&&(De.string(Q.description)||Q.description===void 0)}a(ve,"is"),X.is=ve})(Rt||(e.CompletionItemLabelDetails=Rt={}));var Et;(function(X){function ve(Te){return{label:Te}}a(ve,"create"),X.create=ve})(Et||(e.CompletionItem=Et={}));var At;(function(X){function ve(Te,Q){return{items:Te||[],isIncomplete:!!Q}}a(ve,"create"),X.create=ve})(At||(e.CompletionList=At={}));var de;(function(X){function ve(Q){return Q.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}a(ve,"fromPlainText"),X.fromPlainText=ve;function Te(Q){var B=Q;return De.string(B)||De.objectLiteral(B)&&De.string(B.language)&&De.string(B.value)}a(Te,"is"),X.is=Te})(de||(e.MarkedString=de={}));var qe;(function(X){function ve(Te){var Q=Te;return!!Q&&De.objectLiteral(Q)&&(ye.is(Q.contents)||de.is(Q.contents)||De.typedArray(Q.contents,de.is))&&(Te.range===void 0||l.is(Te.range))}a(ve,"is"),X.is=ve})(qe||(e.Hover=qe={}));var Ce;(function(X){function ve(Te,Q){return Q?{label:Te,documentation:Q}:{label:Te}}a(ve,"create"),X.create=ve})(Ce||(e.ParameterInformation=Ce={}));var $e;(function(X){function ve(Te,Q){for(var B=[],te=2;te<arguments.length;te++)B[te-2]=arguments[te];var Ae={label:Te};return De.defined(Q)&&(Ae.documentation=Q),De.defined(B)?Ae.parameters=B:Ae.parameters=[],Ae}a(ve,"create"),X.create=ve})($e||(e.SignatureInformation=$e={}));var ce;(function(X){X.Text=1,X.Read=2,X.Write=3})(ce||(e.DocumentHighlightKind=ce={}));var ue;(function(X){function ve(Te,Q){var B={range:Te};return De.number(Q)&&(B.kind=Q),B}a(ve,"create"),X.create=ve})(ue||(e.DocumentHighlight=ue={}));var He;(function(X){X.File=1,X.Module=2,X.Namespace=3,X.Package=4,X.Class=5,X.Method=6,X.Property=7,X.Field=8,X.Constructor=9,X.Enum=10,X.Interface=11,X.Function=12,X.Variable=13,X.Constant=14,X.String=15,X.Number=16,X.Boolean=17,X.Array=18,X.Object=19,X.Key=20,X.Null=21,X.EnumMember=22,X.Struct=23,X.Event=24,X.Operator=25,X.TypeParameter=26})(He||(e.SymbolKind=He={}));var Me;(function(X){X.Deprecated=1})(Me||(e.SymbolTag=Me={}));var be;(function(X){function ve(Te,Q,B,te,Ae){var Re={name:Te,kind:Q,location:{uri:te,range:B}};return Ae&&(Re.containerName=Ae),Re}a(ve,"create"),X.create=ve})(be||(e.SymbolInformation=be={}));var Ge;(function(X){function ve(Te,Q,B,te){return te!==void 0?{name:Te,kind:Q,location:{uri:B,range:te}}:{name:Te,kind:Q,location:{uri:B}}}a(ve,"create"),X.create=ve})(Ge||(e.WorkspaceSymbol=Ge={}));var rt;(function(X){function ve(Q,B,te,Ae,Re,ft){var St={name:Q,detail:B,kind:te,range:Ae,selectionRange:Re};return ft!==void 0&&(St.children=ft),St}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&De.string(B.name)&&De.number(B.kind)&&l.is(B.range)&&l.is(B.selectionRange)&&(B.detail===void 0||De.string(B.detail))&&(B.deprecated===void 0||De.boolean(B.deprecated))&&(B.children===void 0||Array.isArray(B.children))&&(B.tags===void 0||Array.isArray(B.tags))}a(Te,"is"),X.is=Te})(rt||(e.DocumentSymbol=rt={}));var ht;(function(X){X.Empty="",X.QuickFix="quickfix",X.Refactor="refactor",X.RefactorExtract="refactor.extract",X.RefactorInline="refactor.inline",X.RefactorRewrite="refactor.rewrite",X.Source="source",X.SourceOrganizeImports="source.organizeImports",X.SourceFixAll="source.fixAll"})(ht||(e.CodeActionKind=ht={}));var Ot;(function(X){X.Invoked=1,X.Automatic=2})(Ot||(e.CodeActionTriggerKind=Ot={}));var Zt;(function(X){function ve(Q,B,te){var Ae={diagnostics:Q};return B!=null&&(Ae.only=B),te!=null&&(Ae.triggerKind=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.typedArray(B.diagnostics,_.is)&&(B.only===void 0||De.typedArray(B.only,De.string))&&(B.triggerKind===void 0||B.triggerKind===Ot.Invoked||B.triggerKind===Ot.Automatic)}a(Te,"is"),X.is=Te})(Zt||(e.CodeActionContext=Zt={}));var qt;(function(X){function ve(Q,B,te){var Ae={title:Q},Re=!0;return typeof B=="string"?(Re=!1,Ae.kind=B):k.is(B)?Ae.command=B:Ae.edit=B,Re&&te!==void 0&&(Ae.kind=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&De.string(B.title)&&(B.diagnostics===void 0||De.typedArray(B.diagnostics,_.is))&&(B.kind===void 0||De.string(B.kind))&&(B.edit!==void 0||B.command!==void 0)&&(B.command===void 0||k.is(B.command))&&(B.isPreferred===void 0||De.boolean(B.isPreferred))&&(B.edit===void 0||ee.is(B.edit))}a(Te,"is"),X.is=Te})(qt||(e.CodeAction=qt={}));var Yr;(function(X){function ve(Q,B){var te={range:Q};return De.defined(B)&&(te.data=B),te}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&l.is(B.range)&&(De.undefined(B.command)||k.is(B.command))}a(Te,"is"),X.is=Te})(Yr||(e.CodeLens=Yr={}));var Mr;(function(X){function ve(Q,B){return{tabSize:Q,insertSpaces:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.uinteger(B.tabSize)&&De.boolean(B.insertSpaces)}a(Te,"is"),X.is=Te})(Mr||(e.FormattingOptions=Mr={}));var fn;(function(X){function ve(Q,B,te){return{range:Q,target:B,data:te}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&l.is(B.range)&&(De.undefined(B.target)||De.string(B.target))}a(Te,"is"),X.is=Te})(fn||(e.DocumentLink=fn={}));var xe;(function(X){function ve(Q,B){return{range:Q,parent:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&l.is(B.range)&&(B.parent===void 0||X.is(B.parent))}a(Te,"is"),X.is=Te})(xe||(e.SelectionRange=xe={}));var Ve;(function(X){X.namespace="namespace",X.type="type",X.class="class",X.enum="enum",X.interface="interface",X.struct="struct",X.typeParameter="typeParameter",X.parameter="parameter",X.variable="variable",X.property="property",X.enumMember="enumMember",X.event="event",X.function="function",X.method="method",X.macro="macro",X.keyword="keyword",X.modifier="modifier",X.comment="comment",X.string="string",X.number="number",X.regexp="regexp",X.operator="operator",X.decorator="decorator"})(Ve||(e.SemanticTokenTypes=Ve={}));var mt;(function(X){X.declaration="declaration",X.definition="definition",X.readonly="readonly",X.static="static",X.deprecated="deprecated",X.abstract="abstract",X.async="async",X.modification="modification",X.documentation="documentation",X.defaultLibrary="defaultLibrary"})(mt||(e.SemanticTokenModifiers=mt={}));var wt;(function(X){function ve(Te){var Q=Te;return De.objectLiteral(Q)&&(Q.resultId===void 0||typeof Q.resultId=="string")&&Array.isArray(Q.data)&&(Q.data.length===0||typeof Q.data[0]=="number")}a(ve,"is"),X.is=ve})(wt||(e.SemanticTokens=wt={}));var ar;(function(X){function ve(Q,B){return{range:Q,text:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B!=null&&l.is(B.range)&&De.string(B.text)}a(Te,"is"),X.is=Te})(ar||(e.InlineValueText=ar={}));var tr;(function(X){function ve(Q,B,te){return{range:Q,variableName:B,caseSensitiveLookup:te}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B!=null&&l.is(B.range)&&De.boolean(B.caseSensitiveLookup)&&(De.string(B.variableName)||B.variableName===void 0)}a(Te,"is"),X.is=Te})(tr||(e.InlineValueVariableLookup=tr={}));var Sr;(function(X){function ve(Q,B){return{range:Q,expression:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B!=null&&l.is(B.range)&&(De.string(B.expression)||B.expression===void 0)}a(Te,"is"),X.is=Te})(Sr||(e.InlineValueEvaluatableExpression=Sr={}));var fr;(function(X){function ve(Q,B){return{frameId:Q,stoppedLocation:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&l.is(Q.stoppedLocation)}a(Te,"is"),X.is=Te})(fr||(e.InlineValueContext=fr={}));var or;(function(X){X.Type=1,X.Parameter=2;function ve(Te){return Te===1||Te===2}a(ve,"is"),X.is=ve})(or||(e.InlayHintKind=or={}));var dr;(function(X){function ve(Q){return{value:Q}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&(B.tooltip===void 0||De.string(B.tooltip)||ye.is(B.tooltip))&&(B.location===void 0||u.is(B.location))&&(B.command===void 0||k.is(B.command))}a(Te,"is"),X.is=Te})(dr||(e.InlayHintLabelPart=dr={}));var sr;(function(X){function ve(Q,B,te){var Ae={position:Q,label:B};return te!==void 0&&(Ae.kind=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&c.is(B.position)&&(De.string(B.label)||De.typedArray(B.label,dr.is))&&(B.kind===void 0||or.is(B.kind))&&B.textEdits===void 0||De.typedArray(B.textEdits,N.is)&&(B.tooltip===void 0||De.string(B.tooltip)||ye.is(B.tooltip))&&(B.paddingLeft===void 0||De.boolean(B.paddingLeft))&&(B.paddingRight===void 0||De.boolean(B.paddingRight))}a(Te,"is"),X.is=Te})(sr||(e.InlayHint=sr={}));var Fr;(function(X){function ve(Te){return{kind:"snippet",value:Te}}a(ve,"createSnippet"),X.createSnippet=ve})(Fr||(e.StringValue=Fr={}));var Jr;(function(X){function ve(Te,Q,B,te){return{insertText:Te,filterText:Q,range:B,command:te}}a(ve,"create"),X.create=ve})(Jr||(e.InlineCompletionItem=Jr={}));var ln;(function(X){function ve(Te){return{items:Te}}a(ve,"create"),X.create=ve})(ln||(e.InlineCompletionList=ln={}));var xn;(function(X){X.Invoked=0,X.Automatic=1})(xn||(e.InlineCompletionTriggerKind=xn={}));var oi;(function(X){function ve(Te,Q){return{range:Te,text:Q}}a(ve,"create"),X.create=ve})(oi||(e.SelectedCompletionInfo=oi={}));var Rn;(function(X){function ve(Te,Q){return{triggerKind:Te,selectedCompletionInfo:Q}}a(ve,"create"),X.create=ve})(Rn||(e.InlineCompletionContext=Rn={}));var ri;(function(X){function ve(Te){var Q=Te;return De.objectLiteral(Q)&&n.is(Q.uri)&&De.string(Q.name)}a(ve,"is"),X.is=ve})(ri||(e.WorkspaceFolder=ri={})),e.EOL=[`
`,`\r
`,"\r"];var un;(function(X){function ve(te,Ae,Re,ft){return new Xn(te,Ae,Re,ft)}a(ve,"create"),X.create=ve;function Te(te){var Ae=te;return!!(De.defined(Ae)&&De.string(Ae.uri)&&(De.undefined(Ae.languageId)||De.string(Ae.languageId))&&De.uinteger(Ae.lineCount)&&De.func(Ae.getText)&&De.func(Ae.positionAt)&&De.func(Ae.offsetAt))}a(Te,"is"),X.is=Te;function Q(te,Ae){for(var Re=te.getText(),ft=B(Ae,function(Er,fi){var oo=Er.range.start.line-fi.range.start.line;return oo===0?Er.range.start.character-fi.range.start.character:oo}),St=Re.length,Jt=ft.length-1;Jt>=0;Jt--){var rr=ft[Jt],Xt=te.offsetAt(rr.range.start),It=te.offsetAt(rr.range.end);if(It<=St)Re=Re.substring(0,Xt)+rr.newText+Re.substring(It,Re.length);else throw new Error("Overlapping edit");St=Xt}return Re}a(Q,"applyEdits"),X.applyEdits=Q;function B(te,Ae){if(te.length<=1)return te;var Re=te.length/2|0,ft=te.slice(0,Re),St=te.slice(Re);B(ft,Ae),B(St,Ae);for(var Jt=0,rr=0,Xt=0;Jt<ft.length&&rr<St.length;){var It=Ae(ft[Jt],St[rr]);It<=0?te[Xt++]=ft[Jt++]:te[Xt++]=St[rr++]}for(;Jt<ft.length;)te[Xt++]=ft[Jt++];for(;rr<St.length;)te[Xt++]=St[rr++];return te}a(B,"mergeSort")})(un||(e.TextDocument=un={}));var Xn=function(){function X(ve,Te,Q,B){this._uri=ve,this._languageId=Te,this._version=Q,this._content=B,this._lineOffsets=void 0}return a(X,"FullTextDocument"),Object.defineProperty(X.prototype,"uri",{get:a(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"languageId",{get:a(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"version",{get:a(function(){return this._version},"get"),enumerable:!1,configurable:!0}),X.prototype.getText=function(ve){if(ve){var Te=this.offsetAt(ve.start),Q=this.offsetAt(ve.end);return this._content.substring(Te,Q)}return this._content},X.prototype.update=function(ve,Te){this._content=ve.text,this._version=Te,this._lineOffsets=void 0},X.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ve=[],Te=this._content,Q=!0,B=0;B<Te.length;B++){Q&&(ve.push(B),Q=!1);var te=Te.charAt(B);Q=te==="\r"||te===`
`,te==="\r"&&B+1<Te.length&&Te.charAt(B+1)===`
`&&B++}Q&&Te.length>0&&ve.push(Te.length),this._lineOffsets=ve}return this._lineOffsets},X.prototype.positionAt=function(ve){ve=Math.max(Math.min(ve,this._content.length),0);var Te=this.getLineOffsets(),Q=0,B=Te.length;if(B===0)return c.create(0,ve);for(;Q<B;){var te=Math.floor((Q+B)/2);Te[te]>ve?B=te:Q=te+1}var Ae=Q-1;return c.create(Ae,ve-Te[Ae])},X.prototype.offsetAt=function(ve){var Te=this.getLineOffsets();if(ve.line>=Te.length)return this._content.length;if(ve.line<0)return 0;var Q=Te[ve.line],B=ve.line+1<Te.length?Te[ve.line+1]:this._content.length;return Math.max(Math.min(Q+ve.character,B),Q)},Object.defineProperty(X.prototype,"lineCount",{get:a(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),X}(),De;(function(X){var ve=Object.prototype.toString;function Te(It){return typeof It<"u"}a(Te,"defined"),X.defined=Te;function Q(It){return typeof It>"u"}a(Q,"undefined"),X.undefined=Q;function B(It){return It===!0||It===!1}a(B,"boolean"),X.boolean=B;function te(It){return ve.call(It)==="[object String]"}a(te,"string"),X.string=te;function Ae(It){return ve.call(It)==="[object Number]"}a(Ae,"number"),X.number=Ae;function Re(It,Er,fi){return ve.call(It)==="[object Number]"&&Er<=It&&It<=fi}a(Re,"numberRange"),X.numberRange=Re;function ft(It){return ve.call(It)==="[object Number]"&&-2147483648<=It&&It<=2147483647}a(ft,"integer"),X.integer=ft;function St(It){return ve.call(It)==="[object Number]"&&0<=It&&It<=2147483647}a(St,"uinteger"),X.uinteger=St;function Jt(It){return ve.call(It)==="[object Function]"}a(Jt,"func"),X.func=Jt;function rr(It){return It!==null&&typeof It=="object"}a(rr,"objectLiteral"),X.objectLiteral=rr;function Xt(It,Er){return Array.isArray(It)&&It.every(Er)}a(Xt,"typedArray"),X.typedArray=Xt})(De||(De={}))})});var La=W(mp=>{"use strict";f();Object.defineProperty(mp,"__esModule",{value:!0});mp.ProtocolNotificationType=mp.ProtocolNotificationType0=mp.ProtocolRequestType=mp.ProtocolRequestType0=mp.RegistrationType=mp.MessageDirection=void 0;var DD=g2(),GLe;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(GLe||(mp.MessageDirection=GLe={}));var jme=class{static{a(this,"RegistrationType")}constructor(e){this.method=e}};mp.RegistrationType=jme;var Gme=class extends DD.RequestType0{static{a(this,"ProtocolRequestType0")}constructor(e){super(e)}};mp.ProtocolRequestType0=Gme;var Vme=class extends DD.RequestType{static{a(this,"ProtocolRequestType")}constructor(e){super(e,DD.ParameterStructures.byName)}};mp.ProtocolRequestType=Vme;var zme=class extends DD.NotificationType0{static{a(this,"ProtocolNotificationType0")}constructor(e){super(e)}};mp.ProtocolNotificationType0=zme;var Kme=class extends DD.NotificationType{static{a(this,"ProtocolNotificationType")}constructor(e){super(e,DD.ParameterStructures.byName)}};mp.ProtocolNotificationType=Kme});var XG=W(sl=>{"use strict";f();Object.defineProperty(sl,"__esModule",{value:!0});sl.objectLiteral=sl.typedArray=sl.stringArray=sl.array=sl.func=sl.error=sl.number=sl.string=sl.boolean=void 0;function xDt(t){return t===!0||t===!1}a(xDt,"boolean");sl.boolean=xDt;function VLe(t){return typeof t=="string"||t instanceof String}a(VLe,"string");sl.string=VLe;function EDt(t){return typeof t=="number"||t instanceof Number}a(EDt,"number");sl.number=EDt;function bDt(t){return t instanceof Error}a(bDt,"error");sl.error=bDt;function IDt(t){return typeof t=="function"}a(IDt,"func");sl.func=IDt;function zLe(t){return Array.isArray(t)}a(zLe,"array");sl.array=zLe;function TDt(t){return zLe(t)&&t.every(e=>VLe(e))}a(TDt,"stringArray");sl.stringArray=TDt;function wDt(t,e){return Array.isArray(t)&&t.every(e)}a(wDt,"typedArray");sl.typedArray=wDt;function _Dt(t){return t!==null&&typeof t=="object"}a(_Dt,"objectLiteral");sl.objectLiteral=_Dt});var JLe=W(ZG=>{"use strict";f();Object.defineProperty(ZG,"__esModule",{value:!0});ZG.ImplementationRequest=void 0;var KLe=La(),YLe;(function(t){t.method="textDocument/implementation",t.messageDirection=KLe.MessageDirection.clientToServer,t.type=new KLe.ProtocolRequestType(t.method)})(YLe||(ZG.ImplementationRequest=YLe={}))});var eFe=W(eV=>{"use strict";f();Object.defineProperty(eV,"__esModule",{value:!0});eV.TypeDefinitionRequest=void 0;var XLe=La(),ZLe;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=XLe.MessageDirection.clientToServer,t.type=new XLe.ProtocolRequestType(t.method)})(ZLe||(eV.TypeDefinitionRequest=ZLe={}))});var nFe=W(BD=>{"use strict";f();Object.defineProperty(BD,"__esModule",{value:!0});BD.DidChangeWorkspaceFoldersNotification=BD.WorkspaceFoldersRequest=void 0;var tV=La(),tFe;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=tV.MessageDirection.serverToClient,t.type=new tV.ProtocolRequestType0(t.method)})(tFe||(BD.WorkspaceFoldersRequest=tFe={}));var rFe;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=tV.MessageDirection.clientToServer,t.type=new tV.ProtocolNotificationType(t.method)})(rFe||(BD.DidChangeWorkspaceFoldersNotification=rFe={}))});var sFe=W(rV=>{"use strict";f();Object.defineProperty(rV,"__esModule",{value:!0});rV.ConfigurationRequest=void 0;var iFe=La(),oFe;(function(t){t.method="workspace/configuration",t.messageDirection=iFe.MessageDirection.serverToClient,t.type=new iFe.ProtocolRequestType(t.method)})(oFe||(rV.ConfigurationRequest=oFe={}))});var lFe=W(ND=>{"use strict";f();Object.defineProperty(ND,"__esModule",{value:!0});ND.ColorPresentationRequest=ND.DocumentColorRequest=void 0;var nV=La(),aFe;(function(t){t.method="textDocument/documentColor",t.messageDirection=nV.MessageDirection.clientToServer,t.type=new nV.ProtocolRequestType(t.method)})(aFe||(ND.DocumentColorRequest=aFe={}));var cFe;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=nV.MessageDirection.clientToServer,t.type=new nV.ProtocolRequestType(t.method)})(cFe||(ND.ColorPresentationRequest=cFe={}))});var fFe=W(MD=>{"use strict";f();Object.defineProperty(MD,"__esModule",{value:!0});MD.FoldingRangeRefreshRequest=MD.FoldingRangeRequest=void 0;var iV=La(),uFe;(function(t){t.method="textDocument/foldingRange",t.messageDirection=iV.MessageDirection.clientToServer,t.type=new iV.ProtocolRequestType(t.method)})(uFe||(MD.FoldingRangeRequest=uFe={}));var dFe;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=iV.MessageDirection.serverToClient,t.type=new iV.ProtocolRequestType0(t.method)})(dFe||(MD.FoldingRangeRefreshRequest=dFe={}))});var hFe=W(oV=>{"use strict";f();Object.defineProperty(oV,"__esModule",{value:!0});oV.DeclarationRequest=void 0;var pFe=La(),mFe;(function(t){t.method="textDocument/declaration",t.messageDirection=pFe.MessageDirection.clientToServer,t.type=new pFe.ProtocolRequestType(t.method)})(mFe||(oV.DeclarationRequest=mFe={}))});var yFe=W(sV=>{"use strict";f();Object.defineProperty(sV,"__esModule",{value:!0});sV.SelectionRangeRequest=void 0;var gFe=La(),AFe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=gFe.MessageDirection.clientToServer,t.type=new gFe.ProtocolRequestType(t.method)})(AFe||(sV.SelectionRangeRequest=AFe={}))});var EFe=W(qI=>{"use strict";f();Object.defineProperty(qI,"__esModule",{value:!0});qI.WorkDoneProgressCancelNotification=qI.WorkDoneProgressCreateRequest=qI.WorkDoneProgress=void 0;var SDt=g2(),aV=La(),CFe;(function(t){t.type=new SDt.ProgressType;function e(r){return r===t.type}a(e,"is"),t.is=e})(CFe||(qI.WorkDoneProgress=CFe={}));var vFe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=aV.MessageDirection.serverToClient,t.type=new aV.ProtocolRequestType(t.method)})(vFe||(qI.WorkDoneProgressCreateRequest=vFe={}));var xFe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=aV.MessageDirection.clientToServer,t.type=new aV.ProtocolNotificationType(t.method)})(xFe||(qI.WorkDoneProgressCancelNotification=xFe={}))});var wFe=W(HI=>{"use strict";f();Object.defineProperty(HI,"__esModule",{value:!0});HI.CallHierarchyOutgoingCallsRequest=HI.CallHierarchyIncomingCallsRequest=HI.CallHierarchyPrepareRequest=void 0;var LD=La(),bFe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=LD.MessageDirection.clientToServer,t.type=new LD.ProtocolRequestType(t.method)})(bFe||(HI.CallHierarchyPrepareRequest=bFe={}));var IFe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=LD.MessageDirection.clientToServer,t.type=new LD.ProtocolRequestType(t.method)})(IFe||(HI.CallHierarchyIncomingCallsRequest=IFe={}));var TFe;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=LD.MessageDirection.clientToServer,t.type=new LD.ProtocolRequestType(t.method)})(TFe||(HI.CallHierarchyOutgoingCallsRequest=TFe={}))});var DFe=W(hp=>{"use strict";f();Object.defineProperty(hp,"__esModule",{value:!0});hp.SemanticTokensRefreshRequest=hp.SemanticTokensRangeRequest=hp.SemanticTokensDeltaRequest=hp.SemanticTokensRequest=hp.SemanticTokensRegistrationType=hp.TokenFormat=void 0;var ix=La(),_Fe;(function(t){t.Relative="relative"})(_Fe||(hp.TokenFormat=_Fe={}));var _6;(function(t){t.method="textDocument/semanticTokens",t.type=new ix.RegistrationType(t.method)})(_6||(hp.SemanticTokensRegistrationType=_6={}));var SFe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=ix.MessageDirection.clientToServer,t.type=new ix.ProtocolRequestType(t.method),t.registrationMethod=_6.method})(SFe||(hp.SemanticTokensRequest=SFe={}));var RFe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=ix.MessageDirection.clientToServer,t.type=new ix.ProtocolRequestType(t.method),t.registrationMethod=_6.method})(RFe||(hp.SemanticTokensDeltaRequest=RFe={}));var kFe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=ix.MessageDirection.clientToServer,t.type=new ix.ProtocolRequestType(t.method),t.registrationMethod=_6.method})(kFe||(hp.SemanticTokensRangeRequest=kFe={}));var PFe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=ix.MessageDirection.serverToClient,t.type=new ix.ProtocolRequestType0(t.method)})(PFe||(hp.SemanticTokensRefreshRequest=PFe={}))});var MFe=W(cV=>{"use strict";f();Object.defineProperty(cV,"__esModule",{value:!0});cV.ShowDocumentRequest=void 0;var BFe=La(),NFe;(function(t){t.method="window/showDocument",t.messageDirection=BFe.MessageDirection.serverToClient,t.type=new BFe.ProtocolRequestType(t.method)})(NFe||(cV.ShowDocumentRequest=NFe={}))});var OFe=W(lV=>{"use strict";f();Object.defineProperty(lV,"__esModule",{value:!0});lV.LinkedEditingRangeRequest=void 0;var LFe=La(),FFe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=LFe.MessageDirection.clientToServer,t.type=new LFe.ProtocolRequestType(t.method)})(FFe||(lV.LinkedEditingRangeRequest=FFe={}))});var GFe=W(Od=>{"use strict";f();Object.defineProperty(Od,"__esModule",{value:!0});Od.WillDeleteFilesRequest=Od.DidDeleteFilesNotification=Od.DidRenameFilesNotification=Od.WillRenameFilesRequest=Od.DidCreateFilesNotification=Od.WillCreateFilesRequest=Od.FileOperationPatternKind=void 0;var rh=La(),QFe;(function(t){t.file="file",t.folder="folder"})(QFe||(Od.FileOperationPatternKind=QFe={}));var UFe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=rh.MessageDirection.clientToServer,t.type=new rh.ProtocolRequestType(t.method)})(UFe||(Od.WillCreateFilesRequest=UFe={}));var qFe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=rh.MessageDirection.clientToServer,t.type=new rh.ProtocolNotificationType(t.method)})(qFe||(Od.DidCreateFilesNotification=qFe={}));var HFe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=rh.MessageDirection.clientToServer,t.type=new rh.ProtocolRequestType(t.method)})(HFe||(Od.WillRenameFilesRequest=HFe={}));var WFe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=rh.MessageDirection.clientToServer,t.type=new rh.ProtocolNotificationType(t.method)})(WFe||(Od.DidRenameFilesNotification=WFe={}));var $Fe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=rh.MessageDirection.clientToServer,t.type=new rh.ProtocolNotificationType(t.method)})($Fe||(Od.DidDeleteFilesNotification=$Fe={}));var jFe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=rh.MessageDirection.clientToServer,t.type=new rh.ProtocolRequestType(t.method)})(jFe||(Od.WillDeleteFilesRequest=jFe={}))});var JFe=W(WI=>{"use strict";f();Object.defineProperty(WI,"__esModule",{value:!0});WI.MonikerRequest=WI.MonikerKind=WI.UniquenessLevel=void 0;var VFe=La(),zFe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(zFe||(WI.UniquenessLevel=zFe={}));var KFe;(function(t){t.$import="import",t.$export="export",t.local="local"})(KFe||(WI.MonikerKind=KFe={}));var YFe;(function(t){t.method="textDocument/moniker",t.messageDirection=VFe.MessageDirection.clientToServer,t.type=new VFe.ProtocolRequestType(t.method)})(YFe||(WI.MonikerRequest=YFe={}))});var t6e=W($I=>{"use strict";f();Object.defineProperty($I,"__esModule",{value:!0});$I.TypeHierarchySubtypesRequest=$I.TypeHierarchySupertypesRequest=$I.TypeHierarchyPrepareRequest=void 0;var FD=La(),XFe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=FD.MessageDirection.clientToServer,t.type=new FD.ProtocolRequestType(t.method)})(XFe||($I.TypeHierarchyPrepareRequest=XFe={}));var ZFe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=FD.MessageDirection.clientToServer,t.type=new FD.ProtocolRequestType(t.method)})(ZFe||($I.TypeHierarchySupertypesRequest=ZFe={}));var e6e;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=FD.MessageDirection.clientToServer,t.type=new FD.ProtocolRequestType(t.method)})(e6e||($I.TypeHierarchySubtypesRequest=e6e={}))});var i6e=W(OD=>{"use strict";f();Object.defineProperty(OD,"__esModule",{value:!0});OD.InlineValueRefreshRequest=OD.InlineValueRequest=void 0;var uV=La(),r6e;(function(t){t.method="textDocument/inlineValue",t.messageDirection=uV.MessageDirection.clientToServer,t.type=new uV.ProtocolRequestType(t.method)})(r6e||(OD.InlineValueRequest=r6e={}));var n6e;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=uV.MessageDirection.serverToClient,t.type=new uV.ProtocolRequestType0(t.method)})(n6e||(OD.InlineValueRefreshRequest=n6e={}))});var c6e=W(jI=>{"use strict";f();Object.defineProperty(jI,"__esModule",{value:!0});jI.InlayHintRefreshRequest=jI.InlayHintResolveRequest=jI.InlayHintRequest=void 0;var QD=La(),o6e;(function(t){t.method="textDocument/inlayHint",t.messageDirection=QD.MessageDirection.clientToServer,t.type=new QD.ProtocolRequestType(t.method)})(o6e||(jI.InlayHintRequest=o6e={}));var s6e;(function(t){t.method="inlayHint/resolve",t.messageDirection=QD.MessageDirection.clientToServer,t.type=new QD.ProtocolRequestType(t.method)})(s6e||(jI.InlayHintResolveRequest=s6e={}));var a6e;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=QD.MessageDirection.serverToClient,t.type=new QD.ProtocolRequestType0(t.method)})(a6e||(jI.InlayHintRefreshRequest=a6e={}))});var h6e=W(nh=>{"use strict";f();Object.defineProperty(nh,"__esModule",{value:!0});nh.DiagnosticRefreshRequest=nh.WorkspaceDiagnosticRequest=nh.DocumentDiagnosticRequest=nh.DocumentDiagnosticReportKind=nh.DiagnosticServerCancellationData=void 0;var m6e=g2(),RDt=XG(),UD=La(),l6e;(function(t){function e(r){let n=r;return n&&RDt.boolean(n.retriggerRequest)}a(e,"is"),t.is=e})(l6e||(nh.DiagnosticServerCancellationData=l6e={}));var u6e;(function(t){t.Full="full",t.Unchanged="unchanged"})(u6e||(nh.DocumentDiagnosticReportKind=u6e={}));var d6e;(function(t){t.method="textDocument/diagnostic",t.messageDirection=UD.MessageDirection.clientToServer,t.type=new UD.ProtocolRequestType(t.method),t.partialResult=new m6e.ProgressType})(d6e||(nh.DocumentDiagnosticRequest=d6e={}));var f6e;(function(t){t.method="workspace/diagnostic",t.messageDirection=UD.MessageDirection.clientToServer,t.type=new UD.ProtocolRequestType(t.method),t.partialResult=new m6e.ProgressType})(f6e||(nh.WorkspaceDiagnosticRequest=f6e={}));var p6e;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=UD.MessageDirection.serverToClient,t.type=new UD.ProtocolRequestType0(t.method)})(p6e||(nh.DiagnosticRefreshRequest=p6e={}))});var E6e=W(dc=>{"use strict";f();Object.defineProperty(dc,"__esModule",{value:!0});dc.DidCloseNotebookDocumentNotification=dc.DidSaveNotebookDocumentNotification=dc.DidChangeNotebookDocumentNotification=dc.NotebookCellArrayChange=dc.DidOpenNotebookDocumentNotification=dc.NotebookDocumentSyncRegistrationType=dc.NotebookDocument=dc.NotebookCell=dc.ExecutionSummary=dc.NotebookCellKind=void 0;var S6=JG(),gA=XG(),xC=La(),Yme;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}a(e,"is"),t.is=e})(Yme||(dc.NotebookCellKind=Yme={}));var Jme;(function(t){function e(o,s){let c={executionOrder:o};return(s===!0||s===!1)&&(c.success=s),c}a(e,"create"),t.create=e;function r(o){let s=o;return gA.objectLiteral(s)&&S6.uinteger.is(s.executionOrder)&&(s.success===void 0||gA.boolean(s.success))}a(r,"is"),t.is=r;function n(o,s){return o===s?!0:o==null||s===null||s===void 0?!1:o.executionOrder===s.executionOrder&&o.success===s.success}a(n,"equals"),t.equals=n})(Jme||(dc.ExecutionSummary=Jme={}));var dV;(function(t){function e(s,c){return{kind:s,document:c}}a(e,"create"),t.create=e;function r(s){let c=s;return gA.objectLiteral(c)&&Yme.is(c.kind)&&S6.DocumentUri.is(c.document)&&(c.metadata===void 0||gA.objectLiteral(c.metadata))}a(r,"is"),t.is=r;function n(s,c){let l=new Set;return s.document!==c.document&&l.add("document"),s.kind!==c.kind&&l.add("kind"),s.executionSummary!==c.executionSummary&&l.add("executionSummary"),(s.metadata!==void 0||c.metadata!==void 0)&&!o(s.metadata,c.metadata)&&l.add("metadata"),(s.executionSummary!==void 0||c.executionSummary!==void 0)&&!Jme.equals(s.executionSummary,c.executionSummary)&&l.add("executionSummary"),l}a(n,"diff"),t.diff=n;function o(s,c){if(s===c)return!0;if(s==null||c===null||c===void 0||typeof s!=typeof c||typeof s!="object")return!1;let l=Array.isArray(s),u=Array.isArray(c);if(l!==u)return!1;if(l&&u){if(s.length!==c.length)return!1;for(let d=0;d<s.length;d++)if(!o(s[d],c[d]))return!1}if(gA.objectLiteral(s)&&gA.objectLiteral(c)){let d=Object.keys(s),p=Object.keys(c);if(d.length!==p.length||(d.sort(),p.sort(),!o(d,p)))return!1;for(let m=0;m<d.length;m++){let h=d[m];if(!o(s[h],c[h]))return!1}}return!0}a(o,"equalsMetadata")})(dV||(dc.NotebookCell=dV={}));var g6e;(function(t){function e(n,o,s,c){return{uri:n,notebookType:o,version:s,cells:c}}a(e,"create"),t.create=e;function r(n){let o=n;return gA.objectLiteral(o)&&gA.string(o.uri)&&S6.integer.is(o.version)&&gA.typedArray(o.cells,dV.is)}a(r,"is"),t.is=r})(g6e||(dc.NotebookDocument=g6e={}));var qD;(function(t){t.method="notebookDocument/sync",t.messageDirection=xC.MessageDirection.clientToServer,t.type=new xC.RegistrationType(t.method)})(qD||(dc.NotebookDocumentSyncRegistrationType=qD={}));var A6e;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=xC.MessageDirection.clientToServer,t.type=new xC.ProtocolNotificationType(t.method),t.registrationMethod=qD.method})(A6e||(dc.DidOpenNotebookDocumentNotification=A6e={}));var y6e;(function(t){function e(n){let o=n;return gA.objectLiteral(o)&&S6.uinteger.is(o.start)&&S6.uinteger.is(o.deleteCount)&&(o.cells===void 0||gA.typedArray(o.cells,dV.is))}a(e,"is"),t.is=e;function r(n,o,s){let c={start:n,deleteCount:o};return s!==void 0&&(c.cells=s),c}a(r,"create"),t.create=r})(y6e||(dc.NotebookCellArrayChange=y6e={}));var C6e;(function(t){t.method="notebookDocument/didChange",t.messageDirection=xC.MessageDirection.clientToServer,t.type=new xC.ProtocolNotificationType(t.method),t.registrationMethod=qD.method})(C6e||(dc.DidChangeNotebookDocumentNotification=C6e={}));var v6e;(function(t){t.method="notebookDocument/didSave",t.messageDirection=xC.MessageDirection.clientToServer,t.type=new xC.ProtocolNotificationType(t.method),t.registrationMethod=qD.method})(v6e||(dc.DidSaveNotebookDocumentNotification=v6e={}));var x6e;(function(t){t.method="notebookDocument/didClose",t.messageDirection=xC.MessageDirection.clientToServer,t.type=new xC.ProtocolNotificationType(t.method),t.registrationMethod=qD.method})(x6e||(dc.DidCloseNotebookDocumentNotification=x6e={}))});var T6e=W(fV=>{"use strict";f();Object.defineProperty(fV,"__esModule",{value:!0});fV.InlineCompletionRequest=void 0;var b6e=La(),I6e;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=b6e.MessageDirection.clientToServer,t.type=new b6e.ProtocolRequestType(t.method)})(I6e||(fV.InlineCompletionRequest=I6e={}))});var O9e=W(Ie=>{"use strict";f();Object.defineProperty(Ie,"__esModule",{value:!0});Ie.WorkspaceSymbolRequest=Ie.CodeActionResolveRequest=Ie.CodeActionRequest=Ie.DocumentSymbolRequest=Ie.DocumentHighlightRequest=Ie.ReferencesRequest=Ie.DefinitionRequest=Ie.SignatureHelpRequest=Ie.SignatureHelpTriggerKind=Ie.HoverRequest=Ie.CompletionResolveRequest=Ie.CompletionRequest=Ie.CompletionTriggerKind=Ie.PublishDiagnosticsNotification=Ie.WatchKind=Ie.RelativePattern=Ie.FileChangeType=Ie.DidChangeWatchedFilesNotification=Ie.WillSaveTextDocumentWaitUntilRequest=Ie.WillSaveTextDocumentNotification=Ie.TextDocumentSaveReason=Ie.DidSaveTextDocumentNotification=Ie.DidCloseTextDocumentNotification=Ie.DidChangeTextDocumentNotification=Ie.TextDocumentContentChangeEvent=Ie.DidOpenTextDocumentNotification=Ie.TextDocumentSyncKind=Ie.TelemetryEventNotification=Ie.LogMessageNotification=Ie.ShowMessageRequest=Ie.ShowMessageNotification=Ie.MessageType=Ie.DidChangeConfigurationNotification=Ie.ExitNotification=Ie.ShutdownRequest=Ie.InitializedNotification=Ie.InitializeErrorCodes=Ie.InitializeRequest=Ie.WorkDoneProgressOptions=Ie.TextDocumentRegistrationOptions=Ie.StaticRegistrationOptions=Ie.PositionEncodingKind=Ie.FailureHandlingKind=Ie.ResourceOperationKind=Ie.UnregistrationRequest=Ie.RegistrationRequest=Ie.DocumentSelector=Ie.NotebookCellTextDocumentFilter=Ie.NotebookDocumentFilter=Ie.TextDocumentFilter=void 0;Ie.MonikerRequest=Ie.MonikerKind=Ie.UniquenessLevel=Ie.WillDeleteFilesRequest=Ie.DidDeleteFilesNotification=Ie.WillRenameFilesRequest=Ie.DidRenameFilesNotification=Ie.WillCreateFilesRequest=Ie.DidCreateFilesNotification=Ie.FileOperationPatternKind=Ie.LinkedEditingRangeRequest=Ie.ShowDocumentRequest=Ie.SemanticTokensRegistrationType=Ie.SemanticTokensRefreshRequest=Ie.SemanticTokensRangeRequest=Ie.SemanticTokensDeltaRequest=Ie.SemanticTokensRequest=Ie.TokenFormat=Ie.CallHierarchyPrepareRequest=Ie.CallHierarchyOutgoingCallsRequest=Ie.CallHierarchyIncomingCallsRequest=Ie.WorkDoneProgressCancelNotification=Ie.WorkDoneProgressCreateRequest=Ie.WorkDoneProgress=Ie.SelectionRangeRequest=Ie.DeclarationRequest=Ie.FoldingRangeRefreshRequest=Ie.FoldingRangeRequest=Ie.ColorPresentationRequest=Ie.DocumentColorRequest=Ie.ConfigurationRequest=Ie.DidChangeWorkspaceFoldersNotification=Ie.WorkspaceFoldersRequest=Ie.TypeDefinitionRequest=Ie.ImplementationRequest=Ie.ApplyWorkspaceEditRequest=Ie.ExecuteCommandRequest=Ie.PrepareRenameRequest=Ie.RenameRequest=Ie.PrepareSupportDefaultBehavior=Ie.DocumentOnTypeFormattingRequest=Ie.DocumentRangesFormattingRequest=Ie.DocumentRangeFormattingRequest=Ie.DocumentFormattingRequest=Ie.DocumentLinkResolveRequest=Ie.DocumentLinkRequest=Ie.CodeLensRefreshRequest=Ie.CodeLensResolveRequest=Ie.CodeLensRequest=Ie.WorkspaceSymbolResolveRequest=void 0;Ie.InlineCompletionRequest=Ie.DidCloseNotebookDocumentNotification=Ie.DidSaveNotebookDocumentNotification=Ie.DidChangeNotebookDocumentNotification=Ie.NotebookCellArrayChange=Ie.DidOpenNotebookDocumentNotification=Ie.NotebookDocumentSyncRegistrationType=Ie.NotebookDocument=Ie.NotebookCell=Ie.ExecutionSummary=Ie.NotebookCellKind=Ie.DiagnosticRefreshRequest=Ie.WorkspaceDiagnosticRequest=Ie.DocumentDiagnosticRequest=Ie.DocumentDiagnosticReportKind=Ie.DiagnosticServerCancellationData=Ie.InlayHintRefreshRequest=Ie.InlayHintResolveRequest=Ie.InlayHintRequest=Ie.InlineValueRefreshRequest=Ie.InlineValueRequest=Ie.TypeHierarchySupertypesRequest=Ie.TypeHierarchySubtypesRequest=Ie.TypeHierarchyPrepareRequest=void 0;var Vt=La(),w6e=JG(),cu=XG(),kDt=JLe();Object.defineProperty(Ie,"ImplementationRequest",{enumerable:!0,get:a(function(){return kDt.ImplementationRequest},"get")});var PDt=eFe();Object.defineProperty(Ie,"TypeDefinitionRequest",{enumerable:!0,get:a(function(){return PDt.TypeDefinitionRequest},"get")});var N9e=nFe();Object.defineProperty(Ie,"WorkspaceFoldersRequest",{enumerable:!0,get:a(function(){return N9e.WorkspaceFoldersRequest},"get")});Object.defineProperty(Ie,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:a(function(){return N9e.DidChangeWorkspaceFoldersNotification},"get")});var DDt=sFe();Object.defineProperty(Ie,"ConfigurationRequest",{enumerable:!0,get:a(function(){return DDt.ConfigurationRequest},"get")});var M9e=lFe();Object.defineProperty(Ie,"DocumentColorRequest",{enumerable:!0,get:a(function(){return M9e.DocumentColorRequest},"get")});Object.defineProperty(Ie,"ColorPresentationRequest",{enumerable:!0,get:a(function(){return M9e.ColorPresentationRequest},"get")});var L9e=fFe();Object.defineProperty(Ie,"FoldingRangeRequest",{enumerable:!0,get:a(function(){return L9e.FoldingRangeRequest},"get")});Object.defineProperty(Ie,"FoldingRangeRefreshRequest",{enumerable:!0,get:a(function(){return L9e.FoldingRangeRefreshRequest},"get")});var BDt=hFe();Object.defineProperty(Ie,"DeclarationRequest",{enumerable:!0,get:a(function(){return BDt.DeclarationRequest},"get")});var NDt=yFe();Object.defineProperty(Ie,"SelectionRangeRequest",{enumerable:!0,get:a(function(){return NDt.SelectionRangeRequest},"get")});var rhe=EFe();Object.defineProperty(Ie,"WorkDoneProgress",{enumerable:!0,get:a(function(){return rhe.WorkDoneProgress},"get")});Object.defineProperty(Ie,"WorkDoneProgressCreateRequest",{enumerable:!0,get:a(function(){return rhe.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(Ie,"WorkDoneProgressCancelNotification",{enumerable:!0,get:a(function(){return rhe.WorkDoneProgressCancelNotification},"get")});var nhe=wFe();Object.defineProperty(Ie,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:a(function(){return nhe.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(Ie,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:a(function(){return nhe.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(Ie,"CallHierarchyPrepareRequest",{enumerable:!0,get:a(function(){return nhe.CallHierarchyPrepareRequest},"get")});var HD=DFe();Object.defineProperty(Ie,"TokenFormat",{enumerable:!0,get:a(function(){return HD.TokenFormat},"get")});Object.defineProperty(Ie,"SemanticTokensRequest",{enumerable:!0,get:a(function(){return HD.SemanticTokensRequest},"get")});Object.defineProperty(Ie,"SemanticTokensDeltaRequest",{enumerable:!0,get:a(function(){return HD.SemanticTokensDeltaRequest},"get")});Object.defineProperty(Ie,"SemanticTokensRangeRequest",{enumerable:!0,get:a(function(){return HD.SemanticTokensRangeRequest},"get")});Object.defineProperty(Ie,"SemanticTokensRefreshRequest",{enumerable:!0,get:a(function(){return HD.SemanticTokensRefreshRequest},"get")});Object.defineProperty(Ie,"SemanticTokensRegistrationType",{enumerable:!0,get:a(function(){return HD.SemanticTokensRegistrationType},"get")});var MDt=MFe();Object.defineProperty(Ie,"ShowDocumentRequest",{enumerable:!0,get:a(function(){return MDt.ShowDocumentRequest},"get")});var LDt=OFe();Object.defineProperty(Ie,"LinkedEditingRangeRequest",{enumerable:!0,get:a(function(){return LDt.LinkedEditingRangeRequest},"get")});var A2=GFe();Object.defineProperty(Ie,"FileOperationPatternKind",{enumerable:!0,get:a(function(){return A2.FileOperationPatternKind},"get")});Object.defineProperty(Ie,"DidCreateFilesNotification",{enumerable:!0,get:a(function(){return A2.DidCreateFilesNotification},"get")});Object.defineProperty(Ie,"WillCreateFilesRequest",{enumerable:!0,get:a(function(){return A2.WillCreateFilesRequest},"get")});Object.defineProperty(Ie,"DidRenameFilesNotification",{enumerable:!0,get:a(function(){return A2.DidRenameFilesNotification},"get")});Object.defineProperty(Ie,"WillRenameFilesRequest",{enumerable:!0,get:a(function(){return A2.WillRenameFilesRequest},"get")});Object.defineProperty(Ie,"DidDeleteFilesNotification",{enumerable:!0,get:a(function(){return A2.DidDeleteFilesNotification},"get")});Object.defineProperty(Ie,"WillDeleteFilesRequest",{enumerable:!0,get:a(function(){return A2.WillDeleteFilesRequest},"get")});var ihe=JFe();Object.defineProperty(Ie,"UniquenessLevel",{enumerable:!0,get:a(function(){return ihe.UniquenessLevel},"get")});Object.defineProperty(Ie,"MonikerKind",{enumerable:!0,get:a(function(){return ihe.MonikerKind},"get")});Object.defineProperty(Ie,"MonikerRequest",{enumerable:!0,get:a(function(){return ihe.MonikerRequest},"get")});var ohe=t6e();Object.defineProperty(Ie,"TypeHierarchyPrepareRequest",{enumerable:!0,get:a(function(){return ohe.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(Ie,"TypeHierarchySubtypesRequest",{enumerable:!0,get:a(function(){return ohe.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(Ie,"TypeHierarchySupertypesRequest",{enumerable:!0,get:a(function(){return ohe.TypeHierarchySupertypesRequest},"get")});var F9e=i6e();Object.defineProperty(Ie,"InlineValueRequest",{enumerable:!0,get:a(function(){return F9e.InlineValueRequest},"get")});Object.defineProperty(Ie,"InlineValueRefreshRequest",{enumerable:!0,get:a(function(){return F9e.InlineValueRefreshRequest},"get")});var she=c6e();Object.defineProperty(Ie,"InlayHintRequest",{enumerable:!0,get:a(function(){return she.InlayHintRequest},"get")});Object.defineProperty(Ie,"InlayHintResolveRequest",{enumerable:!0,get:a(function(){return she.InlayHintResolveRequest},"get")});Object.defineProperty(Ie,"InlayHintRefreshRequest",{enumerable:!0,get:a(function(){return she.InlayHintRefreshRequest},"get")});var R6=h6e();Object.defineProperty(Ie,"DiagnosticServerCancellationData",{enumerable:!0,get:a(function(){return R6.DiagnosticServerCancellationData},"get")});Object.defineProperty(Ie,"DocumentDiagnosticReportKind",{enumerable:!0,get:a(function(){return R6.DocumentDiagnosticReportKind},"get")});Object.defineProperty(Ie,"DocumentDiagnosticRequest",{enumerable:!0,get:a(function(){return R6.DocumentDiagnosticRequest},"get")});Object.defineProperty(Ie,"WorkspaceDiagnosticRequest",{enumerable:!0,get:a(function(){return R6.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(Ie,"DiagnosticRefreshRequest",{enumerable:!0,get:a(function(){return R6.DiagnosticRefreshRequest},"get")});var EC=E6e();Object.defineProperty(Ie,"NotebookCellKind",{enumerable:!0,get:a(function(){return EC.NotebookCellKind},"get")});Object.defineProperty(Ie,"ExecutionSummary",{enumerable:!0,get:a(function(){return EC.ExecutionSummary},"get")});Object.defineProperty(Ie,"NotebookCell",{enumerable:!0,get:a(function(){return EC.NotebookCell},"get")});Object.defineProperty(Ie,"NotebookDocument",{enumerable:!0,get:a(function(){return EC.NotebookDocument},"get")});Object.defineProperty(Ie,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:a(function(){return EC.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(Ie,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:a(function(){return EC.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(Ie,"NotebookCellArrayChange",{enumerable:!0,get:a(function(){return EC.NotebookCellArrayChange},"get")});Object.defineProperty(Ie,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:a(function(){return EC.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(Ie,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:a(function(){return EC.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(Ie,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:a(function(){return EC.DidCloseNotebookDocumentNotification},"get")});var FDt=T6e();Object.defineProperty(Ie,"InlineCompletionRequest",{enumerable:!0,get:a(function(){return FDt.InlineCompletionRequest},"get")});var Xme;(function(t){function e(r){let n=r;return cu.string(n)||cu.string(n.language)||cu.string(n.scheme)||cu.string(n.pattern)}a(e,"is"),t.is=e})(Xme||(Ie.TextDocumentFilter=Xme={}));var Zme;(function(t){function e(r){let n=r;return cu.objectLiteral(n)&&(cu.string(n.notebookType)||cu.string(n.scheme)||cu.string(n.pattern))}a(e,"is"),t.is=e})(Zme||(Ie.NotebookDocumentFilter=Zme={}));var ehe;(function(t){function e(r){let n=r;return cu.objectLiteral(n)&&(cu.string(n.notebook)||Zme.is(n.notebook))&&(n.language===void 0||cu.string(n.language))}a(e,"is"),t.is=e})(ehe||(Ie.NotebookCellTextDocumentFilter=ehe={}));var the;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!cu.string(n)&&!Xme.is(n)&&!ehe.is(n))return!1;return!0}a(e,"is"),t.is=e})(the||(Ie.DocumentSelector=the={}));var _6e;(function(t){t.method="client/registerCapability",t.messageDirection=Vt.MessageDirection.serverToClient,t.type=new Vt.ProtocolRequestType(t.method)})(_6e||(Ie.RegistrationRequest=_6e={}));var S6e;(function(t){t.method="client/unregisterCapability",t.messageDirection=Vt.MessageDirection.serverToClient,t.type=new Vt.ProtocolRequestType(t.method)})(S6e||(Ie.UnregistrationRequest=S6e={}));var R6e;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(R6e||(Ie.ResourceOperationKind=R6e={}));var k6e;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(k6e||(Ie.FailureHandlingKind=k6e={}));var P6e;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(P6e||(Ie.PositionEncodingKind=P6e={}));var D6e;(function(t){function e(r){let n=r;return n&&cu.string(n.id)&&n.id.length>0}a(e,"hasId"),t.hasId=e})(D6e||(Ie.StaticRegistrationOptions=D6e={}));var B6e;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||the.is(n.documentSelector))}a(e,"is"),t.is=e})(B6e||(Ie.TextDocumentRegistrationOptions=B6e={}));var N6e;(function(t){function e(n){let o=n;return cu.objectLiteral(o)&&(o.workDoneProgress===void 0||cu.boolean(o.workDoneProgress))}a(e,"is"),t.is=e;function r(n){let o=n;return o&&cu.boolean(o.workDoneProgress)}a(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(N6e||(Ie.WorkDoneProgressOptions=N6e={}));var M6e;(function(t){t.method="initialize",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(M6e||(Ie.InitializeRequest=M6e={}));var L6e;(function(t){t.unknownProtocolVersion=1})(L6e||(Ie.InitializeErrorCodes=L6e={}));var F6e;(function(t){t.method="initialized",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolNotificationType(t.method)})(F6e||(Ie.InitializedNotification=F6e={}));var O6e;(function(t){t.method="shutdown",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType0(t.method)})(O6e||(Ie.ShutdownRequest=O6e={}));var Q6e;(function(t){t.method="exit",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolNotificationType0(t.method)})(Q6e||(Ie.ExitNotification=Q6e={}));var U6e;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolNotificationType(t.method)})(U6e||(Ie.DidChangeConfigurationNotification=U6e={}));var q6e;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(q6e||(Ie.MessageType=q6e={}));var H6e;(function(t){t.method="window/showMessage",t.messageDirection=Vt.MessageDirection.serverToClient,t.type=new Vt.ProtocolNotificationType(t.method)})(H6e||(Ie.ShowMessageNotification=H6e={}));var W6e;(function(t){t.method="window/showMessageRequest",t.messageDirection=Vt.MessageDirection.serverToClient,t.type=new Vt.ProtocolRequestType(t.method)})(W6e||(Ie.ShowMessageRequest=W6e={}));var $6e;(function(t){t.method="window/logMessage",t.messageDirection=Vt.MessageDirection.serverToClient,t.type=new Vt.ProtocolNotificationType(t.method)})($6e||(Ie.LogMessageNotification=$6e={}));var j6e;(function(t){t.method="telemetry/event",t.messageDirection=Vt.MessageDirection.serverToClient,t.type=new Vt.ProtocolNotificationType(t.method)})(j6e||(Ie.TelemetryEventNotification=j6e={}));var G6e;(function(t){t.None=0,t.Full=1,t.Incremental=2})(G6e||(Ie.TextDocumentSyncKind=G6e={}));var V6e;(function(t){t.method="textDocument/didOpen",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolNotificationType(t.method)})(V6e||(Ie.DidOpenTextDocumentNotification=V6e={}));var z6e;(function(t){function e(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range!==void 0&&(o.rangeLength===void 0||typeof o.rangeLength=="number")}a(e,"isIncremental"),t.isIncremental=e;function r(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range===void 0&&o.rangeLength===void 0}a(r,"isFull"),t.isFull=r})(z6e||(Ie.TextDocumentContentChangeEvent=z6e={}));var K6e;(function(t){t.method="textDocument/didChange",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolNotificationType(t.method)})(K6e||(Ie.DidChangeTextDocumentNotification=K6e={}));var Y6e;(function(t){t.method="textDocument/didClose",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolNotificationType(t.method)})(Y6e||(Ie.DidCloseTextDocumentNotification=Y6e={}));var J6e;(function(t){t.method="textDocument/didSave",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolNotificationType(t.method)})(J6e||(Ie.DidSaveTextDocumentNotification=J6e={}));var X6e;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(X6e||(Ie.TextDocumentSaveReason=X6e={}));var Z6e;(function(t){t.method="textDocument/willSave",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolNotificationType(t.method)})(Z6e||(Ie.WillSaveTextDocumentNotification=Z6e={}));var e9e;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(e9e||(Ie.WillSaveTextDocumentWaitUntilRequest=e9e={}));var t9e;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolNotificationType(t.method)})(t9e||(Ie.DidChangeWatchedFilesNotification=t9e={}));var r9e;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(r9e||(Ie.FileChangeType=r9e={}));var n9e;(function(t){function e(r){let n=r;return cu.objectLiteral(n)&&(w6e.URI.is(n.baseUri)||w6e.WorkspaceFolder.is(n.baseUri))&&cu.string(n.pattern)}a(e,"is"),t.is=e})(n9e||(Ie.RelativePattern=n9e={}));var i9e;(function(t){t.Create=1,t.Change=2,t.Delete=4})(i9e||(Ie.WatchKind=i9e={}));var o9e;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Vt.MessageDirection.serverToClient,t.type=new Vt.ProtocolNotificationType(t.method)})(o9e||(Ie.PublishDiagnosticsNotification=o9e={}));var s9e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(s9e||(Ie.CompletionTriggerKind=s9e={}));var a9e;(function(t){t.method="textDocument/completion",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(a9e||(Ie.CompletionRequest=a9e={}));var c9e;(function(t){t.method="completionItem/resolve",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(c9e||(Ie.CompletionResolveRequest=c9e={}));var l9e;(function(t){t.method="textDocument/hover",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(l9e||(Ie.HoverRequest=l9e={}));var u9e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(u9e||(Ie.SignatureHelpTriggerKind=u9e={}));var d9e;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(d9e||(Ie.SignatureHelpRequest=d9e={}));var f9e;(function(t){t.method="textDocument/definition",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(f9e||(Ie.DefinitionRequest=f9e={}));var p9e;(function(t){t.method="textDocument/references",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(p9e||(Ie.ReferencesRequest=p9e={}));var m9e;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(m9e||(Ie.DocumentHighlightRequest=m9e={}));var h9e;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(h9e||(Ie.DocumentSymbolRequest=h9e={}));var g9e;(function(t){t.method="textDocument/codeAction",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(g9e||(Ie.CodeActionRequest=g9e={}));var A9e;(function(t){t.method="codeAction/resolve",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(A9e||(Ie.CodeActionResolveRequest=A9e={}));var y9e;(function(t){t.method="workspace/symbol",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(y9e||(Ie.WorkspaceSymbolRequest=y9e={}));var C9e;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(C9e||(Ie.WorkspaceSymbolResolveRequest=C9e={}));var v9e;(function(t){t.method="textDocument/codeLens",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(v9e||(Ie.CodeLensRequest=v9e={}));var x9e;(function(t){t.method="codeLens/resolve",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(x9e||(Ie.CodeLensResolveRequest=x9e={}));var E9e;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Vt.MessageDirection.serverToClient,t.type=new Vt.ProtocolRequestType0(t.method)})(E9e||(Ie.CodeLensRefreshRequest=E9e={}));var b9e;(function(t){t.method="textDocument/documentLink",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(b9e||(Ie.DocumentLinkRequest=b9e={}));var I9e;(function(t){t.method="documentLink/resolve",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(I9e||(Ie.DocumentLinkResolveRequest=I9e={}));var T9e;(function(t){t.method="textDocument/formatting",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(T9e||(Ie.DocumentFormattingRequest=T9e={}));var w9e;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(w9e||(Ie.DocumentRangeFormattingRequest=w9e={}));var _9e;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(_9e||(Ie.DocumentRangesFormattingRequest=_9e={}));var S9e;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(S9e||(Ie.DocumentOnTypeFormattingRequest=S9e={}));var R9e;(function(t){t.Identifier=1})(R9e||(Ie.PrepareSupportDefaultBehavior=R9e={}));var k9e;(function(t){t.method="textDocument/rename",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(k9e||(Ie.RenameRequest=k9e={}));var P9e;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(P9e||(Ie.PrepareRenameRequest=P9e={}));var D9e;(function(t){t.method="workspace/executeCommand",t.messageDirection=Vt.MessageDirection.clientToServer,t.type=new Vt.ProtocolRequestType(t.method)})(D9e||(Ie.ExecuteCommandRequest=D9e={}));var B9e;(function(t){t.method="workspace/applyEdit",t.messageDirection=Vt.MessageDirection.serverToClient,t.type=new Vt.ProtocolRequestType("workspace/applyEdit")})(B9e||(Ie.ApplyWorkspaceEditRequest=B9e={}))});var U9e=W(pV=>{"use strict";f();Object.defineProperty(pV,"__esModule",{value:!0});pV.createProtocolConnection=void 0;var Q9e=g2();function ODt(t,e,r,n){return Q9e.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Q9e.createMessageConnection)(t,e,r,n)}a(ODt,"createProtocolConnection");pV.createProtocolConnection=ODt});var H9e=W(gp=>{"use strict";f();var QDt=gp&&gp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mV=gp&&gp.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&QDt(e,t,r)};Object.defineProperty(gp,"__esModule",{value:!0});gp.LSPErrorCodes=gp.createProtocolConnection=void 0;mV(g2(),gp);mV(JG(),gp);mV(La(),gp);mV(O9e(),gp);var UDt=U9e();Object.defineProperty(gp,"createProtocolConnection",{enumerable:!0,get:a(function(){return UDt.createProtocolConnection},"get")});var q9e;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(q9e||(gp.LSPErrorCodes=q9e={}))});var mi=W(bC=>{"use strict";f();var qDt=bC&&bC.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),W9e=bC&&bC.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qDt(e,t,r)};Object.defineProperty(bC,"__esModule",{value:!0});bC.createProtocolConnection=void 0;var HDt=$me();W9e($me(),bC);W9e(H9e(),bC);function WDt(t,e,r,n){return(0,HDt.createMessageConnection)(t,e,r,n)}a(WDt,"createProtocolConnection");bC.createProtocolConnection=WDt});var eOe=W((CV,Z9e)=>{f();(function(t,e){typeof CV=="object"&&typeof Z9e<"u"?e(CV):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(CV,function(t){"use strict";function e(S,D){return S||D}a(e,"_pureAssign");function r(S,D){return S[D]}a(r,"_pureRef");var n=void 0,o=null,s="",c="function",l="object",u="prototype",d="__proto__",p="undefined",m="constructor",h="Symbol",g="_polyfill",A="length",y="name",v="call",b="toString",I=e(Object),_=r(I,u),k=e(String),N=r(k,u),F=e(Math),O=e(Array),Y=r(O,u),z=r(Y,"slice");function V(S,D){try{return{v:S.apply(this,D)}}catch(M){return{e:M}}}a(V,"safe");function U(S){return function(D){return typeof D===S}}a(U,"_createIs");function H(S){var D="[object "+S+"]";return function(M){return!!(M&&ee(M)===D)}}a(H,"_createObjIs");function ee(S){return _[b].call(S)}a(ee,"objToString");function J(S){return typeof S===p||S===p}a(J,"isUndefined");function G(S){return!Z(S)}a(G,"isStrictUndefined");function j(S){return S===o||J(S)}a(j,"isNullOrUndefined");function Z(S){return!!S||S!==n}a(Z,"isDefined");var ie=U("string"),ne=U(c);function re(S){return!S&&j(S)?!1:!!S&&typeof S===l}a(re,"isObject");var fe=r(O,"isArray"),ye=H("Error"),Qe=r(I,"getOwnPropertyDescriptor");function we(S,D){return!!S&&_.hasOwnProperty[v](S,D)}a(we,"objHasOwnProperty");var Xe=e(r(I,"hasOwn"),Oe);function Oe(S,D){return we(S,D)||!!Qe(S,D)}a(Oe,"polyObjHasOwn");function ut(S,D,M){if(S&&re(S)){for(var $ in S)if(Xe(S,$)&&D[v](M||S,$,S[$])===-1)break}}a(ut,"objForEachKey");var Rt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Et(S){var D={};if(D[Rt.c]=!0,D[Rt.e]=!0,S.l){D.get=function(){return S.l.v};var M=Qe(S.l,"v");M&&M.set&&(D.set=function($){S.l.v=$})}return ut(S,function($,pe){D[Rt[$]]=G(pe)?D[Rt[$]]:pe}),D}a(Et,"_createProp");var At=r(I,"defineProperty");function de(S,D,M){return At(S,D,Et(M))}a(de,"objDefine");function qe(S,D,M,$,pe){var _e={};return ut(S,function(Pe,je){Ce(_e,Pe,D?je:Pe),Ce(_e,je,M?je:Pe)}),$?$(_e):_e}a(qe,"_createKeyValueMap");function Ce(S,D,M,$){At(S,D,{value:M,enumerable:!0,writable:!1})}a(Ce,"_assignMapValue");var $e=e(k),ce="[object Error]";function ue(S,D){var M=s,$=_[b][v](S);$===ce&&(S={stack:$e(S.stack),message:$e(S.message),name:$e(S.name)});try{M=JSON.stringify(S,o,D?typeof D=="number"?D:4:n),M=(M?M.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):o)||$e(S)}catch(pe){M=" - "+ue(pe,D)}return $+": "+M}a(ue,"dumpObj");function He(S){throw new Error(S)}a(He,"throwError");function Me(S){throw new TypeError(S)}a(Me,"throwTypeError");var be=r(I,"freeze");function Ge(S){return S}a(Ge,"_doNothing");function rt(S){return S[d]||o}a(rt,"_getProto");var ht=r(I,"assign"),Ot=r(I,"keys"),Zt=e(be,Ge),qt=e(r(I,"getPrototypeOf"),rt);function Yr(S){return qe(S,1,0,Zt)}a(Yr,"createEnum");function Mr(S){var D={};return ut(S,function(M,$){Ce(D,M,$[1]),Ce(D,$[0],$[1])}),Zt(D)}a(Mr,"createSimpleMap");function fn(S){return Mr(S)}a(fn,"createTypeMap");var xe="__tsUtils$gblCfg",Ve;function mt(){var S;return typeof globalThis!==p&&(S=globalThis),!S&&typeof self!==p&&(S=self),!S&&typeof window!==p&&(S=window),!S&&typeof global!==p&&(S=global),S}a(mt,"_getGlobalValue");function wt(){if(!Ve){var S=V(mt).v||{};Ve=S[xe]=S[xe]||{}}return Ve}a(wt,"_getGlobalConfig");var ar=tr;function tr(S,D,M){var $=D?D[S]:o;return function(pe){var _e=(pe?pe[S]:o)||$;if(_e||M){var Pe=arguments;return(_e||M).apply(pe,_e?z[v](Pe,1):Pe)}Me('"'+$e(S)+'" not defined for '+ue(pe))}}a(tr,"_unwrapFunctionWithPoly");var Sr=r(F,"min"),fr=r(F,"max"),or=ar("slice",N),dr=ar("substring",N),sr=tr("substr",N,Fr);function Fr(S,D,M){return j(S)&&Me("Invalid "+ue(S)),M<0?s:(D=D||0,D<0&&(D=fr(D+S[A],0)),J(M)?or(S,D):or(S,D,D+M))}a(Fr,"polyStrSubstr");function Jr(S,D){return dr(S,0,D)}a(Jr,"strLeft");var ln="_urid",xn;function oi(){if(!xn){var S=wt();xn=S.gblSym=S.gblSym||{k:{},s:{}}}return xn}a(oi,"_globalSymbolRegistry");function Rn(S){var D={description:$e(S),toString:a(function(){return h+"("+S+")"},"toString")};return D[g]=!0,D}a(Rn,"polyNewSymbol");function ri(S){var D=oi();if(!Xe(D.k,S)){var M=Rn(S),$=Ot(D.s).length;M[ln]=function(){return $+"_"+M[b]()},D.k[S]=M,D.s[M[ln]()]=$e(S)}return D.k[S]}a(ri,"polySymbolFor");var un;function Xn(){un=wt()}a(Xn,"_initTestHooks");function De(S){return At({toJSON:a(function(){return S},"toJSON")},"v",{value:S})}a(De,"createCachedValue");var X="window",ve;function Te(S,D){var M;return function(){return!un&&Xn(),(!M||un.lzy)&&(M=De(V(S,D).v)),M.v}}a(Te,"_getGlobalInstFn");function Q(S){return!un&&Xn(),(!ve||S===!1||un.lzy)&&(ve=De(V(mt).v||o)),ve.v}a(Q,"getGlobal");function B(S,D){var M;if(!ve||D===!1?M=Q(D):M=ve.v,M&&M[S])return M[S];if(S===X)try{return window}catch{}return o}a(B,"getInst");var te=Te(B,["document"]);function Ae(){return!!Re()}a(Ae,"hasWindow");var Re=Te(B,[X]);function ft(){return!!St()}a(ft,"hasNavigator");var St=Te(B,["navigator"]),Jt,rr;function Xt(){return Jt=De(V(B,[h]).v),Jt}a(Xt,"_initSymbol");function It(S){var D=(un.lzy?0:Jt)||Xt();return D.v?D.v[S]:n}a(It,"_getSymbolKey");function Er(S,D){!un&&Xn();var M=(un.lzy?0:Jt)||Xt();return M.v?M.v(S):D?o:Rn(S)}a(Er,"newSymbol");function fi(S){return!un&&Xn(),rr=(un.lzy?0:rr)||De(V(It,["for"]).v),(rr.v||ri)(S)}a(fi,"symbolFor");function oo(S,D,M){return S.apply(D,M)}a(oo,"fnApply");function wn(S,D,M){if(S)for(var $=S[A]>>>0,pe=0;pe<$&&!(pe in S&&D[v](M||S,S[pe],pe,S)===-1);pe++);}a(wn,"arrForEach");var Co=ar("indexOf",Y),Ei=ar("map",Y),ts=ar("reduce",Y),Ia=e(r(I,"create"),_c);function _c(S){if(!S)return{};var D=typeof S;D!==l&&D!==c&&Me("Prototype must be an Object or function: "+ue(S));function M(){}return a(M,"tempFunc"),M[u]=S,new M}a(_c,"polyObjCreate");var Fo;function Ks(S,D){var M=I.setPrototypeOf||function($,pe){var _e;!Fo&&(Fo=De((_e={},_e[d]=[],_e instanceof Array))),Fo.v?$[d]=pe:ut(pe,function(Pe,je){return $[Pe]=je})};return M(S,D)}a(Ks,"objSetPrototypeOf");function xd(S,D,M){V(de,[D,y,{v:S,c:!0,e:!1}]),D=Ks(D,M);function $(){this[m]=D,V(de,[this,y,{v:S,c:!0,e:!1}])}return a($,"__"),D[u]=M===o?Ia(M):($[u]=M[u],new $),D}a(xd,"_createCustomError");function Sc(S,D){D&&(S[y]=D)}a(Sc,"_setName");function Rg(S,D,M){var $=M||Error,pe=$[u][y],_e=Error.captureStackTrace;return xd(S,function(){var Pe=this,je=arguments;try{V(Sc,[$,S]);var ot=oo($,Pe,z[v](je))||Pe;if(ot!==Pe){var bt=qt(Pe);bt!==qt(ot)&&Ks(ot,bt)}return _e&&_e(ot,Pe[m]),D&&D(ot,je),ot}finally{V(Sc,[$,pe])}},$)}a(Rg,"createCustomError");function Sl(){return(Date.now||kg)()}a(Sl,"utcNow");function kg(){return new Date().getTime()}a(kg,"polyUtcNow");function Pg(S){return a(function(M){return j(M)&&Me("strTrim called ["+ue(M)+"]"),M&&M.replace&&(M=M.replace(S,s)),M},"_doTrim")}a(Pg,"_createTrimFn");var nb=Pg(/^\s+|(?=\s)\s+$/g),$a=tr("trim",N,nb),Lu=r(F,"floor"),Fu,Ed,Dg;function Jl(S){if(!S||typeof S!==l)return!1;Dg||(Dg=Ae()?Re():!0);var D=!1;if(S!==Dg){Ed||(Fu=Function[u][b],Ed=Fu[v](I));try{var M=qt(S);D=!M,D||(we(M,m)&&(M=M[m]),D=!!(M&&typeof M===c&&Fu[v](M)===Ed))}catch{}}return D}a(Jl,"isPlainObject");var ib;function h1(){return!un&&Xn(),(!ib||un.lzy)&&(ib=De(V(B,["performance"]).v)),ib.v}a(h1,"getPerformance");var ob=r(F,"round"),Yf=tr("endsWith",N,Jf);function Jf(S,D,M){ie(S)||Me("'"+ue(S)+"' is not a string");var $=ie(D)?D:$e(D),pe=!J(M)&&M<S[A]?M:S[A];return dr(S,pe-$[A],pe)===$}a(Jf,"polyStrEndsWith");var Xr=ar("indexOf",N),Rc="ref",Bg="unref",Ng="hasRef",IL="enabled";function Yc(S,D,M){var $=!0,pe=S?D(o):o,_e;function Pe(){return $=!1,pe&&pe[Bg]&&pe[Bg](),_e}a(Pe,"_unref");function je(){pe&&M(pe),pe=o}a(je,"_cancel");function ot(){return pe=D(pe),$||Pe(),_e}a(ot,"_refresh");function bt(Cr){!Cr&&pe&&je(),Cr&&!pe&&ot()}return a(bt,"_setEnabled"),_e={cancel:je,refresh:ot},_e[Ng]=function(){return pe&&pe[Ng]?pe[Ng]():$},_e[Rc]=function(){return $=!0,pe&&pe[Rc]&&pe[Rc](),_e},_e[Bg]=Pe,_e=At(_e,IL,{get:a(function(){return!!pe},"get"),set:bt}),{h:_e,dn:a(function(){pe=o},"dn")}}a(Yc,"_createTimerHandler");function Ly(S,D,M){var $=fe(D),pe=$?D.length:0,_e=(pe>0?D[0]:$?n:D)||setTimeout,Pe=(pe>1?D[1]:n)||clearTimeout,je=M[0];M[0]=function(){ot.dn(),oo(je,n,z[v](arguments))};var ot=Yc(S,function(bt){if(bt){if(bt.refresh)return bt.refresh(),bt;oo(Pe,n,[bt])}return oo(_e,n,M)},function(bt){oo(Pe,n,[bt])});return ot.h}a(Ly,"_createTimeoutWith");function g1(S,D){return Ly(!0,n,z[v](arguments))}a(g1,"scheduleTimeout");var Sm=Yr,Fy=fn,sb="toLowerCase",ws="length",bd="warnToConsole",Oy="throwInternal",b5="watch",TL="apply",so="push",Qy="splice",Mg="logger",I5="cancel",ab="name",Id="unload",wL="version",_L="loggingLevelConsole",SL="messageId",A1="message",RL="diagLog",CW="userAgent",kL="split",cb="replace",Uy="type",vW="evtName",T5="traceFlags",PL="getAttribute",w5;function _de(S,D){w5||(w5=Rg("AggregationError",function($,pe){pe[ws]>1&&($.errors=pe[1])}));var M=S||"One or more errors occurred.";throw wn(D,function($,pe){M+=`
`.concat(pe," > ").concat(ue($))}),new w5(M,D||[])}a(_de,"throwAggregationError");var Sde="function",xW="object",Rde="undefined",Lg="prototype",_5=Object,DL=_5[Lg];(Q()||{}).Symbol,(Q()||{}).Reflect;var S5="hasOwnProperty",kde=a(function(S){for(var D,M=1,$=arguments.length;M<$;M++){D=arguments[M];for(var pe in D)DL[S5].call(D,pe)&&(S[pe]=D[pe])}return S},"__objAssignFnImpl"),R5=ht||kde,k5=a(function(S,D){return k5=_5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,$){M.__proto__=$}||function(M,$){for(var pe in $)$[S5](pe)&&(M[pe]=$[pe])},k5(S,D)},"extendStaticsFn");function qy(S,D){typeof D!==Sde&&D!==null&&Me("Class extends value "+String(D)+" is not a constructor or null"),k5(S,D);function M(){this.constructor=S}a(M,"__"),S[Lg]=D===null?Ia(D):(M[Lg]=D[Lg],new M)}a(qy,"__extendsFn");var P5,y1="constructor",Xf="prototype",Zf="function",C1="_dynInstFuncs",lb="_isDynProxy",Hy="_dynClass",ub="_dynCls$",BL="_dynInstChk",v1=BL,db="_dfOpts",NL="_unknown_",D5="__proto__",fb="_dyn"+D5,nS="__dynProto$Gbl",B5="_dynInstProto",pb="useBaseInst",mb="setInstFuncs",iS=Object,x1=iS.getPrototypeOf,hb=iS.getOwnPropertyNames,ML=Q(),N5=ML[nS]||(ML[nS]={o:(P5={},P5[mb]=!0,P5[pb]=!0,P5),n:1e3});function gb(S){return S&&(S===iS[Xf]||S===Array[Xf])}a(gb,"_isObjectOrArrayPrototype");function Ab(S){return gb(S)||S===Function[Xf]}a(Ab,"_isObjectArrayOrFunctionPrototype");function Fg(S){var D;if(S){if(x1)return x1(S);var M=S[D5]||S[Xf]||(S[y1]?S[y1][Xf]:null);D=S[fb]||M,we(S,fb)||(delete S[B5],D=S[fb]=S[B5]||S[fb],S[B5]=M)}return D}a(Fg,"_getObjProto");function Rm(S,D){var M=[];if(hb)M=hb(S);else for(var $ in S)typeof $=="string"&&we(S,$)&&M.push($);if(M&&M.length>0)for(var pe=0;pe<M.length;pe++)D(M[pe])}a(Rm,"_forEachProp");function yb(S,D,M){return D!==y1&&typeof S[D]===Zf&&(M||we(S,D))&&D!==D5&&D!==Xf}a(yb,"_isDynamicCandidate");function Cb(S){Me("DynamicProto: "+S)}a(Cb,"_throwTypeError");function M5(S){var D=Ia(null);return Rm(S,function(M){!D[M]&&yb(S,M,!1)&&(D[M]=S[M])}),D}a(M5,"_getInstanceFuncs");function LL(S,D){for(var M=S.length-1;M>=0;M--)if(S[M]===D)return!0;return!1}a(LL,"_hasVisited");function FL(S,D,M,$){function pe(ot,bt,Cr){var Qn=bt[Cr];if(Qn[lb]&&$){var ni=ot[C1]||{};ni[v1]!==!1&&(Qn=(ni[bt[Hy]]||{})[Cr]||Qn)}return function(){return Qn.apply(ot,arguments)}}a(pe,"_instFuncProxy");var _e=Ia(null);Rm(M,function(ot){_e[ot]=pe(D,M,ot)});for(var Pe=Fg(S),je=[];Pe&&!Ab(Pe)&&!LL(je,Pe);)Rm(Pe,function(ot){!_e[ot]&&yb(Pe,ot,!x1)&&(_e[ot]=pe(D,Pe,ot))}),je.push(Pe),Pe=Fg(Pe);return _e}a(FL,"_getBaseFuncs");function Pde(S,D,M,$){var pe=null;if(S&&we(M,Hy)){var _e=S[C1]||Ia(null);if(pe=(_e[M[Hy]]||Ia(null))[D],pe||Cb("Missing ["+D+"] "+Zf),!pe[BL]&&_e[v1]!==!1){for(var Pe=!we(S,D),je=Fg(S),ot=[];Pe&&je&&!Ab(je)&&!LL(ot,je);){var bt=je[D];if(bt){Pe=bt===$;break}ot.push(je),je=Fg(je)}try{Pe&&(S[D]=pe),pe[BL]=1}catch{_e[v1]=!1}}}return pe}a(Pde,"_getInstFunc");function Dde(S,D,M){var $=D[S];return $===M&&($=Fg(D)[S]),typeof $!==Zf&&Cb("["+S+"] is not a "+Zf),$}a(Dde,"_getProtoFunc");function Bde(S,D,M,$,pe){function _e(ot,bt){var Cr=a(function(){var Qn=Pde(this,bt,ot,Cr)||Dde(bt,ot,Cr);return Qn.apply(this,arguments)},"dynProtoProxy");return Cr[lb]=1,Cr}if(a(_e,"_createDynamicPrototype"),!gb(S)){var Pe=M[C1]=M[C1]||Ia(null);if(!gb(Pe)){var je=Pe[D]=Pe[D]||Ia(null);Pe[v1]!==!1&&(Pe[v1]=!!pe),gb(je)||Rm(M,function(ot){yb(M,ot,!1)&&M[ot]!==$[ot]&&(je[ot]=M[ot],delete M[ot],(!we(S,ot)||S[ot]&&!S[ot][lb])&&(S[ot]=_e(S,ot)))})}}}a(Bde,"_populatePrototype");function Nde(S,D){if(x1){for(var M=[],$=Fg(D);$&&!Ab($)&&!LL(M,$);){if($===S)return!0;M.push($),$=Fg($)}return!1}return!0}a(Nde,"_checkPrototype");function OL(S,D){return we(S,Xf)?S.name||D||NL:((S||{})[y1]||{}).name||D||NL}a(OL,"_getObjName");function oS(S,D,M,$){we(S,Xf)||Cb("theClass is an invalid class definition.");var pe=S[Xf];Nde(pe,D)||Cb("["+OL(S)+"] not in hierarchy of ["+OL(D)+"]");var _e=null;we(pe,Hy)?_e=pe[Hy]:(_e=ub+OL(S,"_")+"$"+N5.n,N5.n++,pe[Hy]=_e);var Pe=oS[db],je=!!Pe[pb];je&&$&&$[pb]!==void 0&&(je=!!$[pb]);var ot=M5(D),bt=FL(pe,D,ot,je);M(D,bt);var Cr=!!x1&&!!Pe[mb];Cr&&$&&(Cr=!!$[mb]),Bde(pe,_e,D,ot,Cr!==!1)}a(oS,"dynamicProto"),oS[db]=N5.o;var Ou=void 0,ja="",EW="Not dynamic - ",bW=/-([a-z])/g,sS=/([^\w\d_$])/g,QL=/^(\d+[\w\d_$])/;function UL(S){return!j(S)}a(UL,"isNotNullOrUndefined");function L5(S){var D=S;return D&&ie(D)&&(D=D[cb](bW,function(M,$){return $.toUpperCase()}),D=D[cb](sS,"_"),D=D[cb](QL,function(M,$){return"_"+$})),D}a(L5,"normalizeJsName");function IW(S,D){return S&&D?Xr(S,D)!==-1:!1}a(IW,"strContains");function Og(S){return S&&S.toISOString()||""}a(Og,"toISOString");function Wy(S){return ye(S)?S[ab]:ja}a(Wy,"getExceptionName");function aS(S){return function(){function D(){var M=this;S&&ut(S,function($,pe){M[$]=pe})}return a(D,"class_1"),D}()}a(aS,"createClassFromInterface");var TW="console",F5="JSON",Mde="crypto",$y="msCrypto",vb="msie",pi="trident/",xb=null,E1=null,Qg=null;function O5(){return typeof console!==Rde?console:B(TW)}a(O5,"getConsole");function Io(){return!!(typeof JSON===xW&&JSON||B(F5)!==null)}a(Io,"hasJSON");function Eb(){return Io()?JSON||B(F5):null}a(Eb,"getJSON");function kc(){return B(Mde)}a(kc,"getCrypto");function bb(){return B($y)}a(bb,"getMsCrypto");function cS(){var S=St();if(S&&(S[CW]!==E1||xb===null)){E1=S[CW];var D=(E1||ja)[sb]();xb=IW(D,vb)||IW(D,pi)}return xb}a(cS,"isIE");function jy(S){return(Qg===null||S===!1)&&(Qg=ft()&&!!St().sendBeacon),Qg}a(jy,"isBeaconsSupported");function lS(S,D){if(S)for(var M=0;M<S[ws];M++){var $=S[M];if($[ab]&&$[ab]===D)return $}return{}}a(lS,"_getNamedValue");function Q5(S){var D=te();return D&&S?lS(D.querySelectorAll("meta"),S).content:null}a(Q5,"findMetaTag");function km(S){var D,M=h1();if(M){var $=M.getEntriesByType("navigation")||[];D=lS(($[ws]>0?$[0]:{}).serverTiming,S).description}return D}a(km,"findNamedServerTiming");var Ib=4294967296,u0=4294967295,Tb=123456789,Gy=987654321,Xl=!1,wb=Tb,Pm=Gy;function wW(S){S<0&&(S>>>=0),wb=Tb+S&u0,Pm=Gy-S&u0,Xl=!0}a(wW,"_mwcSeed");function b1(){try{var S=Sl()&2147483647;wW((Math.random()*Ib^S)+S)}catch{}}a(b1,"_autoSeedMwc");function U5(S){return S>0?Lu(_b()/u0*(S+1))>>>0:0}a(U5,"randomValue");function _b(S){var D=0,M=kc()||bb();return M&&M.getRandomValues&&(D=M.getRandomValues(new Uint32Array(1))[0]&u0),D===0&&cS()&&(Xl||b1(),D=_W()&u0),D===0&&(D=Lu(Ib*Math.random()|0)),S||(D>>>=0),D}a(_b,"random32");function _W(S){Pm=36969*(Pm&65535)+(Pm>>16)&u0,wb=18e3*(wb&65535)+(wb>>16)&u0;var D=(Pm<<16)+(wb&65535)>>>0&u0|0;return S||(D>>>=0),D}a(_W,"mwcRandom32");function I1(S){S===void 0&&(S=22);for(var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=_b()>>>0,$=0,pe=ja;pe[ws]<S;)$++,pe+=D.charAt(M&63),M>>>=6,$===5&&(M=(_b()<<2&4294967295|M&3)>>>0,$=0);return pe}a(I1,"newId");var Dm="3.3.6",q5="."+I1(6),T1=0;function Bm(S){return S.nodeType===1||S.nodeType===9||!+S.nodeType}a(Bm,"_canAcceptData");function H5(S,D){var M=D[S.id];if(!M){M={};try{Bm(D)&&de(D,S.id,{e:!1,v:M})}catch{}}return M}a(H5,"_getCache");function Ug(S,D){return D===void 0&&(D=!1),L5(S+T1+++(D?"."+Dm:ja)+q5)}a(Ug,"createUniqueNamespace");function Nm(S){var D={id:Ug("_aiData-"+(S||ja)+"."+Dm),accept:a(function(M){return Bm(M)},"accept"),get:a(function(M,$,pe,_e){var Pe=M[D.id];return Pe?Pe[L5($)]:(_e&&(Pe=H5(D,M),Pe[L5($)]=pe),pe)},"get"),kill:a(function(M,$){if(M&&M[$])try{delete M[$]}catch{}},"kill")};return D}a(Nm,"createElmNodeData");function Vy(S){return S&&re(S)&&(S.isVal||S.fb||Xe(S,"v")||Xe(S,"mrg")||Xe(S,"ref")||S.set)}a(Vy,"_isConfigDefaults");function W5(S,D,M){var $,pe=M.dfVal||Z;if(D&&M.fb){var _e=M.fb;fe(_e)||(_e=[_e]);for(var Pe=0;Pe<_e[ws];Pe++){var je=_e[Pe],ot=D[je];if(pe(ot)?$=ot:S&&(ot=S.cfg[je],pe(ot)&&($=ot),S.set(S.cfg,$e(je),ot)),pe($))break}}return!pe($)&&pe(M.v)&&($=M.v),$}a(W5,"_getDefault");function zy(S,D,M){var $=M;if(M&&Vy(M)&&($=W5(S,D,M)),$){Vy($)&&($=zy(S,D,$));var pe;fe($)?(pe=[],pe[ws]=$[ws]):Jl($)&&(pe={}),pe&&(ut($,function(_e,Pe){Pe&&Vy(Pe)&&(Pe=zy(S,D,Pe)),pe[_e]=Pe}),$=pe)}return $}a(zy,"_resolveDefaultValue");function Ky(S,D,M,$){var pe,_e,Pe,je=$,ot,bt,Cr,Qn;Vy(je)?(pe=je.isVal,_e=je.set,Cr=je.rdOnly,Qn=je.blkVal,ot=je.mrg,bt=je.ref,!bt&&J(bt)&&(bt=!!ot),Pe=W5(S,D,je)):Pe=$,Qn&&S.blkVal(D,M);var ni,Tr=!0,Qr=D[M];(Qr||!j(Qr))&&(ni=Qr,Tr=!1,pe&&ni!==Pe&&!pe(ni)&&(ni=Pe,Tr=!0),_e&&(ni=_e(ni,Pe,D),Tr=ni===Pe)),Tr?Pe?ni=zy(S,D,Pe):ni=Pe:(Jl(ni)||fe(Pe))&&ot&&Pe&&(Jl(Pe)||fe(Pe))&&ut(Pe,function(Zn,Un){Ky(S,ni,Zn,Un)}),S.set(D,M,ni),bt&&S.ref(D,M),Cr&&S.rdOnly(D,M)}a(Ky,"_applyDefaultValue");var Qu=fi("[[ai_dynCfg_1]]"),qL=fi("[[ai_blkDynCfg_1]]"),uS=fi("[[ai_frcDynCfg_1]]");function HL(S){if(S){var D;if(fe(S)?(D=[],D[ws]=S[ws]):Jl(S)&&(D={}),D)return ut(S,function(M,$){D[M]=HL($)}),D}return S}a(HL,"_cfgDeepCopy");function WL(S){if(S){var D=S[Qu]||S;if(D.cfg&&(D.cfg===S||D.cfg[Qu]===D))return D}return null}a(WL,"getDynamicConfigHandler");function Sb(S){if(S&&(Jl(S)||fe(S)))try{S[qL]=!0}catch{}return S}a(Sb,"blockDynamicConversion");function Yy(S,D,M){var $=!1;return M&&!S[D.blkVal]&&($=M[uS],!$&&!M[qL]&&($=Jl(M)||fe(M))),$}a(Yy,"_canMakeDynamic");function d0(S){Me("InvalidAccess:"+S)}a(d0,"throwInvalidAccess");var SW=["push","pop","shift","unshift","splice"],qg=a(function(S,D,M,$){S&&S[Oy](3,108,"".concat(M," [").concat(D,"] failed - ")+ue($))},"_throwDynamicError");function $L(S,D,M){fe(D)&&wn(SW,function($){var pe=D[$];D[$]=function(){for(var _e=[],Pe=0;Pe<arguments.length;Pe++)_e[Pe]=arguments[Pe];var je=pe[TL](this,_e);return w1(S,D,M,"Patching"),je}})}a($L,"_patchArray");function Hg(S,D){var M=Qe(S,D);return M&&M.get}a(Hg,"_getOwnPropGetter");function RW(S,D,M,$){var pe={n:M,h:[],trk:a(function(bt){bt&&bt.fn&&(Co(pe.h,bt)===-1&&pe.h[so](bt),S.trk(bt,pe))},"trk"),clr:a(function(bt){var Cr=Co(pe.h,bt);Cr!==-1&&pe.h[Qy](Cr,1)},"clr")},_e=!0,Pe=!1;function je(){_e&&(Pe=Pe||Yy(je,S,$),$&&!$[Qu]&&Pe&&($=w1(S,$,M,"Converting")),_e=!1);var bt=S.act;return bt&&pe.trk(bt),$}a(je,"_getProperty"),je[S.prop]={chng:a(function(){S.add(pe)},"chng")};function ot(bt){if($!==bt){je[S.ro]&&!S.upd&&d0("["+M+"] is read-only:"+ue(D)),_e&&(Pe=Pe||Yy(je,S,$),_e=!1);var Cr=Pe&&je[S.rf];if(Pe)if(Cr){ut($,function(ni){$[ni]=bt?bt[ni]:Ou});try{ut(bt,function(ni,Tr){Rb(S,$,ni,Tr)}),bt=$}catch(ni){qg((S.hdlr||{})[Mg],M,"Assigning",ni),Pe=!1}}else $&&$[Qu]&&ut($,function(ni){var Tr=Hg($,ni);if(Tr){var Qr=Tr[S.prop];Qr&&Qr.chng()}});if(bt!==$){var Qn=bt&&Yy(je,S,bt);!Cr&&Qn&&(bt=w1(S,bt,M,"Converting")),$=bt,Pe=Qn}S.add(pe)}}a(ot,"_setProperty"),de(D,pe.n,{g:je,s:ot})}a(RW,"_createDynamicProperty");function Rb(S,D,M,$){if(D){var pe=Hg(D,M),_e=pe&&!!pe[S.prop];_e?D[M]=$:RW(S,D,M,$)}return D}a(Rb,"_setDynamicProperty");function jL(S,D,M,$){if(D){var pe=Hg(D,M),_e=pe&&!!pe[S.prop],Pe=$&&$[0],je=$&&$[1],ot=$&&$[2];if(!_e){if(ot)try{Sb(D)}catch(bt){qg((S.hdlr||{})[Mg],M,"Blocking",bt)}try{Rb(S,D,M,D[M]),pe=Hg(D,M)}catch(bt){qg((S.hdlr||{})[Mg],M,"State",bt)}}Pe&&(pe[S.rf]=Pe),je&&(pe[S.ro]=je),ot&&(pe[S.blkVal]=!0)}return D}a(jL,"_setDynamicPropertyState");function w1(S,D,M,$){try{ut(D,function(pe,_e){Rb(S,D,pe,_e)}),D[Qu]||(At(D,Qu,{get:a(function(){return S.hdlr},"get")}),$L(S,D,M))}catch(pe){qg((S.hdlr||{})[Mg],M,$,pe)}return D}a(w1,"_makeDynamicObject");var _1="[[ai_",ep="]]";function kW(S){var D=Er(_1+"get"+S.uid+ep),M=Er(_1+"ro"+S.uid+ep),$=Er(_1+"rf"+S.uid+ep),pe=Er(_1+"blkVal"+S.uid+ep),_e=Er(_1+"dtl"+S.uid+ep),Pe=null,je=null,ot;function bt(Tr,Qr){var Zn=ot.act;try{ot.act=Tr,Tr&&Tr[_e]&&(wn(Tr[_e],function(Hi){Hi.clr(Tr)}),Tr[_e]=[]),Qr({cfg:S.cfg,set:S.set.bind(S),setDf:S.setDf.bind(S),ref:S.ref.bind(S),rdOnly:S.rdOnly.bind(S)})}catch(Hi){var Un=S[Mg];throw Un&&Un[Oy](1,107,ue(Hi)),Hi}finally{ot.act=Zn||null}}a(bt,"_useHandler");function Cr(){if(Pe){var Tr=Pe;Pe=null,je&&je[I5](),je=null;var Qr=[];if(wn(Tr,function(Zn){if(Zn&&(Zn[_e]&&(wn(Zn[_e],function(Un){Un.clr(Zn)}),Zn[_e]=null),Zn.fn))try{bt(Zn,Zn.fn)}catch(Un){Qr[so](Un)}}),Pe)try{Cr()}catch(Zn){Qr[so](Zn)}Qr[ws]>0&&_de("Watcher error(s): ",Qr)}}a(Cr,"_notifyWatchers");function Qn(Tr){if(Tr&&Tr.h[ws]>0){Pe||(Pe=[]),je||(je=g1(function(){je=null,Cr()},0));for(var Qr=0;Qr<Tr.h[ws];Qr++){var Zn=Tr.h[Qr];Zn&&Co(Pe,Zn)===-1&&Pe[so](Zn)}}}a(Qn,"_addWatcher");function ni(Tr,Qr){if(Tr){var Zn=Tr[_e]=Tr[_e]||[];Co(Zn,Qr)===-1&&Zn[so](Qr)}}return a(ni,"_trackHandler"),ot={prop:D,ro:M,rf:$,blkVal:pe,hdlr:S,add:Qn,notify:Cr,use:bt,trk:ni},ot}a(kW,"_createState");function Lde(S,D){var M={fn:D,rm:a(function(){M.fn=null,S=null,D=null},"rm")};return de(M,"toJSON",{v:a(function(){return"WatcherHandler"+(M.fn?"":"[X]")},"v")}),S.use(M,D),M}a(Lde,"_createAndUseHandler");function PW(S,D,M){var $=WL(D);if($)return $;var pe=Ug("dyncfg",!0),_e=D&&M!==!1?D:HL(D),Pe;function je(){Pe.notify()}a(je,"_notifyWatchers");function ot(Un,Hi,Oo){try{Un=Rb(Pe,Un,Hi,Oo)}catch(ao){qg(S,Hi,"Setting value",ao)}return Un[Hi]}a(ot,"_setValue");function bt(Un){return Lde(Pe,Un)}a(bt,"_watch");function Cr(Un,Hi){Pe.use(null,function(Oo){var ao=Pe.upd;try{J(Hi)||(Pe.upd=Hi),Un(Oo)}finally{Pe.upd=ao}})}a(Cr,"_block");function Qn(Un,Hi){var Oo;return jL(Pe,Un,Hi,(Oo={},Oo[0]=!0,Oo))[Hi]}a(Qn,"_ref");function ni(Un,Hi){var Oo;return jL(Pe,Un,Hi,(Oo={},Oo[1]=!0,Oo))[Hi]}a(ni,"_rdOnly");function Tr(Un,Hi){var Oo;return jL(Pe,Un,Hi,(Oo={},Oo[2]=!0,Oo))[Hi]}a(Tr,"_blkPropValue");function Qr(Un,Hi){return Hi&&ut(Hi,function(Oo,ao){Ky(Zn,Un,Oo,ao)}),Un}a(Qr,"_applyDefaults");var Zn={uid:null,cfg:_e,logger:S,notify:je,set:ot,setDf:Qr,watch:bt,ref:Qn,rdOnly:ni,blkVal:Tr,_block:Cr};return de(Zn,"uid",{c:!1,e:!1,w:!1,v:pe}),Pe=kW(Zn),w1(Pe,_e,"config","Creating"),Zn}a(PW,"_createDynamicHandler");function DW(S,D){S?(S[bd](D),S[Oy](2,108,D)):d0(D)}a(DW,"_logInvalidAccess");function dS(S,D,M,$){var pe=PW(M,S||{},$);return D&&pe.setDf(pe.cfg,D),pe}a(dS,"createDynamicConfig");function BW(S,D,M){var $=S[Qu]||S;return $.cfg&&($.cfg===S||$.cfg[Qu]===$)?$[b5](D):(DW(M,EW+ue(S)),dS(S,null,M)[b5](D))}a(BW,"onConfigChange");var $5=null;function NW(){var S=B("Microsoft");return S&&($5=S.ApplicationInsights),$5}a(NW,"_getExtensionNamespace");function Fde(S){var D=$5;return!D&&S.disableDbgExt!==!0&&(D=$5||NW()),D?D.ChromeDbgExt:null}a(Fde,"getDebugExt");var kb,j5="warnToConsole",MW="AI (Internal): ",LW="AI: ",Ode="AITR_",Qde={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},FW=(kb={},kb[0]=null,kb[1]="errorToConsole",kb[2]=j5,kb[3]="debugToConsole",kb);function OW(S){return S?'"'+S[cb](/\"/g,ja)+'"':ja}a(OW,"_sanitizeDiagnosticText");function G5(S,D){var M=O5();if(M){var $="log";M[S]&&($=S),ne(M[$])&&M[$](D)}}a(G5,"_logToConsole");var V5=function(){function S(D,M,$,pe){$===void 0&&($=!1);var _e=this;_e[SL]=D,_e[A1]=($?LW:MW)+D;var Pe=ja;Io()&&(Pe=Eb().stringify(pe));var je=(M?" message:"+OW(M):ja)+(pe?" props:"+OW(Pe):ja);_e[A1]+=je}return a(S,"_InternalLogMessage"),S.dataType="MessageData",S}();function Ude(S,D){return(S||{})[Mg]||new z5(D)}a(Ude,"safeGetLogger");var z5=function(){function S(D){this.identifier="DiagnosticLogger",this.queue=[];var M=0,$={},pe,_e,Pe,je,ot;oS(S,this,function(bt){ot=Qn(D||{}),bt.consoleLoggingLevel=function(){return pe},bt[Oy]=function(Qr,Zn,Un,Hi,Oo){Oo===void 0&&(Oo=!1);var ao=new V5(Zn,Un,Oo,Hi);if(je)throw ue(ao);var Jc=FW[Qr]||j5;if(J(ao[A1]))Tr("throw"+(Qr===1?"Critical":"Warning"),ao);else{if(Oo){var aI=+ao[SL];!$[aI]&&pe>=Qr&&(bt[Jc](ao[A1]),$[aI]=!0)}else pe>=Qr&&bt[Jc](ao[A1]);Cr(Qr,ao)}},bt.debugToConsole=function(Qr){G5("debug",Qr),Tr("warning",Qr)},bt[bd]=function(Qr){G5("warn",Qr),Tr("warning",Qr)},bt.errorToConsole=function(Qr){G5("error",Qr),Tr("error",Qr)},bt.resetInternalMessageCount=function(){M=0,$={}},bt.logInternalMessage=Cr,bt[Id]=function(Qr){ot&&ot.rm(),ot=null};function Cr(Qr,Zn){if(!ni()){var Un=!0,Hi=Ode+Zn[SL];if($[Hi]?Un=!1:$[Hi]=!0,Un&&(Qr<=_e&&(bt.queue[so](Zn),M++,Tr(Qr===1?"error":"warn",Zn)),M===Pe)){var Oo="Internal events throttle limit per PageView reached for this app.",ao=new V5(23,Oo,!1);bt.queue[so](ao),Qr===1?bt.errorToConsole(Oo):bt[bd](Oo)}}}a(Cr,"_logInternalMessage");function Qn(Qr){return BW(dS(Qr,Qde,bt).cfg,function(Zn){var Un=Zn.cfg;pe=Un[_L],_e=Un.loggingLevelTelemetry,Pe=Un.maxMessageLimit,je=Un.enableDebug})}a(Qn,"_setDefaultsFromConfig");function ni(){return M>=Pe}a(ni,"_areInternalMessagesThrottled");function Tr(Qr,Zn){var Un=Fde(D||{});Un&&Un[RL]&&Un[RL](Qr,Zn)}a(Tr,"_debugExtMsg")})}return a(S,"DiagnosticLogger"),S.__ieDyn=1,S}();function K5(S){return S||new z5}a(K5,"_getLogger");function uf(S,D,M,$,pe,_e){_e===void 0&&(_e=!1),K5(S)[Oy](D,M,$,pe,_e)}a(uf,"_throwInternal");function Y5(){for(var S=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],D=ja,M,$=0;$<4;$++)M=_b(),D+=S[M&15]+S[M>>4&15]+S[M>>8&15]+S[M>>12&15]+S[M>>16&15]+S[M>>20&15]+S[M>>24&15]+S[M>>28&15];var pe=S[8+(_b()&3)|0];return sr(D,0,8)+sr(D,9,4)+"4"+sr(D,13,3)+pe+sr(D,16,3)+sr(D,19,12)}a(Y5,"generateW3CId");var Pb=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,GL="00",tp="ff",qi="00000000000000000000000000000000",Wg="0000000000000000",Pc=1;function f0(S,D,M){return S&&S[ws]===D&&S!==M?!!S.match(/^[\da-f]*$/i):!1}a(f0,"_isValid");function J5(S,D,M){return f0(S,D)?S:M}a(J5,"_formatValue");function S1(S){(isNaN(S)||S<0||S>255)&&(S=1);for(var D=S.toString(16);D[ws]<2;)D="0"+D;return D}a(S1,"_formatFlags");function Db(S,D,M,$){return{version:f0($,2,tp)?$:GL,traceId:Bb(S)?S:Y5(),spanId:Nb(D)?D:Jr(Y5(),16),traceFlags:M>=0&&M<=255?M:1}}a(Db,"createTraceParent");function rp(S,D){if(!S||(fe(S)&&(S=S[0]||""),!S||!ie(S)||S[ws]>8192))return null;if(S.indexOf(",")!==-1){var M=S[kL](",");S=M[D>0&&M[ws]>D?D:0]}var $=Pb.exec($a(S));return!$||$[1]===tp||$[2]===qi||$[3]===Wg?null:{version:($[1]||ja)[sb](),traceId:($[2]||ja)[sb](),spanId:($[3]||ja)[sb](),traceFlags:parseInt($[4],16)}}a(rp,"parseTraceParent");function Bb(S){return f0(S,32,qi)}a(Bb,"isValidTraceId");function Nb(S){return f0(S,16,Wg)}a(Nb,"isValidSpanId");function Mb(S){return!(!S||!f0(S[wL],2,tp)||!f0(S.traceId,32,qi)||!f0(S.spanId,16,Wg)||!f0(S1(S[T5]),2))}a(Mb,"isValidTraceParent");function X5(S){return Mb(S)?(S[T5]&Pc)===Pc:!1}a(X5,"isSampledFlag");function R1(S){if(S){var D=S1(S[T5]);f0(D,2)||(D="01");var M=S[wL]||GL;return M!=="00"&&M!=="ff"&&(M=GL),"".concat(M.toLowerCase(),"-").concat(J5(S.traceId,32,qi).toLowerCase(),"-").concat(J5(S.spanId,16,Wg).toLowerCase(),"-").concat(D.toLowerCase())}return""}a(R1,"formatTraceParent");function VL(S){var D="traceparent",M=rp(Q5(D),S);return M||(M=rp(km(D),S)),M}a(VL,"findW3cTraceParent");function zL(S){var D=S.getElementsByTagName("script"),M=[];return wn(D,function($){var pe=$[PL]("src");if(pe){var _e=$[PL]("crossorigin"),Pe=$.hasAttribute("async")===!0,je=$.hasAttribute("defer")===!0,ot=$[PL]("referrerpolicy"),bt={url:pe};_e&&(bt.crossOrigin=_e),Pe&&(bt.async=Pe),je&&(bt.defer=je),ot&&(bt.referrerPolicy=ot),M[so](bt)}}),M}a(zL,"findAllScripts");var Z5="on",fS="attachEvent",e4="addEventListener",t4="detachEvent",QW="removeEventListener",KL="events";Ug("aiEvtPageHide"),Ug("aiEvtPageShow");var qde=/\.[\.]+/g,Hde=/[\.]+$/,r4=1,Lb=Nm("events"),Zl=/^([^.]*)(?:\.(.+)|)/;function pS(S){return S&&S[cb]?S[cb](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,ja):S}a(pS,"_normalizeNamespace");function Rl(S,D){if(D){var M=ja;fe(D)?(M=ja,wn(D,function(pe){pe=pS(pe),pe&&(pe[0]!=="."&&(pe="."+pe),M+=pe)})):M=pS(D),M&&(M[0]!=="."&&(M="."+M),S=(S||ja)+M)}var $=Zl.exec(S||ja)||[];return{type:$[1],ns:($[2]||ja).replace(qde,".").replace(Hde,ja)[kL](".").sort().join(".")}}a(Rl,"_getEvtNamespace");function Jy(S,D,M){M===void 0&&(M=!0);var $=Lb.get(S,KL,{},M),pe=$[D];return pe||(pe=$[D]=[]),pe}a(Jy,"_getRegisteredEvents");function UW(S,D,M,$){S&&D&&D[Uy]&&(S[QW]?S[QW](D[Uy],M,$):S[t4]&&S[t4](Z5+D[Uy],M))}a(UW,"_doDetach");function Wde(S,D,M,$){var pe=!1;return S&&D&&D[Uy]&&M&&(S[e4]?(S[e4](D[Uy],M,$),pe=!0):S[fS]&&(S[fS](Z5+D[Uy],M),pe=!0)),pe}a(Wde,"_doAttach");function mS(S,D,M,$){for(var pe=D[ws];pe--;){var _e=D[pe];_e&&(!M.ns||M.ns===_e[vW].ns)&&(!$||$(_e))&&(UW(S,_e[vW],_e.handler,_e.capture),D[Qy](pe,1))}}a(mS,"_doUnregister");function YL(S,D,M){if(D[Uy])mS(S,Jy(S,D[Uy]),D,M);else{var $=Lb.get(S,KL,{});ut($,function(pe,_e){mS(S,_e,D,M)}),Ot($)[ws]===0&&Lb.kill(S,KL)}}a(YL,"_unregisterEvents");function $de(S,D){var M;return D?(fe(D)?M=[S].concat(D):M=[S,D],M=Rl("xx",M).ns[kL](".")):M=S,M}a($de,"mergeEvtNamespace");function JL(S,D,M,$,pe){pe===void 0&&(pe=!1);var _e=!1;if(S)try{var Pe=Rl(D,$);if(_e=Wde(S,Pe,M,pe),_e&&Lb.accept(S)){var je={guid:r4++,evtName:Pe,handler:M,capture:pe};Jy(S,Pe.type)[so](je)}}catch{}return _e}a(JL,"eventOn");function qW(S,D,M,$,pe){if(pe===void 0&&(pe=!1),S)try{var _e=Rl(D,$),Pe=!1;YL(S,_e,function(je){return _e.ns&&!M||je.handler===M?(Pe=!0,!0):!1}),Pe||UW(S,_e,M,pe)}catch{}}a(qW,"eventOff");var n4="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",HW="sampleRate",i4="ProcessLegacy",WW="http.method",XL="https://dc.services.visualstudio.com",hS="/v2/track",Mm="not_specified",ZL="iKey",$W=Fy({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Xy="split",On="length",Fb="toLowerCase",k1="ingestionendpoint",P1="toString",eF="removeItem",gS="message",Ob="count",o4="preTriggerDate",tF="getUTCDate",s4="stringify",Qb="pathname",D1="match",rF="correlationHeaderExcludePatterns",np="name",Ub="extensionConfig",Lm="properties",Td="measurements",qb="sizeInBytes",AS="typeName",Hb="exceptions",yS="severityLevel",Wb="problemGroup",df="parsedStack",a4="hasFullStack",c4="assembly",p0="fileName",$b="line",Zy="aiDataContract",CS="duration";function nF(S,D,M){var $=D[On],pe=iF(S,D);if(pe[On]!==$){for(var _e=0,Pe=pe;M[Pe]!==void 0;)_e++,Pe=dr(pe,0,147)+jW(_e);pe=Pe}return pe}a(nF,"dataSanitizeKeyAndAddUniqueness");function iF(S,D){var M;return D&&(D=$a($e(D)),D[On]>150&&(M=dr(D,0,150),uf(S,2,57,"name is too long.  It has been truncated to 150 characters.",{name:D},!0))),M||D}a(iF,"dataSanitizeKey");function kl(S,D,M){M===void 0&&(M=1024);var $;return D&&(M=M||1024,D=$a($e(D)),D[On]>M&&($=dr(D,0,M),uf(S,2,61,"string value is too long. It has been truncated to "+M+" characters.",{value:D},!0))),$||D}a(kl,"dataSanitizeString");function Fm(S,D){return sF(S,D,2048,66)}a(Fm,"dataSanitizeUrl");function l4(S,D){var M;return D&&D[On]>32768&&(M=dr(D,0,32768),uf(S,2,56,"message is too long, it has been truncated to 32768 characters.",{message:D},!0)),M||D}a(l4,"dataSanitizeMessage");function oF(S,D){var M;if(D){var $=""+D;$[On]>32768&&(M=dr($,0,32768),uf(S,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:D},!0))}return M||D}a(oF,"dataSanitizeException");function $g(S,D){if(D){var M={};ut(D,function($,pe){if(re(pe)&&Io())try{pe=Eb()[s4](pe)}catch(_e){uf(S,2,49,"custom property is not valid",{exception:_e},!0)}pe=kl(S,pe,8192),$=nF(S,$,M),M[$]=pe}),D=M}return D}a($g,"dataSanitizeProperties");function ip(S,D){if(D){var M={};ut(D,function($,pe){$=nF(S,$,M),M[$]=pe}),D=M}return D}a(ip,"dataSanitizeMeasurements");function jb(S,D){return D&&sF(S,D,128,69)[P1]()}a(jb,"dataSanitizeId");function sF(S,D,M,$){var pe;return D&&(D=$a($e(D)),D[On]>M&&(pe=dr(D,0,M),uf(S,2,$,"input is too long, it has been truncated to "+M+" characters.",{data:D},!0))),pe||D}a(sF,"dataSanitizeInput");function jW(S){var D="00"+S;return sr(D,D[On]-3)}a(jW,"dsPadNumber");var aF=te()||{},GW=0,jde=[null,null,null,null,null];function Gb(S){var D=GW,M=jde,$=M[D];return aF.createElement?M[D]||($=M[D]=aF.createElement("a")):$={host:zW(S,!0)},$.href=S,D++,D>=M[On]&&(D=0),GW=D,$}a(Gb,"urlParseUrl");function Gde(S){var D,M=Gb(S);return M&&(D=M.href),D}a(Gde,"urlGetAbsoluteUrl");function Vde(S){var D,M=Gb(S);return M&&(D=M[Qb]),D}a(Vde,"urlGetPathName");function VW(S,D){return S?S.toUpperCase()+" "+D:D}a(VW,"urlGetCompleteUrl");function zW(S,D){var M=jg(S,D)||"";if(M){var $=M[D1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if($!=null&&$[On]>3&&ie($[2])&&$[2][On]>0)return $[2]+($[3]||"")}return M}a(zW,"urlParseHost");function jg(S,D){var M=null;if(S){var $=S[D1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if($!=null&&$[On]>2&&ie($[2])&&$[2][On]>0&&(M=$[2]||"",D&&$[On]>2)){var pe=($[1]||"")[Fb](),_e=$[3]||"";(pe==="http"&&_e===":80"||pe==="https"&&_e===":443")&&(_e=""),M+=_e}}return M}a(jg,"urlParseFullHost");var KW=[XL+hS,"https://breeze.aimon.applicationinsights.io"+hS,"https://dc-int.services.visualstudio.com"+hS],Vb="cid-v1:";function YW(S){return Co(KW,S[Fb]())!==-1}a(YW,"isInternalApplicationInsightsEndpoint");function cF(S){Vb=S}a(cF,"correlationIdSetPrefix");function lF(){return Vb}a(lF,"correlationIdGetPrefix");function eC(S,D,M){if(!D||S&&S.disableCorrelationHeaders)return!1;if(S&&S[rF]){for(var $=0;$<S.correlationHeaderExcludePatterns[On];$++)if(S[rF][$].test(D))return!1}var pe=Gb(D).host[Fb]();if(pe&&(Xr(pe,":443")!==-1||Xr(pe,":80")!==-1)&&(pe=(jg(D,!0)||"")[Fb]()),(!S||!S.enableCorsCorrelation)&&pe&&pe!==M)return!1;var _e=S&&S.correlationHeaderDomains;if(_e){var Pe;if(wn(_e,function(bt){var Cr=new RegExp(bt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));Pe=Pe||Cr.test(pe)}),!Pe)return!1}var je=S&&S.correlationHeaderExcludedDomains;if(!je||je[On]===0)return!0;for(var $=0;$<je[On];$++){var ot=new RegExp(je[$].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ot.test(pe))return!1}return pe&&pe[On]>0}a(eC,"correlationIdCanIncludeCorrelationHeader");function JW(S){if(S){var D=XW(S,$W[1]);if(D&&D!==Vb)return D}}a(JW,"correlationIdGetCorrelationContext");function XW(S,D){if(S)for(var M=S[Xy](","),$=0;$<M[On];++$){var pe=M[$][Xy]("=");if(pe[On]===2&&pe[0]===D)return pe[1]}}a(XW,"correlationIdGetCorrelationContextValue");function ZW(S,D,M,$){var pe,_e=$,Pe=$;if(D&&D[On]>0){var je=Gb(D);if(pe=je.host,!_e)if(je[Qb]!=null){var ot=je.pathname[On]===0?"/":je[Qb];ot.charAt(0)!=="/"&&(ot="/"+ot),Pe=je[Qb],_e=kl(S,M?M+" "+ot:ot)}else _e=kl(S,D)}else pe=$,_e=$;return{target:pe,name:_e,data:Pe}}a(ZW,"AjaxHelperParseDependencyPath");function zde(){var S=h1();if(S&&S.now&&S.timing){var D=S.now()+S.timing.navigationStart;if(D>0)return D}return Sl()}a(zde,"dateTimeUtilsNow");function Kde(S,D){var M=null;return S!==0&&D!==0&&!j(S)&&!j(D)&&(M=D-S),M}a(Kde,"dateTimeUtilsDuration");function uF(S,D){var M=S||{};return{getName:a(function(){return M[np]},"getName"),setName:a(function($){D&&D.setName($),M[np]=$},"setName"),getTraceId:a(function(){return M.traceID},"getTraceId"),setTraceId:a(function($){D&&D.setTraceId($),Bb($)&&(M.traceID=$)},"setTraceId"),getSpanId:a(function(){return M.parentID},"getSpanId"),setSpanId:a(function($){D&&D.setSpanId($),Nb($)&&(M.parentID=$)},"setSpanId"),getTraceFlags:a(function(){return M.traceFlags},"getTraceFlags"),setTraceFlags:a(function($){D&&D.setTraceFlags($),M.traceFlags=$},"setTraceFlags")}}a(uF,"createDistributedTraceContextFromTrace");var zb=Sm({LocalStorage:0,SessionStorage:1}),Yde=Sm({AI:0,AI_AND_W3C:1,W3C:2}),vS=Sm({Normal:1,Critical:2}),tC=void 0,m0=void 0,e$="";function Kb(){return u4()?Yb(zb.LocalStorage):null}a(Kb,"_getLocalStorageObject");function Yb(S){try{if(j(Q()))return null;var D=new Date()[P1](),M=B(S===zb.LocalStorage?"localStorage":"sessionStorage"),$=e$+D;M.setItem($,D);var pe=M.getItem($)!==D;if(M[eF]($),!pe)return M}catch{}return null}a(Yb,"_getVerifiedStorageObject");function Jb(){return Gg()?Yb(zb.SessionStorage):null}a(Jb,"_getSessionStorageObject");function xS(){tC=!1,m0=!1}a(xS,"utlDisableStorage");function ES(S){e$=S||""}a(ES,"utlSetStoragePrefix");function Jde(){tC=u4(!0),m0=Gg(!0)}a(Jde,"utlEnableStorage");function u4(S){return(S||tC===void 0)&&(tC=!!Yb(zb.LocalStorage)),tC}a(u4,"utlCanUseLocalStorage");function t$(S,D){var M=Kb();if(M!==null)try{return M.getItem(D)}catch($){tC=!1,uf(S,2,1,"Browser failed read of local storage. "+Wy($),{exception:ue($)})}return null}a(t$,"utlGetLocalStorage");function r$(S,D,M){var $=Kb();if($!==null)try{return $.setItem(D,M),!0}catch(pe){tC=!1,uf(S,2,3,"Browser failed write to local storage. "+Wy(pe),{exception:ue(pe)})}return!1}a(r$,"utlSetLocalStorage");function op(S,D){var M=Kb();if(M!==null)try{return M[eF](D),!0}catch($){tC=!1,uf(S,2,5,"Browser failed removal of local storage item. "+Wy($),{exception:ue($)})}return!1}a(op,"utlRemoveStorage");function Gg(S){return(S||m0===void 0)&&(m0=!!Yb(zb.SessionStorage)),m0}a(Gg,"utlCanUseSessionStorage");function Xb(){var S=[];return Gg()&&ut(B("sessionStorage"),function(D){S.push(D)}),S}a(Xb,"utlGetSessionStorageKeys");function n$(S,D){var M=Jb();if(M!==null)try{return M.getItem(D)}catch($){m0=!1,uf(S,2,2,"Browser failed read of session storage. "+Wy($),{exception:ue($)})}return null}a(n$,"utlGetSessionStorage");function Xde(S,D,M){var $=Jb();if($!==null)try{return $.setItem(D,M),!0}catch(pe){m0=!1,uf(S,2,4,"Browser failed write to session storage. "+Wy(pe),{exception:ue(pe)})}return!1}a(Xde,"utlSetSessionStorage");function i$(S,D){var M=Jb();if(M!==null)try{return M[eF](D),!0}catch($){m0=!1,uf(S,2,6,"Browser failed removal of session storage item. "+Wy($),{exception:ue($)})}return!1}a(i$,"utlRemoveSessionStorage");var Zde="appInsightsThrottle",efe=function(){function S(D,M){var $=this,pe,_e,Pe,je,ot,bt,Cr,Qn=!1,ni=!1;Qr(),$._getDbgPlgTargets=function(){return[Cr]},$.getConfig=function(){return Pe},$.canThrottle=function(Mt){var Zr=IF(Mt),En=Zn(Mt);return Oo(En,pe,Zr)},$.isTriggered=function(Mt){return x$(Mt)},$.isReady=function(){return Qn},$.flush=function(Mt){try{var Zr=E$(Mt);if(Zr&&Zr[On]>0){var En=Zr.slice(0);return Cr[Mt]=[],wn(En,function(xs){Tr(xs.msgID,xs[gS],xs.severity,!1)}),!0}}catch{}return!1},$.flushAll=function(){try{if(Cr){var Mt=!0;return ut(Cr,function(Zr){var En=$.flush(parseInt(Zr));Mt=Mt&&En}),Mt}}catch{}return!1},$.onReadyState=function(Mt,Zr){return Zr===void 0&&(Zr=!0),Qn=j(Mt)?!0:Mt,Qn&&Zr?$.flushAll():null},$.sendMessage=function(Mt,Zr,En){return Tr(Mt,Zr,En,!0)};function Tr(Mt,Zr,En,xs){if(Qn){var Xc=yfe(Mt);if(!Xc)return;var Ga=Zn(Mt),Zc=IF(Mt),N1=Oo(Ga,pe,Zc),sC=!1,cI=0,b$=x$(Mt);try{N1&&!b$?(cI=Sr(Ga.limit.maxSendNumber,Zc[Ob]+1),Zc[Ob]=0,sC=!0,ot[Mt]=!0,Zc[o4]=new Date):(ot[Mt]=N1,Zc[Ob]+=1);var I$=ao(Mt);bF(_e,I$,Zc);for(var I4=0;I4<cI;I4++)v$(Mt,_e,Zr,En)}catch{}return{isThrottled:sC,throttleNum:cI}}else if(xs){var Cfe=E$(Mt);Cfe.push({msgID:Mt,message:Zr,severity:En})}return null}a(Tr,"_flushMessage");function Qr(){_e=Ude(D),ot={},je={},Cr={},Pe={},Un(109),bt=UL(M)?M:"",D.addUnloadHook(BW(D.config,function(Mt){var Zr=Mt.cfg;pe=u4();var En=Zr.throttleMgrCfg||{};ut(En,function(xs,Xc){Un(parseInt(xs),Xc)})}))}a(Qr,"_initConfig");function Zn(Mt){return Pe[Mt]||Pe[109]}a(Zn,"_getCfgByKey");function Un(Mt,Zr){var En,xs;try{var Xc=Zr||{},Ga={};Ga.disabled=!!Xc.disabled;var Zc=Xc.interval||{};ni=Zc?.daysOfMonth&&Zc?.daysOfMonth[On]>0,Ga.interval=Hi(Zc);var N1={samplingRate:((En=Xc.limit)===null||En===void 0?void 0:En.samplingRate)||100,maxSendNumber:((xs=Xc.limit)===null||xs===void 0?void 0:xs.maxSendNumber)||1};Ga.limit=N1,Pe[Mt]=Ga}catch{}}a(Un,"_setCfgByKey");function Hi(Mt){Mt=Mt||{};var Zr=Mt?.monthInterval,En=Mt?.dayInterval;return j(Zr)&&j(En)&&(Mt.monthInterval=3,ni||(Mt.daysOfMonth=[28],ni=!0)),Mt={monthInterval:Mt?.monthInterval,dayInterval:Mt?.dayInterval,daysOfMonth:Mt?.daysOfMonth},Mt}a(Hi,"_getIntervalConfig");function Oo(Mt,Zr,En){if(Mt&&!Mt.disabled&&Zr&&UL(En)){var xs=kS(),Xc=En.date,Ga=Mt.interval,Zc=1;if(Ga?.monthInterval){var N1=(xs.getUTCFullYear()-Xc.getUTCFullYear())*12+xs.getUTCMonth()-Xc.getUTCMonth();Zc=b4(Ga.monthInterval,0,N1)}var sC=1;if(ni)sC=Co(Ga.daysOfMonth,xs[tF]());else if(Ga?.dayInterval){var cI=Lu((xs.getTime()-Xc.getTime())/864e5);sC=b4(Ga.dayInterval,0,cI)}return Zc>=0&&sC>=0}return!1}a(Oo,"_canThrottle");function ao(Mt,Zr){var En=UL(Zr)?Zr:"";return Mt?Zde+En+"-"+Mt:null}a(ao,"_getLocalStorageName");function Jc(Mt){try{if(Mt){var Zr=new Date;return Mt.getUTCFullYear()===Zr.getUTCFullYear()&&Mt.getUTCMonth()===Zr.getUTCMonth()&&Mt[tF]()===Zr[tF]()}}catch{}return!1}a(Jc,"_isTriggeredOnCurDate");function aI(Mt,Zr,En){try{var xs={date:kS(),count:0};if(Mt){var Xc=JSON.parse(Mt),Ga={date:kS(Xc.date)||xs.date,count:Xc[Ob]||xs[Ob],preTriggerDate:Xc.preTriggerDate?kS(Xc[o4]):void 0};return Ga}else return bF(Zr,En,xs),xs}catch{}return null}a(aI,"_getLocalStorageObj");function kS(Mt){try{if(Mt){var Zr=new Date(Mt);if(!isNaN(Zr.getDate()))return Zr}else return new Date}catch{}return null}a(kS,"_getThrottleDate");function bF(Mt,Zr,En){try{return r$(Mt,Zr,$a(JSON[s4](En)))}catch{}return!1}a(bF,"_resetLocalStorage");function b4(Mt,Zr,En){return Mt<=0?1:En>=Zr&&(En-Zr)%Mt==0?Lu((En-Zr)/Mt)+1:-1}a(b4,"_checkInterval");function v$(Mt,Zr,En,xs){uf(Zr,xs||1,Mt,En)}a(v$,"_sendMessage");function yfe(Mt){try{var Zr=Zn(Mt);return U5(1e6)<=Zr.limit.samplingRate}catch{}return!1}a(yfe,"_canSampledIn");function IF(Mt){try{var Zr=je[Mt];if(!Zr){var En=ao(Mt,bt);Zr=aI(t$(_e,En),_e,En),je[Mt]=Zr}return je[Mt]}catch{}return null}a(IF,"_getLocalStorageObjByKey");function x$(Mt){var Zr=ot[Mt];if(j(Zr)){Zr=!1;var En=IF(Mt);En&&(Zr=Jc(En[o4])),ot[Mt]=Zr}return ot[Mt]}a(x$,"_isTrigger");function E$(Mt){return Cr=Cr||{},j(Cr[Mt])&&(Cr[Mt]=[]),Cr[Mt]}a(E$,"_getQueueByKey")}return a(S,"ThrottleMgr"),S}(),dF=";",Om="=";function d4(S){if(!S)return{};var D=S[Xy](dF),M=ts(D,function(pe,_e){var Pe=_e[Xy](Om);if(Pe[On]===2){var je=Pe[0][Fb](),ot=Pe[1];pe[je]=ot}return pe},{});if(Ot(M)[On]>0){if(M.endpointsuffix){var $=M.location?M.location+".":"";M[k1]=M[k1]||"https://"+$+"dc."+M.endpointsuffix}M[k1]=M[k1]||XL,Yf(M[k1],"/")&&(M[k1]=M[k1].slice(0,-1))}return M}a(d4,"parseConnectionString");var f4={parse:d4},p4=function(){function S(D,M,$){var pe=this,_e=this;_e.ver=1,_e.sampleRate=100,_e.tags={},_e[np]=kl(D,$)||Mm,_e.data=M,_e.time=Og(new Date),_e[Zy]={time:1,iKey:1,name:1,sampleRate:a(function(){return pe.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return a(S,"Envelope"),S}(),tfe=function(){function S(D,M,$,pe){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var _e=this;_e.ver=2,_e[np]=kl(D,M)||Mm,_e[Lm]=$g(D,$),_e[Td]=ip(D,pe)}return a(S,"Event"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Event",S.dataType="EventData",S}(),rfe=58,o$=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,nfe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Zb=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,s$=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,ife=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,ofe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,sfe=/([^\(\s\n]+):([0-9]+)$/,a$="<no_method>",eI="error",ff="stack",bS="stackDetails",m4="errorSrc",IS="message",TS="description",fF=[{re:nfe,len:5,m:1,fn:2,ln:3,col:4},{chk:h4,pre:qr,re:Zb,len:4,m:1,fn:2,ln:3},{re:s$,len:3,m:1,fn:2,hdl:mF},{re:ife,len:2,fn:1,hdl:mF}];function qr(S){return S.replace(/(\(anonymous\))/,"<anonymous>")}a(qr,"_scrubAnonymous");function h4(S){return Xr(S,"[native")<0}a(h4,"_ignoreNative");function wS(S,D){var M=S;return M&&!ie(M)&&(JSON&&JSON[s4]?(M=JSON[s4](S),D&&(!M||M==="{}")&&(ne(S[P1])?M=S[P1]():M=""+S)):M=""+S+" - (Missing JSON.stringify)"),M||""}a(wS,"_stringify");function rC(S,D){var M=S;return S&&(M&&!ie(M)&&(M=S[IS]||S[TS]||M),M&&!ie(M)&&(M=wS(M,!0)),S.filename&&(M=M+" @"+(S.filename||"")+":"+(S.lineno||"?")+":"+(S.colno||"?"))),D&&D!=="String"&&D!=="Object"&&D!=="Error"&&Xr(M||"",D)===-1&&(M=D+": "+M),M||""}a(rC,"_formatMessage");function c$(S){try{if(re(S))return"hasFullStack"in S&&"typeName"in S}catch{}return!1}a(c$,"_isExceptionDetailsInternal");function l$(S){try{if(re(S))return"ver"in S&&"exceptions"in S&&"properties"in S}catch{}return!1}a(l$,"_isExceptionInternal");function g4(S){return S&&S.src&&ie(S.src)&&S.obj&&fe(S.obj)}a(g4,"_isStackDetails");function Vg(S){var D=S||"";ie(D)||(ie(D[ff])?D=D[ff]:D=""+D);var M=D[Xy](`
`);return{src:D,obj:M}}a(Vg,"_convertStackObj");function u$(S){for(var D=[],M=S[Xy](`
`),$=0;$<M[On];$++){var pe=M[$];M[$+1]&&(pe+="@"+M[$+1],$++),D.push(pe)}return{src:S,obj:D}}a(u$,"_getOperaStack");function A4(S){var D=null;if(S)try{if(S[ff])D=Vg(S[ff]);else if(S[eI]&&S[eI][ff])D=Vg(S[eI][ff]);else if(S.exception&&S.exception[ff])D=Vg(S.exception[ff]);else if(g4(S))D=S;else if(g4(S[bS]))D=S[bS];else if(Re()&&Re().opera&&S[IS])D=u$(S[gS]);else if(S.reason&&S.reason[ff])D=Vg(S.reason[ff]);else if(ie(S))D=Vg(S);else{var M=S[IS]||S[TS]||"";ie(S[m4])&&(M&&(M+=`
`),M+=" from "+S[m4]),M&&(D=Vg(M))}}catch($){D=Vg($)}return D||{src:"",obj:null}}a(A4,"_getStackFromErrorObj");function d$(S){var D="";return S&&(S.obj?D=S.obj.join(`
`):D=S.src||""),D}a(d$,"_formatStackTrace");function y4(S){var D,M=S.obj;if(M&&M[On]>0){D=[];var $=0,pe=!1,_e=0;wn(M,function(Zn){if(pe||afe(Zn)){var Un=$e(Zn);pe=!0;var Hi=cfe(Un,$);Hi&&(_e+=Hi[qb],D.push(Hi),$++)}});var Pe=32*1024;if(_e>Pe)for(var je=0,ot=D[On]-1,bt=0,Cr=je,Qn=ot;je<ot;){var ni=D[je][qb],Tr=D[ot][qb];if(bt+=ni+Tr,bt>Pe){var Qr=Qn-Cr+1;D.splice(Cr,Qr);break}Cr=je,Qn=ot,je++,ot--}}return D}a(y4,"_parseStack");function tI(S){var D="";if(S&&(D=S.typeName||S[np]||"",!D))try{var M=/function (.{1,200})\(/,$=M.exec(S.constructor[P1]());D=$&&$[On]>1?$[1]:""}catch{}return D}a(tI,"_getErrorType");function C4(S){if(S)try{if(!ie(S)){var D=tI(S),M=wS(S,!1);return(!M||M==="{}")&&(S[eI]&&(S=S[eI],D=tI(S)),M=wS(S,!0)),Xr(M,D)!==0&&D!=="String"?D+":"+M:M}}catch{}return""+(S||"")}a(C4,"_formatErrorCode");var Qm=function(){function S(D,M,$,pe,_e,Pe){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var je=this;je.ver=2,l$(M)?(je[Hb]=M[Hb]||[],je[Lm]=M[Lm],je[Td]=M[Td],M[yS]&&(je[yS]=M[yS]),M.id&&(je.id=M.id,M[Lm].id=M.id),M[Wb]&&(je[Wb]=M[Wb]),j(M.isManual)||(je.isManual=M.isManual)):($||($={}),Pe&&($.id=Pe),je[Hb]=[m$(D,M,$)],je[Lm]=$g(D,$),je[Td]=ip(D,pe),_e&&(je[yS]=_e),Pe&&(je.id=Pe))}return a(S,"Exception"),S.CreateAutoException=function(D,M,$,pe,_e,Pe,je,ot){var bt=tI(_e||Pe||D);return{message:rC(D,bt),url:M,lineNumber:$,columnNumber:pe,error:C4(_e||Pe||D),evt:C4(Pe||D),typeName:bt,stackDetails:A4(je||_e||Pe),errorSrc:ot}},S.CreateFromInterface=function(D,M,$,pe){var _e=M[Hb]&&Ei(M[Hb],function(je){return pF(D,je)}),Pe=new S(D,R5(R5({},M),{exceptions:_e}),$,pe);return Pe},S.prototype.toInterface=function(){var D=this,M=D.exceptions,$=D.properties,pe=D.measurements,_e=D.severityLevel,Pe=D.problemGroup,je=D.id,ot=D.isManual,bt=M instanceof Array&&Ei(M,function(Cr){return Cr.toInterface()})||void 0;return{ver:"4.0",exceptions:bt,severityLevel:_e,properties:$,measurements:pe,problemGroup:Pe,id:je,isManual:ot}},S.CreateSimpleException=function(D,M,$,pe,_e,Pe){var je;return{exceptions:[(je={},je[a4]=!0,je.message=D,je.stack=_e,je.typeName=M,je)]}},S.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",S.dataType="ExceptionData",S.formatError=C4,S}(),f$=Zt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function p$(){var S=this,D=fe(S[df])&&Ei(S[df],function($){return g$($)}),M={id:S.id,outerId:S.outerId,typeName:S[AS],message:S[gS],hasFullStack:S[a4],stack:S[ff],parsedStack:D||void 0};return M}a(p$,"_toInterface");function m$(S,D,M){var $,pe,_e,Pe,je,ot,bt,Cr;if(c$(D))Pe=D[AS],je=D[gS],bt=D[ff],Cr=D[df]||[],ot=D[a4];else{var Qn=D,ni=Qn&&Qn.evt;ye(Qn)||(Qn=Qn[eI]||ni||Qn),Pe=kl(S,tI(Qn))||Mm,je=l4(S,rC(D||Qn,Pe))||Mm;var Tr=D[bS]||A4(D);Cr=y4(Tr),fe(Cr)&&Ei(Cr,function(Qr){Qr[c4]=kl(S,Qr[c4]),Qr[p0]=kl(S,Qr[p0])}),bt=oF(S,d$(Tr)),ot=fe(Cr)&&Cr[On]>0,M&&(M[AS]=M[AS]||Pe)}return $={},$[Zy]=f$,$.id=pe,$.outerId=_e,$.typeName=Pe,$.message=je,$[a4]=ot,$.stack=bt,$.parsedStack=Cr,$.toInterface=p$,$}a(m$,"_createExceptionDetails");function pF(S,D){var M=fe(D[df])&&Ei(D[df],function(pe){return h$(pe)})||D[df],$=m$(S,R5(R5({},D),{parsedStack:M}));return $}a(pF,"_createExDetailsFromInterface");function _S(S,D){var M=D[D1](ofe);if(M&&M[On]>=4)S[p0]=M[1],S[$b]=parseInt(M[2]);else{var $=D[D1](sfe);$&&$[On]>=3?(S[p0]=$[1],S[$b]=parseInt($[2])):S[p0]=D}}a(_S,"_parseFilename");function mF(S,D,M){var $=S[p0];D.fn&&M&&M[On]>D.fn&&(D.ln&&M[On]>D.ln?($=$a(M[D.fn]||""),S[$b]=parseInt($a(M[D.ln]||""))||0):$=$a(M[D.fn]||"")),$&&_S(S,$)}a(mF,"_handleFilename");function afe(S){var D=!1;if(S&&ie(S)){var M=$a(S);M&&(D=o$.test(M))}return D}a(afe,"_isStackFrame");var hF=Zt({level:1,method:1,assembly:0,fileName:0,line:0});function cfe(S,D){var M,$;if(S&&ie(S)&&$a(S)){$=(M={},M[Zy]=hF,M.level=D,M.assembly=$a(S),M.method=a$,M.fileName="",M.line=0,M.sizeInBytes=0,M);for(var pe=0;pe<fF[On];){var _e=fF[pe];if(_e.chk&&!_e.chk(S))break;_e.pre&&(S=_e.pre(S));var Pe=S[D1](_e.re);if(Pe&&Pe[On]>=_e.len){_e.m&&($.method=$a(Pe[_e.m]||a$)),_e.hdl?_e.hdl($,_e,Pe):_e.fn&&(_e.ln?($[p0]=$a(Pe[_e.fn]||""),$[$b]=parseInt($a(Pe[_e.ln]||""))||0):_S($,Pe[_e.fn]||""));break}pe++}}return gF($)}a(cfe,"_extractStackFrame");function h$(S){var D,M=(D={},D[Zy]=hF,D.level=S.level,D.method=S.method,D.assembly=S[c4],D.fileName=S[p0],D.line=S[$b],D.sizeInBytes=0,D);return gF(M)}a(h$,"_stackFrameFromInterface");function gF(S){var D=rfe;return S&&(D+=S.method[On],D+=S.assembly[On],D+=S.fileName[On],D+=S.level.toString()[On],D+=S.line.toString()[On],S[qb]=D),S}a(gF,"_populateFrameSizeInBytes");function g$(S){return{level:S.level,method:S.method,assembly:S[c4],fileName:S[p0],line:S[$b]}}a(g$,"_parsedFrameToInterface");var A$=function(){function S(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return a(S,"DataPoint"),S}(),lfe=function(){function S(D,M,$,pe,_e,Pe,je,ot,bt){this.aiDataContract={ver:1,metrics:1,properties:0};var Cr=this;Cr.ver=2;var Qn=new A$;Qn[Ob]=pe>0?pe:void 0,Qn.max=isNaN(Pe)||Pe===null?void 0:Pe,Qn.min=isNaN(_e)||_e===null?void 0:_e,Qn[np]=kl(D,M)||Mm,Qn.value=$,Qn.stdDev=isNaN(je)||je===null?void 0:je,Cr.metrics=[Qn],Cr[Lm]=$g(D,ot),Cr[Td]=ip(D,bt)}return a(S,"Metric"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",S.dataType="MetricData",S}(),rI="";function ufe(S,D){return D===void 0&&(D=!1),S==null?D:S.toString()[Fb]()==="true"}a(ufe,"stringToBoolOrDefault");function AF(S){(isNaN(S)||S<0)&&(S=0),S=ob(S);var D=rI+S%1e3,M=rI+Lu(S/1e3)%60,$=rI+Lu(S/(1e3*60))%60,pe=rI+Lu(S/(1e3*60*60))%24,_e=Lu(S/(1e3*60*60*24));return D=D[On]===1?"00"+D:D[On]===2?"0"+D:D,M=M[On]<2?"0"+M:M,$=$[On]<2?"0"+$:$,pe=pe[On]<2?"0"+pe:pe,(_e>0?_e+".":rI)+pe+":"+$+":"+M+"."+D}a(AF,"msToTimeSpan");function dfe(S,D){var M=null;return wn(S,function($){if($.identifier===D)return M=$,-1}),M}a(dfe,"getExtensionByName");function nC(S,D,M,$,pe){return!pe&&ie(S)&&(S==="Script error."||S==="Script error")}a(nC,"isCrossOriginError");var ffe=function(){function S(D,M,$,pe,_e,Pe,je){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ot=this;ot.ver=2,ot.id=jb(D,je),ot.url=Fm(D,$),ot[np]=kl(D,M)||Mm,isNaN(pe)||(ot[CS]=AF(pe)),ot[Lm]=$g(D,_e),ot[Td]=ip(D,Pe)}return a(S,"PageView"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",S.dataType="PageviewData",S}(),nI=function(){function S(D,M,$,pe,_e,Pe,je,ot,bt,Cr,Qn,ni){bt===void 0&&(bt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Tr=this;Tr.ver=2,Tr.id=M,Tr[CS]=AF(_e),Tr.success=Pe,Tr.resultCode=je+"",Tr.type=kl(D,bt);var Qr=ZW(D,$,ot,pe);Tr.data=Fm(D,pe)||Qr.data,Tr.target=kl(D,Qr.target),Cr&&(Tr.target="".concat(Tr.target," | ").concat(Cr)),Tr[np]=kl(D,Qr[np]),Tr[Lm]=$g(D,Qn),Tr[Td]=ip(D,ni)}return a(S,"RemoteDependencyData"),S.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",S.dataType="RemoteDependencyData",S}(),yF=function(){function S(D,M,$,pe,_e){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Pe=this;Pe.ver=2,M=M||Mm,Pe[gS]=l4(D,M),Pe[Lm]=$g(D,pe),Pe[Td]=ip(D,_e),$&&(Pe[yS]=$)}return a(S,"Trace"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Message",S.dataType="MessageData",S}(),SS=function(){function S(D,M,$,pe,_e,Pe,je){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ot=this;ot.ver=2,ot.url=Fm(D,$),ot[np]=kl(D,M)||Mm,ot[Lm]=$g(D,_e),ot[Td]=ip(D,Pe),je&&(ot.domProcessing=je.domProcessing,ot[CS]=je[CS],ot.networkConnect=je.networkConnect,ot.perfTotal=je.perfTotal,ot.receivedResponse=je.receivedResponse,ot.sentRequest=je.sentRequest)}return a(S,"PageViewPerformance"),S.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",S.dataType="PageviewPerformanceData",S}(),pfe=function(){function S(D,M){this.aiDataContract={baseType:1,baseData:1},this.baseType=D,this.baseData=M}return a(S,"Data"),S}(),v4=Sm({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),mfe=function(){function S(){}return a(S,"ConfigurationManager"),S.getConfig=function(D,M,$,pe){pe===void 0&&(pe=!1);var _e;return $&&D[Ub]&&D[Ub][$]&&!j(D[Ub][$][M])?_e=D[Ub][$][M]:_e=D[M],j(_e)?pe:_e},S}();function Um(S){var D="ai."+S+".";return function(M){return D+M}}a(Um,"_aiNameFunc");var iI=Um("application"),Dc=Um("device"),x4=Um("location"),oI=Um("operation"),E4=Um("session"),iC=Um("user"),B1=Um("cloud"),RS=Um("internal"),oC=function(S){qy(D,S);function D(){return S.call(this)||this}return a(D,"ContextTagKeys"),D}(aS({applicationVersion:iI("ver"),applicationBuild:iI("build"),applicationTypeId:iI("typeId"),applicationId:iI("applicationId"),applicationLayer:iI("layer"),deviceId:Dc("id"),deviceIp:Dc("ip"),deviceLanguage:Dc("language"),deviceLocale:Dc("locale"),deviceModel:Dc("model"),deviceFriendlyName:Dc("friendlyName"),deviceNetwork:Dc("network"),deviceNetworkName:Dc("networkName"),deviceOEMName:Dc("oemName"),deviceOS:Dc("os"),deviceOSVersion:Dc("osVersion"),deviceRoleInstance:Dc("roleInstance"),deviceRoleName:Dc("roleName"),deviceScreenResolution:Dc("screenResolution"),deviceType:Dc("type"),deviceMachineName:Dc("machineName"),deviceVMName:Dc("vmName"),deviceBrowser:Dc("browser"),deviceBrowserVersion:Dc("browserVersion"),locationIp:x4("ip"),locationCountry:x4("country"),locationProvince:x4("province"),locationCity:x4("city"),operationId:oI("id"),operationName:oI("name"),operationParentId:oI("parentId"),operationRootId:oI("rootId"),operationSyntheticSource:oI("syntheticSource"),operationCorrelationVector:oI("correlationVector"),sessionId:E4("id"),sessionIsFirst:E4("isFirst"),sessionIsNew:E4("isNew"),userAccountAcquisitionDate:iC("accountAcquisitionDate"),userAccountId:iC("accountId"),userAgent:iC("userAgent"),userId:iC("id"),userStoreRegion:iC("storeRegion"),userAuthUserId:iC("authUserId"),userAnonymousUserAcquisitionDate:iC("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:iC("authUserAcquisitionDate"),cloudName:B1("name"),cloudRole:B1("role"),cloudRoleVer:B1("roleVer"),cloudRoleInstance:B1("roleInstance"),cloudEnvironment:B1("environment"),cloudLocation:B1("location"),cloudDeploymentUnit:B1("deploymentUnit"),internalNodeName:RS("nodeName"),internalSdkVersion:RS("sdkVersion"),internalAgentVersion:RS("agentVersion"),internalSnippet:RS("snippet"),internalSdkSrc:RS("sdkSrc")}));function CF(S,D,M,$,pe,_e){M=kl($,M)||Mm,(j(S)||j(D)||j(M))&&He("Input doesn't contain all required fields");var Pe="";S[ZL]&&(Pe=S[ZL],delete S[ZL]);var je={name:M,time:Og(new Date),iKey:Pe,ext:_e||{},tags:[],data:{},baseType:D,baseData:S};return j(pe)||ut(pe,function(ot,bt){je.data[ot]=bt}),je}a(CF,"createTelemetryItem");var vF=function(){function S(){}return a(S,"TelemetryItemCreator"),S.create=CF,S}(),hfe={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},gfe=new oC;function y$(S){var D=null;if(ne(Event))D=new Event(S);else{var M=te();M&&M.createEvent&&(D=M.createEvent("Event"),D.initEvent(S,!0,!0))}return D}a(y$,"createDomEvent");function xF(S,D){qW(S,null,null,D)}a(xF,"_disableEvents");function C$(S){var D=te(),M=St(),$=!1,pe=[],_e=1;M&&!j(M.onLine)&&!M.onLine&&(_e=2);var Pe=0,je=ni(),ot=$de(Ug("OfflineListener"),S);try{if(Cr(Re())&&($=!0),D){var bt=D.body||D;bt.ononline&&Cr(bt)&&($=!0)}}catch{$=!1}function Cr(ao){var Jc=!1;return ao&&(Jc=JL(ao,"online",Zn,ot),Jc&&JL(ao,"offline",Un,ot)),Jc}a(Cr,"_enableEvents");function Qn(){return je}a(Qn,"_isOnline");function ni(){return!(Pe===2||_e===2)}a(ni,"calCurrentState");function Tr(){var ao=ni();je!==ao&&(je=ao,wn(pe,function(Jc){var aI={isOnline:je,rState:_e,uState:Pe};try{Jc(aI)}catch{}}))}a(Tr,"listnerNoticeCheck");function Qr(ao){Pe=ao,Tr()}a(Qr,"setOnlineState");function Zn(){_e=1,Tr()}a(Zn,"_setOnline");function Un(){_e=2,Tr()}a(Un,"_setOffline");function Hi(){var ao=Re();if(ao&&$){if(xF(ao,ot),D){var Jc=D.body||D;J(Jc.ononline)||xF(Jc,ot)}$=!1}}a(Hi,"_unload");function Oo(ao){return pe.push(ao),{rm:a(function(){var Jc=pe.indexOf(ao);if(Jc>-1)return pe.splice(Jc,1)},"rm")}}return a(Oo,"addListener"),{isOnline:Qn,isListening:a(function(){return $},"isListening"),unload:Hi,addListener:Oo,setOnlineState:Qr}}a(C$,"createOfflineListener");var Afe="AppInsightsPropertiesPlugin",EF="AppInsightsChannelPlugin",sI="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=sI,t.BreezeChannelIdentifier=EF,t.ConfigurationManager=mfe,t.ConnectionStringParser=f4,t.ContextTagKeys=oC,t.CtxTagKeys=gfe,t.DEFAULT_BREEZE_ENDPOINT=XL,t.DEFAULT_BREEZE_PATH=hS,t.Data=pfe,t.DisabledPropertyName=n4,t.DistributedTracingModes=Yde,t.Envelope=p4,t.Event=tfe,t.EventPersistence=vS,t.Exception=Qm,t.Extensions=hfe,t.HttpMethod=WW,t.Metric=lfe,t.PageView=ffe,t.PageViewPerformance=SS,t.ProcessLegacy=i4,t.PropertiesPluginIdentifier=Afe,t.RemoteDependencyData=nI,t.RequestHeaders=$W,t.SampleRate=HW,t.SeverityLevel=v4,t.TelemetryItemCreator=vF,t.ThrottleMgr=efe,t.Trace=yF,t.correlationIdCanIncludeCorrelationHeader=eC,t.correlationIdGetCorrelationContext=JW,t.correlationIdGetCorrelationContextValue=XW,t.correlationIdGetPrefix=lF,t.correlationIdSetPrefix=cF,t.createDistributedTraceContextFromTrace=uF,t.createDomEvent=y$,t.createOfflineListener=C$,t.createTelemetryItem=CF,t.createTraceParent=Db,t.dataSanitizeException=oF,t.dataSanitizeId=jb,t.dataSanitizeInput=sF,t.dataSanitizeKey=iF,t.dataSanitizeKeyAndAddUniqueness=nF,t.dataSanitizeMeasurements=ip,t.dataSanitizeMessage=l4,t.dataSanitizeProperties=$g,t.dataSanitizeString=kl,t.dataSanitizeUrl=Fm,t.dateTimeUtilsDuration=Kde,t.dateTimeUtilsNow=zde,t.dsPadNumber=jW,t.findAllScripts=zL,t.findW3cTraceParent=VL,t.formatTraceParent=R1,t.getExtensionByName=dfe,t.isBeaconApiSupported=jy,t.isCrossOriginError=nC,t.isInternalApplicationInsightsEndpoint=YW,t.isSampledFlag=X5,t.isValidSpanId=Nb,t.isValidTraceId=Bb,t.isValidTraceParent=Mb,t.msToTimeSpan=AF,t.parseConnectionString=d4,t.parseTraceParent=rp,t.strNotSpecified=Mm,t.stringToBoolOrDefault=ufe,t.urlGetAbsoluteUrl=Gde,t.urlGetCompleteUrl=VW,t.urlGetPathName=Vde,t.urlParseFullHost=jg,t.urlParseHost=zW,t.urlParseUrl=Gb,t.utlCanUseLocalStorage=u4,t.utlCanUseSessionStorage=Gg,t.utlDisableStorage=xS,t.utlEnableStorage=Jde,t.utlGetLocalStorage=t$,t.utlGetSessionStorage=n$,t.utlGetSessionStorageKeys=Xb,t.utlRemoveSessionStorage=i$,t.utlRemoveStorage=op,t.utlSetLocalStorage=r$,t.utlSetSessionStorage=Xde,t.utlSetStoragePrefix=ES})});var rOe=W((vV,tOe)=>{f();(function(t,e){typeof vV=="object"&&typeof tOe<"u"?e(vV):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(vV,function(t){"use strict";function e(x,T){return x||T}a(e,"_pureAssign");function r(x,T){return x[T]}a(r,"_pureRef");var n=void 0,o=null,s="",c="function",l="object",u="prototype",d="__proto__",p="undefined",m="constructor",h="Symbol",g="_polyfill",A="length",y="name",v="call",b="toString",I=e(Object),_=r(I,u),k=e(String),N=r(k,u),F=e(Math),O=e(Array),Y=r(O,u),z=r(Y,"slice");function V(x,T){try{return{v:x.apply(this,T)}}catch(w){return{e:w}}}a(V,"safe");function U(x,T){var w=V(x);return w.e?T:w.v}a(U,"safeGet");var H;function ee(x){return function(T){return typeof T===x}}a(ee,"_createIs");function J(x){var T="[object "+x+"]";return function(w){return!!(w&&G(w)===T)}}a(J,"_createObjIs");function G(x){return _[b].call(x)}a(G,"objToString");function j(x){return typeof x===p||x===p}a(j,"isUndefined");function Z(x){return!re(x)}a(Z,"isStrictUndefined");function ie(x){return x===o||j(x)}a(ie,"isNullOrUndefined");function ne(x){return x===o||!re(x)}a(ne,"isStrictNullOrUndefined");function re(x){return!!x||x!==n}a(re,"isDefined");function fe(x){return!H&&(H=["string","number","boolean",p,"symbol","bigint"]),x!==l&&H.indexOf(x)!==-1}a(fe,"isPrimitiveType");var ye=ee("string"),Qe=ee(c);function we(x){return!x&&ie(x)?!1:!!x&&typeof x===l}a(we,"isObject");var Xe=r(O,"isArray"),Oe=J("Date"),ut=ee("number"),Rt=ee("boolean"),Et=J("Error");function At(x){return!!(x&&x.then&&Qe(x.then))}a(At,"isPromiseLike");function de(x){return!(!x||U(function(){return!(x&&0+x)},!x))}a(de,"isTruthy");var qe=r(I,"getOwnPropertyDescriptor");function Ce(x,T){return!!x&&_.hasOwnProperty[v](x,T)}a(Ce,"objHasOwnProperty");var $e=e(r(I,"hasOwn"),ce);function ce(x,T){return Ce(x,T)||!!qe(x,T)}a(ce,"polyObjHasOwn");function ue(x,T,w){if(x&&we(x)){for(var P in x)if($e(x,P)&&T[v](w||x,P,x[P])===-1)break}}a(ue,"objForEachKey");var He={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Me(x){var T={};if(T[He.c]=!0,T[He.e]=!0,x.l){T.get=function(){return x.l.v};var w=qe(x.l,"v");w&&w.set&&(T.set=function(P){x.l.v=P})}return ue(x,function(P,L){T[He[P]]=Z(L)?T[He[P]]:L}),T}a(Me,"_createProp");var be=r(I,"defineProperty");function Ge(x,T,w){return be(x,T,Me(w))}a(Ge,"objDefine");function rt(x,T,w,P,L){var q={};return ue(x,function(K,le){ht(q,K,T?le:K),ht(q,le,w?le:K)}),P?P(q):q}a(rt,"_createKeyValueMap");function ht(x,T,w,P){be(x,T,{value:w,enumerable:!0,writable:!1})}a(ht,"_assignMapValue");var Ot=e(k),Zt="[object Error]";function qt(x,T){var w=s,P=_[b][v](x);P===Zt&&(x={stack:Ot(x.stack),message:Ot(x.message),name:Ot(x.name)});try{w=JSON.stringify(x,o,T?typeof T=="number"?T:4:n),w=(w?w.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):o)||Ot(x)}catch(L){w=" - "+qt(L,T)}return P+": "+w}a(qt,"dumpObj");function Yr(x){throw new Error(x)}a(Yr,"throwError");function Mr(x){throw new TypeError(x)}a(Mr,"throwTypeError");var fn=r(I,"freeze");function xe(x){return x}a(xe,"_doNothing");function Ve(x){return x[d]||o}a(Ve,"_getProto");var mt=r(I,"assign"),wt=r(I,"keys");function ar(x){return fn&&ue(x,function(T,w){(Xe(w)||we(w))&&ar(w)}),tr(x)}a(ar,"objDeepFreeze");var tr=e(fn,xe),Sr=e(r(I,"getPrototypeOf"),Ve);function fr(x){return rt(x,1,0,tr)}a(fr,"createEnum");function or(x){return rt(x,0,0,tr)}a(or,"createEnumKeyMap");function dr(x){var T={};return ue(x,function(w,P){ht(T,w,P[1]),ht(T,P[0],P[1])}),tr(T)}a(dr,"createSimpleMap");function sr(x){return dr(x)}a(sr,"createTypeMap");var Fr=or({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Jr="__tsUtils$gblCfg",ln;function xn(){var x;return typeof globalThis!==p&&(x=globalThis),!x&&typeof self!==p&&(x=self),!x&&typeof window!==p&&(x=window),!x&&typeof global!==p&&(x=global),x}a(xn,"_getGlobalValue");function oi(){if(!ln){var x=V(xn).v||{};ln=x[Jr]=x[Jr]||{}}return ln}a(oi,"_getGlobalConfig");var Rn=ri;function ri(x,T,w){var P=T?T[x]:o;return function(L){var q=(L?L[x]:o)||P;if(q||w){var K=arguments;return(q||w).apply(L,q?z[v](K,1):K)}Mr('"'+Ot(x)+'" not defined for '+qt(L))}}a(ri,"_unwrapFunctionWithPoly");function un(x){return function(T){return T[x]}}a(un,"_unwrapProp");var Xn=r(F,"min"),De=r(F,"max"),X=Rn("slice",N),ve=Rn("substring",N),Te=ri("substr",N,Q);function Q(x,T,w){return ie(x)&&Mr("Invalid "+qt(x)),w<0?s:(T=T||0,T<0&&(T=De(T+x[A],0)),j(w)?X(x,T):X(x,T,T+w))}a(Q,"polyStrSubstr");function B(x,T){return ve(x,0,T)}a(B,"strLeft");var te="_urid",Ae;function Re(){if(!Ae){var x=oi();Ae=x.gblSym=x.gblSym||{k:{},s:{}}}return Ae}a(Re,"_globalSymbolRegistry");var ft;function St(x){var T={description:Ot(x),toString:a(function(){return h+"("+x+")"},"toString")};return T[g]=!0,T}a(St,"polyNewSymbol");function Jt(x){var T=Re();if(!$e(T.k,x)){var w=St(x),P=wt(T.s).length;w[te]=function(){return P+"_"+w[b]()},T.k[x]=w,T.s[w[te]()]=Ot(x)}return T.k[x]}a(Jt,"polySymbolFor");function rr(x){!ft&&(ft={});var T,w=Fr[x];return w&&(T=ft[w]=ft[w]||St(h+"."+w)),T}a(rr,"polyGetKnownSymbol");var Xt;function It(){Xt=oi()}a(It,"_initTestHooks");function Er(x){var T={};return!Xt&&It(),T.b=Xt.lzy,be(T,"v",{configurable:!0,get:a(function(){var w=x();return Xt.lzy||be(T,"v",{value:w}),T.b=Xt.lzy,w},"get")}),T}a(Er,"getLazy");function fi(x){return be({toJSON:a(function(){return x},"toJSON")},"v",{value:x})}a(fi,"createCachedValue");var oo="window",wn;function Co(x,T){var w;return function(){return!Xt&&It(),(!w||Xt.lzy)&&(w=fi(V(x,T).v)),w.v}}a(Co,"_getGlobalInstFn");function Ei(x){return!Xt&&It(),(!wn||x===!1||Xt.lzy)&&(wn=fi(V(xn).v||o)),wn.v}a(Ei,"getGlobal");function ts(x,T){var w;if(!wn||T===!1?w=Ei(T):w=wn.v,w&&w[x])return w[x];if(x===oo)try{return window}catch{}return o}a(ts,"getInst");function Ia(){return!!_c()}a(Ia,"hasDocument");var _c=Co(ts,["document"]);function Fo(){return!!Ks()}a(Fo,"hasWindow");var Ks=Co(ts,[oo]);function xd(){return!!Sc()}a(xd,"hasNavigator");var Sc=Co(ts,["navigator"]),Rg=Co(function(){return!!V(function(){return process&&(process.versions||{}).node}).v}),Sl,kg;function Pg(){return Sl=fi(V(ts,[h]).v),Sl}a(Pg,"_initSymbol");function nb(x){var T=(Xt.lzy?0:Sl)||Pg();return T.v?T.v[x]:n}a(nb,"_getSymbolKey");function $a(){return!!Lu()}a($a,"hasSymbol");function Lu(){return!Xt&&It(),((Xt.lzy?0:Sl)||Pg()).v}a(Lu,"getSymbol");function Fu(x,T){var w=Fr[x];!Xt&&It();var P=(Xt.lzy?0:Sl)||Pg();return P.v?P.v[w||x]:T?n:rr(x)}a(Fu,"getKnownSymbol");function Ed(x,T){!Xt&&It();var w=(Xt.lzy?0:Sl)||Pg();return w.v?w.v(x):T?o:St(x)}a(Ed,"newSymbol");function Dg(x){return!Xt&&It(),kg=(Xt.lzy?0:kg)||fi(V(nb,["for"]).v),(kg.v||Jt)(x)}a(Dg,"symbolFor");function Jl(x){return!!x&&Qe(x.next)}a(Jl,"isIterator");function ib(x){return!ne(x)&&Qe(x[Fu(3)])}a(ib,"isIterable");var h1;function ob(x,T,w){if(x&&(Jl(x)||(!h1&&(h1=fi(Fu(3))),x=x[h1.v]?x[h1.v]():o),Jl(x))){var P=n,L=n;try{for(var q=0;!(L=x.next()).done&&T[v](w||x,L.value,q,x)!==-1;)q++}catch(K){P={e:K},x.throw&&(L=o,x.throw(P))}finally{try{L&&!L.done&&x.return&&x.return(L)}finally{if(P)throw P.e}}}}a(ob,"iterForOf");function Yf(x,T,w){return x.apply(T,w)}a(Yf,"fnApply");function Jf(x,T){return!j(T)&&x&&(Xe(T)?Yf(x.push,x,T):Jl(T)||ib(T)?ob(T,function(w){x.push(w)}):x.push(T)),x}a(Jf,"arrAppend");function Xr(x,T,w){if(x)for(var P=x[A]>>>0,L=0;L<P&&!(L in x&&T[v](w||x,x[L],L,x)===-1);L++);}a(Xr,"arrForEach");var Rc=Rn("indexOf",Y),Bg=Rn("map",Y);function Ng(x,T,w){return((x?x.slice:o)||z).apply(x,z[v](arguments,1))}a(Ng,"arrSlice");var IL=Rn("reduce",Y),Yc=e(r(I,"create"),Ly);function Ly(x){if(!x)return{};var T=typeof x;T!==l&&T!==c&&Mr("Prototype must be an Object or function: "+qt(x));function w(){}return a(w,"tempFunc"),w[u]=x,new w}a(Ly,"polyObjCreate");var g1;function Sm(x,T){var w=I.setPrototypeOf||function(P,L){var q;!g1&&(g1=fi((q={},q[d]=[],q instanceof Array))),g1.v?P[d]=L:ue(L,function(K,le){return P[K]=le})};return w(x,T)}a(Sm,"objSetPrototypeOf");function Fy(x,T,w){V(Ge,[T,y,{v:x,c:!0,e:!1}]),T=Sm(T,w);function P(){this[m]=T,V(Ge,[this,y,{v:x,c:!0,e:!1}])}return a(P,"__"),T[u]=w===o?Yc(w):(P[u]=w[u],new P),T}a(Fy,"_createCustomError");function sb(x,T){T&&(x[y]=T)}a(sb,"_setName");function ws(x,T,w){var P=w||Error,L=P[u][y],q=Error.captureStackTrace;return Fy(x,function(){var K=this,le=arguments;try{V(sb,[P,x]);var me=Yf(P,K,z[v](le))||K;if(me!==K){var Ee=Sr(K);Ee!==Sr(me)&&Sm(me,Ee)}return q&&q(me,K[m]),T&&T(me,le),me}finally{V(sb,[P,L])}},P)}a(ws,"createCustomError");function bd(){return(Date.now||Oy)()}a(bd,"utcNow");function Oy(){return new Date().getTime()}a(Oy,"polyUtcNow");function b5(x){return a(function(w){return ie(w)&&Mr("strTrim called ["+qt(w)+"]"),w&&w.replace&&(w=w.replace(x,s)),w},"_doTrim")}a(b5,"_createTrimFn");var TL=b5(/^\s+|(?=\s)\s+$/g),so=ri("trim",N,TL),Qy=r(F,"floor"),Mg,I5,ab;function Id(x){if(!x||typeof x!==l)return!1;ab||(ab=Fo()?Ks():!0);var T=!1;if(x!==ab){I5||(Mg=Function[u][b],I5=Mg[v](I));try{var w=Sr(x);T=!w,T||(Ce(w,m)&&(w=w[m]),T=!!(w&&typeof w===c&&Mg[v](w)===I5))}catch{}}return T}a(Id,"isPlainObject");function wL(x){return x.value&&T5(x),!0}a(wL,"_defaultDeepCopyHandler");var _L=[cb,T5,vW,Uy];function SL(x,T,w,P){var L;return Xr(x,function(q){if(q.k===T)return L=q,-1}),L||(L={k:T,v:T},x.push(L),P(L)),L.v}a(SL,"_getSetVisited");function A1(x,T,w,P){var L=w.handler,q=w.path?P?w.path.concat(P):w.path:[],K={handler:w.handler,src:w.src,path:q},le=typeof T,me=!1,Ee=T===o;Ee||(T&&le===l?me=Id(T):Ee=fe(le));var ke={type:le,isPrim:Ee,isPlain:me,value:T,result:T,path:q,origin:w.src,copy:a(function(Ue,tt){return A1(x,Ue,tt?K:w,tt)},"copy"),copyTo:a(function(Ue,tt){return RL(x,Ue,tt,K)},"copyTo")};return ke.isPrim?L&&L[v](w,ke)?ke.result:T:SL(x,T,q,function(Ue){Ge(ke,"result",{g:a(function(){return Ue.v},"g"),s:a(function(Ye){Ue.v=Ye},"s")});for(var tt=0,We=L;!(We||(tt<_L.length?_L[tt++]:wL))[v](w,ke);)We=o})}a(A1,"_deepCopy");function RL(x,T,w,P){if(!ie(w))for(var L in w)T[L]=A1(x,w[L],P,L);return T}a(RL,"_copyProps");function CW(x,T,w){var P={handler:w,src:T,path:[]};return RL([],x,T,P)}a(CW,"objCopyProps");function kL(x,T){var w={handler:T,src:x};return A1([],x,w)}a(kL,"objDeepCopy");function cb(x){var T=x.value;if(Xe(T)){var w=x.result=[];return w.length=T.length,x.copyTo(w,T),!0}return!1}a(cb,"arrayDeepCopyHandler");function Uy(x){var T=x.value;return Oe(T)?(x.result=new Date(T.getTime()),!0):!1}a(Uy,"dateDeepCopyHandler");function vW(x){return x.type===c}a(vW,"functionDeepCopyHandler");function T5(x){var T=x.value;if(T&&x.isPlain){var w=x.result={};return x.copyTo(w,T),!0}return!1}a(T5,"plainObjDeepCopyHandler");function PL(x,T){return Xr(T,function(w){CW(x,w)}),x}a(PL,"_doExtend");function w5(x,T,w,P,L,q,K){return PL(kL(x)||{},z[v](arguments))}a(w5,"deepExtend");var _de=un(A),Sde=r(F,"round"),xW=ri("endsWith",N,Rde);function Rde(x,T,w){ye(x)||Mr("'"+qt(x)+"' is not a string");var P=ye(T)?T:Ot(T),L=!j(w)&&w<x[A]?w:x[A];return ve(x,L-P[A],L)===P}a(Rde,"polyStrEndsWith");var Lg=Rn("indexOf",N),_5="ref",DL="unref",S5="hasRef",kde="enabled";function R5(x,T,w){var P=!0,L=x?T(o):o,q;function K(){return P=!1,L&&L[DL]&&L[DL](),q}a(K,"_unref");function le(){L&&w(L),L=o}a(le,"_cancel");function me(){return L=T(L),P||K(),q}a(me,"_refresh");function Ee(ke){!ke&&L&&le(),ke&&!L&&me()}return a(Ee,"_setEnabled"),q={cancel:le,refresh:me},q[S5]=function(){return L&&L[S5]?L[S5]():P},q[_5]=function(){return P=!0,L&&L[_5]&&L[_5](),q},q[DL]=K,q=be(q,kde,{get:a(function(){return!!L},"get"),set:Ee}),{h:q,dn:a(function(){L=o},"dn")}}a(R5,"_createTimerHandler");function k5(x,T,w){var P=Xe(T),L=P?T.length:0,q=(L>0?T[0]:P?n:T)||setTimeout,K=(L>1?T[1]:n)||clearTimeout,le=w[0];w[0]=function(){me.dn(),Yf(le,n,z[v](arguments))};var me=R5(x,function(Ee){if(Ee){if(Ee.refresh)return Ee.refresh(),Ee;Yf(K,n,[Ee])}return Yf(q,n,w)},function(Ee){Yf(K,n,[Ee])});return me.h}a(k5,"_createTimeoutWith");function qy(x,T){return k5(!0,n,z[v](arguments))}a(qy,"scheduleTimeout");function P5(x,T){return k5(!1,n,z[v](arguments))}a(P5,"createTimeout");var y1,Xf="constructor",Zf="prototype",C1="function",lb="_dynInstFuncs",Hy="_isDynProxy",ub="_dynClass",BL="_dynCls$",v1="_dynInstChk",db=v1,NL="_dfOpts",D5="_unknown_",fb="__proto__",nS="_dyn"+fb,B5="__dynProto$Gbl",pb="_dynInstProto",mb="useBaseInst",iS="setInstFuncs",x1=Object,hb=x1.getPrototypeOf,ML=x1.getOwnPropertyNames,N5=Ei(),gb=N5[B5]||(N5[B5]={o:(y1={},y1[iS]=!0,y1[mb]=!0,y1),n:1e3});function Ab(x){return x&&(x===x1[Zf]||x===Array[Zf])}a(Ab,"_isObjectOrArrayPrototype");function Fg(x){return Ab(x)||x===Function[Zf]}a(Fg,"_isObjectArrayOrFunctionPrototype");function Rm(x){var T;if(x){if(hb)return hb(x);var w=x[fb]||x[Zf]||(x[Xf]?x[Xf][Zf]:null);T=x[nS]||w,Ce(x,nS)||(delete x[pb],T=x[nS]=x[pb]||x[nS],x[pb]=w)}return T}a(Rm,"_getObjProto");function yb(x,T){var w=[];if(ML)w=ML(x);else for(var P in x)typeof P=="string"&&Ce(x,P)&&w.push(P);if(w&&w.length>0)for(var L=0;L<w.length;L++)T(w[L])}a(yb,"_forEachProp");function Cb(x,T,w){return T!==Xf&&typeof x[T]===C1&&(w||Ce(x,T))&&T!==fb&&T!==Zf}a(Cb,"_isDynamicCandidate");function M5(x){Mr("DynamicProto: "+x)}a(M5,"_throwTypeError");function LL(x){var T=Yc(null);return yb(x,function(w){!T[w]&&Cb(x,w,!1)&&(T[w]=x[w])}),T}a(LL,"_getInstanceFuncs");function FL(x,T){for(var w=x.length-1;w>=0;w--)if(x[w]===T)return!0;return!1}a(FL,"_hasVisited");function Pde(x,T,w,P){function L(me,Ee,ke){var Ue=Ee[ke];if(Ue[Hy]&&P){var tt=me[lb]||{};tt[db]!==!1&&(Ue=(tt[Ee[ub]]||{})[ke]||Ue)}return function(){return Ue.apply(me,arguments)}}a(L,"_instFuncProxy");var q=Yc(null);yb(w,function(me){q[me]=L(T,w,me)});for(var K=Rm(x),le=[];K&&!Fg(K)&&!FL(le,K);)yb(K,function(me){!q[me]&&Cb(K,me,!hb)&&(q[me]=L(T,K,me))}),le.push(K),K=Rm(K);return q}a(Pde,"_getBaseFuncs");function Dde(x,T,w,P){var L=null;if(x&&Ce(w,ub)){var q=x[lb]||Yc(null);if(L=(q[w[ub]]||Yc(null))[T],L||M5("Missing ["+T+"] "+C1),!L[v1]&&q[db]!==!1){for(var K=!Ce(x,T),le=Rm(x),me=[];K&&le&&!Fg(le)&&!FL(me,le);){var Ee=le[T];if(Ee){K=Ee===P;break}me.push(le),le=Rm(le)}try{K&&(x[T]=L),L[v1]=1}catch{q[db]=!1}}}return L}a(Dde,"_getInstFunc");function Bde(x,T,w){var P=T[x];return P===w&&(P=Rm(T)[x]),typeof P!==C1&&M5("["+x+"] is not a "+C1),P}a(Bde,"_getProtoFunc");function Nde(x,T,w,P,L){function q(me,Ee){var ke=a(function(){var Ue=Dde(this,Ee,me,ke)||Bde(Ee,me,ke);return Ue.apply(this,arguments)},"dynProtoProxy");return ke[Hy]=1,ke}if(a(q,"_createDynamicPrototype"),!Ab(x)){var K=w[lb]=w[lb]||Yc(null);if(!Ab(K)){var le=K[T]=K[T]||Yc(null);K[db]!==!1&&(K[db]=!!L),Ab(le)||yb(w,function(me){Cb(w,me,!1)&&w[me]!==P[me]&&(le[me]=w[me],delete w[me],(!Ce(x,me)||x[me]&&!x[me][Hy])&&(x[me]=q(x,me)))})}}}a(Nde,"_populatePrototype");function OL(x,T){if(hb){for(var w=[],P=Rm(T);P&&!Fg(P)&&!FL(w,P);){if(P===x)return!0;w.push(P),P=Rm(P)}return!1}return!0}a(OL,"_checkPrototype");function oS(x,T){return Ce(x,Zf)?x.name||T||D5:((x||{})[Xf]||{}).name||T||D5}a(oS,"_getObjName");function Ou(x,T,w,P){Ce(x,Zf)||M5("theClass is an invalid class definition.");var L=x[Zf];OL(L,T)||M5("["+oS(x)+"] not in hierarchy of ["+oS(T)+"]");var q=null;Ce(L,ub)?q=L[ub]:(q=BL+oS(x,"_")+"$"+gb.n,gb.n++,L[ub]=q);var K=Ou[NL],le=!!K[mb];le&&P&&P[mb]!==void 0&&(le=!!P[mb]);var me=LL(T),Ee=Pde(L,T,me,le);w(T,Ee);var ke=!!hb&&!!K[iS];ke&&P&&(ke=!!P[iS]),Nde(L,q,T,me,ke!==!1)}a(Ou,"dynamicProto"),Ou[NL]=gb.o;var ja="function",EW="object",bW="undefined",sS="prototype",QL=Object,UL=QL[sS];(Ei()||{}).Symbol,(Ei()||{}).Reflect;var L5="hasOwnProperty",IW=a(function(x){for(var T,w=1,P=arguments.length;w<P;w++){T=arguments[w];for(var L in T)UL[L5].call(T,L)&&(x[L]=T[L])}return x},"__objAssignFnImpl"),Og=mt||IW,Wy=a(function(x,T){return Wy=QL.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,P){w.__proto__=P}||function(w,P){for(var L in P)P[L5](L)&&(w[L]=P[L])},Wy(x,T)},"extendStaticsFn");function aS(x,T){typeof T!==ja&&T!==null&&Mr("Class extends value "+String(T)+" is not a constructor or null"),Wy(x,T);function w(){this.constructor=x}a(w,"__"),x[sS]=T===null?Yc(T):(w[sS]=T[sS],new w)}a(aS,"__extendsFn");function TW(x,T){for(var w=0,P=T.length,L=x.length;w<P;w++,L++)x[L]=T[w];return x}a(TW,"__spreadArrayFn");var F5=fr,Mde=sr,$y=F5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),vb="toLowerCase",pi="length",xb="warnToConsole",E1="throwInternal",Qg="watch",O5="apply",Io="push",Eb="splice",kc="logger",bb="cancel",cS="initialize",jy="identifier",lS="removeNotificationListener",Q5="addNotificationListener",km="isInitialized",Ib="value",u0="getNotifyMgr",Tb="getPlugin",Gy="name",Xl="processNext",wb="getProcessTelContext",Pm="enabled",wW="stopPollingInternalLogs",b1="unload",U5="onComplete",_b="version",_W="loggingLevelConsole",I1="createNew",Dm="teardown",q5="messageId",T1="message",Bm="diagLog",H5="_doTeardown",Ug="update",Nm="getNext",Vy="setNextPlugin",W5="userAgent",zy="split",Ky="replace",Qu="type",qL="evtName",uS="status",HL="getAllResponseHeaders",WL="isChildEvt",Sb="data",Yy="getCtx",d0="setCtx",SW="itemsReceived",qg="urlString",$L="headers",Hg="timeout",RW="traceFlags",Rb;function jL(x,T){Rb||(Rb=ws("AggregationError",function(P,L){L[pi]>1&&(P.errors=L[1])}));var w=x||"One or more errors occurred.";throw Xr(T,function(P,L){w+=`
`.concat(L," > ").concat(qt(P))}),new Rb(w,T||[])}a(jL,"throwAggregationError");var w1="Promise",_1="rejected";function ep(x,T){return kW(x,function(w){return T?T({status:"fulfilled",rejected:!1,value:w}):w},function(w){return T?T({status:_1,rejected:!0,reason:w}):w})}a(ep,"doAwaitResponse");function kW(x,T,w,P){var L=x;try{if(At(x))(T||w)&&(L=x.then(T,w));else try{T&&(L=T(x))}catch(q){if(w)L=w(q);else throw q}}finally{P&&Lde(L,P)}return L}a(kW,"doAwait");function Lde(x,T){var w=x;return T&&(At(x)?x.finally?w=x.finally(T):w=x.then(function(P){return T(),P},function(P){throw T(),P}):T()),w}a(Lde,"doFinally");var PW=["pending","resolving","resolved",_1],DW="dispatchEvent",dS;function BW(x){var T;return x&&x.createEvent&&(T=x.createEvent("Event")),!!T&&T.initEvent}a(BW,"_hasInitEventFn");function $5(x,T,w,P){var L=_c();!dS&&(dS=fi(!!V(BW,[L]).v));var q=dS.v?L.createEvent("Event"):P?new Event(T):{};if(w&&w(q),dS.v&&q.initEvent(T,!1,!0),q&&x[DW])x[DW](q);else{var K=x["on"+T];if(K)K(q);else{var le=ts("console");le&&(le.error||le.log)(T,qt(q))}}}a($5,"emitEvent");var NW="unhandledRejection",Fde=NW.toLowerCase(),kb=10,j5;function MW(x){return Qe(x)?x.toString():qt(x)}a(MW,"dumpFnObj");function LW(x,T,w){var P=Ng(arguments,3),L=0,q=!1,K,le=[],me=!1,Ee=null,ke;function Ue(cr,Dr){try{me=!0,Ee&&Ee.cancel(),Ee=null;var si=x(function(Gi,Vi){le.push(function(){try{var Ko=L===2?cr:Dr,_n=j(Ko)?K:Qe(Ko)?Ko(K):Ko;At(_n)?_n.then(Gi,Vi):Ko?Gi(_n):L===3?Vi(_n):Gi(_n)}catch(sn){Vi(sn)}}),q&&yt()},P);return si}finally{}}a(Ue,"_then");function tt(cr){return Ue(void 0,cr)}a(tt,"_catch");function We(cr){var Dr=cr,si=cr;return Qe(cr)&&(Dr=a(function(Gi){return cr&&cr(),Gi},"thenFinally"),si=a(function(Gi){throw cr&&cr(),Gi},"catchFinally")),Ue(Dr,si)}a(We,"_finally");function Ye(){return PW[L]}a(Ye,"_strState");function yt(){if(le.length>0){var cr=le.slice();le=[],me=!0,Ee&&Ee.cancel(),Ee=null,T(cr)}}a(yt,"_processQueue");function at(cr,Dr){return function(si){if(L===Dr){if(cr===2&&At(si)){L=1,si.then(at(2,1),at(3,1));return}L=cr,q=!0,K=si,yt(),!me&&cr===3&&!Ee&&(Ee=qy(_t,kb))}}}a(at,"_createSettleIfFn");function _t(){if(!me)if(me=!0,Rg())process.emit(NW,K,ke);else{var cr=Ks()||Ei();!j5&&(j5=fi(V(ts,[w1+"RejectionEvent"]).v)),$5(cr,Fde,function(Dr){return Ge(Dr,"promise",{g:a(function(){return ke},"g")}),Dr.reason=K,Dr},!!j5.v)}}a(_t,"_notifyUnhandledRejection"),ke={then:Ue,catch:tt,finally:We},be(ke,"state",{get:Ye}),$a()&&(ke[Fu(11)]="IPromise");function jt(){return"IPromise "+Ye()+(q?" - "+MW(K):"")}return a(jt,"_toString"),ke.toString=jt,a(function(){Qe(w)||Mr(w1+": executor is not a function - "+MW(w));var Dr=at(3,0);try{w.call(ke,at(2,0),Dr)}catch(si){Dr(si)}},"_initialize")(),ke}a(LW,"_createPromise");function Ode(x){return function(T){var w=Ng(arguments,1);return x(function(P,L){try{var q=[],K=1;ob(T,function(le,me){le&&(K++,kW(le,function(Ee){q[me]=Ee,--K===0&&P(q)},L))}),K--,K===0&&P(q)}catch(le){L(le)}},w)}}a(Ode,"_createAllPromise");function Qde(x){return fi(function(T){var w=Ng(arguments,1);return x(function(P,L){var q=[],K=1;function le(me,Ee){K++,ep(me,function(ke){ke.rejected?q[Ee]={status:_1,reason:ke.reason}:q[Ee]={status:"fulfilled",value:ke.value},--K===0&&P(q)})}a(le,"processItem");try{Xe(T)?Xr(T,le):ib(T)?ob(T,le):Mr("Input is not an iterable"),K--,K===0&&P(q)}catch(me){L(me)}},w)})}a(Qde,"_createAllSettledPromise");function FW(x){Xr(x,function(T){try{T()}catch{}})}a(FW,"syncItemProcessor");function OW(x){var T=ut(x)?x:0;return function(w){qy(function(){FW(w)},T)}}a(OW,"timeoutItemProcessor");function G5(x,T){return LW(G5,OW(T),x,T)}a(G5,"createAsyncPromise");var V5;function Ude(x,T){!V5&&(V5=fi(V(ts,[w1]).v||null));var w=V5.v;if(!w)return G5(x);Qe(x)||Mr(w1+": executor is not a function - "+qt(x));var P=0;function L(){return PW[P]}a(L,"_strState");var q=new w(function(K,le){function me(ke){P=2,K(ke)}a(me,"_resolve");function Ee(ke){P=3,le(ke)}a(Ee,"_reject"),x(me,Ee)});return be(q,"state",{get:L}),q}a(Ude,"createNativePromise");var z5;function K5(x){return LW(K5,FW,x)}a(K5,"createSyncPromise");function uf(x,T){return!z5&&(z5=Qde(K5)),z5.v(x,T)}a(uf,"createSyncAllSettledPromise");var Y5;function Pb(x,T){return!Y5&&(Y5=fi(Ude)),Y5.v.call(this,x,T)}a(Pb,"createPromise");var GL=Ode(Pb),tp=void 0,qi="",Wg="channels",Pc="core",f0="createPerfMgr",J5="disabled",S1="extensionConfig",Db="extensions",rp="processTelemetry",Bb="priority",Nb="eventsSent",Mb="eventsDiscarded",X5="eventsSendRequest",R1="perfEvent",VL="offlineEventsStored",zL="offlineBatchSent",Z5="offlineBatchDrop",fS="getPerfMgr",e4="domain",t4="path",QW="Not dynamic - ",KL=/-([a-z])/g,qde=/([^\w\d_$])/g,Hde=/^(\d+[\w\d_$])/;function r4(x){return!ie(x)}a(r4,"isNotNullOrUndefined");function Lb(x){var T=x;return T&&ye(T)&&(T=T[Ky](KL,function(w,P){return P.toUpperCase()}),T=T[Ky](qde,"_"),T=T[Ky](Hde,function(w,P){return"_"+P})),T}a(Lb,"normalizeJsName");function Zl(x,T){return x&&T?Lg(x,T)!==-1:!1}a(Zl,"strContains");function pS(x){return x&&x.toISOString()||""}a(pS,"toISOString");function Rl(x){return Et(x)?x[Gy]:qi}a(Rl,"getExceptionName");function Jy(x,T,w,P,L){var q=w;return x&&(q=x[T],q!==w&&(!L||L(q))&&(!P||P(w))&&(q=w,x[T]=q)),q}a(Jy,"setValue");function UW(x,T,w){var P;return x?(P=x[T],!P&&ie(P)&&(P=j(w)?{}:w,x[T]=P)):P=j(w)?{}:w,P}a(UW,"getSetValue");function Wde(x,T){var w=null,P=null;return Qe(x)?w=x:P=x,function(){var L=arguments;if(w&&(P=w()),P)return P[T][O5](P,L)}}a(Wde,"_createProxyFunction");function mS(x,T,w,P,L){x&&T&&w&&(L!==!1||j(x[T]))&&(x[T]=Wde(w,P))}a(mS,"proxyFunctionAs");function YL(x,T,w,P){return x&&T&&we(x)&&Xe(w)&&Xr(w,function(L){ye(L)&&mS(x,L,T,L,P)}),x}a(YL,"proxyFunctions");function $de(x){return function(){function T(){var w=this;x&&ue(x,function(P,L){w[P]=L})}return a(T,"class_1"),T}()}a($de,"createClassFromInterface");function JL(x){return x&&mt&&(x=QL(mt({},x))),x}a(JL,"optimizeObject");function qW(x,T,w,P,L,q){var K=arguments,le=K[0]||{},me=K[pi],Ee=!1,ke=1;for(me>0&&Rt(le)&&(Ee=le,le=K[ke]||{},ke++),we(le)||(le={});ke<me;ke++){var Ue=K[ke],tt=Xe(Ue),We=we(Ue);for(var Ye in Ue){var yt=tt&&Ye in Ue||We&&$e(Ue,Ye);if(yt){var at=Ue[Ye],_t=void 0;if(Ee&&at&&((_t=Xe(at))||Id(at))){var jt=le[Ye];_t?Xe(jt)||(jt=[]):Id(jt)||(jt={}),at=qW(Ee,jt,at)}at!==void 0&&(le[Ye]=at)}}}return le}a(qW,"objExtend");function n4(x){try{return x.responseText}catch{}return null}a(n4,"getResponseText");function HW(x,T){return x?"XDomainRequest,Response:"+n4(x)||"":T}a(HW,"formatErrorMessageXdr");function i4(x,T){return x?"XMLHttpRequest,Status:"+x[uS]+",Response:"+n4(x)||x.response||"":T}a(i4,"formatErrorMessageXhr");function WW(x,T){return T&&(ut(T)?x=[T].concat(x):Xe(T)&&(x=T.concat(x))),x}a(WW,"prependTransports");var XL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",hS="withCredentials",Mm="timeout";function ZL(x,T,w,P,L,q){P===void 0&&(P=!1),L===void 0&&(L=!1);function K(me,Ee,ke){try{me[Ee]=ke}catch{}}a(K,"_wrapSetXhrProp");var le=new XMLHttpRequest;return P&&K(le,XL,P),w&&K(le,hS,w),le.open(x,T,!L),w&&K(le,hS,w),!L&&q&&K(le,Mm,q),le}a(ZL,"openXhr");function $W(x){var T={};if(ye(x)){var w=so(x)[zy](/[\r\n]+/);Xr(w,function(P){if(P){var L=P.indexOf(": ");if(L!==-1){var q=so(P.substring(0,L))[vb](),K=so(P.substring(L+1));T[q]=K}else T[so(P)]=1}})}return T}a($W,"convertAllHeadersToMap");function Xy(x,T,w){if(!x[w]&&T&&T.getResponseHeader){var P=T.getResponseHeader(w);P&&(x[w]=so(P))}return x}a(Xy,"_appendHeader");var On="kill-duration",Fb="kill-duration-seconds",k1="time-delta-millis";function P1(x,T){var w={};return x[HL]?w=$W(x[HL]()):T&&(w=Xy(w,x,k1),w=Xy(w,x,On),w=Xy(w,x,Fb)),w}a(P1,"_getAllResponseHeaders");var eF="documentMode",gS="location",Ob="console",o4="JSON",tF="crypto",s4="msCrypto",Qb="msie",D1="trident/",rF="XMLHttpRequest",np=null,Ub=null,Lm=!1,Td=null,qb=null;function AS(x,T){var w=!1;if(x){try{if(w=T in x,!w){var P=x[sS];P&&(w=T in P)}}catch{}if(!w)try{var L=new x;w=!j(L[T])}catch{}}return w}a(AS,"_hasProperty");function Hb(x){if(x&&Lm){var T=ts("__mockLocation");if(T)return T}return typeof location===EW&&location?location:ts(gS)}a(Hb,"getLocation");function yS(){return typeof console!==bW?console:ts(Ob)}a(yS,"getConsole");function Wb(){return!!(typeof JSON===EW&&JSON||ts(o4)!==null)}a(Wb,"hasJSON");function df(){return Wb()?JSON||ts(o4):null}a(df,"getJSON");function a4(){return ts(tF)}a(a4,"getCrypto");function c4(){return ts(s4)}a(c4,"getMsCrypto");function p0(){var x=Sc();if(x&&(x[W5]!==Ub||np===null)){Ub=x[W5];var T=(Ub||qi)[vb]();np=Zl(T,Qb)||Zl(T,D1)}return np}a(p0,"isIE");function $b(x){if(x===void 0&&(x=null),!x){var T=Sc()||{};x=T?(T.userAgent||qi)[vb]():qi}var w=(x||qi)[vb]();if(Zl(w,Qb)){var P=_c()||{};return De(parseInt(w[zy](Qb)[1]),P[eF]||0)}else if(Zl(w,D1)){var L=parseInt(w[zy](D1)[1]);if(L)return L+4}return null}a($b,"getIEVersion");function Zy(x){return(qb===null||x===!1)&&(qb=xd()&&!!Sc().sendBeacon),qb}a(Zy,"isBeaconsSupported");function CS(x){var T=!1;try{T=!!ts("fetch");var w=ts("Request");T&&x&&w&&(T=AS(w,"keepalive"))}catch{}return T}a(CS,"isFetchSupported");function nF(){return Td===null&&(Td=typeof XDomainRequest!==bW,Td&&iF()&&(Td=Td&&!AS(ts(rF),"withCredentials"))),Td}a(nF,"useXDomainRequest");function iF(){var x=!1;try{var T=ts(rF);x=!!T}catch{}return x}a(iF,"isXhrSupported");var kl=4294967296,Fm=4294967295,l4=123456789,oF=987654321,$g=!1,ip=l4,jb=oF;function sF(x){x<0&&(x>>>=0),ip=l4+x&Fm,jb=oF-x&Fm,$g=!0}a(sF,"_mwcSeed");function jW(){try{var x=bd()&2147483647;sF((Math.random()*kl^x)+x)}catch{}}a(jW,"_autoSeedMwc");function aF(x){var T=0,w=a4()||c4();return w&&w.getRandomValues&&(T=w.getRandomValues(new Uint32Array(1))[0]&Fm),T===0&&p0()&&($g||jW(),T=GW()&Fm),T===0&&(T=Qy(kl*Math.random()|0)),x||(T>>>=0),T}a(aF,"random32");function GW(x){jb=36969*(jb&65535)+(jb>>16)&Fm,ip=18e3*(ip&65535)+(ip>>16)&Fm;var T=(jb<<16)+(ip&65535)>>>0&Fm|0;return x||(T>>>=0),T}a(GW,"mwcRandom32");function jde(x){x===void 0&&(x=22);for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=aF()>>>0,P=0,L=qi;L[pi]<x;)P++,L+=T.charAt(w&63),w>>>=6,P===5&&(w=(aF()<<2&4294967295|w&3)>>>0,P=0);return L}a(jde,"newId");var Gb="3.3.6",Gde="."+jde(6),Vde=0;function VW(x){return x.nodeType===1||x.nodeType===9||!+x.nodeType}a(VW,"_canAcceptData");function zW(x,T){var w=T[x.id];if(!w){w={};try{VW(T)&&Ge(T,x.id,{e:!1,v:w})}catch{}}return w}a(zW,"_getCache");function jg(x,T){return T===void 0&&(T=!1),Lb(x+Vde+++(T?"."+Gb:qi)+Gde)}a(jg,"createUniqueNamespace");function KW(x){var T={id:jg("_aiData-"+(x||qi)+"."+Gb),accept:a(function(w){return VW(w)},"accept"),get:a(function(w,P,L,q){var K=w[T.id];return K?K[Lb(P)]:(q&&(K=zW(T,w),K[Lb(P)]=L),L)},"get"),kill:a(function(w,P){if(w&&w[P])try{delete w[P]}catch{}},"kill")};return T}a(KW,"createElmNodeData");function Vb(x){return x&&we(x)&&(x.isVal||x.fb||$e(x,"v")||$e(x,"mrg")||$e(x,"ref")||x.set)}a(Vb,"_isConfigDefaults");function YW(x,T,w){var P,L=w.dfVal||re;if(T&&w.fb){var q=w.fb;Xe(q)||(q=[q]);for(var K=0;K<q[pi];K++){var le=q[K],me=T[le];if(L(me)?P=me:x&&(me=x.cfg[le],L(me)&&(P=me),x.set(x.cfg,Ot(le),me)),L(P))break}}return!L(P)&&L(w.v)&&(P=w.v),P}a(YW,"_getDefault");function cF(x,T,w){var P=w;if(w&&Vb(w)&&(P=YW(x,T,w)),P){Vb(P)&&(P=cF(x,T,P));var L;Xe(P)?(L=[],L[pi]=P[pi]):Id(P)&&(L={}),L&&(ue(P,function(q,K){K&&Vb(K)&&(K=cF(x,T,K)),L[q]=K}),P=L)}return P}a(cF,"_resolveDefaultValue");function lF(x,T,w,P){var L,q,K,le=P,me,Ee,ke,Ue;Vb(le)?(L=le.isVal,q=le.set,ke=le.rdOnly,Ue=le.blkVal,me=le.mrg,Ee=le.ref,!Ee&&j(Ee)&&(Ee=!!me),K=YW(x,T,le)):K=P,Ue&&x.blkVal(T,w);var tt,We=!0,Ye=T[w];(Ye||!ie(Ye))&&(tt=Ye,We=!1,L&&tt!==K&&!L(tt)&&(tt=K,We=!0),q&&(tt=q(tt,K,T),We=tt===K)),We?K?tt=cF(x,T,K):tt=K:(Id(tt)||Xe(K))&&me&&K&&(Id(K)||Xe(K))&&ue(K,function(yt,at){lF(x,tt,yt,at)}),x.set(T,w,tt),Ee&&x.ref(T,w),ke&&x.rdOnly(T,w)}a(lF,"_applyDefaultValue");var eC=Dg("[[ai_dynCfg_1]]"),JW=Dg("[[ai_blkDynCfg_1]]"),XW=Dg("[[ai_frcDynCfg_1]]");function ZW(x){if(x){var T;if(Xe(x)?(T=[],T[pi]=x[pi]):Id(x)&&(T={}),T)return ue(x,function(w,P){T[w]=ZW(P)}),T}return x}a(ZW,"_cfgDeepCopy");function zde(x){if(x){var T=x[eC]||x;if(T.cfg&&(T.cfg===x||T.cfg[eC]===T))return T}return null}a(zde,"getDynamicConfigHandler");function Kde(x){if(x&&(Id(x)||Xe(x)))try{x[JW]=!0}catch{}return x}a(Kde,"blockDynamicConversion");function uF(x,T,w){var P=!1;return w&&!x[T.blkVal]&&(P=w[XW],!P&&!w[JW]&&(P=Id(w)||Xe(w))),P}a(uF,"_canMakeDynamic");function zb(x){Mr("InvalidAccess:"+x)}a(zb,"throwInvalidAccess");var Yde=["push","pop","shift","unshift","splice"],vS=a(function(x,T,w,P){x&&x[E1](3,108,"".concat(w," [").concat(T,"] failed - ")+qt(P))},"_throwDynamicError");function tC(x,T,w){Xe(T)&&Xr(Yde,function(P){var L=T[P];T[P]=function(){for(var q=[],K=0;K<arguments.length;K++)q[K]=arguments[K];var le=L[O5](this,q);return Jb(x,T,w,"Patching"),le}})}a(tC,"_patchArray");function m0(x,T){var w=qe(x,T);return w&&w.get}a(m0,"_getOwnPropGetter");function e$(x,T,w,P){var L={n:w,h:[],trk:a(function(Ee){Ee&&Ee.fn&&(Rc(L.h,Ee)===-1&&L.h[Io](Ee),x.trk(Ee,L))},"trk"),clr:a(function(Ee){var ke=Rc(L.h,Ee);ke!==-1&&L.h[Eb](ke,1)},"clr")},q=!0,K=!1;function le(){q&&(K=K||uF(le,x,P),P&&!P[eC]&&K&&(P=Jb(x,P,w,"Converting")),q=!1);var Ee=x.act;return Ee&&L.trk(Ee),P}a(le,"_getProperty"),le[x.prop]={chng:a(function(){x.add(L)},"chng")};function me(Ee){if(P!==Ee){le[x.ro]&&!x.upd&&zb("["+w+"] is read-only:"+qt(T)),q&&(K=K||uF(le,x,P),q=!1);var ke=K&&le[x.rf];if(K)if(ke){ue(P,function(tt){P[tt]=Ee?Ee[tt]:tp});try{ue(Ee,function(tt,We){Kb(x,P,tt,We)}),Ee=P}catch(tt){vS((x.hdlr||{})[kc],w,"Assigning",tt),K=!1}}else P&&P[eC]&&ue(P,function(tt){var We=m0(P,tt);if(We){var Ye=We[x.prop];Ye&&Ye.chng()}});if(Ee!==P){var Ue=Ee&&uF(le,x,Ee);!ke&&Ue&&(Ee=Jb(x,Ee,w,"Converting")),P=Ee,K=Ue}x.add(L)}}a(me,"_setProperty"),Ge(T,L.n,{g:le,s:me})}a(e$,"_createDynamicProperty");function Kb(x,T,w,P){if(T){var L=m0(T,w),q=L&&!!L[x.prop];q?T[w]=P:e$(x,T,w,P)}return T}a(Kb,"_setDynamicProperty");function Yb(x,T,w,P){if(T){var L=m0(T,w),q=L&&!!L[x.prop],K=P&&P[0],le=P&&P[1],me=P&&P[2];if(!q){if(me)try{Kde(T)}catch(Ee){vS((x.hdlr||{})[kc],w,"Blocking",Ee)}try{Kb(x,T,w,T[w]),L=m0(T,w)}catch(Ee){vS((x.hdlr||{})[kc],w,"State",Ee)}}K&&(L[x.rf]=K),le&&(L[x.ro]=le),me&&(L[x.blkVal]=!0)}return T}a(Yb,"_setDynamicPropertyState");function Jb(x,T,w,P){try{ue(T,function(L,q){Kb(x,T,L,q)}),T[eC]||(be(T,eC,{get:a(function(){return x.hdlr},"get")}),tC(x,T,w))}catch(L){vS((x.hdlr||{})[kc],w,P,L)}return T}a(Jb,"_makeDynamicObject");var xS="[[ai_",ES="]]";function Jde(x){var T=Ed(xS+"get"+x.uid+ES),w=Ed(xS+"ro"+x.uid+ES),P=Ed(xS+"rf"+x.uid+ES),L=Ed(xS+"blkVal"+x.uid+ES),q=Ed(xS+"dtl"+x.uid+ES),K=null,le=null,me;function Ee(We,Ye){var yt=me.act;try{me.act=We,We&&We[q]&&(Xr(We[q],function(_t){_t.clr(We)}),We[q]=[]),Ye({cfg:x.cfg,set:x.set.bind(x),setDf:x.setDf.bind(x),ref:x.ref.bind(x),rdOnly:x.rdOnly.bind(x)})}catch(_t){var at=x[kc];throw at&&at[E1](1,107,qt(_t)),_t}finally{me.act=yt||null}}a(Ee,"_useHandler");function ke(){if(K){var We=K;K=null,le&&le[bb](),le=null;var Ye=[];if(Xr(We,function(yt){if(yt&&(yt[q]&&(Xr(yt[q],function(at){at.clr(yt)}),yt[q]=null),yt.fn))try{Ee(yt,yt.fn)}catch(at){Ye[Io](at)}}),K)try{ke()}catch(yt){Ye[Io](yt)}Ye[pi]>0&&jL("Watcher error(s): ",Ye)}}a(ke,"_notifyWatchers");function Ue(We){if(We&&We.h[pi]>0){K||(K=[]),le||(le=qy(function(){le=null,ke()},0));for(var Ye=0;Ye<We.h[pi];Ye++){var yt=We.h[Ye];yt&&Rc(K,yt)===-1&&K[Io](yt)}}}a(Ue,"_addWatcher");function tt(We,Ye){if(We){var yt=We[q]=We[q]||[];Rc(yt,Ye)===-1&&yt[Io](Ye)}}return a(tt,"_trackHandler"),me={prop:T,ro:w,rf:P,blkVal:L,hdlr:x,add:Ue,notify:ke,use:Ee,trk:tt},me}a(Jde,"_createState");function u4(x,T){var w={fn:T,rm:a(function(){w.fn=null,x=null,T=null},"rm")};return Ge(w,"toJSON",{v:a(function(){return"WatcherHandler"+(w.fn?"":"[X]")},"v")}),x.use(w,T),w}a(u4,"_createAndUseHandler");function t$(x,T,w){var P=zde(T);if(P)return P;var L=jg("dyncfg",!0),q=T&&w!==!1?T:ZW(T),K;function le(){K.notify()}a(le,"_notifyWatchers");function me(at,_t,jt){try{at=Kb(K,at,_t,jt)}catch(cr){vS(x,_t,"Setting value",cr)}return at[_t]}a(me,"_setValue");function Ee(at){return u4(K,at)}a(Ee,"_watch");function ke(at,_t){K.use(null,function(jt){var cr=K.upd;try{j(_t)||(K.upd=_t),at(jt)}finally{K.upd=cr}})}a(ke,"_block");function Ue(at,_t){var jt;return Yb(K,at,_t,(jt={},jt[0]=!0,jt))[_t]}a(Ue,"_ref");function tt(at,_t){var jt;return Yb(K,at,_t,(jt={},jt[1]=!0,jt))[_t]}a(tt,"_rdOnly");function We(at,_t){var jt;return Yb(K,at,_t,(jt={},jt[2]=!0,jt))[_t]}a(We,"_blkPropValue");function Ye(at,_t){return _t&&ue(_t,function(jt,cr){lF(yt,at,jt,cr)}),at}a(Ye,"_applyDefaults");var yt={uid:null,cfg:q,logger:x,notify:le,set:me,setDf:Ye,watch:Ee,ref:Ue,rdOnly:tt,blkVal:We,_block:ke};return Ge(yt,"uid",{c:!1,e:!1,w:!1,v:L}),K=Jde(yt),Jb(K,q,"config","Creating"),yt}a(t$,"_createDynamicHandler");function r$(x,T){x?(x[xb](T),x[E1](2,108,T)):zb(T)}a(r$,"_logInvalidAccess");function op(x,T,w,P){var L=t$(w,x||{},P);return T&&L.setDf(L.cfg,T),L}a(op,"createDynamicConfig");function Gg(x,T,w){var P=x[eC]||x;return P.cfg&&(P.cfg===x||P.cfg[eC]===P)?P[Qg](T):(r$(w,QW+qt(x)),op(x,null,w)[Qg](T))}a(Gg,"onConfigChange");function Xb(x,T){if(x&&x[b1])return x[b1](T)}a(Xb,"runTargetUnload");function n$(x,T,w){var P;return w||(P=Pb(function(L){w=L})),x&&_de(x)>0?ep(Xb(x[0],T),function(){n$(Ng(x,1),T,w)}):w(),P}a(n$,"doUnloadAll");var Xde=500,i$="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Zde(x,T,w){return!x&&ie(x)?T:Rt(x)?x:Ot(x)[vb]()==="true"}a(Zde,"_stringToBoolOrDefault");function efe(x){return{mrg:!0,v:x}}a(efe,"cfgDfMerge");function dF(x,T,w){return{fb:w,isVal:x,v:T}}a(dF,"cfgDfValidate");function Om(x,T){return{fb:T,set:Zde,v:!!x}}a(Om,"cfgDfBoolean");var d4=[Nb,Mb,X5,R1],f4=null,p4;function tfe(x,T){return function(){var w=arguments,P=o$(T);if(P){var L=P.listener;L&&L[x]&&L[x][O5](L,w)}}}a(tfe,"_listenerProxyFunc");function rfe(){var x=ts("Microsoft");return x&&(f4=x.ApplicationInsights),f4}a(rfe,"_getExtensionNamespace");function o$(x){var T=f4;return!T&&x.disableDbgExt!==!0&&(T=f4||rfe()),T?T.ChromeDbgExt:null}a(o$,"getDebugExt");function nfe(x){if(!p4){p4={};for(var T=0;T<d4[pi];T++)p4[d4[T]]=tfe(d4[T],x)}return p4}a(nfe,"getDebugListener");var Zb,s$="warnToConsole",ife="AI (Internal): ",ofe="AI: ",sfe="AITR_",a$={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},eI=(Zb={},Zb[0]=null,Zb[1]="errorToConsole",Zb[2]=s$,Zb[3]="debugToConsole",Zb);function ff(x){return x?'"'+x[Ky](/\"/g,qi)+'"':qi}a(ff,"_sanitizeDiagnosticText");function bS(x,T){var w=yS();if(w){var P="log";w[x]&&(P=x),Qe(w[P])&&w[P](T)}}a(bS,"_logToConsole");var m4=function(){function x(T,w,P,L){P===void 0&&(P=!1);var q=this;q[q5]=T,q[T1]=(P?ofe:ife)+T;var K=qi;Wb()&&(K=df().stringify(L));var le=(w?" message:"+ff(w):qi)+(L?" props:"+ff(K):qi);q[T1]+=le}return a(x,"_InternalLogMessage"),x.dataType="MessageData",x}();function IS(x,T){return(x||{})[kc]||new TS(T)}a(IS,"safeGetLogger");var TS=function(){function x(T){this.identifier="DiagnosticLogger",this.queue=[];var w=0,P={},L,q,K,le,me;Ou(x,this,function(Ee){me=Ue(T||{}),Ee.consoleLoggingLevel=function(){return L},Ee[E1]=function(Ye,yt,at,_t,jt){jt===void 0&&(jt=!1);var cr=new m4(yt,at,jt,_t);if(le)throw qt(cr);var Dr=eI[Ye]||s$;if(j(cr[T1]))We("throw"+(Ye===1?"Critical":"Warning"),cr);else{if(jt){var si=+cr[q5];!P[si]&&L>=Ye&&(Ee[Dr](cr[T1]),P[si]=!0)}else L>=Ye&&Ee[Dr](cr[T1]);ke(Ye,cr)}},Ee.debugToConsole=function(Ye){bS("debug",Ye),We("warning",Ye)},Ee[xb]=function(Ye){bS("warn",Ye),We("warning",Ye)},Ee.errorToConsole=function(Ye){bS("error",Ye),We("error",Ye)},Ee.resetInternalMessageCount=function(){w=0,P={}},Ee.logInternalMessage=ke,Ee[b1]=function(Ye){me&&me.rm(),me=null};function ke(Ye,yt){if(!tt()){var at=!0,_t=sfe+yt[q5];if(P[_t]?at=!1:P[_t]=!0,at&&(Ye<=q&&(Ee.queue[Io](yt),w++,We(Ye===1?"error":"warn",yt)),w===K)){var jt="Internal events throttle limit per PageView reached for this app.",cr=new m4(23,jt,!1);Ee.queue[Io](cr),Ye===1?Ee.errorToConsole(jt):Ee[xb](jt)}}}a(ke,"_logInternalMessage");function Ue(Ye){return Gg(op(Ye,a$,Ee).cfg,function(yt){var at=yt.cfg;L=at[_W],q=at.loggingLevelTelemetry,K=at.maxMessageLimit,le=at.enableDebug})}a(Ue,"_setDefaultsFromConfig");function tt(){return w>=K}a(tt,"_areInternalMessagesThrottled");function We(Ye,yt){var at=o$(T||{});at&&at[Bm]&&at[Bm](Ye,yt)}a(We,"_debugExtMsg")})}return a(x,"DiagnosticLogger"),x.__ieDyn=1,x}();function fF(x){return x||new TS}a(fF,"_getLogger");function qr(x,T,w,P,L,q){q===void 0&&(q=!1),fF(x)[E1](T,w,P,L,q)}a(qr,"_throwInternal");function h4(x,T){fF(x)[xb](T)}a(h4,"_warnToConsole");var wS,rC,c$="toGMTString",l$="toUTCString",g4="cookie",Vg="expires",u$="isCookieUseDisabled",A4="disableCookiesUsage",d$="_ckMgr",y4=null,tI=null,C4=null,Qm,f$={},p$={},m$=(wS={cookieCfg:efe((rC={},rC[e4]={fb:"cookieDomain",dfVal:r4},rC.path={fb:"cookiePath",dfVal:r4},rC.enabled=tp,rC.ignoreCookies=tp,rC.blockedCookies=tp,rC)),cookieDomain:tp,cookiePath:tp},wS[A4]=tp,wS);function pF(){!Qm&&(Qm=Er(function(){return _c()}))}a(pF,"_getDoc");function _S(x){return x?x.isEnabled():!0}a(_S,"_isMgrEnabled");function mF(x,T){return T&&x&&Xe(x.ignoreCookies)?Rc(x.ignoreCookies,T)!==-1:!1}a(mF,"_isIgnoredCookie");function afe(x,T){return T&&x&&Xe(x.blockedCookies)&&Rc(x.blockedCookies,T)!==-1?!0:mF(x,T)}a(afe,"_isBlockedCookie");function hF(x,T){var w=T[Pm];if(ie(w)){var P=void 0;j(x[u$])||(P=!x[u$]),j(x[A4])||(P=!x[A4]),w=P}return w}a(hF,"_isCfgEnabled");function cfe(x,T){var w,P,L,q,K,le,me,Ee;x=op(x||p$,null,T).cfg,q=Gg(x,function(Ue){Ue.setDf(Ue.cfg,m$),w=Ue.ref(Ue.cfg,"cookieCfg"),P=w[t4]||"/",L=w[e4],K=hF(x,w)!==!1,le=w.getCookie||lfe,me=w.setCookie||rI,Ee=w.delCookie||rI},T);var ke={isEnabled:a(function(){var Ue=hF(x,w)!==!1&&K&&h$(T),tt=p$[d$];return Ue&&tt&&ke!==tt&&(Ue=_S(tt)),Ue},"isEnabled"),setEnabled:a(function(Ue){K=Ue!==!1,w[Pm]=Ue},"setEnabled"),set:a(function(Ue,tt,We,Ye,yt){var at=!1;if(_S(ke)&&!afe(w,Ue)){var _t={},jt=so(tt||qi),cr=Lg(jt,";");if(cr!==-1&&(jt=so(B(tt,cr)),_t=gF(ve(tt,cr+1))),Jy(_t,e4,Ye||L,de,j),!ie(We)){var Dr=p0();if(j(_t[Vg])){var si=bd(),Gi=si+We*1e3;if(Gi>0){var Vi=new Date;Vi.setTime(Gi),Jy(_t,Vg,g$(Vi,Dr?c$:l$)||g$(Vi,Dr?c$:l$)||qi,de)}}Dr||Jy(_t,"max-age",qi+We,null,j)}var Ko=Hb();Ko&&Ko.protocol==="https:"&&(Jy(_t,"secure",null,null,j),tI===null&&(tI=!ufe((Sc()||{})[W5])),tI&&Jy(_t,"SameSite","None",null,j)),Jy(_t,t4,yt||P,null,j),me(Ue,A$(jt,_t)),at=!0}return at},"set"),get:a(function(Ue){var tt=qi;return _S(ke)&&!mF(w,Ue)&&(tt=le(Ue)),tt},"get"),del:a(function(Ue,tt){var We=!1;return _S(ke)&&(We=ke.purge(Ue,tt)),We},"del"),purge:a(function(Ue,tt){var We,Ye=!1;if(h$(T)){var yt=(We={},We[t4]=tt||"/",We[Vg]="Thu, 01 Jan 1970 00:00:01 GMT",We);p0()||(yt["max-age"]="0"),Ee(Ue,A$(qi,yt)),Ye=!0}return Ye},"purge"),unload:a(function(Ue){q&&q.rm(),q=null},"unload")};return ke[d$]=ke,ke}a(cfe,"createCookieMgr");function h$(x){if(y4===null){y4=!1,!Qm&&pF();try{var T=Qm.v||{};y4=T[g4]!==void 0}catch(w){qr(x,2,68,"Cannot access document.cookie - "+Rl(w),{exception:qt(w)})}}return y4}a(h$,"areCookiesSupported");function gF(x){var T={};if(x&&x[pi]){var w=so(x)[zy](";");Xr(w,function(P){if(P=so(P||qi),P){var L=Lg(P,"=");L===-1?T[P]=null:T[so(B(P,L))]=so(ve(P,L+1))}})}return T}a(gF,"_extractParts");function g$(x,T){return Qe(x[T])?x[T]():null}a(g$,"_formatDate");function A$(x,T){var w=x||qi;return ue(T,function(P,L){w+="; "+P+(ie(L)?qi:"="+L)}),w}a(A$,"_formatCookieValue");function lfe(x){var T=qi;if(!Qm&&pF(),Qm.v){var w=Qm.v[g4]||qi;C4!==w&&(f$=gF(w),C4=w),T=so(f$[x]||qi)}return T}a(lfe,"_getCookieValue");function rI(x,T){!Qm&&pF(),Qm.v&&(Qm.v[g4]=x+"="+T)}a(rI,"_setCookieValue");function ufe(x){return ye(x)?!!(Zl(x,"CPU iPhone OS 12")||Zl(x,"iPad; CPU OS 12")||Zl(x,"Macintosh; Intel Mac OS X 10_14")&&Zl(x,"Version/")&&Zl(x,"Safari")||Zl(x,"Macintosh; Intel Mac OS X 10_14")&&xW(x,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Zl(x,"Chrome/5")||Zl(x,"Chrome/6")||Zl(x,"UnrealEngine")&&!Zl(x,"Chrome")||Zl(x,"UCBrowser/12")||Zl(x,"UCBrowser/11")):!1}a(ufe,"uaDisallowsSameSiteNone");var AF={perfEvtsSendAll:!1};function dfe(x){x.h=null;var T=x.cb;x.cb=[],Xr(T,function(w){V(w.fn,[w.arg])})}a(dfe,"_runScheduledListeners");function nC(x,T,w,P){Xr(x,function(L){L&&L[T]&&(w?(w.cb[Io]({fn:P,arg:L}),w.h=w.h||qy(dfe,0,w)):V(P,[L]))})}a(nC,"_runListeners");var ffe=function(){function x(T){this.listeners=[];var w,P,L=[],q={h:null,cb:[]},K=op(T,AF);P=K[Qg](function(le){w=!!le.cfg.perfEvtsSendAll}),Ou(x,this,function(le){Ge(le,"listeners",{g:a(function(){return L},"g")}),le[Q5]=function(me){L[Io](me)},le[lS]=function(me){for(var Ee=Rc(L,me);Ee>-1;)L[Eb](Ee,1),Ee=Rc(L,me)},le[Nb]=function(me){nC(L,Nb,q,function(Ee){Ee[Nb](me)})},le[Mb]=function(me,Ee){nC(L,Mb,q,function(ke){ke[Mb](me,Ee)})},le[X5]=function(me,Ee){nC(L,X5,Ee?q:null,function(ke){ke[X5](me,Ee)})},le[R1]=function(me){me&&(w||!me[WL]())&&nC(L,R1,null,function(Ee){me.isAsync?qy(function(){return Ee[R1](me)},0):Ee[R1](me)})},le[VL]=function(me){me&&me[pi]&&nC(L,VL,q,function(Ee){Ee[VL](me)})},le[zL]=function(me){me&&me[Sb]&&nC(L,zL,q,function(Ee){Ee[zL](me)})},le[Z5]=function(me,Ee){if(me>0){var ke=Ee||0;nC(L,Z5,q,function(Ue){Ue[Z5](me,ke)})}},le[b1]=function(me){var Ee=a(function(){P&&P.rm(),P=null,L=[],q.h&&q.h[bb](),q.h=null,q.cb=[]},"_finishUnload"),ke;if(nC(L,"unload",null,function(Ue){var tt=Ue[b1](me);tt&&(ke||(ke=[]),ke[Io](tt))}),ke)return Pb(function(Ue){return ep(GL(ke),function(){Ee(),Ue()})});Ee()}})}return a(x,"NotificationManager"),x.__ieDyn=1,x}(),nI="ctx",yF="ParentContextKey",SS="ChildrenContextKey",pfe=null,v4=function(){function x(T,w,P){var L=this;if(L.start=bd(),L[Gy]=T,L.isAsync=P,L[WL]=function(){return!1},Qe(w)){var q;Ge(L,"payload",{g:a(function(){return!q&&Qe(w)&&(q=w(),w=null),q},"g")})}L[Yy]=function(K){return K?K===x[yF]||K===x[SS]?L[K]:(L[nI]||{})[K]:null},L[d0]=function(K,le){if(K)if(K===x[yF])L[K]||(L[WL]=function(){return!0}),L[K]=le;else if(K===x[SS])L[K]=le;else{var me=L[nI]=L[nI]||{};me[K]=le}},L.complete=function(){var K=0,le=L[Yy](x[SS]);if(Xe(le))for(var me=0;me<le[pi];me++){var Ee=le[me];Ee&&(K+=Ee.time)}L.time=bd()-L.start,L.exTime=L.time-K,L.complete=function(){}}}return a(x,"PerfEvent"),x.ParentContextKey="parent",x.ChildrenContextKey="childEvts",x}(),mfe=function(){function x(T){this.ctx={},Ou(x,this,function(w){w.create=function(P,L,q){return new v4(P,L,q)},w.fire=function(P){P&&(P.complete(),T&&Qe(T[R1])&&T[R1](P))},w[d0]=function(P,L){if(P){var q=w[nI]=w[nI]||{};q[P]=L}},w[Yy]=function(P){return(w[nI]||{})[P]}})}return a(x,"PerfManager"),x.__ieDyn=1,x}(),Um="CoreUtils.doPerf";function iI(x,T,w,P,L){if(x){var q=x;if(q[fS]&&(q=q[fS]()),q){var K=void 0,le=q[Yy](Um);try{if(K=q.create(T(),P,L),K){if(le&&K[d0]&&(K[d0](v4[yF],le),le[Yy]&&le[d0])){var me=le[Yy](v4[SS]);me||(me=[],le[d0](v4[SS],me)),me[Io](K)}return q[d0](Um,K),w(K)}}catch(Ee){K&&K[d0]&&K[d0]("exception",Ee)}finally{K&&q.fire(K),q[d0](Um,le)}}}return w()}a(iI,"doPerf");function Dc(){return pfe}a(Dc,"getGblPerfMgr");var x4="00000000000000000000000000000000",oI="0000000000000000";function E4(x,T,w){return x&&x[pi]===T&&x!==w?!!x.match(/^[\da-f]*$/i):!1}a(E4,"_isValid");function iC(x){return E4(x,32,x4)}a(iC,"isValidTraceId");function B1(x){return E4(x,16,oI)}a(B1,"isValidSpanId");var RS=KW("plugin");function oC(x){return RS.get(x,"state",{},!0)}a(oC,"_getPluginState");function CF(x,T){for(var w=[],P=null,L=x[Nm](),q;L;){var K=L[Tb]();if(K){P&&P[Vy]&&K[rp]&&P[Vy](K),q=oC(K);var le=!!q[km];K[km]&&(le=K[km]()),le||w[Io](K),P=K,L=L[Nm]()}}Xr(w,function(me){var Ee=x[Pc]();me[cS](x.getCfg(),Ee,T,x[Nm]()),q=oC(me),!me[Pc]&&!q[Pc]&&(q[Pc]=Ee),q[km]=!0,delete q[Dm]})}a(CF,"initializePlugins");function vF(x){return x.sort(function(T,w){var P=0;if(w){var L=w[rp];T[rp]?P=L?T[Bb]-w[Bb]:1:L&&(P=-1)}else P=T?1:-1;return P})}a(vF,"sortPlugins");function hfe(x){var T={};return{getName:a(function(){return T[Gy]},"getName"),setName:a(function(w){x&&x.setName(w),T[Gy]=w},"setName"),getTraceId:a(function(){return T.traceId},"getTraceId"),setTraceId:a(function(w){x&&x.setTraceId(w),iC(w)&&(T.traceId=w)},"setTraceId"),getSpanId:a(function(){return T.spanId},"getSpanId"),setSpanId:a(function(w){x&&x.setSpanId(w),B1(w)&&(T.spanId=w)},"setSpanId"),getTraceFlags:a(function(){return T[RW]},"getTraceFlags"),setTraceFlags:a(function(w){x&&x.setTraceFlags(w),T[RW]=w},"setTraceFlags")}}a(hfe,"createDistributedTraceContext");var gfe="TelemetryPluginChain",y$="_hasRun",xF="_getTelCtx",C$=0;function Afe(x,T,w){for(;x;){if(x[Tb]()===w)return x;x=x[Nm]()}return M([w],T.config||{},T)}a(Afe,"_getNextProxyStart");function EF(x,T,w,P){var L=null,q=[];T||(T=op({},null,w[kc])),P!==null&&(L=P?Afe(x,w,P):x);var K={_next:me,ctx:{core:a(function(){return w},"core"),diagLog:a(function(){return IS(w,T.cfg)},"diagLog"),getCfg:a(function(){return T.cfg},"getCfg"),getExtCfg:ke,getConfig:Ue,hasNext:a(function(){return!!L},"hasNext"),getNext:a(function(){return L},"getNext"),setNext:a(function(We){L=We},"setNext"),iterate:tt,onComplete:le}};function le(We,Ye){for(var yt=[],at=2;at<arguments.length;at++)yt[at-2]=arguments[at];We&&q[Io]({func:We,self:j(Ye)?K.ctx:Ye,args:yt})}a(le,"_addOnComplete");function me(){var We=L;if(L=We?We[Nm]():null,!We){var Ye=q;Ye&&Ye[pi]>0&&(Xr(Ye,function(yt){try{yt.func.call(yt.self,yt.args)}catch(at){qr(w[kc],2,73,"Unexpected Exception during onComplete - "+qt(at))}}),q=[])}return We}a(me,"_moveNext");function Ee(We,Ye){var yt=null,at=T.cfg;if(at&&We){var _t=at[S1];!_t&&Ye&&(_t={}),at[S1]=_t,_t=T.ref(at,S1),_t&&(yt=_t[We],!yt&&Ye&&(yt={}),_t[We]=yt,yt=T.ref(_t,We))}return yt}a(Ee,"_getExtCfg");function ke(We,Ye){var yt=Ee(We,!0);return Ye&&ue(Ye,function(at,_t){if(ie(yt[at])){var jt=T.cfg[at];(jt||!ie(jt))&&(yt[at]=jt)}lF(T,yt,at,_t)}),T.setDf(yt,Ye)}a(ke,"_resolveExtCfg");function Ue(We,Ye,yt){yt===void 0&&(yt=!1);var at,_t=Ee(We,!1),jt=T.cfg;return _t&&(_t[Ye]||!ie(_t[Ye]))?at=_t[Ye]:(jt[Ye]||!ie(jt[Ye]))&&(at=jt[Ye]),at||!ie(at)?at:yt}a(Ue,"_getConfig");function tt(We){for(var Ye;Ye=K._next();){var yt=Ye[Tb]();yt&&We(yt)}}return a(tt,"_iterateChain"),K}a(EF,"_createInternalContext");function sI(x,T,w,P){var L=op(T),q=EF(x,L,w,P),K=q.ctx;function le(Ee){var ke=q._next();return ke&&ke[rp](Ee,K),!ke}a(le,"_processNext");function me(Ee,ke){return Ee===void 0&&(Ee=null),Xe(Ee)&&(Ee=M(Ee,L.cfg,w,ke)),sI(Ee||K[Nm](),L.cfg,w,ke)}return a(me,"_createNew"),K[Xl]=le,K[I1]=me,K}a(sI,"createProcessTelemetryContext");function S(x,T,w){var P=op(T.config),L=EF(x,P,T,w),q=L.ctx;function K(me){var Ee=L._next();return Ee&&Ee[b1](q,me),!Ee}a(K,"_processNext");function le(me,Ee){return me===void 0&&(me=null),Xe(me)&&(me=M(me,P.cfg,T,Ee)),S(me||q[Nm](),T,Ee)}return a(le,"_createNew"),q[Xl]=K,q[I1]=le,q}a(S,"createProcessTelemetryUnloadContext");function D(x,T,w){var P=op(T.config),L=EF(x,P,T,w),q=L.ctx;function K(me){return q.iterate(function(Ee){Qe(Ee[Ug])&&Ee[Ug](q,me)})}a(K,"_processNext");function le(me,Ee){return me===void 0&&(me=null),Xe(me)&&(me=M(me,P.cfg,T,Ee)),D(me||q[Nm](),T,Ee)}return a(le,"_createNew"),q[Xl]=K,q[I1]=le,q}a(D,"createProcessTelemetryUpdateContext");function M(x,T,w,P){var L=null,q=!P;if(Xe(x)&&x[pi]>0){var K=null;Xr(x,function(le){if(!q&&P===le&&(q=!0),q&&le&&Qe(le[rp])){var me=$(le,T,w);L||(L=me),K&&K._setNext(me),K=me}})}return P&&!L?M([P],T,w):L}a(M,"createTelemetryProxyChain");function $(x,T,w){var P=null,L=Qe(x[rp]),q=Qe(x[Vy]),K;x?K=x[jy]+"-"+x[Bb]+"-"+C$++:K="Unknown-0-"+C$++;var le={getPlugin:a(function(){return x},"getPlugin"),getNext:a(function(){return P},"getNext"),processTelemetry:ke,unload:Ue,update:tt,_id:K,_setNext:a(function(We){P=We},"_setNext")};function me(){var We;return x&&Qe(x[xF])&&(We=x[xF]()),We||(We=sI(le,T,w)),We}a(me,"_getTelCtx");function Ee(We,Ye,yt,at,_t){var jt=!1,cr=x?x[jy]:gfe,Dr=We[y$];return Dr||(Dr=We[y$]={}),We.setNext(P),x&&iI(We[Pc](),function(){return cr+":"+yt},function(){Dr[K]=!0;try{var si=P?P._id:qi;si&&(Dr[si]=!1),jt=Ye(We)}catch(Vi){var Gi=P?Dr[P._id]:!0;Gi&&(jt=!0),(!P||!Gi)&&qr(We[Bm](),1,73,"Plugin ["+cr+"] failed during "+yt+" - "+qt(Vi)+", run flags: "+qt(Dr))}},at,_t),jt}a(Ee,"_processChain");function ke(We,Ye){Ye=Ye||me();function yt(at){if(!x||!L)return!1;var _t=oC(x);return _t[Dm]||_t[J5]?!1:(q&&x[Vy](P),x[rp](We,at),!0)}a(yt,"_callProcessTelemetry"),Ee(Ye,yt,"processTelemetry",function(){return{item:We}},!We.sync)||Ye[Xl](We)}a(ke,"_processTelemetry");function Ue(We,Ye){function yt(){var at=!1;if(x){var _t=oC(x),jt=x[Pc]||_t[Pc];x&&(!jt||jt===We.core())&&!_t[Dm]&&(_t[Pc]=null,_t[Dm]=!0,_t[km]=!1,x[Dm]&&x[Dm](We,Ye)===!0&&(at=!0))}return at}a(yt,"_callTeardown"),Ee(We,yt,"unload",function(){},Ye.isAsync)||We[Xl](Ye)}a(Ue,"_unloadPlugin");function tt(We,Ye){function yt(){var at=!1;if(x){var _t=oC(x),jt=x[Pc]||_t[Pc];x&&(!jt||jt===We.core())&&!_t[Dm]&&x[Ug]&&x[Ug](We,Ye)===!0&&(at=!0)}return at}a(yt,"_callUpdate"),Ee(We,yt,"update",function(){},!1)||We[Xl](Ye)}return a(tt,"_updatePlugin"),tr(le)}a($,"createTelemetryPluginProxy");function pe(){var x=[];function T(P){P&&x[Io](P)}a(T,"_addHandler");function w(P,L){Xr(x,function(q){try{q(P,L)}catch(K){qr(P[Bm](),2,73,"Unexpected error calling unload handler - "+qt(K))}}),x=[]}return a(w,"_runHandlers"),{add:T,run:w}}a(pe,"createUnloadHandlerContainer");function _e(){var x=[];function T(P){var L=x;x=[],Xr(L,function(q){try{(q.rm||q.remove).call(q)}catch(K){qr(P,2,73,"Unloading:"+qt(K))}})}a(T,"_doUnload");function w(P){P&&Jf(x,P)}return a(w,"_addHook"),{run:T,add:w}}a(_e,"createUnloadHookContainer");var Pe,je="getPlugin",ot=(Pe={},Pe[S1]={isVal:r4,v:{}},Pe),bt=function(){function x(){var T=this,w,P,L,q,K;Ee(),Ou(x,T,function(ke){ke[cS]=function(Ue,tt,We,Ye){me(Ue,tt,Ye),w=!0},ke[Dm]=function(Ue,tt){var We=ke[Pc];if(!We||Ue&&We!==Ue[Pc]())return;var Ye,yt=!1,at=Ue||S(null,We,L&&L[je]?L[je]():L),_t=tt||{reason:0,isAsync:!1};function jt(){yt||(yt=!0,q.run(at,tt),K.run(at[Bm]()),Ye===!0&&at[Xl](_t),Ee())}return a(jt,"_unloadCallback"),!ke[H5]||ke[H5](at,_t,jt)!==!0?jt():Ye=!0,Ye},ke[Ug]=function(Ue,tt){var We=ke[Pc];if(!We||Ue&&We!==Ue[Pc]())return;var Ye,yt=!1,at=Ue||D(null,We,L&&L[je]?L[je]():L),_t=tt||{reason:0};function jt(){yt||(yt=!0,me(at.getCfg(),at.core(),at[Nm]()))}return a(jt,"_updateCallback"),!ke._doUpdate||ke._doUpdate(at,_t,jt)!==!0?jt():Ye=!0,Ye},mS(ke,"_addUnloadCb",function(){return q},"add"),mS(ke,"_addHook",function(){return K},"add"),Ge(ke,"_unloadHooks",{g:a(function(){return K},"g")})}),T[Bm]=function(ke){return le(ke)[Bm]()},T[km]=function(){return w},T.setInitialized=function(ke){w=ke},T[Vy]=function(ke){L=ke},T[Xl]=function(ke,Ue){Ue?Ue[Xl](ke):L&&Qe(L[rp])&&L[rp](ke,null)},T._getTelCtx=le;function le(ke){ke===void 0&&(ke=null);var Ue=ke;if(!Ue){var tt=P||sI(null,{},T[Pc]);L&&L[je]?Ue=tt[I1](null,L[je]):Ue=tt[I1](null,L)}return Ue}a(le,"_getTelCtx");function me(ke,Ue,tt){op(ke,ot,IS(Ue)),!tt&&Ue&&(tt=Ue[wb]()[Nm]());var We=L;L&&L[je]&&(We=L[je]()),T[Pc]=Ue,P=sI(tt,ke,Ue,We)}a(me,"_setDefaults");function Ee(){w=!1,T[Pc]=null,P=null,L=null,K=_e(),q=pe()}a(Ee,"_initDefaults")}return a(x,"BaseTelemetryPlugin"),x.__ieDyn=1,x}();function Cr(x,T,w){var P={id:T,fn:w};Jf(x,P);var L={remove:a(function(){Xr(x,function(q,K){if(q.id===P.id)return x[Eb](K,1),-1})},"remove")};return L}a(Cr,"_addInitializer");function Qn(x,T,w){for(var P=!1,L=x[pi],q=0;q<L;++q){var K=x[q];if(K)try{if(K.fn[O5](null,[T])===!1){P=!0;break}}catch(le){qr(w,2,64,"Telemetry initializer failed: "+Rl(le),{exception:qt(le)},!0)}}return!P}a(Qn,"_runInitializers");var ni=function(x){aS(T,x);function T(){var w=x.call(this)||this;w.identifier="TelemetryInitializerPlugin",w.priority=199;var P,L;q(),Ou(T,w,function(K,le){K.addTelemetryInitializer=function(me){return Cr(L,P++,me)},K[rp]=function(me,Ee){Qn(L,me,Ee?Ee[Bm]():K[Bm]())&&K[Xl](me,Ee)},K[H5]=function(){q()}});function q(){P=0,L=[]}return a(q,"_initDefaults"),w}return a(T,"TelemetryInitializerPlugin"),T.__ieDyn=1,T}(bt),Tr,Qr="Plugins must provide initialize method",Zn="_notificationManager",Un="SDK is still unloading...",Hi="SDK is not initialized",Oo=100,ao=5e4,Jc=ar((Tr={cookieCfg:{}},Tr[Db]={rdOnly:!0,ref:!0,v:[]},Tr[Wg]={rdOnly:!0,ref:!0,v:[]},Tr[S1]={ref:!0,v:{}},Tr[f0]=tp,Tr.loggingLevelConsole=0,Tr.diagnosticLogInterval=tp,Tr));function aI(x,T){return new mfe(T)}a(aI,"_createPerfManager");function kS(x,T,w){var P=[],L=[],q={};return Xr(w,function(K){(ie(K)||ie(K[cS]))&&Yr(Qr);var le=K[Bb],me=K[jy];K&&le&&(ie(q[le])?q[le]=me:h4(x,"Two extensions have same priority #"+le+" - "+q[le]+", "+me)),!le||le<T?P[Io](K):L[Io](K)}),{core:P,channels:L}}a(kS,"_validateExtensions");function bF(x,T){var w=!1;return Xr(T,function(P){if(P===x)return w=!0,-1}),w}a(bF,"_isPluginPresent");function b4(x,T,w,P){w&&ue(w,function(L,q){P&&Id(q)&&Id(T[L])&&b4(x,T[L],q,P),P&&Id(q)&&Id(T[L])?b4(x,T[L],q,P):x.set(T,L,q)})}a(b4,"_deepMergeConfig");function v$(x,T){var w=null,P=-1;return Xr(x,function(L,q){if(L.w===T)return w=L,P=q,-1}),{i:P,l:w}}a(v$,"_findWatcher");function yfe(x,T){var w=v$(x,T).l;return w||(w={w:T,rm:a(function(){var P=v$(x,T);P.i!==-1&&x[Eb](P.i,1)},"rm")},x[Io](w)),w}a(yfe,"_addDelayedCfgListener");function IF(x,T,w){Xr(T,function(P){var L=Gg(x,P.w,w);delete P.w,P.rm=function(){L.rm()}})}a(IF,"_registerDelayedCfgListener");function x$(x,T,w,P){return T.add(x[Qg](function(L){var q=L.cfg.disableDbgExt;q===!0&&P&&(w[lS](P),P=null),w&&!P&&q!==!0&&(P=nfe(L.cfg),w[Q5](P))})),P}a(x$,"_initDebugListener");function E$(x){return Ge({rm:a(function(){x.rm()},"rm")},"toJSON",{v:a(function(){return"aicore::onCfgChange<"+JSON.stringify(x)+">"},"v")})}a(E$,"_createUnloadHook");var Mt=function(){function x(){var T,w,P,L,q,K,le,me,Ee,ke,Ue,tt,We,Ye,yt,at,_t,jt,cr,Dr,si,Gi,Vi,Ko,_n,sn,zi,wa,_s,Gt,an,Qo;Ou(x,this,function(Nt){pt(),Nt._getDbgPlgTargets=function(){return[Vi,L]},Nt[km]=function(){return w},Nt.activeStatus=function(){return sn},Nt._setPendingStatus=function(){sn=3},Nt[cS]=function(vt,Rr,Gn,en){We&&Yr(Un),Nt[km]()&&Yr("Core cannot be initialized more than once"),T=op(vt,Jc,Gn||Nt[kc],!1),vt=T.cfg,qu(T[Qg](function(us){var Js=us.cfg,Sd=sn===3;if(!Sd){wa=Js.initInMemoMaxSize||Oo;var sp=Js.instrumentationKey,Yg=Js.endpointUrl;if(ie(sp)){si=null,sn=$y.INACTIVE;var Jg="Please provide instrumentation key";w?(qr(P,1,100,Jg),Va()):Yr(Jg);return}var L4=[];if(At(sp)?(L4[Io](sp),si=null):si=sp,At(Yg)?(L4[Io](Yg),zi=null):zi=Yg,L4[pi]){_s=!1,sn=3;var $F=r4(Js.initTimeOut)?Js.initTimeOut:ao,Yfe=uf(L4);qy(function(){_s||qn()},$F),ep(Yfe,function(yI){try{if(_s)return;if(!yI.rejected){var CI=yI[Ib];if(CI&&CI[pi]){var G$=CI[0];if(si=G$&&G$[Ib],CI[pi]>1){var V$=CI[1];zi=V$&&V$[Ib]}}si&&(vt.instrumentationKey=si,vt.endpointUrl=zi)}qn()}catch{_s||qn()}})}else qn();var F4=us.ref(us.cfg,S1);ue(F4,function(yI){us.ref(F4,yI)})}})),q=en,cr=x$(T,jt,q&&Nt[u0](),cr),gI(),Nt[kc]=Gn;var Vn=vt[Db];if(ke=[],ke[Io].apply(ke,TW(TW([],Rr,!1),Vn)),Ue=vt[Wg],za(null),(!tt||tt[pi]===0)&&Yr("No "+Wg+" available"),Ue&&Ue[pi]>1){var rs=Nt[Tb]("TeeChannelController");(!rs||!rs.plugin)&&qr(P,1,28,"TeeChannel required")}IF(vt,Gi,P),Gi=null,w=!0,sn===$y.ACTIVE&&Va()},Nt.getChannels=function(){var vt=[];return tt&&Xr(tt,function(Rr){vt[Io](Rr)}),tr(vt)},Nt.track=function(vt){iI(Nt[fS](),function(){return"AppInsightsCore:track"},function(){vt===null&&(_a(vt),Yr("Invalid telemetry item")),!vt[Gy]&&ie(vt[Gy])&&(_a(vt),Yr("telemetry name required")),vt.iKey=vt.iKey||si,vt.time=vt.time||pS(new Date),vt.ver=vt.ver||"4.0",!We&&Nt[km]()&&sn===$y.ACTIVE?el()[Xl](vt):sn!==$y.INACTIVE&&L[pi]<=wa&&L[Io](vt)},function(){return{item:vt}},!vt.sync)},Nt[wb]=el,Nt[u0]=function(){return q||(q=new ffe(T.cfg),Nt[Zn]=q),q},Nt[Q5]=function(vt){Nt.getNotifyMgr()[Q5](vt)},Nt[lS]=function(vt){q&&q[lS](vt)},Nt.getCookieMgr=function(){return me||(me=cfe(T.cfg,Nt[kc])),me},Nt.setCookieMgr=function(vt){me!==vt&&(Xb(me,!1),me=vt)},Nt[fS]=function(){return K||le||Dc()},Nt.setPerfMgr=function(vt){K=vt},Nt.eventCnt=function(){return L[pi]},Nt.releaseQueue=function(){if(w&&L[pi]>0){var vt=L;L=[],sn===2?Xr(vt,function(Rr){Rr.iKey=Rr.iKey||si,el()[Xl](Rr)}):qr(P,2,20,"core init status is not active")}},Nt.pollInternalLogs=function(vt){return yt=vt||null,Qo=!1,Gt&&Gt[bb](),Yo(!0)};function qn(){_s=!0,ie(si)?(sn=$y.INACTIVE,qr(P,1,112,"ikey can't be resolved from promises")):sn=$y.ACTIVE,Va()}a(qn,"_setStatus");function Va(){w&&(Nt.releaseQueue(),Nt.pollInternalLogs())}a(Va,"_releaseQueues");function Yo(vt){if((!Gt||!Gt[Pm])&&!Qo){var Rr=vt||P&&P.queue[pi]>0;Rr&&(an||(an=!0,qu(T[Qg](function(Gn){var en=Gn.cfg.diagnosticLogInterval;(!en||!(en>0))&&(en=1e4);var Vn=!1;Gt&&(Vn=Gt[Pm],Gt[bb]()),Gt=P5(hI,en),Gt.unref(),Gt[Pm]=Vn}))),Gt[Pm]=!0)}return Gt}a(Yo,"_startLogPoller"),Nt[wW]=function(){Qo=!0,Gt&&Gt[bb](),hI()},YL(Nt,function(){return Ye},["addTelemetryInitializer"]),Nt[b1]=function(vt,Rr,Gn){vt===void 0&&(vt=!0),w||Yr(Hi),We&&Yr(Un);var en={reason:50,isAsync:vt,flushComplete:!1},Vn;vt&&!Rr&&(Vn=Pb(function(Js){Rr=Js}));var rs=S(Hm(),Nt);rs[U5](function(){jt.run(Nt[kc]),n$([me,q,P],vt,function(){pt(),Rr&&Rr(en)})},Nt);function us(Js){en.flushComplete=Js,We=!0,_t.run(rs,en),Nt[wW](),rs[Xl](en)}return a(us,"_doUnload"),hI(),zg(vt,us,6,Gn),Vn},Nt[Tb]=nu,Nt.addPlugin=function(vt,Rr,Gn,en){if(!vt){en&&en(!1),AI(Qr);return}var Vn=nu(vt[jy]);if(Vn&&!Rr){en&&en(!1),AI("Plugin ["+vt[jy]+"] is already loaded!");return}var rs={reason:16};function us(sp){ke[Io](vt),rs.added=[vt],za(rs),en&&en(!0)}if(a(us,"_addPlugin"),Vn){var Js=[Vn.plugin],Sd={reason:2,isAsync:!!Gn};pf(Js,Sd,function(sp){sp?(rs.removed=Js,rs.reason|=32,us()):en&&en(!1)})}else us()},Nt.updateCfg=function(vt,Rr){Rr===void 0&&(Rr=!0);var Gn;if(Nt[km]()){Gn={reason:1,cfg:T.cfg,oldCfg:w5({},T.cfg),newConfig:w5({},vt),merge:Rr},vt=Gn.newConfig;var en=T.cfg;vt[Db]=en[Db],vt[Wg]=en[Wg]}T._block(function(Vn){var rs=Vn.cfg;b4(Vn,rs,vt,Rr),Rr||ue(rs,function(us){$e(vt,us)||Vn.set(rs,us,tp)}),Vn.setDf(rs,Jc)},!0),T.notify(),Gn&&Kg(Gn)},Nt.evtNamespace=function(){return at},Nt.flush=zg,Nt.getTraceCtx=function(vt){return Dr||(Dr=hfe()),Dr},Nt.setTraceCtx=function(vt){Dr=vt||null},Nt.addUnloadHook=qu,mS(Nt,"addUnloadCb",function(){return _t},"add"),Nt.onCfgChange=function(vt){var Rr;return w?Rr=Gg(T.cfg,vt,Nt[kc]):Rr=yfe(Gi,vt),E$(Rr)},Nt.getWParam=function(){return Ia()||T.cfg.enableWParam?0:-1};function ru(){var vt={};Ko=[];var Rr=a(function(Gn){Gn&&Xr(Gn,function(en){if(en[jy]&&en[_b]&&!vt[en.identifier]){var Vn=en[jy]+"="+en[_b];Ko[Io](Vn),vt[en.identifier]=en}})},"_addPluginVersions");Rr(tt),Ue&&Xr(Ue,function(Gn){Rr(Gn)}),Rr(ke)}a(ru,"_setPluginVersions");function pt(){w=!1,T=op({},Jc,Nt[kc]),T.cfg[_W]=1,Ge(Nt,"config",{g:a(function(){return T.cfg},"g"),s:a(function(Rr){Nt.updateCfg(Rr,!1)},"s")}),Ge(Nt,"pluginVersionStringArr",{g:a(function(){return Ko||ru(),Ko},"g")}),Ge(Nt,"pluginVersionString",{g:a(function(){return _n||(Ko||ru(),_n=Ko.join(";")),_n||qi},"g")}),Ge(Nt,"logger",{g:a(function(){return P||(P=new TS(T.cfg),T[kc]=P),P},"g"),s:a(function(Rr){T[kc]=Rr,P!==Rr&&(Xb(P,!1),P=Rr)},"s")}),Nt[kc]=new TS(T.cfg),Vi=[];var vt=Nt.config[Db]||[];vt.splice(0,vt[pi]),Jf(vt,Vi),Ye=new ni,L=[],Xb(q,!1),q=null,K=null,le=null,Xb(me,!1),me=null,Ee=null,ke=[],Ue=null,tt=null,We=!1,yt=null,at=jg("AIBaseCore",!0),_t=pe(),Dr=null,si=null,jt=_e(),Gi=[],_n=null,Ko=null,Qo=!1,Gt=null,an=!1,sn=0,zi=null,wa=null,_s=!1}a(pt,"_initDefaults");function el(){var vt=sI(Hm(),T.cfg,Nt);return vt[U5](Yo),vt}a(el,"_createTelCtx");function za(vt){var Rr=kS(Nt[kc],Xde,ke);Ee=null,_n=null,Ko=null,tt=(Ue||[])[0]||[],tt=vF(Jf(tt,Rr[Wg]));var Gn=Jf(vF(Rr[Pc]),tt);Vi=tr(Gn);var en=Nt.config[Db]||[];en.splice(0,en[pi]),Jf(en,Vi);var Vn=el();tt&&tt[pi]>0&&CF(Vn[I1](tt),Gn),CF(Vn,Gn),vt&&Kg(vt)}a(za,"_initPluginChain");function nu(vt){var Rr=null,Gn=null,en=[];return Xr(Vi,function(Vn){if(Vn[jy]===vt&&Vn!==Ye)return Gn=Vn,-1;Vn.getChannel&&en[Io](Vn)}),!Gn&&en[pi]>0&&Xr(en,function(Vn){if(Gn=Vn.getChannel(vt),!Gn)return-1}),Gn&&(Rr={plugin:Gn,setEnabled:a(function(Vn){oC(Gn)[J5]=!Vn},"setEnabled"),isEnabled:a(function(){var Vn=oC(Gn);return!Vn[Dm]&&!Vn[J5]},"isEnabled"),remove:a(function(Vn,rs){Vn===void 0&&(Vn=!0);var us=[Gn],Js={reason:1,isAsync:Vn};pf(us,Js,function(Sd){Sd&&za({reason:32,removed:us}),rs&&rs(Sd)})},"remove")}),Rr}a(nu,"_getPlugin");function Hm(){if(!Ee){var vt=(Vi||[]).slice();Rc(vt,Ye)===-1&&vt[Io](Ye),Ee=M(vF(vt),T.cfg,Nt)}return Ee}a(Hm,"_getPluginChain");function pf(vt,Rr,Gn){if(vt&&vt[pi]>0){var en=M(vt,T.cfg,Nt),Vn=S(en,Nt);Vn[U5](function(){var rs=!1,us=[];Xr(ke,function(Sd,sp){bF(Sd,vt)?rs=!0:us[Io](Sd)}),ke=us,_n=null,Ko=null;var Js=[];Ue&&(Xr(Ue,function(Sd,sp){var Yg=[];Xr(Sd,function(Jg){bF(Jg,vt)?rs=!0:Yg[Io](Jg)}),Js[Io](Yg)}),Ue=Js),Gn&&Gn(rs),Yo()}),Vn[Xl](Rr)}else Gn(!1)}a(pf,"_removePlugins");function hI(){if(P&&P.queue){var vt=P.queue.slice(0);P.queue[pi]=0,Xr(vt,function(Rr){var Gn={name:yt||"InternalMessageId: "+Rr[q5],iKey:si,time:pS(new Date),baseType:m4.dataType,baseData:{message:Rr[T1]}};Nt.track(Gn)})}}a(hI,"_flushInternalLogs");function zg(vt,Rr,Gn,en){var Vn=1,rs=!1,us=null;en=en||5e3;function Js(){Vn--,rs&&Vn===0&&(us&&us[bb](),us=null,Rr&&Rr(rs),Rr=null)}if(a(Js,"doCallback"),tt&&tt[pi]>0){var Sd=el()[I1](tt);Sd.iterate(function(sp){if(sp.flush){Vn++;var Yg=!1;sp.flush(vt,function(){Yg=!0,Js()},Gn)||Yg||(vt&&us==null?us=qy(function(){us=null,Js()},en):Js())}})}return rs=!0,Js(),!0}a(zg,"_flushChannels");function gI(){var vt;qu(T[Qg](function(Rr){var Gn=Rr.cfg.enablePerfMgr;if(Gn){var en=Rr.cfg[f0];(vt!==en||!vt)&&(en||(en=aI),UW(Rr.cfg,f0,en),vt=en,le=null),!K&&!le&&Qe(en)&&(le=en(Nt,Nt[u0]()))}else le=null,vt=null}))}a(gI,"_initPerfManager");function Kg(vt){var Rr=D(Hm(),Nt);Rr[U5](Yo),(!Nt._updateHook||Nt._updateHook(Rr,vt)!==!0)&&Rr[Xl](vt)}a(Kg,"_doUpdate");function AI(vt){var Rr=Nt[kc];Rr?(qr(Rr,2,73,vt),Yo()):Yr(vt)}a(AI,"_logOrThrowError");function _a(vt){var Rr=Nt[u0]();Rr&&Rr[Mb]([vt],2)}a(_a,"_notifyInvalidEvent");function qu(vt){jt.add(vt)}a(qu,"_addUnloadHook")})}return a(x,"AppInsightsCore"),x.__ieDyn=1,x}();function Zr(x,T){try{if(x&&x!==""){var w=df().parse(x);if(w&&w[SW]&&w[SW]>=w.itemsAccepted&&w.itemsReceived-w.itemsAccepted===w.errors[pi])return w}}catch(P){qr(T,1,43,"Cannot parse the response. "+(P[Gy]||qt(P)),{response:x})}return null}a(Zr,"parseResponse");var En="",xs="NoResponseBody",Xc="&"+xs+"=true",Ga="POST",Zc=function(){function x(){var T=0,w,P,L,q,K,le,me,Ee,ke,Ue,tt,We,Ye,yt;Ou(x,this,function(at,_t){var jt=!0;_s(),at[cS]=function(Gt,an){L=an,P&&qr(L,1,28,"Sender is already initialized"),at.SetConfig(Gt),P=!0},at._getDbgPlgTargets=function(){return[P,q,le,w]},at.SetConfig=function(Gt){try{if(K=Gt.senderOnCompleteCallBack||{},le=!!Gt.disableCredentials,me=Gt.fetchCredentials,q=!!Gt.isOneDs,w=!!Gt.enableSendPromise,ke=!!Gt.disableXhr,Ue=!!Gt.disableBeacon,tt=!!Gt.disableBeaconSync,yt=Gt.timeWrapper,Ye=!!Gt.addNoResponse,We=!!Gt.disableFetchKeepAlive,Ee={sendPOST:sn},q||(jt=!1),le){var an=Hb();an&&an.protocol&&an.protocol[vb]()==="file:"&&(jt=!1)}return!0}catch{}return!1},at.getSyncFetchPayload=function(){return T},at.getSenderInst=function(Gt,an){return Gt&&Gt[pi]?Gi(Gt,an):null},at.getFallbackInst=function(){return Ee},at[H5]=function(Gt,an){_s()};function cr(Gt,an){Vi(an,200,{},Gt)}a(cr,"_onSuccess");function Dr(Gt,an){qr(L,2,26,"Failed to send telemetry.",{message:Gt}),Vi(an,400,{})}a(Dr,"_onError");function si(Gt){Dr("No endpoint url is provided for the batch",Gt)}a(si,"_onNoPayloadUrl");function Gi(Gt,an){for(var Qo=0,Nt=null,qn=0;Nt==null&&qn<Gt[pi];)Qo=Gt[qn],!ke&&Qo===1?nF()?Nt=wa:iF()&&(Nt=sn):Qo===2&&CS(an)&&(!an||!We)?Nt=zi:Qo===3&&Zy()&&(an?!tt:!Ue)&&(Nt=_n),qn++;return Nt?{_transport:Qo,_isSync:an,sendPOST:Nt}:null}a(Gi,"_getSenderInterface");function Vi(Gt,an,Qo,Nt){try{Gt&&Gt(an,Qo,Nt)}catch{}}a(Vi,"_doOnComplete");function Ko(Gt,an){var Qo=Sc(),Nt=Gt[qg];if(!Nt)return si(an),!0;Nt=Gt[qg]+(Ye?Xc:En);var qn=Gt[Sb],Va=q?qn:new Blob([qn],{type:"text/plain;charset=UTF-8"}),Yo=Qo.sendBeacon(Nt,Va);return Yo}a(Ko,"_doBeaconSend");function _n(Gt,an,Qo){var Nt=Gt[Sb];try{if(Nt)if(Ko(Gt,an))cr(En,an);else{var qn=K&&K.beaconOnRetry;qn&&Qe(qn)?qn(Gt,an,Ko):(Ee&&Ee.sendPOST(Gt,an,!0),qr(L,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Va){q&&h4(L,"Failed to send telemetry using sendBeacon API. Ex:"+qt(Va)),Vi(an,q?0:400,{},En)}}a(_n,"_beaconSender");function sn(Gt,an,Qo){var Nt,qn,Va,Yo=Gt[$L]||{};!Qo&&w&&(Nt=Pb(function(za,nu){qn=za,Va=nu})),q&&Qo&&Gt.disableXhrSync&&(Qo=!1);var ru=Gt[qg];if(!ru){si(an),qn&&qn(!1);return}var pt=ZL(Ga,ru,jt,!0,Qo,Gt[Hg]);q||pt.setRequestHeader("Content-type","application/json"),Xr(wt(Yo),function(za){pt.setRequestHeader(za,Yo[za])}),pt.onreadystatechange=function(){q||(el(pt),pt.readyState===4&&qn&&qn(!0))},pt.onload=function(){q&&el(pt)};function el(za){var nu=K&&K.xhrOnComplete,Hm=nu&&Qe(nu);if(Hm)nu(za,an,Gt);else{var pf=n4(za);Vi(an,za[uS],P1(za,q),pf)}}return a(el,"_doOnReadyFunc"),pt.onerror=function(za){Vi(an,q?pt[uS]:400,P1(pt,q),q?En:i4(pt)),Va&&Va(za)},pt.ontimeout=function(){Vi(an,q?pt[uS]:500,P1(pt,q),q?En:i4(pt)),qn&&qn(!1)},pt.send(Gt[Sb]),Nt}a(sn,"_xhrSender");function zi(Gt,an,Qo){var Nt,qn=Gt[qg],Va=Gt[Sb],Yo=q?Va:new Blob([Va],{type:"application/json"}),ru,pt,el,za=new Headers,nu=Va[pi],Hm=!1,pf=!1,hI=Gt[$L]||{},zg=(Nt={method:Ga,body:Yo},Nt[i$]=!0,Nt);Gt.headers&&wt(Gt.headers)[pi]>0&&(Xr(wt(hI),function(_a){za.append(_a,hI[_a])}),zg[$L]=za),me?zg.credentials=me:jt&&q&&(zg.credentials="include"),Qo&&(zg.keepalive=!0,T+=nu,q?Gt._sendReason===2&&(Hm=!0,Ye&&(qn+=Xc)):Hm=!0);var gI=new Request(qn,zg);try{gI[i$]=!0}catch{}if(!Qo&&w&&(ru=Pb(function(_a,qu){pt=_a,el=qu})),!qn){si(an),pt&&pt(!1);return}function Kg(_a){Vi(an,q?0:400,{},q?En:_a)}a(Kg,"_handleError");function AI(_a,qu,vt){var Rr=_a[uS],Gn=K.fetchOnComplete;Gn&&Qe(Gn)?Gn(_a,an,vt||En,qu):Vi(an,Rr,{},vt||En)}a(AI,"_onFetchComplete");try{ep(fetch(q?qn:gI,q?zg:null),function(_a){if(Qo&&(T-=nu,nu=0),!pf)if(pf=!0,_a.rejected)Kg(_a.reason&&_a.reason[T1]),el&&el(_a.reason);else{var qu=_a[Ib];try{!q&&!qu.ok?(Kg(qu.statusText),pt&&pt(!1)):q&&!qu.body?(AI(qu,null,En),pt&&pt(!0)):ep(qu.text(),function(vt){AI(qu,Gt,vt[Ib]),pt&&pt(!0)})}catch(vt){Kg(qt(vt)),el&&el(vt)}}})}catch(_a){pf||(Kg(qt(_a)),el&&el(_a))}return Hm&&!pf&&(pf=!0,Vi(an,200,{}),pt&&pt(!0)),q&&!pf&&Gt[Hg]>0&&yt&&yt.set(function(){pf||(pf=!0,Vi(an,500,{}),pt&&pt(!0))},Gt[Hg]),ru}a(zi,"_doFetchSender");function wa(Gt,an,Qo){var Nt=Ks(),qn=new XDomainRequest,Va=Gt[Sb];qn.onload=function(){var za=n4(qn),nu=K&&K.xdrOnComplete;nu&&Qe(nu)?nu(qn,an,Gt):Vi(an,200,{},za)},qn.onerror=function(){Vi(an,400,{},q?En:HW(qn))},qn.ontimeout=function(){Vi(an,500,{})},qn.onprogress=function(){};var Yo=Nt&&Nt.location&&Nt.location.protocol||"",ru=Gt[qg];if(!ru){si(an);return}if(!q&&ru.lastIndexOf(Yo,0)!==0){var pt="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";qr(L,2,40,". "+pt),Dr(pt,an);return}var el=q?ru:ru[Ky](/^(https?:)/,"");qn.open(Ga,el),Gt[Hg]&&(qn[Hg]=Gt[Hg]),qn.send(Va),q&&Qo?yt&&yt.set(function(){qn.send(Va)},0):qn.send(Va)}a(wa,"_xdrSender");function _s(){T=0,P=!1,w=!1,L=null,q=null,K=null,le=null,me=null,Ee=null,ke=!1,Ue=!1,tt=!1,We=!1,Ye=!1,yt=null}a(_s,"_initDefaults")})}return a(x,"SenderPostManager"),x.__ieDyn=1,x}(),N1="on",sC="attachEvent",cI="addEventListener",b$="detachEvent",I$="removeEventListener",I4="events";jg("aiEvtPageHide"),jg("aiEvtPageShow");var Cfe=/\.[\.]+/g,BDe=/[\.]+$/,ATt=1,T$=KW("events"),yTt=/^([^.]*)(?:\.(.+)|)/;function NDe(x){return x&&x[Ky]?x[Ky](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,qi):x}a(NDe,"_normalizeNamespace");function vfe(x,T){if(T){var w=qi;Xe(T)?(w=qi,Xr(T,function(L){L=NDe(L),L&&(L[0]!=="."&&(L="."+L),w+=L)})):w=NDe(T),w&&(w[0]!=="."&&(w="."+w),x=(x||qi)+w)}var P=yTt.exec(x||qi)||[];return{type:P[1],ns:(P[2]||qi).replace(Cfe,".").replace(BDe,qi)[zy](".").sort().join(".")}}a(vfe,"_getEvtNamespace");function MDe(x,T,w){w===void 0&&(w=!0);var P=T$.get(x,I4,{},w),L=P[T];return L||(L=P[T]=[]),L}a(MDe,"_getRegisteredEvents");function LDe(x,T,w,P){x&&T&&T[Qu]&&(x[I$]?x[I$](T[Qu],w,P):x[b$]&&x[b$](N1+T[Qu],w))}a(LDe,"_doDetach");function CTt(x,T,w,P){var L=!1;return x&&T&&T[Qu]&&w&&(x[cI]?(x[cI](T[Qu],w,P),L=!0):x[sC]&&(x[sC](N1+T[Qu],w),L=!0)),L}a(CTt,"_doAttach");function FDe(x,T,w,P){for(var L=T[pi];L--;){var q=T[L];q&&(!w.ns||w.ns===q[qL].ns)&&(!P||P(q))&&(LDe(x,q[qL],q.handler,q.capture),T[Eb](L,1))}}a(FDe,"_doUnregister");function vTt(x,T,w){if(T[Qu])FDe(x,MDe(x,T[Qu]),T,w);else{var P=T$.get(x,I4,{});ue(P,function(L,q){FDe(x,q,T,w)}),wt(P)[pi]===0&&T$.kill(x,I4)}}a(vTt,"_unregisterEvents");function ODe(x,T){var w;return T?(Xe(T)?w=[x].concat(T):w=[x,T],w=vfe("xx",w).ns[zy](".")):w=x,w}a(ODe,"mergeEvtNamespace");function QDe(x,T,w,P,L){L===void 0&&(L=!1);var q=!1;if(x)try{var K=vfe(T,P);if(q=CTt(x,K,w,L),q&&T$.accept(x)){var le={guid:ATt++,evtName:K,handler:w,capture:L};MDe(x,K.type)[Io](le)}}catch{}return q}a(QDe,"eventOn");function xTt(x,T,w,P,L){if(L===void 0&&(L=!1),x)try{var q=vfe(T,P),K=!1;vTt(x,q,function(le){return q.ns&&!w||le.handler===w?(K=!0,!0):!1}),K||LDe(x,q,w,L)}catch{}}a(xTt,"eventOff");var UDe="sampleRate",xfe="ProcessLegacy",qDe="http.method",Efe="https://dc.services.visualstudio.com",T4="/v2/track",lI="not_specified",HDe=Mde({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),w$="split",Ni="length",bfe="toLowerCase",PS="ingestionendpoint",TF="toString",WDe="removeItem",_$="message",ETt="count",Ife="stringify",Tfe="pathname",wF="match",uI="name",aC="properties",M1="measurements",S$="sizeInBytes",R$="typeName",_F="exceptions",SF="severityLevel",wfe="problemGroup",w4="parsedStack",k$="hasFullStack",P$="assembly",L1="fileName",_4="line",D$="aiDataContract",B$="duration";function $De(x,T,w){var P=T[Ni],L=bTt(x,T);if(L[Ni]!==P){for(var q=0,K=L;w[K]!==void 0;)q++,K=ve(L,0,147)+wTt(q);L=K}return L}a($De,"dataSanitizeKeyAndAddUniqueness");function bTt(x,T){var w;return T&&(T=so(Ot(T)),T[Ni]>150&&(w=ve(T,0,150),qr(x,2,57,"name is too long.  It has been truncated to 150 characters.",{name:T},!0))),w||T}a(bTt,"dataSanitizeKey");function wd(x,T,w){w===void 0&&(w=1024);var P;return T&&(w=w||1024,T=so(Ot(T)),T[Ni]>w&&(P=ve(T,0,w),qr(x,2,61,"string value is too long. It has been truncated to "+w+" characters.",{value:T},!0))),P||T}a(wd,"dataSanitizeString");function _fe(x,T){return GDe(x,T,2048,66)}a(_fe,"dataSanitizeUrl");function jDe(x,T){var w;return T&&T[Ni]>32768&&(w=ve(T,0,32768),qr(x,2,56,"message is too long, it has been truncated to 32768 characters.",{message:T},!0)),w||T}a(jDe,"dataSanitizeMessage");function ITt(x,T){var w;if(T){var P=""+T;P[Ni]>32768&&(w=ve(P,0,32768),qr(x,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:T},!0))}return w||T}a(ITt,"dataSanitizeException");function DS(x,T){if(T){var w={};ue(T,function(P,L){if(we(L)&&Wb())try{L=df()[Ife](L)}catch(q){qr(x,2,49,"custom property is not valid",{exception:q},!0)}L=wd(x,L,8192),P=$De(x,P,w),w[P]=L}),T=w}return T}a(DS,"dataSanitizeProperties");function BS(x,T){if(T){var w={};ue(T,function(P,L){P=$De(x,P,w),w[P]=L}),T=w}return T}a(BS,"dataSanitizeMeasurements");function TTt(x,T){return T&&GDe(x,T,128,69)[TF]()}a(TTt,"dataSanitizeId");function GDe(x,T,w,P){var L;return T&&(T=so(Ot(T)),T[Ni]>w&&(L=ve(T,0,w),qr(x,2,P,"input is too long, it has been truncated to "+w+" characters.",{data:T},!0))),L||T}a(GDe,"dataSanitizeInput");function wTt(x){var T="00"+x;return Te(T,T[Ni]-3)}a(wTt,"dsPadNumber");var VDe=_c()||{},zDe=0,_Tt=[null,null,null,null,null];function STt(x){var T=zDe,w=_Tt,P=w[T];return VDe.createElement?w[T]||(P=w[T]=VDe.createElement("a")):P={host:RTt(x,!0)},P.href=x,T++,T>=w[Ni]&&(T=0),zDe=T,P}a(STt,"urlParseUrl");function RTt(x,T){var w=kTt(x,T)||"";if(w){var P=w[wF](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(P!=null&&P[Ni]>3&&ye(P[2])&&P[2][Ni]>0)return P[2]+(P[3]||"")}return w}a(RTt,"urlParseHost");function kTt(x,T){var w=null;if(x){var P=x[wF](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(P!=null&&P[Ni]>2&&ye(P[2])&&P[2][Ni]>0&&(w=P[2]||"",T&&P[Ni]>2)){var L=(P[1]||"")[bfe](),q=P[3]||"";(L==="http"&&q===":80"||L==="https"&&q===":443")&&(q=""),w+=q}}return w}a(kTt,"urlParseFullHost");var PTt=[Efe+T4,"https://breeze.aimon.applicationinsights.io"+T4,"https://dc-int.services.visualstudio.com"+T4];function KDe(x){return Rc(PTt,x[bfe]())!==-1}a(KDe,"isInternalApplicationInsightsEndpoint");function DTt(x,T,w,P){var L,q=P,K=P;if(T&&T[Ni]>0){var le=STt(T);if(L=le.host,!q)if(le[Tfe]!=null){var me=le.pathname[Ni]===0?"/":le[Tfe];me.charAt(0)!=="/"&&(me="/"+me),K=le[Tfe],q=wd(x,w?w+" "+me:me)}else q=wd(x,T)}else L=P,q=P;return{target:L,name:q,data:K}}a(DTt,"AjaxHelperParseDependencyPath");var Sfe=F5({LocalStorage:0,SessionStorage:1}),S4=void 0,YDe="";function JDe(x){try{if(ie(Ei()))return null;var T=new Date()[TF](),w=ts(x===Sfe.LocalStorage?"localStorage":"sessionStorage"),P=YDe+T;w.setItem(P,T);var L=w.getItem(P)!==T;if(w[WDe](P),!L)return w}catch{}return null}a(JDe,"_getVerifiedStorageObject");function Rfe(){return XDe()?JDe(Sfe.SessionStorage):null}a(Rfe,"_getSessionStorageObject");function BTt(x){YDe=x||""}a(BTt,"utlSetStoragePrefix");function XDe(x){return(x||S4===void 0)&&(S4=!!JDe(Sfe.SessionStorage)),S4}a(XDe,"utlCanUseSessionStorage");function NTt(x,T){var w=Rfe();if(w!==null)try{return w.getItem(T)}catch(P){S4=!1,qr(x,2,2,"Browser failed read of session storage. "+Rl(P),{exception:qt(P)})}return null}a(NTt,"utlGetSessionStorage");function MTt(x,T,w){var P=Rfe();if(P!==null)try{return P.setItem(T,w),!0}catch(L){S4=!1,qr(x,2,4,"Browser failed write to session storage. "+Rl(L),{exception:qt(L)})}return!1}a(MTt,"utlSetSessionStorage");function LTt(x,T){var w=Rfe();if(w!==null)try{return w[WDe](T),!0}catch(P){S4=!1,qr(x,2,6,"Browser failed removal of session storage item. "+Rl(P),{exception:qt(P)})}return!1}a(LTt,"utlRemoveSessionStorage");var FTt=";",OTt="=";function kfe(x){if(!x)return{};var T=x[w$](FTt),w=IL(T,function(L,q){var K=q[w$](OTt);if(K[Ni]===2){var le=K[0][bfe](),me=K[1];L[le]=me}return L},{});if(wt(w)[Ni]>0){if(w.endpointsuffix){var P=w.location?w.location+".":"";w[PS]=w[PS]||"https://"+P+"dc."+w.endpointsuffix}w[PS]=w[PS]||Efe,xW(w[PS],"/")&&(w[PS]=w[PS].slice(0,-1))}return w}a(kfe,"parseConnectionString");var QTt=function(){function x(T,w,P){var L=this,q=this;q.ver=1,q.sampleRate=100,q.tags={},q[uI]=wd(T,P)||lI,q.data=w,q.time=pS(new Date),q[D$]={time:1,iKey:1,name:1,sampleRate:a(function(){return L.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return a(x,"Envelope"),x}(),R4=function(){function x(T,w,P,L){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var q=this;q.ver=2,q[uI]=wd(T,w)||lI,q[aC]=DS(T,P),q[M1]=BS(T,L)}return a(x,"Event"),x.envelopeType="Microsoft.ApplicationInsights.{0}.Event",x.dataType="EventData",x}(),UTt=58,qTt=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,HTt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,WTt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,$Tt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,jTt=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,GTt=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,VTt=/([^\(\s\n]+):([0-9]+)$/,ZDe="<no_method>",k4="error",qm="stack",Pfe="stackDetails",eBe="errorSrc",Dfe="message",tBe="description",rBe=[{re:HTt,len:5,m:1,fn:2,ln:3,col:4},{chk:KTt,pre:zTt,re:WTt,len:4,m:1,fn:2,ln:3},{re:$Tt,len:3,m:1,fn:2,hdl:cBe},{re:jTt,len:2,fn:1,hdl:cBe}];function zTt(x){return x.replace(/(\(anonymous\))/,"<anonymous>")}a(zTt,"_scrubAnonymous");function KTt(x){return Lg(x,"[native")<0}a(KTt,"_ignoreNative");function Bfe(x,T){var w=x;return w&&!ye(w)&&(JSON&&JSON[Ife]?(w=JSON[Ife](x),T&&(!w||w==="{}")&&(Qe(x[TF])?w=x[TF]():w=""+x)):w=""+x+" - (Missing JSON.stringify)"),w||""}a(Bfe,"_stringify");function nBe(x,T){var w=x;return x&&(w&&!ye(w)&&(w=x[Dfe]||x[tBe]||w),w&&!ye(w)&&(w=Bfe(w,!0)),x.filename&&(w=w+" @"+(x.filename||"")+":"+(x.lineno||"?")+":"+(x.colno||"?"))),T&&T!=="String"&&T!=="Object"&&T!=="Error"&&Lg(w||"",T)===-1&&(w=T+": "+w),w||""}a(nBe,"_formatMessage");function YTt(x){try{if(we(x))return"hasFullStack"in x&&"typeName"in x}catch{}return!1}a(YTt,"_isExceptionDetailsInternal");function JTt(x){try{if(we(x))return"ver"in x&&"exceptions"in x&&"properties"in x}catch{}return!1}a(JTt,"_isExceptionInternal");function iBe(x){return x&&x.src&&ye(x.src)&&x.obj&&Xe(x.obj)}a(iBe,"_isStackDetails");function NS(x){var T=x||"";ye(T)||(ye(T[qm])?T=T[qm]:T=""+T);var w=T[w$](`
`);return{src:T,obj:w}}a(NS,"_convertStackObj");function XTt(x){for(var T=[],w=x[w$](`
`),P=0;P<w[Ni];P++){var L=w[P];w[P+1]&&(L+="@"+w[P+1],P++),T.push(L)}return{src:x,obj:T}}a(XTt,"_getOperaStack");function oBe(x){var T=null;if(x)try{if(x[qm])T=NS(x[qm]);else if(x[k4]&&x[k4][qm])T=NS(x[k4][qm]);else if(x.exception&&x.exception[qm])T=NS(x.exception[qm]);else if(iBe(x))T=x;else if(iBe(x[Pfe]))T=x[Pfe];else if(Ks()&&Ks().opera&&x[Dfe])T=XTt(x[_$]);else if(x.reason&&x.reason[qm])T=NS(x.reason[qm]);else if(ye(x))T=NS(x);else{var w=x[Dfe]||x[tBe]||"";ye(x[eBe])&&(w&&(w+=`
`),w+=" from "+x[eBe]),w&&(T=NS(w))}}catch(P){T=NS(P)}return T||{src:"",obj:null}}a(oBe,"_getStackFromErrorObj");function ZTt(x){var T="";return x&&(x.obj?T=x.obj.join(`
`):T=x.src||""),T}a(ZTt,"_formatStackTrace");function ewt(x){var T,w=x.obj;if(w&&w[Ni]>0){T=[];var P=0,L=!1,q=0;Xr(w,function(yt){if(L||iwt(yt)){var at=Ot(yt);L=!0;var _t=owt(at,P);_t&&(q+=_t[S$],T.push(_t),P++)}});var K=32*1024;if(q>K)for(var le=0,me=T[Ni]-1,Ee=0,ke=le,Ue=me;le<me;){var tt=T[le][S$],We=T[me][S$];if(Ee+=tt+We,Ee>K){var Ye=Ue-ke+1;T.splice(ke,Ye);break}ke=le,Ue=me,le++,me--}}return T}a(ewt,"_parseStack");function N$(x){var T="";if(x&&(T=x.typeName||x[uI]||"",!T))try{var w=/function (.{1,200})\(/,P=w.exec(x.constructor[TF]());T=P&&P[Ni]>1?P[1]:""}catch{}return T}a(N$,"_getErrorType");function Nfe(x){if(x)try{if(!ye(x)){var T=N$(x),w=Bfe(x,!1);return(!w||w==="{}")&&(x[k4]&&(x=x[k4],T=N$(x)),w=Bfe(x,!0)),Lg(w,T)!==0&&T!=="String"?T+":"+w:w}}catch{}return""+(x||"")}a(Nfe,"_formatErrorCode");var M$=function(){function x(T,w,P,L,q,K){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var le=this;le.ver=2,JTt(w)?(le[_F]=w[_F]||[],le[aC]=w[aC],le[M1]=w[M1],w[SF]&&(le[SF]=w[SF]),w.id&&(le.id=w.id,w[aC].id=w.id),w[wfe]&&(le[wfe]=w[wfe]),ie(w.isManual)||(le.isManual=w.isManual)):(P||(P={}),K&&(P.id=K),le[_F]=[sBe(T,w,P)],le[aC]=DS(T,P),le[M1]=BS(T,L),q&&(le[SF]=q),K&&(le.id=K))}return a(x,"Exception"),x.CreateAutoException=function(T,w,P,L,q,K,le,me){var Ee=N$(q||K||T);return{message:nBe(T,Ee),url:w,lineNumber:P,columnNumber:L,error:Nfe(q||K||T),evt:Nfe(K||T),typeName:Ee,stackDetails:oBe(le||q||K),errorSrc:me}},x.CreateFromInterface=function(T,w,P,L){var q=w[_F]&&Bg(w[_F],function(le){return nwt(T,le)}),K=new x(T,Og(Og({},w),{exceptions:q}),P,L);return K},x.prototype.toInterface=function(){var T=this,w=T.exceptions,P=T.properties,L=T.measurements,q=T.severityLevel,K=T.problemGroup,le=T.id,me=T.isManual,Ee=w instanceof Array&&Bg(w,function(ke){return ke.toInterface()})||void 0;return{ver:"4.0",exceptions:Ee,severityLevel:q,properties:P,measurements:L,problemGroup:K,id:le,isManual:me}},x.CreateSimpleException=function(T,w,P,L,q,K){var le;return{exceptions:[(le={},le[k$]=!0,le.message=T,le.stack=q,le.typeName=w,le)]}},x.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",x.dataType="ExceptionData",x.formatError=Nfe,x}(),twt=tr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function rwt(){var x=this,T=Xe(x[w4])&&Bg(x[w4],function(P){return awt(P)}),w={id:x.id,outerId:x.outerId,typeName:x[R$],message:x[_$],hasFullStack:x[k$],stack:x[qm],parsedStack:T||void 0};return w}a(rwt,"_toInterface");function sBe(x,T,w){var P,L,q,K,le,me,Ee,ke;if(YTt(T))K=T[R$],le=T[_$],Ee=T[qm],ke=T[w4]||[],me=T[k$];else{var Ue=T,tt=Ue&&Ue.evt;Et(Ue)||(Ue=Ue[k4]||tt||Ue),K=wd(x,N$(Ue))||lI,le=jDe(x,nBe(T||Ue,K))||lI;var We=T[Pfe]||oBe(T);ke=ewt(We),Xe(ke)&&Bg(ke,function(Ye){Ye[P$]=wd(x,Ye[P$]),Ye[L1]=wd(x,Ye[L1])}),Ee=ITt(x,ZTt(We)),me=Xe(ke)&&ke[Ni]>0,w&&(w[R$]=w[R$]||K)}return P={},P[D$]=twt,P.id=L,P.outerId=q,P.typeName=K,P.message=le,P[k$]=me,P.stack=Ee,P.parsedStack=ke,P.toInterface=rwt,P}a(sBe,"_createExceptionDetails");function nwt(x,T){var w=Xe(T[w4])&&Bg(T[w4],function(L){return swt(L)})||T[w4],P=sBe(x,Og(Og({},T),{parsedStack:w}));return P}a(nwt,"_createExDetailsFromInterface");function aBe(x,T){var w=T[wF](GTt);if(w&&w[Ni]>=4)x[L1]=w[1],x[_4]=parseInt(w[2]);else{var P=T[wF](VTt);P&&P[Ni]>=3?(x[L1]=P[1],x[_4]=parseInt(P[2])):x[L1]=T}}a(aBe,"_parseFilename");function cBe(x,T,w){var P=x[L1];T.fn&&w&&w[Ni]>T.fn&&(T.ln&&w[Ni]>T.ln?(P=so(w[T.fn]||""),x[_4]=parseInt(so(w[T.ln]||""))||0):P=so(w[T.fn]||"")),P&&aBe(x,P)}a(cBe,"_handleFilename");function iwt(x){var T=!1;if(x&&ye(x)){var w=so(x);w&&(T=qTt.test(w))}return T}a(iwt,"_isStackFrame");var lBe=tr({level:1,method:1,assembly:0,fileName:0,line:0});function owt(x,T){var w,P;if(x&&ye(x)&&so(x)){P=(w={},w[D$]=lBe,w.level=T,w.assembly=so(x),w.method=ZDe,w.fileName="",w.line=0,w.sizeInBytes=0,w);for(var L=0;L<rBe[Ni];){var q=rBe[L];if(q.chk&&!q.chk(x))break;q.pre&&(x=q.pre(x));var K=x[wF](q.re);if(K&&K[Ni]>=q.len){q.m&&(P.method=so(K[q.m]||ZDe)),q.hdl?q.hdl(P,q,K):q.fn&&(q.ln?(P[L1]=so(K[q.fn]||""),P[_4]=parseInt(so(K[q.ln]||""))||0):aBe(P,K[q.fn]||""));break}L++}}return uBe(P)}a(owt,"_extractStackFrame");function swt(x){var T,w=(T={},T[D$]=lBe,T.level=x.level,T.method=x.method,T.assembly=x[P$],T.fileName=x[L1],T.line=x[_4],T.sizeInBytes=0,T);return uBe(w)}a(swt,"_stackFrameFromInterface");function uBe(x){var T=UTt;return x&&(T+=x.method[Ni],T+=x.assembly[Ni],T+=x.fileName[Ni],T+=x.level.toString()[Ni],T+=x.line.toString()[Ni],x[S$]=T),x}a(uBe,"_populateFrameSizeInBytes");function awt(x){return{level:x.level,method:x.method,assembly:x[P$],fileName:x[L1],line:x[_4]}}a(awt,"_parsedFrameToInterface");var cwt=function(){function x(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return a(x,"DataPoint"),x}(),RF=function(){function x(T,w,P,L,q,K,le,me,Ee){this.aiDataContract={ver:1,metrics:1,properties:0};var ke=this;ke.ver=2;var Ue=new cwt;Ue[ETt]=L>0?L:void 0,Ue.max=isNaN(K)||K===null?void 0:K,Ue.min=isNaN(q)||q===null?void 0:q,Ue[uI]=wd(T,w)||lI,Ue.value=P,Ue.stdDev=isNaN(le)||le===null?void 0:le,ke.metrics=[Ue],ke[aC]=DS(T,me),ke[M1]=BS(T,Ee)}return a(x,"Metric"),x.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",x.dataType="MetricData",x}(),kF="";function dBe(x){(isNaN(x)||x<0)&&(x=0),x=Sde(x);var T=kF+x%1e3,w=kF+Qy(x/1e3)%60,P=kF+Qy(x/(1e3*60))%60,L=kF+Qy(x/(1e3*60*60))%24,q=Qy(x/(1e3*60*60*24));return T=T[Ni]===1?"00"+T:T[Ni]===2?"0"+T:T,w=w[Ni]<2?"0"+w:w,P=P[Ni]<2?"0"+P:P,L=L[Ni]<2?"0"+L:L,(q>0?q+".":kF)+L+":"+P+":"+w+"."+T}a(dBe,"msToTimeSpan");var L$=function(){function x(T,w,P,L,q,K,le){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var me=this;me.ver=2,me.id=TTt(T,le),me.url=_fe(T,P),me[uI]=wd(T,w)||lI,isNaN(L)||(me[B$]=dBe(L)),me[aC]=DS(T,q),me[M1]=BS(T,K)}return a(x,"PageView"),x.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",x.dataType="PageviewData",x}(),F$=function(){function x(T,w,P,L,q,K,le,me,Ee,ke,Ue,tt){Ee===void 0&&(Ee="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var We=this;We.ver=2,We.id=w,We[B$]=dBe(q),We.success=K,We.resultCode=le+"",We.type=wd(T,Ee);var Ye=DTt(T,P,me,L);We.data=_fe(T,L)||Ye.data,We.target=wd(T,Ye.target),ke&&(We.target="".concat(We.target," | ").concat(ke)),We[uI]=wd(T,Ye[uI]),We[aC]=DS(T,Ue),We[M1]=BS(T,tt)}return a(x,"RemoteDependencyData"),x.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",x.dataType="RemoteDependencyData",x}(),O$=function(){function x(T,w,P,L,q){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var K=this;K.ver=2,w=w||lI,K[_$]=jDe(T,w),K[aC]=DS(T,L),K[M1]=BS(T,q),P&&(K[SF]=P)}return a(x,"Trace"),x.envelopeType="Microsoft.ApplicationInsights.{0}.Message",x.dataType="MessageData",x}(),Q$=function(){function x(T,w,P,L,q,K,le){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var me=this;me.ver=2,me.url=_fe(T,P),me[uI]=wd(T,w)||lI,me[aC]=DS(T,q),me[M1]=BS(T,K),le&&(me.domProcessing=le.domProcessing,me[B$]=le[B$],me.networkConnect=le.networkConnect,me.perfTotal=le.perfTotal,me.receivedResponse=le.receivedResponse,me.sentRequest=le.sentRequest)}return a(x,"PageViewPerformance"),x.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",x.dataType="PageviewPerformanceData",x}(),MS=function(){function x(T,w){this.aiDataContract={baseType:1,baseData:1},this.baseType=T,this.baseData=w}return a(x,"Data"),x}(),lwt=F5({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function dI(x){var T="ai."+x+".";return function(w){return T+w}}a(dI,"_aiNameFunc");var PF=dI("application"),Pl=dI("device"),U$=dI("location"),P4=dI("operation"),Mfe=dI("session"),fI=dI("user"),LS=dI("cloud"),DF=dI("internal"),fBe=function(x){aS(T,x);function T(){return x.call(this)||this}return a(T,"ContextTagKeys"),T}($de({applicationVersion:PF("ver"),applicationBuild:PF("build"),applicationTypeId:PF("typeId"),applicationId:PF("applicationId"),applicationLayer:PF("layer"),deviceId:Pl("id"),deviceIp:Pl("ip"),deviceLanguage:Pl("language"),deviceLocale:Pl("locale"),deviceModel:Pl("model"),deviceFriendlyName:Pl("friendlyName"),deviceNetwork:Pl("network"),deviceNetworkName:Pl("networkName"),deviceOEMName:Pl("oemName"),deviceOS:Pl("os"),deviceOSVersion:Pl("osVersion"),deviceRoleInstance:Pl("roleInstance"),deviceRoleName:Pl("roleName"),deviceScreenResolution:Pl("screenResolution"),deviceType:Pl("type"),deviceMachineName:Pl("machineName"),deviceVMName:Pl("vmName"),deviceBrowser:Pl("browser"),deviceBrowserVersion:Pl("browserVersion"),locationIp:U$("ip"),locationCountry:U$("country"),locationProvince:U$("province"),locationCity:U$("city"),operationId:P4("id"),operationName:P4("name"),operationParentId:P4("parentId"),operationRootId:P4("rootId"),operationSyntheticSource:P4("syntheticSource"),operationCorrelationVector:P4("correlationVector"),sessionId:Mfe("id"),sessionIsFirst:Mfe("isFirst"),sessionIsNew:Mfe("isNew"),userAccountAcquisitionDate:fI("accountAcquisitionDate"),userAccountId:fI("accountId"),userAgent:fI("userAgent"),userId:fI("id"),userStoreRegion:fI("storeRegion"),userAuthUserId:fI("authUserId"),userAnonymousUserAcquisitionDate:fI("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:fI("authUserAcquisitionDate"),cloudName:LS("name"),cloudRole:LS("role"),cloudRoleVer:LS("roleVer"),cloudRoleInstance:LS("roleInstance"),cloudEnvironment:LS("environment"),cloudLocation:LS("location"),cloudDeploymentUnit:LS("deploymentUnit"),internalNodeName:DF("nodeName"),internalSdkVersion:DF("sdkVersion"),internalAgentVersion:DF("agentVersion"),internalSnippet:DF("snippet"),internalSdkSrc:DF("sdkSrc")})),eu=new fBe;function pBe(x,T){xTt(x,null,null,T)}a(pBe,"_disableEvents");function uwt(x){var T=_c(),w=Sc(),P=!1,L=[],q=1;w&&!ie(w.onLine)&&!w.onLine&&(q=2);var K=0,le=tt(),me=ODe(jg("OfflineListener"),x);try{if(ke(Ks())&&(P=!0),T){var Ee=T.body||T;Ee.ononline&&ke(Ee)&&(P=!0)}}catch{P=!1}function ke(cr){var Dr=!1;return cr&&(Dr=QDe(cr,"online",yt,me),Dr&&QDe(cr,"offline",at,me)),Dr}a(ke,"_enableEvents");function Ue(){return le}a(Ue,"_isOnline");function tt(){return!(K===2||q===2)}a(tt,"calCurrentState");function We(){var cr=tt();le!==cr&&(le=cr,Xr(L,function(Dr){var si={isOnline:le,rState:q,uState:K};try{Dr(si)}catch{}}))}a(We,"listnerNoticeCheck");function Ye(cr){K=cr,We()}a(Ye,"setOnlineState");function yt(){q=1,We()}a(yt,"_setOnline");function at(){q=2,We()}a(at,"_setOffline");function _t(){var cr=Ks();if(cr&&P){if(pBe(cr,me),T){var Dr=T.body||T;j(Dr.ononline)||pBe(Dr,me)}P=!1}}a(_t,"_unload");function jt(cr){return L.push(cr),{rm:a(function(){var Dr=L.indexOf(cr);if(Dr>-1)return L.splice(Dr,1)},"rm")}}return a(jt,"addListener"),{isOnline:Ue,isListening:a(function(){return P},"isListening"),unload:_t,addListener:jt,setOnlineState:Ye}}a(uwt,"createOfflineListener");var dwt="AppInsightsChannelPlugin",FS="duration",Uu="tags",Lfe="deviceType",h0="data",F1="name",BF="traceID",Wi="length",NF="stringify",OS="measurements",cC="dataType",QS="envelopeType",US="toString",qS="enqueue",HS="count",O1="push",Ffe="emitLineDelimitedJson",D4="clear",q$="markAsSent",MF="clearSent",Ofe="bufferOverride",LF="BUFFER_KEY",pI="SENT_BUFFER_KEY",B4="concat",FF="MAX_BUFFER_SIZE",OF="triggerSend",_d="diagLog",Qfe="initialize",QF="_sender",UF="endpointUrl",qF="instrumentationKey",Ufe="customHeaders",mBe="maxBatchSizeInBytes",qfe="onunloadDisableBeacon",Hfe="isBeaconApiDisabled",hBe="alwaysUseXhrOverride",gBe="enableSessionStorageBuffer",lC="_buffer",ABe="onunloadDisableFetch",yBe="disableSendBeaconSplit",H$="getSenderInst",WS="_onError",Wfe="_onPartialSuccess",W$="_onSuccess",$fe="itemsReceived",jfe="itemsAccepted",Gfe="baseType",$$="sampleRate",fwt="getHashCodeScore",Vfe="baseType",Ta="baseData",tu="properties",CBe="true";function Bc(x,T,w){return Jy(x,T,w,de)}a(Bc,"_setValueIf");function pwt(x,T,w){var P=w[Uu]=w[Uu]||{},L=T.ext=T.ext||{},q=T[Uu]=T[Uu]||[],K=L.user;K&&(Bc(P,eu.userAuthUserId,K.authId),Bc(P,eu.userId,K.id||K.localId));var le=L.app;le&&Bc(P,eu.sessionId,le.sesId);var me=L.device;me&&(Bc(P,eu.deviceId,me.id||me.localId),Bc(P,eu[Lfe],me.deviceClass),Bc(P,eu.deviceIp,me.ip),Bc(P,eu.deviceModel,me.model),Bc(P,eu[Lfe],me[Lfe]));var Ee=T.ext.web;if(Ee){Bc(P,eu.deviceLanguage,Ee.browserLang),Bc(P,eu.deviceBrowserVersion,Ee.browserVer),Bc(P,eu.deviceBrowser,Ee.browser);var ke=w[h0]=w[h0]||{},Ue=ke[Ta]=ke[Ta]||{},tt=Ue[tu]=Ue[tu]||{};Bc(tt,"domain",Ee.domain),Bc(tt,"isManual",Ee.isManual?CBe:null),Bc(tt,"screenRes",Ee.screenRes),Bc(tt,"userConsent",Ee.userConsent?CBe:null)}var We=L.os;We&&(Bc(P,eu.deviceOS,We[F1]),Bc(P,eu.deviceOSVersion,We.osVer));var Ye=L.trace;Ye&&(Bc(P,eu.operationParentId,Ye.parentID),Bc(P,eu.operationName,wd(x,Ye[F1])),Bc(P,eu.operationId,Ye[BF]));for(var yt={},at=q[Wi]-1;at>=0;at--){var _t=q[at];ue(_t,function(cr,Dr){yt[cr]=Dr}),q.splice(at,1)}ue(q,function(cr,Dr){yt[cr]=Dr});var jt=Og(Og({},P),yt);jt[eu.internalSdkVersion]||(jt[eu.internalSdkVersion]=wd(x,"javascript:".concat(mwt.Version),64)),w[Uu]=JL(jt)}a(pwt,"_extractPartAExtensions");function mI(x,T,w){ie(x)||ue(x,function(P,L){ut(L)?w[P]=L:ye(L)?T[P]=L:Wb()&&(T[P]=df()[NF](L))})}a(mI,"_extractPropsAndMeasurements");function $S(x,T){ie(x)||ue(x,function(w,P){x[w]=P||T})}a($S,"_convertPropsUndefinedToCustomDefinedValue");function jS(x,T,w,P){var L=new QTt(x,P,T);Bc(L,"sampleRate",w[UDe]),(w[Ta]||{}).startTime&&(L.time=pS(w[Ta].startTime)),L.iKey=w.iKey;var q=w.iKey.replace(/-/g,"");return L[F1]=L[F1].replace("{0}",q),pwt(x,w,L),w[Uu]=w[Uu]||[],JL(L)}a(jS,"_createEnvelope");function GS(x,T){ie(T[Ta])&&qr(x,1,46,"telemetryItem.baseData cannot be null.")}a(GS,"EnvelopeCreatorInit");var mwt={Version:"3.3.6"};function hwt(x,T,w){GS(x,T);var P=T[Ta][OS]||{},L=T[Ta][tu]||{};mI(T[h0],L,P),ie(w)||$S(L,w);var q=T[Ta];if(ie(q))return h4(x,"Invalid input for dependency data"),null;var K=q[tu]&&q[tu][qDe]?q[tu][qDe]:"GET",le=new F$(x,q.id,q.target,q[F1],q[FS],q.success,q.responseCode,K,q.type,q.correlationContext,L,P),me=new MS(F$[cC],le);return jS(x,F$[QS],T,me)}a(hwt,"DependencyEnvelopeCreator");function vBe(x,T,w){GS(x,T);var P={},L={};T[Vfe]!==R4[cC]&&(P.baseTypeSource=T[Vfe]),T[Vfe]===R4[cC]?(P=T[Ta][tu]||{},L=T[Ta][OS]||{}):T[Ta]&&mI(T[Ta],P,L),mI(T[h0],P,L),ie(w)||$S(P,w);var q=T[Ta][F1],K=new R4(x,q,P,L),le=new MS(R4[cC],K);return jS(x,R4[QS],T,le)}a(vBe,"EventEnvelopeCreator");function gwt(x,T,w){GS(x,T);var P=T[Ta][OS]||{},L=T[Ta][tu]||{};mI(T[h0],L,P),ie(w)||$S(L,w);var q=T[Ta],K=M$.CreateFromInterface(x,q,L,P),le=new MS(M$[cC],K);return jS(x,M$[QS],T,le)}a(gwt,"ExceptionEnvelopeCreator");function Awt(x,T,w){GS(x,T);var P=T[Ta],L=P[tu]||{},q=P[OS]||{};mI(T[h0],L,q),ie(w)||$S(L,w);var K=new RF(x,P[F1],P.average,P.sampleCount,P.min,P.max,P.stdDev,L,q),le=new MS(RF[cC],K);return jS(x,RF[QS],T,le)}a(Awt,"MetricEnvelopeCreator");function ywt(x,T,w){GS(x,T);var P,L=T[Ta];!ie(L)&&!ie(L[tu])&&!ie(L[tu][FS])?(P=L[tu][FS],delete L[tu][FS]):!ie(T[h0])&&!ie(T[h0][FS])&&(P=T[h0][FS],delete T[h0][FS]);var q=T[Ta],K;((T.ext||{}).trace||{})[BF]&&(K=T.ext.trace[BF]);var le=q.id||K,me=q[F1],Ee=q.uri,ke=q[tu]||{},Ue=q[OS]||{};if(ie(q.refUri)||(ke.refUri=q.refUri),ie(q.pageType)||(ke.pageType=q.pageType),ie(q.isLoggedIn)||(ke.isLoggedIn=q.isLoggedIn[US]()),!ie(q[tu])){var tt=q[tu];ue(tt,function(yt,at){ke[yt]=at})}mI(T[h0],ke,Ue),ie(w)||$S(ke,w);var We=new L$(x,me,Ee,P,ke,Ue,le),Ye=new MS(L$[cC],We);return jS(x,L$[QS],T,Ye)}a(ywt,"PageViewEnvelopeCreator");function Cwt(x,T,w){GS(x,T);var P=T[Ta],L=P[F1],q=P.uri||P.url,K=P[tu]||{},le=P[OS]||{};mI(T[h0],K,le),ie(w)||$S(K,w);var me=new Q$(x,L,q,void 0,K,le,P),Ee=new MS(Q$[cC],me);return jS(x,Q$[QS],T,Ee)}a(Cwt,"PageViewPerformanceEnvelopeCreator");function vwt(x,T,w){GS(x,T);var P=T[Ta].message,L=T[Ta].severityLevel,q=T[Ta][tu]||{},K=T[Ta][OS]||{};mI(T[h0],q,K),ie(w)||$S(q,w);var le=new O$(x,P,L,q,K),me=new MS(O$[cC],le);return jS(x,O$[QS],T,me)}a(vwt,"TraceEnvelopeCreator");var xBe=function(){function x(T,w){var P=[],L=!1,q=w.maxRetryCnt;this._get=function(){return P},this._set=function(K){return P=K,P},Ou(x,this,function(K){K[qS]=function(le){if(K[HS]()>=w.eventsLimitInMem){L||(qr(T,2,105,"Maximum in-memory buffer size reached: "+K[HS](),!0),L=!0);return}le.cnt=le.cnt||0,!(!ie(q)&&le.cnt>q)&&P[O1](le)},K[HS]=function(){return P[Wi]},K.size=function(){for(var le=P[Wi],me=0;me<P[Wi];me++)le+=P[me].item[Wi];return w[Ffe]||(le+=2),le},K[D4]=function(){P=[],L=!1},K.getItems=function(){return P.slice(0)},K.batchPayloads=function(le){if(le&&le[Wi]>0){var me=[];Xr(le,function(ke){me[O1](ke.item)});var Ee=w[Ffe]?me.join(`
`):"["+me.join(",")+"]";return Ee}return null},K.createNew=function(le,me,Ee){var ke=P.slice(0);le=le||T,me=me||{};var Ue=Ee?new EBe(le,me):new zfe(le,me);return Xr(ke,function(tt){Ue[qS](tt)}),Ue}})}return a(x,"BaseSendBuffer"),x.__ieDyn=1,x}(),zfe=function(x){aS(T,x);function T(w,P){var L=x.call(this,w,P)||this;return Ou(T,L,function(q,K){q[q$]=function(le){K[D4]()},q[MF]=function(le){}}),L}return a(T,"ArraySendBuffer"),T.__ieDyn=1,T}(xBe),xwt=["AI_buffer","AI_sentBuffer"],EBe=function(x){aS(T,x);function T(P,L){var q=x.call(this,P,L)||this,K=!1,le=L?.namePrefix,me=L[Ofe]||{getItem:NTt,setItem:MTt},Ee=me.getItem,ke=me.setItem,Ue=L.maxRetryCnt;return Ou(T,q,function(tt,We){var Ye=Dr(T[LF]),yt=Dr(T[pI]),at=Vi(),_t=yt[B4](at),jt=tt._set(Ye[B4](_t));jt[Wi]>T[FF]&&(jt[Wi]=T[FF]),Gi(T[pI],[]),Gi(T[LF],jt),tt[qS]=function(_n){if(tt[HS]()>=T[FF]){K||(qr(P,2,67,"Maximum buffer size reached: "+tt[HS](),!0),K=!0);return}_n.cnt=_n.cnt||0,!(!ie(Ue)&&_n.cnt>Ue)&&(We[qS](_n),Gi(T[LF],tt._get()))},tt[D4]=function(){We[D4](),Gi(T[LF],tt._get()),Gi(T[pI],[]),K=!1},tt[q$]=function(_n){Gi(T[LF],tt._set(cr(_n,tt._get())));var sn=Dr(T[pI]);sn instanceof Array&&_n instanceof Array&&(sn=sn[B4](_n),sn[Wi]>T[FF]&&(qr(P,1,67,"Sent buffer reached its maximum size: "+sn[Wi],!0),sn[Wi]=T[FF]),Gi(T[pI],sn))},tt[MF]=function(_n){var sn=Dr(T[pI]);sn=cr(_n,sn),Gi(T[pI],sn)},tt.createNew=function(_n,sn,zi){zi=!!zi;var wa=tt._get().slice(0),_s=Dr(T[pI]).slice(0);_n=_n||P,sn=sn||{},tt[D4]();var Gt=zi?new T(_n,sn):new zfe(_n,sn);return Xr(wa,function(an){Gt[qS](an)}),zi&&Gt[q$](_s),Gt};function cr(_n,sn){var zi=[],wa=[];return Xr(_n,function(_s){wa[O1](_s.item)}),Xr(sn,function(_s){!Qe(_s)&&Rc(wa,_s.item)===-1&&zi[O1](_s)}),zi}a(cr,"_removePayloadsFromBuffer");function Dr(_n){var sn=_n;return sn=le?le+"_"+sn:sn,si(sn)}a(Dr,"_getBuffer");function si(_n){try{var sn=Ee(P,_n);if(sn){var zi=df().parse(sn);if(ye(zi)&&(zi=df().parse(zi)),zi&&Xe(zi))return zi}}catch(wa){qr(P,1,42," storage key: "+_n+", "+Rl(wa),{exception:qt(wa)})}return[]}a(si,"_getBufferBase");function Gi(_n,sn){var zi=_n;try{zi=le?le+"_"+zi:zi;var wa=JSON[NF](sn);ke(P,zi,wa)}catch(_s){ke(P,zi,JSON[NF]([])),qr(P,2,41," storage key: "+zi+", "+Rl(_s)+". Buffer cleared",{exception:qt(_s)})}}a(Gi,"_setBuffer");function Vi(){var _n=[];try{return Xr(xwt,function(sn){var zi=Ko(sn);if(_n=_n[B4](zi),le){var wa=le+"_"+sn,_s=Ko(wa);_n=_n[B4](_s)}}),_n}catch(sn){qr(P,2,41,"Transfer events from previous buffers: "+Rl(sn)+". previous Buffer items can not be removed",{exception:qt(sn)})}return[]}a(Vi,"_getPreviousEvents");function Ko(_n){try{var sn=si(_n),zi=[];return Xr(sn,function(wa){var _s={item:wa,cnt:0};zi[O1](_s)}),LTt(P,_n),zi}catch{}return[]}a(Ko,"_getItemsFromPreviousKey")}),q}a(T,"SessionStorageSendBuffer");var w;return w=T,T.VERSION="_1",T.BUFFER_KEY="AI_buffer"+w.VERSION,T.SENT_BUFFER_KEY="AI_sentBuffer"+w.VERSION,T.MAX_BUFFER_SIZE=2e3,T}(xBe),Ewt=function(){function x(T){Ou(x,this,function(w){w.serialize=function(K){var le=P(K,"root");try{return df()[NF](le)}catch(me){qr(T,1,48,me&&Qe(me[US])?me[US]():"Error serializing object",null,!0)}};function P(K,le){var me="__aiCircularRefCheck",Ee={};if(!K)return qr(T,1,48,"cannot serialize object because it is null or undefined",{name:le},!0),Ee;if(K[me])return qr(T,2,50,"Circular reference detected while serializing object",{name:le},!0),Ee;if(!K.aiDataContract){if(le==="measurements")Ee=q(K,"number",le);else if(le==="properties")Ee=q(K,"string",le);else if(le==="tags")Ee=q(K,"string",le);else if(Xe(K))Ee=L(K,le);else{qr(T,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:le},!0);try{df()[NF](K),Ee=K}catch(ke){qr(T,1,48,ke&&Qe(ke[US])?ke[US]():"Error serializing object",null,!0)}}return Ee}return K[me]=!0,ue(K.aiDataContract,function(ke,Ue){var tt=Qe(Ue)?Ue()&1:Ue&1,We=Qe(Ue)?Ue()&4:Ue&4,Ye=Ue&2,yt=K[ke]!==void 0,at=we(K[ke])&&K[ke]!==null;if(tt&&!yt&&!Ye)qr(T,1,24,"Missing required field specification. The field is required but not present on source",{field:ke,name:le});else if(!We){var _t=void 0;at?Ye?_t=L(K[ke],ke):_t=P(K[ke],ke):_t=K[ke],_t!==void 0&&(Ee[ke]=_t)}}),delete K[me],Ee}a(P,"_serializeObject");function L(K,le){var me;if(K)if(!Xe(K))qr(T,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:le},!0);else{me=[];for(var Ee=0;Ee<K[Wi];Ee++){var ke=K[Ee],Ue=P(ke,le+"["+Ee+"]");me[O1](Ue)}}return me}a(L,"_serializeArray");function q(K,le,me){var Ee;return K&&(Ee={},ue(K,function(ke,Ue){if(le==="string")Ue===void 0?Ee[ke]="undefined":Ue===null?Ee[ke]="null":Ue[US]?Ee[ke]=Ue[US]():Ee[ke]="invalid field: toString() is not defined.";else if(le==="number")if(Ue===void 0)Ee[ke]="undefined";else if(Ue===null)Ee[ke]="null";else{var tt=parseFloat(Ue);Ee[ke]=tt}else Ee[ke]="invalid field: "+me+" is of unknown type.",qr(T,1,Ee[ke],null,!0)})),Ee}a(q,"_serializeStringMap")})}return a(x,"Serializer"),x.__ieDyn=1,x}(),bwt=8,Iwt=function(){function x(){}return a(x,"HashCodeScoreGenerator"),x.prototype.getHashCodeScore=function(T){var w=this.getHashCode(T)/x.INT_MAX_VALUE;return w*100},x.prototype.getHashCode=function(T){if(T==="")return 0;for(;T[Wi]<bwt;)T=T[B4](T);for(var w=5381,P=0;P<T[Wi];++P)w=(w<<5)+w+T.charCodeAt(P),w=w&w;return Math.abs(w)},x.INT_MAX_VALUE=2147483647,x}(),Twt=function(){function x(){var T=this,w=new Iwt,P=new fBe;T.getSamplingScore=function(L){var q=0;return L[Uu]&&L[Uu][P.userId]?q=w.getHashCodeScore(L[Uu][P.userId]):L.ext&&L.ext.user&&L.ext.user.id?q=w[fwt](L.ext.user.id):L[Uu]&&L[Uu][P.operationId]?q=w.getHashCodeScore(L[Uu][P.operationId]):L.ext&&L.ext.telemetryTrace&&L.ext.telemetryTrace[BF]?q=w.getHashCodeScore(L.ext.telemetryTrace[BF]):q=Math.random()*100,q}}return a(x,"SamplingScoreGenerator"),x}(),wwt=function(){function x(T,w){this.INT_MAX_VALUE=2147483647;var P=w||IS(null);(T>100||T<0)&&(P.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:T},!0),T=100),this[$$]=T,this.samplingScoreGenerator=new Twt}return a(x,"Sample"),x.prototype.isSampledIn=function(T){var w=this[$$],P=!1;return w==null||w>=100||T.baseType===RF[cC]?!0:(P=this.samplingScoreGenerator.getSamplingScore(T)<w,P)},x}(),Ys,Q1,uC=void 0,bBe="",_wt=65e3;function IBe(x){try{return x.responseText}catch{}return null}a(IBe,"_getResponseText");function Swt(x){return x&&x.sendPOST}a(Swt,"isOverrideFn");var TBe=ar((Ys={endpointUrl:dF(de,Efe+T4)},Ys[Ffe]=Om(),Ys.maxBatchInterval=15e3,Ys[mBe]=102400,Ys.disableTelemetry=Om(),Ys[gBe]=Om(!0),Ys.isRetryDisabled=Om(),Ys[Hfe]=Om(!0),Ys[yBe]=Om(!0),Ys.disableXhr=Om(),Ys[ABe]=Om(),Ys[qfe]=Om(),Ys[qF]=uC,Ys.namePrefix=uC,Ys.samplingPercentage=dF(Rwt,100),Ys[Ufe]=uC,Ys.convertUndefined=uC,Ys.eventsLimitInMem=1e4,Ys[Ofe]=!1,Ys.httpXHROverride={isVal:Swt,v:uC},Ys[hBe]=Om(),Ys.transports=uC,Ys.retryCodes=uC,Ys.maxRetryCnt={isVal:ut,v:10},Ys));function Rwt(x){return!isNaN(x)&&x>0&&x<=100}a(Rwt,"_chkSampling");var kwt=(Q1={},Q1[R4.dataType]=vBe,Q1[O$.dataType]=vwt,Q1[L$.dataType]=ywt,Q1[Q$.dataType]=Cwt,Q1[M$.dataType]=gwt,Q1[RF.dataType]=Awt,Q1[F$.dataType]=hwt,Q1),wBe=function(x){aS(T,x);function T(){var w=x.call(this)||this;w.priority=1001,w.identifier=dwt;var P,L,q,K,le,me,Ee,ke=0,Ue,tt,We,Ye,yt,at,_t,jt,cr,Dr,si,Gi,Vi,Ko,_n,sn,zi,wa,_s,Gt,an,Qo,Nt,qn,Va,Yo,ru;return Ou(T,w,function(pt,el){SBe(),pt.pause=function(){yI(),q=!0},pt.resume=function(){q&&(q=!1,L=null,us(),F4())},pt.flush=function(ze,Tt,pr){if(ze===void 0&&(ze=!0),!q){yI();try{return pt[OF](ze,null,pr||1)}catch(zr){qr(pt[_d](),1,22,"flush failed, telemetry will not be collected: "+Rl(zr),{exception:qt(zr)})}}},pt.onunloadFlush=function(){if(!q)if(_t||Gt)try{return pt[OF](!0,sp,2)}catch(ze){qr(pt[_d](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Rl(ze),{exception:qt(ze)})}else pt.flush(!1)},pt.addHeader=function(ze,Tt){Ee[ze]=Tt},pt[Qfe]=function(ze,Tt,pr,zr){pt.isInitialized()&&qr(pt[_d](),1,28,"Sender is already initialized"),el[Qfe](ze,Tt,pr,zr);var zn=pt.identifier;le=new Ewt(Tt.logger),P=0,L=null,pt[QF]=null,me=0;var kn=pt[_d]();We=ODe(jg("Sender"),Tt.evtNamespace&&Tt.evtNamespace()),tt=uwt(We),pt._addHook(Gg(ze,function(To){var Nc=To.cfg;Nc.storagePrefix&&BTt(Nc.storagePrefix);var g0=sI(null,Nc,Tt),ki=g0.getExtCfg(zn,TBe),RBe=ki[UF];if(Ye&&RBe===Ye){var Jfe=Nc[UF];Jfe&&Jfe!==RBe&&(ki[UF]=Jfe)}At(ki[qF])&&(ki[qF]=Nc[qF]),Ge(pt,"_senderConfig",{g:a(function(){return ki},"g")}),yt!==ki[UF]&&(Ye=yt=ki[UF]),Tt.activeStatus()===$y.PENDING?pt.pause():Tt.activeStatus()===$y.ACTIVE&&pt.resume(),Dr&&Dr!==ki[Ufe]&&Xr(Dr,function(Hu){delete Ee[Hu.header]}),at=ki[mBe],_t=(ki[qfe]===!1||ki[Hfe]===!1)&&Zy(),jt=ki[qfe]===!1&&Zy(),cr=ki[Hfe]===!1&&Zy(),Gt=ki[hBe],an=!!ki.disableXhr,ru=ki.retryCodes;var Xfe=ki[Ofe],O4=!!ki[gBe]&&(!!Xfe||XDe()),kBe=ki.namePrefix,Nwt=O4!==sn||O4&&wa!==kBe||O4&&zi!==Xfe;if(pt[lC]){if(Nwt)try{pt[lC]=pt[lC].createNew(kn,ki,O4)}catch(Hu){qr(pt[_d](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Rl(Hu),{exception:qt(Hu)})}us()}else pt[lC]=O4?new EBe(kn,ki):new zfe(kn,ki);wa=kBe,sn=O4,zi=Xfe,Qo=!ki[ABe]&&CS(!0),Va=!!ki[yBe],pt._sample=new wwt(ki.samplingPercentage,kn),Gi=ki[qF],!At(Gi)&&!_Be(Gi,Nc)&&qr(kn,1,100,"Invalid Instrumentation key "+Gi),Dr=ki[Ufe],ye(Ye)&&!KDe(Ye)&&Dr&&Dr[Wi]>0?Xr(Dr,function(Hu){w.addHeader(Hu.header,Hu.value)}):Dr=null,_s=ki.enableSendPromise;var PBe=nu();Yo?Yo.SetConfig(PBe):(Yo=new Zc,Yo[Qfe](PBe,kn));var z$=ki.httpXHROverride,K$=null,jF=null,Mwt=WW([3,1,2],ki.transports);K$=Yo&&Yo[H$](Mwt,!1);var Zfe=Yo&&Yo.getFallbackInst();Nt=a(function(Hu,VS){return en(Zfe,Hu,VS)},"_xhrSend"),qn=a(function(Hu,VS){return en(Zfe,Hu,VS,!1)},"_fallbackSend"),K$=Gt?z$:K$||z$||Zfe,pt[QF]=function(Hu,VS){return en(K$,Hu,VS)},Qo&&(Ue=L4);var epe=WW([3,1],ki.unloadTransports);Qo||(epe=epe.filter(function(Hu){return Hu!==2})),jF=Yo&&Yo[H$](epe,!0),jF=Gt?z$:jF||z$,(Gt||ki.unloadTransports||!Ue)&&jF&&(Ue=a(function(Hu,VS){return en(jF,Hu,VS)},"_syncUnloadSender")),Ue||(Ue=Nt),si=ki.disableTelemetry,Vi=ki.convertUndefined||uC,Ko=ki.isRetryDisabled,_n=ki.maxBatchInterval}))},pt.processTelemetry=function(ze,Tt){Tt=pt._getTelCtx(Tt);var pr=Tt[_d]();try{var zr=Kg(ze,pr);if(!zr)return;var zn=AI(ze,pr);if(!zn)return;var kn=le.serialize(zn),To=pt[lC];us(kn);var Nc={item:kn,cnt:0};To[qS](Nc),F4()}catch(g0){qr(pr,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Rl(g0),{exception:qt(g0)})}pt.processNext(ze,Tt)},pt.isCompletelyIdle=function(){return!q&&ke===0&&pt._buffer[HS]()===0},pt.getOfflineListener=function(){return tt},pt._xhrReadyStateChange=function(ze,Tt,pr){if(!Jg(Tt))return Hm(ze,Tt,pr)},pt[OF]=function(ze,Tt,pr){ze===void 0&&(ze=!0);var zr;if(!q)try{var zn=pt[lC];if(si)zn[D4]();else if(zn[HS]()>0){var kn=zn.getItems();V$(pr||0,ze),Tt?zr=Tt.call(pt,kn,ze):zr=pt[QF](kn,ze)}yI()}catch(Nc){var To=$b();(!To||To>9)&&qr(pt[_d](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Rl(Nc),{exception:qt(Nc)})}return zr},pt.getOfflineSupport=function(){return{getUrl:a(function(){return Ye},"getUrl"),createPayload:vt,serialize:_a,batch:qu,shouldProcess:a(function(ze){return!!Kg(ze)},"shouldProcess")}},pt._doTeardown=function(ze,Tt){pt.onunloadFlush(),Xb(tt,!1),SBe()},pt[WS]=function(ze,Tt,pr){if(!Jg(ze))return pf(ze,Tt)},pt[Wfe]=function(ze,Tt){if(!Jg(ze))return hI(ze,Tt)},pt[W$]=function(ze,Tt){if(!Jg(ze))return zg(ze)},pt._xdrOnLoad=function(ze,Tt){if(!Jg(Tt))return za(ze,Tt)};function za(ze,Tt){var pr=IBe(ze);if(ze&&(pr+""=="200"||pr===""))P=0,pt[W$](Tt,0);else{var zr=Zr(pr);zr&&zr[$fe]&&zr[$fe]>zr[jfe]&&!Ko?pt[Wfe](Tt,zr):pt[WS](Tt,HW(ze))}}a(za,"_xdrOnLoad");function nu(){try{var ze={xdrOnComplete:a(function(pr,zr,zn){var kn=gI(zn);if(kn)return za(pr,kn)},"xdrOnComplete"),fetchOnComplete:a(function(pr,zr,zn,kn){var To=gI(kn);if(To)return Js(pr.status,To,pr.url,To[Wi],pr.statusText,zn||"")},"fetchOnComplete"),xhrOnComplete:a(function(pr,zr,zn){var kn=gI(zn);if(kn)return Hm(pr,kn,kn[Wi])},"xhrOnComplete"),beaconOnRetry:a(function(pr,zr,zn){return Yg(pr,zr,zn)},"beaconOnRetry")},Tt={enableSendPromise:_s,isOneDs:!1,disableCredentials:!1,disableXhr:an,disableBeacon:!cr,disableBeaconSync:!jt,senderOnCompleteCallBack:ze};return Tt}catch{}return null}a(nu,"_getSendPostMgrConfig");function Hm(ze,Tt,pr){ze.readyState===4&&Js(ze.status,Tt,ze.responseURL,pr,i4(ze),IBe(ze)||ze.response)}a(Hm,"_xhrReadyStateChange");function pf(ze,Tt,pr){qr(pt[_d](),2,26,"Failed to send telemetry.",{message:Tt}),pt._buffer&&pt._buffer[MF](ze)}a(pf,"_onError");function hI(ze,Tt){for(var pr=[],zr=[],zn=Tt.errors.reverse(),kn=0,To=zn;kn<To.length;kn++){var Nc=To[kn],g0=ze.splice(Nc.index,1)[0];CI(Nc.statusCode)?zr[O1](g0):pr[O1](g0)}ze[Wi]>0&&pt[W$](ze,Tt[jfe]),pr[Wi]>0&&pt[WS](pr,i4(null,["partial success",Tt[jfe],"of",Tt.itemsReceived].join(" "))),zr[Wi]>0&&($F(zr),qr(pt[_d](),2,40,"Partial success. Delivered: "+ze[Wi]+", Failed: "+pr[Wi]+". Will retry to send "+zr[Wi]+" our of "+Tt[$fe]+" items"))}a(hI,"_onPartialSuccess");function zg(ze,Tt){pt._buffer&&pt._buffer[MF](ze)}a(zg,"_onSuccess");function gI(ze){try{if(ze){var Tt=ze,pr=Tt.oriPayload;return pr&&pr[Wi]?pr:null}}catch{}return null}a(gI,"_getPayloadArr");function Kg(ze,Tt){if(si)return!1;if(!ze)return Tt&&qr(Tt,1,7,"Cannot send empty telemetry"),!1;if(ze.baseData&&!ze[Gfe])return Tt&&qr(Tt,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(ze[Gfe]||(ze[Gfe]="EventData"),!pt[QF])return Tt&&qr(Tt,1,28,"Sender was not initialized"),!1;if(Rr(ze))ze[UDe]=pt._sample[$$];else return Tt&&qr(Tt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:pt._sample[$$]}),!1;return!0}a(Kg,"_validate");function AI(ze,Tt){var pr=ze.iKey||Gi,zr=T.constructEnvelope(ze,pr,Tt,Vi);if(!zr){qr(Tt,1,47,"Unable to create an AppInsights envelope");return}var zn=!1;if(ze[Uu]&&ze[Uu][xfe]&&(Xr(ze[Uu][xfe],function(kn){try{kn&&kn(zr)===!1&&(zn=!0,h4(Tt,"Telemetry processor check returns false"))}catch(To){qr(Tt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Rl(To),{exception:qt(To)},!0)}}),delete ze[Uu][xfe]),!zn)return zr}a(AI,"_getEnvelope");function _a(ze){var Tt=bBe,pr=pt[_d]();try{var zr=Kg(ze,pr),zn=null;zr&&(zn=AI(ze,pr)),zn&&(Tt=le.serialize(zn))}catch{}return Tt}a(_a,"_serialize");function qu(ze){var Tt=bBe;return ze&&ze[Wi]&&(Tt="["+ze.join(",")+"]"),Tt}a(qu,"_batch");function vt(ze){var Tt=rs();return{urlString:Ye,data:ze,headers:Tt}}a(vt,"_createPayload");function Rr(ze){return pt._sample.isSampledIn(ze)}a(Rr,"_isSampledIn");function Gn(ze,Tt,pr,zr){Tt===200&&ze?pt._onSuccess(ze,ze[Wi]):zr&&pt[WS](ze,zr)}a(Gn,"_getOnComplete");function en(ze,Tt,pr,zr){zr===void 0&&(zr=!0);var zn=a(function(Nc,g0,ki){return Gn(Tt,Nc,g0,ki)},"onComplete"),kn=Vn(Tt),To=ze&&ze.sendPOST;return To&&kn?(zr&&pt._buffer[q$](Tt),To(kn,zn,!pr)):null}a(en,"_doSend");function Vn(ze){if(Xe(ze)&&ze[Wi]>0){var Tt=pt[lC].batchPayloads(ze),pr=rs(),zr={data:Tt,urlString:Ye,headers:pr,disableXhrSync:an,disableFetchKeepAlive:!Qo,oriPayload:ze};return zr}return null}a(Vn,"_getPayload");function rs(){try{var ze=Ee||{};return KDe(Ye)&&(ze[HDe[6]]=HDe[7]),ze}catch{}return null}a(rs,"_getHeaders");function us(ze){var Tt=ze?ze[Wi]:0;return pt[lC].size()+Tt>at?((!tt||tt.isOnline())&&pt[OF](!0,null,10),!0):!1}a(us,"_checkMaxSize");function Js(ze,Tt,pr,zr,zn,kn){var To=null;if(pt._appId||(To=Zr(kn),To&&To.appId&&(pt._appId=To.appId)),(ze<200||ze>=300)&&ze!==0){if((ze===301||ze===307||ze===308)&&!Sd(pr)){pt[WS](Tt,zn);return}if(tt&&!tt.isOnline()){if(!Ko){var Nc=10;$F(Tt,Nc),qr(pt[_d](),2,40,". Offline - Response Code: ".concat(ze,". Offline status: ").concat(!tt.isOnline(),". Will retry to send ").concat(Tt.length," items."))}return}!Ko&&CI(ze)?($F(Tt),qr(pt[_d](),2,40,". Response code "+ze+". Will retry to send "+Tt[Wi]+" items.")):pt[WS](Tt,zn)}else Sd(pr),ze===206?(To||(To=Zr(kn)),To&&!Ko?pt[Wfe](Tt,To):pt[WS](Tt,zn)):(P=0,pt[W$](Tt,zr))}a(Js,"_checkResponsStatus");function Sd(ze){return me>=10?!1:!ie(ze)&&ze!==""&&ze!==Ye?(Ye=ze,++me,!0):!1}a(Sd,"_checkAndUpdateEndPointUrl");function sp(ze,Tt){if(Ue)Ue(ze,!1);else{var pr=Yo&&Yo[H$]([3],!0);return en(pr,ze,Tt)}}a(sp,"_doUnloadSend");function Yg(ze,Tt,pr){var zr=ze,zn=zr&&zr.oriPayload;if(Va)qn&&qn(zn,!0),qr(pt[_d](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var kn=[],To=0;To<zn[Wi];To++){var Nc=zn[To],g0=[Nc],ki=Vn(g0);pr(ki,Tt)?pt._onSuccess(g0,g0[Wi]):kn[O1](Nc)}kn[Wi]>0&&(qn&&qn(kn,!0),qr(pt[_d](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}a(Yg,"_onBeaconRetry");function Jg(ze){try{if(ze&&ze[Wi])return ye(ze[0])}catch{}return null}a(Jg,"_isStringArr");function L4(ze,Tt){var pr=null;if(Xe(ze)){for(var zr=ze[Wi],zn=0;zn<ze[Wi];zn++)zr+=ze[zn].item[Wi];var kn=Yo.getSyncFetchPayload();kn+zr<=_wt?pr=2:Zy()?pr=3:(pr=1,qr(pt[_d](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var To=Yo&&Yo[H$]([pr],!0);return en(To,ze,Tt)}return null}a(L4,"_fetchKeepAliveSender");function $F(ze,Tt){if(Tt===void 0&&(Tt=1),!(!ze||ze[Wi]===0)){var pr=pt[lC];pr[MF](ze),P++;for(var zr=0,zn=ze;zr<zn.length;zr++){var kn=zn[zr];kn.cnt=kn.cnt||0,kn.cnt++,pr[qS](kn)}Yfe(Tt),F4()}}a($F,"_resendPayload");function Yfe(ze){var Tt=10,pr;if(P<=1)pr=Tt;else{var zr=(Math.pow(2,P)-1)/2,zn=Qy(Math.random()*zr*Tt)+1;zn=ze*zn,pr=De(Xn(zn,3600),Tt)}var kn=bd()+pr*1e3;L=kn}a(Yfe,"_setRetryTime");function F4(){if(!K&&!q){var ze=L?De(0,L-bd()):0,Tt=De(_n,ze);K=qy(function(){K=null,pt[OF](!0,null,1)},Tt)}}a(F4,"_setupTimer");function yI(){K&&K.cancel(),K=null,L=null}a(yI,"_clearScheduledTimer");function CI(ze){return ie(ru)?ze===401||ze===408||ze===429||ze===500||ze===502||ze===503||ze===504:ru[Wi]&&ru.indexOf(ze)>-1}a(CI,"_isRetriable");function G$(){var ze="getNotifyMgr";return pt.core[ze]?pt.core[ze]():pt.core._notificationManager}a(G$,"_getNotifyMgr");function V$(ze,Tt){var pr=G$();if(pr&&pr.eventsSendRequest)try{pr.eventsSendRequest(ze,Tt)}catch(zr){qr(pt[_d](),1,74,"send request notification failed: "+Rl(zr),{exception:qt(zr)})}}a(V$,"_notifySendRequest");function _Be(ze,Tt){var pr=Tt.disableInstrumentationKeyValidation,zr=ie(pr)?!1:pr;if(zr)return!0;var zn="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",kn=new RegExp(zn);return kn.test(ze)}a(_Be,"_validateInstrumentationKey");function SBe(){pt[QF]=null,pt[lC]=null,pt._appId=null,pt._sample=null,Ee={},tt=null,P=0,L=null,q=!1,K=null,le=null,me=0,ke=0,Ue=null,We=null,Ye=null,yt=null,at=0,_t=!1,Dr=null,si=!1,Gi=null,Vi=uC,Ko=!1,sn=null,wa=uC,an=!1,Qo=!1,Va=!1,Nt=null,qn=null,Yo=null,Ge(pt,"_senderConfig",{g:a(function(){return qW({},TBe)},"g")})}a(SBe,"_initDefaults")}),w}return a(T,"Sender"),T.constructEnvelope=function(w,P,L,q){var K;P!==w.iKey&&!ie(P)?K=Og(Og({},w),{iKey:P}):K=w;var le=kwt[K.baseType]||vBe;return le(L,K,q)},T}(bt),N4="instrumentationKey",j$="connectionString",HF="endpointUrl",WF="userOverrideEndpointUrl",M4,Kfe=void 0,Pwt=(M4={diagnosticLogInterval:dF(Dwt,1e4)},M4[j$]=Kfe,M4.endpointUrl=Kfe,M4[N4]=Kfe,M4.extensionConfig={},M4);function Dwt(x){return x&&x>0}a(Dwt,"_chkDiagLevel");var Bwt=function(){function x(T){var w=new Mt,P;(ie(T)||ie(T[N4])&&ie(T[j$]))&&Yr("Invalid input configuration"),Ou(x,this,function(q){Ge(q,"config",{g:a(function(){return P},"g")}),K(),q.initialize=K,q.track=L,YL(q,w,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function K(){var le=op(T||{},Pwt);P=le.cfg,w.addUnloadHook(Gg(le,function(){var me=P[j$];if(At(me)){var Ee=K5(function(We,Ye){ep(me,function(yt){var at=yt.value,_t=P[N4];if(!yt.rejected&&at){P[j$]=at;var jt=kfe(at);_t=jt.instrumentationkey||_t}We(_t)})}),ke=K5(function(We,Ye){ep(me,function(yt){var at=yt.value,_t=P[HF];if(!yt.rejected&&at){var jt=kfe(at),cr=jt.ingestionendpoint;_t=cr?cr+T4:_t}We(_t)})});P[N4]=Ee,P[HF]=P[WF]||ke}if(ye(me)){var Ue=kfe(me),tt=Ue.ingestionendpoint;P[HF]=P[WF]?P[WF]:tt+T4,P[N4]=Ue.instrumentationkey||P[N4]}P[HF]=P[WF]?P[WF]:P[HF]})),w.initialize(P,[new wBe])}a(K,"_initialize")});function L(q){q&&(q.baseData=q.baseData||{},q.baseType=q.baseType||"EventData"),w.track(q)}a(L,"_track")}return a(x,"ApplicationInsights"),x.__ieDyn=1,x}();t.AppInsightsCore=Mt,t.ApplicationInsights=Bwt,t.Sender=wBe,t.SeverityLevel=lwt,t.arrForEach=Xr,t.isNullOrUndefined=ie,t.proxyFunctions=YL,t.throwError=Yr})});var QOe=W(FV=>{"use strict";f();Object.defineProperty(FV,"__esModule",{value:!0});FV.state=void 0;FV.state={instrumenterImplementation:void 0}});var mB=W((Yge,k7e)=>{f();var kz=require("buffer"),NC=kz.Buffer;function R7e(t,e){for(var r in t)e[r]=t[r]}a(R7e,"copyProps");NC.from&&NC.alloc&&NC.allocUnsafe&&NC.allocUnsafeSlow?k7e.exports=kz:(R7e(kz,Yge),Yge.Buffer=cR);function cR(t,e,r){return NC(t,e,r)}a(cR,"SafeBuffer");cR.prototype=Object.create(NC.prototype);R7e(NC,cR);cR.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return NC(t,e,r)};cR.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=NC(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};cR.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return NC(t)};cR.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return kz.SlowBuffer(t)}});var Jge=W((Iln,P7e)=>{f();var Pz=mB().Buffer,F3t=require("stream"),O3t=require("util");function Dz(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=Pz.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=Pz.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}a(Dz,"DataStream");O3t.inherits(Dz,F3t);Dz.prototype.write=a(function(e){this.buffer=Pz.concat([this.buffer,Pz.from(e)]),this.emit("data",e)},"write");Dz.prototype.end=a(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");P7e.exports=Dz});var B7e=W((_ln,D7e)=>{"use strict";f();function Xge(t){var e=(t/8|0)+(t%8===0?0:1);return e}a(Xge,"getParamSize");var Q3t={ES256:Xge(256),ES384:Xge(384),ES512:Xge(521)};function U3t(t){var e=Q3t[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}a(U3t,"getParamBytesForAlg");D7e.exports=U3t});var U7e=W((kln,Q7e)=>{"use strict";f();var Bz=mB().Buffer,M7e=B7e(),Nz=128,L7e=0,q3t=32,H3t=16,W3t=2,F7e=H3t|q3t|L7e<<6,Mz=W3t|L7e<<6;function $3t(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}a($3t,"base64Url");function O7e(t){if(Bz.isBuffer(t))return t;if(typeof t=="string")return Bz.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}a(O7e,"signatureAsBuffer");function j3t(t,e){t=O7e(t);var r=M7e(e),n=r+1,o=t.length,s=0;if(t[s++]!==F7e)throw new Error('Could not find expected "seq"');var c=t[s++];if(c===(Nz|1)&&(c=t[s++]),o-s<c)throw new Error('"seq" specified length of "'+c+'", only "'+(o-s)+'" remaining');if(t[s++]!==Mz)throw new Error('Could not find expected "int" for "r"');var l=t[s++];if(o-s-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(o-s-2)+'" available');if(n<l)throw new Error('"r" specified length of "'+l+'", max of "'+n+'" is acceptable');var u=s;if(s+=l,t[s++]!==Mz)throw new Error('Could not find expected "int" for "s"');var d=t[s++];if(o-s!==d)throw new Error('"s" specified length of "'+d+'", expected "'+(o-s)+'"');if(n<d)throw new Error('"s" specified length of "'+d+'", max of "'+n+'" is acceptable');var p=s;if(s+=d,s!==o)throw new Error('Expected to consume entire buffer, but "'+(o-s)+'" bytes remain');var m=r-l,h=r-d,g=Bz.allocUnsafe(m+l+h+d);for(s=0;s<m;++s)g[s]=0;t.copy(g,s,u+Math.max(-m,0),u+l),s=r;for(var A=s;s<A+h;++s)g[s]=0;return t.copy(g,s,p+Math.max(-h,0),p+d),g=g.toString("base64"),g=$3t(g),g}a(j3t,"derToJose");function N7e(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var o=t[e+n]>=Nz;return o&&--n,n}a(N7e,"countPadding");function G3t(t,e){t=O7e(t);var r=M7e(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var o=N7e(t,0,r),s=N7e(t,r,t.length),c=r-o,l=r-s,u=2+c+1+1+l,d=u<Nz,p=Bz.allocUnsafe((d?2:3)+u),m=0;return p[m++]=F7e,d?p[m++]=u:(p[m++]=Nz|1,p[m++]=u&255),p[m++]=Mz,p[m++]=c,o<0?(p[m++]=0,m+=t.copy(p,m,0,r)):m+=t.copy(p,m,o,r),p[m++]=Mz,p[m++]=l,s<0?(p[m++]=0,t.copy(p,m,r)):t.copy(p,m,r+s),p}a(G3t,"joseToDer");Q7e.exports={derToJose:j3t,joseToDer:G3t}});var H7e=W((Bln,q7e)=>{"use strict";f();var W9=require("buffer").Buffer,Zge=require("buffer").SlowBuffer;q7e.exports=Lz;function Lz(t,e){if(!W9.isBuffer(t)||!W9.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}a(Lz,"bufferEq");Lz.install=function(){W9.prototype.equal=Zge.prototype.equal=a(function(e){return Lz(this,e)},"equal")};var V3t=W9.prototype.equal,z3t=Zge.prototype.equal;Lz.restore=function(){W9.prototype.equal=V3t,Zge.prototype.equal=z3t}});var nAe=W((Lln,J7e)=>{f();var gB=mB().Buffer,ah=require("crypto"),$7e=U7e(),W7e=require("util"),K3t=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,$9="secret must be a string or buffer",hB="key must be a string or a buffer",Y3t="key must be a string, a buffer or an object",tAe=typeof ah.createPublicKey=="function";tAe&&(hB+=" or a KeyObject",$9+="or a KeyObject");function j7e(t){if(!gB.isBuffer(t)&&typeof t!="string"&&(!tAe||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw EA(hB)}a(j7e,"checkIsPublicKey");function G7e(t){if(!gB.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw EA(Y3t)}a(G7e,"checkIsPrivateKey");function J3t(t){if(!gB.isBuffer(t)){if(typeof t=="string")return t;if(!tAe||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw EA($9)}}a(J3t,"checkIsSecretKey");function rAe(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}a(rAe,"fromBase64");function V7e(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}a(V7e,"toBase64");function EA(t){var e=[].slice.call(arguments,1),r=W7e.format.bind(W7e,t).apply(null,e);return new TypeError(r)}a(EA,"typeError");function X3t(t){return gB.isBuffer(t)||typeof t=="string"}a(X3t,"bufferOrString");function j9(t){return X3t(t)||(t=JSON.stringify(t)),t}a(j9,"normalizeInput");function z7e(t){return a(function(r,n){J3t(n),r=j9(r);var o=ah.createHmac("sha"+t,n),s=(o.update(r),o.digest("base64"));return rAe(s)},"sign")}a(z7e,"createHmacSigner");var eAe,Z3t="timingSafeEqual"in ah?a(function(e,r){return e.byteLength!==r.byteLength?!1:ah.timingSafeEqual(e,r)},"timingSafeEqual"):a(function(e,r){return eAe||(eAe=H7e()),eAe(e,r)},"timingSafeEqual");function eNt(t){return a(function(r,n,o){var s=z7e(t)(r,o);return Z3t(gB.from(n),gB.from(s))},"verify")}a(eNt,"createHmacVerifier");function K7e(t){return a(function(r,n){G7e(n),r=j9(r);var o=ah.createSign("RSA-SHA"+t),s=(o.update(r),o.sign(n,"base64"));return rAe(s)},"sign")}a(K7e,"createKeySigner");function Y7e(t){return a(function(r,n,o){j7e(o),r=j9(r),n=V7e(n);var s=ah.createVerify("RSA-SHA"+t);return s.update(r),s.verify(o,n,"base64")},"verify")}a(Y7e,"createKeyVerifier");function tNt(t){return a(function(r,n){G7e(n),r=j9(r);var o=ah.createSign("RSA-SHA"+t),s=(o.update(r),o.sign({key:n,padding:ah.constants.RSA_PKCS1_PSS_PADDING,saltLength:ah.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return rAe(s)},"sign")}a(tNt,"createPSSKeySigner");function rNt(t){return a(function(r,n,o){j7e(o),r=j9(r),n=V7e(n);var s=ah.createVerify("RSA-SHA"+t);return s.update(r),s.verify({key:o,padding:ah.constants.RSA_PKCS1_PSS_PADDING,saltLength:ah.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}a(rNt,"createPSSKeyVerifier");function nNt(t){var e=K7e(t);return a(function(){var n=e.apply(null,arguments);return n=$7e.derToJose(n,"ES"+t),n},"sign")}a(nNt,"createECDSASigner");function iNt(t){var e=Y7e(t);return a(function(n,o,s){o=$7e.joseToDer(o,"ES"+t).toString("base64");var c=e(n,o,s);return c},"verify")}a(iNt,"createECDSAVerifer");function oNt(){return a(function(){return""},"sign")}a(oNt,"createNoneSigner");function sNt(){return a(function(e,r){return r===""},"verify")}a(sNt,"createNoneVerifier");J7e.exports=a(function(e){var r={hs:z7e,rs:K7e,ps:tNt,es:nNt,none:oNt},n={hs:eNt,rs:Y7e,ps:rNt,es:iNt,none:sNt},o=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!o)throw EA(K3t,e);var s=(o[1]||o[3]).toLowerCase(),c=o[2];return{sign:r[s](c),verify:n[s](c)}},"jwa")});var iAe=W((Qln,X7e)=>{f();var aNt=require("buffer").Buffer;X7e.exports=a(function(e){return typeof e=="string"?e:typeof e=="number"||aNt.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var iQe=W((Hln,nQe)=>{f();var cNt=mB().Buffer,Z7e=Jge(),lNt=nAe(),uNt=require("stream"),eQe=iAe(),oAe=require("util");function tQe(t,e){return cNt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}a(tQe,"base64url");function dNt(t,e,r){r=r||"utf8";var n=tQe(eQe(t),"binary"),o=tQe(eQe(e),r);return oAe.format("%s.%s",n,o)}a(dNt,"jwsSecuredInput");function rQe(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,o=t.encoding,s=lNt(e.alg),c=dNt(e,r,o),l=s.sign(c,n);return oAe.format("%s.%s",c,l)}a(rQe,"jwsSign");function Fz(t){var e=t.secret||t.privateKey||t.key,r=new Z7e(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new Z7e(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}a(Fz,"SignStream");oAe.inherits(Fz,uNt);Fz.prototype.sign=a(function(){try{var e=rQe({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");Fz.sign=rQe;nQe.exports=Fz});var mQe=W((jln,pQe)=>{f();var sQe=mB().Buffer,oQe=Jge(),fNt=nAe(),pNt=require("stream"),aQe=iAe(),mNt=require("util"),hNt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function gNt(t){return Object.prototype.toString.call(t)==="[object Object]"}a(gNt,"isObject");function ANt(t){if(gNt(t))return t;try{return JSON.parse(t)}catch{return}}a(ANt,"safeJsonParse");function cQe(t){var e=t.split(".",1)[0];return ANt(sQe.from(e,"base64").toString("binary"))}a(cQe,"headerFromJWS");function yNt(t){return t.split(".",2).join(".")}a(yNt,"securedInputFromJWS");function lQe(t){return t.split(".")[2]}a(lQe,"signatureFromJWS");function CNt(t,e){e=e||"utf8";var r=t.split(".")[1];return sQe.from(r,"base64").toString(e)}a(CNt,"payloadFromJWS");function uQe(t){return hNt.test(t)&&!!cQe(t)}a(uQe,"isValidJws");function dQe(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=aQe(t);var o=lQe(t),s=yNt(t),c=fNt(e);return c.verify(s,o,r)}a(dQe,"jwsVerify");function fQe(t,e){if(e=e||{},t=aQe(t),!uQe(t))return null;var r=cQe(t);if(!r)return null;var n=CNt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:lQe(t)}}a(fQe,"jwsDecode");function AB(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new oQe(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new oQe(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}a(AB,"VerifyStream");mNt.inherits(AB,pNt);AB.prototype.verify=a(function(){try{var e=dQe(this.signature.buffer,this.algorithm,this.key.buffer),r=fQe(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");AB.decode=fQe;AB.isValid=uQe;AB.verify=dQe;pQe.exports=AB});var Qz=W(fT=>{f();var hQe=iQe(),Oz=mQe(),vNt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];fT.ALGORITHMS=vNt;fT.sign=hQe.sign;fT.verify=Oz.verify;fT.decode=Oz.decode;fT.isValid=Oz.isValid;fT.createSign=a(function(e){return new hQe(e)},"createSign");fT.createVerify=a(function(e){return new Oz(e)},"createVerify")});var sAe=W((Jln,gQe)=>{f();var xNt=Qz();gQe.exports=function(t,e){e=e||{};var r=xNt.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var o=JSON.parse(n);o!==null&&typeof o=="object"&&(n=o)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var G9=W((Zln,AQe)=>{f();var Uz=a(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");Uz.prototype=Object.create(Error.prototype);Uz.prototype.constructor=Uz;AQe.exports=Uz});var aAe=W((nun,CQe)=>{f();var yQe=G9(),qz=a(function(t,e){yQe.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");qz.prototype=Object.create(yQe.prototype);qz.prototype.constructor=qz;CQe.exports=qz});var cAe=W((sun,xQe)=>{f();var vQe=G9(),Hz=a(function(t,e){vQe.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");Hz.prototype=Object.create(vQe.prototype);Hz.prototype.constructor=Hz;xQe.exports=Hz});var lAe=W((lun,EQe)=>{f();var yB=1e3,CB=yB*60,vB=CB*60,lR=vB*24,ENt=lR*7,bNt=lR*365.25;EQe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return INt(t);if(r==="number"&&isFinite(t))return e.long?wNt(t):TNt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function INt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*bNt;case"weeks":case"week":case"w":return r*ENt;case"days":case"day":case"d":return r*lR;case"hours":case"hour":case"hrs":case"hr":case"h":return r*vB;case"minutes":case"minute":case"mins":case"min":case"m":return r*CB;case"seconds":case"second":case"secs":case"sec":case"s":return r*yB;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}a(INt,"parse");function TNt(t){var e=Math.abs(t);return e>=lR?Math.round(t/lR)+"d":e>=vB?Math.round(t/vB)+"h":e>=CB?Math.round(t/CB)+"m":e>=yB?Math.round(t/yB)+"s":t+"ms"}a(TNt,"fmtShort");function wNt(t){var e=Math.abs(t);return e>=lR?Wz(t,e,lR,"day"):e>=vB?Wz(t,e,vB,"hour"):e>=CB?Wz(t,e,CB,"minute"):e>=yB?Wz(t,e,yB,"second"):t+" ms"}a(wNt,"fmtLong");function Wz(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}a(Wz,"plural")});var uAe=W((fun,bQe)=>{f();var _Nt=lAe();bQe.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=_Nt(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var V9=W((mun,IQe)=>{"use strict";f();var SNt="2.0.0",RNt=Number.MAX_SAFE_INTEGER||9007199254740991,kNt=16,PNt=250,DNt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];IQe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:kNt,MAX_SAFE_BUILD_LENGTH:PNt,MAX_SAFE_INTEGER:RNt,RELEASE_TYPES:DNt,SEMVER_SPEC_VERSION:SNt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var z9=W((gun,TQe)=>{"use strict";f();var BNt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};TQe.exports=BNt});var xB=W((MC,wQe)=>{"use strict";f();var{MAX_SAFE_COMPONENT_LENGTH:dAe,MAX_SAFE_BUILD_LENGTH:NNt,MAX_LENGTH:MNt}=V9(),LNt=z9();MC=wQe.exports={};var FNt=MC.re=[],ONt=MC.safeRe=[],Br=MC.src=[],QNt=MC.safeSrc=[],Nr=MC.t={},UNt=0,fAe="[a-zA-Z0-9-]",qNt=[["\\s",1],["\\d",MNt],[fAe,NNt]],HNt=a(t=>{for(let[e,r]of qNt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),yi=a((t,e,r)=>{let n=HNt(e),o=UNt++;LNt(t,o,e),Nr[t]=o,Br[o]=e,QNt[o]=n,FNt[o]=new RegExp(e,r?"g":void 0),ONt[o]=new RegExp(n,r?"g":void 0)},"createToken");yi("NUMERICIDENTIFIER","0|[1-9]\\d*");yi("NUMERICIDENTIFIERLOOSE","\\d+");yi("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${fAe}*`);yi("MAINVERSION",`(${Br[Nr.NUMERICIDENTIFIER]})\\.(${Br[Nr.NUMERICIDENTIFIER]})\\.(${Br[Nr.NUMERICIDENTIFIER]})`);yi("MAINVERSIONLOOSE",`(${Br[Nr.NUMERICIDENTIFIERLOOSE]})\\.(${Br[Nr.NUMERICIDENTIFIERLOOSE]})\\.(${Br[Nr.NUMERICIDENTIFIERLOOSE]})`);yi("PRERELEASEIDENTIFIER",`(?:${Br[Nr.NONNUMERICIDENTIFIER]}|${Br[Nr.NUMERICIDENTIFIER]})`);yi("PRERELEASEIDENTIFIERLOOSE",`(?:${Br[Nr.NONNUMERICIDENTIFIER]}|${Br[Nr.NUMERICIDENTIFIERLOOSE]})`);yi("PRERELEASE",`(?:-(${Br[Nr.PRERELEASEIDENTIFIER]}(?:\\.${Br[Nr.PRERELEASEIDENTIFIER]})*))`);yi("PRERELEASELOOSE",`(?:-?(${Br[Nr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Br[Nr.PRERELEASEIDENTIFIERLOOSE]})*))`);yi("BUILDIDENTIFIER",`${fAe}+`);yi("BUILD",`(?:\\+(${Br[Nr.BUILDIDENTIFIER]}(?:\\.${Br[Nr.BUILDIDENTIFIER]})*))`);yi("FULLPLAIN",`v?${Br[Nr.MAINVERSION]}${Br[Nr.PRERELEASE]}?${Br[Nr.BUILD]}?`);yi("FULL",`^${Br[Nr.FULLPLAIN]}$`);yi("LOOSEPLAIN",`[v=\\s]*${Br[Nr.MAINVERSIONLOOSE]}${Br[Nr.PRERELEASELOOSE]}?${Br[Nr.BUILD]}?`);yi("LOOSE",`^${Br[Nr.LOOSEPLAIN]}$`);yi("GTLT","((?:<|>)?=?)");yi("XRANGEIDENTIFIERLOOSE",`${Br[Nr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);yi("XRANGEIDENTIFIER",`${Br[Nr.NUMERICIDENTIFIER]}|x|X|\\*`);yi("XRANGEPLAIN",`[v=\\s]*(${Br[Nr.XRANGEIDENTIFIER]})(?:\\.(${Br[Nr.XRANGEIDENTIFIER]})(?:\\.(${Br[Nr.XRANGEIDENTIFIER]})(?:${Br[Nr.PRERELEASE]})?${Br[Nr.BUILD]}?)?)?`);yi("XRANGEPLAINLOOSE",`[v=\\s]*(${Br[Nr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Br[Nr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Br[Nr.XRANGEIDENTIFIERLOOSE]})(?:${Br[Nr.PRERELEASELOOSE]})?${Br[Nr.BUILD]}?)?)?`);yi("XRANGE",`^${Br[Nr.GTLT]}\\s*${Br[Nr.XRANGEPLAIN]}$`);yi("XRANGELOOSE",`^${Br[Nr.GTLT]}\\s*${Br[Nr.XRANGEPLAINLOOSE]}$`);yi("COERCEPLAIN",`(^|[^\\d])(\\d{1,${dAe}})(?:\\.(\\d{1,${dAe}}))?(?:\\.(\\d{1,${dAe}}))?`);yi("COERCE",`${Br[Nr.COERCEPLAIN]}(?:$|[^\\d])`);yi("COERCEFULL",Br[Nr.COERCEPLAIN]+`(?:${Br[Nr.PRERELEASE]})?(?:${Br[Nr.BUILD]})?(?:$|[^\\d])`);yi("COERCERTL",Br[Nr.COERCE],!0);yi("COERCERTLFULL",Br[Nr.COERCEFULL],!0);yi("LONETILDE","(?:~>?)");yi("TILDETRIM",`(\\s*)${Br[Nr.LONETILDE]}\\s+`,!0);MC.tildeTrimReplace="$1~";yi("TILDE",`^${Br[Nr.LONETILDE]}${Br[Nr.XRANGEPLAIN]}$`);yi("TILDELOOSE",`^${Br[Nr.LONETILDE]}${Br[Nr.XRANGEPLAINLOOSE]}$`);yi("LONECARET","(?:\\^)");yi("CARETTRIM",`(\\s*)${Br[Nr.LONECARET]}\\s+`,!0);MC.caretTrimReplace="$1^";yi("CARET",`^${Br[Nr.LONECARET]}${Br[Nr.XRANGEPLAIN]}$`);yi("CARETLOOSE",`^${Br[Nr.LONECARET]}${Br[Nr.XRANGEPLAINLOOSE]}$`);yi("COMPARATORLOOSE",`^${Br[Nr.GTLT]}\\s*(${Br[Nr.LOOSEPLAIN]})$|^$`);yi("COMPARATOR",`^${Br[Nr.GTLT]}\\s*(${Br[Nr.FULLPLAIN]})$|^$`);yi("COMPARATORTRIM",`(\\s*)${Br[Nr.GTLT]}\\s*(${Br[Nr.LOOSEPLAIN]}|${Br[Nr.XRANGEPLAIN]})`,!0);MC.comparatorTrimReplace="$1$2$3";yi("HYPHENRANGE",`^\\s*(${Br[Nr.XRANGEPLAIN]})\\s+-\\s+(${Br[Nr.XRANGEPLAIN]})\\s*$`);yi("HYPHENRANGELOOSE",`^\\s*(${Br[Nr.XRANGEPLAINLOOSE]})\\s+-\\s+(${Br[Nr.XRANGEPLAINLOOSE]})\\s*$`);yi("STAR","(<|>)?=?\\s*\\*");yi("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");yi("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var $z=W((vun,_Qe)=>{"use strict";f();var WNt=Object.freeze({loose:!0}),$Nt=Object.freeze({}),jNt=a(t=>t?typeof t!="object"?WNt:t:$Nt,"parseOptions");_Qe.exports=jNt});var pAe=W((bun,kQe)=>{"use strict";f();var SQe=/^[0-9]+$/,RQe=a((t,e)=>{let r=SQe.test(t),n=SQe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),GNt=a((t,e)=>RQe(e,t),"rcompareIdentifiers");kQe.exports={compareIdentifiers:RQe,rcompareIdentifiers:GNt}});var qd=W((wun,DQe)=>{"use strict";f();var jz=z9(),{MAX_LENGTH:PQe,MAX_SAFE_INTEGER:Gz}=V9(),{safeRe:Vz,t:zz}=xB(),VNt=$z(),{compareIdentifiers:EB}=pAe(),mAe=class t{static{a(this,"SemVer")}constructor(e,r){if(r=VNt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>PQe)throw new TypeError(`version is longer than ${PQe} characters`);jz("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Vz[zz.LOOSE]:Vz[zz.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Gz||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Gz||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Gz||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let s=+o;if(s>=0&&s<Gz)return s}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(jz("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),EB(this.major,e.major)||EB(this.minor,e.minor)||EB(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=e.prerelease[r];if(jz("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return EB(n,o)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],o=e.build[r];if(jz("build compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return EB(n,o)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let o=`-${r}`.match(this.options.loose?Vz[zz.PRERELEASELOOSE]:Vz[zz.PRERELEASE]);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let s=[r,o];n===!1&&(s=[r]),EB(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};DQe.exports=mAe});var uR=W((Run,NQe)=>{"use strict";f();var BQe=qd(),zNt=a((t,e,r=!1)=>{if(t instanceof BQe)return t;try{return new BQe(t,e)}catch(n){if(!r)return null;throw n}},"parse");NQe.exports=zNt});var LQe=W((Dun,MQe)=>{"use strict";f();var KNt=uR(),YNt=a((t,e)=>{let r=KNt(t,e);return r?r.version:null},"valid");MQe.exports=YNt});var OQe=W((Lun,FQe)=>{"use strict";f();var JNt=uR(),XNt=a((t,e)=>{let r=JNt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");FQe.exports=XNt});var qQe=W((Qun,UQe)=>{"use strict";f();var QQe=qd(),ZNt=a((t,e,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new QQe(t instanceof QQe?t.version:t,r).inc(e,n,o).version}catch{return null}},"inc");UQe.exports=ZNt});var $Qe=W((Hun,WQe)=>{"use strict";f();var HQe=uR(),e8t=a((t,e)=>{let r=HQe(t,null,!0),n=HQe(e,null,!0),o=r.compare(n);if(o===0)return null;let s=o>0,c=s?r:n,l=s?n:r,u=!!c.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(l.compareMain(c)===0)return l.minor&&!l.patch?"minor":"patch"}let p=u?"pre":"";return r.major!==n.major?p+"major":r.minor!==n.minor?p+"minor":r.patch!==n.patch?p+"patch":"prerelease"},"diff");WQe.exports=e8t});var GQe=W((jun,jQe)=>{"use strict";f();var t8t=qd(),r8t=a((t,e)=>new t8t(t,e).major,"major");jQe.exports=r8t});var zQe=W((zun,VQe)=>{"use strict";f();var n8t=qd(),i8t=a((t,e)=>new n8t(t,e).minor,"minor");VQe.exports=i8t});var YQe=W((Jun,KQe)=>{"use strict";f();var o8t=qd(),s8t=a((t,e)=>new o8t(t,e).patch,"patch");KQe.exports=s8t});var XQe=W((edn,JQe)=>{"use strict";f();var a8t=uR(),c8t=a((t,e)=>{let r=a8t(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");JQe.exports=c8t});var ch=W((ndn,eUe)=>{"use strict";f();var ZQe=qd(),l8t=a((t,e,r)=>new ZQe(t,r).compare(new ZQe(e,r)),"compare");eUe.exports=l8t});var rUe=W((sdn,tUe)=>{"use strict";f();var u8t=ch(),d8t=a((t,e,r)=>u8t(e,t,r),"rcompare");tUe.exports=d8t});var iUe=W((ldn,nUe)=>{"use strict";f();var f8t=ch(),p8t=a((t,e)=>f8t(t,e,!0),"compareLoose");nUe.exports=p8t});var Kz=W((fdn,sUe)=>{"use strict";f();var oUe=qd(),m8t=a((t,e,r)=>{let n=new oUe(t,r),o=new oUe(e,r);return n.compare(o)||n.compareBuild(o)},"compareBuild");sUe.exports=m8t});var cUe=W((hdn,aUe)=>{"use strict";f();var h8t=Kz(),g8t=a((t,e)=>t.sort((r,n)=>h8t(r,n,e)),"sort");aUe.exports=g8t});var uUe=W((ydn,lUe)=>{"use strict";f();var A8t=Kz(),y8t=a((t,e)=>t.sort((r,n)=>A8t(n,r,e)),"rsort");lUe.exports=y8t});var K9=W((xdn,dUe)=>{"use strict";f();var C8t=ch(),v8t=a((t,e,r)=>C8t(t,e,r)>0,"gt");dUe.exports=v8t});var Yz=W((Idn,fUe)=>{"use strict";f();var x8t=ch(),E8t=a((t,e,r)=>x8t(t,e,r)<0,"lt");fUe.exports=E8t});var hAe=W((_dn,pUe)=>{"use strict";f();var b8t=ch(),I8t=a((t,e,r)=>b8t(t,e,r)===0,"eq");pUe.exports=I8t});var gAe=W((kdn,mUe)=>{"use strict";f();var T8t=ch(),w8t=a((t,e,r)=>T8t(t,e,r)!==0,"neq");mUe.exports=w8t});var Jz=W((Bdn,hUe)=>{"use strict";f();var _8t=ch(),S8t=a((t,e,r)=>_8t(t,e,r)>=0,"gte");hUe.exports=S8t});var Xz=W((Ldn,gUe)=>{"use strict";f();var R8t=ch(),k8t=a((t,e,r)=>R8t(t,e,r)<=0,"lte");gUe.exports=k8t});var AAe=W((Qdn,AUe)=>{"use strict";f();var P8t=hAe(),D8t=gAe(),B8t=K9(),N8t=Jz(),M8t=Yz(),L8t=Xz(),F8t=a((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return P8t(t,r,n);case"!=":return D8t(t,r,n);case">":return B8t(t,r,n);case">=":return N8t(t,r,n);case"<":return M8t(t,r,n);case"<=":return L8t(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");AUe.exports=F8t});var CUe=W((Hdn,yUe)=>{"use strict";f();var O8t=qd(),Q8t=uR(),{safeRe:Zz,t:eK}=xB(),U8t=a((t,e)=>{if(t instanceof O8t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Zz[eK.COERCEFULL]:Zz[eK.COERCE]);else{let u=e.includePrerelease?Zz[eK.COERCERTLFULL]:Zz[eK.COERCERTL],d;for(;(d=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||d.index+d[0].length!==r.index+r[0].length)&&(r=d),u.lastIndex=d.index+d[1].length+d[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],o=r[3]||"0",s=r[4]||"0",c=e.includePrerelease&&r[5]?`-${r[5]}`:"",l=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Q8t(`${n}.${o}.${s}${c}${l}`,e)},"coerce");yUe.exports=U8t});var xUe=W((jdn,vUe)=>{"use strict";f();var yAe=class{static{a(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,r)}return this}};vUe.exports=yAe});var lh=W((zdn,TUe)=>{"use strict";f();var q8t=/\s+/g,CAe=class t{static{a(this,"Range")}constructor(e,r){if(r=W8t(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof vAe)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(q8t," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!bUe(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&Y8t(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&z8t)|(this.options.loose&&K8t))+":"+e,o=EUe.get(n);if(o)return o;let s=this.options.loose,c=s?bp[Tf.HYPHENRANGELOOSE]:bp[Tf.HYPHENRANGE];e=e.replace(c,sMt(this.options.includePrerelease)),aa("hyphen replace",e),e=e.replace(bp[Tf.COMPARATORTRIM],j8t),aa("comparator trim",e),e=e.replace(bp[Tf.TILDETRIM],G8t),aa("tilde trim",e),e=e.replace(bp[Tf.CARETTRIM],V8t),aa("caret trim",e);let l=e.split(" ").map(m=>J8t(m,this.options)).join(" ").split(/\s+/).map(m=>oMt(m,this.options));s&&(l=l.filter(m=>(aa("loose invalid filter",m,this.options),!!m.match(bp[Tf.COMPARATORLOOSE])))),aa("range list",l);let u=new Map,d=l.map(m=>new vAe(m,this.options));for(let m of d){if(bUe(m))return[m];u.set(m.value,m)}u.size>1&&u.has("")&&u.delete("");let p=[...u.values()];return EUe.set(n,p),p}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>IUe(n,r)&&e.set.some(o=>IUe(o,r)&&n.every(s=>o.every(c=>s.intersects(c,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new $8t(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(aMt(this.set[r],e,this.options))return!0;return!1}};TUe.exports=CAe;var H8t=xUe(),EUe=new H8t,W8t=$z(),vAe=Y9(),aa=z9(),$8t=qd(),{safeRe:bp,t:Tf,comparatorTrimReplace:j8t,tildeTrimReplace:G8t,caretTrimReplace:V8t}=xB(),{FLAG_INCLUDE_PRERELEASE:z8t,FLAG_LOOSE:K8t}=V9(),bUe=a(t=>t.value==="<0.0.0-0","isNullSet"),Y8t=a(t=>t.value==="","isAny"),IUe=a((t,e)=>{let r=!0,n=t.slice(),o=n.pop();for(;r&&n.length;)r=n.every(s=>o.intersects(s,e)),o=n.pop();return r},"isSatisfiable"),J8t=a((t,e)=>(aa("comp",t,e),t=eMt(t,e),aa("caret",t),t=X8t(t,e),aa("tildes",t),t=rMt(t,e),aa("xrange",t),t=iMt(t,e),aa("stars",t),t),"parseComparator"),wf=a(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),X8t=a((t,e)=>t.trim().split(/\s+/).map(r=>Z8t(r,e)).join(" "),"replaceTildes"),Z8t=a((t,e)=>{let r=e.loose?bp[Tf.TILDELOOSE]:bp[Tf.TILDE];return t.replace(r,(n,o,s,c,l)=>{aa("tilde",t,n,o,s,c,l);let u;return wf(o)?u="":wf(s)?u=`>=${o}.0.0 <${+o+1}.0.0-0`:wf(c)?u=`>=${o}.${s}.0 <${o}.${+s+1}.0-0`:l?(aa("replaceTilde pr",l),u=`>=${o}.${s}.${c}-${l} <${o}.${+s+1}.0-0`):u=`>=${o}.${s}.${c} <${o}.${+s+1}.0-0`,aa("tilde return",u),u})},"replaceTilde"),eMt=a((t,e)=>t.trim().split(/\s+/).map(r=>tMt(r,e)).join(" "),"replaceCarets"),tMt=a((t,e)=>{aa("caret",t,e);let r=e.loose?bp[Tf.CARETLOOSE]:bp[Tf.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(o,s,c,l,u)=>{aa("caret",t,o,s,c,l,u);let d;return wf(s)?d="":wf(c)?d=`>=${s}.0.0${n} <${+s+1}.0.0-0`:wf(l)?s==="0"?d=`>=${s}.${c}.0${n} <${s}.${+c+1}.0-0`:d=`>=${s}.${c}.0${n} <${+s+1}.0.0-0`:u?(aa("replaceCaret pr",u),s==="0"?c==="0"?d=`>=${s}.${c}.${l}-${u} <${s}.${c}.${+l+1}-0`:d=`>=${s}.${c}.${l}-${u} <${s}.${+c+1}.0-0`:d=`>=${s}.${c}.${l}-${u} <${+s+1}.0.0-0`):(aa("no pr"),s==="0"?c==="0"?d=`>=${s}.${c}.${l}${n} <${s}.${c}.${+l+1}-0`:d=`>=${s}.${c}.${l}${n} <${s}.${+c+1}.0-0`:d=`>=${s}.${c}.${l} <${+s+1}.0.0-0`),aa("caret return",d),d})},"replaceCaret"),rMt=a((t,e)=>(aa("replaceXRanges",t,e),t.split(/\s+/).map(r=>nMt(r,e)).join(" ")),"replaceXRanges"),nMt=a((t,e)=>{t=t.trim();let r=e.loose?bp[Tf.XRANGELOOSE]:bp[Tf.XRANGE];return t.replace(r,(n,o,s,c,l,u)=>{aa("xRange",t,n,o,s,c,l,u);let d=wf(s),p=d||wf(c),m=p||wf(l),h=m;return o==="="&&h&&(o=""),u=e.includePrerelease?"-0":"",d?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&h?(p&&(c=0),l=0,o===">"?(o=">=",p?(s=+s+1,c=0,l=0):(c=+c+1,l=0)):o==="<="&&(o="<",p?s=+s+1:c=+c+1),o==="<"&&(u="-0"),n=`${o+s}.${c}.${l}${u}`):p?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:m&&(n=`>=${s}.${c}.0${u} <${s}.${+c+1}.0-0`),aa("xRange return",n),n})},"replaceXRange"),iMt=a((t,e)=>(aa("replaceStars",t,e),t.trim().replace(bp[Tf.STAR],"")),"replaceStars"),oMt=a((t,e)=>(aa("replaceGTE0",t,e),t.trim().replace(bp[e.includePrerelease?Tf.GTE0PRE:Tf.GTE0],"")),"replaceGTE0"),sMt=a(t=>(e,r,n,o,s,c,l,u,d,p,m,h)=>(wf(n)?r="":wf(o)?r=`>=${n}.0.0${t?"-0":""}`:wf(s)?r=`>=${n}.${o}.0${t?"-0":""}`:c?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,wf(d)?u="":wf(p)?u=`<${+d+1}.0.0-0`:wf(m)?u=`<${d}.${+p+1}.0-0`:h?u=`<=${d}.${p}.${m}-${h}`:t?u=`<${d}.${p}.${+m+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),"hyphenReplace"),aMt=a((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(aa(t[n].semver),t[n].semver!==vAe.ANY&&t[n].semver.prerelease.length>0){let o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0},"testSet")});var Y9=W((Jdn,PUe)=>{"use strict";f();var J9=Symbol("SemVer ANY"),bAe=class t{static{a(this,"Comparator")}static get ANY(){return J9}constructor(e,r){if(r=wUe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),EAe("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===J9?this.value="":this.value=this.operator+this.semver.version,EAe("comp",this)}parse(e){let r=this.options.loose?_Ue[SUe.COMPARATORLOOSE]:_Ue[SUe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new RUe(n[2],this.options.loose):this.semver=J9}toString(){return this.value}test(e){if(EAe("Comparator.test",e,this.options.loose),this.semver===J9||e===J9)return!0;if(typeof e=="string")try{e=new RUe(e,this.options)}catch{return!1}return xAe(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new kUe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new kUe(this.value,r).test(e.semver):(r=wUe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||xAe(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||xAe(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};PUe.exports=bAe;var wUe=$z(),{safeRe:_Ue,t:SUe}=xB(),xAe=AAe(),EAe=z9(),RUe=qd(),kUe=lh()});var X9=W((efn,DUe)=>{"use strict";f();var cMt=lh(),lMt=a((t,e,r)=>{try{e=new cMt(e,r)}catch{return!1}return e.test(t)},"satisfies");DUe.exports=lMt});var NUe=W((nfn,BUe)=>{"use strict";f();var uMt=lh(),dMt=a((t,e)=>new uMt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");BUe.exports=dMt});var LUe=W((sfn,MUe)=>{"use strict";f();var fMt=qd(),pMt=lh(),mMt=a((t,e,r)=>{let n=null,o=null,s=null;try{s=new pMt(e,r)}catch{return null}return t.forEach(c=>{s.test(c)&&(!n||o.compare(c)===-1)&&(n=c,o=new fMt(n,r))}),n},"maxSatisfying");MUe.exports=mMt});var OUe=W((lfn,FUe)=>{"use strict";f();var hMt=qd(),gMt=lh(),AMt=a((t,e,r)=>{let n=null,o=null,s=null;try{s=new gMt(e,r)}catch{return null}return t.forEach(c=>{s.test(c)&&(!n||o.compare(c)===1)&&(n=c,o=new hMt(n,r))}),n},"minSatisfying");FUe.exports=AMt});var qUe=W((ffn,UUe)=>{"use strict";f();var IAe=qd(),yMt=lh(),QUe=K9(),CMt=a((t,e)=>{t=new yMt(t,e);let r=new IAe("0.0.0");if(t.test(r)||(r=new IAe("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let o=t.set[n],s=null;o.forEach(c=>{let l=new IAe(c.semver.version);switch(c.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||QUe(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),s&&(!r||QUe(r,s))&&(r=s)}return r&&t.test(r)?r:null},"minVersion");UUe.exports=CMt});var WUe=W((hfn,HUe)=>{"use strict";f();var vMt=lh(),xMt=a((t,e)=>{try{return new vMt(t,e).range||"*"}catch{return null}},"validRange");HUe.exports=xMt});var tK=W((yfn,VUe)=>{"use strict";f();var EMt=qd(),GUe=Y9(),{ANY:bMt}=GUe,IMt=lh(),TMt=X9(),$Ue=K9(),jUe=Yz(),wMt=Xz(),_Mt=Jz(),SMt=a((t,e,r,n)=>{t=new EMt(t,n),e=new IMt(e,n);let o,s,c,l,u;switch(r){case">":o=$Ue,s=wMt,c=jUe,l=">",u=">=";break;case"<":o=jUe,s=_Mt,c=$Ue,l="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(TMt(t,e,n))return!1;for(let d=0;d<e.set.length;++d){let p=e.set[d],m=null,h=null;if(p.forEach(g=>{g.semver===bMt&&(g=new GUe(">=0.0.0")),m=m||g,h=h||g,o(g.semver,m.semver,n)?m=g:c(g.semver,h.semver,n)&&(h=g)}),m.operator===l||m.operator===u||(!h.operator||h.operator===l)&&s(t,h.semver))return!1;if(h.operator===u&&c(t,h.semver))return!1}return!0},"outside");VUe.exports=SMt});var KUe=W((xfn,zUe)=>{"use strict";f();var RMt=tK(),kMt=a((t,e,r)=>RMt(t,e,">",r),"gtr");zUe.exports=kMt});var JUe=W((Ifn,YUe)=>{"use strict";f();var PMt=tK(),DMt=a((t,e,r)=>PMt(t,e,"<",r),"ltr");YUe.exports=DMt});var eqe=W((_fn,ZUe)=>{"use strict";f();var XUe=lh(),BMt=a((t,e,r)=>(t=new XUe(t,r),e=new XUe(e,r),t.intersects(e,r)),"intersects");ZUe.exports=BMt});var rqe=W((kfn,tqe)=>{"use strict";f();var NMt=X9(),MMt=ch();tqe.exports=(t,e,r)=>{let n=[],o=null,s=null,c=t.sort((p,m)=>MMt(p,m,r));for(let p of c)NMt(p,e,r)?(s=p,o||(o=p)):(s&&n.push([o,s]),s=null,o=null);o&&n.push([o,null]);let l=[];for(let[p,m]of n)p===m?l.push(p):!m&&p===c[0]?l.push("*"):m?p===c[0]?l.push(`<=${m}`):l.push(`${p} - ${m}`):l.push(`>=${p}`);let u=l.join(" || "),d=typeof e.raw=="string"?e.raw:String(e);return u.length<d.length?u:e}});var cqe=W((Dfn,aqe)=>{"use strict";f();var nqe=lh(),wAe=Y9(),{ANY:TAe}=wAe,Z9=X9(),_Ae=ch(),LMt=a((t,e,r={})=>{if(t===e)return!0;t=new nqe(t,r),e=new nqe(e,r);let n=!1;e:for(let o of t.set){for(let s of e.set){let c=OMt(o,s,r);if(n=n||c!==null,c)continue e}if(n)return!1}return!0},"subset"),FMt=[new wAe(">=0.0.0-0")],iqe=[new wAe(">=0.0.0")],OMt=a((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===TAe){if(e.length===1&&e[0].semver===TAe)return!0;r.includePrerelease?t=FMt:t=iqe}if(e.length===1&&e[0].semver===TAe){if(r.includePrerelease)return!0;e=iqe}let n=new Set,o,s;for(let g of t)g.operator===">"||g.operator===">="?o=oqe(o,g,r):g.operator==="<"||g.operator==="<="?s=sqe(s,g,r):n.add(g.semver);if(n.size>1)return null;let c;if(o&&s){if(c=_Ae(o.semver,s.semver,r),c>0)return null;if(c===0&&(o.operator!==">="||s.operator!=="<="))return null}for(let g of n){if(o&&!Z9(g,String(o),r)||s&&!Z9(g,String(s),r))return null;for(let A of e)if(!Z9(g,String(A),r))return!1;return!0}let l,u,d,p,m=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;m&&m.prerelease.length===1&&s.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let g of e){if(p=p||g.operator===">"||g.operator===">=",d=d||g.operator==="<"||g.operator==="<=",o){if(h&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===h.major&&g.semver.minor===h.minor&&g.semver.patch===h.patch&&(h=!1),g.operator===">"||g.operator===">="){if(l=oqe(o,g,r),l===g&&l!==o)return!1}else if(o.operator===">="&&!Z9(o.semver,String(g),r))return!1}if(s){if(m&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===m.major&&g.semver.minor===m.minor&&g.semver.patch===m.patch&&(m=!1),g.operator==="<"||g.operator==="<="){if(u=sqe(s,g,r),u===g&&u!==s)return!1}else if(s.operator==="<="&&!Z9(s.semver,String(g),r))return!1}if(!g.operator&&(s||o)&&c!==0)return!1}return!(o&&d&&!s&&c!==0||s&&p&&!o&&c!==0||h||m)},"simpleSubset"),oqe=a((t,e,r)=>{if(!t)return e;let n=_Ae(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),sqe=a((t,e,r)=>{if(!t)return e;let n=_Ae(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");aqe.exports=LMt});var bB=W((Mfn,dqe)=>{"use strict";f();var SAe=xB(),lqe=V9(),QMt=qd(),uqe=pAe(),UMt=uR(),qMt=LQe(),HMt=OQe(),WMt=qQe(),$Mt=$Qe(),jMt=GQe(),GMt=zQe(),VMt=YQe(),zMt=XQe(),KMt=ch(),YMt=rUe(),JMt=iUe(),XMt=Kz(),ZMt=cUe(),eLt=uUe(),tLt=K9(),rLt=Yz(),nLt=hAe(),iLt=gAe(),oLt=Jz(),sLt=Xz(),aLt=AAe(),cLt=CUe(),lLt=Y9(),uLt=lh(),dLt=X9(),fLt=NUe(),pLt=LUe(),mLt=OUe(),hLt=qUe(),gLt=WUe(),ALt=tK(),yLt=KUe(),CLt=JUe(),vLt=eqe(),xLt=rqe(),ELt=cqe();dqe.exports={parse:UMt,valid:qMt,clean:HMt,inc:WMt,diff:$Mt,major:jMt,minor:GMt,patch:VMt,prerelease:zMt,compare:KMt,rcompare:YMt,compareLoose:JMt,compareBuild:XMt,sort:ZMt,rsort:eLt,gt:tLt,lt:rLt,eq:nLt,neq:iLt,gte:oLt,lte:sLt,cmp:aLt,coerce:cLt,Comparator:lLt,Range:uLt,satisfies:dLt,toComparators:fLt,maxSatisfying:pLt,minSatisfying:mLt,minVersion:hLt,validRange:gLt,outside:ALt,gtr:yLt,ltr:CLt,intersects:vLt,simplifyRange:xLt,subset:ELt,SemVer:QMt,re:SAe.re,src:SAe.src,tokens:SAe.t,SEMVER_SPEC_VERSION:lqe.SEMVER_SPEC_VERSION,RELEASE_TYPES:lqe.RELEASE_TYPES,compareIdentifiers:uqe.compareIdentifiers,rcompareIdentifiers:uqe.rcompareIdentifiers}});var pqe=W((Ffn,fqe)=>{f();var bLt=bB();fqe.exports=bLt.satisfies(process.version,">=15.7.0")});var hqe=W((Qfn,mqe)=>{f();var ILt=bB();mqe.exports=ILt.satisfies(process.version,">=16.9.0")});var RAe=W((qfn,gqe)=>{f();var TLt=pqe(),wLt=hqe(),_Lt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},SLt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};gqe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=_Lt[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(TLt)switch(r){case"ec":let o=e.asymmetricKeyDetails.namedCurve,s=SLt[t];if(o!==s)throw new Error(`"alg" parameter "${t}" requires curve "${s}".`);break;case"rsa-pss":if(wLt){let c=parseInt(t.slice(-3),10),{hashAlgorithm:l,mgf1HashAlgorithm:u,saltLength:d}=e.asymmetricKeyDetails;if(l!==`sha${c}`||u!==l)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(d!==void 0&&d>c>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var kAe=W((Wfn,Aqe)=>{f();var RLt=bB();Aqe.exports=RLt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var vqe=W((jfn,Cqe)=>{f();var Hs=G9(),kLt=aAe(),yqe=cAe(),PLt=sAe(),DLt=uAe(),BLt=RAe(),NLt=kAe(),MLt=Qz(),{KeyObject:LLt,createSecretKey:FLt,createPublicKey:OLt}=require("crypto"),PAe=["RS256","RS384","RS512"],QLt=["ES256","ES384","ES512"],DAe=["RS256","RS384","RS512"],ULt=["HS256","HS384","HS512"];NLt&&(PAe.splice(PAe.length,0,"PS256","PS384","PS512"),DAe.splice(DAe.length,0,"PS256","PS384","PS512"));Cqe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let o;if(n?o=n:o=a(function(p,m){if(p)throw p;return m},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return o(new Hs("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return o(new Hs("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return o(new Hs("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return o(new Hs("jwt must be provided"));if(typeof t!="string")return o(new Hs("jwt must be a string"));let c=t.split(".");if(c.length!==3)return o(new Hs("jwt malformed"));let l;try{l=PLt(t,{complete:!0})}catch(p){return o(p)}if(!l)return o(new Hs("invalid token"));let u=l.header,d;if(typeof e=="function"){if(!n)return o(new Hs("verify must be called asynchronous if secret or public key is provided as a callback"));d=e}else d=a(function(p,m){return m(null,e)},"getSecret");return d(u,function(p,m){if(p)return o(new Hs("error in secret or public key callback: "+p.message));let h=c[2].trim()!=="";if(!h&&m)return o(new Hs("jwt signature is required"));if(h&&!m)return o(new Hs("secret or public key must be provided"));if(!h&&!r.algorithms)return o(new Hs('please specify "none" in "algorithms" to verify unsigned tokens'));if(m!=null&&!(m instanceof LLt))try{m=OLt(m)}catch{try{m=FLt(typeof m=="string"?Buffer.from(m):m)}catch{return o(new Hs("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(m.type==="secret"?r.algorithms=ULt:["rsa","rsa-pss"].includes(m.asymmetricKeyType)?r.algorithms=DAe:m.asymmetricKeyType==="ec"?r.algorithms=QLt:r.algorithms=PAe),r.algorithms.indexOf(l.header.alg)===-1)return o(new Hs("invalid algorithm"));if(u.alg.startsWith("HS")&&m.type!=="secret")return o(new Hs(`secretOrPublicKey must be a symmetric key when using ${u.alg}`));if(/^(?:RS|PS|ES)/.test(u.alg)&&m.type!=="public")return o(new Hs(`secretOrPublicKey must be an asymmetric key when using ${u.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{BLt(u.alg,m)}catch(y){return o(y)}let g;try{g=MLt.verify(t,l.header.alg,m)}catch(y){return o(y)}if(!g)return o(new Hs("invalid signature"));let A=l.payload;if(typeof A.nbf<"u"&&!r.ignoreNotBefore){if(typeof A.nbf!="number")return o(new Hs("invalid nbf value"));if(A.nbf>s+(r.clockTolerance||0))return o(new kLt("jwt not active",new Date(A.nbf*1e3)))}if(typeof A.exp<"u"&&!r.ignoreExpiration){if(typeof A.exp!="number")return o(new Hs("invalid exp value"));if(s>=A.exp+(r.clockTolerance||0))return o(new yqe("jwt expired",new Date(A.exp*1e3)))}if(r.audience){let y=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(A.aud)?A.aud:[A.aud]).some(function(I){return y.some(function(_){return _ instanceof RegExp?_.test(I):_===I})}))return o(new Hs("jwt audience invalid. expected: "+y.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&A.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(A.iss)===-1))return o(new Hs("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&A.sub!==r.subject)return o(new Hs("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&A.jti!==r.jwtid)return o(new Hs("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&A.nonce!==r.nonce)return o(new Hs("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof A.iat!="number")return o(new Hs("iat required when maxAge is specified"));let y=DLt(r.maxAge,A.iat);if(typeof y>"u")return o(new Hs('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=y+(r.clockTolerance||0))return o(new yqe("maxAge exceeded",new Date(y*1e3)))}if(r.complete===!0){let y=l.signature;return o(null,{header:u,payload:A,signature:y})}return o(null,A)})}});var wqe=W((zfn,Tqe)=>{f();var xqe=1/0,bqe=9007199254740991,qLt=17976931348623157e292,Eqe=NaN,HLt="[object Arguments]",WLt="[object Function]",$Lt="[object GeneratorFunction]",jLt="[object String]",GLt="[object Symbol]",VLt=/^\s+|\s+$/g,zLt=/^[-+]0x[0-9a-f]+$/i,KLt=/^0b[01]+$/i,YLt=/^0o[0-7]+$/i,JLt=/^(?:0|[1-9]\d*)$/,XLt=parseInt;function ZLt(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}a(ZLt,"arrayMap");function eFt(t,e,r,n){for(var o=t.length,s=r+(n?1:-1);n?s--:++s<o;)if(e(t[s],s,t))return s;return-1}a(eFt,"baseFindIndex");function tFt(t,e,r){if(e!==e)return eFt(t,rFt,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}a(tFt,"baseIndexOf");function rFt(t){return t!==t}a(rFt,"baseIsNaN");function nFt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}a(nFt,"baseTimes");function iFt(t,e){return ZLt(e,function(r){return t[r]})}a(iFt,"baseValues");function oFt(t,e){return function(r){return t(e(r))}}a(oFt,"overArg");var rK=Object.prototype,NAe=rK.hasOwnProperty,nK=rK.toString,sFt=rK.propertyIsEnumerable,aFt=oFt(Object.keys,Object),cFt=Math.max;function lFt(t,e){var r=Iqe(t)||mFt(t)?nFt(t.length,String):[],n=r.length,o=!!n;for(var s in t)(e||NAe.call(t,s))&&!(o&&(s=="length"||dFt(s,n)))&&r.push(s);return r}a(lFt,"arrayLikeKeys");function uFt(t){if(!fFt(t))return aFt(t);var e=[];for(var r in Object(t))NAe.call(t,r)&&r!="constructor"&&e.push(r);return e}a(uFt,"baseKeys");function dFt(t,e){return e=e??bqe,!!e&&(typeof t=="number"||JLt.test(t))&&t>-1&&t%1==0&&t<e}a(dFt,"isIndex");function fFt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||rK;return t===r}a(fFt,"isPrototype");function pFt(t,e,r,n){t=MAe(t)?t:IFt(t),r=r&&!n?xFt(r):0;var o=t.length;return r<0&&(r=cFt(o+r,0)),yFt(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&tFt(t,e,r)>-1}a(pFt,"includes");function mFt(t){return hFt(t)&&NAe.call(t,"callee")&&(!sFt.call(t,"callee")||nK.call(t)==HLt)}a(mFt,"isArguments");var Iqe=Array.isArray;function MAe(t){return t!=null&&AFt(t.length)&&!gFt(t)}a(MAe,"isArrayLike");function hFt(t){return LAe(t)&&MAe(t)}a(hFt,"isArrayLikeObject");function gFt(t){var e=BAe(t)?nK.call(t):"";return e==WLt||e==$Lt}a(gFt,"isFunction");function AFt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bqe}a(AFt,"isLength");function BAe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}a(BAe,"isObject");function LAe(t){return!!t&&typeof t=="object"}a(LAe,"isObjectLike");function yFt(t){return typeof t=="string"||!Iqe(t)&&LAe(t)&&nK.call(t)==jLt}a(yFt,"isString");function CFt(t){return typeof t=="symbol"||LAe(t)&&nK.call(t)==GLt}a(CFt,"isSymbol");function vFt(t){if(!t)return t===0?t:0;if(t=EFt(t),t===xqe||t===-xqe){var e=t<0?-1:1;return e*qLt}return t===t?t:0}a(vFt,"toFinite");function xFt(t){var e=vFt(t),r=e%1;return e===e?r?e-r:e:0}a(xFt,"toInteger");function EFt(t){if(typeof t=="number")return t;if(CFt(t))return Eqe;if(BAe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=BAe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(VLt,"");var r=KLt.test(t);return r||YLt.test(t)?XLt(t.slice(2),r?2:8):zLt.test(t)?Eqe:+t}a(EFt,"toNumber");function bFt(t){return MAe(t)?lFt(t):uFt(t)}a(bFt,"keys");function IFt(t){return t?iFt(t,bFt(t)):[]}a(IFt,"values");Tqe.exports=pFt});var Sqe=W((Jfn,_qe)=>{f();var TFt="[object Boolean]",wFt=Object.prototype,_Ft=wFt.toString;function SFt(t){return t===!0||t===!1||RFt(t)&&_Ft.call(t)==TFt}a(SFt,"isBoolean");function RFt(t){return!!t&&typeof t=="object"}a(RFt,"isObjectLike");_qe.exports=SFt});var Bqe=W((epn,Dqe)=>{f();var Rqe=1/0,kFt=17976931348623157e292,kqe=NaN,PFt="[object Symbol]",DFt=/^\s+|\s+$/g,BFt=/^[-+]0x[0-9a-f]+$/i,NFt=/^0b[01]+$/i,MFt=/^0o[0-7]+$/i,LFt=parseInt,FFt=Object.prototype,OFt=FFt.toString;function QFt(t){return typeof t=="number"&&t==WFt(t)}a(QFt,"isInteger");function Pqe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}a(Pqe,"isObject");function UFt(t){return!!t&&typeof t=="object"}a(UFt,"isObjectLike");function qFt(t){return typeof t=="symbol"||UFt(t)&&OFt.call(t)==PFt}a(qFt,"isSymbol");function HFt(t){if(!t)return t===0?t:0;if(t=$Ft(t),t===Rqe||t===-Rqe){var e=t<0?-1:1;return e*kFt}return t===t?t:0}a(HFt,"toFinite");function WFt(t){var e=HFt(t),r=e%1;return e===e?r?e-r:e:0}a(WFt,"toInteger");function $Ft(t){if(typeof t=="number")return t;if(qFt(t))return kqe;if(Pqe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Pqe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(DFt,"");var r=NFt.test(t);return r||MFt.test(t)?LFt(t.slice(2),r?2:8):BFt.test(t)?kqe:+t}a($Ft,"toNumber");Dqe.exports=QFt});var Mqe=W((npn,Nqe)=>{f();var jFt="[object Number]",GFt=Object.prototype,VFt=GFt.toString;function zFt(t){return!!t&&typeof t=="object"}a(zFt,"isObjectLike");function KFt(t){return typeof t=="number"||zFt(t)&&VFt.call(t)==jFt}a(KFt,"isNumber");Nqe.exports=KFt});var Qqe=W((spn,Oqe)=>{f();var YFt="[object Object]";function JFt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}a(JFt,"isHostObject");function XFt(t,e){return function(r){return t(e(r))}}a(XFt,"overArg");var ZFt=Function.prototype,Lqe=Object.prototype,Fqe=ZFt.toString,e6t=Lqe.hasOwnProperty,t6t=Fqe.call(Object),r6t=Lqe.toString,n6t=XFt(Object.getPrototypeOf,Object);function i6t(t){return!!t&&typeof t=="object"}a(i6t,"isObjectLike");function o6t(t){if(!i6t(t)||r6t.call(t)!=YFt||JFt(t))return!1;var e=n6t(t);if(e===null)return!0;var r=e6t.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Fqe.call(r)==t6t}a(o6t,"isPlainObject");Oqe.exports=o6t});var qqe=W((lpn,Uqe)=>{f();var s6t="[object String]",a6t=Object.prototype,c6t=a6t.toString,l6t=Array.isArray;function u6t(t){return!!t&&typeof t=="object"}a(u6t,"isObjectLike");function d6t(t){return typeof t=="string"||!l6t(t)&&u6t(t)&&c6t.call(t)==s6t}a(d6t,"isString");Uqe.exports=d6t});var Gqe=W((fpn,jqe)=>{f();var f6t="Expected a function",Hqe=1/0,p6t=17976931348623157e292,Wqe=NaN,m6t="[object Symbol]",h6t=/^\s+|\s+$/g,g6t=/^[-+]0x[0-9a-f]+$/i,A6t=/^0b[01]+$/i,y6t=/^0o[0-7]+$/i,C6t=parseInt,v6t=Object.prototype,x6t=v6t.toString;function E6t(t,e){var r;if(typeof e!="function")throw new TypeError(f6t);return t=_6t(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}a(E6t,"before");function b6t(t){return E6t(2,t)}a(b6t,"once");function $qe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}a($qe,"isObject");function I6t(t){return!!t&&typeof t=="object"}a(I6t,"isObjectLike");function T6t(t){return typeof t=="symbol"||I6t(t)&&x6t.call(t)==m6t}a(T6t,"isSymbol");function w6t(t){if(!t)return t===0?t:0;if(t=S6t(t),t===Hqe||t===-Hqe){var e=t<0?-1:1;return e*p6t}return t===t?t:0}a(w6t,"toFinite");function _6t(t){var e=w6t(t),r=e%1;return e===e?r?e-r:e:0}a(_6t,"toInteger");function S6t(t){if(typeof t=="number")return t;if(T6t(t))return Wqe;if($qe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=$qe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(h6t,"");var r=A6t.test(t);return r||y6t.test(t)?C6t(t.slice(2),r?2:8):g6t.test(t)?Wqe:+t}a(S6t,"toNumber");jqe.exports=b6t});var tHe=W((hpn,eHe)=>{f();var Vqe=uAe(),R6t=kAe(),k6t=RAe(),zqe=Qz(),P6t=wqe(),iK=Sqe(),Kqe=Bqe(),FAe=Mqe(),Jqe=Qqe(),pT=qqe(),D6t=Gqe(),{KeyObject:B6t,createSecretKey:N6t,createPrivateKey:M6t}=require("crypto"),Xqe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];R6t&&Xqe.splice(3,0,"PS256","PS384","PS512");var L6t={expiresIn:{isValid:a(function(t){return Kqe(t)||pT(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:a(function(t){return Kqe(t)||pT(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:a(function(t){return pT(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:P6t.bind(null,Xqe),message:'"algorithm" must be a valid string enum value'},header:{isValid:Jqe,message:'"header" must be an object'},encoding:{isValid:pT,message:'"encoding" must be a string'},issuer:{isValid:pT,message:'"issuer" must be a string'},subject:{isValid:pT,message:'"subject" must be a string'},jwtid:{isValid:pT,message:'"jwtid" must be a string'},noTimestamp:{isValid:iK,message:'"noTimestamp" must be a boolean'},keyid:{isValid:pT,message:'"keyid" must be a string'},mutatePayload:{isValid:iK,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:iK,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:iK,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},F6t={iat:{isValid:FAe,message:'"iat" should be a number of seconds'},exp:{isValid:FAe,message:'"exp" should be a number of seconds'},nbf:{isValid:FAe,message:'"nbf" should be a number of seconds'}};function Zqe(t,e,r,n){if(!Jqe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(o){let s=t[o];if(!s){if(!e)throw new Error('"'+o+'" is not allowed in "'+n+'"');return}if(!s.isValid(r[o]))throw new Error(s.message)})}a(Zqe,"validate");function O6t(t){return Zqe(L6t,!1,t,"options")}a(O6t,"validateOptions");function Q6t(t){return Zqe(F6t,!0,t,"payload")}a(Q6t,"validatePayload");var Yqe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},U6t=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];eHe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let o=typeof t=="object"&&!Buffer.isBuffer(t),s=Object.assign({alg:r.algorithm||"HS256",typ:o?"JWT":void 0,kid:r.keyid},r.header);function c(d){if(n)return n(d);throw d}if(a(c,"failure"),!e&&r.algorithm!=="none")return c(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof B6t))try{e=M6t(e)}catch{try{e=N6t(typeof e=="string"?Buffer.from(e):e)}catch{return c(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&e.type!=="secret")return c(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(e.type!=="private")return c(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!r.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return c(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof t>"u")return c(new Error("payload is required"));if(o){try{Q6t(t)}catch(d){return c(d)}r.mutatePayload||(t=Object.assign({},t))}else{let d=U6t.filter(function(p){return typeof r[p]<"u"});if(d.length>0)return c(new Error("invalid "+d.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return c(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return c(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{O6t(r)}catch(d){return c(d)}if(!r.allowInvalidAsymmetricKeyTypes)try{k6t(s.alg,e)}catch(d){return c(d)}let l=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:o&&(t.iat=l),typeof r.notBefore<"u"){try{t.nbf=Vqe(r.notBefore,l)}catch(d){return c(d)}if(typeof t.nbf>"u")return c(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=Vqe(r.expiresIn,l)}catch(d){return c(d)}if(typeof t.exp>"u")return c(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(Yqe).forEach(function(d){let p=Yqe[d];if(typeof r[d]<"u"){if(typeof t[p]<"u")return c(new Error('Bad "options.'+d+'" option. The payload already has an "'+p+'" property.'));t[p]=r[d]}});let u=r.encoding||"utf8";if(typeof n=="function")n=n&&D6t(n),zqe.createSign({header:s,privateKey:e,payload:t,encoding:u}).once("error",n).once("done",function(d){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&d.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));n(null,d)});else{let d=zqe.sign({header:s,payload:t,secret:e,encoding:u});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&d.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return d}}});var nHe=W((ypn,rHe)=>{f();rHe.exports={decode:sAe(),verify:vqe(),sign:tHe(),JsonWebTokenError:G9(),NotBeforeError:aAe(),TokenExpiredError:cAe()}});var pye=W((XCn,JHe)=>{f();function U9t(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=o,r.enabled=c,r.humanize=lAe(),r.destroy=d,Object.keys(t).forEach(p=>{r[p]=t[p]}),r.names=[],r.skips=[],r.formatters={};function e(p){let m=0;for(let h=0;h<p.length;h++)m=(m<<5)-m+p.charCodeAt(h),m|=0;return r.colors[Math.abs(m)%r.colors.length]}a(e,"selectColor"),r.selectColor=e;function r(p){let m,h=null,g,A;function y(...v){if(!y.enabled)return;let b=y,I=Number(new Date),_=I-(m||I);b.diff=_,b.prev=m,b.curr=I,m=I,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(F,O)=>{if(F==="%%")return"%";k++;let Y=r.formatters[O];if(typeof Y=="function"){let z=v[k];F=Y.call(b,z),v.splice(k,1),k--}return F}),r.formatArgs.call(b,v),(b.log||r.log).apply(b,v)}return a(y,"debug"),y.namespace=p,y.useColors=r.useColors(),y.color=r.selectColor(p),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:a(()=>h!==null?h:(g!==r.namespaces&&(g=r.namespaces,A=r.enabled(p)),A),"get"),set:a(v=>{h=v},"set")}),typeof r.init=="function"&&r.init(y),y}a(r,"createDebug");function n(p,m){let h=r(this.namespace+(typeof m>"u"?":":m)+p);return h.log=this.log,h}a(n,"extend");function o(p){r.save(p),r.namespaces=p,r.names=[],r.skips=[];let m,h=(typeof p=="string"?p:"").split(/[\s,]+/),g=h.length;for(m=0;m<g;m++)h[m]&&(p=h[m].replace(/\*/g,".*?"),p[0]==="-"?r.skips.push(new RegExp("^"+p.slice(1)+"$")):r.names.push(new RegExp("^"+p+"$")))}a(o,"enable");function s(){let p=[...r.names.map(l),...r.skips.map(l).map(m=>"-"+m)].join(",");return r.enable(""),p}a(s,"disable");function c(p){if(p[p.length-1]==="*")return!0;let m,h;for(m=0,h=r.skips.length;m<h;m++)if(r.skips[m].test(p))return!1;for(m=0,h=r.names.length;m<h;m++)if(r.names[m].test(p))return!0;return!1}a(c,"enabled");function l(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}a(l,"toNamespace");function u(p){return p instanceof Error?p.stack||p.message:p}a(u,"coerce");function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a(d,"destroy"),r.enable(r.load()),r}a(U9t,"setup");JHe.exports=U9t});var XHe=W((H0,BK)=>{f();H0.formatArgs=H9t;H0.save=W9t;H0.load=$9t;H0.useColors=q9t;H0.storage=j9t();H0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();H0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function q9t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}a(q9t,"useColors");function H9t(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+BK.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}a(H9t,"formatArgs");H0.log=console.debug||console.log||(()=>{});function W9t(t){try{t?H0.storage.setItem("debug",t):H0.storage.removeItem("debug")}catch{}}a(W9t,"save");function $9t(){let t;try{t=H0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}a($9t,"load");function j9t(){try{return localStorage}catch{}}a(j9t,"localstorage");BK.exports=pye()(H0);var{formatters:G9t}=BK.exports;G9t.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var eWe=W((nvn,ZHe)=>{"use strict";f();ZHe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),o=e.indexOf("--");return n!==-1&&(o===-1||n<o)}});var nWe=W((ovn,rWe)=>{"use strict";f();var V9t=require("os"),tWe=require("tty"),dh=eWe(),{env:fu}=process,yT;dh("no-color")||dh("no-colors")||dh("color=false")||dh("color=never")?yT=0:(dh("color")||dh("colors")||dh("color=true")||dh("color=always"))&&(yT=1);"FORCE_COLOR"in fu&&(fu.FORCE_COLOR==="true"?yT=1:fu.FORCE_COLOR==="false"?yT=0:yT=fu.FORCE_COLOR.length===0?1:Math.min(parseInt(fu.FORCE_COLOR,10),3));function mye(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}a(mye,"translateLevel");function hye(t,e){if(yT===0)return 0;if(dh("color=16m")||dh("color=full")||dh("color=truecolor"))return 3;if(dh("color=256"))return 2;if(t&&!e&&yT===void 0)return 0;let r=yT||0;if(fu.TERM==="dumb")return r;if(process.platform==="win32"){let n=V9t.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in fu)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in fu)||fu.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in fu)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(fu.TEAMCITY_VERSION)?1:0;if(fu.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in fu){let n=parseInt((fu.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(fu.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(fu.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(fu.TERM)||"COLORTERM"in fu?1:r}a(hye,"supportsColor");function z9t(t){let e=hye(t,t&&t.isTTY);return mye(e)}a(z9t,"getSupportLevel");rWe.exports={supportsColor:z9t,stdout:mye(hye(!0,tWe.isatty(1))),stderr:mye(hye(!0,tWe.isatty(2)))}});var oWe=W((id,MK)=>{f();var K9t=require("tty"),NK=require("util");id.init=rOt;id.log=Z9t;id.formatArgs=J9t;id.save=eOt;id.load=tOt;id.useColors=Y9t;id.destroy=NK.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");id.colors=[6,2,3,4,5,1];try{let t=nWe();t&&(t.stderr||t).level>=2&&(id.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}id.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Y9t(){return"colors"in id.inspectOpts?!!id.inspectOpts.colors:K9t.isatty(process.stderr.fd)}a(Y9t,"useColors");function J9t(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,o="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${o};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(o+"m+"+MK.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=X9t()+e+" "+t[0]}a(J9t,"formatArgs");function X9t(){return id.inspectOpts.hideDate?"":new Date().toISOString()+" "}a(X9t,"getDate");function Z9t(...t){return process.stderr.write(NK.format(...t)+`
`)}a(Z9t,"log");function eOt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}a(eOt,"save");function tOt(){return process.env.DEBUG}a(tOt,"load");function rOt(t){t.inspectOpts={};let e=Object.keys(id.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=id.inspectOpts[e[r]]}a(rOt,"init");MK.exports=pye()(id);var{formatters:iWe}=MK.exports;iWe.o=function(t){return this.inspectOpts.colors=this.useColors,NK.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};iWe.O=function(t){return this.inspectOpts.colors=this.useColors,NK.inspect(t,this.inspectOpts)}});var OC=W((uvn,gye)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?gye.exports=XHe():gye.exports=oWe()});var cWe=W(wp=>{"use strict";f();var nOt=wp&&wp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iOt=wp&&wp.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sWe=wp&&wp.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&nOt(e,t,r);return iOt(e,t),e};Object.defineProperty(wp,"__esModule",{value:!0});wp.req=wp.json=wp.toBuffer=void 0;var oOt=sWe(require("http")),sOt=sWe(require("https"));async function aWe(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}a(aWe,"toBuffer");wp.toBuffer=aWe;async function aOt(t){let r=(await aWe(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let o=n;throw o.message+=` (input: ${r})`,o}}a(aOt,"json");wp.json=aOt;function cOt(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?sOt:oOt).request(t,e),o=new Promise((s,c)=>{n.once("response",s).once("error",c).end()});return n.then=o.then.bind(o),n}a(cOt,"req");wp.req=cOt});var yye=W(W0=>{"use strict";f();var uWe=W0&&W0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lOt=W0&&W0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dWe=W0&&W0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uWe(e,t,r);return lOt(e,t),e},uOt=W0&&W0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&uWe(e,t,r)};Object.defineProperty(W0,"__esModule",{value:!0});W0.Agent=void 0;var dOt=dWe(require("net")),lWe=dWe(require("http")),fOt=require("https");uOt(cWe(),W0);var QC=Symbol("AgentBaseInternalState"),Aye=class extends lWe.Agent{static{a(this,"Agent")}constructor(e){super(e),this[QC]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new dOt.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],o=n.indexOf(r);o!==-1&&(n.splice(o,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?fOt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let o={...r,secureEndpoint:this.isSecureEndpoint(r)},s=this.getName(o),c=this.incrementSockets(s);Promise.resolve().then(()=>this.connect(e,o)).then(l=>{if(this.decrementSockets(s,c),l instanceof lWe.Agent)return l.addRequest(e,o);this[QC].currentSocket=l,super.createSocket(e,r,n)},l=>{this.decrementSockets(s,c),n(l)})}createConnection(){let e=this[QC].currentSocket;if(this[QC].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[QC].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[QC]&&(this[QC].defaultPort=e)}get protocol(){return this[QC].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[QC]&&(this[QC].protocol=e)}};W0.Agent=Aye});var fWe=W(FB=>{"use strict";f();var pOt=FB&&FB.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(FB,"__esModule",{value:!0});FB.parseProxyResponse=void 0;var mOt=pOt(OC()),LK=(0,mOt.default)("https-proxy-agent:parse-proxy-response");function hOt(t){return new Promise((e,r)=>{let n=0,o=[];function s(){let p=t.read();p?d(p):t.once("readable",s)}a(s,"read");function c(){t.removeListener("end",l),t.removeListener("error",u),t.removeListener("readable",s)}a(c,"cleanup");function l(){c(),LK("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}a(l,"onend");function u(p){c(),LK("onerror %o",p),r(p)}a(u,"onerror");function d(p){o.push(p),n+=p.length;let m=Buffer.concat(o,n),h=m.indexOf(`\r
\r
`);if(h===-1){LK("have not received end of HTTP headers yet..."),s();return}let g=m.slice(0,h).toString("ascii").split(`\r
`),A=g.shift();if(!A)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let y=A.split(" "),v=+y[1],b=y.slice(2).join(" "),I={};for(let _ of g){if(!_)continue;let k=_.indexOf(":");if(k===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${_}"`));let N=_.slice(0,k).toLowerCase(),F=_.slice(k+1).trimStart(),O=I[N];typeof O=="string"?I[N]=[O,F]:Array.isArray(O)?O.push(F):I[N]=F}LK("got proxy server response: %o %o",A,I),c(),e({connect:{statusCode:v,statusText:b,headers:I},buffered:m})}a(d,"ondata"),t.on("error",u),t.on("end",l),s()})}a(hOt,"parseProxyResponse");FB.parseProxyResponse=hOt});var AWe=W(fh=>{"use strict";f();var gOt=fh&&fh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AOt=fh&&fh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),hWe=fh&&fh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gOt(e,t,r);return AOt(e,t),e},gWe=fh&&fh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fh,"__esModule",{value:!0});fh.HttpsProxyAgent=void 0;var Cye=hWe(require("net")),pWe=hWe(require("tls")),yOt=gWe(require("assert")),COt=gWe(OC()),vOt=yye(),xOt=require("url"),EOt=fWe(),fO=(0,COt.default)("https-proxy-agent"),FK=class extends vOt.Agent{static{a(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new xOt.URL(e):e,this.proxyHeaders=r?.headers??{},fO("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?mWe(r,"headers"):null,host:n,port:o}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let o;if(n.protocol==="https:"){fO("Creating `tls.Socket`: %o",this.connectOpts);let h=this.connectOpts.servername||this.connectOpts.host;o=pWe.connect({...this.connectOpts,servername:h})}else fO("Creating `net.Socket`: %o",this.connectOpts),o=Cye.connect(this.connectOpts);let s=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},c=Cye.isIPv6(r.host)?`[${r.host}]`:r.host,l=`CONNECT ${c}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let h=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(h).toString("base64")}`}s.Host=`${c}:${r.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let h of Object.keys(s))l+=`${h}: ${s[h]}\r
`;let u=(0,EOt.parseProxyResponse)(o);o.write(`${l}\r
`);let{connect:d,buffered:p}=await u;if(e.emit("proxyConnect",d),this.emit("proxyConnect",d,e),d.statusCode===200){if(e.once("socket",bOt),r.secureEndpoint){fO("Upgrading socket connection to TLS");let h=r.servername||r.host;return pWe.connect({...mWe(r,"host","path","port"),socket:o,servername:h})}return o}o.destroy();let m=new Cye.Socket({writable:!1});return m.readable=!0,e.once("socket",h=>{fO("Replaying proxy buffer for failed request"),(0,yOt.default)(h.listenerCount("data")>0),h.push(p),h.push(null)}),m}};FK.protocols=["http","https"];fh.HttpsProxyAgent=FK;function bOt(t){t.resume()}a(bOt,"resume");function mWe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}a(mWe,"omit")});var vWe=W(ph=>{"use strict";f();var IOt=ph&&ph.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TOt=ph&&ph.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),CWe=ph&&ph.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&IOt(e,t,r);return TOt(e,t),e},wOt=ph&&ph.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ph,"__esModule",{value:!0});ph.HttpProxyAgent=void 0;var _Ot=CWe(require("net")),SOt=CWe(require("tls")),ROt=wOt(OC()),kOt=require("events"),POt=yye(),yWe=require("url"),OB=(0,ROt.default)("http-proxy-agent"),OK=class extends POt.Agent{static{a(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new yWe.URL(e):e,this.proxyHeaders=r?.headers??{},OB("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?DOt(r,"headers"):null,host:n,port:o}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,o=r.secureEndpoint?"https:":"http:",s=e.getHeader("host")||"localhost",c=`${o}//${s}`,l=new yWe.URL(e.path,c);r.port!==80&&(l.port=String(r.port)),e.path=String(l);let u=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let d=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;u["Proxy-Authorization"]=`Basic ${Buffer.from(d).toString("base64")}`}u["Proxy-Connection"]||(u["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let d of Object.keys(u)){let p=u[d];p&&e.setHeader(d,p)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,o;OB("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(OB("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,o=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(o),OB("Output buffer: %o",e.outputData[0].data));let s;return this.proxy.protocol==="https:"?(OB("Creating `tls.Socket`: %o",this.connectOpts),s=SOt.connect(this.connectOpts)):(OB("Creating `net.Socket`: %o",this.connectOpts),s=_Ot.connect(this.connectOpts)),await(0,kOt.once)(s,"connect"),s}};OK.protocols=["http","https"];ph.HttpProxyAgent=OK;function DOt(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}a(DOt,"omit")});var GWe=W(eY=>{"use strict";f();Object.defineProperty(eY,"__esModule",{value:!0});eY.state=void 0;eY.state={operationRequestMap:new WeakMap}});function H7t(){try{return Yye.default.statSync("/.dockerenv"),!0}catch{return!1}}function W7t(){try{return Yye.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function Jye(){return Kye===void 0&&(Kye=H7t()||W7t()),Kye}var Yye,Kye,a$e=Wm(()=>{f();Yye=Ne(require("node:fs"),1);a(H7t,"hasDockerEnv");a(W7t,"hasDockerCGroup");a(Jye,"isDocker")});function HB(){return Xye===void 0&&(Xye=$7t()||Jye()),Xye}var c$e,Xye,$7t,Zye=Wm(()=>{f();c$e=Ne(require("node:fs"),1);a$e();$7t=a(()=>{try{return c$e.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");a(HB,"isInsideContainer")});var eCe,u$e,d$e,l$e,ET,tCe=Wm(()=>{f();eCe=Ne(require("node:process"),1),u$e=Ne(require("node:os"),1),d$e=Ne(require("node:fs"),1);Zye();l$e=a(()=>{if(eCe.default.platform!=="linux")return!1;if(u$e.default.release().toLowerCase().includes("microsoft"))return!HB();try{return d$e.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!HB():!1}catch{return!1}},"isWsl"),ET=eCe.default.env.__IS_WSL_TEST__?l$e:l$e()});var rCe,yO,j7t,G7t,nCe,f$e=Wm(()=>{f();rCe=Ne(require("node:process"),1),yO=Ne(require("node:fs/promises"),1);tCe();tCe();j7t=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await yO.default.access(r,yO.constants.F_OK),n=!0}catch{}if(!n)return t;let o=await yO.default.readFile(r,{encoding:"utf8"}),s=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(o);return s?(e=s.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),G7t=a(async()=>`${await j7t()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"powerShellPathFromWsl"),nCe=a(async()=>ET?G7t():`${rCe.default.env.SYSTEMROOT||rCe.default.env.windir||String.raw`C:\Windows`}\\System32\\WindowsPowerShell\\v1.0\\powershell.exe`,"powerShellPath")});function bT(t,e,r){let n=a(o=>Object.defineProperty(t,e,{value:o,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let o=r();return n(o),o},set(o){n(o)}}),t}var p$e=Wm(()=>{f();a(bT,"defineLazyProperty")});async function iCe(){if(h$e.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await V7t("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var m$e,h$e,g$e,V7t,A$e=Wm(()=>{f();m$e=require("node:util"),h$e=Ne(require("node:process"),1),g$e=require("node:child_process"),V7t=(0,m$e.promisify)(g$e.execFile);a(iCe,"defaultBrowserId")});async function v$e(t,{humanReadableOutput:e=!0}={}){if(y$e.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await z7t("osascript",["-e",t,r]);return n.trim()}var y$e,C$e,oCe,z7t,x$e=Wm(()=>{f();y$e=Ne(require("node:process"),1),C$e=require("node:util"),oCe=require("node:child_process"),z7t=(0,C$e.promisify)(oCe.execFile);a(v$e,"runAppleScript")});async function sCe(t){return v$e(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var E$e=Wm(()=>{f();x$e();a(sCe,"bundleName")});async function aCe(t=K7t){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new rY(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,o=Y7t[n];if(!o)throw new rY(`Unknown browser ID: ${n}`);return o}var b$e,I$e,K7t,Y7t,rY,T$e=Wm(()=>{f();b$e=require("node:util"),I$e=require("node:child_process"),K7t=(0,b$e.promisify)(I$e.execFile),Y7t={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},rY=class extends Error{static{a(this,"UnknownBrowserError")}};a(aCe,"defaultBrowser")});async function cCe(){if(nY.default.platform==="darwin"){let t=await iCe();return{name:await sCe(t),id:t}}if(nY.default.platform==="linux"){let{stdout:t}=await J7t("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:X7t(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(nY.default.platform==="win32")return aCe();throw new Error("Only macOS, Linux, and Windows are supported")}var w$e,nY,_$e,J7t,X7t,S$e=Wm(()=>{f();w$e=require("node:util"),nY=Ne(require("node:process"),1),_$e=require("node:child_process");A$e();E$e();T$e();J7t=(0,w$e.promisify)(_$e.execFile),X7t=a(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");a(cCe,"defaultBrowser")});var M$e={};Sa(M$e,{apps:()=>IT,default:()=>vO,openApp:()=>rQt});async function eQt(){let t=await nCe(),e=String.raw`(Get-ItemProperty -Path "HKCU:\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice").ProgId`,r=dCe.Buffer.from(e,"utf16le").toString("base64"),{stdout:n}=await Z7t(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),o=n.trim(),s={ChromeHTML:"com.google.chrome",BraveHTML:"com.brave.Browser",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return s[o]?{id:s[o]}:{}}function D$e(t){if(typeof t=="string"||Array.isArray(t))return t;let{[k$e]:e}=t;if(!e)throw new Error(`${k$e} is not supported`);return e}function oY({[WB]:t},{wsl:e}){if(e&&ET)return D$e(e);if(!t)throw new Error(`${WB} is not supported`);return D$e(t)}var uCe,dCe,fCe,B$e,N$e,pCe,iY,Z7t,lCe,R$e,WB,k$e,P$e,CO,tQt,rQt,IT,vO,sY=Wm(()=>{f();uCe=Ne(require("node:process"),1),dCe=require("node:buffer"),fCe=Ne(require("node:path"),1),B$e=require("node:url"),N$e=require("node:util"),pCe=Ne(require("node:child_process"),1),iY=Ne(require("node:fs/promises"),1);f$e();p$e();S$e();Zye();Z7t=(0,N$e.promisify)(pCe.default.execFile),lCe=fCe.default.dirname((0,B$e.fileURLToPath)(importMetaUrlShim)),R$e=fCe.default.join(lCe,"xdg-open"),{platform:WB,arch:k$e}=uCe.default;a(eQt,"getWindowsDefaultBrowserFromWsl");P$e=a(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(o){r=o}throw r},"pTryEach"),CO=a(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return P$e(t.app,l=>CO({...t,app:l}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return P$e(e,l=>CO({...t,app:{name:l,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let l={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","com.brave.Browser":"brave","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},u={chrome:"--incognito",brave:"--incognito",firefox:"--private-window",edge:"--inPrivate"},d=ET?await eQt():await cCe();if(d.id in l){let p=l[d.id];return e==="browserPrivate"&&r.push(u[p]),CO({...t,app:{name:IT[p],arguments:r}})}throw new Error(`${d.name} is not supported as a default browser`)}let n,o=[],s={};if(WB==="darwin")n="open",t.wait&&o.push("--wait-apps"),t.background&&o.push("--background"),t.newInstance&&o.push("--new"),e&&o.push("-a",e);else if(WB==="win32"||ET&&!HB()&&!e){n=await nCe(),o.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),ET||(s.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&l.push(`"${t.target}"`),r.length>0&&(r=r.map(u=>`"\`"${u}\`""`),l.push("-ArgumentList",r.join(","))),t.target=dCe.Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let l=!lCe||lCe==="/",u=!1;try{await iY.default.access(R$e,iY.constants.X_OK),u=!0}catch{}n=uCe.default.versions.electron??(WB==="android"||l||!u)?"xdg-open":R$e}r.length>0&&o.push(...r),t.wait||(s.stdio="ignore",s.detached=!0)}WB==="darwin"&&r.length>0&&o.push("--args",...r),t.target&&o.push(t.target);let c=pCe.default.spawn(n,o,s);return t.wait?new Promise((l,u)=>{c.once("error",u),c.once("close",d=>{if(!t.allowNonzeroExitCode&&d>0){u(new Error(`Exited with code ${d}`));return}l(c)})}):(c.unref(),c)},"baseOpen"),tQt=a((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return CO({...e,target:t})},"open"),rQt=a((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return CO({...e,app:{name:t,arguments:r}})},"openApp");a(D$e,"detectArchBinary");a(oY,"detectPlatformBinary");IT={};bT(IT,"chrome",()=>oY({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));bT(IT,"brave",()=>oY({darwin:"brave browser",win32:"brave",linux:["brave-browser","brave"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe",x64:["/mnt/c/Program Files/BraveSoftware/Brave-Browser/Application/brave.exe","/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe"]}}));bT(IT,"firefox",()=>oY({darwin:"firefox",win32:String.raw`C:\Program Files\Mozilla Firefox\firefox.exe`,linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));bT(IT,"edge",()=>oY({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));bT(IT,"browser",()=>"browser");bT(IT,"browserPrivate",()=>"browserPrivate");vO=tQt});var lje=W($C=>{"use strict";f();Object.defineProperty($C,"__esModule",{value:!0});$C.bytePairEncode=$C.BinaryMap=$C.binaryMapKey=void 0;var RQt=a((t,e,r)=>{let n=r-e,o=16777215>>>Math.max(0,(3-n)*8),s=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&o,c=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&c;return s+16777216*l},"binaryMapKey");$C.binaryMapKey=RQt;var PCe=class t{static{a(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let o=n<6+r,s=(0,$C.binaryMapKey)(e,r,n);return o?this.final.get(s):this.nested.get(s)?.get(e,6+r,n)}set(e,r){let n=(0,$C.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let s=this.nested.get(n);if(s instanceof t)s.set(e.subarray(6),r);else{let c=new t;c.set(e.subarray(6),r),this.nested.set(n,c)}}};$C.BinaryMap=PCe;var WC=new Int32Array(128),Rf=new Int32Array(128);function kQt(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,o=-1;for(;WC.length<r*2;)Rf=new Int32Array(Rf.length*2),WC=new Int32Array(WC.length*2);for(let u=0;u<r-1;u++){let d=e.get(t,u,u+2)??2147483647;d<n&&(n=d,o=u),Rf[u]=u,WC[u]=d}Rf[r-1]=r-1,WC[r-1]=2147483647,Rf[r]=r,WC[r]=2147483647;let s=r+1;function c(u,d=0){if(u+d+2<s){let p=e.get(t,Rf[u],Rf[u+d+2]);if(p!==void 0)return p}return 2147483647}for(a(c,"getRank");n!==2147483647;){WC[Rf[o]]=c(o,1),o>0&&(WC[Rf[o-1]]=c(o-1,1));for(let u=o+1;u<s-1;u++)Rf[u]=Rf[u+1];s--,o=-1,n=2147483647;for(let u=0;u<s-1;u++){let d=WC[Rf[u]];WC[Rf[u]]<n&&(n=d,o=u)}}let l=[];for(let u=0;u<s-1;u++)l.push(e.get(t,Rf[u],Rf[u+1]));return l}a(kQt,"bytePairEncode");$C.bytePairEncode=kQt});var uje=W(yY=>{"use strict";f();Object.defineProperty(yY,"__esModule",{value:!0});yY.makeTextEncoder=void 0;var DCe=class{static{a(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},BCe=class{static{a(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},PQt=a(()=>typeof Buffer<"u"?new BCe:new DCe,"makeTextEncoder");yY.makeTextEncoder=PQt});var dje=W(CY=>{"use strict";f();Object.defineProperty(CY,"__esModule",{value:!0});CY.LRUCache=void 0;var NCe=class{static{a(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let o=new MCe(e,r);this.nodes.set(e,o),this.addNode(o),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};CY.LRUCache=NCe;var MCe=class{static{a(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var FCe=W(xY=>{"use strict";f();Object.defineProperty(xY,"__esModule",{value:!0});xY.TikTokenizer=void 0;var vY=lje(),DQt=uje(),BQt=dje();function NQt(t){let e=new Map;try{let o=require("fs").readFileSync(t,"utf-8");return r(o),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let o of n.split(/[\r\n]+/)){if(o.trim()==="")continue;let s=o.split(" ");if(s.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let c=new Uint8Array(Buffer.from(s[0],"base64")),l=parseInt(s[1]);if(!isNaN(l))e.set(c,l);else throw new Error(`Can't parse ${s[1]} to integer`)}}a(r,"processBpeRanks")}a(NQt,"loadTikTokenBpe");function MQt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(MQt,"escapeRegExp");var LCe=class{static{a(this,"TikTokenizer")}constructor(e,r,n,o=8192){this.textEncoder=(0,DQt.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new BQt.LRUCache(o);let s=typeof e=="string"?NQt(e):e;this.init(s,r,n)}init(e,r,n){this.encoder=new vY.BinaryMap;for(let[o,s]of e)this.encoder.set(o,s);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(o=>MQt(o)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[o,s]of e)this.decoder.set(s,o);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[o,s]of r)this.specialTokensDecoder.set(s,o)}findNextSpecialToken(e,r,n){let o=r,s=null;if(n&&this.specialTokensRegex)for(;s=e.slice(o).match(this.specialTokensRegex),!(!s||n&&n.includes(s[0]));)o+=s.index+1;let c=s?o+s.index:e.length;return[s,c]}encode(e,r){let n=[],o=0;for(;;){let s,c;if([s,c]=this.findNextSpecialToken(e,o,r),c>o&&this.encodeByIndex(e,n,o,c),s){if(o=o+this.encodeSpecialToken(n,s),o>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,o){let s,c=e.substring(n,o);for(this.regex.lastIndex=0;s=this.regex.exec(c);){let l=this.cache.get(s[0]);if(l)for(let u of l)r.push(u);else{let u=this.textEncoder.encode(s[0]),d=this.encoder.get(u,0,this.textEncoder.length);if(d!==void 0)r.push(d),this.cache.set(s[0],[d]);else{let p=(0,vY.bytePairEncode)(u,this.encoder,this.textEncoder.length);for(let m of p)r.push(m);this.cache.set(s[0],p)}}}}encodeTrimSuffixByIndex(e,r,n,o,s,c,l){let u,d=e.substring(n,o);for(this.regex.lastIndex=0;u=this.regex.exec(d);){let p=u[0],m=this.cache.get(p);if(m)if(c+m.length<=s)c+=m.length,l+=p.length,r.push(...m);else{let h=s-c;c+=h,l+=p.length,r.push(...m.slice(0,h));break}else{let h=this.textEncoder.encode(p),g=this.encoder.get(h,0,h.length);if(g!==void 0)if(this.cache.set(p,[g]),c+1<=s)c++,l+=p.length,r.push(g);else break;else{let A=(0,vY.bytePairEncode)(h,this.encoder,this.textEncoder.length);if(this.cache.set(p,A),c+A.length<=s){c+=A.length,l+=p.length;for(let y of A)r.push(y)}else{let y=s-c;c+=y,l+=p.length;for(let v=0;v<y;v++)r.push(A[v]);break}}}if(c>=s)break}return{tokenCount:c,encodeLength:l}}encodeTrimSuffix(e,r,n){let o=[],s=0,c=0,l=0;for(;;){let d,p;if([d,p]=this.findNextSpecialToken(e,s,n),p>s){let{tokenCount:m,encodeLength:h}=this.encodeTrimSuffixByIndex(e,o,s,p,r,c,l);if(c=m,l=h,c>=r)break}if(d!==null){if(c++,c<=r&&(s=s+this.encodeSpecialToken(o,d),l+=d[0].length,s>=e.length)||c>=r)break}else break}let u=l===e.length?e:e.slice(0,l);return{tokenIds:o,text:u}}encodeTrimPrefix(e,r,n){let o=[],s=0,c=0,l=0,u=new Map;for(u.set(c,l);;){let h,g;if([h,g]=this.findNextSpecialToken(e,s,n),g>s){let A,y=e.substring(s,g);for(this.regex.lastIndex=0;A=this.regex.exec(y);){let v=A[0],b=this.cache.get(v);if(b)c+=b.length,l+=v.length,o.push(...b),u.set(c,l);else{let I=this.textEncoder.encode(v),_=this.encoder.get(I);if(_!==void 0)this.cache.set(v,[_]),c++,l+=v.length,o.push(_),u.set(c,l);else{let k=(0,vY.bytePairEncode)(I,this.encoder,this.textEncoder.length);this.cache.set(v,k),c+=k.length,l+=v.length;for(let N of k)o.push(N);u.set(c,l)}}}}if(h!==null){if(s=s+this.encodeSpecialToken(o,h),c++,l+=h[0].length,u.set(c,l),s>=e.length)break}else break}if(c<=r)return{tokenIds:o,text:e};let d=c-r,p=0,m=0;for(let[h,g]of u)if(h>=d){p=h,m=g;break}if(p>r){let h=this.encode(e,n),g=h.slice(h.length-r);return{tokenIds:g,text:this.decode(g)}}return{tokenIds:o.slice(p),text:e.slice(m)}}decode(e){let r=[];for(let n of e){let o=[],s=this.decoder?.get(n);if(s!==void 0)o=Array.from(s);else{let c=this.specialTokensDecoder?.get(n);if(c!==void 0){let l=this.textEncoder.encode(c);o=Array.from(l.subarray(0,this.textEncoder.length))}}r.push(...o)}return this.textDecoder.decode(new Uint8Array(r))}};xY.TikTokenizer=LCe});var xje=W(ll=>{"use strict";f();Object.defineProperty(ll,"__esModule",{value:!0});ll.createTokenizer=ll.createByEncoderName=ll.createByModelName=ll.getRegexByModel=ll.getRegexByEncoder=ll.getSpecialTokensByModel=ll.getSpecialTokensByEncoder=ll.MODEL_TO_ENCODING=void 0;var LQt=FCe(),FQt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);ll.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var EY="<|endoftext|>",fje="<|fim_prefix|>",pje="<|fim_middle|>",mje="<|fim_suffix|>",hje="<|endofprompt|>",NO="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",gje="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",OQt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],Aje=OQt.join("|");function OCe(t){let e="";if(ll.MODEL_TO_ENCODING.has(t))e=ll.MODEL_TO_ENCODING.get(t);else for(let[r,n]of FQt)if(t.startsWith(r)){e=n;break}return e}a(OCe,"getEncoderFromModelName");async function QQt(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let o=await n.text();r.writeFileSync(e,o)}a(QQt,"fetchAndSaveFile");function QCe(t){let e=new Map([[EY,50256]]);switch(t){case"o200k_base":e=new Map([[EY,199999],[hje,200018]]);break;case"cl100k_base":e=new Map([[EY,100257],[fje,100258],[pje,100259],[mje,100260],[hje,100276]]);break;case"p50k_edit":e=new Map([[EY,50256],[fje,50281],[pje,50282],[mje,50283]]);break;default:break}return e}a(QCe,"getSpecialTokensByEncoder");ll.getSpecialTokensByEncoder=QCe;function UQt(t){let e=OCe(t);return QCe(e)}a(UQt,"getSpecialTokensByModel");ll.getSpecialTokensByModel=UQt;function yje(t){switch(t){case"o200k_base":return Aje;case"cl100k_base":return gje;default:break}return NO}a(yje,"getRegexByEncoder");ll.getRegexByEncoder=yje;function qQt(t){let e=OCe(t);return yje(e)}a(qQt,"getRegexByModel");ll.getRegexByModel=qQt;async function HQt(t,e=null){return Cje(OCe(t),e)}a(HQt,"createByModelName");ll.createByModelName=HQt;async function Cje(t,e=null){let r,n,o=QCe(t);switch(t){case"o200k_base":r=Aje,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=gje,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=NO,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=NO,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=NO,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=NO,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(o=new Map([...o,...e]));let s=require("fs"),c=require("path"),l=c.basename(n),u=c.resolve(__dirname,"..","model");s.existsSync(u)||s.mkdirSync(u,{recursive:!0});let d=c.resolve(u,l);return s.existsSync(d)||(console.log(`Downloading file from ${n}`),await QQt(n,d),console.log(`Saved file to ${d}`)),vje(d,o,r)}a(Cje,"createByEncoderName");ll.createByEncoderName=Cje;function vje(t,e,r,n=8192){return new LQt.TikTokenizer(t,e,r,n)}a(vje,"createTokenizer");ll.createTokenizer=vje});var Eje=W(ul=>{"use strict";f();Object.defineProperty(ul,"__esModule",{value:!0});ul.createTokenizer=ul.createByEncoderName=ul.createByModelName=ul.getSpecialTokensByModel=ul.getSpecialTokensByEncoder=ul.getRegexByModel=ul.getRegexByEncoder=ul.MODEL_TO_ENCODING=ul.TikTokenizer=void 0;var WQt=FCe();Object.defineProperty(ul,"TikTokenizer",{enumerable:!0,get:a(function(){return WQt.TikTokenizer},"get")});var wT=xje();Object.defineProperty(ul,"MODEL_TO_ENCODING",{enumerable:!0,get:a(function(){return wT.MODEL_TO_ENCODING},"get")});Object.defineProperty(ul,"getRegexByEncoder",{enumerable:!0,get:a(function(){return wT.getRegexByEncoder},"get")});Object.defineProperty(ul,"getRegexByModel",{enumerable:!0,get:a(function(){return wT.getRegexByModel},"get")});Object.defineProperty(ul,"getSpecialTokensByEncoder",{enumerable:!0,get:a(function(){return wT.getSpecialTokensByEncoder},"get")});Object.defineProperty(ul,"getSpecialTokensByModel",{enumerable:!0,get:a(function(){return wT.getSpecialTokensByModel},"get")});Object.defineProperty(ul,"createByModelName",{enumerable:!0,get:a(function(){return wT.createByModelName},"get")});Object.defineProperty(ul,"createByEncoderName",{enumerable:!0,get:a(function(){return wT.createByEncoderName},"get")});Object.defineProperty(ul,"createTokenizer",{enumerable:!0,get:a(function(){return wT.createTokenizer},"get")})});var zCe=W((FNn,$je)=>{"use strict";f();$je.exports=a(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var o=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?o[r]:o},"protocols")});var Gje=W((UNn,jje)=>{"use strict";f();var xHt=zCe();function EHt(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=xHt(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}a(EHt,"parsePath");jje.exports=EHt});var Xje=W((WNn,Jje)=>{"use strict";f();var bHt=Gje();function IHt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}a(IHt,"_interopDefaultLegacy");var THt=IHt(bHt);function wHt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=a(function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var s=Function.bind.apply(e,o);return new s}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:a(function(){return t[n]},"get")})}),r}a(wHt,"getAugmentedNamespace");var zje={},_Ht="text/plain",SHt="us-ascii",Vje=a((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),RHt=a((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:o,hash:s}=r.groups,c=n.split(";");s=e?"":s;let l=!1;c[c.length-1]==="base64"&&(c.pop(),l=!0);let u=(c.shift()||"").toLowerCase(),p=[...c.map(m=>{let[h,g=""]=m.split("=").map(A=>A.trim());return h==="charset"&&(g=g.toLowerCase(),g===SHt)?"":`${h}${g?`=${g}`:""}`}).filter(Boolean)];return l&&p.push("base64"),(p.length>0||u&&u!==_Ht)&&p.unshift(u),`data:${p.join(";")},${l?o.trim():o}${s?`#${s}`:""}`},"normalizeDataURL");function kHt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return RHt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let o=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&o.protocol==="https:"&&(o.protocol="http:"),e.forceHttps&&o.protocol==="http:"&&(o.protocol="https:"),e.stripAuthentication&&(o.username="",o.password=""),e.stripHash?o.hash="":e.stripTextFragment&&(o.hash=o.hash.replace(/#?:~:text.*?$/i,"")),o.pathname){let c=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,u="";for(;;){let p=c.exec(o.pathname);if(!p)break;let m=p[0],h=p.index,g=o.pathname.slice(l,h);u+=g.replace(/\/{2,}/g,"/"),u+=m,l=h+m.length}let d=o.pathname.slice(l,o.pathname.length);u+=d.replace(/\/{2,}/g,"/"),o.pathname=u}if(o.pathname)try{o.pathname=decodeURI(o.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let c=o.pathname.split("/"),l=c[c.length-1];Vje(l,e.removeDirectoryIndex)&&(c=c.slice(0,-1),o.pathname=c.slice(1).join("/")+"/")}if(o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(o.hostname)&&(o.hostname=o.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let c of[...o.searchParams.keys()])Vje(c,e.removeQueryParameters)&&o.searchParams.delete(c);if(e.removeQueryParameters===!0&&(o.search=""),e.sortQueryParameters){o.searchParams.sort();try{o.search=decodeURIComponent(o.search)}catch{}}e.removeTrailingSlash&&(o.pathname=o.pathname.replace(/\/$/,""));let s=t;return t=o.toString(),!e.removeSingleSlash&&o.pathname==="/"&&!s.endsWith("/")&&o.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||o.pathname==="/")&&o.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}a(kHt,"normalizeUrl");var PHt=Object.freeze({__proto__:null,default:kHt}),DHt=wHt(PHt);Object.defineProperty(zje,"__esModule",{value:!0});var BHt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NHt=DHt,MHt=Kje(NHt),LHt=THt.default,FHt=Kje(LHt);function Kje(t){return t&&t.__esModule?t:{default:t}}a(Kje,"_interopRequireDefault");var Yje=a(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,o=a(function(u){var d=new Error(u);throw d.subject_url=e,d},"throwErr");(typeof e!="string"||!e.trim())&&o("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&o("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":BHt(r))!=="object"&&(r={stripHash:!1}),e=(0,MHt.default)(e,r));var s=(0,FHt.default)(e);if(s.parse_failed){var c=s.href.match(n);c?(s.protocols=["ssh"],s.protocol="ssh",s.resource=c[2],s.host=c[2],s.user=c[1],s.pathname="/"+c[3],s.parse_failed=!1):o("URL parsing failed.")}return s},"parseUrl");Yje.MAX_INPUT_LENGTH=2048;var OHt=zje.default=Yje;Jje.exports=OHt});var tGe=W((GNn,eGe)=>{"use strict";f();var QHt=zCe();function Zje(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=QHt(t);if(t=t.substring(t.indexOf("://")+3),Zje(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}a(Zje,"isSsh");eGe.exports=Zje});var iGe=W((KNn,nGe)=>{"use strict";f();var UHt=Xje(),rGe=tGe();function qHt(t){let e=UHt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),rGe(e.protocols)||e.protocols.length===0&&rGe(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}a(qHt,"gitUp");nGe.exports=qHt});var sGe=W((XNn,oGe)=>{"use strict";f();var HHt=iGe();function KCe(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(I){return typeof I=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=HHt(t),o=n.resource.split("."),s=null;switch(n.toString=function(I){return KCe.stringify(this,I)},n.source=o.length>2?o.slice(1-o.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=o[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){s=n.name.split("/"),s.length===4&&(n.organization=s[1],n.owner=s[2],n.name=s[3],n.full_name=s[2]+"/"+s[3]);break}else{s=n.name.split("/"),s.length===2?(n.owner=s[1],n.name=s[1],n.full_name="_git/"+n.name):s.length===3?(n.name=s[2],s[0]==="DefaultCollection"?(n.owner=s[2],n.organization=s[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=s[0],n.full_name=n.owner+"/_git/"+n.name)):s.length===4&&(n.organization=s[0],n.owner=s[1],n.name=s[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){s=n.name.split("/"),s.length===4&&(n.organization=s[1],n.owner=s[2],n.name=s[3]);break}else{s=n.name.split("/"),s.length===5?(n.organization=s[0],n.owner=s[1],n.name=s[4],n.full_name="_git/"+n.name):s.length===3?(n.name=s[2],s[0]==="DefaultCollection"?(n.owner=s[2],n.organization=s[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=s[0],n.full_name=n.owner+"/_git/"+n.name)):s.length===4&&(n.organization=s[0],n.owner=s[1],n.name=s[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:s=n.name.split("/");var c=s.length-1;if(s.length>=2){var l=s.indexOf("-",2),u=s.indexOf("blob",2),d=s.indexOf("tree",2),p=s.indexOf("commit",2),m=s.indexOf("issues",2),h=s.indexOf("src",2),g=s.indexOf("raw",2),A=s.indexOf("edit",2);c=l>0?l-1:u>0&&d>0?Math.min(u-1,d-1):u>0?u-1:m>0?m-1:d>0?d-1:p>0?p-1:h>0?h-1:g>0?g-1:A>0?A-1:c,n.owner=s.slice(0,c).join("/"),n.name=s[c],p&&m<0&&(n.commit=s[c+2])}n.ref="",n.filepathtype="",n.filepath="";var y=s.length>c&&s[c+1]==="-"?c+1:c;s.length>y+2&&["raw","src","blob","tree","edit"].indexOf(s[y+1])>=0&&(n.filepathtype=s[y+1],n.ref=s[y+2],s.length>y+3&&(n.filepath=s.slice(y+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var v=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,b=v.exec(n.pathname);return b!=null&&(n.source="bitbucket-server",b[1]==="users"?n.owner="~"+b[2]:n.owner=b[2],n.organization=n.owner,n.name=b[3],s=b[4].split("/"),s.length>1&&(["raw","browse"].indexOf(s[1])>=0?(n.filepathtype=s[1],s.length>2&&(n.filepath=s.slice(2).join("/"))):s[1]==="commits"&&s.length>2&&(n.commit=s[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=jHt(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}a(KCe,"gitUrlParse");KCe.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",o=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+o:n+"@"+t.resource+":"+t.full_name+o;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+o;case"http":case"https":var s=t.token?WHt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+s+t.resource+r+"/"+$Ht(t)+o;default:return t.href}};function WHt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}a(WHt,"buildToken");function $Ht(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}a($Ht,"buildPath");function jHt(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}a(jHt,"findLongestMatchingSubstring");oGe.exports=KCe});var HY=W((exports,module)=>{f();var Module=typeof Module<"u"?Module:{},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{a(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=a((t,e)=>{throw e},"quit_"),scriptDirectory="";function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}a(locateFile,"locateFile");var readAsync,readBinary;if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=__dirname+"/",readBinary=a(t=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t);var e=fs.readFileSync(t);return e},"readBinary"),readAsync=a((t,e=!0)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),new Promise((r,n)=>{fs.readFile(t,e?void 0:"utf8",(o,s)=>{o?n(o):r(e?s.buffer:s)})})),"readAsync"),!Module.thisProgram&&process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=a((t,e)=>{throw process.exitCode=t,e},"quit_")}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:typeof document<"u"&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory.startsWith("blob:")?scriptDirectory="":scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1),ENVIRONMENT_IS_WORKER&&(readBinary=a(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=a(t=>isFileURI(t)?new Promise((e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{(n.status==200||n.status==0&&n.response)&&r(n.response),e(n.status)},n.onerror=e,n.send(null)}):fetch(t,{credentials:"same-origin"}).then(e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))),"readAsync"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.error.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var wasmMemory,ABORT=!1,EXITSTATUS,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,HEAP_DATA_VIEW;function updateMemoryViews(){var t=wasmMemory.buffer;Module.HEAP_DATA_VIEW=HEAP_DATA_VIEW=new DataView(t),Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}if(a(updateMemoryViews,"updateMemoryViews"),Module.wasmMemory)wasmMemory=Module.wasmMemory;else{var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:2147483648/65536})}updateMemoryViews();var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}a(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}a(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}a(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}a(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}a(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}a(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}a(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(t){return t}a(getUniqueRunDependency,"getUniqueRunDependency");function addRunDependency(t){runDependencies++,Module.monitorRunDependencies?.(runDependencies)}a(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies?.(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}a(removeRunDependency,"removeRunDependency");function abort(t){Module.onAbort?.(t),t="Aborted("+t+")",err(t),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(t);throw e}a(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",isDataURI=a(t=>t.startsWith(dataURIPrefix),"isDataURI"),isFileURI=a(t=>t.startsWith("file://"),"isFileURI");function findWasmBinary(){var t="tree-sitter.wasm";return isDataURI(t)?t:locateFile(t)}a(findWasmBinary,"findWasmBinary");var wasmBinaryFile;function getBinarySync(t){if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}a(getBinarySync,"getBinarySync");function getBinaryPromise(t){return wasmBinary?Promise.resolve().then(()=>getBinarySync(t)):readAsync(t).then(e=>new Uint8Array(e),()=>getBinarySync(t))}a(getBinaryPromise,"getBinaryPromise");function instantiateArrayBuffer(t,e,r){return getBinaryPromise(t).then(n=>WebAssembly.instantiate(n,e)).then(r,n=>{err(`failed to asynchronously prepare wasm: ${n}`),abort(n)})}a(instantiateArrayBuffer,"instantiateArrayBuffer");function instantiateAsync(t,e,r,n){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(e)&&!isFileURI(e)&&!ENVIRONMENT_IS_NODE&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(o=>{var s=WebAssembly.instantiateStreaming(o,r);return s.then(n,function(c){return err(`wasm streaming compile failed: ${c}`),err("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(e,r,n)})}):instantiateArrayBuffer(e,r,n)}a(instantiateAsync,"instantiateAsync");function getWasmImports(){return{env:wasmImports,wasi_snapshot_preview1:wasmImports,"GOT.mem":new Proxy(wasmImports,GOTHandler),"GOT.func":new Proxy(wasmImports,GOTHandler)}}a(getWasmImports,"getWasmImports");function createWasm(){var t=getWasmImports();function e(n,o){wasmExports=n.exports,wasmExports=relocateExports(wasmExports,1024);var s=getDylinkMetadata(o);return s.neededDynlibs&&(dynamicLibraries=s.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(wasmExports,"main"),LDSO.init(),loadDylibs(),addOnInit(wasmExports.__wasm_call_ctors),__RELOC_FUNCS__.push(wasmExports.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate"),wasmExports}a(e,"receiveInstance"),addRunDependency("wasm-instantiate");function r(n){e(n.instance,n.module)}if(a(r,"receiveInstantiationResult"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(n){return err(`Module.instantiateWasm callback failed with error: ${n}`),!1}return wasmBinaryFile||(wasmBinaryFile=findWasmBinary()),instantiateAsync(wasmBinary,wasmBinaryFile,t,r),{}}a(createWasm,"createWasm");var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}a(ExitStatus,"ExitStatus");var GOT={},currentModuleWeakSymbols=new Set([]),GOTHandler={get(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),currentModuleWeakSymbols.has(e)||(r.required=!0),r}},LE_HEAP_LOAD_F32=a(t=>HEAP_DATA_VIEW.getFloat32(t,!0),"LE_HEAP_LOAD_F32"),LE_HEAP_LOAD_F64=a(t=>HEAP_DATA_VIEW.getFloat64(t,!0),"LE_HEAP_LOAD_F64"),LE_HEAP_LOAD_I16=a(t=>HEAP_DATA_VIEW.getInt16(t,!0),"LE_HEAP_LOAD_I16"),LE_HEAP_LOAD_I32=a(t=>HEAP_DATA_VIEW.getInt32(t,!0),"LE_HEAP_LOAD_I32"),LE_HEAP_LOAD_U32=a(t=>HEAP_DATA_VIEW.getUint32(t,!0),"LE_HEAP_LOAD_U32"),LE_HEAP_STORE_F32=a((t,e)=>HEAP_DATA_VIEW.setFloat32(t,e,!0),"LE_HEAP_STORE_F32"),LE_HEAP_STORE_F64=a((t,e)=>HEAP_DATA_VIEW.setFloat64(t,e,!0),"LE_HEAP_STORE_F64"),LE_HEAP_STORE_I16=a((t,e)=>HEAP_DATA_VIEW.setInt16(t,e,!0),"LE_HEAP_STORE_I16"),LE_HEAP_STORE_I32=a((t,e)=>HEAP_DATA_VIEW.setInt32(t,e,!0),"LE_HEAP_STORE_I32"),LE_HEAP_STORE_U32=a((t,e)=>HEAP_DATA_VIEW.setUint32(t,e,!0),"LE_HEAP_STORE_U32"),callRuntimeCallbacks=a(t=>{for(;t.length>0;)t.shift()(Module)},"callRuntimeCallbacks"),UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder:void 0,UTF8ArrayToString=a((t,e,r)=>{for(var n=e+r,o=e;t[o]&&!(o>=n);)++o;if(o-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,o));for(var s="";e<o;){var c=t[e++];if(!(c&128)){s+=String.fromCharCode(c);continue}var l=t[e++]&63;if((c&224)==192){s+=String.fromCharCode((c&31)<<6|l);continue}var u=t[e++]&63;if((c&240)==224?c=(c&15)<<12|l<<6|u:c=(c&7)<<18|l<<12|u<<6|t[e++]&63,c<65536)s+=String.fromCharCode(c);else{var d=c-65536;s+=String.fromCharCode(55296|d>>10,56320|d&1023)}}return s},"UTF8ArrayToString"),getDylinkMetadata=a(t=>{var e=0,r=0;function n(){return t[e++]}a(n,"getU8");function o(){for(var ee=0,J=1;;){var G=t[e++];if(ee+=(G&127)*J,J*=128,!(G&128))break}return ee}a(o,"getLEB");function s(){var ee=o();return e+=ee,UTF8ArrayToString(t,e-ee,ee)}a(s,"getString");function c(ee,J){if(ee)throw new Error(J)}a(c,"failIf");var l="dylink.0";if(t instanceof WebAssembly.Module){var u=WebAssembly.Module.customSections(t,l);u.length===0&&(l="dylink",u=WebAssembly.Module.customSections(t,l)),c(u.length===0,"need dylink section"),t=new Uint8Array(u[0]),r=t.length}else{var d=new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer),p=d[0]==1836278016||d[0]==6386541;c(!p,"need to see wasm magic number"),c(t[8]!==0,"need the dylink section to be first"),e=9;var m=o();r=e+m,l=s()}var h={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(l=="dylink"){h.memorySize=o(),h.memoryAlign=o(),h.tableSize=o(),h.tableAlign=o();for(var g=o(),A=0;A<g;++A){var y=s();h.neededDynlibs.push(y)}}else{c(l!=="dylink.0");for(var v=1,b=2,I=3,_=4,k=256,N=3,F=1;e<r;){var O=n(),Y=o();if(O===v)h.memorySize=o(),h.memoryAlign=o(),h.tableSize=o(),h.tableAlign=o();else if(O===b)for(var g=o(),A=0;A<g;++A)y=s(),h.neededDynlibs.push(y);else if(O===I)for(var z=o();z--;){var V=s(),U=o();U&k&&h.tlsExports.add(V)}else if(O===_)for(var z=o();z--;){var H=s(),V=s(),U=o();(U&N)==F&&h.weakImports.add(V)}else e+=Y}}return h},"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return HEAP8[t];case"i8":return HEAP8[t];case"i16":return LE_HEAP_LOAD_I16((t>>1)*2);case"i32":return LE_HEAP_LOAD_I32((t>>2)*4);case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return LE_HEAP_LOAD_F32((t>>2)*4);case"double":return LE_HEAP_LOAD_F64((t>>3)*8);case"*":return LE_HEAP_LOAD_U32((t>>2)*4);default:abort(`invalid type for getValue: ${e}`)}}a(getValue,"getValue");var newDSO=a((t,e,r)=>{var n={refcount:1/0,name:t,exports:r,global:!0};return LDSO.loadedLibsByName[t]=n,e!=null&&(LDSO.loadedLibsByHandle[e]=n),n},"newDSO"),LDSO={loadedLibsByName:{},loadedLibsByHandle:{},init(){newDSO("__main__",0,wasmImports)}},___heap_base=78112,zeroMemory=a((t,e)=>(HEAPU8.fill(0,t,t+e),t),"zeroMemory"),alignMemory=a((t,e)=>Math.ceil(t/e)*e,"alignMemory"),getMemory=a(t=>{if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+alignMemory(t,16);return ___heap_base=r,GOT.__heap_base.value=r,e},"getMemory"),isInternalSym=a(t=>["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm","__start_em_js","__stop_em_js"].includes(t)||t.startsWith("__em_js__"),"isInternalSym"),uleb128Encode=a((t,e)=>{t<128?e.push(t):e.push(t%128|128,t>>7)},"uleb128Encode"),sigToWasmTypes=a(t=>{for(var e={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]);return r},"sigToWasmTypes"),generateFuncType=a((t,e)=>{var r=t.slice(0,1),n=t.slice(1),o={i:127,p:127,j:126,f:125,d:124,e:111};e.push(96),uleb128Encode(n.length,e);for(var s=0;s<n.length;++s)e.push(o[n[s]]);r=="v"?e.push(0):e.push(1,o[r])},"generateFuncType"),convertJsFunctionToWasm=a((t,e)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push(...r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var o=new WebAssembly.Module(new Uint8Array(n)),s=new WebAssembly.Instance(o,{e:{f:t}}),c=s.exports.f;return c},"convertJsFunctionToWasm"),wasmTableMirror=[],wasmTable=new WebAssembly.Table({initial:28,element:"anyfunc"}),getWasmTableEntry=a(t=>{var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e},"getWasmTableEntry"),updateTableMap=a((t,e)=>{if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}},"updateTableMap"),functionsInTableMap,getFunctionAddress=a(t=>(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.get(t)||0),"getFunctionAddress"),freeTableIndexes=[],getEmptyTableSlot=a(()=>{if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1},"getEmptyTableSlot"),setWasmTableEntry=a((t,e)=>{wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)},"setWasmTableEntry"),addFunction=a((t,e)=>{var r=getFunctionAddress(t);if(r)return r;var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(s){if(!(s instanceof TypeError))throw s;var o=convertJsFunctionToWasm(t,e);setWasmTableEntry(n,o)}return functionsInTableMap.set(t,n),n},"addFunction"),updateGOT=a((t,e)=>{for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||=new WebAssembly.Global({value:"i32",mutable:!0}),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err(`unhandled export type for '${r}': ${typeof n}`))}},"updateGOT"),relocateExports=a((t,e,r)=>{var n={};for(var o in t){var s=t[o];typeof s=="object"&&(s=s.value),typeof s=="number"&&(s+=e),n[o]=s}return updateGOT(n,r),n},"relocateExports"),isSymbolDefined=a(t=>{var e=wasmImports[t];return!(!e||e.stub)},"isSymbolDefined"),dynCallLegacy=a((t,e,r)=>{t=t.replace(/p/g,"i");var n=Module["dynCall_"+t];return n(e,...r)},"dynCallLegacy"),dynCall=a((t,e,r=[])=>{if(t.includes("j"))return dynCallLegacy(t,e,r);var n=getWasmTableEntry(e)(...r);return n},"dynCall"),stackSave=a(()=>_emscripten_stack_get_current(),"stackSave"),stackRestore=a(t=>__emscripten_stack_restore(t),"stackRestore"),createInvokeFunction=a(t=>(e,...r)=>{var n=stackSave();try{return dynCall(t,e,r)}catch(o){if(stackRestore(n),o!==o+0)throw o;_setThrew(1,0)}},"createInvokeFunction"),resolveGlobalSymbol=a((t,e=!1)=>{var r;return e&&"orig$"+t in wasmImports&&(t="orig$"+t),isSymbolDefined(t)?r=wasmImports[t]:t.startsWith("invoke_")&&(r=wasmImports[t]=createInvokeFunction(t.split("_")[1])),{sym:r,name:t}},"resolveGlobalSymbol"),UTF8ToString=a((t,e)=>t?UTF8ArrayToString(HEAPU8,t,e):"","UTF8ToString"),loadWebAssemblyModule=a((binary,flags,libName,localScope,handle)=>{var metadata=getDylinkMetadata(binary);currentModuleWeakSymbols=metadata.weakImports;function loadModule(){var firstLoad=!handle||!HEAP8[handle+8];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign),memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+8]=1,LE_HEAP_STORE_U32((handle+12>>2)*4,memoryBase),LE_HEAP_STORE_I32((handle+16>>2)*4,metadata.memorySize),LE_HEAP_STORE_U32((handle+20>>2)*4,tableBase),LE_HEAP_STORE_I32((handle+24>>2)*4,metadata.tableSize))}else memoryBase=LE_HEAP_LOAD_U32((handle+12>>2)*4),tableBase=LE_HEAP_LOAD_U32((handle+20>>2)*4);var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length;tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t).sym;return!e&&localScope&&(e=localScope[t]),e||(e=moduleExports[t]),e}a(resolveSymbol,"resolveSymbol");var proxyHandler={get(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in wasmImports&&!wasmImports[e].stub)return wasmImports[e];if(!(e in t)){var r;t[e]=(...n)=>(r||=resolveSymbol(e),r(...n))}return t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(module,instance){updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols();function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func=`(${args}) => { ${body} };`;ASM_CONSTS[start]=eval(func)}if(a(addEmAsm,"addEmAsm"),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}function addEmJs(name,cSig,body){var jsArgs=[];if(cSig=cSig.slice(1,-1),cSig!="void"){cSig=cSig.split(",");for(var i in cSig){var jsArg=cSig[i].split(" ").pop();jsArgs.push(jsArg.replace("*",""))}}var func=`(${jsArgs}) => ${body};`;moduleExports[name]=eval(func)}a(addEmJs,"addEmJs");for(var name in moduleExports)if(name.startsWith("__em_js__")){var start=moduleExports[name],jsString=UTF8ToString(start),parts=jsString.split("<::>");addEmJs(name.replace("__em_js__",""),parts[0],parts[1]),delete moduleExports[name]}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(a(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(binary,instance))}return WebAssembly.instantiate(binary,info).then(t=>postInstantiation(t.module,t.instance))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(module,instance)}return a(loadModule,"loadModule"),flags.loadAsync?metadata.neededDynlibs.reduce((t,e)=>t.then(()=>loadDynamicLibrary(e,flags,localScope)),Promise.resolve()).then(loadModule):(metadata.neededDynlibs.forEach(t=>loadDynamicLibrary(t,flags,localScope)),loadModule())},"loadWebAssemblyModule"),mergeLibSymbols=a((t,e)=>{for(var[r,n]of Object.entries(t)){let o=a(c=>{isSymbolDefined(c)||(wasmImports[c]=n)},"setImport");o(r);let s="__main_argc_argv";r=="main"&&o(s),r==s&&o("main"),r.startsWith("dynCall_")&&!Module.hasOwnProperty(r)&&(Module[r]=n)}},"mergeLibSymbols"),asyncLoad=a((t,e,r,n)=>{var o=n?"":`al ${t}`;readAsync(t).then(s=>{e(new Uint8Array(s)),o&&removeRunDependency(o)},s=>{if(r)r();else throw`Loading data file "${t}" failed.`}),o&&addRunDependency(o)},"asyncLoad");function loadDynamicLibrary(t,e={global:!0,nodelete:!0},r,n){var o=LDSO.loadedLibsByName[t];if(o)return e.global?o.global||(o.global=!0,mergeLibSymbols(o.exports,t)):r&&Object.assign(r,o.exports),e.nodelete&&o.refcount!==1/0&&(o.refcount=1/0),o.refcount++,n&&(LDSO.loadedLibsByHandle[n]=o),e.loadAsync?Promise.resolve(!0):!0;o=newDSO(t,n,"loading"),o.refcount=e.nodelete?1/0:1,o.global=e.global;function s(){if(n){var u=LE_HEAP_LOAD_U32((n+28>>2)*4),d=LE_HEAP_LOAD_U32((n+32>>2)*4);if(u&&d){var p=HEAP8.slice(u,u+d);return e.loadAsync?Promise.resolve(p):p}}var m=locateFile(t);if(e.loadAsync)return new Promise(function(h,g){asyncLoad(m,h,g)});if(!readBinary)throw new Error(`${m}: file not found, and synchronous loading of external files is not available`);return readBinary(m)}a(s,"loadLibData");function c(){return e.loadAsync?s().then(u=>loadWebAssemblyModule(u,e,t,r,n)):loadWebAssemblyModule(s(),e,t,r,n)}a(c,"getExports");function l(u){o.global?mergeLibSymbols(u,t):r&&Object.assign(r,u),o.exports=u}return a(l,"moduleLoaded"),e.loadAsync?c().then(u=>(l(u),!0)):(l(c()),!0)}a(loadDynamicLibrary,"loadDynamicLibrary");var reportUndefinedSymbols=a(()=>{for(var[t,e]of Object.entries(GOT))if(e.value==0){var r=resolveGlobalSymbol(t,!0).sym;if(!r&&!e.required)continue;if(typeof r=="function")e.value=addFunction(r,r.sig);else if(typeof r=="number")e.value=r;else throw new Error(`bad export type for '${t}': ${typeof r}`)}},"reportUndefinedSymbols"),loadDylibs=a(()=>{if(!dynamicLibraries.length){reportUndefinedSymbols();return}addRunDependency("loadDylibs"),dynamicLibraries.reduce((t,e)=>t.then(()=>loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})),Promise.resolve()).then(()=>{reportUndefinedSymbols(),removeRunDependency("loadDylibs")})},"loadDylibs"),noExitRuntime=Module.noExitRuntime||!0;function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":HEAP8[t]=e;break;case"i8":HEAP8[t]=e;break;case"i16":LE_HEAP_STORE_I16((t>>1)*2,e);break;case"i32":LE_HEAP_STORE_I32((t>>2)*4,e);break;case"i64":abort("to do setValue(i64) use WASM_BIGINT");case"float":LE_HEAP_STORE_F32((t>>2)*4,e);break;case"double":LE_HEAP_STORE_F64((t>>3)*8,e);break;case"*":LE_HEAP_STORE_U32((t>>2)*4,e);break;default:abort(`invalid type for setValue: ${r}`)}}a(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78112),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),__abort_js=a(()=>{abort("")},"__abort_js");__abort_js.sig="v";var nowIsMonotonic=1,__emscripten_get_now_is_monotonic=a(()=>nowIsMonotonic,"__emscripten_get_now_is_monotonic");__emscripten_get_now_is_monotonic.sig="i";var __emscripten_memcpy_js=a((t,e,r)=>HEAPU8.copyWithin(t,e,e+r),"__emscripten_memcpy_js");__emscripten_memcpy_js.sig="vppp";var _emscripten_date_now=a(()=>Date.now(),"_emscripten_date_now");_emscripten_date_now.sig="d";var _emscripten_get_now;_emscripten_get_now=a(()=>performance.now(),"_emscripten_get_now"),_emscripten_get_now.sig="d";var getHeapMax=a(()=>2147483648,"getHeapMax"),growMemory=a(t=>{var e=wasmMemory.buffer,r=(t-e.byteLength+65535)/65536;try{return wasmMemory.grow(r),updateMemoryViews(),1}catch{}},"growMemory"),_emscripten_resize_heap=a(t=>{var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=a((u,d)=>u+(d-u%d)%d,"alignUp"),o=1;o<=4;o*=2){var s=e*(1+.2/o);s=Math.min(s,t+100663296);var c=Math.min(r,n(Math.max(t,s),65536)),l=growMemory(c);if(l)return!0}return!1},"_emscripten_resize_heap");_emscripten_resize_heap.sig="ip";var _fd_close=a(t=>52,"_fd_close");_fd_close.sig="ii";var convertI32PairToI53Checked=a((t,e)=>e+2097152>>>0<4194305-!!t?(t>>>0)+e*4294967296:NaN,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,o){var s=convertI32PairToI53Checked(e,r);return 70}a(_fd_seek,"_fd_seek"),_fd_seek.sig="iiiiip";var printCharBuffers=[null,[],[]],printChar=a((t,e)=>{var r=printCharBuffers[t];e===0||e===10?((t===1?out:err)(UTF8ArrayToString(r,0)),r.length=0):r.push(e)},"printChar"),_fd_write=a((t,e,r,n)=>{for(var o=0,s=0;s<r;s++){var c=LE_HEAP_LOAD_U32((e>>2)*4),l=LE_HEAP_LOAD_U32((e+4>>2)*4);e+=8;for(var u=0;u<l;u++)printChar(t,HEAPU8[c+u]);o+=l}return LE_HEAP_STORE_U32((n>>2)*4,o),0},"_fd_write");_fd_write.sig="iippp";function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}a(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,o){let c=currentParseCallback(e,{row:r,column:n});typeof c=="string"?(setValue(o,c.length,"i32"),stringToUTF16(c,t,10240)):setValue(o,0,"i32")}a(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");var runtimeKeepaliveCounter=0,keepRuntimeAlive=a(()=>noExitRuntime||runtimeKeepaliveCounter>0,"keepRuntimeAlive"),_proc_exit=a(t=>{EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit?.(t),ABORT=!0),quit_(t,new ExitStatus(t))},"_proc_exit");_proc_exit.sig="vi";var exitJS=a((t,e)=>{EXITSTATUS=t,_proc_exit(t)},"exitJS"),handleException=a(t=>{if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)},"handleException"),lengthBytesUTF8=a(t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e},"lengthBytesUTF8"),stringToUTF8Array=a((t,e,r,n)=>{if(!(n>0))return 0;for(var o=r,s=r+n-1,c=0;c<t.length;++c){var l=t.charCodeAt(c);if(l>=55296&&l<=57343){var u=t.charCodeAt(++c);l=65536+((l&1023)<<10)|u&1023}if(l<=127){if(r>=s)break;e[r++]=l}else if(l<=2047){if(r+1>=s)break;e[r++]=192|l>>6,e[r++]=128|l&63}else if(l<=65535){if(r+2>=s)break;e[r++]=224|l>>12,e[r++]=128|l>>6&63,e[r++]=128|l&63}else{if(r+3>=s)break;e[r++]=240|l>>18,e[r++]=128|l>>12&63,e[r++]=128|l>>6&63,e[r++]=128|l&63}}return e[r]=0,r-o},"stringToUTF8Array"),stringToUTF8=a((t,e,r)=>stringToUTF8Array(t,HEAPU8,e,r),"stringToUTF8"),stackAlloc=a(t=>__emscripten_stack_alloc(t),"stackAlloc"),stringToUTF8OnStack=a(t=>{var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8(t,r,e),r},"stringToUTF8OnStack"),stringToUTF16=a((t,e,r)=>{if(r??=2147483647,r<2)return 0;r-=2;for(var n=e,o=r<t.length*2?r/2:t.length,s=0;s<o;++s){var c=t.charCodeAt(s);LE_HEAP_STORE_I16((e>>1)*2,c),e+=2}return LE_HEAP_STORE_I16((e>>1)*2,0),e-n},"stringToUTF16"),AsciiToString=a(t=>{for(var e="";;){var r=HEAPU8[t++];if(!r)return e;e+=String.fromCharCode(r)}},"AsciiToString"),wasmImports={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_abort_js:__abort_js,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,_emscripten_memcpy_js:__emscripten_memcpy_js,emscripten_get_now:_emscripten_get_now,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},wasmExports=createWasm(),___wasm_call_ctors=a(()=>(___wasm_call_ctors=wasmExports.__wasm_call_ctors)(),"___wasm_call_ctors"),___wasm_apply_data_relocs=a(()=>(___wasm_apply_data_relocs=wasmExports.__wasm_apply_data_relocs)(),"___wasm_apply_data_relocs"),_malloc=Module._malloc=t=>(_malloc=Module._malloc=wasmExports.malloc)(t),_calloc=Module._calloc=(t,e)=>(_calloc=Module._calloc=wasmExports.calloc)(t,e),_realloc=Module._realloc=(t,e)=>(_realloc=Module._realloc=wasmExports.realloc)(t,e),_free=Module._free=t=>(_free=Module._free=wasmExports.free)(t),_ts_language_symbol_count=Module._ts_language_symbol_count=t=>(_ts_language_symbol_count=Module._ts_language_symbol_count=wasmExports.ts_language_symbol_count)(t),_ts_language_state_count=Module._ts_language_state_count=t=>(_ts_language_state_count=Module._ts_language_state_count=wasmExports.ts_language_state_count)(t),_ts_language_version=Module._ts_language_version=t=>(_ts_language_version=Module._ts_language_version=wasmExports.ts_language_version)(t),_ts_language_field_count=Module._ts_language_field_count=t=>(_ts_language_field_count=Module._ts_language_field_count=wasmExports.ts_language_field_count)(t),_ts_language_next_state=Module._ts_language_next_state=(t,e,r)=>(_ts_language_next_state=Module._ts_language_next_state=wasmExports.ts_language_next_state)(t,e,r),_ts_language_symbol_name=Module._ts_language_symbol_name=(t,e)=>(_ts_language_symbol_name=Module._ts_language_symbol_name=wasmExports.ts_language_symbol_name)(t,e),_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=(t,e,r,n)=>(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=wasmExports.ts_language_symbol_for_name)(t,e,r,n),_strncmp=Module._strncmp=(t,e,r)=>(_strncmp=Module._strncmp=wasmExports.strncmp)(t,e,r),_ts_language_symbol_type=Module._ts_language_symbol_type=(t,e)=>(_ts_language_symbol_type=Module._ts_language_symbol_type=wasmExports.ts_language_symbol_type)(t,e),_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=(t,e)=>(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=wasmExports.ts_language_field_name_for_id)(t,e),_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=(t,e)=>(_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=wasmExports.ts_lookahead_iterator_new)(t,e),_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=t=>(_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=wasmExports.ts_lookahead_iterator_delete)(t),_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=(t,e)=>(_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=wasmExports.ts_lookahead_iterator_reset_state)(t,e),_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=(t,e,r)=>(_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=wasmExports.ts_lookahead_iterator_reset)(t,e,r),_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=t=>(_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=wasmExports.ts_lookahead_iterator_next)(t),_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=t=>(_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=wasmExports.ts_lookahead_iterator_current_symbol)(t),_memset=Module._memset=(t,e,r)=>(_memset=Module._memset=wasmExports.memset)(t,e,r),_memcpy=Module._memcpy=(t,e,r)=>(_memcpy=Module._memcpy=wasmExports.memcpy)(t,e,r),_ts_parser_delete=Module._ts_parser_delete=t=>(_ts_parser_delete=Module._ts_parser_delete=wasmExports.ts_parser_delete)(t),_ts_parser_reset=Module._ts_parser_reset=t=>(_ts_parser_reset=Module._ts_parser_reset=wasmExports.ts_parser_reset)(t),_ts_parser_set_language=Module._ts_parser_set_language=(t,e)=>(_ts_parser_set_language=Module._ts_parser_set_language=wasmExports.ts_parser_set_language)(t,e),_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=t=>(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=wasmExports.ts_parser_timeout_micros)(t),_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=(t,e,r)=>(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=wasmExports.ts_parser_set_timeout_micros)(t,e,r),_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=(t,e,r)=>(_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=wasmExports.ts_parser_set_included_ranges)(t,e,r),_memmove=Module._memmove=(t,e,r)=>(_memmove=Module._memmove=wasmExports.memmove)(t,e,r),_memcmp=Module._memcmp=(t,e,r)=>(_memcmp=Module._memcmp=wasmExports.memcmp)(t,e,r),_ts_query_new=Module._ts_query_new=(t,e,r,n,o)=>(_ts_query_new=Module._ts_query_new=wasmExports.ts_query_new)(t,e,r,n,o),_ts_query_delete=Module._ts_query_delete=t=>(_ts_query_delete=Module._ts_query_delete=wasmExports.ts_query_delete)(t),_iswspace=Module._iswspace=t=>(_iswspace=Module._iswspace=wasmExports.iswspace)(t),_iswalnum=Module._iswalnum=t=>(_iswalnum=Module._iswalnum=wasmExports.iswalnum)(t),_ts_query_pattern_count=Module._ts_query_pattern_count=t=>(_ts_query_pattern_count=Module._ts_query_pattern_count=wasmExports.ts_query_pattern_count)(t),_ts_query_capture_count=Module._ts_query_capture_count=t=>(_ts_query_capture_count=Module._ts_query_capture_count=wasmExports.ts_query_capture_count)(t),_ts_query_string_count=Module._ts_query_string_count=t=>(_ts_query_string_count=Module._ts_query_string_count=wasmExports.ts_query_string_count)(t),_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=(t,e,r)=>(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=wasmExports.ts_query_capture_name_for_id)(t,e,r),_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=(t,e,r)=>(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=wasmExports.ts_query_string_value_for_id)(t,e,r),_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=(t,e,r)=>(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=wasmExports.ts_query_predicates_for_pattern)(t,e,r),_ts_query_disable_capture=Module._ts_query_disable_capture=(t,e,r)=>(_ts_query_disable_capture=Module._ts_query_disable_capture=wasmExports.ts_query_disable_capture)(t,e,r),_ts_tree_copy=Module._ts_tree_copy=t=>(_ts_tree_copy=Module._ts_tree_copy=wasmExports.ts_tree_copy)(t),_ts_tree_delete=Module._ts_tree_delete=t=>(_ts_tree_delete=Module._ts_tree_delete=wasmExports.ts_tree_delete)(t),_ts_init=Module._ts_init=()=>(_ts_init=Module._ts_init=wasmExports.ts_init)(),_ts_parser_new_wasm=Module._ts_parser_new_wasm=()=>(_ts_parser_new_wasm=Module._ts_parser_new_wasm=wasmExports.ts_parser_new_wasm)(),_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=(t,e)=>(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=wasmExports.ts_parser_enable_logger_wasm)(t,e),_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=(t,e,r,n,o)=>(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=wasmExports.ts_parser_parse_wasm)(t,e,r,n,o),_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=t=>(_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=wasmExports.ts_parser_included_ranges_wasm)(t),_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=(t,e)=>(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=wasmExports.ts_language_type_is_named_wasm)(t,e),_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=(t,e)=>(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=wasmExports.ts_language_type_is_visible_wasm)(t,e),_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=t=>(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=wasmExports.ts_tree_root_node_wasm)(t),_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=t=>(_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=wasmExports.ts_tree_root_node_with_offset_wasm)(t),_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=t=>(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=wasmExports.ts_tree_edit_wasm)(t),_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=t=>(_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=wasmExports.ts_tree_included_ranges_wasm)(t),_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=(t,e)=>(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=wasmExports.ts_tree_get_changed_ranges_wasm)(t,e),_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=t=>(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=wasmExports.ts_tree_cursor_new_wasm)(t),_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=t=>(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=wasmExports.ts_tree_cursor_delete_wasm)(t),_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=t=>(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=wasmExports.ts_tree_cursor_reset_wasm)(t),_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=(t,e)=>(_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=wasmExports.ts_tree_cursor_reset_to_wasm)(t,e),_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=t=>(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=wasmExports.ts_tree_cursor_goto_first_child_wasm)(t),_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=t=>(_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=wasmExports.ts_tree_cursor_goto_last_child_wasm)(t),_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=t=>(_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_index_wasm)(t),_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=t=>(_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_position_wasm)(t),_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=t=>(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=wasmExports.ts_tree_cursor_goto_next_sibling_wasm)(t),_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=t=>(_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=wasmExports.ts_tree_cursor_goto_previous_sibling_wasm)(t),_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=(t,e)=>(_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=wasmExports.ts_tree_cursor_goto_descendant_wasm)(t,e),_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=t=>(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=wasmExports.ts_tree_cursor_goto_parent_wasm)(t),_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=t=>(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=wasmExports.ts_tree_cursor_current_node_type_id_wasm)(t),_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=t=>(_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=wasmExports.ts_tree_cursor_current_node_state_id_wasm)(t),_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=t=>(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=wasmExports.ts_tree_cursor_current_node_is_named_wasm)(t),_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=t=>(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=wasmExports.ts_tree_cursor_current_node_is_missing_wasm)(t),_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=t=>(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=wasmExports.ts_tree_cursor_current_node_id_wasm)(t),_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=t=>(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=wasmExports.ts_tree_cursor_start_position_wasm)(t),_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=t=>(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=wasmExports.ts_tree_cursor_end_position_wasm)(t),_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=t=>(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=wasmExports.ts_tree_cursor_start_index_wasm)(t),_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=t=>(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=wasmExports.ts_tree_cursor_end_index_wasm)(t),_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=t=>(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=wasmExports.ts_tree_cursor_current_field_id_wasm)(t),_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=t=>(_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=wasmExports.ts_tree_cursor_current_depth_wasm)(t),_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=t=>(_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=wasmExports.ts_tree_cursor_current_descendant_index_wasm)(t),_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=t=>(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=wasmExports.ts_tree_cursor_current_node_wasm)(t),_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=t=>(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=wasmExports.ts_node_symbol_wasm)(t),_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=(t,e)=>(_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=wasmExports.ts_node_field_name_for_child_wasm)(t,e),_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=(t,e)=>(_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=wasmExports.ts_node_children_by_field_id_wasm)(t,e),_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=t=>(_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=wasmExports.ts_node_first_child_for_byte_wasm)(t),_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=t=>(_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=wasmExports.ts_node_first_named_child_for_byte_wasm)(t),_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=t=>(_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=wasmExports.ts_node_grammar_symbol_wasm)(t),_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=t=>(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=wasmExports.ts_node_child_count_wasm)(t),_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=t=>(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=wasmExports.ts_node_named_child_count_wasm)(t),_ts_node_child_wasm=Module._ts_node_child_wasm=(t,e)=>(_ts_node_child_wasm=Module._ts_node_child_wasm=wasmExports.ts_node_child_wasm)(t,e),_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=(t,e)=>(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=wasmExports.ts_node_named_child_wasm)(t,e),_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=(t,e)=>(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=wasmExports.ts_node_child_by_field_id_wasm)(t,e),_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=t=>(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=wasmExports.ts_node_next_sibling_wasm)(t),_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=t=>(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=wasmExports.ts_node_prev_sibling_wasm)(t),_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=t=>(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=wasmExports.ts_node_next_named_sibling_wasm)(t),_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=t=>(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=wasmExports.ts_node_prev_named_sibling_wasm)(t),_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=t=>(_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=wasmExports.ts_node_descendant_count_wasm)(t),_ts_node_parent_wasm=Module._ts_node_parent_wasm=t=>(_ts_node_parent_wasm=Module._ts_node_parent_wasm=wasmExports.ts_node_parent_wasm)(t),_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=t=>(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=wasmExports.ts_node_descendant_for_index_wasm)(t),_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=t=>(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=wasmExports.ts_node_named_descendant_for_index_wasm)(t),_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=t=>(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=wasmExports.ts_node_descendant_for_position_wasm)(t),_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=t=>(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=wasmExports.ts_node_named_descendant_for_position_wasm)(t),_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=t=>(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=wasmExports.ts_node_start_point_wasm)(t),_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=t=>(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=wasmExports.ts_node_end_point_wasm)(t),_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=t=>(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=wasmExports.ts_node_start_index_wasm)(t),_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=t=>(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=wasmExports.ts_node_end_index_wasm)(t),_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=t=>(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=wasmExports.ts_node_to_string_wasm)(t),_ts_node_children_wasm=Module._ts_node_children_wasm=t=>(_ts_node_children_wasm=Module._ts_node_children_wasm=wasmExports.ts_node_children_wasm)(t),_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=t=>(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=wasmExports.ts_node_named_children_wasm)(t),_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=(t,e,r,n,o,s,c)=>(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=wasmExports.ts_node_descendants_of_type_wasm)(t,e,r,n,o,s,c),_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=t=>(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=wasmExports.ts_node_is_named_wasm)(t),_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=t=>(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=wasmExports.ts_node_has_changes_wasm)(t),_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=t=>(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=wasmExports.ts_node_has_error_wasm)(t),_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=t=>(_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=wasmExports.ts_node_is_error_wasm)(t),_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=t=>(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=wasmExports.ts_node_is_missing_wasm)(t),_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=t=>(_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=wasmExports.ts_node_is_extra_wasm)(t),_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=t=>(_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=wasmExports.ts_node_parse_state_wasm)(t),_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=t=>(_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=wasmExports.ts_node_next_parse_state_wasm)(t),_ts_query_matches_wasm=Module._ts_query_matches_wasm=(t,e,r,n,o,s,c,l,u,d)=>(_ts_query_matches_wasm=Module._ts_query_matches_wasm=wasmExports.ts_query_matches_wasm)(t,e,r,n,o,s,c,l,u,d),_ts_query_captures_wasm=Module._ts_query_captures_wasm=(t,e,r,n,o,s,c,l,u,d)=>(_ts_query_captures_wasm=Module._ts_query_captures_wasm=wasmExports.ts_query_captures_wasm)(t,e,r,n,o,s,c,l,u,d),_iswalpha=Module._iswalpha=t=>(_iswalpha=Module._iswalpha=wasmExports.iswalpha)(t),_iswblank=Module._iswblank=t=>(_iswblank=Module._iswblank=wasmExports.iswblank)(t),_iswdigit=Module._iswdigit=t=>(_iswdigit=Module._iswdigit=wasmExports.iswdigit)(t),_iswlower=Module._iswlower=t=>(_iswlower=Module._iswlower=wasmExports.iswlower)(t),_iswupper=Module._iswupper=t=>(_iswupper=Module._iswupper=wasmExports.iswupper)(t),_iswxdigit=Module._iswxdigit=t=>(_iswxdigit=Module._iswxdigit=wasmExports.iswxdigit)(t),_memchr=Module._memchr=(t,e,r)=>(_memchr=Module._memchr=wasmExports.memchr)(t,e,r),_strlen=Module._strlen=t=>(_strlen=Module._strlen=wasmExports.strlen)(t),_strcmp=Module._strcmp=(t,e)=>(_strcmp=Module._strcmp=wasmExports.strcmp)(t,e),_strncat=Module._strncat=(t,e,r)=>(_strncat=Module._strncat=wasmExports.strncat)(t,e,r),_strncpy=Module._strncpy=(t,e,r)=>(_strncpy=Module._strncpy=wasmExports.strncpy)(t,e,r),_towlower=Module._towlower=t=>(_towlower=Module._towlower=wasmExports.towlower)(t),_towupper=Module._towupper=t=>(_towupper=Module._towupper=wasmExports.towupper)(t),_setThrew=a((t,e)=>(_setThrew=wasmExports.setThrew)(t,e),"_setThrew"),__emscripten_stack_restore=a(t=>(__emscripten_stack_restore=wasmExports._emscripten_stack_restore)(t),"__emscripten_stack_restore"),__emscripten_stack_alloc=a(t=>(__emscripten_stack_alloc=wasmExports._emscripten_stack_alloc)(t),"__emscripten_stack_alloc"),_emscripten_stack_get_current=a(()=>(_emscripten_stack_get_current=wasmExports.emscripten_stack_get_current)(),"_emscripten_stack_get_current"),dynCall_jiji=Module.dynCall_jiji=(t,e,r,n,o)=>(dynCall_jiji=Module.dynCall_jiji=wasmExports.dynCall_jiji)(t,e,r,n,o),_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=t=>(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=wasmExports.orig$ts_parser_timeout_micros)(t),_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=(t,e)=>(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=wasmExports.orig$ts_parser_set_timeout_micros)(t,e);Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16;var calledRun;dependenciesFulfilled=a(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"runCaller");function callMain(t=[]){var e=resolveGlobalSymbol("main").sym;if(e){t.unshift(thisProgram);var r=t.length,n=stackAlloc((r+1)*4),o=n;t.forEach(c=>{LE_HEAP_STORE_U32((o>>2)*4,stringToUTF8OnStack(c)),o+=4}),LE_HEAP_STORE_U32((o>>2)*4,0);try{var s=e(r,n);return exitJS(s,!0),s}catch(c){return handleException(c)}}}a(callMain,"callMain");function run(t=arguments_){if(runDependencies>0||(preRun(),runDependencies>0))return;function e(){calledRun||(calledRun=!0,Module.calledRun=!0,!ABORT&&(initRuntime(),preMain(),Module.onRuntimeInitialized?.(),shouldRunNow&&callMain(t),postRun()))}a(e,"doRun"),Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()}if(a(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_CURSOR=4*SIZE_OF_INT,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/,VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{a(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(!e)r=0,e=null;else if(e.constructor===Language){r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}else throw new Error("Argument must be a Language");return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=a((u,d)=>e.slice(u),"currentParseCallback");else if(typeof e=="function")currentParseCallback=e;else throw new Error("Argument must be a string or a function");this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let o=0,s=0;if(n?.includedRanges){o=n.includedRanges.length,s=C._calloc(o,SIZE_OF_RANGE);let u=s;for(let d=0;d<o;d++)marshalRange(u,n.includedRanges[d]),u+=SIZE_OF_RANGE}let c=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,s,o);if(!c)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,c,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}getIncludedRanges(){C._ts_parser_included_ranges_wasm(this[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),n=new Array(e);if(e>0){let o=r;for(let s=0;s<e;s++)n[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return n}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}setLogger(e){if(!e)e=null;else if(typeof e!="function")throw new Error("Logger callback must be a function");return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{a(this,"Tree")}constructor(e,r,n,o){assertInternal(e),this[0]=r,this.language=n,this.textCallback=o}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}rootNodeWithOffset(e,r){let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),marshalPoint(n+SIZE_OF_INT,r),C._ts_tree_root_node_with_offset_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),o=new Array(r);if(r>0){let s=n;for(let c=0;c<r;c++)o[c]=unmarshalRange(s),s+=SIZE_OF_RANGE;C._free(n)}return o}getIncludedRanges(){C._ts_tree_included_ranges_wasm(this[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),n=new Array(e);if(e>0){let o=r;for(let s=0;s<e;s++)n[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return n}}class Node{static{a(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get grammarId(){return marshalNode(this),C._ts_node_grammar_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get grammarType(){return this.tree.language.types[this.grammarId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}get parseState(){return marshalNode(this),C._ts_node_parse_state_wasm(this.tree[0])}get nextParseState(){return marshalNode(this),C._ts_node_next_parse_state_wasm(this.tree[0])}get isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}get hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}get hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}get isError(){return marshalNode(this),C._ts_node_is_error_wasm(this.tree[0])===1}get isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}get isExtra(){return marshalNode(this),C._ts_node_is_extra_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);return r!==-1?this.childForFieldId(r):null}fieldNameForChild(e){marshalNode(this);let r=C._ts_node_field_name_for_child_wasm(this.tree[0],e);return r?AsciiToString(r):null}childrenForFieldName(e){let r=this.tree.language.fields.indexOf(e);return r!==-1&&r!==0?this.childrenForFieldId(r):[]}childrenForFieldId(e){marshalNode(this),C._ts_node_children_by_field_id_wasm(this.tree[0],e);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),o=new Array(r);if(r>0){let s=n;for(let c=0;c<r;c++)o[c]=unmarshalNode(this.tree,s),s+=SIZE_OF_NODE;C._free(n)}return o}firstChildForIndex(e){marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),C._ts_node_first_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}firstNamedChildForIndex(e){marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),C._ts_node_first_named_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let o=0;o<e;o++)this._children[o]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let o=0;o<e;o++)this._namedChildren[o]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let o=[],s=this.tree.language.types;for(let p=0,m=s.length;p<m;p++)e.includes(s[p])&&o.push(p);let c=C._malloc(SIZE_OF_INT*o.length);for(let p=0,m=o.length;p<m;p++)setValue(c+p*SIZE_OF_INT,o[p],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],c,o.length,r.row,r.column,n.row,n.column);let l=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=new Array(l);if(l>0){let p=u;for(let m=0;m<l;m++)d[m]=unmarshalNode(this.tree,p),p+=SIZE_OF_NODE}return C._free(u),C._free(c),d}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get descendantCount(){return marshalNode(this),C._ts_node_descendant_count_wasm(this.tree[0])}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{a(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}resetTo(e){marshalTreeCursor(this,TRANSFER_BUFFER),marshalTreeCursor(e,TRANSFER_BUFFER+SIZE_OF_CURSOR),C._ts_tree_cursor_reset_to_wasm(this.tree[0],e.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeStateId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_state_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}get currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}get currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}get currentFieldName(){return this.tree.language.fields[this.currentFieldId]}get currentDepth(){return marshalTreeCursor(this),C._ts_tree_cursor_current_depth_wasm(this.tree[0])}get currentDescendantIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_current_descendant_index_wasm(this.tree[0])}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoLastChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_last_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoFirstChildForIndex(e){marshalTreeCursor(this),setValue(TRANSFER_BUFFER+SIZE_OF_CURSOR,e,"i32");let r=C._ts_tree_cursor_goto_first_child_for_index_wasm(this.tree[0]);return unmarshalTreeCursor(this),r===1}gotoFirstChildForPosition(e){marshalTreeCursor(this),marshalPoint(TRANSFER_BUFFER+SIZE_OF_CURSOR,e);let r=C._ts_tree_cursor_goto_first_child_for_position_wasm(this.tree[0]);return unmarshalTreeCursor(this),r===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoPreviousSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_previous_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoDescendant(e){marshalTreeCursor(this),C._ts_tree_cursor_goto_descendant_wasm(this.tree[0],e),unmarshalTreeCursor(this)}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{a(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,o=this.types.length;n<o;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,o=this.fields.length;n<o;n++){let s=C._ts_language_field_name_for_id(this[0],n);s!==0?this.fields[n]=UTF8ToString(s):this.fields[n]=null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}get stateCount(){return C._ts_language_state_count(this[0])}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),o=C._malloc(n+1);stringToUTF8(e,o,n+1);let s=C._ts_language_symbol_for_name(this[0],o,n,r);return C._free(o),s||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}nextState(e,r){return C._ts_language_next_state(this[0],e,r)}lookaheadIterator(e){let r=C._ts_lookahead_iterator_new(this[0],e);return r?new LookaheadIterable(INTERNAL,r,this):null}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let o=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!o){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=getValue(TRANSFER_BUFFER,"i32"),b=UTF8ToString(n,v).length,I=e.substr(b,100).split(`
`)[0],_=I.match(QUERY_WORD_REGEX)[0],k;switch(y){case 2:k=new RangeError(`Bad node name '${_}'`);break;case 3:k=new RangeError(`Bad field name '${_}'`);break;case 4:k=new RangeError(`Bad capture name @${_}`);break;case 5:k=new TypeError(`Bad pattern structure at offset ${b}: '${I}'...`),_="";break;default:k=new SyntaxError(`Bad syntax at offset ${b}: '${I}'...`),_="";break}throw k.index=b,k.length=_.length,C._free(n),k}let s=C._ts_query_string_count(o),c=C._ts_query_capture_count(o),l=C._ts_query_pattern_count(o),u=new Array(c),d=new Array(s);for(let y=0;y<c;y++){let v=C._ts_query_capture_name_for_id(o,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(v,b)}for(let y=0;y<s;y++){let v=C._ts_query_string_value_for_id(o,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");d[y]=UTF8ToString(v,b)}let p=new Array(l),m=new Array(l),h=new Array(l),g=new Array(l),A=new Array(l);for(let y=0;y<l;y++){let v=C._ts_query_predicates_for_pattern(o,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");g[y]=[],A[y]=[];let I=[],_=v;for(let k=0;k<b;k++){let N=getValue(_,"i32");_+=SIZE_OF_INT;let F=getValue(_,"i32");if(_+=SIZE_OF_INT,N===PREDICATE_STEP_TYPE_CAPTURE)I.push({type:"capture",name:u[F]});else if(N===PREDICATE_STEP_TYPE_STRING)I.push({type:"string",value:d[F]});else if(I.length>0){if(I[0].type!=="string")throw new Error("Predicates must begin with a literal value");let O=I[0].value,Y=!0,z=!0,V;switch(O){case"any-not-eq?":case"not-eq?":Y=!1;case"any-eq?":case"eq?":if(I.length!==3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 2, got ${I.length-1}`);if(I[1].type!=="capture")throw new Error(`First argument of \`#${O}\` predicate must be a capture. Got "${I[1].value}"`);if(z=!O.startsWith("any-"),I[2].type==="capture"){let J=I[1].name,G=I[2].name;A[y].push(j=>{let Z=[],ie=[];for(let re of j)re.name===J&&Z.push(re.node),re.name===G&&ie.push(re.node);let ne=a((re,fe,ye)=>ye?re.text===fe.text:re.text!==fe.text,"compare");return z?Z.every(re=>ie.some(fe=>ne(re,fe,Y))):Z.some(re=>ie.some(fe=>ne(re,fe,Y)))})}else{V=I[1].name;let J=I[2].value,G=a(Z=>Z.text===J,"matches"),j=a(Z=>Z.text!==J,"doesNotMatch");A[y].push(Z=>{let ie=[];for(let re of Z)re.name===V&&ie.push(re.node);let ne=Y?G:j;return z?ie.every(ne):ie.some(ne)})}break;case"any-not-match?":case"not-match?":Y=!1;case"any-match?":case"match?":if(I.length!==3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 2, got ${I.length-1}.`);if(I[1].type!=="capture")throw new Error(`First argument of \`#${O}\` predicate must be a capture. Got "${I[1].value}".`);if(I[2].type!=="string")throw new Error(`Second argument of \`#${O}\` predicate must be a string. Got @${I[2].value}.`);V=I[1].name;let U=new RegExp(I[2].value);z=!O.startsWith("any-"),A[y].push(J=>{let G=[];for(let Z of J)Z.name===V&&G.push(Z.node.text);let j=a((Z,ie)=>ie?U.test(Z):!U.test(Z),"test");return G.length===0?!Y:z?G.every(Z=>j(Z,Y)):G.some(Z=>j(Z,Y))});break;case"set!":if(I.length<2||I.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${I.length-1}.`);if(I.some(J=>J.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');p[y]||(p[y]={}),p[y][I[1].value]=I[2]?I[2].value:null;break;case"is?":case"is-not?":if(I.length<2||I.length>3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 1 or 2. Got ${I.length-1}.`);if(I.some(J=>J.type!=="string"))throw new Error(`Arguments to \`#${O}\` predicate must be a strings.".`);let H=O==="is?"?m:h;H[y]||(H[y]={}),H[y][I[1].value]=I[2]?I[2].value:null;break;case"not-any-of?":Y=!1;case"any-of?":if(I.length<2)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected at least 1. Got ${I.length-1}.`);if(I[1].type!=="capture")throw new Error(`First argument of \`#${O}\` predicate must be a capture. Got "${I[1].value}".`);for(let J=2;J<I.length;J++)if(I[J].type!=="string")throw new Error(`Arguments to \`#${O}\` predicate must be a strings.".`);V=I[1].name;let ee=I.slice(2).map(J=>J.value);A[y].push(J=>{let G=[];for(let j of J)j.name===V&&G.push(j.node.text);return G.length===0?!Y:G.every(j=>ee.includes(j))===Y});break;default:g[y].push({operator:O,operands:I.slice(1)})}I.length=0}}Object.freeze(p[y]),Object.freeze(m[y]),Object.freeze(h[y])}return C._free(n),new Query(INTERNAL,o,u,A,g,Object.freeze(p),Object.freeze(m),Object.freeze(h))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let n=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(n))}else r=fetch(n).then(o=>o.arrayBuffer().then(s=>{if(o.ok)return new Uint8Array(s);{let c=new TextDecoder("utf-8").decode(s);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}return r.then(n=>loadWebAssemblyModule(n,{loadAsync:!0})).then(n=>{let o=Object.keys(n),s=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));s||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=n[s]();return new Language(INTERNAL,c)})}}class LookaheadIterable{static{a(this,"LookaheadIterable")}constructor(e,r,n){assertInternal(e),this[0]=r,this.language=n}get currentTypeId(){return C._ts_lookahead_iterator_current_symbol(this[0])}get currentType(){return this.language.types[this.currentTypeId]||"ERROR"}delete(){C._ts_lookahead_iterator_delete(this[0]),this[0]=0}resetState(e){return C._ts_lookahead_iterator_reset_state(this[0],e)}reset(e,r){return C._ts_lookahead_iterator_reset(this[0],e[0],r)?(this.language=e,!0):!1}[Symbol.iterator](){let e=this;return{next(){return C._ts_lookahead_iterator_next(e[0])?{done:!1,value:e.currentType}:{done:!0,value:""}}}}}class Query{static{a(this,"Query")}constructor(e,r,n,o,s,c,l,u){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=o,this.predicates=s,this.setProperties=c,this.assertedProperties=l,this.refutedProperties=u,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,{startPosition:r=ZERO_POINT,endPosition:n=ZERO_POINT,startIndex:o=0,endIndex:s=0,matchLimit:c=4294967295,maxStartDepth:l=4294967295}={}){if(typeof c!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o,s,c,l);let u=getValue(TRANSFER_BUFFER,"i32"),d=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),m=new Array(u);this.exceededMatchLimit=!!p;let h=0,g=d;for(let A=0;A<u;A++){let y=getValue(g,"i32");g+=SIZE_OF_INT;let v=getValue(g,"i32");g+=SIZE_OF_INT;let b=new Array(v);if(g=unmarshalCaptures(this,e.tree,g,b),this.textPredicates[y].every(I=>I(b))){m[h]={pattern:y,captures:b};let I=this.setProperties[y];I&&(m[h].setProperties=I);let _=this.assertedProperties[y];_&&(m[h].assertedProperties=_);let k=this.refutedProperties[y];k&&(m[h].refutedProperties=k),h++}}return m.length=h,C._free(d),m}captures(e,{startPosition:r=ZERO_POINT,endPosition:n=ZERO_POINT,startIndex:o=0,endIndex:s=0,matchLimit:c=4294967295,maxStartDepth:l=4294967295}={}){if(typeof c!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o,s,c,l);let u=getValue(TRANSFER_BUFFER,"i32"),d=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),m=[];this.exceededMatchLimit=!!p;let h=[],g=d;for(let A=0;A<u;A++){let y=getValue(g,"i32");g+=SIZE_OF_INT;let v=getValue(g,"i32");g+=SIZE_OF_INT;let b=getValue(g,"i32");if(g+=SIZE_OF_INT,h.length=v,g=unmarshalCaptures(this,e.tree,g,h),this.textPredicates[y].every(I=>I(h))){let I=h[b],_=this.setProperties[y];_&&(I.setProperties=_);let k=this.assertedProperties[y];k&&(I.assertedProperties=k);let N=this.refutedProperties[y];N&&(I.refutedProperties=N),m.push(I)}}return C._free(d),m}predicatesForPattern(e){return this.predicates[e]}disableCapture(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1),C._ts_query_disable_capture(this[0],n,r),C._free(n)}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,o=t.textCallback(e,null,r);for(e+=o.length;e<r;){let s=t.textCallback(e,null,r);if(s&&s.length>0)e+=s.length,o+=s;else break}return e>r&&(o=o.slice(0,n)),o}a(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let o=0,s=n.length;o<s;o++){let c=getValue(r,"i32");r+=SIZE_OF_INT;let l=unmarshalNode(e,r);r+=SIZE_OF_NODE,n[o]={name:t.captureNames[c],node:l}}return r}a(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}a(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}a(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}a(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(e+=SIZE_OF_INT,r===0)return null;let n=getValue(e,"i32");e+=SIZE_OF_INT;let o=getValue(e,"i32");e+=SIZE_OF_INT;let s=getValue(e,"i32");e+=SIZE_OF_INT;let c=getValue(e,"i32"),l=new Node(INTERNAL,t);return l.id=r,l.startIndex=n,l.startPosition={row:o,column:s},l[0]=c,l}a(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32"),setValue(e+3*SIZE_OF_INT,t[3],"i32")}a(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),t[3]=getValue(TRANSFER_BUFFER+3*SIZE_OF_INT,"i32")}a(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}a(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32")>>>0,column:getValue(t+SIZE_OF_INT,"i32")>>>0}}a(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.endPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.endIndex,"i32"),t+=SIZE_OF_INT}a(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32")>>>0,t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32")>>>0,e}a(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}a(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Lve=W((r9n,GGe)=>{f();var Mve=require("fs"),yJ=require("path"),i7=yJ.join,w$t=yJ.dirname,$Ge=Mve.accessSync&&function(t){try{Mve.accessSync(t)}catch{return!1}return!0}||Mve.existsSync||yJ.existsSync,jGe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function _$t(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(jGe).map(function(u){u in t||(t[u]=jGe[u])}),t.module_root||(t.module_root=S$t(__filename)),yJ.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,o=t.try.length,s,c,l;n<o;n++){s=i7.apply(null,t.try[n].map(function(u){return t[u]||u})),r.push(s);try{return c=t.path?e.resolve(s):e(s),t.path||(c.path=s),c}catch(u){if(u.code!=="MODULE_NOT_FOUND"&&u.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(u.message))throw u}}throw l=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(u){return t.arrow+u}).join(`
`)),l.tries=r,l}a(_$t,"bindings");GGe.exports=_$t;function S$t(t){for(var e=w$t(t),r;;){if(e==="."&&(e=process.cwd()),$Ge(i7(e,"dist")))return i7(e,"dist");if($Ge(i7(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=i7(e,"..")}}a(S$t,"getRoot")});var zGe=W((o9n,VGe)=>{f();VGe.exports=Lve()("node_sqlite3.node")});var JGe=W(YGe=>{f();var R$t=require("util");function k$t(t,e,r){let n=t[e];t[e]=function(){let o=new Error,s=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return R$t.inspect(l,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let c=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=a(function(){let u=arguments[0];return u&&u.stack&&!u.__augmented&&(u.stack=KGe(u).join(`
`),u.stack+=`
--> in `+s,u.stack+=`
`+KGe(o).slice(1).join(`
`),u.__augmented=!0),c.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}a(k$t,"extendTrace");YGe.extendTrace=k$t;function KGe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}a(KGe,"filter")});var tVe=W((ZGe,eVe)=>{f();var P$t=require("path"),Eh=zGe(),l3=require("events").EventEmitter;eVe.exports=ZGe=Eh;function u3(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let s=n[n.length-1];r=a(function(c){c&&s(c)},"errBack")}let o=new CJ(this,e,r);return t.call(this,o,n)}}a(u3,"normalizeMethod");function Ove(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}a(Ove,"inherits");Eh.cached={Database:a(function(t,e,r){if(t===""||t===":memory:")return new Pf(t,e,r);let n;if(t=P$t.resolve(t),!Eh.cached.objects[t])n=Eh.cached.objects[t]=new Pf(t,e,r);else{n=Eh.cached.objects[t];let s=typeof e=="number"?r:e;if(typeof s=="function"){let c=function(){s.call(n,null)};var o=c;a(c,"cb"),n.open?process.nextTick(c):n.once("open",c)}}return n},"Database"),objects:{}};var Pf=Eh.Database,CJ=Eh.Statement,Fve=Eh.Backup;Ove(Pf,l3);Ove(CJ,l3);Ove(Fve,l3);Pf.prototype.prepare=u3(function(t,e){return e.length?t.bind.apply(t,e):t});Pf.prototype.run=u3(function(t,e){return t.run.apply(t,e).finalize(),this});Pf.prototype.get=u3(function(t,e){return t.get.apply(t,e).finalize(),this});Pf.prototype.all=u3(function(t,e){return t.all.apply(t,e).finalize(),this});Pf.prototype.each=u3(function(t,e){return t.each.apply(t,e).finalize(),this});Pf.prototype.map=u3(function(t,e){return t.map.apply(t,e).finalize(),this});Pf.prototype.backup=function(){let t;return arguments.length<=2?t=new Fve(this,arguments[0],"main","main",!0,arguments[1]):t=new Fve(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Eh.BUSY,Eh.LOCKED],t};CJ.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let o={};if(n.length){let s=Object.keys(n[0]),c=s[0];if(s.length>2)for(let l=0;l<n.length;l++)o[n[l][c]]=n[l];else{let l=s[1];for(let u=0;u<n.length;u++)o[n[u][c]]=n[u][l]}}e(r,o)}),this.all.apply(this,t)};var XGe=!1,Qve=["trace","profile","change"];Pf.prototype.addListener=Pf.prototype.on=function(t){let e=l3.prototype.addListener.apply(this,arguments);return Qve.indexOf(t)>=0&&this.configure(t,!0),e};Pf.prototype.removeListener=function(t){let e=l3.prototype.removeListener.apply(this,arguments);return Qve.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Pf.prototype.removeAllListeners=function(t){let e=l3.prototype.removeAllListeners.apply(this,arguments);return Qve.indexOf(t)>=0&&this.configure(t,!1),e};Eh.verbose=function(){if(!XGe){let t=JGe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Pf.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(CJ.prototype,e)}),XGe=!0}return Eh}});var JJ=W(pl=>{"use strict";f();Object.defineProperty(pl,"__esModule",{value:!0});pl.thenable=pl.typedArray=pl.stringArray=pl.array=pl.func=pl.error=pl.number=pl.string=pl.boolean=void 0;function Ajt(t){return t===!0||t===!1}a(Ajt,"boolean");pl.boolean=Ajt;function Oze(t){return typeof t=="string"||t instanceof String}a(Oze,"string");pl.string=Oze;function yjt(t){return typeof t=="number"||t instanceof Number}a(yjt,"number");pl.number=yjt;function Cjt(t){return t instanceof Error}a(Cjt,"error");pl.error=Cjt;function Qze(t){return typeof t=="function"}a(Qze,"func");pl.func=Qze;function Uze(t){return Array.isArray(t)}a(Uze,"array");pl.array=Uze;function vjt(t){return Uze(t)&&t.every(e=>Oze(e))}a(vjt,"stringArray");pl.stringArray=vjt;function xjt(t,e){return Array.isArray(t)&&t.every(e)}a(xjt,"typedArray");pl.typedArray=xjt;function Ejt(t){return t&&Qze(t.then)}a(Ejt,"thenable");pl.thenable=Ejt});var g1e=W(bh=>{"use strict";f();Object.defineProperty(bh,"__esModule",{value:!0});bh.generateUuid=bh.parse=bh.isUUID=bh.v4=bh.empty=void 0;var d7=class{static{a(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},f7=class t extends d7{static{a(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};f7._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];f7._timeHighBits=["8","9","a","b"];bh.empty=new d7("00000000-0000-0000-0000-000000000000");function qze(){return new f7}a(qze,"v4");bh.v4=qze;var bjt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Hze(t){return bjt.test(t)}a(Hze,"isUUID");bh.isUUID=Hze;function Ijt(t){if(!Hze(t))throw new Error("invalid uuid");return new d7(t)}a(Ijt,"parse");bh.parse=Ijt;function Tjt(){return qze().asHex()}a(Tjt,"generateUuid");bh.generateUuid=Tjt});var Wze=W($T=>{"use strict";f();Object.defineProperty($T,"__esModule",{value:!0});$T.attachPartialResult=$T.ProgressFeature=$T.attachWorkDone=void 0;var WT=mi(),wjt=g1e(),PR=class t{static{a(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,o){let s={kind:"begin",title:e,percentage:r,message:n,cancellable:o};this._connection.sendProgress(WT.WorkDoneProgress.type,this._token,s)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(WT.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(WT.WorkDoneProgress.type,this._token,{kind:"end"})}};PR.Instances=new Map;var XJ=class extends PR{static{a(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new WT.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},p7=class{static{a(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},ZJ=class extends p7{static{a(this,"NullProgressServerReporter")}constructor(){super(),this._source=new WT.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function _jt(t,e){if(e===void 0||e.workDoneToken===void 0)return new p7;let r=e.workDoneToken;return delete e.workDoneToken,new PR(t,r)}a(_jt,"attachWorkDone");$T.attachWorkDone=_jt;var Sjt=a(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(WT.WorkDoneProgressCancelNotification.type,r=>{let n=PR.Instances.get(r.token);(n instanceof XJ||n instanceof ZJ)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new p7:new PR(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,wjt.generateUuid)();return this.connection.sendRequest(WT.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new XJ(this.connection,e))}else return Promise.resolve(new ZJ)}},"ProgressFeature");$T.ProgressFeature=Sjt;var A1e;(function(t){t.type=new WT.ProgressType})(A1e||(A1e={}));var y1e=class{static{a(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(A1e.type,this._token,e)}};function Rjt(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new y1e(t,r)}a(Rjt,"attachPartialResult");$T.attachPartialResult=Rjt});var $ze=W(eX=>{"use strict";f();Object.defineProperty(eX,"__esModule",{value:!0});eX.ConfigurationFeature=void 0;var kjt=mi(),Pjt=JJ(),Djt=a(t=>class extends t{getConfiguration(e){return e?Pjt.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(kjt.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");eX.ConfigurationFeature=Djt});var jze=W(rX=>{"use strict";f();Object.defineProperty(rX,"__esModule",{value:!0});rX.WorkspaceFoldersFeature=void 0;var tX=mi(),Bjt=a(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new tX.Emitter,this.connection.onNotification(tX.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(tX.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(tX.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");rX.WorkspaceFoldersFeature=Bjt});var Gze=W(nX=>{"use strict";f();Object.defineProperty(nX,"__esModule",{value:!0});nX.CallHierarchyFeature=void 0;var C1e=mi(),Njt=a(t=>class extends t{get callHierarchy(){return{onPrepare:a(e=>this.connection.onRequest(C1e.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:a(e=>{let r=C1e.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:a(e=>{let r=C1e.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");nX.CallHierarchyFeature=Njt});var x1e=W(jT=>{"use strict";f();Object.defineProperty(jT,"__esModule",{value:!0});jT.SemanticTokensBuilder=jT.SemanticTokensDiff=jT.SemanticTokensFeature=void 0;var iX=mi(),Mjt=a(t=>class extends t{get semanticTokens(){return{refresh:a(()=>this.connection.sendRequest(iX.SemanticTokensRefreshRequest.type),"refresh"),on:a(e=>{let r=iX.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:a(e=>{let r=iX.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:a(e=>{let r=iX.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");jT.SemanticTokensFeature=Mjt;var oX=class{static{a(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let o=e-1,s=r-1;for(;o>=n&&s>=n&&this.originalSequence[o]===this.modifiedSequence[s];)o--,s--;(o<n||s<n)&&(o++,s++);let c=o-n+1,l=this.modifiedSequence.slice(n,s+1);return l.length===1&&l[0]===this.originalSequence[o]?[{start:n,deleteCount:c-1}]:[{start:n,deleteCount:c,data:l}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};jT.SemanticTokensDiff=oX;var v1e=class{static{a(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,o,s){let c=e,l=r;this._dataLen>0&&(c-=this._prevLine,c===0&&(l-=this._prevChar)),this._data[this._dataLen++]=c,this._data[this._dataLen++]=l,this._data[this._dataLen++]=n,this._data[this._dataLen++]=o,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new oX(this._prevData,this._data).computeDiff()}:this.build()}};jT.SemanticTokensBuilder=v1e});var Vze=W(sX=>{"use strict";f();Object.defineProperty(sX,"__esModule",{value:!0});sX.ShowDocumentFeature=void 0;var Ljt=mi(),Fjt=a(t=>class extends t{showDocument(e){return this.connection.sendRequest(Ljt.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");sX.ShowDocumentFeature=Fjt});var zze=W(aX=>{"use strict";f();Object.defineProperty(aX,"__esModule",{value:!0});aX.FileOperationsFeature=void 0;var A3=mi(),Ojt=a(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(A3.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(A3.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(A3.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(A3.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(A3.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(A3.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");aX.FileOperationsFeature=Ojt});var Kze=W(cX=>{"use strict";f();Object.defineProperty(cX,"__esModule",{value:!0});cX.LinkedEditingRangeFeature=void 0;var Qjt=mi(),Ujt=a(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(Qjt.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");cX.LinkedEditingRangeFeature=Ujt});var Yze=W(lX=>{"use strict";f();Object.defineProperty(lX,"__esModule",{value:!0});lX.TypeHierarchyFeature=void 0;var E1e=mi(),qjt=a(t=>class extends t{get typeHierarchy(){return{onPrepare:a(e=>this.connection.onRequest(E1e.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:a(e=>{let r=E1e.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:a(e=>{let r=E1e.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");lX.TypeHierarchyFeature=qjt});var Xze=W(uX=>{"use strict";f();Object.defineProperty(uX,"__esModule",{value:!0});uX.InlineValueFeature=void 0;var Jze=mi(),Hjt=a(t=>class extends t{get inlineValue(){return{refresh:a(()=>this.connection.sendRequest(Jze.InlineValueRefreshRequest.type),"refresh"),on:a(e=>this.connection.onRequest(Jze.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");uX.InlineValueFeature=Hjt});var eKe=W(dX=>{"use strict";f();Object.defineProperty(dX,"__esModule",{value:!0});dX.FoldingRangeFeature=void 0;var Zze=mi(),Wjt=a(t=>class extends t{get foldingRange(){return{refresh:a(()=>this.connection.sendRequest(Zze.FoldingRangeRefreshRequest.type),"refresh"),on:a(e=>{let r=Zze.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");dX.FoldingRangeFeature=Wjt});var tKe=W(fX=>{"use strict";f();Object.defineProperty(fX,"__esModule",{value:!0});fX.InlayHintFeature=void 0;var b1e=mi(),$jt=a(t=>class extends t{get inlayHint(){return{refresh:a(()=>this.connection.sendRequest(b1e.InlayHintRefreshRequest.type),"refresh"),on:a(e=>this.connection.onRequest(b1e.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:a(e=>this.connection.onRequest(b1e.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");fX.InlayHintFeature=$jt});var rKe=W(pX=>{"use strict";f();Object.defineProperty(pX,"__esModule",{value:!0});pX.DiagnosticFeature=void 0;var m7=mi(),jjt=a(t=>class extends t{get diagnostics(){return{refresh:a(()=>this.connection.sendRequest(m7.DiagnosticRefreshRequest.type),"refresh"),on:a(e=>this.connection.onRequest(m7.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(m7.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:a(e=>this.connection.onRequest(m7.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(m7.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");pX.DiagnosticFeature=jjt});var T1e=W(mX=>{"use strict";f();Object.defineProperty(mX,"__esModule",{value:!0});mX.TextDocuments=void 0;var DR=mi(),I1e=class{static{a(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new DR.Emitter,this._onDidOpen=new DR.Emitter,this._onDidClose=new DR.Emitter,this._onDidSave=new DR.Emitter,this._onWillSave=new DR.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=DR.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let o=n.textDocument,s=this._configuration.create(o.uri,o.languageId,o.version,o.text);this._syncedDocuments.set(o.uri,s);let c=Object.freeze({document:s});this._onDidOpen.fire(c),this._onDidChangeContent.fire(c)})),r.push(e.onDidChangeTextDocument(n=>{let o=n.textDocument,s=n.contentChanges;if(s.length===0)return;let{version:c}=o;if(c==null)throw new Error(`Received document change event for ${o.uri} without valid version identifier`);let l=this._syncedDocuments.get(o.uri);l!==void 0&&(l=this._configuration.update(l,s,c),this._syncedDocuments.set(o.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),r.push(e.onDidCloseTextDocument(n=>{let o=this._syncedDocuments.get(n.textDocument.uri);o!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:o})))})),r.push(e.onWillSaveTextDocument(n=>{let o=this._syncedDocuments.get(n.textDocument.uri);o!==void 0&&this._onWillSave.fire(Object.freeze({document:o,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,o)=>{let s=this._syncedDocuments.get(n.textDocument.uri);return s!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:s,reason:n.reason}),o):[]})),r.push(e.onDidSaveTextDocument(n=>{let o=this._syncedDocuments.get(n.textDocument.uri);o!==void 0&&this._onDidSave.fire(Object.freeze({document:o}))})),DR.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};mX.TextDocuments=I1e});var _1e=W(y3=>{"use strict";f();Object.defineProperty(y3,"__esModule",{value:!0});y3.NotebookDocuments=y3.NotebookSyncFeature=void 0;var Ih=mi(),nKe=T1e(),Gjt=a(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:a(e=>this.connection.onNotification(Ih.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:a(e=>this.connection.onNotification(Ih.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:a(e=>this.connection.onNotification(Ih.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:a(e=>this.connection.onNotification(Ih.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");y3.NotebookSyncFeature=Gjt;var hX=class t{static{a(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Ih.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Ih.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Ih.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};hX.NULL_DISPOSE=Object.freeze({dispose:a(()=>{},"dispose")});var w1e=class{static{a(this,"NotebookDocuments")}constructor(e){e instanceof nKe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new nKe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Ih.Emitter,this._onDidChange=new Ih.Emitter,this._onDidSave=new Ih.Emitter,this._onDidClose=new Ih.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new hX,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(o=>{this.notebookDocuments.set(o.notebookDocument.uri,o.notebookDocument);for(let s of o.cellTextDocuments)r.openTextDocument({textDocument:s});this.updateCellMap(o.notebookDocument),this._onDidOpen.fire(o.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(o=>{let s=this.notebookDocuments.get(o.notebookDocument.uri);if(s===void 0)return;s.version=o.notebookDocument.version;let c=s.metadata,l=!1,u=o.change;u.metadata!==void 0&&(l=!0,s.metadata=u.metadata);let d=[],p=[],m=[],h=[];if(u.cells!==void 0){let b=u.cells;if(b.structure!==void 0){let I=b.structure.array;if(s.cells.splice(I.start,I.deleteCount,...I.cells!==void 0?I.cells:[]),b.structure.didOpen!==void 0)for(let _ of b.structure.didOpen)r.openTextDocument({textDocument:_}),d.push(_.uri);if(b.structure.didClose)for(let _ of b.structure.didClose)r.closeTextDocument({textDocument:_}),p.push(_.uri)}if(b.data!==void 0){let I=new Map(b.data.map(_=>[_.document,_]));for(let _=0;_<=s.cells.length;_++){let k=I.get(s.cells[_].document);if(k!==void 0){let N=s.cells.splice(_,1,k);if(m.push({old:N[0],new:k}),I.delete(k.document),I.size===0)break}}}if(b.textContent!==void 0)for(let I of b.textContent)r.changeTextDocument({textDocument:I.document,contentChanges:I.changes}),h.push(I.document.uri)}this.updateCellMap(s);let g={notebookDocument:s};l&&(g.metadata={old:c,new:s.metadata});let A=[];for(let b of d)A.push(this.getNotebookCell(b));let y=[];for(let b of p)y.push(this.getNotebookCell(b));let v=[];for(let b of h)v.push(this.getNotebookCell(b));(A.length>0||y.length>0||m.length>0||v.length>0)&&(g.cells={added:A,removed:y,changed:{data:m,textContent:v}}),(g.metadata!==void 0||g.cells!==void 0)&&this._onDidChange.fire(g)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(o=>{let s=this.notebookDocuments.get(o.notebookDocument.uri);s!==void 0&&this._onDidSave.fire(s)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(o=>{let s=this.notebookDocuments.get(o.notebookDocument.uri);if(s!==void 0){this._onDidClose.fire(s);for(let c of o.cellTextDocuments)r.closeTextDocument({textDocument:c});this.notebookDocuments.delete(o.notebookDocument.uri);for(let c of s.cells)this.notebookCellMap.delete(c.document)}})),Ih.Disposable.create(()=>{n.forEach(o=>o.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};y3.NotebookDocuments=w1e});var iKe=W(gX=>{"use strict";f();Object.defineProperty(gX,"__esModule",{value:!0});gX.MonikerFeature=void 0;var Vjt=mi(),zjt=a(t=>class extends t{get moniker(){return{on:a(e=>{let r=Vjt.MonikerRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");gX.MonikerFeature=zjt});var B1e=W(Vo=>{"use strict";f();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.createConnection=Vo.combineFeatures=Vo.combineNotebooksFeatures=Vo.combineLanguagesFeatures=Vo.combineWorkspaceFeatures=Vo.combineWindowFeatures=Vo.combineClientFeatures=Vo.combineTracerFeatures=Vo.combineTelemetryFeatures=Vo.combineConsoleFeatures=Vo._NotebooksImpl=Vo._LanguagesImpl=Vo.BulkUnregistration=Vo.BulkRegistration=Vo.ErrorMessageTracker=void 0;var lr=mi(),Th=JJ(),R1e=g1e(),gi=Wze(),Kjt=$ze(),Yjt=jze(),Jjt=Gze(),Xjt=x1e(),Zjt=Vze(),eGt=zze(),tGt=Kze(),rGt=Yze(),nGt=Xze(),iGt=eKe(),oGt=tKe(),sGt=rKe(),aGt=_1e(),cGt=iKe();function S1e(t){if(t!==null)return t}a(S1e,"null2Undefined");var k1e=class{static{a(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Vo.ErrorMessageTracker=k1e;var AX=class{static{a(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(lr.MessageType.Error,e)}warn(e){this.send(lr.MessageType.Warning,e)}info(e){this.send(lr.MessageType.Info,e)}log(e){this.send(lr.MessageType.Log,e)}debug(e){this.send(lr.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(lr.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,lr.RAL)().console.error("Sending log message failed")})}},P1e=class{static{a(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:lr.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(lr.ShowMessageRequest.type,n).then(S1e)}showWarningMessage(e,...r){let n={type:lr.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(lr.ShowMessageRequest.type,n).then(S1e)}showInformationMessage(e,...r){let n={type:lr.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(lr.ShowMessageRequest.type,n).then(S1e)}},oKe=(0,Zjt.ShowDocumentFeature)((0,gi.ProgressFeature)(P1e)),sKe;(function(t){function e(){return new yX}a(e,"create"),t.create=e})(sKe||(Vo.BulkRegistration=sKe={}));var yX=class{static{a(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=Th.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let o=R1e.generateUuid();this._registrations.push({id:o,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},aKe;(function(t){function e(){return new h7(void 0,[])}a(e,"create"),t.create=e})(aKe||(Vo.BulkUnregistration=aKe={}));var h7=class{static{a(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(lr.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=Th.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let o={unregisterations:[n]};return this._connection.sendRequest(lr.UnregistrationRequest.type,o).then(()=>{this._unregistrations.delete(r)},s=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},CX=class{static{a(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof yX?this.registerMany(e):e instanceof h7?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let o=Th.string(r)?r:r.method,s=R1e.generateUuid(),c={registrations:[{id:s,method:o,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(lr.RegistrationRequest.type,c).then(l=>(e.add({id:s,method:o}),e),l=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(l)))}registerSingle2(e,r){let n=Th.string(e)?e:e.method,o=R1e.generateUuid(),s={registrations:[{id:o,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(lr.RegistrationRequest.type,s).then(c=>lr.Disposable.create(()=>{this.unregisterSingle(o,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${o} failed.`)})}),c=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(c)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(lr.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(lr.RegistrationRequest.type,r).then(()=>new h7(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},D1e=class{static{a(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(o){return o&&!!o.edit}a(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(lr.ApplyWorkspaceEditRequest.type,n)}},cKe=(0,eGt.FileOperationsFeature)((0,Yjt.WorkspaceFoldersFeature)((0,Kjt.ConfigurationFeature)(D1e))),vX=class{static{a(this,"TracerImpl")}constructor(){this._trace=lr.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==lr.Trace.Off&&this.connection.sendNotification(lr.LogTraceNotification.type,{message:e,verbose:this._trace===lr.Trace.Verbose?r:void 0}).catch(()=>{})}},xX=class{static{a(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(lr.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},EX=class{static{a(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,gi.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,gi.attachPartialResult)(this.connection,r)}};Vo._LanguagesImpl=EX;var lKe=(0,iGt.FoldingRangeFeature)((0,cGt.MonikerFeature)((0,sGt.DiagnosticFeature)((0,oGt.InlayHintFeature)((0,nGt.InlineValueFeature)((0,rGt.TypeHierarchyFeature)((0,tGt.LinkedEditingRangeFeature)((0,Xjt.SemanticTokensFeature)((0,Jjt.CallHierarchyFeature)(EX))))))))),bX=class{static{a(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,gi.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,gi.attachPartialResult)(this.connection,r)}};Vo._NotebooksImpl=bX;var uKe=(0,aGt.NotebookSyncFeature)(bX);function dKe(t,e){return function(r){return e(t(r))}}a(dKe,"combineConsoleFeatures");Vo.combineConsoleFeatures=dKe;function fKe(t,e){return function(r){return e(t(r))}}a(fKe,"combineTelemetryFeatures");Vo.combineTelemetryFeatures=fKe;function pKe(t,e){return function(r){return e(t(r))}}a(pKe,"combineTracerFeatures");Vo.combineTracerFeatures=pKe;function mKe(t,e){return function(r){return e(t(r))}}a(mKe,"combineClientFeatures");Vo.combineClientFeatures=mKe;function hKe(t,e){return function(r){return e(t(r))}}a(hKe,"combineWindowFeatures");Vo.combineWindowFeatures=hKe;function gKe(t,e){return function(r){return e(t(r))}}a(gKe,"combineWorkspaceFeatures");Vo.combineWorkspaceFeatures=gKe;function AKe(t,e){return function(r){return e(t(r))}}a(AKe,"combineLanguagesFeatures");Vo.combineLanguagesFeatures=AKe;function yKe(t,e){return function(r){return e(t(r))}}a(yKe,"combineNotebooksFeatures");Vo.combineNotebooksFeatures=yKe;function lGt(t,e){function r(o,s,c){return o&&s?c(o,s):o||s}return a(r,"combine"),{__brand:"features",console:r(t.console,e.console,dKe),tracer:r(t.tracer,e.tracer,pKe),telemetry:r(t.telemetry,e.telemetry,fKe),client:r(t.client,e.client,mKe),window:r(t.window,e.window,hKe),workspace:r(t.workspace,e.workspace,gKe),languages:r(t.languages,e.languages,AKe),notebooks:r(t.notebooks,e.notebooks,yKe)}}a(lGt,"combineFeatures");Vo.combineFeatures=lGt;function uGt(t,e,r){let n=r&&r.console?new(r.console(AX)):new AX,o=t(n);n.rawAttach(o);let s=r&&r.tracer?new(r.tracer(vX)):new vX,c=r&&r.telemetry?new(r.telemetry(xX)):new xX,l=r&&r.client?new(r.client(CX)):new CX,u=r&&r.window?new(r.window(oKe)):new oKe,d=r&&r.workspace?new(r.workspace(cKe)):new cKe,p=r&&r.languages?new(r.languages(lKe)):new lKe,m=r&&r.notebooks?new(r.notebooks(uKe)):new uKe,h=[n,s,c,l,u,d,p,m];function g(I){return I instanceof Promise?I:Th.thenable(I)?new Promise((_,k)=>{I.then(N=>_(N),N=>k(N))}):Promise.resolve(I)}a(g,"asPromise");let A,y,v,b={listen:a(()=>o.listen(),"listen"),sendRequest:a((I,..._)=>o.sendRequest(Th.string(I)?I:I.method,..._),"sendRequest"),onRequest:a((I,_)=>o.onRequest(I,_),"onRequest"),sendNotification:a((I,_)=>{let k=Th.string(I)?I:I.method;return o.sendNotification(k,_)},"sendNotification"),onNotification:a((I,_)=>o.onNotification(I,_),"onNotification"),onProgress:o.onProgress,sendProgress:o.sendProgress,onInitialize:a(I=>(y=I,{dispose:a(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:a(I=>o.onNotification(lr.InitializedNotification.type,I),"onInitialized"),onShutdown:a(I=>(A=I,{dispose:a(()=>{A=void 0},"dispose")}),"onShutdown"),onExit:a(I=>(v=I,{dispose:a(()=>{v=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return c},get tracer(){return s},get client(){return l},get window(){return u},get workspace(){return d},get languages(){return p},get notebooks(){return m},onDidChangeConfiguration:a(I=>o.onNotification(lr.DidChangeConfigurationNotification.type,I),"onDidChangeConfiguration"),onDidChangeWatchedFiles:a(I=>o.onNotification(lr.DidChangeWatchedFilesNotification.type,I),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:a(I=>o.onNotification(lr.DidOpenTextDocumentNotification.type,I),"onDidOpenTextDocument"),onDidChangeTextDocument:a(I=>o.onNotification(lr.DidChangeTextDocumentNotification.type,I),"onDidChangeTextDocument"),onDidCloseTextDocument:a(I=>o.onNotification(lr.DidCloseTextDocumentNotification.type,I),"onDidCloseTextDocument"),onWillSaveTextDocument:a(I=>o.onNotification(lr.WillSaveTextDocumentNotification.type,I),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:a(I=>o.onRequest(lr.WillSaveTextDocumentWaitUntilRequest.type,I),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:a(I=>o.onNotification(lr.DidSaveTextDocumentNotification.type,I),"onDidSaveTextDocument"),sendDiagnostics:a(I=>o.sendNotification(lr.PublishDiagnosticsNotification.type,I),"sendDiagnostics"),onHover:a(I=>o.onRequest(lr.HoverRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),void 0)),"onHover"),onCompletion:a(I=>o.onRequest(lr.CompletionRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onCompletion"),onCompletionResolve:a(I=>o.onRequest(lr.CompletionResolveRequest.type,I),"onCompletionResolve"),onSignatureHelp:a(I=>o.onRequest(lr.SignatureHelpRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),void 0)),"onSignatureHelp"),onDeclaration:a(I=>o.onRequest(lr.DeclarationRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onDeclaration"),onDefinition:a(I=>o.onRequest(lr.DefinitionRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onDefinition"),onTypeDefinition:a(I=>o.onRequest(lr.TypeDefinitionRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onTypeDefinition"),onImplementation:a(I=>o.onRequest(lr.ImplementationRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onImplementation"),onReferences:a(I=>o.onRequest(lr.ReferencesRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onReferences"),onDocumentHighlight:a(I=>o.onRequest(lr.DocumentHighlightRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onDocumentHighlight"),onDocumentSymbol:a(I=>o.onRequest(lr.DocumentSymbolRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onDocumentSymbol"),onWorkspaceSymbol:a(I=>o.onRequest(lr.WorkspaceSymbolRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:a(I=>o.onRequest(lr.WorkspaceSymbolResolveRequest.type,I),"onWorkspaceSymbolResolve"),onCodeAction:a(I=>o.onRequest(lr.CodeActionRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onCodeAction"),onCodeActionResolve:a(I=>o.onRequest(lr.CodeActionResolveRequest.type,(_,k)=>I(_,k)),"onCodeActionResolve"),onCodeLens:a(I=>o.onRequest(lr.CodeLensRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onCodeLens"),onCodeLensResolve:a(I=>o.onRequest(lr.CodeLensResolveRequest.type,(_,k)=>I(_,k)),"onCodeLensResolve"),onDocumentFormatting:a(I=>o.onRequest(lr.DocumentFormattingRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:a(I=>o.onRequest(lr.DocumentRangeFormattingRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:a(I=>o.onRequest(lr.DocumentOnTypeFormattingRequest.type,(_,k)=>I(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:a(I=>o.onRequest(lr.RenameRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),void 0)),"onRenameRequest"),onPrepareRename:a(I=>o.onRequest(lr.PrepareRenameRequest.type,(_,k)=>I(_,k)),"onPrepareRename"),onDocumentLinks:a(I=>o.onRequest(lr.DocumentLinkRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onDocumentLinks"),onDocumentLinkResolve:a(I=>o.onRequest(lr.DocumentLinkResolveRequest.type,(_,k)=>I(_,k)),"onDocumentLinkResolve"),onDocumentColor:a(I=>o.onRequest(lr.DocumentColorRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onDocumentColor"),onColorPresentation:a(I=>o.onRequest(lr.ColorPresentationRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onColorPresentation"),onFoldingRanges:a(I=>o.onRequest(lr.FoldingRangeRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onFoldingRanges"),onSelectionRanges:a(I=>o.onRequest(lr.SelectionRangeRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),(0,gi.attachPartialResult)(o,_))),"onSelectionRanges"),onExecuteCommand:a(I=>o.onRequest(lr.ExecuteCommandRequest.type,(_,k)=>I(_,k,(0,gi.attachWorkDone)(o,_),void 0)),"onExecuteCommand"),dispose:a(()=>o.dispose(),"dispose")};for(let I of h)I.attach(b);return o.onRequest(lr.InitializeRequest.type,I=>{e.initialize(I),Th.string(I.trace)&&(s.trace=lr.Trace.fromString(I.trace));for(let _ of h)_.initialize(I.capabilities);if(y){let _=y(I,new lr.CancellationTokenSource().token,(0,gi.attachWorkDone)(o,I),void 0);return g(_).then(k=>{if(k instanceof lr.ResponseError)return k;let N=k;N||(N={capabilities:{}});let F=N.capabilities;F||(F={},N.capabilities=F),F.textDocumentSync===void 0||F.textDocumentSync===null?F.textDocumentSync=Th.number(b.__textDocumentSync)?b.__textDocumentSync:lr.TextDocumentSyncKind.None:!Th.number(F.textDocumentSync)&&!Th.number(F.textDocumentSync.change)&&(F.textDocumentSync.change=Th.number(b.__textDocumentSync)?b.__textDocumentSync:lr.TextDocumentSyncKind.None);for(let O of h)O.fillServerCapabilities(F);return N})}else{let _={capabilities:{textDocumentSync:lr.TextDocumentSyncKind.None}};for(let k of h)k.fillServerCapabilities(_.capabilities);return _}}),o.onRequest(lr.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,A)return A(new lr.CancellationTokenSource().token)}),o.onNotification(lr.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),o.onNotification(lr.SetTraceNotification.type,I=>{s.trace=lr.Trace.fromString(I.value)}),b}a(uGt,"createConnection");Vo.createConnection=uGt});var CKe=W(Dp=>{"use strict";f();Object.defineProperty(Dp,"__esModule",{value:!0});Dp.resolveModulePath=Dp.FileSystem=Dp.resolveGlobalYarnPath=Dp.resolveGlobalNodePath=Dp.resolve=Dp.uriToFilePath=void 0;var dGt=require("url"),BA=require("path"),N1e=require("fs"),O1e=require("child_process");function fGt(t){let e=dGt.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,o=r.length;n<o;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let s=r[0],c=r[1];s.length===0&&c.length>1&&c[1]===":"&&r.shift()}return BA.normalize(r.join("/"))}a(fGt,"uriToFilePath");Dp.uriToFilePath=fGt;function M1e(){return process.platform==="win32"}a(M1e,"isWindows");function IX(t,e,r,n){let o="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((c,l)=>{let u=process.env,d=Object.create(null);Object.keys(u).forEach(p=>d[p]=u[p]),e&&N1e.existsSync(e)&&(d[o]?d[o]=e+BA.delimiter+d[o]:d[o]=e,n&&n(`NODE_PATH value is: ${d[o]}`)),d.ELECTRON_RUN_AS_NODE="1";try{let p=(0,O1e.fork)("",[],{cwd:r,env:d,execArgv:["-e",s]});if(p.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}p.on("error",h=>{l(h)}),p.on("message",h=>{h.c==="r"&&(p.send({c:"e"}),h.s?c(h.r):l(new Error(`Failed to resolve module: ${t}`)))});let m={c:"rs",a:t};p.send(m)}catch(p){l(p)}})}a(IX,"resolve");Dp.resolve=IX;function L1e(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(s=>r[s]=process.env[s]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};M1e()&&(e="npm.cmd",n.shell=!0);let o=a(()=>{},"handler");try{process.on("SIGPIPE",o);let s=(0,O1e.spawnSync)(e,["config","get","prefix"],n).stdout;if(!s){t&&t("'npm config get prefix' didn't return a value.");return}let c=s.trim();return t&&t(`'npm config get prefix' value is: ${c}`),c.length>0?M1e()?BA.join(c,"node_modules"):BA.join(c,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",o)}}a(L1e,"resolveGlobalNodePath");Dp.resolveGlobalNodePath=L1e;function pGt(t){let e="yarn",r={encoding:"utf8"};M1e()&&(e="yarn.cmd",r.shell=!0);let n=a(()=>{},"handler");try{process.on("SIGPIPE",n);let o=(0,O1e.spawnSync)(e,["global","dir","--json"],r),s=o.stdout;if(!s){t&&(t("'yarn global dir' didn't return a value."),o.stderr&&t(o.stderr));return}let c=s.trim().split(/\r?\n/);for(let l of c)try{let u=JSON.parse(l);if(u.type==="log")return BA.join(u.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}a(pGt,"resolveGlobalYarnPath");Dp.resolveGlobalYarnPath=pGt;var F1e;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!N1e.existsSync(__filename.toUpperCase())||!N1e.existsSync(__filename.toLowerCase())),e}a(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(o,s){return r()?BA.normalize(s).indexOf(BA.normalize(o))===0:BA.normalize(s).toLowerCase().indexOf(BA.normalize(o).toLowerCase())===0}a(n,"isParent"),t.isParent=n})(F1e||(Dp.FileSystem=F1e={}));function mGt(t,e,r,n){return r?(BA.isAbsolute(r)||(r=BA.join(t,r)),IX(e,r,r,n).then(o=>F1e.isParent(r,o)?o:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,o=>IX(e,L1e(n),t,n))):IX(e,L1e(n),t,n)}a(mGt,"resolveModulePath");Dp.resolveModulePath=mGt});var Q1e=W((Oqn,vKe)=>{"use strict";f();vKe.exports=mi()});var xKe=W(TX=>{"use strict";f();Object.defineProperty(TX,"__esModule",{value:!0});TX.InlineCompletionFeature=void 0;var hGt=mi(),gGt=a(t=>class extends t{get inlineCompletion(){return{on:a(e=>this.connection.onRequest(hGt.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");TX.InlineCompletionFeature=gGt});var IKe=W(Gd=>{"use strict";f();var AGt=Gd&&Gd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bKe=Gd&&Gd.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&AGt(e,t,r)};Object.defineProperty(Gd,"__esModule",{value:!0});Gd.ProposedFeatures=Gd.NotebookDocuments=Gd.TextDocuments=Gd.SemanticTokensBuilder=void 0;var yGt=x1e();Object.defineProperty(Gd,"SemanticTokensBuilder",{enumerable:!0,get:a(function(){return yGt.SemanticTokensBuilder},"get")});var CGt=xKe();bKe(mi(),Gd);var vGt=T1e();Object.defineProperty(Gd,"TextDocuments",{enumerable:!0,get:a(function(){return vGt.TextDocuments},"get")});var xGt=_1e();Object.defineProperty(Gd,"NotebookDocuments",{enumerable:!0,get:a(function(){return xGt.NotebookDocuments},"get")});bKe(B1e(),Gd);var EKe;(function(t){t.all={__brand:"features",languages:CGt.InlineCompletionFeature}})(EKe||(Gd.ProposedFeatures=EKe={}))});var qc=W(wh=>{"use strict";f();var EGt=wh&&wh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),SKe=wh&&wh.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&EGt(e,t,r)};Object.defineProperty(wh,"__esModule",{value:!0});wh.createConnection=wh.Files=void 0;var TKe=require("node:util"),U1e=JJ(),bGt=B1e(),g7=CKe(),BR=Q1e();SKe(Q1e(),wh);SKe(IKe(),wh);var wKe;(function(t){t.uriToFilePath=g7.uriToFilePath,t.resolveGlobalNodePath=g7.resolveGlobalNodePath,t.resolveGlobalYarnPath=g7.resolveGlobalYarnPath,t.resolve=g7.resolve,t.resolveModulePath=g7.resolveModulePath})(wKe||(wh.Files=wKe={}));var _Ke;function wX(){if(_Ke!==void 0)try{_Ke.end()}catch{}}a(wX,"endProtocolConnection");var C3=!1,RKe;function IGt(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(RKe=setInterval(()=>{try{process.kill(n,0)}catch{wX(),process.exit(C3?0:1)}},3e3))}catch{}}a(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let o=n.split("=");o[0]===t&&e(o[1])}}}a(IGt,"setupExitTimer");IGt();var TGt={initialize:a(t=>{let e=t.processId;U1e.number(e)&&RKe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(C3?0:1)}},3e3)},"initialize"),get shutdownReceived(){return C3},set shutdownReceived(t){C3=t},exit:a(t=>{wX(),process.exit(t)},"exit")};function wGt(t,e,r,n){let o,s,c,l;return t!==void 0&&t.__brand==="features"&&(o=t,t=e,e=r,r=n),BR.ConnectionStrategy.is(t)||BR.ConnectionOptions.is(t)?l=t:(s=t,c=e,l=r),_Gt(s,c,l,o)}a(wGt,"createConnection");wh.createConnection=wGt;function _Gt(t,e,r,n){let o=!1;if(!t&&!e&&process.argv.length>2){let u,d,p=process.argv.slice(2);for(let m=0;m<p.length;m++){let h=p[m];if(h==="--node-ipc"){t=new BR.IPCMessageReader(process),e=new BR.IPCMessageWriter(process);break}else if(h==="--stdio"){o=!0,t=process.stdin,e=process.stdout;break}else if(h==="--socket"){u=parseInt(p[m+1]);break}else if(h==="--pipe"){d=p[m+1];break}else{var s=h.split("=");if(s[0]==="--socket"){u=parseInt(s[1]);break}else if(s[0]==="--pipe"){d=s[1];break}}}if(u){let m=(0,BR.createServerSocketTransport)(u);t=m[0],e=m[1]}else if(d){let m=(0,BR.createServerPipeTransport)(d);t=m[0],e=m[1]}}var c="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+c);if(!e)throw new Error("Connection output stream is not set. "+c);if(U1e.func(t.read)&&U1e.func(t.on)){let u=t;u.on("end",()=>{wX(),process.exit(C3?0:1)}),u.on("close",()=>{wX(),process.exit(C3?0:1)})}let l=a(u=>{let d=(0,BR.createProtocolConnection)(t,e,u,r);return o&&SGt(u),d},"connectionFactory");return(0,bGt.createConnection)(l,TGt,n)}a(_Gt,"_createConnection");function SGt(t){function e(n){return n.map(o=>typeof o=="string"?o:(0,TKe.inspect)(o)).join(" ")}a(e,"serialize");let r=new Map;console.assert=a(function(o,...s){if(!o)if(s.length===0)t.error("Assertion failed");else{let[c,...l]=s;t.error(`Assertion failed: ${c} ${e(l)}`)}},"assert"),console.count=a(function(o="default"){let s=String(o),c=r.get(s)??0;c+=1,r.set(s,c),t.log(`${s}: ${s}`)},"count"),console.countReset=a(function(o){o===void 0?r.clear():r.delete(String(o))},"countReset"),console.debug=a(function(...o){t.log(e(o))},"debug"),console.dir=a(function(o,s){t.log((0,TKe.inspect)(o,s))},"dir"),console.log=a(function(...o){t.log(e(o))},"log"),console.error=a(function(...o){t.error(e(o))},"error"),console.trace=a(function(...o){let s=new Error().stack.replace(/(.+\n){2}/,""),c="Trace";o.length!==0&&(c+=`: ${e(o)}`),t.log(`${c}
${s}`)},"trace"),console.warn=a(function(...o){t.warn(e(o))},"warn")}a(SGt,"patchConsole")});var NA=W((Yqn,kKe)=>{"use strict";f();kKe.exports=qc()});var kJe=W((ezn,RJe)=>{"use strict";f();RJe.exports=_Je;function _Je(t,e,r){t instanceof RegExp&&(t=wJe(t,r)),e instanceof RegExp&&(e=wJe(e,r));var n=SJe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}a(_Je,"balanced");function wJe(t,e){var r=e.match(t);return r?r[0]:null}a(wJe,"maybeMatch");_Je.range=SJe;function SJe(t,e,r){var n,o,s,c,l,u=r.indexOf(t),d=r.indexOf(e,u+1),p=u;if(u>=0&&d>0){if(t===e)return[u,d];for(n=[],s=r.length;p>=0&&!l;)p==u?(n.push(p),u=r.indexOf(t,p+1)):n.length==1?l=[n.pop(),d]:(o=n.pop(),o<s&&(s=o,c=d),d=r.indexOf(e,p+1)),p=u<d&&u>=0?u:d;n.length&&(l=[s,c])}return l}a(SJe,"range")});var OJe=W((nzn,FJe)=>{f();var PJe=kJe();FJe.exports=bVt;var DJe="\0SLASH"+Math.random()+"\0",BJe="\0OPEN"+Math.random()+"\0",Oxe="\0CLOSE"+Math.random()+"\0",NJe="\0COMMA"+Math.random()+"\0",MJe="\0PERIOD"+Math.random()+"\0";function Fxe(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}a(Fxe,"numeric");function xVt(t){return t.split("\\\\").join(DJe).split("\\{").join(BJe).split("\\}").join(Oxe).split("\\,").join(NJe).split("\\.").join(MJe)}a(xVt,"escapeBraces");function EVt(t){return t.split(DJe).join("\\").split(BJe).join("{").split(Oxe).join("}").split(NJe).join(",").split(MJe).join(".")}a(EVt,"unescapeBraces");function LJe(t){if(!t)return[""];var e=[],r=PJe("{","}",t);if(!r)return t.split(",");var n=r.pre,o=r.body,s=r.post,c=n.split(",");c[c.length-1]+="{"+o+"}";var l=LJe(s);return s.length&&(c[c.length-1]+=l.shift(),c.push.apply(c,l)),e.push.apply(e,c),e}a(LJe,"parseCommaParts");function bVt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),_7(xVt(t),!0).map(EVt)):[]}a(bVt,"expandTop");function IVt(t){return"{"+t+"}"}a(IVt,"embrace");function TVt(t){return/^-?0\d/.test(t)}a(TVt,"isPadded");function wVt(t,e){return t<=e}a(wVt,"lte");function _Vt(t,e){return t>=e}a(_Vt,"gte");function _7(t,e){var r=[],n=PJe("{","}",t);if(!n)return[t];var o=n.pre,s=n.post.length?_7(n.post,!1):[""];if(/\$$/.test(n.pre))for(var c=0;c<s.length;c++){var l=o+"{"+n.body+"}"+s[c];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),p=u||d,m=n.body.indexOf(",")>=0;if(!p&&!m)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Oxe+n.post,_7(t)):[t];var h;if(p)h=n.body.split(/\.\./);else if(h=LJe(n.body),h.length===1&&(h=_7(h[0],!1).map(IVt),h.length===1))return s.map(function(V){return n.pre+h[0]+V});var g;if(p){var A=Fxe(h[0]),y=Fxe(h[1]),v=Math.max(h[0].length,h[1].length),b=h.length==3?Math.abs(Fxe(h[2])):1,I=wVt,_=y<A;_&&(b*=-1,I=_Vt);var k=h.some(TVt);g=[];for(var N=A;I(N,y);N+=b){var F;if(d)F=String.fromCharCode(N),F==="\\"&&(F="");else if(F=String(N),k){var O=v-F.length;if(O>0){var Y=new Array(O+1).join("0");N<0?F="-"+Y+F.slice(1):F=Y+F}}g.push(F)}}else{g=[];for(var z=0;z<h.length;z++)g.push.apply(g,_7(h[z],!1))}for(var z=0;z<g.length;z++)for(var c=0;c<s.length;c++){var l=o+g[z]+s[c];(!e||p||l)&&r.push(l)}}return r}a(_7,"expand")});var Ua=W((nhi,Get)=>{f();Get.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Xo=W((ohi,Vet)=>{"use strict";f();var oc=class extends Error{static{a(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},lbe=class extends oc{static{a(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},ube=class extends oc{static{a(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},dbe=class extends oc{static{a(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},fbe=class extends oc{static{a(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},pbe=class extends oc{static{a(this,"ResponseStatusCodeError")}constructor(e,r,n,o){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=o,this.status=r,this.statusCode=r,this.headers=n}},mbe=class extends oc{static{a(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},hbe=class extends oc{static{a(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},nte=class extends oc{static{a(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},gbe=class extends nte{static{a(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},Abe=class extends oc{static{a(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},ybe=class extends oc{static{a(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Cbe=class extends oc{static{a(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},vbe=class extends oc{static{a(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},xbe=class extends oc{static{a(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},Ebe=class extends oc{static{a(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},bbe=class extends oc{static{a(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},Ibe=class extends oc{static{a(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},Tbe=class extends Error{static{a(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},wbe=class extends oc{static{a(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},_be=class extends oc{static{a(this,"RequestRetryError")}constructor(e,r,{headers:n,data:o}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=o,this.headers=n}},Sbe=class extends oc{static{a(this,"ResponseError")}constructor(e,r,{headers:n,data:o}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=o,this.headers=n}},Rbe=class extends oc{static{a(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};Vet.exports={AbortError:nte,HTTPParserError:Tbe,UndiciError:oc,HeadersTimeoutError:ube,HeadersOverflowError:dbe,BodyTimeoutError:fbe,RequestContentLengthMismatchError:ybe,ConnectTimeoutError:lbe,ResponseStatusCodeError:pbe,InvalidArgumentError:mbe,InvalidReturnValueError:hbe,RequestAbortedError:gbe,ClientDestroyedError:vbe,ClientClosedError:xbe,InformationalError:Abe,SocketError:Ebe,NotSupportedError:bbe,ResponseContentLengthMismatchError:Cbe,BalancedPoolMissingUpstreamError:Ibe,ResponseExceededMaxSizeError:wbe,RequestRetryError:_be,ResponseError:Sbe,SecureProxyConnectionError:Rbe}});var ote=W((chi,zet)=>{"use strict";f();var ite={},kbe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<kbe.length;++t){let e=kbe[t],r=e.toLowerCase();ite[e]=ite[r]=r}Object.setPrototypeOf(ite,null);zet.exports={wellknownHeaderNames:kbe,headerNameLowerCasedRecord:ite}});var Xet=W((uhi,Jet)=>{"use strict";f();var{wellknownHeaderNames:Ket,headerNameLowerCasedRecord:TJt}=ote(),Pbe=class t{static{a(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let o=0,s=this;for(;;){let c=e.charCodeAt(o);if(c>127)throw new TypeError("key must be ascii string");if(s.code===c)if(n===++o){s.value=r;break}else if(s.middle!==null)s=s.middle;else{s.middle=new t(e,r,o);break}else if(s.code<c)if(s.left!==null)s=s.left;else{s.left=new t(e,r,o);break}else if(s.right!==null)s=s.right;else{s.right=new t(e,r,o);break}}}search(e){let r=e.length,n=0,o=this;for(;o!==null&&n<r;){let s=e[n];for(s<=90&&s>=65&&(s|=32);o!==null;){if(s===o.code){if(r===++n)return o;o=o.middle;break}o=o.code<s?o.left:o.right}}return null}},ste=class{static{a(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new Pbe(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},Yet=new ste;for(let t=0;t<Ket.length;++t){let e=TJt[Ket[t]];Yet.insert(e,e)}Jet.exports={TernarySearchTree:ste,tree:Yet}});var ji=W((phi,mtt)=>{"use strict";f();var nQ=require("node:assert"),{kDestroyed:ett,kBodyUsed:uN,kListeners:Dbe,kBody:Zet}=Ua(),{IncomingMessage:wJt}=require("node:http"),lte=require("node:stream"),_Jt=require("node:net"),{Blob:SJt}=require("node:buffer"),RJt=require("node:util"),{stringify:kJt}=require("node:querystring"),{EventEmitter:PJt}=require("node:events"),{InvalidArgumentError:Eu}=Xo(),{headerNameLowerCasedRecord:DJt}=ote(),{tree:ttt}=Xet(),[BJt,NJt]=process.versions.node.split(".").map(t=>Number(t)),cte=class{static{a(this,"BodyAsyncIterable")}constructor(e){this[Zet]=e,this[uN]=!1}async*[Symbol.asyncIterator](){nQ(!this[uN],"disturbed"),this[uN]=!0,yield*this[Zet]}};function MJt(t){return ute(t)?(stt(t)===0&&t.on("data",function(){nQ(!1)}),typeof t.readableDidRead!="boolean"&&(t[uN]=!1,PJt.prototype.on.call(t,"data",function(){this[uN]=!0})),t):t&&typeof t.pipeTo=="function"?new cte(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&ott(t)?new cte(t):t}a(MJt,"wrapRequestBody");function LJt(){}a(LJt,"nop");function ute(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}a(ute,"isStream");function rtt(t){if(t===null)return!1;if(t instanceof SJt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}a(rtt,"isBlobLike");function FJt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=kJt(e);return r&&(t+="?"+r),t}a(FJt,"buildURL");function ntt(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}a(ntt,"isValidPort");function ate(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}a(ate,"isHttpOrHttpsPrefixed");function itt(t){if(typeof t=="string"){if(t=new URL(t),!ate(t.origin||t.protocol))throw new Eu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Eu("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&ntt(t.port)===!1)throw new Eu("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Eu("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Eu("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Eu("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Eu("Invalid URL origin: the origin must be a string or null/undefined.");if(!ate(t.origin||t.protocol))throw new Eu("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!ate(t.origin||t.protocol))throw new Eu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}a(itt,"parseURL");function OJt(t){if(t=itt(t),t.pathname!=="/"||t.search||t.hash)throw new Eu("invalid url");return t}a(OJt,"parseOrigin");function QJt(t){if(t[0]==="["){let r=t.indexOf("]");return nQ(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}a(QJt,"getHostname");function UJt(t){if(!t)return null;nQ(typeof t=="string");let e=QJt(t);return _Jt.isIP(e)?"":e}a(UJt,"getServerName");function qJt(t){return JSON.parse(JSON.stringify(t))}a(qJt,"deepClone");function HJt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}a(HJt,"isAsyncIterable");function ott(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}a(ott,"isIterable");function stt(t){if(t==null)return 0;if(ute(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(rtt(t))return t.size!=null?t.size:null;if(ltt(t))return t.byteLength}return null}a(stt,"bodyLength");function att(t){return t&&!!(t.destroyed||t[ett]||lte.isDestroyed?.(t))}a(att,"isDestroyed");function WJt(t,e){t==null||!ute(t)||att(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===wJt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[ett]=!0))}a(WJt,"destroy");var $Jt=/timeout=(\d+)/;function jJt(t){let e=t.toString().match($Jt);return e?parseInt(e[1],10)*1e3:null}a(jJt,"parseKeepAliveTimeout");function ctt(t){return typeof t=="string"?DJt[t]??t.toLowerCase():ttt.lookup(t)??t.toString("latin1").toLowerCase()}a(ctt,"headerNameToString");function GJt(t){return ttt.lookup(t)??t.toString("latin1").toLowerCase()}a(GJt,"bufferToLowerCasedHeaderName");function VJt(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=ctt(t[r]),o=e[n];if(o)typeof o=="string"&&(o=[o],e[n]=o),o.push(t[r+1].toString("utf8"));else{let s=t[r+1];typeof s=="string"?e[n]=s:e[n]=Array.isArray(s)?s.map(c=>c.toString("utf8")):s.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}a(VJt,"parseHeaders");function zJt(t){let e=t.length,r=new Array(e),n=!1,o=-1,s,c,l=0;for(let u=0;u<t.length;u+=2)s=t[u],c=t[u+1],typeof s!="string"&&(s=s.toString()),typeof c!="string"&&(c=c.toString("utf8")),l=s.length,l===14&&s[7]==="-"&&(s==="content-length"||s.toLowerCase()==="content-length")?n=!0:l===19&&s[7]==="-"&&(s==="content-disposition"||s.toLowerCase()==="content-disposition")&&(o=u+1),r[u]=s,r[u+1]=c;return n&&o!==-1&&(r[o]=Buffer.from(r[o]).toString("latin1")),r}a(zJt,"parseRawHeaders");function ltt(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}a(ltt,"isBuffer");function KJt(t,e,r){if(!t||typeof t!="object")throw new Eu("handler must be an object");if(typeof t.onConnect!="function")throw new Eu("invalid onConnect method");if(typeof t.onError!="function")throw new Eu("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Eu("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Eu("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Eu("invalid onHeaders method");if(typeof t.onData!="function")throw new Eu("invalid onData method");if(typeof t.onComplete!="function")throw new Eu("invalid onComplete method")}}a(KJt,"validateHandler");function YJt(t){return!!(t&&(lte.isDisturbed(t)||t[uN]))}a(YJt,"isDisturbed");function JJt(t){return!!(t&&lte.isErrored(t))}a(JJt,"isErrored");function XJt(t){return!!(t&&lte.isReadable(t))}a(XJt,"isReadable");function ZJt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}a(ZJt,"getSocketInfo");function eXt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:o}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let s=Buffer.isBuffer(o)?o:Buffer.from(o);s.byteLength&&r.enqueue(new Uint8Array(s))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}a(eXt,"ReadableStreamFrom");function tXt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}a(tXt,"isFormDataLike");function rXt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}a(rXt,"addAbortListener");var nXt=typeof String.prototype.toWellFormed=="function",iXt=typeof String.prototype.isWellFormed=="function";function utt(t){return nXt?`${t}`.toWellFormed():RJt.toUSVString(t)}a(utt,"toUSVString");function oXt(t){return iXt?`${t}`.isWellFormed():utt(t)===`${t}`}a(oXt,"isUSVString");function dtt(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}a(dtt,"isTokenCharCode");function sXt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!dtt(t.charCodeAt(e)))return!1;return!0}a(sXt,"isValidHTTPToken");var aXt=/[^\t\x20-\x7e\x80-\xff]/;function cXt(t){return!aXt.test(t)}a(cXt,"isValidHeaderValue");function lXt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}a(lXt,"parseRangeHeader");function uXt(t,e,r){return(t[Dbe]??=[]).push([e,r]),t.on(e,r),t}a(uXt,"addListener");function dXt(t){for(let[e,r]of t[Dbe]??[])t.removeListener(e,r);t[Dbe]=null}a(dXt,"removeAllListeners");function fXt(t,e,r){try{e.onError(r),nQ(e.aborted)}catch(n){t.emit("error",n)}}a(fXt,"errorRequest");var ftt=Object.create(null);ftt.enumerable=!0;var Bbe={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},ptt={...Bbe,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(Bbe,null);Object.setPrototypeOf(ptt,null);mtt.exports={kEnumerableProperty:ftt,nop:LJt,isDisturbed:YJt,isErrored:JJt,isReadable:XJt,toUSVString:utt,isUSVString:oXt,isBlobLike:rtt,parseOrigin:OJt,parseURL:itt,getServerName:UJt,isStream:ute,isIterable:ott,isAsyncIterable:HJt,isDestroyed:att,headerNameToString:ctt,bufferToLowerCasedHeaderName:GJt,addListener:uXt,removeAllListeners:dXt,errorRequest:fXt,parseRawHeaders:zJt,parseHeaders:VJt,parseKeepAliveTimeout:jJt,destroy:WJt,bodyLength:stt,deepClone:qJt,ReadableStreamFrom:eXt,isBuffer:ltt,validateHandler:KJt,getSocketInfo:ZJt,isFormDataLike:tXt,buildURL:FJt,addAbortListener:rXt,isValidHTTPToken:sXt,isValidHeaderValue:cXt,isTokenCharCode:dtt,parseRangeHeader:lXt,normalizedMethodRecordsBase:Bbe,normalizedMethodRecords:ptt,isValidPort:ntt,isHttpOrHttpsPrefixed:ate,nodeMajor:BJt,nodeMinor:NJt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:MJt}});var dN=W((ghi,gtt)=>{"use strict";f();var as=require("node:diagnostics_channel"),Mbe=require("node:util"),dte=Mbe.debuglog("undici"),Nbe=Mbe.debuglog("fetch"),fk=Mbe.debuglog("websocket"),htt=!1,pXt={beforeConnect:as.channel("undici:client:beforeConnect"),connected:as.channel("undici:client:connected"),connectError:as.channel("undici:client:connectError"),sendHeaders:as.channel("undici:client:sendHeaders"),create:as.channel("undici:request:create"),bodySent:as.channel("undici:request:bodySent"),headers:as.channel("undici:request:headers"),trailers:as.channel("undici:request:trailers"),error:as.channel("undici:request:error"),open:as.channel("undici:websocket:open"),close:as.channel("undici:websocket:close"),socketError:as.channel("undici:websocket:socket_error"),ping:as.channel("undici:websocket:ping"),pong:as.channel("undici:websocket:pong")};if(dte.enabled||Nbe.enabled){let t=Nbe.enabled?Nbe:dte;as.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s}}=e;t("connecting to %s using %s%s",`${s}${o?`:${o}`:""}`,n,r)}),as.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s}}=e;t("connected to %s using %s%s",`${s}${o?`:${o}`:""}`,n,r)}),as.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s},error:c}=e;t("connection to %s using %s%s errored - %s",`${s}${o?`:${o}`:""}`,n,r,c.message)}),as.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:o}}=e;t("sending request to %s %s/%s",r,o,n)}),as.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:o},response:{statusCode:s}}=e;t("received response to %s %s/%s - HTTP %d",r,o,n,s)}),as.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:o}}=e;t("trailers received from %s %s/%s",r,o,n)}),as.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:o},error:s}=e;t("request to %s %s/%s errored - %s",r,o,n,s.message)}),htt=!0}if(fk.enabled){if(!htt){let t=dte.enabled?dte:fk;as.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s}}=e;t("connecting to %s%s using %s%s",s,o?`:${o}`:"",n,r)}),as.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s}}=e;t("connected to %s%s using %s%s",s,o?`:${o}`:"",n,r)}),as.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s},error:c}=e;t("connection to %s%s using %s%s errored - %s",s,o?`:${o}`:"",n,r,c.message)}),as.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:o}}=e;t("sending request to %s %s/%s",r,o,n)})}as.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;fk("connection opened %s%s",e,r?`:${r}`:"")}),as.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;fk("closed connection to %s - %s %s",e.url,r,n)}),as.channel("undici:websocket:socket_error").subscribe(t=>{fk("connection errored - %s",t.message)}),as.channel("undici:websocket:ping").subscribe(t=>{fk("ping received")}),as.channel("undici:websocket:pong").subscribe(t=>{fk("pong received")})}gtt.exports={channels:pXt}});var xtt=W((yhi,vtt)=>{"use strict";f();var{InvalidArgumentError:sc,NotSupportedError:mXt}=Xo(),jx=require("node:assert"),{isValidHTTPToken:Ctt,isValidHeaderValue:Att,isStream:hXt,destroy:gXt,isBuffer:AXt,isFormDataLike:yXt,isIterable:CXt,isBlobLike:vXt,buildURL:xXt,validateHandler:EXt,getServerName:bXt,normalizedMethodRecords:IXt}=ji(),{channels:cv}=dN(),{headerNameLowerCasedRecord:ytt}=ote(),TXt=/[^\u0021-\u00ff]/,Hh=Symbol("handler"),Lbe=class{static{a(this,"Request")}constructor(e,{path:r,method:n,body:o,headers:s,query:c,idempotent:l,blocking:u,upgrade:d,headersTimeout:p,bodyTimeout:m,reset:h,throwOnError:g,expectContinue:A,servername:y},v){if(typeof r!="string")throw new sc("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new sc("path must be an absolute URL or start with a slash");if(TXt.test(r))throw new sc("invalid request path");if(typeof n!="string")throw new sc("method must be a string");if(IXt[n]===void 0&&!Ctt(n))throw new sc("invalid request method");if(d&&typeof d!="string")throw new sc("upgrade must be a string");if(p!=null&&(!Number.isFinite(p)||p<0))throw new sc("invalid headersTimeout");if(m!=null&&(!Number.isFinite(m)||m<0))throw new sc("invalid bodyTimeout");if(h!=null&&typeof h!="boolean")throw new sc("invalid reset");if(A!=null&&typeof A!="boolean")throw new sc("invalid expectContinue");if(this.headersTimeout=p,this.bodyTimeout=m,this.throwOnError=g===!0,this.method=n,this.abort=null,o==null)this.body=null;else if(hXt(o)){this.body=o;let b=this.body._readableState;(!b||!b.autoDestroy)&&(this.endHandler=a(function(){gXt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=I=>{this.abort?this.abort(I):this.error=I},this.body.on("error",this.errorHandler)}else if(AXt(o))this.body=o.byteLength?o:null;else if(ArrayBuffer.isView(o))this.body=o.buffer.byteLength?Buffer.from(o.buffer,o.byteOffset,o.byteLength):null;else if(o instanceof ArrayBuffer)this.body=o.byteLength?Buffer.from(o):null;else if(typeof o=="string")this.body=o.length?Buffer.from(o):null;else if(yXt(o)||CXt(o)||vXt(o))this.body=o;else throw new sc("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=d||null,this.path=c?xXt(r,c):r,this.origin=e,this.idempotent=l??(n==="HEAD"||n==="GET"),this.blocking=u??!1,this.reset=h??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=A??!1,Array.isArray(s)){if(s.length%2!==0)throw new sc("headers array must be even");for(let b=0;b<s.length;b+=2)fte(this,s[b],s[b+1])}else if(s&&typeof s=="object")if(s[Symbol.iterator])for(let b of s){if(!Array.isArray(b)||b.length!==2)throw new sc("headers must be in key-value pair format");fte(this,b[0],b[1])}else{let b=Object.keys(s);for(let I=0;I<b.length;++I)fte(this,b[I],s[b[I]])}else if(s!=null)throw new sc("headers must be an object or an array");EXt(v,n,d),this.servername=y||bXt(this.host),this[Hh]=v,cv.create.hasSubscribers&&cv.create.publish({request:this})}onBodySent(e){if(this[Hh].onBodySent)try{return this[Hh].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(cv.bodySent.hasSubscribers&&cv.bodySent.publish({request:this}),this[Hh].onRequestSent)try{return this[Hh].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(jx(!this.aborted),jx(!this.completed),this.error)e(this.error);else return this.abort=e,this[Hh].onConnect(e)}onResponseStarted(){return this[Hh].onResponseStarted?.()}onHeaders(e,r,n,o){jx(!this.aborted),jx(!this.completed),cv.headers.hasSubscribers&&cv.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:o}});try{return this[Hh].onHeaders(e,r,n,o)}catch(s){this.abort(s)}}onData(e){jx(!this.aborted),jx(!this.completed);try{return this[Hh].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return jx(!this.aborted),jx(!this.completed),this[Hh].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),jx(!this.aborted),this.completed=!0,cv.trailers.hasSubscribers&&cv.trailers.publish({request:this,trailers:e});try{return this[Hh].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),cv.error.hasSubscribers&&cv.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[Hh].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return fte(this,e,r),this}};function fte(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new sc(`invalid ${e} header`);if(r===void 0)return;let n=ytt[e];if(n===void 0&&(n=e.toLowerCase(),ytt[n]===void 0&&!Ctt(n)))throw new sc("invalid header key");if(Array.isArray(r)){let o=[];for(let s=0;s<r.length;s++)if(typeof r[s]=="string"){if(!Att(r[s]))throw new sc(`invalid ${e} header`);o.push(r[s])}else if(r[s]===null)o.push("");else{if(typeof r[s]=="object")throw new sc(`invalid ${e} header`);o.push(`${r[s]}`)}r=o}else if(typeof r=="string"){if(!Att(r))throw new sc(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new sc("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new sc("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new sc(`invalid ${n} header`);if(n==="connection"){let o=typeof r=="string"?r.toLowerCase():null;if(o!=="close"&&o!=="keep-alive")throw new sc("invalid connection header");o==="close"&&(t.reset=!0)}else{if(n==="expect")throw new mXt("expect header not supported");t.headers.push(e,r)}}}a(fte,"processHeader");vtt.exports=Lbe});var iQ=W((xhi,Ett)=>{"use strict";f();var wXt=require("node:events"),pte=class extends wXt{static{a(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let o of r)if(o!=null){if(typeof o!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof o}`);if(n=o(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new Fbe(this,n)}},Fbe=class extends pte{static{a(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};Ett.exports=pte});var hN=W((Ihi,btt)=>{"use strict";f();var _Xt=iQ(),{ClientDestroyedError:Obe,ClientClosedError:SXt,InvalidArgumentError:fN}=Xo(),{kDestroy:RXt,kClose:kXt,kClosed:oQ,kDestroyed:pN,kDispatch:Qbe,kInterceptors:pk}=Ua(),Gx=Symbol("onDestroyed"),mN=Symbol("onClosed"),mte=Symbol("Intercepted Dispatch"),Ube=class extends _Xt{static{a(this,"DispatcherBase")}constructor(){super(),this[pN]=!1,this[Gx]=null,this[oQ]=!1,this[mN]=[]}get destroyed(){return this[pN]}get closed(){return this[oQ]}get interceptors(){return this[pk]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[pk][r]!="function")throw new fN("interceptor must be an function")}this[pk]=e}close(e){if(e===void 0)return new Promise((n,o)=>{this.close((s,c)=>s?o(s):n(c))});if(typeof e!="function")throw new fN("invalid callback");if(this[pN]){queueMicrotask(()=>e(new Obe,null));return}if(this[oQ]){this[mN]?this[mN].push(e):queueMicrotask(()=>e(null,null));return}this[oQ]=!0,this[mN].push(e);let r=a(()=>{let n=this[mN];this[mN]=null;for(let o=0;o<n.length;o++)n[o](null,null)},"onClosed");this[kXt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((o,s)=>{this.destroy(e,(c,l)=>c?s(c):o(l))});if(typeof r!="function")throw new fN("invalid callback");if(this[pN]){this[Gx]?this[Gx].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new Obe),this[pN]=!0,this[Gx]=this[Gx]||[],this[Gx].push(r);let n=a(()=>{let o=this[Gx];this[Gx]=null;for(let s=0;s<o.length;s++)o[s](null,null)},"onDestroyed");this[RXt](e).then(()=>{queueMicrotask(n)})}[mte](e,r){if(!this[pk]||this[pk].length===0)return this[mte]=this[Qbe],this[Qbe](e,r);let n=this[Qbe].bind(this);for(let o=this[pk].length-1;o>=0;o--)n=this[pk][o](n);return this[mte]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new fN("handler must be an object");try{if(!e||typeof e!="object")throw new fN("opts must be an object.");if(this[pN]||this[Gx])throw new Obe;if(this[oQ])throw new SXt;return this[mte](e,r)}catch(n){if(typeof r.onError!="function")throw new fN("invalid onError method");return r.onError(n),!1}}};btt.exports=Ube});var Vbe=W((_hi,_tt)=>{"use strict";f();var gN=0,qbe=1e3,Hbe=(qbe>>1)-1,Vx,Wbe=Symbol("kFastTimer"),zx=[],$be=-2,jbe=-1,Ttt=0,Itt=1;function Gbe(){gN+=Hbe;let t=0,e=zx.length;for(;t<e;){let r=zx[t];r._state===Ttt?(r._idleStart=gN-Hbe,r._state=Itt):r._state===Itt&&gN>=r._idleStart+r._idleTimeout&&(r._state=jbe,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===jbe?(r._state=$be,--e!==0&&(zx[t]=zx[e])):++t}zx.length=e,zx.length!==0&&wtt()}a(Gbe,"onTick");function wtt(){Vx?Vx.refresh():(clearTimeout(Vx),Vx=setTimeout(Gbe,Hbe),Vx.unref&&Vx.unref())}a(wtt,"refreshTimeout");var hte=class{static{a(this,"FastTimer")}[Wbe]=!0;_state=$be;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===$be&&zx.push(this),(!Vx||zx.length===1)&&wtt(),this._state=Ttt}clear(){this._state=jbe,this._idleStart=-1}};_tt.exports={setTimeout(t,e,r){return e<=qbe?setTimeout(t,e,r):new hte(t,e,r)},clearTimeout(t){t[Wbe]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new hte(t,e,r)},clearFastTimeout(t){t.clear()},now(){return gN},tick(t=0){gN+=t-qbe+1,Gbe(),Gbe()},reset(){gN=0,zx.length=0,clearTimeout(Vx),Vx=null},kFastTimer:Wbe}});var sQ=W((Dhi,Dtt)=>{"use strict";f();var PXt=require("node:net"),Stt=require("node:assert"),Ptt=ji(),{InvalidArgumentError:DXt,ConnectTimeoutError:BXt}=Xo(),gte=Vbe();function Rtt(){}a(Rtt,"noop");var zbe,Kbe;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?Kbe=class{static{a(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:Kbe=class{static{a(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function NXt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:o,...s}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new DXt("maxCachedSessions must be a positive integer or zero");let c={path:r,...s},l=new Kbe(e??100);return n=n??1e4,t=t??!1,a(function({hostname:d,host:p,protocol:m,port:h,servername:g,localAddress:A,httpSocket:y},v){let b;if(m==="https:"){zbe||(zbe=require("node:tls")),g=g||c.servername||Ptt.getServerName(p)||null;let _=g||d;Stt(_);let k=o||l.get(_)||null;h=h||443,b=zbe.connect({highWaterMark:16384,...c,servername:g,session:k,localAddress:A,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:h,host:d}),b.on("session",function(N){l.set(_,N)})}else Stt(!y,"httpSocket can only be sent on TLS update"),h=h||80,b=PXt.connect({highWaterMark:64*1024,...c,localAddress:A,port:h,host:d});if(c.keepAlive==null||c.keepAlive){let _=c.keepAliveInitialDelay===void 0?6e4:c.keepAliveInitialDelay;b.setKeepAlive(!0,_)}let I=MXt(new WeakRef(b),{timeout:n,hostname:d,port:h});return b.setNoDelay(!0).once(m==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(I),v){let _=v;v=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(I),v){let k=v;v=null,k(_)}}),b},"connect")}a(NXt,"buildConnector");var MXt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return Rtt;let r=null,n=null,o=gte.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>ktt(t.deref(),e))})},e.timeout);return()=>{gte.clearFastTimeout(o),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return Rtt;let r=null,n=gte.setFastTimeout(()=>{r=setImmediate(()=>{ktt(t.deref(),e)})},e.timeout);return()=>{gte.clearFastTimeout(n),clearImmediate(r)}};function ktt(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,Ptt.destroy(t,new BXt(r))}a(ktt,"onConnectTimeout");Dtt.exports=NXt});var Btt=W(Ate=>{"use strict";f();Object.defineProperty(Ate,"__esModule",{value:!0});Ate.enumToMap=void 0;function LXt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}a(LXt,"enumToMap");Ate.enumToMap=LXt});var Ntt=W(Yt=>{"use strict";f();Object.defineProperty(Yt,"__esModule",{value:!0});Yt.SPECIAL_HEADERS=Yt.HEADER_STATE=Yt.MINOR=Yt.MAJOR=Yt.CONNECTION_TOKEN_CHARS=Yt.HEADER_CHARS=Yt.TOKEN=Yt.STRICT_TOKEN=Yt.HEX=Yt.URL_CHAR=Yt.STRICT_URL_CHAR=Yt.USERINFO_CHARS=Yt.MARK=Yt.ALPHANUM=Yt.NUM=Yt.HEX_MAP=Yt.NUM_MAP=Yt.ALPHA=Yt.FINISH=Yt.H_METHOD_MAP=Yt.METHOD_MAP=Yt.METHODS_RTSP=Yt.METHODS_ICE=Yt.METHODS_HTTP=Yt.METHODS=Yt.LENIENT_FLAGS=Yt.FLAGS=Yt.TYPE=Yt.ERROR=void 0;var FXt=Btt(),OXt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(OXt=Yt.ERROR||(Yt.ERROR={}));var QXt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(QXt=Yt.TYPE||(Yt.TYPE={}));var UXt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(UXt=Yt.FLAGS||(Yt.FLAGS={}));var qXt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(qXt=Yt.LENIENT_FLAGS||(Yt.LENIENT_FLAGS={}));var In;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(In=Yt.METHODS||(Yt.METHODS={}));Yt.METHODS_HTTP=[In.DELETE,In.GET,In.HEAD,In.POST,In.PUT,In.CONNECT,In.OPTIONS,In.TRACE,In.COPY,In.LOCK,In.MKCOL,In.MOVE,In.PROPFIND,In.PROPPATCH,In.SEARCH,In.UNLOCK,In.BIND,In.REBIND,In.UNBIND,In.ACL,In.REPORT,In.MKACTIVITY,In.CHECKOUT,In.MERGE,In["M-SEARCH"],In.NOTIFY,In.SUBSCRIBE,In.UNSUBSCRIBE,In.PATCH,In.PURGE,In.MKCALENDAR,In.LINK,In.UNLINK,In.PRI,In.SOURCE];Yt.METHODS_ICE=[In.SOURCE];Yt.METHODS_RTSP=[In.OPTIONS,In.DESCRIBE,In.ANNOUNCE,In.SETUP,In.PLAY,In.PAUSE,In.TEARDOWN,In.GET_PARAMETER,In.SET_PARAMETER,In.REDIRECT,In.RECORD,In.FLUSH,In.GET,In.POST];Yt.METHOD_MAP=FXt.enumToMap(In);Yt.H_METHOD_MAP={};Object.keys(Yt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Yt.H_METHOD_MAP[t]=Yt.METHOD_MAP[t])});var HXt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(HXt=Yt.FINISH||(Yt.FINISH={}));Yt.ALPHA=[];for(let t=65;t<=90;t++)Yt.ALPHA.push(String.fromCharCode(t)),Yt.ALPHA.push(String.fromCharCode(t+32));Yt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Yt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Yt.NUM=["0","1","2","3","4","5","6","7","8","9"];Yt.ALPHANUM=Yt.ALPHA.concat(Yt.NUM);Yt.MARK=["-","_",".","!","~","*","'","(",")"];Yt.USERINFO_CHARS=Yt.ALPHANUM.concat(Yt.MARK).concat(["%",";",":","&","=","+","$",","]);Yt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Yt.ALPHANUM);Yt.URL_CHAR=Yt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Yt.URL_CHAR.push(t);Yt.HEX=Yt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Yt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Yt.ALPHANUM);Yt.TOKEN=Yt.STRICT_TOKEN.concat([" "]);Yt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Yt.HEADER_CHARS.push(t);Yt.CONNECTION_TOKEN_CHARS=Yt.HEADER_CHARS.filter(t=>t!==44);Yt.MAJOR=Yt.NUM_MAP;Yt.MINOR=Yt.MAJOR;var AN;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(AN=Yt.HEADER_STATE||(Yt.HEADER_STATE={}));Yt.SPECIAL_HEADERS={connection:AN.CONNECTION,"content-length":AN.CONTENT_LENGTH,"proxy-connection":AN.CONNECTION,"transfer-encoding":AN.TRANSFER_ENCODING,upgrade:AN.UPGRADE}});var Ybe=W((Uhi,Mtt)=>{"use strict";f();var{Buffer:WXt}=require("node:buffer");Mtt.exports=WXt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var Ftt=W((Hhi,Ltt)=>{"use strict";f();var{Buffer:$Xt}=require("node:buffer");Ltt.exports=$Xt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var aQ=W(($hi,jtt)=>{"use strict";f();var Ott=["GET","HEAD","POST"],jXt=new Set(Ott),GXt=[101,204,205,304],Qtt=[301,302,303,307,308],VXt=new Set(Qtt),Utt=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],zXt=new Set(Utt),qtt=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],KXt=new Set(qtt),YXt=["follow","manual","error"],Htt=["GET","HEAD","OPTIONS","TRACE"],JXt=new Set(Htt),XXt=["navigate","same-origin","no-cors","cors"],ZXt=["omit","same-origin","include"],eZt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],tZt=["content-encoding","content-language","content-location","content-type","content-length"],rZt=["half"],Wtt=["CONNECT","TRACE","TRACK"],nZt=new Set(Wtt),$tt=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],iZt=new Set($tt);jtt.exports={subresource:$tt,forbiddenMethods:Wtt,requestBodyHeader:tZt,referrerPolicy:qtt,requestRedirect:YXt,requestMode:XXt,requestCredentials:ZXt,requestCache:eZt,redirectStatus:Qtt,corsSafeListedMethods:Ott,nullBodyStatus:GXt,safeMethods:Htt,badPorts:Utt,requestDuplex:rZt,subresourceSet:iZt,badPortsSet:zXt,redirectStatusSet:VXt,corsSafeListedMethodsSet:jXt,safeMethodsSet:JXt,forbiddenMethodsSet:nZt,referrerPolicySet:KXt}});var Xbe=W((Ghi,Gtt)=>{"use strict";f();var Jbe=Symbol.for("undici.globalOrigin.1");function oZt(){return globalThis[Jbe]}a(oZt,"getGlobalOrigin");function sZt(t){if(t===void 0){Object.defineProperty(globalThis,Jbe,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,Jbe,{value:e,writable:!0,enumerable:!1,configurable:!1})}a(sZt,"setGlobalOrigin");Gtt.exports={getGlobalOrigin:oZt,setGlobalOrigin:sZt}});var Up=W((Khi,Ztt)=>{"use strict";f();var Cte=require("node:assert"),aZt=new TextEncoder,cQ=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,cZt=/[\u000A\u000D\u0009\u0020]/,lZt=/[\u0009\u000A\u000C\u000D\u0020]/g,uZt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function dZt(t){Cte(t.protocol==="data:");let e=Ktt(t,!0);e=e.slice(5);let r={position:0},n=yN(",",e,r),o=n.length;if(n=AZt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let s=e.slice(o+1),c=Ytt(s);if(/;(\u0020){0,}base64$/i.test(n)){let u=Xtt(c);if(c=pZt(u),c==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let l=Zbe(n);return l==="failure"&&(l=Zbe("text/plain;charset=US-ASCII")),{mimeType:l,body:c}}a(dZt,"dataURLProcessor");function Ktt(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,o=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?o.slice(0,-1):o}a(Ktt,"URLSerializer");function vte(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}a(vte,"collectASequenceOfCodePoints");function yN(t,e,r){let n=e.indexOf(t,r.position),o=r.position;return n===-1?(r.position=e.length,e.slice(o)):(r.position=n,e.slice(o,r.position))}a(yN,"collectASequenceOfCodePointsFast");function Ytt(t){let e=aZt.encode(t);return fZt(e)}a(Ytt,"stringPercentDecode");function Vtt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}a(Vtt,"isHexCharByte");function ztt(t){return t>=48&&t<=57?t-48:(t&223)-55}a(ztt,"hexByteToNumber");function fZt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let o=0;o<e;++o){let s=t[o];s!==37?r[n++]=s:s===37&&!(Vtt(t[o+1])&&Vtt(t[o+2]))?r[n++]=37:(r[n++]=ztt(t[o+1])<<4|ztt(t[o+2]),o+=2)}return e===n?r:r.subarray(0,n)}a(fZt,"percentDecode");function Zbe(t){t=yte(t,!0,!0);let e={position:0},r=yN("/",t,e);if(r.length===0||!cQ.test(r)||e.position>t.length)return"failure";e.position++;let n=yN(";",t,e);if(n=yte(n,!1,!0),n.length===0||!cQ.test(n))return"failure";let o=r.toLowerCase(),s=n.toLowerCase(),c={type:o,subtype:s,parameters:new Map,essence:`${o}/${s}`};for(;e.position<t.length;){e.position++,vte(d=>cZt.test(d),t,e);let l=vte(d=>d!==";"&&d!=="=",t,e);if(l=l.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let u=null;if(t[e.position]==='"')u=Jtt(t,e,!0),yN(";",t,e);else if(u=yN(";",t,e),u=yte(u,!1,!0),u.length===0)continue;l.length!==0&&cQ.test(l)&&(u.length===0||uZt.test(u))&&!c.parameters.has(l)&&c.parameters.set(l,u)}return c}a(Zbe,"parseMIMEType");function pZt(t){t=t.replace(lZt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}a(pZt,"forgivingBase64");function Jtt(t,e,r){let n=e.position,o="";for(Cte(t[e.position]==='"'),e.position++;o+=vte(c=>c!=='"'&&c!=="\\",t,e),!(e.position>=t.length);){let s=t[e.position];if(e.position++,s==="\\"){if(e.position>=t.length){o+="\\";break}o+=t[e.position],e.position++}else{Cte(s==='"');break}}return r?o:t.slice(n,e.position)}a(Jtt,"collectAnHTTPQuotedString");function mZt(t){Cte(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[o,s]of e.entries())n+=";",n+=o,n+="=",cQ.test(s)||(s=s.replace(/(\\|")/g,"\\$1"),s='"'+s,s+='"'),n+=s;return n}a(mZt,"serializeAMimeType");function hZt(t){return t===13||t===10||t===9||t===32}a(hZt,"isHTTPWhiteSpace");function yte(t,e=!0,r=!0){return eIe(t,e,r,hZt)}a(yte,"removeHTTPWhitespace");function gZt(t){return t===13||t===10||t===9||t===12||t===32}a(gZt,"isASCIIWhitespace");function AZt(t,e=!0,r=!0){return eIe(t,e,r,gZt)}a(AZt,"removeASCIIWhitespace");function eIe(t,e,r,n){let o=0,s=t.length-1;if(e)for(;o<t.length&&n(t.charCodeAt(o));)o++;if(r)for(;s>0&&n(t.charCodeAt(s));)s--;return o===0&&s===t.length-1?t:t.slice(o,s+1)}a(eIe,"removeChars");function Xtt(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,o=65535;for(;n<e;)n+o>e&&(o=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=o));return r}a(Xtt,"isomorphicDecode");function yZt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}a(yZt,"minimizeSupportedMimeType");Ztt.exports={dataURLProcessor:dZt,URLSerializer:Ktt,collectASequenceOfCodePoints:vte,collectASequenceOfCodePointsFast:yN,stringPercentDecode:Ytt,parseMIMEType:Zbe,collectAnHTTPQuotedString:Jtt,serializeAMimeType:mZt,removeChars:eIe,removeHTTPWhitespace:yte,minimizeSupportedMimeType:yZt,HTTP_TOKEN_CODEPOINTS:cQ,isomorphicDecode:Xtt}});var ld=W((Xhi,ert)=>{"use strict";f();var{types:lv,inspect:CZt}=require("node:util"),{markAsUncloneable:vZt}=require("node:worker_threads"),{toUSVString:xZt}=ji(),Wt={};Wt.converters={};Wt.util={};Wt.errors={};Wt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Wt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Wt.errors.exception({header:t.prefix,message:r})};Wt.errors.invalidArgument=function(t){return Wt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Wt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};Wt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw Wt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};Wt.illegalConstructor=function(){throw Wt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Wt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Wt.util.markAsUncloneable=vZt||(()=>{});Wt.util.ConvertToInt=function(t,e,r,n){let o,s;e===64?(o=Math.pow(2,53)-1,r==="unsigned"?s=0:s=Math.pow(-2,53)+1):r==="unsigned"?(s=0,o=Math.pow(2,e)-1):(s=Math.pow(-2,e)-1,o=Math.pow(2,e-1)-1);let c=Number(t);if(c===0&&(c=0),n?.enforceRange===!0){if(Number.isNaN(c)||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)throw Wt.errors.exception({header:"Integer conversion",message:`Could not convert ${Wt.util.Stringify(t)} to an integer.`});if(c=Wt.util.IntegerPart(c),c<s||c>o)throw Wt.errors.exception({header:"Integer conversion",message:`Value must be between ${s}-${o}, got ${c}.`});return c}return!Number.isNaN(c)&&n?.clamp===!0?(c=Math.min(Math.max(c,s),o),Math.floor(c)%2===0?c=Math.floor(c):c=Math.ceil(c),c):Number.isNaN(c)||c===0&&Object.is(0,c)||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY?0:(c=Wt.util.IntegerPart(c),c=c%Math.pow(2,e),r==="signed"&&c>=Math.pow(2,e)-1?c-Math.pow(2,e):c)};Wt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Wt.util.Stringify=function(t){switch(Wt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return CZt(t);case"String":return`"${t}"`;default:return`${t}`}};Wt.sequenceConverter=function(t){return(e,r,n,o)=>{if(Wt.util.Type(e)!=="Object")throw Wt.errors.exception({header:r,message:`${n} (${Wt.util.Stringify(e)}) is not iterable.`});let s=typeof o=="function"?o():e?.[Symbol.iterator]?.(),c=[],l=0;if(s===void 0||typeof s.next!="function")throw Wt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:u,value:d}=s.next();if(u)break;c.push(t(d,r,`${n}[${l++}]`))}return c}};Wt.recordConverter=function(t,e){return(r,n,o)=>{if(Wt.util.Type(r)!=="Object")throw Wt.errors.exception({header:n,message:`${o} ("${Wt.util.Type(r)}") is not an Object.`});let s={};if(!lv.isProxy(r)){let l=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let u of l){let d=t(u,n,o),p=e(r[u],n,o);s[d]=p}return s}let c=Reflect.ownKeys(r);for(let l of c)if(Reflect.getOwnPropertyDescriptor(r,l)?.enumerable){let d=t(l,n,o),p=e(r[l],n,o);s[d]=p}return s}};Wt.interfaceConverter=function(t){return(e,r,n,o)=>{if(o?.strict!==!1&&!(e instanceof t))throw Wt.errors.exception({header:r,message:`Expected ${n} ("${Wt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Wt.dictionaryConverter=function(t){return(e,r,n)=>{let o=Wt.util.Type(e),s={};if(o==="Null"||o==="Undefined")return s;if(o!=="Object")throw Wt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let c of t){let{key:l,defaultValue:u,required:d,converter:p}=c;if(d===!0&&!Object.hasOwn(e,l))throw Wt.errors.exception({header:r,message:`Missing required key "${l}".`});let m=e[l],h=Object.hasOwn(c,"defaultValue");if(h&&m!==null&&(m??=u()),d||h||m!==void 0){if(m=p(m,r,`${n}.${l}`),c.allowedValues&&!c.allowedValues.includes(m))throw Wt.errors.exception({header:r,message:`${m} is not an accepted type. Expected one of ${c.allowedValues.join(", ")}.`});s[l]=m}}return s}};Wt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};Wt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Wt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Wt.converters.ByteString=function(t,e,r){let n=Wt.converters.DOMString(t,e,r);for(let o=0;o<n.length;o++)if(n.charCodeAt(o)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${o} has a value of ${n.charCodeAt(o)} which is greater than 255.`);return n};Wt.converters.USVString=xZt;Wt.converters.boolean=function(t){return!!t};Wt.converters.any=function(t){return t};Wt.converters["long long"]=function(t,e,r){return Wt.util.ConvertToInt(t,64,"signed",void 0,e,r)};Wt.converters["unsigned long long"]=function(t,e,r){return Wt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};Wt.converters["unsigned long"]=function(t,e,r){return Wt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};Wt.converters["unsigned short"]=function(t,e,r,n){return Wt.util.ConvertToInt(t,16,"unsigned",n,e,r)};Wt.converters.ArrayBuffer=function(t,e,r,n){if(Wt.util.Type(t)!=="Object"||!lv.isAnyArrayBuffer(t))throw Wt.errors.conversionFailed({prefix:e,argument:`${r} ("${Wt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&lv.isSharedArrayBuffer(t))throw Wt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Wt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Wt.converters.TypedArray=function(t,e,r,n,o){if(Wt.util.Type(t)!=="Object"||!lv.isTypedArray(t)||t.constructor.name!==e.name)throw Wt.errors.conversionFailed({prefix:r,argument:`${n} ("${Wt.util.Stringify(t)}")`,types:[e.name]});if(o?.allowShared===!1&&lv.isSharedArrayBuffer(t.buffer))throw Wt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Wt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Wt.converters.DataView=function(t,e,r,n){if(Wt.util.Type(t)!=="Object"||!lv.isDataView(t))throw Wt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&lv.isSharedArrayBuffer(t.buffer))throw Wt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Wt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Wt.converters.BufferSource=function(t,e,r,n){if(lv.isAnyArrayBuffer(t))return Wt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(lv.isTypedArray(t))return Wt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(lv.isDataView(t))return Wt.converters.DataView(t,e,r,{...n,allowShared:!1});throw Wt.errors.conversionFailed({prefix:e,argument:`${r} ("${Wt.util.Stringify(t)}")`,types:["BufferSource"]})};Wt.converters["sequence<ByteString>"]=Wt.sequenceConverter(Wt.converters.ByteString);Wt.converters["sequence<sequence<ByteString>>"]=Wt.sequenceConverter(Wt.converters["sequence<ByteString>"]);Wt.converters["record<ByteString, ByteString>"]=Wt.recordConverter(Wt.converters.ByteString,Wt.converters.ByteString);ert.exports={webidl:Wt}});var nm=W((egi,mrt)=>{"use strict";f();var{Transform:EZt}=require("node:stream"),trt=require("node:zlib"),{redirectStatusSet:bZt,referrerPolicySet:IZt,badPortsSet:TZt}=aQ(),{getGlobalOrigin:rrt}=Xbe(),{collectASequenceOfCodePoints:mk,collectAnHTTPQuotedString:wZt,removeChars:_Zt,parseMIMEType:SZt}=Up(),{performance:RZt}=require("node:perf_hooks"),{isBlobLike:kZt,ReadableStreamFrom:PZt,isValidHTTPToken:nrt,normalizedMethodRecordsBase:DZt}=ji(),hk=require("node:assert"),{isUint8Array:BZt}=require("node:util/types"),{webidl:lQ}=ld(),irt=[],Ete;try{Ete=require("node:crypto");let t=["sha256","sha384","sha512"];irt=Ete.getHashes().filter(e=>t.includes(e))}catch{}function ort(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}a(ort,"responseURL");function NZt(t,e){if(!bZt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&art(r)&&(srt(r)||(r=MZt(r)),r=new URL(r,ort(t))),r&&!r.hash&&(r.hash=e),r}a(NZt,"responseLocationURL");function srt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}a(srt,"isValidEncodedURL");function MZt(t){return Buffer.from(t,"binary").toString("utf8")}a(MZt,"normalizeBinaryStringToUtf8");function dQ(t){return t.urlList[t.urlList.length-1]}a(dQ,"requestCurrentURL");function LZt(t){let e=dQ(t);return frt(e)&&TZt.has(e.port)?"blocked":"allowed"}a(LZt,"requestBadPort");function FZt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}a(FZt,"isErrorLike");function OZt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}a(OZt,"isValidReasonPhrase");var QZt=nrt;function art(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}a(art,"isValidHeaderValue");function UZt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),o="";if(n.length>0)for(let s=n.length;s!==0;s--){let c=n[s-1].trim();if(IZt.has(c)){o=c;break}}o!==""&&(t.referrerPolicy=o)}a(UZt,"setRequestReferrerPolicyOnRedirect");function qZt(){return"allowed"}a(qZt,"crossOriginResourcePolicyCheck");function HZt(){return"success"}a(HZt,"corsCheck");function WZt(){return"success"}a(WZt,"TAOCheck");function $Zt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}a($Zt,"appendFetchMetadata");function jZt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&rIe(t.origin)&&!rIe(dQ(t))&&(e=null);break;case"same-origin":bte(t,dQ(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}a(jZt,"appendRequestOriginHeader");function CN(t,e){return t}a(CN,"coarsenTime");function GZt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:CN(t.domainLookupStartTime,r),domainLookupEndTime:CN(t.domainLookupEndTime,r),connectionStartTime:CN(t.connectionStartTime,r),connectionEndTime:CN(t.connectionEndTime,r),secureConnectionStartTime:CN(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}a(GZt,"clampAndCoarsenConnectionTimingInfo");function VZt(t){return CN(RZt.now(),t)}a(VZt,"coarsenedSharedCurrentTime");function zZt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}a(zZt,"createOpaqueTimingInfo");function crt(){return{referrerPolicy:"strict-origin-when-cross-origin"}}a(crt,"makePolicyContainer");function KZt(t){return{referrerPolicy:t.referrerPolicy}}a(KZt,"clonePolicyContainer");function YZt(t){let e=t.referrerPolicy;hk(e);let r=null;if(t.referrer==="client"){let l=rrt();if(!l||l.origin==="null")return"no-referrer";r=new URL(l)}else t.referrer instanceof URL&&(r=t.referrer);let n=tIe(r),o=tIe(r,!0);n.toString().length>4096&&(n=o);let s=bte(t,n),c=uQ(n)&&!uQ(t.url);switch(e){case"origin":return o??tIe(r,!0);case"unsafe-url":return n;case"same-origin":return s?o:"no-referrer";case"origin-when-cross-origin":return s?n:o;case"strict-origin-when-cross-origin":{let l=dQ(t);return bte(n,l)?n:uQ(n)&&!uQ(l)?"no-referrer":o}case"strict-origin":case"no-referrer-when-downgrade":default:return c?"no-referrer":o}}a(YZt,"determineRequestsReferrer");function tIe(t,e){return hk(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}a(tIe,"stripURLForReferrer");function uQ(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}a(uQ,"isURLPotentiallyTrustworthy");function JZt(t,e){if(Ete===void 0)return!0;let r=lrt(e);if(r==="no metadata"||r.length===0)return!0;let n=ZZt(r),o=eer(r,n);for(let s of o){let c=s.algo,l=s.hash,u=Ete.createHash(c).update(t).digest("base64");if(u[u.length-1]==="="&&(u[u.length-2]==="="?u=u.slice(0,-2):u=u.slice(0,-1)),ter(u,l))return!0}return!1}a(JZt,"bytesMatch");var XZt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function lrt(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let o=XZt.exec(n);if(o===null||o.groups===void 0||o.groups.algo===void 0)continue;let s=o.groups.algo.toLowerCase();irt.includes(s)&&e.push(o.groups)}return r===!0?"no metadata":e}a(lrt,"parseMetadata");function ZZt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}a(ZZt,"getStrongestMetadata");function eer(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}a(eer,"filterMetadataListByAlgorithm");function ter(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}a(ter,"compareBase64Mixed");function rer(t){}a(rer,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function bte(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}a(bte,"sameOrigin");function ner(){let t,e;return{promise:new Promise((n,o)=>{t=n,e=o}),resolve:t,reject:e}}a(ner,"createDeferredPromise");function ier(t){return t.controller.state==="aborted"}a(ier,"isAborted");function oer(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}a(oer,"isCancelled");function ser(t){return DZt[t.toLowerCase()]??t}a(ser,"normalizeMethod");function aer(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return hk(typeof e=="string"),e}a(aer,"serializeJavascriptValueToJSONString");var cer=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function urt(t,e,r=0,n=1){class o{static{a(this,"FastIterableIterator")}#e;#t;#i;constructor(c,l){this.#e=c,this.#t=l,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let c=this.#i,l=this.#e[e],u=l.length;if(c>=u)return{value:void 0,done:!0};let{[r]:d,[n]:p}=l[c];this.#i=c+1;let m;switch(this.#t){case"key":m=d;break;case"value":m=p;break;case"key+value":m=[d,p];break}return{value:m,done:!1}}}return delete o.prototype.constructor,Object.setPrototypeOf(o.prototype,cer),Object.defineProperties(o.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(s,c){return new o(s,c)}}a(urt,"createIterator");function ler(t,e,r,n=0,o=1){let s=urt(t,r,n,o),c={keys:{writable:!0,enumerable:!0,configurable:!0,value:a(function(){return lQ.brandCheck(this,e),s(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:a(function(){return lQ.brandCheck(this,e),s(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:a(function(){return lQ.brandCheck(this,e),s(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:a(function(u,d=globalThis){if(lQ.brandCheck(this,e),lQ.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof u!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:p,1:m}of s(this,"key+value"))u.call(d,m,p,this)},"forEach")}};return Object.defineProperties(e.prototype,{...c,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:c.entries.value}})}a(ler,"iteratorMixin");async function uer(t,e,r){let n=e,o=r,s;try{s=t.stream.getReader()}catch(c){o(c);return}try{n(await drt(s))}catch(c){o(c)}}a(uer,"fullyReadBody");function der(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}a(der,"isReadableStreamLike");function fer(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}a(fer,"readableStreamClose");var per=/[^\x00-\xFF]/;function xte(t){return hk(!per.test(t)),t}a(xte,"isomorphicEncode");async function drt(t){let e=[],r=0;for(;;){let{done:n,value:o}=await t.read();if(n)return Buffer.concat(e,r);if(!BZt(o))throw new TypeError("Received non-Uint8Array chunk");e.push(o),r+=o.length}}a(drt,"readAllBytes");function mer(t){hk("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}a(mer,"urlIsLocal");function rIe(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}a(rIe,"urlHasHttpsScheme");function frt(t){hk("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}a(frt,"urlIsHttpHttpsScheme");function her(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&mk(u=>u==="	"||u===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&mk(u=>u==="	"||u===" ",r,n);let o=mk(u=>{let d=u.charCodeAt(0);return d>=48&&d<=57},r,n),s=o.length?Number(o):null;if(e&&mk(u=>u==="	"||u===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&mk(u=>u==="	"||u===" ",r,n);let c=mk(u=>{let d=u.charCodeAt(0);return d>=48&&d<=57},r,n),l=c.length?Number(c):null;return n.position<r.length||l===null&&s===null||s>l?"failure":{rangeStartValue:s,rangeEndValue:l}}a(her,"simpleRangeHeaderValue");function ger(t,e,r){let n="bytes ";return n+=xte(`${t}`),n+="-",n+=xte(`${e}`),n+="/",n+=xte(`${r}`),n}a(ger,"buildContentRange");var nIe=class extends EZt{static{a(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?trt.createInflate(this.#e):trt.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",o=>this.destroy(o))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function Aer(t){return new nIe(t)}a(Aer,"createInflate");function yer(t){let e=null,r=null,n=null,o=prt("content-type",t);if(o===null)return"failure";for(let s of o){let c=SZt(s);c==="failure"||c.essence==="*/*"||(n=c,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}a(yer,"extractMimeType");function Cer(t){let e=t,r={position:0},n=[],o="";for(;r.position<e.length;){if(o+=mk(s=>s!=='"'&&s!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(o+=wZt(e,r),r.position<e.length)continue}else hk(e.charCodeAt(r.position)===44),r.position++;o=_Zt(o,!0,!0,s=>s===9||s===32),n.push(o),o=""}return n}a(Cer,"gettingDecodingSplitting");function prt(t,e){let r=e.get(t,!0);return r===null?null:Cer(r)}a(prt,"getDecodeSplit");var ver=new TextDecoder;function xer(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),ver.decode(t))}a(xer,"utf8DecodeBytes");var iIe=class{static{a(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return rrt()}get origin(){return this.baseUrl?.origin}policyContainer=crt()},oIe=class{static{a(this,"EnvironmentSettingsObject")}settingsObject=new iIe},Eer=new oIe;mrt.exports={isAborted:ier,isCancelled:oer,isValidEncodedURL:srt,createDeferredPromise:ner,ReadableStreamFrom:PZt,tryUpgradeRequestToAPotentiallyTrustworthyURL:rer,clampAndCoarsenConnectionTimingInfo:GZt,coarsenedSharedCurrentTime:VZt,determineRequestsReferrer:YZt,makePolicyContainer:crt,clonePolicyContainer:KZt,appendFetchMetadata:$Zt,appendRequestOriginHeader:jZt,TAOCheck:WZt,corsCheck:HZt,crossOriginResourcePolicyCheck:qZt,createOpaqueTimingInfo:zZt,setRequestReferrerPolicyOnRedirect:UZt,isValidHTTPToken:nrt,requestBadPort:LZt,requestCurrentURL:dQ,responseURL:ort,responseLocationURL:NZt,isBlobLike:kZt,isURLPotentiallyTrustworthy:uQ,isValidReasonPhrase:OZt,sameOrigin:bte,normalizeMethod:ser,serializeJavascriptValueToJSONString:aer,iteratorMixin:ler,createIterator:urt,isValidHeaderName:QZt,isValidHeaderValue:art,isErrorLike:FZt,fullyReadBody:uer,bytesMatch:JZt,isReadableStreamLike:der,readableStreamClose:fer,isomorphicEncode:xte,urlIsLocal:mer,urlHasHttpsScheme:rIe,urlIsHttpHttpsScheme:frt,readAllBytes:drt,simpleRangeHeaderValue:her,buildContentRange:ger,parseMetadata:lrt,createInflate:Aer,extractMimeType:yer,getDecodeSplit:prt,utf8DecodeBytes:xer,environmentSettingsObject:Eer}});var fw=W((ngi,hrt)=>{"use strict";f();hrt.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var aIe=W((ogi,grt)=>{"use strict";f();var{Blob:ber,File:Ier}=require("node:buffer"),{kState:Kx}=fw(),{webidl:uv}=ld(),sIe=class t{static{a(this,"FileLike")}constructor(e,r,n={}){let o=r,s=n.type,c=n.lastModified??Date.now();this[Kx]={blobLike:e,name:o,type:s,lastModified:c}}stream(...e){return uv.brandCheck(this,t),this[Kx].blobLike.stream(...e)}arrayBuffer(...e){return uv.brandCheck(this,t),this[Kx].blobLike.arrayBuffer(...e)}slice(...e){return uv.brandCheck(this,t),this[Kx].blobLike.slice(...e)}text(...e){return uv.brandCheck(this,t),this[Kx].blobLike.text(...e)}get size(){return uv.brandCheck(this,t),this[Kx].blobLike.size}get type(){return uv.brandCheck(this,t),this[Kx].blobLike.type}get name(){return uv.brandCheck(this,t),this[Kx].name}get lastModified(){return uv.brandCheck(this,t),this[Kx].lastModified}get[Symbol.toStringTag](){return"File"}};uv.converters.Blob=uv.interfaceConverter(ber);function Ter(t){return t instanceof Ier||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}a(Ter,"isFileLike");grt.exports={FileLike:sIe,isFileLike:Ter}});var pQ=W((cgi,xrt)=>{"use strict";f();var{isBlobLike:Ite,iteratorMixin:wer}=nm(),{kState:Of}=fw(),{kEnumerableProperty:vN}=ji(),{FileLike:Art,isFileLike:_er}=aIe(),{webidl:js}=ld(),{File:vrt}=require("node:buffer"),yrt=require("node:util"),Crt=globalThis.File??vrt,fQ=class t{static{a(this,"FormData")}constructor(e){if(js.util.markAsUncloneable(this),e!==void 0)throw js.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Of]=[]}append(e,r,n=void 0){js.brandCheck(this,t);let o="FormData.append";if(js.argumentLengthCheck(arguments,2,o),arguments.length===3&&!Ite(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=js.converters.USVString(e,o,"name"),r=Ite(r)?js.converters.Blob(r,o,"value",{strict:!1}):js.converters.USVString(r,o,"value"),n=arguments.length===3?js.converters.USVString(n,o,"filename"):void 0;let s=cIe(e,r,n);this[Of].push(s)}delete(e){js.brandCheck(this,t);let r="FormData.delete";js.argumentLengthCheck(arguments,1,r),e=js.converters.USVString(e,r,"name"),this[Of]=this[Of].filter(n=>n.name!==e)}get(e){js.brandCheck(this,t);let r="FormData.get";js.argumentLengthCheck(arguments,1,r),e=js.converters.USVString(e,r,"name");let n=this[Of].findIndex(o=>o.name===e);return n===-1?null:this[Of][n].value}getAll(e){js.brandCheck(this,t);let r="FormData.getAll";return js.argumentLengthCheck(arguments,1,r),e=js.converters.USVString(e,r,"name"),this[Of].filter(n=>n.name===e).map(n=>n.value)}has(e){js.brandCheck(this,t);let r="FormData.has";return js.argumentLengthCheck(arguments,1,r),e=js.converters.USVString(e,r,"name"),this[Of].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){js.brandCheck(this,t);let o="FormData.set";if(js.argumentLengthCheck(arguments,2,o),arguments.length===3&&!Ite(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=js.converters.USVString(e,o,"name"),r=Ite(r)?js.converters.Blob(r,o,"name",{strict:!1}):js.converters.USVString(r,o,"name"),n=arguments.length===3?js.converters.USVString(n,o,"name"):void 0;let s=cIe(e,r,n),c=this[Of].findIndex(l=>l.name===e);c!==-1?this[Of]=[...this[Of].slice(0,c),s,...this[Of].slice(c+1).filter(l=>l.name!==e)]:this[Of].push(s)}[yrt.inspect.custom](e,r){let n=this[Of].reduce((s,c)=>(s[c.name]?Array.isArray(s[c.name])?s[c.name].push(c.value):s[c.name]=[s[c.name],c.value]:s[c.name]=c.value,s),{__proto__:null});r.depth??=e,r.colors??=!0;let o=yrt.formatWithOptions(r,n);return`FormData ${o.slice(o.indexOf("]")+2)}`}};wer("FormData",fQ,Of,"name","value");Object.defineProperties(fQ.prototype,{append:vN,delete:vN,get:vN,getAll:vN,has:vN,set:vN,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function cIe(t,e,r){if(typeof e!="string"){if(_er(e)||(e=e instanceof Blob?new Crt([e],"blob",{type:e.type}):new Art(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof vrt?new Crt([e],r,n):new Art(e,r,n)}}return{name:t,value:e}}a(cIe,"makeEntry");xrt.exports={FormData:fQ,makeEntry:cIe}});var _rt=W((dgi,wrt)=>{"use strict";f();var{isUSVString:Ert,bufferToLowerCasedHeaderName:Ser}=ji(),{utf8DecodeBytes:Rer}=nm(),{HTTP_TOKEN_CODEPOINTS:ker,isomorphicDecode:brt}=Up(),{isFileLike:Per}=aIe(),{makeEntry:Der}=pQ(),Tte=require("node:assert"),{File:Ber}=require("node:buffer"),Ner=globalThis.File??Ber,Mer=Buffer.from('form-data; name="'),Irt=Buffer.from("; filename"),Ler=Buffer.from("--"),Fer=Buffer.from(`--\r
`);function Oer(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}a(Oer,"isAsciiString");function Qer(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}a(Qer,"validateBoundary");function Uer(t,e){Tte(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),o=[],s={position:0};for(;t[s.position]===13&&t[s.position+1]===10;)s.position+=2;let c=t.length;for(;t[c-1]===10&&t[c-2]===13;)c-=2;for(c!==t.length&&(t=t.subarray(0,c));;){if(t.subarray(s.position,s.position+n.length).equals(n))s.position+=n.length;else return"failure";if(s.position===t.length-2&&wte(t,Ler,s)||s.position===t.length-4&&wte(t,Fer,s))return o;if(t[s.position]!==13||t[s.position+1]!==10)return"failure";s.position+=2;let l=qer(t,s);if(l==="failure")return"failure";let{name:u,filename:d,contentType:p,encoding:m}=l;s.position+=2;let h;{let A=t.indexOf(n.subarray(2),s.position);if(A===-1)return"failure";h=t.subarray(s.position,A-4),s.position+=h.length,m==="base64"&&(h=Buffer.from(h.toString(),"base64"))}if(t[s.position]!==13||t[s.position+1]!==10)return"failure";s.position+=2;let g;d!==null?(p??="text/plain",Oer(p)||(p=""),g=new Ner([h],d,{type:p})):g=Rer(Buffer.from(h)),Tte(Ert(u)),Tte(typeof g=="string"&&Ert(g)||Per(g)),o.push(Der(u,g,d))}}a(Uer,"multipartFormDataParser");function qer(t,e){let r=null,n=null,o=null,s=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:o,encoding:s};let c=xN(l=>l!==10&&l!==13&&l!==58,t,e);if(c=lIe(c,!0,!0,l=>l===9||l===32),!ker.test(c.toString())||t[e.position]!==58)return"failure";switch(e.position++,xN(l=>l===32||l===9,t,e),Ser(c)){case"content-disposition":{if(r=n=null,!wte(t,Mer,e)||(e.position+=17,r=Trt(t,e),r===null))return"failure";if(wte(t,Irt,e)){let l=e.position+Irt.length;if(t[l]===42&&(e.position+=1,l+=1),t[l]!==61||t[l+1]!==34||(e.position+=12,n=Trt(t,e),n===null))return"failure"}break}case"content-type":{let l=xN(u=>u!==10&&u!==13,t,e);l=lIe(l,!1,!0,u=>u===9||u===32),o=brt(l);break}case"content-transfer-encoding":{let l=xN(u=>u!==10&&u!==13,t,e);l=lIe(l,!1,!0,u=>u===9||u===32),s=brt(l);break}default:xN(l=>l!==10&&l!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}a(qer,"parseMultipartFormDataHeaders");function Trt(t,e){Tte(t[e.position-1]===34);let r=xN(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}a(Trt,"parseMultipartFormDataName");function xN(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}a(xN,"collectASequenceOfBytes");function lIe(t,e,r,n){let o=0,s=t.length-1;if(e)for(;o<t.length&&n(t[o]);)o++;if(r)for(;s>0&&n(t[s]);)s--;return o===0&&s===t.length-1?t:t.subarray(o,s+1)}a(lIe,"removeChars");function wte(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}a(wte,"bufferStartsWith");wrt.exports={multipartFormDataParser:Uer,validateBoundary:Qer}});var IN=W((mgi,Mrt)=>{"use strict";f();var mQ=ji(),{ReadableStreamFrom:Her,isBlobLike:Srt,isReadableStreamLike:Wer,readableStreamClose:$er,createDeferredPromise:jer,fullyReadBody:Ger,extractMimeType:Ver,utf8DecodeBytes:Prt}=nm(),{FormData:Rrt}=pQ(),{kState:bN}=fw(),{webidl:zer}=ld(),{Blob:Ker}=require("node:buffer"),uIe=require("node:assert"),{isErrored:Drt,isDisturbed:Yer}=require("node:stream"),{isArrayBuffer:Jer}=require("node:util/types"),{serializeAMimeType:Xer}=Up(),{multipartFormDataParser:Zer}=_rt(),dIe;try{let t=require("node:crypto");dIe=a(e=>t.randomInt(0,e),"random")}catch{dIe=a(t=>Math.floor(Math.random(t)),"random")}var _te=new TextEncoder;function etr(){}a(etr,"noop");var fIe=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,pIe;fIe&&(pIe=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!Yer(e)&&!Drt(e)&&e.cancel("Response object has been garbage collected").catch(etr)}));function Brt(t,e=!1){let r=null;t instanceof ReadableStream?r=t:Srt(t)?r=t.stream():r=new ReadableStream({async pull(u){let d=typeof o=="string"?_te.encode(o):o;d.byteLength&&u.enqueue(d),queueMicrotask(()=>$er(u))},start(){},type:"bytes"}),uIe(Wer(r));let n=null,o=null,s=null,c=null;if(typeof t=="string")o=t,c="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)o=t.toString(),c="application/x-www-form-urlencoded;charset=UTF-8";else if(Jer(t))o=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))o=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(mQ.isFormDataLike(t)){let u=`----formdata-undici-0${`${dIe(1e11)}`.padStart(11,"0")}`,d=`--${u}\r
Content-Disposition: form-data`;let p=a(v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),m=a(v=>v.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),h=[],g=new Uint8Array([13,10]);s=0;let A=!1;for(let[v,b]of t)if(typeof b=="string"){let I=_te.encode(d+`; name="${p(m(v))}"\r
\r
${m(b)}\r
`);h.push(I),s+=I.byteLength}else{let I=_te.encode(`${d}; name="${p(m(v))}"`+(b.name?`; filename="${p(b.name)}"`:"")+`\r
Content-Type: ${b.type||"application/octet-stream"}\r
\r
`);h.push(I,b,g),typeof b.size=="number"?s+=I.byteLength+b.size+g.byteLength:A=!0}let y=_te.encode(`--${u}--\r
`);h.push(y),s+=y.byteLength,A&&(s=null),o=t,n=a(async function*(){for(let v of h)v.stream?yield*v.stream():yield v},"action"),c=`multipart/form-data; boundary=${u}`}else if(Srt(t))o=t,s=t.size,t.type&&(c=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(mQ.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:Her(t)}if((typeof o=="string"||mQ.isBuffer(o))&&(s=Buffer.byteLength(o)),n!=null){let u;r=new ReadableStream({async start(){u=n(t)[Symbol.asyncIterator]()},async pull(d){let{value:p,done:m}=await u.next();if(m)queueMicrotask(()=>{d.close(),d.byobRequest?.respond(0)});else if(!Drt(r)){let h=new Uint8Array(p);h.byteLength&&d.enqueue(h)}return d.desiredSize>0},async cancel(d){await u.return()},type:"bytes"})}return[{stream:r,source:o,length:s},c]}a(Brt,"extractBody");function ttr(t,e=!1){return t instanceof ReadableStream&&(uIe(!mQ.isDisturbed(t),"The body has already been consumed."),uIe(!t.locked,"The stream is locked.")),Brt(t,e)}a(ttr,"safelyExtractBody");function rtr(t,e){let[r,n]=e.stream.tee();return fIe&&pIe.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}a(rtr,"cloneBody");function ntr(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}a(ntr,"throwIfAborted");function itr(t){return{blob(){return EN(this,r=>{let n=krt(this);return n===null?n="":n&&(n=Xer(n)),new Ker([r],{type:n})},t)},arrayBuffer(){return EN(this,r=>new Uint8Array(r).buffer,t)},text(){return EN(this,Prt,t)},json(){return EN(this,str,t)},formData(){return EN(this,r=>{let n=krt(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let o=Zer(r,n);if(o==="failure")throw new TypeError("Failed to parse body as FormData.");let s=new Rrt;return s[bN]=o,s}case"application/x-www-form-urlencoded":{let o=new URLSearchParams(r.toString()),s=new Rrt;for(let[c,l]of o)s.append(c,l);return s}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return EN(this,r=>new Uint8Array(r),t)}}}a(itr,"bodyMixinMethods");function otr(t){Object.assign(t.prototype,itr(t))}a(otr,"mixinBody");async function EN(t,e,r){if(zer.brandCheck(t,r),Nrt(t))throw new TypeError("Body is unusable: Body has already been read");ntr(t[bN]);let n=jer(),o=a(c=>n.reject(c),"errorSteps"),s=a(c=>{try{n.resolve(e(c))}catch(l){o(l)}},"successSteps");return t[bN].body==null?(s(Buffer.allocUnsafe(0)),n.promise):(await Ger(t[bN].body,s,o),n.promise)}a(EN,"consumeBody");function Nrt(t){let e=t[bN].body;return e!=null&&(e.stream.locked||mQ.isDisturbed(e.stream))}a(Nrt,"bodyUnusable");function str(t){return JSON.parse(Prt(t))}a(str,"parseJSONFromBytes");function krt(t){let e=t[bN].headersList,r=Ver(e);return r==="failure"?null:r}a(krt,"bodyMimeType");Mrt.exports={extractBody:Brt,safelyExtractBody:ttr,cloneBody:rtr,mixinBody:otr,streamRegistry:pIe,hasFinalizationRegistry:fIe,bodyUnusable:Nrt}});var Grt=W((Agi,jrt)=>{"use strict";f();var Mn=require("node:assert"),di=ji(),{channels:Lrt}=dN(),mIe=Vbe(),{RequestContentLengthMismatchError:gk,ResponseContentLengthMismatchError:atr,RequestAbortedError:Hrt,HeadersTimeoutError:ctr,HeadersOverflowError:ltr,SocketError:Bte,InformationalError:TN,BodyTimeoutError:utr,HTTPParserError:dtr,ResponseExceededMaxSizeError:ftr}=Xo(),{kUrl:Wrt,kReset:qp,kClient:yIe,kParser:Cc,kBlocking:AQ,kRunning:Vd,kPending:ptr,kSize:Frt,kWriting:mw,kQueue:VA,kNoRef:hQ,kKeepAliveDefaultTimeout:mtr,kHostHeader:htr,kPendingIdx:gtr,kRunningIdx:Wh,kError:$h,kPipelining:Pte,kSocket:wN,kKeepAliveTimeoutValue:Nte,kMaxHeadersSize:hIe,kKeepAliveMaxTimeout:Atr,kKeepAliveTimeoutThreshold:ytr,kHeadersTimeout:Ctr,kBodyTimeout:vtr,kStrictContentLength:CIe,kMaxRequests:Ort,kCounter:xtr,kMaxResponseSize:Etr,kOnError:btr,kResume:pw,kHTTPContext:$rt}=Ua(),dv=Ntt(),Itr=Buffer.alloc(0),Ste=Buffer[Symbol.species],Rte=di.addListener,Ttr=di.removeAllListeners,gIe;async function wtr(){let t=process.env.JEST_WORKER_ID?Ybe():void 0,e;try{e=await WebAssembly.compile(Ftt())}catch{e=await WebAssembly.compile(t||Ybe())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:a((r,n,o)=>0,"wasm_on_url"),wasm_on_status:a((r,n,o)=>{Mn(Wl.ptr===r);let s=n-pv+fv.byteOffset;return Wl.onStatus(new Ste(fv.buffer,s,o))||0},"wasm_on_status"),wasm_on_message_begin:a(r=>(Mn(Wl.ptr===r),Wl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:a((r,n,o)=>{Mn(Wl.ptr===r);let s=n-pv+fv.byteOffset;return Wl.onHeaderField(new Ste(fv.buffer,s,o))||0},"wasm_on_header_field"),wasm_on_header_value:a((r,n,o)=>{Mn(Wl.ptr===r);let s=n-pv+fv.byteOffset;return Wl.onHeaderValue(new Ste(fv.buffer,s,o))||0},"wasm_on_header_value"),wasm_on_headers_complete:a((r,n,o,s)=>(Mn(Wl.ptr===r),Wl.onHeadersComplete(n,!!o,!!s)||0),"wasm_on_headers_complete"),wasm_on_body:a((r,n,o)=>{Mn(Wl.ptr===r);let s=n-pv+fv.byteOffset;return Wl.onBody(new Ste(fv.buffer,s,o))||0},"wasm_on_body"),wasm_on_message_complete:a(r=>(Mn(Wl.ptr===r),Wl.onMessageComplete()||0),"wasm_on_message_complete")}})}a(wtr,"lazyllhttp");var AIe=null,vIe=wtr();vIe.catch();var Wl=null,fv=null,kte=0,pv=null,_tr=0,gQ=1,_N=2|gQ,Dte=4|gQ,xIe=8|_tr,EIe=class{static{a(this,"Parser")}constructor(e,r,{exports:n}){Mn(Number.isFinite(e[hIe])&&e[hIe]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(dv.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[hIe],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[Etr]}setTimeout(e,r){e!==this.timeoutValue||r&gQ^this.timeoutType&gQ?(this.timeout&&(mIe.clearTimeout(this.timeout),this.timeout=null),e&&(r&gQ?this.timeout=mIe.setFastTimeout(Qrt,e,new WeakRef(this)):(this.timeout=setTimeout(Qrt,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(Mn(this.ptr!=null),Mn(Wl==null),this.llhttp.llhttp_resume(this.ptr),Mn(this.timeoutType===Dte),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||Itr),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Mn(this.ptr!=null),Mn(Wl==null),Mn(!this.paused);let{socket:r,llhttp:n}=this;e.length>kte&&(pv&&n.free(pv),kte=Math.ceil(e.length/4096)*4096,pv=n.malloc(kte)),new Uint8Array(n.memory.buffer,pv,kte).set(e);try{let o;try{fv=e,Wl=this,o=n.llhttp_execute(this.ptr,pv,e.length)}catch(c){throw c}finally{Wl=null,fv=null}let s=n.llhttp_get_error_pos(this.ptr)-pv;if(o===dv.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(s));else if(o===dv.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(s));else if(o!==dv.ERROR.OK){let c=n.llhttp_get_error_reason(this.ptr),l="";if(c){let u=new Uint8Array(n.memory.buffer,c).indexOf(0);l="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,c,u).toString()+")"}throw new dtr(l,dv.ERROR[o],e.slice(s))}}catch(o){di.destroy(r,o)}}destroy(){Mn(this.ptr!=null),Mn(Wl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&mIe.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[VA][r[Wh]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let o=di.bufferToLowerCasedHeaderName(n);o==="keep-alive"?this.keepAlive+=e.toString():o==="connection"&&(this.connection+=e.toString())}else n.length===14&&di.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&di.destroy(this.socket,new ltr)}onUpgrade(e){let{upgrade:r,client:n,socket:o,headers:s,statusCode:c}=this;Mn(r),Mn(n[wN]===o),Mn(!o.destroyed),Mn(!this.paused),Mn((s.length&1)===0);let l=n[VA][n[Wh]];Mn(l),Mn(l.upgrade||l.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,o.unshift(e),o[Cc].destroy(),o[Cc]=null,o[yIe]=null,o[$h]=null,Ttr(o),n[wN]=null,n[$rt]=null,n[VA][n[Wh]++]=null,n.emit("disconnect",n[Wrt],[n],new TN("upgrade"));try{l.onUpgrade(c,s,o)}catch(u){di.destroy(o,u)}n[pw]()}onHeadersComplete(e,r,n){let{client:o,socket:s,headers:c,statusText:l}=this;if(s.destroyed)return-1;let u=o[VA][o[Wh]];if(!u)return-1;if(Mn(!this.upgrade),Mn(this.statusCode<200),e===100)return di.destroy(s,new Bte("bad response",di.getSocketInfo(s))),-1;if(r&&!u.upgrade)return di.destroy(s,new Bte("bad upgrade",di.getSocketInfo(s))),-1;if(Mn(this.timeoutType===_N),this.statusCode=e,this.shouldKeepAlive=n||u.method==="HEAD"&&!s[qp]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let p=u.bodyTimeout!=null?u.bodyTimeout:o[vtr];this.setTimeout(p,Dte)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(u.method==="CONNECT")return Mn(o[Vd]===1),this.upgrade=!0,2;if(r)return Mn(o[Vd]===1),this.upgrade=!0,2;if(Mn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&o[Pte]){let p=this.keepAlive?di.parseKeepAliveTimeout(this.keepAlive):null;if(p!=null){let m=Math.min(p-o[ytr],o[Atr]);m<=0?s[qp]=!0:o[Nte]=m}else o[Nte]=o[mtr]}else s[qp]=!0;let d=u.onHeaders(e,c,this.resume,l)===!1;return u.aborted?-1:u.method==="HEAD"||e<200?1:(s[AQ]&&(s[AQ]=!1,o[pw]()),d?dv.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:o,maxResponseSize:s}=this;if(n.destroyed)return-1;let c=r[VA][r[Wh]];if(Mn(c),Mn(this.timeoutType===Dte),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Mn(o>=200),s>-1&&this.bytesRead+e.length>s)return di.destroy(n,new ftr),-1;if(this.bytesRead+=e.length,c.onData(e)===!1)return dv.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:o,headers:s,contentLength:c,bytesRead:l,shouldKeepAlive:u}=this;if(r.destroyed&&(!n||u))return-1;if(o)return;Mn(n>=100),Mn((this.headers.length&1)===0);let d=e[VA][e[Wh]];if(Mn(d),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(d.method!=="HEAD"&&c&&l!==parseInt(c,10))return di.destroy(r,new atr),-1;if(d.onComplete(s),e[VA][e[Wh]++]=null,r[mw])return Mn(e[Vd]===0),di.destroy(r,new TN("reset")),dv.ERROR.PAUSED;if(u){if(r[qp]&&e[Vd]===0)return di.destroy(r,new TN("reset")),dv.ERROR.PAUSED;e[Pte]==null||e[Pte]===1?setImmediate(()=>e[pw]()):e[pw]()}else return di.destroy(r,new TN("reset")),dv.ERROR.PAUSED}}};function Qrt(t){let{socket:e,timeoutType:r,client:n,paused:o}=t.deref();r===_N?(!e[mw]||e.writableNeedDrain||n[Vd]>1)&&(Mn(!o,"cannot be paused while waiting for headers"),di.destroy(e,new ctr)):r===Dte?o||di.destroy(e,new utr):r===xIe&&(Mn(n[Vd]===0&&n[Nte]),di.destroy(e,new TN("socket idle timeout")))}a(Qrt,"onParserTimeout");async function Str(t,e){t[wN]=e,AIe||(AIe=await vIe,vIe=null),e[hQ]=!1,e[mw]=!1,e[qp]=!1,e[AQ]=!1,e[Cc]=new EIe(t,e,AIe),Rte(e,"error",function(n){Mn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let o=this[Cc];if(n.code==="ECONNRESET"&&o.statusCode&&!o.shouldKeepAlive){o.onMessageComplete();return}this[$h]=n,this[yIe][btr](n)}),Rte(e,"readable",function(){let n=this[Cc];n&&n.readMore()}),Rte(e,"end",function(){let n=this[Cc];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}di.destroy(this,new Bte("other side closed",di.getSocketInfo(this)))}),Rte(e,"close",function(){let n=this[yIe],o=this[Cc];o&&(!this[$h]&&o.statusCode&&!o.shouldKeepAlive&&o.onMessageComplete(),this[Cc].destroy(),this[Cc]=null);let s=this[$h]||new Bte("closed",di.getSocketInfo(this));if(n[wN]=null,n[$rt]=null,n.destroyed){Mn(n[ptr]===0);let c=n[VA].splice(n[Wh]);for(let l=0;l<c.length;l++){let u=c[l];di.errorRequest(n,u,s)}}else if(n[Vd]>0&&s.code!=="UND_ERR_INFO"){let c=n[VA][n[Wh]];n[VA][n[Wh]++]=null,di.errorRequest(n,c,s)}n[gtr]=n[Wh],Mn(n[Vd]===0),n.emit("disconnect",n[Wrt],[n],s),n[pw]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return Ptr(t,...n)},resume(){Rtr(t)},destroy(n,o){r?queueMicrotask(o):e.destroy(n).on("close",o)},get destroyed(){return e.destroyed},busy(n){return!!(e[mw]||e[qp]||e[AQ]||n&&(t[Vd]>0&&!n.idempotent||t[Vd]>0&&(n.upgrade||n.method==="CONNECT")||t[Vd]>0&&di.bodyLength(n.body)!==0&&(di.isStream(n.body)||di.isAsyncIterable(n.body)||di.isFormDataLike(n.body))))}}}a(Str,"connectH1");function Rtr(t){let e=t[wN];if(e&&!e.destroyed){if(t[Frt]===0?!e[hQ]&&e.unref&&(e.unref(),e[hQ]=!0):e[hQ]&&e.ref&&(e.ref(),e[hQ]=!1),t[Frt]===0)e[Cc].timeoutType!==xIe&&e[Cc].setTimeout(t[Nte],xIe);else if(t[Vd]>0&&e[Cc].statusCode<200&&e[Cc].timeoutType!==_N){let r=t[VA][t[Wh]],n=r.headersTimeout!=null?r.headersTimeout:t[Ctr];e[Cc].setTimeout(n,_N)}}}a(Rtr,"resumeH1");function ktr(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}a(ktr,"shouldSendContentLength");function Ptr(t,e){let{method:r,path:n,host:o,upgrade:s,blocking:c,reset:l}=e,{body:u,headers:d,contentLength:p}=e,m=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(di.isFormDataLike(u)){gIe||(gIe=IN().extractBody);let[v,b]=gIe(u);e.contentType==null&&d.push("content-type",b),u=v.stream,p=v.length}else di.isBlobLike(u)&&e.contentType==null&&u.type&&d.push("content-type",u.type);u&&typeof u.read=="function"&&u.read(0);let h=di.bodyLength(u);if(p=h??p,p===null&&(p=e.contentLength),p===0&&!m&&(p=null),ktr(r)&&p>0&&e.contentLength!==null&&e.contentLength!==p){if(t[CIe])return di.errorRequest(t,e,new gk),!1;process.emitWarning(new gk)}let g=t[wN],A=a(v=>{e.aborted||e.completed||(di.errorRequest(t,e,v||new Hrt),di.destroy(u),di.destroy(g,new TN("aborted")))},"abort");try{e.onConnect(A)}catch(v){di.errorRequest(t,e,v)}if(e.aborted)return!1;r==="HEAD"&&(g[qp]=!0),(s||r==="CONNECT")&&(g[qp]=!0),l!=null&&(g[qp]=l),t[Ort]&&g[xtr]++>=t[Ort]&&(g[qp]=!0),c&&(g[AQ]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof o=="string"?y+=`host: ${o}\r
`:y+=t[htr],s?y+=`connection: upgrade\r
upgrade: ${s}\r
`:t[Pte]&&!g[qp]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(d))for(let v=0;v<d.length;v+=2){let b=d[v+0],I=d[v+1];if(Array.isArray(I))for(let _=0;_<I.length;_++)y+=`${b}: ${I[_]}\r
`;else y+=`${b}: ${I}\r
`}return Lrt.sendHeaders.hasSubscribers&&Lrt.sendHeaders.publish({request:e,headers:y,socket:g}),!u||h===0?Urt(A,null,t,e,g,p,y,m):di.isBuffer(u)?Urt(A,u,t,e,g,p,y,m):di.isBlobLike(u)?typeof u.stream=="function"?qrt(A,u.stream(),t,e,g,p,y,m):Btr(A,u,t,e,g,p,y,m):di.isStream(u)?Dtr(A,u,t,e,g,p,y,m):di.isIterable(u)?qrt(A,u,t,e,g,p,y,m):Mn(!1),!0}a(Ptr,"writeH1");function Dtr(t,e,r,n,o,s,c,l){Mn(s!==0||r[Vd]===0,"stream body cannot be pipelined");let u=!1,d=new Mte({abort:t,socket:o,request:n,contentLength:s,client:r,expectsPayload:l,header:c}),p=a(function(A){if(!u)try{!d.write(A)&&this.pause&&this.pause()}catch(y){di.destroy(this,y)}},"onData"),m=a(function(){u||e.resume&&e.resume()},"onDrain"),h=a(function(){if(queueMicrotask(()=>{e.removeListener("error",g)}),!u){let A=new Hrt;queueMicrotask(()=>g(A))}},"onClose"),g=a(function(A){if(!u){if(u=!0,Mn(o.destroyed||o[mw]&&r[Vd]<=1),o.off("drain",m).off("error",g),e.removeListener("data",p).removeListener("end",g).removeListener("close",h),!A)try{d.end()}catch(y){A=y}d.destroy(A),A&&(A.code!=="UND_ERR_INFO"||A.message!=="reset")?di.destroy(e,A):di.destroy(e)}},"onFinished");e.on("data",p).on("end",g).on("error",g).on("close",h),e.resume&&e.resume(),o.on("drain",m).on("error",g),e.errorEmitted??e.errored?setImmediate(()=>g(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>g(null)),(e.closeEmitted??e.closed)&&setImmediate(h)}a(Dtr,"writeStream");function Urt(t,e,r,n,o,s,c,l){try{e?di.isBuffer(e)&&(Mn(s===e.byteLength,"buffer body must have content length"),o.cork(),o.write(`${c}content-length: ${s}\r
\r
`,"latin1"),o.write(e),o.uncork(),n.onBodySent(e),!l&&n.reset!==!1&&(o[qp]=!0)):s===0?o.write(`${c}content-length: 0\r
\r
`,"latin1"):(Mn(s===null,"no body must not have content length"),o.write(`${c}\r
`,"latin1")),n.onRequestSent(),r[pw]()}catch(u){t(u)}}a(Urt,"writeBuffer");async function Btr(t,e,r,n,o,s,c,l){Mn(s===e.size,"blob body must have content length");try{if(s!=null&&s!==e.size)throw new gk;let u=Buffer.from(await e.arrayBuffer());o.cork(),o.write(`${c}content-length: ${s}\r
\r
`,"latin1"),o.write(u),o.uncork(),n.onBodySent(u),n.onRequestSent(),!l&&n.reset!==!1&&(o[qp]=!0),r[pw]()}catch(u){t(u)}}a(Btr,"writeBlob");async function qrt(t,e,r,n,o,s,c,l){Mn(s!==0||r[Vd]===0,"iterator body cannot be pipelined");let u=null;function d(){if(u){let h=u;u=null,h()}}a(d,"onDrain");let p=a(()=>new Promise((h,g)=>{Mn(u===null),o[$h]?g(o[$h]):u=h}),"waitForDrain");o.on("close",d).on("drain",d);let m=new Mte({abort:t,socket:o,request:n,contentLength:s,client:r,expectsPayload:l,header:c});try{for await(let h of e){if(o[$h])throw o[$h];m.write(h)||await p()}m.end()}catch(h){m.destroy(h)}finally{o.off("close",d).off("drain",d)}}a(qrt,"writeIterable");var Mte=class{static{a(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:o,client:s,expectsPayload:c,header:l}){this.socket=r,this.request=n,this.contentLength=o,this.client=s,this.bytesWritten=0,this.expectsPayload=c,this.header=l,this.abort=e,r[mw]=!0}write(e){let{socket:r,request:n,contentLength:o,client:s,bytesWritten:c,expectsPayload:l,header:u}=this;if(r[$h])throw r[$h];if(r.destroyed)return!1;let d=Buffer.byteLength(e);if(!d)return!0;if(o!==null&&c+d>o){if(s[CIe])throw new gk;process.emitWarning(new gk)}r.cork(),c===0&&(!l&&n.reset!==!1&&(r[qp]=!0),o===null?r.write(`${u}transfer-encoding: chunked\r
`,"latin1"):r.write(`${u}content-length: ${o}\r
\r
`,"latin1")),o===null&&r.write(`\r
${d.toString(16)}\r
`,"latin1"),this.bytesWritten+=d;let p=r.write(e);return r.uncork(),n.onBodySent(e),p||r[Cc].timeout&&r[Cc].timeoutType===_N&&r[Cc].timeout.refresh&&r[Cc].timeout.refresh(),p}end(){let{socket:e,contentLength:r,client:n,bytesWritten:o,expectsPayload:s,header:c,request:l}=this;if(l.onRequestSent(),e[mw]=!1,e[$h])throw e[$h];if(!e.destroyed){if(o===0?s?e.write(`${c}content-length: 0\r
\r
`,"latin1"):e.write(`${c}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&o!==r){if(n[CIe])throw new gk;process.emitWarning(new gk)}e[Cc].timeout&&e[Cc].timeoutType===_N&&e[Cc].timeout.refresh&&e[Cc].timeout.refresh(),n[pw]()}}destroy(e){let{socket:r,client:n,abort:o}=this;r[mw]=!1,e&&(Mn(n[Vd]<=1,"pipeline should only contain this request"),o(e))}};jrt.exports=Str});var ent=W((vgi,Zrt)=>{"use strict";f();var jh=require("node:assert"),{pipeline:Ntr}=require("node:stream"),ho=ji(),{RequestContentLengthMismatchError:bIe,RequestAbortedError:Vrt,SocketError:yQ,InformationalError:IIe}=Xo(),{kUrl:Lte,kReset:Ote,kClient:SN,kRunning:Qte,kPending:Mtr,kQueue:hw,kPendingIdx:TIe,kRunningIdx:zA,kError:YA,kSocket:bu,kStrictContentLength:Ltr,kOnError:wIe,kMaxConcurrentStreams:Xrt,kHTTP2Session:KA,kResume:gw,kSize:Ftr,kHTTPContext:Otr}=Ua(),Yx=Symbol("open streams"),zrt,Krt=!1,Fte;try{Fte=require("node:http2")}catch{Fte={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:Qtr,HTTP2_HEADER_METHOD:Utr,HTTP2_HEADER_PATH:qtr,HTTP2_HEADER_SCHEME:Htr,HTTP2_HEADER_CONTENT_LENGTH:Wtr,HTTP2_HEADER_EXPECT:$tr,HTTP2_HEADER_STATUS:jtr}}=Fte;function Gtr(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let o of n)e.push(Buffer.from(r),Buffer.from(o));else e.push(Buffer.from(r),Buffer.from(n));return e}a(Gtr,"parseH2Headers");async function Vtr(t,e){t[bu]=e,Krt||(Krt=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=Fte.connect(t[Lte],{createConnection:a(()=>e,"createConnection"),peerMaxConcurrentStreams:t[Xrt]});r[Yx]=0,r[SN]=t,r[bu]=e,ho.addListener(r,"error",Ktr),ho.addListener(r,"frameError",Ytr),ho.addListener(r,"end",Jtr),ho.addListener(r,"goaway",Xtr),ho.addListener(r,"close",function(){let{[SN]:o}=this,{[bu]:s}=o,c=this[bu][YA]||this[YA]||new yQ("closed",ho.getSocketInfo(s));if(o[KA]=null,o.destroyed){jh(o[Mtr]===0);let l=o[hw].splice(o[zA]);for(let u=0;u<l.length;u++){let d=l[u];ho.errorRequest(o,d,c)}}}),r.unref(),t[KA]=r,e[KA]=r,ho.addListener(e,"error",function(o){jh(o.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[YA]=o,this[SN][wIe](o)}),ho.addListener(e,"end",function(){ho.destroy(this,new yQ("other side closed",ho.getSocketInfo(this)))}),ho.addListener(e,"close",function(){let o=this[YA]||new yQ("closed",ho.getSocketInfo(this));t[bu]=null,this[KA]!=null&&this[KA].destroy(o),t[TIe]=t[zA],jh(t[Qte]===0),t.emit("disconnect",t[Lte],[t],o),t[gw]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...o){return trr(t,...o)},resume(){ztr(t)},destroy(o,s){n?queueMicrotask(s):e.destroy(o).on("close",s)},get destroyed(){return e.destroyed},busy(){return!1}}}a(Vtr,"connectH2");function ztr(t){let e=t[bu];e?.destroyed===!1&&(t[Ftr]===0&&t[Xrt]===0?(e.unref(),t[KA].unref()):(e.ref(),t[KA].ref()))}a(ztr,"resumeH2");function Ktr(t){jh(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[bu][YA]=t,this[SN][wIe](t)}a(Ktr,"onHttp2SessionError");function Ytr(t,e,r){if(r===0){let n=new IIe(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[bu][YA]=n,this[SN][wIe](n)}}a(Ytr,"onHttp2FrameError");function Jtr(){let t=new yQ("other side closed",ho.getSocketInfo(this[bu]));this.destroy(t),ho.destroy(this[bu],t)}a(Jtr,"onHttp2SessionEnd");function Xtr(t){let e=this[YA]||new yQ(`HTTP/2: "GOAWAY" frame received with code ${t}`,ho.getSocketInfo(this)),r=this[SN];if(r[bu]=null,r[Otr]=null,this[KA]!=null&&(this[KA].destroy(e),this[KA]=null),ho.destroy(this[bu],e),r[zA]<r[hw].length){let n=r[hw][r[zA]];r[hw][r[zA]++]=null,ho.errorRequest(r,n,e),r[TIe]=r[zA]}jh(r[Qte]===0),r.emit("disconnect",r[Lte],[r],e),r[gw]()}a(Xtr,"onHTTP2GoAway");function Ztr(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}a(Ztr,"shouldSendContentLength");function trr(t,e){let r=t[KA],{method:n,path:o,host:s,upgrade:c,expectContinue:l,signal:u,headers:d}=e,{body:p}=e;if(c)return ho.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let m={};for(let k=0;k<d.length;k+=2){let N=d[k+0],F=d[k+1];if(Array.isArray(F))for(let O=0;O<F.length;O++)m[N]?m[N]+=`,${F[O]}`:m[N]=F[O];else m[N]=F}let h,{hostname:g,port:A}=t[Lte];m[Qtr]=s||`${g}${A?`:${A}`:""}`,m[Utr]=n;let y=a(k=>{e.aborted||e.completed||(k=k||new Vrt,ho.errorRequest(t,e,k),h!=null&&ho.destroy(h,k),ho.destroy(p,k),t[hw][t[zA]++]=null,t[gw]())},"abort");try{e.onConnect(y)}catch(k){ho.errorRequest(t,e,k)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),h=r.request(m,{endStream:!1,signal:u}),h.id&&!h.pending?(e.onUpgrade(null,null,h),++r[Yx],t[hw][t[zA]++]=null):h.once("ready",()=>{e.onUpgrade(null,null,h),++r[Yx],t[hw][t[zA]++]=null}),h.once("close",()=>{r[Yx]-=1,r[Yx]===0&&r.unref()}),!0;m[qtr]=o,m[Htr]="https";let v=n==="PUT"||n==="POST"||n==="PATCH";p&&typeof p.read=="function"&&p.read(0);let b=ho.bodyLength(p);if(ho.isFormDataLike(p)){zrt??=IN().extractBody;let[k,N]=zrt(p);m["content-type"]=N,p=k.stream,b=k.length}if(b==null&&(b=e.contentLength),(b===0||!v)&&(b=null),Ztr(n)&&b>0&&e.contentLength!=null&&e.contentLength!==b){if(t[Ltr])return ho.errorRequest(t,e,new bIe),!1;process.emitWarning(new bIe)}b!=null&&(jh(p,"no body must not have content length"),m[Wtr]=`${b}`),r.ref();let I=n==="GET"||n==="HEAD"||p===null;return l?(m[$tr]="100-continue",h=r.request(m,{endStream:I,signal:u}),h.once("continue",_)):(h=r.request(m,{endStream:I,signal:u}),_()),++r[Yx],h.once("response",k=>{let{[jtr]:N,...F}=k;if(e.onResponseStarted(),e.aborted){let O=new Vrt;ho.errorRequest(t,e,O),ho.destroy(h,O);return}e.onHeaders(Number(N),Gtr(F),h.resume.bind(h),"")===!1&&h.pause(),h.on("data",O=>{e.onData(O)===!1&&h.pause()})}),h.once("end",()=>{(h.state?.state==null||h.state.state<6)&&e.onComplete([]),r[Yx]===0&&r.unref(),y(new IIe("HTTP/2: stream half-closed (remote)")),t[hw][t[zA]++]=null,t[TIe]=t[zA],t[gw]()}),h.once("close",()=>{r[Yx]-=1,r[Yx]===0&&r.unref()}),h.once("error",function(k){y(k)}),h.once("frameError",(k,N)=>{y(new IIe(`HTTP/2: "frameError" received - type ${k}, code ${N}`))}),!0;function _(){!p||b===0?Yrt(y,h,null,t,e,t[bu],b,v):ho.isBuffer(p)?Yrt(y,h,p,t,e,t[bu],b,v):ho.isBlobLike(p)?typeof p.stream=="function"?Jrt(y,h,p.stream(),t,e,t[bu],b,v):nrr(y,h,p,t,e,t[bu],b,v):ho.isStream(p)?rrr(y,t[bu],v,h,p,t,e,b):ho.isIterable(p)?Jrt(y,h,p,t,e,t[bu],b,v):jh(!1)}a(_,"writeBodyH2")}a(trr,"writeH2");function Yrt(t,e,r,n,o,s,c,l){try{r!=null&&ho.isBuffer(r)&&(jh(c===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),o.onBodySent(r)),l||(s[Ote]=!0),o.onRequestSent(),n[gw]()}catch(u){t(u)}}a(Yrt,"writeBuffer");function rrr(t,e,r,n,o,s,c,l){jh(l!==0||s[Qte]===0,"stream body cannot be pipelined");let u=Ntr(o,n,p=>{p?(ho.destroy(u,p),t(p)):(ho.removeAllListeners(u),c.onRequestSent(),r||(e[Ote]=!0),s[gw]())});ho.addListener(u,"data",d);function d(p){c.onBodySent(p)}a(d,"onPipeData")}a(rrr,"writeStream");async function nrr(t,e,r,n,o,s,c,l){jh(c===r.size,"blob body must have content length");try{if(c!=null&&c!==r.size)throw new bIe;let u=Buffer.from(await r.arrayBuffer());e.cork(),e.write(u),e.uncork(),e.end(),o.onBodySent(u),o.onRequestSent(),l||(s[Ote]=!0),n[gw]()}catch(u){t(u)}}a(nrr,"writeBlob");async function Jrt(t,e,r,n,o,s,c,l){jh(c!==0||n[Qte]===0,"iterator body cannot be pipelined");let u=null;function d(){if(u){let m=u;u=null,m()}}a(d,"onDrain");let p=a(()=>new Promise((m,h)=>{jh(u===null),s[YA]?h(s[YA]):u=m}),"waitForDrain");e.on("close",d).on("drain",d);try{for await(let m of r){if(s[YA])throw s[YA];let h=e.write(m);o.onBodySent(m),h||await p()}e.end(),o.onRequestSent(),l||(s[Ote]=!0),n[gw]()}catch(m){t(m)}finally{e.off("close",d).off("drain",d)}}a(Jrt,"writeIterable");Zrt.exports=Vtr});var qte=W((bgi,nnt)=>{"use strict";f();var mv=ji(),{kBodyUsed:CQ}=Ua(),SIe=require("node:assert"),{InvalidArgumentError:irr}=Xo(),orr=require("node:events"),srr=[300,301,302,303,307,308],tnt=Symbol("body"),Ute=class{static{a(this,"BodyAsyncIterable")}constructor(e){this[tnt]=e,this[CQ]=!1}async*[Symbol.asyncIterator](){SIe(!this[CQ],"disturbed"),this[CQ]=!0,yield*this[tnt]}},_Ie=class{static{a(this,"RedirectHandler")}constructor(e,r,n,o){if(r!=null&&(!Number.isInteger(r)||r<0))throw new irr("maxRedirections must be a positive number");mv.validateHandler(o,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=o,this.history=[],this.redirectionLimitReached=!1,mv.isStream(this.opts.body)?(mv.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){SIe(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[CQ]=!1,orr.prototype.on.call(this.opts.body,"data",function(){this[CQ]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new Ute(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&mv.isIterable(this.opts.body)&&(this.opts.body=new Ute(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,o){if(this.location=this.history.length>=this.maxRedirections||mv.isDisturbed(this.opts.body)?null:arr(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,o);let{origin:s,pathname:c,search:l}=mv.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),u=l?`${c}${l}`:c;this.opts.headers=crr(this.opts.headers,e===303,this.opts.origin!==s),this.opts.path=u,this.opts.origin=s,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function arr(t,e){if(srr.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&mv.headerNameToString(e[r])==="location")return e[r+1]}a(arr,"parseLocation");function rnt(t,e,r){if(t.length===4)return mv.headerNameToString(t)==="host";if(e&&mv.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=mv.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}a(rnt,"shouldRemoveHeader");function crr(t,e,r){let n=[];if(Array.isArray(t))for(let o=0;o<t.length;o+=2)rnt(t[o],e,r)||n.push(t[o],t[o+1]);else if(t&&typeof t=="object")for(let o of Object.keys(t))rnt(o,e,r)||n.push(o,t[o]);else SIe(t==null,"headers must be an object or an array");return n}a(crr,"cleanRequestHeaders");nnt.exports=_Ie});var Hte=W((wgi,int)=>{"use strict";f();var lrr=qte();function urr({maxRedirections:t}){return e=>a(function(n,o){let{maxRedirections:s=t}=n;if(!s)return e(n,o);let c=new lrr(e,s,n,o);return n={...n,maxRedirections:0},e(n,c)},"Intercept")}a(urr,"createRedirectInterceptor");int.exports=urr});var wQ=W((Rgi,mnt)=>{"use strict";f();var Jx=require("node:assert"),unt=require("node:net"),drr=require("node:http"),Ak=ji(),{channels:RN}=dN(),frr=xtt(),prr=hN(),{InvalidArgumentError:Vc,InformationalError:mrr,ClientDestroyedError:hrr}=Xo(),grr=sQ(),{kUrl:hv,kServerName:Aw,kClient:Arr,kBusy:RIe,kConnect:yrr,kResuming:yk,kRunning:IQ,kPending:TQ,kSize:bQ,kQueue:JA,kConnected:Crr,kConnecting:kN,kNeedDrain:Cw,kKeepAliveDefaultTimeout:ont,kHostHeader:vrr,kPendingIdx:XA,kRunningIdx:Xx,kError:xrr,kPipelining:Wte,kKeepAliveTimeoutValue:Err,kMaxHeadersSize:brr,kKeepAliveMaxTimeout:Irr,kKeepAliveTimeoutThreshold:Trr,kHeadersTimeout:wrr,kBodyTimeout:_rr,kStrictContentLength:Srr,kConnector:vQ,kMaxRedirections:Rrr,kMaxRequests:kIe,kCounter:krr,kClose:Prr,kDestroy:Drr,kDispatch:Brr,kInterceptors:snt,kLocalAddress:xQ,kMaxResponseSize:Nrr,kOnError:Mrr,kHTTPContext:zc,kMaxConcurrentStreams:Lrr,kResume:EQ}=Ua(),Frr=Grt(),Orr=ent(),ant=!1,yw=Symbol("kClosedResolve"),cnt=a(()=>{},"noop");function dnt(t){return t[Wte]??t[zc]?.defaultPipelining??1}a(dnt,"getPipelining");var PIe=class extends prr{static{a(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:o,socketTimeout:s,requestTimeout:c,connectTimeout:l,bodyTimeout:u,idleTimeout:d,keepAlive:p,keepAliveTimeout:m,maxKeepAliveTimeout:h,keepAliveMaxTimeout:g,keepAliveTimeoutThreshold:A,socketPath:y,pipelining:v,tls:b,strictContentLength:I,maxCachedSessions:_,maxRedirections:k,connect:N,maxRequestsPerClient:F,localAddress:O,maxResponseSize:Y,autoSelectFamily:z,autoSelectFamilyAttemptTimeout:V,maxConcurrentStreams:U,allowH2:H}={}){if(super(),p!==void 0)throw new Vc("unsupported keepAlive, use pipelining=0 instead");if(s!==void 0)throw new Vc("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(c!==void 0)throw new Vc("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(d!==void 0)throw new Vc("unsupported idleTimeout, use keepAliveTimeout instead");if(h!==void 0)throw new Vc("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new Vc("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new Vc("invalid socketPath");if(l!=null&&(!Number.isFinite(l)||l<0))throw new Vc("invalid connectTimeout");if(m!=null&&(!Number.isFinite(m)||m<=0))throw new Vc("invalid keepAliveTimeout");if(g!=null&&(!Number.isFinite(g)||g<=0))throw new Vc("invalid keepAliveMaxTimeout");if(A!=null&&!Number.isFinite(A))throw new Vc("invalid keepAliveTimeoutThreshold");if(o!=null&&(!Number.isInteger(o)||o<0))throw new Vc("headersTimeout must be a positive integer or zero");if(u!=null&&(!Number.isInteger(u)||u<0))throw new Vc("bodyTimeout must be a positive integer or zero");if(N!=null&&typeof N!="function"&&typeof N!="object")throw new Vc("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new Vc("maxRedirections must be a positive number");if(F!=null&&(!Number.isInteger(F)||F<0))throw new Vc("maxRequestsPerClient must be a positive number");if(O!=null&&(typeof O!="string"||unt.isIP(O)===0))throw new Vc("localAddress must be valid string IP address");if(Y!=null&&(!Number.isInteger(Y)||Y<-1))throw new Vc("maxResponseSize must be a positive number");if(V!=null&&(!Number.isInteger(V)||V<-1))throw new Vc("autoSelectFamilyAttemptTimeout must be a positive number");if(H!=null&&typeof H!="boolean")throw new Vc("allowH2 must be a valid boolean value");if(U!=null&&(typeof U!="number"||U<1))throw new Vc("maxConcurrentStreams must be a positive integer, greater than 0");typeof N!="function"&&(N=grr({...b,maxCachedSessions:_,allowH2:H,socketPath:y,timeout:l,...z?{autoSelectFamily:z,autoSelectFamilyAttemptTimeout:V}:void 0,...N})),r?.Client&&Array.isArray(r.Client)?(this[snt]=r.Client,ant||(ant=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[snt]=[Qrr({maxRedirections:k})],this[hv]=Ak.parseOrigin(e),this[vQ]=N,this[Wte]=v??1,this[brr]=n||drr.maxHeaderSize,this[ont]=m??4e3,this[Irr]=g??6e5,this[Trr]=A??2e3,this[Err]=this[ont],this[Aw]=null,this[xQ]=O??null,this[yk]=0,this[Cw]=0,this[vrr]=`host: ${this[hv].hostname}${this[hv].port?`:${this[hv].port}`:""}\r
`,this[_rr]=u??3e5,this[wrr]=o??3e5,this[Srr]=I??!0,this[Rrr]=k,this[kIe]=F,this[yw]=null,this[Nrr]=Y>-1?Y:-1,this[Lrr]=U??100,this[zc]=null,this[JA]=[],this[Xx]=0,this[XA]=0,this[EQ]=ee=>DIe(this,ee),this[Mrr]=ee=>fnt(this,ee)}get pipelining(){return this[Wte]}set pipelining(e){this[Wte]=e,this[EQ](!0)}get[TQ](){return this[JA].length-this[XA]}get[IQ](){return this[XA]-this[Xx]}get[bQ](){return this[JA].length-this[Xx]}get[Crr](){return!!this[zc]&&!this[kN]&&!this[zc].destroyed}get[RIe](){return!!(this[zc]?.busy(null)||this[bQ]>=(dnt(this)||1)||this[TQ]>0)}[yrr](e){pnt(this),this.once("connect",e)}[Brr](e,r){let n=e.origin||this[hv].origin,o=new frr(n,e,r);return this[JA].push(o),this[yk]||(Ak.bodyLength(o.body)==null&&Ak.isIterable(o.body)?(this[yk]=1,queueMicrotask(()=>DIe(this))):this[EQ](!0)),this[yk]&&this[Cw]!==2&&this[RIe]&&(this[Cw]=2),this[Cw]<2}async[Prr](){return new Promise(e=>{this[bQ]?this[yw]=e:e(null)})}async[Drr](e){return new Promise(r=>{let n=this[JA].splice(this[XA]);for(let s=0;s<n.length;s++){let c=n[s];Ak.errorRequest(this,c,e)}let o=a(()=>{this[yw]&&(this[yw](),this[yw]=null),r(null)},"callback");this[zc]?(this[zc].destroy(e,o),this[zc]=null):queueMicrotask(o),this[EQ]()})}},Qrr=Hte();function fnt(t,e){if(t[IQ]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){Jx(t[XA]===t[Xx]);let r=t[JA].splice(t[Xx]);for(let n=0;n<r.length;n++){let o=r[n];Ak.errorRequest(t,o,e)}Jx(t[bQ]===0)}}a(fnt,"onError");async function pnt(t){Jx(!t[kN]),Jx(!t[zc]);let{host:e,hostname:r,protocol:n,port:o}=t[hv];if(r[0]==="["){let s=r.indexOf("]");Jx(s!==-1);let c=r.substring(1,s);Jx(unt.isIP(c)),r=c}t[kN]=!0,RN.beforeConnect.hasSubscribers&&RN.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:o,version:t[zc]?.version,servername:t[Aw],localAddress:t[xQ]},connector:t[vQ]});try{let s=await new Promise((c,l)=>{t[vQ]({host:e,hostname:r,protocol:n,port:o,servername:t[Aw],localAddress:t[xQ]},(u,d)=>{u?l(u):c(d)})});if(t.destroyed){Ak.destroy(s.on("error",cnt),new hrr);return}Jx(s);try{t[zc]=s.alpnProtocol==="h2"?await Orr(t,s):await Frr(t,s)}catch(c){throw s.destroy().on("error",cnt),c}t[kN]=!1,s[krr]=0,s[kIe]=t[kIe],s[Arr]=t,s[xrr]=null,RN.connected.hasSubscribers&&RN.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:o,version:t[zc]?.version,servername:t[Aw],localAddress:t[xQ]},connector:t[vQ],socket:s}),t.emit("connect",t[hv],[t])}catch(s){if(t.destroyed)return;if(t[kN]=!1,RN.connectError.hasSubscribers&&RN.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:o,version:t[zc]?.version,servername:t[Aw],localAddress:t[xQ]},connector:t[vQ],error:s}),s.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(Jx(t[IQ]===0);t[TQ]>0&&t[JA][t[XA]].servername===t[Aw];){let c=t[JA][t[XA]++];Ak.errorRequest(t,c,s)}else fnt(t,s);t.emit("connectionError",t[hv],[t],s)}t[EQ]()}a(pnt,"connect");function lnt(t){t[Cw]=0,t.emit("drain",t[hv],[t])}a(lnt,"emitDrain");function DIe(t,e){t[yk]!==2&&(t[yk]=2,Urr(t,e),t[yk]=0,t[Xx]>256&&(t[JA].splice(0,t[Xx]),t[XA]-=t[Xx],t[Xx]=0))}a(DIe,"resume");function Urr(t,e){for(;;){if(t.destroyed){Jx(t[TQ]===0);return}if(t[yw]&&!t[bQ]){t[yw](),t[yw]=null;return}if(t[zc]&&t[zc].resume(),t[RIe])t[Cw]=2;else if(t[Cw]===2){e?(t[Cw]=1,queueMicrotask(()=>lnt(t))):lnt(t);continue}if(t[TQ]===0||t[IQ]>=(dnt(t)||1))return;let r=t[JA][t[XA]];if(t[hv].protocol==="https:"&&t[Aw]!==r.servername){if(t[IQ]>0)return;t[Aw]=r.servername,t[zc]?.destroy(new mrr("servername changed"),()=>{t[zc]=null,DIe(t)})}if(t[kN])return;if(!t[zc]){pnt(t);return}if(t[zc].destroyed||t[zc].busy(r))return;!r.aborted&&t[zc].write(r)?t[XA]++:t[JA].splice(t[XA],1)}}a(Urr,"_resume");mnt.exports=PIe});var BIe=W((Bgi,hnt)=>{"use strict";f();var $te=class{static{a(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};hnt.exports=class{static{a(this,"FixedQueue")}constructor(){this.head=this.tail=new $te}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new $te),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var Ant=W((Lgi,gnt)=>{f();var{kFree:qrr,kConnected:Hrr,kPending:Wrr,kQueued:$rr,kRunning:jrr,kSize:Grr}=Ua(),Ck=Symbol("pool"),NIe=class{static{a(this,"PoolStats")}constructor(e){this[Ck]=e}get connected(){return this[Ck][Hrr]}get free(){return this[Ck][qrr]}get pending(){return this[Ck][Wrr]}get queued(){return this[Ck][$rr]}get running(){return this[Ck][jrr]}get size(){return this[Ck][Grr]}};gnt.exports=NIe});var UIe=W((Qgi,_nt)=>{"use strict";f();var Vrr=hN(),zrr=BIe(),{kConnected:MIe,kSize:ynt,kRunning:Cnt,kPending:vnt,kQueued:_Q,kBusy:Krr,kFree:Yrr,kUrl:Jrr,kClose:Xrr,kDestroy:Zrr,kDispatch:enr}=Ua(),tnr=Ant(),Hp=Symbol("clients"),Qf=Symbol("needDrain"),SQ=Symbol("queue"),LIe=Symbol("closed resolve"),FIe=Symbol("onDrain"),xnt=Symbol("onConnect"),Ent=Symbol("onDisconnect"),bnt=Symbol("onConnectionError"),OIe=Symbol("get dispatcher"),Tnt=Symbol("add client"),wnt=Symbol("remove client"),Int=Symbol("stats"),QIe=class extends Vrr{static{a(this,"PoolBase")}constructor(){super(),this[SQ]=new zrr,this[Hp]=[],this[_Q]=0;let e=this;this[FIe]=a(function(n,o){let s=e[SQ],c=!1;for(;!c;){let l=s.shift();if(!l)break;e[_Q]--,c=!this.dispatch(l.opts,l.handler)}this[Qf]=c,!this[Qf]&&e[Qf]&&(e[Qf]=!1,e.emit("drain",n,[e,...o])),e[LIe]&&s.isEmpty()&&Promise.all(e[Hp].map(l=>l.close())).then(e[LIe])},"onDrain"),this[xnt]=(r,n)=>{e.emit("connect",r,[e,...n])},this[Ent]=(r,n,o)=>{e.emit("disconnect",r,[e,...n],o)},this[bnt]=(r,n,o)=>{e.emit("connectionError",r,[e,...n],o)},this[Int]=new tnr(this)}get[Krr](){return this[Qf]}get[MIe](){return this[Hp].filter(e=>e[MIe]).length}get[Yrr](){return this[Hp].filter(e=>e[MIe]&&!e[Qf]).length}get[vnt](){let e=this[_Q];for(let{[vnt]:r}of this[Hp])e+=r;return e}get[Cnt](){let e=0;for(let{[Cnt]:r}of this[Hp])e+=r;return e}get[ynt](){let e=this[_Q];for(let{[ynt]:r}of this[Hp])e+=r;return e}get stats(){return this[Int]}async[Xrr](){this[SQ].isEmpty()?await Promise.all(this[Hp].map(e=>e.close())):await new Promise(e=>{this[LIe]=e})}async[Zrr](e){for(;;){let r=this[SQ].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[Hp].map(r=>r.destroy(e)))}[enr](e,r){let n=this[OIe]();return n?n.dispatch(e,r)||(n[Qf]=!0,this[Qf]=!this[OIe]()):(this[Qf]=!0,this[SQ].push({opts:e,handler:r}),this[_Q]++),!this[Qf]}[Tnt](e){return e.on("drain",this[FIe]).on("connect",this[xnt]).on("disconnect",this[Ent]).on("connectionError",this[bnt]),this[Hp].push(e),this[Qf]&&queueMicrotask(()=>{this[Qf]&&this[FIe](e[Jrr],[this,e])}),this}[wnt](e){e.close(()=>{let r=this[Hp].indexOf(e);r!==-1&&this[Hp].splice(r,1)}),this[Qf]=this[Hp].some(r=>!r[Qf]&&r.closed!==!0&&r.destroyed!==!0)}};_nt.exports={PoolBase:QIe,kClients:Hp,kNeedDrain:Qf,kAddClient:Tnt,kRemoveClient:wnt,kGetDispatcher:OIe}});var PN=W((Hgi,Pnt)=>{"use strict";f();var{PoolBase:rnr,kClients:jte,kNeedDrain:nnr,kAddClient:inr,kGetDispatcher:onr}=UIe(),snr=wQ(),{InvalidArgumentError:qIe}=Xo(),Snt=ji(),{kUrl:Rnt,kInterceptors:anr}=Ua(),cnr=sQ(),HIe=Symbol("options"),WIe=Symbol("connections"),knt=Symbol("factory");function lnr(t,e){return new snr(t,e)}a(lnr,"defaultFactory");var $Ie=class extends rnr{static{a(this,"Pool")}constructor(e,{connections:r,factory:n=lnr,connect:o,connectTimeout:s,tls:c,maxCachedSessions:l,socketPath:u,autoSelectFamily:d,autoSelectFamilyAttemptTimeout:p,allowH2:m,...h}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new qIe("invalid connections");if(typeof n!="function")throw new qIe("factory must be a function.");if(o!=null&&typeof o!="function"&&typeof o!="object")throw new qIe("connect must be a function or an object");typeof o!="function"&&(o=cnr({...c,maxCachedSessions:l,allowH2:m,socketPath:u,timeout:s,...d?{autoSelectFamily:d,autoSelectFamilyAttemptTimeout:p}:void 0,...o})),this[anr]=h.interceptors?.Pool&&Array.isArray(h.interceptors.Pool)?h.interceptors.Pool:[],this[WIe]=r||null,this[Rnt]=Snt.parseOrigin(e),this[HIe]={...Snt.deepClone(h),connect:o,allowH2:m},this[HIe].interceptors=h.interceptors?{...h.interceptors}:void 0,this[knt]=n,this.on("connectionError",(g,A,y)=>{for(let v of A){let b=this[jte].indexOf(v);b!==-1&&this[jte].splice(b,1)}})}[onr](){for(let e of this[jte])if(!e[nnr])return e;if(!this[WIe]||this[jte].length<this[WIe]){let e=this[knt](this[Rnt],this[HIe]);return this[inr](e),e}}};Pnt.exports=$Ie});var Lnt=W((jgi,Mnt)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:unr,InvalidArgumentError:dnr}=Xo(),{PoolBase:fnr,kClients:zd,kNeedDrain:RQ,kAddClient:pnr,kRemoveClient:mnr,kGetDispatcher:hnr}=UIe(),gnr=PN(),{kUrl:jIe,kInterceptors:Anr}=Ua(),{parseOrigin:Dnt}=ji(),Bnt=Symbol("factory"),Gte=Symbol("options"),Nnt=Symbol("kGreatestCommonDivisor"),vk=Symbol("kCurrentWeight"),xk=Symbol("kIndex"),Gh=Symbol("kWeight"),Vte=Symbol("kMaxWeightPerServer"),zte=Symbol("kErrorPenalty");function ynr(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}a(ynr,"getGreatestCommonDivisor");function Cnr(t,e){return new gnr(t,e)}a(Cnr,"defaultFactory");var GIe=class extends fnr{static{a(this,"BalancedPool")}constructor(e=[],{factory:r=Cnr,...n}={}){if(super(),this[Gte]=n,this[xk]=-1,this[vk]=0,this[Vte]=this[Gte].maxWeightPerServer||100,this[zte]=this[Gte].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new dnr("factory must be a function.");this[Anr]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[Bnt]=r;for(let o of e)this.addUpstream(o);this._updateBalancedPoolStats()}addUpstream(e){let r=Dnt(e).origin;if(this[zd].find(o=>o[jIe].origin===r&&o.closed!==!0&&o.destroyed!==!0))return this;let n=this[Bnt](r,Object.assign({},this[Gte]));this[pnr](n),n.on("connect",()=>{n[Gh]=Math.min(this[Vte],n[Gh]+this[zte])}),n.on("connectionError",()=>{n[Gh]=Math.max(1,n[Gh]-this[zte]),this._updateBalancedPoolStats()}),n.on("disconnect",(...o)=>{let s=o[2];s&&s.code==="UND_ERR_SOCKET"&&(n[Gh]=Math.max(1,n[Gh]-this[zte]),this._updateBalancedPoolStats())});for(let o of this[zd])o[Gh]=this[Vte];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[zd].length;r++)e=ynr(this[zd][r][Gh],e);this[Nnt]=e}removeUpstream(e){let r=Dnt(e).origin,n=this[zd].find(o=>o[jIe].origin===r&&o.closed!==!0&&o.destroyed!==!0);return n&&this[mnr](n),this}get upstreams(){return this[zd].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[jIe].origin)}[hnr](){if(this[zd].length===0)throw new unr;if(!this[zd].find(s=>!s[RQ]&&s.closed!==!0&&s.destroyed!==!0)||this[zd].map(s=>s[RQ]).reduce((s,c)=>s&&c,!0))return;let n=0,o=this[zd].findIndex(s=>!s[RQ]);for(;n++<this[zd].length;){this[xk]=(this[xk]+1)%this[zd].length;let s=this[zd][this[xk]];if(s[Gh]>this[zd][o][Gh]&&!s[RQ]&&(o=this[xk]),this[xk]===0&&(this[vk]=this[vk]-this[Nnt],this[vk]<=0&&(this[vk]=this[Vte])),s[Gh]>=this[vk]&&!s[RQ])return s}return this[vk]=this[zd][o][Gh],this[xk]=o,this[zd][o]}};Mnt.exports=GIe});var DN=W((zgi,Wnt)=>{"use strict";f();var{InvalidArgumentError:Kte}=Xo(),{kClients:vw,kRunning:Fnt,kClose:vnr,kDestroy:xnr,kDispatch:Enr,kInterceptors:bnr}=Ua(),Inr=hN(),Tnr=PN(),wnr=wQ(),_nr=ji(),Snr=Hte(),Ont=Symbol("onConnect"),Qnt=Symbol("onDisconnect"),Unt=Symbol("onConnectionError"),Rnr=Symbol("maxRedirections"),qnt=Symbol("onDrain"),Hnt=Symbol("factory"),VIe=Symbol("options");function knr(t,e){return e&&e.connections===1?new wnr(t,e):new Tnr(t,e)}a(knr,"defaultFactory");var zIe=class extends Inr{static{a(this,"Agent")}constructor({factory:e=knr,maxRedirections:r=0,connect:n,...o}={}){if(super(),typeof e!="function")throw new Kte("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new Kte("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new Kte("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[bnr]=o.interceptors?.Agent&&Array.isArray(o.interceptors.Agent)?o.interceptors.Agent:[Snr({maxRedirections:r})],this[VIe]={..._nr.deepClone(o),connect:n},this[VIe].interceptors=o.interceptors?{...o.interceptors}:void 0,this[Rnr]=r,this[Hnt]=e,this[vw]=new Map,this[qnt]=(s,c)=>{this.emit("drain",s,[this,...c])},this[Ont]=(s,c)=>{this.emit("connect",s,[this,...c])},this[Qnt]=(s,c,l)=>{this.emit("disconnect",s,[this,...c],l)},this[Unt]=(s,c,l)=>{this.emit("connectionError",s,[this,...c],l)}}get[Fnt](){let e=0;for(let r of this[vw].values())e+=r[Fnt];return e}[Enr](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new Kte("opts.origin must be a non-empty string or URL.");let o=this[vw].get(n);return o||(o=this[Hnt](e.origin,this[VIe]).on("drain",this[qnt]).on("connect",this[Ont]).on("disconnect",this[Qnt]).on("connectionError",this[Unt]),this[vw].set(n,o)),o.dispatch(e,r)}async[vnr](){let e=[];for(let r of this[vw].values())e.push(r.close());this[vw].clear(),await Promise.all(e)}async[xnr](e){let r=[];for(let n of this[vw].values())r.push(n.destroy(e));this[vw].clear(),await Promise.all(r)}};Wnt.exports=zIe});var JIe=W((Jgi,Vnt)=>{"use strict";f();var{kProxy:Pnr,kClose:Dnr,kDestroy:Bnr,kInterceptors:Nnr}=Ua(),{URL:kQ}=require("node:url"),Mnr=DN(),Lnr=PN(),Fnr=hN(),{InvalidArgumentError:Xte,RequestAbortedError:Onr,SecureProxyConnectionError:Qnr}=Xo(),$nt=sQ(),Yte=Symbol("proxy agent"),Jte=Symbol("proxy client"),PQ=Symbol("proxy headers"),KIe=Symbol("request tls settings"),jnt=Symbol("proxy tls settings"),Gnt=Symbol("connect endpoint function");function Unr(t){return t==="https:"?443:80}a(Unr,"defaultProtocolPort");function qnr(t,e){return new Lnr(t,e)}a(qnr,"defaultFactory");var Hnr=a(()=>{},"noop"),YIe=class extends Fnr{static{a(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof kQ)&&!e.uri)throw new Xte("Proxy uri is mandatory");let{clientFactory:r=qnr}=e;if(typeof r!="function")throw new Xte("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:o,origin:s,port:c,protocol:l,username:u,password:d,hostname:p}=n;if(this[Pnr]={uri:o,protocol:l},this[Nnr]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[KIe]=e.requestTls,this[jnt]=e.proxyTls,this[PQ]=e.headers||{},e.auth&&e.token)throw new Xte("opts.auth cannot be used in combination with opts.token");e.auth?this[PQ]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[PQ]["proxy-authorization"]=e.token:u&&d&&(this[PQ]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(u)}:${decodeURIComponent(d)}`).toString("base64")}`);let m=$nt({...e.proxyTls});this[Gnt]=$nt({...e.requestTls}),this[Jte]=r(n,{connect:m}),this[Yte]=new Mnr({...e,connect:a(async(h,g)=>{let A=h.host;h.port||(A+=`:${Unr(h.protocol)}`);try{let{socket:y,statusCode:v}=await this[Jte].connect({origin:s,port:c,path:A,signal:h.signal,headers:{...this[PQ],host:h.host},servername:this[jnt]?.servername||p});if(v!==200&&(y.on("error",Hnr).destroy(),g(new Onr(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),h.protocol!=="https:"){g(null,y);return}let b;this[KIe]?b=this[KIe].servername:b=h.servername,this[Gnt]({...h,servername:b,httpSocket:y},g)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?g(new Qnr(y)):g(y)}},"connect")})}dispatch(e,r){let n=Wnr(e.headers);if($nr(n),n&&!("host"in n)&&!("Host"in n)){let{host:o}=new kQ(e.origin);n.host=o}return this[Yte].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new kQ(e):e instanceof kQ?e:new kQ(e.uri)}async[Dnr](){await this[Yte].close(),await this[Jte].close()}async[Bnr](){await this[Yte].destroy(),await this[Jte].destroy()}};function Wnr(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}a(Wnr,"buildHeaders");function $nr(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new Xte("Proxy-Authorization should be sent in ProxyAgent constructor")}a($nr,"throwIfProxyAuthIsSent");Vnt.exports=YIe});var Znt=W((eAi,Xnt)=>{"use strict";f();var jnr=hN(),{kClose:Gnr,kDestroy:Vnr,kClosed:znt,kDestroyed:Knt,kDispatch:znr,kNoProxyAgent:DQ,kHttpProxyAgent:xw,kHttpsProxyAgent:Ek}=Ua(),Ynt=JIe(),Knr=DN(),Ynr={"http:":80,"https:":443},Jnt=!1,XIe=class extends jnr{static{a(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,Jnt||(Jnt=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:o,...s}=e;this[DQ]=new Knr(s);let c=r??process.env.http_proxy??process.env.HTTP_PROXY;c?this[xw]=new Ynt({...s,uri:c}):this[xw]=this[DQ];let l=n??process.env.https_proxy??process.env.HTTPS_PROXY;l?this[Ek]=new Ynt({...s,uri:l}):this[Ek]=this[xw],this.#o()}[znr](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[Gnr](){await this[DQ].close(),this[xw][znt]||await this[xw].close(),this[Ek][znt]||await this[Ek].close()}async[Vnr](e){await this[DQ].destroy(e),this[xw][Knt]||await this[xw].destroy(e),this[Ek][Knt]||await this[Ek].destroy(e)}#n(e){let{protocol:r,host:n,port:o}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),o=Number.parseInt(o,10)||Ynr[r]||0,this.#r(n,o)?r==="https:"?this[Ek]:this[xw]:this[DQ]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let o=this.#t[n];if(!(o.port&&o.port!==r)){if(/^[.*]/.test(o.hostname)){if(e.endsWith(o.hostname.replace(/^\*/,"")))return!1}else if(e===o.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let o=0;o<r.length;o++){let s=r[o];if(!s)continue;let c=s.match(/^(.+):(\d+)$/);n.push({hostname:(c?c[1]:s).toLowerCase(),port:c?Number.parseInt(c[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};Xnt.exports=XIe});var Zte=W((nAi,nit)=>{"use strict";f();var BN=require("node:assert"),{kRetryHandlerDefaultRetry:eit}=Ua(),{RequestRetryError:BQ}=Xo(),{isDisturbed:tit,parseHeaders:Jnr,parseRangeHeader:rit,wrapRequestBody:Xnr}=ji();function Znr(t){let e=Date.now();return new Date(t).getTime()-e}a(Znr,"calculateRetryAfterHeader");var ZIe=class t{static{a(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...o}=e,{retry:s,maxRetries:c,maxTimeout:l,minTimeout:u,timeoutFactor:d,methods:p,errorCodes:m,retryAfter:h,statusCodes:g}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...o,body:Xnr(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:s??t[eit],retryAfter:h??!0,maxTimeout:l??30*1e3,minTimeout:u??500,timeoutFactor:d??2,maxRetries:c??5,methods:p??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:g??[500,502,503,504,429],errorCodes:m??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(A=>{this.aborted=!0,this.abort?this.abort(A):this.reason=A})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[eit](e,{state:r,opts:n},o){let{statusCode:s,code:c,headers:l}=e,{method:u,retryOptions:d}=n,{maxRetries:p,minTimeout:m,maxTimeout:h,timeoutFactor:g,statusCodes:A,errorCodes:y,methods:v}=d,{counter:b}=r;if(c&&c!=="UND_ERR_REQ_RETRY"&&!y.includes(c)){o(e);return}if(Array.isArray(v)&&!v.includes(u)){o(e);return}if(s!=null&&Array.isArray(A)&&!A.includes(s)){o(e);return}if(b>p){o(e);return}let I=l?.["retry-after"];I&&(I=Number(I),I=Number.isNaN(I)?Znr(I):I*1e3);let _=I>0?Math.min(I,h):Math.min(m*g**(b-1),h);setTimeout(()=>o(null),_)}onHeaders(e,r,n,o){let s=Jnr(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,o):(this.abort(new BQ("Request failed",e,{headers:s,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new BQ("server does not support the range header and the payload was partially consumed",e,{headers:s,data:{count:this.retryCount}})),!1;let l=rit(s["content-range"]);if(!l)return this.abort(new BQ("Content-Range mismatch",e,{headers:s,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==s.etag)return this.abort(new BQ("ETag mismatch",e,{headers:s,data:{count:this.retryCount}})),!1;let{start:u,size:d,end:p=d-1}=l;return BN(this.start===u,"content-range mismatch"),BN(this.end==null||this.end===p,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let l=rit(s["content-range"]);if(l==null)return this.handler.onHeaders(e,r,n,o);let{start:u,size:d,end:p=d-1}=l;BN(u!=null&&Number.isFinite(u),"content-range mismatch"),BN(p!=null&&Number.isFinite(p),"invalid content-length"),this.start=u,this.end=p}if(this.end==null){let l=s["content-length"];this.end=l!=null?Number(l)-1:null}return BN(Number.isFinite(this.start)),BN(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=s.etag!=null?s.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,o)}let c=new BQ("Request failed",e,{headers:s,data:{count:this.retryCount}});return this.abort(c),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||tit(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||tit(this.opts.body))return this.handler.onError(n);if(this.start!==0){let o={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(o["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...o}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(o){this.handler.onError(o)}}a(r,"onRetry")}};nit.exports=ZIe});var oit=W((sAi,iit)=>{"use strict";f();var eir=iQ(),tir=Zte(),eTe=class extends eir{static{a(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new tir({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};iit.exports=eTe});var sTe=W((lAi,mit)=>{"use strict";f();var uit=require("node:assert"),{Readable:rir}=require("node:stream"),{RequestAbortedError:dit,NotSupportedError:nir,InvalidArgumentError:iir,AbortError:tTe}=Xo(),fit=ji(),{ReadableStreamFrom:oir}=ji(),im=Symbol("kConsume"),NQ=Symbol("kReading"),Ew=Symbol("kBody"),sit=Symbol("kAbort"),pit=Symbol("kContentType"),ait=Symbol("kContentLength"),sir=a(()=>{},"noop"),rTe=class extends rir{static{a(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:o,highWaterMark:s=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:s}),this._readableState.dataEmitted=!1,this[sit]=r,this[im]=null,this[Ew]=null,this[pit]=n,this[ait]=o,this[NQ]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new dit),e&&this[sit](),super.destroy(e)}_destroy(e,r){this[NQ]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[NQ]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[NQ]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[im]&&e!==null?(iTe(this[im],e),this[NQ]?super.push(e):!0):super.push(e)}async text(){return MQ(this,"text")}async json(){return MQ(this,"json")}async blob(){return MQ(this,"blob")}async bytes(){return MQ(this,"bytes")}async arrayBuffer(){return MQ(this,"arrayBuffer")}async formData(){throw new nir}get bodyUsed(){return fit.isDisturbed(this)}get body(){return this[Ew]||(this[Ew]=oir(this),this[im]&&(this[Ew].getReader(),uit(this[Ew].locked))),this[Ew]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new iir("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((o,s)=>{this[ait]>r&&this.destroy(new tTe);let c=a(()=>{this.destroy(n.reason??new tTe)},"onAbort");n?.addEventListener("abort",c),this.on("close",function(){n?.removeEventListener("abort",c),n?.aborted?s(n.reason??new tTe):o(null)}).on("error",sir).on("data",function(l){r-=l.length,r<=0&&this.destroy()}).resume()})}};function air(t){return t[Ew]&&t[Ew].locked===!0||t[im]}a(air,"isLocked");function cir(t){return fit.isDisturbed(t)||air(t)}a(cir,"isUnusable");async function MQ(t,e){return uit(!t[im]),new Promise((r,n)=>{if(cir(t)){let o=t._readableState;o.destroyed&&o.closeEmitted===!1?t.on("error",s=>{n(s)}).on("close",()=>{n(new TypeError("unusable"))}):n(o.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[im]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(o){oTe(this[im],o)}).on("close",function(){this[im].body!==null&&oTe(this[im],new dit)}),lir(t[im])})})}a(MQ,"consume");function lir(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let o=r;o<n;o++)iTe(t,e.buffer[o])}else for(let r of e.buffer)iTe(t,r);for(e.endEmitted?lit(this[im]):t.stream.on("end",function(){lit(this[im])}),t.stream.resume();t.stream.read()!=null;);}a(lir,"consumeStart");function nTe(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,o=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(o,n)}a(nTe,"chunksDecode");function cit(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let o=0;o<t.length;++o){let s=t[o];r.set(s,n),n+=s.length}return r}a(cit,"chunksConcat");function lit(t){let{type:e,body:r,resolve:n,stream:o,length:s}=t;try{e==="text"?n(nTe(r,s)):e==="json"?n(JSON.parse(nTe(r,s))):e==="arrayBuffer"?n(cit(r,s).buffer):e==="blob"?n(new Blob(r,{type:o[pit]})):e==="bytes"&&n(cit(r,s)),oTe(t)}catch(c){o.destroy(c)}}a(lit,"consumeEnd");function iTe(t,e){t.length+=e.length,t.body.push(e)}a(iTe,"consumePush");function oTe(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}a(oTe,"consumeFinish");mit.exports={Readable:rTe,chunksDecode:nTe}});var aTe=W((fAi,Cit)=>{f();var uir=require("node:assert"),{ResponseStatusCodeError:hit}=Xo(),{chunksDecode:git}=sTe(),dir=128*1024;async function fir({callback:t,body:e,contentType:r,statusCode:n,statusMessage:o,headers:s}){uir(e);let c=[],l=0;try{for await(let m of e)if(c.push(m),l+=m.length,l>dir){c=[],l=0;break}}catch{c=[],l=0}let u=`Response status code ${n}${o?`: ${o}`:""}`;if(n===204||!r||!l){queueMicrotask(()=>t(new hit(u,n,s)));return}let d=Error.stackTraceLimit;Error.stackTraceLimit=0;let p;try{Ait(r)?p=JSON.parse(git(c,l)):yit(r)&&(p=git(c,l))}catch{}finally{Error.stackTraceLimit=d}queueMicrotask(()=>t(new hit(u,n,s,p)))}a(fir,"getResolveErrorBodyCallback");var Ait=a(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),yit=a(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");Cit.exports={getResolveErrorBodyCallback:fir,isContentTypeApplicationJson:Ait,isContentTypeText:yit}});var Eit=W((hAi,cTe)=>{"use strict";f();var pir=require("node:assert"),{Readable:mir}=sTe(),{InvalidArgumentError:NN,RequestAbortedError:vit}=Xo(),om=ji(),{getResolveErrorBodyCallback:hir}=aTe(),{AsyncResource:gir}=require("node:async_hooks"),ere=class extends gir{static{a(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new NN("invalid opts");let{signal:n,method:o,opaque:s,body:c,onInfo:l,responseHeaders:u,throwOnError:d,highWaterMark:p}=e;try{if(typeof r!="function")throw new NN("invalid callback");if(p&&(typeof p!="number"||p<0))throw new NN("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new NN("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new NN("invalid method");if(l&&typeof l!="function")throw new NN("invalid onInfo callback");super("UNDICI_REQUEST")}catch(m){throw om.isStream(c)&&om.destroy(c.on("error",om.nop),m),m}this.method=o,this.responseHeaders=u||null,this.opaque=s||null,this.callback=r,this.res=null,this.abort=null,this.body=c,this.trailers={},this.context=null,this.onInfo=l||null,this.throwOnError=d,this.highWaterMark=p,this.signal=n,this.reason=null,this.removeAbortListener=null,om.isStream(c)&&c.on("error",m=>{this.onError(m)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new vit:this.removeAbortListener=om.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new vit,this.res?om.destroy(this.res.on("error",om.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}pir(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,o){let{callback:s,opaque:c,abort:l,context:u,responseHeaders:d,highWaterMark:p}=this,m=d==="raw"?om.parseRawHeaders(r):om.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:m});return}let h=d==="raw"?om.parseHeaders(r):m,g=h["content-type"],A=h["content-length"],y=new mir({resume:n,abort:l,contentType:g,contentLength:this.method!=="HEAD"&&A?Number(A):null,highWaterMark:p});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,s!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(hir,null,{callback:s,body:y,contentType:g,statusCode:e,statusMessage:o,headers:m}):this.runInAsyncScope(s,null,null,{statusCode:e,headers:m,trailers:this.trailers,opaque:c,body:y,context:u}))}onData(e){return this.res.push(e)}onComplete(e){om.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:o,opaque:s}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:s})})),r&&(this.res=null,queueMicrotask(()=>{om.destroy(r,e)})),o&&(this.body=null,om.destroy(o,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function xit(t,e){if(e===void 0)return new Promise((r,n)=>{xit.call(this,t,(o,s)=>o?n(o):r(s))});try{this.dispatch(t,new ere(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}a(xit,"request");cTe.exports=xit;cTe.exports.RequestHandler=ere});var LQ=W((yAi,Tit)=>{f();var{addAbortListener:Air}=ji(),{RequestAbortedError:yir}=Xo(),MN=Symbol("kListener"),gv=Symbol("kSignal");function bit(t){t.abort?t.abort(t[gv]?.reason):t.reason=t[gv]?.reason??new yir,Iit(t)}a(bit,"abort");function Cir(t,e){if(t.reason=null,t[gv]=null,t[MN]=null,!!e){if(e.aborted){bit(t);return}t[gv]=e,t[MN]=()=>{bit(t)},Air(t[gv],t[MN])}}a(Cir,"addSignal");function Iit(t){t[gv]&&("removeEventListener"in t[gv]?t[gv].removeEventListener("abort",t[MN]):t[gv].removeListener("abort",t[MN]),t[gv]=null,t[MN]=null)}a(Iit,"removeSignal");Tit.exports={addSignal:Cir,removeSignal:Iit}});var Rit=W((xAi,Sit)=>{"use strict";f();var vir=require("node:assert"),{finished:xir,PassThrough:Eir}=require("node:stream"),{InvalidArgumentError:LN,InvalidReturnValueError:bir}=Xo(),ZA=ji(),{getResolveErrorBodyCallback:Iir}=aTe(),{AsyncResource:Tir}=require("node:async_hooks"),{addSignal:wir,removeSignal:wit}=LQ(),lTe=class extends Tir{static{a(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new LN("invalid opts");let{signal:o,method:s,opaque:c,body:l,onInfo:u,responseHeaders:d,throwOnError:p}=e;try{if(typeof n!="function")throw new LN("invalid callback");if(typeof r!="function")throw new LN("invalid factory");if(o&&typeof o.on!="function"&&typeof o.addEventListener!="function")throw new LN("signal must be an EventEmitter or EventTarget");if(s==="CONNECT")throw new LN("invalid method");if(u&&typeof u!="function")throw new LN("invalid onInfo callback");super("UNDICI_STREAM")}catch(m){throw ZA.isStream(l)&&ZA.destroy(l.on("error",ZA.nop),m),m}this.responseHeaders=d||null,this.opaque=c||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=l,this.onInfo=u||null,this.throwOnError=p||!1,ZA.isStream(l)&&l.on("error",m=>{this.onError(m)}),wir(this,o)}onConnect(e,r){if(this.reason){e(this.reason);return}vir(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,o){let{factory:s,opaque:c,context:l,callback:u,responseHeaders:d}=this,p=d==="raw"?ZA.parseRawHeaders(r):ZA.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}this.factory=null;let m;if(this.throwOnError&&e>=400){let A=(d==="raw"?ZA.parseHeaders(r):p)["content-type"];m=new Eir,this.callback=null,this.runInAsyncScope(Iir,null,{callback:u,body:m,contentType:A,statusCode:e,statusMessage:o,headers:p})}else{if(s===null)return;if(m=this.runInAsyncScope(s,null,{statusCode:e,headers:p,opaque:c,context:l}),!m||typeof m.write!="function"||typeof m.end!="function"||typeof m.on!="function")throw new bir("expected Writable");xir(m,{readable:!1},g=>{let{callback:A,res:y,opaque:v,trailers:b,abort:I}=this;this.res=null,(g||!y.readable)&&ZA.destroy(y,g),this.callback=null,this.runInAsyncScope(A,null,g||null,{opaque:v,trailers:b}),g&&I()})}return m.on("drain",n),this.res=m,(m.writableNeedDrain!==void 0?m.writableNeedDrain:m._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;wit(this),r&&(this.trailers=ZA.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:o,body:s}=this;wit(this),this.factory=null,r?(this.res=null,ZA.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),s&&(this.body=null,ZA.destroy(s,e))}};function _it(t,e,r){if(r===void 0)return new Promise((n,o)=>{_it.call(this,t,e,(s,c)=>s?o(s):n(c))});try{this.dispatch(t,new lTe(t,e,r))}catch(n){if(typeof r!="function")throw n;let o=t?.opaque;queueMicrotask(()=>r(n,{opaque:o}))}}a(_it,"stream");Sit.exports=_it});var Bit=W((IAi,Dit)=>{"use strict";f();var{Readable:Pit,Duplex:_ir,PassThrough:Sir}=require("node:stream"),{InvalidArgumentError:FQ,InvalidReturnValueError:Rir,RequestAbortedError:uTe}=Xo(),Vh=ji(),{AsyncResource:kir}=require("node:async_hooks"),{addSignal:Pir,removeSignal:Dir}=LQ(),kit=require("node:assert"),FN=Symbol("resume"),dTe=class extends Pit{static{a(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[FN]=null}_read(){let{[FN]:e}=this;e&&(this[FN]=null,e())}_destroy(e,r){this._read(),r(e)}},fTe=class extends Pit{static{a(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[FN]=e}_read(){this[FN]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new uTe),r(e)}},pTe=class extends kir{static{a(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new FQ("invalid opts");if(typeof r!="function")throw new FQ("invalid handler");let{signal:n,method:o,opaque:s,onInfo:c,responseHeaders:l}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new FQ("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new FQ("invalid method");if(c&&typeof c!="function")throw new FQ("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=s||null,this.responseHeaders=l||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=c||null,this.req=new dTe().on("error",Vh.nop),this.ret=new _ir({readableObjectMode:e.objectMode,autoDestroy:!0,read:a(()=>{let{body:u}=this;u?.resume&&u.resume()},"read"),write:a((u,d,p)=>{let{req:m}=this;m.push(u,d)||m._readableState.destroyed?p():m[FN]=p},"write"),destroy:a((u,d)=>{let{body:p,req:m,res:h,ret:g,abort:A}=this;!u&&!g._readableState.endEmitted&&(u=new uTe),A&&u&&A(),Vh.destroy(p,u),Vh.destroy(m,u),Vh.destroy(h,u),Dir(this),d(u)},"destroy")}).on("prefinish",()=>{let{req:u}=this;u.push(null)}),this.res=null,Pir(this,n)}onConnect(e,r){let{ret:n,res:o}=this;if(this.reason){e(this.reason);return}kit(!o,"pipeline cannot be retried"),kit(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:o,handler:s,context:c}=this;if(e<200){if(this.onInfo){let u=this.responseHeaders==="raw"?Vh.parseRawHeaders(r):Vh.parseHeaders(r);this.onInfo({statusCode:e,headers:u})}return}this.res=new fTe(n);let l;try{this.handler=null;let u=this.responseHeaders==="raw"?Vh.parseRawHeaders(r):Vh.parseHeaders(r);l=this.runInAsyncScope(s,null,{statusCode:e,headers:u,opaque:o,body:this.res,context:c})}catch(u){throw this.res.on("error",Vh.nop),u}if(!l||typeof l.on!="function")throw new Rir("expected Readable");l.on("data",u=>{let{ret:d,body:p}=this;!d.push(u)&&p.pause&&p.pause()}).on("error",u=>{let{ret:d}=this;Vh.destroy(d,u)}).on("end",()=>{let{ret:u}=this;u.push(null)}).on("close",()=>{let{ret:u}=this;u._readableState.ended||Vh.destroy(u,new uTe)}),this.body=l}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,Vh.destroy(r,e)}};function Bir(t,e){try{let r=new pTe(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new Sir().destroy(r)}}a(Bir,"pipeline");Dit.exports=Bir});var Qit=W((_Ai,Oit)=>{"use strict";f();var{InvalidArgumentError:mTe,SocketError:Nir}=Xo(),{AsyncResource:Mir}=require("node:async_hooks"),Nit=ji(),{addSignal:Lir,removeSignal:Mit}=LQ(),Lit=require("node:assert"),hTe=class extends Mir{static{a(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new mTe("invalid opts");if(typeof r!="function")throw new mTe("invalid callback");let{signal:n,opaque:o,responseHeaders:s}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new mTe("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=s||null,this.opaque=o||null,this.callback=r,this.abort=null,this.context=null,Lir(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}Lit(this.callback),this.abort=e,this.context=null}onHeaders(){throw new Nir("bad upgrade",null)}onUpgrade(e,r,n){Lit(e===101);let{callback:o,opaque:s,context:c}=this;Mit(this),this.callback=null;let l=this.responseHeaders==="raw"?Nit.parseRawHeaders(r):Nit.parseHeaders(r);this.runInAsyncScope(o,null,null,{headers:l,socket:n,opaque:s,context:c})}onError(e){let{callback:r,opaque:n}=this;Mit(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function Fit(t,e){if(e===void 0)return new Promise((r,n)=>{Fit.call(this,t,(o,s)=>o?n(o):r(s))});try{let r=new hTe(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}a(Fit,"upgrade");Oit.exports=Fit});var $it=W((kAi,Wit)=>{"use strict";f();var Fir=require("node:assert"),{AsyncResource:Oir}=require("node:async_hooks"),{InvalidArgumentError:gTe,SocketError:Qir}=Xo(),Uit=ji(),{addSignal:Uir,removeSignal:qit}=LQ(),ATe=class extends Oir{static{a(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new gTe("invalid opts");if(typeof r!="function")throw new gTe("invalid callback");let{signal:n,opaque:o,responseHeaders:s}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new gTe("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=o||null,this.responseHeaders=s||null,this.callback=r,this.abort=null,Uir(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}Fir(this.callback),this.abort=e,this.context=r}onHeaders(){throw new Qir("bad connect",null)}onUpgrade(e,r,n){let{callback:o,opaque:s,context:c}=this;qit(this),this.callback=null;let l=r;l!=null&&(l=this.responseHeaders==="raw"?Uit.parseRawHeaders(r):Uit.parseHeaders(r)),this.runInAsyncScope(o,null,null,{statusCode:e,headers:l,socket:n,opaque:s,context:c})}onError(e){let{callback:r,opaque:n}=this;qit(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function Hit(t,e){if(e===void 0)return new Promise((r,n)=>{Hit.call(this,t,(o,s)=>o?n(o):r(s))});try{let r=new ATe(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}a(Hit,"connect");Wit.exports=Hit});var jit=W((BAi,ON)=>{"use strict";f();ON.exports.request=Eit();ON.exports.stream=Rit();ON.exports.pipeline=Bit();ON.exports.upgrade=Qit();ON.exports.connect=$it()});var CTe=W((MAi,Git)=>{"use strict";f();var{UndiciError:qir}=Xo(),yTe=class t extends qir{static{a(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};Git.exports={MockNotMatchedError:yTe}});var QN=W((OAi,Vit)=>{"use strict";f();Vit.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var OQ=W((UAi,iot)=>{"use strict";f();var{MockNotMatchedError:bk}=CTe(),{kDispatches:tre,kMockAgent:Hir,kOriginalDispatch:Wir,kOrigin:$ir,kGetNetConnect:jir}=QN(),{buildURL:Gir}=ji(),{STATUS_CODES:Vir}=require("node:http"),{types:{isPromise:zir}}=require("node:util");function Zx(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}a(Zx,"matchValue");function Kit(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}a(Kit,"lowerCaseEntries");function Yit(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):Kit(t)[e.toLocaleLowerCase()]}a(Yit,"getHeaderByName");function ETe(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}a(ETe,"buildHeadersFromArray");function Jit(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=ETe(e)),t.headers(e?Kit(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let o=Yit(e,r);if(!Zx(n,o))return!1}return!0}a(Jit,"matchHeaders");function zit(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}a(zit,"safeUrl");function Kir(t,{path:e,method:r,body:n,headers:o}){let s=Zx(t.path,e),c=Zx(t.method,r),l=typeof t.body<"u"?Zx(t.body,n):!0,u=Jit(t,o);return s&&c&&l&&u}a(Kir,"matchKey");function Xit(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}a(Xit,"getResponseData");function Zit(t,e){let r=e.query?Gir(e.path,e.query):e.path,n=typeof r=="string"?zit(r):r,o=t.filter(({consumed:s})=>!s).filter(({path:s})=>Zx(zit(s),n));if(o.length===0)throw new bk(`Mock dispatch not matched for path '${n}'`);if(o=o.filter(({method:s})=>Zx(s,e.method)),o.length===0)throw new bk(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(o=o.filter(({body:s})=>typeof s<"u"?Zx(s,e.body):!0),o.length===0)throw new bk(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(o=o.filter(s=>Jit(s,e.headers)),o.length===0){let s=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new bk(`Mock dispatch not matched for headers '${s}' on path '${n}'`)}return o[0]}a(Zit,"getMockDispatch");function Yir(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},o=typeof r=="function"?{callback:r}:{...r},s={...n,...e,pending:!0,data:{error:null,...o}};return t.push(s),s}a(Yir,"addMockDispatch");function vTe(t,e){let r=t.findIndex(n=>n.consumed?Kir(n,e):!1);r!==-1&&t.splice(r,1)}a(vTe,"deleteMockDispatch");function eot(t){let{path:e,method:r,body:n,headers:o,query:s}=t;return{path:e,method:r,body:n,headers:o,query:s}}a(eot,"buildKey");function xTe(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let o=e[n],s=t[o],c=Buffer.from(`${o}`);if(Array.isArray(s))for(let l=0;l<s.length;++l)r.push(c,Buffer.from(`${s[l]}`));else r.push(c,Buffer.from(`${s}`))}return r}a(xTe,"generateKeyValues");function tot(t){return Vir[t]||"unknown"}a(tot,"getStatusText");async function Jir(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}a(Jir,"getResponse");function rot(t,e){let r=eot(t),n=Zit(this[tre],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:o,data:s,headers:c,trailers:l,error:u},delay:d,persist:p}=n,{timesInvoked:m,times:h}=n;if(n.consumed=!p&&m>=h,n.pending=m<h,u!==null)return vTe(this[tre],r),e.onError(u),!0;typeof d=="number"&&d>0?setTimeout(()=>{g(this[tre])},d):g(this[tre]);function g(y,v=s){let b=Array.isArray(t.headers)?ETe(t.headers):t.headers,I=typeof v=="function"?v({...t,headers:b}):v;if(zir(I)){I.then(F=>g(y,F));return}let _=Xit(I),k=xTe(c),N=xTe(l);e.onConnect?.(F=>e.onError(F),null),e.onHeaders?.(o,k,A,tot(o)),e.onData?.(Buffer.from(_)),e.onComplete?.(N),vTe(y,r)}a(g,"handleReply");function A(){}return a(A,"resume"),!0}a(rot,"mockDispatch");function Xir(){let t=this[Hir],e=this[$ir],r=this[Wir];return a(function(o,s){if(t.isMockActive)try{rot.call(this,o,s)}catch(c){if(c instanceof bk){let l=t[jir]();if(l===!1)throw new bk(`${c.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(not(l,e))r.call(this,o,s);else throw new bk(`${c.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw c}else r.call(this,o,s)},"dispatch")}a(Xir,"buildMockDispatch");function not(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>Zx(n,r.host)))}a(not,"checkNetConnect");function Zir(t){if(t){let{agent:e,...r}=t;return r}}a(Zir,"buildMockOptions");iot.exports={getResponseData:Xit,getMockDispatch:Zit,addMockDispatch:Yir,deleteMockDispatch:vTe,buildKey:eot,generateKeyValues:xTe,matchValue:Zx,getResponse:Jir,getStatusText:tot,mockDispatch:rot,buildMockDispatch:Xir,checkNetConnect:not,buildMockOptions:Zir,getHeaderByName:Yit,buildHeadersFromArray:ETe}});var RTe=W((WAi,STe)=>{"use strict";f();var{getResponseData:eor,buildKey:tor,addMockDispatch:bTe}=OQ(),{kDispatches:rre,kDispatchKey:nre,kDefaultHeaders:ITe,kDefaultTrailers:TTe,kContentLength:wTe,kMockDispatch:ire}=QN(),{InvalidArgumentError:Av}=Xo(),{buildURL:ror}=ji(),UN=class{static{a(this,"MockScope")}constructor(e){this[ire]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Av("waitInMs must be a valid integer > 0");return this[ire].delay=e,this}persist(){return this[ire].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Av("repeatTimes must be a valid integer > 0");return this[ire].times=e,this}},_Te=class{static{a(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new Av("opts must be an object");if(typeof e.path>"u")throw new Av("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=ror(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[nre]=tor(e),this[rre]=r,this[ITe]={},this[TTe]={},this[wTe]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let o=eor(r),s=this[wTe]?{"content-length":o.length}:{},c={...this[ITe],...s,...n.headers},l={...this[TTe],...n.trailers};return{statusCode:e,data:r,headers:c,trailers:l}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new Av("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new Av("responseOptions must be an object")}reply(e){if(typeof e=="function"){let s=a(l=>{let u=e(l);if(typeof u!="object"||u===null)throw new Av("reply options callback must return an object");let d={data:"",responseOptions:{},...u};return this.validateReplyParameters(d),{...this.createMockScopeDispatchData(d)}},"wrappedDefaultsCallback"),c=bTe(this[rre],this[nre],s);return new UN(c)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),o=bTe(this[rre],this[nre],n);return new UN(o)}replyWithError(e){if(typeof e>"u")throw new Av("error must be defined");let r=bTe(this[rre],this[nre],{error:e});return new UN(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new Av("headers must be defined");return this[ITe]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new Av("trailers must be defined");return this[TTe]=e,this}replyContentLength(){return this[wTe]=!0,this}};STe.exports.MockInterceptor=_Te;STe.exports.MockScope=UN});var DTe=W((GAi,dot)=>{"use strict";f();var{promisify:nor}=require("node:util"),ior=wQ(),{buildMockDispatch:oor}=OQ(),{kDispatches:oot,kMockAgent:sot,kClose:aot,kOriginalClose:cot,kOrigin:lot,kOriginalDispatch:sor,kConnected:kTe}=QN(),{MockInterceptor:aor}=RTe(),uot=Ua(),{InvalidArgumentError:cor}=Xo(),PTe=class extends ior{static{a(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new cor("Argument opts.agent must implement Agent");this[sot]=r.agent,this[lot]=e,this[oot]=[],this[kTe]=1,this[sor]=this.dispatch,this[cot]=this.close.bind(this),this.dispatch=oor.call(this),this.close=this[aot]}get[uot.kConnected](){return this[kTe]}intercept(e){return new aor(e,this[oot])}async[aot](){await nor(this[cot])(),this[kTe]=0,this[sot][uot.kClients].delete(this[lot])}};dot.exports=PTe});var MTe=W((KAi,yot)=>{"use strict";f();var{promisify:lor}=require("node:util"),uor=PN(),{buildMockDispatch:dor}=OQ(),{kDispatches:fot,kMockAgent:pot,kClose:mot,kOriginalClose:hot,kOrigin:got,kOriginalDispatch:por,kConnected:BTe}=QN(),{MockInterceptor:mor}=RTe(),Aot=Ua(),{InvalidArgumentError:hor}=Xo(),NTe=class extends uor{static{a(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new hor("Argument opts.agent must implement Agent");this[pot]=r.agent,this[got]=e,this[fot]=[],this[BTe]=1,this[por]=this.dispatch,this[hot]=this.close.bind(this),this.dispatch=dor.call(this),this.close=this[mot]}get[Aot.kConnected](){return this[BTe]}intercept(e){return new mor(e,this[fot])}async[mot](){await lor(this[hot])(),this[BTe]=0,this[pot][Aot.kClients].delete(this[got])}};yot.exports=NTe});var vot=W((ZAi,Cot)=>{"use strict";f();var gor={pronoun:"it",is:"is",was:"was",this:"this"},Aor={pronoun:"they",is:"are",was:"were",this:"these"};Cot.exports=class{static{a(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?gor:Aor,o=r?this.singular:this.plural;return{...n,count:e,noun:o}}}});var Eot=W((nyi,xot)=>{"use strict";f();var{Transform:yor}=require("node:stream"),{Console:Cor}=require("node:console"),vor=process.versions.icu?"\u2705":"Y ",xor=process.versions.icu?"\u274C":"N ";xot.exports=class{static{a(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new yor({transform(r,n,o){o(null,r)}}),this.logger=new Cor({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:o,data:{statusCode:s},persist:c,times:l,timesInvoked:u,origin:d})=>({Method:n,Origin:d,Path:o,"Status code":s,Persistent:c?vor:xor,Invocations:u,Remaining:c?1/0:l-u}));return this.logger.table(r),this.transform.read().toString()}}});var wot=W((syi,Tot)=>{"use strict";f();var{kClients:Ik}=Ua(),Eor=DN(),{kAgent:LTe,kMockAgentSet:ore,kMockAgentGet:bot,kDispatches:FTe,kIsMockActive:sre,kNetConnect:Tk,kGetNetConnect:bor,kOptions:are,kFactory:cre}=QN(),Ior=DTe(),Tor=MTe(),{matchValue:wor,buildMockOptions:_or}=OQ(),{InvalidArgumentError:Iot,UndiciError:Sor}=Xo(),Ror=iQ(),kor=vot(),Por=Eot(),OTe=class extends Ror{static{a(this,"MockAgent")}constructor(e){if(super(e),this[Tk]=!0,this[sre]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new Iot("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new Eor(e);this[LTe]=r,this[Ik]=r[Ik],this[are]=_or(e)}get(e){let r=this[bot](e);return r||(r=this[cre](e),this[ore](e,r)),r}dispatch(e,r){return this.get(e.origin),this[LTe].dispatch(e,r)}async close(){await this[LTe].close(),this[Ik].clear()}deactivate(){this[sre]=!1}activate(){this[sre]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[Tk])?this[Tk].push(e):this[Tk]=[e];else if(typeof e>"u")this[Tk]=!0;else throw new Iot("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[Tk]=!1}get isMockActive(){return this[sre]}[ore](e,r){this[Ik].set(e,r)}[cre](e){let r=Object.assign({agent:this},this[are]);return this[are]&&this[are].connections===1?new Ior(e,r):new Tor(e,r)}[bot](e){let r=this[Ik].get(e);if(r)return r;if(typeof e!="string"){let n=this[cre]("http://localhost:9999");return this[ore](e,n),n}for(let[n,o]of Array.from(this[Ik]))if(o&&typeof n!="string"&&wor(n,e)){let s=this[cre](e);return this[ore](e,s),s[FTe]=o[FTe],s}}[bor](){return this[Tk]}pendingInterceptors(){let e=this[Ik];return Array.from(e.entries()).flatMap(([r,n])=>n[FTe].map(o=>({...o,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new Por}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new kor("interceptor","interceptors").pluralize(r.length);throw new Sor(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};Tot.exports=OTe});var lre=W((lyi,kot)=>{"use strict";f();var _ot=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:Dor}=Xo(),Bor=DN();Rot()===void 0&&Sot(new Bor);function Sot(t){if(!t||typeof t.dispatch!="function")throw new Dor("Argument agent must implement Agent");Object.defineProperty(globalThis,_ot,{value:t,writable:!0,enumerable:!1,configurable:!1})}a(Sot,"setGlobalDispatcher");function Rot(){return globalThis[_ot]}a(Rot,"getGlobalDispatcher");kot.exports={setGlobalDispatcher:Sot,getGlobalDispatcher:Rot}});var ure=W((pyi,Pot)=>{"use strict";f();Pot.exports=class{static{a(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var Bot=W((gyi,Dot)=>{"use strict";f();var Nor=qte();Dot.exports=t=>{let e=t?.maxRedirections;return r=>a(function(o,s){let{maxRedirections:c=e,...l}=o;if(!c)return r(o,s);let u=new Nor(r,c,o,s);return r(l,u)},"redirectInterceptor")}});var Mot=W((Cyi,Not)=>{"use strict";f();var Mor=Zte();Not.exports=t=>e=>a(function(n,o){return e(n,new Mor({...n,retryOptions:{...t,...n.retryOptions}},{handler:o,dispatch:e}))},"retryInterceptor")});var Fot=W((Eyi,Lot)=>{"use strict";f();var Lor=ji(),{InvalidArgumentError:For,RequestAbortedError:Oor}=Xo(),Qor=ure(),QTe=class extends Qor{static{a(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new For("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,o){let c=Lor.parseHeaders(r)["content-length"];if(c!=null&&c>this.#e)throw new Oor(`Response size (${c}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,o)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function Uor({maxSize:t}={maxSize:1024*1024}){return e=>a(function(n,o){let{dumpMaxSize:s=t}=n,c=new QTe({maxSize:s},o);return e(n,c)},"Intercept")}a(Uor,"createDumpInterceptor");Lot.exports=Uor});var Uot=W((Tyi,Qot)=>{"use strict";f();var{isIP:qor}=require("node:net"),{lookup:Hor}=require("node:dns"),Wor=ure(),{InvalidArgumentError:qN,InformationalError:$or}=Xo(),Oot=Math.pow(2,31)-1,UTe=class{static{a(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let o=this.#i.get(e.hostname);if(o==null&&this.full){n(null,e.origin);return}let s={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(o==null)this.lookup(e,s,(c,l)=>{if(c||l==null||l.length===0){n(c??new $or("No DNS entries found"));return}this.setRecords(e,l);let u=this.#i.get(e.hostname),d=this.pick(e,u,s.affinity),p;typeof d.port=="number"?p=`:${d.port}`:e.port!==""?p=`:${e.port}`:p="",n(null,`${e.protocol}//${d.family===6?`[${d.address}]`:d.address}${p}`)});else{let c=this.pick(e,o,s.affinity);if(c==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let l;typeof c.port=="number"?l=`:${c.port}`:e.port!==""?l=`:${e.port}`:l="",n(null,`${e.protocol}//${c.family===6?`[${c.address}]`:c.address}${l}`)}}#n(e,r,n){Hor(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(o,s)=>{if(o)return n(o);let c=new Map;for(let l of s)c.set(`${l.address}:${l.family}`,l);n(null,c.values())})}#r(e,r,n){let o=null,{records:s,offset:c}=r,l;if(this.dualStack?(n==null&&(c==null||c===Oot?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),s[n]!=null&&s[n].ips.length>0?l=s[n]:l=s[n===4?6:4]):l=s[n],l==null||l.ips.length===0)return o;l.offset==null||l.offset===Oot?l.offset=0:l.offset++;let u=l.offset%l.ips.length;return o=l.ips[u]??null,o==null?o:Date.now()-o.timestamp>o.ttl?(l.ips.splice(u,1),this.pick(e,r,n)):o}setRecords(e,r){let n=Date.now(),o={records:{4:null,6:null}};for(let s of r){s.timestamp=n,typeof s.ttl=="number"?s.ttl=Math.min(s.ttl,this.#e):s.ttl=this.#e;let c=o.records[s.family]??{ips:[]};c.ips.push(s),o.records[s.family]=c}this.#i.set(e.hostname,o)}getHandler(e,r){return new qTe(this,e,r)}},qTe=class extends Wor{static{a(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:o},s){super(n),this.#r=r,this.#n=n,this.#t={...s},this.#e=e,this.#i=o}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let o={...this.#t,origin:n};this.#i(o,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};Qot.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new qN("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new qN("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new qN("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new qN("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new qN("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new qN("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},o=new UTe(n);return s=>a(function(l,u){let d=l.origin.constructor===URL?l.origin:new URL(l.origin);return qor(d.hostname)!==0?s(l,u):(o.runLookup(d,l,(p,m)=>{if(p)return u.onError(p);let h=null;h={...l,servername:d.hostname,origin:m,headers:{host:d.hostname,...l.headers}},s(h,o.getHandler({origin:d,dispatch:s,handler:u},l))}),!0)},"dnsInterceptor")}});var wk=W((Syi,Vot)=>{"use strict";f();var{kConstruct:jor}=Ua(),{kEnumerableProperty:HN}=ji(),{iteratorMixin:Gor,isValidHeaderName:QQ,isValidHeaderValue:Hot}=nm(),{webidl:Do}=ld(),HTe=require("node:assert"),dre=require("node:util"),hl=Symbol("headers map"),sm=Symbol("headers map sorted");function qot(t){return t===10||t===13||t===9||t===32}a(qot,"isHTTPWhiteSpaceCharCode");function Wot(t){let e=0,r=t.length;for(;r>e&&qot(t.charCodeAt(r-1));)--r;for(;r>e&&qot(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}a(Wot,"headerValueNormalize");function $ot(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw Do.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});WTe(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)WTe(t,r[n],e[r[n]])}else throw Do.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}a($ot,"fill");function WTe(t,e,r){if(r=Wot(r),QQ(e)){if(!Hot(r))throw Do.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Do.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(Got(t)==="immutable")throw new TypeError("immutable");return $Te(t).append(e,r,!1)}a(WTe,"appendHeader");function jot(t,e){return t[0]<e[0]?-1:1}a(jot,"compareHeaderName");var fre=class t{static{a(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[hl]=new Map(e[hl]),this[sm]=e[sm],this.cookies=e.cookies===null?null:[...e.cookies]):(this[hl]=new Map(e),this[sm]=null)}contains(e,r){return this[hl].has(r?e:e.toLowerCase())}clear(){this[hl].clear(),this[sm]=null,this.cookies=null}append(e,r,n){this[sm]=null;let o=n?e:e.toLowerCase(),s=this[hl].get(o);if(s){let c=o==="cookie"?"; ":", ";this[hl].set(o,{name:s.name,value:`${s.value}${c}${r}`})}else this[hl].set(o,{name:e,value:r});o==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[sm]=null;let o=n?e:e.toLowerCase();o==="set-cookie"&&(this.cookies=[r]),this[hl].set(o,{name:e,value:r})}delete(e,r){this[sm]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[hl].delete(e)}get(e,r){return this[hl].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[hl])yield[e,r]}get entries(){let e={};if(this[hl].size!==0)for(let{name:r,value:n}of this[hl].values())e[r]=n;return e}rawValues(){return this[hl].values()}get entriesList(){let e=[];if(this[hl].size!==0)for(let{0:r,1:{name:n,value:o}}of this[hl])if(r==="set-cookie")for(let s of this.cookies)e.push([n,s]);else e.push([n,o]);return e}toSortedArray(){let e=this[hl].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[hl][Symbol.iterator](),o=n.next().value;r[0]=[o[0],o[1].value],HTe(o[1].value!==null);for(let s=1,c=0,l=0,u=0,d=0,p,m;s<e;++s){for(m=n.next().value,p=r[s]=[m[0],m[1].value],HTe(p[1]!==null),u=0,l=s;u<l;)d=u+(l-u>>1),r[d][0]<=p[0]?u=d+1:l=d;if(s!==d){for(c=s;c>u;)r[c]=r[--c];r[u]=p}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:o,1:{value:s}}of this[hl])r[n++]=[o,s],HTe(s!==null);return r.sort(jot)}}},ey=class t{static{a(this,"Headers")}#e;#t;constructor(e=void 0){Do.util.markAsUncloneable(this),e!==jor&&(this.#t=new fre,this.#e="none",e!==void 0&&(e=Do.converters.HeadersInit(e,"Headers contructor","init"),$ot(this,e)))}append(e,r){Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=Do.converters.ByteString(e,n,"name"),r=Do.converters.ByteString(r,n,"value"),WTe(this,e,r)}delete(e){if(Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,1,"Headers.delete"),e=Do.converters.ByteString(e,"Headers.delete","name"),!QQ(e))throw Do.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=Do.converters.ByteString(e,r,"name"),!QQ(e))throw Do.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=Do.converters.ByteString(e,r,"name"),!QQ(e))throw Do.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=Do.converters.ByteString(e,n,"name"),r=Do.converters.ByteString(r,n,"value"),r=Wot(r),QQ(e)){if(!Hot(r))throw Do.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Do.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){Do.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[sm](){if(this.#t[sm])return this.#t[sm];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[sm]=r;for(let o=0;o<r.length;++o){let{0:s,1:c}=r[o];if(s==="set-cookie")for(let l=0;l<n.length;++l)e.push([s,n[l]]);else e.push([s,c])}return this.#t[sm]=e}[dre.inspect.custom](e,r){return r.depth??=e,`Headers ${dre.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:Got,setHeadersGuard:Vor,getHeadersList:$Te,setHeadersList:zor}=ey;Reflect.deleteProperty(ey,"getHeadersGuard");Reflect.deleteProperty(ey,"setHeadersGuard");Reflect.deleteProperty(ey,"getHeadersList");Reflect.deleteProperty(ey,"setHeadersList");Gor("Headers",ey,sm,0,1);Object.defineProperties(ey.prototype,{append:HN,delete:HN,get:HN,has:HN,set:HN,getSetCookie:HN,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[dre.inspect.custom]:{enumerable:!1}});Do.converters.HeadersInit=function(t,e,r){if(Do.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!dre.types.isProxy(t)&&n===ey.prototype.entries)try{return $Te(t).entriesList}catch{}return typeof n=="function"?Do.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):Do.converters["record<ByteString, ByteString>"](t,e,r)}throw Do.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};Vot.exports={fill:$ot,compareHeaderName:jot,Headers:ey,HeadersList:fre,getHeadersGuard:Got,setHeadersGuard:Vor,setHeadersList:zor,getHeadersList:$Te}});var qQ=W((Pyi,nst)=>{"use strict";f();var{Headers:Zot,HeadersList:zot,fill:Kor,getHeadersGuard:Yor,setHeadersGuard:est,setHeadersList:tst}=wk(),{extractBody:Kot,cloneBody:Jor,mixinBody:Xor,hasFinalizationRegistry:Zor,streamRegistry:esr,bodyUnusable:tsr}=IN(),jTe=ji(),Yot=require("node:util"),{kEnumerableProperty:am}=jTe,{isValidReasonPhrase:rsr,isCancelled:nsr,isAborted:isr,isBlobLike:osr,serializeJavascriptValueToJSONString:ssr,isErrorLike:asr,isomorphicEncode:csr,environmentSettingsObject:lsr}=nm(),{redirectStatusSet:usr,nullBodyStatus:dsr}=aQ(),{kState:vc,kHeaders:eE}=fw(),{webidl:Ti}=ld(),{FormData:fsr}=pQ(),{URLSerializer:Jot}=Up(),{kConstruct:mre}=Ua(),GTe=require("node:assert"),{types:psr}=require("node:util"),msr=new TextEncoder("utf-8"),_k=class t{static{a(this,"Response")}static error(){return UQ(hre(),"immutable")}static json(e,r={}){Ti.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=Ti.converters.ResponseInit(r));let n=msr.encode(ssr(e)),o=Kot(n),s=UQ(WN({}),"response");return Xot(s,r,{body:o[0],type:"application/json"}),s}static redirect(e,r=302){Ti.argumentLengthCheck(arguments,1,"Response.redirect"),e=Ti.converters.USVString(e),r=Ti.converters["unsigned short"](r);let n;try{n=new URL(e,lsr.settingsObject.baseUrl)}catch(c){throw new TypeError(`Failed to parse URL from ${e}`,{cause:c})}if(!usr.has(r))throw new RangeError(`Invalid status code ${r}`);let o=UQ(WN({}),"immutable");o[vc].status=r;let s=csr(Jot(n));return o[vc].headersList.append("location",s,!0),o}constructor(e=null,r={}){if(Ti.util.markAsUncloneable(this),e===mre)return;e!==null&&(e=Ti.converters.BodyInit(e)),r=Ti.converters.ResponseInit(r),this[vc]=WN({}),this[eE]=new Zot(mre),est(this[eE],"response"),tst(this[eE],this[vc].headersList);let n=null;if(e!=null){let[o,s]=Kot(e);n={body:o,type:s}}Xot(this,r,n)}get type(){return Ti.brandCheck(this,t),this[vc].type}get url(){Ti.brandCheck(this,t);let e=this[vc].urlList,r=e[e.length-1]??null;return r===null?"":Jot(r,!0)}get redirected(){return Ti.brandCheck(this,t),this[vc].urlList.length>1}get status(){return Ti.brandCheck(this,t),this[vc].status}get ok(){return Ti.brandCheck(this,t),this[vc].status>=200&&this[vc].status<=299}get statusText(){return Ti.brandCheck(this,t),this[vc].statusText}get headers(){return Ti.brandCheck(this,t),this[eE]}get body(){return Ti.brandCheck(this,t),this[vc].body?this[vc].body.stream:null}get bodyUsed(){return Ti.brandCheck(this,t),!!this[vc].body&&jTe.isDisturbed(this[vc].body.stream)}clone(){if(Ti.brandCheck(this,t),tsr(this))throw Ti.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=VTe(this[vc]);return UQ(e,Yor(this[eE]))}[Yot.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${Yot.formatWithOptions(r,n)}`}};Xor(_k);Object.defineProperties(_k.prototype,{type:am,url:am,status:am,ok:am,redirected:am,statusText:am,headers:am,clone:am,body:am,bodyUsed:am,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(_k,{json:am,redirect:am,error:am});function VTe(t){if(t.internalResponse)return rst(VTe(t.internalResponse),t.type);let e=WN({...t,body:null});return t.body!=null&&(e.body=Jor(e,t.body)),e}a(VTe,"cloneResponse");function WN(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new zot(t?.headersList):new zot,urlList:t?.urlList?[...t.urlList]:[]}}a(WN,"makeResponse");function hre(t){let e=asr(t);return WN({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}a(hre,"makeNetworkError");function hsr(t){return t.type==="error"&&t.status===0}a(hsr,"isNetworkError");function pre(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,o){return GTe(!(n in e)),r[n]=o,!0}})}a(pre,"makeFilteredResponse");function rst(t,e){if(e==="basic")return pre(t,{type:"basic",headersList:t.headersList});if(e==="cors")return pre(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return pre(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return pre(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});GTe(!1)}a(rst,"filterResponse");function gsr(t,e=null){return GTe(nsr(t)),isr(t)?hre(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):hre(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}a(gsr,"makeAppropriateNetworkError");function Xot(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!rsr(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[vc].status=e.status),"statusText"in e&&e.statusText!=null&&(t[vc].statusText=e.statusText),"headers"in e&&e.headers!=null&&Kor(t[eE],e.headers),r){if(dsr.includes(t.status))throw Ti.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[vc].body=r.body,r.type!=null&&!t[vc].headersList.contains("content-type",!0)&&t[vc].headersList.append("content-type",r.type,!0)}}a(Xot,"initializeResponse");function UQ(t,e){let r=new _k(mre);return r[vc]=t,r[eE]=new Zot(mre),tst(r[eE],t.headersList),est(r[eE],e),Zor&&t.body?.stream&&esr.register(r,new WeakRef(t.body.stream)),r}a(UQ,"fromInnerResponse");Ti.converters.ReadableStream=Ti.interfaceConverter(ReadableStream);Ti.converters.FormData=Ti.interfaceConverter(fsr);Ti.converters.URLSearchParams=Ti.interfaceConverter(URLSearchParams);Ti.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?Ti.converters.USVString(t,e,r):osr(t)?Ti.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||psr.isArrayBuffer(t)?Ti.converters.BufferSource(t,e,r):jTe.isFormDataLike(t)?Ti.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?Ti.converters.URLSearchParams(t,e,r):Ti.converters.DOMString(t,e,r)};Ti.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?Ti.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:Ti.converters.XMLHttpRequestBodyInit(t,e,r)};Ti.converters.ResponseInit=Ti.dictionaryConverter([{key:"status",converter:Ti.converters["unsigned short"],defaultValue:a(()=>200,"defaultValue")},{key:"statusText",converter:Ti.converters.ByteString,defaultValue:a(()=>"","defaultValue")},{key:"headers",converter:Ti.converters.HeadersInit}]);nst.exports={isNetworkError:hsr,makeNetworkError:hre,makeResponse:WN,makeAppropriateNetworkError:gsr,filterResponse:rst,Response:_k,cloneResponse:VTe,fromInnerResponse:UQ}});var ast=W((Nyi,sst)=>{"use strict";f();var{kConnected:ist,kSize:ost}=Ua(),zTe=class{static{a(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[ist]===0&&this.value[ost]===0?void 0:this.value}},KTe=class{static{a(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[ist]===0&&e[ost]===0&&this.finalizer(r)})}unregister(e){}};sst.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:zTe,FinalizationRegistry:KTe}):{WeakRef,FinalizationRegistry}}});var $N=W((Fyi,Est)=>{"use strict";f();var{extractBody:Asr,mixinBody:ysr,cloneBody:Csr,bodyUnusable:cst}=IN(),{Headers:Ast,fill:vsr,HeadersList:Cre,setHeadersGuard:JTe,getHeadersGuard:xsr,setHeadersList:yst,getHeadersList:lst}=wk(),{FinalizationRegistry:Esr}=ast()(),Are=ji(),ust=require("node:util"),{isValidHTTPToken:bsr,sameOrigin:dst,environmentSettingsObject:gre}=nm(),{forbiddenMethodsSet:Isr,corsSafeListedMethodsSet:Tsr,referrerPolicy:wsr,requestRedirect:_sr,requestMode:Ssr,requestCredentials:Rsr,requestCache:ksr,requestDuplex:Psr}=aQ(),{kEnumerableProperty:gl,normalizedMethodRecordsBase:Dsr,normalizedMethodRecords:Bsr}=Are,{kHeaders:cm,kSignal:yre,kState:fa,kDispatcher:YTe}=fw(),{webidl:Ln}=ld(),{URLSerializer:Nsr}=Up(),{kConstruct:vre}=Ua(),Msr=require("node:assert"),{getMaxListeners:fst,setMaxListeners:pst,getEventListeners:Lsr,defaultMaxListeners:mst}=require("node:events"),Fsr=Symbol("abortController"),Cst=new Esr(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),xre=new WeakMap;function hst(t){return e;function e(){let r=t.deref();if(r!==void 0){Cst.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=xre.get(r.signal);if(n!==void 0){if(n.size!==0){for(let o of n){let s=o.deref();s!==void 0&&s.abort(this.reason)}n.clear()}xre.delete(r.signal)}}}}a(hst,"buildAbort");var gst=!1,bw=class t{static{a(this,"Request")}constructor(e,r={}){if(Ln.util.markAsUncloneable(this),e===vre)return;let n="Request constructor";Ln.argumentLengthCheck(arguments,1,n),e=Ln.converters.RequestInfo(e,n,"input"),r=Ln.converters.RequestInit(r,n,"init");let o=null,s=null,c=gre.settingsObject.baseUrl,l=null;if(typeof e=="string"){this[YTe]=r.dispatcher;let b;try{b=new URL(e,c)}catch(I){throw new TypeError("Failed to parse URL from "+e,{cause:I})}if(b.username||b.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);o=Ere({urlList:[b]}),s="cors"}else this[YTe]=r.dispatcher||e[YTe],Msr(e instanceof t),o=e[fa],l=e[yre];let u=gre.settingsObject.origin,d="client";if(o.window?.constructor?.name==="EnvironmentSettingsObject"&&dst(o.window,u)&&(d=o.window),r.window!=null)throw new TypeError(`'window' option '${d}' must be null`);"window"in r&&(d="no-window"),o=Ere({method:o.method,headersList:o.headersList,unsafeRequest:o.unsafeRequest,client:gre.settingsObject,window:d,priority:o.priority,origin:o.origin,referrer:o.referrer,referrerPolicy:o.referrerPolicy,mode:o.mode,credentials:o.credentials,cache:o.cache,redirect:o.redirect,integrity:o.integrity,keepalive:o.keepalive,reloadNavigation:o.reloadNavigation,historyNavigation:o.historyNavigation,urlList:[...o.urlList]});let p=Object.keys(r).length!==0;if(p&&(o.mode==="navigate"&&(o.mode="same-origin"),o.reloadNavigation=!1,o.historyNavigation=!1,o.origin="client",o.referrer="client",o.referrerPolicy="",o.url=o.urlList[o.urlList.length-1],o.urlList=[o.url]),r.referrer!==void 0){let b=r.referrer;if(b==="")o.referrer="no-referrer";else{let I;try{I=new URL(b,c)}catch(_){throw new TypeError(`Referrer "${b}" is not a valid URL.`,{cause:_})}I.protocol==="about:"&&I.hostname==="client"||u&&!dst(I,gre.settingsObject.baseUrl)?o.referrer="client":o.referrer=I}}r.referrerPolicy!==void 0&&(o.referrerPolicy=r.referrerPolicy);let m;if(r.mode!==void 0?m=r.mode:m=s,m==="navigate")throw Ln.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(m!=null&&(o.mode=m),r.credentials!==void 0&&(o.credentials=r.credentials),r.cache!==void 0&&(o.cache=r.cache),o.cache==="only-if-cached"&&o.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(o.redirect=r.redirect),r.integrity!=null&&(o.integrity=String(r.integrity)),r.keepalive!==void 0&&(o.keepalive=!!r.keepalive),r.method!==void 0){let b=r.method,I=Bsr[b];if(I!==void 0)o.method=I;else{if(!bsr(b))throw new TypeError(`'${b}' is not a valid HTTP method.`);let _=b.toUpperCase();if(Isr.has(_))throw new TypeError(`'${b}' HTTP method is unsupported.`);b=Dsr[_]??b,o.method=b}!gst&&o.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),gst=!0)}r.signal!==void 0&&(l=r.signal),this[fa]=o;let h=new AbortController;if(this[yre]=h.signal,l!=null){if(!l||typeof l.aborted!="boolean"||typeof l.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(l.aborted)h.abort(l.reason);else{this[Fsr]=h;let b=new WeakRef(h),I=hst(b);try{(typeof fst=="function"&&fst(l)===mst||Lsr(l,"abort").length>=mst)&&pst(1500,l)}catch{}Are.addAbortListener(l,I),Cst.register(h,{signal:l,abort:I},I)}}if(this[cm]=new Ast(vre),yst(this[cm],o.headersList),JTe(this[cm],"request"),m==="no-cors"){if(!Tsr.has(o.method))throw new TypeError(`'${o.method} is unsupported in no-cors mode.`);JTe(this[cm],"request-no-cors")}if(p){let b=lst(this[cm]),I=r.headers!==void 0?r.headers:new Cre(b);if(b.clear(),I instanceof Cre){for(let{name:_,value:k}of I.rawValues())b.append(_,k,!1);b.cookies=I.cookies}else vsr(this[cm],I)}let g=e instanceof t?e[fa].body:null;if((r.body!=null||g!=null)&&(o.method==="GET"||o.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let A=null;if(r.body!=null){let[b,I]=Asr(r.body,o.keepalive);A=b,I&&!lst(this[cm]).contains("content-type",!0)&&this[cm].append("content-type",I)}let y=A??g;if(y!=null&&y.source==null){if(A!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(o.mode!=="same-origin"&&o.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');o.useCORSPreflightFlag=!0}let v=y;if(A==null&&g!=null){if(cst(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let b=new TransformStream;g.stream.pipeThrough(b),v={source:g.source,length:g.length,stream:b.readable}}this[fa].body=v}get method(){return Ln.brandCheck(this,t),this[fa].method}get url(){return Ln.brandCheck(this,t),Nsr(this[fa].url)}get headers(){return Ln.brandCheck(this,t),this[cm]}get destination(){return Ln.brandCheck(this,t),this[fa].destination}get referrer(){return Ln.brandCheck(this,t),this[fa].referrer==="no-referrer"?"":this[fa].referrer==="client"?"about:client":this[fa].referrer.toString()}get referrerPolicy(){return Ln.brandCheck(this,t),this[fa].referrerPolicy}get mode(){return Ln.brandCheck(this,t),this[fa].mode}get credentials(){return this[fa].credentials}get cache(){return Ln.brandCheck(this,t),this[fa].cache}get redirect(){return Ln.brandCheck(this,t),this[fa].redirect}get integrity(){return Ln.brandCheck(this,t),this[fa].integrity}get keepalive(){return Ln.brandCheck(this,t),this[fa].keepalive}get isReloadNavigation(){return Ln.brandCheck(this,t),this[fa].reloadNavigation}get isHistoryNavigation(){return Ln.brandCheck(this,t),this[fa].historyNavigation}get signal(){return Ln.brandCheck(this,t),this[yre]}get body(){return Ln.brandCheck(this,t),this[fa].body?this[fa].body.stream:null}get bodyUsed(){return Ln.brandCheck(this,t),!!this[fa].body&&Are.isDisturbed(this[fa].body.stream)}get duplex(){return Ln.brandCheck(this,t),"half"}clone(){if(Ln.brandCheck(this,t),cst(this))throw new TypeError("unusable");let e=vst(this[fa]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=xre.get(this.signal);n===void 0&&(n=new Set,xre.set(this.signal,n));let o=new WeakRef(r);n.add(o),Are.addAbortListener(r.signal,hst(o))}return xst(e,r.signal,xsr(this[cm]))}[ust.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${ust.formatWithOptions(r,n)}`}};ysr(bw);function Ere(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new Cre(t.headersList):new Cre}}a(Ere,"makeRequest");function vst(t){let e=Ere({...t,body:null});return t.body!=null&&(e.body=Csr(e,t.body)),e}a(vst,"cloneRequest");function xst(t,e,r){let n=new bw(vre);return n[fa]=t,n[yre]=e,n[cm]=new Ast(vre),yst(n[cm],t.headersList),JTe(n[cm],r),n}a(xst,"fromInnerRequest");Object.defineProperties(bw.prototype,{method:gl,url:gl,headers:gl,redirect:gl,clone:gl,signal:gl,duplex:gl,destination:gl,body:gl,bodyUsed:gl,isHistoryNavigation:gl,isReloadNavigation:gl,keepalive:gl,integrity:gl,cache:gl,credentials:gl,attribute:gl,referrerPolicy:gl,referrer:gl,mode:gl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});Ln.converters.Request=Ln.interfaceConverter(bw);Ln.converters.RequestInfo=function(t,e,r){return typeof t=="string"?Ln.converters.USVString(t,e,r):t instanceof bw?Ln.converters.Request(t,e,r):Ln.converters.USVString(t,e,r)};Ln.converters.AbortSignal=Ln.interfaceConverter(AbortSignal);Ln.converters.RequestInit=Ln.dictionaryConverter([{key:"method",converter:Ln.converters.ByteString},{key:"headers",converter:Ln.converters.HeadersInit},{key:"body",converter:Ln.nullableConverter(Ln.converters.BodyInit)},{key:"referrer",converter:Ln.converters.USVString},{key:"referrerPolicy",converter:Ln.converters.DOMString,allowedValues:wsr},{key:"mode",converter:Ln.converters.DOMString,allowedValues:Ssr},{key:"credentials",converter:Ln.converters.DOMString,allowedValues:Rsr},{key:"cache",converter:Ln.converters.DOMString,allowedValues:ksr},{key:"redirect",converter:Ln.converters.DOMString,allowedValues:_sr},{key:"integrity",converter:Ln.converters.DOMString},{key:"keepalive",converter:Ln.converters.boolean},{key:"signal",converter:Ln.nullableConverter(t=>Ln.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:Ln.converters.any},{key:"duplex",converter:Ln.converters.DOMString,allowedValues:Psr},{key:"dispatcher",converter:Ln.converters.any}]);Est.exports={Request:bw,makeRequest:Ere,fromInnerRequest:xst,cloneRequest:vst}});var WQ=W((Uyi,Fst)=>{"use strict";f();var{makeNetworkError:ys,makeAppropriateNetworkError:bre,filterResponse:XTe,makeResponse:Ire,fromInnerResponse:Osr}=qQ(),{HeadersList:bst}=wk(),{Request:Qsr,cloneRequest:Usr}=$N(),Iw=require("node:zlib"),{bytesMatch:qsr,makePolicyContainer:Hsr,clonePolicyContainer:Wsr,requestBadPort:$sr,TAOCheck:jsr,appendRequestOriginHeader:Gsr,responseLocationURL:Vsr,requestCurrentURL:yv,setRequestReferrerPolicyOnRedirect:zsr,tryUpgradeRequestToAPotentiallyTrustworthyURL:Ksr,createOpaqueTimingInfo:nwe,appendFetchMetadata:Ysr,corsCheck:Jsr,crossOriginResourcePolicyCheck:Xsr,determineRequestsReferrer:Zsr,coarsenedSharedCurrentTime:HQ,createDeferredPromise:ear,isBlobLike:tar,sameOrigin:rwe,isCancelled:Sk,isAborted:Ist,isErrorLike:rar,fullyReadBody:nar,readableStreamClose:iar,isomorphicEncode:Tre,urlIsLocal:oar,urlIsHttpHttpsScheme:iwe,urlHasHttpsScheme:sar,clampAndCoarsenConnectionTimingInfo:aar,simpleRangeHeaderValue:car,buildContentRange:lar,createInflate:uar,extractMimeType:dar}=nm(),{kState:Sst,kDispatcher:far}=fw(),Rk=require("node:assert"),{safelyExtractBody:owe,extractBody:Tst}=IN(),{redirectStatusSet:Rst,nullBodyStatus:kst,safeMethodsSet:par,requestBodyHeader:mar,subresourceSet:har}=aQ(),gar=require("node:events"),{Readable:Aar,pipeline:yar,finished:Car}=require("node:stream"),{addAbortListener:xar,isErrored:Ear,isReadable:wre,bufferToLowerCasedHeaderName:wst}=ji(),{dataURLProcessor:bar,serializeAMimeType:Iar,minimizeSupportedMimeType:Tar}=Up(),{getGlobalDispatcher:war}=lre(),{webidl:_ar}=ld(),{STATUS_CODES:Sar}=require("node:http"),Rar=["GET","HEAD"],kar=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",ZTe,_re=class extends gar{static{a(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function Par(t){Pst(t,"fetch")}a(Par,"handleFetchDone");function Dar(t,e=void 0){_ar.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=ear(),n;try{n=new Qsr(t,e)}catch(p){return r.reject(p),r.promise}let o=n[Sst];if(n.signal.aborted)return ewe(r,o,null,n.signal.reason),r.promise;o.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(o.serviceWorkers="none");let c=null,l=!1,u=null;return xar(n.signal,()=>{l=!0,Rk(u!=null),u.abort(n.signal.reason);let p=c?.deref();ewe(r,o,p,n.signal.reason)}),u=Bst({request:o,processResponseEndOfBody:Par,processResponse:a(p=>{if(!l){if(p.aborted){ewe(r,o,c,u.serializedAbortReason);return}if(p.type==="error"){r.reject(new TypeError("fetch failed",{cause:p.error}));return}c=new WeakRef(Osr(p,"immutable")),r.resolve(c.deref()),r=null}},"processResponse"),dispatcher:n[far]}),r.promise}a(Dar,"fetch");function Pst(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,o=t.cacheState;iwe(r)&&n!==null&&(t.timingAllowPassed||(n=nwe({startTime:n.startTime}),o=""),n.endTime=HQ(),t.timingInfo=n,Dst(n,r.href,e,globalThis,o))}a(Pst,"finalizeAndReportTiming");var Dst=performance.markResourceTiming;function ewe(t,e,r,n){if(t&&t.reject(n),e.body!=null&&wre(e.body?.stream)&&e.body.stream.cancel(n).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s}),r==null)return;let o=r[Sst];o.body!=null&&wre(o.body?.stream)&&o.body.stream.cancel(n).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s})}a(ewe,"abortFetch");function Bst({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:o,processResponseConsumeBody:s,useParallelQueue:c=!1,dispatcher:l=war()}){Rk(l);let u=null,d=!1;t.client!=null&&(u=t.client.globalObject,d=t.client.crossOriginIsolatedCapability);let p=HQ(d),m=nwe({startTime:p}),h={controller:new _re(l),request:t,timingInfo:m,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:s,processResponseEndOfBody:o,taskDestination:u,crossOriginIsolatedCapability:d};return Rk(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=Wsr(t.client.policyContainer):t.policyContainer=Hsr()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,har.has(t.destination),Nst(h).catch(g=>{h.controller.terminate(g)}),h.controller}a(Bst,"fetching");async function Nst(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!oar(yv(r))&&(n=ys("local URLs only")),Ksr(r),$sr(r)==="blocked"&&(n=ys("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=Zsr(r)),n===null&&(n=await(async()=>{let s=yv(r);return rwe(s,r.url)&&r.responseTainting==="basic"||s.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await _st(t)):r.mode==="same-origin"?ys('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?ys('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await _st(t)):iwe(yv(r))?(r.responseTainting="cors",await Mst(t)):ys("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=XTe(n,"basic"):r.responseTainting==="cors"?n=XTe(n,"cors"):r.responseTainting==="opaque"?n=XTe(n,"opaque"):Rk(!1));let o=n.status===0?n:n.internalResponse;if(o.urlList.length===0&&o.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&o.status===206&&o.rangeRequested&&!r.headers.contains("range",!0)&&(n=o=ys()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||kst.includes(o.status))&&(o.body=null,t.controller.dump=!0),r.integrity){let s=a(l=>twe(t,ys(l)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){s(n.error);return}let c=a(l=>{if(!qsr(l,r.integrity)){s("integrity mismatch");return}n.body=owe(l)[0],twe(t,n)},"processBody");await nar(n.body,c,s)}else twe(t,n)}a(Nst,"mainFetch");function _st(t){if(Sk(t)&&t.request.redirectCount===0)return Promise.resolve(bre(t));let{request:e}=t,{protocol:r}=yv(e);switch(r){case"about:":return Promise.resolve(ys("about scheme is not supported"));case"blob:":{ZTe||(ZTe=require("node:buffer").resolveObjectURL);let n=yv(e);if(n.search.length!==0)return Promise.resolve(ys("NetworkError when attempting to fetch resource."));let o=ZTe(n.toString());if(e.method!=="GET"||!tar(o))return Promise.resolve(ys("invalid method"));let s=Ire(),c=o.size,l=Tre(`${c}`),u=o.type;if(e.headersList.contains("range",!0)){s.rangeRequested=!0;let d=e.headersList.get("range",!0),p=car(d,!0);if(p==="failure")return Promise.resolve(ys("failed to fetch the data URL"));let{rangeStartValue:m,rangeEndValue:h}=p;if(m===null)m=c-h,h=m+h-1;else{if(m>=c)return Promise.resolve(ys("Range start is greater than the blob's size."));(h===null||h>=c)&&(h=c-1)}let g=o.slice(m,h,u),A=Tst(g);s.body=A[0];let y=Tre(`${g.size}`),v=lar(m,h,c);s.status=206,s.statusText="Partial Content",s.headersList.set("content-length",y,!0),s.headersList.set("content-type",u,!0),s.headersList.set("content-range",v,!0)}else{let d=Tst(o);s.statusText="OK",s.body=d[0],s.headersList.set("content-length",l,!0),s.headersList.set("content-type",u,!0)}return Promise.resolve(s)}case"data:":{let n=yv(e),o=bar(n);if(o==="failure")return Promise.resolve(ys("failed to fetch the data URL"));let s=Iar(o.mimeType);return Promise.resolve(Ire({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:s}]],body:owe(o.body)[0]}))}case"file:":return Promise.resolve(ys("not implemented... yet..."));case"http:":case"https:":return Mst(t).catch(n=>ys(n));default:return Promise.resolve(ys("unknown scheme"))}}a(_st,"schemeFetch");function Bar(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}a(Bar,"finalizeResponse");function twe(t,e){let r=t.timingInfo,n=a(()=>{let s=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=s;let l=e.cacheState,u=e.bodyInfo;e.timingAllowPassed||(r=nwe(r),l="");let d=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){d=e.status;let p=dar(e.headersList);p!=="failure"&&(u.contentType=Tar(p))}t.request.initiatorType!=null&&Dst(r,t.request.url.href,t.request.initiatorType,globalThis,l,u,d)};let c=a(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>c())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let o=e.type==="error"?e:e.internalResponse??e;o.body==null?n():Car(o.body.stream,()=>{n()})}a(twe,"fetchFinale");async function Mst(t){let e=t.request,r=null,n=null,o=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await Lst(t),e.responseTainting==="cors"&&Jsr(e,r)==="failure")return ys("cors failure");jsr(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&Xsr(e.origin,e.client,e.destination,n)==="blocked"?ys("blocked"):(Rst.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=ys("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await Nar(t,r):Rk(!1)),r.timingInfo=o,r)}a(Mst,"httpFetch");function Nar(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,o;try{if(o=Vsr(n,yv(r).hash),o==null)return e}catch(c){return Promise.resolve(ys(c))}if(!iwe(o))return Promise.resolve(ys("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(ys("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(o.username||o.password)&&!rwe(r,o))return Promise.resolve(ys('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(o.username||o.password))return Promise.resolve(ys('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(ys());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!Rar.includes(r.method)){r.method="GET",r.body=null;for(let c of mar)r.headersList.delete(c)}rwe(yv(r),o)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(Rk(r.body.source!=null),r.body=owe(r.body.source)[0]);let s=t.timingInfo;return s.redirectEndTime=s.postRedirectStartTime=HQ(t.crossOriginIsolatedCapability),s.redirectStartTime===0&&(s.redirectStartTime=s.startTime),r.urlList.push(o),zsr(r,n),Nst(t,!0)}a(Nar,"httpRedirectFetch");async function Lst(t,e=!1,r=!1){let n=t.request,o=null,s=null,c=null,l=null,u=!1;n.window==="no-window"&&n.redirect==="error"?(o=t,s=n):(s=Usr(n),o={...t},o.request=s);let d=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",p=s.body?s.body.length:null,m=null;if(s.body==null&&["POST","PUT"].includes(s.method)&&(m="0"),p!=null&&(m=Tre(`${p}`)),m!=null&&s.headersList.append("content-length",m,!0),p!=null&&s.keepalive,s.referrer instanceof URL&&s.headersList.append("referer",Tre(s.referrer.href),!0),Gsr(s),Ysr(s),s.headersList.contains("user-agent",!0)||s.headersList.append("user-agent",kar),s.cache==="default"&&(s.headersList.contains("if-modified-since",!0)||s.headersList.contains("if-none-match",!0)||s.headersList.contains("if-unmodified-since",!0)||s.headersList.contains("if-match",!0)||s.headersList.contains("if-range",!0))&&(s.cache="no-store"),s.cache==="no-cache"&&!s.preventNoCacheCacheControlHeaderModification&&!s.headersList.contains("cache-control",!0)&&s.headersList.append("cache-control","max-age=0",!0),(s.cache==="no-store"||s.cache==="reload")&&(s.headersList.contains("pragma",!0)||s.headersList.append("pragma","no-cache",!0),s.headersList.contains("cache-control",!0)||s.headersList.append("cache-control","no-cache",!0)),s.headersList.contains("range",!0)&&s.headersList.append("accept-encoding","identity",!0),s.headersList.contains("accept-encoding",!0)||(sar(yv(s))?s.headersList.append("accept-encoding","br, gzip, deflate",!0):s.headersList.append("accept-encoding","gzip, deflate",!0)),s.headersList.delete("host",!0),l==null&&(s.cache="no-store"),s.cache!=="no-store"&&s.cache,c==null){if(s.cache==="only-if-cached")return ys("only if cached");let h=await Mar(o,d,r);!par.has(s.method)&&h.status>=200&&h.status<=399,u&&h.status,c==null&&(c=h)}if(c.urlList=[...s.urlList],s.headersList.contains("range",!0)&&(c.rangeRequested=!0),c.requestIncludesCredentials=d,c.status===407)return n.window==="no-window"?ys():Sk(t)?bre(t):ys("proxy authentication required");if(c.status===421&&!r&&(n.body==null||n.body.source!=null)){if(Sk(t))return bre(t);t.controller.connection.destroy(),c=await Lst(t,e,!0)}return c}a(Lst,"httpNetworkOrCacheFetch");async function Mar(t,e=!1,r=!1){Rk(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(A,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(A??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,o=null,s=t.timingInfo;null==null&&(n.cache="no-store");let l=r?"yes":"no";n.mode;let u=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let A=a(async function*(b){Sk(t)||(yield b,t.processRequestBodyChunkLength?.(b.byteLength))},"processBodyChunk"),y=a(()=>{Sk(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),v=a(b=>{Sk(t)||(b.name==="AbortError"?t.controller.abort():t.controller.terminate(b))},"processBodyError");u=async function*(){try{for await(let b of n.body.stream)yield*A(b);y()}catch(b){v(b)}}()}try{let{body:A,status:y,statusText:v,headersList:b,socket:I}=await g({body:u});if(I)o=Ire({status:y,statusText:v,headersList:b,socket:I});else{let _=A[Symbol.asyncIterator]();t.controller.next=()=>_.next(),o=Ire({status:y,statusText:v,headersList:b})}}catch(A){return A.name==="AbortError"?(t.controller.connection.destroy(),bre(t,A)):ys(A)}let d=a(async()=>{await t.controller.resume()},"pullAlgorithm"),p=a(A=>{Sk(t)||t.controller.abort(A)},"cancelAlgorithm"),m=new ReadableStream({async start(A){t.controller.controller=A},async pull(A){await d(A)},async cancel(A){await p(A)},type:"bytes"});o.body={stream:m,source:null,length:null},t.controller.onAborted=h,t.controller.on("terminated",h),t.controller.resume=async()=>{for(;;){let A,y;try{let{done:b,value:I}=await t.controller.next();if(Ist(t))break;A=b?void 0:I}catch(b){t.controller.ended&&!s.encodedBodySize?A=void 0:(A=b,y=!0)}if(A===void 0){iar(t.controller.controller),Bar(t,o);return}if(s.decodedBodySize+=A?.byteLength??0,y){t.controller.terminate(A);return}let v=new Uint8Array(A);if(v.byteLength&&t.controller.controller.enqueue(v),Ear(m)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function h(A){Ist(t)?(o.aborted=!0,wre(m)&&t.controller.controller.error(t.controller.serializedAbortReason)):wre(m)&&t.controller.controller.error(new TypeError("terminated",{cause:rar(A)?A:void 0})),t.controller.connection.destroy()}return a(h,"onAborted"),o;function g({body:A}){let y=yv(n),v=t.controller.dispatcher;return new Promise((b,I)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:v.isMockActive?n.body&&(n.body.source||n.body.stream):A,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;s.finalConnectionTimingInfo=aar(void 0,s.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),s.finalNetworkRequestStartTime=HQ(t.crossOriginIsolatedCapability)},onResponseStarted(){s.finalNetworkResponseStartTime=HQ(t.crossOriginIsolatedCapability)},onHeaders(_,k,N,F){if(_<200)return;let O=[],Y="",z=new bst;for(let J=0;J<k.length;J+=2)z.append(wst(k[J]),k[J+1].toString("latin1"),!0);let V=z.get("content-encoding",!0);V&&(O=V.toLowerCase().split(",").map(J=>J.trim())),Y=z.get("location",!0),this.body=new Aar({read:N});let U=[],H=Y&&n.redirect==="follow"&&Rst.has(_);if(O.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!kst.includes(_)&&!H)for(let J=O.length-1;J>=0;--J){let G=O[J];if(G==="x-gzip"||G==="gzip")U.push(Iw.createGunzip({flush:Iw.constants.Z_SYNC_FLUSH,finishFlush:Iw.constants.Z_SYNC_FLUSH}));else if(G==="deflate")U.push(uar({flush:Iw.constants.Z_SYNC_FLUSH,finishFlush:Iw.constants.Z_SYNC_FLUSH}));else if(G==="br")U.push(Iw.createBrotliDecompress({flush:Iw.constants.BROTLI_OPERATION_FLUSH,finishFlush:Iw.constants.BROTLI_OPERATION_FLUSH}));else{U.length=0;break}}let ee=this.onError.bind(this);return b({status:_,statusText:F,headersList:z,body:U.length?yar(this.body,...U,J=>{J&&this.onError(J)}).on("error",ee):this.body.on("error",ee)}),!0},onData(_){if(t.controller.dump)return;let k=_;return s.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),I(_)},onUpgrade(_,k,N){if(_!==101)return;let F=new bst;for(let O=0;O<k.length;O+=2)F.append(wst(k[O]),k[O+1].toString("latin1"),!0);return b({status:_,statusText:Sar[_],headersList:F,socket:N}),!0}}))}a(g,"dispatch")}a(Mar,"httpNetworkFetch");Fst.exports={fetch:Dar,Fetch:_re,fetching:Bst,finalizeAndReportTiming:Pst}});var swe=W((Wyi,Ost)=>{"use strict";f();Ost.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var Ust=W((jyi,Qst)=>{"use strict";f();var{webidl:lm}=ld(),Sre=Symbol("ProgressEvent state"),awe=class t extends Event{static{a(this,"ProgressEvent")}constructor(e,r={}){e=lm.converters.DOMString(e,"ProgressEvent constructor","type"),r=lm.converters.ProgressEventInit(r??{}),super(e,r),this[Sre]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return lm.brandCheck(this,t),this[Sre].lengthComputable}get loaded(){return lm.brandCheck(this,t),this[Sre].loaded}get total(){return lm.brandCheck(this,t),this[Sre].total}};lm.converters.ProgressEventInit=lm.dictionaryConverter([{key:"lengthComputable",converter:lm.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"loaded",converter:lm.converters["unsigned long long"],defaultValue:a(()=>0,"defaultValue")},{key:"total",converter:lm.converters["unsigned long long"],defaultValue:a(()=>0,"defaultValue")},{key:"bubbles",converter:lm.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"cancelable",converter:lm.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"composed",converter:lm.converters.boolean,defaultValue:a(()=>!1,"defaultValue")}]);Qst.exports={ProgressEvent:awe}});var Hst=W((zyi,qst)=>{"use strict";f();function Lar(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}a(Lar,"getEncoding");qst.exports={getEncoding:Lar}});var Yst=W((Jyi,Kst)=>{"use strict";f();var{kState:jN,kError:cwe,kResult:Wst,kAborted:$Q,kLastProgressEventFired:lwe}=swe(),{ProgressEvent:Far}=Ust(),{getEncoding:$st}=Hst(),{serializeAMimeType:Oar,parseMIMEType:jst}=Up(),{types:Qar}=require("node:util"),{StringDecoder:Gst}=require("string_decoder"),{btoa:Vst}=require("node:buffer"),Uar={enumerable:!0,writable:!1,configurable:!1};function qar(t,e,r,n){if(t[jN]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[jN]="loading",t[Wst]=null,t[cwe]=null;let s=e.stream().getReader(),c=[],l=s.read(),u=!0;(async()=>{for(;!t[$Q];)try{let{done:d,value:p}=await l;if(u&&!t[$Q]&&queueMicrotask(()=>{Tw("loadstart",t)}),u=!1,!d&&Qar.isUint8Array(p))c.push(p),(t[lwe]===void 0||Date.now()-t[lwe]>=50)&&!t[$Q]&&(t[lwe]=Date.now(),queueMicrotask(()=>{Tw("progress",t)})),l=s.read();else if(d){queueMicrotask(()=>{t[jN]="done";try{let m=Har(c,r,e.type,n);if(t[$Q])return;t[Wst]=m,Tw("load",t)}catch(m){t[cwe]=m,Tw("error",t)}t[jN]!=="loading"&&Tw("loadend",t)});break}}catch(d){if(t[$Q])return;queueMicrotask(()=>{t[jN]="done",t[cwe]=d,Tw("error",t),t[jN]!=="loading"&&Tw("loadend",t)});break}})()}a(qar,"readOperation");function Tw(t,e){let r=new Far(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}a(Tw,"fireAProgressEvent");function Har(t,e,r,n){switch(e){case"DataURL":{let o="data:",s=jst(r||"application/octet-stream");s!=="failure"&&(o+=Oar(s)),o+=";base64,";let c=new Gst("latin1");for(let l of t)o+=Vst(c.write(l));return o+=Vst(c.end()),o}case"Text":{let o="failure";if(n&&(o=$st(n)),o==="failure"&&r){let s=jst(r);s!=="failure"&&(o=$st(s.parameters.get("charset")))}return o==="failure"&&(o="UTF-8"),War(t,o)}case"ArrayBuffer":return zst(t).buffer;case"BinaryString":{let o="",s=new Gst("latin1");for(let c of t)o+=s.write(c);return o+=s.end(),o}}}a(Har,"packageData");function War(t,e){let r=zst(t),n=$ar(r),o=0;n!==null&&(e=n,o=n==="UTF-8"?3:2);let s=r.slice(o);return new TextDecoder(e).decode(s)}a(War,"decode");function $ar(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}a($ar,"BOMSniffing");function zst(t){let e=t.reduce((n,o)=>n+o.byteLength,0),r=0;return t.reduce((n,o)=>(n.set(o,r),r+=o.byteLength,n),new Uint8Array(e))}a(zst,"combineByteSequences");Kst.exports={staticPropertyDescriptors:Uar,readOperation:qar,fireAProgressEvent:Tw}});var eat=W((eCi,Zst)=>{"use strict";f();var{staticPropertyDescriptors:GN,readOperation:Rre,fireAProgressEvent:Jst}=Yst(),{kState:kk,kError:Xst,kResult:kre,kEvents:Zo,kAborted:jar}=swe(),{webidl:Ts}=ld(),{kEnumerableProperty:Wp}=ji(),ty=class t extends EventTarget{static{a(this,"FileReader")}constructor(){super(),this[kk]="empty",this[kre]=null,this[Xst]=null,this[Zo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){Ts.brandCheck(this,t),Ts.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=Ts.converters.Blob(e,{strict:!1}),Rre(this,e,"ArrayBuffer")}readAsBinaryString(e){Ts.brandCheck(this,t),Ts.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=Ts.converters.Blob(e,{strict:!1}),Rre(this,e,"BinaryString")}readAsText(e,r=void 0){Ts.brandCheck(this,t),Ts.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=Ts.converters.Blob(e,{strict:!1}),r!==void 0&&(r=Ts.converters.DOMString(r,"FileReader.readAsText","encoding")),Rre(this,e,"Text",r)}readAsDataURL(e){Ts.brandCheck(this,t),Ts.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=Ts.converters.Blob(e,{strict:!1}),Rre(this,e,"DataURL")}abort(){if(this[kk]==="empty"||this[kk]==="done"){this[kre]=null;return}this[kk]==="loading"&&(this[kk]="done",this[kre]=null),this[jar]=!0,Jst("abort",this),this[kk]!=="loading"&&Jst("loadend",this)}get readyState(){switch(Ts.brandCheck(this,t),this[kk]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return Ts.brandCheck(this,t),this[kre]}get error(){return Ts.brandCheck(this,t),this[Xst]}get onloadend(){return Ts.brandCheck(this,t),this[Zo].loadend}set onloadend(e){Ts.brandCheck(this,t),this[Zo].loadend&&this.removeEventListener("loadend",this[Zo].loadend),typeof e=="function"?(this[Zo].loadend=e,this.addEventListener("loadend",e)):this[Zo].loadend=null}get onerror(){return Ts.brandCheck(this,t),this[Zo].error}set onerror(e){Ts.brandCheck(this,t),this[Zo].error&&this.removeEventListener("error",this[Zo].error),typeof e=="function"?(this[Zo].error=e,this.addEventListener("error",e)):this[Zo].error=null}get onloadstart(){return Ts.brandCheck(this,t),this[Zo].loadstart}set onloadstart(e){Ts.brandCheck(this,t),this[Zo].loadstart&&this.removeEventListener("loadstart",this[Zo].loadstart),typeof e=="function"?(this[Zo].loadstart=e,this.addEventListener("loadstart",e)):this[Zo].loadstart=null}get onprogress(){return Ts.brandCheck(this,t),this[Zo].progress}set onprogress(e){Ts.brandCheck(this,t),this[Zo].progress&&this.removeEventListener("progress",this[Zo].progress),typeof e=="function"?(this[Zo].progress=e,this.addEventListener("progress",e)):this[Zo].progress=null}get onload(){return Ts.brandCheck(this,t),this[Zo].load}set onload(e){Ts.brandCheck(this,t),this[Zo].load&&this.removeEventListener("load",this[Zo].load),typeof e=="function"?(this[Zo].load=e,this.addEventListener("load",e)):this[Zo].load=null}get onabort(){return Ts.brandCheck(this,t),this[Zo].abort}set onabort(e){Ts.brandCheck(this,t),this[Zo].abort&&this.removeEventListener("abort",this[Zo].abort),typeof e=="function"?(this[Zo].abort=e,this.addEventListener("abort",e)):this[Zo].abort=null}};ty.EMPTY=ty.prototype.EMPTY=0;ty.LOADING=ty.prototype.LOADING=1;ty.DONE=ty.prototype.DONE=2;Object.defineProperties(ty.prototype,{EMPTY:GN,LOADING:GN,DONE:GN,readAsArrayBuffer:Wp,readAsBinaryString:Wp,readAsText:Wp,readAsDataURL:Wp,abort:Wp,readyState:Wp,result:Wp,error:Wp,onloadstart:Wp,onprogress:Wp,onload:Wp,onabort:Wp,onerror:Wp,onloadend:Wp,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(ty,{EMPTY:GN,LOADING:GN,DONE:GN});Zst.exports={FileReader:ty}});var Pre=W((nCi,tat)=>{"use strict";f();tat.exports={kConstruct:Ua().kConstruct}});var iat=W((oCi,nat)=>{"use strict";f();var Gar=require("node:assert"),{URLSerializer:rat}=Up(),{isValidHeaderName:Var}=nm();function zar(t,e,r=!1){let n=rat(t,r),o=rat(e,r);return n===o}a(zar,"urlEquals");function Kar(t){Gar(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),Var(r)&&e.push(r);return e}a(Kar,"getFieldValues");nat.exports={urlEquals:zar,getFieldValues:Kar}});var aat=W((cCi,sat)=>{"use strict";f();var{kConstruct:Yar}=Pre(),{urlEquals:Jar,getFieldValues:uwe}=iat(),{kEnumerableProperty:Pk,isDisturbed:Xar}=ji(),{webidl:yn}=ld(),{Response:Zar,cloneResponse:ecr,fromInnerResponse:tcr}=qQ(),{Request:tE,fromInnerRequest:rcr}=$N(),{kState:ry}=fw(),{fetching:ncr}=WQ(),{urlIsHttpHttpsScheme:Dre,createDeferredPromise:VN,readAllBytes:icr}=nm(),dwe=require("node:assert"),Bre=class t{static{a(this,"Cache")}#e;constructor(){arguments[0]!==Yar&&yn.illegalConstructor(),yn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){yn.brandCheck(this,t);let n="Cache.match";yn.argumentLengthCheck(arguments,1,n),e=yn.converters.RequestInfo(e,n,"request"),r=yn.converters.CacheQueryOptions(r,n,"options");let o=this.#r(e,r,1);if(o.length!==0)return o[0]}async matchAll(e=void 0,r={}){yn.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=yn.converters.RequestInfo(e,n,"request")),r=yn.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){yn.brandCheck(this,t);let r="Cache.add";yn.argumentLengthCheck(arguments,1,r),e=yn.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){yn.brandCheck(this,t);let r="Cache.addAll";yn.argumentLengthCheck(arguments,1,r);let n=[],o=[];for(let h of e){if(h===void 0)throw yn.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(h=yn.converters.RequestInfo(h),typeof h=="string")continue;let g=h[ry];if(!Dre(g.url)||g.method!=="GET")throw yn.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let s=[];for(let h of e){let g=new tE(h)[ry];if(!Dre(g.url))throw yn.errors.exception({header:r,message:"Expected http/s scheme."});g.initiator="fetch",g.destination="subresource",o.push(g);let A=VN();s.push(ncr({request:g,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)A.reject(yn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=uwe(y.headersList.get("vary"));for(let b of v)if(b==="*"){A.reject(yn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let I of s)I.abort();return}}},processResponseEndOfBody(y){if(y.aborted){A.reject(new DOMException("aborted","AbortError"));return}A.resolve(y)}})),n.push(A.promise)}let l=await Promise.all(n),u=[],d=0;for(let h of l){let g={type:"put",request:o[d],response:h};u.push(g),d++}let p=VN(),m=null;try{this.#t(u)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve(void 0):p.reject(m)}),p.promise}async put(e,r){yn.brandCheck(this,t);let n="Cache.put";yn.argumentLengthCheck(arguments,2,n),e=yn.converters.RequestInfo(e,n,"request"),r=yn.converters.Response(r,n,"response");let o=null;if(e instanceof tE?o=e[ry]:o=new tE(e)[ry],!Dre(o.url)||o.method!=="GET")throw yn.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let s=r[ry];if(s.status===206)throw yn.errors.exception({header:n,message:"Got 206 status"});if(s.headersList.contains("vary")){let g=uwe(s.headersList.get("vary"));for(let A of g)if(A==="*")throw yn.errors.exception({header:n,message:"Got * vary field value"})}if(s.body&&(Xar(s.body.stream)||s.body.stream.locked))throw yn.errors.exception({header:n,message:"Response body is locked or disturbed"});let c=ecr(s),l=VN();if(s.body!=null){let A=s.body.stream.getReader();icr(A).then(l.resolve,l.reject)}else l.resolve(void 0);let u=[],d={type:"put",request:o,response:c};u.push(d);let p=await l.promise;c.body!=null&&(c.body.source=p);let m=VN(),h=null;try{this.#t(u)}catch(g){h=g}return queueMicrotask(()=>{h===null?m.resolve():m.reject(h)}),m.promise}async delete(e,r={}){yn.brandCheck(this,t);let n="Cache.delete";yn.argumentLengthCheck(arguments,1,n),e=yn.converters.RequestInfo(e,n,"request"),r=yn.converters.CacheQueryOptions(r,n,"options");let o=null;if(e instanceof tE){if(o=e[ry],o.method!=="GET"&&!r.ignoreMethod)return!1}else dwe(typeof e=="string"),o=new tE(e)[ry];let s=[],c={type:"delete",request:o,options:r};s.push(c);let l=VN(),u=null,d;try{d=this.#t(s)}catch(p){u=p}return queueMicrotask(()=>{u===null?l.resolve(!!d?.length):l.reject(u)}),l.promise}async keys(e=void 0,r={}){yn.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=yn.converters.RequestInfo(e,n,"request")),r=yn.converters.CacheQueryOptions(r,n,"options");let o=null;if(e!==void 0)if(e instanceof tE){if(o=e[ry],o.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(o=new tE(e)[ry]);let s=VN(),c=[];if(e===void 0)for(let l of this.#e)c.push(l[0]);else{let l=this.#i(o,r);for(let u of l)c.push(u[0])}return queueMicrotask(()=>{let l=[];for(let u of c){let d=rcr(u,new AbortController().signal,"immutable");l.push(d)}s.resolve(Object.freeze(l))}),s.promise}#t(e){let r=this.#e,n=[...r],o=[],s=[];try{for(let c of e){if(c.type!=="delete"&&c.type!=="put")throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(c.type==="delete"&&c.response!=null)throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(c.request,c.options,o).length)throw new DOMException("???","InvalidStateError");let l;if(c.type==="delete"){if(l=this.#i(c.request,c.options),l.length===0)return[];for(let u of l){let d=r.indexOf(u);dwe(d!==-1),r.splice(d,1)}}else if(c.type==="put"){if(c.response==null)throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let u=c.request;if(!Dre(u.url))throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(u.method!=="GET")throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(c.options!=null)throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});l=this.#i(c.request);for(let d of l){let p=r.indexOf(d);dwe(p!==-1),r.splice(p,1)}r.push([c.request,c.response]),o.push([c.request,c.response])}s.push([c.request,c.response])}return s}catch(c){throw this.#e.length=0,this.#e=n,c}}#i(e,r,n){let o=[],s=n??this.#e;for(let c of s){let[l,u]=c;this.#n(e,l,u,r)&&o.push(c)}return o}#n(e,r,n=null,o){let s=new URL(e.url),c=new URL(r.url);if(o?.ignoreSearch&&(c.search="",s.search=""),!Jar(s,c,!0))return!1;if(n==null||o?.ignoreVary||!n.headersList.contains("vary"))return!0;let l=uwe(n.headersList.get("vary"));for(let u of l){if(u==="*")return!1;let d=r.headersList.get(u),p=e.headersList.get(u);if(d!==p)return!1}return!0}#r(e,r,n=1/0){let o=null;if(e!==void 0)if(e instanceof tE){if(o=e[ry],o.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(o=new tE(e)[ry]);let s=[];if(e===void 0)for(let l of this.#e)s.push(l[1]);else{let l=this.#i(o,r);for(let u of l)s.push(u[1])}let c=[];for(let l of s){let u=tcr(l,"immutable");if(c.push(u.clone()),c.length>=n)break}return Object.freeze(c)}};Object.defineProperties(Bre.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:Pk,matchAll:Pk,add:Pk,addAll:Pk,put:Pk,delete:Pk,keys:Pk});var oat=[{key:"ignoreSearch",converter:yn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:yn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"ignoreVary",converter:yn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")}];yn.converters.CacheQueryOptions=yn.dictionaryConverter(oat);yn.converters.MultiCacheQueryOptions=yn.dictionaryConverter([...oat,{key:"cacheName",converter:yn.converters.DOMString}]);yn.converters.Response=yn.interfaceConverter(Zar);yn.converters["sequence<RequestInfo>"]=yn.sequenceConverter(yn.converters.RequestInfo);sat.exports={Cache:Bre}});var lat=W((dCi,cat)=>{"use strict";f();var{kConstruct:jQ}=Pre(),{Cache:Nre}=aat(),{webidl:Kd}=ld(),{kEnumerableProperty:GQ}=ji(),Mre=class t{static{a(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==jQ&&Kd.illegalConstructor(),Kd.util.markAsUncloneable(this)}async match(e,r={}){if(Kd.brandCheck(this,t),Kd.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=Kd.converters.RequestInfo(e),r=Kd.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new Nre(jQ,n).match(e,r)}}else for(let n of this.#e.values()){let s=await new Nre(jQ,n).match(e,r);if(s!==void 0)return s}}async has(e){Kd.brandCheck(this,t);let r="CacheStorage.has";return Kd.argumentLengthCheck(arguments,1,r),e=Kd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){Kd.brandCheck(this,t);let r="CacheStorage.open";if(Kd.argumentLengthCheck(arguments,1,r),e=Kd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let o=this.#e.get(e);return new Nre(jQ,o)}let n=[];return this.#e.set(e,n),new Nre(jQ,n)}async delete(e){Kd.brandCheck(this,t);let r="CacheStorage.delete";return Kd.argumentLengthCheck(arguments,1,r),e=Kd.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return Kd.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(Mre.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:GQ,has:GQ,open:GQ,delete:GQ,keys:GQ});cat.exports={CacheStorage:Mre}});var dat=W((mCi,uat)=>{"use strict";f();uat.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var fwe=W((gCi,gat)=>{"use strict";f();function ocr(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}a(ocr,"isCTLExcludingHtab");function fat(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}a(fat,"validateCookieName");function pat(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}a(pat,"validateCookieValue");function mat(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}a(mat,"validateCookiePath");function scr(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}a(scr,"validateCookieDomain");var acr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ccr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Lre=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function hat(t){return typeof t=="number"&&(t=new Date(t)),`${acr[t.getUTCDay()]}, ${Lre[t.getUTCDate()]} ${ccr[t.getUTCMonth()]} ${t.getUTCFullYear()} ${Lre[t.getUTCHours()]}:${Lre[t.getUTCMinutes()]}:${Lre[t.getUTCSeconds()]} GMT`}a(hat,"toIMFDate");function lcr(t){if(t<0)throw new Error("Invalid cookie max-age")}a(lcr,"validateCookieMaxAge");function ucr(t){if(t.name.length===0)return null;fat(t.name),pat(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(lcr(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(scr(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(mat(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${hat(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...o]=r.split("=");e.push(`${n.trim()}=${o.join("=")}`)}return e.join("; ")}a(ucr,"stringify");gat.exports={isCTLExcludingHtab:ocr,validateCookieName:fat,validateCookiePath:mat,validateCookieValue:pat,toIMFDate:hat,stringify:ucr}});var yat=W((CCi,Aat)=>{"use strict";f();var{maxNameValuePairSize:dcr,maxAttributeValueSize:fcr}=dat(),{isCTLExcludingHtab:pcr}=fwe(),{collectASequenceOfCodePointsFast:Fre}=Up(),mcr=require("node:assert");function hcr(t){if(pcr(t))return null;let e="",r="",n="",o="";if(t.includes(";")){let s={position:0};e=Fre(";",t,s),r=t.slice(s.position)}else e=t;if(!e.includes("="))o=e;else{let s={position:0};n=Fre("=",e,s),o=e.slice(s.position+1)}return n=n.trim(),o=o.trim(),n.length+o.length>dcr?null:{name:n,value:o,...zN(r)}}a(hcr,"parseSetCookie");function zN(t,e={}){if(t.length===0)return e;mcr(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=Fre(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",o="";if(r.includes("=")){let c={position:0};n=Fre("=",r,c),o=r.slice(c.position+1)}else n=r;if(n=n.trim(),o=o.trim(),o.length>fcr)return zN(t,e);let s=n.toLowerCase();if(s==="expires"){let c=new Date(o);e.expires=c}else if(s==="max-age"){let c=o.charCodeAt(0);if((c<48||c>57)&&o[0]!=="-"||!/^\d+$/.test(o))return zN(t,e);let l=Number(o);e.maxAge=l}else if(s==="domain"){let c=o;c[0]==="."&&(c=c.slice(1)),c=c.toLowerCase(),e.domain=c}else if(s==="path"){let c="";o.length===0||o[0]!=="/"?c="/":c=o,e.path=c}else if(s==="secure")e.secure=!0;else if(s==="httponly")e.httpOnly=!0;else if(s==="samesite"){let c="Default",l=o.toLowerCase();l.includes("none")&&(c="None"),l.includes("strict")&&(c="Strict"),l.includes("lax")&&(c="Lax"),e.sameSite=c}else e.unparsed??=[],e.unparsed.push(`${n}=${o}`);return zN(t,e)}a(zN,"parseUnparsedAttributes");Aat.exports={parseSetCookie:hcr,parseUnparsedAttributes:zN}});var xat=W((ECi,vat)=>{"use strict";f();var{parseSetCookie:gcr}=yat(),{stringify:Acr}=fwe(),{webidl:go}=ld(),{Headers:Ore}=wk();function ycr(t){go.argumentLengthCheck(arguments,1,"getCookies"),go.brandCheck(t,Ore,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[o,...s]=n.split("=");r[o.trim()]=s.join("=")}return r}a(ycr,"getCookies");function Ccr(t,e,r){go.brandCheck(t,Ore,{strict:!1});let n="deleteCookie";go.argumentLengthCheck(arguments,2,n),e=go.converters.DOMString(e,n,"name"),r=go.converters.DeleteCookieAttributes(r),Cat(t,{name:e,value:"",expires:new Date(0),...r})}a(Ccr,"deleteCookie");function vcr(t){go.argumentLengthCheck(arguments,1,"getSetCookies"),go.brandCheck(t,Ore,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>gcr(r)):[]}a(vcr,"getSetCookies");function Cat(t,e){go.argumentLengthCheck(arguments,2,"setCookie"),go.brandCheck(t,Ore,{strict:!1}),e=go.converters.Cookie(e);let r=Acr(e);r&&t.append("Set-Cookie",r)}a(Cat,"setCookie");go.converters.DeleteCookieAttributes=go.dictionaryConverter([{converter:go.nullableConverter(go.converters.DOMString),key:"path",defaultValue:a(()=>null,"defaultValue")},{converter:go.nullableConverter(go.converters.DOMString),key:"domain",defaultValue:a(()=>null,"defaultValue")}]);go.converters.Cookie=go.dictionaryConverter([{converter:go.converters.DOMString,key:"name"},{converter:go.converters.DOMString,key:"value"},{converter:go.nullableConverter(t=>typeof t=="number"?go.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:a(()=>null,"defaultValue")},{converter:go.nullableConverter(go.converters["long long"]),key:"maxAge",defaultValue:a(()=>null,"defaultValue")},{converter:go.nullableConverter(go.converters.DOMString),key:"domain",defaultValue:a(()=>null,"defaultValue")},{converter:go.nullableConverter(go.converters.DOMString),key:"path",defaultValue:a(()=>null,"defaultValue")},{converter:go.nullableConverter(go.converters.boolean),key:"secure",defaultValue:a(()=>null,"defaultValue")},{converter:go.nullableConverter(go.converters.boolean),key:"httpOnly",defaultValue:a(()=>null,"defaultValue")},{converter:go.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:go.sequenceConverter(go.converters.DOMString),key:"unparsed",defaultValue:a(()=>new Array(0),"defaultValue")}]);vat.exports={getCookies:ycr,deleteCookie:Ccr,getSetCookies:vcr,setCookie:Cat}});var YN=W((TCi,bat)=>{"use strict";f();var{webidl:hn}=ld(),{kEnumerableProperty:$p}=ji(),{kConstruct:Eat}=Ua(),{MessagePort:xcr}=require("node:worker_threads"),KN=class t extends Event{static{a(this,"MessageEvent")}#e;constructor(e,r={}){if(e===Eat){super(arguments[1],arguments[2]),hn.util.markAsUncloneable(this);return}let n="MessageEvent constructor";hn.argumentLengthCheck(arguments,1,n),e=hn.converters.DOMString(e,n,"type"),r=hn.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,hn.util.markAsUncloneable(this)}get data(){return hn.brandCheck(this,t),this.#e.data}get origin(){return hn.brandCheck(this,t),this.#e.origin}get lastEventId(){return hn.brandCheck(this,t),this.#e.lastEventId}get source(){return hn.brandCheck(this,t),this.#e.source}get ports(){return hn.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,o=null,s="",c="",l=null,u=[]){return hn.brandCheck(this,t),hn.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:o,origin:s,lastEventId:c,source:l,ports:u})}static createFastMessageEvent(e,r){let n=new t(Eat,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:Ecr}=KN;delete KN.createFastMessageEvent;var Qre=class t extends Event{static{a(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";hn.argumentLengthCheck(arguments,1,n),e=hn.converters.DOMString(e,n,"type"),r=hn.converters.CloseEventInit(r),super(e,r),this.#e=r,hn.util.markAsUncloneable(this)}get wasClean(){return hn.brandCheck(this,t),this.#e.wasClean}get code(){return hn.brandCheck(this,t),this.#e.code}get reason(){return hn.brandCheck(this,t),this.#e.reason}},Ure=class t extends Event{static{a(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";hn.argumentLengthCheck(arguments,1,n),super(e,r),hn.util.markAsUncloneable(this),e=hn.converters.DOMString(e,n,"type"),r=hn.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return hn.brandCheck(this,t),this.#e.message}get filename(){return hn.brandCheck(this,t),this.#e.filename}get lineno(){return hn.brandCheck(this,t),this.#e.lineno}get colno(){return hn.brandCheck(this,t),this.#e.colno}get error(){return hn.brandCheck(this,t),this.#e.error}};Object.defineProperties(KN.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:$p,origin:$p,lastEventId:$p,source:$p,ports:$p,initMessageEvent:$p});Object.defineProperties(Qre.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:$p,code:$p,wasClean:$p});Object.defineProperties(Ure.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:$p,filename:$p,lineno:$p,colno:$p,error:$p});hn.converters.MessagePort=hn.interfaceConverter(xcr);hn.converters["sequence<MessagePort>"]=hn.sequenceConverter(hn.converters.MessagePort);var pwe=[{key:"bubbles",converter:hn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"cancelable",converter:hn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"composed",converter:hn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")}];hn.converters.MessageEventInit=hn.dictionaryConverter([...pwe,{key:"data",converter:hn.converters.any,defaultValue:a(()=>null,"defaultValue")},{key:"origin",converter:hn.converters.USVString,defaultValue:a(()=>"","defaultValue")},{key:"lastEventId",converter:hn.converters.DOMString,defaultValue:a(()=>"","defaultValue")},{key:"source",converter:hn.nullableConverter(hn.converters.MessagePort),defaultValue:a(()=>null,"defaultValue")},{key:"ports",converter:hn.converters["sequence<MessagePort>"],defaultValue:a(()=>new Array(0),"defaultValue")}]);hn.converters.CloseEventInit=hn.dictionaryConverter([...pwe,{key:"wasClean",converter:hn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"code",converter:hn.converters["unsigned short"],defaultValue:a(()=>0,"defaultValue")},{key:"reason",converter:hn.converters.USVString,defaultValue:a(()=>"","defaultValue")}]);hn.converters.ErrorEventInit=hn.dictionaryConverter([...pwe,{key:"message",converter:hn.converters.DOMString,defaultValue:a(()=>"","defaultValue")},{key:"filename",converter:hn.converters.USVString,defaultValue:a(()=>"","defaultValue")},{key:"lineno",converter:hn.converters["unsigned long"],defaultValue:a(()=>0,"defaultValue")},{key:"colno",converter:hn.converters["unsigned long"],defaultValue:a(()=>0,"defaultValue")},{key:"error",converter:hn.converters.any}]);bat.exports={MessageEvent:KN,CloseEvent:Qre,ErrorEvent:Ure,createFastMessageEvent:Ecr}});var Dk=W((SCi,Iat)=>{"use strict";f();var bcr="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",Icr={enumerable:!0,writable:!1,configurable:!1},Tcr={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},wcr={NOT_SENT:0,PROCESSING:1,SENT:2},_cr={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},Scr=2**16-1,Rcr={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},kcr=Buffer.allocUnsafe(0),Pcr={string:1,typedArray:2,arrayBuffer:3,blob:4};Iat.exports={uid:bcr,sentCloseFrameState:wcr,staticPropertyDescriptors:Icr,states:Tcr,opcodes:_cr,maxUnsigned16Bit:Scr,parserStates:Rcr,emptyBuffer:kcr,sendHints:Pcr}});var VQ=W((kCi,Tat)=>{"use strict";f();Tat.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var YQ=W((DCi,Nat)=>{"use strict";f();var{kReadyState:zQ,kController:Dcr,kResponse:Bcr,kBinaryType:Ncr,kWebSocketURL:Mcr}=VQ(),{states:KQ,opcodes:ww}=Dk(),{ErrorEvent:Lcr,createFastMessageEvent:Fcr}=YN(),{isUtf8:Ocr}=require("node:buffer"),{collectASequenceOfCodePointsFast:Qcr,removeHTTPWhitespace:wat}=Up();function Ucr(t){return t[zQ]===KQ.CONNECTING}a(Ucr,"isConnecting");function qcr(t){return t[zQ]===KQ.OPEN}a(qcr,"isEstablished");function Hcr(t){return t[zQ]===KQ.CLOSING}a(Hcr,"isClosing");function Wcr(t){return t[zQ]===KQ.CLOSED}a(Wcr,"isClosed");function mwe(t,e,r=(o,s)=>new Event(o,s),n={}){let o=r(t,n);e.dispatchEvent(o)}a(mwe,"fireEvent");function $cr(t,e,r){if(t[zQ]!==KQ.OPEN)return;let n;if(e===ww.TEXT)try{n=Bat(r)}catch{Sat(t,"Received invalid UTF-8 in text frame.");return}else e===ww.BINARY&&(t[Ncr]==="blob"?n=new Blob([r]):n=jcr(r));mwe("message",t,Fcr,{origin:t[Mcr].origin,data:n})}a($cr,"websocketMessageReceived");function jcr(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}a(jcr,"toArrayBuffer");function Gcr(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}a(Gcr,"isValidSubprotocol");function Vcr(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}a(Vcr,"isValidStatusCode");function Sat(t,e){let{[Dcr]:r,[Bcr]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&mwe("error",t,(o,s)=>new Lcr(o,s),{error:new Error(e),message:e})}a(Sat,"failWebsocketConnection");function Rat(t){return t===ww.CLOSE||t===ww.PING||t===ww.PONG}a(Rat,"isControlFrame");function kat(t){return t===ww.CONTINUATION}a(kat,"isContinuationFrame");function Pat(t){return t===ww.TEXT||t===ww.BINARY}a(Pat,"isTextBinaryFrame");function zcr(t){return Pat(t)||kat(t)||Rat(t)}a(zcr,"isValidOpcode");function Kcr(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=Qcr(";",t,e),[o,s=""]=n.split("=");r.set(wat(o,!0,!1),wat(s,!1,!0)),e.position++}return r}a(Kcr,"parseExtensions");function Ycr(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}a(Ycr,"isValidClientWindowBits");var Dat=typeof process.versions.icu=="string",_at=Dat?new TextDecoder("utf-8",{fatal:!0}):void 0,Bat=Dat?_at.decode.bind(_at):function(t){if(Ocr(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};Nat.exports={isConnecting:Ucr,isEstablished:qcr,isClosing:Hcr,isClosed:Wcr,fireEvent:mwe,isValidSubprotocol:Gcr,isValidStatusCode:Vcr,failWebsocketConnection:Sat,websocketMessageReceived:$cr,utf8Decode:Bat,isControlFrame:Rat,isContinuationFrame:kat,isTextBinaryFrame:Pat,isValidOpcode:zcr,parseExtensions:Kcr,isValidClientWindowBits:Ycr}});var Hre=W((MCi,Mat)=>{"use strict";f();var{maxUnsigned16Bit:Jcr}=Dk(),qre=16386,hwe,JQ=null,JN=qre;try{hwe=require("node:crypto")}catch{hwe={randomFillSync:a(function(e,r,n){for(let o=0;o<e.length;++o)e[o]=Math.random()*255|0;return e},"randomFillSync")}}function Xcr(){return JN===qre&&(JN=0,hwe.randomFillSync(JQ??=Buffer.allocUnsafe(qre),0,qre)),[JQ[JN++],JQ[JN++],JQ[JN++],JQ[JN++]]}a(Xcr,"generateMask");var gwe=class{static{a(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=Xcr(),o=r?.byteLength??0,s=o,c=6;o>Jcr?(c+=8,s=127):o>125&&(c+=2,s=126);let l=Buffer.allocUnsafe(o+c);l[0]=l[1]=0,l[0]|=128,l[0]=(l[0]&240)+e;l[c-4]=n[0],l[c-3]=n[1],l[c-2]=n[2],l[c-1]=n[3],l[1]=s,s===126?l.writeUInt16BE(o,2):s===127&&(l[2]=l[3]=0,l.writeUIntBE(o,4,6)),l[1]|=128;for(let u=0;u<o;++u)l[c+u]=r[u]^n[u&3];return l}};Mat.exports={WebsocketFrameSend:gwe}});var ywe=W((OCi,Hat)=>{"use strict";f();var{uid:Zcr,states:XQ,sentCloseFrameState:Wre,emptyBuffer:elr,opcodes:tlr}=Dk(),{kReadyState:ZQ,kSentClose:$re,kByteParser:Fat,kReceivedClose:Lat,kResponse:Oat}=VQ(),{fireEvent:rlr,failWebsocketConnection:_w,isClosing:nlr,isClosed:ilr,isEstablished:olr,parseExtensions:slr}=YQ(),{channels:XN}=dN(),{CloseEvent:alr}=YN(),{makeRequest:clr}=$N(),{fetching:llr}=WQ(),{Headers:ulr,getHeadersList:dlr}=wk(),{getDecodeSplit:flr}=nm(),{WebsocketFrameSend:plr}=Hre(),Awe;try{Awe=require("node:crypto")}catch{}function mlr(t,e,r,n,o,s){let c=t;c.protocol=t.protocol==="ws:"?"http:":"https:";let l=clr({urlList:[c],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(s.headers){let m=dlr(new ulr(s.headers));l.headersList=m}let u=Awe.randomBytes(16).toString("base64");l.headersList.append("sec-websocket-key",u),l.headersList.append("sec-websocket-version","13");for(let m of e)l.headersList.append("sec-websocket-protocol",m);return l.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),llr({request:l,useParallelQueue:!0,dispatcher:s.dispatcher,processResponse(m){if(m.type==="error"||m.status!==101){_w(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!m.headersList.get("Sec-WebSocket-Protocol")){_w(n,"Server did not respond with sent protocols.");return}if(m.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){_w(n,'Server did not set Upgrade header to "websocket".');return}if(m.headersList.get("Connection")?.toLowerCase()!=="upgrade"){_w(n,'Server did not set Connection header to "upgrade".');return}let h=m.headersList.get("Sec-WebSocket-Accept"),g=Awe.createHash("sha1").update(u+Zcr).digest("base64");if(h!==g){_w(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let A=m.headersList.get("Sec-WebSocket-Extensions"),y;if(A!==null&&(y=slr(A),!y.has("permessage-deflate"))){_w(n,"Sec-WebSocket-Extensions header does not match.");return}let v=m.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!flr("sec-websocket-protocol",l.headersList).includes(v)){_w(n,"Protocol was not set in the opening handshake.");return}m.socket.on("data",Qat),m.socket.on("close",Uat),m.socket.on("error",qat),XN.open.hasSubscribers&&XN.open.publish({address:m.socket.address(),protocol:v,extensions:A}),o(m,y)}})}a(mlr,"establishWebSocketConnection");function hlr(t,e,r,n){if(!(nlr(t)||ilr(t)))if(!olr(t))_w(t,"Connection was closed before it was established."),t[ZQ]=XQ.CLOSING;else if(t[$re]===Wre.NOT_SENT){t[$re]=Wre.PROCESSING;let o=new plr;e!==void 0&&r===void 0?(o.frameData=Buffer.allocUnsafe(2),o.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(o.frameData=Buffer.allocUnsafe(2+n),o.frameData.writeUInt16BE(e,0),o.frameData.write(r,2,"utf-8")):o.frameData=elr,t[Oat].socket.write(o.createFrame(tlr.CLOSE)),t[$re]=Wre.SENT,t[ZQ]=XQ.CLOSING}else t[ZQ]=XQ.CLOSING}a(hlr,"closeWebSocketConnection");function Qat(t){this.ws[Fat].write(t)||this.pause()}a(Qat,"onSocketData");function Uat(){let{ws:t}=this,{[Oat]:e}=t;e.socket.off("data",Qat),e.socket.off("close",Uat),e.socket.off("error",qat);let r=t[$re]===Wre.SENT&&t[Lat],n=1005,o="",s=t[Fat].closingInfo;s&&!s.error?(n=s.code??1005,o=s.reason):t[Lat]||(n=1006),t[ZQ]=XQ.CLOSED,rlr("close",t,(c,l)=>new alr(c,l),{wasClean:r,code:n,reason:o}),XN.close.hasSubscribers&&XN.close.publish({websocket:t,code:n,reason:o})}a(Uat,"onSocketClose");function qat(t){let{ws:e}=this;e[ZQ]=XQ.CLOSING,XN.socketError.hasSubscribers&&XN.socketError.publish(t),this.destroy()}a(qat,"onSocketError");Hat.exports={establishWebSocketConnection:mlr,closeWebSocketConnection:hlr}});var $at=W((qCi,Wat)=>{"use strict";f();var{createInflateRaw:glr,Z_DEFAULT_WINDOWBITS:Alr}=require("node:zlib"),{isValidClientWindowBits:ylr}=YQ(),Clr=Buffer.from([0,0,255,255]),jre=Symbol("kBuffer"),Gre=Symbol("kLength"),Cwe=class{static{a(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let o=Alr;if(this.#t.serverMaxWindowBits){if(!ylr(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}o=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=glr({windowBits:o}),this.#e[jre]=[],this.#e[Gre]=0,this.#e.on("data",s=>{this.#e[jre].push(s),this.#e[Gre]+=s.length}),this.#e.on("error",s=>{this.#e=null,n(s)})}this.#e.write(e),r&&this.#e.write(Clr),this.#e.flush(()=>{let o=Buffer.concat(this.#e[jre],this.#e[Gre]);this.#e[jre].length=0,this.#e[Gre]=0,n(null,o)})}};Wat.exports={PerMessageDeflate:Cwe}});var tct=W(($Ci,ect)=>{"use strict";f();var{Writable:vlr}=require("node:stream"),xlr=require("node:assert"),{parserStates:jp,opcodes:ZN,states:Elr,emptyBuffer:jat,sentCloseFrameState:Gat}=Dk(),{kReadyState:blr,kSentClose:Vat,kResponse:zat,kReceivedClose:Kat}=VQ(),{channels:Vre}=dN(),{isValidStatusCode:Ilr,isValidOpcode:Tlr,failWebsocketConnection:zh,websocketMessageReceived:Yat,utf8Decode:wlr,isControlFrame:Jat,isTextBinaryFrame:vwe,isContinuationFrame:_lr}=YQ(),{WebsocketFrameSend:Xat}=Hre(),{closeWebSocketConnection:Zat}=ywe(),{PerMessageDeflate:Slr}=$at(),xwe=class extends vlr{static{a(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=jp.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new Slr(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===jp.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,o=r[0]&15,s=(r[1]&128)===128,c=!n&&o!==ZN.CONTINUATION,l=r[1]&127,u=r[0]&64,d=r[0]&32,p=r[0]&16;if(!Tlr(o))return zh(this.ws,"Invalid opcode received"),e();if(s)return zh(this.ws,"Frame cannot be masked"),e();if(u!==0&&!this.#s.has("permessage-deflate")){zh(this.ws,"Expected RSV1 to be clear.");return}if(d!==0||p!==0){zh(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(c&&!vwe(o)){zh(this.ws,"Invalid frame type was fragmented.");return}if(vwe(o)&&this.#o.length>0){zh(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&c){zh(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((l>125||c)&&Jat(o)){zh(this.ws,"Control frame either too large or fragmented");return}if(_lr(o)&&this.#o.length===0&&!this.#r.compressed){zh(this.ws,"Unexpected continuation frame");return}l<=125?(this.#r.payloadLength=l,this.#n=jp.READ_DATA):l===126?this.#n=jp.PAYLOADLENGTH_16:l===127&&(this.#n=jp.PAYLOADLENGTH_64),vwe(o)&&(this.#r.binaryType=o,this.#r.compressed=u!==0),this.#r.opcode=o,this.#r.masked=s,this.#r.fin=n,this.#r.fragmented=c}else if(this.#n===jp.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=jp.READ_DATA}else if(this.#n===jp.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){zh(this.ws,"Received payload length > 2^31 bytes.");return}let o=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+o,this.#n=jp.READ_DATA}else if(this.#n===jp.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(Jat(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=jp.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,o)=>{if(n){Zat(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(o),!this.#r.fin){this.#n=jp.INFO,this.#i=!0,this.run(e);return}Yat(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=jp.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);Yat(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=jp.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return jat;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let o=this.#e[0],{length:s}=o;if(s+n===e){r.set(this.#e.shift(),n);break}else if(s+n>e){r.set(o.subarray(0,e-n),n),this.#e[0]=o.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=o.length}return this.#t-=e,r}parseCloseBody(e){xlr(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!Ilr(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=wlr(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===ZN.CLOSE){if(n===1)return zh(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:o,reason:s}=this.#r.closeInfo;return Zat(this.ws,o,s,s.length),zh(this.ws,s),!1}if(this.ws[Vat]!==Gat.SENT){let o=jat;this.#r.closeInfo.code&&(o=Buffer.allocUnsafe(2),o.writeUInt16BE(this.#r.closeInfo.code,0));let s=new Xat(o);this.ws[zat].socket.write(s.createFrame(ZN.CLOSE),c=>{c||(this.ws[Vat]=Gat.SENT)})}return this.ws[blr]=Elr.CLOSING,this.ws[Kat]=!0,!1}else if(r===ZN.PING){if(!this.ws[Kat]){let o=new Xat(e);this.ws[zat].socket.write(o.createFrame(ZN.PONG)),Vre.ping.hasSubscribers&&Vre.ping.publish({payload:e})}}else r===ZN.PONG&&Vre.pong.hasSubscribers&&Vre.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};ect.exports={ByteParser:xwe}});var sct=W((VCi,oct)=>{"use strict";f();var{WebsocketFrameSend:Rlr}=Hre(),{opcodes:rct,sendHints:e8}=Dk(),klr=BIe(),nct=Buffer[Symbol.species],Ewe=class{static{a(this,"SendQueue")}#e=new klr;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==e8.blob){let s=ict(e,n);if(!this.#t)this.#i.write(s,r);else{let c={promise:null,callback:r,frame:s};this.#e.push(c)}return}let o={promise:e.arrayBuffer().then(s=>{o.promise=null,o.frame=ict(s,n)}),callback:r,frame:null};this.#e.push(o),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function ict(t,e){return new Rlr(Plr(t,e)).createFrame(e===e8.string?rct.TEXT:rct.BINARY)}a(ict,"createFrame");function Plr(t,e){switch(e){case e8.string:return Buffer.from(t);case e8.arrayBuffer:case e8.blob:return new nct(t);case e8.typedArray:return new nct(t.buffer,t.byteOffset,t.byteLength)}}a(Plr,"toBuffer");oct.exports={SendQueue:Ewe}});var hct=W((YCi,mct)=>{"use strict";f();var{webidl:ti}=ld(),{URLSerializer:Dlr}=Up(),{environmentSettingsObject:act}=nm(),{staticPropertyDescriptors:Sw,states:eU,sentCloseFrameState:Blr,sendHints:zre}=Dk(),{kWebSocketURL:cct,kReadyState:bwe,kController:Nlr,kBinaryType:Kre,kResponse:lct,kSentClose:Mlr,kByteParser:Llr}=VQ(),{isConnecting:Flr,isEstablished:Olr,isClosing:Qlr,isValidSubprotocol:Ulr,fireEvent:uct}=YQ(),{establishWebSocketConnection:qlr,closeWebSocketConnection:dct}=ywe(),{ByteParser:Hlr}=tct(),{kEnumerableProperty:Kh,isBlobLike:fct}=ji(),{getGlobalDispatcher:Wlr}=lre(),{types:pct}=require("node:util"),{ErrorEvent:$lr,CloseEvent:jlr}=YN(),{SendQueue:Glr}=sct(),um=class t extends EventTarget{static{a(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),ti.util.markAsUncloneable(this);let n="WebSocket constructor";ti.argumentLengthCheck(arguments,1,n);let o=ti.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=ti.converters.USVString(e,n,"url"),r=o.protocols;let s=act.settingsObject.baseUrl,c;try{c=new URL(e,s)}catch(u){throw new DOMException(u,"SyntaxError")}if(c.protocol==="http:"?c.protocol="ws:":c.protocol==="https:"&&(c.protocol="wss:"),c.protocol!=="ws:"&&c.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${c.protocol}`,"SyntaxError");if(c.hash||c.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(u=>u.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(u=>Ulr(u)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[cct]=new URL(c.href);let l=act.settingsObject;this[Nlr]=qlr(c,r,l,this,(u,d)=>this.#o(u,d),o),this[bwe]=t.CONNECTING,this[Mlr]=Blr.NOT_SENT,this[Kre]="blob"}close(e=void 0,r=void 0){ti.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=ti.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=ti.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let o=0;if(r!==void 0&&(o=Buffer.byteLength(r),o>123))throw new DOMException(`Reason must be less than 123 bytes; received ${o}`,"SyntaxError");dct(this,e,r,o)}send(e){ti.brandCheck(this,t);let r="WebSocket.send";if(ti.argumentLengthCheck(arguments,1,r),e=ti.converters.WebSocketSendData(e,r,"data"),Flr(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!Olr(this)||Qlr(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},zre.string)}else pct.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},zre.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},zre.typedArray)):fct(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},zre.blob))}get readyState(){return ti.brandCheck(this,t),this[bwe]}get bufferedAmount(){return ti.brandCheck(this,t),this.#t}get url(){return ti.brandCheck(this,t),Dlr(this[cct])}get extensions(){return ti.brandCheck(this,t),this.#n}get protocol(){return ti.brandCheck(this,t),this.#i}get onopen(){return ti.brandCheck(this,t),this.#e.open}set onopen(e){ti.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return ti.brandCheck(this,t),this.#e.error}set onerror(e){ti.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return ti.brandCheck(this,t),this.#e.close}set onclose(e){ti.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return ti.brandCheck(this,t),this.#e.message}set onmessage(e){ti.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return ti.brandCheck(this,t),this[Kre]}set binaryType(e){ti.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[Kre]="blob":this[Kre]=e}#o(e,r){this[lct]=e;let n=new Hlr(this,r);n.on("drain",Vlr),n.on("error",zlr.bind(this)),e.socket.ws=this,this[Llr]=n,this.#r=new Glr(e.socket),this[bwe]=eU.OPEN;let o=e.headersList.get("sec-websocket-extensions");o!==null&&(this.#n=o);let s=e.headersList.get("sec-websocket-protocol");s!==null&&(this.#i=s),uct("open",this)}};um.CONNECTING=um.prototype.CONNECTING=eU.CONNECTING;um.OPEN=um.prototype.OPEN=eU.OPEN;um.CLOSING=um.prototype.CLOSING=eU.CLOSING;um.CLOSED=um.prototype.CLOSED=eU.CLOSED;Object.defineProperties(um.prototype,{CONNECTING:Sw,OPEN:Sw,CLOSING:Sw,CLOSED:Sw,url:Kh,readyState:Kh,bufferedAmount:Kh,onopen:Kh,onerror:Kh,onclose:Kh,close:Kh,onmessage:Kh,binaryType:Kh,send:Kh,extensions:Kh,protocol:Kh,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(um,{CONNECTING:Sw,OPEN:Sw,CLOSING:Sw,CLOSED:Sw});ti.converters["sequence<DOMString>"]=ti.sequenceConverter(ti.converters.DOMString);ti.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return ti.util.Type(t)==="Object"&&Symbol.iterator in t?ti.converters["sequence<DOMString>"](t):ti.converters.DOMString(t,e,r)};ti.converters.WebSocketInit=ti.dictionaryConverter([{key:"protocols",converter:ti.converters["DOMString or sequence<DOMString>"],defaultValue:a(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:ti.converters.any,defaultValue:a(()=>Wlr(),"defaultValue")},{key:"headers",converter:ti.nullableConverter(ti.converters.HeadersInit)}]);ti.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return ti.util.Type(t)==="Object"&&!(Symbol.iterator in t)?ti.converters.WebSocketInit(t):{protocols:ti.converters["DOMString or sequence<DOMString>"](t)}};ti.converters.WebSocketSendData=function(t){if(ti.util.Type(t)==="Object"){if(fct(t))return ti.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||pct.isArrayBuffer(t))return ti.converters.BufferSource(t)}return ti.converters.USVString(t)};function Vlr(){this.ws[lct].socket.resume()}a(Vlr,"onParserDrain");function zlr(t){let e,r;t instanceof jlr?(e=t.reason,r=t.code):e=t.message,uct("error",this,()=>new $lr("error",{error:t,message:e})),dct(this,r)}a(zlr,"onParserError");mct.exports={WebSocket:um}});var Iwe=W((ZCi,gct)=>{"use strict";f();function Klr(t){return t.indexOf("\0")===-1}a(Klr,"isValidLastEventId");function Ylr(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}a(Ylr,"isASCIINumber");function Jlr(t){return new Promise(e=>{setTimeout(e,t).unref()})}a(Jlr,"delay");gct.exports={isValidLastEventId:Klr,isASCIINumber:Ylr,delay:Jlr}});var vct=W((rvi,Cct)=>{"use strict";f();var{Transform:Xlr}=require("node:stream"),{isASCIINumber:Act,isValidLastEventId:yct}=Iwe(),rE=[239,187,191],Twe=10,Yre=13,Zlr=58,eur=32,wwe=class extends Xlr{static{a(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===rE[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===rE[0]&&this.buffer[1]===rE[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===rE[0]&&this.buffer[1]===rE[1]&&this.buffer[2]===rE[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===rE[0]&&this.buffer[1]===rE[1]&&this.buffer[2]===rE[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===Twe){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===Twe||this.buffer[this.pos]===Yre){this.buffer[this.pos]===Yre&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===Twe||this.buffer[this.pos]===Yre){this.buffer[this.pos]===Yre&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(Zlr);if(n===0)return;let o="",s="";if(n!==-1){o=e.subarray(0,n).toString("utf8");let c=n+1;e[c]===eur&&++c,s=e.subarray(c).toString("utf8")}else o=e.toString("utf8"),s="";switch(o){case"data":r[o]===void 0?r[o]=s:r[o]+=`
${s}`;break;case"retry":Act(s)&&(r[o]=s);break;case"id":yct(s)&&(r[o]=s);break;case"event":s.length>0&&(r[o]=s);break}}processEvent(e){e.retry&&Act(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&yct(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};Cct.exports={EventSourceStream:wwe}});var Sct=W((ovi,_ct)=>{"use strict";f();var{pipeline:tur}=require("node:stream"),{fetching:rur}=WQ(),{makeRequest:nur}=$N(),{webidl:nE}=ld(),{EventSourceStream:iur}=vct(),{parseMIMEType:our}=Up(),{createFastMessageEvent:sur}=YN(),{isNetworkError:xct}=qQ(),{delay:aur}=Iwe(),{kEnumerableProperty:Bk}=ji(),{environmentSettingsObject:Ect}=nm(),bct=!1,Ict=3e3,tU=0,Tct=1,rU=2,cur="anonymous",lur="use-credentials",t8=class t extends EventTarget{static{a(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=tU;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),nE.util.markAsUncloneable(this);let n="EventSource constructor";nE.argumentLengthCheck(arguments,1,n),bct||(bct=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=nE.converters.USVString(e,n,"url"),r=nE.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:Ict};let o=Ect,s;try{s=new URL(e,o.settingsObject.baseUrl),this.#a.origin=s.origin}catch(u){throw new DOMException(u,"SyntaxError")}this.#t=s.href;let c=cur;r.withCredentials&&(c=lur,this.#i=!0);let l={redirect:"follow",keepalive:!0,mode:"cors",credentials:c==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};l.client=Ect.settingsObject,l.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],l.cache="no-store",l.initiator="other",l.urlList=[new URL(this.#t)],this.#r=nur(l),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===rU)return;this.#n=tU;let e={request:this.#r,dispatcher:this.#s},r=a(n=>{xct(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(xct(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let o=n.headersList.get("content-type",!0),s=o!==null?our(o):"failure",c=s!=="failure"&&s.essence==="text/event-stream";if(n.status!==200||c===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=Tct,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let l=new iur({eventSourceSettings:this.#a,push:a(u=>{this.dispatchEvent(sur(u.type,u.options))},"push")});tur(n.body.stream,l,u=>{u?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=rur(e)}async#l(){this.#n!==rU&&(this.#n=tU,this.dispatchEvent(new Event("error")),await aur(this.#a.reconnectionTime),this.#n===tU&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){nE.brandCheck(this,t),this.#n!==rU&&(this.#n=rU,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},wct={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:tU,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:Tct,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:rU,writable:!1}};Object.defineProperties(t8,wct);Object.defineProperties(t8.prototype,wct);Object.defineProperties(t8.prototype,{close:Bk,onerror:Bk,onmessage:Bk,onopen:Bk,readyState:Bk,url:Bk,withCredentials:Bk});nE.converters.EventSourceInitDict=nE.dictionaryConverter([{key:"withCredentials",converter:nE.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"dispatcher",converter:nE.converters.any}]);_ct.exports={EventSource:t8,defaultReconnectionTime:Ict}});var Dct=W((cvi,$n)=>{"use strict";f();var uur=wQ(),Rct=iQ(),dur=PN(),fur=Lnt(),pur=DN(),mur=JIe(),hur=Znt(),gur=oit(),kct=Xo(),Xre=ji(),{InvalidArgumentError:Jre}=kct,r8=jit(),Aur=sQ(),yur=DTe(),Cur=wot(),vur=MTe(),xur=CTe(),Eur=Zte(),{getGlobalDispatcher:Pct,setGlobalDispatcher:bur}=lre(),Iur=ure(),Tur=qte(),wur=Hte();Object.assign(Rct.prototype,r8);$n.exports.Dispatcher=Rct;$n.exports.Client=uur;$n.exports.Pool=dur;$n.exports.BalancedPool=fur;$n.exports.Agent=pur;$n.exports.ProxyAgent=mur;$n.exports.EnvHttpProxyAgent=hur;$n.exports.RetryAgent=gur;$n.exports.RetryHandler=Eur;$n.exports.DecoratorHandler=Iur;$n.exports.RedirectHandler=Tur;$n.exports.createRedirectInterceptor=wur;$n.exports.interceptors={redirect:Bot(),retry:Mot(),dump:Fot(),dns:Uot()};$n.exports.buildConnector=Aur;$n.exports.errors=kct;$n.exports.util={parseHeaders:Xre.parseHeaders,headerNameToString:Xre.headerNameToString};function nU(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new Jre("invalid url");if(r!=null&&typeof r!="object")throw new Jre("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new Jre("invalid opts.path");let c=r.path;r.path.startsWith("/")||(c=`/${c}`),e=new URL(Xre.parseOrigin(e).origin+c)}else r||(r=typeof e=="object"?e:{}),e=Xre.parseURL(e);let{agent:o,dispatcher:s=Pct()}=r;if(o)throw new Jre("unsupported opts.agent. Did you mean opts.client?");return t.call(s,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}a(nU,"makeDispatcher");$n.exports.setGlobalDispatcher=bur;$n.exports.getGlobalDispatcher=Pct;var _ur=WQ().fetch;$n.exports.fetch=a(async function(e,r=void 0){try{return await _ur(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");$n.exports.Headers=wk().Headers;$n.exports.Response=qQ().Response;$n.exports.Request=$N().Request;$n.exports.FormData=pQ().FormData;$n.exports.File=globalThis.File??require("node:buffer").File;$n.exports.FileReader=eat().FileReader;var{setGlobalOrigin:Sur,getGlobalOrigin:Rur}=Xbe();$n.exports.setGlobalOrigin=Sur;$n.exports.getGlobalOrigin=Rur;var{CacheStorage:kur}=lat(),{kConstruct:Pur}=Pre();$n.exports.caches=new kur(Pur);var{deleteCookie:Dur,getCookies:Bur,getSetCookies:Nur,setCookie:Mur}=xat();$n.exports.deleteCookie=Dur;$n.exports.getCookies=Bur;$n.exports.getSetCookies=Nur;$n.exports.setCookie=Mur;var{parseMIMEType:Lur,serializeAMimeType:Fur}=Up();$n.exports.parseMIMEType=Lur;$n.exports.serializeAMimeType=Fur;var{CloseEvent:Our,ErrorEvent:Qur,MessageEvent:Uur}=YN();$n.exports.WebSocket=hct().WebSocket;$n.exports.CloseEvent=Our;$n.exports.ErrorEvent=Qur;$n.exports.MessageEvent=Uur;$n.exports.request=nU(r8.request);$n.exports.stream=nU(r8.stream);$n.exports.pipeline=nU(r8.pipeline);$n.exports.connect=nU(r8.connect);$n.exports.upgrade=nU(r8.upgrade);$n.exports.MockClient=yur;$n.exports.MockPool=vur;$n.exports.MockAgent=Cur;$n.exports.mockErrors=xur;var{EventSource:qur}=Sct();$n.exports.EventSource=qur});var Di=W((dvi,Bct)=>{f();Bct.exports={options:{usePureJavaScript:!1}}});var Lct=W((pvi,Mct)=>{f();var _we={};Mct.exports=_we;var Nct={};_we.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=Hur(t,e);else{var o=0,s=e.length,c=e.charAt(0),l=[0];for(o=0;o<t.length;++o){for(var u=0,d=t[o];u<l.length;++u)d+=l[u]<<8,l[u]=d%s,d=d/s|0;for(;d>0;)l.push(d%s),d=d/s|0}for(o=0;t[o]===0&&o<t.length-1;++o)n+=c;for(o=l.length-1;o>=0;--o)n+=e[l[o]]}if(r){var p=new RegExp(".{1,"+r+"}","g");n=n.match(p).join(`\r
`)}return n};_we.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Nct[e];if(!r){r=Nct[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var o=e.length,s=e.charAt(0),c=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var u=0,d=l;u<c.length;++u)d+=c[u]*o,c[u]=d&255,d>>=8;for(;d>0;)c.push(d&255),d>>=8}for(var p=0;t[p]===s&&p<t.length-1;++p)c.push(0);return typeof Buffer<"u"?Buffer.from(c.reverse()):new Uint8Array(c.reverse())};function Hur(t,e){var r=0,n=e.length,o=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var c=0,l=t.at(r);c<s.length;++c)l+=s[c]<<8,s[c]=l%n,l=l/n|0;for(;l>0;)s.push(l%n),l=l/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=o;for(r=s.length-1;r>=0;--r)u+=e[s[r]];return u}a(Hur,"_encodeWithByteBuffer")});var $o=W((gvi,Uct)=>{f();var Fct=Di(),Oct=Lct(),Le=Uct.exports=Fct.util=Fct.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Le.nextTick=process.nextTick,typeof setImmediate=="function"?Le.setImmediate=setImmediate:Le.setImmediate=Le.nextTick;return}if(typeof setImmediate=="function"){Le.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Le.nextTick=function(l){return setImmediate(l)};return}if(Le.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var d=e.slice();e.length=0,d.forEach(function(p){p()})}};var c=l;a(l,"handler");var t="forge.setImmediate",e=[];Le.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,o=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(d){d()})}).observe(o,{attributes:!0});var s=Le.setImmediate;Le.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),s(u)):(e.push(u),e.length===1&&o.setAttribute("a",n=!n))}}Le.nextTick=Le.setImmediate})();Le.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Le.globalScope=function(){return Le.isNodejs?global:typeof self>"u"?window:self}();Le.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Le.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Le.isArrayBufferView=function(t){return t&&Le.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function iU(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}a(iU,"_checkBitsParam");Le.ByteBuffer=Swe;function Swe(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Le.isArrayBuffer(t)||Le.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Swe||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}a(Swe,"ByteStringBuffer");Le.ByteStringBuffer=Swe;var Wur=4096;Le.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Wur&&(this.data.substr(0,1),this._constructedStringLength=0)};Le.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Le.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Le.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Le.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Le.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Le.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Le.encodeUtf8(t))};Le.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Le.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Le.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Le.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Le.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Le.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Le.ByteStringBuffer.prototype.putInt=function(t,e){iU(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Le.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Le.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Le.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Le.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Le.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Le.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Le.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Le.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Le.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Le.ByteStringBuffer.prototype.getInt=function(t){iU(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Le.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Le.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Le.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Le.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Le.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Le.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Le.ByteStringBuffer.prototype.copy=function(){var t=Le.createBuffer(this.data);return t.read=this.read,t};Le.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Le.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Le.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Le.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Le.ByteStringBuffer.prototype.toString=function(){return Le.decodeUtf8(this.bytes())};function $ur(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Le.isArrayBuffer(t),n=Le.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}a($ur,"DataBuffer");Le.DataBuffer=$ur;Le.DataBuffer.prototype.length=function(){return this.write-this.read};Le.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Le.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Le.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Le.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Le.DataBuffer.prototype.putBytes=function(t,e){if(Le.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var o=new Uint8Array(this.data.buffer,this.write);return o.set(r),this.write+=n,this}if(Le.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Le.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Le.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var o=new Uint8Array(t.data.byteLength,this.write);return o.set(r),this.write+=r.byteLength,this}if(t instanceof Le.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=Le.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=Le.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=Le.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=Le.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=Le.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Le.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Le.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Le.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Le.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Le.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Le.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Le.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Le.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Le.DataBuffer.prototype.putInt=function(t,e){iU(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Le.DataBuffer.prototype.putSignedInt=function(t,e){return iU(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Le.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Le.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Le.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Le.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Le.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Le.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Le.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Le.DataBuffer.prototype.getInt=function(t){iU(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Le.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Le.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Le.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Le.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Le.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Le.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Le.DataBuffer.prototype.copy=function(){return new Le.DataBuffer(this)};Le.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Le.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Le.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Le.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Le.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Le.binary.raw.encode(e);if(t==="hex")return Le.binary.hex.encode(e);if(t==="base64")return Le.binary.base64.encode(e);if(t==="utf8")return Le.text.utf8.decode(e);if(t==="utf16")return Le.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Le.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Le.encodeUtf8(t)),new Le.ByteBuffer(t)};Le.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Le.xorBytes=function(t,e,r){for(var n="",o="",s="",c=0,l=0;r>0;--r,++c)o=t.charCodeAt(c)^e.charCodeAt(c),l>=10&&(n+=s,s="",l=0),s+=String.fromCharCode(o),++l;return n+=s,n};Le.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Le.bytesToHex=function(t){return Le.createBuffer(t).toHex()};Le.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Rw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",kw=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Qct="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Le.encode64=function(t,e){for(var r="",n="",o,s,c,l=0;l<t.length;)o=t.charCodeAt(l++),s=t.charCodeAt(l++),c=t.charCodeAt(l++),r+=Rw.charAt(o>>2),r+=Rw.charAt((o&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Rw.charAt((s&15)<<2|c>>6),r+=isNaN(c)?"=":Rw.charAt(c&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Le.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,o,s,c=0;c<t.length;)r=kw[t.charCodeAt(c++)-43],n=kw[t.charCodeAt(c++)-43],o=kw[t.charCodeAt(c++)-43],s=kw[t.charCodeAt(c++)-43],e+=String.fromCharCode(r<<2|n>>4),o!==64&&(e+=String.fromCharCode((n&15)<<4|o>>2),s!==64&&(e+=String.fromCharCode((o&3)<<6|s)));return e};Le.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Le.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Le.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Oct.encode,decode:Oct.decode}};Le.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Le.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var o=r,s=0;s<t.length;++s)n[o++]=t.charCodeAt(s);return e?o-r:n};Le.binary.hex.encode=Le.bytesToHex;Le.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var o=0,s=r;for(t.length&1&&(o=1,n[s++]=parseInt(t[0],16));o<t.length;o+=2)n[s++]=parseInt(t.substr(o,2),16);return e?s-r:n};Le.binary.base64.encode=function(t,e){for(var r="",n="",o,s,c,l=0;l<t.byteLength;)o=t[l++],s=t[l++],c=t[l++],r+=Rw.charAt(o>>2),r+=Rw.charAt((o&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Rw.charAt((s&15)<<2|c>>6),r+=isNaN(c)?"=":Rw.charAt(c&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Le.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var o,s,c,l,u=0,d=r;u<t.length;)o=kw[t.charCodeAt(u++)-43],s=kw[t.charCodeAt(u++)-43],c=kw[t.charCodeAt(u++)-43],l=kw[t.charCodeAt(u++)-43],n[d++]=o<<2|s>>4,c!==64&&(n[d++]=(s&15)<<4|c>>2,l!==64&&(n[d++]=(c&3)<<6|l));return e?d-r:n.subarray(0,d)};Le.binary.base58.encode=function(t,e){return Le.binary.baseN.encode(t,Qct,e)};Le.binary.base58.decode=function(t,e){return Le.binary.baseN.decode(t,Qct,e)};Le.text={utf8:{},utf16:{}};Le.text.utf8.encode=function(t,e,r){t=Le.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var o=r,s=0;s<t.length;++s)n[o++]=t.charCodeAt(s);return e?o-r:n};Le.text.utf8.decode=function(t){return Le.decodeUtf8(String.fromCharCode.apply(null,t))};Le.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var o=new Uint16Array(n.buffer);r=r||0;for(var s=r,c=r,l=0;l<t.length;++l)o[c++]=t.charCodeAt(l),s+=2;return e?s-r:n};Le.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Le.deflate=function(t,e,r){if(e=Le.decode64(t.deflate(Le.encode64(e)).rval),r){var n=2,o=e.charCodeAt(1);o&32&&(n=6),e=e.substring(n,e.length-4)}return e};Le.inflate=function(t,e,r){var n=t.inflate(Le.encode64(e)).rval;return n===null?null:Le.decode64(n)};var Rwe=a(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Le.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var o=new Error(n.error.message);throw o.id=n.error.id,o.name=n.error.name,o}},"_setStorageObject"),kwe=a(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Le.decode64(r))),r},"_getStorageObject"),jur=a(function(t,e,r,n){var o=kwe(t,e);o===null&&(o={}),o[r]=n,Rwe(t,e,o)},"_setItem"),Gur=a(function(t,e,r){var n=kwe(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),Vur=a(function(t,e,r){var n=kwe(t,e);if(n!==null&&r in n){delete n[r];var o=!0;for(var s in n){o=!1;break}o&&(n=null),Rwe(t,e,n)}},"_removeItem"),zur=a(function(t,e){Rwe(t,e,null)},"_clearItems"),Zre=a(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var o,s=!1,c=null;for(var l in r){o=r[l];try{if(o==="flash"||o==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),s=o==="flash"}(o==="web"||o==="both")&&(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(u){c=u}if(s)break}if(!s)throw c;return n},"_callStorageFunction");Le.setItem=function(t,e,r,n,o){Zre(jur,arguments,o)};Le.getItem=function(t,e,r,n){return Zre(Gur,arguments,n)};Le.removeItem=function(t,e,r,n){Zre(Vur,arguments,n)};Le.clearItems=function(t,e,r){Zre(zur,arguments,r)};Le.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Le.format=function(t){for(var e=/%./g,r,n,o=0,s=[],c=0;r=e.exec(t);){n=t.substring(c,e.lastIndex-2),n.length>0&&s.push(n),c=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":o<arguments.length?s.push(arguments[o+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+l+"?>")}}return s.push(t.substring(c)),s.join("")};Le.formatNumber=function(t,e,r,n){var o=t,s=isNaN(e=Math.abs(e))?2:e,c=r===void 0?",":r,l=n===void 0?".":n,u=o<0?"-":"",d=parseInt(o=Math.abs(+o||0).toFixed(s),10)+"",p=d.length>3?d.length%3:0;return u+(p?d.substr(0,p)+l:"")+d.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+l)+(s?c+Math.abs(o-d).toFixed(s).slice(2):"")};Le.formatSize=function(t){return t>=1073741824?t=Le.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Le.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Le.formatNumber(t/1024,0)+" KiB":t=Le.formatNumber(t,0)+" bytes",t};Le.bytesFromIP=function(t){return t.indexOf(".")!==-1?Le.bytesFromIPv4(t):t.indexOf(":")!==-1?Le.bytesFromIPv6(t):null};Le.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Le.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Le.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(c){return c.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Le.createBuffer(),o=0;o<8;++o){if(!t[o]||t[o].length===0){n.fillWithByte(0,r),r=0;continue}var s=Le.hexToBytes(t[o]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};Le.bytesToIP=function(t){return t.length===4?Le.bytesToIPv4(t):t.length===16?Le.bytesToIPv6(t):null};Le.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Le.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,o=0;o<t.length;o+=2){for(var s=Le.bytesToHex(t[o]+t[o+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var c=r[r.length-1],l=e.length;!c||l!==c.end+1?r.push({start:l,end:l}):(c.end=l,c.end-c.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};Le.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Le&&!t.update)return e(null,Le.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Le.cores=navigator.hardwareConcurrency,e(null,Le.cores);if(typeof Worker>"u")return Le.cores=1,e(null,Le.cores);if(typeof Blob>"u")return Le.cores=2,e(null,Le.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(c){for(var l=Date.now(),u=l+4;Date.now()<u;);self.postMessage({st:l,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(c,l,u){if(l===0){var d=Math.floor(c.reduce(function(p,m){return p+m},0)/c.length);return Le.cores=Math.max(1,d),URL.revokeObjectURL(r),e(null,Le.cores)}o(u,function(p,m){c.push(s(u,m)),n(c,l-1,u)})}a(n,"sample");function o(c,l){for(var u=[],d=[],p=0;p<c;++p){var m=new Worker(r);m.addEventListener("message",function(h){if(d.push(h.data),d.length===c){for(var g=0;g<c;++g)u[g].terminate();l(null,d)}}),u.push(m)}for(var p=0;p<c;++p)u[p].postMessage(p)}a(o,"map");function s(c,l){for(var u=[],d=0;d<c;++d)for(var p=l[d],m=u[d]=[],h=0;h<c;++h)if(d!==h){var g=l[h];(p.st>g.st&&p.st<g.et||g.st>p.st&&g.st<p.et)&&m.push(h)}return u.reduce(function(A,y){return Math.max(A,y.length)},0)}a(s,"reduce")}});var ene=W((Cvi,qct)=>{f();var Iu=Di();$o();qct.exports=Iu.cipher=Iu.cipher||{};Iu.cipher.algorithms=Iu.cipher.algorithms||{};Iu.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Iu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Iu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Iu.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Iu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Iu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Iu.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Iu.cipher.algorithms[t]=e};Iu.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Iu.cipher.algorithms?Iu.cipher.algorithms[t]:null};var Pwe=Iu.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Pwe.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Iu.util.createBuffer(),this.output=t.output||Iu.util.createBuffer(),this.mode.start(e)};Pwe.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Pwe.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Bwe=W((xvi,Hct)=>{f();var Tu=Di();$o();Tu.cipher=Tu.cipher||{};var Zi=Hct.exports=Tu.cipher.modes=Tu.cipher.modes||{};Zi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Zi.ecb.prototype.start=function(t){};Zi.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Zi.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Zi.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Zi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Zi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Zi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=tne(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Zi.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Zi.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Zi.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Zi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Zi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Tu.util.createBuffer(),this._partialBytes=0};Zi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=tne(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Zi.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32()^this._outBlock[o],e.putInt32(this._inBlock[o]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(s>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Zi.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32(),e.putInt32(this._inBlock[o]^this._outBlock[o]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(s>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Zi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Tu.util.createBuffer(),this._partialBytes=0};Zi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=tne(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Zi.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(s>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Zi.ofb.prototype.decrypt=Zi.ofb.prototype.encrypt;Zi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Tu.util.createBuffer(),this._partialBytes=0};Zi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=tne(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Zi.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}rne(this._inBlock)};Zi.ctr.prototype.decrypt=Zi.ctr.prototype.encrypt;Zi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Tu.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Zi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Tu.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Tu.util.createBuffer(t.additionalData):r=Tu.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Tu.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Dwe(n*8)))}this._inBlock=this._j0.slice(0),rne(this._inBlock),this._partialBytes=0,r=Tu.util.createBuffer(r),this._aDataLength=Dwe(r.length()*8);var o=r.length()%this.blockSize;for(o&&r.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Zi.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(s<=0||r){if(r){var c=n%this.blockSize;this._cipherLength+=c,this._partialOutput.truncate(this.blockSize-c)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),rne(this._inBlock)};Zi.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),rne(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Zi.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Tu.util.createBuffer();var n=this._aDataLength.concat(Dwe(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var o=[];this.cipher.encrypt(this._j0,o);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^o[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Zi.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),o=0;o<128;++o){var s=t[o/32|0]&1<<31-o%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Zi.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Zi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,o=t[n]>>>(7-r%8)*4&15,s=this._m[r][o];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};Zi.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Zi.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,o=16*r,s=new Array(o),c=0;c<o;++c){var l=[0,0,0,0],u=c/n|0,d=(n-1-c%n)*e;l[u]=1<<e-1<<d,s[c]=this.generateSubHashTable(this.multiply(l,t),e)}return s};Zi.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,o=new Array(r);o[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(o[2*s],o[s]=[]),s>>=1;for(s=2;s<n;){for(var c=1;c<s;++c){var l=o[s],u=o[c];o[s+c]=[l[0]^u[0],l[1]^u[1],l[2]^u[2],l[3]^u[3]]}s*=2}for(o[0]=[0,0,0,0],s=n+1;s<r;++s){var d=o[s^n];o[s]=[t[0]^d[0],t[1]^d[1],t[2]^d[2],t[3]^d[3]]}return o};function tne(t,e){if(typeof t=="string"&&(t=Tu.util.createBuffer(t)),Tu.util.isArray(t)&&t.length>4){var r=t;t=Tu.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Tu.util.isArray(t)){for(var o=[],s=e/4,n=0;n<s;++n)o.push(t.getInt32());t=o}return t}a(tne,"transformIV");function rne(t){t[t.length-1]=t[t.length-1]+1&4294967295}a(rne,"inc32");function Dwe(t){return[t/4294967296|0,t&4294967295]}a(Dwe,"from64To32")});var Pw=W((Ivi,Gct)=>{f();var Gs=Di();ene();Bwe();$o();Gct.exports=Gs.aes=Gs.aes||{};Gs.aes.startEncrypting=function(t,e,r,n){var o=nne({key:t,output:r,decrypt:!1,mode:n});return o.start(e),o};Gs.aes.createEncryptionCipher=function(t,e){return nne({key:t,output:null,decrypt:!1,mode:e})};Gs.aes.startDecrypting=function(t,e,r,n){var o=nne({key:t,output:r,decrypt:!0,mode:n});return o.start(e),o};Gs.aes.createDecryptionCipher=function(t,e){return nne({key:t,output:null,decrypt:!0,mode:e})};Gs.aes.Algorithm=function(t,e){Lwe||$ct();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:a(function(n,o){return Mwe(r._w,n,o,!1)},"encrypt"),decrypt:a(function(n,o){return Mwe(r._w,n,o,!0)},"decrypt")}}),r._init=!1};Gs.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Gs.util.createBuffer(e);else if(Gs.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Gs.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Gs.util.isArray(e)){r=e,e=[];var o=r.length();if(o===16||o===24||o===32){o=o>>>2;for(var n=0;n<o;++n)e.push(r.getInt32())}}if(!Gs.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,c=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=jct(e,t.decrypt&&!c),this._init=!0}};Gs.aes._expandKey=function(t,e){return Lwe||$ct(),jct(t,e)};Gs.aes._updateBlock=Mwe;i8("AES-ECB",Gs.cipher.modes.ecb);i8("AES-CBC",Gs.cipher.modes.cbc);i8("AES-CFB",Gs.cipher.modes.cfb);i8("AES-OFB",Gs.cipher.modes.ofb);i8("AES-CTR",Gs.cipher.modes.ctr);i8("AES-GCM",Gs.cipher.modes.gcm);function i8(t,e){var r=a(function(){return new Gs.aes.Algorithm(t,e)},"factory");Gs.cipher.registerAlgorithm(t,r)}a(i8,"registerAlgorithm");var Lwe=!1,n8=4,Uf,Nwe,Wct,Nk,ny;function $ct(){Lwe=!0,Wct=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Uf=new Array(256),Nwe=new Array(256),Nk=new Array(4),ny=new Array(4);for(var e=0;e<4;++e)Nk[e]=new Array(256),ny[e]=new Array(256);for(var r=0,n=0,o,s,c,l,u,d,p,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,Uf[r]=l,Nwe[l]=r,u=t[l],o=t[r],s=t[o],c=t[s],d=u<<24^l<<16^l<<8^(l^u),p=(o^s^c)<<24^(r^c)<<16^(r^s^c)<<8^(r^o^c);for(var m=0;m<4;++m)Nk[m][r]=d,ny[m][l]=p,d=d<<24|d>>>8,p=p<<24|p>>>8;r===0?r=n=1:(r=o^t[t[t[o^c]]],n^=t[t[n]])}}a($ct,"initialize");function jct(t,e){for(var r=t.slice(0),n,o=1,s=r.length,c=s+6+1,l=n8*c,u=s;u<l;++u)n=r[u-1],u%s===0?(n=Uf[n>>>16&255]<<24^Uf[n>>>8&255]<<16^Uf[n&255]<<8^Uf[n>>>24]^Wct[o]<<24,o++):s>6&&u%s===4&&(n=Uf[n>>>24]<<24^Uf[n>>>16&255]<<16^Uf[n>>>8&255]<<8^Uf[n&255]),r[u]=r[u-s]^n;if(e){var d,p=ny[0],m=ny[1],h=ny[2],g=ny[3],A=r.slice(0);l=r.length;for(var u=0,y=l-n8;u<l;u+=n8,y-=n8)if(u===0||u===l-n8)A[u]=r[y],A[u+1]=r[y+3],A[u+2]=r[y+2],A[u+3]=r[y+1];else for(var v=0;v<n8;++v)d=r[y+v],A[u+(3&-v)]=p[Uf[d>>>24]]^m[Uf[d>>>16&255]]^h[Uf[d>>>8&255]]^g[Uf[d&255]];r=A}return r}a(jct,"_expandKey");function Mwe(t,e,r,n){var o=t.length/4-1,s,c,l,u,d;n?(s=ny[0],c=ny[1],l=ny[2],u=ny[3],d=Nwe):(s=Nk[0],c=Nk[1],l=Nk[2],u=Nk[3],d=Uf);var p,m,h,g,A,y,v;p=e[0]^t[0],m=e[n?3:1]^t[1],h=e[2]^t[2],g=e[n?1:3]^t[3];for(var b=3,I=1;I<o;++I)A=s[p>>>24]^c[m>>>16&255]^l[h>>>8&255]^u[g&255]^t[++b],y=s[m>>>24]^c[h>>>16&255]^l[g>>>8&255]^u[p&255]^t[++b],v=s[h>>>24]^c[g>>>16&255]^l[p>>>8&255]^u[m&255]^t[++b],g=s[g>>>24]^c[p>>>16&255]^l[m>>>8&255]^u[h&255]^t[++b],p=A,m=y,h=v;r[0]=d[p>>>24]<<24^d[m>>>16&255]<<16^d[h>>>8&255]<<8^d[g&255]^t[++b],r[n?3:1]=d[m>>>24]<<24^d[h>>>16&255]<<16^d[g>>>8&255]<<8^d[p&255]^t[++b],r[2]=d[h>>>24]<<24^d[g>>>16&255]<<16^d[p>>>8&255]<<8^d[m&255]^t[++b],r[n?1:3]=d[g>>>24]<<24^d[p>>>16&255]<<16^d[m>>>8&255]<<8^d[h&255]^t[++b]}a(Mwe,"_updateBlock");function nne(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Gs.cipher.createDecipher(r,t.key):n=Gs.cipher.createCipher(r,t.key);var o=n.start;return n.start=function(s,c){var l=null;c instanceof Gs.util.ByteBuffer&&(l=c,c={}),c=c||{},c.output=l,c.iv=s,o.call(n,c)},n}a(nne,"_createCipher")});var Dw=W((_vi,Vct)=>{f();var oU=Di();oU.pki=oU.pki||{};var Fwe=Vct.exports=oU.pki.oids=oU.oids=oU.oids||{};function Ft(t,e){Fwe[t]=e,Fwe[e]=t}a(Ft,"_IN");function cs(t,e){Fwe[t]=e}a(cs,"_I_");Ft("1.2.840.113549.1.1.1","rsaEncryption");Ft("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ft("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ft("1.2.840.113549.1.1.7","RSAES-OAEP");Ft("1.2.840.113549.1.1.8","mgf1");Ft("1.2.840.113549.1.1.9","pSpecified");Ft("1.2.840.113549.1.1.10","RSASSA-PSS");Ft("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ft("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ft("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ft("1.3.101.112","EdDSA25519");Ft("1.2.840.10040.4.3","dsa-with-sha1");Ft("1.3.14.3.2.7","desCBC");Ft("1.3.14.3.2.26","sha1");Ft("1.3.14.3.2.29","sha1WithRSASignature");Ft("2.16.840.1.101.3.4.2.1","sha256");Ft("2.16.840.1.101.3.4.2.2","sha384");Ft("2.16.840.1.101.3.4.2.3","sha512");Ft("2.16.840.1.101.3.4.2.4","sha224");Ft("2.16.840.1.101.3.4.2.5","sha512-224");Ft("2.16.840.1.101.3.4.2.6","sha512-256");Ft("1.2.840.113549.2.2","md2");Ft("1.2.840.113549.2.5","md5");Ft("1.2.840.113549.1.7.1","data");Ft("1.2.840.113549.1.7.2","signedData");Ft("1.2.840.113549.1.7.3","envelopedData");Ft("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ft("1.2.840.113549.1.7.5","digestedData");Ft("1.2.840.113549.1.7.6","encryptedData");Ft("1.2.840.113549.1.9.1","emailAddress");Ft("1.2.840.113549.1.9.2","unstructuredName");Ft("1.2.840.113549.1.9.3","contentType");Ft("1.2.840.113549.1.9.4","messageDigest");Ft("1.2.840.113549.1.9.5","signingTime");Ft("1.2.840.113549.1.9.6","counterSignature");Ft("1.2.840.113549.1.9.7","challengePassword");Ft("1.2.840.113549.1.9.8","unstructuredAddress");Ft("1.2.840.113549.1.9.14","extensionRequest");Ft("1.2.840.113549.1.9.20","friendlyName");Ft("1.2.840.113549.1.9.21","localKeyId");Ft("1.2.840.113549.1.9.22.1","x509Certificate");Ft("1.2.840.113549.1.12.10.1.1","keyBag");Ft("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ft("1.2.840.113549.1.12.10.1.3","certBag");Ft("1.2.840.113549.1.12.10.1.4","crlBag");Ft("1.2.840.113549.1.12.10.1.5","secretBag");Ft("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ft("1.2.840.113549.1.5.13","pkcs5PBES2");Ft("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ft("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ft("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ft("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ft("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ft("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ft("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ft("1.2.840.113549.2.7","hmacWithSHA1");Ft("1.2.840.113549.2.8","hmacWithSHA224");Ft("1.2.840.113549.2.9","hmacWithSHA256");Ft("1.2.840.113549.2.10","hmacWithSHA384");Ft("1.2.840.113549.2.11","hmacWithSHA512");Ft("1.2.840.113549.3.7","des-EDE3-CBC");Ft("2.16.840.1.101.3.4.1.2","aes128-CBC");Ft("2.16.840.1.101.3.4.1.22","aes192-CBC");Ft("2.16.840.1.101.3.4.1.42","aes256-CBC");Ft("2.5.4.3","commonName");Ft("2.5.4.4","surname");Ft("2.5.4.5","serialNumber");Ft("2.5.4.6","countryName");Ft("2.5.4.7","localityName");Ft("2.5.4.8","stateOrProvinceName");Ft("2.5.4.9","streetAddress");Ft("2.5.4.10","organizationName");Ft("2.5.4.11","organizationalUnitName");Ft("2.5.4.12","title");Ft("2.5.4.13","description");Ft("2.5.4.15","businessCategory");Ft("2.5.4.17","postalCode");Ft("2.5.4.42","givenName");Ft("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ft("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ft("2.16.840.1.113730.1.1","nsCertType");Ft("2.16.840.1.113730.1.13","nsComment");cs("2.5.29.1","authorityKeyIdentifier");cs("2.5.29.2","keyAttributes");cs("2.5.29.3","certificatePolicies");cs("2.5.29.4","keyUsageRestriction");cs("2.5.29.5","policyMapping");cs("2.5.29.6","subtreesConstraint");cs("2.5.29.7","subjectAltName");cs("2.5.29.8","issuerAltName");cs("2.5.29.9","subjectDirectoryAttributes");cs("2.5.29.10","basicConstraints");cs("2.5.29.11","nameConstraints");cs("2.5.29.12","policyConstraints");cs("2.5.29.13","basicConstraints");Ft("2.5.29.14","subjectKeyIdentifier");Ft("2.5.29.15","keyUsage");cs("2.5.29.16","privateKeyUsagePeriod");Ft("2.5.29.17","subjectAltName");Ft("2.5.29.18","issuerAltName");Ft("2.5.29.19","basicConstraints");cs("2.5.29.20","cRLNumber");cs("2.5.29.21","cRLReason");cs("2.5.29.22","expirationDate");cs("2.5.29.23","instructionCode");cs("2.5.29.24","invalidityDate");cs("2.5.29.25","cRLDistributionPoints");cs("2.5.29.26","issuingDistributionPoint");cs("2.5.29.27","deltaCRLIndicator");cs("2.5.29.28","issuingDistributionPoint");cs("2.5.29.29","certificateIssuer");cs("2.5.29.30","nameConstraints");Ft("2.5.29.31","cRLDistributionPoints");Ft("2.5.29.32","certificatePolicies");cs("2.5.29.33","policyMappings");cs("2.5.29.34","policyConstraints");Ft("2.5.29.35","authorityKeyIdentifier");cs("2.5.29.36","policyConstraints");Ft("2.5.29.37","extKeyUsage");cs("2.5.29.46","freshestCRL");cs("2.5.29.54","inhibitAnyPolicy");Ft("1.3.6.1.4.1.11129.2.4.2","timestampList");Ft("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ft("1.3.6.1.5.5.7.3.1","serverAuth");Ft("1.3.6.1.5.5.7.3.2","clientAuth");Ft("1.3.6.1.5.5.7.3.3","codeSigning");Ft("1.3.6.1.5.5.7.3.4","emailProtection");Ft("1.3.6.1.5.5.7.3.8","timeStamping")});var iy=W((kvi,Kct)=>{f();var pa=Di();$o();Dw();var yr=Kct.exports=pa.asn1=pa.asn1||{};yr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};yr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};yr.create=function(t,e,r,n,o){if(pa.util.isArray(n)){for(var s=[],c=0;c<n.length;++c)n[c]!==void 0&&s.push(n[c]);n=s}var l={tagClass:t,type:e,constructed:r,composed:r||pa.util.isArray(n),value:n};return o&&"bitStringContents"in o&&(l.bitStringContents=o.bitStringContents,l.original=yr.copy(l)),l};yr.copy=function(t,e){var r;if(pa.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(yr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:yr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};yr.equals=function(t,e,r){if(pa.util.isArray(t)){if(!pa.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!yr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var o=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&yr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(o=o&&t.bitStringContents===e.bitStringContents),o};yr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function sU(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}a(sU,"_checkBufferLength");var Kur=a(function(t,e){var r=t.getByte();if(e--,r!==128){var n,o=r&128;if(!o)n=r;else{var s=r&127;sU(t,e,s),n=t.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");yr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=pa.util.createBuffer(t));var r=t.length(),n=ine(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=r,o.remaining=t.length(),o}return n};function ine(t,e,r,n){var o;sU(t,e,2);var s=t.getByte();e--;var c=s&192,l=s&31;o=t.length();var u=Kur(t,e);if(e-=o-t.length(),u!==void 0&&u>e){if(n.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=t.length(),d.remaining=e,d.requested=u,d}u=e}var p,m,h=(s&32)===32;if(h)if(p=[],u===void 0)for(;;){if(sU(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}o=t.length(),p.push(ine(t,e,r+1,n)),e-=o-t.length()}else for(;u>0;)o=t.length(),p.push(ine(t,u,r+1,n)),e-=o-t.length(),u-=o-t.length();if(p===void 0&&c===yr.Class.UNIVERSAL&&l===yr.Type.BITSTRING&&(m=t.bytes(u)),p===void 0&&n.decodeBitStrings&&c===yr.Class.UNIVERSAL&&l===yr.Type.BITSTRING&&u>1){var g=t.read,A=e,y=0;if(l===yr.Type.BITSTRING&&(sU(t,e,1),y=t.getByte(),e--),y===0)try{o=t.length();var v={strict:!0,decodeBitStrings:!0},b=ine(t,e,r+1,v),I=o-t.length();e-=I,l==yr.Type.BITSTRING&&I++;var _=b.tagClass;I===u&&(_===yr.Class.UNIVERSAL||_===yr.Class.CONTEXT_SPECIFIC)&&(p=[b])}catch{}p===void 0&&(t.read=g,e=A)}if(p===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(l===yr.Type.BMPSTRING)for(p="";u>0;u-=2)sU(t,e,2),p+=String.fromCharCode(t.getInt16()),e-=2;else p=t.getBytes(u),e-=u}var k=m===void 0?null:{bitStringContents:m};return yr.create(c,l,h,p,k)}a(ine,"_fromDer");yr.toDer=function(t){var e=pa.util.createBuffer(),r=t.tagClass|t.type,n=pa.util.createBuffer(),o=!1;if("bitStringContents"in t&&(o=!0,t.original&&(o=yr.equals(t,t.original))),o)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&n.putBuffer(yr.toDer(t.value[s]))}else if(t.type===yr.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===yr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var c=n.length(),l="";do l+=String.fromCharCode(c&255),c=c>>>8;while(c>0);e.putByte(l.length|128);for(var s=l.length-1;s>=0;--s)e.putByte(l.charCodeAt(s))}return e.putBuffer(n),e};yr.oidToDer=function(t){var e=t.split("."),r=pa.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,o,s,c,l=2;l<e.length;++l){n=!0,o=[],s=parseInt(e[l],10);do c=s&127,s=s>>>7,n||(c|=128),o.push(c),n=!1;while(s>0);for(var u=o.length-1;u>=0;--u)r.putByte(o[u])}return r};yr.derToOid=function(t){var e;typeof t=="string"&&(t=pa.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};yr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,o=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),c=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var u=t.charAt(10),d=10;u!=="+"&&u!=="-"&&(l=parseInt(t.substr(10,2),10),d+=2)}if(e.setUTCFullYear(r,n,o),e.setUTCHours(s,c,l,0),d&&(u=t.charAt(d),u==="+"||u==="-")){var p=parseInt(t.substr(d+1,2),10),m=parseInt(t.substr(d+4,2),10),h=p*60+m;h*=6e4,u==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};yr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),c=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),u=0,d=0,p=!1;t.charAt(t.length-1)==="Z"&&(p=!0);var m=t.length-5,h=t.charAt(m);if(h==="+"||h==="-"){var g=parseInt(t.substr(m+1,2),10),A=parseInt(t.substr(m+4,2),10);d=g*60+A,d*=6e4,h==="+"&&(d*=-1),p=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),p?(e.setUTCFullYear(r,n,o),e.setUTCHours(s,c,l,u),e.setTime(+e+d)):(e.setFullYear(r,n,o),e.setHours(s,c,l,u)),e};yr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};yr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};yr.integerToDer=function(t){var e=pa.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};yr.derToInteger=function(t){typeof t=="string"&&(t=pa.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};yr.validate=function(t,e,r,n){var o=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(o=!0,e.value&&pa.util.isArray(e.value))for(var s=0,c=0;o&&c<e.value.length;++c)o=e.value[c].optional||!1,t.value[s]&&(o=yr.validate(t.value[s],e.value[c],r,n),o?++s:e.value[c].optional&&(o=!0)),!o&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(o&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return o};var zct=/[^\\u0000-\\u00ff]/;yr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var o="",s=0;s<e*r;++s)o+=" ";switch(n+=o+"Tag: ",t.tagClass){case yr.Class.UNIVERSAL:n+="Universal:";break;case yr.Class.APPLICATION:n+="Application:";break;case yr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case yr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===yr.Class.UNIVERSAL)switch(n+=t.type,t.type){case yr.Type.NONE:n+=" (None)";break;case yr.Type.BOOLEAN:n+=" (Boolean)";break;case yr.Type.INTEGER:n+=" (Integer)";break;case yr.Type.BITSTRING:n+=" (Bit string)";break;case yr.Type.OCTETSTRING:n+=" (Octet string)";break;case yr.Type.NULL:n+=" (Null)";break;case yr.Type.OID:n+=" (Object Identifier)";break;case yr.Type.ODESC:n+=" (Object Descriptor)";break;case yr.Type.EXTERNAL:n+=" (External or Instance of)";break;case yr.Type.REAL:n+=" (Real)";break;case yr.Type.ENUMERATED:n+=" (Enumerated)";break;case yr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case yr.Type.UTF8:n+=" (UTF8)";break;case yr.Type.ROID:n+=" (Relative Object Identifier)";break;case yr.Type.SEQUENCE:n+=" (Sequence)";break;case yr.Type.SET:n+=" (Set)";break;case yr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case yr.Type.IA5String:n+=" (IA5String (ASCII))";break;case yr.Type.UTCTIME:n+=" (UTC time)";break;case yr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case yr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=o+"Constructed: "+t.constructed+`
`,t.composed){for(var c=0,l="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(c+=1,l+=yr.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(l+=","));n+=o+"Sub values: "+c+l}else{if(n+=o+"Value: ",t.type===yr.Type.OID){var u=yr.derToOid(t.value);n+=u,pa.pki&&pa.pki.oids&&u in pa.pki.oids&&(n+=" ("+pa.pki.oids[u]+") ")}if(t.type===yr.Type.INTEGER)try{n+=yr.derToInteger(t.value)}catch{n+="0x"+pa.util.bytesToHex(t.value)}else if(t.type===yr.Type.BITSTRING){if(t.value.length>1?n+="0x"+pa.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var d=t.value.charCodeAt(0);d==1?n+=" (1 unused bit shown)":d>1&&(n+=" ("+d+" unused bits shown)")}}else if(t.type===yr.Type.OCTETSTRING)zct.test(t.value)||(n+="("+t.value+") "),n+="0x"+pa.util.bytesToHex(t.value);else if(t.type===yr.Type.UTF8)try{n+=pa.util.decodeUtf8(t.value)}catch(p){if(p.message==="URI malformed")n+="0x"+pa.util.bytesToHex(t.value)+" (malformed UTF8)";else throw p}else t.type===yr.Type.PRINTABLESTRING||t.type===yr.Type.IA5String?n+=t.value:zct.test(t.value)?n+="0x"+pa.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var Cv=W((Bvi,Yct)=>{f();var one=Di();Yct.exports=one.md=one.md||{};one.md.algorithms=one.md.algorithms||{}});var o8=W((Mvi,Jct)=>{f();var iE=Di();Cv();$o();var Yur=Jct.exports=iE.hmac=iE.hmac||{};Yur.create=function(){var t=null,e=null,r=null,n=null,o={};return o.start=function(s,c){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in iE.md.algorithms)e=iE.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(c===null)c=t;else{if(typeof c=="string")c=iE.util.createBuffer(c);else if(iE.util.isArray(c)){var l=c;c=iE.util.createBuffer();for(var u=0;u<l.length;++u)c.putByte(l[u])}var d=c.length();d>e.blockLength&&(e.start(),e.update(c.bytes()),c=e.digest()),r=iE.util.createBuffer(),n=iE.util.createBuffer(),d=c.length();for(var u=0;u<d;++u){var l=c.at(u);r.putByte(54^l),n.putByte(92^l)}if(d<e.blockLength)for(var l=e.blockLength-d,u=0;u<l;++u)r.putByte(54),n.putByte(92);t=c,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},o.update=function(s){e.update(s)},o.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(n),e.update(s),e.digest()},o.digest=o.getMac,o}});var ane=W((Fvi,tlt)=>{f();var vv=Di();Cv();$o();var Zct=tlt.exports=vv.md5=vv.md5||{};vv.md.md5=vv.md.algorithms.md5=Zct;Zct.create=function(){elt||Jur();var t=null,e=vv.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var o=n.messageLengthSize/4,s=0;s<o;++s)n.fullMessageLength.push(0);return e=vv.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(o,s){s==="utf8"&&(o=vv.util.encodeUtf8(o));var c=o.length;n.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=c[1],c[1]=c[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,c[0]=c[1]/4294967296>>>0;return e.putBytes(o),Xct(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var o=vv.util.createBuffer();o.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,c=s&n.blockLength-1;o.putBytes(Owe.substr(0,n.blockLength-c));for(var l,u=0,d=n.fullMessageLength.length-1;d>=0;--d)l=n.fullMessageLength[d]*8+u,u=l/4294967296>>>0,o.putInt32Le(l>>>0);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};Xct(p,r,o);var m=vv.util.createBuffer();return m.putInt32Le(p.h0),m.putInt32Le(p.h1),m.putInt32Le(p.h2),m.putInt32Le(p.h3),m},n};var Owe=null,sne=null,aU=null,s8=null,elt=!1;function Jur(){Owe="\x80",Owe+=vv.util.fillString("\0",64),sne=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],aU=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],s8=new Array(64);for(var t=0;t<64;++t)s8[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);elt=!0}a(Jur,"_init");function Xct(t,e,r){for(var n,o,s,c,l,u,d,p,m=r.length();m>=64;){for(o=t.h0,s=t.h1,c=t.h2,l=t.h3,p=0;p<16;++p)e[p]=r.getInt32Le(),u=l^s&(c^l),n=o+u+s8[p]+e[p],d=aU[p],o=l,l=c,c=s,s+=n<<d|n>>>32-d;for(;p<32;++p)u=c^l&(s^c),n=o+u+s8[p]+e[sne[p]],d=aU[p],o=l,l=c,c=s,s+=n<<d|n>>>32-d;for(;p<48;++p)u=s^c^l,n=o+u+s8[p]+e[sne[p]],d=aU[p],o=l,l=c,c=s,s+=n<<d|n>>>32-d;for(;p<64;++p)u=c^(s|~l),n=o+u+s8[p]+e[sne[p]],d=aU[p],o=l,l=c,c=s,s+=n<<d|n>>>32-d;t.h0=t.h0+o|0,t.h1=t.h1+s|0,t.h2=t.h2+c|0,t.h3=t.h3+l|0,m-=64}}a(Xct,"_update")});var Mk=W((Uvi,nlt)=>{f();var lne=Di();$o();var rlt=nlt.exports=lne.pem=lne.pem||{};rlt.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=cne(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=cne(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=cne(n)),t.headers)for(var o=0;o<t.headers.length;++o)r+=cne(t.headers[o]);return t.procType&&(r+=`\r
`),r+=lne.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};rlt.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/,s;s=r.exec(t),!!s;){var c=s[1];c==="NEW CERTIFICATE REQUEST"&&(c="CERTIFICATE REQUEST");var l={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:lne.util.decode64(s[3])};if(e.push(l),!!s[2]){for(var u=s[2].split(o),d=0;s&&d<u.length;){for(var p=u[d].replace(/\s+$/,""),m=d+1;m<u.length;++m){var h=u[m];if(!/\s/.test(h[0]))break;p+=h,d=m}if(s=p.match(n),s){for(var g={name:s[1],values:[]},A=s[2].split(","),y=0;y<A.length;++y)g.values.push(Xur(A[y]));if(l.procType)if(!l.contentDomain&&g.name==="Content-Domain")l.contentDomain=A[0]||"";else if(!l.dekInfo&&g.name==="DEK-Info"){if(g.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:A[0],parameters:A[1]||null}}else l.headers.push(g);else{if(g.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(g.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:A[0],type:A[1]}}}++d}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function cne(t){for(var e=t.name+": ",r=[],n=a(function(u,d){return" "+d},"insertSpace"),o=0;o<t.values.length;++o)r.push(t.values[o].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var s=0,c=-1,o=0;o<e.length;++o,++s)if(s>65&&c!==-1){var l=e[c];l===","?(++c,e=e.substr(0,c)+`\r
 `+e.substr(c)):e=e.substr(0,c)+`\r
`+l+e.substr(c+1),s=o-c-1,c=-1,++o}else(e[o]===" "||e[o]==="	"||e[o]===",")&&(c=o);return e}a(cne,"foldHeader");function Xur(t){return t.replace(/^\s+/,"")}a(Xur,"ltrim")});var cU=W((Wvi,olt)=>{f();var qa=Di();ene();Bwe();$o();olt.exports=qa.des=qa.des||{};qa.des.startEncrypting=function(t,e,r,n){var o=une({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return o.start(e),o};qa.des.createEncryptionCipher=function(t,e){return une({key:t,output:null,decrypt:!1,mode:e})};qa.des.startDecrypting=function(t,e,r,n){var o=une({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return o.start(e),o};qa.des.createDecryptionCipher=function(t,e){return une({key:t,output:null,decrypt:!0,mode:e})};qa.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:a(function(n,o){return ilt(r._keys,n,o,!1)},"encrypt"),decrypt:a(function(n,o){return ilt(r._keys,n,o,!0)},"decrypt")}}),r._init=!1};qa.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=qa.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=adr(e),this._init=!0}};xv("DES-ECB",qa.cipher.modes.ecb);xv("DES-CBC",qa.cipher.modes.cbc);xv("DES-CFB",qa.cipher.modes.cfb);xv("DES-OFB",qa.cipher.modes.ofb);xv("DES-CTR",qa.cipher.modes.ctr);xv("3DES-ECB",qa.cipher.modes.ecb);xv("3DES-CBC",qa.cipher.modes.cbc);xv("3DES-CFB",qa.cipher.modes.cfb);xv("3DES-OFB",qa.cipher.modes.ofb);xv("3DES-CTR",qa.cipher.modes.ctr);function xv(t,e){var r=a(function(){return new qa.des.Algorithm(t,e)},"factory");qa.cipher.registerAlgorithm(t,r)}a(xv,"registerAlgorithm");var Zur=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],edr=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],tdr=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],rdr=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],ndr=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],idr=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],odr=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],sdr=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function adr(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],c=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],d=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],p=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],m=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],A=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],I=0,_,k=0;k<y;k++){var N=t.getInt32(),F=t.getInt32();_=(N>>>4^F)&252645135,F^=_,N^=_<<4,_=(F>>>-16^N)&65535,N^=_,F^=_<<-16,_=(N>>>2^F)&858993459,F^=_,N^=_<<2,_=(F>>>-16^N)&65535,N^=_,F^=_<<-16,_=(N>>>1^F)&1431655765,F^=_,N^=_<<1,_=(F>>>8^N)&16711935,N^=_,F^=_<<8,_=(N>>>1^F)&1431655765,F^=_,N^=_<<1,_=N<<8|F>>>20&240,N=F<<24|F<<8&16711680|F>>>8&65280|F>>>24&240,F=_;for(var O=0;O<b.length;++O){b[O]?(N=N<<2|N>>>26,F=F<<2|F>>>26):(N=N<<1|N>>>27,F=F<<1|F>>>27),N&=-15,F&=-15;var Y=e[N>>>28]|r[N>>>24&15]|n[N>>>20&15]|o[N>>>16&15]|s[N>>>12&15]|c[N>>>8&15]|l[N>>>4&15],z=u[F>>>28]|d[F>>>24&15]|p[F>>>20&15]|m[F>>>16&15]|h[F>>>12&15]|g[F>>>8&15]|A[F>>>4&15];_=(z>>>16^Y)&65535,v[I++]=Y^_,v[I++]=z^_<<16}}return v}a(adr,"_createKeys");function ilt(t,e,r,n){var o=t.length===32?3:9,s;o===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var c,l=e[0],u=e[1];c=(l>>>4^u)&252645135,u^=c,l^=c<<4,c=(l>>>16^u)&65535,u^=c,l^=c<<16,c=(u>>>2^l)&858993459,l^=c,u^=c<<2,c=(u>>>8^l)&16711935,l^=c,u^=c<<8,c=(l>>>1^u)&1431655765,u^=c,l^=c<<1,l=l<<1|l>>>31,u=u<<1|u>>>31;for(var d=0;d<o;d+=3){for(var p=s[d+1],m=s[d+2],h=s[d];h!=p;h+=m){var g=u^t[h],A=(u>>>4|u<<28)^t[h+1];c=l,l=u,u=c^(edr[g>>>24&63]|rdr[g>>>16&63]|idr[g>>>8&63]|sdr[g&63]|Zur[A>>>24&63]|tdr[A>>>16&63]|ndr[A>>>8&63]|odr[A&63])}c=l,l=u,u=c}l=l>>>1|l<<31,u=u>>>1|u<<31,c=(l>>>1^u)&1431655765,u^=c,l^=c<<1,c=(u>>>8^l)&16711935,l^=c,u^=c<<8,c=(u>>>2^l)&858993459,l^=c,u^=c<<2,c=(l>>>16^u)&65535,u^=c,l^=c<<16,c=(l>>>4^u)&252645135,u^=c,l^=c<<4,r[0]=l,r[1]=u}a(ilt,"_updateBlock");function une(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=qa.cipher.createDecipher(r,t.key):n=qa.cipher.createCipher(r,t.key);var o=n.start;return n.start=function(s,c){var l=null;c instanceof qa.util.ByteBuffer&&(l=c,c={}),c=c||{},c.output=l,c.iv=s,o.call(n,c)},n}a(une,"_createCipher")});var dne=W((Gvi,slt)=>{f();var qf=Di();o8();Cv();$o();var cdr=qf.pkcs5=qf.pkcs5||{},oE;qf.util.isNodejs&&!qf.options.usePureJavaScript&&(oE=require("crypto"));slt.exports=qf.pbkdf2=cdr.pbkdf2=function(t,e,r,n,o,s){if(typeof o=="function"&&(s=o,o=null),qf.util.isNodejs&&!qf.options.usePureJavaScript&&oE.pbkdf2&&(o===null||typeof o!="object")&&(oE.pbkdf2Sync.length>4||!o||o==="sha1"))return typeof o!="string"&&(o="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?oE.pbkdf2Sync.length===4?oE.pbkdf2(t,e,r,n,function(_,k){if(_)return s(_);s(null,k.toString("binary"))}):oE.pbkdf2(t,e,r,n,o,function(_,k){if(_)return s(_);s(null,k.toString("binary"))}):oE.pbkdf2Sync.length===4?oE.pbkdf2Sync(t,e,r,n).toString("binary"):oE.pbkdf2Sync(t,e,r,n,o).toString("binary");if((typeof o>"u"||o===null)&&(o="sha1"),typeof o=="string"){if(!(o in qf.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=qf.md[o].create()}var c=o.digestLength;if(n>4294967295*c){var l=new Error("Derived key is too long.");if(s)return s(l);throw l}var u=Math.ceil(n/c),d=n-(u-1)*c,p=qf.hmac.create();p.start(o,t);var m="",h,g,A;if(!s){for(var y=1;y<=u;++y){p.start(null,null),p.update(e),p.update(qf.util.int32ToBytes(y)),h=A=p.digest().getBytes();for(var v=2;v<=r;++v)p.start(null,null),p.update(A),g=p.digest().getBytes(),h=qf.util.xorBytes(h,g,c),A=g;m+=y<u?h:h.substr(0,d)}return m}var y=1,v;function b(){if(y>u)return s(null,m);p.start(null,null),p.update(e),p.update(qf.util.int32ToBytes(y)),h=A=p.digest().getBytes(),v=2,I()}a(b,"outer");function I(){if(v<=r)return p.start(null,null),p.update(A),g=p.digest().getBytes(),h=qf.util.xorBytes(h,g,c),A=g,++v,qf.util.setImmediate(I);m+=y<u?h:h.substr(0,d),++y,b()}a(I,"inner"),b()}});var Uwe=W((Kvi,dlt)=>{f();var Ev=Di();Cv();$o();var clt=dlt.exports=Ev.sha256=Ev.sha256||{};Ev.md.sha256=Ev.md.algorithms.sha256=clt;clt.create=function(){llt||ldr();var t=null,e=Ev.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var o=n.messageLengthSize/4,s=0;s<o;++s)n.fullMessageLength.push(0);return e=Ev.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(o,s){s==="utf8"&&(o=Ev.util.encodeUtf8(o));var c=o.length;n.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=c[1],c[1]=c[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,c[0]=c[1]/4294967296>>>0;return e.putBytes(o),alt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var o=Ev.util.createBuffer();o.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,c=s&n.blockLength-1;o.putBytes(Qwe.substr(0,n.blockLength-c));for(var l,u,d=n.fullMessageLength[0]*8,p=0;p<n.fullMessageLength.length-1;++p)l=n.fullMessageLength[p+1]*8,u=l/4294967296>>>0,d+=u,o.putInt32(d>>>0),d=l>>>0;o.putInt32(d);var m={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};alt(m,r,o);var h=Ev.util.createBuffer();return h.putInt32(m.h0),h.putInt32(m.h1),h.putInt32(m.h2),h.putInt32(m.h3),h.putInt32(m.h4),h.putInt32(m.h5),h.putInt32(m.h6),h.putInt32(m.h7),h},n};var Qwe=null,llt=!1,ult=null;function ldr(){Qwe="\x80",Qwe+=Ev.util.fillString("\0",64),ult=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],llt=!0}a(ldr,"_init");function alt(t,e,r){for(var n,o,s,c,l,u,d,p,m,h,g,A,y,v,b,I=r.length();I>=64;){for(d=0;d<16;++d)e[d]=r.getInt32();for(;d<64;++d)n=e[d-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,o=e[d-15],o=(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,e[d]=n+e[d-7]+o+e[d-16]|0;for(p=t.h0,m=t.h1,h=t.h2,g=t.h3,A=t.h4,y=t.h5,v=t.h6,b=t.h7,d=0;d<64;++d)c=(A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7),l=v^A&(y^v),s=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),u=p&m|h&(p^m),n=b+c+l+ult[d]+e[d],o=s+u,b=v,v=y,y=A,A=g+n>>>0,g=h,h=m,m=p,p=n+o>>>0;t.h0=t.h0+p|0,t.h1=t.h1+m|0,t.h2=t.h2+h|0,t.h3=t.h3+g|0,t.h4=t.h4+A|0,t.h5=t.h5+y|0,t.h6=t.h6+v|0,t.h7=t.h7+b|0,I-=64}}a(alt,"_update")});var qwe=W((Xvi,flt)=>{f();var bv=Di();$o();var fne=null;bv.util.isNodejs&&!bv.options.usePureJavaScript&&!process.versions["node-webkit"]&&(fne=require("crypto"));var udr=flt.exports=bv.prng=bv.prng||{};udr.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),o=0;o<32;++o)n[o]=r.create();e.pools=n,e.pool=0,e.generate=function(d,p){if(!p)return e.generateSync(d);var m=e.plugin.cipher,h=e.plugin.increment,g=e.plugin.formatKey,A=e.plugin.formatSeed,y=bv.util.createBuffer();e.key=null,v();function v(b){if(b)return p(b);if(y.length()>=d)return p(null,y.getBytes(d));if(e.generated>1048575&&(e.key=null),e.key===null)return bv.util.nextTick(function(){s(v)});var I=m(e.key,e.seed);e.generated+=I.length,y.putBytes(I),e.key=g(m(e.key,h(e.seed))),e.seed=A(m(e.key,e.seed)),bv.util.setImmediate(v)}a(v,"generate")},e.generateSync=function(d){var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed;e.key=null;for(var A=bv.util.createBuffer();A.length()<d;){e.generated>1048575&&(e.key=null),e.key===null&&c();var y=p(e.key,e.seed);e.generated+=y.length,A.putBytes(y),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed))}return A.getBytes(d)};function s(d){if(e.pools[0].messageLength>=32)return l(),d();var p=32-e.pools[0].messageLength<<5;e.seedFile(p,function(m,h){if(m)return d(m);e.collect(h),l(),d()})}a(s,"_reseed");function c(){if(e.pools[0].messageLength>=32)return l();var d=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(d)),l()}a(c,"_reseedSync");function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var d=e.plugin.md.create();d.update(e.keyBytes);for(var p=1,m=0;m<32;++m)e.reseeds%p===0&&(d.update(e.pools[m].digest().getBytes()),e.pools[m].start()),p=p<<1;e.keyBytes=d.digest().getBytes(),d.start(),d.update(e.keyBytes);var h=d.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}a(l,"_seed");function u(d){var p=null,m=bv.util.globalScope,h=m.crypto||m.msCrypto;h&&h.getRandomValues&&(p=a(function(N){return h.getRandomValues(N)},"getRandomValues"));var g=bv.util.createBuffer();if(p)for(;g.length()<d;){var A=Math.max(1,Math.min(d-g.length(),65536)/4),y=new Uint32Array(Math.floor(A));try{p(y);for(var v=0;v<y.length;++v)g.putInt32(y[v])}catch(N){if(!(typeof QuotaExceededError<"u"&&N instanceof QuotaExceededError))throw N}}if(g.length()<d)for(var b,I,_,k=Math.floor(Math.random()*65536);g.length()<d;){I=16807*(k&65535),b=16807*(k>>16),I+=(b&32767)<<16,I+=b>>15,I=(I&2147483647)+(I>>31),k=I&4294967295;for(var v=0;v<3;++v)_=k>>>(v<<3),_^=Math.floor(Math.random()*256),g.putByte(_&255)}return g.getBytes(d)}return a(u,"defaultSeedFile"),fne?(e.seedFile=function(d,p){fne.randomBytes(d,function(m,h){if(m)return p(m);p(null,h.toString())})},e.seedFileSync=function(d){return fne.randomBytes(d).toString()}):(e.seedFile=function(d,p){try{p(null,u(d))}catch(m){p(m)}},e.seedFileSync=u),e.collect=function(d){for(var p=d.length,m=0;m<p;++m)e.pools[e.pool].update(d.substr(m,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(d,p){for(var m="",h=0;h<p;h+=8)m+=String.fromCharCode(d>>h&255);e.collect(m)},e.registerWorker=function(d){if(d===self)e.seedFile=function(m,h){function g(A){var y=A.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",g),h(y.forge.prng.err,y.forge.prng.bytes))}a(g,"listener"),self.addEventListener("message",g),self.postMessage({forge:{prng:{needed:m}}})};else{var p=a(function(m){var h=m.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(g,A){d.postMessage({forge:{prng:{err:g,bytes:A}}})})},"listener");d.addEventListener("message",p)}},e}});var Yh=W((t1i,Hwe)=>{f();var wu=Di();Pw();Uwe();qwe();$o();(function(){if(wu.random&&wu.random.getBytes){Hwe.exports=wu.random;return}(function(t){var e={},r=new Array(4),n=wu.util.createBuffer();e.formatKey=function(m){var h=wu.util.createBuffer(m);return m=new Array(4),m[0]=h.getInt32(),m[1]=h.getInt32(),m[2]=h.getInt32(),m[3]=h.getInt32(),wu.aes._expandKey(m,!1)},e.formatSeed=function(m){var h=wu.util.createBuffer(m);return m=new Array(4),m[0]=h.getInt32(),m[1]=h.getInt32(),m[2]=h.getInt32(),m[3]=h.getInt32(),m},e.cipher=function(m,h){return wu.aes._updateBlock(m,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(m){return++m[3],m},e.md=wu.md.sha256;function o(){var m=wu.prng.create(e);return m.getBytes=function(h,g){return m.generate(h,g)},m.getBytesSync=function(h){return m.generate(h)},m}a(o,"spawnPrng");var s=o(),c=null,l=wu.util.globalScope,u=l.crypto||l.msCrypto;if(u&&u.getRandomValues&&(c=a(function(m){return u.getRandomValues(m)},"getRandomValues")),wu.options.usePureJavaScript||!wu.util.isNodejs&&!c){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var d="";for(var p in navigator)try{typeof navigator[p]=="string"&&(d+=navigator[p])}catch{}s.collect(d),d=null}t&&(t().mousemove(function(m){s.collectInt(m.clientX,16),s.collectInt(m.clientY,16)}),t().keypress(function(m){s.collectInt(m.charCode,8)}))}if(!wu.random)wu.random=s;else for(var p in s)wu.random[p]=s[p];wu.random.createInstance=o,Hwe.exports=wu.random})(typeof jQuery<"u"?jQuery:null)})()});var $we=W((i1i,hlt)=>{f();var Gp=Di();$o();var Wwe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],plt=[1,2,3,5],ddr=a(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),fdr=a(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");hlt.exports=Gp.rc2=Gp.rc2||{};Gp.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Gp.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),o=e,s=Math.ceil(o/8),c=255>>(o&7),l;for(l=n;l<128;l++)r.putByte(Wwe[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-s,Wwe[r.at(128-s)&c]),l=127-s;l>=0;l--)r.setAt(l,Wwe[r.at(l+1)^r.at(l+s)]);return r};var mlt=a(function(t,e,r){var n=!1,o=null,s=null,c=null,l,u,d,p,m=[];for(t=Gp.rc2.expandKey(t,e),d=0;d<64;d++)m.push(t.getInt16Le());r?(l=a(function(A){for(d=0;d<4;d++)A[d]+=m[p]+(A[(d+3)%4]&A[(d+2)%4])+(~A[(d+3)%4]&A[(d+1)%4]),A[d]=ddr(A[d],plt[d]),p++},"mixRound"),u=a(function(A){for(d=0;d<4;d++)A[d]+=m[A[(d+3)%4]&63]},"mashRound")):(l=a(function(A){for(d=3;d>=0;d--)A[d]=fdr(A[d],plt[d]),A[d]-=m[p]+(A[(d+3)%4]&A[(d+2)%4])+(~A[(d+3)%4]&A[(d+1)%4]),p--},"mixRound"),u=a(function(A){for(d=3;d>=0;d--)A[d]-=m[A[(d+3)%4]&63]},"mashRound"));var h=a(function(A){var y=[];for(d=0;d<4;d++){var v=o.getInt16Le();c!==null&&(r?v^=c.getInt16Le():c.putInt16Le(v)),y.push(v&65535)}p=r?0:63;for(var b=0;b<A.length;b++)for(var I=0;I<A[b][0];I++)A[b][1](y);for(d=0;d<4;d++)c!==null&&(r?c.putInt16Le(y[d]):y[d]^=c.getInt16Le()),s.putInt16Le(y[d])},"runPlan"),g=null;return g={start:a(function(A,y){A&&typeof A=="string"&&(A=Gp.util.createBuffer(A)),n=!1,o=Gp.util.createBuffer(),s=y||new Gp.util.createBuffer,c=A,g.output=s},"start"),update:a(function(A){for(n||o.putBuffer(A);o.length()>=8;)h([[5,l],[1,u],[6,l],[1,u],[5,l]])},"update"),finish:a(function(A){var y=!0;if(r)if(A)y=A(8,o,!r);else{var v=o.length()===8?8:8-o.length();o.fillWithByte(v,v)}if(y&&(n=!0,g.update()),!r&&(y=o.length()===0,y))if(A)y=A(8,s,!r);else{var b=s.length(),I=s.at(b-1);I>b?y=!1:s.truncate(I)}return y},"finish")},g},"createCipher");Gp.rc2.startEncrypting=function(t,e,r){var n=Gp.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Gp.rc2.createEncryptionCipher=function(t,e){return mlt(t,e,!0)};Gp.rc2.startDecrypting=function(t,e,r){var n=Gp.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Gp.rc2.createDecryptionCipher=function(t,e){return mlt(t,e,!1)}});var uU=W((a1i,blt)=>{f();var jwe=Di();blt.exports=jwe.jsbn=jwe.jsbn||{};var sE,pdr=0xdeadbeefcafe,glt=(pdr&16777215)==15715070;function Dt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}a(Dt,"BigInteger");jwe.jsbn.BigInteger=Dt;function jo(){return new Dt(null)}a(jo,"nbi");function mdr(t,e,r,n,o,s){for(;--s>=0;){var c=e*this.data[t++]+r.data[n]+o;o=Math.floor(c/67108864),r.data[n++]=c&67108863}return o}a(mdr,"am1");function hdr(t,e,r,n,o,s){for(var c=e&32767,l=e>>15;--s>=0;){var u=this.data[t]&32767,d=this.data[t++]>>15,p=l*u+d*c;u=c*u+((p&32767)<<15)+r.data[n]+(o&1073741823),o=(u>>>30)+(p>>>15)+l*d+(o>>>30),r.data[n++]=u&1073741823}return o}a(hdr,"am2");function Alt(t,e,r,n,o,s){for(var c=e&16383,l=e>>14;--s>=0;){var u=this.data[t]&16383,d=this.data[t++]>>14,p=l*u+d*c;u=c*u+((p&16383)<<14)+r.data[n]+o,o=(u>>28)+(p>>14)+l*d,r.data[n++]=u&268435455}return o}a(Alt,"am3");typeof navigator>"u"?(Dt.prototype.am=Alt,sE=28):glt&&navigator.appName=="Microsoft Internet Explorer"?(Dt.prototype.am=hdr,sE=30):glt&&navigator.appName!="Netscape"?(Dt.prototype.am=mdr,sE=26):(Dt.prototype.am=Alt,sE=28);Dt.prototype.DB=sE;Dt.prototype.DM=(1<<sE)-1;Dt.prototype.DV=1<<sE;var Gwe=52;Dt.prototype.FV=Math.pow(2,Gwe);Dt.prototype.F1=Gwe-sE;Dt.prototype.F2=2*sE-Gwe;var gdr="0123456789abcdefghijklmnopqrstuvwxyz",pne=new Array,a8,Jh;a8=48;for(Jh=0;Jh<=9;++Jh)pne[a8++]=Jh;a8=97;for(Jh=10;Jh<36;++Jh)pne[a8++]=Jh;a8=65;for(Jh=10;Jh<36;++Jh)pne[a8++]=Jh;function ylt(t){return gdr.charAt(t)}a(ylt,"int2char");function Clt(t,e){var r=pne[t.charCodeAt(e)];return r??-1}a(Clt,"intAt");function Adr(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}a(Adr,"bnpCopyTo");function ydr(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}a(ydr,"bnpFromInt");function Bw(t){var e=jo();return e.fromInt(t),e}a(Bw,"nbv");function Cdr(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,o=!1,s=0;--n>=0;){var c=r==8?t[n]&255:Clt(t,n);if(c<0){t.charAt(n)=="-"&&(o=!0);continue}o=!1,s==0?this.data[this.t++]=c:s+r>this.DB?(this.data[this.t-1]|=(c&(1<<this.DB-s)-1)<<s,this.data[this.t++]=c>>this.DB-s):this.data[this.t-1]|=c<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&Dt.ZERO.subTo(this,this)}a(Cdr,"bnpFromString");function vdr(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}a(vdr,"bnpClamp");function xdr(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,o=!1,s="",c=this.t,l=this.DB-c*this.DB%e;if(c-- >0)for(l<this.DB&&(n=this.data[c]>>l)>0&&(o=!0,s=ylt(n));c>=0;)l<e?(n=(this.data[c]&(1<<l)-1)<<e-l,n|=this.data[--c]>>(l+=this.DB-e)):(n=this.data[c]>>(l-=e)&r,l<=0&&(l+=this.DB,--c)),n>0&&(o=!0),o&&(s+=ylt(n));return o?s:"0"}a(xdr,"bnToString");function Edr(){var t=jo();return Dt.ZERO.subTo(this,t),t}a(Edr,"bnNegate");function bdr(){return this.s<0?this.negate():this}a(bdr,"bnAbs");function Idr(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}a(Idr,"bnCompareTo");function mne(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}a(mne,"nbits");function Tdr(){return this.t<=0?0:this.DB*(this.t-1)+mne(this.data[this.t-1]^this.s&this.DM)}a(Tdr,"bnBitLength");function wdr(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}a(wdr,"bnpDLShiftTo");function _dr(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}a(_dr,"bnpDRShiftTo");function Sdr(t,e){var r=t%this.DB,n=this.DB-r,o=(1<<n)-1,s=Math.floor(t/this.DB),c=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+s+1]=this.data[l]>>n|c,c=(this.data[l]&o)<<r;for(l=s-1;l>=0;--l)e.data[l]=0;e.data[s]=c,e.t=this.t+s+1,e.s=this.s,e.clamp()}a(Sdr,"bnpLShiftTo");function Rdr(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,o=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var c=r+1;c<this.t;++c)e.data[c-r-1]|=(this.data[c]&s)<<o,e.data[c-r]=this.data[c]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<o),e.t=this.t-r,e.clamp()}a(Rdr,"bnpRShiftTo");function kdr(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}a(kdr,"bnpSubTo");function Pdr(t,e){var r=this.abs(),n=t.abs(),o=r.t;for(e.t=o+n.t;--o>=0;)e.data[o]=0;for(o=0;o<n.t;++o)e.data[o+r.t]=r.am(0,n.data[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Dt.ZERO.subTo(e,e)}a(Pdr,"bnpMultiplyTo");function Ddr(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}a(Ddr,"bnpSquareTo");function Bdr(t,e,r){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=jo());var s=jo(),c=this.s,l=t.s,u=this.DB-mne(n.data[n.t-1]);u>0?(n.lShiftTo(u,s),o.lShiftTo(u,r)):(n.copyTo(s),o.copyTo(r));var d=s.t,p=s.data[d-1];if(p!=0){var m=p*(1<<this.F1)+(d>1?s.data[d-2]>>this.F2:0),h=this.FV/m,g=(1<<this.F1)/m,A=1<<this.F2,y=r.t,v=y-d,b=e??jo();for(s.dlShiftTo(v,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),Dt.ONE.dlShiftTo(d,b),b.subTo(s,s);s.t<d;)s.data[s.t++]=0;for(;--v>=0;){var I=r.data[--y]==p?this.DM:Math.floor(r.data[y]*h+(r.data[y-1]+A)*g);if((r.data[y]+=s.am(0,I,r,v,0,d))<I)for(s.dlShiftTo(v,b),r.subTo(b,r);r.data[y]<--I;)r.subTo(b,r)}e!=null&&(r.drShiftTo(d,e),c!=l&&Dt.ZERO.subTo(e,e)),r.t=d,r.clamp(),u>0&&r.rShiftTo(u,r),c<0&&Dt.ZERO.subTo(r,r)}}}a(Bdr,"bnpDivRemTo");function Ndr(t){var e=jo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Dt.ZERO)>0&&t.subTo(e,e),e}a(Ndr,"bnMod");function Lk(t){this.m=t}a(Lk,"Classic");function Mdr(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}a(Mdr,"cConvert");function Ldr(t){return t}a(Ldr,"cRevert");function Fdr(t){t.divRemTo(this.m,null,t)}a(Fdr,"cReduce");function Odr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}a(Odr,"cMulTo");function Qdr(t,e){t.squareTo(e),this.reduce(e)}a(Qdr,"cSqrTo");Lk.prototype.convert=Mdr;Lk.prototype.revert=Ldr;Lk.prototype.reduce=Fdr;Lk.prototype.mulTo=Odr;Lk.prototype.sqrTo=Qdr;function Udr(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}a(Udr,"bnpInvDigit");function Fk(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}a(Fk,"Montgomery");function qdr(t){var e=jo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Dt.ZERO)>0&&this.m.subTo(e,e),e}a(qdr,"montConvert");function Hdr(t){var e=jo();return t.copyTo(e),this.reduce(e),e}a(Hdr,"montRevert");function Wdr(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}a(Wdr,"montReduce");function $dr(t,e){t.squareTo(e),this.reduce(e)}a($dr,"montSqrTo");function jdr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}a(jdr,"montMulTo");Fk.prototype.convert=qdr;Fk.prototype.revert=Hdr;Fk.prototype.reduce=Wdr;Fk.prototype.mulTo=jdr;Fk.prototype.sqrTo=$dr;function Gdr(){return(this.t>0?this.data[0]&1:this.s)==0}a(Gdr,"bnpIsEven");function Vdr(t,e){if(t>4294967295||t<1)return Dt.ONE;var r=jo(),n=jo(),o=e.convert(this),s=mne(t)-1;for(o.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,o,r);else{var c=r;r=n,n=c}return e.revert(r)}a(Vdr,"bnpExp");function zdr(t,e){var r;return t<256||e.isEven()?r=new Lk(e):r=new Fk(e),this.exp(t,r)}a(zdr,"bnModPowInt");Dt.prototype.copyTo=Adr;Dt.prototype.fromInt=ydr;Dt.prototype.fromString=Cdr;Dt.prototype.clamp=vdr;Dt.prototype.dlShiftTo=wdr;Dt.prototype.drShiftTo=_dr;Dt.prototype.lShiftTo=Sdr;Dt.prototype.rShiftTo=Rdr;Dt.prototype.subTo=kdr;Dt.prototype.multiplyTo=Pdr;Dt.prototype.squareTo=Ddr;Dt.prototype.divRemTo=Bdr;Dt.prototype.invDigit=Udr;Dt.prototype.isEven=Gdr;Dt.prototype.exp=Vdr;Dt.prototype.toString=xdr;Dt.prototype.negate=Edr;Dt.prototype.abs=bdr;Dt.prototype.compareTo=Idr;Dt.prototype.bitLength=Tdr;Dt.prototype.mod=Ndr;Dt.prototype.modPowInt=zdr;Dt.ZERO=Bw(0);Dt.ONE=Bw(1);function Kdr(){var t=jo();return this.copyTo(t),t}a(Kdr,"bnClone");function Ydr(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}a(Ydr,"bnIntValue");function Jdr(){return this.t==0?this.s:this.data[0]<<24>>24}a(Jdr,"bnByteValue");function Xdr(){return this.t==0?this.s:this.data[0]<<16>>16}a(Xdr,"bnShortValue");function Zdr(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}a(Zdr,"bnpChunkSize");function efr(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}a(efr,"bnSigNum");function tfr(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Bw(r),o=jo(),s=jo(),c="";for(this.divRemTo(n,o,s);o.signum()>0;)c=(r+s.intValue()).toString(t).substr(1)+c,o.divRemTo(n,o,s);return s.intValue().toString(t)+c}a(tfr,"bnpToRadix");function rfr(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),o=!1,s=0,c=0,l=0;l<t.length;++l){var u=Clt(t,l);if(u<0){t.charAt(l)=="-"&&this.signum()==0&&(o=!0);continue}c=e*c+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(c,0),s=0,c=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(c,0)),o&&Dt.ZERO.subTo(this,this)}a(rfr,"bnpFromRadix");function nfr(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Dt.ONE.shiftLeft(t-1),Vwe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Dt.ONE.shiftLeft(t-1),this);else{var n=new Array,o=t&7;n.length=(t>>3)+1,e.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}}a(nfr,"bnpFromNumber");function ifr(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,o=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[o++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),o==0&&(this.s&128)!=(n&128)&&++o,(o>0||n!=this.s)&&(e[o++]=n);return e}a(ifr,"bnToByteArray");function ofr(t){return this.compareTo(t)==0}a(ofr,"bnEquals");function sfr(t){return this.compareTo(t)<0?this:t}a(sfr,"bnMin");function afr(t){return this.compareTo(t)>0?this:t}a(afr,"bnMax");function cfr(t,e,r){var n,o,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(o=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],o);r.t=this.t}else{for(o=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(o,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}a(cfr,"bnpBitwiseTo");function lfr(t,e){return t&e}a(lfr,"op_and");function ufr(t){var e=jo();return this.bitwiseTo(t,lfr,e),e}a(ufr,"bnAnd");function Vwe(t,e){return t|e}a(Vwe,"op_or");function dfr(t){var e=jo();return this.bitwiseTo(t,Vwe,e),e}a(dfr,"bnOr");function vlt(t,e){return t^e}a(vlt,"op_xor");function ffr(t){var e=jo();return this.bitwiseTo(t,vlt,e),e}a(ffr,"bnXor");function xlt(t,e){return t&~e}a(xlt,"op_andnot");function pfr(t){var e=jo();return this.bitwiseTo(t,xlt,e),e}a(pfr,"bnAndNot");function mfr(){for(var t=jo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}a(mfr,"bnNot");function hfr(t){var e=jo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}a(hfr,"bnShiftLeft");function gfr(t){var e=jo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}a(gfr,"bnShiftRight");function Afr(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}a(Afr,"lbit");function yfr(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Afr(this.data[t]);return this.s<0?this.t*this.DB:-1}a(yfr,"bnGetLowestSetBit");function Cfr(t){for(var e=0;t!=0;)t&=t-1,++e;return e}a(Cfr,"cbit");function vfr(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Cfr(this.data[r]^e);return t}a(vfr,"bnBitCount");function xfr(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}a(xfr,"bnTestBit");function Efr(t,e){var r=Dt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}a(Efr,"bnpChangeBit");function bfr(t){return this.changeBit(t,Vwe)}a(bfr,"bnSetBit");function Ifr(t){return this.changeBit(t,xlt)}a(Ifr,"bnClearBit");function Tfr(t){return this.changeBit(t,vlt)}a(Tfr,"bnFlipBit");function wfr(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}a(wfr,"bnpAddTo");function _fr(t){var e=jo();return this.addTo(t,e),e}a(_fr,"bnAdd");function Sfr(t){var e=jo();return this.subTo(t,e),e}a(Sfr,"bnSubtract");function Rfr(t){var e=jo();return this.multiplyTo(t,e),e}a(Rfr,"bnMultiply");function kfr(t){var e=jo();return this.divRemTo(t,e,null),e}a(kfr,"bnDivide");function Pfr(t){var e=jo();return this.divRemTo(t,null,e),e}a(Pfr,"bnRemainder");function Dfr(t){var e=jo(),r=jo();return this.divRemTo(t,e,r),new Array(e,r)}a(Dfr,"bnDivideAndRemainder");function Bfr(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}a(Bfr,"bnpDMultiply");function Nfr(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}a(Nfr,"bnpDAddOffset");function lU(){}a(lU,"NullExp");function Elt(t){return t}a(Elt,"nNop");function Mfr(t,e,r){t.multiplyTo(e,r)}a(Mfr,"nMulTo");function Lfr(t,e){t.squareTo(e)}a(Lfr,"nSqrTo");lU.prototype.convert=Elt;lU.prototype.revert=Elt;lU.prototype.mulTo=Mfr;lU.prototype.sqrTo=Lfr;function Ffr(t){return this.exp(t,new lU)}a(Ffr,"bnPow");function Ofr(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var o;for(o=r.t-this.t;n<o;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(o=Math.min(t.t,e);n<o;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}a(Ofr,"bnpMultiplyLowerTo");function Qfr(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}a(Qfr,"bnpMultiplyUpperTo");function c8(t){this.r2=jo(),this.q3=jo(),Dt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}a(c8,"Barrett");function Ufr(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=jo();return t.copyTo(e),this.reduce(e),e}a(Ufr,"barrettConvert");function qfr(t){return t}a(qfr,"barrettRevert");function Hfr(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}a(Hfr,"barrettReduce");function Wfr(t,e){t.squareTo(e),this.reduce(e)}a(Wfr,"barrettSqrTo");function $fr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}a($fr,"barrettMulTo");c8.prototype.convert=Ufr;c8.prototype.revert=qfr;c8.prototype.reduce=Hfr;c8.prototype.mulTo=$fr;c8.prototype.sqrTo=Wfr;function jfr(t,e){var r=t.bitLength(),n,o=Bw(1),s;if(r<=0)return o;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Lk(e):e.isEven()?s=new c8(e):s=new Fk(e);var c=new Array,l=3,u=n-1,d=(1<<n)-1;if(c[1]=s.convert(this),n>1){var p=jo();for(s.sqrTo(c[1],p);l<=d;)c[l]=jo(),s.mulTo(p,c[l-2],c[l]),l+=2}var m=t.t-1,h,g=!0,A=jo(),y;for(r=mne(t.data[m])-1;m>=0;){for(r>=u?h=t.data[m]>>r-u&d:(h=(t.data[m]&(1<<r+1)-1)<<u-r,m>0&&(h|=t.data[m-1]>>this.DB+r-u)),l=n;(h&1)==0;)h>>=1,--l;if((r-=l)<0&&(r+=this.DB,--m),g)c[h].copyTo(o),g=!1;else{for(;l>1;)s.sqrTo(o,A),s.sqrTo(A,o),l-=2;l>0?s.sqrTo(o,A):(y=o,o=A,A=y),s.mulTo(A,c[h],o)}for(;m>=0&&(t.data[m]&1<<r)==0;)s.sqrTo(o,A),y=o,o=A,A=y,--r<0&&(r=this.DB-1,--m)}return s.revert(o)}a(jfr,"bnModPow");function Gfr(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var o=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(o<s&&(s=o),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}a(Gfr,"bnGCD");function Vfr(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}a(Vfr,"bnpModInt");function zfr(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Dt.ZERO;for(var r=t.clone(),n=this.clone(),o=Bw(1),s=Bw(0),c=Bw(0),l=Bw(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!o.isEven()||!s.isEven())&&(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!c.isEven()||!l.isEven())&&(c.addTo(this,c),l.subTo(t,l)),c.rShiftTo(1,c)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&o.subTo(c,o),s.subTo(l,s)):(n.subTo(r,n),e&&c.subTo(o,c),l.subTo(s,l))}if(n.compareTo(Dt.ONE)!=0)return Dt.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}a(zfr,"bnModInverse");var oy=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Kfr=(1<<26)/oy[oy.length-1];function Yfr(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=oy[oy.length-1]){for(e=0;e<oy.length;++e)if(r.data[0]==oy[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<oy.length;){for(var n=oy[e],o=e+1;o<oy.length&&n<Kfr;)n*=oy[o++];for(n=r.modInt(n);e<o;)if(n%oy[e++]==0)return!1}return r.millerRabin(t)}a(Yfr,"bnIsProbablePrime");function Jfr(t){var e=this.subtract(Dt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),o=Xfr(),s,c=0;c<t;++c){do s=new Dt(this.bitLength(),o);while(s.compareTo(Dt.ONE)<=0||s.compareTo(e)>=0);var l=s.modPow(n,this);if(l.compareTo(Dt.ONE)!=0&&l.compareTo(e)!=0){for(var u=1;u++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(Dt.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}a(Jfr,"bnpMillerRabin");function Xfr(){return{nextBytes:a(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}a(Xfr,"bnGetPrng");Dt.prototype.chunkSize=Zdr;Dt.prototype.toRadix=tfr;Dt.prototype.fromRadix=rfr;Dt.prototype.fromNumber=nfr;Dt.prototype.bitwiseTo=cfr;Dt.prototype.changeBit=Efr;Dt.prototype.addTo=wfr;Dt.prototype.dMultiply=Bfr;Dt.prototype.dAddOffset=Nfr;Dt.prototype.multiplyLowerTo=Ofr;Dt.prototype.multiplyUpperTo=Qfr;Dt.prototype.modInt=Vfr;Dt.prototype.millerRabin=Jfr;Dt.prototype.clone=Kdr;Dt.prototype.intValue=Ydr;Dt.prototype.byteValue=Jdr;Dt.prototype.shortValue=Xdr;Dt.prototype.signum=efr;Dt.prototype.toByteArray=ifr;Dt.prototype.equals=ofr;Dt.prototype.min=sfr;Dt.prototype.max=afr;Dt.prototype.and=ufr;Dt.prototype.or=dfr;Dt.prototype.xor=ffr;Dt.prototype.andNot=pfr;Dt.prototype.not=mfr;Dt.prototype.shiftLeft=hfr;Dt.prototype.shiftRight=gfr;Dt.prototype.getLowestSetBit=yfr;Dt.prototype.bitCount=vfr;Dt.prototype.testBit=xfr;Dt.prototype.setBit=bfr;Dt.prototype.clearBit=Ifr;Dt.prototype.flipBit=Tfr;Dt.prototype.add=_fr;Dt.prototype.subtract=Sfr;Dt.prototype.multiply=Rfr;Dt.prototype.divide=kfr;Dt.prototype.remainder=Pfr;Dt.prototype.divideAndRemainder=Dfr;Dt.prototype.modPow=jfr;Dt.prototype.modInverse=zfr;Dt.prototype.pow=Ffr;Dt.prototype.gcd=Gfr;Dt.prototype.isProbablePrime=Yfr});var l8=W((u1i,_lt)=>{f();var Iv=Di();Cv();$o();var Tlt=_lt.exports=Iv.sha1=Iv.sha1||{};Iv.md.sha1=Iv.md.algorithms.sha1=Tlt;Tlt.create=function(){wlt||Zfr();var t=null,e=Iv.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var o=n.messageLengthSize/4,s=0;s<o;++s)n.fullMessageLength.push(0);return e=Iv.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(o,s){s==="utf8"&&(o=Iv.util.encodeUtf8(o));var c=o.length;n.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=c[1],c[1]=c[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,c[0]=c[1]/4294967296>>>0;return e.putBytes(o),Ilt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var o=Iv.util.createBuffer();o.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,c=s&n.blockLength-1;o.putBytes(zwe.substr(0,n.blockLength-c));for(var l,u,d=n.fullMessageLength[0]*8,p=0;p<n.fullMessageLength.length-1;++p)l=n.fullMessageLength[p+1]*8,u=l/4294967296>>>0,d+=u,o.putInt32(d>>>0),d=l>>>0;o.putInt32(d);var m={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Ilt(m,r,o);var h=Iv.util.createBuffer();return h.putInt32(m.h0),h.putInt32(m.h1),h.putInt32(m.h2),h.putInt32(m.h3),h.putInt32(m.h4),h},n};var zwe=null,wlt=!1;function Zfr(){zwe="\x80",zwe+=Iv.util.fillString("\0",64),wlt=!0}a(Zfr,"_init");function Ilt(t,e,r){for(var n,o,s,c,l,u,d,p,m=r.length();m>=64;){for(o=t.h0,s=t.h1,c=t.h2,l=t.h3,u=t.h4,p=0;p<16;++p)n=r.getInt32(),e[p]=n,d=l^s&(c^l),n=(o<<5|o>>>27)+d+u+1518500249+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<20;++p)n=e[p-3]^e[p-8]^e[p-14]^e[p-16],n=n<<1|n>>>31,e[p]=n,d=l^s&(c^l),n=(o<<5|o>>>27)+d+u+1518500249+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<32;++p)n=e[p-3]^e[p-8]^e[p-14]^e[p-16],n=n<<1|n>>>31,e[p]=n,d=s^c^l,n=(o<<5|o>>>27)+d+u+1859775393+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<40;++p)n=e[p-6]^e[p-16]^e[p-28]^e[p-32],n=n<<2|n>>>30,e[p]=n,d=s^c^l,n=(o<<5|o>>>27)+d+u+1859775393+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<60;++p)n=e[p-6]^e[p-16]^e[p-28]^e[p-32],n=n<<2|n>>>30,e[p]=n,d=s&c|l&(s^c),n=(o<<5|o>>>27)+d+u+2400959708+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<80;++p)n=e[p-6]^e[p-16]^e[p-28]^e[p-32],n=n<<2|n>>>30,e[p]=n,d=s^c^l,n=(o<<5|o>>>27)+d+u+3395469782+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;t.h0=t.h0+o|0,t.h1=t.h1+s|0,t.h2=t.h2+c|0,t.h3=t.h3+l|0,t.h4=t.h4+u|0,m-=64}}a(Ilt,"_update")});var Kwe=W((p1i,Rlt)=>{f();var Tv=Di();$o();Yh();l8();var Slt=Rlt.exports=Tv.pkcs1=Tv.pkcs1||{};Slt.encode_rsa_oaep=function(t,e,r){var n,o,s,c;typeof r=="string"?(n=r,o=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,o=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),s?s.start():s=Tv.md.sha1.create(),c||(c=s);var l=Math.ceil(t.n.bitLength()/8),u=l-2*s.digestLength-2;if(e.length>u){var d=new Error("RSAES-OAEP input message length is too long.");throw d.length=e.length,d.maxLength=u,d}n||(n=""),s.update(n,"raw");for(var p=s.digest(),m="",h=u-e.length,g=0;g<h;g++)m+="\0";var A=p.getBytes()+m+""+e;if(!o)o=Tv.random.getBytes(s.digestLength);else if(o.length!==s.digestLength){var d=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw d.seedLength=o.length,d.digestLength=s.digestLength,d}var y=hne(o,l-s.digestLength-1,c),v=Tv.util.xorBytes(A,y,A.length),b=hne(v,s.digestLength,c),I=Tv.util.xorBytes(o,b,o.length);return"\0"+I+v};Slt.decode_rsa_oaep=function(t,e,r){var n,o,s;typeof r=="string"?(n=r,o=arguments[3]||void 0):r&&(n=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var c=Math.ceil(t.n.bitLength()/8);if(e.length!==c){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=e.length,v.expectedLength=c,v}if(o===void 0?o=Tv.md.sha1.create():o.start(),s||(s=o),c<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),o.update(n,"raw");for(var l=o.digest().getBytes(),u=e.charAt(0),d=e.substring(1,o.digestLength+1),p=e.substring(1+o.digestLength),m=hne(p,o.digestLength,s),h=Tv.util.xorBytes(d,m,d.length),g=hne(h,c-o.digestLength-1,s),A=Tv.util.xorBytes(p,g,p.length),y=A.substring(0,o.digestLength),v=u!=="\0",b=0;b<o.digestLength;++b)v|=l.charAt(b)!==y.charAt(b);for(var I=1,_=o.digestLength,k=o.digestLength;k<A.length;k++){var N=A.charCodeAt(k),F=N&1^1,O=I?65534:0;v|=N&O,I=I&F,_+=I}if(v||A.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return A.substring(_+1)};function hne(t,e,r){r||(r=Tv.md.sha1.create());for(var n="",o=Math.ceil(e/r.digestLength),s=0;s<o;++s){var c=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+c),n+=r.digest().getBytes()}return n.substring(0,e)}a(hne,"rsa_mgf1")});var Jwe=W((g1i,Ywe)=>{f();var Nw=Di();$o();uU();Yh();(function(){if(Nw.prime){Ywe.exports=Nw.prime;return}var t=Ywe.exports=Nw.prime=Nw.prime||{},e=Nw.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var o=a(function(m,h){return m|h},"op_or");t.generateProbablePrime=function(m,h,g){typeof h=="function"&&(g=h,h={}),h=h||{};var A=h.algorithm||"PRIMEINC";typeof A=="string"&&(A={name:A}),A.options=A.options||{};var y=h.prng||Nw.random,v={nextBytes:a(function(b){for(var I=y.getBytesSync(b.length),_=0;_<b.length;++_)b[_]=I.charCodeAt(_)},"nextBytes")};if(A.name==="PRIMEINC")return s(m,v,A.options,g);throw new Error("Invalid prime generation algorithm: "+A.name)};function s(m,h,g,A){return"workers"in g?u(m,h,g,A):c(m,h,g,A)}a(s,"primeincFindPrime");function c(m,h,g,A){var y=d(m,h),v=0,b=p(y.bitLength());"millerRabinTests"in g&&(b=g.millerRabinTests);var I=10;"maxBlockTime"in g&&(I=g.maxBlockTime),l(y,m,h,v,b,I,A)}a(c,"primeincFindPrimeWithoutWorkers");function l(m,h,g,A,y,v,b){var I=+new Date;do{if(m.bitLength()>h&&(m=d(h,g)),m.isProbablePrime(y))return b(null,m);m.dAddOffset(r[A++%8],0)}while(v<0||+new Date-I<v);Nw.util.setImmediate(function(){l(m,h,g,A,y,v,b)})}a(l,"_primeinc");function u(m,h,g,A){if(typeof Worker>"u")return c(m,h,g,A);var y=d(m,h),v=g.workers,b=g.workLoad||100,I=b*30/8,_=g.workerScript||"forge/prime.worker.js";if(v===-1)return Nw.util.estimateCores(function(N,F){N&&(F=2),v=F-1,k()});k();function k(){v=Math.max(1,v);for(var N=[],F=0;F<v;++F)N[F]=new Worker(_);for(var O=v,F=0;F<v;++F)N[F].addEventListener("message",z);var Y=!1;function z(V){if(!Y){--O;var U=V.data;if(U.found){for(var H=0;H<N.length;++H)N[H].terminate();return Y=!0,A(null,new e(U.prime,16))}y.bitLength()>m&&(y=d(m,h));var ee=y.toString(16);V.target.postMessage({hex:ee,workLoad:b}),y.dAddOffset(I,0)}}a(z,"workerMessage")}a(k,"generate")}a(u,"primeincFindPrimeWithWorkers");function d(m,h){var g=new e(m,h),A=m-1;return g.testBit(A)||g.bitwiseTo(e.ONE.shiftLeft(A),o,g),g.dAddOffset(31-g.mod(n).byteValue(),0),g}a(d,"generateRandom");function p(m){return m<=100?27:m<=150?18:m<=200?15:m<=250?12:m<=300?9:m<=350?8:m<=400?7:m<=500?6:m<=600?5:m<=800?4:m<=1250?3:2}a(p,"getMillerRabinTests")})()});var dU=W((C1i,Llt)=>{f();var Cn=Di();iy();uU();Dw();Kwe();Jwe();Yh();$o();typeof Bo>"u"&&(Bo=Cn.jsbn.BigInteger);var Bo,Xwe=Cn.util.isNodejs?require("crypto"):null,Ke=Cn.asn1,Xh=Cn.util;Cn.pki=Cn.pki||{};Llt.exports=Cn.pki.rsa=Cn.rsa=Cn.rsa||{};var Ci=Cn.pki,epr=[6,4,2,4,2,4,6,2],tpr={name:"PrivateKeyInfo",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rpr={name:"RSAPrivateKey",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},npr={name:"RSAPublicKey",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},ipr=Cn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},opr={name:"DigestInfo",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},spr=a(function(t){var e;if(t.algorithm in Ci.oids)e=Ci.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=Ke.oidToDer(e).getBytes(),o=Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[]),s=Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[]);s.value.push(Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OID,!1,n)),s.value.push(Ke.create(Ke.Class.UNIVERSAL,Ke.Type.NULL,!1,""));var c=Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OCTETSTRING,!1,t.digest().getBytes());return o.value.push(s),o.value.push(c),Ke.toDer(o).getBytes()},"emsaPkcs1v15encode"),Nlt=a(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Bo.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Bo.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Bo(Cn.util.bytesToHex(Cn.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Bo.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var o=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);o.compareTo(s)<0;)o=o.add(e.p);var c=o.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return c=c.multiply(n.modInverse(e.n)).mod(e.n),c},"_modPow");Ci.rsa.encrypt=function(t,e,r){var n=r,o,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,o=Mlt(t,e,r)):(o=Cn.util.createBuffer(),o.putBytes(t));for(var c=new Bo(o.toHex(),16),l=Nlt(c,e,n),u=l.toString(16),d=Cn.util.createBuffer(),p=s-Math.ceil(u.length/2);p>0;)d.putByte(0),--p;return d.putBytes(Cn.util.hexToBytes(u)),d.getBytes()};Ci.rsa.decrypt=function(t,e,r,n){var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=o,s}var c=new Bo(Cn.util.createBuffer(t).toHex(),16);if(c.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=Nlt(c,e,r),u=l.toString(16),d=Cn.util.createBuffer(),p=o-Math.ceil(u.length/2);p>0;)d.putByte(0),--p;return d.putBytes(Cn.util.hexToBytes(u)),n!==!1?gne(d.getBytes(),e,r):d.getBytes()};Ci.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||Cn.random,o={nextBytes:a(function(l){for(var u=n.getBytesSync(l.length),d=0;d<l.length;++d)l[d]=u.charCodeAt(d)},"nextBytes")},s=r.algorithm||"PRIMEINC",c;if(s==="PRIMEINC")c={algorithm:s,state:0,bits:t,rng:o,eInt:e||65537,e:new Bo(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},c.e.fromInt(c.eInt);else throw new Error("Invalid key generation algorithm: "+s);return c};Ci.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Bo(null);r.fromInt(30);for(var n=0,o=a(function(m,h){return m|h},"op_or"),s=+new Date,c,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,d=u-1;t.pqState===0?(t.num=new Bo(u,t.rng),t.num.testBit(d)||t.num.bitwiseTo(Bo.ONE.shiftLeft(d),o,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(cpr(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(epr[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Bo.ONE).gcd(t.e).compareTo(Bo.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Bo.ONE),t.q1=t.q.subtract(Bo.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Bo.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var p=t.e.modInverse(t.phi);t.keys={privateKey:Ci.rsa.setPrivateKey(t.n,t.e,p,t.p,t.q,p.mod(t.p1),p.mod(t.q1),t.q.modInverse(t.p)),publicKey:Ci.rsa.setPublicKey(t.n,t.e)}}c=+new Date,l+=c-s,s=c}return t.keys!==null};Ci.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!Cn.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(klt("generateKeyPair"))return Xwe.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,u,d){if(l)return n(l);n(null,{privateKey:Ci.privateKeyFromPem(d),publicKey:Ci.publicKeyFromPem(u)})});if(Plt("generateKey")&&Plt("exportKey"))return Xh.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Blt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return Xh.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var u=Ci.privateKeyFromAsn1(Ke.fromDer(Cn.util.createBuffer(l)));n(null,{privateKey:u,publicKey:Ci.setRsaPublicKey(u.n,u.e)})}});if(Dlt("generateKey")&&Dlt("exportKey")){var o=Xh.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Blt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);o.oncomplete=function(l){var u=l.target.result,d=Xh.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);d.oncomplete=function(p){var m=p.target.result,h=Ci.privateKeyFromAsn1(Ke.fromDer(Cn.util.createBuffer(m)));n(null,{privateKey:h,publicKey:Ci.setRsaPublicKey(h.n,h.e)})},d.onerror=function(p){n(p)}},o.onerror=function(l){n(l)};return}}else if(klt("generateKeyPairSync")){var s=Xwe.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Ci.privateKeyFromPem(s.privateKey),publicKey:Ci.publicKeyFromPem(s.publicKey)}}}var c=Ci.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Ci.rsa.stepKeyPairGenerationState(c,0),c.keys;apr(c,r,n)};Ci.setRsaPublicKey=Ci.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,o,s){if(typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSAES-PKCS1-V1_5"),o==="RSAES-PKCS1-V1_5")o={encode:a(function(l,u,d){return Mlt(l,u,2).getBytes()},"encode")};else if(o==="RSA-OAEP"||o==="RSAES-OAEP")o={encode:a(function(l,u){return Cn.pkcs1.encode_rsa_oaep(u,l,s)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(o)!==-1)o={encode:a(function(l){return l},"encode")};else if(typeof o=="string")throw new Error('Unsupported encryption scheme: "'+o+'".');var c=o.encode(n,r,!0);return Ci.rsa.encrypt(c,r,!0)},r.verify=function(n,o,s,c){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),c===void 0&&(c={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in c||(c._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:a(function(u,d){d=gne(d,r,!0);var p=Ke.fromDer(d,{parseAllBytes:c._parseAllDigestBytes}),m={},h=[];if(!Ke.validate(p,opr,m,h)){var g=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw g.errors=h,g}var A=Ke.derToOid(m.algorithmIdentifier);if(!(A===Cn.oids.md2||A===Cn.oids.md5||A===Cn.oids.sha1||A===Cn.oids.sha224||A===Cn.oids.sha256||A===Cn.oids.sha384||A===Cn.oids.sha512||A===Cn.oids["sha512-224"]||A===Cn.oids["sha512-256"])){var g=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw g.oid=A,g}if((A===Cn.oids.md2||A===Cn.oids.md5)&&!("parameters"in m))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===m.digest},"verify")}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:a(function(u,d){return d=gne(d,r,!0),u===d},"verify")});var l=Ci.rsa.decrypt(o,r,!0,!1);return s.verify(n,l,r.n.bitLength())},r};Ci.setRsaPrivateKey=Ci.rsa.setPrivateKey=function(t,e,r,n,o,s,c,l){var u={n:t,e,d:r,p:n,q:o,dP:s,dQ:c,qInv:l};return u.decrypt=function(d,p,m){typeof p=="string"?p=p.toUpperCase():p===void 0&&(p="RSAES-PKCS1-V1_5");var h=Ci.rsa.decrypt(d,u,!1,!1);if(p==="RSAES-PKCS1-V1_5")p={decode:gne};else if(p==="RSA-OAEP"||p==="RSAES-OAEP")p={decode:a(function(g,A){return Cn.pkcs1.decode_rsa_oaep(A,g,m)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(p)!==-1)p={decode:a(function(g){return g},"decode")};else throw new Error('Unsupported encryption scheme: "'+p+'".');return p.decode(h,u,!1)},u.sign=function(d,p){var m=!1;typeof p=="string"&&(p=p.toUpperCase()),p===void 0||p==="RSASSA-PKCS1-V1_5"?(p={encode:spr},m=1):(p==="NONE"||p==="NULL"||p===null)&&(p={encode:a(function(){return d},"encode")},m=1);var h=p.encode(d,u.n.bitLength());return Ci.rsa.encrypt(h,u,m)},u};Ci.wrapRsaPrivateKey=function(t){return Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,Ke.integerToDer(0).getBytes()),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OID,!1,Ke.oidToDer(Ci.oids.rsaEncryption).getBytes()),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.NULL,!1,"")]),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OCTETSTRING,!1,Ke.toDer(t).getBytes())])};Ci.privateKeyFromAsn1=function(t){var e={},r=[];if(Ke.validate(t,tpr,e,r)&&(t=Ke.fromDer(Cn.util.createBuffer(e.privateKey))),e={},r=[],!Ke.validate(t,rpr,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var o,s,c,l,u,d,p,m;return o=Cn.util.createBuffer(e.privateKeyModulus).toHex(),s=Cn.util.createBuffer(e.privateKeyPublicExponent).toHex(),c=Cn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=Cn.util.createBuffer(e.privateKeyPrime1).toHex(),u=Cn.util.createBuffer(e.privateKeyPrime2).toHex(),d=Cn.util.createBuffer(e.privateKeyExponent1).toHex(),p=Cn.util.createBuffer(e.privateKeyExponent2).toHex(),m=Cn.util.createBuffer(e.privateKeyCoefficient).toHex(),Ci.setRsaPrivateKey(new Bo(o,16),new Bo(s,16),new Bo(c,16),new Bo(l,16),new Bo(u,16),new Bo(d,16),new Bo(p,16),new Bo(m,16))};Ci.privateKeyToAsn1=Ci.privateKeyToRSAPrivateKey=function(t){return Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,Ke.integerToDer(0).getBytes()),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.n)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.e)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.d)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.p)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.q)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.dP)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.dQ)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.qInv))])};Ci.publicKeyFromAsn1=function(t){var e={},r=[];if(Ke.validate(t,ipr,e,r)){var n=Ke.derToOid(e.publicKeyOid);if(n!==Ci.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=n,o}t=e.rsaPublicKey}if(r=[],!Ke.validate(t,npr,e,r)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=r,o}var s=Cn.util.createBuffer(e.publicKeyModulus).toHex(),c=Cn.util.createBuffer(e.publicKeyExponent).toHex();return Ci.setRsaPublicKey(new Bo(s,16),new Bo(c,16))};Ci.publicKeyToAsn1=Ci.publicKeyToSubjectPublicKeyInfo=function(t){return Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OID,!1,Ke.oidToDer(Ci.oids.rsaEncryption).getBytes()),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.NULL,!1,"")]),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.BITSTRING,!1,[Ci.publicKeyToRSAPublicKey(t)])])};Ci.publicKeyToRSAPublicKey=function(t){return Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.n)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,wv(t.e))])};function Mlt(t,e,r){var n=Cn.util.createBuffer(),o=Math.ceil(e.n.bitLength()/8);if(t.length>o-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=o-11,s}n.putByte(0),n.putByte(r);var c=o-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var u=0;u<c;++u)n.putByte(l)}else for(;c>0;){for(var d=0,p=Cn.random.getBytes(c),u=0;u<c;++u)l=p.charCodeAt(u),l===0?++d:n.putByte(l);c=d}return n.putByte(0),n.putBytes(t),n}a(Mlt,"_encodePkcs1_v1_5");function gne(t,e,r,n){var o=Math.ceil(e.n.bitLength()/8),s=Cn.util.createBuffer(t),c=s.getByte(),l=s.getByte();if(c!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var u=0;if(l===0){u=o-3-n;for(var d=0;d<u;++d)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(u=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++u}else if(l===2)for(u=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++u}var p=s.getByte();if(p!==0||u!==o-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}a(gne,"_decodePkcs1_v1_5");function apr(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),o();function o(){s(t.pBits,function(l,u){if(l)return r(l);if(t.p=u,t.q!==null)return c(l,t.q);s(t.qBits,c)})}a(o,"generate");function s(l,u){Cn.prime.generateProbablePrime(l,n,u)}a(s,"getPrime");function c(l,u){if(l)return r(l);if(t.q=u,t.p.compareTo(t.q)<0){var d=t.p;t.p=t.q,t.q=d}if(t.p.subtract(Bo.ONE).gcd(t.e).compareTo(Bo.ONE)!==0){t.p=null,o();return}if(t.q.subtract(Bo.ONE).gcd(t.e).compareTo(Bo.ONE)!==0){t.q=null,s(t.qBits,c);return}if(t.p1=t.p.subtract(Bo.ONE),t.q1=t.q.subtract(Bo.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Bo.ONE)!==0){t.p=t.q=null,o();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,c);return}var p=t.e.modInverse(t.phi);t.keys={privateKey:Ci.rsa.setPrivateKey(t.n,t.e,p,t.p,t.q,p.mod(t.p1),p.mod(t.q1),t.q.modInverse(t.p)),publicKey:Ci.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}a(c,"finish")}a(apr,"_generateKeyPair");function wv(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=Cn.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}a(wv,"_bnToBytes");function cpr(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}a(cpr,"_getMillerRabinTests");function klt(t){return Cn.util.isNodejs&&typeof Xwe[t]=="function"}a(klt,"_detectNodeCrypto");function Plt(t){return typeof Xh.globalScope<"u"&&typeof Xh.globalScope.crypto=="object"&&typeof Xh.globalScope.crypto.subtle=="object"&&typeof Xh.globalScope.crypto.subtle[t]=="function"}a(Plt,"_detectSubtleCrypto");function Dlt(t){return typeof Xh.globalScope<"u"&&typeof Xh.globalScope.msCrypto=="object"&&typeof Xh.globalScope.msCrypto.subtle=="object"&&typeof Xh.globalScope.msCrypto.subtle[t]=="function"}a(Dlt,"_detectSubtleMsCrypto");function Blt(t){for(var e=Cn.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}a(Blt,"_intToUint8Array")});var Zwe=W((E1i,qlt)=>{f();var _r=Di();Pw();iy();cU();Cv();Dw();dne();Mk();Yh();$we();dU();$o();typeof Flt>"u"&&(Flt=_r.jsbn.BigInteger);var Flt,gt=_r.asn1,wi=_r.pki=_r.pki||{};qlt.exports=wi.pbe=_r.pbe=_r.pbe||{};var Ok=wi.oids,lpr={name:"EncryptedPrivateKeyInfo",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},upr={name:"PBES2Algorithms",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:gt.Class.UNIVERSAL,type:gt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:gt.Class.UNIVERSAL,type:gt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},dpr={name:"pkcs-12PbeParams",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:gt.Class.UNIVERSAL,type:gt.Type.INTEGER,constructed:!1,capture:"iterations"}]};wi.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=_r.random.getBytesSync(r.saltSize),o=r.count,s=gt.integerToDer(o),c,l,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var d,p,m;switch(r.algorithm){case"aes128":c=16,d=16,p=Ok["aes128-CBC"],m=_r.aes.createEncryptionCipher;break;case"aes192":c=24,d=16,p=Ok["aes192-CBC"],m=_r.aes.createEncryptionCipher;break;case"aes256":c=32,d=16,p=Ok["aes256-CBC"],m=_r.aes.createEncryptionCipher;break;case"des":c=8,d=8,p=Ok.desCBC,m=_r.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),A=Ult(g),y=_r.pkcs5.pbkdf2(e,n,o,c,A),v=_r.random.getBytesSync(d),b=m(y);b.start(v),b.update(gt.toDer(t)),b.finish(),u=b.output.getBytes();var I=fpr(n,s,c,g);l=gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(Ok.pkcs5PBES2).getBytes()),gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(Ok.pkcs5PBKDF2).getBytes()),I]),gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(p).getBytes()),gt.create(gt.Class.UNIVERSAL,gt.Type.OCTETSTRING,!1,v)])])])}else if(r.algorithm==="3des"){c=24;var _=new _r.util.ByteBuffer(n),y=wi.pbe.generatePkcs12Key(e,_,1,o,c),v=wi.pbe.generatePkcs12Key(e,_,2,o,c),b=_r.des.createEncryptionCipher(y);b.start(v),b.update(gt.toDer(t)),b.finish(),u=b.output.getBytes(),l=gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(Ok["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OCTETSTRING,!1,n),gt.create(gt.Class.UNIVERSAL,gt.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var k=gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[l,gt.create(gt.Class.UNIVERSAL,gt.Type.OCTETSTRING,!1,u)]);return k};wi.decryptPrivateKeyInfo=function(t,e){var r=null,n={},o=[];if(!gt.validate(t,lpr,n,o)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=o,s}var c=gt.derToOid(n.encryptionOid),l=wi.pbe.getCipher(c,n.encryptionParams,e),u=_r.util.createBuffer(n.encryptedData);return l.update(u),l.finish()&&(r=gt.fromDer(l.output)),r};wi.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:gt.toDer(t).getBytes()};return _r.pem.encode(r,{maxline:e})};wi.encryptedPrivateKeyFromPem=function(t){var e=_r.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return gt.fromDer(e.body)};wi.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=wi.wrapRsaPrivateKey(wi.privateKeyToAsn1(t));return n=wi.encryptPrivateKeyInfo(n,e,r),wi.encryptedPrivateKeyToPem(n)}var o,s,c,l;switch(r.algorithm){case"aes128":o="AES-128-CBC",c=16,s=_r.random.getBytesSync(16),l=_r.aes.createEncryptionCipher;break;case"aes192":o="AES-192-CBC",c=24,s=_r.random.getBytesSync(16),l=_r.aes.createEncryptionCipher;break;case"aes256":o="AES-256-CBC",c=32,s=_r.random.getBytesSync(16),l=_r.aes.createEncryptionCipher;break;case"3des":o="DES-EDE3-CBC",c=24,s=_r.random.getBytesSync(8),l=_r.des.createEncryptionCipher;break;case"des":o="DES-CBC",c=8,s=_r.random.getBytesSync(8),l=_r.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var d=_r.pbe.opensslDeriveBytes(e,s.substr(0,8),c),p=l(d);p.start(s),p.update(gt.toDer(wi.privateKeyToAsn1(t))),p.finish();var m={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:o,parameters:_r.util.bytesToHex(s).toUpperCase()},body:p.output.getBytes()};return _r.pem.encode(m)};wi.decryptRsaPrivateKey=function(t,e){var r=null,n=_r.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var o=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw o.headerType=o,o}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,c;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,c=_r.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,c=_r.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,c=_r.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,c=_r.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,c=_r.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,c=a(function(m){return _r.rc2.createDecryptionCipher(m,40)},"cipherFn");break;case"RC2-64-CBC":s=8,c=a(function(m){return _r.rc2.createDecryptionCipher(m,64)},"cipherFn");break;case"RC2-128-CBC":s=16,c=a(function(m){return _r.rc2.createDecryptionCipher(m,128)},"cipherFn");break;default:var o=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw o.algorithm=n.dekInfo.algorithm,o}var l=_r.util.hexToBytes(n.dekInfo.parameters),u=_r.pbe.opensslDeriveBytes(e,l.substr(0,8),s),d=c(u);if(d.start(l),d.update(_r.util.createBuffer(n.body)),d.finish())r=d.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=wi.decryptPrivateKeyInfo(gt.fromDer(r),e):r=gt.fromDer(r),r!==null&&(r=wi.privateKeyFromAsn1(r)),r};wi.pbe.generatePkcs12Key=function(t,e,r,n,o,s){var c,l;if(typeof s>"u"||s===null){if(!("sha1"in _r.md))throw new Error('"sha1" hash algorithm unavailable.');s=_r.md.sha1.create()}var u=s.digestLength,d=s.blockLength,p=new _r.util.ByteBuffer,m=new _r.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)m.putInt16(t.charCodeAt(l));m.putInt16(0)}var h=m.length(),g=e.length(),A=new _r.util.ByteBuffer;A.fillWithByte(r,d);var y=d*Math.ceil(g/d),v=new _r.util.ByteBuffer;for(l=0;l<y;l++)v.putByte(e.at(l%g));var b=d*Math.ceil(h/d),I=new _r.util.ByteBuffer;for(l=0;l<b;l++)I.putByte(m.at(l%h));var _=v;_.putBuffer(I);for(var k=Math.ceil(o/u),N=1;N<=k;N++){var F=new _r.util.ByteBuffer;F.putBytes(A.bytes()),F.putBytes(_.bytes());for(var O=0;O<n;O++)s.start(),s.update(F.getBytes()),F=s.digest();var Y=new _r.util.ByteBuffer;for(l=0;l<d;l++)Y.putByte(F.at(l%u));var z=Math.ceil(g/d)+Math.ceil(h/d),V=new _r.util.ByteBuffer;for(c=0;c<z;c++){var U=new _r.util.ByteBuffer(_.getBytes(d)),H=511;for(l=Y.length()-1;l>=0;l--)H=H>>8,H+=Y.at(l)+U.at(l),U.setAt(l,H&255);V.putBuffer(U)}_=V,p.putBuffer(F)}return p.truncate(p.length()-o),p};wi.pbe.getCipher=function(t,e,r){switch(t){case wi.oids.pkcs5PBES2:return wi.pbe.getCipherForPBES2(t,e,r);case wi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case wi.oids["pbewithSHAAnd40BitRC2-CBC"]:return wi.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};wi.pbe.getCipherForPBES2=function(t,e,r){var n={},o=[];if(!gt.validate(e,upr,n,o)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=o,s}if(t=gt.derToOid(n.kdfOid),t!==wi.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=gt.derToOid(n.encOid),t!==wi.oids["aes128-CBC"]&&t!==wi.oids["aes192-CBC"]&&t!==wi.oids["aes256-CBC"]&&t!==wi.oids["des-EDE3-CBC"]&&t!==wi.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var c=n.kdfSalt,l=_r.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var u,d;switch(wi.oids[t]){case"aes128-CBC":u=16,d=_r.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,d=_r.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,d=_r.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,d=_r.des.createDecryptionCipher;break;case"desCBC":u=8,d=_r.des.createDecryptionCipher;break}var p=Qlt(n.prfOid),m=_r.pkcs5.pbkdf2(r,c,l,u,p),h=n.encIv,g=d(m);return g.start(h),g};wi.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},o=[];if(!gt.validate(e,dpr,n,o)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=o,s}var c=_r.util.createBuffer(n.salt),l=_r.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var u,d,p;switch(t){case wi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,d=8,p=_r.des.startDecrypting;break;case wi.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,d=8,p=a(function(y,v){var b=_r.rc2.createDecryptionCipher(y,40);return b.start(v,null),b},"cipherFn");break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var m=Qlt(n.prfOid),h=wi.pbe.generatePkcs12Key(r,c,1,l,u,m);m.start();var g=wi.pbe.generatePkcs12Key(r,c,2,l,d,m);return p(h,g)};wi.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in _r.md))throw new Error('"md5" hash algorithm unavailable.');n=_r.md.md5.create()}e===null&&(e="");for(var o=[Olt(n,t+e)],s=16,c=1;s<r;++c,s+=16)o.push(Olt(n,o[c-1]+t+e));return o.join("").substr(0,r)};function Olt(t,e){return t.start().update(e).digest().getBytes()}a(Olt,"hash");function Qlt(t){var e;if(!t)e="hmacWithSHA1";else if(e=wi.oids[gt.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Ult(e)}a(Qlt,"prfOidToMessageDigest");function Ult(t){var e=_r.md;switch(t){case"hmacWithSHA224":e=_r.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}a(Ult,"prfAlgorithmToMessageDigest");function fpr(t,e,r,n){var o=gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OCTETSTRING,!1,t),gt.create(gt.Class.UNIVERSAL,gt.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&o.value.push(gt.create(gt.Class.UNIVERSAL,gt.Type.INTEGER,!1,_r.util.hexToBytes(r.toString(16))),gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(wi.oids[n]).getBytes()),gt.create(gt.Class.UNIVERSAL,gt.Type.NULL,!1,"")])),o}a(fpr,"createPbkdf2Params")});var e_e=W((T1i,$lt)=>{f();var u8=Di();iy();$o();var xr=u8.asn1,d8=$lt.exports=u8.pkcs7asn1=u8.pkcs7asn1||{};u8.pkcs7=u8.pkcs7||{};u8.pkcs7.asn1=d8;var Hlt={name:"ContentInfo",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:xr.Class.UNIVERSAL,type:xr.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:xr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};d8.contentInfoValidator=Hlt;var Wlt={name:"EncryptedContentInfo",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:xr.Class.UNIVERSAL,type:xr.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:xr.Class.UNIVERSAL,type:xr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:xr.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:xr.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};d8.envelopedDataValidator={name:"EnvelopedData",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:xr.Class.UNIVERSAL,type:xr.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Wlt)};d8.encryptedDataValidator={name:"EncryptedData",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:xr.Class.UNIVERSAL,type:xr.Type.INTEGER,constructed:!1,capture:"version"}].concat(Wlt)};var ppr={name:"SignerInfo",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:xr.Class.UNIVERSAL,type:xr.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:xr.Class.UNIVERSAL,type:xr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:xr.Class.UNIVERSAL,type:xr.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:xr.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:xr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:xr.Class.UNIVERSAL,type:xr.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:xr.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};d8.signedDataValidator={name:"SignedData",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:xr.Class.UNIVERSAL,type:xr.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Hlt,{name:"SignedData.Certificates",tagClass:xr.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:xr.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SET,capture:"signerInfos",optional:!0,value:[ppr]}]};d8.recipientInfoValidator={name:"RecipientInfo",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:xr.Class.UNIVERSAL,type:xr.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:xr.Class.UNIVERSAL,type:xr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:xr.Class.UNIVERSAL,type:xr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:xr.Class.UNIVERSAL,type:xr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:xr.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:xr.Class.UNIVERSAL,type:xr.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var t_e=W((_1i,jlt)=>{f();var Qk=Di();$o();Qk.mgf=Qk.mgf||{};var mpr=jlt.exports=Qk.mgf.mgf1=Qk.mgf1=Qk.mgf1||{};mpr.create=function(t){var e={generate:a(function(r,n){for(var o=new Qk.util.ByteBuffer,s=Math.ceil(n/t.digestLength),c=0;c<s;c++){var l=new Qk.util.ByteBuffer;l.putInt32(c),t.start(),t.update(r+l.getBytes()),o.putBuffer(t.digest())}return o.truncate(o.length()-n),o.getBytes()},"generate")};return e}});var Vlt=W((k1i,Glt)=>{f();var Ane=Di();t_e();Glt.exports=Ane.mgf=Ane.mgf||{};Ane.mgf.mgf1=Ane.mgf1});var yne=W((D1i,zlt)=>{f();var Uk=Di();Yh();$o();var hpr=zlt.exports=Uk.pss=Uk.pss||{};hpr.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,o=t.salt||null;typeof o=="string"&&(o=Uk.util.createBuffer(o));var s;if("saltLength"in t)s=t.saltLength;else if(o!==null)s=o.length();else throw new Error("Salt length not specified or specific salt not given.");if(o!==null&&o.length()!==s)throw new Error("Given salt length does not match length of given salt.");var c=t.prng||Uk.random,l={};return l.encode=function(u,d){var p,m=d-1,h=Math.ceil(m/8),g=u.digest().getBytes();if(h<n+s+2)throw new Error("Message is too long to encrypt.");var A;o===null?A=c.getBytesSync(s):A=o.bytes();var y=new Uk.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(g),y.putBytes(A),e.start(),e.update(y.getBytes());var v=e.digest().getBytes(),b=new Uk.util.ByteBuffer;b.fillWithByte(0,h-s-n-2),b.putByte(1),b.putBytes(A);var I=b.getBytes(),_=h-n-1,k=r.generate(v,_),N="";for(p=0;p<_;p++)N+=String.fromCharCode(I.charCodeAt(p)^k.charCodeAt(p));var F=65280>>8*h-m&255;return N=String.fromCharCode(N.charCodeAt(0)&~F)+N.substr(1),N+v+"\xBC"},l.verify=function(u,d,p){var m,h=p-1,g=Math.ceil(h/8);if(d=d.substr(-g),g<n+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(d.charCodeAt(g-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var A=g-n-1,y=d.substr(0,A),v=d.substr(A,n),b=65280>>8*g-h&255;if((y.charCodeAt(0)&b)!==0)throw new Error("Bits beyond keysize not zero as expected.");var I=r.generate(v,A),_="";for(m=0;m<A;m++)_+=String.fromCharCode(y.charCodeAt(m)^I.charCodeAt(m));_=String.fromCharCode(_.charCodeAt(0)&~b)+_.substr(1);var k=g-n-s-2;for(m=0;m<k;m++)if(_.charCodeAt(m)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var N=_.substr(-s),F=new Uk.util.ByteBuffer;F.fillWithByte(0,8),F.putBytes(u),F.putBytes(N),e.start(),e.update(F.getBytes());var O=e.digest().getBytes();return v===O},l}});var xne=W((N1i,Zlt)=>{f();var vn=Di();Pw();iy();cU();Cv();Vlt();Dw();Mk();yne();dU();$o();var oe=vn.asn1,er=Zlt.exports=vn.pki=vn.pki||{},No=er.oids,xc={};xc.CN=No.commonName;xc.commonName="CN";xc.C=No.countryName;xc.countryName="C";xc.L=No.localityName;xc.localityName="L";xc.ST=No.stateOrProvinceName;xc.stateOrProvinceName="ST";xc.O=No.organizationName;xc.organizationName="O";xc.OU=No.organizationalUnitName;xc.organizationalUnitName="OU";xc.E=No.emailAddress;xc.emailAddress="E";var Ylt=vn.pki.rsa.publicKeyValidator,gpr={name:"Certificate",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:oe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:oe.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:oe.Class.UNIVERSAL,type:oe.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:oe.Class.UNIVERSAL,type:oe.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:oe.Class.UNIVERSAL,type:oe.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:oe.Class.UNIVERSAL,type:oe.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Ylt,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:oe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:oe.Class.UNIVERSAL,type:oe.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:oe.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:oe.Class.UNIVERSAL,type:oe.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:oe.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:oe.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:oe.Class.UNIVERSAL,type:oe.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Apr={name:"rsapss",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:oe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:oe.Class.UNIVERSAL,type:oe.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:oe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:oe.Class.UNIVERSAL,type:oe.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:oe.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:oe.Class.UNIVERSAL,type:oe.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:oe.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:oe.Class.UNIVERSAL,type:oe.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},ypr={name:"CertificationRequestInfo",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Ylt,{name:"CertificationRequestInfo.attributes",tagClass:oe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SET,constructed:!0}]}]}]},Cpr={name:"CertificationRequest",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[ypr,{name:"CertificationRequest.signatureAlgorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:oe.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:oe.Class.UNIVERSAL,type:oe.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};er.RDNAttributesAsArray=function(t,e){for(var r=[],n,o,s,c=0;c<t.value.length;++c){n=t.value[c];for(var l=0;l<n.value.length;++l)s={},o=n.value[l],s.type=oe.derToOid(o.value[0].value),s.value=o.value[1].value,s.valueTagClass=o.value[1].type,s.type in No&&(s.name=No[s.type],s.name in xc&&(s.shortName=xc[s.name])),e&&(e.update(s.type),e.update(s.value)),r.push(s)}return r};er.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],o=oe.derToOid(n.value[0].value),s=n.value[1].value,c=0;c<s.length;++c){var l={};if(l.type=o,l.value=s[c].value,l.valueTagClass=s[c].type,l.type in No&&(l.name=No[l.type],l.name in xc&&(l.shortName=xc[l.name])),l.type===No.extensionRequest){l.extensions=[];for(var u=0;u<l.value.length;++u)l.extensions.push(er.certificateExtensionFromAsn1(l.value[u]))}e.push(l)}return e};function Mw(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,o=0;r===null&&o<t.attributes.length;++o)n=t.attributes[o],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}a(Mw,"_getAttribute");var Cne=a(function(t,e,r){var n={};if(t!==No["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:No.sha1},mgf:{algorithmOid:No.mgf1,hash:{algorithmOid:No.sha1}},saltLength:20});var o={},s=[];if(!oe.validate(e,Apr,o,s)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=s,c}return o.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=oe.derToOid(o.hashOid)),o.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=oe.derToOid(o.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=oe.derToOid(o.maskGenHashOid)),o.saltLength!==void 0&&(n.saltLength=o.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),vne=a(function(t){switch(No[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return vn.md.sha1.create();case"md5WithRSAEncryption":return vn.md.md5.create();case"sha256WithRSAEncryption":return vn.md.sha256.create();case"sha384WithRSAEncryption":return vn.md.sha384.create();case"sha512WithRSAEncryption":return vn.md.sha512.create();case"RSASSA-PSS":return vn.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),Jlt=a(function(t){var e=t.certificate,r;switch(e.signatureOid){case No.sha1WithRSAEncryption:case No.sha1WithRSASignature:break;case No["RSASSA-PSS"]:var n,o;if(n=No[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||vn.md[n]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=e.signatureParameters.mgf.hash.algorithmOid,s.name=n,s}if(o=No[e.signatureParameters.mgf.algorithmOid],o===void 0||vn.mgf[o]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=e.signatureParameters.mgf.algorithmOid,s.name=o,s}if(o=vn.mgf[o].create(vn.md[n].create()),n=No[e.signatureParameters.hash.algorithmOid],n===void 0||vn.md[n]===void 0){var s=new Error("Unsupported RSASSA-PSS hash function.");throw s.oid=e.signatureParameters.hash.algorithmOid,s.name=n,s}r=vn.pss.create(vn.md[n].create(),o,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");er.certificateFromPem=function(t,e,r){var n=vn.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var o=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw o.headerType=n.type,o}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=oe.fromDer(n.body,r);return er.certificateFromAsn1(s,e)};er.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:oe.toDer(er.certificateToAsn1(t)).getBytes()};return vn.pem.encode(r,{maxline:e})};er.publicKeyFromPem=function(t){var e=vn.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=oe.fromDer(e.body);return er.publicKeyFromAsn1(n)};er.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:oe.toDer(er.publicKeyToAsn1(t)).getBytes()};return vn.pem.encode(r,{maxline:e})};er.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:oe.toDer(er.publicKeyToRSAPublicKey(t)).getBytes()};return vn.pem.encode(r,{maxline:e})};er.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||vn.md.sha1.create(),n=e.type||"RSAPublicKey",o;switch(n){case"RSAPublicKey":o=oe.toDer(er.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":o=oe.toDer(er.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(o);var s=r.digest();if(e.encoding==="hex"){var c=s.toHex();return e.delimiter?c.match(/.{2}/g).join(e.delimiter):c}else{if(e.encoding==="binary")return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return s};er.certificationRequestFromPem=function(t,e,r){var n=vn.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var o=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw o.headerType=n.type,o}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=oe.fromDer(n.body,r);return er.certificationRequestFromAsn1(s,e)};er.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:oe.toDer(er.certificationRequestToAsn1(t)).getBytes()};return vn.pem.encode(r,{maxline:e})};er.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Mw(t.issuer,e)},t.issuer.addField=function(e){Zh([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Mw(t.subject,e)},t.subject.addField=function(e){Zh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Zh(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Zh(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)Xlt(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,o=0;r===null&&o<t.extensions.length;++o)n=t.extensions[o],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||vn.md.sha1.create();var n=No[t.md.algorithm+"WithRSAEncryption"];if(!n){var o=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw o.algorithm=t.md.algorithm,o}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=er.getTBSCertificate(t);var s=oe.toDer(t.tbsCertificate);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,o=t.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=o.attributes,s.actualIssuer=n.attributes,s}var c=e.md;if(c===null){c=vne({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||er.getTBSCertificate(e),u=oe.toDer(l);c.update(u.getBytes())}return c!==null&&(r=Jlt({certificate:t,md:c,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,o=e.subject;if(n.hash&&o.hash)r=n.hash===o.hash;else if(n.attributes.length===o.attributes.length){r=!0;for(var s,c,l=0;r&&l<n.attributes.length;++l)s=n.attributes[l],c=o.attributes[l],(s.type!==c.type||s.value!==c.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return er.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=No.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var o=t.generateSubjectKeyIdentifier().getBytes();return vn.util.hexToBytes(n.subjectKeyIdentifier)===o}}return!1},t};er.certificateFromAsn1=function(t,e){var r={},n=[];if(!oe.validate(t,gpr,r,n)){var o=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw o.errors=n,o}var s=oe.derToOid(r.publicKeyOid);if(s!==er.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=er.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=vn.util.createBuffer(r.certSerialNumber);c.serialNumber=l.toHex(),c.signatureOid=vn.asn1.derToOid(r.certSignatureOid),c.signatureParameters=Cne(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=vn.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=Cne(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(oe.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(oe.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(oe.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(oe.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=u[0],c.validity.notAfter=u[1],c.tbsCertificate=r.tbsCertificate,e){c.md=vne({signatureOid:c.signatureOid,type:"certificate"});var d=oe.toDer(c.tbsCertificate);c.md.update(d.getBytes())}var p=vn.md.sha1.create(),m=oe.toDer(r.certIssuer);p.update(m.getBytes()),c.issuer.getField=function(A){return Mw(c.issuer,A)},c.issuer.addField=function(A){Zh([A]),c.issuer.attributes.push(A)},c.issuer.attributes=er.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=p.digest().toHex();var h=vn.md.sha1.create(),g=oe.toDer(r.certSubject);return h.update(g.getBytes()),c.subject.getField=function(A){return Mw(c.subject,A)},c.subject.addField=function(A){Zh([A]),c.subject.attributes.push(A)},c.subject.attributes=er.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=h.digest().toHex(),r.certExtensions?c.extensions=er.certificateExtensionsFromAsn1(r.certExtensions):c.extensions=[],c.publicKey=er.publicKeyFromAsn1(r.subjectPublicKeyInfo),c};er.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],o=0;o<n.value.length;++o)e.push(er.certificateExtensionFromAsn1(n.value[o]));return e};er.certificateExtensionFromAsn1=function(t){var e={};if(e.id=oe.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===oe.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in No){if(e.name=No[e.id],e.name==="keyUsage"){var r=oe.fromDer(e.value),n=0,o=0;r.value.length>1&&(n=r.value.charCodeAt(1),o=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(o&128)===128}else if(e.name==="basicConstraints"){var r=oe.fromDer(e.value);r.value.length>0&&r.value[0].type===oe.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var s=null;r.value.length>0&&r.value[0].type===oe.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(e.pathLenConstraint=oe.derToInteger(s))}else if(e.name==="extKeyUsage")for(var r=oe.fromDer(e.value),c=0;c<r.value.length;++c){var l=oe.derToOid(r.value[c].value);l in No?e[No[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=oe.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var u,r=oe.fromDer(e.value),d=0;d<r.value.length;++d){u=r.value[d];var p={type:u.type,value:u.value};switch(e.altNames.push(p),u.type){case 1:case 2:case 6:break;case 7:p.ip=vn.util.bytesToIP(u.value);break;case 8:p.oid=oe.derToOid(u.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=oe.fromDer(e.value);e.subjectKeyIdentifier=vn.util.bytesToHex(r.value)}}return e};er.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!oe.validate(t,Cpr,r,n)){var o=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw o.errors=n,o}var s=oe.derToOid(r.publicKeyOid);if(s!==er.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=er.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=vn.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=Cne(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=vn.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=Cne(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,e){c.md=vne({signatureOid:c.signatureOid,type:"certification request"});var l=oe.toDer(c.certificationRequestInfo);c.md.update(l.getBytes())}var u=vn.md.sha1.create();return c.subject.getField=function(d){return Mw(c.subject,d)},c.subject.addField=function(d){Zh([d]),c.subject.attributes.push(d)},c.subject.attributes=er.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),c.subject.hash=u.digest().toHex(),c.publicKey=er.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(d){return Mw(c,d)},c.addAttribute=function(d){Zh([d]),c.attributes.push(d)},c.attributes=er.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c};er.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Mw(t.subject,e)},t.subject.addField=function(e){Zh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Mw(t,e)},t.addAttribute=function(e){Zh([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Zh(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Zh(e),t.attributes=e},t.sign=function(e,r){t.md=r||vn.md.sha1.create();var n=No[t.md.algorithm+"WithRSAEncryption"];if(!n){var o=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw o.algorithm=t.md.algorithm,o}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=er.getCertificationRequestInfo(t);var s=oe.toDer(t.certificationRequestInfo);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=vne({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||er.getCertificationRequestInfo(t),o=oe.toDer(n);r.update(o.getBytes())}return r!==null&&(e=Jlt({certificate:t,md:r,signature:t.signature})),e},t};function f8(t){for(var e=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]),r,n,o=t.attributes,s=0;s<o.length;++s){r=o[s];var c=r.value,l=oe.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===oe.Type.UTF8&&(c=vn.util.encodeUtf8(c))),n=oe.create(oe.Class.UNIVERSAL,oe.Type.SET,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(r.type).getBytes()),oe.create(oe.Class.UNIVERSAL,l,!1,c)])]),e.value.push(n)}return e}a(f8,"_dnToAsn1");function Zh(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in er.oids?e.name=er.oids[e.type]:e.shortName&&e.shortName in xc&&(e.name=er.oids[xc[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in er.oids)e.type=er.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in xc&&(e.shortName=xc[e.name]),e.type===No.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=oe.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var o=0;o<e.extensions.length;++o)e.value.push(er.certificateExtensionToAsn1(Xlt(e.extensions[o])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}a(Zh,"_fillMissingFields");function Xlt(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in er.oids&&(t.name=er.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in er.oids)t.id=er.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,o=0,s=0;t.digitalSignature&&(o|=128,n=7),t.nonRepudiation&&(o|=64,n=6),t.keyEncipherment&&(o|=32,n=5),t.dataEncipherment&&(o|=16,n=4),t.keyAgreement&&(o|=8,n=3),t.keyCertSign&&(o|=4,n=2),t.cRLSign&&(o|=2,n=1),t.encipherOnly&&(o|=1,n=0),t.decipherOnly&&(s|=128,n=7);var c=String.fromCharCode(n);s!==0?c+=String.fromCharCode(o)+String.fromCharCode(s):o!==0&&(c+=String.fromCharCode(o)),t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,c)}else if(t.name==="basicConstraints")t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,oe.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var u in t)t[u]===!0&&(u in No?l.push(oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(No[u]).getBytes())):u.indexOf(".")!==-1&&l.push(oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(u).getBytes())))}else if(t.name==="nsCertType"){var n=0,o=0;t.client&&(o|=128,n=7),t.server&&(o|=64,n=6),t.email&&(o|=32,n=5),t.objsign&&(o|=16,n=4),t.reserved&&(o|=8,n=3),t.sslCA&&(o|=4,n=2),t.emailCA&&(o|=2,n=1),t.objCA&&(o|=1,n=0);var c=String.fromCharCode(n);o!==0&&(c+=String.fromCharCode(o)),t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,c)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);for(var d,p=0;p<t.altNames.length;++p){d=t.altNames[p];var c=d.value;if(d.type===7&&d.ip){if(c=vn.util.bytesFromIP(d.ip),c===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else d.type===8&&(d.oid?c=oe.oidToDer(oe.oidToDer(d.oid)):c=oe.oidToDer(c));t.value.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,d.type,!1,c))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var m=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=m.toHex(),t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,m.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var h=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(oe.create(oe.Class.CONTEXT_SPECIFIC,0,!1,h))}if(t.authorityCertIssuer){var g=[oe.create(oe.Class.CONTEXT_SPECIFIC,4,!0,[f8(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(oe.create(oe.Class.CONTEXT_SPECIFIC,1,!0,g))}if(t.serialNumber){var A=vn.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(oe.create(oe.Class.CONTEXT_SPECIFIC,2,!1,A))}}else if(t.name==="cRLDistributionPoints"){t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);for(var l=t.value.value,y=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]),v=oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[]),d,p=0;p<t.altNames.length;++p){d=t.altNames[p];var c=d.value;if(d.type===7&&d.ip){if(c=vn.util.bytesFromIP(d.ip),c===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else d.type===8&&(d.oid?c=oe.oidToDer(oe.oidToDer(d.oid)):c=oe.oidToDer(c));v.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,d.type,!1,c))}y.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(y)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}a(Xlt,"_fillMissingExtensionFields");function r_e(t,e){switch(t){case No["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(e.hash.algorithmOid).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(oe.create(oe.Class.CONTEXT_SPECIFIC,1,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(e.mgf.algorithmOid).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(e.mgf.hash.algorithmOid).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(oe.create(oe.Class.CONTEXT_SPECIFIC,2,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,oe.integerToDer(e.saltLength).getBytes())])),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,r);default:return oe.create(oe.Class.UNIVERSAL,oe.Type.NULL,!1,"")}}a(r_e,"_signatureParametersToAsn1");function vpr(t){var e=oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var o=r[n],s=o.value,c=oe.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===oe.Type.UTF8&&(s=vn.util.encodeUtf8(s));var l=!1;"valueConstructed"in o&&(l=o.valueConstructed);var u=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(o.type).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SET,!0,[oe.create(oe.Class.UNIVERSAL,c,l,s)])]);e.value.push(u)}return e}a(vpr,"_CRIAttributesToAsn1");var xpr=new Date("1950-01-01T00:00:00Z"),Epr=new Date("2050-01-01T00:00:00Z");function Klt(t){return t>=xpr&&t<Epr?oe.create(oe.Class.UNIVERSAL,oe.Type.UTCTIME,!1,oe.dateToUtcTime(t)):oe.create(oe.Class.UNIVERSAL,oe.Type.GENERALIZEDTIME,!1,oe.dateToGeneralizedTime(t))}a(Klt,"_dateToAsn1");er.getTBSCertificate=function(t){var e=Klt(t.validity.notBefore),r=Klt(t.validity.notAfter),n=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,oe.integerToDer(t.version).getBytes())]),oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,vn.util.hexToBytes(t.serialNumber)),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(t.siginfo.algorithmOid).getBytes()),r_e(t.siginfo.algorithmOid,t.siginfo.parameters)]),f8(t.issuer),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[e,r]),f8(t.subject),er.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,1,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,2,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(er.certificateExtensionsToAsn1(t.extensions)),n};er.getCertificationRequestInfo=function(t){var e=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,oe.integerToDer(t.version).getBytes()),f8(t.subject),er.publicKeyToAsn1(t.publicKey),vpr(t)]);return e};er.distinguishedNameToAsn1=function(t){return f8(t)};er.certificateToAsn1=function(t){var e=t.tbsCertificate||er.getTBSCertificate(t);return oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[e,oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(t.signatureOid).getBytes()),r_e(t.signatureOid,t.signatureParameters)]),oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,"\0"+t.signature)])};er.certificateExtensionsToAsn1=function(t){var e=oe.create(oe.Class.CONTEXT_SPECIFIC,3,!0,[]),r=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(er.certificateExtensionToAsn1(t[n]));return e};er.certificateExtensionToAsn1=function(t){var e=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);e.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(t.id).getBytes())),t.critical&&e.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=oe.toDer(r).getBytes()),e.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,r)),e};er.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||er.getCertificationRequestInfo(t);return oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[e,oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(t.signatureOid).getBytes()),r_e(t.signatureOid,t.signatureParameters)]),oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,"\0"+t.signature)])};er.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(c){var l=r(c.issuer);return l},e.addCertificate=function(c){if(typeof c=="string"&&(c=vn.pki.certificateFromPem(c)),n(c.subject),!e.hasCertificate(c))if(c.subject.hash in e.certs){var l=e.certs[c.subject.hash];vn.util.isArray(l)||(l=[l]),l.push(c),e.certs[c.subject.hash]=l}else e.certs[c.subject.hash]=c},e.hasCertificate=function(c){typeof c=="string"&&(c=vn.pki.certificateFromPem(c));var l=r(c.subject);if(!l)return!1;vn.util.isArray(l)||(l=[l]);for(var u=oe.toDer(er.certificateToAsn1(c)).getBytes(),d=0;d<l.length;++d){var p=oe.toDer(er.certificateToAsn1(l[d])).getBytes();if(u===p)return!0}return!1},e.listAllCertificates=function(){var c=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var u=e.certs[l];if(!vn.util.isArray(u))c.push(u);else for(var d=0;d<u.length;++d)c.push(u[d])}return c},e.removeCertificate=function(c){var l;if(typeof c=="string"&&(c=vn.pki.certificateFromPem(c)),n(c.subject),!e.hasCertificate(c))return null;var u=r(c.subject);if(!vn.util.isArray(u))return l=e.certs[c.subject.hash],delete e.certs[c.subject.hash],l;for(var d=oe.toDer(er.certificateToAsn1(c)).getBytes(),p=0;p<u.length;++p){var m=oe.toDer(er.certificateToAsn1(u[p])).getBytes();d===m&&(l=u[p],u.splice(p,1))}return u.length===0&&delete e.certs[c.subject.hash],l};function r(c){return n(c),e.certs[c.hash]||null}a(r,"getBySubject");function n(c){if(!c.hash){var l=vn.md.sha1.create();c.attributes=er.RDNAttributesAsArray(f8(c),l),c.hash=l.digest().toHex()}}if(a(n,"ensureSubjectHasHash"),t)for(var o=0;o<t.length;++o){var s=t[o];e.addCertificate(s)}return e};er.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};er.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),o=r.validityCheckDate;typeof o>"u"&&(o=new Date);var s=!0,c=null,l=0;do{var u=e.shift(),d=null,p=!1;if(o&&(o<u.validity.notBefore||o>u.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:er.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:o}),c===null){if(d=e[0]||t.getIssuer(u),d===null&&u.isIssuer(u)&&(p=!0,d=u),d){var m=d;vn.util.isArray(m)||(m=[m]);for(var h=!1;!h&&m.length>0;){d=m.shift();try{h=d.verify(u)}catch{}}h||(c={message:"Certificate signature is invalid.",error:er.certificateError.bad_certificate})}c===null&&(!d||p)&&!t.hasCertificate(u)&&(c={message:"Certificate is not trusted.",error:er.certificateError.unknown_ca})}if(c===null&&d&&!u.isIssuer(d)&&(c={message:"Certificate issuer is invalid.",error:er.certificateError.bad_certificate}),c===null)for(var g={keyUsage:!0,basicConstraints:!0},A=0;c===null&&A<u.extensions.length;++A){var y=u.extensions[A];y.critical&&!(y.name in g)&&(c={message:"Certificate has an unsupported critical extension.",error:er.certificateError.unsupported_certificate})}if(c===null&&(!s||e.length===0&&(!d||p))){var v=u.getExtension("basicConstraints"),b=u.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||v===null)&&(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:er.certificateError.bad_certificate}),c===null&&v!==null&&!v.cA&&(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:er.certificateError.bad_certificate}),c===null&&b!==null&&"pathLenConstraint"in v){var I=l-1;I>v.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:er.certificateError.bad_certificate})}}var _=c===null?!0:c.error,k=r.verify?r.verify(_,l,n):_;if(k===!0)c=null;else throw _===!0&&(c={message:"The application rejected the certificate.",error:er.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!vn.util.isArray(k)?(k.message&&(c.message=k.message),k.error&&(c.error=k.error)):typeof k=="string"&&(c.error=k)),c;s=!1,++l}while(e.length>0);return!0}});var i_e=W((F1i,tut)=>{f();var Vs=Di();iy();o8();Dw();e_e();Zwe();Yh();dU();l8();$o();xne();var Se=Vs.asn1,eo=Vs.pki,pU=tut.exports=Vs.pkcs12=Vs.pkcs12||{},eut={name:"ContentInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},bpr={name:"PFX",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"},eut,{name:"PFX.macData",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Se.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Ipr={name:"SafeBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Tpr={name:"Attribute",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,capture:"values"}]},wpr={name:"CertBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Se.Class.UNIVERSAL,type:Se.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function fU(t,e,r,n){for(var o=[],s=0;s<t.length;s++)for(var c=0;c<t[s].safeBags.length;c++){var l=t[s].safeBags[c];if(!(n!==void 0&&l.type!==n)){if(e===null){o.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&o.push(l)}}return o}a(fU,"_getBagsByAttribute");pU.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},o=[];if(!Se.validate(t,bpr,n,o)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var c={version:n.version.charCodeAt(0),safeContents:[],getBags:a(function(v){var b={},I;return"localKeyId"in v?I=v.localKeyId:"localKeyIdHex"in v&&(I=Vs.util.hexToBytes(v.localKeyIdHex)),I===void 0&&!("friendlyName"in v)&&"bagType"in v&&(b[v.bagType]=fU(c.safeContents,null,null,v.bagType)),I!==void 0&&(b.localKeyId=fU(c.safeContents,"localKeyId",I,v.bagType)),"friendlyName"in v&&(b.friendlyName=fU(c.safeContents,"friendlyName",v.friendlyName,v.bagType)),b},"getBags"),getBagsByFriendlyName:a(function(v,b){return fU(c.safeContents,"friendlyName",v,b)},"getBagsByFriendlyName"),getBagsByLocalKeyId:a(function(v,b){return fU(c.safeContents,"localKeyId",v,b)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=n.version.charCodeAt(0),s}if(Se.derToOid(n.contentType)!==eo.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=Se.derToOid(n.contentType),s}var l=n.content.value[0];if(l.tagClass!==Se.Class.UNIVERSAL||l.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=n_e(l),n.mac){var u=null,d=0,p=Se.derToOid(n.macAlgorithm);switch(p){case eo.oids.sha1:u=Vs.md.sha1.create(),d=20;break;case eo.oids.sha256:u=Vs.md.sha256.create(),d=32;break;case eo.oids.sha384:u=Vs.md.sha384.create(),d=48;break;case eo.oids.sha512:u=Vs.md.sha512.create(),d=64;break;case eo.oids.md5:u=Vs.md.md5.create(),d=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+p);var m=new Vs.util.ByteBuffer(n.macSalt),h="macIterations"in n?parseInt(Vs.util.bytesToHex(n.macIterations),16):1,g=pU.generateKey(r,m,3,h,d,u),A=Vs.hmac.create();A.start(u,g),A.update(l.value);var y=A.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return _pr(c,l.value,e,r),c};function n_e(t){if(t.composed||t.constructed){for(var e=Vs.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}a(n_e,"_decodePkcs7Data");function _pr(t,e,r,n){if(e=Se.fromDer(e,r),e.tagClass!==Se.Class.UNIVERSAL||e.type!==Se.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var o=0;o<e.value.length;o++){var s=e.value[o],c={},l=[];if(!Se.validate(s,eut,c,l)){var u=new Error("Cannot read ContentInfo.");throw u.errors=l,u}var d={encrypted:!1},p=null,m=c.content.value[0];switch(Se.derToOid(c.contentType)){case eo.oids.data:if(m.tagClass!==Se.Class.UNIVERSAL||m.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");p=n_e(m).value;break;case eo.oids.encryptedData:p=Spr(m,n),d.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=Se.derToOid(c.contentType),u}d.safeBags=Rpr(p,r,n),t.safeContents.push(d)}}a(_pr,"_decodeAuthenticatedSafe");function Spr(t,e){var r={},n=[];if(!Se.validate(t,Vs.pkcs7.asn1.encryptedDataValidator,r,n)){var o=new Error("Cannot read EncryptedContentInfo.");throw o.errors=n,o}var s=Se.derToOid(r.contentType);if(s!==eo.oids.data){var o=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw o.oid=s,o}s=Se.derToOid(r.encAlgorithm);var c=eo.pbe.getCipher(s,r.encParameter,e),l=n_e(r.encryptedContentAsn1),u=Vs.util.createBuffer(l.value);if(c.update(u),!c.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return c.output.getBytes()}a(Spr,"_decryptSafeContents");function Rpr(t,e,r){if(!e&&t.length===0)return[];if(t=Se.fromDer(t,e),t.tagClass!==Se.Class.UNIVERSAL||t.type!==Se.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],o=0;o<t.value.length;o++){var s=t.value[o],c={},l=[];if(!Se.validate(s,Ipr,c,l)){var u=new Error("Cannot read SafeBag.");throw u.errors=l,u}var d={type:Se.derToOid(c.bagId),attributes:kpr(c.bagAttributes)};n.push(d);var p,m,h=c.bagValue.value[0];switch(d.type){case eo.oids.pkcs8ShroudedKeyBag:if(h=eo.decryptPrivateKeyInfo(h,r),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case eo.oids.keyBag:try{d.key=eo.privateKeyFromAsn1(h)}catch{d.key=null,d.asn1=h}continue;case eo.oids.certBag:p=wpr,m=a(function(){if(Se.derToOid(c.certId)!==eo.oids.x509Certificate){var A=new Error("Unsupported certificate type, only X.509 supported.");throw A.oid=Se.derToOid(c.certId),A}var y=Se.fromDer(c.cert,e);try{d.cert=eo.certificateFromAsn1(y,!0)}catch{d.cert=null,d.asn1=y}},"decoder");break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=d.type,u}if(p!==void 0&&!Se.validate(h,p,c,l)){var u=new Error("Cannot read PKCS#12 "+p.name);throw u.errors=l,u}m()}return n}a(Rpr,"_decodeSafeContents");function kpr(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},o=[];if(!Se.validate(t[r],Tpr,n,o)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=o,s}var c=Se.derToOid(n.oid);if(eo.oids[c]!==void 0){e[eo.oids[c]]=[];for(var l=0;l<n.values.length;++l)e[eo.oids[c]].push(n.values[l].value)}}return e}a(kpr,"_decodeBagAttributes");pU.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var o=n.localKeyId,s;if(o!==null)o=Vs.util.hexToBytes(o);else if(n.generateLocalKeyId)if(e){var c=Vs.util.isArray(e)?e[0]:e;typeof c=="string"&&(c=eo.certificateFromPem(c));var l=Vs.md.sha1.create();l.update(Se.toDer(eo.certificateToAsn1(c)).getBytes()),o=l.digest().getBytes()}else o=Vs.random.getBytes(20);var u=[];o!==null&&u.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.localKeyId).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,o)])])),"friendlyName"in n&&u.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.friendlyName).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(s=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,u));var d=[],p=[];e!==null&&(Vs.util.isArray(e)?p=e:p=[e]);for(var m=[],h=0;h<p.length;++h){e=p[h],typeof e=="string"&&(e=eo.certificateFromPem(e));var g=h===0?s:void 0,A=eo.certificateToAsn1(e),y=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.certBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.x509Certificate).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(A).getBytes())])])]),g]);m.push(y)}if(m.length>0){var v=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,m),b=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(v).getBytes())])]);d.push(b)}var I=null;if(t!==null){var _=eo.wrapRsaPrivateKey(eo.privateKeyToAsn1(t));r===null?I=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.keyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[_]),s]):I=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.pkcs8ShroudedKeyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[eo.encryptPrivateKeyInfo(_,r,n)]),s]);var k=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[I]),N=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(k).getBytes())])]);d.push(N)}var F=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,d),O;if(n.useMac){var l=Vs.md.sha1.create(),Y=new Vs.util.ByteBuffer(Vs.random.getBytes(n.saltSize)),z=n.count,t=pU.generateKey(r,Y,3,z,20),V=Vs.hmac.create();V.start(l,t),V.update(Se.toDer(F).getBytes());var U=V.getMac();O=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.sha1).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,U.getBytes())]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Y.getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(z).getBytes())])}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(3).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(eo.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(F).getBytes())])]),O])};pU.generateKey=Vs.pbe.generatePkcs12Key});var s_e=W((U1i,rut)=>{f();var Lw=Di();iy();Dw();Zwe();Mk();dne();i_e();yne();dU();$o();xne();var o_e=Lw.asn1,p8=rut.exports=Lw.pki=Lw.pki||{};p8.pemToDer=function(t){var e=Lw.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Lw.util.createBuffer(e.body)};p8.privateKeyFromPem=function(t){var e=Lw.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=o_e.fromDer(e.body);return p8.privateKeyFromAsn1(n)};p8.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:o_e.toDer(p8.privateKeyToAsn1(t)).getBytes()};return Lw.pem.encode(r,{maxline:e})};p8.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:o_e.toDer(t).getBytes()};return Lw.pem.encode(r,{maxline:e})}});var f_e=W((H1i,dut)=>{f();var Bt=Di();iy();o8();ane();Mk();s_e();Yh();l8();$o();var Tne=a(function(t,e,r,n){var o=Bt.util.createBuffer(),s=t.length>>1,c=s+(t.length&1),l=t.substr(0,c),u=t.substr(s,c),d=Bt.util.createBuffer(),p=Bt.hmac.create();r=e+r;var m=Math.ceil(n/16),h=Math.ceil(n/20);p.start("MD5",l);var g=Bt.util.createBuffer();d.putBytes(r);for(var A=0;A<m;++A)p.start(null,null),p.update(d.getBytes()),d.putBuffer(p.digest()),p.start(null,null),p.update(d.bytes()+r),g.putBuffer(p.digest());p.start("SHA1",u);var y=Bt.util.createBuffer();d.clear(),d.putBytes(r);for(var A=0;A<h;++A)p.start(null,null),p.update(d.getBytes()),d.putBuffer(p.digest()),p.start(null,null),p.update(d.bytes()+r),y.putBuffer(p.digest());return o.putBytes(Bt.util.xorBytes(g.getBytes(),y.getBytes(),n)),o},"prf_TLS1"),Ppr=a(function(t,e,r){var n=Bt.hmac.create();n.start("SHA1",t);var o=Bt.util.createBuffer();return o.putInt32(e[0]),o.putInt32(e[1]),o.putByte(r.type),o.putByte(r.version.major),o.putByte(r.version.minor),o.putInt16(r.length),o.putBytes(r.fragment.bytes()),n.update(o.getBytes()),n.digest().getBytes()},"hmac_sha1"),Dpr=a(function(t,e,r){var n=!1;try{var o=t.deflate(e.fragment.getBytes());e.fragment=Bt.util.createBuffer(o),e.length=o.length,n=!0}catch{}return n},"deflate"),Bpr=a(function(t,e,r){var n=!1;try{var o=t.inflate(e.fragment.getBytes());e.fragment=Bt.util.createBuffer(o),e.length=o.length,n=!0}catch{}return n},"inflate"),dm=a(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return Bt.util.createBuffer(t.getBytes(r))},"readVector"),eg=a(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),ae={};ae.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};ae.SupportedVersions=[ae.Versions.TLS_1_1,ae.Versions.TLS_1_0];ae.Version=ae.SupportedVersions[0];ae.MaxFragment=15360;ae.ConnectionEnd={server:0,client:1};ae.PRFAlgorithm={tls_prf_sha256:0};ae.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};ae.CipherType={stream:0,block:1,aead:2};ae.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};ae.CompressionMethod={none:0,deflate:1};ae.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};ae.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};ae.Alert={};ae.Alert.Level={warning:1,fatal:2};ae.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};ae.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};ae.CipherSuites={};ae.getCipherSuite=function(t){var e=null;for(var r in ae.CipherSuites){var n=ae.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};ae.handleUnexpected=function(t,e){var r=!t.open&&t.entity===ae.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.unexpected_message}})};ae.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(ae.queue(t,ae.createAlert(t,{level:ae.Alert.Level.warning,description:ae.Alert.Description.no_renegotiation})),ae.flush(t)),t.process()};ae.parseHelloMessage=function(t,e,r){var n=null,o=t.entity===ae.ConnectionEnd.client;if(r<38)t.error(t,{message:o?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});else{var s=e.fragment,c=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:Bt.util.createBuffer(s.getBytes(32)),session_id:dm(s,1),extensions:[]},o?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=dm(s,2),n.compression_methods=dm(s,1)),c=r-(c-s.length()),c>0){for(var l=dm(s,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:dm(l,2)});if(!o)for(var u=0;u<n.extensions.length;++u){var d=n.extensions[u];if(d.type[0]===0&&d.type[1]===0)for(var p=dm(d.data,2);p.length()>0;){var m=p.getByte();if(m!==0)break;t.session.extensions.server_name.serverNameList.push(dm(p,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.protocol_version}});if(o)t.session.cipherSuite=ae.getCipherSuite(n.cipher_suite);else for(var h=Bt.util.createBuffer(n.cipher_suites.bytes());h.length()>0&&(t.session.cipherSuite=ae.getCipherSuite(h.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.handshake_failure},cipherSuite:Bt.util.bytesToHex(n.cipher_suite)});o?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=ae.CompressionMethod.none}return n};ae.createSecurityParameters=function(t,e){var r=t.entity===ae.ConnectionEnd.client,n=e.random.bytes(),o=r?t.session.sp.client_random:n,s=r?n:ae.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:ae.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:o,server_random:s}};ae.handleServerHello=function(t,e,r){var n=ae.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.protocol_version}});t.session.version=t.version;var o=n.session_id.bytes();o.length>0&&o===t.session.id?(t.expect=sut,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=Mpr,t.session.resuming=!1,ae.createSecurityParameters(t,n)),t.session.id=o,t.process()}};ae.handleClientHello=function(t,e,r){var n=ae.parseHelloMessage(t,e,r);if(!t.fail){var o=n.session_id.bytes(),s=null;if(t.sessionCache&&(s=t.sessionCache.getSession(o),s===null?o="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,o="")),o.length===0&&(o=Bt.random.getBytes(32)),t.session.id=o,t.session.clientHelloVersion=n.version,t.session.sp={},s)t.version=t.session.version=s.version,t.session.sp=s.sp;else{for(var c,l=1;l<ae.SupportedVersions.length&&(c=ae.SupportedVersions[l],!(c.minor<=n.version.minor));++l);t.version={major:c.major,minor:c.minor},t.session.version=t.version}s!==null?(t.expect=u_e,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?Hpr:l_e,t.session.resuming=!1,ae.createSecurityParameters(t,n)),t.open=!0,ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createServerHello(t)})),t.session.resuming?(ae.queue(t,ae.createRecord(t,{type:ae.ContentType.change_cipher_spec,data:ae.createChangeCipherSpec()})),t.state.pending=ae.createConnectionState(t),t.state.current.write=t.state.pending.write,ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createFinished(t)}))):(ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createCertificate(t)})),t.fail||(ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createServerKeyExchange(t)})),t.verifyClient!==!1&&ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createCertificateRequest(t)})),ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createServerHelloDone(t)})))),ae.flush(t),t.process()}};ae.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});var n=e.fragment,o={certificate_list:dm(n,3)},s,c,l=[];try{for(;o.certificate_list.length()>0;)s=dm(o.certificate_list,3),c=Bt.asn1.fromDer(s),s=Bt.pki.certificateFromAsn1(c,!0),l.push(s)}catch(d){return t.error(t,{message:"Could not parse certificate list.",cause:d,send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.bad_certificate}})}var u=t.entity===ae.ConnectionEnd.client;(u||t.verifyClient===!0)&&l.length===0?t.error(t,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}}):l.length===0?t.expect=u?nut:l_e:(u?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],ae.verifyCertificateChain(t,l)&&(t.expect=u?nut:l_e)),t.process()};ae.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.unsupported_certificate}});t.expect=Lpr,t.process()};ae.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.unsupported_certificate}});var n=e.fragment,o={enc_pre_master_secret:dm(n,2).getBytes()},s=null;if(t.getPrivateKey)try{s=t.getPrivateKey(t,t.session.serverCertificate),s=Bt.pki.privateKeyFromPem(s)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}})}if(s===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}});try{var c=t.session.sp;c.pre_master_secret=s.decrypt(o.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==c.pre_master_secret.charCodeAt(0)||l.minor!==c.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{c.pre_master_secret=Bt.random.getBytes(48)}t.expect=u_e,t.session.clientCertificate!==null&&(t.expect=Wpr),t.process()};ae.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});var n=e.fragment,o={certificate_types:dm(n,1),certificate_authorities:dm(n,2)};t.session.certificateRequest=o,t.expect=Fpr,t.process()};ae.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var o=n.bytes();n.read+=4;var s={signature:dm(n,2).getBytes()},c=Bt.util.createBuffer();c.putBuffer(t.session.md5.digest()),c.putBuffer(t.session.sha1.digest()),c=c.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(c,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(o),t.session.sha1.update(o)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.handshake_failure}})}t.expect=u_e,t.process()};ae.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.insufficient_security}},o=0,s=t.verify(t,n.alert.description,o,[]);if(s!==!0)return(s||s===0)&&(typeof s=="object"&&!Bt.util.isArray(s)?(s.message&&(n.message=s.message),s.alert&&(n.alert.description=s.alert)):typeof s=="number"&&(n.alert.description=s)),t.error(t,n)}t.session.certificateRequest!==null&&(e=ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createCertificate(t)}),ae.queue(t,e)),e=ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createClientKeyExchange(t)}),ae.queue(t,e),t.expect=Upr;var c=a(function(l,u){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&ae.queue(l,ae.createRecord(l,{type:ae.ContentType.handshake,data:ae.createCertificateVerify(l,u)})),ae.queue(l,ae.createRecord(l,{type:ae.ContentType.change_cipher_spec,data:ae.createChangeCipherSpec()})),l.state.pending=ae.createConnectionState(l),l.state.current.write=l.state.pending.write,ae.queue(l,ae.createRecord(l,{type:ae.ContentType.handshake,data:ae.createFinished(l)})),l.expect=sut,ae.flush(l),l.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return c(t,null);ae.getClientSignature(t,c)};ae.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});var r=t.entity===ae.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=ae.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?Opr:$pr,t.process()};ae.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var o=n.bytes();n.read+=4;var s=e.fragment.getBytes();n=Bt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var c=t.entity===ae.ConnectionEnd.client,l=c?"server finished":"client finished",u=t.session.sp,d=12,p=Tne;if(n=p(u.master_secret,l,n.getBytes(),d),n.getBytes()!==s)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.decrypt_error}});t.session.md5.update(o),t.session.sha1.update(o),(t.session.resuming&&c||!t.session.resuming&&!c)&&(ae.queue(t,ae.createRecord(t,{type:ae.ContentType.change_cipher_spec,data:ae.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createFinished(t)}))),t.expect=c?Qpr:jpr,t.handshaking=!1,++t.handshakes,t.peerCertificate=c?t.session.serverCertificate:t.session.clientCertificate,ae.flush(t),t.isConnected=!0,t.connected(t),t.process()};ae.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},o;switch(n.description){case ae.Alert.Description.close_notify:o="Connection closed.";break;case ae.Alert.Description.unexpected_message:o="Unexpected message.";break;case ae.Alert.Description.bad_record_mac:o="Bad record MAC.";break;case ae.Alert.Description.decryption_failed:o="Decryption failed.";break;case ae.Alert.Description.record_overflow:o="Record overflow.";break;case ae.Alert.Description.decompression_failure:o="Decompression failed.";break;case ae.Alert.Description.handshake_failure:o="Handshake failure.";break;case ae.Alert.Description.bad_certificate:o="Bad certificate.";break;case ae.Alert.Description.unsupported_certificate:o="Unsupported certificate.";break;case ae.Alert.Description.certificate_revoked:o="Certificate revoked.";break;case ae.Alert.Description.certificate_expired:o="Certificate expired.";break;case ae.Alert.Description.certificate_unknown:o="Certificate unknown.";break;case ae.Alert.Description.illegal_parameter:o="Illegal parameter.";break;case ae.Alert.Description.unknown_ca:o="Unknown certificate authority.";break;case ae.Alert.Description.access_denied:o="Access denied.";break;case ae.Alert.Description.decode_error:o="Decode error.";break;case ae.Alert.Description.decrypt_error:o="Decrypt error.";break;case ae.Alert.Description.export_restriction:o="Export restriction.";break;case ae.Alert.Description.protocol_version:o="Unsupported protocol version.";break;case ae.Alert.Description.insufficient_security:o="Insufficient security.";break;case ae.Alert.Description.internal_error:o="Internal error.";break;case ae.Alert.Description.user_canceled:o="User canceled.";break;case ae.Alert.Description.no_renegotiation:o="Renegotiation not supported.";break;default:o="Unknown error.";break}if(n.description===ae.Alert.Description.close_notify)return t.close();t.error(t,{message:o,send:!1,origin:t.entity===ae.ConnectionEnd.client?"server":"client",alert:n}),t.process()};ae.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),o=r.getInt24();if(o>r.length())return t.fragmented=e,e.fragment=Bt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var s=r.bytes(o+4);r.read+=4,n in Ine[t.entity][t.expect]?(t.entity===ae.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:Bt.md.md5.create(),sha1:Bt.md.sha1.create()}),n!==ae.HandshakeType.hello_request&&n!==ae.HandshakeType.certificate_verify&&n!==ae.HandshakeType.finished&&(t.session.md5.update(s),t.session.sha1.update(s)),Ine[t.entity][t.expect][n](t,e,o)):ae.handleUnexpected(t,e)};ae.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};ae.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),o=r.getInt16(),s=r.getBytes(o);if(n===ae.HeartbeatMessageType.heartbeat_request){if(t.handshaking||o>s.length)return t.process();ae.queue(t,ae.createRecord(t,{type:ae.ContentType.heartbeat,data:ae.createHeartbeat(ae.HeartbeatMessageType.heartbeat_response,s)})),ae.flush(t)}else if(n===ae.HeartbeatMessageType.heartbeat_response){if(s!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,Bt.util.createBuffer(s))}t.process()};var Npr=0,Mpr=1,nut=2,Lpr=3,Fpr=4,sut=5,Opr=6,Qpr=7,Upr=8,qpr=0,Hpr=1,l_e=2,Wpr=3,u_e=4,$pr=5,jpr=6,se=ae.handleUnexpected,aut=ae.handleChangeCipherSpec,ud=ae.handleAlert,Hf=ae.handleHandshake,cut=ae.handleApplicationData,dd=ae.handleHeartbeat,d_e=[];d_e[ae.ConnectionEnd.client]=[[se,ud,Hf,se,dd],[se,ud,Hf,se,dd],[se,ud,Hf,se,dd],[se,ud,Hf,se,dd],[se,ud,Hf,se,dd],[aut,ud,se,se,dd],[se,ud,Hf,se,dd],[se,ud,Hf,cut,dd],[se,ud,Hf,se,dd]];d_e[ae.ConnectionEnd.server]=[[se,ud,Hf,se,dd],[se,ud,Hf,se,dd],[se,ud,Hf,se,dd],[se,ud,Hf,se,dd],[aut,ud,se,se,dd],[se,ud,Hf,se,dd],[se,ud,Hf,cut,dd],[se,ud,Hf,se,dd]];var Fw=ae.handleHelloRequest,Gpr=ae.handleServerHello,lut=ae.handleCertificate,iut=ae.handleServerKeyExchange,a_e=ae.handleCertificateRequest,Ene=ae.handleServerHelloDone,uut=ae.handleFinished,Ine=[];Ine[ae.ConnectionEnd.client]=[[se,se,Gpr,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[Fw,se,se,se,se,se,se,se,se,se,se,lut,iut,a_e,Ene,se,se,se,se,se,se],[Fw,se,se,se,se,se,se,se,se,se,se,se,iut,a_e,Ene,se,se,se,se,se,se],[Fw,se,se,se,se,se,se,se,se,se,se,se,se,a_e,Ene,se,se,se,se,se,se],[Fw,se,se,se,se,se,se,se,se,se,se,se,se,se,Ene,se,se,se,se,se,se],[Fw,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[Fw,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,uut],[Fw,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[Fw,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se]];var Vpr=ae.handleClientHello,zpr=ae.handleClientKeyExchange,Kpr=ae.handleCertificateVerify;Ine[ae.ConnectionEnd.server]=[[se,Vpr,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,lut,se,se,se,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,zpr,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,Kpr,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,uut],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se]];ae.generateKeys=function(t,e){var r=Tne,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var o=2*e.mac_key_length+2*e.enc_key_length,s=t.version.major===ae.Versions.TLS_1_0.major&&t.version.minor===ae.Versions.TLS_1_0.minor;s&&(o+=2*e.fixed_iv_length);var c=r(e.master_secret,"key expansion",n,o),l={client_write_MAC_key:c.getBytes(e.mac_key_length),server_write_MAC_key:c.getBytes(e.mac_key_length),client_write_key:c.getBytes(e.enc_key_length),server_write_key:c.getBytes(e.enc_key_length)};return s&&(l.client_write_IV=c.getBytes(e.fixed_iv_length),l.server_write_IV=c.getBytes(e.fixed_iv_length)),l};ae.createConnectionState=function(t){var e=t.entity===ae.ConnectionEnd.client,r=a(function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:a(function(c){return!0},"cipherFunction"),compressionState:null,compressFunction:a(function(c){return!0},"compressFunction"),updateSequenceNumber:a(function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1]},"updateSequenceNumber")};return s},"createMode"),n={read:r(),write:r()};if(n.read.update=function(s,c){return n.read.cipherFunction(c,n.read)?n.read.compressFunction(s,c,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,c){return n.write.compressFunction(s,c,n.write)?n.write.cipherFunction(c,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}}),!s.fail},t.session){var o=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(o),o.keys=ae.generateKeys(t,o),n.read.macKey=e?o.keys.server_write_MAC_key:o.keys.client_write_MAC_key,n.write.macKey=e?o.keys.client_write_MAC_key:o.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,o),o.compression_algorithm){case ae.CompressionMethod.none:break;case ae.CompressionMethod.deflate:n.read.compressFunction=Bpr,n.write.compressFunction=Dpr;break;default:throw new Error("Unsupported compression algorithm.")}}return n};ae.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=Bt.util.createBuffer();return r.putInt32(e),r.putBytes(Bt.random.getBytes(28)),r};ae.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};ae.createAlert=function(t,e){var r=Bt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),ae.createRecord(t,{type:ae.ContentType.alert,data:r})};ae.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=Bt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var o=e.length(),s=Bt.util.createBuffer();s.putByte(ae.CompressionMethod.none);var c=s.length(),l=Bt.util.createBuffer();if(t.virtualHost){var u=Bt.util.createBuffer();u.putByte(0),u.putByte(0);var d=Bt.util.createBuffer();d.putByte(0),eg(d,2,Bt.util.createBuffer(t.virtualHost));var p=Bt.util.createBuffer();eg(p,2,d),eg(u,2,p),l.putBuffer(u)}var m=l.length();m>0&&(m+=2);var h=t.session.id,g=h.length+1+2+4+28+2+o+1+c+m,A=Bt.util.createBuffer();return A.putByte(ae.HandshakeType.client_hello),A.putInt24(g),A.putByte(t.version.major),A.putByte(t.version.minor),A.putBytes(t.session.sp.client_random),eg(A,1,Bt.util.createBuffer(h)),eg(A,2,e),eg(A,1,s),m>0&&eg(A,2,l),A};ae.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=Bt.util.createBuffer();return n.putByte(ae.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),eg(n,1,Bt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};ae.createCertificate=function(t){var e=t.entity===ae.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var o=Bt.util.createBuffer();if(r!==null)try{Bt.util.isArray(r)||(r=[r]);for(var s=null,c=0;c<r.length;++c){var l=Bt.pem.decode(r[c])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=l.type,u}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var d=Bt.util.createBuffer(l.body);s===null&&(s=Bt.asn1.fromDer(d.bytes(),!1));var p=Bt.util.createBuffer();eg(p,3,d),o.putBuffer(p)}r=Bt.pki.certificateFromAsn1(s),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(g){return t.error(t,{message:"Could not send certificate list.",cause:g,send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.bad_certificate}})}var m=3+o.length(),h=Bt.util.createBuffer();return h.putByte(ae.HandshakeType.certificate),h.putInt24(m),eg(h,3,o),h};ae.createClientKeyExchange=function(t){var e=Bt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(Bt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var o=e.length+2,s=Bt.util.createBuffer();return s.putByte(ae.HandshakeType.client_key_exchange),s.putInt24(o),s.putInt16(e.length),s.putBytes(e),s};ae.createServerKeyExchange=function(t){var e=0,r=Bt.util.createBuffer();return e>0&&(r.putByte(ae.HandshakeType.server_key_exchange),r.putInt24(e)),r};ae.getClientSignature=function(t,e){var r=Bt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,o,s){var c=null;if(n.getPrivateKey)try{c=n.getPrivateKey(n,n.session.clientCertificate),c=Bt.pki.privateKeyFromPem(c)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}})}c===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}}):o=c.sign(o,null),s(n,o)},t.getSignature(t,r,e)};ae.createCertificateVerify=function(t,e){var r=e.length+2,n=Bt.util.createBuffer();return n.putByte(ae.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};ae.createCertificateRequest=function(t){var e=Bt.util.createBuffer();e.putByte(1);var r=Bt.util.createBuffer();for(var n in t.caStore.certs){var o=t.caStore.certs[n],s=Bt.pki.distinguishedNameToAsn1(o.subject),c=Bt.asn1.toDer(s);r.putInt16(c.length()),r.putBuffer(c)}var l=1+e.length()+2+r.length(),u=Bt.util.createBuffer();return u.putByte(ae.HandshakeType.certificate_request),u.putInt24(l),eg(u,1,e),eg(u,2,r),u};ae.createServerHelloDone=function(t){var e=Bt.util.createBuffer();return e.putByte(ae.HandshakeType.server_hello_done),e.putInt24(0),e};ae.createChangeCipherSpec=function(){var t=Bt.util.createBuffer();return t.putByte(1),t};ae.createFinished=function(t){var e=Bt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===ae.ConnectionEnd.client,n=t.session.sp,o=12,s=Tne,c=r?"client finished":"server finished";e=s(n.master_secret,c,e.getBytes(),o);var l=Bt.util.createBuffer();return l.putByte(ae.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};ae.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=Bt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var o=n.length(),s=Math.max(16,o-r-3);return n.putBytes(Bt.random.getBytes(s)),n};ae.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===ae.ContentType.handshake||e.type===ae.ContentType.alert||e.type===ae.ContentType.change_cipher_spec))){if(e.type===ae.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=ae.MaxFragment)n=[e];else{n=[];for(var o=e.fragment.bytes();o.length>ae.MaxFragment;)n.push(ae.createRecord(t,{type:e.type,data:Bt.util.createBuffer(o.slice(0,ae.MaxFragment))})),o=o.slice(ae.MaxFragment);o.length>0&&n.push(ae.createRecord(t,{type:e.type,data:Bt.util.createBuffer(o)}))}for(var s=0;s<n.length&&!t.fail;++s){var c=n[s],l=t.state.current.write;l.update(t,c)&&t.records.push(c)}}};ae.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var c_e=a(function(t){switch(t){case!0:return!0;case Bt.pki.certificateError.bad_certificate:return ae.Alert.Description.bad_certificate;case Bt.pki.certificateError.unsupported_certificate:return ae.Alert.Description.unsupported_certificate;case Bt.pki.certificateError.certificate_revoked:return ae.Alert.Description.certificate_revoked;case Bt.pki.certificateError.certificate_expired:return ae.Alert.Description.certificate_expired;case Bt.pki.certificateError.certificate_unknown:return ae.Alert.Description.certificate_unknown;case Bt.pki.certificateError.unknown_ca:return ae.Alert.Description.unknown_ca;default:return ae.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),Ypr=a(function(t){switch(t){case!0:return!0;case ae.Alert.Description.bad_certificate:return Bt.pki.certificateError.bad_certificate;case ae.Alert.Description.unsupported_certificate:return Bt.pki.certificateError.unsupported_certificate;case ae.Alert.Description.certificate_revoked:return Bt.pki.certificateError.certificate_revoked;case ae.Alert.Description.certificate_expired:return Bt.pki.certificateError.certificate_expired;case ae.Alert.Description.certificate_unknown:return Bt.pki.certificateError.certificate_unknown;case ae.Alert.Description.unknown_ca:return Bt.pki.certificateError.unknown_ca;default:return Bt.pki.certificateError.bad_certificate}},"_alertDescToCertError");ae.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(s,c,l){var u=c_e(s),d=t.verify(t,s,c,l);if(d!==!0){if(typeof d=="object"&&!Bt.util.isArray(d)){var p=new Error("The application rejected the certificate.");throw p.send=!0,p.alert={level:ae.Alert.Level.fatal,description:ae.Alert.Description.bad_certificate},d.message&&(p.message=d.message),d.alert&&(p.alert.description=d.alert),p}d!==s&&(d=Ypr(d))}return d},Bt.pki.verifyCertificateChain(t.caStore,e,r)}catch(s){var o=s;(typeof o!="object"||Bt.util.isArray(o))&&(o={send:!0,alert:{level:ae.Alert.Level.fatal,description:c_e(s)}}),"send"in o||(o.send=!0),"alert"in o||(o.alert={level:ae.Alert.Level.fatal,description:c_e(o.error)}),t.error(t,o)}return!t.fail};ae.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(o){var s=null,c=null;if(o?c=Bt.util.bytesToHex(o):r.order.length>0&&(c=r.order[0]),c!==null&&c in r.cache){s=r.cache[c],delete r.cache[c];for(var l in r.order)if(r.order[l]===c){r.order.splice(l,1);break}}return s},r.setSession=function(o,s){if(r.order.length===r.capacity){var c=r.order.shift();delete r.cache[c]}var c=Bt.util.bytesToHex(o);r.order.push(c),r.cache[c]=s}}return r};ae.createConnection=function(t){var e=null;t.caStore?Bt.util.isArray(t.caStore)?e=Bt.pki.createCaStore(t.caStore):e=t.caStore:e=Bt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in ae.CipherSuites)r.push(ae.CipherSuites[n])}var o=t.server?ae.ConnectionEnd.server:ae.ConnectionEnd.client,s=t.sessionCache?ae.createSessionCache(t.sessionCache):null,c={version:{major:ae.Version.major,minor:ae.Version.minor},entity:o,sessionId:t.sessionId,caStore:e,sessionCache:s,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(p,m,h,g){return m},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:Bt.util.createBuffer(),tlsData:Bt.util.createBuffer(),data:Bt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:a(function(p,m){m.origin=m.origin||(p.entity===ae.ConnectionEnd.client?"client":"server"),m.send&&(ae.queue(p,ae.createAlert(p,m.alert)),ae.flush(p));var h=m.fatal!==!1;h&&(p.fail=!0),t.error(p,m),h&&p.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};c.reset=function(p){c.version={major:ae.Version.major,minor:ae.Version.minor},c.record=null,c.session=null,c.peerCertificate=null,c.state={pending:null,current:null},c.expect=c.entity===ae.ConnectionEnd.client?Npr:qpr,c.fragmented=null,c.records=[],c.open=!1,c.handshakes=0,c.handshaking=!1,c.isConnected=!1,c.fail=!(p||typeof p>"u"),c.input.clear(),c.tlsData.clear(),c.data.clear(),c.state.current=ae.createConnectionState(c)},c.reset();var l=a(function(p,m){var h=m.type-ae.ContentType.change_cipher_spec,g=d_e[p.entity][p.expect];h in g?g[h](p,m):ae.handleUnexpected(p,m)},"_update"),u=a(function(p){var m=0,h=p.input,g=h.length();if(g<5)m=5-g;else{p.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:Bt.util.createBuffer(),ready:!1};var A=p.record.version.major===p.version.major;A&&p.session&&p.session.version&&(A=p.record.version.minor===p.version.minor),A||p.error(p,{message:"Incompatible TLS version.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.protocol_version}})}return m},"_readRecordHeader"),d=a(function(p){var m=0,h=p.input,g=h.length();if(g<p.record.length)m=p.record.length-g;else{p.record.fragment.putBytes(h.getBytes(p.record.length)),h.compact();var A=p.state.current.read;A.update(p,p.record)&&(p.fragmented!==null&&(p.fragmented.type===p.record.type?(p.fragmented.fragment.putBuffer(p.record.fragment),p.record=p.fragmented):p.error(p,{message:"Invalid fragmented record.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.unexpected_message}})),p.record.ready=!0)}return m},"_readRecord");return c.handshake=function(p){if(c.entity!==ae.ConnectionEnd.client)c.error(c,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(c.handshaking)c.error(c,{message:"Handshake already in progress.",fatal:!1});else{c.fail&&!c.open&&c.handshakes===0&&(c.fail=!1),c.handshaking=!0,p=p||"";var m=null;p.length>0&&(c.sessionCache&&(m=c.sessionCache.getSession(p)),m===null&&(p="")),p.length===0&&c.sessionCache&&(m=c.sessionCache.getSession(),m!==null&&(p=m.id)),c.session={id:p,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:Bt.md.md5.create(),sha1:Bt.md.sha1.create()},m&&(c.version=m.version,c.session.sp=m.sp),c.session.sp.client_random=ae.createRandom().getBytes(),c.open=!0,ae.queue(c,ae.createRecord(c,{type:ae.ContentType.handshake,data:ae.createClientHello(c)})),ae.flush(c)}},c.process=function(p){var m=0;return p&&c.input.putBytes(p),c.fail||(c.record!==null&&c.record.ready&&c.record.fragment.isEmpty()&&(c.record=null),c.record===null&&(m=u(c)),!c.fail&&c.record!==null&&!c.record.ready&&(m=d(c)),!c.fail&&c.record!==null&&c.record.ready&&l(c,c.record)),m},c.prepare=function(p){return ae.queue(c,ae.createRecord(c,{type:ae.ContentType.application_data,data:Bt.util.createBuffer(p)})),ae.flush(c)},c.prepareHeartbeatRequest=function(p,m){return p instanceof Bt.util.ByteBuffer&&(p=p.bytes()),typeof m>"u"&&(m=p.length),c.expectedHeartbeatPayload=p,ae.queue(c,ae.createRecord(c,{type:ae.ContentType.heartbeat,data:ae.createHeartbeat(ae.HeartbeatMessageType.heartbeat_request,p,m)})),ae.flush(c)},c.close=function(p){if(!c.fail&&c.sessionCache&&c.session){var m={id:c.session.id,version:c.session.version,sp:c.session.sp};m.sp.keys=null,c.sessionCache.setSession(m.id,m)}c.open&&(c.open=!1,c.input.clear(),(c.isConnected||c.handshaking)&&(c.isConnected=c.handshaking=!1,ae.queue(c,ae.createAlert(c,{level:ae.Alert.Level.warning,description:ae.Alert.Description.close_notify})),ae.flush(c)),c.closed(c)),c.reset(p)},c};dut.exports=Bt.tls=Bt.tls||{};for(bne in ae)typeof ae[bne]!="function"&&(Bt.tls[bne]=ae[bne]);var bne;Bt.tls.prf_tls1=Tne;Bt.tls.hmac_sha1=Ppr;Bt.tls.createSessionCache=ae.createSessionCache;Bt.tls.createConnection=ae.createConnection});var mut=W((j1i,put)=>{f();var Ow=Di();Pw();f_e();var tg=put.exports=Ow.tls;tg.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:a(function(t){t.bulk_cipher_algorithm=tg.BulkCipherAlgorithm.aes,t.cipher_type=tg.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=tg.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:fut};tg.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:a(function(t){t.bulk_cipher_algorithm=tg.BulkCipherAlgorithm.aes,t.cipher_type=tg.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=tg.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:fut};function fut(t,e,r){var n=e.entity===Ow.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:Ow.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:Ow.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=e0r,t.write.cipherFunction=Jpr,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=tg.hmac_sha1}a(fut,"initConnectionState");function Jpr(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var o;t.version.minor===tg.Versions.TLS_1_0.minor?o=e.cipherState.init?null:e.cipherState.iv:o=Ow.random.getBytesSync(16),e.cipherState.init=!0;var s=e.cipherState.cipher;return s.start({iv:o}),t.version.minor>=tg.Versions.TLS_1_1.minor&&s.output.putBytes(o),s.update(t.fragment),s.finish(Xpr)&&(t.fragment=s.output,t.length=t.fragment.length(),r=!0),r}a(Jpr,"encrypt_aes_cbc_sha1");function Xpr(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}a(Xpr,"encrypt_aes_cbc_sha1_padding");function Zpr(t,e,r){var n=!0;if(r){for(var o=e.length(),s=e.last(),c=o-1-s;c<o-1;++c)n=n&&e.at(c)==s;n&&e.truncate(s+1)}return n}a(Zpr,"decrypt_aes_cbc_sha1_padding");function e0r(t,e){var r=!1,n;t.version.minor===tg.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var o=e.cipherState.cipher;o.start({iv:n}),o.update(t.fragment),r=o.finish(Zpr);var s=e.macLength,c=Ow.random.getBytesSync(s),l=o.output.length();l>=s?(t.fragment=o.output.getBytes(l-s),c=o.output.getBytes(s)):t.fragment=o.output.getBytes(),t.fragment=Ow.util.createBuffer(t.fragment),t.length=t.fragment.length();var u=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=t0r(e.macKey,c,u)&&r,r}a(e0r,"decrypt_aes_cbc_sha1");function t0r(t,e,r){var n=Ow.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}a(t0r,"compareMacs")});var h_e=W((z1i,yut)=>{f();var ma=Di();Cv();$o();var mU=yut.exports=ma.sha512=ma.sha512||{};ma.md.sha512=ma.md.algorithms.sha512=mU;var gut=ma.sha384=ma.sha512.sha384=ma.sha512.sha384||{};gut.create=function(){return mU.create("SHA-384")};ma.md.sha384=ma.md.algorithms.sha384=gut;ma.sha512.sha256=ma.sha512.sha256||{create:a(function(){return mU.create("SHA-512/256")},"create")};ma.md["sha512/256"]=ma.md.algorithms["sha512/256"]=ma.sha512.sha256;ma.sha512.sha224=ma.sha512.sha224||{create:a(function(){return mU.create("SHA-512/224")},"create")};ma.md["sha512/224"]=ma.md.algorithms["sha512/224"]=ma.sha512.sha224;mU.create=function(t){if(Aut||r0r(),typeof t>"u"&&(t="SHA-512"),!(t in qk))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=qk[t],r=null,n=ma.util.createBuffer(),o=new Array(80),s=0;s<80;++s)o[s]=new Array(2);var c=64;switch(t){case"SHA-384":c=48;break;case"SHA-512/256":c=32;break;case"SHA-512/224":c=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:c,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var u=l.messageLengthSize/4,d=0;d<u;++d)l.fullMessageLength.push(0);n=ma.util.createBuffer(),r=new Array(e.length);for(var d=0;d<e.length;++d)r[d]=e[d].slice(0);return l},l.start(),l.update=function(u,d){d==="utf8"&&(u=ma.util.encodeUtf8(u));var p=u.length;l.messageLength+=p,p=[p/4294967296>>>0,p>>>0];for(var m=l.fullMessageLength.length-1;m>=0;--m)l.fullMessageLength[m]+=p[1],p[1]=p[0]+(l.fullMessageLength[m]/4294967296>>>0),l.fullMessageLength[m]=l.fullMessageLength[m]>>>0,p[0]=p[1]/4294967296>>>0;return n.putBytes(u),hut(r,o,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var u=ma.util.createBuffer();u.putBytes(n.bytes());var d=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,p=d&l.blockLength-1;u.putBytes(p_e.substr(0,l.blockLength-p));for(var m,h,g=l.fullMessageLength[0]*8,A=0;A<l.fullMessageLength.length-1;++A)m=l.fullMessageLength[A+1]*8,h=m/4294967296>>>0,g+=h,u.putInt32(g>>>0),g=m>>>0;u.putInt32(g);for(var y=new Array(r.length),A=0;A<r.length;++A)y[A]=r[A].slice(0);hut(y,o,u);var v=ma.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var A=0;A<b;++A)v.putInt32(y[A][0]),(A!==b-1||t!=="SHA-512/224")&&v.putInt32(y[A][1]);return v},l};var p_e=null,Aut=!1,m_e=null,qk=null;function r0r(){p_e="\x80",p_e+=ma.util.fillString("\0",128),m_e=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],qk={},qk["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],qk["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],qk["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],qk["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Aut=!0}a(r0r,"_init");function hut(t,e,r){for(var n,o,s,c,l,u,d,p,m,h,g,A,y,v,b,I,_,k,N,F,O,Y,z,V,U,H,ee,J,G,j,Z,ie,ne,re,fe,ye=r.length();ye>=128;){for(G=0;G<16;++G)e[G][0]=r.getInt32()>>>0,e[G][1]=r.getInt32()>>>0;for(;G<80;++G)ie=e[G-2],j=ie[0],Z=ie[1],n=((j>>>19|Z<<13)^(Z>>>29|j<<3)^j>>>6)>>>0,o=((j<<13|Z>>>19)^(Z<<3|j>>>29)^(j<<26|Z>>>6))>>>0,re=e[G-15],j=re[0],Z=re[1],s=((j>>>1|Z<<31)^(j>>>8|Z<<24)^j>>>7)>>>0,c=((j<<31|Z>>>1)^(j<<24|Z>>>8)^(j<<25|Z>>>7))>>>0,ne=e[G-7],fe=e[G-16],Z=o+ne[1]+c+fe[1],e[G][0]=n+ne[0]+s+fe[0]+(Z/4294967296>>>0)>>>0,e[G][1]=Z>>>0;for(y=t[0][0],v=t[0][1],b=t[1][0],I=t[1][1],_=t[2][0],k=t[2][1],N=t[3][0],F=t[3][1],O=t[4][0],Y=t[4][1],z=t[5][0],V=t[5][1],U=t[6][0],H=t[6][1],ee=t[7][0],J=t[7][1],G=0;G<80;++G)d=((O>>>14|Y<<18)^(O>>>18|Y<<14)^(Y>>>9|O<<23))>>>0,p=((O<<18|Y>>>14)^(O<<14|Y>>>18)^(Y<<23|O>>>9))>>>0,m=(U^O&(z^U))>>>0,h=(H^Y&(V^H))>>>0,l=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,u=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,g=(y&b|_&(y^b))>>>0,A=(v&I|k&(v^I))>>>0,Z=J+p+h+m_e[G][1]+e[G][1],n=ee+d+m+m_e[G][0]+e[G][0]+(Z/4294967296>>>0)>>>0,o=Z>>>0,Z=u+A,s=l+g+(Z/4294967296>>>0)>>>0,c=Z>>>0,ee=U,J=H,U=z,H=V,z=O,V=Y,Z=F+o,O=N+n+(Z/4294967296>>>0)>>>0,Y=Z>>>0,N=_,F=k,_=b,k=I,b=y,I=v,Z=o+c,y=n+s+(Z/4294967296>>>0)>>>0,v=Z>>>0;Z=t[0][1]+v,t[0][0]=t[0][0]+y+(Z/4294967296>>>0)>>>0,t[0][1]=Z>>>0,Z=t[1][1]+I,t[1][0]=t[1][0]+b+(Z/4294967296>>>0)>>>0,t[1][1]=Z>>>0,Z=t[2][1]+k,t[2][0]=t[2][0]+_+(Z/4294967296>>>0)>>>0,t[2][1]=Z>>>0,Z=t[3][1]+F,t[3][0]=t[3][0]+N+(Z/4294967296>>>0)>>>0,t[3][1]=Z>>>0,Z=t[4][1]+Y,t[4][0]=t[4][0]+O+(Z/4294967296>>>0)>>>0,t[4][1]=Z>>>0,Z=t[5][1]+V,t[5][0]=t[5][0]+z+(Z/4294967296>>>0)>>>0,t[5][1]=Z>>>0,Z=t[6][1]+H,t[6][0]=t[6][0]+U+(Z/4294967296>>>0)>>>0,t[6][1]=Z>>>0,Z=t[7][1]+J,t[7][0]=t[7][0]+ee+(Z/4294967296>>>0)>>>0,t[7][1]=Z>>>0,ye-=128}}a(hut,"_update")});var Cut=W(g_e=>{f();var n0r=Di();iy();var _u=n0r.asn1;g_e.privateKeyValidator={name:"PrivateKeyInfo",tagClass:_u.Class.UNIVERSAL,type:_u.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:_u.Class.UNIVERSAL,type:_u.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:_u.Class.UNIVERSAL,type:_u.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:_u.Class.UNIVERSAL,type:_u.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:_u.Class.UNIVERSAL,type:_u.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};g_e.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:_u.Class.UNIVERSAL,type:_u.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:_u.Class.UNIVERSAL,type:_u.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:_u.Class.UNIVERSAL,type:_u.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:_u.Class.UNIVERSAL,type:_u.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Dut=W((Z1i,Put)=>{f();var fd=Di();uU();Yh();h_e();$o();var Tut=Cut(),i0r=Tut.publicKeyValidator,o0r=Tut.privateKeyValidator;typeof vut>"u"&&(vut=fd.jsbn.BigInteger);var vut,C_e=fd.util.ByteBuffer,Vp=typeof Buffer>"u"?Uint8Array:Buffer;fd.pki=fd.pki||{};Put.exports=fd.pki.ed25519=fd.ed25519=fd.ed25519||{};var to=fd.ed25519;to.constants={};to.constants.PUBLIC_KEY_BYTE_LENGTH=32;to.constants.PRIVATE_KEY_BYTE_LENGTH=64;to.constants.SEED_BYTE_LENGTH=32;to.constants.SIGN_BYTE_LENGTH=64;to.constants.HASH_BYTE_LENGTH=64;to.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=fd.random.getBytesSync(to.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==to.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+to.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=aE({message:e,encoding:"binary"});for(var r=new Vp(to.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Vp(to.constants.PRIVATE_KEY_BYTE_LENGTH),o=0;o<32;++o)n[o]=e[o];return l0r(r,n),{publicKey:r,privateKey:n}};to.privateKeyFromAsn1=function(t){var e={},r=[],n=fd.asn1.validate(t,o0r,e,r);if(!n){var o=new Error("Invalid Key.");throw o.errors=r,o}var s=fd.asn1.derToOid(e.privateKeyOid),c=fd.oids.EdDSA25519;if(s!==c)throw new Error('Invalid OID "'+s+'"; OID must be "'+c+'".');var l=e.privateKey,u=aE({message:fd.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:u}};to.publicKeyFromAsn1=function(t){var e={},r=[],n=fd.asn1.validate(t,i0r,e,r);if(!n){var o=new Error("Invalid Key.");throw o.errors=r,o}var s=fd.asn1.derToOid(e.publicKeyOid),c=fd.oids.EdDSA25519;if(s!==c)throw new Error('Invalid OID "'+s+'"; OID must be "'+c+'".');var l=e.ed25519PublicKey;if(l.length!==to.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return aE({message:l,encoding:"binary"})};to.publicKeyFromPrivateKey=function(t){t=t||{};var e=aE({message:t.privateKey,encoding:"binary"});if(e.length!==to.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+to.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Vp(to.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};to.sign=function(t){t=t||{};var e=aE(t),r=aE({message:t.privateKey,encoding:"binary"});if(r.length===to.constants.SEED_BYTE_LENGTH){var n=to.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==to.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+to.constants.SEED_BYTE_LENGTH+" or "+to.constants.PRIVATE_KEY_BYTE_LENGTH);var o=new Vp(to.constants.SIGN_BYTE_LENGTH+e.length);u0r(o,e,e.length,r);for(var s=new Vp(to.constants.SIGN_BYTE_LENGTH),c=0;c<s.length;++c)s[c]=o[c];return s};to.verify=function(t){t=t||{};var e=aE(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=aE({message:t.signature,encoding:"binary"});if(r.length!==to.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+to.constants.SIGN_BYTE_LENGTH);var n=aE({message:t.publicKey,encoding:"binary"});if(n.length!==to.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+to.constants.PUBLIC_KEY_BYTE_LENGTH);var o=new Vp(to.constants.SIGN_BYTE_LENGTH+e.length),s=new Vp(to.constants.SIGN_BYTE_LENGTH+e.length),c;for(c=0;c<to.constants.SIGN_BYTE_LENGTH;++c)o[c]=r[c];for(c=0;c<e.length;++c)o[c+to.constants.SIGN_BYTE_LENGTH]=e[c];return d0r(s,o,o.length,n)>=0};function aE(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Vp)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new C_e(e,r)}else if(!(e instanceof C_e))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Vp(e.length()),o=0;o<n.length;++o)n[o]=e.at(o);return n}a(aE,"messageToNativeBuffer");var v_e=Fn(),wne=Fn([1]),s0r=Fn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),a0r=Fn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),xut=Fn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Eut=Fn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),A_e=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),c0r=Fn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function hU(t,e){var r=fd.md.sha512.create(),n=new C_e(t);r.update(n.getBytes(e),"binary");var o=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(o,"binary");for(var s=new Vp(to.constants.HASH_BYTE_LENGTH),c=0;c<64;++c)s[c]=o.charCodeAt(c);return s}a(hU,"sha512");function l0r(t,e){var r=[Fn(),Fn(),Fn(),Fn()],n,o=hU(e,32);for(o[0]&=248,o[31]&=127,o[31]|=64,I_e(r,o),b_e(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}a(l0r,"crypto_sign_keypair");function u0r(t,e,r,n){var o,s,c=new Float64Array(64),l=[Fn(),Fn(),Fn(),Fn()],u=hU(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var d=r+64;for(o=0;o<r;++o)t[64+o]=e[o];for(o=0;o<32;++o)t[32+o]=u[32+o];var p=hU(t.subarray(32),r+32);for(x_e(p),I_e(l,p),b_e(t,l),o=32;o<64;++o)t[o]=n[o];var m=hU(t,r+64);for(x_e(m),o=32;o<64;++o)c[o]=0;for(o=0;o<32;++o)c[o]=p[o];for(o=0;o<32;++o)for(s=0;s<32;s++)c[o+s]+=m[o]*u[s];return wut(t.subarray(32),c),d}a(u0r,"crypto_sign");function d0r(t,e,r,n){var o,s,c=new Vp(32),l=[Fn(),Fn(),Fn(),Fn()],u=[Fn(),Fn(),Fn(),Fn()];if(s=-1,r<64||f0r(u,n))return-1;for(o=0;o<r;++o)t[o]=e[o];for(o=0;o<32;++o)t[o+32]=n[o];var d=hU(t,r);if(x_e(d),Rut(l,u,d),I_e(u,e.subarray(32)),E_e(l,u),b_e(c,l),r-=64,_ut(e,0,c,0)){for(o=0;o<r;++o)t[o]=0;return-1}for(o=0;o<r;++o)t[o]=e[o+64];return s=r,s}a(d0r,"crypto_sign_open");function wut(t,e){var r,n,o,s;for(n=63;n>=32;--n){for(r=0,o=n-32,s=n-12;o<s;++o)e[o]+=r-16*e[n]*A_e[o-(n-32)],r=e[o]+128>>8,e[o]-=r*256;e[o]+=r,e[n]=0}for(r=0,o=0;o<32;++o)e[o]+=r-(e[31]>>4)*A_e[o],r=e[o]>>8,e[o]&=255;for(o=0;o<32;++o)e[o]-=r*A_e[o];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}a(wut,"modL");function x_e(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;wut(t,e)}a(x_e,"reduce");function E_e(t,e){var r=Fn(),n=Fn(),o=Fn(),s=Fn(),c=Fn(),l=Fn(),u=Fn(),d=Fn(),p=Fn();h8(r,t[1],t[0]),h8(p,e[1],e[0]),Ds(r,r,p),m8(n,t[0],t[1]),m8(p,e[0],e[1]),Ds(n,n,p),Ds(o,t[3],e[3]),Ds(o,o,a0r),Ds(s,t[2],e[2]),m8(s,s,s),h8(c,n,r),h8(l,s,o),m8(u,s,o),m8(d,n,r),Ds(t[0],c,l),Ds(t[1],d,u),Ds(t[2],u,l),Ds(t[3],c,d)}a(E_e,"add");function but(t,e,r){for(var n=0;n<4;++n)kut(t[n],e[n],r)}a(but,"cswap");function b_e(t,e){var r=Fn(),n=Fn(),o=Fn();g0r(o,e[2]),Ds(r,e[0],o),Ds(n,e[1],o),_ne(t,n),t[31]^=Sut(r)<<7}a(b_e,"pack");function _ne(t,e){var r,n,o,s=Fn(),c=Fn();for(r=0;r<16;++r)c[r]=e[r];for(y_e(c),y_e(c),y_e(c),n=0;n<2;++n){for(s[0]=c[0]-65517,r=1;r<15;++r)s[r]=c[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=c[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,kut(c,s,1-o)}for(r=0;r<16;r++)t[2*r]=c[r]&255,t[2*r+1]=c[r]>>8}a(_ne,"pack25519");function f0r(t,e){var r=Fn(),n=Fn(),o=Fn(),s=Fn(),c=Fn(),l=Fn(),u=Fn();return Qw(t[2],wne),p0r(t[1],e),Hk(o,t[1]),Ds(s,o,s0r),h8(o,o,t[2]),m8(s,t[2],s),Hk(c,s),Hk(l,c),Ds(u,l,c),Ds(r,u,o),Ds(r,r,s),m0r(r,r),Ds(r,r,o),Ds(r,r,s),Ds(r,r,s),Ds(t[0],r,s),Hk(n,t[0]),Ds(n,n,s),Iut(n,o)&&Ds(t[0],t[0],c0r),Hk(n,t[0]),Ds(n,n,s),Iut(n,o)?-1:(Sut(t[0])===e[31]>>7&&h8(t[0],v_e,t[0]),Ds(t[3],t[0],t[1]),0)}a(f0r,"unpackneg");function p0r(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}a(p0r,"unpack25519");function m0r(t,e){var r=Fn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Hk(r,r),n!==1&&Ds(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}a(m0r,"pow2523");function Iut(t,e){var r=new Vp(32),n=new Vp(32);return _ne(r,t),_ne(n,e),_ut(r,0,n,0)}a(Iut,"neq25519");function _ut(t,e,r,n){return h0r(t,e,r,n,32)}a(_ut,"crypto_verify_32");function h0r(t,e,r,n,o){var s,c=0;for(s=0;s<o;++s)c|=t[e+s]^r[n+s];return(1&c-1>>>8)-1}a(h0r,"vn");function Sut(t){var e=new Vp(32);return _ne(e,t),e[0]&1}a(Sut,"par25519");function Rut(t,e,r){var n,o;for(Qw(t[0],v_e),Qw(t[1],wne),Qw(t[2],wne),Qw(t[3],v_e),o=255;o>=0;--o)n=r[o/8|0]>>(o&7)&1,but(t,e,n),E_e(e,t),E_e(t,t),but(t,e,n)}a(Rut,"scalarmult");function I_e(t,e){var r=[Fn(),Fn(),Fn(),Fn()];Qw(r[0],xut),Qw(r[1],Eut),Qw(r[2],wne),Ds(r[3],xut,Eut),Rut(t,r,e)}a(I_e,"scalarbase");function Qw(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}a(Qw,"set25519");function g0r(t,e){var r=Fn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Hk(r,r),n!==2&&n!==4&&Ds(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}a(g0r,"inv25519");function y_e(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}a(y_e,"car25519");function kut(t,e,r){for(var n,o=~(r-1),s=0;s<16;++s)n=o&(t[s]^e[s]),t[s]^=n,e[s]^=n}a(kut,"sel25519");function Fn(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}a(Fn,"gf");function m8(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}a(m8,"A");function h8(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}a(h8,"Z");function Hk(t,e){Ds(t,e,e)}a(Hk,"S");function Ds(t,e,r){var n,o,s=0,c=0,l=0,u=0,d=0,p=0,m=0,h=0,g=0,A=0,y=0,v=0,b=0,I=0,_=0,k=0,N=0,F=0,O=0,Y=0,z=0,V=0,U=0,H=0,ee=0,J=0,G=0,j=0,Z=0,ie=0,ne=0,re=r[0],fe=r[1],ye=r[2],Qe=r[3],we=r[4],Xe=r[5],Oe=r[6],ut=r[7],Rt=r[8],Et=r[9],At=r[10],de=r[11],qe=r[12],Ce=r[13],$e=r[14],ce=r[15];n=e[0],s+=n*re,c+=n*fe,l+=n*ye,u+=n*Qe,d+=n*we,p+=n*Xe,m+=n*Oe,h+=n*ut,g+=n*Rt,A+=n*Et,y+=n*At,v+=n*de,b+=n*qe,I+=n*Ce,_+=n*$e,k+=n*ce,n=e[1],c+=n*re,l+=n*fe,u+=n*ye,d+=n*Qe,p+=n*we,m+=n*Xe,h+=n*Oe,g+=n*ut,A+=n*Rt,y+=n*Et,v+=n*At,b+=n*de,I+=n*qe,_+=n*Ce,k+=n*$e,N+=n*ce,n=e[2],l+=n*re,u+=n*fe,d+=n*ye,p+=n*Qe,m+=n*we,h+=n*Xe,g+=n*Oe,A+=n*ut,y+=n*Rt,v+=n*Et,b+=n*At,I+=n*de,_+=n*qe,k+=n*Ce,N+=n*$e,F+=n*ce,n=e[3],u+=n*re,d+=n*fe,p+=n*ye,m+=n*Qe,h+=n*we,g+=n*Xe,A+=n*Oe,y+=n*ut,v+=n*Rt,b+=n*Et,I+=n*At,_+=n*de,k+=n*qe,N+=n*Ce,F+=n*$e,O+=n*ce,n=e[4],d+=n*re,p+=n*fe,m+=n*ye,h+=n*Qe,g+=n*we,A+=n*Xe,y+=n*Oe,v+=n*ut,b+=n*Rt,I+=n*Et,_+=n*At,k+=n*de,N+=n*qe,F+=n*Ce,O+=n*$e,Y+=n*ce,n=e[5],p+=n*re,m+=n*fe,h+=n*ye,g+=n*Qe,A+=n*we,y+=n*Xe,v+=n*Oe,b+=n*ut,I+=n*Rt,_+=n*Et,k+=n*At,N+=n*de,F+=n*qe,O+=n*Ce,Y+=n*$e,z+=n*ce,n=e[6],m+=n*re,h+=n*fe,g+=n*ye,A+=n*Qe,y+=n*we,v+=n*Xe,b+=n*Oe,I+=n*ut,_+=n*Rt,k+=n*Et,N+=n*At,F+=n*de,O+=n*qe,Y+=n*Ce,z+=n*$e,V+=n*ce,n=e[7],h+=n*re,g+=n*fe,A+=n*ye,y+=n*Qe,v+=n*we,b+=n*Xe,I+=n*Oe,_+=n*ut,k+=n*Rt,N+=n*Et,F+=n*At,O+=n*de,Y+=n*qe,z+=n*Ce,V+=n*$e,U+=n*ce,n=e[8],g+=n*re,A+=n*fe,y+=n*ye,v+=n*Qe,b+=n*we,I+=n*Xe,_+=n*Oe,k+=n*ut,N+=n*Rt,F+=n*Et,O+=n*At,Y+=n*de,z+=n*qe,V+=n*Ce,U+=n*$e,H+=n*ce,n=e[9],A+=n*re,y+=n*fe,v+=n*ye,b+=n*Qe,I+=n*we,_+=n*Xe,k+=n*Oe,N+=n*ut,F+=n*Rt,O+=n*Et,Y+=n*At,z+=n*de,V+=n*qe,U+=n*Ce,H+=n*$e,ee+=n*ce,n=e[10],y+=n*re,v+=n*fe,b+=n*ye,I+=n*Qe,_+=n*we,k+=n*Xe,N+=n*Oe,F+=n*ut,O+=n*Rt,Y+=n*Et,z+=n*At,V+=n*de,U+=n*qe,H+=n*Ce,ee+=n*$e,J+=n*ce,n=e[11],v+=n*re,b+=n*fe,I+=n*ye,_+=n*Qe,k+=n*we,N+=n*Xe,F+=n*Oe,O+=n*ut,Y+=n*Rt,z+=n*Et,V+=n*At,U+=n*de,H+=n*qe,ee+=n*Ce,J+=n*$e,G+=n*ce,n=e[12],b+=n*re,I+=n*fe,_+=n*ye,k+=n*Qe,N+=n*we,F+=n*Xe,O+=n*Oe,Y+=n*ut,z+=n*Rt,V+=n*Et,U+=n*At,H+=n*de,ee+=n*qe,J+=n*Ce,G+=n*$e,j+=n*ce,n=e[13],I+=n*re,_+=n*fe,k+=n*ye,N+=n*Qe,F+=n*we,O+=n*Xe,Y+=n*Oe,z+=n*ut,V+=n*Rt,U+=n*Et,H+=n*At,ee+=n*de,J+=n*qe,G+=n*Ce,j+=n*$e,Z+=n*ce,n=e[14],_+=n*re,k+=n*fe,N+=n*ye,F+=n*Qe,O+=n*we,Y+=n*Xe,z+=n*Oe,V+=n*ut,U+=n*Rt,H+=n*Et,ee+=n*At,J+=n*de,G+=n*qe,j+=n*Ce,Z+=n*$e,ie+=n*ce,n=e[15],k+=n*re,N+=n*fe,F+=n*ye,O+=n*Qe,Y+=n*we,z+=n*Xe,V+=n*Oe,U+=n*ut,H+=n*Rt,ee+=n*Et,J+=n*At,G+=n*de,j+=n*qe,Z+=n*Ce,ie+=n*$e,ne+=n*ce,s+=38*N,c+=38*F,l+=38*O,u+=38*Y,d+=38*z,p+=38*V,m+=38*U,h+=38*H,g+=38*ee,A+=38*J,y+=38*G,v+=38*j,b+=38*Z,I+=38*ie,_+=38*ne,o=1,n=s+o+65535,o=Math.floor(n/65536),s=n-o*65536,n=c+o+65535,o=Math.floor(n/65536),c=n-o*65536,n=l+o+65535,o=Math.floor(n/65536),l=n-o*65536,n=u+o+65535,o=Math.floor(n/65536),u=n-o*65536,n=d+o+65535,o=Math.floor(n/65536),d=n-o*65536,n=p+o+65535,o=Math.floor(n/65536),p=n-o*65536,n=m+o+65535,o=Math.floor(n/65536),m=n-o*65536,n=h+o+65535,o=Math.floor(n/65536),h=n-o*65536,n=g+o+65535,o=Math.floor(n/65536),g=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=y+o+65535,o=Math.floor(n/65536),y=n-o*65536,n=v+o+65535,o=Math.floor(n/65536),v=n-o*65536,n=b+o+65535,o=Math.floor(n/65536),b=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=_+o+65535,o=Math.floor(n/65536),_=n-o*65536,n=k+o+65535,o=Math.floor(n/65536),k=n-o*65536,s+=o-1+37*(o-1),o=1,n=s+o+65535,o=Math.floor(n/65536),s=n-o*65536,n=c+o+65535,o=Math.floor(n/65536),c=n-o*65536,n=l+o+65535,o=Math.floor(n/65536),l=n-o*65536,n=u+o+65535,o=Math.floor(n/65536),u=n-o*65536,n=d+o+65535,o=Math.floor(n/65536),d=n-o*65536,n=p+o+65535,o=Math.floor(n/65536),p=n-o*65536,n=m+o+65535,o=Math.floor(n/65536),m=n-o*65536,n=h+o+65535,o=Math.floor(n/65536),h=n-o*65536,n=g+o+65535,o=Math.floor(n/65536),g=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=y+o+65535,o=Math.floor(n/65536),y=n-o*65536,n=v+o+65535,o=Math.floor(n/65536),v=n-o*65536,n=b+o+65535,o=Math.floor(n/65536),b=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=_+o+65535,o=Math.floor(n/65536),_=n-o*65536,n=k+o+65535,o=Math.floor(n/65536),k=n-o*65536,s+=o-1+37*(o-1),t[0]=s,t[1]=c,t[2]=l,t[3]=u,t[4]=d,t[5]=p,t[6]=m,t[7]=h,t[8]=g,t[9]=A,t[10]=y,t[11]=v,t[12]=b,t[13]=I,t[14]=_,t[15]=k}a(Ds,"M")});var Lut=W((rxi,Mut)=>{f();var fm=Di();$o();Yh();uU();Mut.exports=fm.kem=fm.kem||{};var But=fm.jsbn.BigInteger;fm.kem.rsa={};fm.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||fm.random,n={};return n.encrypt=function(o,s){var c=Math.ceil(o.n.bitLength()/8),l;do l=new But(fm.util.bytesToHex(r.getBytesSync(c)),16).mod(o.n);while(l.compareTo(But.ONE)<=0);l=fm.util.hexToBytes(l.toString(16));var u=c-l.length;u>0&&(l=fm.util.fillString("\0",u)+l);var d=o.encrypt(l,"NONE"),p=t.generate(l,s);return{encapsulation:d,key:p}},n.decrypt=function(o,s,c){var l=o.decrypt(s,"NONE");return t.generate(l,c)},n};fm.kem.kdf1=function(t,e){Nut(this,t,0,e||t.digestLength)};fm.kem.kdf2=function(t,e){Nut(this,t,1,e||t.digestLength)};function Nut(t,e,r,n){t.generate=function(o,s){for(var c=new fm.util.ByteBuffer,l=Math.ceil(s/n)+r,u=new fm.util.ByteBuffer,d=r;d<l;++d){u.putInt32(d),e.start(),e.update(o+u.getBytes());var p=e.digest();c.putBytes(p.getBytes(n))}return c.truncate(c.length()-s),c.getBytes()}}a(Nut,"_createKDF")});var Uut=W((oxi,Qut)=>{f();var Ao=Di();$o();Qut.exports=Ao.log=Ao.log||{};Ao.log.levels=["none","error","warning","info","debug","verbose","max"];var Sne={},__e=[],AU=null;Ao.log.LEVEL_LOCKED=2;Ao.log.NO_LEVEL_CHECK=4;Ao.log.INTERPOLATE=8;for(_v=0;_v<Ao.log.levels.length;++_v)T_e=Ao.log.levels[_v],Sne[T_e]={index:_v,name:T_e.toUpperCase()};var T_e,_v;Ao.log.logMessage=function(t){for(var e=Sne[t.level].index,r=0;r<__e.length;++r){var n=__e[r];if(n.flags&Ao.log.NO_LEVEL_CHECK)n.f(t);else{var o=Sne[n.level].index;e<=o&&n.f(n,t)}}};Ao.log.prepareStandard=function(t){"standard"in t||(t.standard=Sne[t.level].name+" ["+t.category+"] "+t.message)};Ao.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Ao.util.format.apply(this,e)}};Ao.log.prepareStandardFull=function(t){"standardFull"in t||(Ao.log.prepareStandard(t),t.standardFull=t.standard)};for(w_e=["error","warning","info","debug","verbose"],_v=0;_v<w_e.length;++_v)(function(e){Ao.log[e]=function(r,n){var o=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:e,category:r,message:n,arguments:o};Ao.log.logMessage(s)}})(w_e[_v]);var w_e,_v;Ao.log.makeLogger=function(t){var e={flags:0,f:t};return Ao.log.setLevel(e,"none"),e};Ao.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&Ao.log.LEVEL_LOCKED))for(var n=0;n<Ao.log.levels.length;++n){var o=Ao.log.levels[n];if(e==o){t.level=e,r=!0;break}}return r};Ao.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Ao.log.LEVEL_LOCKED:t.flags&=~Ao.log.LEVEL_LOCKED};Ao.log.addLogger=function(t){__e.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Fut={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},yU=a(function(t,e){Ao.log.prepareStandard(e);var r=Fut[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),g8=Ao.log.makeLogger(yU)):(yU=a(function(e,r){Ao.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),g8=Ao.log.makeLogger(yU)),Ao.log.setLevel(g8,"debug"),Ao.log.addLogger(g8),AU=g8):console={log:a(function(){},"log")};var g8,Fut,yU;AU!==null&&typeof window<"u"&&window.location&&(gU=new URL(window.location.href).searchParams,gU.has("console.level")&&Ao.log.setLevel(AU,gU.get("console.level").slice(-1)[0]),gU.has("console.lock")&&(Out=gU.get("console.lock").slice(-1)[0],Out=="true"&&Ao.log.lock(AU)));var gU,Out;Ao.log.consoleLogger=AU});var Hut=W((cxi,qut)=>{f();qut.exports=Cv();ane();l8();Uwe();h_e()});var jut=W((uxi,$ut)=>{f();var ur=Di();Pw();iy();cU();Dw();Mk();e_e();Yh();$o();xne();var Be=ur.asn1,Wf=$ut.exports=ur.pkcs7=ur.pkcs7||{};Wf.messageFromPem=function(t){var e=ur.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=Be.fromDer(e.body);return Wf.messageFromAsn1(n)};Wf.messageToPem=function(t,e){var r={type:"PKCS7",body:Be.toDer(t.toAsn1()).getBytes()};return ur.pem.encode(r,{maxline:e})};Wf.messageFromAsn1=function(t){var e={},r=[];if(!Be.validate(t,Wf.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var o=Be.derToOid(e.contentType),s;switch(o){case ur.pki.oids.envelopedData:s=Wf.createEnvelopedData();break;case ur.pki.oids.encryptedData:s=Wf.createEncryptedData();break;case ur.pki.oids.signedData:s=Wf.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+o+" is not (yet) supported.")}return s.fromAsn1(e.content.value[0]),s};Wf.createSignedData=function(){var t=null;return t={type:ur.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:a(function(n){if(R_e(t,n,Wf.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var o=t.rawCapture.certificates.value,s=0;s<o.length;++s)t.certificates.push(ur.pki.certificateFromAsn1(o[s]))},"fromAsn1"),toAsn1:a(function(){t.contentInfo||t.sign();for(var n=[],o=0;o<t.certificates.length;++o)n.push(ur.pki.certificateToAsn1(t.certificates[o]));var s=[],c=Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,Be.integerToDer(t.version).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&c.value[0].value.push(Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&c.value[0].value.push(Be.create(Be.Class.CONTEXT_SPECIFIC,1,!0,s)),c.value[0].value.push(Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,t.signerInfos)),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.type).getBytes()),c])},"toAsn1"),addSigner:a(function(n){var o=n.issuer,s=n.serialNumber;if(n.certificate){var c=n.certificate;typeof c=="string"&&(c=ur.pki.certificateFromPem(c)),o=c.issuer.attributes,s=c.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=ur.pki.privateKeyFromPem(l));var u=n.digestAlgorithm||ur.pki.oids.sha1;switch(u){case ur.pki.oids.sha1:case ur.pki.oids.sha256:case ur.pki.oids.sha384:case ur.pki.oids.sha512:case ur.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var d=n.authenticatedAttributes||[];if(d.length>0){for(var p=!1,m=!1,h=0;h<d.length;++h){var g=d[h];if(!p&&g.type===ur.pki.oids.contentType){if(p=!0,m)break;continue}if(!m&&g.type===ur.pki.oids.messageDigest){if(m=!0,p)break;continue}}if(!p||!m)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:o,serialNumber:s,digestAlgorithm:u,signatureAlgorithm:ur.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:d,unauthenticatedAttributes:[]})},"addSigner"),sign:a(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(ur.pki.oids.data).getBytes())]),"content"in t)){var o;t.content instanceof ur.util.ByteBuffer?o=t.content.bytes():typeof t.content=="string"&&(o=ur.util.encodeUtf8(t.content)),n.detached?t.detachedContent=Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,o):t.contentInfo.value.push(Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,o)]))}if(t.signers.length!==0){var s=e();r(s)}},"sign"),verify:a(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:a(function(n){typeof n=="string"&&(n=ur.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:a(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},o=0;o<t.signers.length;++o){var s=t.signers[o],c=s.digestAlgorithm;c in n||(n[c]=ur.md[ur.pki.oids[c]].create()),s.authenticatedAttributes.length===0?s.md=n[c]:s.md=ur.md[ur.pki.oids[c]].create()}t.digestAlgorithmIdentifiers=[];for(var c in n)t.digestAlgorithmIdentifiers.push(Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(c).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.NULL,!1,"")]));return n}a(e,"addDigestAlgorithmIds");function r(n){var o;if(t.detachedContent?o=t.detachedContent:(o=t.contentInfo.value[1],o=o.value[0]),!o)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=Be.derToOid(t.contentInfo.value[0].value),c=Be.toDer(o);c.getByte(),Be.getBerValueLength(c),c=c.getBytes();for(var l in n)n[l].start().update(c);for(var u=new Date,d=0;d<t.signers.length;++d){var p=t.signers[d];if(p.authenticatedAttributes.length===0){if(s!==ur.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var m=Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,[]),h=0;h<p.authenticatedAttributes.length;++h){var g=p.authenticatedAttributes[h];g.type===ur.pki.oids.messageDigest?g.value=n[p.digestAlgorithm].digest():g.type===ur.pki.oids.signingTime&&(g.value||(g.value=u)),m.value.push(S_e(g)),p.authenticatedAttributesAsn1.value.push(S_e(g))}c=Be.toDer(m).getBytes(),p.md.start().update(c)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=E0r(t.signers)}a(r,"addSignerInfos")};Wf.createEncryptedData=function(){var t=null;return t={type:ur.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:ur.pki.oids["aes256-CBC"]},fromAsn1:a(function(e){R_e(t,e,Wf.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:a(function(e){e!==void 0&&(t.encryptedContent.key=e),Wut(t)},"decrypt")},t};Wf.createEnvelopedData=function(){var t=null;return t={type:ur.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:ur.pki.oids["aes256-CBC"]},fromAsn1:a(function(e){var r=R_e(t,e,Wf.asn1.envelopedDataValidator);t.recipients=C0r(r.recipientInfos.value)},"fromAsn1"),toAsn1:a(function(){return Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.type).getBytes()),Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,Be.integerToDer(t.version).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,v0r(t.recipients)),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,b0r(t.encryptedContent))])])])},"toAsn1"),findRecipient:a(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var o=t.recipients[n],s=o.issuer;if(o.serialNumber===e.serialNumber&&s.length===r.length){for(var c=!0,l=0;l<r.length;++l)if(s[l].type!==r[l].type||s[l].value!==r[l].value){c=!1;break}if(c)return o}}return null},"findRecipient"),decrypt:a(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case ur.pki.oids.rsaEncryption:case ur.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=ur.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Wut(t)},"decrypt"),addRecipient:a(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:ur.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:a(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,o,s;switch(r){case ur.pki.oids["aes128-CBC"]:n=16,o=16,s=ur.aes.createEncryptionCipher;break;case ur.pki.oids["aes192-CBC"]:n=24,o=16,s=ur.aes.createEncryptionCipher;break;case ur.pki.oids["aes256-CBC"]:n=32,o=16,s=ur.aes.createEncryptionCipher;break;case ur.pki.oids["des-EDE3-CBC"]:n=24,o=8,s=ur.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=ur.util.createBuffer(ur.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=ur.util.createBuffer(ur.random.getBytes(o));var c=s(e);if(c.start(t.encryptedContent.parameter.copy()),c.update(t.content),!c.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=c.output}for(var l=0;l<t.recipients.length;++l){var u=t.recipients[l];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case ur.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}},"encrypt")},t};function A0r(t){var e={},r=[];if(!Be.validate(t,Wf.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:ur.pki.RDNAttributesAsArray(e.issuer),serialNumber:ur.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Be.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}a(A0r,"_recipientFromAsn1");function y0r(t){return Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,Be.integerToDer(t.version).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[ur.pki.distinguishedNameToAsn1({attributes:t.issuer}),Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,ur.util.hexToBytes(t.serialNumber))]),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.encryptedContent.algorithm).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.NULL,!1,"")]),Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.encryptedContent.content)])}a(y0r,"_recipientToAsn1");function C0r(t){for(var e=[],r=0;r<t.length;++r)e.push(A0r(t[r]));return e}a(C0r,"_recipientsFromAsn1");function v0r(t){for(var e=[],r=0;r<t.length;++r)e.push(y0r(t[r]));return e}a(v0r,"_recipientsToAsn1");function x0r(t){var e=Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,Be.integerToDer(t.version).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[ur.pki.distinguishedNameToAsn1({attributes:t.issuer}),Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,ur.util.hexToBytes(t.serialNumber))]),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.digestAlgorithm).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.signatureAlgorithm).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.NULL,!1,"")])),e.value.push(Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=Be.create(Be.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var o=t.unauthenticatedAttributes[n];r.values.push(S_e(o))}e.value.push(r)}return e}a(x0r,"_signerToAsn1");function E0r(t){for(var e=[],r=0;r<t.length;++r)e.push(x0r(t[r]));return e}a(E0r,"_signersToAsn1");function S_e(t){var e;if(t.type===ur.pki.oids.contentType)e=Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.value).getBytes());else if(t.type===ur.pki.oids.messageDigest)e=Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===ur.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),o=t.value;if(typeof o=="string"){var s=Date.parse(o);isNaN(s)?o.length===13?o=Be.utcTimeToDate(o):o=Be.generalizedTimeToDate(o):o=new Date(s)}o>=r&&o<n?e=Be.create(Be.Class.UNIVERSAL,Be.Type.UTCTIME,!1,Be.dateToUtcTime(o)):e=Be.create(Be.Class.UNIVERSAL,Be.Type.GENERALIZEDTIME,!1,Be.dateToGeneralizedTime(o))}return Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.type).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,[e])])}a(S_e,"_attributeToAsn1");function b0r(t){return[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(ur.pki.oids.data).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.algorithm).getBytes()),t.parameter?Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.content.getBytes())])]}a(b0r,"_encryptedContentToAsn1");function R_e(t,e,r){var n={},o=[];if(!Be.validate(e,r,n,o)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var c=Be.derToOid(n.contentType);if(c!==ur.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(ur.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==Be.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[u].value}else l=n.encryptedContent;t.encryptedContent={algorithm:Be.derToOid(n.encAlgorithm),parameter:ur.util.createBuffer(n.encParameter.value),content:ur.util.createBuffer(l)}}if(n.content){var l="";if(ur.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==Be.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[u].value}else l=n.content;t.content=ur.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}a(R_e,"_fromAsn1");function Wut(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case ur.pki.oids["aes128-CBC"]:case ur.pki.oids["aes192-CBC"]:case ur.pki.oids["aes256-CBC"]:e=ur.aes.createDecryptionCipher(t.encryptedContent.key);break;case ur.pki.oids.desCBC:case ur.pki.oids["des-EDE3-CBC"]:e=ur.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}a(Wut,"_decryptContent")});var Vut=W((pxi,Gut)=>{f();var Al=Di();Pw();o8();ane();l8();$o();var kne=Gut.exports=Al.ssh=Al.ssh||{};kne.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",o=e===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+o+`\r
`,s+="Comment: "+r+`\r
`;var c=Al.util.createBuffer();A8(c,n),Sv(c,t.e),Sv(c,t.n);var l=Al.util.encode64(c.bytes(),64),u=Math.floor(l.length/66)+1;s+="Public-Lines: "+u+`\r
`,s+=l;var d=Al.util.createBuffer();Sv(d,t.d),Sv(d,t.p),Sv(d,t.q),Sv(d,t.qInv);var p;if(!e)p=Al.util.encode64(d.bytes(),64);else{var m=d.length()+16-1;m-=m%16;var h=Rne(d.bytes());h.truncate(h.length()-m+d.length()),d.putBuffer(h);var g=Al.util.createBuffer();g.putBuffer(Rne("\0\0\0\0",e)),g.putBuffer(Rne("\0\0\0",e));var A=Al.aes.createEncryptionCipher(g.truncate(8),"CBC");A.start(Al.util.createBuffer().fillWithByte(0,16)),A.update(d.copy()),A.finish();var y=A.output;y.truncate(16),p=Al.util.encode64(y.bytes(),64)}u=Math.floor(p.length/66)+1,s+=`\r
Private-Lines: `+u+`\r
`,s+=p;var v=Rne("putty-private-key-file-mac-key",e),b=Al.util.createBuffer();A8(b,n),A8(b,o),A8(b,r),b.putInt32(c.length()),b.putBuffer(c),b.putInt32(d.length()),b.putBuffer(d);var I=Al.hmac.create();return I.start("sha1",v),I.update(b.bytes()),s+=`\r
Private-MAC: `+I.digest().toHex()+`\r
`,s};kne.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=Al.util.createBuffer();return A8(n,r),Sv(n,t.e),Sv(n,t.n),r+" "+Al.util.encode64(n.bytes())+" "+e};kne.privateKeyToOpenSSH=function(t,e){return e?Al.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):Al.pki.privateKeyToPem(t)};kne.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Al.md.md5.create(),n="ssh-rsa",o=Al.util.createBuffer();A8(o,n),Sv(o,t.e),Sv(o,t.n),r.start(),r.update(o.getBytes());var s=r.digest();if(e.encoding==="hex"){var c=s.toHex();return e.delimiter?c.match(/.{2}/g).join(e.delimiter):c}else{if(e.encoding==="binary")return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return s};function Sv(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=Al.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}a(Sv,"_addBigIntegerToBuffer");function A8(t,e){t.putInt32(e.length),t.putString(e)}a(A8,"_addStringToBuffer");function Rne(){for(var t=Al.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}a(Rne,"_sha1")});var Kut=W((gxi,zut)=>{f();zut.exports=Di();Pw();mut();iy();ene();cU();Dut();o8();Lut();Uut();Hut();t_e();dne();Mk();Kwe();i_e();jut();s_e();Jwe();qwe();yne();Yh();$we();Vut();f_e();$o()});var Xut=W(Wk=>{"use strict";f();Object.defineProperty(Wk,"__esModule",{value:!0});Wk.convert=Wk.Format=void 0;var CU=Kut(),Uw;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(Uw=Wk.Format||(Wk.Format={}));function Yut(t){var e=CU.pki.pemToDer(t),r=CU.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,o=n[0],s=o.tagClass===r.Class.CONTEXT_SPECIFIC&&o.type===0&&o.constructed,c=n.slice(s);return{serial:c[0],issuer:c[2],valid:c[3],subject:c[4]}}a(Yut,"myASN");function I0r(t){var e=Yut(t),r=e.subject.value.map(function(o){return o.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(o){return o.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}a(I0r,"txtFormat");function Jut(t,e){switch(e){case Uw.der:return CU.pki.pemToDer(t);case Uw.pem:return t;case Uw.txt:return I0r(t);case Uw.asn1:return Yut(t);case Uw.fingerprint:var r=CU.md.sha1.create(),n=Jut(t,Uw.der);return r.update(n.getBytes()),r.digest().toHex();case Uw.x509:return CU.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}a(Jut,"convert");Wk.convert=Jut});var idt=W(zp=>{"use strict";f();var qw=zp&&zp.__assign||function(){return qw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},qw.apply(this,arguments)},Pne=zp&&zp.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(zp,"__esModule",{value:!0});zp.convert=zp.Format=zp.addToGlobalAgent=zp.get=void 0;var k_e=require("https"),T0r=require("tls"),Zut=require("child_process"),edt=Dct(),cE=Xut();Object.defineProperty(zp,"Format",{enumerable:!0,get:a(function(){return cE.Format},"get")});Object.defineProperty(zp,"convert",{enumerable:!0,get:a(function(){return cE.convert},"get")});var tdt=process.platform==="darwin",rdt=k_e.globalAgent,Bne={keychain:"all",unique:!0,excludeBundled:!0,format:cE.Format.pem};function ndt(t){if(t===void 0&&(t=Bne),!tdt)return[];t=qw(qw({},Bne),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var o="/System/Library/Keychains/SystemRootCertificates.keychain",s=(0,Zut.spawnSync)("/usr/bin/security",r.concat(o)).stdout.toString().split(e).map(function(d){return d.trim()});n=Pne(Pne([],n,!0),s,!0)}if(t.keychain==="all"||t.keychain==="current"){var c=(0,Zut.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(d){return d.trim()});n=Pne(Pne([],n,!0),c,!0)}if(t.unique||t.excludeBundled){var l=n.map(function(d){return(0,cE.convert)(d,cE.Format.fingerprint)}),u=t.excludeBundled?T0r.rootCertificates.map(function(d){return(0,cE.convert)(d,cE.Format.fingerprint)}):[];n=n.filter(function(d,p){var m=l[p];return!(t.unique&&p!==l.indexOf(m)||t.excludeBundled&&u.includes(m))})}return n.map(function(d){return(0,cE.convert)(d,t.format)})}a(ndt,"get");zp.get=ndt;var Dne=rdt.options.ca,w0r=a(function(t){if(t===void 0&&(t=Bne),!!tdt){var e;Array.isArray(Dne)?e=Array.from(Dne):e=typeof Dne<"u"?[Dne]:[],ndt(qw(qw(qw({},Bne),t),{format:cE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),rdt.options.ca=e,k_e.Agent=function(r){var n=a(function(o){var s=typeof o<"u"?qw({},o):{};return typeof s.ca>"u"&&(s.ca=e),r.call(this,s)},"newAgent");return n.prototype=r.prototype,n}(k_e.Agent),(0,edt.setGlobalDispatcher)(new edt.Agent({connect:{ca:e}}))}},"addToGlobalAgent");zp.addToGlobalAgent=w0r});var odt=W((Ixi,P_e)=>{f();function _0r(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=process.arch==="arm64"?"crypt32-arm64.node":"crypt32.node",o=r(e(__dirname,n)),s=[],c=new o.Crypt32;try{let l;for(;l=c.next();){let u=new t(l);s.push(u.toString())}}finally{c.done()}return Array.from(new Set(s))}a(_0r,"all");process.platform!=="win32"?P_e.exports.all=()=>[]:P_e.exports.all=_0r});var pdt=W((Pxi,fdt)=>{"use strict";f();function ddt(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let o=typeof t;if(n.type&&o!==n.type){if(n.required===!1&&e.slice(r).some(s=>s.type===o))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}a(ddt,"validateParameter");function R0r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}a(R0r,"hasOwnProperty");function k0r(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let s=0,c=0;s<e.length;++s,++c){let l=e[s],u=r[c];R0r(l,"default")&&u==null&&(u=l.default),l.type==="object"&&l.default!=null&&(u=Object.assign({},l.default,u)),l.name==="options"&&(typeof u=="function"||u==null)&&(u={}),ddt(u,e,s)?n.push(u):c--}if(typeof arguments[arguments.length-1]!="function")return new Promise((s,c)=>{n.push((l,u)=>{if(l)return c(l);s(u)}),t.apply(this,n)});t.apply(this,n)}}a(k0r,"defineOperation");fdt.exports={defineOperation:k0r,validateParameter:ddt}});var U_e=W((Nxi,gdt)=>{"use strict";f();var v8=Lve()("kerberos"),C8=v8.KerberosClient,mdt=v8.KerberosServer,Hw=pdt().defineOperation,P0r=1,D0r=2,B0r=4,N0r=8,M0r=16,L0r=32,F0r=64,O0r=128,Q0r=256,hdt=0,U0r=9,q0r=6;C8.prototype.step=Hw(C8.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);C8.prototype.wrap=Hw(C8.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);C8.prototype.unwrap=Hw(C8.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);mdt.prototype.step=Hw(mdt.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var H0r=Hw(v8.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),W0r=Hw(v8.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),$0r=Hw(v8.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:hdt}},{name:"callback",type:"function",required:!1}]),j0r=Hw(v8.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);gdt.exports={initializeClient:$0r,initializeServer:j0r,principalDetails:W0r,checkPassword:H0r,GSS_C_DELEG_FLAG:P0r,GSS_C_MUTUAL_FLAG:D0r,GSS_C_REPLAY_FLAG:B0r,GSS_C_SEQUENCE_FLAG:N0r,GSS_C_CONF_FLAG:M0r,GSS_C_INTEG_FLAG:L0r,GSS_C_ANON_FLAG:F0r,GSS_C_PROT_READY_FLAG:O0r,GSS_C_TRANS_FLAG:Q0r,GSS_C_NO_OID:hdt,GSS_MECH_OID_KRB5:U0r,GSS_MECH_OID_SPNEGO:q0r}});var Adt=W((Lxi,G0r)=>{G0r.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var Cdt=W((Fxi,ydt)=>{"use strict";f();var V0r=require("dns"),z0r=U_e(),q_e=class{static{a(this,"MongoAuthProcess")}constructor(e,r,n,o){o=o||{},this.host=e,this.port=r,this.serviceName=n||o.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof o.gssapiCanonicalizeHostName=="boolean"?o.gssapiCanonicalizeHostName:!1,this._transition=K0r(this),this.retries=10}init(e,r,n){let o=this;this.username=e,this.password=r;function s(c,l,u){if(!c)return u();V0r.resolveCname(l,(d,p)=>{if(d)return u(d);Array.isArray(p)&&p.length>0&&(o.host=p[0]),u()})}a(s,"performGssapiCanonicalizeHostName"),s(this.canonicalizeHostName,this.host,c=>{if(c)return n(c);let l={};r!=null&&Object.assign(l,{user:e,password:r});let u=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;z0r.initializeClient(u,l,(d,p)=>{if(d)return n(d,null);o.client=p,n(null,p)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function K0r(t){return(e,r)=>{t.client.step("",(n,o)=>{if(n)return r(n);t._transition=Y0r(t),r(null,o)})}}a(K0r,"firstTransition");function Y0r(t){return(e,r)=>{t.client.step(e,(n,o)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=J0r(t),r(null,o||"")})}}a(Y0r,"secondTransition");function J0r(t){return(e,r)=>{t.client.unwrap(e,(n,o)=>{if(n)return r(n,!1);t.client.wrap(o,{user:t.username},(s,c)=>{if(s)return r(s,!1);t._transition=X0r(t),r(null,c)})})}}a(J0r,"thirdTransition");function X0r(t){return(e,r)=>{t._transition=null,r(null,!0)}}a(X0r,"fourthTransition");ydt.exports={MongoAuthProcess:q_e}});var xdt=W((Uxi,vU)=>{"use strict";f();var vdt=U_e();vU.exports=vdt;vU.exports.Kerberos=vdt;vU.exports.version=Adt().version;vU.exports.processes={MongoAuthProcess:Cdt().MongoAuthProcess}});var Nft=W(vSe=>{"use strict";f();Object.defineProperty(vSe,"__esModule",{value:!0});vSe.assertNever=Lhr;function Lhr(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}a(Lhr,"assertNever")});var $U=W(vE=>{"use strict";f();Object.defineProperty(vE,"__esModule",{value:!0});vE.ChatCompletionContentPartOpaque=vE.ChatCompletionContentPartKind=vE.ChatRole=void 0;var Fhr=Nft(),Lie;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(Lie||(vE.ChatRole=Lie={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,Fhr.assertNever)(r,`unknown chat role ${r}}`)}}a(e,"display"),t.display=e})(Lie||(vE.ChatRole=Lie={}));var Mft;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(Mft||(vE.ChatCompletionContentPartKind=Mft={}));var Lft;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}a(e,"usableIn"),t.usableIn=e})(Lft||(vE.ChatCompletionContentPartOpaque=Lft={}))});var xSe=W(Qv=>{"use strict";f();Object.defineProperty(Qv,"__esModule",{value:!0});Qv.BaseTokensPerName=Qv.BaseTokensPerMessage=Qv.BaseTokensPerCompletion=Qv.ChatRole=void 0;var Fft;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Fft||(Qv.ChatRole=Fft={}));Qv.BaseTokensPerCompletion=3;Qv.BaseTokensPerMessage=3;Qv.BaseTokensPerName=1});var Qft=W(Oie=>{"use strict";f();Object.defineProperty(Oie,"__esModule",{value:!0});Oie.toOpenAiChatMessage=Oft;Oie.toOpenAIChatMessages=Uhr;var xE=$U(),Fie=xSe(),Ohr=r_();function ESe(t){return t.filter(e=>e.type===xE.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}a(ESe,"onlyStringContent");function Qhr(t){let e=t.map(r=>{if(r.type===xE.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===xE.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===xE.ChatCompletionContentPartKind.Opaque&&xE.ChatCompletionContentPartOpaque.usableIn(r,Ohr.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}a(Qhr,"stringAndImageContent");function Oft(t){switch(t.role){case xE.ChatRole.System:return{role:Fie.ChatRole.System,content:ESe(t.content),name:t.name};case xE.ChatRole.User:return{role:Fie.ChatRole.User,content:Qhr(t.content),name:t.name};case xE.ChatRole.Assistant:return{role:Fie.ChatRole.Assistant,content:ESe(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case xE.ChatRole.Tool:return{role:Fie.ChatRole.Tool,content:ESe(t.content),tool_call_id:t.toolCallId};default:return}}a(Oft,"toOpenAiChatMessage");function Uhr(t){return t.map(Oft).filter(e=>!!e)}a(Uhr,"toOpenAIChatMessages")});var qft=W(qie=>{"use strict";f();Object.defineProperty(qie,"__esModule",{value:!0});qie.toVsCodeChatMessage=Uft;qie.toVsCodeChatMessages=qhr;var Uie=$U();function Qie(t){return t.filter(e=>e.type===Uie.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}a(Qie,"onlyStringContent");var n_;function Uft(t){switch(n_??=require("vscode"),t.role){case Uie.ChatRole.Assistant:let e=n_.LanguageModelChatMessage.Assistant(Qie(t.content),t.name);return t.toolCalls&&(e.content=[new n_.LanguageModelTextPart(Qie(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new n_.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case Uie.ChatRole.User:return n_.LanguageModelChatMessage.User(Qie(t.content),t.name);case Uie.ChatRole.Tool:{let r=n_.LanguageModelChatMessage.User("");return r.content=[new n_.LanguageModelToolResultPart(t.toolCallId,[new n_.LanguageModelTextPart(Qie(t.content))])],r}default:return}}a(Uft,"toVsCodeChatMessage");function qhr(t){return t.map(Uft).filter(e=>!!e)}a(qhr,"toVsCodeChatMessages")});var r_=W(fy=>{"use strict";f();Object.defineProperty(fy,"__esModule",{value:!0});fy.OutputMode=fy.Raw=fy.OpenAI=void 0;fy.toMode=bSe;fy.toVSCode=Hhr;fy.toOpenAI=Whr;var Hft=Qft(),Wft=qft();fy.OpenAI=xSe();fy.Raw=$U();var tP;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(tP||(fy.OutputMode=tP={}));function bSe(t,e){switch(t){case tP.Raw:return e;case tP.VSCode:return e instanceof Array?(0,Wft.toVsCodeChatMessages)(e):(0,Wft.toVsCodeChatMessage)(e);case tP.OpenAI:return e instanceof Array?(0,Hft.toOpenAIChatMessages)(e):(0,Hft.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}a(bSe,"toMode");function Hhr(t){return bSe(tP.VSCode,t)}a(Hhr,"toVSCode");function Whr(t){return bSe(tP.OpenAI,t)}a(Whr,"toOpenAI")});var ISe=W(jU=>{"use strict";f();Object.defineProperty(jU,"__esModule",{value:!0});jU.jsonRetainedProps=void 0;jU.forEachNode=$ft;jU.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function $ft(t,e){if(e(t),t.type===1)for(let r of t.children)$ft(r,e)}a($ft,"forEachNode")});var jft=W(TSe=>{"use strict";f();Object.defineProperty(TSe,"__esModule",{value:!0});TSe.once=$hr;function $hr(t){let e,r=!1,n=a((...o)=>(r||(e=t(...o),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}a($hr,"once")});var RSe=W(ef=>{"use strict";f();Object.defineProperty(ef,"__esModule",{value:!0});ef.BudgetExceededError=ef.MaterializedChatMessageImage=ef.MaterializedChatMessageBreakpoint=ef.MaterializedChatMessageOpaque=ef.MaterializedChatMessage=ef.MaterializedChatMessageTextChunk=ef.GenericMaterializedContainer=void 0;var M8=jft(),gm=r_(),EE=class t{static{a(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,o,s,c,l){if(this.parent=e,this.id=r,this.name=n,this.priority=o,this.metadata=c,this.flags=l,this.children=s(this),l&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[u,d]=this.children;d.isEmpty?this.children=[u]:this.children=[d]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let o=o_(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=o})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let o=await n.upperBoundTokenCount(e);r+=o})),r}replaceNode(e,r){return ept(e,this.children,r)}allMetadata(){return Zft(this)}findById(e){return SSe(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)jhr(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof my&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof my||n instanceof t){let o=await n.baseMessageTokenCount(e);r+=o}})),r}removeLowestPriorityChild(){let e=[];return _Se(this,e),e}};ef.GenericMaterializedContainer=EE;var GU=class{static{a(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,o=[],s){this.parent=e,this.text=r,this.priority=n,this.metadata=o,this.lineBreakBefore=s}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,M8.once)(async e=>await e.tokenLength({type:gm.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};ef.MaterializedChatMessageTextChunk=GU;var my=class{static{a(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,o,s,c,l,u,d){this.parent=e,this.id=r,this.role=n,this.name=o,this.toolCalls=s,this.toolCallId=c,this.priority=l,this.metadata=u,this.children=d(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=ept(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return _Se(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return SSe(e,this)}_tokenCount=(0,M8.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,gm.toMode)(e.mode,r))});_upperBound=(0,M8.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let o=await n.upperBoundTokenCount(e);r+=o})),r});baseMessageTokenCount=(0,M8.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===gm.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===gm.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,gm.toMode)(e.mode,r))});_text=(0,M8.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of Jft(this)){if(r instanceof rP||r instanceof i_){e.push(r);continue}if(r instanceof py){e.at(-1)instanceof py?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let o=e[e.length-1];typeof o=="string"&&o&&!o.endsWith(`
`)&&(e[e.length-1]=o+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:gm.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof rP)return{type:gm.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:tpt(r.src),detail:r.detail}};if(r instanceof i_)return r.value;if(r instanceof py)return r.part;throw new Error("Unexpected element type")});if(this.role===gm.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===gm.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===gm.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===gm.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};ef.MaterializedChatMessage=my;var i_=class{static{a(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&gm.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};ef.MaterializedChatMessageOpaque=i_;var py=class{static{a(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};ef.MaterializedChatMessageBreakpoint=py;var rP=class{static{a(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,o,s=[],c,l){this.parent=e,this.id=r,this.src=n,this.priority=o,this.metadata=s,this.lineBreakBefore=c,this.detail=l}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,M8.once)(async e=>e.tokenLength({type:gm.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:tpt(this.src),detail:this.detail}}));isEmpty=!1};ef.MaterializedChatMessageImage=rP;function o_(t){return t instanceof EE||t instanceof my}a(o_,"isContainerType");function Yft(t){return t instanceof GU||t instanceof rP||t instanceof i_||t instanceof py}a(Yft,"isContentType");function jhr(t){if(!o_(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}a(jhr,"assertContainerOrChatMessage");function*Jft(t,e=!1){for(let r of t.children)r instanceof GU?(yield{content:r,isTextSibling:e},e=!0):r instanceof rP||r instanceof i_||r instanceof py?yield{content:r,isTextSibling:!1}:r instanceof i_?yield{content:r,isTextSibling:!0}:(r&&(yield*Jft(r,e)),e=!1)}a(Jft,"contentChunks");function Ghr(t,e){let r;function n(o,s){if(Yft(o))(!r||o.priority<r.node.priority)&&(r={chain:s.slice(),node:o});else{s.push(o);for(let c of o.children)n(c,s);s.pop()}}if(a(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");VU(r.node,e)}a(Ghr,"removeLowestPriorityLegacy");var Gft=new WeakMap;function Xft(t){let e=Gft.get(t);if(e!==void 0)return e;let r=!1;return t instanceof py?r=!0:t instanceof my?r=t.children.some(n=>n instanceof py):t instanceof EE&&(r=t.children.some(Xft)),Gft.set(t,r),r}a(Xft,"hasCachePoint");function Vhr(t){if(t instanceof my)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof my)return!1;return!0}a(Vhr,"shouldLookForCachePointInNode");function _Se(t,e){let r;if(t instanceof EE&&t.has(1)){Ghr(t,e);return}let n=Vhr(t),o=t.children.map((s,c)=>({chain:[t],index:c}));for(let s=0;s<o.length;s++){let{chain:c,index:l}=o[s],u=c[c.length-1].children[l];if(!(n&&Xft(u)&&(r=void 0,u instanceof py))){if(u instanceof EE&&u.has(4)){let d=[...c,u];o.splice(s+1,0,...u.children.map((p,m)=>({chain:d,index:m})))}else if(!r||u.priority<r.value.priority)r={chain:c,index:l,value:u};else if(u.priority===r.value.priority){r.lowestNested??=Vft(r.value);let d=Vft(u);d<r.lowestNested&&(r={chain:c,index:l,value:u,lowestNested:d})}}}if(!r)throw new Hie(t);Yft(r.value)||r.value instanceof EE&&r.value.has(2)||o_(r.value)&&!r.value.children.length?VU(r.value,e):_Se(r.value,e)}a(_Se,"removeLowestPriorityChild");var Hie=class extends Error{static{a(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(o=>o instanceof my?o.role:o.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};ef.BudgetExceededError=Hie;function Vft(t){if(!o_(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}a(Vft,"getLowestPriorityAmongChildren");function*Zft(t){yield*t.metadata;for(let e of t.children)o_(e)?yield*Zft(e):yield*e.metadata}a(Zft,"allMetadata");function ept(t,e,r){for(let n=0;n<e.length;n++){let o=e[n];if(o_(o)){if(o.id===t){let c=e[n];return r.parent=o.parent,e[n]=r,c}let s=o.replaceNode(t,r);if(s)return s}}}a(ept,"replaceNode");function*zft(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,o_(r)&&e.push(...r.children)}}a(zft,"forEachNode");function zhr(t){let e=t;for(;e.parent;)e=e.parent;return e}a(zhr,"getRoot");function Kft(t){return t instanceof EE&&t.keepWithId!==void 0}a(Kft,"isKeepWith");var wSe=new Set;function Khr(t,e){let r=new Set;for(let n of zft(t))Kft(n)&&!wSe.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)wSe.add(n);try{let n=zhr(t);for(let o of zft(n))Kft(o)&&r.has(o.keepWithId)?VU(o,e):o instanceof my&&o.toolCalls&&(o.toolCalls=Yhr(o.toolCalls,s=>!(s.keepWith&&r.has(s.keepWith.id))),o.isEmpty&&VU(o,e))}finally{for(let n of r)wSe.delete(n)}}a(Khr,"removeOtherKeepWiths");function SSe(t,e){if(e.id===t)return e;for(let r of e.children)if(o_(r)){let n=SSe(t,r);if(n)return n}}a(SSe,"findNodeById");function VU(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),Khr(t,e),r.isEmpty?VU(r,e):r.onChunksChange())}a(VU,"removeNode");function tpt(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}a(tpt,"getEncodedBase64");function Yhr(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let o=r+1;o<t.length;o++)e(t[o])&&n.push(t[o]);return n}return t}a(Yhr,"filterIfDifferent")});var npt=W(()=>{"use strict";f();function Jhr(t,e,...r){return{ctor:t,props:e,children:r.flat()}}a(Jhr,"_vscpp");function rpt(){throw new Error("This should not be invoked!")}a(rpt,"_vscppf");rpt.isFragment=!0;globalThis.vscpp=Jhr;globalThis.vscppf=rpt});var PSe=W(Wie=>{"use strict";f();Object.defineProperty(Wie,"__esModule",{value:!0});Wie.PromptElement=void 0;npt();var kSe=class{static{a(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};Wie.PromptElement=kSe});var qSe=W(yo=>{"use strict";f();Object.defineProperty(yo,"__esModule",{value:!0});yo.LogicalWrapper=yo.IfEmpty=yo.AbstractKeepWith=yo.TokenLimit=yo.Expandable=yo.Chunk=yo.LegacyPrioritization=yo.ToolResult=yo.PrioritizedList=yo.Image=yo.TextChunk=yo.ToolMessage=yo.AssistantMessage=yo.UserMessage=yo.SystemMessage=yo.BaseChatMessage=void 0;yo.isChatMessagePromptElement=Xhr;yo.useKeepWith=rgr;var KU=xa(),cg=PSe();function Xhr(t){return t instanceof $ie||t instanceof jie||t instanceof Gie}a(Xhr,"isChatMessagePromptElement");var nP=class extends cg.PromptElement{static{a(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};yo.BaseChatMessage=nP;var $ie=class extends nP{static{a(this,"SystemMessage")}constructor(e){e.role=KU.Raw.ChatRole.System,super(e)}};yo.SystemMessage=$ie;var jie=class extends nP{static{a(this,"UserMessage")}constructor(e){e.role=KU.Raw.ChatRole.User,super(e)}};yo.UserMessage=jie;var Gie=class extends nP{static{a(this,"AssistantMessage")}constructor(e){e.role=KU.Raw.ChatRole.Assistant,super(e)}};yo.AssistantMessage=Gie;var Zhr=/\s+/g,DSe=class extends nP{static{a(this,"ToolMessage")}constructor(e){e.role=KU.Raw.ChatRole.Tool,super(e)}};yo.ToolMessage=DSe;var Vie=class extends cg.PromptElement{static{a(this,"TextChunk")}async prepare(e,r,n){let o=this.props.breakOnWhitespace?Zhr:this.props.breakOn;if(!o)return vscpp(vscppf,null,this.props.children);let s="",c=[];for(let u of this.props.children||[])if(u&&typeof u=="object"){if(typeof u.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");u.ctor==="br"?s+=`
`:c.push(u)}else u!=null&&(s+=u);let l=await egr(e,o,s,n);return vscpp(vscppf,null,c,l)}render(e){return e}};yo.TextChunk=Vie;async function egr(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let o="",s=-1;for(;s<r.length;){let c;typeof e=="string"?c=r.indexOf(e,s===-1?0:s+e.length):c=e.exec(r)?.index??-1,c===-1&&(c=r.length);let l=o+r.slice(Math.max(0,s),c);if(await t.countTokens({type:KU.Raw.ChatCompletionContentPartKind.Text,text:l},n)>t.tokenBudget)return o;o=l,s=c}return o}a(egr,"getTextContentBelowBudget");var BSe=class extends cg.PromptElement{static{a(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};yo.Image=BSe;var NSe=class extends cg.PromptElement{static{a(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((o,s)=>{if(!o)return;let c=n?r-s:r-e.length+s;return typeof o!="object"?vscpp(Vie,{priority:c},o):(o.props??={},o.props.priority=c,o)}))}};yo.PrioritizedList=NSe;var MSe=class extends cg.PromptElement{static{a(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};yo.ToolResult=MSe;var LSe=class extends cg.PromptElement{static{a(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};yo.LegacyPrioritization=LSe;var FSe=class extends cg.PromptElement{static{a(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};yo.Chunk=FSe;var OSe=class extends cg.PromptElement{static{a(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};yo.Expandable=OSe;var QSe=class extends cg.PromptElement{static{a(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};yo.TokenLimit=QSe;var zie=class extends cg.PromptElement{static{a(this,"AbstractKeepWith")}};yo.AbstractKeepWith=zie;var tgr=0;function rgr(){let t=tgr++;return class extends zie{static{a(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}a(rgr,"useKeepWith");var USe=class extends cg.PromptElement{static{a(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(zU,null,this.props.alt),vscpp(zU,{flexGrow:1},this.props.children))}};yo.IfEmpty=USe;var zU=class extends cg.PromptElement{static{a(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};yo.LogicalWrapper=zU});var opt=W(YU=>{"use strict";f();Object.defineProperty(YU,"__esModule",{value:!0});YU.localize=ngr;YU.localize2=igr;YU.getConfiguredDefaultLocale=ogr;function ipt(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,o){let s=o[0];return typeof e[s]<"u"?e[s]:n}),r}a(ipt,"_format");function ngr(t,e,...r){return ipt(e,r)}a(ngr,"localize");function igr(t,e,...r){let n=ipt(e,r);return{original:n,value:n}}a(igr,"localize2");function ogr(t){}a(ogr,"getConfiguredDefaultLocale")});var jSe=W(zt=>{"use strict";f();Object.defineProperty(zt,"__esModule",{value:!0});zt.isAndroid=zt.isEdge=zt.isSafari=zt.isFirefox=zt.isChrome=zt.OS=zt.setTimeout0=zt.setTimeout0IsFaster=zt.translationsConfigFile=zt.platformLocale=zt.locale=zt.Language=zt.language=zt.userAgent=zt.platform=zt.isCI=zt.isMobile=zt.isIOS=zt.webWorkerOrigin=zt.isWebWorker=zt.isWeb=zt.isElectron=zt.isNative=zt.isLinuxSnap=zt.isLinux=zt.isMacintosh=zt.isWindows=zt.LANGUAGE_DEFAULT=void 0;zt.PlatformToString=agr;zt.isLittleEndian=cgr;zt.isBigSurOrNewer=lgr;var spt=opt();zt.LANGUAGE_DEFAULT="en";var ZU=!1,eq=!1,XU=!1,upt=!1,dpt=!1,WSe=!1,fpt=!1,$Se=!1,ppt=!1,mpt=!1,JU,Kie=zt.LANGUAGE_DEFAULT,HSe=zt.LANGUAGE_DEFAULT,hpt,bE,IE=globalThis,Am;typeof IE.vscode<"u"&&typeof IE.vscode.process<"u"?Am=IE.vscode.process:typeof process<"u"&&(Am=process);var gpt=typeof Am?.versions?.electron=="string",sgr=gpt&&Am?.type==="renderer";if(typeof Am=="object"){ZU=Am.platform==="win32",eq=Am.platform==="darwin",XU=Am.platform==="linux",upt=XU&&!!Am.env.SNAP&&!!Am.env.SNAP_REVISION,fpt=gpt,ppt=!!Am.env.CI||!!Am.env.BUILD_ARTIFACTSTAGINGDIRECTORY,JU=zt.LANGUAGE_DEFAULT,Kie=zt.LANGUAGE_DEFAULT;let t=Am.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];JU=e.locale,HSe=e.osLocale,Kie=r||zt.LANGUAGE_DEFAULT,hpt=e._translationsConfigFile}catch{}dpt=!0}else typeof navigator=="object"&&!sgr?(bE=navigator.userAgent,ZU=bE.indexOf("Windows")>=0,eq=bE.indexOf("Macintosh")>=0,$Se=(bE.indexOf("Macintosh")>=0||bE.indexOf("iPad")>=0||bE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,XU=bE.indexOf("Linux")>=0,mpt=bE?.indexOf("Mobi")>=0,WSe=!0,JU=spt.getConfiguredDefaultLocale(spt.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||zt.LANGUAGE_DEFAULT,Kie=JU,HSe=navigator.language):console.error("Unable to resolve platform.");function agr(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}a(agr,"PlatformToString");var Yie=0;eq?Yie=1:ZU?Yie=3:XU&&(Yie=2);zt.isWindows=ZU;zt.isMacintosh=eq;zt.isLinux=XU;zt.isLinuxSnap=upt;zt.isNative=dpt;zt.isElectron=fpt;zt.isWeb=WSe;zt.isWebWorker=WSe&&typeof IE.importScripts=="function";zt.webWorkerOrigin=zt.isWebWorker?IE.origin:void 0;zt.isIOS=$Se;zt.isMobile=mpt;zt.isCI=ppt;zt.platform=Yie;zt.userAgent=bE;zt.language=Kie;var apt;(function(t){function e(){return zt.language}a(e,"value"),t.value=e;function r(){return zt.language.length===2?zt.language==="en":zt.language.length>=3?zt.language[0]==="e"&&zt.language[1]==="n"&&zt.language[2]==="-":!1}a(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return zt.language==="en"}a(n,"isDefault"),t.isDefault=n})(apt||(zt.Language=apt={}));zt.locale=JU;zt.platformLocale=HSe;zt.translationsConfigFile=hpt;zt.setTimeout0IsFaster=typeof IE.postMessage=="function"&&!IE.importScripts;zt.setTimeout0=(()=>{if(zt.setTimeout0IsFaster){let t=[];IE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,o=t.length;n<o;n++){let s=t[n];if(s.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),s.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),IE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();zt.OS=eq||$Se?2:ZU?1:3;var cpt=!0,lpt=!1;function cgr(){if(!lpt){lpt=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,cpt=new Uint16Array(t.buffer)[0]===513}return cpt}a(cgr,"isLittleEndian");zt.isChrome=!!(zt.userAgent&&zt.userAgent.indexOf("Chrome")>=0);zt.isFirefox=!!(zt.userAgent&&zt.userAgent.indexOf("Firefox")>=0);zt.isSafari=!!(!zt.isChrome&&zt.userAgent&&zt.userAgent.indexOf("Safari")>=0);zt.isEdge=!!(zt.userAgent&&zt.userAgent.indexOf("Edg/")>=0);zt.isAndroid=!!(zt.userAgent&&zt.userAgent.indexOf("Android")>=0);function lgr(t){return parseFloat(t)>=20}a(lgr,"isBigSurOrNewer")});var ypt=W(Uv=>{"use strict";f();Object.defineProperty(Uv,"__esModule",{value:!0});Uv.arch=Uv.platform=Uv.env=Uv.cwd=void 0;var Apt=jSe(),iP,GSe=globalThis.vscode;if(typeof GSe<"u"&&typeof GSe.process<"u"){let t=GSe.process;iP={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?iP={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:iP={get platform(){return Apt.isWindows?"win32":Apt.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};Uv.cwd=iP.cwd;Uv.env=iP.env;Uv.platform=iP.platform;Uv.arch=iP.arch});var vpt=W(br=>{"use strict";f();Object.defineProperty(br,"__esModule",{value:!0});br.delimiter=br.sep=br.toNamespacedPath=br.parse=br.format=br.extname=br.basename=br.dirname=br.relative=br.resolve=br.join=br.isAbsolute=br.normalize=br.posix=br.win32=void 0;var L8=ypt(),ugr=65,dgr=97,fgr=90,pgr=122,c_=46,Ru=47,Xp=92,s_=58,mgr=63,Jie=class extends Error{static{a(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let o;typeof r=="string"&&r.indexOf("not ")===0?(o="must not be",r=r.replace(/^not /,"")):o="must be";let s=e.indexOf(".")!==-1?"property":"argument",c=`The "${e}" ${s} ${o} of type ${r}`;c+=`. Received type ${typeof n}`,super(c),this.code="ERR_INVALID_ARG_TYPE"}};function hgr(t,e){if(t===null||typeof t!="object")throw new Jie(e,"Object",t)}a(hgr,"validateObject");function Ic(t,e){if(typeof t!="string")throw new Jie(e,"string",t)}a(Ic,"validateString");var Zp=L8.platform==="win32";function Si(t){return t===Ru||t===Xp}a(Si,"isPathSeparator");function VSe(t){return t===Ru}a(VSe,"isPosixPathSeparator");function a_(t){return t>=ugr&&t<=fgr||t>=dgr&&t<=pgr}a(a_,"isWindowsDeviceRoot");function Xie(t,e,r,n){let o="",s=0,c=-1,l=0,u=0;for(let d=0;d<=t.length;++d){if(d<t.length)u=t.charCodeAt(d);else{if(n(u))break;u=Ru}if(n(u)){if(!(c===d-1||l===1))if(l===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==c_||o.charCodeAt(o.length-2)!==c_){if(o.length>2){let p=o.lastIndexOf(r);p===-1?(o="",s=0):(o=o.slice(0,p),s=o.length-1-o.lastIndexOf(r)),c=d,l=0;continue}else if(o.length!==0){o="",s=0,c=d,l=0;continue}}e&&(o+=o.length>0?`${r}..`:"..",s=2)}else o.length>0?o+=`${r}${t.slice(c+1,d)}`:o=t.slice(c+1,d),s=d-c-1;c=d,l=0}else u===c_&&l!==-1?++l:l=-1}return o}a(Xie,"normalizeString");function Cpt(t,e){hgr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}a(Cpt,"_format");br.win32={resolve(...t){let e="",r="",n=!1;for(let o=t.length-1;o>=-1;o--){let s;if(o>=0){if(s=t[o],Ic(s,"path"),s.length===0)continue}else e.length===0?s=L8.cwd():(s=L8.env[`=${e}`]||L8.cwd(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===Xp)&&(s=`${e}\\`));let c=s.length,l=0,u="",d=!1,p=s.charCodeAt(0);if(c===1)Si(p)&&(l=1,d=!0);else if(Si(p))if(d=!0,Si(s.charCodeAt(1))){let m=2,h=m;for(;m<c&&!Si(s.charCodeAt(m));)m++;if(m<c&&m!==h){let g=s.slice(h,m);for(h=m;m<c&&Si(s.charCodeAt(m));)m++;if(m<c&&m!==h){for(h=m;m<c&&!Si(s.charCodeAt(m));)m++;(m===c||m!==h)&&(u=`\\\\${g}\\${s.slice(h,m)}`,l=m)}}}else l=1;else a_(p)&&s.charCodeAt(1)===s_&&(u=s.slice(0,2),l=2,c>2&&Si(s.charCodeAt(2))&&(d=!0,l=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(n){if(e.length>0)break}else if(r=`${s.slice(l)}\\${r}`,n=d,d&&e.length>0)break}return r=Xie(r,!n,"\\",Si),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Ic(t,"path");let e=t.length;if(e===0)return".";let r=0,n,o=!1,s=t.charCodeAt(0);if(e===1)return VSe(s)?"\\":t;if(Si(s))if(o=!0,Si(t.charCodeAt(1))){let l=2,u=l;for(;l<e&&!Si(t.charCodeAt(l));)l++;if(l<e&&l!==u){let d=t.slice(u,l);for(u=l;l<e&&Si(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&!Si(t.charCodeAt(l));)l++;if(l===e)return`\\\\${d}\\${t.slice(u)}\\`;l!==u&&(n=`\\\\${d}\\${t.slice(u,l)}`,r=l)}}}else r=1;else a_(s)&&t.charCodeAt(1)===s_&&(n=t.slice(0,2),r=2,e>2&&Si(t.charCodeAt(2))&&(o=!0,r=3));let c=r<e?Xie(t.slice(r),!o,"\\",Si):"";return c.length===0&&!o&&(c="."),c.length>0&&Si(t.charCodeAt(e-1))&&(c+="\\"),n===void 0?o?`\\${c}`:c:o?`${n}\\${c}`:`${n}${c}`},isAbsolute(t){Ic(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Si(r)||e>2&&a_(r)&&t.charCodeAt(1)===s_&&Si(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let s=0;s<t.length;++s){let c=t[s];Ic(c,"path"),c.length>0&&(e===void 0?e=r=c:e+=`\\${c}`)}if(e===void 0)return".";let n=!0,o=0;if(typeof r=="string"&&Si(r.charCodeAt(0))){++o;let s=r.length;s>1&&Si(r.charCodeAt(1))&&(++o,s>2&&(Si(r.charCodeAt(2))?++o:n=!1))}if(n){for(;o<e.length&&Si(e.charCodeAt(o));)o++;o>=2&&(e=`\\${e.slice(o)}`)}return br.win32.normalize(e)},relative(t,e){if(Ic(t,"from"),Ic(e,"to"),t===e)return"";let r=br.win32.resolve(t),n=br.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let o=0;for(;o<t.length&&t.charCodeAt(o)===Xp;)o++;let s=t.length;for(;s-1>o&&t.charCodeAt(s-1)===Xp;)s--;let c=s-o,l=0;for(;l<e.length&&e.charCodeAt(l)===Xp;)l++;let u=e.length;for(;u-1>l&&e.charCodeAt(u-1)===Xp;)u--;let d=u-l,p=c<d?c:d,m=-1,h=0;for(;h<p;h++){let A=t.charCodeAt(o+h);if(A!==e.charCodeAt(l+h))break;A===Xp&&(m=h)}if(h!==p){if(m===-1)return n}else{if(d>p){if(e.charCodeAt(l+h)===Xp)return n.slice(l+h+1);if(h===2)return n.slice(l+h)}c>p&&(t.charCodeAt(o+h)===Xp?m=h:h===2&&(m=3)),m===-1&&(m=0)}let g="";for(h=o+m+1;h<=s;++h)(h===s||t.charCodeAt(h)===Xp)&&(g+=g.length===0?"..":"\\..");return l+=m,g.length>0?`${g}${n.slice(l,u)}`:(n.charCodeAt(l)===Xp&&++l,n.slice(l,u))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=br.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Xp){if(e.charCodeAt(1)===Xp){let r=e.charCodeAt(2);if(r!==mgr&&r!==c_)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(a_(e.charCodeAt(0))&&e.charCodeAt(1)===s_&&e.charCodeAt(2)===Xp)return`\\\\?\\${e}`;return t},dirname(t){Ic(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,o=t.charCodeAt(0);if(e===1)return Si(o)?t:".";if(Si(o)){if(r=n=1,Si(t.charCodeAt(1))){let l=2,u=l;for(;l<e&&!Si(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&Si(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&!Si(t.charCodeAt(l));)l++;if(l===e)return t;l!==u&&(r=n=l+1)}}}}else a_(o)&&t.charCodeAt(1)===s_&&(r=e>2&&Si(t.charCodeAt(2))?3:2,n=r);let s=-1,c=!0;for(let l=e-1;l>=n;--l)if(Si(t.charCodeAt(l))){if(!c){s=l;break}}else c=!1;if(s===-1){if(r===-1)return".";s=r}return t.slice(0,s)},basename(t,e){e!==void 0&&Ic(e,"ext"),Ic(t,"path");let r=0,n=-1,o=!0,s;if(t.length>=2&&a_(t.charCodeAt(0))&&t.charCodeAt(1)===s_&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let c=e.length-1,l=-1;for(s=t.length-1;s>=r;--s){let u=t.charCodeAt(s);if(Si(u)){if(!o){r=s+1;break}}else l===-1&&(o=!1,l=s+1),c>=0&&(u===e.charCodeAt(c)?--c===-1&&(n=s):(c=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=r;--s)if(Si(t.charCodeAt(s))){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){Ic(t,"path");let e=0,r=-1,n=0,o=-1,s=!0,c=0;t.length>=2&&t.charCodeAt(1)===s_&&a_(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let u=t.charCodeAt(l);if(Si(u)){if(!s){n=l+1;break}continue}o===-1&&(s=!1,o=l+1),u===c_?r===-1?r=l:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||o===-1||c===0||c===1&&r===o-1&&r===n+1?"":t.slice(r,o)},format:Cpt.bind(null,"\\"),parse(t){Ic(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,o=t.charCodeAt(0);if(r===1)return Si(o)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Si(o)){if(n=1,Si(t.charCodeAt(1))){let m=2,h=m;for(;m<r&&!Si(t.charCodeAt(m));)m++;if(m<r&&m!==h){for(h=m;m<r&&Si(t.charCodeAt(m));)m++;if(m<r&&m!==h){for(h=m;m<r&&!Si(t.charCodeAt(m));)m++;m===r?n=m:m!==h&&(n=m+1)}}}}else if(a_(o)&&t.charCodeAt(1)===s_){if(r<=2)return e.root=e.dir=t,e;if(n=2,Si(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let s=-1,c=n,l=-1,u=!0,d=t.length-1,p=0;for(;d>=n;--d){if(o=t.charCodeAt(d),Si(o)){if(!u){c=d+1;break}continue}l===-1&&(u=!1,l=d+1),o===c_?s===-1?s=d:p!==1&&(p=1):s!==-1&&(p=-1)}return l!==-1&&(s===-1||p===0||p===1&&s===l-1&&s===c+1?e.base=e.name=t.slice(c,l):(e.name=t.slice(c,s),e.base=t.slice(c,l),e.ext=t.slice(s,l))),c>0&&c!==n?e.dir=t.slice(0,c-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var ggr=(()=>{if(Zp){let t=/\\/g;return()=>{let e=L8.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>L8.cwd()})();br.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let o=n>=0?t[n]:ggr();Ic(o,"path"),o.length!==0&&(e=`${o}/${e}`,r=o.charCodeAt(0)===Ru)}return e=Xie(e,!r,"/",VSe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Ic(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ru,r=t.charCodeAt(t.length-1)===Ru;return t=Xie(t,!e,"/",VSe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Ic(t,"path"),t.length>0&&t.charCodeAt(0)===Ru},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Ic(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":br.posix.normalize(e)},relative(t,e){if(Ic(t,"from"),Ic(e,"to"),t===e||(t=br.posix.resolve(t),e=br.posix.resolve(e),t===e))return"";let r=1,n=t.length,o=n-r,s=1,c=e.length-s,l=o<c?o:c,u=-1,d=0;for(;d<l;d++){let m=t.charCodeAt(r+d);if(m!==e.charCodeAt(s+d))break;m===Ru&&(u=d)}if(d===l)if(c>l){if(e.charCodeAt(s+d)===Ru)return e.slice(s+d+1);if(d===0)return e.slice(s+d)}else o>l&&(t.charCodeAt(r+d)===Ru?u=d:d===0&&(u=0));let p="";for(d=r+u+1;d<=n;++d)(d===n||t.charCodeAt(d)===Ru)&&(p+=p.length===0?"..":"/..");return`${p}${e.slice(s+u)}`},toNamespacedPath(t){return t},dirname(t){if(Ic(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ru,r=-1,n=!0;for(let o=t.length-1;o>=1;--o)if(t.charCodeAt(o)===Ru){if(!n){r=o;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Ic(e,"ext"),Ic(t,"path");let r=0,n=-1,o=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let c=e.length-1,l=-1;for(s=t.length-1;s>=0;--s){let u=t.charCodeAt(s);if(u===Ru){if(!o){r=s+1;break}}else l===-1&&(o=!1,l=s+1),c>=0&&(u===e.charCodeAt(c)?--c===-1&&(n=s):(c=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===Ru){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){Ic(t,"path");let e=-1,r=0,n=-1,o=!0,s=0;for(let c=t.length-1;c>=0;--c){let l=t.charCodeAt(c);if(l===Ru){if(!o){r=c+1;break}continue}n===-1&&(o=!1,n=c+1),l===c_?e===-1?e=c:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Cpt.bind(null,"/"),parse(t){Ic(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Ru,n;r?(e.root="/",n=1):n=0;let o=-1,s=0,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){let p=t.charCodeAt(u);if(p===Ru){if(!l){s=u+1;break}continue}c===-1&&(l=!1,c=u+1),p===c_?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}if(c!==-1){let p=s===0&&r?1:s;o===-1||d===0||d===1&&o===c-1&&o===s+1?e.base=e.name=t.slice(p,c):(e.name=t.slice(p,o),e.base=t.slice(p,c),e.ext=t.slice(o,c))}return s>0?e.dir=t.slice(0,s-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};br.posix.win32=br.win32.win32=br.win32;br.posix.posix=br.win32.posix=br.posix;br.normalize=Zp?br.win32.normalize:br.posix.normalize;br.isAbsolute=Zp?br.win32.isAbsolute:br.posix.isAbsolute;br.join=Zp?br.win32.join:br.posix.join;br.resolve=Zp?br.win32.resolve:br.posix.resolve;br.relative=Zp?br.win32.relative:br.posix.relative;br.dirname=Zp?br.win32.dirname:br.posix.dirname;br.basename=Zp?br.win32.basename:br.posix.basename;br.extname=Zp?br.win32.extname:br.posix.extname;br.format=Zp?br.win32.format:br.posix.format;br.parse=Zp?br.win32.parse:br.posix.parse;br.toNamespacedPath=Zp?br.win32.toNamespacedPath:br.posix.toNamespacedPath;br.sep=Zp?br.win32.sep:br.posix.sep;br.delimiter=Zp?br.win32.delimiter:br.posix.delimiter});var _pt=W(F8=>{"use strict";f();Object.defineProperty(F8,"__esModule",{value:!0});F8.URI=void 0;F8.isUriComponents=Igr;F8.uriToFsPath=roe;var xpt=vpt(),eoe=jSe(),Agr=/^\w[\w\d+.-]*$/,ygr=/^\//,Cgr=/^\/\//;function vgr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Agr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!ygr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Cgr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}a(vgr,"_validateUri");function xgr(t,e){return!t&&!e?"file":t}a(xgr,"_schemeFix");function Egr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==hy&&(e=hy+e):e=hy;break}return e}a(Egr,"_referenceResolution");var Ns="",hy="/",bgr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,toe=class t{static{a(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,o,s,c=!1){typeof e=="object"?(this.scheme=e.scheme||Ns,this.authority=e.authority||Ns,this.path=e.path||Ns,this.query=e.query||Ns,this.fragment=e.fragment||Ns):(this.scheme=xgr(e,c),this.authority=r||Ns,this.path=Egr(this.scheme,n||Ns),this.query=o||Ns,this.fragment=s||Ns,vgr(this,c))}get fsPath(){return roe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:o,query:s,fragment:c}=e;return r===void 0?r=this.scheme:r===null&&(r=Ns),n===void 0?n=this.authority:n===null&&(n=Ns),o===void 0?o=this.path:o===null&&(o=Ns),s===void 0?s=this.query:s===null&&(s=Ns),c===void 0?c=this.fragment:c===null&&(c=Ns),r===this.scheme&&n===this.authority&&o===this.path&&s===this.query&&c===this.fragment?this:new l_(r,n,o,s,c)}static parse(e,r=!1){let n=bgr.exec(e);return n?new l_(n[2]||Ns,Zie(n[4]||Ns),Zie(n[5]||Ns),Zie(n[7]||Ns),Zie(n[9]||Ns),r):new l_(Ns,Ns,Ns,Ns,Ns)}static file(e){let r=Ns;if(eoe.isWindows&&(e=e.replace(/\\/g,hy)),e[0]===hy&&e[1]===hy){let n=e.indexOf(hy,2);n===-1?(r=e.substring(2),e=hy):(r=e.substring(2,n),e=e.substring(n)||hy)}return new l_("file",r,e,Ns,Ns)}static from(e,r){return new l_(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return eoe.isWindows&&e.scheme==="file"?n=t.file(xpt.win32.join(roe(e,!0),...r)).path:n=xpt.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return zSe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new l_(e);return r._formatted=e.external??null,r._fsPath=e._sep===Ipt?e.fsPath??null:null,r}}else return e}};F8.URI=toe;function Igr(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}a(Igr,"isUriComponents");var Ipt=eoe.isWindows?1:void 0,l_=class extends toe{static{a(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=roe(this,!1)),this._fsPath}toString(e=!1){return e?zSe(this,!0):(this._formatted||(this._formatted=zSe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Ipt),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Tpt={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Ept(t,e,r){let n,o=-1;for(let s=0;s<t.length;s++){let c=t.charCodeAt(s);if(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c===45||c===46||c===95||c===126||e&&c===47||r&&c===91||r&&c===93||r&&c===58)o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n!==void 0&&(n+=t.charAt(s));else{n===void 0&&(n=t.substr(0,s));let l=Tpt[c];l!==void 0?(o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n+=l):o===-1&&(o=s)}}return o!==-1&&(n+=encodeURIComponent(t.substring(o))),n!==void 0?n:t}a(Ept,"encodeURIComponentFast");function Tgr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Tpt[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}a(Tgr,"encodeURIComponentMinimal");function roe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,eoe.isWindows&&(r=r.replace(/\//g,"\\")),r}a(roe,"uriToFsPath");function zSe(t,e){let r=e?Tgr:Ept,n="",{scheme:o,authority:s,path:c,query:l,fragment:u}=t;if(o&&(n+=o,n+=":"),(s||o==="file")&&(n+=hy,n+=hy),s){let d=s.indexOf("@");if(d!==-1){let p=s.substr(0,d);s=s.substr(d+1),d=p.lastIndexOf(":"),d===-1?n+=r(p,!1,!1):(n+=r(p.substr(0,d),!1,!1),n+=":",n+=r(p.substr(d+1),!1,!0)),n+="@"}s=s.toLowerCase(),d=s.lastIndexOf(":"),d===-1?n+=r(s,!1,!0):(n+=r(s.substr(0,d),!1,!0),n+=s.substr(d))}if(c){if(c.length>=3&&c.charCodeAt(0)===47&&c.charCodeAt(2)===58){let d=c.charCodeAt(1);d>=65&&d<=90&&(c=`/${String.fromCharCode(d+32)}:${c.substr(3)}`)}else if(c.length>=2&&c.charCodeAt(1)===58){let d=c.charCodeAt(0);d>=65&&d<=90&&(c=`${String.fromCharCode(d+32)}:${c.substr(2)}`)}n+=r(c,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),u&&(n+="#",n+=e?u:Ept(u,!1,!1)),n}a(zSe,"_asFormatted");function wpt(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+wpt(t.substr(3)):t}}a(wpt,"decodeURIComponentGraceful");var bpt=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Zie(t){return t.match(bpt)?t.replace(bpt,e=>wpt(e)):t}a(Zie,"percentDecode")});var JSe=W(u_=>{"use strict";f();Object.defineProperty(u_,"__esModule",{value:!0});u_.PromptReference=u_.ChatResponseReferencePartStatusKind=u_.PromptMetadata=void 0;var tq=_pt(),KSe=class{static{a(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};u_.PromptMetadata=KSe;var Spt;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(Spt||(u_.ChatResponseReferencePartStatusKind=Spt={}));var YSe=class t{static{a(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=a(n=>"scheme"in n?tq.URI.from(n):{uri:tq.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?tq.URI.from(e.iconPath):"light"in e.iconPath?{light:tq.URI.from(e.iconPath.light),dark:tq.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};u_.PromptReference=YSe});var s2e=W(Q8=>{"use strict";f();Object.defineProperty(Q8,"__esModule",{value:!0});Q8.PromptRenderer=Q8.MetadataMap=void 0;var wgr=ISe(),rq=RSe(),O8=r_(),Kc=qSe(),o2e=JSe(),Rpt;(function(t){t.empty={get:a(()=>{},"get"),getAll:a(()=>[],"getAll")}})(Rpt||(Q8.MetadataMap=Rpt={}));var ZSe=class{static{a(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new ioe(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,o){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=o}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,o){let s=new Map;for(let[u,d]of r.entries()){if(Array.isArray(d.children)&&(d.props=d.props??{},d.props.children=d.children),!d.ctor){let A=Bpt(d.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${A}`)}let p=this.createElement(d),m;p instanceof Kc.TokenLimit&&(m=d.props.max,this._tokenLimits.push({limit:m,id:d.node.id})),d.node.setObj(p);let h=d.props.flexGrow??1/0,g=s.get(h);g||(g=[],s.set(h,g)),g.push({element:d,promptElementInstance:p,tokenLimit:m})}if(s.size===0)return;let c=[...s.entries()].sort(([u],[d])=>d-u).map(([u,d])=>d),l=a(u=>{let d=0;for(let p=u+1;p<c.length;p++)for(let{element:m}of c[p]){if(!m.props.flexReserve)continue;let h=typeof m.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(m.props.flexReserve.slice(1))):m.props.flexReserve;d+=h}return e.consume(d),d},"setReserved");for(let[u,d]of c.entries()){let p=l(u),m=0;for(let{element:v}of d)m+=v.props.flexBasis??1;let h=0,g=d.map(v=>{if(v.tokenLimit===void 0)return!1;let b=v.element.props.flexBasis??1,I=b/m;return Math.floor(e.remainingTokenBudget*I)<v.tokenLimit?!1:(m-=b,h+=v.tokenLimit,!0)}),A=d.map((v,b)=>{let I=(v.element.props.flexBasis??1)/m;return{tokenBudget:g[b]?v.tokenLimit:Math.floor((e.remainingTokenBudget-h)*I),endpoint:e.endpoint,countTokens:a((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:O8.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-p),this.tracer?.addRenderEpoch?.({inNode:d[0].element.node.parent?.id,flexValue:d[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:p,elements:d.map((v,b)=>({id:v.element.node.id,tokenBudget:A[b].tokenBudget}))}),await Promise.all(d.map(async({element:v,promptElementInstance:b},I)=>{let _=await Ppt(v,()=>b.prepare?.(A[I],n,o));v.node.setState(_)}));let y=await Promise.all(d.map(async({element:v,promptElementInstance:b},I)=>{let _=A[I];return await Ppt(v,()=>b.render(v.node.getState(),_,n,o))}));for(let[v,{element:b,promptElementInstance:I}]of d.entries()){let _=A[v],k=y[v];if(!k)continue;let N=await this._processPromptRenderPiece(new oP(_.tokenBudget,this._endpoint),b,I,k,n,o);I instanceof Kc.Expandable&&this._growables.push({initialConsume:N,elem:b.node}),e.consume(N)}}}async _processPromptRenderPiece(e,r,n,o,s,c){let l=Dpt(o),u=new oP(e.tokenBudget,this._endpoint),{tokensConsumed:d}=await _gr(this._tokenizer,r,n,l);return u.consume(d),await this._handlePromptChildren(r,l,u,s,c),u.consumed}async renderElementJSON(e){return await this._processPromptPieces(new oP(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,O8.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new oP(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:o,removed:s}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:s,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:a(h=>this._getFinalElementTree(h,void 0).then(g=>({...g,budget:h})),"renderTree")});let c=[...n.toChatMessages()],l=await n.tokenCount(this._tokenizer),u=[...n.allMetadata()],d=new Set,p=u.map(h=>{if(!(h instanceof qv))return;let g=h.reference,A="variableName"in g.anchor;if(A&&!d.has(g.anchor.variableName))return d.add(g.anchor.variableName),g;if(!A)return g}).filter(ooe),m=o.map(h=>{if(!(h instanceof qv)||u.includes(h))return;let g=h.reference,A="variableName"in g.anchor;if(A&&!d.has(g.anchor.variableName))return d.add(g.anchor.variableName),g;if(!A)return g}).filter(ooe);return{metadata:{get:a(h=>u.find(g=>g instanceof h),"get"),getAll:a(h=>u.filter(g=>g instanceof h),"getAll")},messages:c,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:p,omittedReferences:m}}async _getFinalElementTree(e,r){let n=this._root.materialize(),o=[...n.allMetadata()],s=[{limit:e,id:this._root.id},...this._tokenLimits],c=0;for(let l=s.length-1;l>=0;l--){let u=s[l];if(u.limit>e)continue;let d=n.findById(u.id);if(!d)continue;let p=await d.tokenCount(this._tokenizer);if(p<u.limit&&!await this._grow(d,p,u.limit,r))continue;let m=await d.tokenCount(this._tokenizer);for(;m>u.limit;){let h=await d.baseMessageTokenCount(this._tokenizer);do for(let g of d.removeLowestPriorityChild()){c++;let A=g.upperBoundTokenCount(this._tokenizer);m-=typeof A=="number"?A:await A}while(m-h>u.limit);m=await d.tokenCount(this._tokenizer)}}return{container:n,allMetadata:o,removed:c}}async _grow(e,r,n,o){if(!this._growables.length)return!1;for(let s of this._growables){if(!e.findById(s.elem.id))continue;let c=s.elem.getObj();if(!(c instanceof Kc.Expandable))throw new Error("unreachable: expected growable");let l=new ioe(null,0,s.elem.id),u=new oP(n-r+s.initialConsume,this._endpoint),d=await this._processPromptRenderPiece(u,{node:l,ctor:this._ctor,props:{},children:[],path:[this._ctor]},c,await c.render(void 0,{tokenBudget:u.tokenBudget,endpoint:this._endpoint,countTokens:a((h,g)=>this._tokenizer.tokenLength(typeof h=="string"?{type:O8.Raw.ChatCompletionContentPartKind.Text,text:h}:h,g),"countTokens")}),void 0,o),p=l.materialize();if(!e.replaceNode(s.elem.id,p))throw new Error("unreachable: could not find old element to replace");if(r-=s.initialConsume,r+=d,r>=n)break}return!0}_handlePromptChildren(e,r,n,o,s){if(e.ctor===Kc.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let c=[];for(let l of r){if(l.kind==="literal"){e.node.appendStringChild(l.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(l.kind==="intrinsic"){this._handleIntrinsic(e.node,l.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...l.props},noe(l.children));continue}let u=e.node.createChild();c.push({node:u,ctor:l.ctor,props:l.props,children:l.children,path:[...e.path,l.ctor]})}return this._processPromptPieces(n,c,o,s)}_handleIntrinsic(e,r,n,o,s){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,o);case"br":return this._handleIntrinsicLineBreak(e,n,o,n.priority,s);case"usedContext":return this._handleIntrinsicUsedContext(e,n,o);case"references":return this._handleIntrinsicReferences(e,n,o);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,o);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,o,s)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,o){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,o)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,o,s){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(o??Number.MAX_SAFE_INTEGER,s)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let o of n.elements())this.tracer.includeInEpoch({id:o.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let o of r.value)e.addMetadata(new qv(o))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,o){let s=[],c=[];for(let l of o){if(l.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(l.kind==="literal"&&s.push(l.value),l.kind==="intrinsic")if(l.name==="br")s.push(`
`);else if(l.name==="references")for(let u of l.props.value)c.push(new qv(u));else this._handleIntrinsic(e,l.name,l.props,noe(l.children),r.childIndex)}e.appendStringChild(s.join(""),n?.priority??Number.MAX_SAFE_INTEGER,c,r.childIndex,!0)}};Q8.PromptRenderer=ZSe;async function _gr(t,e,r,n){let o=0;if((0,Kc.isChatMessagePromptElement)(r)){let s={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};o+=await t.countMessageTokens((0,O8.toMode)(t.mode,s))}for(let s of n)s.kind==="literal"&&(o+=await t.tokenLength({type:O8.Raw.ChatCompletionContentPartKind.Text,text:s.value}));return{tokensConsumed:o}}a(_gr,"computeTokensConsumedByLiterals");function Dpt(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new r2e(String(t))):Sgr(t)?noe(t.children,e):Rgr(t)?noe(t,e):typeof t.ctor=="string"?e.push(new e2e(t.ctor,t.props,t.children)):e.push(new t2e(t.ctor,t.props,t.children)),e)}a(Dpt,"flattenAndReduce");function noe(t,e=[]){for(let r of t)Dpt(r,e);return e}a(noe,"flattenAndReduceArr");var e2e=class{static{a(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},t2e=class{static{a(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},r2e=class{static{a(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},oP=class{static{a(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},ioe=class t{static{a(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let o=new t(null,e);switch(o._metadata=r.references?.map(s=>new qv(o2e.PromptReference.fromJSON(s)))??[],o._children=r.children.map((s,c)=>{switch(s.type){case 1:return t.fromJSON(c,s,n);case 2:return nq.fromJSON(o,c,s);default:}}).filter(ooe),r.ctor){case 1:o._objFlags=r.flags??0,o._obj=new Kc.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let s=n.get(r.keepWithId);s||(s=(0,Kc.useKeepWith)(),n.set(r.keepWithId,s)),o._obj=new s(r.props||{})}else o._obj=new Kc.LogicalWrapper(r.props||{});o._objFlags=r.flags??0;break}case 3:o._obj=new Kc.Image(r.props);break;default:}return o}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof Kc.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Kc.Chunk&&(this._objFlags|=2),this._obj instanceof Kc.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,o=this._children.length,s=!1){this._children.push(new nq(this,o,e,r,n,s))}appendLineBreak(e,r=this._children.length){this._children.push(new nq(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(ooe),props:{},references:this._metadata.filter(r=>r instanceof qv).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=XSe(this._obj.props,wgr.jsonRetainedProps)),this._obj instanceof Kc.BaseChatMessage)e.ctor=1,Object.assign(e.props,XSe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Kc.Image)return{...e,ctor:3,props:{...e.props,...XSe(this._obj.props,["src","detail"])}};this._obj instanceof Kc.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof Kc.Image)return new rq.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Kc.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new rq.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Kc.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Kc.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new rq.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(o=>o.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof Kc.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof Kc.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new n2e({type:O8.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},n2e=class{static{a(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new rq.MaterializedChatMessageBreakpoint(e,this.part)}},nq=class t{static{a(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(o=>new qv(o2e.PromptReference.fromJSON(o))),n.lineBreakBefore)}kind=2;constructor(e,r,n,o,s,c=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=o,this.metadata=s,this.lineBreakBefore=c}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new rq.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof qv).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function Sgr(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}a(Sgr,"isFragmentCtor");function ooe(t){return t!==void 0}a(ooe,"isDefined");var i2e=class extends o2e.PromptMetadata{static{a(this,"InternalMetadata")}},qv=class extends i2e{static{a(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function Rgr(t){return!!t&&typeof t[Symbol.iterator]=="function"}a(Rgr,"isIterable");function XSe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}a(XSe,"pickProps");function Bpt(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}a(Bpt,"atPath");var kpt=new WeakSet;async function Ppt(t,e){try{return await e()}catch(r){throw r instanceof Error&&!kpt.has(r)&&r.constructor.name!=="CancellationError"&&(kpt.add(r),r.message+=` (at tsx element ${Bpt(t.path)})`),r}}a(Ppt,"annotateError")});var Npt=W(soe=>{"use strict";f();Object.defineProperty(soe,"__esModule",{value:!0});soe.VSCodeTokenizer=void 0;var a2e=r_(),c2e=class{static{a(this,"VSCodeTokenizer")}countTokens;mode=a2e.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==a2e.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===a2e.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};soe.VSCodeTokenizer=c2e});var Mpt=W(U8=>{"use strict";f();Object.defineProperty(U8,"__esModule",{value:!0});U8.tracerCss=U8.tracerSrc=void 0;U8.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';U8.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var Upt=W(coe=>{"use strict";f();Object.defineProperty(coe,"__esModule",{value:!0});coe.HTMLTracer=void 0;var Lpt=Mpt(),sP=RSe(),kgr=r_(),l2e=class{static{a(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return u2e.create({epochs:this.epochs,traceData:Opt(this.traceData)})}serveRouter(e){return new aoe({baseAddress:e,epochs:this.epochs,traceData:Opt(this.traceData)})}};coe.HTMLTracer=l2e;var aoe=class{static{a(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,o=r,s=new URL(n.url||"/","http://localhost"),c=`/${this.serverToken}`;switch(s.pathname){case c:case`${c}/`:this.onRoot(s,n,o);break;case`${c}/regen`:this.onRegen(s,n,o);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${Lpt.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Fpt(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${Lpt.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:o}=this.opts,s=Number(e.searchParams.get("n")||o.budget),c=await o.renderTree(s),l=await Fpt(o.tokenizer,c),u=JSON.stringify(l);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(u)),n.end(u)}onRoot(e,r,n){this.getHTML().then(o=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(o)),n.end(o)})}},u2e=class t extends aoe{static{a(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((c,l)=>{try{s.route(c,l)||(l.statusCode=404,l.end("Not Found"))}catch(u){l.statusCode=500,l.end(String(u))}}),o=await new Promise((c,l)=>{n.listen(0,"127.0.0.1",()=>c(n.address().port)).on("error",l)}),s=new t({...e,baseAddress:`http://127.0.0.1:${o}`},n);return s}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Fpt(t,e){return{container:await Qpt(t,e.container,!1),removed:e.removed,budget:e.budget}}a(Fpt,"serializeRenderData");async function Qpt(t,e,r){let n={metadata:e.metadata.map(Dgr),priority:e.priority};if(e instanceof sP.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof sP.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof sP.MaterializedChatMessageOpaque||e instanceof sP.MaterializedChatMessageBreakpoint)return;{let o={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(s=>Qpt(t,s,r||e instanceof sP.MaterializedChatMessage)))).filter(s=>!!s),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof sP.GenericMaterializedContainer)return{...o,type:0};if(e instanceof sP.MaterializedChatMessage){let s=e.text.filter(c=>typeof c=="string").join("").trim();return{...o,type:1,role:kgr.Raw.ChatRole.display(e.role),text:s}}}Pgr(e)}a(Qpt,"serializeMaterialized");function Pgr(t){throw new Error("unreachable")}a(Pgr,"assertNever");function Dgr(t){return{name:t.constructor.name,value:JSON.stringify(t)}}a(Dgr,"serializeMetadata");var Opt=a(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var Hpt=W(qpt=>{"use strict";f();Object.defineProperty(qpt,"__esModule",{value:!0})});var $pt=W(Wpt=>{"use strict";f();Object.defineProperty(Wpt,"__esModule",{value:!0})});var Gpt=W(jpt=>{"use strict";f();Object.defineProperty(jpt,"__esModule",{value:!0})});var xa=W(Ea=>{"use strict";f();var Bgr=Ea&&Ea.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aP=Ea&&Ea.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Bgr(e,t,r)};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.contentType=Ea.PromptRenderer=Ea.MetadataMap=Ea.PromptElement=Ea.JSONTree=void 0;Ea.renderPrompt=Lgr;Ea.renderElementJSON=Fgr;var d2e=r_(),Vpt=s2e(),Ngr=Npt();aP(Upt(),Ea);Ea.JSONTree=ISe();aP(r_(),Ea);aP(qSe(),Ea);aP(JSe(),Ea);aP(Hpt(),Ea);aP($pt(),Ea);aP(Gpt(),Ea);var Mgr=PSe();Object.defineProperty(Ea,"PromptElement",{enumerable:!0,get:a(function(){return Mgr.PromptElement},"get")});var zpt=s2e();Object.defineProperty(Ea,"MetadataMap",{enumerable:!0,get:a(function(){return zpt.MetadataMap},"get")});Object.defineProperty(Ea,"PromptRenderer",{enumerable:!0,get:a(function(){return zpt.PromptRenderer},"get")});async function Lgr(t,e,r,n,o,s,c=d2e.OutputMode.VSCode){let l="countTokens"in n?new Ngr.VSCodeTokenizer((m,h)=>n.countTokens(m,h),c):n,u=new Vpt.PromptRenderer(r,t,e,l),d=await u.render(o,s),p=u.getUsedContext();return{...d,usedContext:p}}a(Lgr,"renderPrompt");Ea.contentType="application/vnd.codechat.prompt+json.1";function Fgr(t,e,r,n){return new Vpt.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:d2e.OutputMode.Raw,countMessageTokens(s){throw new Error("Tools may only return text, not messages.")},tokenLength(s,c){return s.type===d2e.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(s.text,c)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}a(Fgr,"renderElementJSON")});var xm=W(jq=>{"use strict";f();Object.defineProperty(jq,"__esModule",{value:!0});jq.dedent=void 0;function Cht(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var o=n.reduce(function(l,u){var d=u.match(/\n([\t ]+|(?!\s).)/g);return d?l.concat(d.map(function(p){var m,h;return(h=(m=p.match(/[\t ]/g))===null||m===void 0?void 0:m.length)!==null&&h!==void 0?h:0})):l},[]);if(o.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,o)+"}","g");n=n.map(function(l){return l.replace(s,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var c=n[0];return e.forEach(function(l,u){var d=c.match(/(?:^|\n)( *)$/),p=d?d[1]:"",m=l;typeof l=="string"&&l.includes(`
`)&&(m=String(l).split(`
`).map(function(h,g){return g===0?h:""+p+h}).join(`
`)),c+=m+n[u+1]}),c}a(Cht,"dedent");jq.dedent=Cht;jq.default=Cht});var wht=W(ZRe=>{"use strict";f();Object.defineProperty(ZRe,"__esModule",{value:!0});ZRe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var Dht=W(tke=>{"use strict";f();Object.defineProperty(tke,"__esModule",{value:!0});var _ht=require("worker_threads"),wCr=require("v8"),_Cr=require("os"),Sht=wht(),Zse="ready",Rht="spawning",SCr="busy",eae="off",kht=_Cr.cpus().length,Pht=process.version.replace("v","").split("."),RCr=parseInt(Pht[0]),kCr=parseInt(Pht[1]),eke=class{static{a(this,"WorkerPool")}constructor(){this.maxWorkers=kht,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new _ht.Worker(Sht.workerFile,{eval:!0});e.status=Rht,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=Zse,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=eae,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:u})=>u===eae).forEach(u=>this.resurrect(u)),this.taskQueue.length===0)return;let e;for(let u=0;u<this.workers.length;u++)if(this.workers[u].status===Zse){e=this.workers[u];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=SCr;let{worker:n}=e,{handler:o,config:s,resolve:c,reject:l}=r;try{let u="";for(let h in s.ctx){if(!s.ctx.hasOwnProperty(h))continue;let g;switch(typeof s.ctx[h]){case"string":g=`'${s.ctx[h]}'`;break;case"object":g=JSON.stringify(s.ctx[h]);break;default:g=s.ctx[h]}u+=`let ${h} = ${g}
`}let d=wCr.serialize(s.data),p=JSON.stringify(d),m=`
      async function __executor__() {
        const v8 = require('v8')
        ${u}
        const dataParsed = JSON.parse('${p}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${o.toString()})(dataDeserialized)
      }
      `;n.once("message",h=>{if(this.free(n),typeof h.error>"u"||h.error===null)return c(h.data);let g=new Error(h.error.message);g.stack=h.error.stack,l(g)}),n.once("error",h=>{e.status=eae,l(h),this.tick()}),n.postMessage(m)}catch(u){this.free(n),l(u)}}enqueue({handler:e,config:r,resolve:n,reject:o}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:o}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=Zse,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:kht,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let o=0,s=0;for(let c=0;c<this.maxWorkers;c++){let l=new _ht.Worker(Sht.workerFile,{eval:!0});this.workers.push({status:Rht,worker:l}),l.once("online",(u=>()=>{process.nextTick(()=>{this.workers[u].status=Zse,this.workers[u].worker.removeAllListeners(),o++,o>0&&o+s===this.maxWorkers&&r()})})(c)),l.once("error",(u=>d=>{this.workers[u].status=eae,this.workers[u].worker.removeAllListeners(),s++,s===this.maxWorkers&&n(d)})(c))}})}async teardown(){if(RCr>=12&&kCr>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let o=0;o<this.workers.length;o++)this.workers[o].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};tke.default=new eke});var tae=W(_P=>{"use strict";f();var PCr=_P&&_P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_P,"__esModule",{value:!0});var Kq=PCr(Dht()),DCr=`job needs a function.
Try with:
> job(() => {...}, config)`,BCr=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function NCr(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(DCr));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(BCr));Kq.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}a(NCr,"job");_P.job=NCr;_P.stop=Kq.default.teardown.bind(Kq.default);_P.start=Kq.default.setup.bind(Kq.default)});var Wht=W(SP=>{"use strict";f();var e1=SP&&SP.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},oke=SP&&SP.__classPrivateFieldSet||function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},QE,P_;Object.defineProperty(SP,"__esModule",{value:!0});var ske=class{static{a(this,"AwaitLock")}constructor(){QE.set(this,!1),P_.set(this,new Set)}get acquired(){return e1(this,QE,"f")}acquireAsync({timeout:e}={}){if(!e1(this,QE,"f"))return oke(this,QE,!0,"f"),Promise.resolve();if(e==null)return new Promise(o=>{e1(this,P_,"f").add(o)});let r,n;return Promise.race([new Promise(o=>{r=a(()=>{clearTimeout(n),o()},"resolver"),e1(this,P_,"f").add(r)}),new Promise((o,s)=>{n=setTimeout(()=>{e1(this,P_,"f").delete(r),s(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return e1(this,QE,"f")?!1:(oke(this,QE,!0,"f"),!0)}release(){if(!e1(this,QE,"f"))throw new Error("Cannot release an unacquired lock");if(e1(this,P_,"f").size>0){let[e]=e1(this,P_,"f");e1(this,P_,"f").delete(e),e()}else oke(this,QE,!1,"f")}};SP.default=ske;QE=new WeakMap,P_=new WeakMap});var zPe=W((w_o,DCt)=>{f();var xH=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,cwr=typeof AbortController=="function",ile=cwr?AbortController:class{static{a(this,"AbortController")}constructor(){this.signal=new RCt}abort(){this.signal.dispatchEvent("abort")}},lwr=typeof AbortSignal=="function",uwr=typeof ile.AbortSignal=="function",RCt=lwr?AbortSignal:uwr?ile.AbortController:class{static{a(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},GPe=new Set,WPe=a((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;ole(r)&&VPe(r,`${t} option`,`options.${e}`,XM)},"deprecatedOption"),$Pe=a((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(ole(r)){let{prototype:n}=XM,{get:o}=Object.getOwnPropertyDescriptor(n,t);VPe(r,`${t} method`,`cache.${e}()`,o)}},"deprecatedMethod"),dwr=a((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(ole(r)){let{prototype:n}=XM,{get:o}=Object.getOwnPropertyDescriptor(n,t);VPe(r,`${t} property`,`cache.${e}`,o)}},"deprecatedProperty"),kCt=a((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),ole=a(t=>!GPe.has(t),"shouldWarn"),VPe=a((t,e,r,n)=>{GPe.add(t);let o=`The ${e} is deprecated. Please use ${r} instead.`;kCt(o,"DeprecationWarning",t,n)},"warn"),HP=a(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),PCt=a(t=>HP(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?JM:null:null,"getUintArray"),JM=class extends Array{static{a(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},jPe=class{static{a(this,"Stack")}constructor(e){if(e===0)return[];let r=PCt(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},XM=class t{static{a(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:o=1,ttlAutopurge:s,updateAgeOnGet:c,updateAgeOnHas:l,allowStale:u,dispose:d,disposeAfter:p,noDisposeOnSet:m,noUpdateTTL:h,maxSize:g=0,sizeCalculation:A,fetchMethod:y,fetchContext:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:I}=e,{length:_,maxAge:k,stale:N}=e instanceof t?{}:e;if(r!==0&&!HP(r))throw new TypeError("max option must be a nonnegative integer");let F=r?PCt(r):Array;if(!F)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=g,this.sizeCalculation=A||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=v,!this.fetchMethod&&v!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new F(r),this.prev=new F(r),this.head=0,this.tail=0,this.free=new jPe(r),this.initialFill=1,this.size=0,typeof d=="function"&&(this.dispose=d),typeof p=="function"?(this.disposeAfter=p,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!m,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!b,this.maxSize!==0){if(!HP(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!u||!!N,this.noDeleteOnStaleGet=!!I,this.updateAgeOnGet=!!c,this.updateAgeOnHas=!!l,this.ttlResolution=HP(o)||o===0?o:1,this.ttlAutopurge=!!s,this.ttl=n||k||0,this.ttl){if(!HP(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let O="LRU_CACHE_UNBOUNDED";ole(O)&&(GPe.add(O),kCt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,t))}N&&WPe("stale","allowStale"),k&&WPe("maxAge","ttl"),_&&WPe("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new JM(this.max),this.starts=new JM(this.max),this.setItemTTL=(n,o,s=xH.now())=>{if(this.starts[n]=o!==0?s:0,this.ttls[n]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},o+1);c.unref&&c.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?xH.now():0};let e=0,r=a(()=>{let n=xH.now();if(this.ttlResolution>0){e=n;let o=setTimeout(()=>e=0,this.ttlResolution);o.unref&&o.unref()}return n},"getNow");this.getRemainingTTL=n=>{let o=this.keyMap.get(n);return o===void 0?0:this.ttls[o]===0||this.starts[o]===0?1/0:this.starts[o]+this.ttls[o]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new JM(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,o)=>{if(!HP(n))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(n=o(r,e),!HP(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,o){if(n||o)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return $Pe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],o=this.valList[r],c={value:this.isBackgroundFetch(o)?o.__staleWhileFetching:o};if(this.ttls){c.ttl=this.ttls[r];let l=xH.now()-this.starts[r];c.start=Math.floor(Date.now()-l)}this.sizes&&(c.size=this.sizes[r]),e.unshift([n,c])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let o=Date.now()-n.start;n.start=xH.now()-o}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL}={}){if(c=this.requireSize(e,r,c,l),this.maxSize&&c>this.maxSize)return this;let d=this.size===0?void 0:this.keyMap.get(e);if(d===void 0)d=this.newIndex(),this.keyList[d]=e,this.valList[d]=r,this.keyMap.set(e,d),this.next[this.tail]=d,this.prev[d]=this.tail,this.tail=d,this.size++,this.addItemSize(d,c),u=!1;else{let p=this.valList[d];r!==p&&(this.isBackgroundFetch(p)?p.__abortController.abort():s||(this.dispose(p,e,"set"),this.disposeAfter&&this.disposed.push([p,e,"set"])),this.removeItemSize(d),this.valList[d]=r,this.addItemSize(d,c)),this.moveToTail(d)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),u||this.setItemTTL(d,n,o),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],o=this.valList[r];return this.isBackgroundFetch(o)?o.__abortController.abort():(this.dispose(o,n,"evict"),this.disposeAfter&&this.disposed.push([o,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let o=this.valList[n];return this.isBackgroundFetch(o)?o.__staleWhileFetching:o}}backgroundFetch(e,r,n,o){let s=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(s))return s;let c=new ile,l={signal:c.signal,options:n,context:o},u=a(h=>(c.signal.aborted||this.set(e,h,l.options),h),"cb"),d=a(h=>{if(this.valList[r]===m&&(!n.noDeleteOnFetchRejection||m.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=m.__staleWhileFetching),m.__returned===m)throw h},"eb"),p=a(h=>h(this.fetchMethod(e,s,l)),"pcall"),m=new Promise(p).then(u,d);return m.__abortController=c,m.__staleWhileFetching=s,m.__returned=null,r===void 0?(this.set(e,m,l.options),r=this.keyMap.get(e)):this.valList[r]=m,m}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:l=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,fetchContext:m=this.fetchContext,forceRefresh:h=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o});let g={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:c,size:l,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:p},A=this.keyMap.get(e);if(A===void 0){let y=this.backgroundFetch(e,A,g,m);return y.__returned=y}else{let y=this.valList[A];if(this.isBackgroundFetch(y))return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!h&&!this.isStale(A))return this.moveToTail(A),n&&this.updateItemAge(A),y;let v=this.backgroundFetch(e,A,g,m);return r&&v.__staleWhileFetching!==void 0?v.__staleWhileFetching:v.__returned=v}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet}={}){let s=this.keyMap.get(e);if(s!==void 0){let c=this.valList[s],l=this.isBackgroundFetch(c);return this.isStale(s)?l?r?c.__staleWhileFetching:void 0:(o||this.delete(e),r?c:void 0):l?void 0:(this.moveToTail(s),n&&this.updateItemAge(s),c)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return $Pe("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let o=this.valList[n];this.isBackgroundFetch(o)?o.__abortController.abort():(this.dispose(o,e,"delete"),this.disposeAfter&&this.disposed.push([o,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return $Pe("reset","clear"),this.clear}get length(){return dwr("length","size"),this.size}static get AbortController(){return ile}static get AbortSignal(){return RCt}};DCt.exports=XM});var JPe=W((R_o,BCt)=>{"use strict";f();var EH=class extends Error{static{a(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},KPe=class extends EH{static{a(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},YPe=class extends EH{static{a(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};BCt.exports={FetchBaseError:EH,FetchError:KPe,AbortError:YPe}});var GE=W((D_o,MCt)=>{"use strict";f();var{constants:{MAX_LENGTH:fwr}}=require("buffer"),{pipeline:sle,PassThrough:pwr}=require("stream"),{promisify:mwr}=require("util"),{createGunzip:hwr,createInflate:gwr,createBrotliDecompress:Awr,constants:{Z_SYNC_FLUSH:NCt}}=require("zlib"),ywr=OC()("helix-fetch:utils"),Cwr=mwr(sle),vwr=a((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),xwr=a((t,e,r,n)=>{if(!vwr(t,e))return r;let o=a(s=>{s&&(ywr(`encountered error while decoding stream: ${s}`),n(s))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return sle(r,hwr({flush:NCt,finishFlush:NCt}),o);case"deflate":case"x-deflate":return sle(r,gwr(),o);case"br":return sle(r,Awr(),o);default:return r}},"decodeStream"),Ewr=a(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),ale=a((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?bwr(t,e):Iwr(t,e);default:return 0}},"calcSize"),bwr=a((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:ale(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),Iwr=a((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let o in t)n.push(o);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(o=>{if(r+=ale(o,e),typeof t[o]=="object"&&t[o]!==null){if(e.has(t[o]))return;e.add(t[o])}r+=ale(t[o],e)}),r},"calcObjectSize"),Twr=a(t=>ale(t,new WeakSet),"sizeof"),wwr=a(async t=>{let e=new pwr,r=0,n=[];return e.on("data",o=>{if(r+o.length>fwr)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(o),r+=o.length}),await Cwr(t,e),Buffer.concat(n,r)},"streamToBuffer");MCt.exports={decodeStream:xwr,isPlainObject:Ewr,sizeof:Twr,streamToBuffer:wwr}});var lle=W((M_o,QCt)=>{"use strict";f();var{PassThrough:LCt,Readable:VE}=require("stream"),{types:{isAnyArrayBuffer:OCt}}=require("util"),{FetchError:_wr,FetchBaseError:Swr}=JPe(),{streamToBuffer:Rwr}=GE(),kwr=Buffer.alloc(0),yg=Symbol("Body internals"),Pwr=a(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),FCt=a(async t=>{if(t[yg].disturbed)throw new TypeError("Already read");if(t[yg].error)throw new TypeError(`Stream had error: ${t[yg].error.message}`);t[yg].disturbed=!0;let{stream:e}=t[yg];return e===null?kwr:Rwr(e)},"consume"),cle=class{static{a(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=VE.from(e.toString()):e instanceof VE?r=e:Buffer.isBuffer(e)?r=VE.from(e):OCt(e)?r=VE.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=VE.from(e):r=VE.from(String(e)),this[yg]={stream:r,disturbed:!1,error:null},e instanceof VE&&r.on("error",n=>{let o=n instanceof Swr?n:new _wr(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[yg].error=o})}get body(){return this[yg].stream}get bodyUsed(){return this[yg].disturbed}async buffer(){return FCt(this)}async arrayBuffer(){return Pwr(await this.buffer())}async text(){return(await FCt(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(cle.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var Dwr=a(t=>{if(t[yg].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[yg],r=e;if(e instanceof VE){r=new LCt;let n=new LCt;e.pipe(r),e.pipe(n),t[yg].stream=n}return r},"cloneStream"),Bwr=a(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||OCt(t)||t instanceof VE?null:"text/plain; charset=utf-8","guessContentType");QCt.exports={Body:cle,cloneStream:Dwr,guessContentType:Bwr}});var ZM=W((O_o,WCt)=>{"use strict";f();var{validateHeaderName:UCt,validateHeaderValue:qCt}=require("http"),{isPlainObject:Nwr}=GE(),zE=Symbol("Headers internals"),bH=a(t=>{let e=typeof t!="string"?String(t):t;if(typeof UCt=="function")UCt(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),HCt=a((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof qCt=="function")qCt(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),ule=class t{static{a(this,"Headers")}constructor(e={}){if(this[zE]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(Nwr(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[zE].map.set(bH(e),HCt(r,e))}has(e){return this[zE].map.has(bH(e))}get(e){let r=this[zE].map.get(bH(e));return r===void 0?null:r}append(e,r){let n=bH(e),o=HCt(r,e),s=this[zE].map.get(n);this[zE].map.set(n,s?`${s}, ${o}`:o)}delete(e){this[zE].map.delete(bH(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[zE].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[zE].map)}};Object.defineProperties(ule.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));WCt.exports={Headers:ule}});var XPe=W((q_o,$Ct)=>{"use strict";f();var{EventEmitter:Mwr}=require("events"),Py=Symbol("AbortSignal internals"),eL=class{static{a(this,"AbortSignal")}constructor(){this[Py]={eventEmitter:new Mwr,onabort:null,aborted:!1}}get aborted(){return this[Py].aborted}get onabort(){return this[Py].onabort}set onabort(e){this[Py].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[Py].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[Py].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[Py][n]=="function"&&this[n](r),this[Py].eventEmitter.emit(e,r)}fire(){this[Py].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(eL.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var fle=class extends eL{static{a(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[Py].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[Py].timerId)}};Object.defineProperties(fle.prototype,{clear:{enumerable:!0}});var dle=Symbol("AbortController internals"),ple=class{static{a(this,"AbortController")}constructor(){this[dle]={signal:new eL}}get signal(){return this[dle].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[dle].signal.aborted||this[dle].signal.fire()}};Object.defineProperties(ple.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});$Ct.exports={AbortController:ple,AbortSignal:eL,TimeoutSignal:fle}});var IH=W(($_o,VCt)=>{"use strict";f();var{randomBytes:Lwr}=require("crypto"),{Readable:Fwr}=require("stream"),e5e=a(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),Owr=a(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),jCt=a(t=>`--${t}--\r
\r
`,"getFooter"),GCt=a((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,e5e(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*Qwr(t,e){for(let[r,n]of t)yield GCt(e,r,n),e5e(n)?yield*n.stream():yield n,yield`\r
`;yield jCt(e)}a(Qwr,"formDataIterator");var Uwr=a((t,e)=>{let r=0;for(let[n,o]of t)r+=Buffer.byteLength(GCt(e,n,o)),r+=e5e(o)?o.size:Buffer.byteLength(String(o)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(jCt(e)),r},"getFormDataLength"),ZPe=class{static{a(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=Lwr(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=Uwr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return Fwr.from(Qwr(this.fd,this.boundary))}};VCt.exports={isFormData:Owr,FormDataSerializer:ZPe}});var KCt=W((z_o,zCt)=>{"use strict";f();var{AbortSignal:V_o}=XPe(),{Body:qwr,cloneStream:Hwr,guessContentType:Wwr}=lle(),{Headers:$wr}=ZM(),{isPlainObject:jwr}=GE(),{isFormData:Gwr,FormDataSerializer:Vwr}=IH(),zwr=20,$_=Symbol("Request internals"),mle=class t extends qwr{static{a(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,o=n?new URL(n.url):new URL(e),s=r.method||n&&n.method||"GET";if(s=s.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(s))throw new TypeError("Request with GET/HEAD method cannot have body");let c=r.body||(n&&n.body?Hwr(n):null),l=new $wr(r.headers||n&&n.headers||{});if(Gwr(c)&&!l.has("content-type")){let m=new Vwr(c);c=m.stream(),l.set("content-type",m.contentType()),!l.has("transfer-encoding")&&!l.has("content-length")&&l.set("content-length",m.length())}if(!l.has("content-type"))if(jwr(c))c=JSON.stringify(c),l.set("content-type","application/json");else{let m=Wwr(c);m&&l.set("content-type",m)}super(c);let u=n?n.signal:null;"signal"in r&&(u=r.signal);let d=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(d))throw new TypeError(`'${d}' is not a valid redirect option`);let p=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(p))throw new TypeError(`'${p}' is not a valid cache option`);this[$_]={init:{...r},method:s,redirect:d,cache:p,headers:l,parsedURL:o,signal:u},r.follow===void 0?!n||n.follow===void 0?this.follow=zwr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[$_].method}get url(){return this[$_].parsedURL.toString()}get headers(){return this[$_].headers}get redirect(){return this[$_].redirect}get cache(){return this[$_].cache}get signal(){return this[$_].signal}clone(){return new t(this)}get init(){return this[$_].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(mle.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});zCt.exports={Request:mle}});var t5e=W((J_o,YCt)=>{"use strict";f();var{Body:Kwr,cloneStream:Ywr,guessContentType:Jwr}=lle(),{Headers:Xwr}=ZM(),{isPlainObject:Zwr}=GE(),{isFormData:e_r,FormDataSerializer:t_r}=IH(),Dy=Symbol("Response internals"),hle=class t extends Kwr{static{a(this,"Response")}constructor(e=null,r={}){let n=new Xwr(r.headers),o=e;if(e_r(o)&&!n.has("content-type")){let s=new t_r(o);o=s.stream(),n.set("content-type",s.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",s.length())}if(o!==null&&!n.has("content-type"))if(Zwr(o))o=JSON.stringify(o),n.set("content-type","application/json");else{let s=Jwr(o);s&&n.set("content-type",s)}super(o),this[Dy]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[Dy].url||""}get status(){return this[Dy].status}get statusText(){return this[Dy].statusText}get ok(){return this[Dy].status>=200&&this[Dy].status<300}get redirected(){return this[Dy].counter>0}get headers(){return this[Dy].headers}get httpVersion(){return this[Dy].httpVersion}get decoded(){return this[Dy].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(Ywr(this),{...this[Dy]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(hle.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});YCt.exports={Response:hle}});var XCt=W((tSo,JCt)=>{"use strict";f();var r_r=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),n_r=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),i_r=new Set([500,502,503,504]),o_r={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},s_r={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function WP(t){let e=parseInt(t,10);return isFinite(e)?e:0}a(WP,"toNumberOrZero");function a_r(t){return t?i_r.has(t.status):!0}a(a_r,"isErrorResponse");function r5e(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[o,s]=n.split(/=/,2);e[o.trim()]=s===void 0?!0:s.trim().replace(/^"|"$/g,"")}return e}a(r5e,"parseCacheControl");function c_r(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}a(c_r,"formatCacheControl");JCt.exports=class{static{a(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:o,immutableMinTimeToLive:s,ignoreCargoCult:c,_fromObject:l}={}){if(l){this._fromObject(l);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=o!==void 0?o:.1,this._immutableMinTtl=s!==void 0?s:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=r5e(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=r5e(e.headers["cache-control"]),c&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":c_r(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&n_r.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||r_r.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=r5e(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)o_r[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let o of n)delete r[o]}if(r.warning){let n=r.warning.split(/,/).filter(o=>!/^\s*1[0-9][0-9]/.test(o));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return WP(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return WP(this._rescc["s-maxage"])}if(this._rescc["max-age"])return WP(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+WP(this._rescc["stale-if-error"]),n=e+WP(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+WP(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+WP(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let o=r["if-none-match"].split(/,/).filter(s=>!/^\s*W\//.test(s));o.length?r["if-none-match"]=o.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&a_r(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let o={};for(let c in this._resHeaders)o[c]=c in r.headers&&!s_r[c]?r.headers[c]:this._resHeaders[c];let s=Object.assign({},r,{status:this._status,method:this._method,headers:o});return{policy:new this.constructor(e,s,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var rvt=W((iSo,tvt)=>{"use strict";f();var l_r=XCt(),{Headers:u_r}=ZM(),ZCt=a(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),evt=a(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),n5e=class{static{a(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new l_r(ZCt(e),evt(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(ZCt(e))}responseHeaders(e){return new u_r(this.policy.responseHeaders(evt(e)))}timeToLive(){return this.policy.timeToLive()}};tvt.exports=n5e});var ovt=W((aSo,ivt)=>{"use strict";f();var{Readable:d_r}=require("stream"),{Headers:nvt}=ZM(),{Response:f_r}=t5e(),j_=Symbol("CacheableResponse internals"),p_r=a(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),i5e=class t extends f_r{static{a(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new nvt(r.headers);this[j_]={headers:n,bufferedBody:e}}get headers(){return this[j_].headers}set headers(e){if(e instanceof nvt)this[j_].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return d_r.from(this[j_].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[j_].bufferedBody}async arrayBuffer(){return p_r(this[j_].bufferedBody)}async text(){return this[j_].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:o,httpVersion:s,decoded:c,counter:l}=this;return new t(this[j_].bufferedBody,{url:e,status:r,statusText:n,headers:o,httpVersion:s,decoded:c,counter:l})}get[Symbol.toStringTag](){return this.constructor.name}},m_r=a(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:o,headers:s,httpVersion:c,decoded:l,counter:u}=t;return new i5e(e,{url:r,status:n,statusText:o,headers:s,httpVersion:c,decoded:l,counter:u})},"cacheableResponse");ivt.exports={cacheableResponse:m_r}});var gle=W((uSo,svt)=>{"use strict";f();var o5e=class extends Error{static{a(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};svt.exports={RequestAbortedError:o5e}});var dvt=W((pSo,uvt)=>{"use strict";f();var cvt=require("http"),lvt=require("https"),{Readable:h_r}=require("stream"),KE=OC()("helix-fetch:h1"),{RequestAbortedError:avt}=gle(),{decodeStream:g_r}=GE(),A_r=a((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:o}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof o=="boolean"?(r.httpsAgent=new lvt.Agent(typeof o=="boolean"?{...n||{},rejectUnauthorized:o}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new cvt.Agent(n),r.httpAgent):void 0},"getAgent"),y_r=a(t=>{t.h1={}},"setupContext"),C_r=a(async({h1:t})=>{t.httpAgent&&(KE("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(KE("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),v_r=a((t,e,r)=>{let{statusCode:n,statusMessage:o,httpVersion:s,httpVersionMajor:c,httpVersionMinor:l,headers:u}=t,d=e?g_r(n,u,t,r):t;return{statusCode:n,statusText:o,httpVersion:s,httpVersionMajor:c,httpVersionMinor:l,headers:u,readable:d,decoded:!!(e&&d!==t)}},"createResponse"),x_r=a(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?lvt:cvt,o=A_r(t,e.protocol),s={...r,agent:o},{socket:c,body:l}=s;return c&&(delete s.socket,c.assigned||(c.assigned=!0,o?s.agent=new Proxy(o,{get:a((u,d)=>d==="createConnection"&&!c.inUse?(p,m)=>{KE(`agent reusing socket #${c.id} (${c.servername})`),c.inUse=!0,m(null,c)}:u[d],"get")}):s.createConnection=(u,d)=>{KE(`reusing socket #${c.id} (${c.servername})`),c.inUse=!0,d(null,c)})),new Promise((u,d)=>{KE(`${s.method} ${e.href}`);let p,{signal:m}=s,h=a(()=>{m.removeEventListener("abort",h),c&&!c.inUse&&(KE(`discarding redundant socket used for ALPN: #${c.id} ${c.servername}`),c.destroy()),d(new avt),p&&p.abort()},"onAbortSignal");if(m){if(m.aborted){d(new avt);return}m.addEventListener("abort",h)}p=n(e,s),p.once("response",g=>{m&&m.removeEventListener("abort",h),c&&!c.inUse&&(KE(`discarding redundant socket used for ALPN: #${c.id} ${c.servername}`),c.destroy()),u(v_r(g,s.decode,d))}),p.once("error",g=>{m&&m.removeEventListener("abort",h),c&&!c.inUse&&(KE(`discarding redundant socket used for ALPN: #${c.id} ${c.servername}`),c.destroy()),p.aborted||(KE(`${s.method} ${e.href} failed with: ${g.message}`),p.abort(),d(g))}),l instanceof h_r?l.pipe(p):(l&&p.write(l),p.end())})},"h1Request");uvt.exports={request:x_r,setupContext:y_r,resetContext:C_r}});var hvt=W((gSo,mvt)=>{"use strict";f();var{connect:E_r,constants:b_r}=require("http2"),{Readable:I_r}=require("stream"),ba=OC()("helix-fetch:h2"),{RequestAbortedError:fvt}=gle(),{decodeStream:T_r}=GE(),{NGHTTP2_CANCEL:TH}=b_r,w_r=300*1e3,__r=5e3,S_r=a(t=>{t.h2={sessionCache:{}}},"setupContext"),R_r=a(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),ba(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),pvt=a((t,e,r,n=()=>{})=>{let o={...t},s=o[":status"];delete o[":status"];let c=r?T_r(s,t,e,n):e;return{statusCode:s,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:o,readable:c,decoded:!!(r&&c!==e)}},"createResponse"),k_r=a((t,e,r,n,o,s)=>{let{options:{h2:{pushPromiseHandler:c,pushHandler:l,pushedStreamIdleTimeout:u=__r}}}=t,d=o[":path"],p=`${e}${d}`;ba(`received PUSH_PROMISE: ${p}, stream #${n.id}, headers: ${JSON.stringify(o)}, flags: ${s}`),c&&c(p,o,a(()=>{n.close(TH)},"rejectPush")),n.on("push",(m,h)=>{ba(`received push headers for ${e}${d}, stream #${n.id}, headers: ${JSON.stringify(m)}, flags: ${h}`),n.setTimeout(u,()=>{ba(`closing pushed stream #${n.id} after ${u} ms of inactivity`),n.close(TH)}),l&&l(p,o,pvt(m,n,r))}),n.on("aborted",()=>{ba(`pushed stream #${n.id} aborted`)}),n.on("error",m=>{ba(`pushed stream #${n.id} encountered error: ${m}`)}),n.on("frameError",(m,h,g)=>{ba(`pushed stream #${n.id} encountered frameError: type: ${m}, code: ${h}, id: ${g}`)})},"handlePush"),P_r=a(async(t,e,r)=>{let{origin:n,pathname:o,search:s,hash:c}=e,l=`${o}${s}${c}`,{options:{h2:u={}},h2:{sessionCache:d}}=t,{idleSessionTimeout:p=w_r,pushPromiseHandler:m,pushHandler:h}=u,g={...r},{method:A,headers:y,socket:v,body:b,decode:I}=g;return v&&delete g.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let N=d[n];if(!N||N.closed||N.destroyed){let V=!(t.options.rejectUnauthorized===!1||u.rejectUnauthorized===!1),U={...u,rejectUnauthorized:V};v&&!v.inUse&&(U.createConnection=()=>(ba(`reusing socket #${v.id} (${v.servername})`),v.inUse=!0,v)),N=E_r(n,{...U,settings:{enablePush:!!(m||h)}}),N.setMaxListeners(1e3),N.setTimeout(p,()=>{ba(`closing session ${n} after ${p} ms of inactivity`),N.close()}),N.once("connect",()=>{ba(`session ${n} established`),ba(`caching session ${n}`),d[n]=N}),N.on("localSettings",ee=>{ba(`session ${n} localSettings: ${JSON.stringify(ee)}`)}),N.on("remoteSettings",ee=>{ba(`session ${n} remoteSettings: ${JSON.stringify(ee)}`)}),N.once("close",()=>{ba(`session ${n} closed`),d[n]===N&&(ba(`discarding cached session ${n}`),delete d[n])}),N.once("error",ee=>{ba(`session ${n} encountered error: ${ee}`),d[n]===N&&(ba(`discarding cached session ${n}`),delete d[n])}),N.on("frameError",(ee,J,G)=>{ba(`session ${n} encountered frameError: type: ${ee}, code: ${J}, id: ${G}`)}),N.once("goaway",(ee,J,G)=>{ba(`session ${n} received GOAWAY frame: errorCode: ${ee}, lastStreamID: ${J}, opaqueData: ${G?G.toString():void 0}`)}),N.on("stream",(ee,J,G)=>{k_r(t,n,I,ee,J,G)})}else v&&v.id!==N.socket.id&&!v.inUse&&(ba(`discarding redundant socket used for ALPN: #${v.id} ${v.servername}`),v.destroy());ba(`${A} ${e.host}${l}`);let F,{signal:O}=g,Y=a(()=>{O.removeEventListener("abort",Y),k(new fvt),F&&F.close(TH)},"onAbortSignal");if(O){if(O.aborted){k(new fvt);return}O.addEventListener("abort",Y)}let z=a(V=>{ba(`session ${n} encountered error during ${g.method} ${e.href}: ${V}`),k(V)},"onSessionError");N.once("error",z),F=N.request({":method":A,":path":l,...y}),F.once("response",V=>{N.off("error",z),O&&O.removeEventListener("abort",Y),_(pvt(V,F,g.decode,k))}),F.once("error",V=>{N.off("error",z),O&&O.removeEventListener("abort",Y),F.rstCode!==TH&&(ba(`${g.method} ${e.href} failed with: ${V.message}`),F.close(TH),k(V))}),F.once("frameError",(V,U,H)=>{N.off("error",z),ba(`encountered frameError during ${g.method} ${e.href}: type: ${V}, code: ${U}, id: ${H}`)}),F.on("push",(V,U)=>{ba(`received 'push' event: headers: ${JSON.stringify(V)}, flags: ${U}`)}),b instanceof I_r?b.pipe(F):(b&&F.write(b),F.end())})},"request");mvt.exports={request:P_r,setupContext:S_r,resetContext:R_r}});var Avt=W((CSo,gvt)=>{"use strict";f();var{EventEmitter:D_r}=require("events"),B_r=a(()=>{let t={},e=new D_r;return e.setMaxListeners(0),{acquire:a(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let o=a(s=>{t[r]||(t[r]=!0,e.removeListener(r,o),n(s))},"tryAcquire");e.on(r,o)}),"acquire"),release:a((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");gvt.exports=B_r});var yvt=W((ESo,N_r)=>{N_r.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var bvt=W((bSo,Evt)=>{"use strict";f();var{Readable:M_r}=require("stream"),L_r=require("tls"),{types:{isAnyArrayBuffer:F_r}}=require("util"),O_r=zPe(),s5e=OC()("helix-fetch:core"),{RequestAbortedError:Ale}=gle(),a5e=dvt(),yle=hvt(),Q_r=Avt(),{isPlainObject:U_r}=GE(),{isFormData:q_r,FormDataSerializer:H_r}=IH(),{version:W_r}=yvt(),c5e="h2",l5e="h2c",u5e="http/1.0",$P="http/1.1",$_r=100,j_r=3600*1e3,G_r=[c5e,$P,u5e],V_r=`helix-fetch/${W_r}`,z_r={method:"GET",compress:!0,decode:!0},Cvt=0,vvt=Q_r(),xvt=a((t,e)=>new Promise((r,n)=>{let{signal:o}=e,s,c=a(()=>{o.removeEventListener("abort",c);let d=new Ale;n(d),s&&s.destroy(d)},"onAbortSignal");if(o){if(o.aborted){n(new Ale);return}o.addEventListener("abort",c)}let l=+t.port||443,u=a(d=>{o&&o.removeEventListener("abort",c),d instanceof Ale||(s5e(`connecting to ${t.hostname}:${l} failed with: ${d.message}`),n(d))},"onError");s=L_r.connect(l,t.hostname,e),s.once("secureConnect",()=>{o&&o.removeEventListener("abort",c),s.off("error",u),Cvt+=1,s.id=Cvt,s.secureConnecting=!1,s5e(`established TLS connection: #${s.id} (${s.servername})`),r(s)}),s.once("error",u)}),"connectTLS"),K_r=a(async(t,e)=>{let r=await vvt.acquire(t.origin);try{return r||(r=await xvt(t,e)),r}finally{vvt.release(t.origin,r)}},"connect"),Y_r=a(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,o=t.alpnCache.get(n);if(o)return{protocol:o};switch(e.protocol){case"http:":return o=$P,t.alpnCache.set(n,o),{protocol:o};case"http2:":return o=l5e,t.alpnCache.set(n,o),{protocol:o};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:s,h1:c={},h2:l={}}}=t,u=!(s===!1||c.rejectUnauthorized===!1||l.rejectUnauthorized===!1),d={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:u};t.options.ca&&(d.ca=t.options.ca);let p=await K_r(e,d);return o=p.alpnProtocol,o||(o=$P),t.alpnCache.set(n,o),{protocol:o,socket:p}},"determineProtocol"),J_r=a(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),X_r=a(async(t,e,r,n)=>{let o=e.protocol==="https:",s;e.port?s=e.port:o?s=443:s=80;let c={...r,host:e.host,hostname:e.hostname,port:s},l=await t(c);if(o){let d={...c,ALPNProtocols:n};d.socket=l,d.servername=c.host;let p=await xvt(e,d);return{protocol:p.alpnProtocol||$P,socket:p}}return{protocol:l.alpnProtocol||$P,socket:l}},"getProtocolAndSocketFromFactory"),Z_r=a(async(t,e,r)=>{let n=new URL(e),o={...z_r,...r||{}};typeof o.method=="string"&&(o.method=o.method.toUpperCase()),o.headers=J_r(o.headers||{}),o.headers.host===void 0&&(o.headers.host=n.host),t.userAgent&&o.headers["user-agent"]===void 0&&(o.headers["user-agent"]=t.userAgent);let s;if(o.body instanceof URLSearchParams)s="application/x-www-form-urlencoded; charset=utf-8",o.body=o.body.toString();else if(q_r(o.body)){let d=new H_r(o.body);s=d.contentType(),o.body=d.stream(),o.headers["transfer-encoding"]===void 0&&o.headers["content-length"]===void 0&&(o.headers["content-length"]=String(d.length()))}else typeof o.body=="string"||o.body instanceof String?s="text/plain; charset=utf-8":U_r(o.body)?(o.body=JSON.stringify(o.body),s="application/json"):F_r(o.body)&&(o.body=Buffer.from(o.body));o.headers["content-type"]===void 0&&s!==void 0&&(o.headers["content-type"]=s),o.body!=null&&(o.body instanceof M_r||(!(typeof o.body=="string"||o.body instanceof String)&&!Buffer.isBuffer(o.body)&&(o.body=String(o.body)),o.headers["transfer-encoding"]===void 0&&o.headers["content-length"]===void 0&&(o.headers["content-length"]=String(Buffer.isBuffer(o.body)?o.body.length:Buffer.byteLength(o.body,"utf-8"))))),o.headers.accept===void 0&&(o.headers.accept="*/*"),o.body==null&&["POST","PUT"].includes(o.method)&&(o.headers["content-length"]="0"),o.compress&&o.headers["accept-encoding"]===void 0&&(o.headers["accept-encoding"]="gzip,deflate,br");let{signal:c}=o,{protocol:l,socket:u=null}=t.socketFactory?await X_r(t.socketFactory,n,o,t.alpnProtocols):await Y_r(t,n,c);switch(s5e(`${n.host} -> ${l}`),l){case c5e:try{return await yle.request(t,n,u?{...o,socket:u}:o)}catch(d){let{code:p,message:m}=d;throw p==="ERR_HTTP2_ERROR"&&m==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),d}case l5e:return yle.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),u?{...o,socket:u}:o);case u5e:case $P:return a5e.request(t,n,u?{...o,socket:u}:o);default:throw new TypeError(`unsupported protocol: ${l}`)}},"request"),eSr=a(async t=>(t.alpnCache.clear(),Promise.all([a5e.resetContext(t),yle.resetContext(t)])),"resetContext"),tSr=a(t=>{let{options:{alpnProtocols:e=G_r,alpnCacheTTL:r=j_r,alpnCacheSize:n=$_r,userAgent:o=V_r,socketFactory:s}}=t;t.alpnProtocols=e,t.alpnCache=new O_r({max:n,ttl:r}),t.userAgent=o,t.socketFactory=s,a5e.setupContext(t),yle.setupContext(t)},"setupContext");Evt.exports={request:Z_r,setupContext:tSr,resetContext:eSr,RequestAbortedError:Ale,ALPN_HTTP2:c5e,ALPN_HTTP2C:l5e,ALPN_HTTP1_1:$P,ALPN_HTTP1_0:u5e}});var Tvt=W((wSo,Ivt)=>{"use strict";f();var rSr=OC()("helix-fetch:core"),{request:nSr,setupContext:iSr,resetContext:oSr,RequestAbortedError:sSr,ALPN_HTTP2:aSr,ALPN_HTTP2C:cSr,ALPN_HTTP1_1:lSr,ALPN_HTTP1_0:uSr}=bvt(),d5e=class t{static{a(this,"RequestContext")}constructor(e){this.options={...e||{}},iSr(this)}api(){return{request:a(async(e,r)=>this.request(e,r),"request"),context:a((e={})=>new t(e).api(),"context"),setCA:a(e=>this.setCA(e),"setCA"),reset:a(async()=>this.reset(),"reset"),RequestAbortedError:sSr,ALPN_HTTP2:aSr,ALPN_HTTP2C:cSr,ALPN_HTTP1_1:lSr,ALPN_HTTP1_0:uSr}}async request(e,r){return nSr(this,e,r)}setCA(e){this.options.ca=e}async reset(){return rSr("resetting context"),oSr(this)}};Ivt.exports=new d5e().api()});var kvt=W((RSo,Rvt)=>{"use strict";f();var{EventEmitter:dSr}=require("events"),{Readable:wH}=require("stream"),f5e=OC()("helix-fetch"),fSr=zPe(),{Body:pSr}=lle(),{Headers:g5e}=ZM(),{Request:jP}=KCt(),{Response:m5e}=t5e(),{FetchBaseError:mSr,FetchError:_H,AbortError:Cle}=JPe(),{AbortController:hSr,AbortSignal:gSr,TimeoutSignal:ASr}=XPe(),ySr=rvt(),{cacheableResponse:CSr}=ovt(),{sizeof:vSr}=GE(),{isFormData:xSr}=IH(),{context:ESr,RequestAbortedError:bSr}=Tvt(),wvt=["GET","HEAD"],ISr=500,TSr=100*1024*1024,p5e="push",_vt=a(async(t,e,r)=>{let{request:n}=t.context,o=e instanceof jP&&typeof r>"u"?e:new jP(e,r),{method:s,body:c,signal:l,compress:u,decode:d,follow:p,redirect:m,init:{body:h}}=o,g;if(l&&l.aborted){let N=new Cle("The operation was aborted.");throw o.init.body instanceof wH&&o.init.body.destroy(N),N}try{g=await n(o.url,{...r,method:s,headers:o.headers.plain(),body:h&&!(h instanceof wH)&&!xSr(h)?h:c,compress:u,decode:d,follow:p,redirect:m,signal:l})}catch(N){throw h instanceof wH&&h.destroy(N),N instanceof TypeError?N:N instanceof bSr?new Cle("The operation was aborted."):new _H(N.message,"system",N)}let A=a(()=>{l.removeEventListener("abort",A);let N=new Cle("The operation was aborted.");o.init.body instanceof wH&&o.init.body.destroy(N),g.readable.emit("error",N)},"abortHandler");l&&l.addEventListener("abort",A);let{statusCode:y,statusText:v,httpVersion:b,headers:I,readable:_,decoded:k}=g;if([301,302,303,307,308].includes(y)){let{location:N}=I,F=N==null?null:new URL(N,o.url);switch(o.redirect){case"manual":break;case"error":throw l&&l.removeEventListener("abort",A),new _H(`uri requested responds with a redirect, redirect mode is set to 'error': ${o.url}`,"no-redirect");case"follow":{if(F===null)break;if(o.counter>=o.follow)throw l&&l.removeEventListener("abort",A),new _H(`maximum redirect reached at: ${o.url}`,"max-redirect");let O={headers:new g5e(o.headers),follow:o.follow,compress:o.compress,decode:o.decode,counter:o.counter+1,method:o.method,body:o.body,signal:o.signal};if(y!==303&&o.body&&o.init.body instanceof wH)throw l&&l.removeEventListener("abort",A),new _H("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&o.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length")),l&&l.removeEventListener("abort",A),_vt(t,new jP(F,O))}default:}}return l&&(_.once("end",()=>{l.removeEventListener("abort",A)}),_.once("error",()=>{l.removeEventListener("abort",A)})),new m5e(_,{url:o.url,status:y,statusText:v,headers:I,httpVersion:b,decoded:k,counter:o.counter})},"fetch"),Svt=a(async(t,e,r)=>{if(t.options.maxCacheSize===0||!wvt.includes(e.method))return r;let n=new ySr(e,r,{shared:!1});if(n.storable()){let o=await CSr(r);return t.cache.set(e.url,{policy:n,response:o},n.timeToLive()),o}else return r},"cacheResponse"),wSr=a(async(t,e,r)=>{let n=new jP(e,r);if(t.options.maxCacheSize!==0&&wvt.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:c,response:l}=t.cache.get(n.url)||{};if(c&&c.satisfiesWithoutRevalidation(n)){l.headers=new g5e(c.responseHeaders(l));let u=l.clone();return u.fromCache=!0,u}}let s=await _vt(t,n);return n.cache!=="no-store"?Svt(t,n,s):s},"cachingFetch"),_Sr=a((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,o])=>{Array.isArray(o)?o.forEach(s=>r.searchParams.append(n,s)):r.searchParams.append(n,o)}),r.href},"createUrl"),SSr=a(t=>new ASr(t),"timeoutSignal"),h5e=class t{static{a(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:TSr,o=ISr;n===0&&(n=1,o=1);let s=a(({response:l},u)=>vSr(l),"sizeCalculation");this.cache=new fSr({max:o,maxSize:n,sizeCalculation:s}),this.eventEmitter=new dSr,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:c}=this.options.h2;c&&(this.options.h2.pushPromiseHandler=(l,u,d)=>{let p={...u};Object.keys(p).filter(m=>m.startsWith(":")).forEach(m=>delete p[m]),this.pushPromiseHandler(l,p,d)},this.options.h2.pushHandler=(l,u,d)=>{let p={...u};Object.keys(p).filter(b=>b.startsWith(":")).forEach(b=>delete p[b]);let{statusCode:m,statusText:h,httpVersion:g,headers:A,readable:y,decoded:v}=d;this.pushHandler(l,p,new m5e(y,{url:l,status:m,statusText:h,headers:A,httpVersion:g,decoded:v}))}),this.context=ESr(this.options)}api(){return{fetch:a(async(e,r)=>this.fetch(e,r),"fetch"),Body:pSr,Headers:g5e,Request:jP,Response:m5e,AbortController:hSr,AbortSignal:gSr,FetchBaseError:mSr,FetchError:_H,AbortError:Cle,context:a((e={})=>new t(e).api(),"context"),setCA:a(e=>this.setCA(e),"setCA"),noCache:a((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:a((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:a((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:a((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:a((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:a(async()=>this.context.reset(),"reset"),onPush:a(e=>this.onPush(e),"onPush"),offPush:a(e=>this.offPush(e),"offPush"),createUrl:_Sr,timeoutSignal:SSr,clearCache:a(()=>this.clearCache(),"clearCache"),cacheStats:a(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return wSr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(p5e,e)}offPush(e){return this.eventEmitter.off(p5e,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){f5e(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let o=new jP(e,{headers:r}),{policy:s}=this.cache.get(e)||{};s&&s.satisfiesWithoutRevalidation(o)&&(f5e(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){f5e(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let o=await Svt(this,new jP(e,{headers:r}),n);this.eventEmitter.emit(p5e,e,o)}};Rvt.exports=new h5e().api()});var Dvt=W((DSo,Pvt)=>{"use strict";f();Pvt.exports=kvt()});var zxt=W((Pue,Vxt)=>{f();(function(t,e){typeof Pue=="object"&&typeof Vxt<"u"?e(Pue):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Pue,function(t){"use strict";function e(){for(var Q=arguments.length,B=Array(Q),te=0;te<Q;te++)B[te]=arguments[te];if(B.length>1){B[0]=B[0].slice(0,-1);for(var Ae=B.length-1,Re=1;Re<Ae;++Re)B[Re]=B[Re].slice(1,-1);return B[Ae]=B[Ae].slice(1),B.join("")}else return B[0]}a(e,"merge");function r(Q){return"(?:"+Q+")"}a(r,"subexp");function n(Q){return Q===void 0?"undefined":Q===null?"null":Object.prototype.toString.call(Q).split(" ").pop().split("]").shift().toLowerCase()}a(n,"typeOf");function o(Q){return Q.toUpperCase()}a(o,"toUpperCase");function s(Q){return Q!=null?Q instanceof Array?Q:typeof Q.length!="number"||Q.split||Q.setInterval||Q.call?[Q]:Array.prototype.slice.call(Q):[]}a(s,"toArray");function c(Q,B){var te=Q;if(B)for(var Ae in B)te[Ae]=B[Ae];return te}a(c,"assign");function l(Q){var B="[A-Za-z]",te="[\\x0D]",Ae="[0-9]",Re="[\\x22]",ft=e(Ae,"[A-Fa-f]"),St="[\\x0A]",Jt="[\\x20]",rr=r(r("%[EFef]"+ft+"%"+ft+ft+"%"+ft+ft)+"|"+r("%[89A-Fa-f]"+ft+"%"+ft+ft)+"|"+r("%"+ft+ft)),Xt="[\\:\\/\\?\\#\\[\\]\\@]",It="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Er=e(Xt,It),fi=Q?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",oo=Q?"[\\uE000-\\uF8FF]":"[]",wn=e(B,Ae,"[\\-\\.\\_\\~]",fi),Co=r(B+e(B,Ae,"[\\+\\-\\.]")+"*"),Ei=r(r(rr+"|"+e(wn,It,"[\\:]"))+"*"),ts=r(r("25[0-5]")+"|"+r("2[0-4]"+Ae)+"|"+r("1"+Ae+Ae)+"|"+r("[1-9]"+Ae)+"|"+Ae),Ia=r(r("25[0-5]")+"|"+r("2[0-4]"+Ae)+"|"+r("1"+Ae+Ae)+"|"+r("0?[1-9]"+Ae)+"|0?0?"+Ae),_c=r(Ia+"\\."+Ia+"\\."+Ia+"\\."+Ia),Fo=r(ft+"{1,4}"),Ks=r(r(Fo+"\\:"+Fo)+"|"+_c),xd=r(r(Fo+"\\:")+"{6}"+Ks),Sc=r("\\:\\:"+r(Fo+"\\:")+"{5}"+Ks),Rg=r(r(Fo)+"?\\:\\:"+r(Fo+"\\:")+"{4}"+Ks),Sl=r(r(r(Fo+"\\:")+"{0,1}"+Fo)+"?\\:\\:"+r(Fo+"\\:")+"{3}"+Ks),kg=r(r(r(Fo+"\\:")+"{0,2}"+Fo)+"?\\:\\:"+r(Fo+"\\:")+"{2}"+Ks),Pg=r(r(r(Fo+"\\:")+"{0,3}"+Fo)+"?\\:\\:"+Fo+"\\:"+Ks),nb=r(r(r(Fo+"\\:")+"{0,4}"+Fo)+"?\\:\\:"+Ks),$a=r(r(r(Fo+"\\:")+"{0,5}"+Fo)+"?\\:\\:"+Fo),Lu=r(r(r(Fo+"\\:")+"{0,6}"+Fo)+"?\\:\\:"),Fu=r([xd,Sc,Rg,Sl,kg,Pg,nb,$a,Lu].join("|")),Ed=r(r(wn+"|"+rr)+"+"),Dg=r(Fu+"\\%25"+Ed),Jl=r(Fu+r("\\%25|\\%(?!"+ft+"{2})")+Ed),ib=r("[vV]"+ft+"+\\."+e(wn,It,"[\\:]")+"+"),h1=r("\\["+r(Jl+"|"+Fu+"|"+ib)+"\\]"),ob=r(r(rr+"|"+e(wn,It))+"*"),Yf=r(h1+"|"+_c+"(?!"+ob+")|"+ob),Jf=r(Ae+"*"),Xr=r(r(Ei+"@")+"?"+Yf+r("\\:"+Jf)+"?"),Rc=r(rr+"|"+e(wn,It,"[\\:\\@]")),Bg=r(Rc+"*"),Ng=r(Rc+"+"),IL=r(r(rr+"|"+e(wn,It,"[\\@]"))+"+"),Yc=r(r("\\/"+Bg)+"*"),Ly=r("\\/"+r(Ng+Yc)+"?"),g1=r(IL+Yc),Sm=r(Ng+Yc),Fy="(?!"+Rc+")",sb=r(Yc+"|"+Ly+"|"+g1+"|"+Sm+"|"+Fy),ws=r(r(Rc+"|"+e("[\\/\\?]",oo))+"*"),bd=r(r(Rc+"|[\\/\\?]")+"*"),Oy=r(r("\\/\\/"+Xr+Yc)+"|"+Ly+"|"+Sm+"|"+Fy),b5=r(Co+"\\:"+Oy+r("\\?"+ws)+"?"+r("\\#"+bd)+"?"),TL=r(r("\\/\\/"+Xr+Yc)+"|"+Ly+"|"+g1+"|"+Fy),so=r(TL+r("\\?"+ws)+"?"+r("\\#"+bd)+"?"),Qy=r(b5+"|"+so),Mg=r(Co+"\\:"+Oy+r("\\?"+ws)+"?"),I5="^("+Co+")\\:"+r(r("\\/\\/("+r("("+Ei+")@")+"?("+Yf+")"+r("\\:("+Jf+")")+"?)")+"?("+Yc+"|"+Ly+"|"+Sm+"|"+Fy+")")+r("\\?("+ws+")")+"?"+r("\\#("+bd+")")+"?$",ab="^(){0}"+r(r("\\/\\/("+r("("+Ei+")@")+"?("+Yf+")"+r("\\:("+Jf+")")+"?)")+"?("+Yc+"|"+Ly+"|"+g1+"|"+Fy+")")+r("\\?("+ws+")")+"?"+r("\\#("+bd+")")+"?$",Id="^("+Co+")\\:"+r(r("\\/\\/("+r("("+Ei+")@")+"?("+Yf+")"+r("\\:("+Jf+")")+"?)")+"?("+Yc+"|"+Ly+"|"+Sm+"|"+Fy+")")+r("\\?("+ws+")")+"?$",wL="^"+r("\\#("+bd+")")+"?$",_L="^"+r("("+Ei+")@")+"?("+Yf+")"+r("\\:("+Jf+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",B,Ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",wn,It),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",wn,It),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",wn,It),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",wn,It),"g"),NOT_QUERY:new RegExp(e("[^\\%]",wn,It,"[\\:\\@\\/\\?]",oo),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",wn,It,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",wn,It),"g"),UNRESERVED:new RegExp(wn,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",wn,Er),"g"),PCT_ENCODED:new RegExp(rr,"g"),IPV4ADDRESS:new RegExp("^("+_c+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Fu+")"+r(r("\\%25|\\%(?!"+ft+"{2})")+"("+Ed+")")+"?\\]?$")}}a(l,"buildExps");var u=l(!1),d=l(!0),p=function(){function Q(B,te){var Ae=[],Re=!0,ft=!1,St=void 0;try{for(var Jt=B[Symbol.iterator](),rr;!(Re=(rr=Jt.next()).done)&&(Ae.push(rr.value),!(te&&Ae.length===te));Re=!0);}catch(Xt){ft=!0,St=Xt}finally{try{!Re&&Jt.return&&Jt.return()}finally{if(ft)throw St}}return Ae}return a(Q,"sliceIterator"),function(B,te){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return Q(B,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=a(function(Q){if(Array.isArray(Q)){for(var B=0,te=Array(Q.length);B<Q.length;B++)te[B]=Q[B];return te}else return Array.from(Q)},"toConsumableArray"),h=2147483647,g=36,A=1,y=26,v=38,b=700,I=72,_=128,k="-",N=/^xn--/,F=/[^\0-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,Y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=g-A,V=Math.floor,U=String.fromCharCode;function H(Q){throw new RangeError(Y[Q])}a(H,"error$1");function ee(Q,B){for(var te=[],Ae=Q.length;Ae--;)te[Ae]=B(Q[Ae]);return te}a(ee,"map");function J(Q,B){var te=Q.split("@"),Ae="";te.length>1&&(Ae=te[0]+"@",Q=te[1]),Q=Q.replace(O,".");var Re=Q.split("."),ft=ee(Re,B).join(".");return Ae+ft}a(J,"mapDomain");function G(Q){for(var B=[],te=0,Ae=Q.length;te<Ae;){var Re=Q.charCodeAt(te++);if(Re>=55296&&Re<=56319&&te<Ae){var ft=Q.charCodeAt(te++);(ft&64512)==56320?B.push(((Re&1023)<<10)+(ft&1023)+65536):(B.push(Re),te--)}else B.push(Re)}return B}a(G,"ucs2decode");var j=a(function(B){return String.fromCodePoint.apply(String,m(B))},"ucs2encode"),Z=a(function(B){return B-48<10?B-22:B-65<26?B-65:B-97<26?B-97:g},"basicToDigit"),ie=a(function(B,te){return B+22+75*(B<26)-((te!=0)<<5)},"digitToBasic"),ne=a(function(B,te,Ae){var Re=0;for(B=Ae?V(B/b):B>>1,B+=V(B/te);B>z*y>>1;Re+=g)B=V(B/z);return V(Re+(z+1)*B/(B+v))},"adapt"),re=a(function(B){var te=[],Ae=B.length,Re=0,ft=_,St=I,Jt=B.lastIndexOf(k);Jt<0&&(Jt=0);for(var rr=0;rr<Jt;++rr)B.charCodeAt(rr)>=128&&H("not-basic"),te.push(B.charCodeAt(rr));for(var Xt=Jt>0?Jt+1:0;Xt<Ae;){for(var It=Re,Er=1,fi=g;;fi+=g){Xt>=Ae&&H("invalid-input");var oo=Z(B.charCodeAt(Xt++));(oo>=g||oo>V((h-Re)/Er))&&H("overflow"),Re+=oo*Er;var wn=fi<=St?A:fi>=St+y?y:fi-St;if(oo<wn)break;var Co=g-wn;Er>V(h/Co)&&H("overflow"),Er*=Co}var Ei=te.length+1;St=ne(Re-It,Ei,It==0),V(Re/Ei)>h-ft&&H("overflow"),ft+=V(Re/Ei),Re%=Ei,te.splice(Re++,0,ft)}return String.fromCodePoint.apply(String,te)},"decode"),fe=a(function(B){var te=[];B=G(B);var Ae=B.length,Re=_,ft=0,St=I,Jt=!0,rr=!1,Xt=void 0;try{for(var It=B[Symbol.iterator](),Er;!(Jt=(Er=It.next()).done);Jt=!0){var fi=Er.value;fi<128&&te.push(U(fi))}}catch(Jl){rr=!0,Xt=Jl}finally{try{!Jt&&It.return&&It.return()}finally{if(rr)throw Xt}}var oo=te.length,wn=oo;for(oo&&te.push(k);wn<Ae;){var Co=h,Ei=!0,ts=!1,Ia=void 0;try{for(var _c=B[Symbol.iterator](),Fo;!(Ei=(Fo=_c.next()).done);Ei=!0){var Ks=Fo.value;Ks>=Re&&Ks<Co&&(Co=Ks)}}catch(Jl){ts=!0,Ia=Jl}finally{try{!Ei&&_c.return&&_c.return()}finally{if(ts)throw Ia}}var xd=wn+1;Co-Re>V((h-ft)/xd)&&H("overflow"),ft+=(Co-Re)*xd,Re=Co;var Sc=!0,Rg=!1,Sl=void 0;try{for(var kg=B[Symbol.iterator](),Pg;!(Sc=(Pg=kg.next()).done);Sc=!0){var nb=Pg.value;if(nb<Re&&++ft>h&&H("overflow"),nb==Re){for(var $a=ft,Lu=g;;Lu+=g){var Fu=Lu<=St?A:Lu>=St+y?y:Lu-St;if($a<Fu)break;var Ed=$a-Fu,Dg=g-Fu;te.push(U(ie(Fu+Ed%Dg,0))),$a=V(Ed/Dg)}te.push(U(ie($a,0))),St=ne(ft,xd,wn==oo),ft=0,++wn}}}catch(Jl){Rg=!0,Sl=Jl}finally{try{!Sc&&kg.return&&kg.return()}finally{if(Rg)throw Sl}}++ft,++Re}return te.join("")},"encode"),ye=a(function(B){return J(B,function(te){return N.test(te)?re(te.slice(4).toLowerCase()):te})},"toUnicode"),Qe=a(function(B){return J(B,function(te){return F.test(te)?"xn--"+fe(te):te})},"toASCII"),we={version:"2.1.0",ucs2:{decode:G,encode:j},decode:re,encode:fe,toASCII:Qe,toUnicode:ye},Xe={};function Oe(Q){var B=Q.charCodeAt(0),te=void 0;return B<16?te="%0"+B.toString(16).toUpperCase():B<128?te="%"+B.toString(16).toUpperCase():B<2048?te="%"+(B>>6|192).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase():te="%"+(B>>12|224).toString(16).toUpperCase()+"%"+(B>>6&63|128).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase(),te}a(Oe,"pctEncChar");function ut(Q){for(var B="",te=0,Ae=Q.length;te<Ae;){var Re=parseInt(Q.substr(te+1,2),16);if(Re<128)B+=String.fromCharCode(Re),te+=3;else if(Re>=194&&Re<224){if(Ae-te>=6){var ft=parseInt(Q.substr(te+4,2),16);B+=String.fromCharCode((Re&31)<<6|ft&63)}else B+=Q.substr(te,6);te+=6}else if(Re>=224){if(Ae-te>=9){var St=parseInt(Q.substr(te+4,2),16),Jt=parseInt(Q.substr(te+7,2),16);B+=String.fromCharCode((Re&15)<<12|(St&63)<<6|Jt&63)}else B+=Q.substr(te,9);te+=9}else B+=Q.substr(te,3),te+=3}return B}a(ut,"pctDecChars");function Rt(Q,B){function te(Ae){var Re=ut(Ae);return Re.match(B.UNRESERVED)?Re:Ae}return a(te,"decodeUnreserved"),Q.scheme&&(Q.scheme=String(Q.scheme).replace(B.PCT_ENCODED,te).toLowerCase().replace(B.NOT_SCHEME,"")),Q.userinfo!==void 0&&(Q.userinfo=String(Q.userinfo).replace(B.PCT_ENCODED,te).replace(B.NOT_USERINFO,Oe).replace(B.PCT_ENCODED,o)),Q.host!==void 0&&(Q.host=String(Q.host).replace(B.PCT_ENCODED,te).toLowerCase().replace(B.NOT_HOST,Oe).replace(B.PCT_ENCODED,o)),Q.path!==void 0&&(Q.path=String(Q.path).replace(B.PCT_ENCODED,te).replace(Q.scheme?B.NOT_PATH:B.NOT_PATH_NOSCHEME,Oe).replace(B.PCT_ENCODED,o)),Q.query!==void 0&&(Q.query=String(Q.query).replace(B.PCT_ENCODED,te).replace(B.NOT_QUERY,Oe).replace(B.PCT_ENCODED,o)),Q.fragment!==void 0&&(Q.fragment=String(Q.fragment).replace(B.PCT_ENCODED,te).replace(B.NOT_FRAGMENT,Oe).replace(B.PCT_ENCODED,o)),Q}a(Rt,"_normalizeComponentEncoding");function Et(Q){return Q.replace(/^0*(.*)/,"$1")||"0"}a(Et,"_stripLeadingZeros");function At(Q,B){var te=Q.match(B.IPV4ADDRESS)||[],Ae=p(te,2),Re=Ae[1];return Re?Re.split(".").map(Et).join("."):Q}a(At,"_normalizeIPv4");function de(Q,B){var te=Q.match(B.IPV6ADDRESS)||[],Ae=p(te,3),Re=Ae[1],ft=Ae[2];if(Re){for(var St=Re.toLowerCase().split("::").reverse(),Jt=p(St,2),rr=Jt[0],Xt=Jt[1],It=Xt?Xt.split(":").map(Et):[],Er=rr.split(":").map(Et),fi=B.IPV4ADDRESS.test(Er[Er.length-1]),oo=fi?7:8,wn=Er.length-oo,Co=Array(oo),Ei=0;Ei<oo;++Ei)Co[Ei]=It[Ei]||Er[wn+Ei]||"";fi&&(Co[oo-1]=At(Co[oo-1],B));var ts=Co.reduce(function(xd,Sc,Rg){if(!Sc||Sc==="0"){var Sl=xd[xd.length-1];Sl&&Sl.index+Sl.length===Rg?Sl.length++:xd.push({index:Rg,length:1})}return xd},[]),Ia=ts.sort(function(xd,Sc){return Sc.length-xd.length})[0],_c=void 0;if(Ia&&Ia.length>1){var Fo=Co.slice(0,Ia.index),Ks=Co.slice(Ia.index+Ia.length);_c=Fo.join(":")+"::"+Ks.join(":")}else _c=Co.join(":");return ft&&(_c+="%"+ft),_c}else return Q}a(de,"_normalizeIPv6");var qe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ce="".match(/(){0}/)[1]===void 0;function $e(Q){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te={},Ae=B.iri!==!1?d:u;B.reference==="suffix"&&(Q=(B.scheme?B.scheme+":":"")+"//"+Q);var Re=Q.match(qe);if(Re){Ce?(te.scheme=Re[1],te.userinfo=Re[3],te.host=Re[4],te.port=parseInt(Re[5],10),te.path=Re[6]||"",te.query=Re[7],te.fragment=Re[8],isNaN(te.port)&&(te.port=Re[5])):(te.scheme=Re[1]||void 0,te.userinfo=Q.indexOf("@")!==-1?Re[3]:void 0,te.host=Q.indexOf("//")!==-1?Re[4]:void 0,te.port=parseInt(Re[5],10),te.path=Re[6]||"",te.query=Q.indexOf("?")!==-1?Re[7]:void 0,te.fragment=Q.indexOf("#")!==-1?Re[8]:void 0,isNaN(te.port)&&(te.port=Q.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Re[4]:void 0)),te.host&&(te.host=de(At(te.host,Ae),Ae)),te.scheme===void 0&&te.userinfo===void 0&&te.host===void 0&&te.port===void 0&&!te.path&&te.query===void 0?te.reference="same-document":te.scheme===void 0?te.reference="relative":te.fragment===void 0?te.reference="absolute":te.reference="uri",B.reference&&B.reference!=="suffix"&&B.reference!==te.reference&&(te.error=te.error||"URI is not a "+B.reference+" reference.");var ft=Xe[(B.scheme||te.scheme||"").toLowerCase()];if(!B.unicodeSupport&&(!ft||!ft.unicodeSupport)){if(te.host&&(B.domainHost||ft&&ft.domainHost))try{te.host=we.toASCII(te.host.replace(Ae.PCT_ENCODED,ut).toLowerCase())}catch(St){te.error=te.error||"Host's domain name can not be converted to ASCII via punycode: "+St}Rt(te,u)}else Rt(te,Ae);ft&&ft.parse&&ft.parse(te,B)}else te.error=te.error||"URI can not be parsed.";return te}a($e,"parse");function ce(Q,B){var te=B.iri!==!1?d:u,Ae=[];return Q.userinfo!==void 0&&(Ae.push(Q.userinfo),Ae.push("@")),Q.host!==void 0&&Ae.push(de(At(String(Q.host),te),te).replace(te.IPV6ADDRESS,function(Re,ft,St){return"["+ft+(St?"%25"+St:"")+"]"})),(typeof Q.port=="number"||typeof Q.port=="string")&&(Ae.push(":"),Ae.push(String(Q.port))),Ae.length?Ae.join(""):void 0}a(ce,"_recomposeAuthority");var ue=/^\.\.?\//,He=/^\/\.(\/|$)/,Me=/^\/\.\.(\/|$)/,be=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(Q){for(var B=[];Q.length;)if(Q.match(ue))Q=Q.replace(ue,"");else if(Q.match(He))Q=Q.replace(He,"/");else if(Q.match(Me))Q=Q.replace(Me,"/"),B.pop();else if(Q==="."||Q==="..")Q="";else{var te=Q.match(be);if(te){var Ae=te[0];Q=Q.slice(Ae.length),B.push(Ae)}else throw new Error("Unexpected dot segment condition")}return B.join("")}a(Ge,"removeDotSegments");function rt(Q){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=B.iri?d:u,Ae=[],Re=Xe[(B.scheme||Q.scheme||"").toLowerCase()];if(Re&&Re.serialize&&Re.serialize(Q,B),Q.host&&!te.IPV6ADDRESS.test(Q.host)){if(B.domainHost||Re&&Re.domainHost)try{Q.host=B.iri?we.toUnicode(Q.host):we.toASCII(Q.host.replace(te.PCT_ENCODED,ut).toLowerCase())}catch(Jt){Q.error=Q.error||"Host's domain name can not be converted to "+(B.iri?"Unicode":"ASCII")+" via punycode: "+Jt}}Rt(Q,te),B.reference!=="suffix"&&Q.scheme&&(Ae.push(Q.scheme),Ae.push(":"));var ft=ce(Q,B);if(ft!==void 0&&(B.reference!=="suffix"&&Ae.push("//"),Ae.push(ft),Q.path&&Q.path.charAt(0)!=="/"&&Ae.push("/")),Q.path!==void 0){var St=Q.path;!B.absolutePath&&(!Re||!Re.absolutePath)&&(St=Ge(St)),ft===void 0&&(St=St.replace(/^\/\//,"/%2F")),Ae.push(St)}return Q.query!==void 0&&(Ae.push("?"),Ae.push(Q.query)),Q.fragment!==void 0&&(Ae.push("#"),Ae.push(Q.fragment)),Ae.join("")}a(rt,"serialize");function ht(Q,B){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=arguments[3],Re={};return Ae||(Q=$e(rt(Q,te),te),B=$e(rt(B,te),te)),te=te||{},!te.tolerant&&B.scheme?(Re.scheme=B.scheme,Re.userinfo=B.userinfo,Re.host=B.host,Re.port=B.port,Re.path=Ge(B.path||""),Re.query=B.query):(B.userinfo!==void 0||B.host!==void 0||B.port!==void 0?(Re.userinfo=B.userinfo,Re.host=B.host,Re.port=B.port,Re.path=Ge(B.path||""),Re.query=B.query):(B.path?(B.path.charAt(0)==="/"?Re.path=Ge(B.path):((Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)&&!Q.path?Re.path="/"+B.path:Q.path?Re.path=Q.path.slice(0,Q.path.lastIndexOf("/")+1)+B.path:Re.path=B.path,Re.path=Ge(Re.path)),Re.query=B.query):(Re.path=Q.path,B.query!==void 0?Re.query=B.query:Re.query=Q.query),Re.userinfo=Q.userinfo,Re.host=Q.host,Re.port=Q.port),Re.scheme=Q.scheme),Re.fragment=B.fragment,Re}a(ht,"resolveComponents");function Ot(Q,B,te){var Ae=c({scheme:"null"},te);return rt(ht($e(Q,Ae),$e(B,Ae),Ae,!0),Ae)}a(Ot,"resolve");function Zt(Q,B){return typeof Q=="string"?Q=rt($e(Q,B),B):n(Q)==="object"&&(Q=$e(rt(Q,B),B)),Q}a(Zt,"normalize");function qt(Q,B,te){return typeof Q=="string"?Q=rt($e(Q,te),te):n(Q)==="object"&&(Q=rt(Q,te)),typeof B=="string"?B=rt($e(B,te),te):n(B)==="object"&&(B=rt(B,te)),Q===B}a(qt,"equal");function Yr(Q,B){return Q&&Q.toString().replace(!B||!B.iri?u.ESCAPE:d.ESCAPE,Oe)}a(Yr,"escapeComponent");function Mr(Q,B){return Q&&Q.toString().replace(!B||!B.iri?u.PCT_ENCODED:d.PCT_ENCODED,ut)}a(Mr,"unescapeComponent");var fn={scheme:"http",domainHost:!0,parse:a(function(B,te){return B.host||(B.error=B.error||"HTTP URIs must have a host."),B},"parse"),serialize:a(function(B,te){var Ae=String(B.scheme).toLowerCase()==="https";return(B.port===(Ae?443:80)||B.port==="")&&(B.port=void 0),B.path||(B.path="/"),B},"serialize")},xe={scheme:"https",domainHost:fn.domainHost,parse:fn.parse,serialize:fn.serialize};function Ve(Q){return typeof Q.secure=="boolean"?Q.secure:String(Q.scheme).toLowerCase()==="wss"}a(Ve,"isSecure");var mt={scheme:"ws",domainHost:!0,parse:a(function(B,te){var Ae=B;return Ae.secure=Ve(Ae),Ae.resourceName=(Ae.path||"/")+(Ae.query?"?"+Ae.query:""),Ae.path=void 0,Ae.query=void 0,Ae},"parse"),serialize:a(function(B,te){if((B.port===(Ve(B)?443:80)||B.port==="")&&(B.port=void 0),typeof B.secure=="boolean"&&(B.scheme=B.secure?"wss":"ws",B.secure=void 0),B.resourceName){var Ae=B.resourceName.split("?"),Re=p(Ae,2),ft=Re[0],St=Re[1];B.path=ft&&ft!=="/"?ft:void 0,B.query=St,B.resourceName=void 0}return B.fragment=void 0,B},"serialize")},wt={scheme:"wss",domainHost:mt.domainHost,parse:mt.parse,serialize:mt.serialize},ar={},tr=!0,Sr="[A-Za-z0-9\\-\\.\\_\\~"+(tr?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",fr="[0-9A-Fa-f]",or=r(r("%[EFef]"+fr+"%"+fr+fr+"%"+fr+fr)+"|"+r("%[89A-Fa-f]"+fr+"%"+fr+fr)+"|"+r("%"+fr+fr)),dr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",sr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Fr=e(sr,'[\\"\\\\]'),Jr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ln=new RegExp(Sr,"g"),xn=new RegExp(or,"g"),oi=new RegExp(e("[^]",dr,"[\\.]",'[\\"]',Fr),"g"),Rn=new RegExp(e("[^]",Sr,Jr),"g"),ri=Rn;function un(Q){var B=ut(Q);return B.match(ln)?B:Q}a(un,"decodeUnreserved");var Xn={scheme:"mailto",parse:a(function(B,te){var Ae=B,Re=Ae.to=Ae.path?Ae.path.split(","):[];if(Ae.path=void 0,Ae.query){for(var ft=!1,St={},Jt=Ae.query.split("&"),rr=0,Xt=Jt.length;rr<Xt;++rr){var It=Jt[rr].split("=");switch(It[0]){case"to":for(var Er=It[1].split(","),fi=0,oo=Er.length;fi<oo;++fi)Re.push(Er[fi]);break;case"subject":Ae.subject=Mr(It[1],te);break;case"body":Ae.body=Mr(It[1],te);break;default:ft=!0,St[Mr(It[0],te)]=Mr(It[1],te);break}}ft&&(Ae.headers=St)}Ae.query=void 0;for(var wn=0,Co=Re.length;wn<Co;++wn){var Ei=Re[wn].split("@");if(Ei[0]=Mr(Ei[0]),te.unicodeSupport)Ei[1]=Mr(Ei[1],te).toLowerCase();else try{Ei[1]=we.toASCII(Mr(Ei[1],te).toLowerCase())}catch(ts){Ae.error=Ae.error||"Email address's domain name can not be converted to ASCII via punycode: "+ts}Re[wn]=Ei.join("@")}return Ae},"parse$$1"),serialize:a(function(B,te){var Ae=B,Re=s(B.to);if(Re){for(var ft=0,St=Re.length;ft<St;++ft){var Jt=String(Re[ft]),rr=Jt.lastIndexOf("@"),Xt=Jt.slice(0,rr).replace(xn,un).replace(xn,o).replace(oi,Oe),It=Jt.slice(rr+1);try{It=te.iri?we.toUnicode(It):we.toASCII(Mr(It,te).toLowerCase())}catch(wn){Ae.error=Ae.error||"Email address's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+wn}Re[ft]=Xt+"@"+It}Ae.path=Re.join(",")}var Er=B.headers=B.headers||{};B.subject&&(Er.subject=B.subject),B.body&&(Er.body=B.body);var fi=[];for(var oo in Er)Er[oo]!==ar[oo]&&fi.push(oo.replace(xn,un).replace(xn,o).replace(Rn,Oe)+"="+Er[oo].replace(xn,un).replace(xn,o).replace(ri,Oe));return fi.length&&(Ae.query=fi.join("&")),Ae},"serialize$$1")},De=/^([^\:]+)\:(.*)/,X={scheme:"urn",parse:a(function(B,te){var Ae=B.path&&B.path.match(De),Re=B;if(Ae){var ft=te.scheme||Re.scheme||"urn",St=Ae[1].toLowerCase(),Jt=Ae[2],rr=ft+":"+(te.nid||St),Xt=Xe[rr];Re.nid=St,Re.nss=Jt,Re.path=void 0,Xt&&(Re=Xt.parse(Re,te))}else Re.error=Re.error||"URN can not be parsed.";return Re},"parse$$1"),serialize:a(function(B,te){var Ae=te.scheme||B.scheme||"urn",Re=B.nid,ft=Ae+":"+(te.nid||Re),St=Xe[ft];St&&(B=St.serialize(B,te));var Jt=B,rr=B.nss;return Jt.path=(Re||te.nid)+":"+rr,Jt},"serialize$$1")},ve=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Te={scheme:"urn:uuid",parse:a(function(B,te){var Ae=B;return Ae.uuid=Ae.nss,Ae.nss=void 0,!te.tolerant&&(!Ae.uuid||!Ae.uuid.match(ve))&&(Ae.error=Ae.error||"UUID is not valid."),Ae},"parse"),serialize:a(function(B,te){var Ae=B;return Ae.nss=(B.uuid||"").toLowerCase(),Ae},"serialize")};Xe[fn.scheme]=fn,Xe[xe.scheme]=xe,Xe[mt.scheme]=mt,Xe[wt.scheme]=wt,Xe[Xn.scheme]=Xn,Xe[X.scheme]=X,Xe[Te.scheme]=Te,t.SCHEMES=Xe,t.pctEncChar=Oe,t.pctDecChars=ut,t.parse=$e,t.removeDotSegments=Ge,t.serialize=rt,t.resolveComponents=ht,t.resolve=Ot,t.normalize=Zt,t.equal=qt,t.escapeComponent=Yr,t.unescapeComponent=Mr,Object.defineProperty(t,"__esModule",{value:!0})})});var Due=W((WOo,Kxt)=>{"use strict";f();Kxt.exports=a(function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,o,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!t(e[o],r[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[o]))return!1;for(o=n;o--!==0;){var c=s[o];if(!t(e[c],r[c]))return!1}return!0}return e!==e&&r!==r},"equal")});var Jxt=W((GOo,Yxt)=>{"use strict";f();Yxt.exports=a(function(e){for(var r=0,n=e.length,o=0,s;o<n;)r++,s=e.charCodeAt(o++),s>=55296&&s<=56319&&o<n&&(s=e.charCodeAt(o),(s&64512)==56320&&o++);return r},"ucs2length")});var g5=W((KOo,eEt)=>{"use strict";f();eEt.exports={copy:LPr,checkDataType:S4e,checkDataTypes:FPr,coerceToTypes:OPr,toHash:k4e,getProperty:P4e,escapeQuotes:D4e,equal:Due(),ucs2length:Jxt(),varOccurences:qPr,varReplace:HPr,schemaHasRules:WPr,schemaHasRulesExcept:$Pr,schemaUnknownRules:jPr,toQuotedString:R4e,getPathExpr:GPr,getPath:VPr,getData:YPr,unescapeFragment:JPr,unescapeJsonPointer:N4e,escapeFragment:XPr,escapeJsonPointer:B4e};function LPr(t,e){e=e||{};for(var r in t)e[r]=t[r];return e}a(LPr,"copy");function S4e(t,e,r,n){var o=n?" !== ":" === ",s=n?" || ":" && ",c=n?"!":"",l=n?"":"!";switch(t){case"null":return e+o+"null";case"array":return c+"Array.isArray("+e+")";case"object":return"("+c+e+s+"typeof "+e+o+'"object"'+s+l+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+o+'"number"'+s+l+"("+e+" % 1)"+s+e+o+e+(r?s+c+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+o+'"'+t+'"'+(r?s+c+"isFinite("+e+")":"")+")";default:return"typeof "+e+o+'"'+t+'"'}}a(S4e,"checkDataType");function FPr(t,e,r){switch(t.length){case 1:return S4e(t[0],e,r,!0);default:var n="",o=k4e(t);o.array&&o.object&&(n=o.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer;for(var s in o)n+=(n?" && ":"")+S4e(s,e,r,!0);return n}}a(FPr,"checkDataTypes");var Xxt=k4e(["string","number","integer","boolean","null"]);function OPr(t,e){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++){var o=e[n];(Xxt[o]||t==="array"&&o==="array")&&(r[r.length]=o)}if(r.length)return r}else{if(Xxt[e])return[e];if(t==="array"&&e==="array")return["array"]}}a(OPr,"coerceToTypes");function k4e(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!0;return e}a(k4e,"toHash");var QPr=/^[a-z$_][a-z$_0-9]*$/i,UPr=/'|\\/g;function P4e(t){return typeof t=="number"?"["+t+"]":QPr.test(t)?"."+t:"['"+D4e(t)+"']"}a(P4e,"getProperty");function D4e(t){return t.replace(UPr,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}a(D4e,"escapeQuotes");function qPr(t,e){e+="[^0-9]";var r=t.match(new RegExp(e,"g"));return r?r.length:0}a(qPr,"varOccurences");function HPr(t,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),r+"$1")}a(HPr,"varReplace");function WPr(t,e){if(typeof t=="boolean")return!t;for(var r in t)if(e[r])return!0}a(WPr,"schemaHasRules");function $Pr(t,e,r){if(typeof t=="boolean")return!t&&r!="not";for(var n in t)if(n!=r&&e[n])return!0}a($Pr,"schemaHasRulesExcept");function jPr(t,e){if(typeof t!="boolean"){for(var r in t)if(!e[r])return r}}a(jPr,"schemaUnknownRules");function R4e(t){return"'"+D4e(t)+"'"}a(R4e,"toQuotedString");function GPr(t,e,r,n){var o=r?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Zxt(t,o)}a(GPr,"getPathExpr");function VPr(t,e,r){var n=R4e(r?"/"+B4e(e):P4e(e));return Zxt(t,n)}a(VPr,"getPath");var zPr=/^\/(?:[^~]|~0|~1)*$/,KPr=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function YPr(t,e,r){var n,o,s,c;if(t==="")return"rootData";if(t[0]=="/"){if(!zPr.test(t))throw new Error("Invalid JSON-pointer: "+t);o=t,s="rootData"}else{if(c=t.match(KPr),!c)throw new Error("Invalid JSON-pointer: "+t);if(n=+c[1],o=c[2],o=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return r[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(s="data"+(e-n||""),!o)return s}for(var l=s,u=o.split("/"),d=0;d<u.length;d++){var p=u[d];p&&(s+=P4e(N4e(p)),l+=" && "+s)}return l}a(YPr,"getData");function Zxt(t,e){return t=='""'?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}a(Zxt,"joinPaths");function JPr(t){return N4e(decodeURIComponent(t))}a(JPr,"unescapeFragment");function XPr(t){return encodeURIComponent(B4e(t))}a(XPr,"escapeFragment");function B4e(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}a(B4e,"escapeJsonPointer");function N4e(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}a(N4e,"unescapeJsonPointer")});var M4e=W((XOo,tEt)=>{"use strict";f();var ZPr=g5();tEt.exports=e5r;function e5r(t){ZPr.copy(t,this)}a(e5r,"SchemaObject")});var nEt=W((t7o,rEt)=>{"use strict";f();var J_=rEt.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},o=r.post||function(){};Bue(e,n,o,t,"",t)};J_.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};J_.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};J_.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};J_.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Bue(t,e,r,n,o,s,c,l,u,d){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,o,s,c,l,u,d);for(var p in n){var m=n[p];if(Array.isArray(m)){if(p in J_.arrayKeywords)for(var h=0;h<m.length;h++)Bue(t,e,r,m[h],o+"/"+p+"/"+h,s,o,p,n,h)}else if(p in J_.propsKeywords){if(m&&typeof m=="object")for(var g in m)Bue(t,e,r,m[g],o+"/"+p+"/"+t5r(g),s,o,p,n,g)}else(p in J_.keywords||t.allKeys&&!(p in J_.skipKeywords))&&Bue(t,e,r,m,o+"/"+p,s,o,p,n)}r(n,o,s,c,l,u,d)}}a(Bue,"_traverse");function t5r(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}a(t5r,"escapeJsonPtr")});var Que=W((i7o,aEt)=>{"use strict";f();var JH=zxt(),iEt=Due(),Fue=g5(),Nue=M4e(),r5r=nEt();aEt.exports=Z_;Z_.normalizeId=X_;Z_.fullPath=Mue;Z_.url=Lue;Z_.ids=a5r;Z_.inlineRef=L4e;Z_.schema=Oue;function Z_(t,e,r){var n=this._refs[r];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return Z_.call(this,t,e,n);if(n=n||this._schemas[r],n instanceof Nue)return L4e(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var o=Oue.call(this,e,r),s,c,l;return o&&(s=o.schema,e=o.root,l=o.baseId),s instanceof Nue?c=s.validate||t.call(this,s.schema,e,void 0,l):s!==void 0&&(c=L4e(s,this._opts.inlineRefs)?s:t.call(this,s,e,void 0,l)),c}a(Z_,"resolve");function Oue(t,e){var r=JH.parse(e),n=sEt(r),o=Mue(this._getId(t.schema));if(Object.keys(t.schema).length===0||n!==o){var s=X_(n),c=this._refs[s];if(typeof c=="string")return n5r.call(this,t,c,r);if(c instanceof Nue)c.validate||this._compile(c),t=c;else if(c=this._schemas[s],c instanceof Nue){if(c.validate||this._compile(c),s==X_(e))return{schema:c,root:t,baseId:o};t=c}else return;if(!t.schema)return;o=Mue(this._getId(t.schema))}return oEt.call(this,r,o,t.schema,t)}a(Oue,"resolveSchema");function n5r(t,e,r){var n=Oue.call(this,t,e);if(n){var o=n.schema,s=n.baseId;t=n.root;var c=this._getId(o);return c&&(s=Lue(s,c)),oEt.call(this,r,s,o,t)}}a(n5r,"resolveRecursive");var i5r=Fue.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function oEt(t,e,r,n){if(t.fragment=t.fragment||"",t.fragment.slice(0,1)=="/"){for(var o=t.fragment.split("/"),s=1;s<o.length;s++){var c=o[s];if(c){if(c=Fue.unescapeFragment(c),r=r[c],r===void 0)break;var l;if(!i5r[c]&&(l=this._getId(r),l&&(e=Lue(e,l)),r.$ref)){var u=Lue(e,r.$ref),d=Oue.call(this,n,u);d&&(r=d.schema,n=d.root,e=d.baseId)}}}if(r!==void 0&&r!==n.schema)return{schema:r,root:n,baseId:e}}}a(oEt,"getJsonPointer");var o5r=Fue.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function L4e(t,e){if(e===!1)return!1;if(e===void 0||e===!0)return F4e(t);if(e)return O4e(t)<=e}a(L4e,"inlineRef");function F4e(t){var e;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(e=t[r],typeof e=="object"&&!F4e(e))return!1}else for(var n in t)if(n=="$ref"||(e=t[n],typeof e=="object"&&!F4e(e)))return!1;return!0}a(F4e,"checkNoRef");function O4e(t){var e=0,r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r=t[n],typeof r=="object"&&(e+=O4e(r)),e==1/0)return 1/0}else for(var o in t){if(o=="$ref")return 1/0;if(o5r[o])e++;else if(r=t[o],typeof r=="object"&&(e+=O4e(r)+1),e==1/0)return 1/0}return e}a(O4e,"countKeys");function Mue(t,e){e!==!1&&(t=X_(t));var r=JH.parse(t);return sEt(r)}a(Mue,"getFullPath");function sEt(t){return JH.serialize(t).split("#")[0]+"#"}a(sEt,"_getFullPath");var s5r=/#\/?$/;function X_(t){return t?t.replace(s5r,""):""}a(X_,"normalizeId");function Lue(t,e){return e=X_(e),JH.resolve(t,e)}a(Lue,"resolveUrl");function a5r(t){var e=X_(this._getId(t)),r={"":e},n={"":Mue(e,!1)},o={},s=this;return r5r(t,{allKeys:!0},function(c,l,u,d,p,m,h){if(l!==""){var g=s._getId(c),A=r[d],y=n[d]+"/"+p;if(h!==void 0&&(y+="/"+(typeof h=="number"?h:Fue.escapeFragment(h))),typeof g=="string"){g=A=X_(A?JH.resolve(A,g):g);var v=s._refs[g];if(typeof v=="string"&&(v=s._refs[v]),v&&v.schema){if(!iEt(c,v.schema))throw new Error('id "'+g+'" resolves to more than one schema')}else if(g!=X_(y))if(g[0]=="#"){if(o[g]&&!iEt(c,o[g]))throw new Error('id "'+g+'" resolves to more than one schema');o[g]=c}else s._refs[g]=y}r[l]=A,n[l]=y}}),o}a(a5r,"resolveIds")});var Uue=W((a7o,lEt)=>{"use strict";f();var Q4e=Que();lEt.exports={Validation:cEt(c5r),MissingRef:cEt(U4e)};function c5r(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}a(c5r,"ValidationError");U4e.message=function(t,e){return"can't resolve reference "+e+" from id "+t};function U4e(t,e,r){this.message=r||U4e.message(t,e),this.missingRef=Q4e.url(t,e),this.missingSchema=Q4e.normalizeId(Q4e.fullPath(this.missingRef))}a(U4e,"MissingRefError");function cEt(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}a(cEt,"errorSubclass")});var q4e=W((u7o,uEt)=>{"use strict";f();uEt.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(c){return function(l,u){var d={key:l,value:c[l]},p={key:u,value:c[u]};return s(d,p)}}}(e.cmp),o=[];return a(function s(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var l,u;if(Array.isArray(c)){for(u="[",l=0;l<c.length;l++)l&&(u+=","),u+=s(c[l])||"null";return u+"]"}if(c===null)return"null";if(o.indexOf(c)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var d=o.push(c)-1,p=Object.keys(c).sort(n&&n(c));for(u="",l=0;l<p.length;l++){var m=p[l],h=s(c[m]);h&&(u&&(u+=","),u+=JSON.stringify(m)+":"+h)}return o.splice(d,1),"{"+u+"}"}},"stringify")(t)}});var H4e=W((p7o,dEt)=>{"use strict";f();dEt.exports=a(function(e,r,n){var o="",s=e.schema.$async===!0,c=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),l=e.self._getId(e.schema);if(e.opts.strictKeywords){var u=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(u){var d="unknown keyword: "+u;if(e.opts.strictKeywords==="log")e.logger.warn(d);else throw new Error(d)}}if(e.isTop&&(o+=" var validate = ",s&&(e.async=!0,o+="async "),o+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",l&&(e.opts.sourceCode||e.opts.processCode)&&(o+=" "+("/*# sourceURL="+l+" */")+" ")),typeof e.schema=="boolean"||!(c||e.schema.$ref)){var r="false schema",p=e.level,m=e.dataLevel,h=e.schema[r],g=e.schemaPath+e.util.getProperty(r),A=e.errSchemaPath+"/"+r,N=!e.opts.allErrors,Y,y="data"+(m||""),k="valid"+p;if(e.schema===!1){e.isTop?N=!0:o+=" var "+k+" = false; ";var v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(Y||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(A)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'boolean schema is false' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&N?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?o+=" return data; ":o+=" validate.errors = null; return true; ":o+=" var "+k+" = true; ";return e.isTop&&(o+=" }; return validate; "),o}if(e.isTop){var I=e.isTop,p=e.level=0,m=e.dataLevel=0,y="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var _="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(_);else throw new Error(_)}o+=" var vErrors = null; ",o+=" var errors = 0;     ",o+=" if (rootData === undefined) rootData = data; "}else{var p=e.level,m=e.dataLevel,y="data"+(m||"");if(l&&(e.baseId=e.resolve.url(e.baseId,l)),s&&!e.async)throw new Error("async schema in sync schema");o+=" var errs_"+p+" = errors;"}var k="valid"+p,N=!e.opts.allErrors,F="",O="",Y,z=e.schema.type,V=Array.isArray(z);if(z&&e.opts.nullable&&e.schema.nullable===!0&&(V?z.indexOf("null")==-1&&(z=z.concat("null")):z!="null"&&(z=[z,"null"],V=!0)),V&&z.length==1&&(z=z[0],V=!1),e.schema.$ref&&c){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(c=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(o+=" "+e.RULES.all.$comment.code(e,"$comment")),z){if(e.opts.coerceTypes)var U=e.util.coerceToTypes(e.opts.coerceTypes,z);var H=e.RULES.types[z];if(U||V||H===!0||H&&!be(H)){var g=e.schemaPath+".type",A=e.errSchemaPath+"/type",g=e.schemaPath+".type",A=e.errSchemaPath+"/type",ee=V?"checkDataTypes":"checkDataType";if(o+=" if ("+e.util[ee](z,y,e.opts.strictNumbers,!0)+") { ",U){var J="dataType"+p,G="coerced"+p;o+=" var "+J+" = typeof "+y+"; var "+G+" = undefined; ",e.opts.coerceTypes=="array"&&(o+=" if ("+J+" == 'object' && Array.isArray("+y+") && "+y+".length == 1) { "+y+" = "+y+"[0]; "+J+" = typeof "+y+"; if ("+e.util.checkDataType(e.schema.type,y,e.opts.strictNumbers)+") "+G+" = "+y+"; } "),o+=" if ("+G+" !== undefined) ; ";var j=U;if(j)for(var Z,ie=-1,ne=j.length-1;ie<ne;)Z=j[ie+=1],Z=="string"?o+=" else if ("+J+" == 'number' || "+J+" == 'boolean') "+G+" = '' + "+y+"; else if ("+y+" === null) "+G+" = ''; ":Z=="number"||Z=="integer"?(o+=" else if ("+J+" == 'boolean' || "+y+" === null || ("+J+" == 'string' && "+y+" && "+y+" == +"+y+" ",Z=="integer"&&(o+=" && !("+y+" % 1)"),o+=")) "+G+" = +"+y+"; "):Z=="boolean"?o+=" else if ("+y+" === 'false' || "+y+" === 0 || "+y+" === null) "+G+" = false; else if ("+y+" === 'true' || "+y+" === 1) "+G+" = true; ":Z=="null"?o+=" else if ("+y+" === '' || "+y+" === 0 || "+y+" === false) "+G+" = null; ":e.opts.coerceTypes=="array"&&Z=="array"&&(o+=" else if ("+J+" == 'string' || "+J+" == 'number' || "+J+" == 'boolean' || "+y+" == null) "+G+" = ["+y+"]; ");o+=" else {   ";var v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(A)+" , params: { type: '",V?o+=""+z.join(","):o+=""+z,o+="' } ",e.opts.messages!==!1&&(o+=" , message: 'should be ",V?o+=""+z.join(","):o+=""+z,o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&N?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } if ("+G+" !== undefined) {  ";var re=m?"data"+(m-1||""):"parentData",fe=m?e.dataPathArr[m]:"parentDataProperty";o+=" "+y+" = "+G+"; ",m||(o+="if ("+re+" !== undefined)"),o+=" "+re+"["+fe+"] = "+G+"; } "}else{var v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(A)+" , params: { type: '",V?o+=""+z.join(","):o+=""+z,o+="' } ",e.opts.messages!==!1&&(o+=" , message: 'should be ",V?o+=""+z.join(","):o+=""+z,o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&N?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}o+=" } "}}if(e.schema.$ref&&!c)o+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",N&&(o+=" } if (errors === ",I?o+="0":o+="errs_"+p,o+=") { ",O+="}");else{var ye=e.RULES;if(ye){for(var H,Qe=-1,we=ye.length-1;Qe<we;)if(H=ye[Qe+=1],be(H)){if(H.type&&(o+=" if ("+e.util.checkDataType(H.type,y,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(H.type=="object"&&e.schema.properties){var h=e.schema.properties,Xe=Object.keys(h),Oe=Xe;if(Oe)for(var ut,Rt=-1,Et=Oe.length-1;Rt<Et;){ut=Oe[Rt+=1];var At=h[ut];if(At.default!==void 0){var de=y+e.util.getProperty(ut);if(e.compositeRule){if(e.opts.strictDefaults){var _="default is ignored for: "+de;if(e.opts.strictDefaults==="log")e.logger.warn(_);else throw new Error(_)}}else o+=" if ("+de+" === undefined ",e.opts.useDefaults=="empty"&&(o+=" || "+de+" === null || "+de+" === '' "),o+=" ) "+de+" = ",e.opts.useDefaults=="shared"?o+=" "+e.useDefault(At.default)+" ":o+=" "+JSON.stringify(At.default)+" ",o+="; "}}}else if(H.type=="array"&&Array.isArray(e.schema.items)){var qe=e.schema.items;if(qe){for(var At,ie=-1,Ce=qe.length-1;ie<Ce;)if(At=qe[ie+=1],At.default!==void 0){var de=y+"["+ie+"]";if(e.compositeRule){if(e.opts.strictDefaults){var _="default is ignored for: "+de;if(e.opts.strictDefaults==="log")e.logger.warn(_);else throw new Error(_)}}else o+=" if ("+de+" === undefined ",e.opts.useDefaults=="empty"&&(o+=" || "+de+" === null || "+de+" === '' "),o+=" ) "+de+" = ",e.opts.useDefaults=="shared"?o+=" "+e.useDefault(At.default)+" ":o+=" "+JSON.stringify(At.default)+" ",o+="; "}}}}var $e=H.rules;if($e){for(var ce,ue=-1,He=$e.length-1;ue<He;)if(ce=$e[ue+=1],Ge(ce)){var Me=ce.code(e,ce.keyword,H.type);Me&&(o+=" "+Me+" ",N&&(F+="}"))}}if(N&&(o+=" "+F+" ",F=""),H.type&&(o+=" } ",z&&z===H.type&&!U)){o+=" else { ";var g=e.schemaPath+".type",A=e.errSchemaPath+"/type",v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(A)+" , params: { type: '",V?o+=""+z.join(","):o+=""+z,o+="' } ",e.opts.messages!==!1&&(o+=" , message: 'should be ",V?o+=""+z.join(","):o+=""+z,o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&N?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } "}N&&(o+=" if (errors === ",I?o+="0":o+="errs_"+p,o+=") { ",O+="}")}}}N&&(o+=" "+O+" "),I?(s?(o+=" if (errors === 0) return data;           ",o+=" else throw new ValidationError(vErrors); "):(o+=" validate.errors = vErrors; ",o+=" return errors === 0;       "),o+=" }; return validate;"):o+=" var "+k+" = errors === errs_"+p+";";function be(ht){for(var Ot=ht.rules,Zt=0;Zt<Ot.length;Zt++)if(Ge(Ot[Zt]))return!0}a(be,"$shouldUseGroup");function Ge(ht){return e.schema[ht.keyword]!==void 0||ht.implements&&rt(ht)}a(Ge,"$shouldUseRule");function rt(ht){for(var Ot=ht.implements,Zt=0;Zt<Ot.length;Zt++)if(e.schema[Ot[Zt]]!==void 0)return!0}return a(rt,"$ruleImplementsSomeKeyword"),o},"generate_validate")});var gEt=W((g7o,hEt)=>{"use strict";f();var que=Que(),Wue=g5(),pEt=Uue(),l5r=q4e(),fEt=H4e(),u5r=Wue.ucs2length,d5r=Due(),f5r=pEt.Validation;hEt.exports=W4e;function W4e(t,e,r,n){var o=this,s=this._opts,c=[void 0],l={},u=[],d={},p=[],m={},h=[];e=e||{schema:t,refVal:c,refs:l};var g=p5r.call(this,t,e,n),A=this._compilations[g.index];if(g.compiling)return A.callValidate=_;var y=this._formats,v=this.RULES;try{var b=k(t,e,r,n);A.validate=b;var I=A.callValidate;return I&&(I.schema=b.schema,I.errors=null,I.refs=b.refs,I.refVal=b.refVal,I.root=b.root,I.$async=b.$async,s.sourceCode&&(I.source=b.source)),b}finally{m5r.call(this,t,e,n)}function _(){var ee=A.validate,J=ee.apply(this,arguments);return _.errors=ee.errors,J}a(_,"callValidate");function k(ee,J,G,j){var Z=!J||J&&J.schema==ee;if(J.schema!=e.schema)return W4e.call(o,ee,J,G,j);var ie=ee.$async===!0,ne=fEt({isTop:!0,schema:ee,isRoot:Z,baseId:j,root:J,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:pEt.MissingRef,RULES:v,validate:fEt,util:Wue,resolve:que,resolveRef:N,usePattern:V,useDefault:U,useCustomRule:H,opts:s,formats:y,logger:o.logger,self:o});ne=Hue(c,A5r)+Hue(u,h5r)+Hue(p,g5r)+Hue(h,y5r)+ne,s.processCode&&(ne=s.processCode(ne,ee));var re;try{var fe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ne);re=fe(o,v,y,e,c,p,h,d5r,u5r,f5r),c[0]=re}catch(ye){throw o.logger.error("Error compiling schema, function code:",ne),ye}return re.schema=ee,re.errors=null,re.refs=l,re.refVal=c,re.root=Z?re:J,ie&&(re.$async=!0),s.sourceCode===!0&&(re.source={code:ne,patterns:u,defaults:p}),re}a(k,"localCompile");function N(ee,J,G){J=que.url(ee,J);var j=l[J],Z,ie;if(j!==void 0)return Z=c[j],ie="refVal["+j+"]",z(Z,ie);if(!G&&e.refs){var ne=e.refs[J];if(ne!==void 0)return Z=e.refVal[ne],ie=F(J,Z),z(Z,ie)}ie=F(J);var re=que.call(o,k,e,J);if(re===void 0){var fe=r&&r[J];fe&&(re=que.inlineRef(fe,s.inlineRefs)?fe:W4e.call(o,fe,e,r,ee))}if(re===void 0)O(J);else return Y(J,re),z(re,ie)}a(N,"resolveRef");function F(ee,J){var G=c.length;return c[G]=J,l[ee]=G,"refVal"+G}a(F,"addLocalRef");function O(ee){delete l[ee]}a(O,"removeLocalRef");function Y(ee,J){var G=l[ee];c[G]=J}a(Y,"replaceLocalRef");function z(ee,J){return typeof ee=="object"||typeof ee=="boolean"?{code:J,schema:ee,inline:!0}:{code:J,$async:ee&&!!ee.$async}}a(z,"resolvedRef");function V(ee){var J=d[ee];return J===void 0&&(J=d[ee]=u.length,u[J]=ee),"pattern"+J}a(V,"usePattern");function U(ee){switch(typeof ee){case"boolean":case"number":return""+ee;case"string":return Wue.toQuotedString(ee);case"object":if(ee===null)return"null";var J=l5r(ee),G=m[J];return G===void 0&&(G=m[J]=p.length,p[G]=ee),"default"+G}}a(U,"useDefault");function H(ee,J,G,j){if(o._opts.validateSchema!==!1){var Z=ee.definition.dependencies;if(Z&&!Z.every(function(Oe){return Object.prototype.hasOwnProperty.call(G,Oe)}))throw new Error("parent schema must have all required keywords: "+Z.join(","));var ie=ee.definition.validateSchema;if(ie){var ne=ie(J);if(!ne){var re="keyword schema is invalid: "+o.errorsText(ie.errors);if(o._opts.validateSchema=="log")o.logger.error(re);else throw new Error(re)}}}var fe=ee.definition.compile,ye=ee.definition.inline,Qe=ee.definition.macro,we;if(fe)we=fe.call(o,J,G,j);else if(Qe)we=Qe.call(o,J,G,j),s.validateSchema!==!1&&o.validateSchema(we,!0);else if(ye)we=ye.call(o,j,ee.keyword,J,G);else if(we=ee.definition.validate,!we)return;if(we===void 0)throw new Error('custom keyword "'+ee.keyword+'"failed to compile');var Xe=h.length;return h[Xe]=we,{code:"customRule"+Xe,validate:we}}a(H,"useCustomRule")}a(W4e,"compile");function p5r(t,e,r){var n=mEt.call(this,t,e,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:r},{index:n,compiling:!1})}a(p5r,"checkCompiling");function m5r(t,e,r){var n=mEt.call(this,t,e,r);n>=0&&this._compilations.splice(n,1)}a(m5r,"endCompiling");function mEt(t,e,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==t&&o.root==e&&o.baseId==r)return n}return-1}a(mEt,"compIndex");function h5r(t,e){return"var pattern"+t+" = new RegExp("+Wue.toQuotedString(e[t])+");"}a(h5r,"patternCode");function g5r(t){return"var default"+t+" = defaults["+t+"];"}a(g5r,"defaultCode");function A5r(t,e){return e[t]===void 0?"":"var refVal"+t+" = refVal["+t+"];"}a(A5r,"refValCode");function y5r(t){return"var customRule"+t+" = customRules["+t+"];"}a(y5r,"customRuleCode");function Hue(t,e){if(!t.length)return"";for(var r="",n=0;n<t.length;n++)r+=e(n,t);return r}a(Hue,"vars")});var yEt=W((C7o,AEt)=>{"use strict";f();var $ue=AEt.exports=a(function(){this._cache={}},"Cache");$ue.prototype.put=a(function(e,r){this._cache[e]=r},"Cache_put");$ue.prototype.get=a(function(e){return this._cache[e]},"Cache_get");$ue.prototype.del=a(function(e){delete this._cache[e]},"Cache_del");$ue.prototype.clear=a(function(){this._cache={}},"Cache_clear")});var kEt=W((E7o,REt)=>{"use strict";f();var C5r=g5(),v5r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,x5r=[0,31,28,31,30,31,30,31,31,30,31,30,31],E5r=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,CEt=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,b5r=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,I5r=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,vEt=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,xEt=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,EEt=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,bEt=/^(?:\/(?:[^~/]|~0|~1)*)*$/,IEt=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,TEt=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;REt.exports=jue;function jue(t){return t=t=="full"?"full":"fast",C5r.copy(jue[t])}a(jue,"formats");jue.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":vEt,url:xEt,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:CEt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:SEt,uuid:EEt,"json-pointer":bEt,"json-pointer-uri-fragment":IEt,"relative-json-pointer":TEt};jue.full={date:wEt,time:_Et,"date-time":_5r,uri:R5r,"uri-reference":I5r,"uri-template":vEt,url:xEt,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:CEt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:SEt,uuid:EEt,"json-pointer":bEt,"json-pointer-uri-fragment":IEt,"relative-json-pointer":TEt};function T5r(t){return t%4===0&&(t%100!==0||t%400===0)}a(T5r,"isLeapYear");function wEt(t){var e=t.match(v5r);if(!e)return!1;var r=+e[1],n=+e[2],o=+e[3];return n>=1&&n<=12&&o>=1&&o<=(n==2&&T5r(r)?29:x5r[n])}a(wEt,"date");function _Et(t,e){var r=t.match(E5r);if(!r)return!1;var n=r[1],o=r[2],s=r[3],c=r[5];return(n<=23&&o<=59&&s<=59||n==23&&o==59&&s==60)&&(!e||c)}a(_Et,"time");var w5r=/t|\s/i;function _5r(t){var e=t.split(w5r);return e.length==2&&wEt(e[0])&&_Et(e[1],!0)}a(_5r,"date_time");var S5r=/\/|:/;function R5r(t){return S5r.test(t)&&b5r.test(t)}a(R5r,"uri");var k5r=/[^\\]\\Z/;function SEt(t){if(k5r.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}a(SEt,"regex")});var DEt=W((T7o,PEt)=>{"use strict";f();PEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(c||""),m="valid"+s,h,g;if(l=="#"||l=="#/")e.isRoot?(h=e.async,g="validate"):(h=e.root.schema.$async===!0,g="root.refVal[0]");else{var A=e.resolveRef(e.baseId,l,e.isRoot);if(A===void 0){var y=e.MissingRefError.message(e.baseId,l);if(e.opts.missingRefs=="fail"){e.logger.error(y);var v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",e.opts.messages!==!1&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(o+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(y),d&&(o+=" if (true) { ");else throw new e.MissingRefError(e.baseId,l,y)}else if(A.inline){var I=e.util.copy(e);I.level++;var _="valid"+I.level;I.schema=A.schema,I.schemaPath="",I.errSchemaPath=l;var k=e.validate(I).replace(/validate\.schema/g,A.code);o+=" "+k+" ",d&&(o+=" if ("+_+") { ")}else h=A.$async===!0||e.async&&A.$async!==!1,g=A.code}if(g){var v=v||[];v.push(o),o="",e.opts.passContext?o+=" "+g+".call(this, ":o+=" "+g+"( ",o+=" "+p+", (dataPath || '')",e.errorPath!='""'&&(o+=" + "+e.errorPath);var N=c?"data"+(c-1||""):"parentData",F=c?e.dataPathArr[c]:"parentDataProperty";o+=" , "+N+" , "+F+", rootData)  ";var O=o;if(o=v.pop(),h){if(!e.async)throw new Error("async schema referenced by sync schema");d&&(o+=" var "+m+"; "),o+=" try { await "+O+"; ",d&&(o+=" "+m+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(o+=" "+m+" = false; "),o+=" } ",d&&(o+=" if ("+m+") { ")}else o+=" if (!"+O+") { if (vErrors === null) vErrors = "+g+".errors; else vErrors = vErrors.concat("+g+".errors); errors = vErrors.length; } ",d&&(o+=" else { ")}return o},"generate_ref")});var NEt=W((S7o,BEt)=>{"use strict";f();BEt.exports=a(function(e,r,n){var o=" ",s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level,h=d.baseId,g=!0,A=s;if(A)for(var y,v=-1,b=A.length-1;v<b;)y=A[v+=1],(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all))&&(g=!1,d.schema=y,d.schemaPath=c+"["+v+"]",d.errSchemaPath=l+"/"+v,o+="  "+e.validate(d)+" ",d.baseId=h,u&&(o+=" if ("+m+") { ",p+="}"));return u&&(g?o+=" if (true) { ":o+=" "+p.slice(0,-1)+" "),o},"generate_allOf")});var LEt=W((P7o,MEt)=>{"use strict";f();MEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e),y="";A.level++;var v="valid"+A.level,b=l.every(function(Y){return e.opts.strictKeywords?typeof Y=="object"&&Object.keys(Y).length>0||Y===!1:e.util.schemaHasRules(Y,e.RULES.all)});if(b){var I=A.baseId;o+=" var "+g+" = errors; var "+h+" = false;  ";var _=e.compositeRule;e.compositeRule=A.compositeRule=!0;var k=l;if(k)for(var N,F=-1,O=k.length-1;F<O;)N=k[F+=1],A.schema=N,A.schemaPath=u+"["+F+"]",A.errSchemaPath=d+"/"+F,o+="  "+e.validate(A)+" ",A.baseId=I,o+=" "+h+" = "+h+" || "+v+"; if (!"+h+") { ",y+="}";e.compositeRule=A.compositeRule=_,o+=" "+y+" if (!"+h+") {   var err =   ",e.createErrors!==!1?(o+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+=" } else {  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; } ",e.opts.allErrors&&(o+=" } ")}else p&&(o+=" if (true) { ");return o},"generate_anyOf")});var OEt=W((N7o,FEt)=>{"use strict";f();FEt.exports=a(function(e,r,n){var o=" ",s=e.schema[r],c=e.errSchemaPath+"/"+r,l=!e.opts.allErrors,u=e.util.toQuotedString(s);return e.opts.$comment===!0?o+=" console.log("+u+");":typeof e.opts.$comment=="function"&&(o+=" self._opts.$comment("+u+", "+e.util.toQuotedString(c)+", validate.root.schema);"),o},"generate_comment")});var UEt=W((F7o,QEt)=>{"use strict";f();QEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g=e.opts.$data&&l&&l.$data,A;g?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",A="schema"+s):A=l,g||(o+=" var schema"+s+" = validate.schema"+u+";"),o+="var "+h+" = equal("+m+", schema"+s+"); if (!"+h+") {   ";var y=y||[];y.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(o+=" , message: 'should be equal to constant' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var v=o;return o=y.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" }",p&&(o+=" else { "),o},"generate_const")});var HEt=W((U7o,qEt)=>{"use strict";f();qEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e),y="";A.level++;var v="valid"+A.level,b="i"+s,I=A.dataLevel=e.dataLevel+1,_="data"+I,k=e.baseId,N=e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all);if(o+="var "+g+" = errors;var "+h+";",N){var F=e.compositeRule;e.compositeRule=A.compositeRule=!0,A.schema=l,A.schemaPath=u,A.errSchemaPath=d,o+=" var "+v+" = false; for (var "+b+" = 0; "+b+" < "+m+".length; "+b+"++) { ",A.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0);var O=m+"["+b+"]";A.dataPathArr[I]=b;var Y=e.validate(A);A.baseId=k,e.util.varOccurences(Y,_)<2?o+=" "+e.util.varReplace(Y,_,O)+" ":o+=" var "+_+" = "+O+"; "+Y+" ",o+=" if ("+v+") break; }  ",e.compositeRule=A.compositeRule=F,o+=" "+y+" if (!"+v+") {"}else o+=" if ("+m+".length == 0) {";var z=z||[];z.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'should contain a valid item' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var V=o;return o=z.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+V+"]); ":o+=" validate.errors = ["+V+"]; return false; ":o+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { ",N&&(o+="  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; } "),e.opts.allErrors&&(o+=" } "),o},"generate_contains")});var $Et=W((W7o,WEt)=>{"use strict";f();WEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="errs__"+s,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,v={},b={},I=e.opts.ownProperties;for(F in l)if(F!="__proto__"){var _=l[F],k=Array.isArray(_)?b:v;k[F]=_}o+="var "+h+" = errors;";var N=e.errorPath;o+="var missing"+s+";";for(var F in b)if(k=b[F],k.length){if(o+=" if ( "+m+e.util.getProperty(F)+" !== undefined ",I&&(o+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),p){o+=" && ( ";var O=k;if(O)for(var Y,z=-1,V=O.length-1;z<V;){Y=O[z+=1],z&&(o+=" || ");var U=e.util.getProperty(Y),H=m+U;o+=" ( ( "+H+" === undefined ",I&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(Y)+"') "),o+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?Y:U)+") ) "}o+=")) {  ";var ee="missing"+s,J="' + "+ee+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(N,ee,!0):N+" + "+ee);var G=G||[];G.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(F)+"', missingProperty: '"+J+"', depsCount: "+k.length+", deps: '"+e.util.escapeQuotes(k.length==1?k[0]:k.join(", "))+"' } ",e.opts.messages!==!1&&(o+=" , message: 'should have ",k.length==1?o+="property "+e.util.escapeQuotes(k[0]):o+="properties "+e.util.escapeQuotes(k.join(", ")),o+=" when property "+e.util.escapeQuotes(F)+" is present' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var j=o;o=G.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+j+"]); ":o+=" validate.errors = ["+j+"]; return false; ":o+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{o+=" ) { ";var Z=k;if(Z)for(var Y,ie=-1,ne=Z.length-1;ie<ne;){Y=Z[ie+=1];var U=e.util.getProperty(Y),J=e.util.escapeQuotes(Y),H=m+U;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(N,Y,e.opts.jsonPointers)),o+=" if ( "+H+" === undefined ",I&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(Y)+"') "),o+=") {  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(F)+"', missingProperty: '"+J+"', depsCount: "+k.length+", deps: '"+e.util.escapeQuotes(k.length==1?k[0]:k.join(", "))+"' } ",e.opts.messages!==!1&&(o+=" , message: 'should have ",k.length==1?o+="property "+e.util.escapeQuotes(k[0]):o+="properties "+e.util.escapeQuotes(k.join(", ")),o+=" when property "+e.util.escapeQuotes(F)+" is present' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}o+=" }   ",p&&(A+="}",o+=" else { ")}e.errorPath=N;var re=g.baseId;for(var F in v){var _=v[F];(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))&&(o+=" "+y+" = true; if ( "+m+e.util.getProperty(F)+" !== undefined ",I&&(o+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),o+=") { ",g.schema=_,g.schemaPath=u+e.util.getProperty(F),g.errSchemaPath=d+"/"+e.util.escapeFragment(F),o+="  "+e.validate(g)+" ",g.baseId=re,o+=" }  ",p&&(o+=" if ("+y+") { ",A+="}"))}return p&&(o+="   "+A+" if ("+h+" == errors) {"),o},"generate_dependencies")});var GEt=W((G7o,jEt)=>{"use strict";f();jEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g=e.opts.$data&&l&&l.$data,A;g?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",A="schema"+s):A=l;var y="i"+s,v="schema"+s;g||(o+=" var "+v+" = validate.schema"+u+";"),o+="var "+h+";",g&&(o+=" if (schema"+s+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+s+")) "+h+" = false; else {"),o+=""+h+" = false;for (var "+y+"=0; "+y+"<"+v+".length; "+y+"++) if (equal("+m+", "+v+"["+y+"])) { "+h+" = true; break; }",g&&(o+="  }  "),o+=" if (!"+h+") {   ";var b=b||[];b.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(o+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var I=o;return o=b.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+I+"]); ":o+=" validate.errors = ["+I+"]; return false; ":o+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" }",p&&(o+=" else { "),o},"generate_enum")});var zEt=W((K7o,VEt)=>{"use strict";f();VEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||"");if(e.opts.format===!1)return p&&(o+=" if (true) { "),o;var h=e.opts.$data&&l&&l.$data,g;h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l;var A=e.opts.unknownFormats,y=Array.isArray(A);if(h){var v="format"+s,b="isObject"+s,I="formatType"+s;o+=" var "+v+" = formats["+g+"]; var "+b+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+I+" = "+b+" && "+v+".type || 'string'; if ("+b+") { ",e.async&&(o+=" var async"+s+" = "+v+".async; "),o+=" "+v+" = "+v+".validate; } if (  ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'string') || "),o+=" (",A!="ignore"&&(o+=" ("+g+" && !"+v+" ",y&&(o+=" && self._opts.unknownFormats.indexOf("+g+") == -1 "),o+=") || "),o+=" ("+v+" && "+I+" == '"+n+"' && !(typeof "+v+" == 'function' ? ",e.async?o+=" (async"+s+" ? await "+v+"("+m+") : "+v+"("+m+")) ":o+=" "+v+"("+m+") ",o+=" : "+v+".test("+m+"))))) {"}else{var v=e.formats[l];if(!v){if(A=="ignore")return e.logger.warn('unknown format "'+l+'" ignored in schema at path "'+e.errSchemaPath+'"'),p&&(o+=" if (true) { "),o;if(y&&A.indexOf(l)>=0)return p&&(o+=" if (true) { "),o;throw new Error('unknown format "'+l+'" is used in schema at path "'+e.errSchemaPath+'"')}var b=typeof v=="object"&&!(v instanceof RegExp)&&v.validate,I=b&&v.type||"string";if(b){var _=v.async===!0;v=v.validate}if(I!=n)return p&&(o+=" if (true) { "),o;if(_){if(!e.async)throw new Error("async format in sync schema");var k="formats"+e.util.getProperty(l)+".validate";o+=" if (!(await "+k+"("+m+"))) { "}else{o+=" if (! ";var k="formats"+e.util.getProperty(l);b&&(k+=".validate"),typeof v=="function"?o+=" "+k+"("+m+") ":o+=" "+k+".test("+m+") ",o+=") { "}}var N=N||[];N.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { format:  ",h?o+=""+g:o+=""+e.util.toQuotedString(l),o+="  } ",e.opts.messages!==!1&&(o+=` , message: 'should match format "`,h?o+="' + "+g+" + '":o+=""+e.util.escapeQuotes(l),o+=`"' `),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+e.util.toQuotedString(l),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var F=o;return o=N.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+F+"]); ":o+=" validate.errors = ["+F+"]; return false; ":o+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { "),o},"generate_format")});var YEt=W((X7o,KEt)=>{"use strict";f();KEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e);A.level++;var y="valid"+A.level,v=e.schema.then,b=e.schema.else,I=v!==void 0&&(e.opts.strictKeywords?typeof v=="object"&&Object.keys(v).length>0||v===!1:e.util.schemaHasRules(v,e.RULES.all)),_=b!==void 0&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all)),k=A.baseId;if(I||_){var N;A.createErrors=!1,A.schema=l,A.schemaPath=u,A.errSchemaPath=d,o+=" var "+g+" = errors; var "+h+" = true;  ";var F=e.compositeRule;e.compositeRule=A.compositeRule=!0,o+="  "+e.validate(A)+" ",A.baseId=k,A.createErrors=!0,o+="  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; }  ",e.compositeRule=A.compositeRule=F,I?(o+=" if ("+y+") {  ",A.schema=e.schema.then,A.schemaPath=e.schemaPath+".then",A.errSchemaPath=e.errSchemaPath+"/then",o+="  "+e.validate(A)+" ",A.baseId=k,o+=" "+h+" = "+y+"; ",I&&_?(N="ifClause"+s,o+=" var "+N+" = 'then'; "):N="'then'",o+=" } ",_&&(o+=" else { ")):o+=" if (!"+y+") { ",_&&(A.schema=e.schema.else,A.schemaPath=e.schemaPath+".else",A.errSchemaPath=e.errSchemaPath+"/else",o+="  "+e.validate(A)+" ",A.baseId=k,o+=" "+h+" = "+y+"; ",I&&_?(N="ifClause"+s,o+=" var "+N+" = 'else'; "):N="'else'",o+=" } "),o+=" if (!"+h+") {   var err =   ",e.createErrors!==!1?(o+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { failingKeyword: "+N+" } ",e.opts.messages!==!1&&(o+=` , message: 'should match "' + `+N+` + '" schema' `),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+=" }   ",p&&(o+=" else { ")}else p&&(o+=" if (true) { ");return o},"generate_if")});var XEt=W((tQo,JEt)=>{"use strict";f();JEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e),y="";A.level++;var v="valid"+A.level,b="i"+s,I=A.dataLevel=e.dataLevel+1,_="data"+I,k=e.baseId;if(o+="var "+g+" = errors;var "+h+";",Array.isArray(l)){var N=e.schema.additionalItems;if(N===!1){o+=" "+h+" = "+m+".length <= "+l.length+"; ";var F=d;d=e.errSchemaPath+"/additionalItems",o+="  if (!"+h+") {   ";var O=O||[];O.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+l.length+" } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT have more than "+l.length+" items' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var Y=o;o=O.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+Y+"]); ":o+=" validate.errors = ["+Y+"]; return false; ":o+=" var err = "+Y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",d=F,p&&(y+="}",o+=" else { ")}var z=l;if(z){for(var V,U=-1,H=z.length-1;U<H;)if(V=z[U+=1],e.opts.strictKeywords?typeof V=="object"&&Object.keys(V).length>0||V===!1:e.util.schemaHasRules(V,e.RULES.all)){o+=" "+v+" = true; if ("+m+".length > "+U+") { ";var ee=m+"["+U+"]";A.schema=V,A.schemaPath=u+"["+U+"]",A.errSchemaPath=d+"/"+U,A.errorPath=e.util.getPathExpr(e.errorPath,U,e.opts.jsonPointers,!0),A.dataPathArr[I]=U;var J=e.validate(A);A.baseId=k,e.util.varOccurences(J,_)<2?o+=" "+e.util.varReplace(J,_,ee)+" ":o+=" var "+_+" = "+ee+"; "+J+" ",o+=" }  ",p&&(o+=" if ("+v+") { ",y+="}")}}if(typeof N=="object"&&(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))){A.schema=N,A.schemaPath=e.schemaPath+".additionalItems",A.errSchemaPath=e.errSchemaPath+"/additionalItems",o+=" "+v+" = true; if ("+m+".length > "+l.length+") {  for (var "+b+" = "+l.length+"; "+b+" < "+m+".length; "+b+"++) { ",A.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0);var ee=m+"["+b+"]";A.dataPathArr[I]=b;var J=e.validate(A);A.baseId=k,e.util.varOccurences(J,_)<2?o+=" "+e.util.varReplace(J,_,ee)+" ":o+=" var "+_+" = "+ee+"; "+J+" ",p&&(o+=" if (!"+v+") break; "),o+=" } }  ",p&&(o+=" if ("+v+") { ",y+="}")}}else if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){A.schema=l,A.schemaPath=u,A.errSchemaPath=d,o+="  for (var "+b+" = 0; "+b+" < "+m+".length; "+b+"++) { ",A.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0);var ee=m+"["+b+"]";A.dataPathArr[I]=b;var J=e.validate(A);A.baseId=k,e.util.varOccurences(J,_)<2?o+=" "+e.util.varReplace(J,_,ee)+" ":o+=" var "+_+" = "+ee+"; "+J+" ",p&&(o+=" if (!"+v+") break; "),o+=" }"}return p&&(o+=" "+y+" if ("+g+" == errors) {"),o},"generate_items")});var $4e=W((iQo,ZEt)=>{"use strict";f();ZEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,k,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l;var A=r=="maximum",y=A?"exclusiveMaximum":"exclusiveMinimum",v=e.schema[y],b=e.opts.$data&&v&&v.$data,I=A?"<":">",_=A?">":"<",k=void 0;if(!(h||typeof l=="number"||l===void 0))throw new Error(r+" must be number");if(!(b||v===void 0||typeof v=="number"||typeof v=="boolean"))throw new Error(y+" must be number or boolean");if(b){var N=e.util.getData(v.$data,c,e.dataPathArr),F="exclusive"+s,O="exclType"+s,Y="exclIsNumber"+s,z="op"+s,V="' + "+z+" + '";o+=" var schemaExcl"+s+" = "+N+"; ",N="schemaExcl"+s,o+=" var "+F+"; var "+O+" = typeof "+N+"; if ("+O+" != 'boolean' && "+O+" != 'undefined' && "+O+" != 'number') { ";var k=y,U=U||[];U.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(k||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: '"+y+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var H=o;o=U.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+H+"]); ":o+=" validate.errors = ["+H+"]; return false; ":o+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" "+O+" == 'number' ? ( ("+F+" = "+g+" === undefined || "+N+" "+I+"= "+g+") ? "+m+" "+_+"= "+N+" : "+m+" "+_+" "+g+" ) : ( ("+F+" = "+N+" === true) ? "+m+" "+_+"= "+g+" : "+m+" "+_+" "+g+" ) || "+m+" !== "+m+") { var op"+s+" = "+F+" ? '"+I+"' : '"+I+"='; ",l===void 0&&(k=y,d=e.errSchemaPath+"/"+y,g=N,h=b)}else{var Y=typeof v=="number",V=I;if(Y&&h){var z="'"+V+"'";o+=" if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" ( "+g+" === undefined || "+v+" "+I+"= "+g+" ? "+m+" "+_+"= "+v+" : "+m+" "+_+" "+g+" ) || "+m+" !== "+m+") { "}else{Y&&l===void 0?(F=!0,k=y,d=e.errSchemaPath+"/"+y,g=v,_+="="):(Y&&(g=Math[A?"min":"max"](v,l)),v===(Y?g:!0)?(F=!0,k=y,d=e.errSchemaPath+"/"+y,_+="="):(F=!1,V+="="));var z="'"+V+"'";o+=" if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" "+m+" "+_+" "+g+" || "+m+" !== "+m+") { "}}k=k||r;var U=U||[];U.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(k||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { comparison: "+z+", limit: "+g+", exclusive: "+F+" } ",e.opts.messages!==!1&&(o+=" , message: 'should be "+V+" ",h?o+="' + "+g:o+=""+g+"'"),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var H=o;return o=U.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+H+"]); ":o+=" validate.errors = ["+H+"]; return false; ":o+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { "),o},"generate__limit")});var j4e=W((aQo,ebt)=>{"use strict";f();ebt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,y,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;if(h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l,!(h||typeof l=="number"))throw new Error(r+" must be number");var A=r=="maxItems"?">":"<";o+="if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" "+m+".length "+A+" "+g+") { ";var y=r,v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(y||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+g+" } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT have ",r=="maxItems"?o+="more":o+="fewer",o+=" than ",h?o+="' + "+g+" + '":o+=""+l,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var b=o;return o=v.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate__limitItems")});var G4e=W((uQo,tbt)=>{"use strict";f();tbt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,y,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;if(h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l,!(h||typeof l=="number"))throw new Error(r+" must be number");var A=r=="maxLength"?">":"<";o+="if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),e.opts.unicode===!1?o+=" "+m+".length ":o+=" ucs2length("+m+") ",o+=" "+A+" "+g+") { ";var y=r,v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(y||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+g+" } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT be ",r=="maxLength"?o+="longer":o+="shorter",o+=" than ",h?o+="' + "+g+" + '":o+=""+l,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var b=o;return o=v.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate__limitLength")});var V4e=W((pQo,rbt)=>{"use strict";f();rbt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,y,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;if(h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l,!(h||typeof l=="number"))throw new Error(r+" must be number");var A=r=="maxProperties"?">":"<";o+="if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" Object.keys("+m+").length "+A+" "+g+") { ";var y=r,v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(y||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+g+" } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT have ",r=="maxProperties"?o+="more":o+="fewer",o+=" than ",h?o+="' + "+g+" + '":o+=""+l,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var b=o;return o=v.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate__limitProperties")});var ibt=W((gQo,nbt)=>{"use strict";f();nbt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;if(h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l,!(h||typeof l=="number"))throw new Error(r+" must be number");o+="var division"+s+";if (",h&&(o+=" "+g+" !== undefined && ( typeof "+g+" != 'number' || "),o+=" (division"+s+" = "+m+" / "+g+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+s+" !== parseInt(division"+s+") ",o+=" ) ",h&&(o+="  )  "),o+=" ) {   ";var A=A||[];A.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { multipleOf: "+g+" } ",e.opts.messages!==!1&&(o+=" , message: 'should be multiple of ",h?o+="' + "+g:o+=""+g+"'"),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var y=o;return o=A.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+y+"]); ":o+=" validate.errors = ["+y+"]; return false; ":o+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate_multipleOf")});var sbt=W((CQo,obt)=>{"use strict";f();obt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="errs__"+s,g=e.util.copy(e);g.level++;var A="valid"+g.level;if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){g.schema=l,g.schemaPath=u,g.errSchemaPath=d,o+=" var "+h+" = errors;  ";var y=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.createErrors=!1;var v;g.opts.allErrors&&(v=g.opts.allErrors,g.opts.allErrors=!1),o+=" "+e.validate(g)+" ",g.createErrors=!0,v&&(g.opts.allErrors=v),e.compositeRule=g.compositeRule=y,o+=" if ("+A+") {   ";var b=b||[];b.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'should NOT be valid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var I=o;o=b.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+I+"]); ":o+=" validate.errors = ["+I+"]; return false; ":o+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(o+=" } ")}else o+="  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'should NOT be valid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(o+=" if (false) { ");return o},"generate_not")});var cbt=W((EQo,abt)=>{"use strict";f();abt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e),y="";A.level++;var v="valid"+A.level,b=A.baseId,I="prevValid"+s,_="passingSchemas"+s;o+="var "+g+" = errors , "+I+" = false , "+h+" = false , "+_+" = null; ";var k=e.compositeRule;e.compositeRule=A.compositeRule=!0;var N=l;if(N)for(var F,O=-1,Y=N.length-1;O<Y;)F=N[O+=1],(e.opts.strictKeywords?typeof F=="object"&&Object.keys(F).length>0||F===!1:e.util.schemaHasRules(F,e.RULES.all))?(A.schema=F,A.schemaPath=u+"["+O+"]",A.errSchemaPath=d+"/"+O,o+="  "+e.validate(A)+" ",A.baseId=b):o+=" var "+v+" = true; ",O&&(o+=" if ("+v+" && "+I+") { "+h+" = false; "+_+" = ["+_+", "+O+"]; } else { ",y+="}"),o+=" if ("+v+") { "+h+" = "+I+" = true; "+_+" = "+O+"; }";return e.compositeRule=A.compositeRule=k,o+=""+y+"if (!"+h+") {   var err =   ",e.createErrors!==!1?(o+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { passingSchemas: "+_+" } ",e.opts.messages!==!1&&(o+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+="} else {  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; }",e.opts.allErrors&&(o+=" } "),o},"generate_oneOf")});var ubt=W((TQo,lbt)=>{"use strict";f();lbt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l;var A=h?"(new RegExp("+g+"))":e.usePattern(l);o+="if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'string') || "),o+=" !"+A+".test("+m+") ) {   ";var y=y||[];y.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { pattern:  ",h?o+=""+g:o+=""+e.util.toQuotedString(l),o+="  } ",e.opts.messages!==!1&&(o+=` , message: 'should match pattern "`,h?o+="' + "+g+" + '":o+=""+e.util.escapeQuotes(l),o+=`"' `),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+e.util.toQuotedString(l),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var v=o;return o=y.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate_pattern")});var fbt=W((SQo,dbt)=>{"use strict";f();dbt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="errs__"+s,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,v="key"+s,b="idx"+s,I=g.dataLevel=e.dataLevel+1,_="data"+I,k="dataProperties"+s,N=Object.keys(l||{}).filter(ie),F=e.schema.patternProperties||{},O=Object.keys(F).filter(ie),Y=e.schema.additionalProperties,z=N.length||O.length,V=Y===!1,U=typeof Y=="object"&&Object.keys(Y).length,H=e.opts.removeAdditional,ee=V||U||H,J=e.opts.ownProperties,G=e.baseId,j=e.schema.required;if(j&&!(e.opts.$data&&j.$data)&&j.length<e.opts.loopRequired)var Z=e.util.toHash(j);function ie(Mr){return Mr!=="__proto__"}if(a(ie,"notProto"),o+="var "+h+" = errors;var "+y+" = true;",J&&(o+=" var "+k+" = undefined;"),ee){if(J?o+=" "+k+" = "+k+" || Object.keys("+m+"); for (var "+b+"=0; "+b+"<"+k+".length; "+b+"++) { var "+v+" = "+k+"["+b+"]; ":o+=" for (var "+v+" in "+m+") { ",z){if(o+=" var isAdditional"+s+" = !(false ",N.length)if(N.length>8)o+=" || validate.schema"+u+".hasOwnProperty("+v+") ";else{var ne=N;if(ne)for(var re,fe=-1,ye=ne.length-1;fe<ye;)re=ne[fe+=1],o+=" || "+v+" == "+e.util.toQuotedString(re)+" "}if(O.length){var Qe=O;if(Qe)for(var we,Xe=-1,Oe=Qe.length-1;Xe<Oe;)we=Qe[Xe+=1],o+=" || "+e.usePattern(we)+".test("+v+") "}o+=" ); if (isAdditional"+s+") { "}if(H=="all")o+=" delete "+m+"["+v+"]; ";else{var ut=e.errorPath,Rt="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),V)if(H)o+=" delete "+m+"["+v+"]; ";else{o+=" "+y+" = false; ";var Et=d;d=e.errSchemaPath+"/additionalProperties";var At=At||[];At.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { additionalProperty: '"+Rt+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is an invalid additional property":o+="should NOT have additional properties",o+="' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var de=o;o=At.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+de+"]); ":o+=" validate.errors = ["+de+"]; return false; ":o+=" var err = "+de+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=Et,p&&(o+=" break; ")}else if(U)if(H=="failing"){o+=" var "+h+" = errors;  ";var qe=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.schema=Y,g.schemaPath=e.schemaPath+".additionalProperties",g.errSchemaPath=e.errSchemaPath+"/additionalProperties",g.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var Ce=m+"["+v+"]";g.dataPathArr[I]=v;var $e=e.validate(g);g.baseId=G,e.util.varOccurences($e,_)<2?o+=" "+e.util.varReplace($e,_,Ce)+" ":o+=" var "+_+" = "+Ce+"; "+$e+" ",o+=" if (!"+y+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+v+"]; }  ",e.compositeRule=g.compositeRule=qe}else{g.schema=Y,g.schemaPath=e.schemaPath+".additionalProperties",g.errSchemaPath=e.errSchemaPath+"/additionalProperties",g.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var Ce=m+"["+v+"]";g.dataPathArr[I]=v;var $e=e.validate(g);g.baseId=G,e.util.varOccurences($e,_)<2?o+=" "+e.util.varReplace($e,_,Ce)+" ":o+=" var "+_+" = "+Ce+"; "+$e+" ",p&&(o+=" if (!"+y+") break; ")}e.errorPath=ut}z&&(o+=" } "),o+=" }  ",p&&(o+=" if ("+y+") { ",A+="}")}var ce=e.opts.useDefaults&&!e.compositeRule;if(N.length){var ue=N;if(ue)for(var re,He=-1,Me=ue.length-1;He<Me;){re=ue[He+=1];var be=l[re];if(e.opts.strictKeywords?typeof be=="object"&&Object.keys(be).length>0||be===!1:e.util.schemaHasRules(be,e.RULES.all)){var Ge=e.util.getProperty(re),Ce=m+Ge,rt=ce&&be.default!==void 0;g.schema=be,g.schemaPath=u+Ge,g.errSchemaPath=d+"/"+e.util.escapeFragment(re),g.errorPath=e.util.getPath(e.errorPath,re,e.opts.jsonPointers),g.dataPathArr[I]=e.util.toQuotedString(re);var $e=e.validate(g);if(g.baseId=G,e.util.varOccurences($e,_)<2){$e=e.util.varReplace($e,_,Ce);var ht=Ce}else{var ht=_;o+=" var "+_+" = "+Ce+"; "}if(rt)o+=" "+$e+" ";else{if(Z&&Z[re]){o+=" if ( "+ht+" === undefined ",J&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(re)+"') "),o+=") { "+y+" = false; ";var ut=e.errorPath,Et=d,Ot=e.util.escapeQuotes(re);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(ut,re,e.opts.jsonPointers)),d=e.errSchemaPath+"/required";var At=At||[];At.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+Ot+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+Ot+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var de=o;o=At.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+de+"]); ":o+=" validate.errors = ["+de+"]; return false; ":o+=" var err = "+de+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=Et,e.errorPath=ut,o+=" } else { "}else p?(o+=" if ( "+ht+" === undefined ",J&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(re)+"') "),o+=") { "+y+" = true; } else { "):(o+=" if ("+ht+" !== undefined ",J&&(o+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(re)+"') "),o+=" ) { ");o+=" "+$e+" } "}}p&&(o+=" if ("+y+") { ",A+="}")}}if(O.length){var Zt=O;if(Zt)for(var we,qt=-1,Yr=Zt.length-1;qt<Yr;){we=Zt[qt+=1];var be=F[we];if(e.opts.strictKeywords?typeof be=="object"&&Object.keys(be).length>0||be===!1:e.util.schemaHasRules(be,e.RULES.all)){g.schema=be,g.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(we),g.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(we),J?o+=" "+k+" = "+k+" || Object.keys("+m+"); for (var "+b+"=0; "+b+"<"+k+".length; "+b+"++) { var "+v+" = "+k+"["+b+"]; ":o+=" for (var "+v+" in "+m+") { ",o+=" if ("+e.usePattern(we)+".test("+v+")) { ",g.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var Ce=m+"["+v+"]";g.dataPathArr[I]=v;var $e=e.validate(g);g.baseId=G,e.util.varOccurences($e,_)<2?o+=" "+e.util.varReplace($e,_,Ce)+" ":o+=" var "+_+" = "+Ce+"; "+$e+" ",p&&(o+=" if (!"+y+") break; "),o+=" } ",p&&(o+=" else "+y+" = true; "),o+=" }  ",p&&(o+=" if ("+y+") { ",A+="}")}}}return p&&(o+=" "+A+" if ("+h+" == errors) {"),o},"generate_properties")});var mbt=W((PQo,pbt)=>{"use strict";f();pbt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="errs__"+s,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level;if(o+="var "+h+" = errors;",e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){g.schema=l,g.schemaPath=u,g.errSchemaPath=d;var v="key"+s,b="idx"+s,I="i"+s,_="' + "+v+" + '",k=g.dataLevel=e.dataLevel+1,N="data"+k,F="dataProperties"+s,O=e.opts.ownProperties,Y=e.baseId;O&&(o+=" var "+F+" = undefined; "),O?o+=" "+F+" = "+F+" || Object.keys("+m+"); for (var "+b+"=0; "+b+"<"+F+".length; "+b+"++) { var "+v+" = "+F+"["+b+"]; ":o+=" for (var "+v+" in "+m+") { ",o+=" var startErrs"+s+" = errors; ";var z=v,V=e.compositeRule;e.compositeRule=g.compositeRule=!0;var U=e.validate(g);g.baseId=Y,e.util.varOccurences(U,N)<2?o+=" "+e.util.varReplace(U,N,z)+" ":o+=" var "+N+" = "+z+"; "+U+" ",e.compositeRule=g.compositeRule=V,o+=" if (!"+y+") { for (var "+I+"=startErrs"+s+"; "+I+"<errors; "+I+"++) { vErrors["+I+"].propertyName = "+v+"; }   var err =   ",e.createErrors!==!1?(o+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { propertyName: '"+_+"' } ",e.opts.messages!==!1&&(o+=" , message: 'property name \\'"+_+"\\' is invalid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),p&&(o+=" break; "),o+=" } }"}return p&&(o+=" "+A+" if ("+h+" == errors) {"),o},"generate_propertyNames")});var gbt=W((NQo,hbt)=>{"use strict";f();hbt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g=e.opts.$data&&l&&l.$data,A;g?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",A="schema"+s):A=l;var y="schema"+s;if(!g)if(l.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var v=[],b=l;if(b)for(var I,_=-1,k=b.length-1;_<k;){I=b[_+=1];var N=e.schema.properties[I];N&&(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))||(v[v.length]=I)}}else var v=l;if(g||v.length){var F=e.errorPath,O=g||v.length>=e.opts.loopRequired,Y=e.opts.ownProperties;if(p)if(o+=" var missing"+s+"; ",O){g||(o+=" var "+y+" = validate.schema"+u+"; ");var z="i"+s,V="schema"+s+"["+z+"]",U="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(F,V,e.opts.jsonPointers)),o+=" var "+h+" = true; ",g&&(o+=" if (schema"+s+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+s+")) "+h+" = false; else {"),o+=" for (var "+z+" = 0; "+z+" < "+y+".length; "+z+"++) { "+h+" = "+m+"["+y+"["+z+"]] !== undefined ",Y&&(o+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+y+"["+z+"]) "),o+="; if (!"+h+") break; } ",g&&(o+="  }  "),o+="  if (!"+h+") {   ";var H=H||[];H.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var ee=o;o=H.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+ee+"]); ":o+=" validate.errors = ["+ee+"]; return false; ":o+=" var err = "+ee+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { "}else{o+=" if ( ";var J=v;if(J)for(var G,z=-1,j=J.length-1;z<j;){G=J[z+=1],z&&(o+=" || ");var Z=e.util.getProperty(G),ie=m+Z;o+=" ( ( "+ie+" === undefined ",Y&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(G)+"') "),o+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?G:Z)+") ) "}o+=") {  ";var V="missing"+s,U="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(F,V,!0):F+" + "+V);var H=H||[];H.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var ee=o;o=H.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+ee+"]); ":o+=" validate.errors = ["+ee+"]; return false; ":o+=" var err = "+ee+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { "}else if(O){g||(o+=" var "+y+" = validate.schema"+u+"; ");var z="i"+s,V="schema"+s+"["+z+"]",U="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(F,V,e.opts.jsonPointers)),g&&(o+=" if ("+y+" && !Array.isArray("+y+")) {  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+y+" !== undefined) { "),o+=" for (var "+z+" = 0; "+z+" < "+y+".length; "+z+"++) { if ("+m+"["+y+"["+z+"]] === undefined ",Y&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+y+"["+z+"]) "),o+=") {  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",g&&(o+="  }  ")}else{var ne=v;if(ne)for(var G,re=-1,fe=ne.length-1;re<fe;){G=ne[re+=1];var Z=e.util.getProperty(G),U=e.util.escapeQuotes(G),ie=m+Z;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(F,G,e.opts.jsonPointers)),o+=" if ( "+ie+" === undefined ",Y&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(G)+"') "),o+=") {  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=F}else p&&(o+=" if (true) {");return o},"generate_required")});var ybt=W((FQo,Abt)=>{"use strict";f();Abt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g=e.opts.$data&&l&&l.$data,A;if(g?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",A="schema"+s):A=l,(l||g)&&e.opts.uniqueItems!==!1){g&&(o+=" var "+h+"; if ("+A+" === false || "+A+" === undefined) "+h+" = true; else if (typeof "+A+" != 'boolean') "+h+" = false; else { "),o+=" var i = "+m+".length , "+h+" = true , j; if (i > 1) { ";var y=e.schema.items&&e.schema.items.type,v=Array.isArray(y);if(!y||y=="object"||y=="array"||v&&(y.indexOf("object")>=0||y.indexOf("array")>=0))o+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+h+" = false; break outer; } } } ";else{o+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var b="checkDataType"+(v?"s":"");o+=" if ("+e.util[b](y,"item",e.opts.strictNumbers,!0)+") continue; ",v&&(o+=` if (typeof item == 'string') item = '"' + item; `),o+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}o+=" } ",g&&(o+="  }  "),o+=" if (!"+h+") {   ";var I=I||[];I.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",g?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var _=o;o=I.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+_+"]); ":o+=" validate.errors = ["+_+"]; return false; ":o+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { ")}else p&&(o+=" if (true) { ");return o},"generate_uniqueItems")});var vbt=W((UQo,Cbt)=>{"use strict";f();Cbt.exports={$ref:DEt(),allOf:NEt(),anyOf:LEt(),$comment:OEt(),const:UEt(),contains:HEt(),dependencies:$Et(),enum:GEt(),format:zEt(),if:YEt(),items:XEt(),maximum:$4e(),minimum:$4e(),maxItems:j4e(),minItems:j4e(),maxLength:G4e(),minLength:G4e(),maxProperties:V4e(),minProperties:V4e(),multipleOf:ibt(),not:sbt(),oneOf:cbt(),pattern:ubt(),properties:fbt(),propertyNames:mbt(),required:gbt(),uniqueItems:ybt(),validate:H4e()}});var bbt=W((HQo,Ebt)=>{"use strict";f();var xbt=vbt(),z4e=g5().toHash;Ebt.exports=a(function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],o=["number","integer","string","array","object","boolean","null"];return e.all=z4e(r),e.types=z4e(o),e.forEach(function(s){s.rules=s.rules.map(function(c){var l;if(typeof c=="object"){var u=Object.keys(c)[0];l=c[u],c=u,l.forEach(function(p){r.push(p),e.all[p]=!0})}r.push(c);var d=e.all[c]={keyword:c,code:xbt[c],implements:l};return d}),e.all.$comment={keyword:"$comment",code:xbt.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=z4e(r.concat(n)),e.custom={},e},"rules")});var wbt=W((jQo,Tbt)=>{"use strict";f();var Ibt=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Tbt.exports=function(t,e){for(var r=0;r<e.length;r++){t=JSON.parse(JSON.stringify(t));var n=e[r].split("/"),o=t,s;for(s=1;s<n.length;s++)o=o[n[s]];for(s=0;s<Ibt.length;s++){var c=Ibt[s],l=o[c];l&&(o[c]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}});var Rbt=W((VQo,Sbt)=>{"use strict";f();var P5r=Uue().MissingRef;Sbt.exports=_bt;function _bt(t,e,r){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var o=s(t).then(function(){var l=n._addSchema(t,void 0,e);return l.validate||c(l)});return r&&o.then(function(l){r(null,l)},r),o;function s(l){var u=l.$schema;return u&&!n.getSchema(u)?_bt.call(n,{$ref:u},!0):Promise.resolve()}a(s,"loadMetaSchemaOf");function c(l){try{return n._compile(l)}catch(d){if(d instanceof P5r)return u(d);throw d}function u(d){var p=d.missingSchema;if(g(p))throw new Error("Schema "+p+" is loaded but "+d.missingRef+" cannot be resolved");var m=n._loadingSchemas[p];return m||(m=n._loadingSchemas[p]=n._opts.loadSchema(p),m.then(h,h)),m.then(function(A){if(!g(p))return s(A).then(function(){g(p)||n.addSchema(A,p,void 0,e)})}).then(function(){return c(l)});function h(){delete n._loadingSchemas[p]}a(h,"removePromise");function g(A){return n._refs[A]||n._schemas[A]}a(g,"added")}a(u,"loadMissingSchema")}a(c,"_compileAsync")}a(_bt,"compileAsync")});var Pbt=W((YQo,kbt)=>{"use strict";f();kbt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m,h="data"+(c||""),g="valid"+s,A="errs__"+s,y=e.opts.$data&&l&&l.$data,v;y?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",v="schema"+s):v=l;var b=this,I="definition"+s,_=b.definition,k="",N,F,O,Y,z;if(y&&_.$data){z="keywordValidate"+s;var V=_.validateSchema;o+=" var "+I+" = RULES.custom['"+r+"'].definition; var "+z+" = "+I+".validate;"}else{if(Y=e.useCustomRule(b,l,e.schema,e),!Y)return;v="validate.schema"+u,z=Y.code,N=_.compile,F=_.inline,O=_.macro}var U=z+".errors",H="i"+s,ee="ruleErr"+s,J=_.async;if(J&&!e.async)throw new Error("async keyword in sync schema");if(F||O||(o+=""+U+" = null;"),o+="var "+A+" = errors;var "+g+";",y&&_.$data&&(k+="}",o+=" if ("+v+" === undefined) { "+g+" = true; } else { ",V&&(k+="}",o+=" "+g+" = "+I+".validateSchema("+v+"); if ("+g+") { ")),F)_.statements?o+=" "+Y.validate+" ":o+=" "+g+" = "+Y.validate+"; ";else if(O){var G=e.util.copy(e),k="";G.level++;var j="valid"+G.level;G.schema=Y.validate,G.schemaPath="";var Z=e.compositeRule;e.compositeRule=G.compositeRule=!0;var ie=e.validate(G).replace(/validate\.schema/g,z);e.compositeRule=G.compositeRule=Z,o+=" "+ie}else{var ne=ne||[];ne.push(o),o="",o+="  "+z+".call( ",e.opts.passContext?o+="this":o+="self",N||_.schema===!1?o+=" , "+h+" ":o+=" , "+v+" , "+h+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",e.errorPath!='""'&&(o+=" + "+e.errorPath);var re=c?"data"+(c-1||""):"parentData",fe=c?e.dataPathArr[c]:"parentDataProperty";o+=" , "+re+" , "+fe+" , rootData )  ";var ye=o;o=ne.pop(),_.errors===!1?(o+=" "+g+" = ",J&&(o+="await "),o+=""+ye+"; "):J?(U="customErrors"+s,o+=" var "+U+" = null; try { "+g+" = await "+ye+"; } catch (e) { "+g+" = false; if (e instanceof ValidationError) "+U+" = e.errors; else throw e; } "):o+=" "+U+" = null; "+g+" = "+ye+"; "}if(_.modifying&&(o+=" if ("+re+") "+h+" = "+re+"["+fe+"];"),o+=""+k,_.valid)p&&(o+=" if (true) { ");else{o+=" if ( ",_.valid===void 0?(o+=" !",O?o+=""+j:o+=""+g):o+=" "+!_.valid+" ",o+=") { ",m=b.keyword;var ne=ne||[];ne.push(o),o="";var ne=ne||[];ne.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+b.keyword+"' } ",e.opts.messages!==!1&&(o+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var Qe=o;o=ne.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+Qe+"]); ":o+=" validate.errors = ["+Qe+"]; return false; ":o+=" var err = "+Qe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var we=o;o=ne.pop(),F?_.errors?_.errors!="full"&&(o+="  for (var "+H+"="+A+"; "+H+"<errors; "+H+"++) { var "+ee+" = vErrors["+H+"]; if ("+ee+".dataPath === undefined) "+ee+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+ee+".schemaPath === undefined) { "+ee+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(o+=" "+ee+".schema = "+v+"; "+ee+".data = "+h+"; "),o+=" } "):_.errors===!1?o+=" "+we+" ":(o+=" if ("+A+" == errors) { "+we+" } else {  for (var "+H+"="+A+"; "+H+"<errors; "+H+"++) { var "+ee+" = vErrors["+H+"]; if ("+ee+".dataPath === undefined) "+ee+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+ee+".schemaPath === undefined) { "+ee+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(o+=" "+ee+".schema = "+v+"; "+ee+".data = "+h+"; "),o+=" } } "):O?(o+="   var err =   ",e.createErrors!==!1?(o+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+b.keyword+"' } ",e.opts.messages!==!1&&(o+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):_.errors===!1?o+=" "+we+" ":(o+=" if (Array.isArray("+U+")) { if (vErrors === null) vErrors = "+U+"; else vErrors = vErrors.concat("+U+"); errors = vErrors.length;  for (var "+H+"="+A+"; "+H+"<errors; "+H+"++) { var "+ee+" = vErrors["+H+"]; if ("+ee+".dataPath === undefined) "+ee+".dataPath = (dataPath || '') + "+e.errorPath+";  "+ee+'.schemaPath = "'+d+'";  ',e.opts.verbose&&(o+=" "+ee+".schema = "+v+"; "+ee+".data = "+h+"; "),o+=" } } else { "+we+" } "),o+=" } ",p&&(o+=" else { ")}return o},"generate_custom")});var K4e=W((ZQo,D5r)=>{D5r.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Nbt=W((eUo,Bbt)=>{"use strict";f();var Dbt=K4e();Bbt.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Dbt.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Dbt.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var Lbt=W((rUo,Mbt)=>{"use strict";f();var B5r=/^[a-z_$][a-z0-9_$-]*$/i,N5r=Pbt(),M5r=Nbt();Mbt.exports={add:L5r,get:F5r,remove:O5r,validate:Y4e};function L5r(t,e){var r=this.RULES;if(r.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!B5r.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var o=0;o<n.length;o++)c(t,n[o],e);else c(t,n,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}r.keywords[t]=r.all[t]=!0;function c(l,u,d){for(var p,m=0;m<r.length;m++){var h=r[m];if(h.type==u){p=h;break}}p||(p={type:u,rules:[]},r.push(p));var g={keyword:l,definition:d,custom:!0,code:N5r,implements:d.implements};p.rules.push(g),r.custom[l]=g}return a(c,"_addRule"),this}a(L5r,"addKeyword");function F5r(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1}a(F5r,"getKeyword");function O5r(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var r=0;r<e.length;r++)for(var n=e[r].rules,o=0;o<n.length;o++)if(n[o].keyword==t){n.splice(o,1);break}return this}a(O5r,"removeKeyword");function Y4e(t,e){Y4e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(M5r,!0);if(r(t))return!0;if(Y4e.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}a(Y4e,"validateKeyword")});var Fbt=W((oUo,Q5r)=>{Q5r.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Vbt=W((sUo,Gbt)=>{"use strict";f();var Qbt=gEt(),A5=Que(),U5r=yEt(),Ubt=M4e(),q5r=q4e(),H5r=kEt(),W5r=bbt(),qbt=wbt(),Hbt=g5();Gbt.exports=wc;wc.prototype.validate=j5r;wc.prototype.compile=G5r;wc.prototype.addSchema=V5r;wc.prototype.addMetaSchema=z5r;wc.prototype.validateSchema=K5r;wc.prototype.getSchema=J5r;wc.prototype.removeSchema=Z5r;wc.prototype.addFormat=a4r;wc.prototype.errorsText=s4r;wc.prototype._addSchema=e4r;wc.prototype._compile=t4r;wc.prototype.compileAsync=Rbt();var zue=Lbt();wc.prototype.addKeyword=zue.add;wc.prototype.getKeyword=zue.get;wc.prototype.removeKeyword=zue.remove;wc.prototype.validateKeyword=zue.validate;var Wbt=Uue();wc.ValidationError=Wbt.Validation;wc.MissingRefError=Wbt.MissingRef;wc.$dataMetaSchema=qbt;var Vue="http://json-schema.org/draft-07/schema",Obt=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],$5r=["/properties"];function wc(t){if(!(this instanceof wc))return new wc(t);t=this._opts=Hbt.copy(t)||{},p4r(this),this._schemas={},this._refs={},this._fragments={},this._formats=H5r(t.format),this._cache=t.cache||new U5r,this._loadingSchemas={},this._compilations=[],this.RULES=W5r(),this._getId=r4r(t),t.loopRequired=t.loopRequired||1/0,t.errorDataPath=="property"&&(t._errorDataPathProperty=!0),t.serialize===void 0&&(t.serialize=q5r),this._metaOpts=f4r(this),t.formats&&u4r(this),t.keywords&&d4r(this),c4r(this),typeof t.meta=="object"&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),l4r(this)}a(wc,"Ajv");function j5r(t,e){var r;if(typeof t=="string"){if(r=this.getSchema(t),!r)throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);r=n.validate||this._compile(n)}var o=r(e);return r.$async!==!0&&(this.errors=r.errors),o}a(j5r,"validate");function G5r(t,e){var r=this._addSchema(t,void 0,e);return r.validate||this._compile(r)}a(G5r,"compile");function V5r(t,e,r,n){if(Array.isArray(t)){for(var o=0;o<t.length;o++)this.addSchema(t[o],void 0,r,n);return this}var s=this._getId(t);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=A5.normalizeId(e||s),jbt(this,e),this._schemas[e]=this._addSchema(t,r,n,!0),this}a(V5r,"addSchema");function z5r(t,e,r){return this.addSchema(t,e,r,!0),this}a(z5r,"addMetaSchema");function K5r(t,e){var r=t.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||Y5r(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,t);if(!n&&e){var o="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(o);else throw new Error(o)}return n}a(K5r,"validateSchema");function Y5r(t){var e=t._opts.meta;return t._opts.defaultMeta=typeof e=="object"?t._getId(e)||e:t.getSchema(Vue)?Vue:void 0,t._opts.defaultMeta}a(Y5r,"defaultMeta");function J5r(t){var e=$bt(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return X5r(this,t)}}a(J5r,"getSchema");function X5r(t,e){var r=A5.schema.call(t,{schema:{}},e);if(r){var n=r.schema,o=r.root,s=r.baseId,c=Qbt.call(t,n,o,void 0,s);return t._fragments[e]=new Ubt({ref:e,fragment:!0,schema:n,root:o,baseId:s,validate:c}),c}}a(X5r,"_getSchemaFragment");function $bt(t,e){return e=A5.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}a($bt,"_getSchemaObj");function Z5r(t){if(t instanceof RegExp)return Gue(this,this._schemas,t),Gue(this,this._refs,t),this;switch(typeof t){case"undefined":return Gue(this,this._schemas),Gue(this,this._refs),this._cache.clear(),this;case"string":var e=$bt(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var r=this._opts.serialize,n=r?r(t):t;this._cache.del(n);var o=this._getId(t);o&&(o=A5.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this}a(Z5r,"removeSchema");function Gue(t,e,r){for(var n in e){var o=e[n];!o.meta&&(!r||r.test(n))&&(t._cache.del(o.cacheKey),delete e[n])}}a(Gue,"_removeAllSchemas");function e4r(t,e,r,n){if(typeof t!="object"&&typeof t!="boolean")throw new Error("schema should be object or boolean");var o=this._opts.serialize,s=o?o(t):t,c=this._cache.get(s);if(c)return c;n=n||this._opts.addUsedSchema!==!1;var l=A5.normalizeId(this._getId(t));l&&n&&jbt(this,l);var u=this._opts.validateSchema!==!1&&!e,d;u&&!(d=l&&l==A5.normalizeId(t.$schema))&&this.validateSchema(t,!0);var p=A5.ids.call(this,t),m=new Ubt({id:l,schema:t,localRefs:p,cacheKey:s,meta:r});return l[0]!="#"&&n&&(this._refs[l]=m),this._cache.put(s,m),u&&d&&this.validateSchema(t,!0),m}a(e4r,"_addSchema");function t4r(t,e){if(t.compiling)return t.validate=o,o.schema=t.schema,o.errors=null,o.root=e||o,t.schema.$async===!0&&(o.$async=!0),o;t.compiling=!0;var r;t.meta&&(r=this._opts,this._opts=this._metaOpts);var n;try{n=Qbt.call(this,t.schema,e,t.localRefs)}catch(s){throw delete t.validate,s}finally{t.compiling=!1,t.meta&&(this._opts=r)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function o(){var s=t.validate,c=s.apply(this,arguments);return o.errors=s.errors,c}a(o,"callValidate")}a(t4r,"_compile");function r4r(t){switch(t.schemaId){case"auto":return o4r;case"id":return n4r;default:return i4r}}a(r4r,"chooseGetId");function n4r(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}a(n4r,"_getId");function i4r(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}a(i4r,"_get$Id");function o4r(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}a(o4r,"_get$IdOrId");function s4r(t,e){if(t=t||this.errors,!t)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,o="",s=0;s<t.length;s++){var c=t[s];c&&(o+=n+c.dataPath+" "+c.message+r)}return o.slice(0,-r.length)}a(s4r,"errorsText");function a4r(t,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[t]=e,this}a(a4r,"addFormat");function c4r(t){var e;if(t._opts.$data&&(e=Fbt(),t.addMetaSchema(e,e.$id,!0)),t._opts.meta!==!1){var r=K4e();t._opts.$data&&(r=qbt(r,$5r)),t.addMetaSchema(r,Vue,!0),t._refs["http://json-schema.org/schema"]=Vue}}a(c4r,"addDefaultMetaSchema");function l4r(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var r in e)t.addSchema(e[r],r)}a(l4r,"addInitialSchemas");function u4r(t){for(var e in t._opts.formats){var r=t._opts.formats[e];t.addFormat(e,r)}}a(u4r,"addInitialFormats");function d4r(t){for(var e in t._opts.keywords){var r=t._opts.keywords[e];t.addKeyword(e,r)}}a(d4r,"addInitialKeywords");function jbt(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}a(jbt,"checkUnique");function f4r(t){for(var e=Hbt.copy(t._opts),r=0;r<Obt.length;r++)delete e[Obt[r]];return e}a(f4r,"getMetaSchemaOptions");function p4r(t){var e=t._opts.logger;if(e===!1)t.logger={log:J4e,warn:J4e,error:J4e};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}a(p4r,"setLogger");function J4e(){}a(J4e,"noop")});var pIt=W((Rqo,fIt)=>{f();fIt.exports=dIt;dIt.sync=U4r;var lIt=require("fs");function Q4r(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&t.substr(-o.length).toLowerCase()===o)return!0}return!1}a(Q4r,"checkPathExt");function uIt(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:Q4r(e,r)}a(uIt,"checkStat");function dIt(t,e,r){lIt.stat(t,function(n,o){r(n,n?!1:uIt(o,t,e))})}a(dIt,"isexe");function U4r(t,e){return uIt(lIt.statSync(t),t,e)}a(U4r,"sync")});var yIt=W((Dqo,AIt)=>{f();AIt.exports=hIt;hIt.sync=q4r;var mIt=require("fs");function hIt(t,e,r){mIt.stat(t,function(n,o){r(n,n?!1:gIt(o,e))})}a(hIt,"isexe");function q4r(t,e){return gIt(mIt.statSync(t),e)}a(q4r,"sync");function gIt(t,e){return t.isFile()&&H4r(t,e)}a(gIt,"checkStat");function H4r(t,e){var r=t.mode,n=t.uid,o=t.gid,s=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),c=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),u=parseInt("010",8),d=parseInt("001",8),p=l|u,m=r&d||r&u&&o===c||r&l&&n===s||r&p&&s===0;return m}a(H4r,"checkMode")});var vIt=W((Lqo,CIt)=>{f();var Mqo=require("fs"),ide;process.platform==="win32"||global.TESTING_WINDOWS?ide=pIt():ide=yIt();CIt.exports=gDe;gDe.sync=W4r;function gDe(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){gDe(t,e||{},function(s,c){s?o(s):n(c)})})}ide(t,e||{},function(n,o){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,o=!1),r(n,o)})}a(gDe,"isexe");function W4r(t,e){try{return ide.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}a(W4r,"sync")});var _It=W((Qqo,wIt)=>{f();var vL=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",xIt=require("path"),$4r=vL?";":":",EIt=vIt(),bIt=a(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),IIt=a((t,e)=>{let r=e.colon||$4r,n=t.match(/\//)||vL&&t.match(/\\/)?[""]:[...vL?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],o=vL?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=vL?o.split(r):[""];return vL&&t.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:n,pathExt:s,pathExtExe:o}},"getPathInfo"),TIt=a((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:o,pathExtExe:s}=IIt(t,e),c=[],l=a(d=>new Promise((p,m)=>{if(d===n.length)return e.all&&c.length?p(c):m(bIt(t));let h=n[d],g=/^".*"$/.test(h)?h.slice(1,-1):h,A=xIt.join(g,t),y=!g&&/^\.[\\\/]/.test(t)?t.slice(0,2)+A:A;p(u(y,d,0))}),"step"),u=a((d,p,m)=>new Promise((h,g)=>{if(m===o.length)return h(l(p+1));let A=o[m];EIt(d+A,{pathExt:s},(y,v)=>{if(!y&&v)if(e.all)c.push(d+A);else return h(d+A);return h(u(d,p,m+1))})}),"subStep");return r?l(0).then(d=>r(null,d),r):l(0)},"which"),j4r=a((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=IIt(t,e),s=[];for(let c=0;c<r.length;c++){let l=r[c],u=/^".*"$/.test(l)?l.slice(1,-1):l,d=xIt.join(u,t),p=!u&&/^\.[\\\/]/.test(t)?t.slice(0,2)+d:d;for(let m=0;m<n.length;m++){let h=p+n[m];try{if(EIt.sync(h,{pathExt:o}))if(e.all)s.push(h);else return h}catch{}}}if(e.all&&s.length)return s;if(e.nothrow)return null;throw bIt(t)},"whichSync");wIt.exports=TIt;TIt.sync=j4r});var RIt=W((Hqo,ADe)=>{"use strict";f();var SIt=a((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");ADe.exports=SIt;ADe.exports.default=SIt});var BIt=W((jqo,DIt)=>{"use strict";f();var kIt=require("path"),G4r=_It(),V4r=RIt();function PIt(t,e){let r=t.options.env||process.env,n=process.cwd(),o=t.options.cwd!=null,s=o&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(t.options.cwd)}catch{}let c;try{c=G4r.sync(t.command,{path:r[V4r({env:r})],pathExt:e?kIt.delimiter:void 0})}catch{}finally{s&&process.chdir(n)}return c&&(c=kIt.resolve(o?t.options.cwd:"",c)),c}a(PIt,"resolveCommandAttempt");function z4r(t){return PIt(t)||PIt(t,!0)}a(z4r,"resolveCommand");DIt.exports=z4r});var NIt=W((zqo,CDe)=>{"use strict";f();var yDe=/([()\][%!^"`<>&|;, *?])/g;function K4r(t){return t=t.replace(yDe,"^$1"),t}a(K4r,"escapeCommand");function Y4r(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(yDe,"^$1"),e&&(t=t.replace(yDe,"^$1")),t}a(Y4r,"escapeArgument");CDe.exports.command=K4r;CDe.exports.argument=Y4r});var LIt=W((Jqo,MIt)=>{"use strict";f();MIt.exports=/^#!(.*)/});var OIt=W((Zqo,FIt)=>{"use strict";f();var J4r=LIt();FIt.exports=(t="")=>{let e=t.match(J4r);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var UIt=W((tHo,QIt)=>{"use strict";f();var vDe=require("fs"),X4r=OIt();function Z4r(t){let r=Buffer.alloc(150),n;try{n=vDe.openSync(t,"r"),vDe.readSync(n,r,0,150,0),vDe.closeSync(n)}catch{}return X4r(r.toString())}a(Z4r,"readShebang");QIt.exports=Z4r});var $It=W((iHo,WIt)=>{"use strict";f();var eDr=require("path"),qIt=BIt(),HIt=NIt(),tDr=UIt(),rDr=process.platform==="win32",nDr=/\.(?:com|exe)$/i,iDr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function oDr(t){t.file=qIt(t);let e=t.file&&tDr(t.file);return e?(t.args.unshift(t.file),t.command=e,qIt(t)):t.file}a(oDr,"detectShebang");function sDr(t){if(!rDr)return t;let e=oDr(t),r=!nDr.test(e);if(t.options.forceShell||r){let n=iDr.test(e);t.command=eDr.normalize(t.command),t.command=HIt.command(t.command),t.args=t.args.map(s=>HIt.argument(s,n));let o=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${o}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}a(sDr,"parseNonShell");function aDr(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:sDr(n)}a(aDr,"parse");WIt.exports=aDr});var VIt=W((aHo,GIt)=>{"use strict";f();var xDe=process.platform==="win32";function EDe(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}a(EDe,"notFoundError");function cDr(t,e){if(!xDe)return;let r=t.emit;t.emit=function(n,o){if(n==="exit"){let s=jIt(o,e);if(s)return r.call(t,"error",s)}return r.apply(t,arguments)}}a(cDr,"hookChildProcess");function jIt(t,e){return xDe&&t===1&&!e.file?EDe(e.original,"spawn"):null}a(jIt,"verifyENOENT");function lDr(t,e){return xDe&&t===1&&!e.file?EDe(e.original,"spawnSync"):null}a(lDr,"verifyENOENTSync");GIt.exports={hookChildProcess:cDr,verifyENOENT:jIt,verifyENOENTSync:lDr,notFoundError:EDe}});var YIt=W((uHo,xL)=>{"use strict";f();var zIt=require("child_process"),bDe=$It(),IDe=VIt();function KIt(t,e,r){let n=bDe(t,e,r),o=zIt.spawn(n.command,n.args,n.options);return IDe.hookChildProcess(o,n),o}a(KIt,"spawn");function uDr(t,e,r){let n=bDe(t,e,r),o=zIt.spawnSync(n.command,n.args,n.options);return o.error=o.error||IDe.verifyENOENTSync(o.status,n),o}a(uDr,"spawnSync");xL.exports=KIt;xL.exports.spawn=KIt;xL.exports.sync=uDr;xL.exports._parse=bDe;xL.exports._enoent=IDe});var _Dr={};Sa(_Dr,{getTokenizer:()=>Xi,getTokenizerAsync:()=>IY,main:()=>gTt});module.exports=Uwt(_Dr);f();f();h3e().install();f();f();f();var XS=(o=>(o[o.DEBUG=4]="DEBUG",o[o.INFO=3]="INFO",o[o.WARN=2]="WARN",o[o.ERROR=1]="ERROR",o))(XS||{}),rl=class{static{a(this,"LogTarget")}},fC=class{static{a(this,"TelemetryLogSender")}},dt=class{constructor(e){this.category=e}static{a(this,"Logger")}log(e,r,...n){e.get(rl).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(fC).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let o=n;n.startsWith(".")&&(o=n.substring(1),n=`${this.category}${n}`),e.get(fC).sendException(e,r,n);let s=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${o}:`,s)}},pn=new dt("default");f();f();f();var JF="github.copilot",g3e="github-enterprise";f();f();f();f();var rj=class{constructor(e){this.userInfo=e}static{a(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function Tpe(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}a(Tpe,"findKnownOrg");function A3e(t){let e=t.organization_list??[];return Tpe(e)??""}a(A3e,"getUserKind");f();f();var XF=class extends Error{static{a(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function kd(t){return!t||typeof t!="object"?!1:t instanceof XF||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}a(kd,"isAbortError");var j4=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{a(this,"JsonParseError")}},pC=class extends Error{static{a(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},T_t=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function ZF(t,e=!0){return t instanceof Error?e&&"cause"in t&&ZF(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof j4||t instanceof pC||t?.message?.startsWith("net::")||T_t.has(t.code??""):!1}a(ZF,"isNetworkError");var EI=class{constructor(e,r,n,o,s){this.status=e;this.statusText=r;this.headers=n;this.getText=o;this.getBody=s;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{a(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new j4(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let o=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(o&&parseInt(o[2],10)==e.length||n.message==="Unexpected end of JSON input"){let s=new TextEncoder().encode(e).length,c=this.headers.get("content-length");throw c===null?new j4(`Response body truncated: actualLength=${s}`,"Truncated"):new j4(`Response body truncated: actualLength=${s}, headerLength=${c}`,"Truncated")}}throw n}}body(){return this.getBody()}};f();function nj(){return typeof process>"u"}a(nj,"isWeb");function q1(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}a(q1,"isMsBenchModeEnabled");function y3e(){return typeof process<"u"&&process.env.SIMULATOR_MODE==="true"}a(y3e,"isSimulatorModeEnabled");var wpe=class extends pC{static{a(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function hf(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...nj()?{}:y0(t),...n.headers}};let o=await t.get(Lr).fetch(new URL(r,e.apiUrl).href,n);if(o.status>=500)throw new pC(o);if(!o.headers.get("x-github-request-id"))throw new wpe(o);return o}a(hf,"apiFetch");f();f();f();var wNe=Ne(TI());var vr=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{a(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},Zg=class extends vr{constructor(r,n=120*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{a(this,"LRUExpirationCacheMap")}has(r){let n=!1,o=this.expiration.get(r);return o!==void 0&&(o>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,o=this.defaultTtl){if(o<=0)throw new Error("TTL must be greater than 0");let s=super.set(r,n);return this.expiration.set(r,performance.now()+o),s}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},G4=class extends vr{static{a(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}dispose(){this.clear()}};var cc=class{constructor(){this.recentNotifications=new vr(100)}static{a(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showWarningMessage(r,...n)}async showInformationMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showInformationMessage(r,...n)}};f();var jm=class t{constructor(e){this.flags=e}static{a(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:SNe(r,n),verboseLogging:__t(r,n),testMode:e,simulation:w_t(n)})}};function eA(t){return t.get(jm).flags.testMode}a(eA,"isRunningInTest");function V4(t){return eA(t)}a(V4,"shouldFailForDebugPurposes");function t6(t){return t.get(jm).flags.debug}a(t6,"isDebugEnabled");function _Ne(t){return t.get(jm).flags.verboseLogging}a(_Ne,"isVerboseLoggingEnabled");function SNe(t,e){return t.includes("--debug")||Rpe(e,"DEBUG")}a(SNe,"determineDebugFlag");function w_t(t){return Rpe(t,"SIMULATION")}a(w_t,"determineSimulationFlag");function Hj(t){return t.get(jm).flags.simulation}a(Hj,"isRunningInSimulation");function __t(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||Rpe(e,"VERBOSE")||SNe(t,e)}a(__t,"determineVerboseLoggingEnabled");function Rpe(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}a(Rpe,"determineEnvFlagEnabled");f();var PNe=require("os"),Wj=require("path");f();var RNe;(()=>{"use strict";var t={975:U=>{function H(G){if(typeof G!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(G))}a(H,"e");function ee(G,j){for(var Z,ie="",ne=0,re=-1,fe=0,ye=0;ye<=G.length;++ye){if(ye<G.length)Z=G.charCodeAt(ye);else{if(Z===47)break;Z=47}if(Z===47){if(!(re===ye-1||fe===1))if(re!==ye-1&&fe===2){if(ie.length<2||ne!==2||ie.charCodeAt(ie.length-1)!==46||ie.charCodeAt(ie.length-2)!==46){if(ie.length>2){var Qe=ie.lastIndexOf("/");if(Qe!==ie.length-1){Qe===-1?(ie="",ne=0):ne=(ie=ie.slice(0,Qe)).length-1-ie.lastIndexOf("/"),re=ye,fe=0;continue}}else if(ie.length===2||ie.length===1){ie="",ne=0,re=ye,fe=0;continue}}j&&(ie.length>0?ie+="/..":ie="..",ne=2)}else ie.length>0?ie+="/"+G.slice(re+1,ye):ie=G.slice(re+1,ye),ne=ye-re-1;re=ye,fe=0}else Z===46&&fe!==-1?++fe:fe=-1}return ie}a(ee,"r");var J={resolve:a(function(){for(var G,j="",Z=!1,ie=arguments.length-1;ie>=-1&&!Z;ie--){var ne;ie>=0?ne=arguments[ie]:(G===void 0&&(G=process.cwd()),ne=G),H(ne),ne.length!==0&&(j=ne+"/"+j,Z=ne.charCodeAt(0)===47)}return j=ee(j,!Z),Z?j.length>0?"/"+j:"/":j.length>0?j:"."},"resolve"),normalize:a(function(G){if(H(G),G.length===0)return".";var j=G.charCodeAt(0)===47,Z=G.charCodeAt(G.length-1)===47;return(G=ee(G,!j)).length!==0||j||(G="."),G.length>0&&Z&&(G+="/"),j?"/"+G:G},"normalize"),isAbsolute:a(function(G){return H(G),G.length>0&&G.charCodeAt(0)===47},"isAbsolute"),join:a(function(){if(arguments.length===0)return".";for(var G,j=0;j<arguments.length;++j){var Z=arguments[j];H(Z),Z.length>0&&(G===void 0?G=Z:G+="/"+Z)}return G===void 0?".":J.normalize(G)},"join"),relative:a(function(G,j){if(H(G),H(j),G===j||(G=J.resolve(G))===(j=J.resolve(j)))return"";for(var Z=1;Z<G.length&&G.charCodeAt(Z)===47;++Z);for(var ie=G.length,ne=ie-Z,re=1;re<j.length&&j.charCodeAt(re)===47;++re);for(var fe=j.length-re,ye=ne<fe?ne:fe,Qe=-1,we=0;we<=ye;++we){if(we===ye){if(fe>ye){if(j.charCodeAt(re+we)===47)return j.slice(re+we+1);if(we===0)return j.slice(re+we)}else ne>ye&&(G.charCodeAt(Z+we)===47?Qe=we:we===0&&(Qe=0));break}var Xe=G.charCodeAt(Z+we);if(Xe!==j.charCodeAt(re+we))break;Xe===47&&(Qe=we)}var Oe="";for(we=Z+Qe+1;we<=ie;++we)we!==ie&&G.charCodeAt(we)!==47||(Oe.length===0?Oe+="..":Oe+="/..");return Oe.length>0?Oe+j.slice(re+Qe):(re+=Qe,j.charCodeAt(re)===47&&++re,j.slice(re))},"relative"),_makeLong:a(function(G){return G},"_makeLong"),dirname:a(function(G){if(H(G),G.length===0)return".";for(var j=G.charCodeAt(0),Z=j===47,ie=-1,ne=!0,re=G.length-1;re>=1;--re)if((j=G.charCodeAt(re))===47){if(!ne){ie=re;break}}else ne=!1;return ie===-1?Z?"/":".":Z&&ie===1?"//":G.slice(0,ie)},"dirname"),basename:a(function(G,j){if(j!==void 0&&typeof j!="string")throw new TypeError('"ext" argument must be a string');H(G);var Z,ie=0,ne=-1,re=!0;if(j!==void 0&&j.length>0&&j.length<=G.length){if(j.length===G.length&&j===G)return"";var fe=j.length-1,ye=-1;for(Z=G.length-1;Z>=0;--Z){var Qe=G.charCodeAt(Z);if(Qe===47){if(!re){ie=Z+1;break}}else ye===-1&&(re=!1,ye=Z+1),fe>=0&&(Qe===j.charCodeAt(fe)?--fe==-1&&(ne=Z):(fe=-1,ne=ye))}return ie===ne?ne=ye:ne===-1&&(ne=G.length),G.slice(ie,ne)}for(Z=G.length-1;Z>=0;--Z)if(G.charCodeAt(Z)===47){if(!re){ie=Z+1;break}}else ne===-1&&(re=!1,ne=Z+1);return ne===-1?"":G.slice(ie,ne)},"basename"),extname:a(function(G){H(G);for(var j=-1,Z=0,ie=-1,ne=!0,re=0,fe=G.length-1;fe>=0;--fe){var ye=G.charCodeAt(fe);if(ye!==47)ie===-1&&(ne=!1,ie=fe+1),ye===46?j===-1?j=fe:re!==1&&(re=1):j!==-1&&(re=-1);else if(!ne){Z=fe+1;break}}return j===-1||ie===-1||re===0||re===1&&j===ie-1&&j===Z+1?"":G.slice(j,ie)},"extname"),format:a(function(G){if(G===null||typeof G!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof G);return function(j,Z){var ie=Z.dir||Z.root,ne=Z.base||(Z.name||"")+(Z.ext||"");return ie?ie===Z.root?ie+ne:ie+"/"+ne:ne}(0,G)},"format"),parse:a(function(G){H(G);var j={root:"",dir:"",base:"",ext:"",name:""};if(G.length===0)return j;var Z,ie=G.charCodeAt(0),ne=ie===47;ne?(j.root="/",Z=1):Z=0;for(var re=-1,fe=0,ye=-1,Qe=!0,we=G.length-1,Xe=0;we>=Z;--we)if((ie=G.charCodeAt(we))!==47)ye===-1&&(Qe=!1,ye=we+1),ie===46?re===-1?re=we:Xe!==1&&(Xe=1):re!==-1&&(Xe=-1);else if(!Qe){fe=we+1;break}return re===-1||ye===-1||Xe===0||Xe===1&&re===ye-1&&re===fe+1?ye!==-1&&(j.base=j.name=fe===0&&ne?G.slice(1,ye):G.slice(fe,ye)):(fe===0&&ne?(j.name=G.slice(1,re),j.base=G.slice(1,ye)):(j.name=G.slice(fe,re),j.base=G.slice(fe,ye)),j.ext=G.slice(re,ye)),fe>0?j.dir=G.slice(0,fe-1):ne&&(j.dir="/"),j},"parse"),sep:"/",delimiter:":",win32:null,posix:null};J.posix=J,U.exports=J}},e={};function r(U){var H=e[U];if(H!==void 0)return H.exports;var ee=e[U]={exports:{}};return t[U](ee,ee.exports,r),ee.exports}a(r,"r"),r.d=(U,H)=>{for(var ee in H)r.o(H,ee)&&!r.o(U,ee)&&Object.defineProperty(U,ee,{enumerable:!0,get:H[ee]})},r.o=(U,H)=>Object.prototype.hasOwnProperty.call(U,H),r.r=U=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})};var n={};let o;r.r(n),r.d(n,{URI:a(()=>h,"URI"),Utils:a(()=>V,"Utils")}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let s=/^\w[\w\d+.-]*$/,c=/^\//,l=/^\/\//;function u(U,H){if(!U.scheme&&H)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${U.authority}", path: "${U.path}", query: "${U.query}", fragment: "${U.fragment}"}`);if(U.scheme&&!s.test(U.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(U.path){if(U.authority){if(!c.test(U.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(U.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}a(u,"a");let d="",p="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{static{a(this,"l")}static isUri(H){return H instanceof h||!!H&&typeof H.authority=="string"&&typeof H.fragment=="string"&&typeof H.path=="string"&&typeof H.query=="string"&&typeof H.scheme=="string"&&typeof H.fsPath=="string"&&typeof H.with=="function"&&typeof H.toString=="function"}scheme;authority;path;query;fragment;constructor(H,ee,J,G,j,Z=!1){typeof H=="object"?(this.scheme=H.scheme||d,this.authority=H.authority||d,this.path=H.path||d,this.query=H.query||d,this.fragment=H.fragment||d):(this.scheme=function(ie,ne){return ie||ne?ie:"file"}(H,Z),this.authority=ee||d,this.path=function(ie,ne){switch(ie){case"https":case"http":case"file":ne?ne[0]!==p&&(ne=p+ne):ne=p}return ne}(this.scheme,J||d),this.query=G||d,this.fragment=j||d,u(this,Z))}get fsPath(){return I(this,!1)}with(H){if(!H)return this;let{scheme:ee,authority:J,path:G,query:j,fragment:Z}=H;return ee===void 0?ee=this.scheme:ee===null&&(ee=d),J===void 0?J=this.authority:J===null&&(J=d),G===void 0?G=this.path:G===null&&(G=d),j===void 0?j=this.query:j===null&&(j=d),Z===void 0?Z=this.fragment:Z===null&&(Z=d),ee===this.scheme&&J===this.authority&&G===this.path&&j===this.query&&Z===this.fragment?this:new A(ee,J,G,j,Z)}static parse(H,ee=!1){let J=m.exec(H);return J?new A(J[2]||d,F(J[4]||d),F(J[5]||d),F(J[7]||d),F(J[9]||d),ee):new A(d,d,d,d,d)}static file(H){let ee=d;if(o&&(H=H.replace(/\\/g,p)),H[0]===p&&H[1]===p){let J=H.indexOf(p,2);J===-1?(ee=H.substring(2),H=p):(ee=H.substring(2,J),H=H.substring(J)||p)}return new A("file",ee,H,d,d)}static from(H){let ee=new A(H.scheme,H.authority,H.path,H.query,H.fragment);return u(ee,!0),ee}toString(H=!1){return _(this,H)}toJSON(){return this}static revive(H){if(H){if(H instanceof h)return H;{let ee=new A(H);return ee._formatted=H.external,ee._fsPath=H._sep===g?H.fsPath:null,ee}}return H}}let g=o?1:void 0;class A extends h{static{a(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=I(this,!1)),this._fsPath}toString(H=!1){return H?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let H={$mid:1};return this._fsPath&&(H.fsPath=this._fsPath,H._sep=g),this._formatted&&(H.external=this._formatted),this.path&&(H.path=this.path),this.scheme&&(H.scheme=this.scheme),this.authority&&(H.authority=this.authority),this.query&&(H.query=this.query),this.fragment&&(H.fragment=this.fragment),H}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(U,H,ee){let J,G=-1;for(let j=0;j<U.length;j++){let Z=U.charCodeAt(j);if(Z>=97&&Z<=122||Z>=65&&Z<=90||Z>=48&&Z<=57||Z===45||Z===46||Z===95||Z===126||H&&Z===47||ee&&Z===91||ee&&Z===93||ee&&Z===58)G!==-1&&(J+=encodeURIComponent(U.substring(G,j)),G=-1),J!==void 0&&(J+=U.charAt(j));else{J===void 0&&(J=U.substr(0,j));let ie=y[Z];ie!==void 0?(G!==-1&&(J+=encodeURIComponent(U.substring(G,j)),G=-1),J+=ie):G===-1&&(G=j)}}return G!==-1&&(J+=encodeURIComponent(U.substring(G))),J!==void 0?J:U}a(v,"m");function b(U){let H;for(let ee=0;ee<U.length;ee++){let J=U.charCodeAt(ee);J===35||J===63?(H===void 0&&(H=U.substr(0,ee)),H+=y[J]):H!==void 0&&(H+=U[ee])}return H!==void 0?H:U}a(b,"y");function I(U,H){let ee;return ee=U.authority&&U.path.length>1&&U.scheme==="file"?`//${U.authority}${U.path}`:U.path.charCodeAt(0)===47&&(U.path.charCodeAt(1)>=65&&U.path.charCodeAt(1)<=90||U.path.charCodeAt(1)>=97&&U.path.charCodeAt(1)<=122)&&U.path.charCodeAt(2)===58?H?U.path.substr(1):U.path[1].toLowerCase()+U.path.substr(2):U.path,o&&(ee=ee.replace(/\//g,"\\")),ee}a(I,"v");function _(U,H){let ee=H?b:v,J="",{scheme:G,authority:j,path:Z,query:ie,fragment:ne}=U;if(G&&(J+=G,J+=":"),(j||G==="file")&&(J+=p,J+=p),j){let re=j.indexOf("@");if(re!==-1){let fe=j.substr(0,re);j=j.substr(re+1),re=fe.lastIndexOf(":"),re===-1?J+=ee(fe,!1,!1):(J+=ee(fe.substr(0,re),!1,!1),J+=":",J+=ee(fe.substr(re+1),!1,!0)),J+="@"}j=j.toLowerCase(),re=j.lastIndexOf(":"),re===-1?J+=ee(j,!1,!0):(J+=ee(j.substr(0,re),!1,!0),J+=j.substr(re))}if(Z){if(Z.length>=3&&Z.charCodeAt(0)===47&&Z.charCodeAt(2)===58){let re=Z.charCodeAt(1);re>=65&&re<=90&&(Z=`/${String.fromCharCode(re+32)}:${Z.substr(3)}`)}else if(Z.length>=2&&Z.charCodeAt(1)===58){let re=Z.charCodeAt(0);re>=65&&re<=90&&(Z=`${String.fromCharCode(re+32)}:${Z.substr(2)}`)}J+=ee(Z,!0,!1)}return ie&&(J+="?",J+=ee(ie,!1,!1)),ne&&(J+="#",J+=H?ne:v(ne,!1,!1)),J}a(_,"b");function k(U){try{return decodeURIComponent(U)}catch{return U.length>3?U.substr(0,3)+k(U.substr(3)):U}}a(k,"C");let N=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function F(U){return U.match(N)?U.replace(N,H=>k(H)):U}a(F,"w");var O=r(975);let Y=O.posix||O,z="/";var V;(function(U){U.joinPath=function(H,...ee){return H.with({path:Y.join(H.path,...ee)})},U.resolvePath=function(H,...ee){let J=H.path,G=!1;J[0]!==z&&(J=z+J,G=!0);let j=Y.resolve(J,...ee);return G&&j[0]===z&&!H.authority&&(j=j.substring(1)),H.with({path:j})},U.dirname=function(H){if(H.path.length===0||H.path===z)return H;let ee=Y.dirname(H.path);return ee.length===1&&ee.charCodeAt(0)===46&&(ee=""),H.with({path:ee})},U.basename=function(H){return Y.basename(H.path)},U.extname=function(H){return Y.extname(H.path)}})(V||(V={})),RNe=n})();var{URI:wI,Utils:r6}=RNe;function DNe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+DNe(t.substring(3)):t}}a(DNe,"decodeURIComponentGraceful");var kNe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function kpe(t){return t.match(kNe)?t.replace(kNe,e=>DNe(e)):t}a(kpe,"percentDecode");function Bl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return wI.file(t).toString()}a(Bl,"makeFsUri");function ZS(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?wI.parse(e[1]+e[2],!0):wI.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}a(ZS,"parseUri");function $j(t){return ZS(t),t}a($j,"validateUri");function ka(t){try{return ZS(t).toString()}catch{return t}}a(ka,"normalizeUri");var BNe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function Pa(t){let e=ZS(t);if(!BNe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,PNe.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,Wj.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}a(Pa,"fsPath");function ns(t){try{return Pa(t)}catch{return}}a(ns,"getFsPath");function NNe(t){let e=ns(t);if(e)return wI.file(e).toString()}a(NNe,"getFsUri");function e2(t,...e){let r,n=ns(t);return n?r=Bl((0,Wj.resolve)(n,...e)):r=r6.resolvePath(ZS(t),...e.map(o=>MNe(o))).toString(),typeof t=="string"?r:{uri:r}}a(e2,"resolveFilePath");function bi(t,...e){let r=r6.joinPath(ZS(t),...e.map(MNe)).toString();return typeof t=="string"?r:{uri:r}}a(bi,"joinPath");function MNe(t){return S_t(t)?t.replaceAll("\\","/"):t}a(MNe,"pathToURIPath");function S_t(t){return/^[^/\\]*\\/.test(t)}a(S_t,"isWinPath");function Mi(t){return kpe((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}a(Mi,"basename");function Nl(t){let e=r6.dirname(ZS(t)),r;return BNe.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}a(Nl,"dirname");function LNe(t){return r6.extname(ZS(t))}a(LNe,"extname");var gf=class{static{a(this,"NetworkConfiguration")}};function jj(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!Dpe(t)&&r.protocol==="http:")return r.href}catch{}}a(jj,"ensurePermittedUrl");var t2={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function Ppe(t,e,r){if(r&&eA(t)){for(let n of r){let o=Ki(t,n);if(o)return o}return}for(let n of e){let o=Ki(t,n);if(o)return o}}a(Ppe,"urlConfigOverride");function R_t(t,e){switch(e){case"api":return Ppe(t,[$t.DebugOverrideCapiUrl,$t.DebugOverrideCapiUrlLegacy],[$t.DebugTestOverrideCapiUrl,$t.DebugTestOverrideCapiUrlLegacy]);case"proxy":return Ppe(t,[$t.DebugOverrideProxyUrl,$t.DebugOverrideProxyUrlLegacy],[$t.DebugTestOverrideProxyUrl,$t.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!Dpe(t))return Ppe(t,[$t.DebugSnippyOverrideUrl])}}a(R_t,"getEndpointOverrideUrl");function Gm(t,e,r,...n){let o=R_t(t,r)??e.endpoints[r];return bi(o,...n)}a(Gm,"getEndpointUrl");function z4(t){return Gj(t)?.endpoints??t2}a(z4,"getLastKnownEndpoints");function FNe(t,e){if(e&&!jj(t,e)){t.get(cc).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(gf).setConfiguredUrls(t,{serverUrl:e})}a(FNe,"updateServerUrl");f();f();var Da=class extends Error{static{a(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};f();f();f();var tA=class{static{a(this,"InlineCompletionsUnification")}},k_t={codeUnification:!1,modelUnification:!1,expAssignments:[]},K4=class extends tA{constructor(){super(...arguments);this.inlineCompletionsUnificationState=k_t;this.onDidChangeState=a(()=>({dispose:a(()=>{},"dispose")}),"onDidChangeState")}static{a(this,"NullInlineCompletionsUnification")}};var Vm=class t{static{a(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return Vj(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e,r){let o=e.get(tA).inlineCompletionsUnificationState.expAssignments.filter(c=>!this.assignmentContext.includes(c)),s=[this.assignmentContext,...o].filter(Boolean).join(";");r.properties["VSCode.ABExp.Features"]=this.features,r.properties["abexp.assignmentcontext"]=s}};f();var ap="X-Copilot-RelatedPluginVersion-",Y4=(ne=>(ne.Market="X-MSEdge-Market",ne.CorpNet="X-FD-Corpnet",ne.Build="X-VSCode-Build",ne.ApplicationVersion="X-VSCode-AppVersion",ne.TargetPopulation="X-VSCode-TargetPopulation",ne.ClientId="X-MSEdge-ClientId",ne.ExtensionName="X-VSCode-ExtensionName",ne.ExtensionVersion="X-VSCode-ExtensionVersion",ne.ExtensionRelease="X-VSCode-ExtensionRelease",ne.CompletionsInChatExtensionVersion="X-VSCode-CompletionsInChatExtensionVersion",ne.Language="X-VSCode-Language",ne.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",ne.CopilotEngine="X-Copilot-Engine",ne.CopilotOverrideEngine="X-Copilot-OverrideEngine",ne.CopilotRepository="X-Copilot-Repository",ne.CopilotFileType="X-Copilot-FileType",ne.CopilotUserKind="X-Copilot-UserKind",ne.CopilotDogfood="X-Copilot-Dogfood",ne.CopilotCustomModel="X-Copilot-CustomModel",ne.CopilotOrgs="X-Copilot-Orgs",ne.CopilotCustomModelNames="X-Copilot-CustomModelNames",ne.CopilotTrackingId="X-Copilot-CopilotTrackingId",ne.CopilotClientVersion="X-Copilot-ClientVersion",ne.CopilotRelatedPluginVersionCppTools=ap+"msvscodecpptools",ne.CopilotRelatedPluginVersionCMakeTools=ap+"msvscodecmaketools",ne.CopilotRelatedPluginVersionMakefileTools=ap+"msvscodemakefiletools",ne.CopilotRelatedPluginVersionCSharpDevKit=ap+"msdotnettoolscsdevkit",ne.CopilotRelatedPluginVersionPython=ap+"mspythonpython",ne.CopilotRelatedPluginVersionPylance=ap+"mspythonvscodepylance",ne.CopilotRelatedPluginVersionJavaPack=ap+"vscjavavscodejavapack",ne.CopilotRelatedPluginVersionTypescript=ap+"vscodetypescriptlanguagefeatures",ne.CopilotRelatedPluginVersionTypescriptNext=ap+"msvscodevscodetypescriptnext",ne.CopilotRelatedPluginVersionCSharp=ap+"msdotnettoolscsharp",ne.CopilotRelatedPluginVersionGithubCopilotChat=ap+"githubcopilotchat",ne.CopilotRelatedPluginVersionGithubCopilot=ap+"githubcopilot",ne))(Y4||{});var P_t={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},r2=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{a(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let o=P_t[r];o!==void 0&&(e.properties[o]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};f();f();f();function lc(t,e){let r=iu(t,e,"event.CopilotToken");return t.get(nr).onDidChangeTokenResult(n=>{n.copilotToken&&r(n.copilotToken)})}a(lc,"onCopilotToken");function Bpe(t){let e=t.getTokenValue("tid"),r=t.organization_list,n=t.enterprise_list,o=t.getTokenValue("sku");if(!e)return;let s={copilot_trackingId:e};return r&&(s.organizations_list=r.toString()),n&&(s.enterprise_list=n.toString()),o&&(s.sku=o),s}a(Bpe,"propertiesFromCopilotToken");var $u=class{constructor(e){this.#e={};this.optedIn=!1;this.ftFlag="";lc(e,r=>this.updateFromToken(r))}static{a(this,"TelemetryUserConfig")}#e;getProperties(){return this.#e}get trackingId(){return this.#e.copilot_trackingId}updateFromToken(e){let r=Bpe(e);r&&(this.#e=r,this.optedIn=e.getTokenValue("rt")==="1",this.ftFlag=e.getTokenValue("ft")??"")}};var zj=Ne(TI()),Kj=Ne(require("os"));var D_t=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function B_t(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let o=n.match(D_t),s={filename:"",function:""};o&&(s.function=o[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??s.function,s.filename=(o[4]?.trim()??s.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),o[5]&&o[5]!==":0"&&(s.lineno=o[5].slice(1)),o[6]&&o[5]!==":0"&&(s.colno=o[6].slice(1)),s.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(s.filename)),e.stacktrace.push(s)}}return e}a(B_t,"buildExceptionDetail");function Npe(t,e){let r=t.get(on),n=r.getEditorInfo(),o=t.get($u),s={"#editor":n.devName??n.name,"#editor_version":C0({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":C0(r.getEditorPluginInfo()),"#session_id":t.get(Fs).sessionId,"#machine_id":t.get(Fs).machineId,"#architecture":Kj.arch(),"#os_platform":Kj.platform(),...e};return o.trackingId&&(s.user=o.trackingId,s["#tracking_id"]=o.trackingId),s}a(Npe,"buildContext");function QNe(t,e){let r=t.get(wo),n=t.get(on).getEditorInfo(),o=typeof process<"u"?process.versions.node:"web",s={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:Npe(t,{"#node_version":o}),sensitive_context:{}},c=[];s.exception_detail=[];let l=0,u=e;for(;u instanceof Error&&l<10;){let p=B_t(u);s.exception_detail.unshift(p),c.unshift([u,p]),l+=1,u=u.cause}let d=[];for(let[p,m]of c)if(m.stacktrace&&m.stacktrace.length>0){d.push(`${m.type}: ${p.code??""}`);let h=[...m.stacktrace].reverse();for(let g of h)if(g.filename?.startsWith("/github-copilot/"))return s;for(let g of h)if(g.in_app){d.push(`${g.filename?.replace(/^\.\//,"")}:${g.lineno}:${g.colno}`);break}d.push(`${h[0].filename?.replace(/^\.\//,"")}`)}else return s;return s.exception_detail.length>0&&(s.rollup_id=(0,zj.SHA256)(zj.enc.Utf16.parse(d.join(`
`))).toString()),s}a(QNe,"buildPayload");f();var n6=class{static{a(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,o){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();var mC=class{constructor(e=5){this.perTenMinutes=e;this.cache=new vr}static{a(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};f();var nl=class{constructor(){this.promises=new Set}static{a(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var WNe=require("os"),$Ne=Ne(require("path"));function i6(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}a(i6,"redactPaths");var N_t=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),M_t=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function Lpe(t){if(N_t.has(t))return t;for(let e of M_t)if(e.test(t))return t;return i6(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}a(Lpe,"redactMessage");function Jj(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(Jj,"escapeForRegExp");var L_t=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+Jj((0,WNe.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function Mpe(t){return t.replace(L_t,"~")}a(Mpe,"redactHomeDir");var jNe="[\\\\/]?([^:)]*)(?=:\\d)",qNe=new RegExp(Jj($Ne.sep),"g"),HNe=new RegExp(Jj(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+jNe,"gi");function Fpe(t,e,r=!1,n=[]){let o=new Error(e(t));o.name=t.name,typeof t.syscall=="string"&&(o.syscall=t.syscall),typeof t.code=="string"&&(o.code=t.code),typeof t.errno=="number"&&(o.errno=t.errno),o.stack=void 0;let s=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),c;for(let l of[t.toString(),`${t.name}: ${t.message}`])if(s?.startsWith(l+`
`)){c=s.slice(l.length+1).split(/\n/);break}if(c){o.stack=o.toString();for(let l of c)if(HNe.test(l))o.stack+=`
${i6(l.replace(HNe,(u,d)=>"./"+d.replace(qNe,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(l))o.stack+=`
${i6(l)}`;else{let u=!1;for(let{prefix:d,path:p}of n){let m=new RegExp(Jj(p.replace(/[\\/]$/,""))+jNe,"gi");if(m.test(l)){o.stack+=`
${i6(l.replace(m,(h,g)=>d+g.replace(qNe,"/")))}`,u=!0;break}}if(u)continue;r?o.stack+=`
${Mpe(l)}`:o.stack+=`
    at [redacted]:0:0`}}else r&&s&&(o.stack=Mpe(s));return t.cause instanceof Error&&(o.cause=Fpe(t.cause,e,r,n)),o}a(Fpe,"cloneError");function GNe(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}a(GNe,"errorMessageWithoutPath");function VNe(t,e){return Fpe(t,a(function(n){return Mpe(GNe(n))},"prepareMessage"),!0,e)}a(VNe,"prepareErrorForRestrictedTelemetry");function zNe(t,e,r=!1){return Fpe(t,a(function(o){if(r)return Lpe(GNe(o));let s="[redacted]";return typeof o.code=="string"&&(s=o.code+" "+s),typeof o.syscall=="string"?s=i6(o.syscall)+" "+s:"erroredSysCall"in o&&typeof o.erroredSysCall=="string"&&(s=o.erroredSysCall+" "+s),s},"prepareMessage"),!1,e)}a(zNe,"redactError");f();f();var Pd={};Sa(Pd,{HasPropertyKey:()=>Xj,IsArray:()=>Mc,IsAsyncIterator:()=>Ope,IsBigInt:()=>o6,IsBoolean:()=>W1,IsDate:()=>n2,IsFunction:()=>Qpe,IsIterator:()=>Upe,IsNull:()=>qpe,IsNumber:()=>v0,IsObject:()=>ds,IsRegExp:()=>s6,IsString:()=>Ss,IsSymbol:()=>Hpe,IsUint8Array:()=>$1,IsUndefined:()=>Lc});f();function Xj(t,e){return e in t}a(Xj,"HasPropertyKey");function Ope(t){return ds(t)&&!Mc(t)&&!$1(t)&&Symbol.asyncIterator in t}a(Ope,"IsAsyncIterator");function Mc(t){return Array.isArray(t)}a(Mc,"IsArray");function o6(t){return typeof t=="bigint"}a(o6,"IsBigInt");function W1(t){return typeof t=="boolean"}a(W1,"IsBoolean");function n2(t){return t instanceof globalThis.Date}a(n2,"IsDate");function Qpe(t){return typeof t=="function"}a(Qpe,"IsFunction");function Upe(t){return ds(t)&&!Mc(t)&&!$1(t)&&Symbol.iterator in t}a(Upe,"IsIterator");function qpe(t){return t===null}a(qpe,"IsNull");function v0(t){return typeof t=="number"}a(v0,"IsNumber");function ds(t){return typeof t=="object"&&t!==null}a(ds,"IsObject");function s6(t){return t instanceof globalThis.RegExp}a(s6,"IsRegExp");function Ss(t){return typeof t=="string"}a(Ss,"IsString");function Hpe(t){return typeof t=="symbol"}a(Hpe,"IsSymbol");function $1(t){return t instanceof globalThis.Uint8Array}a($1,"IsUint8Array");function Lc(t){return t===void 0}a(Lc,"IsUndefined");function F_t(t){return t.map(e=>Zj(e))}a(F_t,"ArrayType");function O_t(t){return new Date(t.getTime())}a(O_t,"DateType");function Q_t(t){return new Uint8Array(t)}a(Q_t,"Uint8ArrayType");function U_t(t){return new RegExp(t.source,t.flags)}a(U_t,"RegExpType");function q_t(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=Zj(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=Zj(t[r]);return e}a(q_t,"ObjectType");function Zj(t){return Mc(t)?F_t(t):n2(t)?O_t(t):$1(t)?Q_t(t):s6(t)?U_t(t):ds(t)?q_t(t):t}a(Zj,"Visit");function Zs(t){return Zj(t)}a(Zs,"Clone");function J4(t,e){return e===void 0?Zs(t):Zs({...e,...t})}a(J4,"CloneType");f();f();f();function eG(t){return Pi(t)&&globalThis.Symbol.asyncIterator in t}a(eG,"IsAsyncIterator");function tG(t){return Pi(t)&&globalThis.Symbol.iterator in t}a(tG,"IsIterator");function Wpe(t){return Pi(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}a(Wpe,"IsStandardObject");function rG(t){return t instanceof globalThis.Promise}a(rG,"IsPromise");function Af(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}a(Af,"IsDate");function KNe(t){return t instanceof globalThis.Map}a(KNe,"IsMap");function YNe(t){return t instanceof globalThis.Set}a(YNe,"IsSet");function zm(t){return globalThis.ArrayBuffer.isView(t)}a(zm,"IsTypedArray");function X4(t){return t instanceof globalThis.Uint8Array}a(X4,"IsUint8Array");function Pn(t,e){return e in t}a(Pn,"HasPropertyKey");function Pi(t){return t!==null&&typeof t=="object"}a(Pi,"IsObject");function Dn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}a(Dn,"IsArray");function ea(t){return t===void 0}a(ea,"IsUndefined");function j1(t){return t===null}a(j1,"IsNull");function hC(t){return typeof t=="boolean"}a(hC,"IsBoolean");function dn(t){return typeof t=="number"}a(dn,"IsNumber");function nG(t){return globalThis.Number.isInteger(t)}a(nG,"IsInteger");function ju(t){return typeof t=="bigint"}a(ju,"IsBigInt");function vo(t){return typeof t=="string"}a(vo,"IsString");function _I(t){return typeof t=="function"}a(_I,"IsFunction");function G1(t){return typeof t=="symbol"}a(G1,"IsSymbol");function x0(t){return ju(t)||hC(t)||j1(t)||dn(t)||vo(t)||G1(t)||ea(t)}a(x0,"IsValueType");var Os;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(c,l){return t.ExactOptionalPropertyTypes?l in c:c[l]!==void 0}a(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(c){let l=Pi(c);return t.AllowArrayObject?l:l&&!Dn(c)}a(r,"IsObjectLike"),t.IsObjectLike=r;function n(c){return r(c)&&!(c instanceof Date)&&!(c instanceof Uint8Array)}a(n,"IsRecordLike"),t.IsRecordLike=n;function o(c){return t.AllowNaN?dn(c):Number.isFinite(c)}a(o,"IsNumberLike"),t.IsNumberLike=o;function s(c){let l=ea(c);return t.AllowNullVoid?l||c===null:l}a(s,"IsVoidLike"),t.IsVoidLike=s})(Os||(Os={}));f();function H_t(t){return globalThis.Object.freeze(t).map(e=>a6(e))}a(H_t,"ImmutableArray");function W_t(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=a6(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=a6(t[r]);return globalThis.Object.freeze(e)}a(W_t,"ImmutableObject");function a6(t){return Mc(t)?H_t(t):n2(t)?t:$1(t)?t:s6(t)?t:ds(t)?W_t(t):t}a(a6,"Immutable");function ct(t,e){let r=e!==void 0?{...e,...t}:t;switch(Os.InstanceMode){case"freeze":return a6(r);case"clone":return Zs(r);default:return r}}a(ct,"CreateType");f();var Bn=class extends Error{static{a(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var Ba=Symbol.for("TypeBox.Transform"),rA=Symbol.for("TypeBox.Readonly"),Gu=Symbol.for("TypeBox.Optional"),Km=Symbol.for("TypeBox.Hint"),st=Symbol.for("TypeBox.Kind");function Z4(t){return ds(t)&&t[rA]==="Readonly"}a(Z4,"IsReadonly");function cp(t){return ds(t)&&t[Gu]==="Optional"}a(cp,"IsOptional");function $pe(t){return lo(t,"Any")}a($pe,"IsAny");function jpe(t){return lo(t,"Argument")}a(jpe,"IsArgument");function nA(t){return lo(t,"Array")}a(nA,"IsArray");function i2(t){return lo(t,"AsyncIterator")}a(i2,"IsAsyncIterator");function o2(t){return lo(t,"BigInt")}a(o2,"IsBigInt");function V1(t){return lo(t,"Boolean")}a(V1,"IsBoolean");function iA(t){return lo(t,"Computed")}a(iA,"IsComputed");function oA(t){return lo(t,"Constructor")}a(oA,"IsConstructor");function $_t(t){return lo(t,"Date")}a($_t,"IsDate");function sA(t){return lo(t,"Function")}a(sA,"IsFunction");function aA(t){return lo(t,"Integer")}a(aA,"IsInteger");function Ka(t){return lo(t,"Intersect")}a(Ka,"IsIntersect");function s2(t){return lo(t,"Iterator")}a(s2,"IsIterator");function lo(t,e){return ds(t)&&st in t&&t[st]===e}a(lo,"IsKindOf");function iG(t){return W1(t)||v0(t)||Ss(t)}a(iG,"IsLiteralValue");function E0(t){return lo(t,"Literal")}a(E0,"IsLiteral");function b0(t){return lo(t,"MappedKey")}a(b0,"IsMappedKey");function ta(t){return lo(t,"MappedResult")}a(ta,"IsMappedResult");function SI(t){return lo(t,"Never")}a(SI,"IsNever");function j_t(t){return lo(t,"Not")}a(j_t,"IsNot");function c6(t){return lo(t,"Null")}a(c6,"IsNull");function cA(t){return lo(t,"Number")}a(cA,"IsNumber");function Fc(t){return lo(t,"Object")}a(Fc,"IsObject");function a2(t){return lo(t,"Promise")}a(a2,"IsPromise");function c2(t){return lo(t,"Record")}a(c2,"IsRecord");function uc(t){return lo(t,"Ref")}a(uc,"IsRef");function Gpe(t){return lo(t,"RegExp")}a(Gpe,"IsRegExp");function z1(t){return lo(t,"String")}a(z1,"IsString");function l6(t){return lo(t,"Symbol")}a(l6,"IsSymbol");function I0(t){return lo(t,"TemplateLiteral")}a(I0,"IsTemplateLiteral");function G_t(t){return lo(t,"This")}a(G_t,"IsThis");function Uo(t){return ds(t)&&Ba in t}a(Uo,"IsTransform");function T0(t){return lo(t,"Tuple")}a(T0,"IsTuple");function K1(t){return lo(t,"Undefined")}a(K1,"IsUndefined");function xo(t){return lo(t,"Union")}a(xo,"IsUnion");function V_t(t){return lo(t,"Uint8Array")}a(V_t,"IsUint8Array");function z_t(t){return lo(t,"Unknown")}a(z_t,"IsUnknown");function K_t(t){return lo(t,"Unsafe")}a(K_t,"IsUnsafe");function Y_t(t){return lo(t,"Void")}a(Y_t,"IsVoid");function RI(t){return ds(t)&&st in t&&Ss(t[st])}a(RI,"IsKind");function Na(t){return $pe(t)||jpe(t)||nA(t)||V1(t)||o2(t)||i2(t)||iA(t)||oA(t)||$_t(t)||sA(t)||aA(t)||Ka(t)||s2(t)||E0(t)||b0(t)||ta(t)||SI(t)||j_t(t)||c6(t)||cA(t)||Fc(t)||a2(t)||c2(t)||uc(t)||Gpe(t)||z1(t)||l6(t)||I0(t)||G_t(t)||T0(t)||K1(t)||xo(t)||V_t(t)||z_t(t)||K_t(t)||Y_t(t)||RI(t)}a(Na,"IsSchema");var Fe={};Sa(Fe,{IsAny:()=>e8e,IsArgument:()=>t8e,IsArray:()=>r8e,IsAsyncIterator:()=>n8e,IsBigInt:()=>i8e,IsBoolean:()=>o8e,IsComputed:()=>s8e,IsConstructor:()=>a8e,IsDate:()=>c8e,IsFunction:()=>l8e,IsImport:()=>rSt,IsInteger:()=>u8e,IsIntersect:()=>d8e,IsIterator:()=>f8e,IsKind:()=>O8e,IsKindOf:()=>$i,IsLiteral:()=>d6,IsLiteralBoolean:()=>nSt,IsLiteralNumber:()=>m8e,IsLiteralString:()=>p8e,IsLiteralValue:()=>h8e,IsMappedKey:()=>g8e,IsMappedResult:()=>A8e,IsNever:()=>y8e,IsNot:()=>C8e,IsNull:()=>v8e,IsNumber:()=>x8e,IsObject:()=>E8e,IsOptional:()=>tSt,IsPromise:()=>b8e,IsProperties:()=>oG,IsReadonly:()=>eSt,IsRecord:()=>I8e,IsRecursive:()=>iSt,IsRef:()=>T8e,IsRegExp:()=>w8e,IsSchema:()=>ra,IsString:()=>_8e,IsSymbol:()=>S8e,IsTemplateLiteral:()=>R8e,IsThis:()=>k8e,IsTransform:()=>P8e,IsTuple:()=>D8e,IsUint8Array:()=>N8e,IsUndefined:()=>B8e,IsUnion:()=>Ype,IsUnionLiteral:()=>oSt,IsUnknown:()=>M8e,IsUnsafe:()=>L8e,IsVoid:()=>F8e,TypeGuardUnknownTypeError:()=>Vpe});f();var Vpe=class extends Bn{static{a(this,"TypeGuardUnknownTypeError")}},J_t=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function JNe(t){try{return new RegExp(t),!0}catch{return!1}}a(JNe,"IsPattern");function zpe(t){if(!Ss(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}a(zpe,"IsControlCharacterFree");function XNe(t){return Kpe(t)||ra(t)}a(XNe,"IsAdditionalProperties");function u6(t){return Lc(t)||o6(t)}a(u6,"IsOptionalBigInt");function Rs(t){return Lc(t)||v0(t)}a(Rs,"IsOptionalNumber");function Kpe(t){return Lc(t)||W1(t)}a(Kpe,"IsOptionalBoolean");function ps(t){return Lc(t)||Ss(t)}a(ps,"IsOptionalString");function X_t(t){return Lc(t)||Ss(t)&&zpe(t)&&JNe(t)}a(X_t,"IsOptionalPattern");function Z_t(t){return Lc(t)||Ss(t)&&zpe(t)}a(Z_t,"IsOptionalFormat");function ZNe(t){return Lc(t)||ra(t)}a(ZNe,"IsOptionalSchema");function eSt(t){return ds(t)&&t[rA]==="Readonly"}a(eSt,"IsReadonly");function tSt(t){return ds(t)&&t[Gu]==="Optional"}a(tSt,"IsOptional");function e8e(t){return $i(t,"Any")&&ps(t.$id)}a(e8e,"IsAny");function t8e(t){return $i(t,"Argument")&&v0(t.index)}a(t8e,"IsArgument");function r8e(t){return $i(t,"Array")&&t.type==="array"&&ps(t.$id)&&ra(t.items)&&Rs(t.minItems)&&Rs(t.maxItems)&&Kpe(t.uniqueItems)&&ZNe(t.contains)&&Rs(t.minContains)&&Rs(t.maxContains)}a(r8e,"IsArray");function n8e(t){return $i(t,"AsyncIterator")&&t.type==="AsyncIterator"&&ps(t.$id)&&ra(t.items)}a(n8e,"IsAsyncIterator");function i8e(t){return $i(t,"BigInt")&&t.type==="bigint"&&ps(t.$id)&&u6(t.exclusiveMaximum)&&u6(t.exclusiveMinimum)&&u6(t.maximum)&&u6(t.minimum)&&u6(t.multipleOf)}a(i8e,"IsBigInt");function o8e(t){return $i(t,"Boolean")&&t.type==="boolean"&&ps(t.$id)}a(o8e,"IsBoolean");function s8e(t){return $i(t,"Computed")&&Ss(t.target)&&Mc(t.parameters)&&t.parameters.every(e=>ra(e))}a(s8e,"IsComputed");function a8e(t){return $i(t,"Constructor")&&t.type==="Constructor"&&ps(t.$id)&&Mc(t.parameters)&&t.parameters.every(e=>ra(e))&&ra(t.returns)}a(a8e,"IsConstructor");function c8e(t){return $i(t,"Date")&&t.type==="Date"&&ps(t.$id)&&Rs(t.exclusiveMaximumTimestamp)&&Rs(t.exclusiveMinimumTimestamp)&&Rs(t.maximumTimestamp)&&Rs(t.minimumTimestamp)&&Rs(t.multipleOfTimestamp)}a(c8e,"IsDate");function l8e(t){return $i(t,"Function")&&t.type==="Function"&&ps(t.$id)&&Mc(t.parameters)&&t.parameters.every(e=>ra(e))&&ra(t.returns)}a(l8e,"IsFunction");function rSt(t){return $i(t,"Import")&&Xj(t,"$defs")&&ds(t.$defs)&&oG(t.$defs)&&Xj(t,"$ref")&&Ss(t.$ref)&&t.$ref in t.$defs}a(rSt,"IsImport");function u8e(t){return $i(t,"Integer")&&t.type==="integer"&&ps(t.$id)&&Rs(t.exclusiveMaximum)&&Rs(t.exclusiveMinimum)&&Rs(t.maximum)&&Rs(t.minimum)&&Rs(t.multipleOf)}a(u8e,"IsInteger");function oG(t){return ds(t)&&Object.entries(t).every(([e,r])=>zpe(e)&&ra(r))}a(oG,"IsProperties");function d8e(t){return $i(t,"Intersect")&&!(Ss(t.type)&&t.type!=="object")&&Mc(t.allOf)&&t.allOf.every(e=>ra(e)&&!P8e(e))&&ps(t.type)&&(Kpe(t.unevaluatedProperties)||ZNe(t.unevaluatedProperties))&&ps(t.$id)}a(d8e,"IsIntersect");function f8e(t){return $i(t,"Iterator")&&t.type==="Iterator"&&ps(t.$id)&&ra(t.items)}a(f8e,"IsIterator");function $i(t,e){return ds(t)&&st in t&&t[st]===e}a($i,"IsKindOf");function p8e(t){return d6(t)&&Ss(t.const)}a(p8e,"IsLiteralString");function m8e(t){return d6(t)&&v0(t.const)}a(m8e,"IsLiteralNumber");function nSt(t){return d6(t)&&W1(t.const)}a(nSt,"IsLiteralBoolean");function d6(t){return $i(t,"Literal")&&ps(t.$id)&&h8e(t.const)}a(d6,"IsLiteral");function h8e(t){return W1(t)||v0(t)||Ss(t)}a(h8e,"IsLiteralValue");function g8e(t){return $i(t,"MappedKey")&&Mc(t.keys)&&t.keys.every(e=>v0(e)||Ss(e))}a(g8e,"IsMappedKey");function A8e(t){return $i(t,"MappedResult")&&oG(t.properties)}a(A8e,"IsMappedResult");function y8e(t){return $i(t,"Never")&&ds(t.not)&&Object.getOwnPropertyNames(t.not).length===0}a(y8e,"IsNever");function C8e(t){return $i(t,"Not")&&ra(t.not)}a(C8e,"IsNot");function v8e(t){return $i(t,"Null")&&t.type==="null"&&ps(t.$id)}a(v8e,"IsNull");function x8e(t){return $i(t,"Number")&&t.type==="number"&&ps(t.$id)&&Rs(t.exclusiveMaximum)&&Rs(t.exclusiveMinimum)&&Rs(t.maximum)&&Rs(t.minimum)&&Rs(t.multipleOf)}a(x8e,"IsNumber");function E8e(t){return $i(t,"Object")&&t.type==="object"&&ps(t.$id)&&oG(t.properties)&&XNe(t.additionalProperties)&&Rs(t.minProperties)&&Rs(t.maxProperties)}a(E8e,"IsObject");function b8e(t){return $i(t,"Promise")&&t.type==="Promise"&&ps(t.$id)&&ra(t.item)}a(b8e,"IsPromise");function I8e(t){return $i(t,"Record")&&t.type==="object"&&ps(t.$id)&&XNe(t.additionalProperties)&&ds(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&JNe(r[0])&&ds(e.patternProperties)&&ra(e.patternProperties[r[0]])})(t)}a(I8e,"IsRecord");function iSt(t){return ds(t)&&Km in t&&t[Km]==="Recursive"}a(iSt,"IsRecursive");function T8e(t){return $i(t,"Ref")&&ps(t.$id)&&Ss(t.$ref)}a(T8e,"IsRef");function w8e(t){return $i(t,"RegExp")&&ps(t.$id)&&Ss(t.source)&&Ss(t.flags)&&Rs(t.maxLength)&&Rs(t.minLength)}a(w8e,"IsRegExp");function _8e(t){return $i(t,"String")&&t.type==="string"&&ps(t.$id)&&Rs(t.minLength)&&Rs(t.maxLength)&&X_t(t.pattern)&&Z_t(t.format)}a(_8e,"IsString");function S8e(t){return $i(t,"Symbol")&&t.type==="symbol"&&ps(t.$id)}a(S8e,"IsSymbol");function R8e(t){return $i(t,"TemplateLiteral")&&t.type==="string"&&Ss(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}a(R8e,"IsTemplateLiteral");function k8e(t){return $i(t,"This")&&ps(t.$id)&&Ss(t.$ref)}a(k8e,"IsThis");function P8e(t){return ds(t)&&Ba in t}a(P8e,"IsTransform");function D8e(t){return $i(t,"Tuple")&&t.type==="array"&&ps(t.$id)&&v0(t.minItems)&&v0(t.maxItems)&&t.minItems===t.maxItems&&(Lc(t.items)&&Lc(t.additionalItems)&&t.minItems===0||Mc(t.items)&&t.items.every(e=>ra(e)))}a(D8e,"IsTuple");function B8e(t){return $i(t,"Undefined")&&t.type==="undefined"&&ps(t.$id)}a(B8e,"IsUndefined");function oSt(t){return Ype(t)&&t.anyOf.every(e=>p8e(e)||m8e(e))}a(oSt,"IsUnionLiteral");function Ype(t){return $i(t,"Union")&&ps(t.$id)&&ds(t)&&Mc(t.anyOf)&&t.anyOf.every(e=>ra(e))}a(Ype,"IsUnion");function N8e(t){return $i(t,"Uint8Array")&&t.type==="Uint8Array"&&ps(t.$id)&&Rs(t.minByteLength)&&Rs(t.maxByteLength)}a(N8e,"IsUint8Array");function M8e(t){return $i(t,"Unknown")&&ps(t.$id)}a(M8e,"IsUnknown");function L8e(t){return $i(t,"Unsafe")}a(L8e,"IsUnsafe");function F8e(t){return $i(t,"Void")&&t.type==="void"&&ps(t.$id)}a(F8e,"IsVoid");function O8e(t){return ds(t)&&st in t&&Ss(t[st])&&!J_t.includes(t[st])}a(O8e,"IsKind");function ra(t){return ds(t)&&(e8e(t)||t8e(t)||r8e(t)||o8e(t)||i8e(t)||n8e(t)||s8e(t)||a8e(t)||c8e(t)||l8e(t)||u8e(t)||d8e(t)||f8e(t)||d6(t)||g8e(t)||A8e(t)||y8e(t)||C8e(t)||v8e(t)||x8e(t)||E8e(t)||b8e(t)||I8e(t)||T8e(t)||w8e(t)||_8e(t)||S8e(t)||R8e(t)||k8e(t)||D8e(t)||B8e(t)||Ype(t)||N8e(t)||M8e(t)||L8e(t)||F8e(t)||O8e(t))}a(ra,"IsSchema");f();var Jpe="(true|false)",f6="(0|[1-9][0-9]*)",Xpe="(.*)",sSt="(?!.*)",rMr=`^${Jpe}$`,gC=`^${f6}$`,AC=`^${Xpe}$`,Q8e=`^${sSt}$`;f();var lA={};Sa(lA,{Clear:()=>cSt,Delete:()=>lSt,Entries:()=>aSt,Get:()=>fSt,Has:()=>uSt,Set:()=>dSt});f();var eD=new Map;function aSt(){return new Map(eD)}a(aSt,"Entries");function cSt(){return eD.clear()}a(cSt,"Clear");function lSt(t){return eD.delete(t)}a(lSt,"Delete");function uSt(t){return eD.has(t)}a(uSt,"Has");function dSt(t,e){eD.set(t,e)}a(dSt,"Set");function fSt(t){return eD.get(t)}a(fSt,"Get");var yf={};Sa(yf,{Clear:()=>mSt,Delete:()=>hSt,Entries:()=>pSt,Get:()=>ySt,Has:()=>gSt,Set:()=>ASt});f();var tD=new Map;function pSt(){return new Map(tD)}a(pSt,"Entries");function mSt(){return tD.clear()}a(mSt,"Clear");function hSt(t){return tD.delete(t)}a(hSt,"Delete");function gSt(t){return tD.has(t)}a(gSt,"Has");function ASt(t,e){tD.set(t,e)}a(ASt,"Set");function ySt(t){return tD.get(t)}a(ySt,"Get");f();function U8e(t,e){return t.includes(e)}a(U8e,"SetIncludes");function q8e(t){return[...new Set(t)]}a(q8e,"SetDistinct");function CSt(t,e){return t.filter(r=>e.includes(r))}a(CSt,"SetIntersect");function vSt(t,e){return t.reduce((r,n)=>CSt(r,n),e)}a(vSt,"SetIntersectManyResolve");function H8e(t){return t.length===1?t[0]:t.length>1?vSt(t.slice(1),t[0]):[]}a(H8e,"SetIntersectMany");function W8e(t){let e=[];for(let r of t)e.push(...r);return e}a(W8e,"SetUnionMany");f();function kI(t){return ct({[st]:"Any"},t)}a(kI,"Any");f();function rD(t,e){return ct({[st]:"Array",type:"array",items:t},e)}a(rD,"Array");f();function $8e(t){return ct({[st]:"Argument",index:t})}a($8e,"Argument");f();function nD(t,e){return ct({[st]:"AsyncIterator",type:"AsyncIterator",items:t},e)}a(nD,"AsyncIterator");f();f();function Qs(t,e,r){return ct({[st]:"Computed",target:t,parameters:e},r)}a(Qs,"Computed");f();f();function xSt(t,e){let{[e]:r,...n}=t;return n}a(xSt,"DiscardKey");function Ya(t,e){return e.reduce((r,n)=>xSt(r,n),t)}a(Ya,"Discard");f();function Ii(t){return ct({[st]:"Never",not:{}},t)}a(Ii,"Never");f();f();function _o(t){return ct({[st]:"MappedResult",properties:t})}a(_o,"MappedResult");f();f();function iD(t,e,r){return ct({[st]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}a(iD,"Constructor");f();function yC(t,e,r){return ct({[st]:"Function",type:"Function",parameters:t,returns:e},r)}a(yC,"Function");f();f();f();f();function p6(t,e){return ct({[st]:"Union",anyOf:t},e)}a(p6,"UnionCreate");function ESt(t){return t.some(e=>cp(e))}a(ESt,"IsUnionOptional");function j8e(t){return t.map(e=>cp(e)?bSt(e):e)}a(j8e,"RemoveOptionalFromRest");function bSt(t){return Ya(t,[Gu])}a(bSt,"RemoveOptionalFromType");function ISt(t,e){return ESt(t)?Dd(p6(j8e(t),e)):p6(j8e(t),e)}a(ISt,"ResolveUnion");function CC(t,e){return t.length===1?ct(t[0],e):t.length===0?Ii(e):ISt(t,e)}a(CC,"UnionEvaluated");f();function qo(t,e){return t.length===0?Ii(e):t.length===1?ct(t[0],e):p6(t,e)}a(qo,"Union");f();f();f();var sG=class extends Bn{static{a(this,"TemplateLiteralParserError")}};function TSt(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}a(TSt,"Unescape");function Zpe(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}a(Zpe,"IsNonEscaped");function J1(t,e){return Zpe(t,e,"(")}a(J1,"IsOpenParen");function m6(t,e){return Zpe(t,e,")")}a(m6,"IsCloseParen");function G8e(t,e){return Zpe(t,e,"|")}a(G8e,"IsSeparator");function wSt(t){if(!(J1(t,0)&&m6(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(J1(t,r)&&(e+=1),m6(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}a(wSt,"IsGroup");function _St(t){return t.slice(1,t.length-1)}a(_St,"InGroup");function SSt(t){let e=0;for(let r=0;r<t.length;r++)if(J1(t,r)&&(e+=1),m6(t,r)&&(e-=1),G8e(t,r)&&e===0)return!0;return!1}a(SSt,"IsPrecedenceOr");function RSt(t){for(let e=0;e<t.length;e++)if(J1(t,e))return!0;return!1}a(RSt,"IsPrecedenceAnd");function kSt(t){let[e,r]=[0,0],n=[];for(let s=0;s<t.length;s++)if(J1(t,s)&&(e+=1),m6(t,s)&&(e-=1),G8e(t,s)&&e===0){let c=t.slice(r,s);c.length>0&&n.push(oD(c)),r=s+1}let o=t.slice(r);return o.length>0&&n.push(oD(o)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}a(kSt,"Or");function PSt(t){function e(o,s){if(!J1(o,s))throw new sG("TemplateLiteralParser: Index must point to open parens");let c=0;for(let l=s;l<o.length;l++)if(J1(o,l)&&(c+=1),m6(o,l)&&(c-=1),c===0)return[s,l];throw new sG("TemplateLiteralParser: Unclosed group parens in expression")}a(e,"Group");function r(o,s){for(let c=s;c<o.length;c++)if(J1(o,c))return[s,c];return[s,o.length]}a(r,"Range");let n=[];for(let o=0;o<t.length;o++)if(J1(t,o)){let[s,c]=e(t,o),l=t.slice(s,c+1);n.push(oD(l)),o=c}else{let[s,c]=r(t,o),l=t.slice(s,c);l.length>0&&n.push(oD(l)),o=c-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}a(PSt,"And");function oD(t){return wSt(t)?oD(_St(t)):SSt(t)?kSt(t):RSt(t)?PSt(t):{type:"const",const:TSt(t)}}a(oD,"TemplateLiteralParse");function sD(t){return oD(t.slice(1,t.length-1))}a(sD,"TemplateLiteralParseExact");var e0e=class extends Bn{static{a(this,"TemplateLiteralFiniteError")}};function DSt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}a(DSt,"IsNumberExpression");function BSt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}a(BSt,"IsBooleanExpression");function NSt(t){return t.type==="const"&&t.const===".*"}a(NSt,"IsStringExpression");function l2(t){return DSt(t)||NSt(t)?!1:BSt(t)?!0:t.type==="and"?t.expr.every(e=>l2(e)):t.type==="or"?t.expr.every(e=>l2(e)):t.type==="const"?!0:(()=>{throw new e0e("Unknown expression type")})()}a(l2,"IsTemplateLiteralExpressionFinite");function aG(t){let e=sD(t.pattern);return l2(e)}a(aG,"IsTemplateLiteralFinite");f();var t0e=class extends Bn{static{a(this,"TemplateLiteralGenerateError")}};function*V8e(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of V8e(t.slice(1)))yield`${e}${r}`}a(V8e,"GenerateReduce");function*MSt(t){return yield*V8e(t.expr.map(e=>[...h6(e)]))}a(MSt,"GenerateAnd");function*LSt(t){for(let e of t.expr)yield*h6(e)}a(LSt,"GenerateOr");function*FSt(t){return yield t.const}a(FSt,"GenerateConst");function*h6(t){return t.type==="and"?yield*MSt(t):t.type==="or"?yield*LSt(t):t.type==="const"?yield*FSt(t):(()=>{throw new t0e("Unknown expression")})()}a(h6,"TemplateLiteralExpressionGenerate");function aD(t){let e=sD(t.pattern);return l2(e)?[...h6(e)]:[]}a(aD,"TemplateLiteralGenerate");f();f();function uo(t,e){return ct({[st]:"Literal",const:t,type:typeof t},e)}a(uo,"Literal");f();function cG(t){return ct({[st]:"Boolean",type:"boolean"},t)}a(cG,"Boolean");f();function cD(t){return ct({[st]:"BigInt",type:"bigint"},t)}a(cD,"BigInt");f();function Ym(t){return ct({[st]:"Number",type:"number"},t)}a(Ym,"Number");f();function Cf(t){return ct({[st]:"String",type:"string"},t)}a(Cf,"String");function*OSt(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield cG():e==="number"?yield Ym():e==="bigint"?yield cD():e==="string"?yield Cf():yield(()=>{let r=e.split("|").map(n=>uo(n.trim()));return r.length===0?Ii():r.length===1?r[0]:CC(r)})()}a(OSt,"FromUnion");function*QSt(t){if(t[1]!=="{"){let e=uo("$"),r=r0e(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=OSt(t.slice(2,e)),n=r0e(t.slice(e+1));return yield*[...r,...n]}yield uo(t)}a(QSt,"FromTerminal");function*r0e(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=uo(t.slice(0,e)),n=QSt(t.slice(e));return yield*[r,...n]}yield uo(t)}a(r0e,"FromSyntax");function z8e(t){return[...r0e(t)]}a(z8e,"TemplateLiteralSyntax");f();var n0e=class extends Bn{static{a(this,"TemplateLiteralPatternError")}};function USt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(USt,"Escape");function K8e(t,e){return I0(t)?t.pattern.slice(1,t.pattern.length-1):xo(t)?`(${t.anyOf.map(r=>K8e(r,e)).join("|")})`:cA(t)?`${e}${f6}`:aA(t)?`${e}${f6}`:o2(t)?`${e}${f6}`:z1(t)?`${e}${Xpe}`:E0(t)?`${e}${USt(t.const.toString())}`:V1(t)?`${e}${Jpe}`:(()=>{throw new n0e(`Unexpected Kind '${t[st]}'`)})()}a(K8e,"Visit");function i0e(t){return`^${t.map(e=>K8e(e,"")).join("")}$`}a(i0e,"TemplateLiteralPattern");f();function u2(t){let r=aD(t).map(n=>uo(n));return CC(r)}a(u2,"TemplateLiteralToUnion");f();function lG(t,e){let r=Ss(t)?i0e(z8e(t)):i0e(t);return ct({[st]:"TemplateLiteral",type:"string",pattern:r},e)}a(lG,"TemplateLiteral");function qSt(t){return aD(t).map(r=>r.toString())}a(qSt,"FromTemplateLiteral");function HSt(t){let e=[];for(let r of t)e.push(...lp(r));return e}a(HSt,"FromUnion");function WSt(t){return[t.toString()]}a(WSt,"FromLiteral");function lp(t){return[...new Set(I0(t)?qSt(t):xo(t)?HSt(t.anyOf):E0(t)?WSt(t.const):cA(t)?["[number]"]:aA(t)?["[number]"]:[])]}a(lp,"IndexPropertyKeys");f();function $St(t,e,r){let n={};for(let o of Object.getOwnPropertyNames(e))n[o]=PI(t,lp(e[o]),r);return n}a($St,"FromProperties");function jSt(t,e,r){return $St(t,e.properties,r)}a(jSt,"FromMappedResult");function Y8e(t,e,r){let n=jSt(t,e,r);return _o(n)}a(Y8e,"IndexFromMappedResult");function X8e(t,e){return t.map(r=>Z8e(r,e))}a(X8e,"FromRest");function GSt(t){return t.filter(e=>!SI(e))}a(GSt,"FromIntersectRest");function VSt(t,e){return uG(GSt(X8e(t,e)))}a(VSt,"FromIntersect");function zSt(t){return t.some(e=>SI(e))?[]:t}a(zSt,"FromUnionRest");function KSt(t,e){return CC(zSt(X8e(t,e)))}a(KSt,"FromUnion");function YSt(t,e){return e in t?t[e]:e==="[number]"?CC(t):Ii()}a(YSt,"FromTuple");function JSt(t,e){return e==="[number]"?t:Ii()}a(JSt,"FromArray");function XSt(t,e){return e in t?t[e]:Ii()}a(XSt,"FromProperty");function Z8e(t,e){return Ka(t)?VSt(t.allOf,e):xo(t)?KSt(t.anyOf,e):T0(t)?YSt(t.items??[],e):nA(t)?JSt(t.items,e):Fc(t)?XSt(t.properties,e):Ii()}a(Z8e,"IndexFromPropertyKey");function g6(t,e){return e.map(r=>Z8e(t,r))}a(g6,"IndexFromPropertyKeys");function J8e(t,e){return CC(g6(t,e))}a(J8e,"FromSchema");function PI(t,e,r){if(uc(t)||uc(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Na(t)||!Na(e))throw new Bn(n);return Qs("Index",[t,e])}return ta(e)?Y8e(t,e,r):b0(e)?eMe(t,e,r):ct(Na(e)?J8e(t,lp(e)):J8e(t,e),r)}a(PI,"Index");function ZSt(t,e,r){return{[e]:PI(t,[e],Zs(r))}}a(ZSt,"MappedIndexPropertyKey");function e2t(t,e,r){return e.reduce((n,o)=>({...n,...ZSt(t,o,r)}),{})}a(e2t,"MappedIndexPropertyKeys");function t2t(t,e,r){return e2t(t,e.keys,r)}a(t2t,"MappedIndexProperties");function eMe(t,e,r){let n=t2t(t,e,r);return _o(n)}a(eMe,"IndexFromMappedKey");f();function lD(t,e){return ct({[st]:"Iterator",type:"Iterator",items:t},e)}a(lD,"Iterator");f();function r2t(t){let e=[];for(let r in t)cp(t[r])||e.push(r);return e}a(r2t,"RequiredKeys");function n2t(t,e){let r=r2t(t),n=r.length>0?{[st]:"Object",type:"object",properties:t,required:r}:{[st]:"Object",type:"object",properties:t};return ct(n,e)}a(n2t,"_Object");var Ho=n2t;f();function dG(t,e){return ct({[st]:"Promise",type:"Promise",item:t},e)}a(dG,"Promise");f();f();function i2t(t){return ct(Ya(t,[rA]))}a(i2t,"RemoveReadonly");function o2t(t){return ct({...t,[rA]:"Readonly"})}a(o2t,"AddReadonly");function s2t(t,e){return e===!1?i2t(t):o2t(t)}a(s2t,"ReadonlyWithFlag");function up(t,e){let r=e??!0;return ta(t)?tMe(t,r):s2t(t,r)}a(up,"Readonly");function a2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=up(t[n],e);return r}a(a2t,"FromProperties");function c2t(t,e){return a2t(t.properties,e)}a(c2t,"FromMappedResult");function tMe(t,e){let r=c2t(t,e);return _o(r)}a(tMe,"ReadonlyFromMappedResult");f();function Jm(t,e){return ct(t.length>0?{[st]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[st]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}a(Jm,"Tuple");function rMe(t,e){return t in e?Xm(t,e[t]):_o(e)}a(rMe,"FromMappedResult");function l2t(t){return{[t]:uo(t)}}a(l2t,"MappedKeyToKnownMappedResultProperties");function u2t(t){let e={};for(let r of t)e[r]=uo(r);return e}a(u2t,"MappedKeyToUnknownMappedResultProperties");function d2t(t,e){return U8e(e,t)?l2t(t):u2t(e)}a(d2t,"MappedKeyToMappedResultProperties");function f2t(t,e){let r=d2t(t,e);return rMe(t,r)}a(f2t,"FromMappedKey");function A6(t,e){return e.map(r=>Xm(t,r))}a(A6,"FromRest");function p2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=Xm(t,e[n]);return r}a(p2t,"FromProperties");function Xm(t,e){let r={...e};return cp(e)?Dd(Xm(t,Ya(e,[Gu]))):Z4(e)?up(Xm(t,Ya(e,[rA]))):ta(e)?rMe(t,e.properties):b0(e)?f2t(t,e.keys):oA(e)?iD(A6(t,e.parameters),Xm(t,e.returns),r):sA(e)?yC(A6(t,e.parameters),Xm(t,e.returns),r):i2(e)?nD(Xm(t,e.items),r):s2(e)?lD(Xm(t,e.items),r):Ka(e)?Bd(A6(t,e.allOf),r):xo(e)?qo(A6(t,e.anyOf),r):T0(e)?Jm(A6(t,e.items??[]),r):Fc(e)?Ho(p2t(t,e.properties),r):nA(e)?rD(Xm(t,e.items),r):a2(e)?dG(Xm(t,e.item),r):e}a(Xm,"FromSchemaType");function m2t(t,e){let r={};for(let n of t)r[n]=Xm(n,e);return r}a(m2t,"MappedFunctionReturnType");function nMe(t,e,r){let n=Na(t)?lp(t):t,o=e({[st]:"MappedKey",keys:n}),s=m2t(n,o);return Ho(s,r)}a(nMe,"Mapped");f();function h2t(t){return ct(Ya(t,[Gu]))}a(h2t,"RemoveOptional");function g2t(t){return ct({...t,[Gu]:"Optional"})}a(g2t,"AddOptional");function A2t(t,e){return e===!1?h2t(t):g2t(t)}a(A2t,"OptionalWithFlag");function Dd(t,e){let r=e??!0;return ta(t)?iMe(t,r):A2t(t,r)}a(Dd,"Optional");function y2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Dd(t[n],e);return r}a(y2t,"FromProperties");function C2t(t,e){return y2t(t.properties,e)}a(C2t,"FromMappedResult");function iMe(t,e){let r=C2t(t,e);return _o(r)}a(iMe,"OptionalFromMappedResult");f();function y6(t,e={}){let r=t.every(o=>Fc(o)),n=Na(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return ct(e.unevaluatedProperties===!1||Na(e.unevaluatedProperties)||r?{...n,[st]:"Intersect",type:"object",allOf:t}:{...n,[st]:"Intersect",allOf:t},e)}a(y6,"IntersectCreate");function v2t(t){return t.every(e=>cp(e))}a(v2t,"IsIntersectOptional");function x2t(t){return Ya(t,[Gu])}a(x2t,"RemoveOptionalFromType");function oMe(t){return t.map(e=>cp(e)?x2t(e):e)}a(oMe,"RemoveOptionalFromRest");function E2t(t,e){return v2t(t)?Dd(y6(oMe(t),e)):y6(oMe(t),e)}a(E2t,"ResolveIntersect");function uG(t,e={}){if(t.length===1)return ct(t[0],e);if(t.length===0)return Ii(e);if(t.some(r=>Uo(r)))throw new Error("Cannot intersect transform types");return E2t(t,e)}a(uG,"IntersectEvaluated");f();function Bd(t,e){if(t.length===1)return ct(t[0],e);if(t.length===0)return Ii(e);if(t.some(r=>Uo(r)))throw new Error("Cannot intersect transform types");return y6(t,e)}a(Bd,"Intersect");f();function Zm(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new Bn("Ref: $ref must be a string");return ct({[st]:"Ref",$ref:e},r)}a(Zm,"Ref");function b2t(t,e){return Qs("Awaited",[Qs(t,e)])}a(b2t,"FromComputed");function I2t(t){return Qs("Awaited",[Zm(t)])}a(I2t,"FromRef");function T2t(t){return Bd(sMe(t))}a(T2t,"FromIntersect");function w2t(t){return qo(sMe(t))}a(w2t,"FromUnion");function _2t(t){return uD(t)}a(_2t,"FromPromise");function sMe(t){return t.map(e=>uD(e))}a(sMe,"FromRest");function uD(t,e){return ct(iA(t)?b2t(t.target,t.parameters):Ka(t)?T2t(t.allOf):xo(t)?w2t(t.anyOf):a2(t)?_2t(t.item):uc(t)?I2t(t.$ref):t,e)}a(uD,"Awaited");f();f();f();f();function aMe(t){let e=[];for(let r of t)e.push(dp(r));return e}a(aMe,"FromRest");function S2t(t){let e=aMe(t);return W8e(e)}a(S2t,"FromIntersect");function R2t(t){let e=aMe(t);return H8e(e)}a(R2t,"FromUnion");function k2t(t){return t.map((e,r)=>r.toString())}a(k2t,"FromTuple");function P2t(t){return["[number]"]}a(P2t,"FromArray");function D2t(t){return globalThis.Object.getOwnPropertyNames(t)}a(D2t,"FromProperties");function B2t(t){return o0e?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}a(B2t,"FromPatternProperties");function dp(t){return Ka(t)?S2t(t.allOf):xo(t)?R2t(t.anyOf):T0(t)?k2t(t.items??[]):nA(t)?P2t(t.items):Fc(t)?D2t(t.properties):c2(t)?B2t(t.patternProperties):[]}a(dp,"KeyOfPropertyKeys");var o0e=!1;function X1(t){o0e=!0;let e=dp(t);return o0e=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}a(X1,"KeyOfPattern");function N2t(t,e){return Qs("KeyOf",[Qs(t,e)])}a(N2t,"FromComputed");function M2t(t){return Qs("KeyOf",[Zm(t)])}a(M2t,"FromRef");function L2t(t,e){let r=dp(t),n=F2t(r),o=CC(n);return ct(o,e)}a(L2t,"KeyOfFromType");function F2t(t){return t.map(e=>e==="[number]"?Ym():uo(e))}a(F2t,"KeyOfPropertyKeysToRest");function dD(t,e){return iA(t)?N2t(t.target,t.parameters):uc(t)?M2t(t.$ref):ta(t)?cMe(t,e):L2t(t,e)}a(dD,"KeyOf");function O2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=dD(t[n],Zs(e));return r}a(O2t,"FromProperties");function Q2t(t,e){return O2t(t.properties,e)}a(Q2t,"FromMappedResult");function cMe(t,e){let r=Q2t(t,e);return _o(r)}a(cMe,"KeyOfFromMappedResult");f();function fG(t){let e=dp(t),r=g6(t,e);return e.map((n,o)=>[e[o],r[o]])}a(fG,"KeyOfPropertyEntries");function U2t(t){let e=[];for(let r of t)e.push(...dp(r));return q8e(e)}a(U2t,"CompositeKeys");function q2t(t){return t.filter(e=>!SI(e))}a(q2t,"FilterNever");function H2t(t,e){let r=[];for(let n of t)r.push(...g6(n,[e]));return q2t(r)}a(H2t,"CompositeProperty");function W2t(t,e){let r={};for(let n of e)r[n]=uG(H2t(t,n));return r}a(W2t,"CompositeProperties");function lMe(t,e){let r=U2t(t),n=W2t(t,r);return Ho(n,e)}a(lMe,"Composite");f();f();function pG(t){return ct({[st]:"Date",type:"Date"},t)}a(pG,"Date");f();function mG(t){return ct({[st]:"Null",type:"null"},t)}a(mG,"Null");f();function hG(t){return ct({[st]:"Symbol",type:"symbol"},t)}a(hG,"Symbol");f();function gG(t){return ct({[st]:"Undefined",type:"undefined"},t)}a(gG,"Undefined");f();function AG(t){return ct({[st]:"Uint8Array",type:"Uint8Array"},t)}a(AG,"Uint8Array");f();function uA(t){return ct({[st]:"Unknown"},t)}a(uA,"Unknown");function $2t(t){return t.map(e=>s0e(e,!1))}a($2t,"FromArray");function j2t(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=up(s0e(t[r],!1));return e}a(j2t,"FromProperties");function yG(t,e){return e===!0?t:up(t)}a(yG,"ConditionalReadonly");function s0e(t,e){return Ope(t)?yG(kI(),e):Upe(t)?yG(kI(),e):Mc(t)?up(Jm($2t(t))):$1(t)?AG():n2(t)?pG():ds(t)?yG(Ho(j2t(t)),e):Qpe(t)?yG(yC([],uA()),e):Lc(t)?gG():qpe(t)?mG():Hpe(t)?hG():o6(t)?cD():v0(t)?uo(t):W1(t)?uo(t):Ss(t)?uo(t):Ho({})}a(s0e,"FromValue");function uMe(t,e){return ct(s0e(t,!0),e)}a(uMe,"Const");f();function dMe(t,e){return oA(t)?Jm(t.parameters,e):Ii(e)}a(dMe,"ConstructorParameters");f();function fMe(t,e){if(Lc(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(s=>isNaN(s)).map(s=>t[s]),o=[...new Set(r)].map(s=>uo(s));return qo(o,{...e,[Km]:"Enum"})}a(fMe,"Enum");f();f();f();var c0e=class extends Bn{static{a(this,"ExtendsResolverError")}},lt;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(lt||(lt={}));function eh(t){return t===lt.False?t:lt.True}a(eh,"IntoBooleanResult");function fD(t){throw new c0e(t)}a(fD,"Throw");function il(t){return Fe.IsNever(t)||Fe.IsIntersect(t)||Fe.IsUnion(t)||Fe.IsUnknown(t)||Fe.IsAny(t)}a(il,"IsStructuralRight");function ol(t,e){return Fe.IsNever(e)?CMe(t,e):Fe.IsIntersect(e)?CG(t,e):Fe.IsUnion(e)?f0e(t,e):Fe.IsUnknown(e)?bMe(t,e):Fe.IsAny(e)?d0e(t,e):fD("StructuralRight")}a(ol,"StructuralRight");function d0e(t,e){return lt.True}a(d0e,"FromAnyRight");function G2t(t,e){return Fe.IsIntersect(e)?CG(t,e):Fe.IsUnion(e)&&e.anyOf.some(r=>Fe.IsAny(r)||Fe.IsUnknown(r))?lt.True:Fe.IsUnion(e)?lt.Union:Fe.IsUnknown(e)||Fe.IsAny(e)?lt.True:lt.Union}a(G2t,"FromAny");function V2t(t,e){return Fe.IsUnknown(t)?lt.False:Fe.IsAny(t)?lt.Union:Fe.IsNever(t)?lt.True:lt.False}a(V2t,"FromArrayRight");function z2t(t,e){return Fe.IsObject(e)&&vG(e)?lt.True:il(e)?ol(t,e):Fe.IsArray(e)?eh(ms(t.items,e.items)):lt.False}a(z2t,"FromArray");function K2t(t,e){return il(e)?ol(t,e):Fe.IsAsyncIterator(e)?eh(ms(t.items,e.items)):lt.False}a(K2t,"FromAsyncIterator");function Y2t(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsBigInt(e)?lt.True:lt.False}a(Y2t,"FromBigInt");function AMe(t,e){return Fe.IsLiteralBoolean(t)||Fe.IsBoolean(t)?lt.True:lt.False}a(AMe,"FromBooleanRight");function J2t(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsBoolean(e)?lt.True:lt.False}a(J2t,"FromBoolean");function X2t(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsConstructor(e)?t.parameters.length>e.parameters.length?lt.False:t.parameters.every((r,n)=>eh(ms(e.parameters[n],r))===lt.True)?eh(ms(t.returns,e.returns)):lt.False:lt.False}a(X2t,"FromConstructor");function Z2t(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsDate(e)?lt.True:lt.False}a(Z2t,"FromDate");function eRt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsFunction(e)?t.parameters.length>e.parameters.length?lt.False:t.parameters.every((r,n)=>eh(ms(e.parameters[n],r))===lt.True)?eh(ms(t.returns,e.returns)):lt.False:lt.False}a(eRt,"FromFunction");function yMe(t,e){return Fe.IsLiteral(t)&&Pd.IsNumber(t.const)||Fe.IsNumber(t)||Fe.IsInteger(t)?lt.True:lt.False}a(yMe,"FromIntegerRight");function tRt(t,e){return Fe.IsInteger(e)||Fe.IsNumber(e)?lt.True:il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):lt.False}a(tRt,"FromInteger");function CG(t,e){return e.allOf.every(r=>ms(t,r)===lt.True)?lt.True:lt.False}a(CG,"FromIntersectRight");function rRt(t,e){return t.allOf.some(r=>ms(r,e)===lt.True)?lt.True:lt.False}a(rRt,"FromIntersect");function nRt(t,e){return il(e)?ol(t,e):Fe.IsIterator(e)?eh(ms(t.items,e.items)):lt.False}a(nRt,"FromIterator");function iRt(t,e){return Fe.IsLiteral(e)&&e.const===t.const?lt.True:il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsString(e)?EMe(t,e):Fe.IsNumber(e)?vMe(t,e):Fe.IsInteger(e)?yMe(t,e):Fe.IsBoolean(e)?AMe(t,e):lt.False}a(iRt,"FromLiteral");function CMe(t,e){return lt.False}a(CMe,"FromNeverRight");function oRt(t,e){return lt.True}a(oRt,"FromNever");function pMe(t){let[e,r]=[t,0];for(;Fe.IsNot(e);)e=e.not,r+=1;return r%2===0?e:uA()}a(pMe,"UnwrapTNot");function sRt(t,e){return Fe.IsNot(t)?ms(pMe(t),e):Fe.IsNot(e)?ms(t,pMe(e)):fD("Invalid fallthrough for Not")}a(sRt,"FromNot");function aRt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsNull(e)?lt.True:lt.False}a(aRt,"FromNull");function vMe(t,e){return Fe.IsLiteralNumber(t)||Fe.IsNumber(t)||Fe.IsInteger(t)?lt.True:lt.False}a(vMe,"FromNumberRight");function cRt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsInteger(e)||Fe.IsNumber(e)?lt.True:lt.False}a(cRt,"FromNumber");function fp(t,e){return Object.getOwnPropertyNames(t.properties).length===e}a(fp,"IsObjectPropertyCount");function mMe(t){return vG(t)}a(mMe,"IsObjectStringLike");function hMe(t){return fp(t,0)||fp(t,1)&&"description"in t.properties&&Fe.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Fe.IsString(t.properties.description.anyOf[0])&&Fe.IsUndefined(t.properties.description.anyOf[1])||Fe.IsString(t.properties.description.anyOf[1])&&Fe.IsUndefined(t.properties.description.anyOf[0]))}a(hMe,"IsObjectSymbolLike");function a0e(t){return fp(t,0)}a(a0e,"IsObjectNumberLike");function gMe(t){return fp(t,0)}a(gMe,"IsObjectBooleanLike");function lRt(t){return fp(t,0)}a(lRt,"IsObjectBigIntLike");function uRt(t){return fp(t,0)}a(uRt,"IsObjectDateLike");function dRt(t){return vG(t)}a(dRt,"IsObjectUint8ArrayLike");function fRt(t){let e=Ym();return fp(t,0)||fp(t,1)&&"length"in t.properties&&eh(ms(t.properties.length,e))===lt.True}a(fRt,"IsObjectFunctionLike");function pRt(t){return fp(t,0)}a(pRt,"IsObjectConstructorLike");function vG(t){let e=Ym();return fp(t,0)||fp(t,1)&&"length"in t.properties&&eh(ms(t.properties.length,e))===lt.True}a(vG,"IsObjectArrayLike");function mRt(t){let e=yC([kI()],kI());return fp(t,0)||fp(t,1)&&"then"in t.properties&&eh(ms(t.properties.then,e))===lt.True}a(mRt,"IsObjectPromiseLike");function xMe(t,e){return ms(t,e)===lt.False||Fe.IsOptional(t)&&!Fe.IsOptional(e)?lt.False:lt.True}a(xMe,"Property");function Nd(t,e){return Fe.IsUnknown(t)?lt.False:Fe.IsAny(t)?lt.Union:Fe.IsNever(t)||Fe.IsLiteralString(t)&&mMe(e)||Fe.IsLiteralNumber(t)&&a0e(e)||Fe.IsLiteralBoolean(t)&&gMe(e)||Fe.IsSymbol(t)&&hMe(e)||Fe.IsBigInt(t)&&lRt(e)||Fe.IsString(t)&&mMe(e)||Fe.IsSymbol(t)&&hMe(e)||Fe.IsNumber(t)&&a0e(e)||Fe.IsInteger(t)&&a0e(e)||Fe.IsBoolean(t)&&gMe(e)||Fe.IsUint8Array(t)&&dRt(e)||Fe.IsDate(t)&&uRt(e)||Fe.IsConstructor(t)&&pRt(e)||Fe.IsFunction(t)&&fRt(e)?lt.True:Fe.IsRecord(t)&&Fe.IsString(l0e(t))?e[Km]==="Record"?lt.True:lt.False:Fe.IsRecord(t)&&Fe.IsNumber(l0e(t))?fp(e,0)?lt.True:lt.False:lt.False}a(Nd,"FromObjectRight");function hRt(t,e){return il(e)?ol(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Fe.IsOptional(e.properties[r]))return lt.False;if(Fe.IsOptional(e.properties[r]))return lt.True;if(xMe(t.properties[r],e.properties[r])===lt.False)return lt.False}return lt.True})():lt.False}a(hRt,"FromObject");function gRt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)&&mRt(e)?lt.True:Fe.IsPromise(e)?eh(ms(t.item,e.item)):lt.False}a(gRt,"FromPromise");function l0e(t){return gC in t.patternProperties?Ym():AC in t.patternProperties?Cf():fD("Unknown record key pattern")}a(l0e,"RecordKey");function u0e(t){return gC in t.patternProperties?t.patternProperties[gC]:AC in t.patternProperties?t.patternProperties[AC]:fD("Unable to get record value schema")}a(u0e,"RecordValue");function th(t,e){let[r,n]=[l0e(e),u0e(e)];return Fe.IsLiteralString(t)&&Fe.IsNumber(r)&&eh(ms(t,n))===lt.True?lt.True:Fe.IsUint8Array(t)&&Fe.IsNumber(r)||Fe.IsString(t)&&Fe.IsNumber(r)||Fe.IsArray(t)&&Fe.IsNumber(r)?ms(t,n):Fe.IsObject(t)?(()=>{for(let o of Object.getOwnPropertyNames(t.properties))if(xMe(n,t.properties[o])===lt.False)return lt.False;return lt.True})():lt.False}a(th,"FromRecordRight");function ARt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?ms(u0e(t),u0e(e)):lt.False}a(ARt,"FromRecord");function yRt(t,e){let r=Fe.IsRegExp(t)?Cf():t,n=Fe.IsRegExp(e)?Cf():e;return ms(r,n)}a(yRt,"FromRegExp");function EMe(t,e){return Fe.IsLiteral(t)&&Pd.IsString(t.const)||Fe.IsString(t)?lt.True:lt.False}a(EMe,"FromStringRight");function CRt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsString(e)?lt.True:lt.False}a(CRt,"FromString");function vRt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsSymbol(e)?lt.True:lt.False}a(vRt,"FromSymbol");function xRt(t,e){return Fe.IsTemplateLiteral(t)?ms(u2(t),e):Fe.IsTemplateLiteral(e)?ms(t,u2(e)):fD("Invalid fallthrough for TemplateLiteral")}a(xRt,"FromTemplateLiteral");function ERt(t,e){return Fe.IsArray(e)&&t.items!==void 0&&t.items.every(r=>ms(r,e.items)===lt.True)}a(ERt,"IsArrayOfTuple");function bRt(t,e){return Fe.IsNever(t)?lt.True:Fe.IsUnknown(t)?lt.False:Fe.IsAny(t)?lt.Union:lt.False}a(bRt,"FromTupleRight");function IRt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)&&vG(e)||Fe.IsArray(e)&&ERt(t,e)?lt.True:Fe.IsTuple(e)?Pd.IsUndefined(t.items)&&!Pd.IsUndefined(e.items)||!Pd.IsUndefined(t.items)&&Pd.IsUndefined(e.items)?lt.False:Pd.IsUndefined(t.items)&&!Pd.IsUndefined(e.items)||t.items.every((r,n)=>ms(r,e.items[n])===lt.True)?lt.True:lt.False:lt.False}a(IRt,"FromTuple");function TRt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsUint8Array(e)?lt.True:lt.False}a(TRt,"FromUint8Array");function wRt(t,e){return il(e)?ol(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsRecord(e)?th(t,e):Fe.IsVoid(e)?RRt(t,e):Fe.IsUndefined(e)?lt.True:lt.False}a(wRt,"FromUndefined");function f0e(t,e){return e.anyOf.some(r=>ms(t,r)===lt.True)?lt.True:lt.False}a(f0e,"FromUnionRight");function _Rt(t,e){return t.anyOf.every(r=>ms(r,e)===lt.True)?lt.True:lt.False}a(_Rt,"FromUnion");function bMe(t,e){return lt.True}a(bMe,"FromUnknownRight");function SRt(t,e){return Fe.IsNever(e)?CMe(t,e):Fe.IsIntersect(e)?CG(t,e):Fe.IsUnion(e)?f0e(t,e):Fe.IsAny(e)?d0e(t,e):Fe.IsString(e)?EMe(t,e):Fe.IsNumber(e)?vMe(t,e):Fe.IsInteger(e)?yMe(t,e):Fe.IsBoolean(e)?AMe(t,e):Fe.IsArray(e)?V2t(t,e):Fe.IsTuple(e)?bRt(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsUnknown(e)?lt.True:lt.False}a(SRt,"FromUnknown");function RRt(t,e){return Fe.IsUndefined(t)||Fe.IsUndefined(t)?lt.True:lt.False}a(RRt,"FromVoidRight");function kRt(t,e){return Fe.IsIntersect(e)?CG(t,e):Fe.IsUnion(e)?f0e(t,e):Fe.IsUnknown(e)?bMe(t,e):Fe.IsAny(e)?d0e(t,e):Fe.IsObject(e)?Nd(t,e):Fe.IsVoid(e)?lt.True:lt.False}a(kRt,"FromVoid");function ms(t,e){return Fe.IsTemplateLiteral(t)||Fe.IsTemplateLiteral(e)?xRt(t,e):Fe.IsRegExp(t)||Fe.IsRegExp(e)?yRt(t,e):Fe.IsNot(t)||Fe.IsNot(e)?sRt(t,e):Fe.IsAny(t)?G2t(t,e):Fe.IsArray(t)?z2t(t,e):Fe.IsBigInt(t)?Y2t(t,e):Fe.IsBoolean(t)?J2t(t,e):Fe.IsAsyncIterator(t)?K2t(t,e):Fe.IsConstructor(t)?X2t(t,e):Fe.IsDate(t)?Z2t(t,e):Fe.IsFunction(t)?eRt(t,e):Fe.IsInteger(t)?tRt(t,e):Fe.IsIntersect(t)?rRt(t,e):Fe.IsIterator(t)?nRt(t,e):Fe.IsLiteral(t)?iRt(t,e):Fe.IsNever(t)?oRt(t,e):Fe.IsNull(t)?aRt(t,e):Fe.IsNumber(t)?cRt(t,e):Fe.IsObject(t)?hRt(t,e):Fe.IsRecord(t)?ARt(t,e):Fe.IsString(t)?CRt(t,e):Fe.IsSymbol(t)?vRt(t,e):Fe.IsTuple(t)?IRt(t,e):Fe.IsPromise(t)?gRt(t,e):Fe.IsUint8Array(t)?TRt(t,e):Fe.IsUndefined(t)?wRt(t,e):Fe.IsUnion(t)?_Rt(t,e):Fe.IsUnknown(t)?SRt(t,e):Fe.IsVoid(t)?kRt(t,e):fD(`Unknown left type operand '${t[st]}'`)}a(ms,"Visit");function DI(t,e){return ms(t,e)}a(DI,"ExtendsCheck");f();f();f();function PRt(t,e,r,n,o){let s={};for(let c of globalThis.Object.getOwnPropertyNames(t))s[c]=pD(t[c],e,r,n,Zs(o));return s}a(PRt,"FromProperties");function DRt(t,e,r,n,o){return PRt(t.properties,e,r,n,o)}a(DRt,"FromMappedResult");function IMe(t,e,r,n,o){let s=DRt(t,e,r,n,o);return _o(s)}a(IMe,"ExtendsFromMappedResult");function BRt(t,e,r,n){let o=DI(t,e);return o===lt.Union?qo([r,n]):o===lt.True?r:n}a(BRt,"ExtendsResolve");function pD(t,e,r,n,o){return ta(t)?IMe(t,e,r,n,o):b0(t)?ct(TMe(t,e,r,n,o)):ct(BRt(t,e,r,n),o)}a(pD,"Extends");function NRt(t,e,r,n,o){return{[t]:pD(uo(t),e,r,n,Zs(o))}}a(NRt,"FromPropertyKey");function MRt(t,e,r,n,o){return t.reduce((s,c)=>({...s,...NRt(c,e,r,n,o)}),{})}a(MRt,"FromPropertyKeys");function LRt(t,e,r,n,o){return MRt(t.keys,e,r,n,o)}a(LRt,"FromMappedKey");function TMe(t,e,r,n,o){let s=LRt(t,e,r,n,o);return _o(s)}a(TMe,"ExtendsFromMappedKey");f();function FRt(t){return t.allOf.every(e=>Z1(e))}a(FRt,"Intersect");function ORt(t){return t.anyOf.some(e=>Z1(e))}a(ORt,"Union");function QRt(t){return!Z1(t.not)}a(QRt,"Not");function Z1(t){return t[st]==="Intersect"?FRt(t):t[st]==="Union"?ORt(t):t[st]==="Not"?QRt(t):t[st]==="Undefined"}a(Z1,"ExtendsUndefinedCheck");f();function wMe(t,e){return mD(u2(t),e)}a(wMe,"ExcludeFromTemplateLiteral");function URt(t,e){let r=t.filter(n=>DI(n,e)===lt.False);return r.length===1?r[0]:qo(r)}a(URt,"ExcludeRest");function mD(t,e,r={}){return I0(t)?ct(wMe(t,e),r):ta(t)?ct(_Me(t,e),r):ct(xo(t)?URt(t.anyOf,e):DI(t,e)!==lt.False?Ii():t,r)}a(mD,"Exclude");function qRt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=mD(t[n],e);return r}a(qRt,"FromProperties");function HRt(t,e){return qRt(t.properties,e)}a(HRt,"FromMappedResult");function _Me(t,e){let r=HRt(t,e);return _o(r)}a(_Me,"ExcludeFromMappedResult");f();f();f();function SMe(t,e){return hD(u2(t),e)}a(SMe,"ExtractFromTemplateLiteral");function WRt(t,e){let r=t.filter(n=>DI(n,e)!==lt.False);return r.length===1?r[0]:qo(r)}a(WRt,"ExtractRest");function hD(t,e,r){return I0(t)?ct(SMe(t,e),r):ta(t)?ct(RMe(t,e),r):ct(xo(t)?WRt(t.anyOf,e):DI(t,e)!==lt.False?t:Ii(),r)}a(hD,"Extract");function $Rt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=hD(t[n],e);return r}a($Rt,"FromProperties");function jRt(t,e){return $Rt(t.properties,e)}a(jRt,"FromMappedResult");function RMe(t,e){let r=jRt(t,e);return _o(r)}a(RMe,"ExtractFromMappedResult");f();function kMe(t,e){return oA(t)?ct(t.returns,e):Ii(e)}a(kMe,"InstanceType");f();f();function xG(t){return up(Dd(t))}a(xG,"ReadonlyOptional");f();function d2(t,e,r){return ct({[st]:"Record",type:"object",patternProperties:{[t]:e}},r)}a(d2,"RecordCreateFromPattern");function p0e(t,e,r){let n={};for(let o of t)n[o]=e;return Ho(n,{...r,[Km]:"Record"})}a(p0e,"RecordCreateFromKeys");function GRt(t,e,r){return aG(t)?p0e(lp(t),e,r):d2(t.pattern,e,r)}a(GRt,"FromTemplateLiteralKey");function VRt(t,e,r){return p0e(lp(qo(t)),e,r)}a(VRt,"FromUnionKey");function zRt(t,e,r){return p0e([t.toString()],e,r)}a(zRt,"FromLiteralKey");function KRt(t,e,r){return d2(t.source,e,r)}a(KRt,"FromRegExpKey");function YRt(t,e,r){let n=Lc(t.pattern)?AC:t.pattern;return d2(n,e,r)}a(YRt,"FromStringKey");function JRt(t,e,r){return d2(AC,e,r)}a(JRt,"FromAnyKey");function XRt(t,e,r){return d2(Q8e,e,r)}a(XRt,"FromNeverKey");function ZRt(t,e,r){return Ho({true:e,false:e},r)}a(ZRt,"FromBooleanKey");function ekt(t,e,r){return d2(gC,e,r)}a(ekt,"FromIntegerKey");function tkt(t,e,r){return d2(gC,e,r)}a(tkt,"FromNumberKey");function EG(t,e,r={}){return xo(t)?VRt(t.anyOf,e,r):I0(t)?GRt(t,e,r):E0(t)?zRt(t.const,e,r):V1(t)?ZRt(t,e,r):aA(t)?ekt(t,e,r):cA(t)?tkt(t,e,r):Gpe(t)?KRt(t,e,r):z1(t)?YRt(t,e,r):$pe(t)?JRt(t,e,r):SI(t)?XRt(t,e,r):Ii(r)}a(EG,"Record");function bG(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}a(bG,"RecordPattern");function PMe(t){let e=bG(t);return e===AC?Cf():e===gC?Ym():Cf({pattern:e})}a(PMe,"RecordKey");function IG(t){return t.patternProperties[bG(t)]}a(IG,"RecordValue");function rkt(t,e){return e.parameters=C6(t,e.parameters),e.returns=dA(t,e.returns),e}a(rkt,"FromConstructor");function nkt(t,e){return e.parameters=C6(t,e.parameters),e.returns=dA(t,e.returns),e}a(nkt,"FromFunction");function ikt(t,e){return e.allOf=C6(t,e.allOf),e}a(ikt,"FromIntersect");function okt(t,e){return e.anyOf=C6(t,e.anyOf),e}a(okt,"FromUnion");function skt(t,e){return Lc(e.items)||(e.items=C6(t,e.items)),e}a(skt,"FromTuple");function akt(t,e){return e.items=dA(t,e.items),e}a(akt,"FromArray");function ckt(t,e){return e.items=dA(t,e.items),e}a(ckt,"FromAsyncIterator");function lkt(t,e){return e.items=dA(t,e.items),e}a(lkt,"FromIterator");function ukt(t,e){return e.item=dA(t,e.item),e}a(ukt,"FromPromise");function dkt(t,e){let r=hkt(t,e.properties);return{...e,...Ho(r)}}a(dkt,"FromObject");function fkt(t,e){let r=dA(t,PMe(e)),n=dA(t,IG(e)),o=EG(r,n);return{...e,...o}}a(fkt,"FromRecord");function pkt(t,e){return e.index in t?t[e.index]:uA()}a(pkt,"FromArgument");function mkt(t,e){let r=Z4(e),n=cp(e),o=dA(t,e);return r&&n?xG(o):r&&!n?up(o):!r&&n?Dd(o):o}a(mkt,"FromProperty");function hkt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:mkt(t,e[n])}),{})}a(hkt,"FromProperties");function C6(t,e){return e.map(r=>dA(t,r))}a(C6,"FromTypes");function dA(t,e){return oA(e)?rkt(t,e):sA(e)?nkt(t,e):Ka(e)?ikt(t,e):xo(e)?okt(t,e):T0(e)?skt(t,e):nA(e)?akt(t,e):i2(e)?ckt(t,e):s2(e)?lkt(t,e):a2(e)?ukt(t,e):Fc(e)?dkt(t,e):c2(e)?fkt(t,e):jpe(e)?pkt(t,e):e}a(dA,"FromType");function DMe(t,e){return dA(e,J4(t))}a(DMe,"Instantiate");f();function BMe(t){return ct({[st]:"Integer",type:"integer"},t)}a(BMe,"Integer");f();f();f();function gkt(t,e,r){return{[t]:fA(uo(t),e,Zs(r))}}a(gkt,"MappedIntrinsicPropertyKey");function Akt(t,e,r){return t.reduce((o,s)=>({...o,...gkt(s,e,r)}),{})}a(Akt,"MappedIntrinsicPropertyKeys");function ykt(t,e,r){return Akt(t.keys,e,r)}a(ykt,"MappedIntrinsicProperties");function NMe(t,e,r){let n=ykt(t,e,r);return _o(n)}a(NMe,"IntrinsicFromMappedKey");function Ckt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}a(Ckt,"ApplyUncapitalize");function vkt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}a(vkt,"ApplyCapitalize");function xkt(t){return t.toUpperCase()}a(xkt,"ApplyUppercase");function Ekt(t){return t.toLowerCase()}a(Ekt,"ApplyLowercase");function bkt(t,e,r){let n=sD(t.pattern);if(!l2(n))return{...t,pattern:MMe(t.pattern,e)};let c=[...h6(n)].map(d=>uo(d)),l=LMe(c,e),u=qo(l);return lG([u],r)}a(bkt,"FromTemplateLiteral");function MMe(t,e){return typeof t=="string"?e==="Uncapitalize"?Ckt(t):e==="Capitalize"?vkt(t):e==="Uppercase"?xkt(t):e==="Lowercase"?Ekt(t):t:t.toString()}a(MMe,"FromLiteralValue");function LMe(t,e){return t.map(r=>fA(r,e))}a(LMe,"FromRest");function fA(t,e,r={}){return b0(t)?NMe(t,e,r):I0(t)?bkt(t,e,r):xo(t)?qo(LMe(t.anyOf,e),r):E0(t)?uo(MMe(t.const,e),r):ct(t,r)}a(fA,"Intrinsic");function FMe(t,e={}){return fA(t,"Capitalize",e)}a(FMe,"Capitalize");f();function OMe(t,e={}){return fA(t,"Lowercase",e)}a(OMe,"Lowercase");f();function QMe(t,e={}){return fA(t,"Uncapitalize",e)}a(QMe,"Uncapitalize");f();function UMe(t,e={}){return fA(t,"Uppercase",e)}a(UMe,"Uppercase");f();f();f();f();f();function Ikt(t,e,r){let n={};for(let o of globalThis.Object.getOwnPropertyNames(t))n[o]=BI(t[o],e,Zs(r));return n}a(Ikt,"FromProperties");function Tkt(t,e,r){return Ikt(t.properties,e,r)}a(Tkt,"FromMappedResult");function qMe(t,e,r){let n=Tkt(t,e,r);return _o(n)}a(qMe,"OmitFromMappedResult");function wkt(t,e){return t.map(r=>m0e(r,e))}a(wkt,"FromIntersect");function _kt(t,e){return t.map(r=>m0e(r,e))}a(_kt,"FromUnion");function Skt(t,e){let{[e]:r,...n}=t;return n}a(Skt,"FromProperty");function Rkt(t,e){return e.reduce((r,n)=>Skt(r,n),t)}a(Rkt,"FromProperties");function kkt(t,e){let r=Ya(t,[Ba,"$id","required","properties"]),n=Rkt(t.properties,e);return Ho(n,r)}a(kkt,"FromObject");function Pkt(t){let e=t.reduce((r,n)=>iG(n)?[...r,uo(n)]:r,[]);return qo(e)}a(Pkt,"UnionFromPropertyKeys");function m0e(t,e){return Ka(t)?Bd(wkt(t.allOf,e)):xo(t)?qo(_kt(t.anyOf,e)):Fc(t)?kkt(t,e):Ho({})}a(m0e,"OmitResolve");function BI(t,e,r){let n=Mc(e)?Pkt(e):e,o=Na(e)?lp(e):e,s=uc(t),c=uc(e);return ta(t)?qMe(t,o,r):b0(e)?HMe(t,e,r):s&&c?Qs("Omit",[t,n],r):!s&&c?Qs("Omit",[t,n],r):s&&!c?Qs("Omit",[t,n],r):ct({...m0e(t,o),...r})}a(BI,"Omit");function Dkt(t,e,r){return{[e]:BI(t,[e],Zs(r))}}a(Dkt,"FromPropertyKey");function Bkt(t,e,r){return e.reduce((n,o)=>({...n,...Dkt(t,o,r)}),{})}a(Bkt,"FromPropertyKeys");function Nkt(t,e,r){return Bkt(t,e.keys,r)}a(Nkt,"FromMappedKey");function HMe(t,e,r){let n=Nkt(t,e,r);return _o(n)}a(HMe,"OmitFromMappedKey");f();f();f();function Mkt(t,e,r){let n={};for(let o of globalThis.Object.getOwnPropertyNames(t))n[o]=NI(t[o],e,Zs(r));return n}a(Mkt,"FromProperties");function Lkt(t,e,r){return Mkt(t.properties,e,r)}a(Lkt,"FromMappedResult");function WMe(t,e,r){let n=Lkt(t,e,r);return _o(n)}a(WMe,"PickFromMappedResult");function Fkt(t,e){return t.map(r=>h0e(r,e))}a(Fkt,"FromIntersect");function Okt(t,e){return t.map(r=>h0e(r,e))}a(Okt,"FromUnion");function Qkt(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}a(Qkt,"FromProperties");function Ukt(t,e){let r=Ya(t,[Ba,"$id","required","properties"]),n=Qkt(t.properties,e);return Ho(n,r)}a(Ukt,"FromObject");function qkt(t){let e=t.reduce((r,n)=>iG(n)?[...r,uo(n)]:r,[]);return qo(e)}a(qkt,"UnionFromPropertyKeys");function h0e(t,e){return Ka(t)?Bd(Fkt(t.allOf,e)):xo(t)?qo(Okt(t.anyOf,e)):Fc(t)?Ukt(t,e):Ho({})}a(h0e,"PickResolve");function NI(t,e,r){let n=Mc(e)?qkt(e):e,o=Na(e)?lp(e):e,s=uc(t),c=uc(e);return ta(t)?WMe(t,o,r):b0(e)?$Me(t,e,r):s&&c?Qs("Pick",[t,n],r):!s&&c?Qs("Pick",[t,n],r):s&&!c?Qs("Pick",[t,n],r):ct({...h0e(t,o),...r})}a(NI,"Pick");function Hkt(t,e,r){return{[e]:NI(t,[e],Zs(r))}}a(Hkt,"FromPropertyKey");function Wkt(t,e,r){return e.reduce((n,o)=>({...n,...Hkt(t,o,r)}),{})}a(Wkt,"FromPropertyKeys");function $kt(t,e,r){return Wkt(t,e.keys,r)}a($kt,"FromMappedKey");function $Me(t,e,r){let n=$kt(t,e,r);return _o(n)}a($Me,"PickFromMappedKey");f();f();function jkt(t,e){return Qs("Partial",[Qs(t,e)])}a(jkt,"FromComputed");function Gkt(t){return Qs("Partial",[Zm(t)])}a(Gkt,"FromRef");function Vkt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Dd(t[r]);return e}a(Vkt,"FromProperties");function zkt(t){let e=Ya(t,[Ba,"$id","required","properties"]),r=Vkt(t.properties);return Ho(r,e)}a(zkt,"FromObject");function jMe(t){return t.map(e=>GMe(e))}a(jMe,"FromRest");function GMe(t){return iA(t)?jkt(t.target,t.parameters):uc(t)?Gkt(t.$ref):Ka(t)?Bd(jMe(t.allOf)):xo(t)?qo(jMe(t.anyOf)):Fc(t)?zkt(t):o2(t)||V1(t)||aA(t)||E0(t)||c6(t)||cA(t)||z1(t)||l6(t)||K1(t)?t:Ho({})}a(GMe,"PartialResolve");function gD(t,e){return ta(t)?VMe(t,e):ct({...GMe(t),...e})}a(gD,"Partial");function Kkt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=gD(t[n],Zs(e));return r}a(Kkt,"FromProperties");function Ykt(t,e){return Kkt(t.properties,e)}a(Ykt,"FromMappedResult");function VMe(t,e){let r=Ykt(t,e);return _o(r)}a(VMe,"PartialFromMappedResult");f();f();function Jkt(t,e){return Qs("Required",[Qs(t,e)])}a(Jkt,"FromComputed");function Xkt(t){return Qs("Required",[Zm(t)])}a(Xkt,"FromRef");function Zkt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Ya(t[r],[Gu]);return e}a(Zkt,"FromProperties");function ePt(t){let e=Ya(t,[Ba,"$id","required","properties"]),r=Zkt(t.properties);return Ho(r,e)}a(ePt,"FromObject");function zMe(t){return t.map(e=>KMe(e))}a(zMe,"FromRest");function KMe(t){return iA(t)?Jkt(t.target,t.parameters):uc(t)?Xkt(t.$ref):Ka(t)?Bd(zMe(t.allOf)):xo(t)?qo(zMe(t.anyOf)):Fc(t)?ePt(t):o2(t)||V1(t)||aA(t)||E0(t)||c6(t)||cA(t)||z1(t)||l6(t)||K1(t)?t:Ho({})}a(KMe,"RequiredResolve");function AD(t,e){return ta(t)?YMe(t,e):ct({...KMe(t),...e})}a(AD,"Required");function tPt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=AD(t[n],e);return r}a(tPt,"FromProperties");function rPt(t,e){return tPt(t.properties,e)}a(rPt,"FromMappedResult");function YMe(t,e){let r=rPt(t,e);return _o(r)}a(YMe,"RequiredFromMappedResult");function nPt(t,e){return e.map(r=>uc(r)?g0e(t,r.$ref):w0(t,r))}a(nPt,"DereferenceParameters");function g0e(t,e){return e in t?uc(t[e])?g0e(t,t[e].$ref):w0(t,t[e]):Ii()}a(g0e,"Dereference");function iPt(t){return uD(t[0])}a(iPt,"FromAwaited");function oPt(t){return PI(t[0],t[1])}a(oPt,"FromIndex");function sPt(t){return dD(t[0])}a(sPt,"FromKeyOf");function aPt(t){return gD(t[0])}a(aPt,"FromPartial");function cPt(t){return BI(t[0],t[1])}a(cPt,"FromOmit");function lPt(t){return NI(t[0],t[1])}a(lPt,"FromPick");function uPt(t){return AD(t[0])}a(uPt,"FromRequired");function dPt(t,e,r){let n=nPt(t,r);return e==="Awaited"?iPt(n):e==="Index"?oPt(n):e==="KeyOf"?sPt(n):e==="Partial"?aPt(n):e==="Omit"?cPt(n):e==="Pick"?lPt(n):e==="Required"?uPt(n):Ii()}a(dPt,"FromComputed");function fPt(t,e){return rD(w0(t,e))}a(fPt,"FromArray");function pPt(t,e){return nD(w0(t,e))}a(pPt,"FromAsyncIterator");function mPt(t,e,r){return iD(v6(t,e),w0(t,r))}a(mPt,"FromConstructor");function hPt(t,e,r){return yC(v6(t,e),w0(t,r))}a(hPt,"FromFunction");function gPt(t,e){return Bd(v6(t,e))}a(gPt,"FromIntersect");function APt(t,e){return lD(w0(t,e))}a(APt,"FromIterator");function yPt(t,e){return Ho(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:w0(t,e[n])}),{}))}a(yPt,"FromObject");function CPt(t,e){let[r,n]=[w0(t,IG(e)),bG(e)],o=J4(e);return o.patternProperties[n]=r,o}a(CPt,"FromRecord");function vPt(t,e){return uc(e)?{...g0e(t,e.$ref),[Ba]:e[Ba]}:e}a(vPt,"FromTransform");function xPt(t,e){return Jm(v6(t,e))}a(xPt,"FromTuple");function EPt(t,e){return qo(v6(t,e))}a(EPt,"FromUnion");function v6(t,e){return e.map(r=>w0(t,r))}a(v6,"FromTypes");function w0(t,e){return cp(e)?ct(w0(t,Ya(e,[Gu])),e):Z4(e)?ct(w0(t,Ya(e,[rA])),e):Uo(e)?ct(vPt(t,e),e):nA(e)?ct(fPt(t,e.items),e):i2(e)?ct(pPt(t,e.items),e):iA(e)?ct(dPt(t,e.target,e.parameters)):oA(e)?ct(mPt(t,e.parameters,e.returns),e):sA(e)?ct(hPt(t,e.parameters,e.returns),e):Ka(e)?ct(gPt(t,e.allOf),e):s2(e)?ct(APt(t,e.items),e):Fc(e)?ct(yPt(t,e.properties),e):c2(e)?ct(CPt(t,e)):T0(e)?ct(xPt(t,e.items||[]),e):xo(e)?ct(EPt(t,e.anyOf),e):e}a(w0,"FromType");function bPt(t,e){return e in t?w0(t,t[e]):Ii()}a(bPt,"ComputeType");function JMe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:bPt(t,r)}),{})}a(JMe,"ComputeModuleProperties");var A0e=class{static{a(this,"TModule")}constructor(e){let r=JMe(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:ct(this.$defs[e],r)};return ct({[st]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function XMe(t){return new A0e(t)}a(XMe,"Module");f();function ZMe(t,e){return ct({[st]:"Not",not:t},e)}a(ZMe,"Not");f();function eLe(t,e){return sA(t)?Jm(t.parameters,e):Ii()}a(eLe,"Parameters");f();var IPt=0;function tLe(t,e={}){Lc(e.$id)&&(e.$id=`T${IPt++}`);let r=J4(t({[st]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,ct({[Km]:"Recursive",...r},e)}a(tLe,"Recursive");f();function rLe(t,e){let r=Ss(t)?new globalThis.RegExp(t):t;return ct({[st]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}a(rLe,"RegExp");f();function TPt(t){return Ka(t)?t.allOf:xo(t)?t.anyOf:T0(t)?t.items??[]:[]}a(TPt,"RestResolve");function nLe(t){return TPt(t)}a(nLe,"Rest");f();function iLe(t,e){return sA(t)?ct(t.returns,e):Ii(e)}a(iLe,"ReturnType");f();var y0e=class{static{a(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new C0e(this.schema,e)}},C0e=class{static{a(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let s={Encode:a(c=>r[Ba].Encode(e(c)),"Encode"),Decode:a(c=>this.decode(r[Ba].Decode(c)),"Decode")};return{...r,[Ba]:s}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[Ba]:n}}Encode(e){return Uo(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function oLe(t){return new y0e(t)}a(oLe,"Transform");f();function sLe(t={}){return ct({[st]:t[st]??"Unsafe"},t)}a(sLe,"Unsafe");f();function aLe(t){return ct({[st]:"Void",type:"void"},t)}a(aLe,"Void");f();var v0e={};Sa(v0e,{Any:()=>kI,Argument:()=>$8e,Array:()=>rD,AsyncIterator:()=>nD,Awaited:()=>uD,BigInt:()=>cD,Boolean:()=>cG,Capitalize:()=>FMe,Composite:()=>lMe,Const:()=>uMe,Constructor:()=>iD,ConstructorParameters:()=>dMe,Date:()=>pG,Enum:()=>fMe,Exclude:()=>mD,Extends:()=>pD,Extract:()=>hD,Function:()=>yC,Index:()=>PI,InstanceType:()=>kMe,Instantiate:()=>DMe,Integer:()=>BMe,Intersect:()=>Bd,Iterator:()=>lD,KeyOf:()=>dD,Literal:()=>uo,Lowercase:()=>OMe,Mapped:()=>nMe,Module:()=>XMe,Never:()=>Ii,Not:()=>ZMe,Null:()=>mG,Number:()=>Ym,Object:()=>Ho,Omit:()=>BI,Optional:()=>Dd,Parameters:()=>eLe,Partial:()=>gD,Pick:()=>NI,Promise:()=>dG,Readonly:()=>up,ReadonlyOptional:()=>xG,Record:()=>EG,Recursive:()=>tLe,Ref:()=>Zm,RegExp:()=>rLe,Required:()=>AD,Rest:()=>nLe,ReturnType:()=>iLe,String:()=>Cf,Symbol:()=>hG,TemplateLiteral:()=>lG,Transform:()=>oLe,Tuple:()=>Jm,Uint8Array:()=>AG,Uncapitalize:()=>QMe,Undefined:()=>gG,Union:()=>qo,Unknown:()=>uA,Unsafe:()=>sLe,Uppercase:()=>UMe,Void:()=>aLe});f();var E=v0e;f();f();function wPt(t){switch(t.errorType){case it.ArrayContains:return"Expected array to contain at least one matching value";case it.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case it.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case it.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case it.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case it.ArrayUniqueItems:return"Expected array elements to be unique";case it.Array:return"Expected array";case it.AsyncIterator:return"Expected AsyncIterator";case it.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case it.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case it.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case it.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case it.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case it.BigInt:return"Expected bigint";case it.Boolean:return"Expected boolean";case it.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case it.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case it.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case it.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case it.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case it.Date:return"Expected Date";case it.Function:return"Expected function";case it.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case it.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case it.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case it.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case it.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case it.Integer:return"Expected integer";case it.IntersectUnevaluatedProperties:return"Unexpected property";case it.Intersect:return"Expected all values to match";case it.Iterator:return"Expected Iterator";case it.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case it.Never:return"Never";case it.Not:return"Value should not match";case it.Null:return"Expected null";case it.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case it.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case it.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case it.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case it.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case it.Number:return"Expected number";case it.Object:return"Expected object";case it.ObjectAdditionalProperties:return"Unexpected property";case it.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case it.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case it.ObjectRequiredProperty:return"Expected required property";case it.Promise:return"Expected Promise";case it.RegExp:return"Expected string to match regular expression";case it.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case it.StringFormat:return`Expected string to match '${t.schema.format}' format`;case it.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case it.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case it.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case it.String:return"Expected string";case it.Symbol:return"Expected symbol";case it.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case it.Tuple:return"Expected tuple";case it.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case it.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case it.Uint8Array:return"Expected Uint8Array";case it.Undefined:return"Expected undefined";case it.Union:return"Expected union value";case it.Void:return"Expected void";case it.Kind:return`Expected kind '${t.schema[st]}'`;default:return"Unknown error type"}}a(wPt,"DefaultErrorFunction");var _Pt=wPt;function cLe(){return _Pt}a(cLe,"GetErrorFunction");f();var x0e=class extends Bn{static{a(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function SPt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new x0e(t);return So(r,e)}a(SPt,"Resolve");function ou(t,e){return!vo(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}a(ou,"Pushref");function So(t,e){return t[st]==="This"||t[st]==="Ref"?SPt(t,e):t}a(So,"Deref");f();var E0e=class extends Bn{static{a(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},_0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(_0||(_0={}));var yD=BigInt("14695981039346656037"),[RPt,kPt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],PPt=Array.from({length:256}).map((t,e)=>BigInt(e)),lLe=new Float64Array(1),uLe=new DataView(lLe.buffer),dLe=new Uint8Array(lLe.buffer);function*DPt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}a(DPt,"NumberToBytes");function BPt(t){Md(_0.Array);for(let e of t)CD(e)}a(BPt,"ArrayType");function NPt(t){Md(_0.Boolean),Md(t?1:0)}a(NPt,"BooleanType");function MPt(t){Md(_0.BigInt),uLe.setBigInt64(0,t);for(let e of dLe)Md(e)}a(MPt,"BigIntType");function LPt(t){Md(_0.Date),CD(t.getTime())}a(LPt,"DateType");function FPt(t){Md(_0.Null)}a(FPt,"NullType");function OPt(t){Md(_0.Number),uLe.setFloat64(0,t);for(let e of dLe)Md(e)}a(OPt,"NumberType");function QPt(t){Md(_0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())CD(e),CD(t[e])}a(QPt,"ObjectType");function UPt(t){Md(_0.String);for(let e=0;e<t.length;e++)for(let r of DPt(t.charCodeAt(e)))Md(r)}a(UPt,"StringType");function qPt(t){Md(_0.Symbol),CD(t.description)}a(qPt,"SymbolType");function HPt(t){Md(_0.Uint8Array);for(let e=0;e<t.length;e++)Md(t[e])}a(HPt,"Uint8ArrayType");function WPt(t){return Md(_0.Undefined)}a(WPt,"UndefinedType");function CD(t){if(Dn(t))return BPt(t);if(hC(t))return NPt(t);if(ju(t))return MPt(t);if(Af(t))return LPt(t);if(j1(t))return FPt(t);if(dn(t))return OPt(t);if(Pi(t))return QPt(t);if(vo(t))return UPt(t);if(G1(t))return qPt(t);if(X4(t))return HPt(t);if(ea(t))return WPt(t);throw new E0e(t)}a(CD,"Visit");function Md(t){yD=yD^PPt[t],yD=yD*RPt%kPt}a(Md,"FNV1A64");function MI(t){return yD=BigInt("14695981039346656037"),CD(t),yD}a(MI,"Hash");f();var b0e=class extends Bn{static{a(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function $Pt(t){return t[st]==="Any"||t[st]==="Unknown"}a($Pt,"IsAnyOrUnknown");function Yi(t){return t!==void 0}a(Yi,"IsDefined");function jPt(t,e,r){return!0}a(jPt,"FromAny");function GPt(t,e,r){return!0}a(GPt,"FromArgument");function VPt(t,e,r){if(!Dn(r)||Yi(t.minItems)&&!(r.length>=t.minItems)||Yi(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(s=>su(t.items,e,s))||t.uniqueItems===!0&&!function(){let s=new Set;for(let c of r){let l=MI(c);if(s.has(l))return!1;s.add(l)}return!0}())return!1;if(!(Yi(t.contains)||dn(t.minContains)||dn(t.maxContains)))return!0;let n=Yi(t.contains)?t.contains:Ii(),o=r.reduce((s,c)=>su(n,e,c)?s+1:s,0);return!(o===0||dn(t.minContains)&&o<t.minContains||dn(t.maxContains)&&o>t.maxContains)}a(VPt,"FromArray");function zPt(t,e,r){return eG(r)}a(zPt,"FromAsyncIterator");function KPt(t,e,r){return!(!ju(r)||Yi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Yi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Yi(t.maximum)&&!(r<=t.maximum)||Yi(t.minimum)&&!(r>=t.minimum)||Yi(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}a(KPt,"FromBigInt");function YPt(t,e,r){return hC(r)}a(YPt,"FromBoolean");function JPt(t,e,r){return su(t.returns,e,r.prototype)}a(JPt,"FromConstructor");function XPt(t,e,r){return!(!Af(r)||Yi(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Yi(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Yi(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Yi(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Yi(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}a(XPt,"FromDate");function ZPt(t,e,r){return _I(r)}a(ZPt,"FromFunction");function e5t(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return su(o,[...e,...n],r)}a(e5t,"FromImport");function t5t(t,e,r){return!(!nG(r)||Yi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Yi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Yi(t.maximum)&&!(r<=t.maximum)||Yi(t.minimum)&&!(r>=t.minimum)||Yi(t.multipleOf)&&r%t.multipleOf!==0)}a(t5t,"FromInteger");function r5t(t,e,r){let n=t.allOf.every(o=>su(o,e,r));if(t.unevaluatedProperties===!1){let o=new RegExp(X1(t)),s=Object.getOwnPropertyNames(r).every(c=>o.test(c));return n&&s}else if(Na(t.unevaluatedProperties)){let o=new RegExp(X1(t)),s=Object.getOwnPropertyNames(r).every(c=>o.test(c)||su(t.unevaluatedProperties,e,r[c]));return n&&s}else return n}a(r5t,"FromIntersect");function n5t(t,e,r){return tG(r)}a(n5t,"FromIterator");function i5t(t,e,r){return r===t.const}a(i5t,"FromLiteral");function o5t(t,e,r){return!1}a(o5t,"FromNever");function s5t(t,e,r){return!su(t.not,e,r)}a(s5t,"FromNot");function a5t(t,e,r){return j1(r)}a(a5t,"FromNull");function c5t(t,e,r){return!(!Os.IsNumberLike(r)||Yi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Yi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Yi(t.minimum)&&!(r>=t.minimum)||Yi(t.maximum)&&!(r<=t.maximum)||Yi(t.multipleOf)&&r%t.multipleOf!==0)}a(c5t,"FromNumber");function l5t(t,e,r){if(!Os.IsObjectLike(r)||Yi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Yi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let o of n){let s=t.properties[o];if(t.required&&t.required.includes(o)){if(!su(s,e,r[o])||(Z1(s)||$Pt(s))&&!(o in r))return!1}else if(Os.IsExactOptionalProperty(r,o)&&!su(s,e,r[o]))return!1}if(t.additionalProperties===!1){let o=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&o.length===n.length?!0:o.every(s=>n.includes(s))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(s=>n.includes(s)||su(t.additionalProperties,e,r[s])):!0}a(l5t,"FromObject");function u5t(t,e,r){return rG(r)}a(u5t,"FromPromise");function d5t(t,e,r){if(!Os.IsRecordLike(r)||Yi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Yi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,o]=Object.entries(t.patternProperties)[0],s=new RegExp(n),c=Object.entries(r).every(([d,p])=>s.test(d)?su(o,e,p):!0),l=typeof t.additionalProperties=="object"?Object.entries(r).every(([d,p])=>s.test(d)?!0:su(t.additionalProperties,e,p)):!0,u=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(d=>s.test(d)):!0;return c&&l&&u}a(d5t,"FromRecord");function f5t(t,e,r){return su(So(t,e),e,r)}a(f5t,"FromRef");function p5t(t,e,r){let n=new RegExp(t.source,t.flags);return Yi(t.minLength)&&!(r.length>=t.minLength)||Yi(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}a(p5t,"FromRegExp");function m5t(t,e,r){return!vo(r)||Yi(t.minLength)&&!(r.length>=t.minLength)||Yi(t.maxLength)&&!(r.length<=t.maxLength)||Yi(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Yi(t.format)?lA.Has(t.format)?lA.Get(t.format)(r):!1:!0}a(m5t,"FromString");function h5t(t,e,r){return G1(r)}a(h5t,"FromSymbol");function g5t(t,e,r){return vo(r)&&new RegExp(t.pattern).test(r)}a(g5t,"FromTemplateLiteral");function A5t(t,e,r){return su(So(t,e),e,r)}a(A5t,"FromThis");function y5t(t,e,r){if(!Dn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!su(t.items[n],e,r[n]))return!1;return!0}a(y5t,"FromTuple");function C5t(t,e,r){return ea(r)}a(C5t,"FromUndefined");function v5t(t,e,r){return t.anyOf.some(n=>su(n,e,r))}a(v5t,"FromUnion");function x5t(t,e,r){return!(!X4(r)||Yi(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Yi(t.minByteLength)&&!(r.length>=t.minByteLength))}a(x5t,"FromUint8Array");function E5t(t,e,r){return!0}a(E5t,"FromUnknown");function b5t(t,e,r){return Os.IsVoidLike(r)}a(b5t,"FromVoid");function I5t(t,e,r){return yf.Has(t[st])?yf.Get(t[st])(t,r):!1}a(I5t,"FromKind");function su(t,e,r){let n=Yi(t.$id)?ou(t,e):e,o=t;switch(o[st]){case"Any":return jPt(o,n,r);case"Argument":return GPt(o,n,r);case"Array":return VPt(o,n,r);case"AsyncIterator":return zPt(o,n,r);case"BigInt":return KPt(o,n,r);case"Boolean":return YPt(o,n,r);case"Constructor":return JPt(o,n,r);case"Date":return XPt(o,n,r);case"Function":return ZPt(o,n,r);case"Import":return e5t(o,n,r);case"Integer":return t5t(o,n,r);case"Intersect":return r5t(o,n,r);case"Iterator":return n5t(o,n,r);case"Literal":return i5t(o,n,r);case"Never":return o5t(o,n,r);case"Not":return s5t(o,n,r);case"Null":return a5t(o,n,r);case"Number":return c5t(o,n,r);case"Object":return l5t(o,n,r);case"Promise":return u5t(o,n,r);case"Record":return d5t(o,n,r);case"Ref":return f5t(o,n,r);case"RegExp":return p5t(o,n,r);case"String":return m5t(o,n,r);case"Symbol":return h5t(o,n,r);case"TemplateLiteral":return g5t(o,n,r);case"This":return A5t(o,n,r);case"Tuple":return y5t(o,n,r);case"Undefined":return C5t(o,n,r);case"Union":return v5t(o,n,r);case"Uint8Array":return x5t(o,n,r);case"Unknown":return E5t(o,n,r);case"Void":return b5t(o,n,r);default:if(!yf.Has(o[st]))throw new b0e(o);return I5t(o,n,r)}}a(su,"Visit");function Li(...t){return t.length===3?su(t[0],t[1],t[2]):su(t[0],[],t[1])}a(Li,"Check");var it;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(it||(it={}));var I0e=class extends Bn{static{a(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function ex(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}a(ex,"EscapeKey");function Ji(t){return t!==void 0}a(Ji,"IsDefined");var LI=class{static{a(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function mr(t,e,r,n,o=[]){return{type:t,schema:e,path:r,value:n,message:cLe()({errorType:t,path:r,schema:e,value:n,errors:o}),errors:o}}a(mr,"Create");function*T5t(t,e,r,n){}a(T5t,"FromAny");function*w5t(t,e,r,n){}a(w5t,"FromArgument");function*_5t(t,e,r,n){if(!Dn(n))return yield mr(it.Array,t,r,n);Ji(t.minItems)&&!(n.length>=t.minItems)&&(yield mr(it.ArrayMinItems,t,r,n)),Ji(t.maxItems)&&!(n.length<=t.maxItems)&&(yield mr(it.ArrayMaxItems,t,r,n));for(let c=0;c<n.length;c++)yield*au(t.items,e,`${r}/${c}`,n[c]);if(t.uniqueItems===!0&&!function(){let c=new Set;for(let l of n){let u=MI(l);if(c.has(u))return!1;c.add(u)}return!0}()&&(yield mr(it.ArrayUniqueItems,t,r,n)),!(Ji(t.contains)||Ji(t.minContains)||Ji(t.maxContains)))return;let o=Ji(t.contains)?t.contains:Ii(),s=n.reduce((c,l,u)=>au(o,e,`${r}${u}`,l).next().done===!0?c+1:c,0);s===0&&(yield mr(it.ArrayContains,t,r,n)),dn(t.minContains)&&s<t.minContains&&(yield mr(it.ArrayMinContains,t,r,n)),dn(t.maxContains)&&s>t.maxContains&&(yield mr(it.ArrayMaxContains,t,r,n))}a(_5t,"FromArray");function*S5t(t,e,r,n){eG(n)||(yield mr(it.AsyncIterator,t,r,n))}a(S5t,"FromAsyncIterator");function*R5t(t,e,r,n){if(!ju(n))return yield mr(it.BigInt,t,r,n);Ji(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield mr(it.BigIntExclusiveMaximum,t,r,n)),Ji(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield mr(it.BigIntExclusiveMinimum,t,r,n)),Ji(t.maximum)&&!(n<=t.maximum)&&(yield mr(it.BigIntMaximum,t,r,n)),Ji(t.minimum)&&!(n>=t.minimum)&&(yield mr(it.BigIntMinimum,t,r,n)),Ji(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield mr(it.BigIntMultipleOf,t,r,n))}a(R5t,"FromBigInt");function*k5t(t,e,r,n){hC(n)||(yield mr(it.Boolean,t,r,n))}a(k5t,"FromBoolean");function*P5t(t,e,r,n){yield*au(t.returns,e,r,n.prototype)}a(P5t,"FromConstructor");function*D5t(t,e,r,n){if(!Af(n))return yield mr(it.Date,t,r,n);Ji(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield mr(it.DateExclusiveMaximumTimestamp,t,r,n)),Ji(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield mr(it.DateExclusiveMinimumTimestamp,t,r,n)),Ji(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield mr(it.DateMaximumTimestamp,t,r,n)),Ji(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield mr(it.DateMinimumTimestamp,t,r,n)),Ji(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield mr(it.DateMultipleOfTimestamp,t,r,n))}a(D5t,"FromDate");function*B5t(t,e,r,n){_I(n)||(yield mr(it.Function,t,r,n))}a(B5t,"FromFunction");function*N5t(t,e,r,n){let o=globalThis.Object.values(t.$defs),s=t.$defs[t.$ref];yield*au(s,[...e,...o],r,n)}a(N5t,"FromImport");function*M5t(t,e,r,n){if(!nG(n))return yield mr(it.Integer,t,r,n);Ji(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield mr(it.IntegerExclusiveMaximum,t,r,n)),Ji(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield mr(it.IntegerExclusiveMinimum,t,r,n)),Ji(t.maximum)&&!(n<=t.maximum)&&(yield mr(it.IntegerMaximum,t,r,n)),Ji(t.minimum)&&!(n>=t.minimum)&&(yield mr(it.IntegerMinimum,t,r,n)),Ji(t.multipleOf)&&n%t.multipleOf!==0&&(yield mr(it.IntegerMultipleOf,t,r,n))}a(M5t,"FromInteger");function*L5t(t,e,r,n){let o=!1;for(let s of t.allOf)for(let c of au(s,e,r,n))o=!0,yield c;if(o)return yield mr(it.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let s=new RegExp(X1(t));for(let c of Object.getOwnPropertyNames(n))s.test(c)||(yield mr(it.IntersectUnevaluatedProperties,t,`${r}/${c}`,n))}if(typeof t.unevaluatedProperties=="object"){let s=new RegExp(X1(t));for(let c of Object.getOwnPropertyNames(n))if(!s.test(c)){let l=au(t.unevaluatedProperties,e,`${r}/${c}`,n[c]).next();l.done||(yield l.value)}}}a(L5t,"FromIntersect");function*F5t(t,e,r,n){tG(n)||(yield mr(it.Iterator,t,r,n))}a(F5t,"FromIterator");function*O5t(t,e,r,n){n!==t.const&&(yield mr(it.Literal,t,r,n))}a(O5t,"FromLiteral");function*Q5t(t,e,r,n){yield mr(it.Never,t,r,n)}a(Q5t,"FromNever");function*U5t(t,e,r,n){au(t.not,e,r,n).next().done===!0&&(yield mr(it.Not,t,r,n))}a(U5t,"FromNot");function*q5t(t,e,r,n){j1(n)||(yield mr(it.Null,t,r,n))}a(q5t,"FromNull");function*H5t(t,e,r,n){if(!Os.IsNumberLike(n))return yield mr(it.Number,t,r,n);Ji(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield mr(it.NumberExclusiveMaximum,t,r,n)),Ji(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield mr(it.NumberExclusiveMinimum,t,r,n)),Ji(t.maximum)&&!(n<=t.maximum)&&(yield mr(it.NumberMaximum,t,r,n)),Ji(t.minimum)&&!(n>=t.minimum)&&(yield mr(it.NumberMinimum,t,r,n)),Ji(t.multipleOf)&&n%t.multipleOf!==0&&(yield mr(it.NumberMultipleOf,t,r,n))}a(H5t,"FromNumber");function*W5t(t,e,r,n){if(!Os.IsObjectLike(n))return yield mr(it.Object,t,r,n);Ji(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield mr(it.ObjectMinProperties,t,r,n)),Ji(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield mr(it.ObjectMaxProperties,t,r,n));let o=Array.isArray(t.required)?t.required:[],s=Object.getOwnPropertyNames(t.properties),c=Object.getOwnPropertyNames(n);for(let l of o)c.includes(l)||(yield mr(it.ObjectRequiredProperty,t.properties[l],`${r}/${ex(l)}`,void 0));if(t.additionalProperties===!1)for(let l of c)s.includes(l)||(yield mr(it.ObjectAdditionalProperties,t,`${r}/${ex(l)}`,n[l]));if(typeof t.additionalProperties=="object")for(let l of c)s.includes(l)||(yield*au(t.additionalProperties,e,`${r}/${ex(l)}`,n[l]));for(let l of s){let u=t.properties[l];t.required&&t.required.includes(l)?(yield*au(u,e,`${r}/${ex(l)}`,n[l]),Z1(t)&&!(l in n)&&(yield mr(it.ObjectRequiredProperty,u,`${r}/${ex(l)}`,void 0))):Os.IsExactOptionalProperty(n,l)&&(yield*au(u,e,`${r}/${ex(l)}`,n[l]))}}a(W5t,"FromObject");function*$5t(t,e,r,n){rG(n)||(yield mr(it.Promise,t,r,n))}a($5t,"FromPromise");function*j5t(t,e,r,n){if(!Os.IsRecordLike(n))return yield mr(it.Object,t,r,n);Ji(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield mr(it.ObjectMinProperties,t,r,n)),Ji(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield mr(it.ObjectMaxProperties,t,r,n));let[o,s]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let[l,u]of Object.entries(n))c.test(l)&&(yield*au(s,e,`${r}/${ex(l)}`,u));if(typeof t.additionalProperties=="object")for(let[l,u]of Object.entries(n))c.test(l)||(yield*au(t.additionalProperties,e,`${r}/${ex(l)}`,u));if(t.additionalProperties===!1){for(let[l,u]of Object.entries(n))if(!c.test(l))return yield mr(it.ObjectAdditionalProperties,t,`${r}/${ex(l)}`,u)}}a(j5t,"FromRecord");function*G5t(t,e,r,n){yield*au(So(t,e),e,r,n)}a(G5t,"FromRef");function*V5t(t,e,r,n){if(!vo(n))return yield mr(it.String,t,r,n);if(Ji(t.minLength)&&!(n.length>=t.minLength)&&(yield mr(it.StringMinLength,t,r,n)),Ji(t.maxLength)&&!(n.length<=t.maxLength)&&(yield mr(it.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield mr(it.RegExp,t,r,n)}a(V5t,"FromRegExp");function*z5t(t,e,r,n){if(!vo(n))return yield mr(it.String,t,r,n);Ji(t.minLength)&&!(n.length>=t.minLength)&&(yield mr(it.StringMinLength,t,r,n)),Ji(t.maxLength)&&!(n.length<=t.maxLength)&&(yield mr(it.StringMaxLength,t,r,n)),vo(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield mr(it.StringPattern,t,r,n))),vo(t.format)&&(lA.Has(t.format)?lA.Get(t.format)(n)||(yield mr(it.StringFormat,t,r,n)):yield mr(it.StringFormatUnknown,t,r,n))}a(z5t,"FromString");function*K5t(t,e,r,n){G1(n)||(yield mr(it.Symbol,t,r,n))}a(K5t,"FromSymbol");function*Y5t(t,e,r,n){if(!vo(n))return yield mr(it.String,t,r,n);new RegExp(t.pattern).test(n)||(yield mr(it.StringPattern,t,r,n))}a(Y5t,"FromTemplateLiteral");function*J5t(t,e,r,n){yield*au(So(t,e),e,r,n)}a(J5t,"FromThis");function*X5t(t,e,r,n){if(!Dn(n))return yield mr(it.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield mr(it.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield mr(it.TupleLength,t,r,n);if(t.items)for(let o=0;o<t.items.length;o++)yield*au(t.items[o],e,`${r}/${o}`,n[o])}a(X5t,"FromTuple");function*Z5t(t,e,r,n){ea(n)||(yield mr(it.Undefined,t,r,n))}a(Z5t,"FromUndefined");function*e4t(t,e,r,n){if(Li(t,e,n))return;let o=t.anyOf.map(s=>new LI(au(s,e,r,n)));yield mr(it.Union,t,r,n,o)}a(e4t,"FromUnion");function*t4t(t,e,r,n){if(!X4(n))return yield mr(it.Uint8Array,t,r,n);Ji(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield mr(it.Uint8ArrayMaxByteLength,t,r,n)),Ji(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield mr(it.Uint8ArrayMinByteLength,t,r,n))}a(t4t,"FromUint8Array");function*r4t(t,e,r,n){}a(r4t,"FromUnknown");function*n4t(t,e,r,n){Os.IsVoidLike(n)||(yield mr(it.Void,t,r,n))}a(n4t,"FromVoid");function*i4t(t,e,r,n){yf.Get(t[st])(t,n)||(yield mr(it.Kind,t,r,n))}a(i4t,"FromKind");function*au(t,e,r,n){let o=Ji(t.$id)?[...e,t]:e,s=t;switch(s[st]){case"Any":return yield*T5t(s,o,r,n);case"Argument":return yield*w5t(s,o,r,n);case"Array":return yield*_5t(s,o,r,n);case"AsyncIterator":return yield*S5t(s,o,r,n);case"BigInt":return yield*R5t(s,o,r,n);case"Boolean":return yield*k5t(s,o,r,n);case"Constructor":return yield*P5t(s,o,r,n);case"Date":return yield*D5t(s,o,r,n);case"Function":return yield*B5t(s,o,r,n);case"Import":return yield*N5t(s,o,r,n);case"Integer":return yield*M5t(s,o,r,n);case"Intersect":return yield*L5t(s,o,r,n);case"Iterator":return yield*F5t(s,o,r,n);case"Literal":return yield*O5t(s,o,r,n);case"Never":return yield*Q5t(s,o,r,n);case"Not":return yield*U5t(s,o,r,n);case"Null":return yield*q5t(s,o,r,n);case"Number":return yield*H5t(s,o,r,n);case"Object":return yield*W5t(s,o,r,n);case"Promise":return yield*$5t(s,o,r,n);case"Record":return yield*j5t(s,o,r,n);case"Ref":return yield*G5t(s,o,r,n);case"RegExp":return yield*V5t(s,o,r,n);case"String":return yield*z5t(s,o,r,n);case"Symbol":return yield*K5t(s,o,r,n);case"TemplateLiteral":return yield*Y5t(s,o,r,n);case"This":return yield*J5t(s,o,r,n);case"Tuple":return yield*X5t(s,o,r,n);case"Undefined":return yield*Z5t(s,o,r,n);case"Union":return yield*e4t(s,o,r,n);case"Uint8Array":return yield*t4t(s,o,r,n);case"Unknown":return yield*r4t(s,o,r,n);case"Void":return yield*n4t(s,o,r,n);default:if(!yf.Has(s[st]))throw new I0e(t);return yield*i4t(s,o,r,n)}}a(au,"Visit");function vC(...t){let e=t.length===3?au(t[0],t[1],"",t[2]):au(t[0],[],"",t[1]);return new LI(e)}a(vC,"Errors");f();f();var vD=class extends Bn{static{a(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},T0e=class extends Bn{static{a(this,"TransformDecodeError")}constructor(e,r,n,o){super(o instanceof Error?o.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=o}};function Ma(t,e,r){try{return Uo(t)?t[Ba].Decode(r):r}catch(n){throw new T0e(t,e,r,n)}}a(Ma,"Default");function o4t(t,e,r,n){return Dn(n)?Ma(t,r,n.map((o,s)=>pA(t.items,e,`${r}/${s}`,o))):Ma(t,r,n)}a(o4t,"FromArray");function s4t(t,e,r,n){if(!Pi(n)||x0(n))return Ma(t,r,n);let o=fG(t),s=o.map(p=>p[0]),c={...n};for(let[p,m]of o)p in c&&(c[p]=pA(m,e,`${r}/${p}`,c[p]));if(!Uo(t.unevaluatedProperties))return Ma(t,r,c);let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,d={...c};for(let p of l)s.includes(p)||(d[p]=Ma(u,`${r}/${p}`,d[p]));return Ma(t,r,d)}a(s4t,"FromIntersect");function a4t(t,e,r,n){let o=globalThis.Object.values(t.$defs),s=t.$defs[t.$ref],c=pA(s,[...e,...o],r,n);return Ma(t,r,c)}a(a4t,"FromImport");function c4t(t,e,r,n){return Ma(t,r,pA(t.not,e,r,n))}a(c4t,"FromNot");function l4t(t,e,r,n){if(!Pi(n))return Ma(t,r,n);let o=dp(t),s={...n};for(let d of o)Pn(s,d)&&(ea(s[d])&&(!K1(t.properties[d])||Os.IsExactOptionalProperty(s,d))||(s[d]=pA(t.properties[d],e,`${r}/${d}`,s[d])));if(!Na(t.additionalProperties))return Ma(t,r,s);let c=Object.getOwnPropertyNames(s),l=t.additionalProperties,u={...s};for(let d of c)o.includes(d)||(u[d]=Ma(l,`${r}/${d}`,u[d]));return Ma(t,r,u)}a(l4t,"FromObject");function u4t(t,e,r,n){if(!Pi(n))return Ma(t,r,n);let o=Object.getOwnPropertyNames(t.patternProperties)[0],s=new RegExp(o),c={...n};for(let p of Object.getOwnPropertyNames(n))s.test(p)&&(c[p]=pA(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!Na(t.additionalProperties))return Ma(t,r,c);let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,d={...c};for(let p of l)s.test(p)||(d[p]=Ma(u,`${r}/${p}`,d[p]));return Ma(t,r,d)}a(u4t,"FromRecord");function d4t(t,e,r,n){let o=So(t,e);return Ma(t,r,pA(o,e,r,n))}a(d4t,"FromRef");function f4t(t,e,r,n){let o=So(t,e);return Ma(t,r,pA(o,e,r,n))}a(f4t,"FromThis");function p4t(t,e,r,n){return Dn(n)&&Dn(t.items)?Ma(t,r,t.items.map((o,s)=>pA(o,e,`${r}/${s}`,n[s]))):Ma(t,r,n)}a(p4t,"FromTuple");function m4t(t,e,r,n){for(let o of t.anyOf){if(!Li(o,e,n))continue;let s=pA(o,e,r,n);return Ma(t,r,s)}return Ma(t,r,n)}a(m4t,"FromUnion");function pA(t,e,r,n){let o=ou(t,e),s=t;switch(t[st]){case"Array":return o4t(s,o,r,n);case"Import":return a4t(s,o,r,n);case"Intersect":return s4t(s,o,r,n);case"Not":return c4t(s,o,r,n);case"Object":return l4t(s,o,r,n);case"Record":return u4t(s,o,r,n);case"Ref":return d4t(s,o,r,n);case"Symbol":return Ma(s,r,n);case"This":return f4t(s,o,r,n);case"Tuple":return p4t(s,o,r,n);case"Union":return m4t(s,o,r,n);default:return Ma(s,r,n)}}a(pA,"Visit");function xD(t,e,r){return pA(t,e,"",r)}a(xD,"TransformDecode");f();var ED=class extends Bn{static{a(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},w0e=class extends Bn{static{a(this,"TransformEncodeError")}constructor(e,r,n,o){super(`${o instanceof Error?o.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=o}};function Vu(t,e,r){try{return Uo(t)?t[Ba].Encode(r):r}catch(n){throw new w0e(t,e,r,n)}}a(Vu,"Default");function h4t(t,e,r,n){let o=Vu(t,r,n);return Dn(o)?o.map((s,c)=>mA(t.items,e,`${r}/${c}`,s)):o}a(h4t,"FromArray");function g4t(t,e,r,n){let o=globalThis.Object.values(t.$defs),s=t.$defs[t.$ref],c=Vu(t,r,n);return mA(s,[...e,...o],r,c)}a(g4t,"FromImport");function A4t(t,e,r,n){let o=Vu(t,r,n);if(!Pi(n)||x0(n))return o;let s=fG(t),c=s.map(m=>m[0]),l={...o};for(let[m,h]of s)m in l&&(l[m]=mA(h,e,`${r}/${m}`,l[m]));if(!Uo(t.unevaluatedProperties))return l;let u=Object.getOwnPropertyNames(l),d=t.unevaluatedProperties,p={...l};for(let m of u)c.includes(m)||(p[m]=Vu(d,`${r}/${m}`,p[m]));return p}a(A4t,"FromIntersect");function y4t(t,e,r,n){return Vu(t.not,r,Vu(t,r,n))}a(y4t,"FromNot");function C4t(t,e,r,n){let o=Vu(t,r,n);if(!Pi(o))return o;let s=dp(t),c={...o};for(let p of s)Pn(c,p)&&(ea(c[p])&&(!K1(t.properties[p])||Os.IsExactOptionalProperty(c,p))||(c[p]=mA(t.properties[p],e,`${r}/${p}`,c[p])));if(!Na(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,d={...c};for(let p of l)s.includes(p)||(d[p]=Vu(u,`${r}/${p}`,d[p]));return d}a(C4t,"FromObject");function v4t(t,e,r,n){let o=Vu(t,r,n);if(!Pi(n))return o;let s=Object.getOwnPropertyNames(t.patternProperties)[0],c=new RegExp(s),l={...o};for(let m of Object.getOwnPropertyNames(n))c.test(m)&&(l[m]=mA(t.patternProperties[s],e,`${r}/${m}`,l[m]));if(!Na(t.additionalProperties))return l;let u=Object.getOwnPropertyNames(l),d=t.additionalProperties,p={...l};for(let m of u)c.test(m)||(p[m]=Vu(d,`${r}/${m}`,p[m]));return p}a(v4t,"FromRecord");function x4t(t,e,r,n){let o=So(t,e),s=mA(o,e,r,n);return Vu(t,r,s)}a(x4t,"FromRef");function E4t(t,e,r,n){let o=So(t,e),s=mA(o,e,r,n);return Vu(t,r,s)}a(E4t,"FromThis");function b4t(t,e,r,n){let o=Vu(t,r,n);return Dn(t.items)?t.items.map((s,c)=>mA(s,e,`${r}/${c}`,o[c])):[]}a(b4t,"FromTuple");function I4t(t,e,r,n){for(let o of t.anyOf){if(!Li(o,e,n))continue;let s=mA(o,e,r,n);return Vu(t,r,s)}for(let o of t.anyOf){let s=mA(o,e,r,n);if(Li(t,e,s))return Vu(t,r,s)}return Vu(t,r,n)}a(I4t,"FromUnion");function mA(t,e,r,n){let o=ou(t,e),s=t;switch(t[st]){case"Array":return h4t(s,o,r,n);case"Import":return g4t(s,o,r,n);case"Intersect":return A4t(s,o,r,n);case"Not":return y4t(s,o,r,n);case"Object":return C4t(s,o,r,n);case"Record":return v4t(s,o,r,n);case"Ref":return x4t(s,o,r,n);case"This":return E4t(s,o,r,n);case"Tuple":return b4t(s,o,r,n);case"Union":return I4t(s,o,r,n);default:return Vu(s,r,n)}}a(mA,"Visit");function bD(t,e,r){return mA(t,e,"",r)}a(bD,"TransformEncode");f();function T4t(t,e){return Uo(t)||Ml(t.items,e)}a(T4t,"FromArray");function w4t(t,e){return Uo(t)||Ml(t.items,e)}a(w4t,"FromAsyncIterator");function _4t(t,e){return Uo(t)||Ml(t.returns,e)||t.parameters.some(r=>Ml(r,e))}a(_4t,"FromConstructor");function S4t(t,e){return Uo(t)||Ml(t.returns,e)||t.parameters.some(r=>Ml(r,e))}a(S4t,"FromFunction");function R4t(t,e){return Uo(t)||Uo(t.unevaluatedProperties)||t.allOf.some(r=>Ml(r,e))}a(R4t,"FromIntersect");function k4t(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((o,s)=>[...o,t.$defs[s]],[]),n=t.$defs[t.$ref];return Uo(t)||Ml(n,[...r,...e])}a(k4t,"FromImport");function P4t(t,e){return Uo(t)||Ml(t.items,e)}a(P4t,"FromIterator");function D4t(t,e){return Uo(t)||Ml(t.not,e)}a(D4t,"FromNot");function B4t(t,e){return Uo(t)||Object.values(t.properties).some(r=>Ml(r,e))||Na(t.additionalProperties)&&Ml(t.additionalProperties,e)}a(B4t,"FromObject");function N4t(t,e){return Uo(t)||Ml(t.item,e)}a(N4t,"FromPromise");function M4t(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return Uo(t)||Ml(n,e)||Na(t.additionalProperties)&&Uo(t.additionalProperties)}a(M4t,"FromRecord");function L4t(t,e){return Uo(t)?!0:Ml(So(t,e),e)}a(L4t,"FromRef");function F4t(t,e){return Uo(t)?!0:Ml(So(t,e),e)}a(F4t,"FromThis");function O4t(t,e){return Uo(t)||!ea(t.items)&&t.items.some(r=>Ml(r,e))}a(O4t,"FromTuple");function Q4t(t,e){return Uo(t)||t.anyOf.some(r=>Ml(r,e))}a(Q4t,"FromUnion");function Ml(t,e){let r=ou(t,e),n=t;if(t.$id&&_0e.has(t.$id))return!1;switch(t.$id&&_0e.add(t.$id),t[st]){case"Array":return T4t(n,r);case"AsyncIterator":return w4t(n,r);case"Constructor":return _4t(n,r);case"Function":return S4t(n,r);case"Import":return k4t(n,r);case"Intersect":return R4t(n,r);case"Iterator":return P4t(n,r);case"Not":return D4t(n,r);case"Object":return B4t(n,r);case"Promise":return N4t(n,r);case"Record":return M4t(n,r);case"Ref":return L4t(n,r);case"This":return F4t(n,r);case"Tuple":return O4t(n,r);case"Union":return Q4t(n,r);default:return Uo(t)}}a(Ml,"Visit");var _0e=new Set;function tx(t,e){return _0e.clear(),Ml(t,e)}a(tx,"HasTransform");var S0e=class{static{a(this,"TypeCheck")}constructor(e,r,n,o){this.schema=e,this.references=r,this.checkFunc=n,this.code=o,this.hasTransform=tx(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return vC(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new vD(this.schema,e,this.Errors(e).First());return this.hasTransform?xD(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?bD(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new ED(this.schema,e,this.Errors(e).First());return r}},rx;(function(t){function e(s){return s===36}a(e,"DollarSign"),t.DollarSign=e;function r(s){return s===95}a(r,"IsUnderscore"),t.IsUnderscore=r;function n(s){return s>=65&&s<=90||s>=97&&s<=122}a(n,"IsAlpha"),t.IsAlpha=n;function o(s){return s>=48&&s<=57}a(o,"IsNumeric"),t.IsNumeric=o})(rx||(rx={}));var TG;(function(t){function e(s){return s.length===0?!1:rx.IsNumeric(s.charCodeAt(0))}a(e,"IsFirstCharacterNumeric");function r(s){if(e(s))return!1;for(let c=0;c<s.length;c++){let l=s.charCodeAt(c);if(!(rx.IsAlpha(l)||rx.IsNumeric(l)||rx.DollarSign(l)||rx.IsUnderscore(l)))return!1}return!0}a(r,"IsAccessor");function n(s){return s.replace(/'/g,"\\'")}a(n,"EscapeHyphen");function o(s,c){return r(c)?`${s}.${c}`:`${s}['${n(c)}']`}a(o,"Encode"),t.Encode=o})(TG||(TG={}));var R0e;(function(t){function e(r){let n=[];for(let o=0;o<r.length;o++){let s=r.charCodeAt(o);rx.IsNumeric(s)||rx.IsAlpha(s)?n.push(r.charAt(o)):n.push(`_${s}_`)}return n.join("").replace(/__/g,"_")}a(e,"Encode"),t.Encode=e})(R0e||(R0e={}));var k0e;(function(t){function e(r){return r.replace(/'/g,"\\'")}a(e,"Escape"),t.Escape=e})(k0e||(k0e={}));var P0e=class extends Bn{static{a(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},wG=class extends Bn{static{a(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},f2;(function(t){function e(c,l,u){return Os.ExactOptionalPropertyTypes?`('${l}' in ${c} ? ${u} : true)`:`(${TG.Encode(c,l)} !== undefined ? ${u} : true)`}a(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(c){return Os.AllowArrayObject?`(typeof ${c} === 'object' && ${c} !== null)`:`(typeof ${c} === 'object' && ${c} !== null && !Array.isArray(${c}))`}a(r,"IsObjectLike"),t.IsObjectLike=r;function n(c){return Os.AllowArrayObject?`(typeof ${c} === 'object' && ${c} !== null && !(${c} instanceof Date) && !(${c} instanceof Uint8Array))`:`(typeof ${c} === 'object' && ${c} !== null && !Array.isArray(${c}) && !(${c} instanceof Date) && !(${c} instanceof Uint8Array))`}a(n,"IsRecordLike"),t.IsRecordLike=n;function o(c){return Os.AllowNaN?`typeof ${c} === 'number'`:`Number.isFinite(${c})`}a(o,"IsNumberLike"),t.IsNumberLike=o;function s(c){return Os.AllowNullVoid?`(${c} === undefined || ${c} === null)`:`${c} === undefined`}a(s,"IsVoidLike"),t.IsVoidLike=s})(f2||(f2={}));var na;(function(t){function e(de){return de[st]==="Any"||de[st]==="Unknown"}a(e,"IsAnyOrUnknown");function*r(de,qe,Ce){yield"true"}a(r,"FromAny");function*n(de,qe,Ce){yield"true"}a(n,"FromArgument");function*o(de,qe,Ce){yield`Array.isArray(${Ce})`;let[$e,ce]=[Oe("value","any"),Oe("acc","number")];dn(de.maxItems)&&(yield`${Ce}.length <= ${de.maxItems}`),dn(de.minItems)&&(yield`${Ce}.length >= ${de.minItems}`);let ue=ye(de.items,qe,"value");if(yield`${Ce}.every((${$e}) => ${ue})`,ra(de.contains)||dn(de.minContains)||dn(de.maxContains)){let He=ra(de.contains)?de.contains:Ii(),Me=ye(He,qe,"value"),be=dn(de.minContains)?[`(count >= ${de.minContains})`]:[],Ge=dn(de.maxContains)?[`(count <= ${de.maxContains})`]:[],rt=`const count = value.reduce((${ce}, ${$e}) => ${Me} ? acc + 1 : acc, 0)`,ht=["(count > 0)",...be,...Ge].join(" && ");yield`((${$e}) => { ${rt}; return ${ht}})(${Ce})`}de.uniqueItems===!0&&(yield`((${$e}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${Ce})`)}a(o,"FromArray");function*s(de,qe,Ce){yield`(typeof value === 'object' && Symbol.asyncIterator in ${Ce})`}a(s,"FromAsyncIterator");function*c(de,qe,Ce){yield`(typeof ${Ce} === 'bigint')`,ju(de.exclusiveMaximum)&&(yield`${Ce} < BigInt(${de.exclusiveMaximum})`),ju(de.exclusiveMinimum)&&(yield`${Ce} > BigInt(${de.exclusiveMinimum})`),ju(de.maximum)&&(yield`${Ce} <= BigInt(${de.maximum})`),ju(de.minimum)&&(yield`${Ce} >= BigInt(${de.minimum})`),ju(de.multipleOf)&&(yield`(${Ce} % BigInt(${de.multipleOf})) === 0`)}a(c,"FromBigInt");function*l(de,qe,Ce){yield`(typeof ${Ce} === 'boolean')`}a(l,"FromBoolean");function*u(de,qe,Ce){yield*re(de.returns,qe,`${Ce}.prototype`)}a(u,"FromConstructor");function*d(de,qe,Ce){yield`(${Ce} instanceof Date) && Number.isFinite(${Ce}.getTime())`,dn(de.exclusiveMaximumTimestamp)&&(yield`${Ce}.getTime() < ${de.exclusiveMaximumTimestamp}`),dn(de.exclusiveMinimumTimestamp)&&(yield`${Ce}.getTime() > ${de.exclusiveMinimumTimestamp}`),dn(de.maximumTimestamp)&&(yield`${Ce}.getTime() <= ${de.maximumTimestamp}`),dn(de.minimumTimestamp)&&(yield`${Ce}.getTime() >= ${de.minimumTimestamp}`),dn(de.multipleOfTimestamp)&&(yield`(${Ce}.getTime() % ${de.multipleOfTimestamp}) === 0`)}a(d,"FromDate");function*p(de,qe,Ce){yield`(typeof ${Ce} === 'function')`}a(p,"FromFunction");function*m(de,qe,Ce){let $e=globalThis.Object.getOwnPropertyNames(de.$defs).reduce((ce,ue)=>[...ce,de.$defs[ue]],[]);yield*re(Zm(de.$ref),[...qe,...$e],Ce)}a(m,"FromImport");function*h(de,qe,Ce){yield`Number.isInteger(${Ce})`,dn(de.exclusiveMaximum)&&(yield`${Ce} < ${de.exclusiveMaximum}`),dn(de.exclusiveMinimum)&&(yield`${Ce} > ${de.exclusiveMinimum}`),dn(de.maximum)&&(yield`${Ce} <= ${de.maximum}`),dn(de.minimum)&&(yield`${Ce} >= ${de.minimum}`),dn(de.multipleOf)&&(yield`(${Ce} % ${de.multipleOf}) === 0`)}a(h,"FromInteger");function*g(de,qe,Ce){let $e=de.allOf.map(ce=>ye(ce,qe,Ce)).join(" && ");if(de.unevaluatedProperties===!1){let ce=we(`${new RegExp(X1(de))};`),ue=`Object.getOwnPropertyNames(${Ce}).every(key => ${ce}.test(key))`;yield`(${$e} && ${ue})`}else if(ra(de.unevaluatedProperties)){let ce=we(`${new RegExp(X1(de))};`),ue=`Object.getOwnPropertyNames(${Ce}).every(key => ${ce}.test(key) || ${ye(de.unevaluatedProperties,qe,`${Ce}[key]`)})`;yield`(${$e} && ${ue})`}else yield`(${$e})`}a(g,"FromIntersect");function*A(de,qe,Ce){yield`(typeof value === 'object' && Symbol.iterator in ${Ce})`}a(A,"FromIterator");function*y(de,qe,Ce){typeof de.const=="number"||typeof de.const=="boolean"?yield`(${Ce} === ${de.const})`:yield`(${Ce} === '${k0e.Escape(de.const)}')`}a(y,"FromLiteral");function*v(de,qe,Ce){yield"false"}a(v,"FromNever");function*b(de,qe,Ce){yield`(!${ye(de.not,qe,Ce)})`}a(b,"FromNot");function*I(de,qe,Ce){yield`(${Ce} === null)`}a(I,"FromNull");function*_(de,qe,Ce){yield f2.IsNumberLike(Ce),dn(de.exclusiveMaximum)&&(yield`${Ce} < ${de.exclusiveMaximum}`),dn(de.exclusiveMinimum)&&(yield`${Ce} > ${de.exclusiveMinimum}`),dn(de.maximum)&&(yield`${Ce} <= ${de.maximum}`),dn(de.minimum)&&(yield`${Ce} >= ${de.minimum}`),dn(de.multipleOf)&&(yield`(${Ce} % ${de.multipleOf}) === 0`)}a(_,"FromNumber");function*k(de,qe,Ce){yield f2.IsObjectLike(Ce),dn(de.minProperties)&&(yield`Object.getOwnPropertyNames(${Ce}).length >= ${de.minProperties}`),dn(de.maxProperties)&&(yield`Object.getOwnPropertyNames(${Ce}).length <= ${de.maxProperties}`);let $e=Object.getOwnPropertyNames(de.properties);for(let ce of $e){let ue=TG.Encode(Ce,ce),He=de.properties[ce];if(de.required&&de.required.includes(ce))yield*re(He,qe,ue),(Z1(He)||e(He))&&(yield`('${ce}' in ${Ce})`);else{let Me=ye(He,qe,ue);yield f2.IsExactOptionalProperty(Ce,ce,Me)}}if(de.additionalProperties===!1)if(de.required&&de.required.length===$e.length)yield`Object.getOwnPropertyNames(${Ce}).length === ${$e.length}`;else{let ce=`[${$e.map(ue=>`'${ue}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${Ce}).every(key => ${ce}.includes(key))`}if(typeof de.additionalProperties=="object"){let ce=ye(de.additionalProperties,qe,`${Ce}[key]`),ue=`[${$e.map(He=>`'${He}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${Ce}).every(key => ${ue}.includes(key) || ${ce}))`}}a(k,"FromObject");function*N(de,qe,Ce){yield`${Ce} instanceof Promise`}a(N,"FromPromise");function*F(de,qe,Ce){yield f2.IsRecordLike(Ce),dn(de.minProperties)&&(yield`Object.getOwnPropertyNames(${Ce}).length >= ${de.minProperties}`),dn(de.maxProperties)&&(yield`Object.getOwnPropertyNames(${Ce}).length <= ${de.maxProperties}`);let[$e,ce]=Object.entries(de.patternProperties)[0],ue=we(`${new RegExp($e)}`),He=ye(ce,qe,"value"),Me=ra(de.additionalProperties)?ye(de.additionalProperties,qe,Ce):de.additionalProperties===!1?"false":"true",be=`(${ue}.test(key) ? ${He} : ${Me})`;yield`(Object.entries(${Ce}).every(([key, value]) => ${be}))`}a(F,"FromRecord");function*O(de,qe,Ce){let $e=So(de,qe);if(fe.functions.has(de.$ref))return yield`${Qe(de.$ref)}(${Ce})`;yield*re($e,qe,Ce)}a(O,"FromRef");function*Y(de,qe,Ce){let $e=we(`${new RegExp(de.source,de.flags)};`);yield`(typeof ${Ce} === 'string')`,dn(de.maxLength)&&(yield`${Ce}.length <= ${de.maxLength}`),dn(de.minLength)&&(yield`${Ce}.length >= ${de.minLength}`),yield`${$e}.test(${Ce})`}a(Y,"FromRegExp");function*z(de,qe,Ce){yield`(typeof ${Ce} === 'string')`,dn(de.maxLength)&&(yield`${Ce}.length <= ${de.maxLength}`),dn(de.minLength)&&(yield`${Ce}.length >= ${de.minLength}`),de.pattern!==void 0&&(yield`${we(`${new RegExp(de.pattern)};`)}.test(${Ce})`),de.format!==void 0&&(yield`format('${de.format}', ${Ce})`)}a(z,"FromString");function*V(de,qe,Ce){yield`(typeof ${Ce} === 'symbol')`}a(V,"FromSymbol");function*U(de,qe,Ce){yield`(typeof ${Ce} === 'string')`,yield`${we(`${new RegExp(de.pattern)};`)}.test(${Ce})`}a(U,"FromTemplateLiteral");function*H(de,qe,Ce){yield`${Qe(de.$ref)}(${Ce})`}a(H,"FromThis");function*ee(de,qe,Ce){if(yield`Array.isArray(${Ce})`,de.items===void 0)return yield`${Ce}.length === 0`;yield`(${Ce}.length === ${de.maxItems})`;for(let $e=0;$e<de.items.length;$e++)yield`${ye(de.items[$e],qe,`${Ce}[${$e}]`)}`}a(ee,"FromTuple");function*J(de,qe,Ce){yield`${Ce} === undefined`}a(J,"FromUndefined");function*G(de,qe,Ce){yield`(${de.anyOf.map(ce=>ye(ce,qe,Ce)).join(" || ")})`}a(G,"FromUnion");function*j(de,qe,Ce){yield`${Ce} instanceof Uint8Array`,dn(de.maxByteLength)&&(yield`(${Ce}.length <= ${de.maxByteLength})`),dn(de.minByteLength)&&(yield`(${Ce}.length >= ${de.minByteLength})`)}a(j,"FromUint8Array");function*Z(de,qe,Ce){yield"true"}a(Z,"FromUnknown");function*ie(de,qe,Ce){yield f2.IsVoidLike(Ce)}a(ie,"FromVoid");function*ne(de,qe,Ce){let $e=fe.instances.size;fe.instances.set($e,de),yield`kind('${de[st]}', ${$e}, ${Ce})`}a(ne,"FromKind");function*re(de,qe,Ce,$e=!0){let ce=vo(de.$id)?[...qe,de]:qe,ue=de;if($e&&vo(de.$id)){let He=Qe(de.$id);if(fe.functions.has(He))return yield`${He}(${Ce})`;{fe.functions.set(He,"<deferred>");let Me=Xe(He,de,qe,"value",!1);return fe.functions.set(He,Me),yield`${He}(${Ce})`}}switch(ue[st]){case"Any":return yield*r(ue,ce,Ce);case"Argument":return yield*n(ue,ce,Ce);case"Array":return yield*o(ue,ce,Ce);case"AsyncIterator":return yield*s(ue,ce,Ce);case"BigInt":return yield*c(ue,ce,Ce);case"Boolean":return yield*l(ue,ce,Ce);case"Constructor":return yield*u(ue,ce,Ce);case"Date":return yield*d(ue,ce,Ce);case"Function":return yield*p(ue,ce,Ce);case"Import":return yield*m(ue,ce,Ce);case"Integer":return yield*h(ue,ce,Ce);case"Intersect":return yield*g(ue,ce,Ce);case"Iterator":return yield*A(ue,ce,Ce);case"Literal":return yield*y(ue,ce,Ce);case"Never":return yield*v(ue,ce,Ce);case"Not":return yield*b(ue,ce,Ce);case"Null":return yield*I(ue,ce,Ce);case"Number":return yield*_(ue,ce,Ce);case"Object":return yield*k(ue,ce,Ce);case"Promise":return yield*N(ue,ce,Ce);case"Record":return yield*F(ue,ce,Ce);case"Ref":return yield*O(ue,ce,Ce);case"RegExp":return yield*Y(ue,ce,Ce);case"String":return yield*z(ue,ce,Ce);case"Symbol":return yield*V(ue,ce,Ce);case"TemplateLiteral":return yield*U(ue,ce,Ce);case"This":return yield*H(ue,ce,Ce);case"Tuple":return yield*ee(ue,ce,Ce);case"Undefined":return yield*J(ue,ce,Ce);case"Union":return yield*G(ue,ce,Ce);case"Uint8Array":return yield*j(ue,ce,Ce);case"Unknown":return yield*Z(ue,ce,Ce);case"Void":return yield*ie(ue,ce,Ce);default:if(!yf.Has(ue[st]))throw new P0e(de);return yield*ne(ue,ce,Ce)}}a(re,"Visit");let fe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function ye(de,qe,Ce,$e=!0){return`(${[...re(de,qe,Ce,$e)].join(" && ")})`}a(ye,"CreateExpression");function Qe(de){return`check_${R0e.Encode(de)}`}a(Qe,"CreateFunctionName");function we(de){let qe=`local_${fe.variables.size}`;return fe.variables.set(qe,`const ${qe} = ${de}`),qe}a(we,"CreateVariable");function Xe(de,qe,Ce,$e,ce=!0){let[ue,He]=[`
`,rt=>"".padStart(rt," ")],Me=Oe("value","any"),be=ut("boolean"),Ge=[...re(qe,Ce,$e,ce)].map(rt=>`${He(4)}${rt}`).join(` &&${ue}`);return`function ${de}(${Me})${be} {${ue}${He(2)}return (${ue}${Ge}${ue}${He(2)})
}`}a(Xe,"CreateFunction");function Oe(de,qe){let Ce=fe.language==="typescript"?`: ${qe}`:"";return`${de}${Ce}`}a(Oe,"CreateParameter");function ut(de){return fe.language==="typescript"?`: ${de}`:""}a(ut,"CreateReturns");function Rt(de,qe,Ce){let $e=Xe("check",de,qe,"value"),ce=Oe("value","any"),ue=ut("boolean"),He=[...fe.functions.values()],Me=[...fe.variables.values()],be=vo(de.$id)?`return function check(${ce})${ue} {
  return ${Qe(de.$id)}(value)
}`:`return ${$e}`;return[...Me,...He,be].join(`
`)}a(Rt,"Build");function Et(...de){let qe={language:"javascript"},[Ce,$e,ce]=de.length===2&&Dn(de[1])?[de[0],de[1],qe]:de.length===2&&!Dn(de[1])?[de[0],[],de[1]]:de.length===3?[de[0],de[1],de[2]]:de.length===1?[de[0],[],qe]:[null,[],qe];if(fe.language=ce.language,fe.variables.clear(),fe.functions.clear(),fe.instances.clear(),!ra(Ce))throw new wG(Ce);for(let ue of $e)if(!ra(ue))throw new wG(ue);return Rt(Ce,$e,ce)}a(Et,"Code"),t.Code=Et;function At(de,qe=[]){let Ce=Et(de,qe,{language:"javascript"}),$e=globalThis.Function("kind","format","hash",Ce),ce=new Map(fe.instances);function ue(Ge,rt,ht){if(!yf.Has(Ge)||!ce.has(rt))return!1;let Ot=yf.Get(Ge),Zt=ce.get(rt);return Ot(Zt,ht)}a(ue,"typeRegistryFunction");function He(Ge,rt){return lA.Has(Ge)?lA.Get(Ge)(rt):!1}a(He,"formatRegistryFunction");function Me(Ge){return MI(Ge)}a(Me,"hashFunction");let be=$e(ue,He,Me);return new S0e(de,qe,be,Ce)}a(At,"Compile"),t.Compile=At})(na||(na={}));var hV=Ne(TI());f();f();var zu=[];for(let t=0;t<256;++t)zu.push((t+256).toString(16).slice(1));function fLe(t,e=0){return(zu[t[e+0]]+zu[t[e+1]]+zu[t[e+2]]+zu[t[e+3]]+"-"+zu[t[e+4]]+zu[t[e+5]]+"-"+zu[t[e+6]]+zu[t[e+7]]+"-"+zu[t[e+8]]+zu[t[e+9]]+"-"+zu[t[e+10]]+zu[t[e+11]]+zu[t[e+12]]+zu[t[e+13]]+zu[t[e+14]]+zu[t[e+15]]).toLowerCase()}a(fLe,"unsafeStringify");f();var pLe=require("crypto");var SG=new Uint8Array(256),_G=SG.length;function D0e(){return _G>SG.length-16&&((0,pLe.randomFillSync)(SG),_G=0),SG.slice(_G,_G+=16)}a(D0e,"rng");f();f();var mLe=require("crypto"),B0e={randomUUID:mLe.randomUUID};function U4t(t,e,r){if(B0e.randomUUID&&!e&&!t)return B0e.randomUUID();t=t||{};let n=t.random??t.rng?.()??D0e();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)e[r+o]=n[o];return e}return fLe(n)}a(U4t,"v4");var wr=U4t;var gV=Ne(mi());function WD(t){return t===1}a(WD,"isRestricted");var $Dt=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],k6=8192,jDt=21;var Yu=class{static{a(this,"TelemetryReporters")}getReporter(e,r=0){return WD(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(jD(e))return this.reporterRestricted;if(V4(e))return new n6}getFTReporter(e){if($9e(e))return this.reporterFT;if(V4(e))return new n6}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},GDt=E.Object({},{additionalProperties:E.String()}),VDt=E.Object({meanLogProb:E.Optional(E.Number()),meanAlternativeLogProb:E.Optional(E.Number())},{additionalProperties:E.Number()}),zDt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function KDt(t){return zDt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}a(KDt,"isOomError");function YDt(t){return ZF(t)?"network":KDt(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}a(YDt,"getErrorType");var Kr=class t{static{a(this,"TelemetryData")}static{this.validateTelemetryProperties=na.Compile(GDt)}static{this.validateTelemetryMeasurements=na.Compile(VDt)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Fa())}extendedBy(e,r){let n={...this.properties,...e},o={...this.measurements,...r},s=new t(n,o,this.issuedTime);return s.displayedTime=this.displayedTime,s}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Fa())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Lt).getFallbackExpAndFilters();n.addToTelemetry(e,this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=C0(e.get(on).getEditorInfo()),this.properties.editor_plugin_version=C0(e.get(on).getEditorPluginInfo());let r=e.get(Fs);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${y2(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(on);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=C0(n.getEditorInfo());let o=e.get(Lr);this.properties.fetcher=o.name;let s=e.get(Oc).getHttpSettings();this.properties.proxy_enabled=s.proxy?"true":"false",this.properties.proxy_auth=s.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=s.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=s.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=K9e(e);r["copilot.build"]=Y9e(e),r["copilot.buildType"]=TC(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(WD(e))return r;let n={};for(let o in r)t.keysToRemoveFromStandardTelemetryHack.includes(o)||(n[o]=r[o]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let o=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[o]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let o=e[n],s=o?.length??0;if(s>k6){let c=0,l=0;for(;s>0&&l<jDt;){l+=1;let u=n;l>1&&(u=n+"_"+(l<10?"0":"")+l);let d=c+k6;s<k6&&(d=c+s),r[u]=o.slice(c,d),s-=k6,c+=k6}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=ZDt(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let o=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:o}:(n.problem="both",n.error+=`; ${o}`)}if(n===void 0)return!0;if(V4(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return AA(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),WD(r)&&AA(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,o){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(o),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,j9e(e))}},IC=class t extends Kr{static{a(this,"TelemetryWithExp")}constructor(e,r,n,o){super(e,r,n),this.filtersAndExp=o}extendedBy(e,r){let n={...this.properties,...e},o={...this.measurements,...r},s=new t(n,o,this.issuedTime,this.filtersAndExp);return s.displayedTime=this.displayedTime,s}extendWithExpTelemetry(e){return this.filtersAndExp.exp.addToTelemetry(e,this),this.filtersAndExp.filters.addToTelemetry(this),Promise.resolve()}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new r2({}),exp:Vm.createEmptyConfig()})}};function P6(t,e,r,n){t.get(Yu).getReporter(t,e)?.sendTelemetryEvent(r,Kr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}a(P6,"sendTelemetryEvent");function JDt(t,e,r,n){t.get(Yu).getReporter(t,e)?.sendTelemetryErrorEvent(r,Kr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}a(JDt,"sendTelemetryErrorEvent");function XDt(t,e,r,n){t.get(Yu).getFTReporter(t)?.sendTelemetryEvent(r,Kr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}a(XDt,"sendFTTelemetryEvent");function $D(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}a($D,"telemetrizePromptLength");function Fa(){return performance.now()}a(Fa,"now");function ZDt(t){return Math.floor(t/1e3)}a(ZDt,"nowSeconds");function jD(t){return t.get($u).optedIn}a(jD,"shouldSendRestricted");function $9e(t){return t.get($u).ftFlag!==""}a($9e,"shouldSendFinetuningTelemetry");function Pt(t,e,r,n){return t.get(nl).register(eBt(t,e,Fa(),r?.extendedBy(),n))}a(Pt,"telemetry");async function eBt(t,e,r,n,o=0){let s=n||Kr.createAndMarkAsIssued({},{});await s.makeReadyForSending(t,o??!1,"IncludeExp",r),(!WD(o)||jD(t))&&P6(t,o,e,s),WD(o)&&$Dt.includes(e)&&$9e(t)&&XDt(t,o,e,s)}a(eBt,"_telemetry");function Vj(t,e){return t.get(nl).register(tBt(t,e,Fa()))}a(Vj,"telemetryExpProblem");async function tBt(t,e,r){let n="expProblem",o=Kr.createAndMarkAsIssued(e,{});await o.makeReadyForSending(t,0,"SkipExp",r),P6(t,0,n,o)}a(tBt,"_telemetryExpProblem");function che(t,e,r,n){let o={...r,...j9e(t)};P6(t,0,e,{properties:o,measurements:n})}a(che,"telemetryRaw");function j9e(t){let e=t.get(on),r={unique_id:wr(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:C0(e.getEditorInfo())};return{...t.get($u).getProperties(),...r}}a(j9e,"createRequiredProperties");var ahe=class extends Error{static{a(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,hV.SHA256)(hV.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Xa(t,e,r,n,o){return t.get(nl).register(G9e(t,e,Fa(),r,{...n},o))}a(Xa,"telemetryException");async function G9e(t,e,r,n,o,s){let c;if(e instanceof Error){if(c=e,c.name==="Canceled"&&c.message==="Canceled"||c.name==="CodeExpectedError"||kd(c)||c instanceof Da||c instanceof gV.ConnectionError||c instanceof gV.ResponseError)return}else{if(c=new ahe(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(c.stack?.startsWith(`${c}
`)){let y=c.stack.slice(`${c}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),c.stack=`${c}
${y.join(`
`)}`}}let l=t.get(on).getEditorInfo(),u;l.root&&(u=[{prefix:`${l.name}:`,path:l.root}]);let d=jD(t),p=zNe(c,u,d),m=YDt(c),h=m==="exception",g=Kr.createAndMarkAsIssued({origin:n??"",type:c.name,code:`${c.code??""}`,reason:p.stack||p.toString(),message:p.message,...o});if(await g.makeReadyForSending(t,0,"IncludeExp",r),s?.exception_detail)for(let y of s.exception_detail)y.value&&(d?y.value=Lpe(y.value):y.value="[redacted]");if(s??=QNe(t,p),s.context={...s.context,"copilot_event.unique_id":g.properties.unique_id,"#restricted_telemetry":d?"true":"false"},n&&(s.context["#origin"]=n,s.transaction=n),s.rollup_id!=="auto"&&(g.properties.errno=s.rollup_id),s.created_at=new Date(g.issuedTime).toISOString(),d){let y=VNe(c,u),v=Kr.createAndMarkAsIssued({origin:n??"",type:c.name,code:`${c.code??""}`,reason:y.stack||y.toString(),message:y.message,...o});s.rollup_id!=="auto"&&(v.properties.errno=s.rollup_id),await v.makeReadyForSending(t,1,"IncludeExp",r),v.properties.unique_id=g.properties.unique_id,g.properties.restricted_unique_id=v.properties.unique_id,P6(t,1,`error.${m}`,v)}let A=s.rollup_id==="auto"?c.stack??"":s.rollup_id;h&&!t.get(mC).isThrottled(A)&&(g.properties.failbot_payload=JSON.stringify(s)),P6(t,0,`error.${m}`,g)}a(G9e,"_telemetryException");function iu(t,e,r,n){let o=a(async(...s)=>{try{await e(...s)}catch(c){await G9e(t,c,Fa(),r,n)}},"wrapped");return(...s)=>t.get(nl).register(o(...s))}a(iu,"telemetryCatch");function AA(t,e,r,n){return t.get(nl).register(rBt(t,e,Fa(),r?.extendedBy(),n))}a(AA,"telemetryError");async function rBt(t,e,r,n,o=0){if(WD(o)&&!jD(t))return;let s=n||Kr.createAndMarkAsIssued({},{});await s.makeReadyForSending(t,o,"IncludeExp",r),JDt(t,o,e,s)}a(rBt,"_telemetryError");function V9e(t,e,r,n,o){let s=Kr.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:o.toString()});if(r.logprobs)for(let[c,l]of Object.entries(r.logprobs))s.properties["logprobs_"+c]=JSON.stringify(l)??"unset";return s.extendWithRequestId(n),Pt(t,"engine.completion",s,1)}a(V9e,"logEngineCompletion");function z9e(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let s=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};s.context=e.context,n["request.option.extra"]=JSON.stringify(s)}let o=r.extendedBy(n);return Pt(t,"engine.prompt",o,1)}a(z9e,"logEnginePrompt");f();var Ju=class{static{a(this,"UrlOpener")}};var k0=new dt("auth"),yV=60;function P0(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}a(P0,"fillGitHubUrls");function J9e(){return Math.floor(Date.now()/1e3)}a(J9e,"nowSeconds");async function lhe(t,e,r){let n=Kr.createAndMarkAsIssued({},{});Pt(t,"auth.new_login");let o={"X-GitHub-Api-Version":"2024-12-15"};r?.hasKnownOrg&&(o["X-GitHub-Staff-Request"]="1");let s=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token",c=await hf(t,e,s,{timeout:12e4,headers:o}),l=await c.json(),u=l.user_notification;if(X9e(t,u,e),c.status===401){let g="Failed to get copilot token due to 401 status. Please sign out and try again.";return k0.info(t,g),AA(t,"auth.unknown_401",n),{failureKind:"HTTP401",message:g}}if(!c.ok||!l.token){k0.info(t,`Invalid copilot token: missing token: ${c.status} ${c.statusText}`),AA(t,"auth.invalid_token",n.extendedBy({status:c.status.toString(),status_text:c.statusText}));let g=l.error_details;return g?.notification_id!=="not_signed_up"&&X9e(t,g,e),{failureKind:"NotAuthorized",message:g?.message??"Could not retrieve token",canSignUpForLimited:l.can_signup_for_limited??!1}}let d=J9e()+l.refresh_in+yV,p=await uhe(t,e),m;p.ok&&(m=await p.json());let h=new C2(l,m,d);return Pt(t,"auth.new_token",n.extendedBy({...Bpe(h)},{adjusted_expires_at:h.expiresAt,expires_at:l.expires_at,current_time:J9e()})),{copilotToken:h}}a(lhe,"authFromGitHubSession");var lu=class{static{a(this,"CopilotTokenFetcher")}},AV=class extends lu{static{a(this,"NetworkCopilotTokenFetcher")}async fetchTokenResult(e,r,n){return await lhe(e,r,n)}};async function uhe(t,e){let r={"X-GitHub-Api-Version":"2025-05-01"},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";return await hf(t,e,n,{timeout:12e4,headers:r})}a(uhe,"fetchCopilotUserInfo");function X9e(t,e,r){e&&t.get(cc).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let o=n?.title===e.title,s=o||n?.title==="Dismiss";if(o){let c=t.get(on).getEditorPluginInfo(),l=e.url.replace("{EDITOR}",encodeURIComponent(c.name+"_"+c.version));await t.get(Ju).open(l)}e.notification_id&&s&&await nBt(t,e.notification_id,r)}).catch(n=>{k0.exception(t,n,"copilotToken.notification")})}a(X9e,"notifyUser");async function nBt(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",o=await hf(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!o||!o.ok)&&k0.error(t,`Failed to send notification result to GitHub: ${o?.status} ${o?.statusText}`)}a(nBt,"sendNotificationResultToGitHub");var C2=class{constructor(e,r,n){this.envelope=e;this.expiresAt=n;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new rj(r)}static{a(this,"CopilotToken")}get endpoints(){return{...t2,...this.envelope.endpoints??{}}}needsRefresh(){return(this.expiresAt-yV)*1e3<Date.now()}isExpired(){return this.expiresAt*1e3<Date.now()}get hasKnownOrg(){return Tpe(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,o=(e??"").split(":")[0].split(";");for(let s of o){let[c,l]=s.split("=");r.set(c,l)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}get isCopilotCodeReviewEnabled(){return this.getTokenValue("ccr")==="1"}};f();f();var D6="apps",dhe="hosts",yA=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{a(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,o=await this.persistenceManager.read(D6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!o?(n=D0,o=await this.persistenceManager.read(D6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(uu).findAppIdToAuthenticate(),o){let s={...o,oauth_token:o.access_token||o.oauth_token,user:o.login||o.user,githubAppId:n,authAuthority:r};if(s.oauth_token&&s.user)return s}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(dhe,e);if(r)return{...r,githubAppId:D0}}async saveAuthRecord(e){await this.persistenceManager.update(D6,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===D0&&await this.persistenceManager.delete(dhe,r),await this.persistenceManager.delete(D6,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(D6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:D0})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(dhe)}authRecordKey(e,r){let n=r.githubAppId??e.get(uu).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};f();f();f();var nOe=Ne(eOe()),iOe=Ne(rOe()),B0=Ne(require("os"));var GD=class{constructor(e,r,n,o,s=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=s;this.onCopilotToken=a(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:a((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let o={method:"POST",headers:n,body:e.data};this.ctx.get(Lr).fetch(e.urlString,o).then(s=>s.text().then(c=>{r(s.status,Object.fromEntries(s.headers),c)})).catch(s=>{pn.debug(this.ctx,"Error sending telemetry",s),r(0,{})})},"sendPOST")};this.client=new iOe.ApplicationInsights({instrumentationKey:o,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[nOe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=iBt(e),this.commonProperties=oBt(e),this.#e=lc(e,this.onCopilotToken)}static{a(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let o=this.qualifyEventName(e);this.client.track({name:o,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:o,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function iBt(t){let e={},r=t.get(Fs);e["ai.session.id"]=r.sessionId;let n=t.get($u);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${B0.type()} ${B0.release()}`,e["ai.device.osArchitecture"]=B0.arch(),e["ai.device.osPlatform"]=B0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(wo).getVersion(),e}a(iBt,"getTags");function oBt(t){let e={};e.common_os=B0.platform(),e.common_platformversion=B0.release(),e.common_arch=B0.arch(),e.common_cpu=Array.from(new Set(B0.cpus().map(n=>n.model))).join();let r=t.get(Fs);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}a(oBt,"getCommonProperties");var sBt="7d7048df-6dd0-4048-bb23-b716c1461f8f",aBt="3fdd7f28-937a-48c8-9a21-ba337db23bd1",cBt="f0000000-0000-0000-0000-000000000000";function oOe(t){return new URL(t).hostname==="github.com"?t2.telemetry:t.replace("://","://copilot-telemetry-service.")}a(oOe,"getEndpointForServerUrl");var Qd=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=oOe(this.serverUrl);this.shuttingDown=new Set;lc(e,n=>this.updateServiceEndpoints(n.endpoints))}static{a(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let o=r.get(Yu);o.setReporter(new GD(r,this.namespace,n,sBt)),o.setRestrictedReporter(new GD(r,this.namespace,n,aBt)),o.setFTReporter(new GD(r,this.namespace,n,cBt,!0))}}setCustomReporters(e,r){this.shutdownWithoutWaiting();let n=this.ctx.get(Yu);n.setReporter(e),n.setRestrictedReporter(r)}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(Yu).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=oOe(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};async function lBt(t,e){let r="copilot_internal/subscribe_limited_user";try{return(await(await hf(t,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":"2025-05-01"},body:JSON.stringify({restricted_telemetry:t.get(Qd).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json()).subscribed}catch(n){return k0.exception(t,n,"signUpLimited failed"),!1}}a(lBt,"apiFetchSignUpLimited");async function phe(t,e,r){let n=await t.get(nr).getTokenResult();switch(n.failureKind){case void 0:return"OK";case"HTTP401":case"NotSignedIn":return"NotSignedIn";case"NotAuthorized":return r&&n.canSignUpForLimited&&await lBt(t,e)?phe(t,e,!1):"NotAuthorized";case"Exception":throw n.exception}}a(phe,"getTokenWithSignUpLimited");var Fi=class{constructor(e,r){this.ctx=e;this.env=r}static{a(this,"AuthManager")}hasTransientSession(){return this.transientSession!==void 0}get _copilotTokenManager(){return this.ctx.get(nr)}getConfiguredUrls(){return this.ctx.get(gf).getConfiguredUrls()}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await phe(this.ctx,n,e?.freshSignIn??!1),user:n.login})}async getSession(){await this.ctx.get(Oc).requireReady();let e=mhe(this.env)??await this.transientSession;if(!(e&&e.accessToken===void 0))return e?{...e,...P0(e)}:await this.getPersistedSession()}setTransientSession(e){this.transientSession=e&&Promise.resolve(e),this._copilotTokenManager.resetToken()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}},xV=class extends Fi{static{a(this,"PersistentAuthManager")}get authPersistence(){return this.ctx.get(yA)}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&TC(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}};function mhe(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{...P0({apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL}),login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{...P0({apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL}),login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{...P0({apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL}),login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}a(mhe,"getSessionFromEnv");f();var uBt=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],sOe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",aOe="https://gh.io/copilot-network-errors",Ap=class{constructor(){this.notifiedErrorCodes=[]}static{a(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&uBt.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new dt("certificates").error(e,`${sOe} Please visit ${aOe} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(cc).showWarningMessage(sOe,n).then(o=>{if(o?.title===n.title)return e.get(Ju).open(aOe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();var Wo=class{static{a(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},EV=class extends Wo{static{a(this,"NoOpStatusReporter")}didChange(){}};f();var cOe=Ne(mi());var is=class extends cOe.Emitter{static{a(this,"Emitter")}get event(){return super.event}};var hhe=class extends Da{constructor(r){super("message"in r?r.message:`${r.failureKind}`);this.result=r}static{a(this,"TokenResultError")}},nr=class{constructor(e,r=!1){this.ctx=e;this.primed=r;this.lastToken=void 0;this.activeToken=void 0;this.tokenPromise=void 0;this.tokenPrimingError=void 0;this.didChangeTokenResult=new is;this.onDidChangeTokenResult=this.didChangeTokenResult.event;this.didResetToken=new is;this.onDidResetToken=this.didResetToken.event}static{a(this,"CopilotTokenManager")}async getGitHubSession(){return await this.ctx.get(Fi).getSession()}primeToken(){if(this.tokenPrimingError)return Promise.reject(this.tokenPrimingError);this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}async fetchTokenResult(e){return await this.ctx.get(lu).fetchTokenResult(this.ctx,e,this.lastToken)}setToken(e){this.activeToken=this.lastToken=e}async getTokenResult(){if(!this.primed){let e=new Error("Token requested before initialization");if(VD(this.ctx))throw this.tokenPrimingError=e,e;k0.exception(this.ctx,e,".getToken")}if(!this.tokenPromise&&(!this.activeToken||this.activeToken?.needsRefresh())){let r=this.getGitHubSession().then(async n=>n?await this.fetchTokenResult(n):{failureKind:"NotSignedIn"}).catch(n=>{if(!(n instanceof Error))throw n;return{failureKind:"Exception",message:String(n),exception:n}}).then(n=>(this.tokenPromise!==r||(this.tokenPromise=void 0,this.handleTokenResult(n)),n));this.tokenPromise=r}return this.activeToken&&!this.activeToken.isExpired()?{copilotToken:this.activeToken}:await this.tokenPromise}handleTokenResult(e){let r=this.ctx.get(Wo);switch(e.failureKind){case"NotSignedIn":r.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":r.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":r.setError(e.message);break;case"Exception":r.setWarning(e.message),this.ctx.get(Ap).notifyUser(this.ctx,e.exception);break;case void 0:r.forceNormal(),this.setToken(e.copilotToken)}this.didChangeTokenResult.fire(e)}async getToken(){let e=await this.getTokenResult();if(e.copilotToken)return e.copilotToken;throw e.exception?e.exception:new hhe(e)}resetToken(e){e!==void 0?(Pt(this.ctx,"auth.reset_token_"+e),k0.debug(this.ctx,`Resetting copilot token on HTTP error ${e}`)):k0.debug(this.ctx,"Resetting copilot token"),!(!this.activeToken&&!this.tokenPromise)&&(this.activeToken=void 0,this.tokenPromise=void 0,this.didResetToken.fire())}getLastToken(){return this.lastToken}};function Gj(t){return t.get(nr).getLastToken()}a(Gj,"getLastCopilotToken");f();var wC=class{static{a(this,"Clock")}now(){return new Date}};f();var CA=class{static{a(this,"ExpConfigMaker")}},B6=class extends CA{constructor(r={}){super();this.defaultFilters=r}static{a(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,o){let s=r.get(Lr),c=Object.keys(o).length===0?this.defaultFilters:o,l=new URL("telemetry",n.telemetry).href,u;try{u=await s.fetch(l,{method:"GET",headers:c,timeout:5e3})}catch(h){return Vm.createFallbackConfig(r,`Error fetching ExP config: ${String(h)}`)}if(!u.ok)return Vm.createFallbackConfig(r,`ExP responded with ${u.status}`);let d;try{d=await u.json()}catch(h){if(h instanceof SyntaxError)return Xa(r,h,"fetchExperiments"),Vm.createFallbackConfig(r,"ExP responded with invalid JSON");throw h}let p=d.Configs.find(h=>h.Id==="vscode")??{Id:"vscode",Parameters:{}},m=Object.entries(p.Parameters).map(([h,g])=>h+(g?"":"cf"));return new Vm(p.Parameters,d.AssignmentContext,m.join(";"))}},bV=class extends CA{static{a(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(Vm.createEmptyConfig())}};f();f();var IV=class{constructor(e){this.prefix=e}static{a(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},ghe=class extends IV{static{a(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},lOe=a(t=>new ghe(t),"DEFAULT_GRANULARITY"),TV=class extends IV{constructor(r,n=.5,o=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=o}static{a(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],o=this.getUpcomingTimePeriodBucketStrings(r),s=this.getUpcomingByCallBucketStrings();for(let c of o)for(let l of s)n.push(this.prefix+c+l);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var uOe="X-Copilot-ClientTimeBucket",wV=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=lOe(e)}static{a(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let o=new TV(this.prefix);isNaN(r)||o.setByCallBuckets(r),isNaN(n)||o.setTimePeriod(n*3600*1e3),this.specs.set(e,o)}}extendFilters(e){let r=this.selectGranularity(e),[n,o]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(uOe,n),otherFilterSettingsToPrefetch:o.map(s=>e.withChange(uOe,s))}}};f();f();f();f();var Ahe=new Map;async function dBt(t){if(Ahe.has(t))return Ahe.get(t);let e=await crypto.subtle.importKey("raw",new TextEncoder().encode(t),{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return Ahe.set(t,e),e}a(dBt,"getCachedHmacKey");async function fBt(t){if(t)try{let e=await dBt(t),r=Math.floor(Date.now()/1e3).toString(),n=new TextEncoder().encode(r),o=await crypto.subtle.sign("HMAC",e,n),c=Array.from(new Uint8Array(o)).map(l=>l.toString(16).padStart(2,"0")).join("");return`${r}.${c}`}catch{return}}a(fBt,"createRequestHMAC");async function dOe(t){let e=await fBt(t);return e?{"Request-Hmac":e,"Copilot-Integration-Id":"jetbrains-chat-dev"}:{}}a(dOe,"createMsBenchHmacHeaders");f();f();f();f();var SV="4.11.0",v2="04b07795-8ddb-461a-bbee-02f9e1bf7b46",fOe="common",_V;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(_V||(_V={}));var N6=_V.AzurePublicCloud,pOe="login.microsoftonline.com",mOe=["*"],hOe="cae",gOe="nocae",AOe="msal.cache";var yhe;var yOe,RV,Che;function COe(){return RV!==void 0&&Che!==void 0}a(COe,"hasVSCodePlugin");function pBt(t){let e={cache:{},broker:{...t.brokerOptions,isEnabled:t.brokerOptions?.enabled??!1,enableMsaPassthrough:t.brokerOptions?.legacyEnableMsaPassthrough??!1}};if(t.tokenCachePersistenceOptions?.enabled){if(yhe===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let r=t.tokenCachePersistenceOptions.name||AOe;e.cache.cachePlugin=yhe({name:`${r}.${gOe}`,...t.tokenCachePersistenceOptions}),e.cache.cachePluginCae=yhe({name:`${r}.${hOe}`,...t.tokenCachePersistenceOptions})}if(t.brokerOptions?.enabled)if(t.isVSCodeCredential){if(Che===void 0)throw new Error(["Visual Studio Code Credential was requested, but no plugin was configured or no authentication record was found.","You must install the identity-vscode plugin package (`npm install --save @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=Che.broker}else{if(yOe===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(brokerPlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=yOe.broker}return e}a(pBt,"generatePluginConfiguration");var vOe={generatePluginConfiguration:pBt};f();f();f();function mBt(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}a(mBt,"isErrorResponse");var EOe="CredentialUnavailableError",Wr=class extends Error{static{a(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=EOe}},kV="AuthenticationError",GI=class extends Error{static{a(this,"AuthenticationError")}statusCode;errorResponse;constructor(e,r,n){let o={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(mBt(r))o=xOe(r);else if(typeof r=="string")try{let s=JSON.parse(r);o=xOe(s)}catch{e===400?o={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:o={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else o={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${o.error} Status code: ${e}
More details:
${o.errorDescription},`,n),this.statusCode=e,this.errorResponse=o,this.name=kV}},bOe="AggregateAuthenticationError",M6=class extends Error{static{a(this,"AggregateAuthenticationError")}errors;constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=bOe}};function xOe(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}a(xOe,"convertOAuthErrorResponseToErrorResponse");var ih=class extends Error{static{a(this,"AuthenticationRequiredError")}scopes;getTokenOptions;constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};f();f();f();f();var IOe=require("node:os"),TOe=Ne(require("node:util"),1),wOe=Ne(require("node:process"),1);function _Oe(t,...e){wOe.stderr.write(`${TOe.default.format(t,...e)}${IOe.EOL}`)}a(_Oe,"log");var SOe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,ROe,vhe=[],xhe=[],PV=[];SOe&&Ehe(SOe);var kOe=Object.assign(t=>POe(t),{enable:Ehe,enabled:bhe,disable:hBt,log:_Oe});function Ehe(t){ROe=t,vhe=[],xhe=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?xhe.push(new RegExp(`^${n.substr(1)}$`)):vhe.push(new RegExp(`^${n}$`));for(let n of PV)n.enabled=bhe(n.namespace)}a(Ehe,"enable");function bhe(t){if(t.endsWith("*"))return!0;for(let e of xhe)if(e.test(t))return!1;for(let e of vhe)if(e.test(t))return!0;return!1}a(bhe,"enabled");function hBt(){let t=ROe||"";return Ehe(""),t}a(hBt,"disable");function POe(t){let e=Object.assign(r,{enabled:bhe(t),destroy:gBt,log:kOe.log,namespace:t,extend:ABt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return a(r,"debug"),PV.push(e),e}a(POe,"createDebugger");function gBt(){let t=PV.indexOf(this);return t>=0?(PV.splice(t,1),!0):!1}a(gBt,"destroy");function ABt(t){let e=POe(`${this.namespace}:${t}`);return e.log=this.log,e}a(ABt,"extend");var zD=kOe;var BOe=new Set,DV=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,NV,Ihe=zD("azure");Ihe.log=(...t)=>{zD.log(...t)};var The=["verbose","info","warning","error"];DV&&(LOe(DV)?yBt(DV):console.error(`AZURE_LOG_LEVEL set to unknown log level '${DV}'; logging is not enabled. Acceptable values: ${The.join(", ")}.`));function yBt(t){if(t&&!LOe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${The.join(",")}`);NV=t;let e=[];for(let r of BOe)MOe(r)&&e.push(r.namespace);zD.enable(e.join(","))}a(yBt,"setLogLevel");function MV(){return NV}a(MV,"getLogLevel");var DOe={verbose:400,info:300,warning:200,error:100};function VI(t){let e=Ihe.extend(t);return NOe(Ihe,e),{error:BV(e,"error"),warning:BV(e,"warning"),info:BV(e,"info"),verbose:BV(e,"verbose")}}a(VI,"createClientLogger");function NOe(t,e){e.log=(...r)=>{t.log(...r)}}a(NOe,"patchLogMethod");function BV(t,e){let r=Object.assign(t.extend(e),{level:e});if(NOe(t,r),MOe(r)){let n=zD.disable();zD.enable(n+","+r.namespace)}return BOe.add(r),r}a(BV,"createLogger");function MOe(t){return!!(NV&&DOe[t.level]<=DOe[NV])}a(MOe,"shouldEnable");function LOe(t){return The.includes(t)}a(LOe,"isAzureLogLevel");var N0=VI("identity");function LV(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}a(LV,"processEnvVars");function Ll(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}a(Ll,"formatSuccess");function bo(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}a(bo,"formatError");function FOe(t,e,r=N0){let n=e?`${e.fullTitle} ${t}`:t;function o(u){r.info(`${n} =>`,u)}a(o,"info");function s(u){r.warning(`${n} =>`,u)}a(s,"warning");function c(u){r.verbose(`${n} =>`,u)}a(c,"verbose");function l(u){r.error(`${n} =>`,u)}return a(l,"error"),{title:t,fullTitle:n,info:o,warning:s,verbose:c,error:l}}a(FOe,"credentialLoggerInstance");function ii(t,e=N0){let r=FOe(t,void 0,e);return{...r,parent:e,getToken:FOe("=> getToken()",r,e)}}a(ii,"credentialLogger");f();f();f();f();var KD={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function OOe(t={}){let e=new whe(t.parentContext);return t.span&&(e=e.setValue(KD.span,t.span)),t.namespace&&(e=e.setValue(KD.namespace,t.namespace)),e}a(OOe,"createTracingContext");var whe=class t{static{a(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};f();var UOe=Ne(QOe(),1),OV=UOe.state;function CBt(){return{end:a(()=>{},"end"),isRecording:a(()=>!1,"isRecording"),recordException:a(()=>{},"recordException"),setAttribute:a(()=>{},"setAttribute"),setStatus:a(()=>{},"setStatus"),addEvent:a(()=>{},"addEvent")}}a(CBt,"createDefaultTracingSpan");function vBt(){return{createRequestHeaders:a(()=>({}),"createRequestHeaders"),parseTraceparentHeader:a(()=>{},"parseTraceparentHeader"),startSpan:a((t,e)=>({span:CBt(),tracingContext:OOe({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}a(vBt,"createDefaultInstrumenter");function L6(){return OV.instrumenterImplementation||(OV.instrumenterImplementation=vBt()),OV.instrumenterImplementation}a(L6,"getInstrumenter");f();function F6(t){let{namespace:e,packageName:r,packageVersion:n}=t;function o(d,p,m){var h;let g=L6().startSpan(d,Object.assign(Object.assign({},m),{packageName:r,packageVersion:n,tracingContext:(h=p?.tracingOptions)===null||h===void 0?void 0:h.tracingContext})),A=g.tracingContext,y=g.span;A.getValue(KD.namespace)||(A=A.setValue(KD.namespace,e)),y.setAttribute("az.namespace",A.getValue(KD.namespace));let v=Object.assign({},p,{tracingOptions:Object.assign(Object.assign({},p?.tracingOptions),{tracingContext:A})});return{span:y,updatedOptions:v}}a(o,"startSpan");async function s(d,p,m,h){let{span:g,updatedOptions:A}=o(d,p,h);try{let y=await c(A.tracingOptions.tracingContext,()=>Promise.resolve(m(A,g)));return g.setStatus({status:"success"}),y}catch(y){throw g.setStatus({status:"error",error:y}),y}finally{g.end()}}a(s,"withSpan");function c(d,p,...m){return L6().withContext(d,p,...m)}a(c,"withContext");function l(d){return L6().parseTraceparentHeader(d)}a(l,"parseTraceparentHeader");function u(d){return L6().createRequestHeaders(d)}return a(u,"createRequestHeaders"),{startSpan:o,withSpan:s,withContext:c,parseTraceparentHeader:l,createRequestHeaders:u}}a(F6,"createTracingClient");var os=F6({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:SV});var _he=ii("ChainedTokenCredential"),O6=class{static{a(this,"ChainedTokenCredential")}_sources=[];constructor(...e){this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,o,s=[];return os.withSpan("ChainedTokenCredential.getToken",r,async c=>{for(let l=0;l<this._sources.length&&n===null;l++)try{n=await this._sources[l].getToken(e,c),o=this._sources[l]}catch(u){if(u.name==="CredentialUnavailableError"||u.name==="AuthenticationRequiredError")s.push(u);else throw _he.getToken.info(bo(e,u)),u}if(!n&&s.length>0){let l=new M6(s,"ChainedTokenCredential authentication failed.");throw _he.getToken.info(bo(e,l)),l}if(_he.getToken.info(`Result for ${o.constructor.name}: ${Ll(e)}`),n===null)throw new Wr("Failed to retrieve a valid token");return{token:n,successfulCredential:o}})}};f();f();f();f();var U0={};Sa(U0,{AuthError:()=>ci,AuthErrorCodes:()=>ZD,AuthErrorMessage:()=>Rhe,AzureCloudInstance:()=>ux,ClientApplication:()=>mT,ClientAssertion:()=>yx,ClientAuthError:()=>tT,ClientAuthErrorCodes:()=>Es,ClientAuthErrorMessage:()=>Phe,ClientConfigurationError:()=>oB,ClientConfigurationErrorCodes:()=>iB,ClientConfigurationErrorMessage:()=>Lhe,ClientCredentialClient:()=>hT,ConfidentialClientApplication:()=>SB,CryptoProvider:()=>BC,DeviceCodeClient:()=>TB,DistributedCachePlugin:()=>pK,InteractionRequiredAuthError:()=>F0,InteractionRequiredAuthErrorCodes:()=>cz,InteractionRequiredAuthErrorMessage:()=>Hge,LogLevel:()=>Za,Logger:()=>M0,ManagedIdentityApplication:()=>RB,ManagedIdentitySourceNames:()=>ei,OnBehalfOfClient:()=>_B,PromptValue:()=>KI,ProtocolMode:()=>Ud,PublicClientApplication:()=>wB,ResponseMode:()=>_C,ServerError:()=>bf,TokenCache:()=>pB,TokenCacheContext:()=>O0,UsernamePasswordClient:()=>IB,internals:()=>Wge,version:()=>bA});f();var Wge={};Sa(Wge,{Deserializer:()=>gx,Serializer:()=>zI});f();f();var zI=class{static{a(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,realm:o.realm,local_account_id:o.localAccountId,username:o.username,authority_type:o.authorityType,name:o.name,client_info:o.clientInfo,last_modification_time:o.lastModificationTime,last_modification_app:o.lastModificationApp,tenantProfiles:o.tenantProfiles?.map(s=>JSON.stringify(s))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,credential_type:o.credentialType,client_id:o.clientId,secret:o.secret,realm:o.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,credential_type:o.credentialType,client_id:o.clientId,secret:o.secret,realm:o.realm,target:o.target,cached_at:o.cachedAt,expires_on:o.expiresOn,extended_expires_on:o.extendedExpiresOn,refresh_on:o.refreshOn,key_id:o.keyId,token_type:o.tokenType,requestedClaims:o.requestedClaims,requestedClaimsHash:o.requestedClaimsHash,userAssertionHash:o.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,credential_type:o.credentialType,client_id:o.clientId,secret:o.secret,family_id:o.familyId,target:o.target,realm:o.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={client_id:o.clientId,environment:o.environment,family_id:o.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};f();f();f();f();f();f();f();f();f();var nt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},ai={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},yp=[nt.OPENID_SCOPE,nt.PROFILE_SCOPE,nt.OFFLINE_ACCESS_SCOPE],She=[...yp,nt.EMAIL_SCOPE],qs={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var Cp={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},x2={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},KI={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},QV={PLAIN:"plain",S256:"S256"},YD={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var _C={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},vp={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},E2={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},fc={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Ro={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var Q6="appmetadata",qOe="client_info",ox="1",JD={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},vf={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Fl={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},fo={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},SC={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},U6={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},q6={username:"username",password:"password"},b2={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},UV={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ks={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var XD=300,Xu={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var ZD={};Sa(ZD,{postRequestFailed:()=>W6,unexpectedError:()=>H6});f();var H6="unexpected_error",W6="post_request_failed";var qV={[H6]:"Unexpected error in authentication.",[W6]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},Rhe={unexpectedError:{code:H6,desc:qV[H6]},postRequestFailed:{code:W6,desc:qV[W6]}},ci=class t extends Error{static{a(this,"AuthError")}constructor(e,r,n){let o=r?`${e}: ${r}`:e;super(o),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||nt.EMPTY_STRING,this.errorMessage=r||nt.EMPTY_STRING,this.subError=n||nt.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function khe(t,e){return new ci(t,e?`${qV[t]} ${e}`:qV[t])}a(khe,"createAuthError");var Es={};Sa(Es,{authTimeNotFound:()=>sx,authorizationCodeMissingFromServerResponse:()=>O2,bindingKeyNotRemoved:()=>e9,cannotAppendScopeSet:()=>M2,cannotRemoveEmptyScope:()=>N2,clientInfoDecodingError:()=>YI,clientInfoEmptyError:()=>I2,deviceCodeExpired:()=>V6,deviceCodePollingCancelled:()=>G6,deviceCodeUnknownError:()=>z6,emptyInputScopeSet:()=>ZI,endSessionEndpointNotSupported:()=>Q2,endpointResolutionError:()=>xf,hashNotDeserialized:()=>S2,invalidAssertion:()=>J6,invalidCacheEnvironment:()=>cx,invalidCacheRecord:()=>L2,invalidClientCredential:()=>X6,invalidState:()=>vA,keyIdMissing:()=>U2,maxAgeTranspired:()=>P2,methodNotImplemented:()=>Oi,missingTenantIdError:()=>n9,multipleMatchingAccounts:()=>j6,multipleMatchingAppMetadata:()=>D2,multipleMatchingTokens:()=>$6,nestedAppAuthBridgeDisabled:()=>i9,networkError:()=>w2,noAccountFound:()=>K6,noAccountInSilentRequest:()=>ax,noCryptoObject:()=>eT,noNetworkConnectivity:()=>t9,nonceMismatch:()=>k2,nullOrEmptyToken:()=>T2,openIdConfigError:()=>_2,requestCannotBeMade:()=>B2,stateMismatch:()=>R2,stateNotFound:()=>XI,tokenClaimsCnfRequiredForSignedJwt:()=>F2,tokenParsingError:()=>JI,tokenRefreshRequired:()=>lx,unexpectedCredentialType:()=>Y6,userCanceled:()=>r9,userTimeoutReached:()=>Z6});f();var YI="client_info_decoding_error",I2="client_info_empty_error",JI="token_parsing_error",T2="null_or_empty_token",xf="endpoints_resolution_error",w2="network_error",_2="openid_config_error",S2="hash_not_deserialized",vA="invalid_state",R2="state_mismatch",XI="state_not_found",k2="nonce_mismatch",sx="auth_time_not_found",P2="max_age_transpired",$6="multiple_matching_tokens",j6="multiple_matching_accounts",D2="multiple_matching_appMetadata",B2="request_cannot_be_made",N2="cannot_remove_empty_scope",M2="cannot_append_scopeset",ZI="empty_input_scopeset",G6="device_code_polling_cancelled",V6="device_code_expired",z6="device_code_unknown_error",ax="no_account_in_silent_request",L2="invalid_cache_record",cx="invalid_cache_environment",K6="no_account_found",eT="no_crypto_object",Y6="unexpected_credential_type",J6="invalid_assertion",X6="invalid_client_credential",lx="token_refresh_required",Z6="user_timeout_reached",F2="token_claims_cnf_required_for_signedjwt",O2="authorization_code_missing_from_server_response",e9="binding_key_not_removed",Q2="end_session_endpoint_not_supported",U2="key_id_missing",t9="no_network_connectivity",r9="user_canceled",n9="missing_tenant_id_error",Oi="method_not_implemented",i9="nested_app_auth_bridge_disabled";var li={[YI]:"The client info could not be parsed/decoded correctly",[I2]:"The client info was empty",[JI]:"Token cannot be parsed",[T2]:"The token is null or empty",[xf]:"Endpoints cannot be resolved",[w2]:"Network request failed",[_2]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[S2]:"The hash parameters could not be deserialized",[vA]:"State was not the expected format",[R2]:"State mismatch error",[XI]:"State not found",[k2]:"Nonce mismatch error",[sx]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[P2]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[$6]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[j6]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[D2]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[B2]:"Token request cannot be made without authorization code or refresh token.",[N2]:"Cannot remove null or empty scope from ScopeSet",[M2]:"Cannot append ScopeSet",[ZI]:"Empty input ScopeSet cannot be processed",[G6]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[V6]:"Device code is expired.",[z6]:"Device code stopped polling for unknown reasons.",[ax]:"Please pass an account object, silent flow is not supported without account information",[L2]:"Cache record object was null or undefined.",[cx]:"Invalid environment when attempting to create cache entry",[K6]:"No account found in cache for given key.",[eT]:"No crypto object detected.",[Y6]:"Unexpected credential type.",[J6]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[X6]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[lx]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Z6]:"User defined timeout for device code polling reached",[F2]:"Cannot generate a POP jwt if the token_claims are not populated",[O2]:"Server response does not contain an authorization code to proceed",[e9]:"Could not remove the credential's binding key from storage.",[Q2]:"The provided authority does not support logout",[U2]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[t9]:"No network connectivity. Check your internet connection.",[r9]:"User cancelled the flow.",[n9]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Oi]:"This method has not been implemented",[i9]:"The nested app auth bridge is disabled"},Phe={clientInfoDecodingError:{code:YI,desc:li[YI]},clientInfoEmptyError:{code:I2,desc:li[I2]},tokenParsingError:{code:JI,desc:li[JI]},nullOrEmptyToken:{code:T2,desc:li[T2]},endpointResolutionError:{code:xf,desc:li[xf]},networkError:{code:w2,desc:li[w2]},unableToGetOpenidConfigError:{code:_2,desc:li[_2]},hashNotDeserialized:{code:S2,desc:li[S2]},invalidStateError:{code:vA,desc:li[vA]},stateMismatchError:{code:R2,desc:li[R2]},stateNotFoundError:{code:XI,desc:li[XI]},nonceMismatchError:{code:k2,desc:li[k2]},authTimeNotFoundError:{code:sx,desc:li[sx]},maxAgeTranspired:{code:P2,desc:li[P2]},multipleMatchingTokens:{code:$6,desc:li[$6]},multipleMatchingAccounts:{code:j6,desc:li[j6]},multipleMatchingAppMetadata:{code:D2,desc:li[D2]},tokenRequestCannotBeMade:{code:B2,desc:li[B2]},removeEmptyScopeError:{code:N2,desc:li[N2]},appendScopeSetError:{code:M2,desc:li[M2]},emptyInputScopeSetError:{code:ZI,desc:li[ZI]},DeviceCodePollingCancelled:{code:G6,desc:li[G6]},DeviceCodeExpired:{code:V6,desc:li[V6]},DeviceCodeUnknownError:{code:z6,desc:li[z6]},NoAccountInSilentRequest:{code:ax,desc:li[ax]},invalidCacheRecord:{code:L2,desc:li[L2]},invalidCacheEnvironment:{code:cx,desc:li[cx]},noAccountFound:{code:K6,desc:li[K6]},noCryptoObj:{code:eT,desc:li[eT]},unexpectedCredentialType:{code:Y6,desc:li[Y6]},invalidAssertion:{code:J6,desc:li[J6]},invalidClientCredential:{code:X6,desc:li[X6]},tokenRefreshRequired:{code:lx,desc:li[lx]},userTimeoutReached:{code:Z6,desc:li[Z6]},tokenClaimsRequired:{code:F2,desc:li[F2]},noAuthorizationCodeFromServer:{code:O2,desc:li[O2]},bindingKeyNotRemovedError:{code:e9,desc:li[e9]},logoutNotSupported:{code:Q2,desc:li[Q2]},keyIdMissing:{code:U2,desc:li[U2]},noNetworkConnectivity:{code:t9,desc:li[t9]},userCanceledError:{code:r9,desc:li[r9]},missingTenantIdError:{code:n9,desc:li[n9]},nestedAppAuthBridgeDisabled:{code:i9,desc:li[i9]}},tT=class t extends ci{static{a(this,"ClientAuthError")}constructor(e,r){super(e,r?`${li[e]}: ${r}`:li[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function xt(t,e){return new tT(t,e)}a(xt,"createClientAuthError");var eB={createNewGuid:a(()=>{throw xt(Oi)},"createNewGuid"),base64Decode:a(()=>{throw xt(Oi)},"base64Decode"),base64Encode:a(()=>{throw xt(Oi)},"base64Encode"),base64UrlEncode:a(()=>{throw xt(Oi)},"base64UrlEncode"),encodeKid:a(()=>{throw xt(Oi)},"encodeKid"),async getPublicKeyThumbprint(){throw xt(Oi)},async removeTokenBindingKey(){throw xt(Oi)},async clearKeystore(){throw xt(Oi)},async signJwt(){throw xt(Oi)},async hashString(){throw xt(Oi)}};f();var Za;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Za||(Za={}));var M0=class t{static{a(this,"Logger")}constructor(e,r,n){this.level=Za.Info;let o=a(()=>{},"defaultLoggerCallback"),s=e||t.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||o,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:Za.Info,this.correlationId=s.correlationId||nt.EMPTY_STRING,this.packageName=r||nt.EMPTY_STRING,this.packageVersion=n||nt.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:a(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Za.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let s=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Za[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,s,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Za.Error,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Za.Error,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Za.Warning,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Za.Warning,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Za.Info,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Za.Info,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Za.Verbose,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Za.Verbose,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Za.Trace,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Za.Trace,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};f();var HV="@azure/msal-common",tB="15.8.1";f();var ux={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};f();var Ol={};Sa(Ol,{createAccessTokenEntity:()=>Nhe,createIdTokenEntity:()=>Bhe,createRefreshTokenEntity:()=>Mhe,generateAppMetadataKey:()=>BBt,generateAuthorityMetadataExpiresAt:()=>jV,generateCredentialKey:()=>a9,isAccessTokenEntity:()=>bBt,isAppMetadataEntity:()=>NBt,isAuthorityMetadataEntity:()=>MBt,isAuthorityMetadataExpired:()=>GV,isCredentialEntity:()=>$V,isIdTokenEntity:()=>IBt,isRefreshTokenEntity:()=>TBt,isServerTelemetryEntity:()=>PBt,isThrottlingEntity:()=>DBt,updateAuthorityEndpointMetadata:()=>nB,updateCloudDiscoveryMetadata:()=>c9});f();var WV={};Sa(WV,{checkMaxAge:()=>o9,extractTokenClaims:()=>dx,getJWSPayload:()=>HOe});f();function dx(t,e){let r=HOe(t);try{let n=e(r);return JSON.parse(n)}catch{throw xt(JI)}}a(dx,"extractTokenClaims");function HOe(t){if(!t)throw xt(T2);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw xt(JI);return r[2]}a(HOe,"getJWSPayload");function o9(t,e){if(e===0||Date.now()-3e5>t+e)throw xt(P2)}a(o9,"checkMaxAge");var oa={};Sa(oa,{delay:()=>EBt,isTokenExpired:()=>rB,nowSeconds:()=>L0,toDateFromSeconds:()=>s9,toSecondsFromDate:()=>xBt,wasClockTurnedBack:()=>Dhe});f();function L0(){return Math.round(new Date().getTime()/1e3)}a(L0,"nowSeconds");function xBt(t){return t.getTime()/1e3}a(xBt,"toSecondsFromDate");function s9(t){return t?new Date(Number(t)*1e3):new Date}a(s9,"toDateFromSeconds");function rB(t,e){let r=Number(t)||0;return L0()+e>r}a(rB,"isTokenExpired");function Dhe(t){return Number(t)>L0()}a(Dhe,"wasClockTurnedBack");function EBt(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}a(EBt,"delay");function a9(t){return[wBt(t),_Bt(t),SBt(t),RBt(t),kBt(t)].join(fc.CACHE_KEY_SEPARATOR).toLowerCase()}a(a9,"generateCredentialKey");function Bhe(t,e,r,n,o){return{credentialType:Ro.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:o}}a(Bhe,"createIdTokenEntity");function Nhe(t,e,r,n,o,s,c,l,u,d,p,m,h,g,A){let y={homeAccountId:t,credentialType:Ro.ACCESS_TOKEN,secret:r,cachedAt:L0().toString(),expiresOn:c.toString(),extendedExpiresOn:l.toString(),environment:e,clientId:n,realm:o,target:s,tokenType:p||fo.BEARER};if(m&&(y.userAssertionHash=m),d&&(y.refreshOn=d.toString()),g&&(y.requestedClaims=g,y.requestedClaimsHash=A),y.tokenType?.toLowerCase()!==fo.BEARER.toLowerCase())switch(y.credentialType=Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case fo.POP:let v=dx(r,u);if(!v?.cnf?.kid)throw xt(F2);y.keyId=v.cnf.kid;break;case fo.SSH:y.keyId=h}return y}a(Nhe,"createAccessTokenEntity");function Mhe(t,e,r,n,o,s,c){let l={credentialType:Ro.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return s&&(l.userAssertionHash=s),o&&(l.familyId=o),c&&(l.expiresOn=c.toString()),l}a(Mhe,"createRefreshTokenEntity");function $V(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}a($V,"isCredentialEntity");function bBt(t){return t?$V(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Ro.ACCESS_TOKEN||t.credentialType===Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}a(bBt,"isAccessTokenEntity");function IBt(t){return t?$V(t)&&t.hasOwnProperty("realm")&&t.credentialType===Ro.ID_TOKEN:!1}a(IBt,"isIdTokenEntity");function TBt(t){return t?$V(t)&&t.credentialType===Ro.REFRESH_TOKEN:!1}a(TBt,"isRefreshTokenEntity");function wBt(t){return[t.homeAccountId,t.environment].join(fc.CACHE_KEY_SEPARATOR).toLowerCase()}a(wBt,"generateAccountId");function _Bt(t){let e=t.credentialType===Ro.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(fc.CACHE_KEY_SEPARATOR).toLowerCase()}a(_Bt,"generateCredentialId");function SBt(t){return(t.target||"").toLowerCase()}a(SBt,"generateTarget");function RBt(t){return(t.requestedClaimsHash||"").toLowerCase()}a(RBt,"generateClaimsHash");function kBt(t){return t.tokenType&&t.tokenType.toLowerCase()!==fo.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}a(kBt,"generateScheme");function PBt(t,e){let r=t.indexOf(Fl.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}a(PBt,"isServerTelemetryEntity");function DBt(t,e){let r=!1;t&&(r=t.indexOf(SC.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}a(DBt,"isThrottlingEntity");function BBt({environment:t,clientId:e}){return[Q6,t,e].join(fc.CACHE_KEY_SEPARATOR).toLowerCase()}a(BBt,"generateAppMetadataKey");function NBt(t,e){return e?t.indexOf(Q6)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}a(NBt,"isAppMetadataEntity");function MBt(t,e){return e?t.indexOf(JD.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}a(MBt,"isAuthorityMetadataEntity");function jV(){return L0()+JD.REFRESH_TIME_SECONDS}a(jV,"generateAuthorityMetadataExpiresAt");function nB(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}a(nB,"updateAuthorityEndpointMetadata");function c9(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}a(c9,"updateCloudDiscoveryMetadata");function GV(t){return t.expiresAt<=L0()}a(GV,"isAuthorityMetadataExpired");f();f();var iB={};Sa(iB,{authorityMismatch:()=>g9,authorityUriInsecure:()=>H2,cannotAllowPlatformBroker:()=>h9,cannotSetOIDCOptions:()=>m9,claimsRequestParsingError:()=>l9,emptyInputScopesError:()=>$2,invalidAuthenticationHeader:()=>p9,invalidAuthorityMetadata:()=>z2,invalidClaims:()=>rT,invalidCloudDiscoveryMetadata:()=>nT,invalidCodeChallengeMethod:()=>u9,logoutRequestEmpty:()=>G2,missingNonceAuthenticationHeader:()=>f9,missingSshJwk:()=>fx,missingSshKid:()=>d9,pkceParamsMissing:()=>V2,redirectUriEmpty:()=>q2,tokenRequestEmpty:()=>j2,untrustedAuthority:()=>K2,urlEmptyError:()=>W2,urlParseError:()=>RC});f();var q2="redirect_uri_empty",l9="claims_request_parsing_error",H2="authority_uri_insecure",RC="url_parse_error",W2="empty_url_error",$2="empty_input_scopes_error",rT="invalid_claims",j2="token_request_empty",G2="logout_request_empty",u9="invalid_code_challenge_method",V2="pkce_params_missing",nT="invalid_cloud_discovery_metadata",z2="invalid_authority_metadata",K2="untrusted_authority",fx="missing_ssh_jwk",d9="missing_ssh_kid",f9="missing_nonce_authentication_header",p9="invalid_authentication_header",m9="cannot_set_OIDCOptions",h9="cannot_allow_platform_broker",g9="authority_mismatch";var pc={[q2]:"A redirect URI is required for all calls, and none has been set.",[l9]:"Could not parse the given claims request object.",[H2]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[RC]:"URL could not be parsed into appropriate segments.",[W2]:"URL was empty or null.",[$2]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[rT]:"Given claims parameter must be a stringified JSON object.",[j2]:"Token request was empty and not found in cache.",[G2]:"The logout request was null or undefined.",[u9]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[V2]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[nT]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[z2]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[K2]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[fx]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[d9]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[f9]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[p9]:"Invalid authentication header provided",[m9]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[h9]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[g9]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Lhe={redirectUriNotSet:{code:q2,desc:pc[q2]},claimsRequestParsingError:{code:l9,desc:pc[l9]},authorityUriInsecure:{code:H2,desc:pc[H2]},urlParseError:{code:RC,desc:pc[RC]},urlEmptyError:{code:W2,desc:pc[W2]},emptyScopesError:{code:$2,desc:pc[$2]},invalidClaimsRequest:{code:rT,desc:pc[rT]},tokenRequestEmptyError:{code:j2,desc:pc[j2]},logoutRequestEmptyError:{code:G2,desc:pc[G2]},invalidCodeChallengeMethod:{code:u9,desc:pc[u9]},invalidCodeChallengeParams:{code:V2,desc:pc[V2]},invalidCloudDiscoveryMetadata:{code:nT,desc:pc[nT]},invalidAuthorityMetadata:{code:z2,desc:pc[z2]},untrustedAuthority:{code:K2,desc:pc[K2]},missingSshJwk:{code:fx,desc:pc[fx]},missingSshKid:{code:d9,desc:pc[d9]},missingNonceAuthenticationHeader:{code:f9,desc:pc[f9]},invalidAuthenticationHeader:{code:p9,desc:pc[p9]},cannotSetOIDCOptions:{code:m9,desc:pc[m9]},cannotAllowPlatformBroker:{code:h9,desc:pc[h9]},authorityMismatch:{code:g9,desc:pc[g9]}},oB=class t extends ci{static{a(this,"ClientConfigurationError")}constructor(e){super(e,pc[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function bs(t){return new oB(t)}a(bs,"createClientConfigurationError");f();var Oa=class{static{a(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),o=a(s=>decodeURIComponent(s.replace(/\+/g," ")),"decode");return n.forEach(s=>{if(s.trim()){let[c,l]=s.split(/=(.+)/g,2);c&&l&&(r[o(c)]=o(l))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var al=class t{static{a(this,"ScopeSet")}constructor(e){let r=e?Oa.trimArrayEntries([...e]):[],n=r?Oa.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw bs($2);this.scopes=new Set,n.forEach(o=>this.scopes.add(o))}static fromString(e){let n=(e||nt.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(nt.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return She.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw xt(M2)}}removeScope(e){if(!e)throw xt(N2);this.scopes.delete(e.trim())}removeOIDCScopes(){She.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw xt(ZI);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw xt(ZI);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),o=this.getScopeCount();return r.size<o+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):nt.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};f();f();function sB(t,e){if(!t)throw xt(I2);try{let r=e(t);return JSON.parse(r)}catch{throw xt(YI)}}a(sB,"buildClientInfo");function kC(t){if(!t)throw xt(YI);let e=t.split(fc.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?nt.EMPTY_STRING:e[1]}}a(kC,"buildClientInfoFromHomeAccountId");f();function WOe(t,e){return!!t&&!!e&&t===e.split(".")[1]}a(WOe,"tenantIdMatchesHomeTenant");function A9(t,e,r,n){if(n){let{oid:o,sub:s,tid:c,name:l,tfp:u,acr:d}=n,p=c||u||d||"";return{tenantId:p,localAccountId:o||s||"",name:l,isHomeTenant:WOe(p,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:WOe(r,t)}}a(A9,"buildTenantProfile");function VV(t,e,r,n){let o=t;if(e){let{isHomeTenant:s,...c}=e;o={...t,...c}}if(r){let{isHomeTenant:s,...c}=A9(t.homeAccountId,t.localAccountId,t.tenantId,r);return o={...o,...c,idTokenClaims:r,idToken:n},o}return o}a(VV,"updateAccountTenantProfileData");f();var oh={Default:0,Adfs:1,Dsts:2,Ciam:3};f();function zV(t){return t&&(t.tid||t.tfp||t.acr)||null}a(zV,"getTenantIdFromIdTokenClaims");f();var Ud={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var Zu=class t{static{a(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(fc.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(fc.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let o=new t;r.authorityType===oh.Adfs?o.authorityType=E2.ADFS_ACCOUNT_TYPE:r.protocolMode===Ud.OIDC?o.authorityType=E2.GENERIC_ACCOUNT_TYPE:o.authorityType=E2.MSSTS_ACCOUNT_TYPE;let s;e.clientInfo&&n&&(s=sB(e.clientInfo,n)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let c=e.environment||r&&r.getPreferredCache();if(!c)throw xt(cx);o.environment=c,o.realm=s?.utid||zV(e.idTokenClaims)||"",o.localAccountId=s?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let l=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,u=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=l||u||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let d=A9(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[d]}return o}static createFromAccountInfo(e,r,n){let o=new t;return o.authorityType=e.authorityType||E2.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=r,o.msGraphHost=n,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,r,n,o,s){if(!(r===oh.Adfs||r===oh.Dsts)){if(e)try{let c=sB(e,o.base64Decode);if(c.uid&&c.utid)return`${c.uid}.${c.utid}`}catch{}n.warning("No client info in response")}return s?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let o=!0;if(n){let s=e.idTokenClaims||{},c=r.idTokenClaims||{};o=s.iat===c.iat&&s.nonce===c.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&o}};f();f();var ed={};Sa(ed,{getDeserializedResponse:()=>Fhe,mapToQueryString:()=>PC,stripLeadingHashOrQuery:()=>$Oe});f();function $Oe(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}a($Oe,"stripLeadingHashOrQuery");function Fhe(t){if(!t||t.indexOf("=")<0)return null;try{let e=$Oe(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw xt(S2)}return null}a(Fhe,"getDeserializedResponse");function PC(t,e=!0,r){let n=new Array;return t.forEach((o,s)=>{!e&&r&&s in r?n.push(`${s}=${o}`):n.push(`${s}=${encodeURIComponent(o)}`)}),n.join("&")}a(PC,"mapToQueryString");var Qi=class t{static{a(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw bs(W2);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return Oa.endsWith(r,"?")?r=r.slice(0,-1):Oa.endsWith(r,"?/")&&(r=r.slice(0,-2)),Oa.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw bs(RC)}if(!e.HostNameAndPort||!e.PathSegments)throw bs(RC);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw bs(H2)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===Cp.COMMON||n[0]===Cp.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw bs(RC);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},o=n.AbsolutePath.split("/");return o=o.filter(s=>s&&s.length>0),n.PathSegments=o,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw bs(RC);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===nt.FORWARD_SLASH){let o=new t(r).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Fhe(e)}};var GOe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Ohe=GOe.endpointMetadata,Qhe=GOe.instanceDiscoveryMetadata,Uhe=new Set;Qhe.metadata.forEach(t=>{t.aliases.forEach(e=>{Uhe.add(e)})});function VOe(t,e){let r,n=t.canonicalAuthority;if(n){let o=new Qi(n).getUrlComponents().HostNameAndPort;r=jOe(o,t.cloudDiscoveryMetadata?.metadata,vf.CONFIG,e)||jOe(o,Qhe.metadata,vf.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}a(VOe,"getAliasesFromStaticSources");function jOe(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let o=y9(e,t);if(o)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),o.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}a(jOe,"getAliasesFromMetadata");function zOe(t){return y9(Qhe.metadata,t)}a(zOe,"getCloudDiscoveryMetadataFromHardcodedValues");function y9(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}a(y9,"getCloudDiscoveryMetadataFromNetworkResponse");f();f();var qhe="cache_quota_exceeded",KV="cache_error_unknown";var Hhe={[qhe]:"Exceeded cache storage capacity.",[KV]:"Unexpected error occurred when using cache storage."},C9=class t extends ci{static{a(this,"CacheError")}constructor(e,r){let n=r||(Hhe[e]?Hhe[e]:Hhe[KV]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function KOe(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new C9(qhe):new C9(t.name,t.message):new C9(KV)}a(KOe,"createCacheError");var iT=class{static{a(this,"CacheManager")}constructor(e,r,n,o,s){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(HV,tB),this.staticAuthorityOptions=s,this.performanceClient=o}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(s=>s.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,o,s){let c=null,l;if(s&&!this.tenantProfileMatchesFilter(n,s))return null;let u=this.getIdToken(e,o,r,n.tenantId);return u&&(l=dx(u.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(l,s))?null:(c=VV(e,n,l,u?.secret),c)}getTenantProfilesFromAccountEntity(e,r,n,o){let s=e.getAccountInfo(),c=s.tenantProfiles||new Map,l=this.getTokenKeys();if(n){let d=c.get(n);if(d)c=new Map([[n,d]]);else return[]}let u=[];return c.forEach(d=>{let p=this.getTenantedAccountInfoByFilter(s,l,d,r,o);p&&u.push(p)}),u}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw xt(L2);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof ci?o:KOe(o)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),s=al.fromString(e.target);o.accessToken.forEach(c=>{if(!this.accessTokenKeyMatchesFilter(c,n,!1))return;let l=this.getAccessTokenCredential(c,r);l&&this.credentialMatchesFilter(l,n)&&al.fromString(l.target).intersectingScopeSets(s)&&this.removeAccessToken(c,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),o=[];return n.forEach(s=>{if(!this.isAccountKey(s,e.homeAccountId))return;let c=this.getAccount(s,r);if(!c||e.homeAccountId&&!this.matchHomeAccountId(c,e.homeAccountId)||e.username&&!this.matchUsername(c.username,e.username)||e.environment&&!this.matchEnvironment(c,e.environment)||e.realm&&!this.matchRealm(c,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(c,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(c,e.authorityType))return;let l={localAccountId:e?.localAccountId,name:e?.name},u=c.tenantProfiles?.filter(d=>this.tenantProfileMatchesFilter(d,l));u&&u.length===0||o.push(c)}),o}isAccountKey(e,r,n){return!(e.split(fc.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(fc.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(Ro.ID_TOKEN.toLowerCase())===-1&&r.indexOf(Ro.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(Ro.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(Ro.REFRESH_TOKEN.toLowerCase())>-1){let n=`${Ro.REFRESH_TOKEN}${fc.CACHE_KEY_SEPARATOR}${this.clientId}${fc.CACHE_KEY_SEPARATOR}`,o=`${Ro.REFRESH_TOKEN}${fc.CACHE_KEY_SEPARATOR}${ox}${fc.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(o.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===fo.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(o=>{if(!this.isAppMetadata(o))return;let s=this.getAppMetadata(o);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(n[o]=s))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let s=this.getAuthorityMetadata(o);s&&s.aliases.indexOf(e)!==-1&&(n=s)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),o=e.generateAccountId();n.idToken.forEach(s=>{s.indexOf(o)===0&&this.removeIdToken(s,r)}),n.accessToken.forEach(s=>{s.indexOf(o)===0&&this.removeAccessToken(s,r)}),n.refreshToken.forEach(s=>{s.indexOf(o)===0&&this.removeRefreshToken(s,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==fo.POP)return;let o=n.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${o}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=Zu.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,o,s){this.commonLogger.trace("CacheManager - getIdToken called");let c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ro.ID_TOKEN,clientId:this.clientId,realm:o},l=this.getIdTokensByFilter(c,r,n),u=l.size;if(u<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(u>1){let d=l;if(!o){let p=new Map;l.forEach((h,g)=>{h.realm===e.tenantId&&p.set(g,h)});let m=p.size;if(m<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),l.values().next().value;if(m===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),p.values().next().value;d=p}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),d.forEach((p,m)=>{this.removeIdToken(m,r)}),s&&r&&s.addFields({multiMatchedID:l.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),l.values().next().value}getIdTokensByFilter(e,r,n){let o=n&&n.idToken||this.getTokenKeys().idToken,s=new Map;return o.forEach(c=>{if(!this.idTokenKeyMatchesFilter(c,{clientId:this.clientId,...e}))return;let l=this.getIdTokenCredential(c,r);l&&this.credentialMatchesFilter(l,e)&&s.set(c,l)}),s}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,o){let s=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",s);let c=al.createSearchScopes(r.scopes),l=r.authenticationScheme||fo.BEARER,u=l&&l.toLowerCase()!==fo.BEARER.toLowerCase()?Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ro.ACCESS_TOKEN,d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:o||e.tenantId,target:c,tokenType:l,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},p=n&&n.accessToken||this.getTokenKeys().accessToken,m=[];p.forEach(g=>{if(this.accessTokenKeyMatchesFilter(g,d,!0)){let A=this.getAccessTokenCredential(g,s);A&&this.credentialMatchesFilter(A,d)&&m.push(A)}});let h=m.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",s),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",s),m.forEach(g=>{this.removeAccessToken(a9(g),s)}),this.performanceClient.addFields({multiMatchedAT:m.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",s),m[0])}accessTokenKeyMatchesFilter(e,r,n){let o=e.toLowerCase();if(r.clientId&&o.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&o.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&o.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&o.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let s=r.target.asArray();for(let c=0;c<s.length;c++){if(n&&!o.includes(s[c].toLowerCase()))return!1;if(!n&&o.includes(s[c].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),o=[];return n.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;let c=this.getAccessTokenCredential(s,r);c&&this.credentialMatchesFilter(c,e)&&o.push(c)}),o}getRefreshToken(e,r,n,o,s){this.commonLogger.trace("CacheManager - getRefreshToken called");let c=r?ox:void 0,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ro.REFRESH_TOKEN,clientId:this.clientId,familyId:c},u=o&&o.refreshToken||this.getTokenKeys().refreshToken,d=[];u.forEach(m=>{if(this.refreshTokenKeyMatchesFilter(m,l)){let h=this.getRefreshTokenCredential(m,n);h&&this.credentialMatchesFilter(h,l)&&d.push(h)}});let p=d.length;return p<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(p>1&&s&&n&&s.addFields({multiMatchedRT:p},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),d[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),o=Object.keys(n).map(c=>n[c]),s=o.length;if(s<1)return null;if(s>1)throw xt(D2);return o[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===ox)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let o=VOe(this.staticAuthorityOptions,this.commonLogger);if(o.includes(r)&&o.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==Ro.ACCESS_TOKEN&&e.credentialType!==Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:al.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(Q6)!==-1}isAuthorityMetadata(e){return e.indexOf(JD.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${JD.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},v9=class extends iT{static{a(this,"DefaultStorageClass")}async setAccount(){throw xt(Oi)}getAccount(){throw xt(Oi)}async setIdTokenCredential(){throw xt(Oi)}getIdTokenCredential(){throw xt(Oi)}async setAccessTokenCredential(){throw xt(Oi)}getAccessTokenCredential(){throw xt(Oi)}async setRefreshTokenCredential(){throw xt(Oi)}getRefreshTokenCredential(){throw xt(Oi)}setAppMetadata(){throw xt(Oi)}getAppMetadata(){throw xt(Oi)}setServerTelemetry(){throw xt(Oi)}getServerTelemetry(){throw xt(Oi)}setAuthorityMetadata(){throw xt(Oi)}getAuthorityMetadata(){throw xt(Oi)}getAuthorityMetadataKeys(){throw xt(Oi)}setThrottlingCache(){throw xt(Oi)}getThrottlingCache(){throw xt(Oi)}removeItem(){throw xt(Oi)}getKeys(){throw xt(Oi)}getAccountKeys(){throw xt(Oi)}getTokenKeys(){throw xt(Oi)}};f();f();var Je={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},vrn=new Map([[Je.AcquireTokenByCode,"ATByCode"],[Je.AcquireTokenByRefreshToken,"ATByRT"],[Je.AcquireTokenSilent,"ATS"],[Je.AcquireTokenSilentAsync,"ATSAsync"],[Je.AcquireTokenPopup,"ATPopup"],[Je.AcquireTokenRedirect,"ATRedirect"],[Je.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Je.CryptoOptsSignJwt,"CryptoSignJwt"],[Je.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Je.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Je.SilentRefreshClientAcquireToken,"SltRClientAT"],[Je.SsoSilent,"SsoSlt"],[Je.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Je.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Je.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Je.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Je.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Je.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Je.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Je.BrokerHandhshake,"BrokerHandshake"],[Je.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Je.AcquireTokenByBroker,"ATByBroker"],[Je.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Je.RefreshTokenClientAcquireToken,"RTClientAT"],[Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Je.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Je.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Je.AcquireTokenFromCache,"ATFromCache"],[Je.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Je.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Je.AcquireTokenBySilentIframe,"ATBySltIframe"],[Je.InitializeBaseRequest,"InitBaseReq"],[Je.InitializeSilentRequest,"InitSltReq"],[Je.InitializeClientApplication,"InitClientApplication"],[Je.InitializeCache,"InitCache"],[Je.ImportExistingCache,"importCache"],[Je.SetUserData,"setUserData"],[Je.LocalStorageUpdated,"localStorageUpdated"],[Je.SilentIframeClientTokenHelper,"SIClientTHelper"],[Je.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Je.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Je.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Je.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Je.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Je.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Je.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Je.GetAuthCodeUrl,"GetAuthCodeUrl"],[Je.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Je.HandleCodeResponse,"HandleCodeResp"],[Je.HandleResponseEar,"HandleRespEar"],[Je.HandleResponseCode,"HandleRespCode"],[Je.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Je.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Je.AuthClientAcquireToken,"AuthClientAT"],[Je.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Je.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Je.PopTokenGenerateCnf,"PopTGenCnf"],[Je.PopTokenGenerateKid,"PopTGenKid"],[Je.HandleServerTokenResponse,"HandleServerTRes"],[Je.DeserializeResponse,"DeserializeRes"],[Je.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Je.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Je.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Je.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Je.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Je.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Je.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Je.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Je.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Je.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Je.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Je.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Je.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Je.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Je.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Je.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Je.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Je.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Je.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Je.NativeGenerateAuthResult,"NtvGenAuthRes"],[Je.RemoveHiddenIframe,"RemoveHiddenIframe"],[Je.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Je.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Je.GeneratePkceCodes,"GenPkceCodes"],[Je.GenerateCodeVerifier,"GenCodeVerifier"],[Je.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Je.Sha256Digest,"Sha256Digest"],[Je.GetRandomValues,"GetRandomValues"],[Je.GenerateHKDF,"genHKDF"],[Je.GenerateBaseKey,"genBaseKey"],[Je.Base64Decode,"b64Decode"],[Je.UrlEncodeArr,"urlEncArr"],[Je.Encrypt,"encrypt"],[Je.Decrypt,"decrypt"],[Je.GenerateEarKey,"genEarKey"],[Je.DecryptEarResponse,"decryptEarResp"]]),YOe={NotStarted:0,InProgress:1,Completed:2};var YV=class{static{a(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},Y2=class{static{a(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:a(()=>null,"end"),discard:a(()=>{},"discard"),add:a(()=>{},"add"),increment:a(()=>{},"increment"),event:{eventId:this.generateId(),status:YOe.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new YV}}startPerformanceMeasurement(){return new YV}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var LBt={tokenRenewalOffsetSeconds:XD,preventCorsPreflight:!1},FBt={loggerCallback:a(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Za.Info,correlationId:nt.EMPTY_STRING},OBt={claimsBasedCachingEnabled:!1},QBt={async sendGetRequestAsync(){throw xt(Oi)},async sendPostRequestAsync(){throw xt(Oi)}},UBt={sku:nt.SKU,version:tB,cpu:nt.EMPTY_STRING,os:nt.EMPTY_STRING},qBt={clientSecret:nt.EMPTY_STRING,clientAssertion:void 0},HBt={azureCloudInstance:ux.None,tenant:`${nt.DEFAULT_COMMON_TENANT}`},WBt={application:{appName:"",appVersion:""}};function JOe({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:o,networkInterface:s,cryptoInterface:c,clientCredentials:l,libraryInfo:u,telemetry:d,serverTelemetryManager:p,persistencePlugin:m,serializableCache:h}){let g={...FBt,...r};return{authOptions:$Bt(t),systemOptions:{...LBt,...e},loggerOptions:g,cacheOptions:{...OBt,...n},storageInterface:o||new v9(t.clientId,eB,new M0(g),new Y2),networkInterface:s||QBt,cryptoInterface:c||eB,clientCredentials:l||qBt,libraryInfo:{...UBt,...u},telemetry:{...WBt,...d},serverTelemetryManager:p||null,persistencePlugin:m||null,serializableCache:h||null}}a(JOe,"buildClientConfiguration");function $Bt(t){return{clientCapabilities:[],azureCloudOptions:HBt,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}a($Bt,"buildAuthOptions");function JV(t){return t.authOptions.authority.options.protocolMode===Ud.OIDC}a(JV,"isOidcProtocolMode");f();var Ef={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var hr={};Sa(hr,{addApplicationTelemetry:()=>b9,addAuthorizationCode:()=>Bge,addBrokerParameters:()=>hx,addCcsOid:()=>px,addCcsUpn:()=>oT,addClaims:()=>rR,addClientAssertion:()=>w9,addClientAssertionType:()=>_9,addClientCapabilitiesToClaims:()=>XOe,addClientId:()=>eR,addClientInfo:()=>iR,addClientSecret:()=>T9,addCodeChallengeParams:()=>o3t,addCodeVerifier:()=>Mge,addCorrelationId:()=>nR,addDeviceCode:()=>s3t,addDomainHint:()=>kge,addEARParameters:()=>d3t,addExtraQueryParameters:()=>mx,addGrantType:()=>S9,addIdTokenHint:()=>Rge,addInstanceAware:()=>R9,addLibraryInfo:()=>E9,addLoginHint:()=>cB,addLogoutHint:()=>Lge,addNativeBroker:()=>i3t,addNonce:()=>Dge,addOboAssertion:()=>a3t,addPassword:()=>u3t,addPopToken:()=>k9,addPostLogoutRedirectUri:()=>Sge,addPrompt:()=>Pge,addRedirectUri:()=>tR,addRefreshToken:()=>Nge,addRequestTokenUse:()=>c3t,addResponseMode:()=>_ge,addResponseType:()=>n3t,addScopes:()=>Z2,addServerTelemetry:()=>D9,addSid:()=>nz,addSshJwk:()=>P9,addState:()=>I9,addThrottling:()=>B9,addUsername:()=>l3t,instrumentBrokerParams:()=>X2});f();var J2={};Sa(J2,{ACCESS_TOKEN:()=>VBt,BROKER_CLIENT_ID:()=>x9,BROKER_REDIRECT_URI:()=>rz,CCS_HEADER:()=>t3t,CLAIMS:()=>Ghe,CLIENT_ASSERTION:()=>gge,CLIENT_ASSERTION_TYPE:()=>Age,CLIENT_ID:()=>DC,CLIENT_INFO:()=>XBt,CLIENT_REQUEST_ID:()=>rge,CLIENT_SECRET:()=>hge,CODE:()=>Xhe,CODE_CHALLENGE:()=>Zhe,CODE_CHALLENGE_METHOD:()=>ege,CODE_VERIFIER:()=>tge,DEVICE_CODE:()=>mge,DOMAIN_HINT:()=>Ige,EAR_JWE_CRYPTO:()=>wge,EAR_JWK:()=>Tge,ERROR:()=>jBt,ERROR_DESCRIPTION:()=>GBt,EXPIRES_IN:()=>KBt,FOCI:()=>e3t,GRANT_TYPE:()=>jhe,ID_TOKEN:()=>zBt,ID_TOKEN_HINT:()=>pge,INSTANCE_AWARE:()=>aB,LOGIN_HINT:()=>bge,LOGOUT_HINT:()=>xge,NATIVE_BROKER:()=>vge,NONCE:()=>Yhe,OBO_ASSERTION:()=>yge,ON_BEHALF_OF:()=>ZBt,POST_LOGOUT_URI:()=>fge,PROMPT:()=>Jhe,REDIRECT_URI:()=>XV,REFRESH_TOKEN:()=>zhe,REFRESH_TOKEN_EXPIRES_IN:()=>YBt,REQUESTED_TOKEN_USE:()=>Cge,REQ_CNF:()=>ez,RESPONSE_MODE:()=>$he,RESPONSE_TYPE:()=>Whe,RETURN_SPA_CODE:()=>tz,SCOPE:()=>Vhe,SESSION_STATE:()=>JBt,SID:()=>Ege,STATE:()=>Khe,TOKEN_TYPE:()=>ZV,X_APP_NAME:()=>uge,X_APP_VER:()=>dge,X_CLIENT_CPU:()=>sge,X_CLIENT_CURR_TELEM:()=>age,X_CLIENT_EXTRA_SKU:()=>r3t,X_CLIENT_LAST_TELEM:()=>cge,X_CLIENT_OS:()=>oge,X_CLIENT_SKU:()=>nge,X_CLIENT_VER:()=>ige,X_MS_LIB_CAPABILITY:()=>lge});f();var DC="client_id",XV="redirect_uri",Whe="response_type",$he="response_mode",jhe="grant_type",Ghe="claims",Vhe="scope",jBt="error",GBt="error_description",VBt="access_token",zBt="id_token",zhe="refresh_token",KBt="expires_in",YBt="refresh_token_expires_in",Khe="state",Yhe="nonce",Jhe="prompt",JBt="session_state",XBt="client_info",Xhe="code",Zhe="code_challenge",ege="code_challenge_method",tge="code_verifier",rge="client-request-id",nge="x-client-SKU",ige="x-client-VER",oge="x-client-OS",sge="x-client-CPU",age="x-client-current-telemetry",cge="x-client-last-telemetry",lge="x-ms-lib-capability",uge="x-app-name",dge="x-app-ver",fge="post_logout_redirect_uri",pge="id_token_hint",mge="device_code",hge="client_secret",gge="client_assertion",Age="client_assertion_type",ZV="token_type",ez="req_cnf",yge="assertion",Cge="requested_token_use",ZBt="on_behalf_of",e3t="foci",t3t="X-AnchorMailbox",tz="return_spa_code",vge="nativebroker",xge="logout_hint",Ege="sid",bge="login_hint",Ige="domain_hint",r3t="x-client-xtra-sku",x9="brk_client_id",rz="brk_redirect_uri",aB="instance_aware",Tge="ear_jwk",wge="ear_jwe_crypto";function X2(t,e,r){if(!e)return;let n=t.get(DC);n&&t.has(x9)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(XV)},e)}a(X2,"instrumentBrokerParams");function n3t(t,e){t.set(Whe,e)}a(n3t,"addResponseType");function _ge(t,e){t.set($he,e||_C.QUERY)}a(_ge,"addResponseMode");function i3t(t){t.set(vge,"1")}a(i3t,"addNativeBroker");function Z2(t,e,r=!0,n=yp){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let o=r?[...e||[],...n]:e||[],s=new al(o);t.set(Vhe,s.printScopes())}a(Z2,"addScopes");function eR(t,e){t.set(DC,e)}a(eR,"addClientId");function tR(t,e){t.set(XV,e)}a(tR,"addRedirectUri");function Sge(t,e){t.set(fge,e)}a(Sge,"addPostLogoutRedirectUri");function Rge(t,e){t.set(pge,e)}a(Rge,"addIdTokenHint");function kge(t,e){t.set(Ige,e)}a(kge,"addDomainHint");function cB(t,e){t.set(bge,e)}a(cB,"addLoginHint");function oT(t,e){t.set(qs.CCS_HEADER,`UPN:${e}`)}a(oT,"addCcsUpn");function px(t,e){t.set(qs.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}a(px,"addCcsOid");function nz(t,e){t.set("sid",e)}a(nz,"addSid");function rR(t,e,r){let n=XOe(e,r);try{JSON.parse(n)}catch{throw bs(rT)}t.set(Ghe,n)}a(rR,"addClaims");function nR(t,e){t.set(rge,e)}a(nR,"addCorrelationId");function E9(t,e){t.set(nge,e.sku),t.set(ige,e.version),e.os&&t.set(oge,e.os),e.cpu&&t.set(sge,e.cpu)}a(E9,"addLibraryInfo");function b9(t,e){e?.appName&&t.set(uge,e.appName),e?.appVersion&&t.set(dge,e.appVersion)}a(b9,"addApplicationTelemetry");function Pge(t,e){t.set(Jhe,e)}a(Pge,"addPrompt");function I9(t,e){e&&t.set(Khe,e)}a(I9,"addState");function Dge(t,e){t.set(Yhe,e)}a(Dge,"addNonce");function o3t(t,e,r){if(e&&r)t.set(Zhe,e),t.set(ege,r);else throw bs(V2)}a(o3t,"addCodeChallengeParams");function Bge(t,e){t.set(Xhe,e)}a(Bge,"addAuthorizationCode");function s3t(t,e){t.set(mge,e)}a(s3t,"addDeviceCode");function Nge(t,e){t.set(zhe,e)}a(Nge,"addRefreshToken");function Mge(t,e){t.set(tge,e)}a(Mge,"addCodeVerifier");function T9(t,e){t.set(hge,e)}a(T9,"addClientSecret");function w9(t,e){e&&t.set(gge,e)}a(w9,"addClientAssertion");function _9(t,e){e&&t.set(Age,e)}a(_9,"addClientAssertionType");function a3t(t,e){t.set(yge,e)}a(a3t,"addOboAssertion");function c3t(t,e){t.set(Cge,e)}a(c3t,"addRequestTokenUse");function S9(t,e){t.set(jhe,e)}a(S9,"addGrantType");function iR(t){t.set(qOe,"1")}a(iR,"addClientInfo");function R9(t){t.has(aB)||t.set(aB,"true")}a(R9,"addInstanceAware");function mx(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}a(mx,"addExtraQueryParameters");function XOe(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw bs(rT)}return e&&e.length>0&&(r.hasOwnProperty(x2.ACCESS_TOKEN)||(r[x2.ACCESS_TOKEN]={}),r[x2.ACCESS_TOKEN][x2.XMS_CC]={values:e}),JSON.stringify(r)}a(XOe,"addClientCapabilitiesToClaims");function l3t(t,e){t.set(q6.username,e)}a(l3t,"addUsername");function u3t(t,e){t.set(q6.password,e)}a(u3t,"addPassword");function k9(t,e){e&&(t.set(ZV,fo.POP),t.set(ez,e))}a(k9,"addPopToken");function P9(t,e){e&&(t.set(ZV,fo.SSH),t.set(ez,e))}a(P9,"addSshJwk");function D9(t,e){t.set(age,e.generateCurrentRequestHeaderValue()),t.set(cge,e.generateLastRequestHeaderValue())}a(D9,"addServerTelemetry");function B9(t){t.set(lge,SC.X_MS_LIB_CAPABILITY_VALUE)}a(B9,"addThrottling");function Lge(t,e){t.set(xge,e)}a(Lge,"addLogoutHint");function hx(t,e,r){t.has(x9)||t.set(x9,e),t.has(rz)||t.set(rz,r)}a(hx,"addBrokerParameters");function d3t(t,e){t.set(Tge,encodeURIComponent(e)),t.set(wge,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}a(d3t,"addEARParameters");var oz={};Sa(oz,{createDiscoveredInstance:()=>Oge});f();f();f();function ZOe(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}a(ZOe,"isOpenIdConfigResponse");f();function e7e(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}a(e7e,"isCloudInstanceDiscoveryResponse");f();function t7e(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}a(t7e,"isCloudInstanceDiscoveryErrorResponse");f();f();var r7e=a((t,e,r,n,o)=>(...s)=>{r.trace(`Executing function ${e}`);let c=n?.startMeasurement(e,o);if(o){let l=e+"CallCount";n?.incrementFields({[l]:1},o)}try{let l=t(...s);return c?.end({success:!0}),r.trace(`Returning result from ${e}`),l}catch(l){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(l))}catch{r.trace("Unable to print error message.")}throw c?.end({success:!1},l),l}},"invoke"),po=a((t,e,r,n,o)=>(...s)=>{r.trace(`Executing function ${e}`);let c=n?.startMeasurement(e,o);if(o){let l=e+"CallCount";n?.incrementFields({[l]:1},o)}return n?.setPreQueueTime(e,o),t(...s).then(l=>(r.trace(`Returning result from ${e}`),c?.end({success:!0}),l)).catch(l=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(l))}catch{r.trace("Unable to print error message.")}throw c?.end({success:!1},l),l})},"invokeAsync");var N9=class t{static{a(this,"RegionDiscovery")}constructor(e,r,n,o){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=o}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Je.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=b2.ENVIRONMENT_VARIABLE;else{let o=t.IMDS_OPTIONS;try{let s=await po(this.getRegionFromIMDS.bind(this),Je.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(nt.IMDS_VERSION,o);if(s.status===ai.SUCCESS&&(n=s.body,r.region_source=b2.IMDS),s.status===ai.BAD_REQUEST){let c=await po(this.getCurrentVersion.bind(this),Je.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(o);if(!c)return r.region_source=b2.FAILED_AUTO_DETECTION,null;let l=await po(this.getRegionFromIMDS.bind(this),Je.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(c,o);l.status===ai.SUCCESS&&(n=l.body,r.region_source=b2.IMDS)}}catch{return r.region_source=b2.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=b2.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Je.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${nt.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,nt.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Je.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${nt.IMDS_ENDPOINT}?format=json`,e);return r.status===ai.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};N9.IMDS_OPTIONS={headers:{Metadata:"true"}};var xA=class t{static{a(this,"Authority")}constructor(e,r,n,o,s,c,l,u){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=l,this.correlationId=c,this.managedIdentity=u||!1,this.regionDiscovery=new N9(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(nt.CIAM_AUTH_URL))return oh.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case nt.ADFS:return oh.Adfs;case nt.DSTS:return oh.Dsts}return oh.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Qi(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw xt(xf)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw xt(xf)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw xt(xf)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw xt(Q2);return this.replacePath(this.metadata.end_session_endpoint)}else throw xt(xf)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw xt(xf)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw xt(xf)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===oh.Default&&this.protocolMode!==Ud.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,o=new Qi(this.metadata.canonical_authority).getUrlComponents(),s=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((l,u)=>{let d=s[u];if(u===0&&this.canReplaceTenant(o)){let p=new Qi(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];d!==p&&(this.logger.verbose(`Replacing tenant domain name ${d} with id ${p}`),d=p)}l!==d&&(r=r.replace(`/${d}/`,`/${l}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===oh.Adfs||this.protocolMode===Ud.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Je.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await po(this.updateCloudDiscoveryMetadata.bind(this),Je.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await po(this.updateEndpointMetadata.bind(this),Je.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:jV(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==vf.CACHE&&n?.source!==vf.CACHE&&(e.expiresAt=jV(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Je.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===vf.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let o=await po(this.updateMetadataWithRegionalInformation.bind(this),Je.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);nB(e,o,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await po(this.getEndpointMetadataFromNetwork.bind(this),Je.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await po(this.updateMetadataWithRegionalInformation.bind(this),Je.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),nB(e,n,!0),vf.NETWORK;throw xt(_2,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),nB(e,r,!1),{source:vf.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return nB(e,o,!1),{source:vf.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=GV(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:vf.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Qi(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw bs(z2)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Je.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return ZOe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Ohe?Ohe[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Je.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==nt.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=UV.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await po(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Je.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=UV.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=UV.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Je.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await po(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Je.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return c9(e,n,!0),vf.NETWORK;throw bs(K2)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||nt.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||nt.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||nt.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),c9(e,r,!1),vf.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=zOe(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),c9(e,o,!1),vf.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=GV(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),vf.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===oh.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=y9(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),bs(nT)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Je.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${nt.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let o=await this.networkInterface.sendGetRequestAsync(e,r),s,c;if(e7e(o.body))s=o.body,c=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(t7e(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),s=o.body,s.error===nt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),c=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=y9(c,this.hostnameAndPort)}catch(o){if(o instanceof ci)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let s=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&Qi.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==ux.None){let o=r.tenant?r.tenant:nt.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${o}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return nt.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw xt(xf)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Uhe.has(e)}static isPublicCloudAuthority(e){return nt.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let o=new Qi(e);o.validateAsUri();let s=o.getUrlComponents(),c=`${r}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(c=`${r}.${nt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let l=Qi.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:c}).urlString;return n?`${l}?${n}`:l}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,o=new Qi(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(nt.CIAM_AUTH_URL)){let s=o.HostNameAndPort.split(".")[0];r=`${r}${s}${nt.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};xA.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Cp.COMMON,Cp.CONSUMERS,Cp.ORGANIZATIONS]);function n7e(t){let n=new Qi(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Cp.COMMON:case Cp.ORGANIZATIONS:case Cp.CONSUMERS:return;default:return n}}a(n7e,"getTenantFromAuthorityString");function iz(t){return t.endsWith(nt.FORWARD_SLASH)?t:`${t}${nt.FORWARD_SLASH}`}a(iz,"formatAuthorityUri");function Fge(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw bs(nT)}return{canonicalAuthority:t.authority?iz(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}a(Fge,"buildStaticAuthorityOptions");async function Oge(t,e,r,n,o,s,c){c?.addQueueMeasurement(Je.AuthorityFactoryCreateDiscoveredInstance,s);let l=xA.transformCIAMAuthority(iz(t)),u=new xA(l,e,r,n,o,s,c);try{return await po(u.resolveEndpointsAsync.bind(u),Je.AuthorityResolveEndpointsAsync,o,c,s)(),u}catch{throw xt(xf)}}a(Oge,"createDiscoveredInstance");f();f();var bf=class t extends ci{static{a(this,"ServerError")}constructor(e,r,n,o,s){super(e,r,n),this.name="ServerError",this.errorNo=o,this.status=s,Object.setPrototypeOf(this,t.prototype)}};f();function lB(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}a(lB,"getRequestThumbprint");var M9=class t{static{a(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${SC.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let o=t.generateThrottlingStorageKey(r),s=e.getThrottlingCache(o);if(s){if(s.throttleTime<Date.now()){e.removeItem(o,n);return}throw new bf(s.errorCodes?.join(" ")||nt.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,r,n,o){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let s={throttleTime:t.calculateThrottleTime(parseInt(n.headers[qs.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),s,o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(qs.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||SC.DEFAULT_THROTTLE_TIME_SECONDS),n+SC.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,o){let s=lB(r,n,o),c=this.generateThrottlingStorageKey(s);e.removeItem(c,n.correlationId)}};f();var sz=class t extends ci{static{a(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var td=class{static{a(this,"BaseClient")}constructor(e,r){this.config=JOe(e),this.logger=new M0(this.config.loggerOptions,HV,tB),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[qs.CONTENT_TYPE]=nt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Ef.HOME_ACCOUNT_ID:try{let n=kC(e.credential);r[qs.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Ef.UPN:r[qs.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,o,s,c){c&&this.performanceClient?.addQueueMeasurement(c,s);let l=await this.sendPostRequest(o,e,{body:r,headers:n},s);return this.config.serverTelemetryManager&&l.status<500&&l.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),l}async sendPostRequest(e,r,n,o){M9.preProcess(this.cacheManager,e,o);let s;try{s=await po(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Je.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(r,n);let c=s.headers||{};this.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:c[qs.X_MS_HTTP_VERSION]||"",requestId:c[qs.X_MS_REQUEST_ID]||""},o)}catch(c){if(c instanceof sz){let l=c.responseHeaders;throw l&&this.performanceClient?.addFields({httpVerToken:l[qs.X_MS_HTTP_VERSION]||"",requestId:l[qs.X_MS_REQUEST_ID]||"",contentTypeHeader:l[qs.CONTENT_TYPE]||void 0,contentLengthHeader:l[qs.CONTENT_LENGTH]||void 0,httpStatus:c.httpStatus},o),c.error}throw c instanceof ci?c:xt(w2)}return M9.postProcess(this.cacheManager,e,s,o),s}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Je.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,o=await Oge(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=o}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&hx(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&mx(r,e.tokenQueryParameters),nR(r,e.correlationId),X2(r,e.correlationId,this.performanceClient),PC(r)}};f();f();var cz={};Sa(cz,{badToken:()=>aT,consentRequired:()=>Uge,interactionRequired:()=>Qge,loginRequired:()=>qge,nativeAccountUnavailable:()=>L9,noTokensFound:()=>sT,refreshTokenExpired:()=>F9,uxNotAllowed:()=>az});f();var sT="no_tokens_found",L9="native_account_unavailable",F9="refresh_token_expired",az="ux_not_allowed",Qge="interaction_required",Uge="consent_required",qge="login_required",aT="bad_token";var i7e=[Qge,Uge,qge,aT,az],f3t=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],lz={[sT]:"No refresh token found in the cache. Please sign-in.",[L9]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[F9]:"Refresh token has expired.",[aT]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[az]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},Hge={noTokensFoundError:{code:sT,desc:lz[sT]},native_account_unavailable:{code:L9,desc:lz[L9]},bad_token:{code:aT,desc:lz[aT]}},F0=class t extends ci{static{a(this,"InteractionRequiredAuthError")}constructor(e,r,n,o,s,c,l,u){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=o||nt.EMPTY_STRING,this.traceId=s||nt.EMPTY_STRING,this.correlationId=c||nt.EMPTY_STRING,this.claims=l||nt.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=u}};function uz(t,e,r){let n=!!t&&i7e.indexOf(t)>-1,o=!!r&&f3t.indexOf(r)>-1,s=!!e&&i7e.some(c=>e.indexOf(c)>-1);return n||s||o}a(uz,"isInteractionRequiredError");function dz(t){return new F0(t,lz[t])}a(dz,"createInteractionRequiredAuthError");f();var fz=class t{static{a(this,"ProtocolUtils")}static setRequestState(e,r,n){let o=t.generateLibraryState(e,n);return r?`${o}${nt.RESOURCE_DELIM}${r}`:o}static generateLibraryState(e,r){if(!e)throw xt(eT);let n={id:e.createNewGuid()};r&&(n.meta=r);let o=JSON.stringify(n);return e.base64Encode(o)}static parseRequestState(e,r){if(!e)throw xt(eT);if(!r)throw xt(vA);try{let n=r.split(nt.RESOURCE_DELIM),o=n[0],s=n.length>1?n.slice(1).join(nt.RESOURCE_DELIM):nt.EMPTY_STRING,c=e.base64Decode(o),l=JSON.parse(c);return{userRequestState:s||nt.EMPTY_STRING,libraryState:l}}catch{throw xt(vA)}}};f();var p3t={SW:"sw"},cT=class{static{a(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Je.PopTokenGenerateCnf,e.correlationId);let n=await po(this.generateKid.bind(this),Je.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:o}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Je.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:p3t.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,o){let{resourceRequestMethod:s,resourceRequestUri:c,shrClaims:l,shrNonce:u,shrOptions:d}=n,m=(c?new Qi(c):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:L0(),m:s?.toUpperCase(),u:m?.HostNameAndPort,nonce:u||this.cryptoUtils.createNewGuid(),p:m?.AbsolutePath,q:m?.QueryString?[[],m.QueryString]:void 0,client_claims:l||void 0,...o},r,d,n.correlationId)}};f();var O0=class{static{a(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var Qc=class t{static{a(this,"ResponseHandler")}constructor(e,r,n,o,s,c,l){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=o,this.serializableCache=s,this.persistencePlugin=c,this.performanceClient=l}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||nt.NOT_AVAILABLE} - Timestamp: ${e.timestamp||nt.NOT_AVAILABLE} - Description: ${e.error_description||nt.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||nt.NOT_AVAILABLE} - Trace ID: ${e.trace_id||nt.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,s=new bf(e.error,n,e.suberror,o,e.status);if(r&&e.status&&e.status>=ai.SERVER_ERROR_RANGE_START&&e.status<=ai.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(r&&e.status&&e.status>=ai.CLIENT_ERROR_RANGE_START&&e.status<=ai.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw uz(e.error,e.error_description,e.suberror)?new F0(e.error,e.error_description,e.suberror,e.timestamp||nt.EMPTY_STRING,e.trace_id||nt.EMPTY_STRING,e.correlation_id||nt.EMPTY_STRING,e.claims||nt.EMPTY_STRING,o):s}}async handleServerTokenResponse(e,r,n,o,s,c,l,u,d){this.performanceClient?.addQueueMeasurement(Je.HandleServerTokenResponse,e.correlation_id);let p;if(e.id_token){if(p=dx(e.id_token||nt.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&p.nonce!==s.nonce)throw xt(k2);if(o.maxAge||o.maxAge===0){let A=p.auth_time;if(!A)throw xt(sx);o9(A,o.maxAge)}}this.homeAccountIdentifier=Zu.generateHomeAccountId(e.client_info||nt.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,p);let m;s&&s.state&&(m=fz.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||o.sshKid||void 0;let h=this.generateCacheRecord(e,r,n,o,p,c,s),g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new O0(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(g)),l&&!u&&h.account){let A=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(A,o.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,h,!1,o,p,m,void 0,d)}await this.cacheStorage.saveCacheRecord(h,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(g))}return t.generateAuthenticationResult(this.cryptoObj,r,h,!1,o,p,m,e,d)}generateCacheRecord(e,r,n,o,s,c,l){let u=r.getPreferredCache();if(!u)throw xt(cx);let d=zV(s),p,m;e.id_token&&s&&(p=Bhe(this.homeAccountIdentifier,u,e.id_token,this.clientId,d||""),m=o7e(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,s,e.client_info,u,d,l,void 0,this.logger));let h=null;if(e.access_token){let y=e.scope?al.fromString(e.scope):new al(o.scopes||[]),v=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,b=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,I=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,_=n+v,k=_+b,N=I&&I>0?n+I:void 0;h=Nhe(this.homeAccountIdentifier,u,e.access_token,this.clientId,d||r.tenant||"",y.printScopes(),_,k,this.cryptoObj.base64Decode,N,e.token_type,c,e.key_id,o.claims,o.requestedClaimsHash)}let g=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){let v=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=n+v}g=Mhe(this.homeAccountIdentifier,u,e.refresh_token,this.clientId,e.foci,c,y)}let A=null;return e.foci&&(A={clientId:this.clientId,environment:u,familyId:e.foci}),{account:m,idToken:p,accessToken:h,refreshToken:g,appMetadata:A}}static async generateAuthenticationResult(e,r,n,o,s,c,l,u,d){let p=nt.EMPTY_STRING,m=[],h=null,g,A,y=nt.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===fo.POP&&!s.popKid){let _=new cT(e),{secret:k,keyId:N}=n.accessToken;if(!N)throw xt(U2);p=await _.signPopToken(k,N,s)}else p=n.accessToken.secret;m=al.fromString(n.accessToken.target).asArray(),h=s9(n.accessToken.expiresOn),g=s9(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(A=s9(n.accessToken.refreshOn))}n.appMetadata&&(y=n.appMetadata.familyId===ox?ox:"");let v=c?.oid||c?.sub||"",b=c?.tid||"";u?.spa_accountid&&n.account&&(n.account.nativeAccountId=u?.spa_accountid);let I=n.account?VV(n.account.getAccountInfo(),void 0,c,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:v,tenantId:b,scopes:m,account:I,idToken:n?.idToken?.secret||"",idTokenClaims:c||{},accessToken:p,fromCache:o,expiresOn:h,extExpiresOn:g,refreshOn:A,correlationId:s.correlationId,requestId:d||nt.EMPTY_STRING,familyId:y,tokenType:n.accessToken?.tokenType||nt.EMPTY_STRING,state:l?l.userRequestState:nt.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||nt.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||nt.EMPTY_STRING,code:u?.spa_code,fromNativeBroker:!1}}};function o7e(t,e,r,n,o,s,c,l,u,d,p,m){m?.verbose("setCachedAccount called");let g=t.getAccountKeys().find(I=>I.startsWith(r)),A=null;g&&(A=t.getAccount(g,o));let y=A||Zu.createAccount({homeAccountId:r,idTokenClaims:s,clientInfo:c,environment:l,cloudGraphHostName:d?.cloud_graph_host_name,msGraphHost:d?.msgraph_host,nativeAccountId:p},e,n),v=y.tenantProfiles||[],b=u||y.realm;if(b&&!v.find(I=>I.tenantId===b)){let I=A9(r,y.localAccountId,b,s);v.push(I)}return y.tenantProfiles=v,y}a(o7e,"buildAccountToCache");f();async function If(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}a(If,"getClientAssertion");var O9=class extends td{static{a(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Je.AuthClientAcquireToken,e.correlationId),!e.code)throw xt(B2);let n=L0(),o=await po(this.executeTokenRequest.bind(this),Je.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=o.headers?.[qs.X_MS_REQUEST_ID],c=new Qc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return c.validateTokenResponse(o.body),po(c.handleServerTokenResponse.bind(c),Je.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,n,e,r,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw bs(G2);let r=this.createLogoutUrlQueryString(e);return Qi.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Je.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),o=Qi.appendQueryString(e.tokenEndpoint,n),s=await po(this.createTokenRequestBody.bind(this),Je.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),c;if(r.clientInfo)try{let d=sB(r.clientInfo,this.cryptoUtils.base64Decode);c={credential:`${d.uid}${fc.CLIENT_INFO_SEPARATOR}${d.utid}`,type:Ef.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}let l=this.createTokenRequestHeaders(c||r.ccsCredential),u=lB(this.config.authOptions.clientId,r);return po(this.executePostToTokenEndpoint.bind(this),Je.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(o,s,l,u,r.correlationId,Je.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Je.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(eR(r,e.embeddedClientId||e.tokenBodyParameters?.[DC]||this.config.authOptions.clientId),this.includeRedirectUri)tR(r,e.redirectUri);else if(!e.redirectUri)throw bs(q2);if(Z2(r,e.scopes,!0,this.oidcDefaultScopes),Bge(r,e.code),E9(r,this.config.libraryInfo),b9(r,this.config.telemetry.application),B9(r),this.serverTelemetryManager&&!JV(this.config)&&D9(r,this.serverTelemetryManager),e.codeVerifier&&Mge(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&T9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;w9(r,await If(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),_9(r,o.assertionType)}if(S9(r,vp.AUTHORIZATION_CODE_GRANT),iR(r),e.authenticationScheme===fo.POP){let o=new cT(this.cryptoUtils,this.performanceClient),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await po(o.generateCnf.bind(o),Je.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,k9(r,s)}else if(e.authenticationScheme===fo.SSH)if(e.sshJwk)P9(r,e.sshJwk);else throw bs(fx);(!Oa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rR(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let o=sB(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${o.uid}${fc.CLIENT_INFO_SEPARATOR}${o.utid}`,type:Ef.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case Ef.HOME_ACCOUNT_ID:try{let o=kC(n.credential);px(r,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Ef.UPN:oT(r,n.credential);break}return e.embeddedClientId&&hx(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&mx(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[tz])&&mx(r,{[tz]:"1"}),X2(r,e.correlationId,this.performanceClient),PC(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&Sge(r,e.postLogoutRedirectUri),e.correlationId&&nR(r,e.correlationId),e.idTokenHint&&Rge(r,e.idTokenHint),e.state&&I9(r,e.state),e.logoutHint&&Lge(r,e.logoutHint),e.extraQueryParameters&&mx(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&R9(r),PC(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};f();var m3t=300,oR=class extends td{static{a(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientAcquireToken,e.correlationId);let r=L0(),n=await po(this.executeTokenRequest.bind(this),Je.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=n.headers?.[qs.X_MS_REQUEST_ID],s=new Qc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(n.body),po(s.handleServerTokenResponse.bind(s),Je.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){if(!e)throw bs(j2);if(this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw xt(ax);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await po(this.acquireTokenWithCachedRefreshToken.bind(this),Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let o=n instanceof F0&&n.errorCode===sT,s=n instanceof bf&&n.errorCode===U6.INVALID_GRANT_ERROR&&n.subError===U6.CLIENT_MISMATCH_ERROR;if(o||s)return po(this.acquireTokenWithCachedRefreshToken.bind(this),Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return po(this.acquireTokenWithCachedRefreshToken.bind(this),Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=r7e(this.cacheManager.getRefreshToken.bind(this.cacheManager),Je.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw dz(sT);if(n.expiresOn&&rB(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||m3t))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),dz(F9);let o={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||fo.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Ef.HOME_ACCOUNT_ID}};try{return await po(this.acquireToken.bind(this),Je.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(s){if(s instanceof F0&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),s.subError===aT)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let c=a9(n);this.cacheManager.removeRefreshToken(c,e.correlationId)}throw s}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),o=Qi.appendQueryString(r.tokenEndpoint,n),s=await po(this.createTokenRequestBody.bind(this),Je.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),c=this.createTokenRequestHeaders(e.ccsCredential),l=lB(this.config.authOptions.clientId,e);return po(this.executePostToTokenEndpoint.bind(this),Je.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,s,c,l,e.correlationId,Je.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(eR(r,e.embeddedClientId||e.tokenBodyParameters?.[DC]||this.config.authOptions.clientId),e.redirectUri&&tR(r,e.redirectUri),Z2(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),S9(r,vp.REFRESH_TOKEN_GRANT),iR(r),E9(r,this.config.libraryInfo),b9(r,this.config.telemetry.application),B9(r),this.serverTelemetryManager&&!JV(this.config)&&D9(r,this.serverTelemetryManager),Nge(r,e.refreshToken),this.config.clientCredentials.clientSecret&&T9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;w9(r,await If(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),_9(r,n.assertionType)}if(e.authenticationScheme===fo.POP){let n=new cT(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await po(n.generateCnf.bind(n),Je.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,k9(r,o)}else if(e.authenticationScheme===fo.SSH)if(e.sshJwk)P9(r,e.sshJwk);else throw bs(fx);if((!Oa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rR(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Ef.HOME_ACCOUNT_ID:try{let n=kC(e.ccsCredential.credential);px(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Ef.UPN:oT(r,e.ccsCredential.credential);break}return e.embeddedClientId&&hx(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&mx(r,e.tokenBodyParameters),X2(r,e.correlationId,this.performanceClient),PC(r)}};f();var Q9=class extends td{static{a(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Je.SilentFlowClientAcquireCachedToken,e.correlationId);let r=ks.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Oa.isEmptyObj(e.claims))throw this.setCacheOutcome(ks.FORCE_REFRESH_OR_CLAIMS,e.correlationId),xt(lx);if(!e.account)throw xt(ax);let n=e.account.tenantId||n7e(e.authority),o=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,o,n);if(s){if(Dhe(s.cachedAt)||rB(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ks.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),xt(lx);s.refreshOn&&rB(s.refreshOn,0)&&(r=ks.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ks.NO_CACHED_ACCESS_TOKEN,e.correlationId),xt(lx);let c=e.authority||this.authority.getPreferredCache(),l={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(c)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await po(this.generateResultFromCacheRecord.bind(this),Je.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(l,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==ks.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Je.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=dx(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let o=n?.auth_time;if(!o)throw xt(sx);o9(o,r.maxAge)}return Qc.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var U9={};Sa(U9,{getAuthorizationCodePayload:()=>A3t,getAuthorizeUrl:()=>g3t,getStandardAuthorizeRequestParameters:()=>h3t,validateAuthorizationResponse:()=>s7e});f();function h3t(t,e,r,n){let o=e.correlationId,s=new Map;eR(s,e.embeddedClientId||e.extraQueryParameters?.[DC]||t.clientId);let c=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Z2(s,c,!0,t.authority.options.OIDCOptions?.defaultScopes),tR(s,e.redirectUri),nR(s,o),_ge(s,e.responseMode),iR(s),e.prompt&&(Pge(s,e.prompt),n?.addFields({prompt:e.prompt},o)),e.domainHint&&(kge(s,e.domainHint),n?.addFields({domainHintFromRequest:!0},o)),e.prompt!==KI.SELECT_ACCOUNT)if(e.sid&&e.prompt===KI.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),nz(s,e.sid),n?.addFields({sidFromRequest:!0},o);else if(e.account){let l=C3t(e.account),u=v3t(e.account);if(u&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),u=null),u){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),cB(s,u),n?.addFields({loginHintFromClaim:!0},o);try{let d=kC(e.account.homeAccountId);px(s,d)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(l&&e.prompt===KI.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),nz(s,l),n?.addFields({sidFromClaim:!0},o);try{let d=kC(e.account.homeAccountId);px(s,d)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),cB(s,e.loginHint),oT(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),cB(s,e.account.username),n?.addFields({loginHintFromUpn:!0},o);try{let d=kC(e.account.homeAccountId);px(s,d)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),cB(s,e.loginHint),oT(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},o));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Dge(s,e.nonce),e.state&&I9(s,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&rR(s,e.claims,t.clientCapabilities),e.embeddedClientId&&hx(s,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(aB))&&R9(s),s}a(h3t,"getStandardAuthorizeRequestParameters");function g3t(t,e,r,n){let o=PC(e,r,n);return Qi.appendQueryString(t.authorizationEndpoint,o)}a(g3t,"getAuthorizeUrl");function A3t(t,e){if(s7e(t,e),!t.code)throw xt(O2);return t}a(A3t,"getAuthorizationCodePayload");function s7e(t,e){if(!t.state||!e)throw t.state?xt(XI,"Cached State"):xt(XI,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw xt(vA,t.state)}try{n=decodeURIComponent(e)}catch{throw xt(vA,t.state)}if(r!==n)throw xt(R2);if(t.error||t.error_description||t.suberror){let o=y3t(t);throw uz(t.error,t.error_description,t.suberror)?new F0(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",o):new bf(t.error||"",t.error_description,t.suberror,o)}}a(s7e,"validateAuthorizationResponse");function y3t(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}a(y3t,"parseServerErrorNo");function C3t(t){return t.idTokenClaims?.sid||null}a(C3t,"extractAccountSid");function v3t(t){return t.idTokenClaims?.login_hint||null}a(v3t,"extractLoginHint");f();var a7e=",",c7e="|";function x3t(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:o,extensionVersion:s}=t,c=new Map([[0,[r,n]],[2,[o,s]]]),l=[];if(e?.length){if(l=e.split(a7e),l.length<4)return e}else l=Array.from({length:4},()=>c7e);return c.forEach((u,d)=>{u.length===2&&u[0]?.length&&u[1]?.length&&E3t({skuArr:l,index:d,skuName:u[0],skuVersion:u[1]})}),l.join(a7e)}a(x3t,"makeExtraSkuString");function E3t(t){let{skuArr:e,index:r,skuName:n,skuVersion:o}=t;r>=e.length||(e[r]=[n,o].join(c7e))}a(E3t,"setSku");var sR=class t{static{a(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=ks.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||nt.EMPTY_STRING,this.wrapperVer=e.wrapperVer||nt.EMPTY_STRING,this.telemetryCacheKey=Fl.CACHE_KEY+fc.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Fl.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let o=r.join(Fl.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),c=[e,s].join(Fl.VALUE_SEPARATOR);return[Fl.SCHEMA_VERSION,c,o].join(Fl.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(Fl.VALUE_SEPARATOR),o=e.errors.slice(0,r).join(Fl.VALUE_SEPARATOR),s=e.errors.length,c=r<s?Fl.OVERFLOW_TRUE:Fl.OVERFLOW_FALSE,l=[s,c].join(Fl.VALUE_SEPARATOR);return[Fl.SCHEMA_VERSION,e.cacheHits,n,o,l].join(Fl.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=Fl.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ci?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(Fl.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let o={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,o=0,s=e.errors.length;for(r=0;r<s;r++){let c=e.failedRequests[2*r]||nt.EMPTY_STRING,l=e.failedRequests[2*r+1]||nt.EMPTY_STRING,u=e.errors[r]||nt.EMPTY_STRING;if(o+=c.toString().length+l.toString().length+u.length+3,o<Fl.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||nt.EMPTY_STRING),e.push(this.regionSource||nt.EMPTY_STRING),e.push(this.regionOutcome||nt.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return x3t(e)}};var gx=class{static{a(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],s={homeAccountId:o.home_account_id,environment:o.environment,realm:o.realm,localAccountId:o.local_account_id,username:o.username,authorityType:o.authority_type,name:o.name,clientInfo:o.client_info,lastModificationTime:o.last_modification_time,lastModificationApp:o.last_modification_app,tenantProfiles:o.tenantProfiles?.map(l=>JSON.parse(l))},c=new Zu;iT.toObject(c,s),r[n]=c}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],s={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,realm:o.realm};r[n]=s}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],s={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,realm:o.realm,target:o.target,cachedAt:o.cached_at,expiresOn:o.expires_on,extendedExpiresOn:o.extended_expires_on,refreshOn:o.refresh_on,keyId:o.key_id,tokenType:o.token_type,requestedClaims:o.requestedClaims,requestedClaimsHash:o.requestedClaimsHash,userAssertionHash:o.userAssertionHash};r[n]=s}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],s={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,familyId:o.family_id,target:o.target,realm:o.realm};r[n]=s}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n];r[n]={clientId:o.client_id,environment:o.environment,familyId:o.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};f();f();var l7e="system_assigned_managed_identity",S3t="managed_identity",$ge=`https://login.microsoftonline.com/${S3t}/`,xp={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},cl={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},Wn={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},ei={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},ec={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},sa={GET:"get",POST:"post"},pz={SUCCESS_RANGE_START:ai.SUCCESS_RANGE_START,SUCCESS_RANGE_END:ai.SUCCESS_RANGE_END,SERVER_ERROR:ai.SERVER_ERROR},u7e="REGION_NAME",d7e="MSAL_FORCE_REGION",f7e=32,p7e={SHA256:"sha256"},mz={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},Ql={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},Ax={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},sh={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},hz={INTERVAL_MS:100,TIMEOUT_MS:5e3},m7e=4096;f();f();f();f();var uB=class{static{a(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var gz=Ne(require("http"),1),jge=Ne(require("https"),1);var dB=class{static{a(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?h7e(e,this.proxyUrl,sa.GET,r,this.customAgentOptions,n):g7e(e,sa.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?h7e(e,this.proxyUrl,sa.POST,r,this.customAgentOptions):g7e(e,sa.POST,r,this.customAgentOptions)}},h7e=a((t,e,r,n,o,s)=>{let c=new URL(t),l=new URL(e),u=n?.headers||{},d={host:l.hostname,port:l.port,method:"CONNECT",path:c.hostname,headers:u};o&&Object.keys(o).length&&(d.agent=new gz.default.Agent(o));let p="";if(r===sa.POST){let h=n?.body||"";p=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${h.length}\r
\r
${h}`}else s&&(d.timeout=s);let m=`${r.toUpperCase()} ${c.href} HTTP/1.1\r
Host: ${c.host}\r
Connection: close\r
`+p+`\r
`;return new Promise((h,g)=>{let A=gz.default.request(d);s&&A.on("timeout",()=>{A.destroy(),g(new Error("Request time out"))}),A.end(),A.on("connect",(y,v)=>{let b=y?.statusCode||pz.SERVER_ERROR;(b<pz.SUCCESS_RANGE_START||b>pz.SUCCESS_RANGE_END)&&(A.destroy(),v.destroy(),g(new Error(`Error connecting to proxy. Http status code: ${y.statusCode}. Http status message: ${y?.statusMessage||"Unknown"}`))),v.write(m);let I=[];v.on("data",_=>{I.push(_)}),v.on("end",()=>{let k=Buffer.concat([...I]).toString().split(`\r
`),N=parseInt(k[0].split(" ")[1]),F=k[0].split(" ").slice(2).join(" "),O=k[k.length-1],Y=k.slice(1,k.length-2),z=new Map;Y.forEach(ee=>{let J=ee.split(new RegExp(/:\s(.*)/s)),G=J[0],j=J[1];try{let Z=JSON.parse(j);Z&&typeof Z=="object"&&(j=Z)}catch{}z.set(G,j)});let U=Object.fromEntries(z),H=uB.getNetworkResponse(U,A7e(N,F,U,O),N);(N<ai.SUCCESS_RANGE_START||N>ai.SUCCESS_RANGE_END)&&H.body.error!==Ql.AUTHORIZATION_PENDING&&A.destroy(),h(H)}),v.on("error",_=>{A.destroy(),v.destroy(),g(new Error(_.toString()))})}),A.on("error",y=>{A.destroy(),g(new Error(y.toString()))})})},"networkRequestViaProxy"),g7e=a((t,e,r,n,o)=>{let s=e===sa.POST,c=r?.body||"",l=new URL(t),u=r?.headers||{},d={method:e,headers:u,...uB.urlToHttpOptions(l)};return n&&Object.keys(n).length&&(d.agent=new jge.default.Agent(n)),s?d.headers={...d.headers,"Content-Length":c.length}:o&&(d.timeout=o),new Promise((p,m)=>{let h;d.protocol==="http:"?h=gz.default.request(d):h=jge.default.request(d),s&&h.write(c),o&&h.on("timeout",()=>{h.destroy(),m(new Error("Request time out"))}),h.end(),h.on("response",g=>{let A=g.headers,y=g.statusCode,v=g.statusMessage,b=[];g.on("data",I=>{b.push(I)}),g.on("end",()=>{let I=Buffer.concat([...b]).toString(),_=A,k=uB.getNetworkResponse(_,A7e(y,v,_,I),y);(y<ai.SUCCESS_RANGE_START||y>ai.SUCCESS_RANGE_END)&&k.body.error!==Ql.AUTHORIZATION_PENDING&&h.destroy(),p(k)})}),h.on("error",g=>{h.destroy(),m(new Error(g.toString()))})})},"networkRequestViaHttps"),A7e=a((t,e,r,n)=>{let o;try{o=JSON.parse(n)}catch{let c,l;t>=ai.CLIENT_ERROR_RANGE_START&&t<=ai.CLIENT_ERROR_RANGE_END?(c="client_error",l="A client"):t>=ai.SERVER_ERROR_RANGE_START&&t<=ai.SERVER_ERROR_RANGE_END?(c="server_error",l="A server"):(c="unknown_error",l="An unknown"),o={error:c,error_description:`${l} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return o},"parseBody");f();f();f();var Az="invalid_file_extension",yz="invalid_file_path",lT="invalid_managed_identity_id_type",Cz="invalid_secret",y7e="missing_client_id",C7e="network_unavailable",vz="platform_not_supported",xz="unable_to_create_azure_arc",Ez="unable_to_create_cloud_shell",bz="unable_to_create_source",q9="unable_to_read_secret_file",v7e="user_assigned_not_available_at_runtime",Iz="www_authenticate_header_missing",Tz="www_authenticate_header_unsupported_format",aR={[Wn.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Wn.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Wn.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Wn.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var R3t={[Az]:"The file path in the WWW-Authenticate header does not contain a .key file.",[yz]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[lT]:"More than one ManagedIdentityIdType was provided.",[Cz]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[vz]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[y7e]:"A ManagedIdentityId id was not provided.",[aR.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Wn.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[aR.IDENTITY_ENDPOINT]:`The Managed Identity's '${Wn.IDENTITY_ENDPOINT}' environment variable is malformed.`,[aR.IMDS_ENDPOINT]:`The Managed Identity's '${Wn.IMDS_ENDPOINT}' environment variable is malformed.`,[aR.MSI_ENDPOINT]:`The Managed Identity's '${Wn.MSI_ENDPOINT}' environment variable is malformed.`,[C7e]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[xz]:"Azure Arc Managed Identities can only be system assigned.",[Ez]:"Cloud Shell Managed Identities can only be system assigned.",[bz]:"Unable to create a Managed Identity source based on environment variables.",[q9]:"Unable to read the secret file.",[v7e]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[Iz]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[Tz]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},Gge=class t extends ci{static{a(this,"ManagedIdentityError")}constructor(e){super(e,R3t[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function Uc(t){return new Gge(t)}a(Uc,"createManagedIdentityError");var wz=class{static{a(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,o=e?.userAssignedObjectId;if(r){if(n||o)throw Uc(lT);this.id=r,this.idType=ec.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||o)throw Uc(lT);this.id=n,this.idType=ec.USER_ASSIGNED_RESOURCE_ID}else if(o){if(r||n)throw Uc(lT);this.id=o,this.idType=ec.USER_ASSIGNED_OBJECT_ID}else this.id=l7e,this.idType=ec.SYSTEM_ASSIGNED}};f();var du={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},Ep=class t extends ci{static{a(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(du.invalidLoopbackAddressType.code,`${du.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(du.unableToLoadRedirectUri.code,`${du.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(du.noAuthCodeInResponse.code,`${du.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(du.noLoopbackServerExists.code,`${du.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(du.loopbackServerAlreadyExists.code,`${du.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(du.loopbackServerTimeout.code,`${du.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(du.stateNotFoundError.code,du.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(du.thumbprintMissing.code,du.thumbprintMissing.desc)}};var k3t={clientId:nt.EMPTY_STRING,authority:nt.DEFAULT_AUTHORITY,clientSecret:nt.EMPTY_STRING,clientAssertion:nt.EMPTY_STRING,clientCertificate:{thumbprint:nt.EMPTY_STRING,thumbprintSha256:nt.EMPTY_STRING,privateKey:nt.EMPTY_STRING,x5c:nt.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:nt.EMPTY_STRING,authorityMetadata:nt.EMPTY_STRING,clientCapabilities:[],protocolMode:Ud.AAD,azureCloudOptions:{azureCloudInstance:ux.None,tenant:nt.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},P3t={claimsBasedCachingEnabled:!1},Vge={loggerCallback:a(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Za.Info},D3t={loggerOptions:Vge,networkClient:new dB,proxyUrl:nt.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},B3t={application:{appName:nt.EMPTY_STRING,appVersion:nt.EMPTY_STRING}};function x7e({auth:t,broker:e,cache:r,system:n,telemetry:o}){let s={...D3t,networkClient:new dB(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||Vge,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw Ep.createStateNotFoundError();return{auth:{...k3t,...t},broker:{...e},cache:{...P3t,...r},system:{...s,...n},telemetry:{...B3t,...o}}}a(x7e,"buildAppConfiguration");function E7e({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new wz(e),o=r?.loggerOptions||Vge,s;return r?.networkClient?s=r.networkClient:s=new dB(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:o,networkClient:s},disableInternalRetries:r?.disableInternalRetries||!1}}a(E7e,"buildManagedIdentityConfiguration");f();f();f();f();var b7e=Ne(require("crypto"));var Sz=new Uint8Array(256),_z=Sz.length;function zge(){return _z>Sz.length-16&&(b7e.default.randomFillSync(Sz),_z=0),Sz.slice(_z,_z+=16)}a(zge,"rng");f();f();f();var I7e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function N3t(t){return typeof t=="string"&&I7e.test(t)}a(N3t,"validate");var T7e=N3t;var rd=[];for(let t=0;t<256;++t)rd.push((t+256).toString(16).substr(1));function M3t(t,e=0){let r=(rd[t[e+0]]+rd[t[e+1]]+rd[t[e+2]]+rd[t[e+3]]+"-"+rd[t[e+4]]+rd[t[e+5]]+"-"+rd[t[e+6]]+rd[t[e+7]]+"-"+rd[t[e+8]]+rd[t[e+9]]+"-"+rd[t[e+10]]+rd[t[e+11]]+rd[t[e+12]]+rd[t[e+13]]+rd[t[e+14]]+rd[t[e+15]]).toLowerCase();if(!T7e(r))throw TypeError("Stringified UUID is invalid");return r}a(M3t,"stringify");var w7e=M3t;f();function L3t(t,e,r){t=t||{};let n=t.random||(t.rng||zge)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return w7e(n)}a(L3t,"v4");var Kge=L3t;var fB=class{static{a(this,"GuidGenerator")}generateGuid(){return Kge()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};f();var Q0=class t{static{a(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(Xu.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,nt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,Xu.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};f();f();var _7e=Ne(require("crypto"),1);var uT=class{static{a(this,"HashUtils")}sha256(e){return _7e.default.createHash(p7e.SHA256).update(e).digest()}};var S7e=Ne(require("crypto"),1);var Rz=class{static{a(this,"PkceGenerator")}constructor(){this.hashUtils=new uT}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%mz.CV_CHARSET.length;for(;e.length<=f7e;){let o=S7e.default.randomBytes(1)[0];if(o>=r)continue;let s=o%mz.CV_CHARSET.length;e.push(mz.CV_CHARSET[s])}let n=e.join(nt.EMPTY_STRING);return Q0.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return Q0.base64EncodeUrl(this.hashUtils.sha256(e).toString(Xu.BASE64),Xu.BASE64)}};var BC=class{static{a(this,"CryptoProvider")}constructor(){this.pkceGenerator=new Rz,this.guidGenerator=new fB,this.hashUtils=new uT}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return Q0.base64Encode(e)}base64Decode(e){return Q0.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return Q0.base64EncodeUrl(this.hashUtils.sha256(e).toString(Xu.BASE64),Xu.BASE64)}};f();f();var dT=class extends iT{static{a(this,"NodeStorage")}constructor(e,r,n,o){super(r,n,e,new Y2,o),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let o=e[n];if(typeof o=="object")if(o instanceof Zu)r.accounts[n]=o;else if(Ol.isIdTokenEntity(o))r.idTokens[n]=o;else if(Ol.isAccessTokenEntity(o))r.accessTokens[n]=o;else if(Ol.isRefreshTokenEntity(o))r.refreshTokens[n]=o;else if(Ol.isAppMetadataEntity(n,o))r.appMetadata[n]=o;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new Zu,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return Ol.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=Ol.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return Ol.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=Ol.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return Ol.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=Ol.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return Ol.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=Ol.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&Ol.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&Ol.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&Ol.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return gx.deserializeAllCache(gx.deserializeJSONBlob(e))}static generateJsonCache(e){return zI.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=Ol.generateCredentialKey(r);if(e!==n){let o=this.getItem(e);if(o)return this.removeItem(e),this.setItem(n,o),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};f();var H9={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},pB=class{static{a(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=zI.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=gx.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=dT.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new BC().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new O0(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new O0(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(Zu.generateAccountCacheKey(e),r||new fB().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new O0(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let o=r[n];if(!e.hasOwnProperty(n))o!==null&&(e[n]=o);else{let s=o!==null,c=typeof o=="object",l=!Array.isArray(o),u=typeof e[n]<"u"&&e[n]!==null;s&&c&&l&&u?this.mergeUpdates(e[n],o):e[n]=o}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,o=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,s=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,c=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,l=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:o,RefreshToken:s,IdToken:c,AppMetadata:l}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(o=>{(!r||!r.hasOwnProperty(o))&&delete n[o]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...H9.Account,...e.Account},IdToken:{...H9.IdToken,...e.IdToken},AccessToken:{...H9.AccessToken,...e.AccessToken},RefreshToken:{...H9.RefreshToken,...e.RefreshToken},AppMetadata:{...H9.AppMetadata,...e.AppMetadata}}}};f();var iHe=Ne(nHe(),1);var yx=class t{static{a(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let o=new t;return o.privateKey=r,o.thumbprint=e,o.useSha256=!1,n&&(o.publicCertificate=this.parseCertificate(n)),o}static fromCertificateWithSha256Thumbprint(e,r,n){let o=new t;return o.privateKey=r,o.thumbprint=e,o.useSha256=!0,n&&(o.publicCertificate=this.parseCertificate(n)),o}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw xt(Es.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let o=oa.nowSeconds();this.expirationTime=o+600;let c={alg:this.useSha256?sh.PSS_256:sh.RSA_256},l=this.useSha256?sh.X5T_256:sh.X5T;Object.assign(c,{[l]:Q0.base64EncodeUrl(this.thumbprint,Xu.HEX)}),this.publicCertificate&&Object.assign(c,{[sh.X5C]:this.publicCertificate});let u={[sh.AUDIENCE]:this.jwtAudience,[sh.EXPIRATION_TIME]:this.expirationTime,[sh.ISSUER]:this.issuer,[sh.SUBJECT]:this.issuer,[sh.NOT_BEFORE]:o,[sh.JWT_ID]:e.createNewGuid()};return this.jwt=iHe.default.sign(u,this.privateKey,{header:c}),this.jwt}isExpired(){return this.expirationTime<oa.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],o;for(;(o=r.exec(e))!==null;)n.push(o[1].replace(/\r*\n/g,nt.EMPTY_STRING));return n}};f();var oK="@azure/msal-node",bA="3.6.3";f();var IB=class extends td{static{a(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=oa.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),o=new Qc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),o.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),o=Qi.appendQueryString(e.tokenEndpoint,n),s=await this.createTokenRequestBody(r),c=this.createTokenRequestHeaders({credential:r.username,type:Ef.UPN}),l={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(o,s,c,l,r.correlationId)}async createTokenRequestBody(e){let r=new Map;hr.addClientId(r,this.config.authOptions.clientId),hr.addUsername(r,e.username),hr.addPassword(r,e.password),hr.addScopes(r,e.scopes),hr.addResponseType(r,YD.IDTOKEN_TOKEN),hr.addGrantType(r,vp.RESOURCE_OWNER_PASSWORD_GRANT),hr.addClientInfo(r),hr.addLibraryInfo(r,this.config.libraryInfo),hr.addApplicationTelemetry(r,this.config.telemetry.application),hr.addThrottling(r),this.serverTelemetryManager&&hr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();hr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&hr.addClientSecret(r,this.config.clientCredentials.clientSecret);let o=this.config.clientCredentials.clientAssertion;return o&&(hr.addClientAssertion(r,await If(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),hr.addClientAssertionType(r,o.assertionType)),(!Oa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&hr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&hr.addCcsUpn(r,e.username),ed.mapToQueryString(r)}};f();function oHe(t,e,r,n){let o=U9.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return hr.addLibraryInfo(o,{sku:Ql.MSAL_SKU,version:bA,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==Ud.OIDC&&hr.addApplicationTelemetry(o,t.telemetry.application),hr.addResponseType(o,YD.CODE),r.codeChallenge&&r.codeChallengeMethod&&hr.addCodeChallengeParams(o,r.codeChallenge,r.codeChallengeMethod),hr.addExtraQueryParameters(o,r.extraQueryParameters||{}),U9.getAuthorizeUrl(e,o,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}a(oHe,"getAuthCodeRequestUrl");var mT=class{static{a(this,"ClientApplication")}constructor(e){this.config=x7e(e),this.cryptoProvider=new BC,this.logger=new M0(this.config.system.loggerOptions,oK,bA),this.storage=new dT(this.logger,this.config.auth.clientId,this.cryptoProvider,Fge(this.config.auth)),this.tokenCache=new pB(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||_C.QUERY,authenticationScheme:fo.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return oHe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:fo.BEARER},o=this.initializeServerTelemetryManager(Ax.acquireTokenByCode,n.correlationId);try{let s=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),c=await this.buildOauthClientConfiguration(s,n.correlationId,n.redirectUri,o),l=new O9(c);return this.logger.verbose("Auth code client created",n.correlationId),await l.acquireToken(n,r)}catch(s){throw s instanceof ci&&s.setCorrelationId(n.correlationId),o.cacheFailedRequest(s),s}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:fo.BEARER},n=this.initializeServerTelemetryManager(Ax.acquireTokenByRefreshToken,r.correlationId);try{let o=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(o,r.correlationId,r.redirectUri||"",n),c=new oR(s);return this.logger.verbose("Refresh token client created",r.correlationId),await c.acquireToken(r)}catch(o){throw o instanceof ci&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(Ax.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let o=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(o,r.correlationId,r.redirectUri||"",n),c=new Q9(s);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,c,s)}catch(l){if(l instanceof tT&&l.errorCode===Es.tokenRefreshRequired)return new oR(s).acquireTokenByRefreshToken(r);throw l}}catch(o){throw o instanceof ci&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}async acquireCachedTokenSilent(e,r,n){let[o,s]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...yp]});if(s===ks.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let c=new oR(n);try{await c.acquireTokenByRefreshToken(e)}catch{}}return o}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(Ax.acquireTokenByUsernamePassword,r.correlationId);try{let o=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(o,r.correlationId,"",n),c=new IB(s);return this.logger.verbose("Username password client created",r.correlationId),await c.acquireToken(r)}catch(o){throw o instanceof ci&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw Ep.createStateNotFoundError();if(e!==r)throw xt(Es.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,o){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),o?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:o,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:Ql.MSAL_SKU,version:bA,cpu:process.arch||nt.EMPTY_STRING,os:process.platform||nt.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=yx.fromAssertion(await If(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Ql.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===fo.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=fo.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!Oa.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...yp],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let o={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new sR(o,this.storage)}async createAuthority(e,r,n,o){this.logger.verbose("createAuthority called",r);let s=xA.generateAuthority(e,o||this.config.auth.azureCloudOptions),c={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return oz.createDiscoveredInstance(s,this.config.system.networkClient,this.storage,c,this.logger,r)}clearCache(){this.storage.clear()}};f();var sHe=Ne(require("http"),1);var sK=class{static{a(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw Ep.createLoopbackServerAlreadyExistsError();return new Promise((n,o)=>{this.server=sHe.default.createServer((s,c)=>{let l=s.url;if(l){if(l===nt.FORWARD_SLASH){c.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{c.end(r||"Error occurred loading redirectUrl"),o(Ep.createUnableToLoadRedirectUrlError());return}let u=this.getRedirectUri(),d=new URL(l,u),p=ed.getDeserializedResponse(d.search)||{};p.code&&(c.writeHead(ai.REDIRECT,{location:u}),c.end()),p.error&&c.end(r||`Error occurred: ${p.error}`),n(p)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw Ep.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),Ep.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${Ql.HTTP_PROTOCOL}${Ql.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};f();var TB=class extends td{static{a(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=oa.nowSeconds(),o=await this.acquireTokenWithDeviceCode(e,r),s=new Qc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(o),s.handleServerTokenResponse(o,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=Qi.appendQueryString(this.authority.deviceCodeEndpoint,r),o=this.createQueryString(e),s=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,o,s,c,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&hr.addExtraQueryParameters(r,e.extraQueryParameters),ed.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,o,s){let{body:{user_code:c,device_code:l,verification_uri:u,expires_in:d,interval:p,message:m}}=await this.sendPostRequest(o,e,{body:r,headers:n},s);return{userCode:c,deviceCode:l,verificationUri:u,expiresIn:d,interval:p,message:m}}createQueryString(e){let r=new Map;return hr.addScopes(r,e.scopes),hr.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&hr.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&hr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),ed.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),xt(Es.deviceCodePollingCancelled);if(r&&r<e&&oa.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),xt(Es.userTimeoutReached);if(oa.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),xt(Es.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),o=Qi.appendQueryString(this.authority.tokenEndpoint,n),s=this.createTokenRequestBody(e,r),c=this.createTokenRequestHeaders(),l=e.timeout?oa.nowSeconds()+e.timeout:void 0,u=oa.nowSeconds()+r.expiresIn,d=r.interval*1e3;for(;this.continuePolling(u,l,e.cancel);){let p={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},m=await this.executePostToTokenEndpoint(o,s,c,p,e.correlationId);if(m.body&&m.body.error)if(m.body.error===nt.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await oa.delay(d);else throw this.logger.info("Unexpected error in polling from the server"),khe(ZD.postRequestFailed,m.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),m.body}throw this.logger.error("Polling stopped for unknown reasons."),xt(Es.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;hr.addScopes(n,e.scopes),hr.addClientId(n,this.config.authOptions.clientId),hr.addGrantType(n,vp.DEVICE_CODE_GRANT),hr.addDeviceCode(n,r.deviceCode);let o=e.correlationId||this.config.cryptoInterface.createNewGuid();return hr.addCorrelationId(n,o),hr.addClientInfo(n),hr.addLibraryInfo(n,this.config.libraryInfo),hr.addApplicationTelemetry(n,this.config.telemetry.application),hr.addThrottling(n),this.serverTelemetryManager&&hr.addServerTelemetry(n,this.serverTelemetryManager),(!Oa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&hr.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),ed.mapToQueryString(n)}};var wB=class extends mT{static{a(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=sR.makeExtraSkuString({libraryName:Ql.MSAL_SKU,libraryVersion:bA})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(Ax.acquireTokenByDeviceCode,r.correlationId);try{let o=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(o,r.correlationId,"",n),c=new TB(s);return this.logger.verbose("Device code client created",r.correlationId),await c.acquireToken(r)}catch(o){throw o instanceof ci&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:o,errorTemplate:s,windowHandle:c,loopbackClient:l,...u}=e;if(this.nativeBrokerPlugin){let A={...u,clientId:this.config.auth.clientId,scopes:e.scopes||yp,redirectUri:`${Ql.HTTP_PROTOCOL}${Ql.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...u.extraQueryParameters,...u.tokenQueryParameters,[J2.X_CLIENT_EXTRA_SKU]:this.skus},accountId:u.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(A,c)}let{verifier:d,challenge:p}=await this.cryptoProvider.generatePkceCodes(),m=l||new sK,h={},g=null;try{let A=m.listenForAuthCode(o,s).then(k=>{h=k}).catch(k=>{g=k}),y=await this.waitForRedirectUri(m),v={...u,correlationId:r,scopes:e.scopes||yp,redirectUri:y,responseMode:_C.QUERY,codeChallenge:p,codeChallengeMethod:QV.S256},b=await this.getAuthCodeUrl(v);if(await n(b),await A,g)throw g;if(h.error)throw new bf(h.error,h.error_description,h.suberror);if(!h.code)throw Ep.createNoAuthCodeInResponseError();let I=h.client_info,_={code:h.code,codeVerifier:d,clientInfo:I||nt.EMPTY_STRING,...v};return await this.acquireTokenByCode(_)}finally{m.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||yp,redirectUri:`${Ql.HTTP_PROTOCOL}${Ql.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[J2.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let o=0,s=setInterval(()=>{if(hz.TIMEOUT_MS/hz.INTERVAL_MS<o){clearInterval(s),n(Ep.createLoopbackServerTimeoutError());return}try{let c=e.getRedirectUri();clearInterval(s),r(c);return}catch(c){if(c instanceof ci&&c.errorCode===du.noLoopbackServerExists.code){o++;return}clearInterval(s),n(c);return}},hz.INTERVAL_MS)})}};f();f();var hT=class extends td{static{a(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===ks.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,o,s,c){let l=r,u=r,d=ks.NOT_APPLICABLE,p;l.serializableCache&&l.persistencePlugin&&(p=new O0(l.serializableCache,!1),await l.persistencePlugin.beforeCacheAccess(p));let m=this.readAccessTokenFromCache(o,u.managedIdentityId?.id||l.authOptions.clientId,new al(e.scopes||[]),s,e.correlationId);return l.serializableCache&&l.persistencePlugin&&p&&await l.persistencePlugin.afterCacheAccess(p),m?oa.isTokenExpired(m.expiresOn,l.systemOptions?.tokenRenewalOffsetSeconds||XD)?(c?.setCacheOutcome(ks.CACHED_ACCESS_TOKEN_EXPIRED),[null,ks.CACHED_ACCESS_TOKEN_EXPIRED]):(m.refreshOn&&oa.isTokenExpired(m.refreshOn.toString(),0)&&(d=ks.PROACTIVELY_REFRESHED,c?.setCacheOutcome(ks.PROACTIVELY_REFRESHED)),[await Qc.generateAuthenticationResult(n,o,{account:null,idToken:null,accessToken:m,refreshToken:null,appMetadata:null},!0,e),d]):(c?.setCacheOutcome(ks.NO_CACHED_ACCESS_TOKEN),[null,ks.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,o,s){let c={homeAccountId:nt.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Ro.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:al.createSearchScopes(n.asArray())},l=o.getAccessTokensByFilter(c,s);if(l.length<1)return null;if(l.length>1)throw xt(Es.multipleMatchingTokens);return l[0]}async executeTokenRequest(e,r,n){let o,s;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let u={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};s=oa.nowSeconds();let d=await this.appTokenProvider(u);o={access_token:d.accessToken,expires_in:d.expiresInSeconds,refresh_in:d.refreshInSeconds,token_type:fo.BEARER}}else{let u=this.createTokenQueryParameters(e),d=Qi.appendQueryString(r.tokenEndpoint,u),p=await this.createTokenRequestBody(e),m=this.createTokenRequestHeaders(),h={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),s=oa.nowSeconds();let g=await this.executePostToTokenEndpoint(d,p,m,h,e.correlationId);o=g.body,o.status=g.status}let c=new Qc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return c.validateTokenResponse(o,n),await c.handleServerTokenResponse(o,this.authority,s,e)}async createTokenRequestBody(e){let r=new Map;hr.addClientId(r,this.config.authOptions.clientId),hr.addScopes(r,e.scopes,!1),hr.addGrantType(r,vp.CLIENT_CREDENTIALS_GRANT),hr.addLibraryInfo(r,this.config.libraryInfo),hr.addApplicationTelemetry(r,this.config.telemetry.application),hr.addThrottling(r),this.serverTelemetryManager&&hr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();hr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&hr.addClientSecret(r,this.config.clientCredentials.clientSecret);let o=e.clientAssertion||this.config.clientCredentials.clientAssertion;return o&&(hr.addClientAssertion(r,await If(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),hr.addClientAssertionType(r,o.assertionType)),(!Oa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&hr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),ed.mapToQueryString(r)}};f();var _B=class extends td{static{a(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new al(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(oa.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(ks.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),xt(Es.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(ks.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),xt(Es.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),o,s=null;if(n){o=WV.extractTokenClaims(n.secret,Q0.base64Decode);let c=o.oid||o.sub,l={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:nt.EMPTY_STRING,localAccountId:c||nt.EMPTY_STRING};s=this.cacheManager.readAccountFromCache(l,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),Qc.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,o)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Ro.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},o=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(o).length<1?null:Object.values(o)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||fo.BEARER,s={credentialType:n&&n.toLowerCase()!==fo.BEARER.toLowerCase()?Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ro.ACCESS_TOKEN,clientId:e,target:al.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},c=this.cacheManager.getAccessTokensByFilter(s,r.correlationId),l=c.length;if(l<1)return null;if(l>1)throw xt(Es.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let o=this.createTokenQueryParameters(e),s=Qi.appendQueryString(r.tokenEndpoint,o),c=await this.createTokenRequestBody(e),l=this.createTokenRequestHeaders(),u={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},d=oa.nowSeconds(),p=await this.executePostToTokenEndpoint(s,c,l,u,e.correlationId),m=new Qc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return m.validateTokenResponse(p.body),await m.handleServerTokenResponse(p.body,this.authority,d,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;hr.addClientId(r,this.config.authOptions.clientId),hr.addScopes(r,e.scopes),hr.addGrantType(r,vp.JWT_BEARER),hr.addClientInfo(r),hr.addLibraryInfo(r,this.config.libraryInfo),hr.addApplicationTelemetry(r,this.config.telemetry.application),hr.addThrottling(r),this.serverTelemetryManager&&hr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();hr.addCorrelationId(r,n),hr.addRequestTokenUse(r,J2.ON_BEHALF_OF),hr.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&hr.addClientSecret(r,this.config.clientCredentials.clientSecret);let o=this.config.clientCredentials.clientAssertion;return o&&(hr.addClientAssertion(r,await If(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),hr.addClientAssertionType(r,o.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&hr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),ed.mapToQueryString(r)}};var SB=class extends mT{static{a(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,o=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&o||r&&o)throw xt(Es.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(o)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?yx.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):yx.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw xt(Es.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await If(e.clientAssertion,this.config.auth.clientId),assertionType:Ql.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),o={...n,scopes:n.scopes.filter(h=>!yp.includes(h))},s={...e,...o,clientAssertion:r},l=new Qi(s.authority).getUrlComponents().PathSegments[0];if(Object.values(Cp).includes(l))throw xt(Es.missingTenantIdError);let u=process.env[d7e],d;s.azureRegion!=="DisableMsalForceRegion"&&(!s.azureRegion&&u?d=u:d=s.azureRegion);let p={azureRegion:d,environmentRegion:process.env[u7e]},m=this.initializeServerTelemetryManager(Ax.acquireTokenByClientCredential,s.correlationId,s.skipCache);try{let h=await this.createAuthority(s.authority,s.correlationId,p,e.azureCloudOptions),g=await this.buildOauthClientConfiguration(h,s.correlationId,"",m),A=new hT(g,this.appTokenProvider);return this.logger.verbose("Client credential client created",s.correlationId),await A.acquireToken(s)}catch(h){throw h instanceof ci&&h.setCorrelationId(s.correlationId),m.cacheFailedRequest(h),h}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),s=new _B(o);return this.logger.verbose("On behalf of client created",r.correlationId),await s.acquireToken(r)}catch(n){throw n instanceof ci&&n.setCorrelationId(r.correlationId),n}}};f();f();f();f();f();function aHe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}a(aHe,"isIso8601");f();var aK=class{static{a(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===sa.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let o=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let s=0;for(;await this.retryPolicy.pauseForRetry(o.status,s,this.logger,o.headers[qs.RETRY_AFTER]);)o=await this.sendNetworkRequestAsyncHelper(e,r,n),s++;return o}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(sa.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(sa.POST,e,r)}};var dR={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},_f=class{static{a(this,"BaseManagedIdentitySource")}constructor(e,r,n,o,s){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=o,this.disableInternalRetries=s}async getServerTokenResponseAsync(e,r,n,o){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(aHe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-oa.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,o){let s=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),s.queryParameters[cl.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let g=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${g}`),s.queryParameters[cl.XMS_CC]=g}let c=s.headers;c[qs.CONTENT_TYPE]=nt.URL_FORM_CONTENT_TYPE;let l={headers:c};Object.keys(s.bodyParameters).length&&(l.body=s.computeParametersBodyString());let u=this.disableInternalRetries?this.networkClient:new aK(this.networkClient,s.retryPolicy,this.logger),d=oa.nowSeconds(),p;try{s.httpMethod===sa.POST?p=await u.sendPostRequestAsync(s.computeUri(),l):p=await u.sendGetRequestAsync(s.computeUri(),l)}catch(g){throw g instanceof ci?g:xt(Es.networkError)}let m=new Qc(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),h=await this.getServerTokenResponseAsync(p,u,s,l);return m.validateTokenResponse(h,o),m.handleServerTokenResponse(h,n,d,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case ec.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?dR.MANAGED_IDENTITY_CLIENT_ID_2017:dR.MANAGED_IDENTITY_CLIENT_ID;case ec.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?dR.MANAGED_IDENTITY_RESOURCE_ID_IMDS:dR.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case ec.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),dR.MANAGED_IDENTITY_OBJECT_ID;default:throw Uc(lT)}}};_f.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new Qi(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),Uc(aR[t])}};f();f();f();var cK=class{static{a(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var q6t=3,H6t=1e3,W6t=[ai.NOT_FOUND,ai.REQUEST_TIMEOUT,ai.TOO_MANY_REQUESTS,ai.SERVER_ERROR,ai.SERVICE_UNAVAILABLE,ai.GATEWAY_TIMEOUT],lK=class t{static{a(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new cK}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return H6t}async pauseForRetry(e,r,n,o){if(W6t.includes(e)&&r<q6t){let s=this.linearRetryStrategy.calculateDelay(o,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${s}ms (retry attempt: ${r+1})`),await new Promise(c=>setTimeout(c,s)),!0}return!1}};var Ip=class{static{a(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new lK}computeUri(){let e=new Map;this.queryParameters&&hr.addExtraQueryParameters(e,this.queryParameters);let r=ed.mapToQueryString(e);return Qi.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&hr.addExtraQueryParameters(e,this.bodyParameters),ed.mapToQueryString(e)}};var $6t="2019-08-01",eO=class t extends _f{static{a(this,"AppService")}constructor(e,r,n,o,s,c,l){super(e,r,n,o,s),this.identityEndpoint=c,this.identityHeader=l}static getEnvironmentVariables(){let e=process.env[Wn.IDENTITY_ENDPOINT],r=process.env[Wn.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,o,s){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${ei.APP_SERVICE} managed identity is unavailable because one or both of the '${Wn.IDENTITY_HEADER}' and '${Wn.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let u=t.getValidatedEnvVariableUrlString(Wn.IDENTITY_ENDPOINT,c,ei.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${ei.APP_SERVICE} managed identity. Endpoint URI: ${u}. Creating ${ei.APP_SERVICE} managed identity.`),new t(e,r,n,o,s,c,l)}createRequest(e,r){let n=new Ip(sa.GET,this.identityEndpoint);return n.headers[xp.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[cl.API_VERSION]=$6t,n.queryParameters[cl.RESOURCE]=e,r.idType!==ec.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};f();var Cx=require("fs"),dHe=Ne(require("path"),1);var j6t="2019-11-01",cHe="http://127.0.0.1:40342/metadata/identity/oauth2/token",lHe="N/A: himds executable exists",uHe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},G6t={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},tO=class t extends _f{static{a(this,"AzureArc")}constructor(e,r,n,o,s,c){super(e,r,n,o,s),this.identityEndpoint=c}static getEnvironmentVariables(){let e=process.env[Wn.IDENTITY_ENDPOINT],r=process.env[Wn.IMDS_ENDPOINT];if(!e||!r){let n=G6t[process.platform];try{(0,Cx.accessSync)(n,Cx.constants.F_OK|Cx.constants.R_OK),e=cHe,r=lHe}catch{}}return[e,r]}static tryCreate(e,r,n,o,s,c){let[l,u]=t.getEnvironmentVariables();if(!l||!u)return e.info(`[Managed Identity] ${ei.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Wn.IDENTITY_ENDPOINT}' and '${Wn.IMDS_ENDPOINT}' are not defined. ${ei.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(u===lHe)e.info(`[Managed Identity] ${ei.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${ei.AZURE_ARC} endpoint: ${cHe}. Creating ${ei.AZURE_ARC} managed identity.`);else{let d=t.getValidatedEnvVariableUrlString(Wn.IDENTITY_ENDPOINT,l,ei.AZURE_ARC,e);d.endsWith("/")&&d.slice(0,-1),t.getValidatedEnvVariableUrlString(Wn.IMDS_ENDPOINT,u,ei.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${ei.AZURE_ARC} managed identity. Endpoint URI: ${d}. Creating ${ei.AZURE_ARC} managed identity.`)}if(c.idType!==ec.SYSTEM_ASSIGNED)throw Uc(xz);return new t(e,r,n,o,s,l)}createRequest(e){let r=new Ip(sa.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[xp.METADATA_HEADER_NAME]="true",r.queryParameters[cl.API_VERSION]=j6t,r.queryParameters[cl.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,o){let s;if(e.status===ai.UNAUTHORIZED){let c=e.headers["www-authenticate"];if(!c)throw Uc(Iz);if(!c.includes("Basic realm="))throw Uc(Tz);let l=c.split("Basic realm=")[1];if(!uHe.hasOwnProperty(process.platform))throw Uc(vz);let u=uHe[process.platform],d=dHe.default.basename(l);if(!d.endsWith(".key"))throw Uc(Az);if(u+d!==l)throw Uc(yz);let p;try{p=await(0,Cx.statSync)(l).size}catch{throw Uc(q9)}if(p>m7e)throw Uc(Cz);let m;try{m=(0,Cx.readFileSync)(l,Xu.UTF8)}catch{throw Uc(q9)}let h=`Basic ${m}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[xp.AUTHORIZATION_HEADER_NAME]=h;try{s=await r.sendGetRequestAsync(n.computeUri(),o)}catch(g){throw g instanceof ci?g:xt(Es.networkError)}}return this.getServerTokenResponse(s||e)}};f();var rO=class t extends _f{static{a(this,"CloudShell")}constructor(e,r,n,o,s,c){super(e,r,n,o,s),this.msiEndpoint=c}static getEnvironmentVariables(){return[process.env[Wn.MSI_ENDPOINT]]}static tryCreate(e,r,n,o,s,c){let[l]=t.getEnvironmentVariables();if(!l)return e.info(`[Managed Identity] ${ei.CLOUD_SHELL} managed identity is unavailable because the '${Wn.MSI_ENDPOINT} environment variable is not defined.`),null;let u=t.getValidatedEnvVariableUrlString(Wn.MSI_ENDPOINT,l,ei.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${ei.CLOUD_SHELL} managed identity. Endpoint URI: ${u}. Creating ${ei.CLOUD_SHELL} managed identity.`),c.idType!==ec.SYSTEM_ASSIGNED)throw Uc(Ez);return new t(e,r,n,o,s,l)}createRequest(e){let r=new Ip(sa.POST,this.msiEndpoint);return r.headers[xp.METADATA_HEADER_NAME]="true",r.bodyParameters[cl.RESOURCE]=e,r}};f();f();f();var uK=class{static{a(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var V6t=[ai.NOT_FOUND,ai.REQUEST_TIMEOUT,ai.GONE,ai.TOO_MANY_REQUESTS],z6t=3,K6t=7,Y6t=1e3,J6t=4e3,X6t=2e3,Z6t=10*1e3,dK=class t{static{a(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new uK(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return Y6t}static get MAX_EXPONENTIAL_BACKOFF_MS(){return J6t}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return X6t}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return Z6t}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===ai.GONE?K6t:z6t),(V6t.includes(e)||e>=ai.SERVER_ERROR_RANGE_START&&e<=ai.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let o=e===ai.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(s=>setTimeout(s,o)),!0}return!1}};var fHe="/metadata/identity/oauth2/token",e9t=`http://169.254.169.254${fHe}`,t9t="2018-02-01",fK=class t extends _f{static{a(this,"Imds")}constructor(e,r,n,o,s,c){super(e,r,n,o,s),this.identityEndpoint=c}static tryCreate(e,r,n,o,s){let c;return process.env[Wn.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${Wn.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${ei.IMDS} returned endpoint: ${process.env[Wn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),c=t.getValidatedEnvVariableUrlString(Wn.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[Wn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${fHe}`,ei.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${Wn.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${ei.IMDS}, using the default endpoint.`),c=e9t),new t(e,r,n,o,s,c)}createRequest(e,r){let n=new Ip(sa.GET,this.identityEndpoint);return n.headers[xp.METADATA_HEADER_NAME]="true",n.queryParameters[cl.API_VERSION]=t9t,n.queryParameters[cl.RESOURCE]=e,r.idType!==ec.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new dK,n}};f();var r9t="2019-07-01-preview",nO=class t extends _f{static{a(this,"ServiceFabric")}constructor(e,r,n,o,s,c,l){super(e,r,n,o,s),this.identityEndpoint=c,this.identityHeader=l}static getEnvironmentVariables(){let e=process.env[Wn.IDENTITY_ENDPOINT],r=process.env[Wn.IDENTITY_HEADER],n=process.env[Wn.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,o,s,c){let[l,u,d]=t.getEnvironmentVariables();if(!l||!u||!d)return e.info(`[Managed Identity] ${ei.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Wn.IDENTITY_HEADER}', '${Wn.IDENTITY_ENDPOINT}' or '${Wn.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let p=t.getValidatedEnvVariableUrlString(Wn.IDENTITY_ENDPOINT,l,ei.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${ei.SERVICE_FABRIC} managed identity. Endpoint URI: ${p}. Creating ${ei.SERVICE_FABRIC} managed identity.`),c.idType!==ec.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${ei.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,o,s,l,u)}createRequest(e,r){let n=new Ip(sa.GET,this.identityEndpoint);return n.headers[xp.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[cl.API_VERSION]=r9t,n.queryParameters[cl.RESOURCE]=e,r.idType!==ec.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};f();var n9t="2017-09-01",i9t=`Only client id is supported for user-assigned managed identity in ${ei.MACHINE_LEARNING}.`,iO=class t extends _f{static{a(this,"MachineLearning")}constructor(e,r,n,o,s,c,l){super(e,r,n,o,s),this.msiEndpoint=c,this.secret=l}static getEnvironmentVariables(){let e=process.env[Wn.MSI_ENDPOINT],r=process.env[Wn.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,o,s){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${ei.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${Wn.MSI_ENDPOINT}' and '${Wn.MSI_SECRET}' environment variables are not defined.`),null;let u=t.getValidatedEnvVariableUrlString(Wn.MSI_ENDPOINT,c,ei.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${ei.MACHINE_LEARNING} managed identity. Endpoint URI: ${u}. Creating ${ei.MACHINE_LEARNING} managed identity.`),new t(e,r,n,o,s,c,l)}createRequest(e,r){let n=new Ip(sa.GET,this.msiEndpoint);if(n.headers[xp.METADATA_HEADER_NAME]="true",n.headers[xp.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[cl.API_VERSION]=n9t,n.queryParameters[cl.RESOURCE]=e,r.idType===ec.SYSTEM_ASSIGNED)n.queryParameters[dR.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[Wn.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===ec.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(i9t);return n}};var oO=class t{static{a(this,"ManagedIdentityClient")}constructor(e,r,n,o,s){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=o,this.disableInternalRetries=s}async sendManagedIdentityTokenRequest(e,r,n,o){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,o)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(nO.getEnvironmentVariables())?ei.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(eO.getEnvironmentVariables())?ei.APP_SERVICE:this.allEnvironmentVariablesAreDefined(iO.getEnvironmentVariables())?ei.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(rO.getEnvironmentVariables())?ei.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(tO.getEnvironmentVariables())?ei.AZURE_ARC:ei.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,o,s,c){let l=nO.tryCreate(e,r,n,o,s,c)||eO.tryCreate(e,r,n,o,s)||iO.tryCreate(e,r,n,o,s)||rO.tryCreate(e,r,n,o,s,c)||tO.tryCreate(e,r,n,o,s,c)||fK.tryCreate(e,r,n,o,s);if(!l)throw Uc(bz);return l}};var o9t=[ei.SERVICE_FABRIC],RB=class t{static{a(this,"ManagedIdentityApplication")}constructor(e){this.config=E7e(e||{}),this.logger=new M0(this.config.system.loggerOptions,oK,bA);let r={canonicalAuthority:nt.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new dT(this.logger,this.config.managedIdentityId.id,eB,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new BC;let n={protocolMode:Ud.AAD,knownAuthorities:[$ge],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new xA($ge,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new hT({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new oO(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new uT}async acquireToken(e){if(!e.resource)throw bs(iB.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,o]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let s=this.managedIdentityClient.getManagedIdentitySource();if(n&&o9t.includes(s)){let c=this.hashUtils.sha256(n.accessToken).toString(Xu.HEX);r.revokedTokenSha256Hash=c}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(o===ks.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,o){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,o)}getManagedIdentitySource(){return oO.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};f();var pK=class{static{a(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(s=>Zu.isAccountEntity(s)),o;if(n.length>0){let s=n[0];o=await this.partitionManager.extractKey(s)}else o=await this.partitionManager.getKey();await this.client.set(o,e.tokenCache.serialize())}}};f();f();f();f();f();function sO(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}a(sO,"getRandomIntegerInclusive");function aO(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+sO(0,n/2)}}a(aO,"calculateRetryDelay");f();function kB(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}a(kB,"isObject");f();function fR(t){if(kB(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}a(fR,"isError");f();f();var pHe=require("node:crypto");var OAe,s9t=typeof((OAe=globalThis?.crypto)===null||OAe===void 0?void 0:OAe.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):pHe.randomUUID;function PB(){return s9t()}a(PB,"randomUUID");f();var QAe,UAe,qAe,HAe,mHe=typeof window<"u"&&typeof window.document<"u",hHe=typeof self=="object"&&typeof self?.importScripts=="function"&&(((QAe=self.constructor)===null||QAe===void 0?void 0:QAe.name)==="DedicatedWorkerGlobalScope"||((UAe=self.constructor)===null||UAe===void 0?void 0:UAe.name)==="ServiceWorkerGlobalScope"||((qAe=self.constructor)===null||qAe===void 0?void 0:qAe.name)==="SharedWorkerGlobalScope"),gHe=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",AHe=typeof Bun<"u"&&typeof Bun.version<"u",gT=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((HAe=globalThis.process.versions)===null||HAe===void 0)&&HAe.node);var yHe=typeof navigator<"u"&&navigator?.product==="ReactNative";f();function Tp(t,e){return Buffer.from(t,e)}a(Tp,"stringToUint8Array");f();var WAe="REDACTED",a9t=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],c9t=["api-version"],IA=class{static{a(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=a9t.concat(e),r=c9t.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,o)=>{if(o instanceof Error)return Object.assign(Object.assign({},o),{name:o.name,message:o.message});if(n==="headers")return this.sanitizeHeaders(o);if(n==="url")return this.sanitizeUrl(o);if(n==="query")return this.sanitizeQuery(o);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(o)||kB(o)){if(r.has(o))return"[Circular]";r.add(o)}return o},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,WAe);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=WAe;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=WAe;return r}};f();f();f();f();var pR=class extends Error{static{a(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function jAe(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:o}=e??{};return new Promise((s,c)=>{function l(){c(new pR(o??"The operation was aborted."))}a(l,"rejectOnAbort");function u(){n?.removeEventListener("abort",d)}a(u,"removeListeners");function d(){r?.(),u(),l()}if(a(d,"onAbort"),n?.aborted)return l();try{t(p=>{u(),s(p)},p=>{u(),c(p)})}catch(p){c(p)}n?.addEventListener("abort",d)})}a(jAe,"createAbortablePromise");f();var p9t="The delay was aborted.";function GAe(t,e){let r,{abortSignal:n,abortErrorMsg:o}=e??{};return jAe(s=>{r=setTimeout(s,t)},{cleanupBeforeAbort:a(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:o??p9t})}a(GAe,"delay");f();function DB(t){if(fR(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}a(DB,"getErrorMessage");f();function CHe(t,e){return aO(t,e)}a(CHe,"calculateRetryDelay");function mK(t){return fR(t)}a(mK,"isError");var hK=gT,BB=gT;f();var cO=ii("IdentityUtils"),vHe="1.0";function mR(t,e,r){let n=a(o=>(cO.getToken.info(o),new ih({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:o})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}a(mR,"ensureValidMsalToken");function VAe(t){let e=t?.authorityHost;return!e&&BB&&(e=process.env.AZURE_AUTHORITY_HOST),e??N6}a(VAe,"getAuthorityHost");function zAe(t,e){return e||(e=N6),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}a(zAe,"getAuthority");function xHe(t,e,r){return t==="adfs"&&e||r?[e]:[]}a(xHe,"getKnownAuthorities");var gK=a((t,e=hK?"Node":"Browser")=>(r,n,o)=>{if(!o)switch(r){case U0.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case U0.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case U0.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case U0.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function AK(t){switch(t){case"error":return U0.LogLevel.Error;case"info":return U0.LogLevel.Info;case"verbose":return U0.LogLevel.Verbose;case"warning":return U0.LogLevel.Warning;default:return U0.LogLevel.Info}}a(AK,"getMSALLogLevel");function hR(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return cO.info(bo(t,e.message)),new Wr(e.message);case"device_code_polling_cancelled":return new pR("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":cO.info(bo(t,`Authentication returned errorCode ${n.errorCode}`));break;default:cO.info(bo(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(cO.info(bo(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new ih({scopes:t,getTokenOptions:r,message:e.message})}a(hR,"handleMsalError");function EHe(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}a(EHe,"publicToMsal");function bHe(t,e){return{authority:e.environment??pOe,homeAccountId:e.homeAccountId,tenantId:e.tenantId||fOe,username:e.username,clientId:t,version:vHe}}a(bHe,"msalToPublic");function KAe(t){let e=JSON.parse(t);if(e.version&&e.version!==vHe)throw Error("Unsupported AuthenticationRecord version");return e}a(KAe,"deserializeAuthenticationRecord");f();f();f();f();f();f();function h9t(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}a(h9t,"isPrimitiveBody");function g9t(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}a(g9t,"handleNullableResponseAndWrappableBody");function YAe(t,e){var r,n;let o=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},o),{body:t.parsedBody});let s=e&&e.bodyMapper,c=!!s?.nullable,l=s?.type.name;if(l==="Stream")return Object.assign(Object.assign({},o),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let u=l==="Composite"&&s.type.modelProperties||{},d=Object.keys(u).some(p=>u[p].serializedName==="");if(l==="Sequence"||d){let p=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let m of Object.keys(u))u[m].serializedName&&(p[m]=(n=t.parsedBody)===null||n===void 0?void 0:n[m]);if(o)for(let m of Object.keys(o))p[m]=o[m];return c&&!t.parsedBody&&!o&&Object.getOwnPropertyNames(u).length===0?null:p}return g9t({body:t.parsedBody,headers:o,hasNullableType:c,shouldWrapBody:h9t(t.parsedBody,l)})}a(YAe,"flattenResponse");var LC={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};f();f();f();f();f();var FC=class extends Error{static{a(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};f();f();f();var IHe=require("node:os"),THe=Ne(require("node:util"),1),wHe=Ne(require("node:process"),1);function _He(t,...e){wHe.stderr.write(`${THe.default.format(t,...e)}${IHe.EOL}`)}a(_He,"log");var SHe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,RHe,JAe=[],XAe=[],CK=[];SHe&&ZAe(SHe);var kHe=Object.assign(t=>PHe(t),{enable:ZAe,enabled:eye,disable:A9t,log:_He});function ZAe(t){RHe=t,JAe=[],XAe=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?XAe.push(new RegExp(`^${n.substr(1)}$`)):JAe.push(new RegExp(`^${n}$`));for(let n of CK)n.enabled=eye(n.namespace)}a(ZAe,"enable");function eye(t){if(t.endsWith("*"))return!0;for(let e of XAe)if(e.test(t))return!1;for(let e of JAe)if(e.test(t))return!0;return!1}a(eye,"enabled");function A9t(){let t=RHe||"";return ZAe(""),t}a(A9t,"disable");function PHe(t){let e=Object.assign(r,{enabled:eye(t),destroy:y9t,log:kHe.log,namespace:t,extend:C9t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return a(r,"debug"),CK.push(e),e}a(PHe,"createDebugger");function y9t(){let t=CK.indexOf(this);return t>=0?(CK.splice(t,1),!0):!1}a(y9t,"destroy");function C9t(t){let e=PHe(`${this.namespace}:${t}`);return e.log=this.log,e}a(C9t,"extend");var NB=kHe;var tye=["verbose","info","warning","error"],DHe={verbose:400,info:300,warning:200,error:100};function BHe(t,e){e.log=(...r)=>{t.log(...r)}}a(BHe,"patchLogMethod");function NHe(t){return tye.includes(t)}a(NHe,"isTypeSpecRuntimeLogLevel");function v9t(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,o=NB(t.namespace);o.log=(...p)=>{NB.log(...p)};function s(p){if(p&&!NHe(p))throw new Error(`Unknown log level '${p}'. Acceptable values: ${tye.join(",")}`);n=p;let m=[];for(let h of e)c(h)&&m.push(h.namespace);NB.enable(m.join(","))}a(s,"contextSetLogLevel"),r&&(NHe(r)?s(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${tye.join(", ")}.`));function c(p){return!!(n&&DHe[p.level]<=DHe[n])}a(c,"shouldEnable");function l(p,m){let h=Object.assign(p.extend(m),{level:m});if(BHe(p,h),c(h)){let g=NB.disable();NB.enable(g+","+h.namespace)}return e.add(h),h}a(l,"createLogger");function u(){return n}a(u,"contextGetLogLevel");function d(p){let m=o.extend(p);return BHe(o,m),{error:l(m,"error"),warning:l(m,"warning"),info:l(m,"info"),verbose:l(m,"verbose")}}return a(d,"contextCreateClientLogger"),{setLogLevel:s,getLogLevel:u,createClientLogger:d,logger:o}}a(v9t,"createLoggerContext");var MHe=v9t({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),x9t=MHe.logger;function uO(t){return MHe.createClientLogger(t)}a(uO,"createClientLogger");f();function vK(t){return t.toLowerCase()}a(vK,"normalizeName");function*E9t(t){for(let e of t.values())yield[e.name,e.value]}a(E9t,"headerIterator");var rye=class{static{a(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(vK(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(vK(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(vK(e))}delete(e){this._headersMap.delete(vK(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,o]of this._headersMap)r[n]=o.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return E9t(this._headersMap)}};function q0(t){return new rye(t)}a(q0,"createHttpHeaders");f();f();f();var nye=class{static{a(this,"PipelineRequestImpl")}constructor(e){var r,n,o,s,c,l,u;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:q0(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(o=e.timeout)!==null&&o!==void 0?o:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(s=e.disableKeepAlive)!==null&&s!==void 0?s:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(c=e.withCredentials)!==null&&c!==void 0?c:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||PB(),this.allowInsecureConnection=(l=e.allowInsecureConnection)!==null&&l!==void 0?l:!1,this.enableBrowserStreams=(u=e.enableBrowserStreams)!==null&&u!==void 0?u:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function xK(t){return new nye(t)}a(xK,"createPipelineRequest");f();var LHe=new Set(["Deserialize","Serialize","Retry","Sign"]),iye=class t{static{a(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!LHe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!LHe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((s,c)=>l=>c.sendRequest(l,s),s=>e.sendRequest(s))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(A){return{name:A,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}a(n,"createPhase");let o=n("Serialize"),s=n("None"),c=n("Deserialize"),l=n("Retry"),u=n("Sign"),d=[o,s,c,l,u];function p(A){return A==="Retry"?l:A==="Serialize"?o:A==="Deserialize"?c:A==="Sign"?u:s}a(p,"getPhase");for(let A of this._policies){let y=A.policy,v=A.options,b=y.name;if(r.has(b))throw new Error("Duplicate policy names not allowed in pipeline");let I={policy:y,dependsOn:new Set,dependants:new Set};v.afterPhase&&(I.afterPhase=p(v.afterPhase),I.afterPhase.hasAfterPolicies=!0),r.set(b,I),p(v.phase).policies.add(I)}for(let A of this._policies){let{policy:y,options:v}=A,b=y.name,I=r.get(b);if(!I)throw new Error(`Missing node for policy ${b}`);if(v.afterPolicies)for(let _ of v.afterPolicies){let k=r.get(_);k&&(I.dependsOn.add(k),k.dependants.add(I))}if(v.beforePolicies)for(let _ of v.beforePolicies){let k=r.get(_);k&&(k.dependsOn.add(I),I.dependants.add(k))}}function m(A){A.hasRun=!0;for(let y of A.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let v of y.dependants)v.dependsOn.delete(y);r.delete(y.policy.name),A.policies.delete(y)}}a(m,"walkPhase");function h(){for(let A of d){if(m(A),A.policies.size>0&&A!==s){s.hasRun||m(s);return}A.hasAfterPolicies&&m(s)}}a(h,"walkPhases");let g=0;for(;r.size>0;){g++;let A=e.length;if(h(),e.length<=A&&g>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function EK(){return iye.create()}a(EK,"createEmptyPipeline");f();f();var FHe=require("node:util"),OHe=FHe.inspect.custom;var b9t=new IA,nd=class t extends Error{static{a(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,OHe,{value:a(()=>`RestError: ${this.message} 
 ${b9t.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};nd.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";nd.PARSE_ERROR="PARSE_ERROR";function bK(t){return t instanceof nd?!0:fR(t)&&t.name==="RestError"}a(bK,"isRestError");f();f();var MB=Ne(require("node:http"),1),LB=Ne(require("node:https"),1),TK=Ne(require("node:zlib"),1),UHe=require("node:stream");f();var uh=uO("ts-http-runtime");var I9t={};function dO(t){return t&&typeof t.pipe=="function"}a(dO,"isReadableStream");function QHe(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=a(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}a(QHe,"isStreamComplete");function qHe(t){return t&&typeof t.byteLength=="number"}a(qHe,"isArrayBuffer");var IK=class extends UHe.Transform{static{a(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(o){n(o)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},oye=class{static{a(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,o;let s=new AbortController,c;if(e.abortSignal){if(e.abortSignal.aborted)throw new FC("The operation was aborted. Request has already been canceled.");c=a(h=>{h.type==="abort"&&s.abort()},"abortListener"),e.abortSignal.addEventListener("abort",c)}let l;e.timeout>0&&(l=setTimeout(()=>{let h=new IA;uh.info(`request to '${h.sanitizeUrl(e.url)}' timed out. canceling...`),s.abort()},e.timeout));let u=e.headers.get("Accept-Encoding"),d=u?.includes("gzip")||u?.includes("deflate"),p=typeof e.body=="function"?e.body():e.body;if(p&&!e.headers.has("Content-Length")){let h=S9t(p);h!==null&&e.headers.set("Content-Length",h)}let m;try{if(p&&e.onUploadProgress){let b=e.onUploadProgress,I=new IK(b);I.on("error",_=>{uh.error("Error in upload progress",_)}),dO(p)?p.pipe(I):I.end(p),p=I}let h=await this.makeRequest(e,s,p);l!==void 0&&clearTimeout(l);let g=T9t(h),y={status:(r=h.statusCode)!==null&&r!==void 0?r:0,headers:g,request:e};if(e.method==="HEAD")return h.resume(),y;m=d?w9t(h,g):h;let v=e.onDownloadProgress;if(v){let b=new IK(v);b.on("error",I=>{uh.error("Error in download progress",I)}),m.pipe(b),m=b}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((o=e.streamResponseStatusCodes)===null||o===void 0)&&o.has(y.status)?y.readableStreamBody=m:y.bodyAsText=await _9t(m),y}finally{if(e.abortSignal&&c){let h=Promise.resolve();dO(p)&&(h=QHe(p));let g=Promise.resolve();dO(m)&&(g=QHe(m)),Promise.all([h,g]).then(()=>{var A;c&&((A=e.abortSignal)===null||A===void 0||A.removeEventListener("abort",c))}).catch(A=>{uh.warning("Error when cleaning up abortListener on httpRequest",A)})}}}makeRequest(e,r,n){var o;let s=new URL(e.url),c=s.protocol!=="https:";if(c&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let l=(o=e.agent)!==null&&o!==void 0?o:this.getOrCreateAgent(e,c),u=Object.assign({agent:l,hostname:s.hostname,path:`${s.pathname}${s.search}`,port:s.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((d,p)=>{let m=c?MB.request(u,d):LB.request(u,d);m.once("error",h=>{var g;p(new nd(h.message,{code:(g=h.code)!==null&&g!==void 0?g:nd.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let h=new FC("The operation was aborted. Rejecting from abort signal callback while making request.");m.destroy(h),p(h)}),n&&dO(n)?n.pipe(m):n?typeof n=="string"||Buffer.isBuffer(n)?m.end(n):qHe(n)?m.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(uh.error("Unrecognized body type",n),p(new nd("Unrecognized body type"))):m.end()})}getOrCreateAgent(e,r){var n;let o=e.disableKeepAlive;if(r)return o?MB.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new MB.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(o&&!e.tlsSettings)return LB.globalAgent;let s=(n=e.tlsSettings)!==null&&n!==void 0?n:I9t,c=this.cachedHttpsAgents.get(s);return c&&c.options.keepAlive===!o||(uh.info("No cached TLS Agent exist, creating a new Agent"),c=new LB.Agent(Object.assign({keepAlive:!o},s)),this.cachedHttpsAgents.set(s,c)),c}}};function T9t(t){let e=q0();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}a(T9t,"getResponseHeaders");function w9t(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=TK.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=TK.createInflate();return t.pipe(n),n}return t}a(w9t,"getDecodedResponseStream");function _9t(t){return new Promise((e,r)=>{let n=[];t.on("data",o=>{Buffer.isBuffer(o)?n.push(o):n.push(Buffer.from(o))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",o=>{o&&o?.name==="AbortError"?r(o):r(new nd(`Error reading response as text: ${o.message}`,{code:nd.PARSE_ERROR}))})})}a(_9t,"streamToText");function S9t(t){return t?Buffer.isBuffer(t)?t.length:dO(t)?null:qHe(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}a(S9t,"getBodyLength");function HHe(){return new oye}a(HHe,"createNodeHttpClient");function wK(){return HHe()}a(wK,"createDefaultHttpClient");f();f();f();f();var sye="logPolicy";function _K(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:uh.info,n=new IA({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:sye,async sendRequest(o,s){if(!r.enabled)return s(o);r(`Request: ${n.sanitize(o)}`);let c=await s(o);return r(`Response status code: ${c.status}`),r(`Headers: ${n.sanitize(c.headers)}`),c}}}a(_K,"logPolicy");f();var aye="redirectPolicy",WHe=["GET","HEAD"];function SK(t={}){let{maxRetries:e=20}=t;return{name:aye,async sendRequest(r,n){let o=await n(r);return $He(n,o,e)}}}a(SK,"redirectPolicy");async function $He(t,e,r,n=0){let{request:o,status:s,headers:c}=e,l=c.get("location");if(l&&(s===300||s===301&&WHe.includes(o.method)||s===302&&WHe.includes(o.method)||s===303&&o.method==="POST"||s===307)&&n<r){let u=new URL(l,o.url);o.url=u.toString(),s===303&&(o.method="GET",o.headers.delete("Content-Length"),delete o.body),o.headers.delete("Authorization");let d=await t(o);return $He(t,d,r,n+1)}return e}a($He,"handleRedirect");f();f();f();function jHe(){return"User-Agent"}a(jHe,"getHeaderName");f();function GHe(){return jHe()}a(GHe,"getUserAgentHeaderName");var fCn=GHe();f();var cye="decompressResponsePolicy";function RK(){return{name:cye,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}a(RK,"decompressResponsePolicy");f();f();f();f();var R9t="The operation was aborted.";function VHe(t,e,r){return new Promise((n,o)=>{let s,c,l=a(()=>o(new FC(r?.abortErrorMsg?r?.abortErrorMsg:R9t)),"rejectOnAbort"),u=a(()=>{r?.abortSignal&&c&&r.abortSignal.removeEventListener("abort",c)},"removeListeners");if(c=a(()=>(s&&clearTimeout(s),u(),l()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return l();s=setTimeout(()=>{u(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",c)})}a(VHe,"delay");function zHe(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}a(zHe,"parseHeaderValueAsNumber");var lye="Retry-After",k9t=["retry-after-ms","x-ms-retry-after-ms",lye];function KHe(t){if(t&&[429,503].includes(t.status))try{for(let o of k9t){let s=zHe(t,o);if(s===0||s)return s*(o===lye?1e3:1)}let e=t.headers.get(lye);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}a(KHe,"getRetryAfterInMs");function YHe(t){return Number.isFinite(KHe(t))}a(YHe,"isThrottlingRetryResponse");function uye(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=KHe(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}a(uye,"throttlingRetryStrategy");var P9t=1e3,D9t=1e3*64;function kK(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:P9t,o=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:D9t;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:c,responseError:l}){let u=N9t(l),d=u&&t.ignoreSystemErrors,p=B9t(c),m=p&&t.ignoreHttpStatusCodes;return c&&(YHe(c)||!p)||m||d?{skipStrategy:!0}:l&&!u&&!p?{errorToThrow:l}:aO(s,{retryDelayInMs:n,maxRetryDelayInMs:o})}}}a(kK,"exponentialRetryStrategy");function B9t(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}a(B9t,"isExponentialRetryResponse");function N9t(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}a(N9t,"isSystemError");f();var M9t=uO("ts-http-runtime retryPolicy"),L9t="retryPolicy";function AT(t,e={maxRetries:3}){let r=e.logger||M9t;return{name:L9t,async sendRequest(n,o){var s,c;let l,u,d=-1;e:for(;;){d+=1,l=void 0,u=void 0;try{r.info(`Retry ${d}: Attempting to send request`,n.requestId),l=await o(n),r.info(`Retry ${d}: Received a response from request`,n.requestId)}catch(p){if(r.error(`Retry ${d}: Received an error from request`,n.requestId),u=p,!p||u.name!=="RestError")throw p;l=u.response}if(!((s=n.abortSignal)===null||s===void 0)&&s.aborted)throw r.error(`Retry ${d}: Request aborted.`),new FC;if(d>=((c=e.maxRetries)!==null&&c!==void 0?c:3)){if(r.info(`Retry ${d}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),u)throw u;if(l)return l;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${d}: Processing ${t.length} retry strategies.`);t:for(let p of t){let m=p.logger||r;m.info(`Retry ${d}: Processing retry strategy ${p.name}.`);let h=p.retry({retryCount:d,response:l,responseError:u});if(h.skipStrategy){m.info(`Retry ${d}: Skipped.`);continue t}let{errorToThrow:g,retryAfterInMs:A,redirectTo:y}=h;if(g)throw m.error(`Retry ${d}: Retry strategy ${p.name} throws error:`,g),g;if(A||A===0){m.info(`Retry ${d}: Retry strategy ${p.name} retries after ${A}`),await VHe(A,void 0,{abortSignal:n.abortSignal});continue e}if(y){m.info(`Retry ${d}: Retry strategy ${p.name} redirects to ${y}`),n.url=y;continue e}}if(u)throw r.info("None of the retry strategies could work with the received error. Throwing it."),u;if(l)return r.info("None of the retry strategies could work with the received response. Returning it."),l}}}}a(AT,"retryPolicy");var dye="defaultRetryPolicy";function PK(t={}){var e;return{name:dye,sendRequest:AT([uye(),kK(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}a(PK,"defaultRetryPolicy");f();var fye="formDataPolicy";function F9t(t){var e;let r={};for(let[n,o]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(o);return r}a(F9t,"formDataToFormDataMap");function DK(){return{name:fye,async sendRequest(t,e){if(gT&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=F9t(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=O9t(t.formData):await Q9t(t.formData,t),t.formData=void 0}return e(t)}}}a(DK,"formDataPolicy");function O9t(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let o of n)e.append(r,o.toString());else e.append(r,n.toString());return e.toString()}a(O9t,"wwwFormUrlEncode");async function Q9t(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[o,s]of Object.entries(t))for(let c of Array.isArray(s)?s:[s])if(typeof c=="string")n.push({headers:q0({"Content-Disposition":`form-data; name="${o}"`}),body:Tp(c,"utf-8")});else{if(c==null||typeof c!="object")throw new Error(`Unexpected value for key ${o}: ${c}. Value should be serialized to string first.`);{let l=c.name||"blob",u=q0();u.set("Content-Disposition",`form-data; name="${o}"; filename="${l}"`),u.set("Content-Type",c.type||"application/octet-stream"),n.push({headers:u,body:c})}}e.multipartBody={parts:n}}a(Q9t,"prepareFormData");f();var IWe=Ne(AWe(),1),TWe=Ne(vWe(),1);var BOt="HTTPS_PROXY",NOt="HTTP_PROXY",MOt="ALL_PROXY",LOt="NO_PROXY",vye="proxyPolicy",xWe=[],wWe=!1,FOt=new Map;function QK(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}a(QK,"getEnvironmentValue");function OOt(){if(!process)return;let t=QK(BOt),e=QK(MOt),r=QK(NOt);return t||e||r}a(OOt,"loadEnvironmentProxyValue");function QOt(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let o=!1;for(let s of e)s[0]==="."?(n.endsWith(s)||n.length===s.length-1&&n===s.slice(1))&&(o=!0):n===s&&(o=!0);return r?.set(n,o),o}a(QOt,"isBypassed");function UOt(){let t=QK(LOt);return wWe=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}a(UOt,"loadNoProxy");function qOt(){let t=OOt();return t?new URL(t):void 0}a(qOt,"getDefaultProxySettingsInternal");function EWe(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}a(EWe,"getUrlFromProxySettings");function bWe(t,e,r){if(t.agent)return;let o=new URL(t.url).protocol!=="https:";t.tlsSettings&&uh.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let s=t.headers.toJSON();o?(e.httpProxyAgent||(e.httpProxyAgent=new TWe.HttpProxyAgent(r,{headers:s})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new IWe.HttpsProxyAgent(r,{headers:s})),t.agent=e.httpsProxyAgent)}a(bWe,"setProxyAgentOnRequest");function UK(t,e){wWe||xWe.push(...UOt());let r=t?EWe(t):qOt(),n={};return{name:vye,async sendRequest(o,s){var c;return!o.proxySettings&&r&&!QOt(o.url,(c=e?.customNoProxyList)!==null&&c!==void 0?c:xWe,e?.customNoProxyList?void 0:FOt)?bWe(o,n,r):o.proxySettings&&bWe(o,n,EWe(o.proxySettings)),s(o)}}}a(UK,"proxyPolicy");f();var xye="agentPolicy";function qK(t){return{name:xye,sendRequest:a(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}a(qK,"agentPolicy");f();var Eye="tlsPolicy";function HK(t){return{name:Eye,sendRequest:a(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}a(HK,"tlsPolicy");f();f();function WK(t){return typeof t.stream=="function"}a(WK,"isBlob");f();f();function _We(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:a(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}a(_We,"__values");function UC(t){return this instanceof UC?(this.v=t,this):new UC(t)}a(UC,"__await");function bye(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(g){return function(A){return Promise.resolve(A).then(g,m)}}function l(g,A){n[g]&&(o[g]=function(y){return new Promise(function(v,b){s.push([g,y,v,b])>1||u(g,y)})},A&&(o[g]=A(o[g])))}function u(g,A){try{d(n[g](A))}catch(y){h(s[0][3],y)}}function d(g){g.value instanceof UC?Promise.resolve(g.value.v).then(p,m):h(s[0][2],g)}function p(g){u("next",g)}function m(g){u("throw",g)}function h(g,A){g(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}a(bye,"__asyncGenerator");function SWe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof _We=="function"?_We(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(l,u){c=t[s](c),o(l,u,c.done,c.value)})}}function o(s,c,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},c)}}a(SWe,"__asyncValues");var $K=require("stream");function RWe(){return bye(this,arguments,a(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield UC(e.read());if(r)return yield UC(void 0);yield yield UC(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}a(RWe,"streamAsyncIterator");function HOt(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=RWe.bind(t)),t.values||(t.values=RWe.bind(t))}a(HOt,"makeAsyncIterable");function kWe(t){return t instanceof ReadableStream?(HOt(t),$K.Readable.fromWeb(t)):t}a(kWe,"ensureNodeStream");function WOt(t){return t instanceof Uint8Array?$K.Readable.from(Buffer.from(t)):WK(t)?kWe(t.stream()):kWe(t)}a(WOt,"toStream");async function PWe(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(WOt);return $K.Readable.from(function(){return bye(this,arguments,function*(){var r,n,o,s;for(let d of e)try{for(var c=!0,l=(n=void 0,SWe(d)),u;u=yield UC(l.next()),r=u.done,!r;c=!0)s=u.value,c=!1,yield yield UC(s)}catch(p){n={error:p}}finally{try{!c&&!r&&(o=l.return)&&(yield UC(o.call(l)))}finally{if(n)throw n.error}}})}())}}a(PWe,"concat");function $Ot(){return`----AzSDKFormBoundary${PB()}`}a($Ot,"generateBoundary");function jOt(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}a(jOt,"encodeHeaders");function GOt(t){return t instanceof Uint8Array?t.byteLength:WK(t)?t.size===-1?void 0:t.size:void 0}a(GOt,"getLength");function VOt(t){let e=0;for(let r of t){let n=GOt(r);if(n===void 0)return;e+=n}return e}a(VOt,"getTotalLength");async function zOt(t,e,r){let n=[Tp(`--${r}`,"utf-8"),...e.flatMap(s=>[Tp(`\r
`,"utf-8"),Tp(jOt(s.headers),"utf-8"),Tp(`\r
`,"utf-8"),s.body,Tp(`\r
--${r}`,"utf-8")]),Tp(`--\r
\r
`,"utf-8")],o=VOt(n);o&&t.headers.set("Content-Length",o),t.body=await PWe(n)}a(zOt,"buildRequestBody");var pO="multipartPolicy",KOt=70,YOt=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function JOt(t){if(t.length>KOt)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!YOt.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}a(JOt,"assertValidBoundary");function jK(){return{name:pO,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,o=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",s=o.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!s)throw new Error(`Got multipart request body, but content-type header was not multipart: ${o}`);let[,c,l]=s;if(l&&n&&l!==n)throw new Error(`Multipart boundary was specified as ${l} in the header, but got ${n} in the request body`);return n??(n=l),n?JOt(n):n=$Ot(),t.headers.set("Content-Type",`${c}; boundary=${n}`),await zOt(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}a(jK,"multipartPolicy");f();f();f();f();f();f();f();f();f();f();f();f();function GK(){return EK()}a(GK,"createEmptyPipeline");f();f();f();var qC=VI("core-rest-pipeline");f();f();f();f();function Tye(t={}){return _K(Object.assign({logger:qC.info},t))}a(Tye,"logPolicy");f();function wye(t={}){return SK(t)}a(wye,"redirectPolicy");f();f();f();var QB=Ne(require("node:os"),1),VK=Ne(require("node:process"),1);function DWe(){return"User-Agent"}a(DWe,"getHeaderName");async function BWe(t){if(VK&&VK.versions){let e=VK.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${QB.arch()}-${QB.type()}-${QB.release()})`)}a(BWe,"setPlatformSpecificData");f();var zK="1.22.0";function s7t(t){let e=[];for(let[r,n]of t){let o=n?`${r}/${n}`:r;e.push(o)}return e.join(" ")}a(s7t,"getUserAgentString");function NWe(){return DWe()}a(NWe,"getUserAgentHeaderName");async function KK(t){let e=new Map;e.set("core-rest-pipeline",zK),await BWe(e);let r=s7t(e);return t?`${t} ${r}`:r}a(KK,"getUserAgentValue");var MWe=NWe(),LWe="userAgentPolicy";function _ye(t={}){let e=KK(t.userAgentPrefix);return{name:LWe,async sendRequest(r,n){return r.headers.has(MWe)||r.headers.set(MWe,await e),n(r)}}}a(_ye,"userAgentPolicy");f();f();var FWe=Symbol("rawContent");function Sye(t){return typeof t[FWe]=="function"}a(Sye,"hasRawContent");function OWe(t){return Sye(t)?t[FWe]():t}a(OWe,"getRawContent");var YK=pO;function Rye(){let t=jK();return{name:YK,sendRequest:a(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)Sye(n.body)&&(n.body=OWe(n.body));return t.sendRequest(e,r)},"sendRequest")}}a(Rye,"multipartPolicy");f();function kye(){return RK()}a(kye,"decompressResponsePolicy");f();function Pye(t={}){return PK(t)}a(Pye,"defaultRetryPolicy");f();function Dye(){return DK()}a(Dye,"formDataPolicy");f();function Bye(t,e){return UK(t,e)}a(Bye,"proxyPolicy");f();var QWe="setClientRequestIdPolicy";function Nye(t="x-ms-client-request-id"){return{name:QWe,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}a(Nye,"setClientRequestIdPolicy");f();function Mye(t){return qK(t)}a(Mye,"agentPolicy");f();function Lye(t){return HK(t)}a(Lye,"tlsPolicy");f();f();var UB=nd;function mO(t){return bK(t)}a(mO,"isRestError");var UWe="tracingPolicy";function Fye(t={}){let e=KK(t.userAgentPrefix),r=new IA({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=a7t();return{name:UWe,async sendRequest(o,s){var c;if(!n)return s(o);let l=await e,u={"http.url":r.sanitizeUrl(o.url),"http.method":o.method,"http.user_agent":l,requestId:o.requestId};l&&(u["http.user_agent"]=l);let{span:d,tracingContext:p}=(c=c7t(n,o,u))!==null&&c!==void 0?c:{};if(!d||!p)return s(o);try{let m=await n.withContext(p,s,o);return u7t(d,m),m}catch(m){throw l7t(d,m),m}}}}a(Fye,"tracingPolicy");function a7t(){try{return F6({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:zK})}catch(t){qC.warning(`Error when creating the TracingClient: ${DB(t)}`);return}}a(a7t,"tryCreateTracingClient");function c7t(t,e,r){try{let{span:n,updatedOptions:o}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let s=t.createRequestHeaders(o.tracingOptions.tracingContext);for(let[c,l]of Object.entries(s))e.headers.set(c,l);return{span:n,tracingContext:o.tracingOptions.tracingContext}}catch(n){qC.warning(`Skipping creating a tracing span due to an error: ${DB(n)}`);return}}a(c7t,"tryCreateSpan");function l7t(t,e){try{t.setStatus({status:"error",error:mK(e)?e:void 0}),mO(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){qC.warning(`Skipping tracing span processing due to an error: ${DB(r)}`)}}a(l7t,"tryProcessError");function u7t(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){qC.warning(`Skipping tracing span processing due to an error: ${DB(r)}`)}}a(u7t,"tryProcessResponse");f();f();function JK(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",o),r=!1)}a(n,"cleanup");function o(){e.abort(t.reason),n()}return a(o,"listener"),t.addEventListener("abort",o),{abortSignal:e.signal,cleanup:n}}a(JK,"wrapAbortSignalLike");var d7t="wrapAbortSignalLikePolicy";function qWe(){return{name:d7t,sendRequest:a(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=JK(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}a(qWe,"wrapAbortSignalLikePolicy");function Oye(t){var e;let r=GK();return BB&&(t.agent&&r.addPolicy(Mye(t.agent)),t.tlsOptions&&r.addPolicy(Lye(t.tlsOptions)),r.addPolicy(Bye(t.proxyOptions)),r.addPolicy(kye())),r.addPolicy(qWe()),r.addPolicy(Dye(),{beforePolicies:[YK]}),r.addPolicy(_ye(t.userAgentOptions)),r.addPolicy(Nye((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(Rye(),{afterPhase:"Deserialize"}),r.addPolicy(Pye(t.retryOptions),{phase:"Retry"}),r.addPolicy(Fye(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),BB&&r.addPolicy(wye(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(Tye(t.loggingOptions),{afterPhase:"Sign"}),r}a(Oye,"createPipelineFromOptions");f();function Qye(){let t=wK();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?JK(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}a(Qye,"createDefaultHttpClient");f();function CT(t){return q0(t)}a(CT,"createHttpHeaders");f();function TA(t){return xK(t)}a(TA,"createPipelineRequest");f();f();f();f();var p7t=VI("core-rest-pipeline retryPolicy");function Uye(t,e={maxRetries:3}){return AT(t,Object.assign({logger:p7t},e))}a(Uye,"retryPolicy");f();f();var m7t={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function h7t(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let s=await t();if(s===null)throw new Error("Failed to refresh access token.");return s}}a(n,"tryGetAccessToken");let o=await n();for(;o===null;)await GAe(e),o=await n();return o}a(h7t,"beginRefresh");function qye(t,e){let r=null,n=null,o,s=Object.assign(Object.assign({},m7t),e),c={get isRefreshing(){return r!==null},get shouldRefresh(){var u;return c.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((u=n?.expiresOnTimestamp)!==null&&u!==void 0?u:0)-s.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-s.forcedRefreshWindowInMs<Date.now()}};function l(u,d){var p;return c.isRefreshing||(r=h7t(a(()=>t.getToken(u,d),"tryGetAccessToken"),s.retryIntervalInMs,(p=n?.expiresOnTimestamp)!==null&&p!==void 0?p:Date.now()).then(h=>(r=null,n=h,o=d.tenantId,n)).catch(h=>{throw r=null,n=null,o=void 0,h})),r}return a(l,"refresh"),async(u,d)=>{let p=!!d.claims,m=o!==d.tenantId;return p&&(n=null),m||p||c.mustRefresh?l(u,d):(c.shouldRefresh&&l(u,d),n)}}a(qye,"createTokenCycler");var jWe="bearerTokenAuthenticationPolicy";async function XK(t,e){try{return[await e(t),void 0]}catch(r){if(mO(r)&&r.response)return[r.response,r];throw r}}a(XK,"trySendRequest");async function g7t(t){let{scopes:e,getAccessToken:r,request:n}=t,o={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},s=await r(e,o);s&&t.request.headers.set("Authorization",`Bearer ${s.token}`)}a(g7t,"defaultAuthorizeRequest");function HWe(t){return t.status===401&&t.headers.has("WWW-Authenticate")}a(HWe,"isChallengeResponse");async function WWe(t,e){var r;let{scopes:n}=t,o=await t.getAccessToken(n,{enableCae:!0,claims:e});return o?(t.request.headers.set("Authorization",`${(r=o.tokenType)!==null&&r!==void 0?r:"Bearer"} ${o.token}`),!0):!1}a(WWe,"authorizeRequestOnCaeChallenge");function ZK(t){var e,r,n;let{credential:o,scopes:s,challengeCallbacks:c}=t,l=t.logger||qC,u={authorizeRequest:(r=(e=c?.authorizeRequest)===null||e===void 0?void 0:e.bind(c))!==null&&r!==void 0?r:g7t,authorizeRequestOnChallenge:(n=c?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(c)},d=o?qye(o):()=>Promise.resolve(null);return{name:jWe,async sendRequest(p,m){if(!p.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await u.authorizeRequest({scopes:Array.isArray(s)?s:[s],request:p,getAccessToken:d,logger:l});let h,g,A;if([h,g]=await XK(p,m),HWe(h)){let y=$We(h.headers.get("WWW-Authenticate"));if(y){let v;try{v=atob(y)}catch{return l.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),h}A=await WWe({scopes:Array.isArray(s)?s:[s],response:h,request:p,getAccessToken:d,logger:l},v),A&&([h,g]=await XK(p,m))}else if(u.authorizeRequestOnChallenge&&(A=await u.authorizeRequestOnChallenge({scopes:Array.isArray(s)?s:[s],request:p,response:h,getAccessToken:d,logger:l}),A&&([h,g]=await XK(p,m)),HWe(h)&&(y=$We(h.headers.get("WWW-Authenticate")),y))){let v;try{v=atob(y)}catch{return l.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),h}A=await WWe({scopes:Array.isArray(s)?s:[s],response:h,request:p,getAccessToken:d,logger:l},v),A&&([h,g]=await XK(p,m))}}if(g)throw g;return h}}}a(ZK,"bearerTokenAuthenticationPolicy");function A7t(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],o;for(;(o=e.exec(t))!==null;){let s=o[1],c=o[2],l={},u;for(;(u=r.exec(c))!==null;)l[u[1]]=u[2];n.push({scheme:s,params:l})}return n}a(A7t,"parseChallenges");function $We(t){var e;return t?(e=A7t(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}a($We,"getCaeChallengeClaims");f();f();f();f();f();f();var VWe=Ne(GWe(),1),Hye=VWe.state;function vT(t,e,r){let n=e.parameterPath,o=e.mapper,s;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(o.isConstant)s=o.defaultValue;else{let c=zWe(t,n);!c.propertyFound&&r&&(c=zWe(r,n));let l=!1;c.propertyFound||(l=o.required||n[0]==="options"&&n.length===2),s=l?o.defaultValue:c.propertyValue}}else{o.required&&(s={});for(let c in n){let l=o.type.modelProperties[c],u=n[c],d=vT(t,{parameterPath:u,mapper:l},r);d!==void 0&&(s||(s={}),s[c]=d)}}return s}a(vT,"getOperationArgumentValueFromParameter");function zWe(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let o=e[n];if(t&&o in t)t=t[o];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}a(zWe,"getPropertyFromParameterPath");var KWe=Symbol.for("@azure/core-client original request");function y7t(t){return KWe in t}a(y7t,"hasOriginalRequest");function vx(t){if(y7t(t))return vx(t[KWe]);let e=Hye.operationRequestMap.get(t);return e||(e={},Hye.operationRequestMap.set(t,e)),e}a(vx,"getOperationRequestInfo");var C7t=["application/json","text/json"],v7t=["application/xml","application/atom+xml"],YWe="deserializationPolicy";function Wye(t={}){var e,r,n,o,s,c,l;let u=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:C7t,d=(o=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&o!==void 0?o:v7t,p=t.parseXML,m=t.serializerOptions,h={xml:{rootName:(s=m?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(c=m?.xml.includeRoot)!==null&&c!==void 0?c:!1,xmlCharKey:(l=m?.xml.xmlCharKey)!==null&&l!==void 0?l:"_"}};return{name:YWe,async sendRequest(g,A){let y=await A(g);return b7t(u,d,y,h,p)}}}a(Wye,"deserializationPolicy");function x7t(t){let e,r=t.request,n=vx(r),o=n?.operationSpec;return o&&(n?.operationResponseGetter?e=n?.operationResponseGetter(o,t):e=o.responses[t.status]),e}a(x7t,"getOperationResponseMap");function E7t(t){let e=t.request,r=vx(e),n=r?.shouldDeserialize,o;return n===void 0?o=!0:typeof n=="boolean"?o=n:o=n(t),o}a(E7t,"shouldDeserializeResponse");async function b7t(t,e,r,n,o){let s=await w7t(t,e,r,n,o);if(!E7t(s))return s;let c=vx(s.request),l=c?.operationSpec;if(!l||!l.responses)return s;let u=x7t(s),{error:d,shouldReturnResponse:p}=T7t(s,l,u,n);if(d)throw d;if(p)return s;if(u){if(u.bodyMapper){let m=s.parsedBody;l.isXML&&u.bodyMapper.type.name===LC.Sequence&&(m=typeof m=="object"?m[u.bodyMapper.xmlElementName]:[]);try{s.parsedBody=l.serializer.deserialize(u.bodyMapper,m,"operationRes.parsedBody",n)}catch(h){throw new UB(`Error ${h} occurred in deserializing the responseBody - ${s.bodyAsText}`,{statusCode:s.status,request:s.request,response:s})}}else l.httpMethod==="HEAD"&&(s.parsedBody=r.status>=200&&r.status<300);u.headersMapper&&(s.parsedHeaders=l.serializer.deserialize(u.headersMapper,s.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return s}a(b7t,"deserializeResponseBody");function I7t(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}a(I7t,"isOperationSpecEmpty");function T7t(t,e,r,n){var o;let s=200<=t.status&&t.status<300;if(I7t(e)?s:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let l=r??e.responses.default,u=!((o=t.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,d=new UB(u,{statusCode:t.status,request:t.request,response:t});if(!l)throw d;let p=l.bodyMapper,m=l.headersMapper;try{if(t.parsedBody){let h=t.parsedBody,g;if(p){let y=h;if(e.isXML&&p.type.name===LC.Sequence){y=[];let v=p.xmlElementName;typeof h=="object"&&v&&(y=h[v])}g=e.serializer.deserialize(p,y,"error.response.parsedBody",n)}let A=h.error||g||h;d.code=A.code,A.message&&(d.message=A.message),p&&(d.response.parsedBody=g)}t.headers&&m&&(d.response.parsedHeaders=e.serializer.deserialize(m,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(h){d.message=`Error "${h.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:d,shouldReturnResponse:!1}}a(T7t,"handleErrorResponse");async function w7t(t,e,r,n,o){var s;if(!(!((s=r.request.streamResponseStatusCodes)===null||s===void 0)&&s.has(r.status))&&r.bodyAsText){let c=r.bodyAsText,l=r.headers.get("Content-Type")||"",u=l?l.split(";").map(d=>d.toLowerCase()):[];try{if(u.length===0||u.some(d=>t.indexOf(d)!==-1))return r.parsedBody=JSON.parse(c),r;if(u.some(d=>e.indexOf(d)!==-1)){if(!o)throw new Error("Parsing XML not supported.");let d=await o(c,n.xml);return r.parsedBody=d,r}}catch(d){let p=`Error "${d}" occurred while parsing the response body - ${r.bodyAsText}.`,m=d.code||UB.PARSE_ERROR;throw new UB(p,{code:m,statusCode:r.status,request:r.request,response:r})}}return r}a(w7t,"parse");f();f();function JWe(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===LC.Stream&&e.add(Number(r))}return e}a(JWe,"getStreamingResponseStatusCodes");function HC(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}a(HC,"getPathStringFromParameter");var XWe="serializationPolicy";function $ye(t={}){let e=t.stringifyXML;return{name:XWe,async sendRequest(r,n){let o=vx(r),s=o?.operationSpec,c=o?.operationArguments;return s&&c&&(_7t(r,c,s),S7t(r,c,s,e)),n(r)}}}a($ye,"serializationPolicy");function _7t(t,e,r){var n,o;if(r.headerParameters)for(let c of r.headerParameters){let l=vT(e,c);if(l!=null||c.mapper.required){l=r.serializer.serialize(c.mapper,l,HC(c));let u=c.mapper.headerCollectionPrefix;if(u)for(let d of Object.keys(l))t.headers.set(u+d,l[d]);else t.headers.set(c.mapper.serializedName||HC(c),l)}}let s=(o=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||o===void 0?void 0:o.customHeaders;if(s)for(let c of Object.keys(s))t.headers.set(c,s[c])}a(_7t,"serializeHeaders");function S7t(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var o,s,c,l,u;let d=(o=e.options)===null||o===void 0?void 0:o.serializerOptions,p={xml:{rootName:(s=d?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(c=d?.xml.includeRoot)!==null&&c!==void 0?c:!1,xmlCharKey:(l=d?.xml.xmlCharKey)!==null&&l!==void 0?l:"_"}},m=p.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=vT(e,r.requestBody);let h=r.requestBody.mapper,{required:g,serializedName:A,xmlName:y,xmlElementName:v,xmlNamespace:b,xmlNamespacePrefix:I,nullable:_}=h,k=h.type.name;try{if(t.body!==void 0&&t.body!==null||_&&t.body===null||g){let N=HC(r.requestBody);t.body=r.serializer.serialize(h,t.body,N,p);let F=k===LC.Stream;if(r.isXML){let O=I?`xmlns:${I}`:"xmlns",Y=R7t(b,O,k,t.body,p);k===LC.Sequence?t.body=n(k7t(Y,v||y||A,O,b),{rootName:y||A,xmlCharKey:m}):F||(t.body=n(Y,{rootName:y||A,xmlCharKey:m}))}else{if(k===LC.String&&(!((u=r.contentType)===null||u===void 0)&&u.match("text/plain")||r.mediaType==="text"))return;F||(t.body=JSON.stringify(t.body))}}}catch(N){throw new Error(`Error "${N.message}" occurred in serializing the payload - ${JSON.stringify(A,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let h of r.formDataParameters){let g=vT(e,h);if(g!=null){let A=h.mapper.serializedName||HC(h);t.formData[A]=r.serializer.serialize(h.mapper,g,HC(h),p)}}}}a(S7t,"serializeRequestBody");function R7t(t,e,r,n,o){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let s={};return s[o.xml.xmlCharKey]=n,s["$"]={[e]:t},s}return n}a(R7t,"getXmlValueWithNamespace");function k7t(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let o={[e]:t};return o["$"]={[r]:n},o}a(k7t,"prepareXMLRootList");function jye(t={}){let e=Oye(t??{});return t.credentialOptions&&e.addPolicy(ZK({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy($ye(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(Wye(t.deserializationOptions),{phase:"Deserialize"}),e}a(jye,"createClientPipeline");f();var Gye;function ZWe(){return Gye||(Gye=Qye()),Gye}a(ZWe,"getCachedDefaultHttpClient");f();var P7t={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function t$e(t,e,r,n){let o=D7t(e,r,n),s=!1,c=e$e(t,o);if(e.path){let d=e$e(e.path,o);e.path==="/{nextLink}"&&d.startsWith("/")&&(d=d.substring(1)),B7t(d)?(c=d,s=!0):c=N7t(c,d)}let{queryParams:l,sequenceParams:u}=M7t(e,r,n);return c=F7t(c,l,u,s),c}a(t$e,"getRequestUrl");function e$e(t,e){let r=t;for(let[n,o]of e)r=r.split(n).join(o);return r}a(e$e,"replaceAll");function D7t(t,e,r){var n;let o=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let s of t.urlParameters){let c=vT(e,s,r),l=HC(s);c=t.serializer.serialize(s.mapper,c,l),s.skipEncoding||(c=encodeURIComponent(c)),o.set(`{${s.mapper.serializedName||l}}`,c)}return o}a(D7t,"calculateUrlReplacements");function B7t(t){return t.includes("://")}a(B7t,"isAbsoluteUrl");function N7t(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let o=e.indexOf("?");if(o!==-1){let s=e.substring(0,o),c=e.substring(o+1);n=n+s,c&&(r.search=r.search?`${r.search}&${c}`:c)}else n=n+e;return r.pathname=n,r.toString()}a(N7t,"appendPath");function M7t(t,e,r){var n;let o=new Map,s=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let c of t.queryParameters){c.mapper.type.name==="Sequence"&&c.mapper.serializedName&&s.add(c.mapper.serializedName);let l=vT(e,c,r);if(l!=null||c.mapper.required){l=t.serializer.serialize(c.mapper,l,HC(c));let u=c.collectionFormat?P7t[c.collectionFormat]:"";if(Array.isArray(l)&&(l=l.map(d=>d??"")),c.collectionFormat==="Multi"&&l.length===0)continue;Array.isArray(l)&&(c.collectionFormat==="SSV"||c.collectionFormat==="TSV")&&(l=l.join(u)),c.skipEncoding||(Array.isArray(l)?l=l.map(d=>encodeURIComponent(d)):l=encodeURIComponent(l)),Array.isArray(l)&&(c.collectionFormat==="CSV"||c.collectionFormat==="Pipes")&&(l=l.join(u)),o.set(c.mapper.serializedName||HC(c),l)}}return{queryParams:o,sequenceParams:s}}a(M7t,"calculateQueryParameters");function L7t(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[o,s]=n.split("=",2),c=e.get(o);c?Array.isArray(c)?c.push(s):e.set(o,[c,s]):e.set(o,s)}return e}a(L7t,"simpleParseQueryParams");function F7t(t,e,r,n=!1){if(e.size===0)return t;let o=new URL(t),s=L7t(o.search);for(let[l,u]of e){let d=s.get(l);if(Array.isArray(d))if(Array.isArray(u)){d.push(...u);let p=new Set(d);s.set(l,Array.from(p))}else d.push(u);else d?(Array.isArray(u)?u.unshift(d):r.has(l)&&s.set(l,[d,u]),n||s.set(l,u)):s.set(l,u)}let c=[];for(let[l,u]of s)if(typeof u=="string")c.push(`${l}=${u}`);else if(Array.isArray(u))for(let d of u)c.push(`${l}=${d}`);else c.push(`${l}=${u}`);return o.search=c.length?`?${c.join("&")}`:"",o.toString()}a(F7t,"appendQueryParams");f();var Vye=VI("core-client");var hO=class{static{a(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&Vye.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||ZWe(),this.pipeline=e.pipeline||O7t(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:o,position:s}of e.additionalPolicies){let c=s==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(o,{afterPhase:c})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let o=t$e(n,r,e,this),s=TA({url:o});s.method=r.httpMethod;let c=vx(s);c.operationSpec=r,c.operationArguments=e;let l=r.contentType||this._requestContentType;l&&r.requestBody&&s.headers.set("Content-Type",l);let u=e.options;if(u){let d=u.requestOptions;d&&(d.timeout&&(s.timeout=d.timeout),d.onUploadProgress&&(s.onUploadProgress=d.onUploadProgress),d.onDownloadProgress&&(s.onDownloadProgress=d.onDownloadProgress),d.shouldDeserialize!==void 0&&(c.shouldDeserialize=d.shouldDeserialize),d.allowInsecureConnection&&(s.allowInsecureConnection=!0)),u.abortSignal&&(s.abortSignal=u.abortSignal),u.tracingOptions&&(s.tracingOptions=u.tracingOptions)}this._allowInsecureConnection&&(s.allowInsecureConnection=!0),s.streamResponseStatusCodes===void 0&&(s.streamResponseStatusCodes=JWe(r));try{let d=await this.sendRequest(s),p=YAe(d,r.responses[d.status]);return u?.onResponse&&u.onResponse(d,p),p}catch(d){if(typeof d=="object"&&d?.response){let p=d.response,m=YAe(p,r.responses[d.statusCode]||r.responses.default);d.details=m,u?.onResponse&&u.onResponse(p,m,d)}throw d}}};function O7t(t){let e=Q7t(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return jye(Object.assign(Object.assign({},t),{credentialOptions:r}))}a(O7t,"createDefaultPipeline");function Q7t(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}a(Q7t,"getCredentialScopes");f();f();f();function r$e(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}a(r$e,"getIdentityTokenEndpointSuffix");f();var n$e="/.default",i$e="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function gO(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(n$e)?e.substr(0,e.lastIndexOf(n$e)):e}a(gO,"mapScopesToResource");function o$e(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}a(o$e,"parseExpirationTimestamp");function s$e(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}a(s$e,"parseRefreshTimestamp");var AO="noCorrelationId";function U7t(t){let e=t?.authorityHost;return hK&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??N6}a(U7t,"getIdentityClientAuthorityHost");var xT=class extends hO{static{a(this,"IdentityClient")}authorityHost;allowLoggingAccountIdentifiers;abortControllers;allowInsecureConnection=!1;tokenCredentialOptions;constructor(e){let r=`azsdk-js-identity/${SV}`,n=e?.userAgentOptions?.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${r}`:`${r}`,o=U7t(e);if(!o.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3},...e,userAgentOptions:{userAgentPrefix:n},baseUri:o}),this.authorityHost=o,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=e?.loggingOptions?.allowLoggingAccountIdentifiers,this.tokenCredentialOptions={...e},e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){N0.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let o={accessToken:{token:n.access_token,expiresOnTimestamp:o$e(n),refreshAfterTimestamp:s$e(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return N0.info(`IdentityClient: [${e.url}] token acquired, expires on ${o.accessToken.expiresOnTimestamp}`),o}else{let n=new GI(r.status,r.bodyAsText);throw N0.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,o,s,c={}){if(o===void 0)return null;N0.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let l={grant_type:"refresh_token",client_id:r,refresh_token:o,scope:n};s!==void 0&&(l.client_secret=s);let u=new URLSearchParams(l);return os.withSpan("IdentityClient.refreshAccessToken",c,async d=>{try{let p=r$e(e),m=TA({url:`${this.authorityHost}/${e}/${p}`,method:"POST",body:u.toString(),abortSignal:c.abortSignal,headers:CT({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:d.tracingOptions}),h=await this.sendTokenRequest(m);return N0.info(`IdentityClient: refreshed token for client ID: ${r}`),h}catch(p){if(p.name===kV&&p.errorResponse.error==="interaction_required")return N0.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw N0.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${p}`),p}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let o=r.signal.onabort;return r.signal.onabort=(...s)=>{this.abortControllers.set(e,void 0),o&&o.apply(r.signal,s)},r.signal}abortRequests(e){let r=e||AO,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(AO)||[]];if(n.length){for(let o of n)o.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){let r=e?.body?.split("&").map(n=>n.split("=")).find(([n])=>n==="client-request-id");return r&&r.length&&r[1]||AO}async sendGetRequestAsync(e,r){let n=TA({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:CT(r?.headers),abortSignal:this.generateAbortSignal(AO)}),o=await this.sendRequest(n);return this.logIdentifiers(o),{body:o.bodyAsText?JSON.parse(o.bodyAsText):void 0,headers:o.headers.toJSON(),status:o.status}}async sendPostRequestAsync(e,r){let n=TA({url:e,method:"POST",body:r?.body,headers:CT(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),o=await this.sendRequest(n);return this.logIdentifiers(o),{body:o.bodyAsText?JSON.parse(o.bodyAsText):void 0,headers:o.headers.toJSON(),status:o.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let o=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!o)return;let s=o.split(".")[1],{appid:c,upn:l,tid:u,oid:d}=JSON.parse(Buffer.from(s,"base64").toString("utf8"));N0.info(`[Authenticated account] Client ID: ${c}. Tenant ID: ${u}. User Principal Name: ${l||r}. Object ID (user): ${d}`)}catch(n){N0.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};f();var zye;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(zye||(zye={}));function tY(t){let e=t;return e===void 0&&globalThis.process?.env?.AZURE_REGIONAL_AUTHORITY_NAME!==void 0&&(e=process.env.AZURE_REGIONAL_AUTHORITY_NAME),e===zye.AutoDiscoverRegion?"AUTO_DISCOVER":e}a(tY,"calculateRegionalAuthority");f();f();function q7t(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}a(q7t,"createConfigurationErrorMessage");function tc(t,e,r=[],n){let o;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?o=t:o=e?.tenantId??t,t&&o!==t&&!r.includes("*")&&!r.some(s=>s.localeCompare(o)===0)){let s=q7t(o);throw n?.info(s),new Wr(s)}return o}a(tc,"processMultiTenantRequest");function pu(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(bo("",r)),r}}a(pu,"checkTenantId");function qB(t,e,r){return e?(pu(t,e),e):(r||(r=v2),r!==v2?"common":"organizations")}a(qB,"resolveTenantId");function mc(t){return!t||t.length===0?[]:t.includes("*")?mOe:t}a(mc,"resolveAdditionallyAllowedTenantIds");var Sf=ii("MsalClient");function nQt(t,e,r={}){let n=qB(r.logger??Sf,e,t),o=zAe(n,VAe(r)),s=new xT({...r.tokenCredentialOptions,authorityHost:o,loggingOptions:r.loggingOptions});return{auth:{clientId:t,authority:o,knownAuthorities:xHe(n,o,r.disableInstanceDiscovery)},system:{networkClient:s,loggerOptions:{loggerCallback:gK(r.logger??Sf),logLevel:AK(MV()),piiLoggingEnabled:r.loggingOptions?.enableUnsafeSupportLogging}}}}a(nQt,"generateMsalConfiguration");function Hd(t,e,r={}){let n={msalConfig:nQt(t,e,r),cachedAccount:r.authenticationRecord?EHe(r.authenticationRecord):null,pluginConfiguration:vOe.generatePluginConfiguration(r),logger:r.logger??Sf},o=new Map;async function s(O={}){let Y=O.enableCae?"CAE":"default",z=o.get(Y);if(z)return n.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),z;n.logger.getToken.info(`Creating new PublicClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let V=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,z=new wB({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await V}}),o.set(Y,z),z}a(s,"getPublicApp");let c=new Map;async function l(O={}){let Y=O.enableCae?"CAE":"default",z=c.get(Y);if(z)return n.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),z;n.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let V=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,z=new SB({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await V}}),c.set(Y,z),z}a(l,"getConfidentialApp");async function u(O,Y,z={}){if(n.cachedAccount===null)throw n.logger.getToken.info("No cached account found in local state."),new ih({scopes:Y});z.claims&&(n.cachedClaims=z.claims);let V={account:n.cachedAccount,scopes:Y,claims:n.cachedClaims};n.pluginConfiguration.broker.isEnabled&&(V.tokenQueryParameters||={},n.pluginConfiguration.broker.enableMsaPassthrough&&(V.tokenQueryParameters.msal_request_type="consumer_passthrough")),z.proofOfPossessionOptions&&(V.shrNonce=z.proofOfPossessionOptions.nonce,V.authenticationScheme="pop",V.resourceRequestMethod=z.proofOfPossessionOptions.resourceRequestMethod,V.resourceRequestUri=z.proofOfPossessionOptions.resourceRequestUrl),n.logger.getToken.info("Attempting to acquire token silently");try{return await O.acquireTokenSilent(V)}catch(U){throw hR(Y,U,z)}}a(u,"getTokenSilent");function d(O){return O?.tenantId?zAe(O.tenantId,VAe(r)):n.msalConfig.auth.authority}a(d,"calculateRequestAuthority");async function p(O,Y,z,V){let U=null;try{U=await u(O,Y,z)}catch(H){if(H.name!=="AuthenticationRequiredError")throw H;if(z.disableAutomaticAuthentication)throw new ih({scopes:Y,getTokenOptions:z,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(U===null)try{U=await V()}catch(H){throw hR(Y,H,z)}return mR(Y,U,z),n.cachedAccount=U?.account??null,n.logger.getToken.info(Ll(Y)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}a(p,"withSilentAuthentication");async function m(O,Y,z={}){n.logger.getToken.info("Attempting to acquire token using client secret"),n.msalConfig.auth.clientSecret=Y;let V=await l(z);try{let U=await V.acquireTokenByClientCredential({scopes:O,authority:d(z),azureRegion:tY(),claims:z?.claims});return mR(O,U,z),n.logger.getToken.info(Ll(O)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}catch(U){throw hR(O,U,z)}}a(m,"getTokenByClientSecret");async function h(O,Y,z={}){n.logger.getToken.info("Attempting to acquire token using client assertion"),n.msalConfig.auth.clientAssertion=Y;let V=await l(z);try{let U=await V.acquireTokenByClientCredential({scopes:O,authority:d(z),azureRegion:tY(),claims:z?.claims,clientAssertion:Y});return mR(O,U,z),n.logger.getToken.info(Ll(O)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}catch(U){throw hR(O,U,z)}}a(h,"getTokenByClientAssertion");async function g(O,Y,z={}){n.logger.getToken.info("Attempting to acquire token using client certificate"),n.msalConfig.auth.clientCertificate=Y;let V=await l(z);try{let U=await V.acquireTokenByClientCredential({scopes:O,authority:d(z),azureRegion:tY(),claims:z?.claims});return mR(O,U,z),n.logger.getToken.info(Ll(O)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}catch(U){throw hR(O,U,z)}}a(g,"getTokenByClientCertificate");async function A(O,Y,z={}){n.logger.getToken.info("Attempting to acquire token using device code");let V=await s(z);return p(V,O,z,()=>{let U={scopes:O,cancel:z?.abortSignal?.aborted??!1,deviceCodeCallback:Y,authority:d(z),claims:z?.claims},H=V.acquireTokenByDeviceCode(U);return z.abortSignal&&z.abortSignal.addEventListener("abort",()=>{U.cancel=!0}),H})}a(A,"getTokenByDeviceCode");async function y(O,Y,z,V={}){n.logger.getToken.info("Attempting to acquire token using username and password");let U=await s(V);return p(U,O,V,()=>{let H={scopes:O,username:Y,password:z,authority:d(V),claims:V?.claims};return U.acquireTokenByUsernamePassword(H)})}a(y,"getTokenByUsernamePassword");function v(){if(n.cachedAccount)return bHe(t,n.cachedAccount)}a(v,"getActiveAccount");async function b(O,Y,z,V,U={}){n.logger.getToken.info("Attempting to acquire token using authorization code");let H;return V?(n.msalConfig.auth.clientSecret=V,H=await l(U)):H=await s(U),p(H,O,U,()=>H.acquireTokenByCode({scopes:O,redirectUri:Y,code:z,authority:d(U),claims:U?.claims}))}a(b,"getTokenByAuthorizationCode");async function I(O,Y,z,V={}){Sf.getToken.info("Attempting to acquire token on behalf of another user"),typeof z=="string"?(Sf.getToken.info("Using client secret for on behalf of flow"),n.msalConfig.auth.clientSecret=z):typeof z=="function"?(Sf.getToken.info("Using client assertion callback for on behalf of flow"),n.msalConfig.auth.clientAssertion=z):(Sf.getToken.info("Using client certificate for on behalf of flow"),n.msalConfig.auth.clientCertificate=z);let U=await l(V);try{let H=await U.acquireTokenOnBehalfOf({scopes:O,authority:d(V),claims:V.claims,oboAssertion:Y});return mR(O,H,V),Sf.getToken.info(Ll(O)),{token:H.accessToken,expiresOnTimestamp:H.expiresOn.getTime(),refreshAfterTimestamp:H.refreshOn?.getTime(),tokenType:H.tokenType}}catch(H){throw hR(O,H,V)}}a(I,"getTokenOnBehalfOf");function _(O,Y){return{openBrowser:a(async z=>{await(await Promise.resolve().then(()=>(sY(),M$e))).default(z,{newInstance:!0})},"openBrowser"),scopes:O,authority:d(Y),claims:Y?.claims,loginHint:Y?.loginHint,errorTemplate:Y?.browserCustomizationOptions?.errorMessage,successTemplate:Y?.browserCustomizationOptions?.successMessage,prompt:Y?.loginHint?"login":"select_account"}}a(_,"createBaseInteractiveRequest");async function k(O,Y,z={}){Sf.verbose("Authentication will resume through the broker");let V=await s(z),U=_(O,z);n.pluginConfiguration.broker.parentWindowHandle?U.windowHandle=Buffer.from(n.pluginConfiguration.broker.parentWindowHandle):Sf.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),n.pluginConfiguration.broker.enableMsaPassthrough&&((U.tokenQueryParameters??={}).msal_request_type="consumer_passthrough"),Y?(U.prompt="none",Sf.verbose("Attempting broker authentication using the default broker account")):Sf.verbose("Attempting broker authentication without the default broker account"),z.proofOfPossessionOptions&&(U.shrNonce=z.proofOfPossessionOptions.nonce,U.authenticationScheme="pop",U.resourceRequestMethod=z.proofOfPossessionOptions.resourceRequestMethod,U.resourceRequestUri=z.proofOfPossessionOptions.resourceRequestUrl);try{return await V.acquireTokenInteractive(U)}catch(H){if(Sf.verbose(`Failed to authenticate through the broker: ${H.message}`),z.disableAutomaticAuthentication)throw new ih({scopes:O,getTokenOptions:z,message:"Cannot silently authenticate with default broker account."});if(Y)return k(O,!1,z);throw H}}a(k,"getBrokeredTokenInternal");async function N(O,Y,z={}){Sf.getToken.info(`Attempting to acquire token using brokered authentication with useDefaultBrokerAccount: ${Y}`);let V=await k(O,Y,z);return mR(O,V,z),n.cachedAccount=V?.account??null,n.logger.getToken.info(Ll(O)),{token:V.accessToken,expiresOnTimestamp:V.expiresOn.getTime(),refreshAfterTimestamp:V.refreshOn?.getTime(),tokenType:V.tokenType}}a(N,"getBrokeredToken");async function F(O,Y={}){Sf.getToken.info("Attempting to acquire token interactively");let z=await s(Y);return p(z,O,Y,async()=>{let V=_(O,Y);return n.pluginConfiguration.broker.isEnabled?k(O,n.pluginConfiguration.broker.useDefaultBrokerAccount??!1,Y):(Y.proofOfPossessionOptions&&(V.shrNonce=Y.proofOfPossessionOptions.nonce,V.authenticationScheme="pop",V.resourceRequestMethod=Y.proofOfPossessionOptions.resourceRequestMethod,V.resourceRequestUri=Y.proofOfPossessionOptions.resourceRequestUrl),z.acquireTokenInteractive(V))})}return a(F,"getTokenByInteractiveRequest"),{getActiveAccount:v,getBrokeredToken:N,getTokenByClientSecret:m,getTokenByClientAssertion:h,getTokenByClientCertificate:g,getTokenByDeviceCode:A,getTokenByUsernamePassword:y,getTokenByAuthorizationCode:b,getTokenOnBehalfOf:I,getTokenByInteractiveRequest:F}}a(Hd,"createMsalClient");var EO=require("node:crypto");var F$e=require("node:fs/promises");var xO="ClientCertificateCredential",L$e=ii(xO),bO=class{static{a(this,"ClientCertificateCredential")}tenantId;additionallyAllowedTenantIds;certificateConfiguration;sendCertificateChain;msalClient;constructor(e,r,n,o={}){if(!e||!r)throw new Error(`${xO}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=mc(o?.additionallyAllowedTenants),this.sendCertificateChain=o.sendCertificateChain,this.certificateConfiguration={...typeof n=="string"?{certificatePath:n}:n};let s=this.certificateConfiguration.certificate,c=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(s||c))throw new Error(`${xO}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(s&&c)throw new Error(`${xO}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=Hd(r,e,{...o,logger:L$e,tokenCredentialOptions:o})}async getToken(e,r={}){return os.withSpan(`${xO}.getToken`,r,async n=>{n.tenantId=tc(this.tenantId,n,this.additionallyAllowedTenantIds,L$e);let o=Array.isArray(e)?e:[e],s=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(o,s,n)})}async buildClientCertificate(){let e=await iQt(this.certificateConfiguration,this.sendCertificateChain??!1),r;return this.certificateConfiguration.certificatePassword!==void 0?r=(0,EO.createPrivateKey)({key:e.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():r=e.certificateContents,{thumbprint:e.thumbprint,thumbprintSha256:e.thumbprintSha256,privateKey:r,x5c:e.x5c}}};async function iQt(t,e){let r=t.certificate,n=t.certificatePath,o=r||await(0,F$e.readFile)(n,"utf8"),s=e?o:void 0,c=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,l=[],u;do u=c.exec(o),u&&l.push(u[3]);while(u);if(l.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let d=(0,EO.createHash)("sha1").update(Buffer.from(l[0],"base64")).digest("hex").toUpperCase(),p=(0,EO.createHash)("sha256").update(Buffer.from(l[0],"base64")).digest("hex").toUpperCase();return{certificateContents:o,thumbprintSha256:p,thumbprint:d,x5c:s}}a(iQt,"parseCertificate");f();f();function mh(t){return Array.isArray(t)?t:[t]}a(mh,"ensureScopes");function $B(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(bo(t,r)),r}}a($B,"ensureValidScopeForDevTimeCreds");function aY(t){return t.replace(/\/.default$/,"")}a(aY,"getScopeResource");var O$e=ii("ClientSecretCredential"),IO=class{static{a(this,"ClientSecretCredential")}tenantId;additionallyAllowedTenantIds;msalClient;clientSecret;constructor(e,r,n,o={}){if(!e)throw new Wr("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new Wr("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new Wr("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=mc(o?.additionallyAllowedTenants),this.msalClient=Hd(r,e,{...o,logger:O$e,tokenCredentialOptions:o})}async getToken(e,r={}){return os.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=tc(this.tenantId,n,this.additionallyAllowedTenantIds,O$e);let o=mh(e);return this.msalClient.getTokenByClientSecret(o,this.clientSecret,n)})}};f();var oQt=ii("UsernamePasswordCredential"),TO=class{static{a(this,"UsernamePasswordCredential")}tenantId;additionallyAllowedTenantIds;msalClient;username;password;constructor(e,r,n,o,s={}){if(!e)throw new Wr("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new Wr("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new Wr("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!o)throw new Wr("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=mc(s?.additionallyAllowedTenants),this.username=n,this.password=o,this.msalClient=Hd(r,this.tenantId,{...s,tokenCredentialOptions:s??{}})}async getToken(e,r={}){return os.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=tc(this.tenantId,n,this.additionallyAllowedTenantIds,oQt);let o=mh(e);return this.msalClient.getTokenByUsernamePassword(o,this.username,this.password,n)})}};var sQt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function aQt(){return(process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS??"").split(";")}a(aQt,"getAdditionallyAllowedTenants");var cY="EnvironmentCredential",xx=ii(cY);function cQt(){let t=(process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN??"").toLowerCase(),e=t==="true"||t==="1";return xx.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${e}`),e}a(cQt,"getSendCertificateChain");var wO=class{static{a(this,"EnvironmentCredential")}_credential=void 0;constructor(e){let r=LV(sQt).assigned.join(", ");xx.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,o=process.env.AZURE_CLIENT_ID,s=process.env.AZURE_CLIENT_SECRET,c=aQt(),l=cQt(),u={...e,additionallyAllowedTenantIds:c,sendCertificateChain:l};if(n&&pu(xx,n),n&&o&&s){xx.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${o} and clientSecret: [REDACTED]`),this._credential=new IO(n,o,s,u);return}let d=process.env.AZURE_CLIENT_CERTIFICATE_PATH,p=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&o&&d){xx.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${o} and certificatePath: ${d}`),this._credential=new bO(n,o,{certificatePath:d,certificatePassword:p},u);return}let m=process.env.AZURE_USERNAME,h=process.env.AZURE_PASSWORD;n&&o&&m&&h&&(xx.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${o} and username: ${m}`),xx.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new TO(n,o,m,h,u))}async getToken(e,r={}){return os.withSpan(`${cY}.getToken`,r,async n=>{if(this._credential)try{let o=await this._credential.getToken(e,n);return xx.getToken.info(Ll(e)),o}catch(o){let s=new GI(400,{error:`${cY} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:o.message.toString().split("More details:").join("")});throw xx.getToken.info(bo(e,s)),s}throw new Wr(`${cY} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};f();f();var lQt=1e3*64,uQt=3e3;function Q$e(t){return Uye([{name:"imdsRetryPolicy",retry:a(({retryCount:e,response:r})=>{if(r?.status!==404&&r?.status!==410)return{skipStrategy:!0};let n=r?.status===410?Math.max(uQt,t.startDelayInMs):t.startDelayInMs;return CHe(e,{retryDelayInMs:n,maxRetryDelayInMs:lQt})},"retry")}],{maxRetries:t.maxRetries})}a(Q$e,"imdsRetryPolicy");f();var Ex="ManagedIdentityCredential - IMDS",AR=ii(Ex),dQt="http://169.254.169.254",fQt="/metadata/identity/oauth2/token";function pQt(t){if(!gO(t))throw new Error(`${Ex}: Multiple scopes are not supported.`);let r=new URL(fQt,process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST??dQt),n={Accept:"application/json"};return{url:`${r}`,method:"GET",headers:CT(n)}}a(pQt,"prepareInvalidRequestOptions");var U$e={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,o=gO(e);if(!o)return AR.info(`${Ex}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let s=pQt(o);return os.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async c=>{s.tracingOptions=c.tracingOptions;let l=TA(s);l.timeout=c.requestOptions?.timeout||1e3,l.allowInsecureConnection=!0;let u;try{AR.info(`${Ex}: Pinging the Azure IMDS endpoint`),u=await r.sendRequest(l)}catch(d){return mK(d)&&AR.verbose(`${Ex}: Caught error ${d.name}: ${d.message}`),AR.info(`${Ex}: The Azure IMDS endpoint is unavailable`),!1}return u.status===403&&u.bodyAsText?.includes("unreachable")?(AR.info(`${Ex}: The Azure IMDS endpoint is unavailable`),AR.info(`${Ex}: ${u.bodyAsText}`),!1):(AR.info(`${Ex}: The Azure IMDS endpoint is available`),!0)})}};f();f();f();var q$e=ii("ClientAssertionCredential"),jB=class{static{a(this,"ClientAssertionCredential")}msalClient;tenantId;additionallyAllowedTenantIds;getAssertion;options;constructor(e,r,n,o={}){if(!e)throw new Wr("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new Wr("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new Wr("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=mc(o?.additionallyAllowedTenants),this.options=o,this.getAssertion=n,this.msalClient=Hd(r,e,{...o,logger:q$e,tokenCredentialOptions:this.options})}async getToken(e,r={}){return os.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=tc(this.tenantId,n,this.additionallyAllowedTenantIds,q$e);let o=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(o,this.getAssertion,n)})}};var H$e=require("node:fs/promises");var yR="WorkloadIdentityCredential",mQt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],_O=ii(yR),bx=class{static{a(this,"WorkloadIdentityCredential")}client;azureFederatedTokenFileContent=void 0;cacheDate=void 0;federatedTokenFilePath;constructor(e){let r=LV(mQt).assigned.join(", ");_O.info(`Found the following environment variables: ${r}`);let n=e??{},o=n.tenantId||process.env.AZURE_TENANT_ID,s=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,o&&pu(_O,o),!s)throw new Wr(`${yR}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!o)throw new Wr(`${yR}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new Wr(`${yR}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);_O.info(`Invoking ClientAssertionCredential with tenant ID: ${o}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new jB(o,s,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${yR}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw _O.info(n),new Wr(n)}return _O.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new Wr(`${yR}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,H$e.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new Wr(`${yR}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var W$e="ManagedIdentityCredential - Token Exchange",hQt=ii(W$e),mCe={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||hQt.info(`${W$e}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,o={};return new bx({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE,...o,disableInstanceDiscovery:!0}).getToken(r,e)}};var $0=ii("ManagedIdentityCredential"),TT=class{static{a(this,"ManagedIdentityCredential")}managedIdentityApp;identityClient;clientId;resourceId;objectId;msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};isAvailableIdentityClient;constructor(e,r){let n;typeof e=="string"?(this.clientId=e,n=r??{}):(this.clientId=e?.clientId,n=e??{}),this.resourceId=n?.resourceId,this.objectId=n?.objectId;let o=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(c=>c.value);if(o.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);n.allowInsecureConnection=!0,n.retryOptions?.maxRetries!==void 0&&(this.msiRetryConfig.maxRetries=n.retryOptions.maxRetries),this.identityClient=new xT({...n,additionalPolicies:[{policy:Q$e(this.msiRetryConfig),position:"perCall"}]}),this.managedIdentityApp=new RB({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:AK(MV()),piiLoggingEnabled:n.loggingOptions?.enableUnsafeSupportLogging,loggerCallback:gK($0)}}}),this.isAvailableIdentityClient=new xT({...n,retryOptions:{maxRetries:0}});let s=this.managedIdentityApp.getManagedIdentitySource();if(s==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw $0.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Wr("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(s==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw $0.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Wr(`ManagedIdentityCredential: ${i$e}`);if($0.info(`Using ${s} managed identity.`),o.length===1){let{key:c,value:l}=o[0];$0.info(`${s} with ${c}: ${l}`)}}async getToken(e,r={}){$0.getToken.info("Using the MSAL provider for Managed Identity.");let n=gO(e);if(!n)throw new Wr(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return os.withSpan("ManagedIdentityCredential.getToken",r,async()=>{try{let o=await mCe.isAvailable(this.clientId),s=this.managedIdentityApp.getManagedIdentitySource(),c=s==="DefaultToImds"||s==="Imds";if($0.getToken.info(`MSAL Identity source: ${s}`),o){$0.getToken.info("Using the token exchange managed identity.");let u=await mCe.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(u===null)throw new Wr("Attempted to use the token exchange managed identity, but received a null response.");return u}else if(c&&($0.getToken.info("Using the IMDS endpoint to probe for availability."),!await U$e.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new Wr("Attempted to use the IMDS endpoint, but it is not available.");$0.getToken.info("Calling into MSAL for managed identity token.");let l=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,l,r),$0.getToken.info(Ll(e)),{expiresOnTimestamp:l.expiresOn.getTime(),token:l.accessToken,refreshAfterTimestamp:l.refreshOn?.getTime(),tokenType:"Bearer"}}catch(o){throw $0.getToken.error(bo(e,o)),o.name==="AuthenticationRequiredError"?o:gQt(o)?new Wr(`ManagedIdentityCredential: Network unreachable. Message: ${o.message}`,{cause:o}):new Wr(`ManagedIdentityCredential: Authentication failed. Message ${o.message}`,{cause:o})}})}ensureValidMsalToken(e,r,n){let o=a(s=>($0.getToken.info(s),new ih({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:s})),"createError");if(!r)throw o("No response.");if(!r.expiresOn)throw o('Response had no "expiresOn" property.');if(!r.accessToken)throw o('Response had no "accessToken" property.')}};function gQt(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}a(gQt,"isNetworkError");f();var $$e=Ne(require("child_process"),1);var Ix=ii("AzureDeveloperCliCredential"),j$e={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(Ix.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((o,s)=>{try{let l=["azd",...["auth","token","--output","json",...t.reduce((u,d)=>u.concat("--scope",d),[]),...n]].join(" ");$$e.default.exec(l,{cwd:j$e.getSafeWorkingDir(),timeout:r},(u,d,p)=>{o({stdout:d,stderr:p,error:u})})}catch(c){s(c)}})}},SO=class{static{a(this,"AzureDeveloperCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(pu(Ix,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=mc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=tc(this.tenantId,r,this.additionallyAllowedTenantIds);n&&pu(Ix,n);let o;return typeof e=="string"?o=[e]:o=e,Ix.getToken.info(`Using the scopes ${e}`),os.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{o.forEach(u=>{$B(u,Ix)});let s=await j$e.getAzdAccessToken(o,n,this.timeout),c=s.stderr?.match("not logged in, run `azd login` to login")||s.stderr?.match("not logged in, run `azd auth login` to login");if(s.stderr?.match("azd:(.*)not found")||s.stderr?.startsWith("'azd' is not recognized")||s.error&&s.error.code==="ENOENT"){let u=new Wr("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw Ix.getToken.info(bo(e,u)),u}if(c){let u=new Wr("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw Ix.getToken.info(bo(e,u)),u}try{let u=JSON.parse(s.stdout);return Ix.getToken.info(Ll(e)),{token:u.token,expiresOnTimestamp:new Date(u.expiresOn).getTime(),tokenType:"Bearer"}}catch(u){throw s.stderr?new Wr(s.stderr):u}}catch(s){let c=s.name==="CredentialUnavailableError"?s:new Wr(s.message||"Unknown error while trying to retrieve the access token");throw Ix.getToken.info(bo(e,c)),c}})}};f();var G$e=Ne(require("child_process"),1);f();function hCe(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(bo("",r)),r}}a(hCe,"checkSubscription");var hh=ii("AzureCliCredential"),V$e={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(hh.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let o=[],s=[];return e&&(o=["--tenant",e]),r&&(s=["--subscription",`"${r}"`]),new Promise((c,l)=>{try{let d=["az",...["account","get-access-token","--output","json","--resource",t,...o,...s]].join(" ");G$e.default.exec(d,{cwd:V$e.getSafeWorkingDir(),timeout:n},(p,m,h)=>{c({stdout:m,stderr:h,error:p})})}catch(u){l(u)}})}},RO=class{static{a(this,"AzureCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;subscription;constructor(e){e?.tenantId&&(pu(hh,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(hCe(hh,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=mc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=tc(this.tenantId,r,this.additionallyAllowedTenantIds);n&&pu(hh,n),this.subscription&&hCe(hh,this.subscription);let o=typeof e=="string"?e:e[0];return hh.getToken.info(`Using the scope ${o}`),os.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{$B(o,hh);let s=aY(o),c=await V$e.getAzureCliAccessToken(s,n,this.subscription,this.timeout),l=c.stderr?.match("(.*)az login --scope(.*)"),u=c.stderr?.match("(.*)az login(.*)")&&!l;if(c.stderr?.match("az:(.*)not found")||c.stderr?.startsWith("'az' is not recognized")){let p=new Wr("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw hh.getToken.info(bo(e,p)),p}if(u){let p=new Wr("Please run 'az login' from a command prompt to authenticate before using this credential.");throw hh.getToken.info(bo(e,p)),p}try{let p=c.stdout,m=this.parseRawResponse(p);return hh.getToken.info(Ll(e)),m}catch(p){throw c.stderr?new Wr(c.stderr):p}}catch(s){let c=s.name==="CredentialUnavailableError"?s:new Wr(s.message||"Unknown error while trying to retrieve the access token");throw hh.getToken.info(bo(e,c)),c}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,o=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(o))return hh.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:o,tokenType:"Bearer"};if(o=new Date(r.expiresOn).getTime(),isNaN(o))throw new Wr(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:o,tokenType:"Bearer"}}};f();f();var z$e=Ne(require("node:child_process"),1),K$e={execFile(t,e,r){return new Promise((n,o)=>{let s=[...e],c=[t,...s].join(" ");z$e.default.exec(c,r,(l,u,d)=>{Buffer.isBuffer(u)&&(u=u.toString("utf8")),Buffer.isBuffer(d)&&(d=d.toString("utf8")),d||l?o(d?new Error(d):l):n(u)})})}};var Tx=ii("AzurePowerShellCredential"),J$e=process.platform==="win32";function X$e(t){return J$e?`${t}.exe`:t}a(X$e,"formatCommand");async function Y$e(t,e){let r=[];for(let n of t){let[o,...s]=n,c=await K$e.execFile(o,s,{encoding:"utf8",timeout:e});r.push(c)}return r}a(Y$e,"runCommands");var Z$e={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},gCe={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},AQt=a(t=>t.message.match(`(.*)${Z$e.login}(.*)`),"isLoginError"),yQt=a(t=>t.message.match(Z$e.installed),"isNotInstalledError"),ACe=[X$e("pwsh")];J$e&&ACe.push(X$e("powershell"));var kO=class{static{a(this,"AzurePowerShellCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(pu(Tx,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=mc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let o of[...ACe]){try{await Y$e([[o,"/?"]],n)}catch{ACe.shift();continue}let c=(await Y$e([[o,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return CQt(c)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return os.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=tc(this.tenantId,r,this.additionallyAllowedTenantIds),o=typeof e=="string"?e:e[0];n&&pu(Tx,n);try{$B(o,Tx),Tx.getToken.info(`Using the scope ${o}`);let s=aY(o),c=await this.getAzurePowerShellAccessToken(s,n,this.timeout);return Tx.getToken.info(Ll(e)),{token:c.Token,expiresOnTimestamp:new Date(c.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(s){if(yQt(s)){let l=new Wr(gCe.installed);throw Tx.getToken.info(bo(o,l)),l}else if(AQt(s)){let l=new Wr(gCe.login);throw Tx.getToken.info(bo(o,l)),l}let c=new Wr(`${s}. ${gCe.troubleshoot}`);throw Tx.getToken.info(bo(o,c)),c}})}};async function CQt(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let o of r)try{let s=JSON.parse(o);if(s?.Token)return n=n.replace(o,""),n&&Tx.getToken.warning(n),s}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}a(CQt,"parseJsonToken");f();var eje=require("node:fs/promises");var vQt="common",xQt="aebc6443-996d-45c2-90f0-388ff96faa56",yCe=ii("VisualStudioCodeCredential"),EQt={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function bQt(t){let e=EQt[t];if(e)throw new Wr(e)}a(bQt,"checkUnsupportedTenant");var PO=class{static{a(this,"VisualStudioCodeCredential")}tenantId;additionallyAllowedTenantIds;msalClient;options;constructor(e){this.options=e||{},e&&e.tenantId?(pu(yCe,e.tenantId),this.tenantId=e.tenantId):this.tenantId=vQt,this.additionallyAllowedTenantIds=mc(e?.additionallyAllowedTenants),bQt(this.tenantId)}async prepare(e){let r=tc(this.tenantId,this.options,this.additionallyAllowedTenantIds,yCe)||this.tenantId;if(!COe()||!RV)throw new Wr("Visual Studio Code Authentication is not available. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");let n=await this.loadAuthRecord(RV,e);this.msalClient=Hd(xQt,r,{...this.options,isVSCodeCredential:!0,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0},authenticationRecord:n})}preparePromise;prepareOnce(e){return this.preparePromise||(this.preparePromise=this.prepare(e)),this.preparePromise}async getToken(e,r){let n=mh(e);if(await this.prepareOnce(n),!this.msalClient)throw new Wr("Visual Studio Code Authentication failed to initialize. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");return this.msalClient.getTokenByInteractiveRequest(n,r||{})}async loadAuthRecord(e,r){try{let n=await(0,eje.readFile)(e,{encoding:"utf8"});return KAe(n)}catch(n){throw yCe.getToken.info(bo(r,n)),new Wr("Cannot load authentication record in Visual Studio Code. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.")}}};f();var lY=ii("BrokerCredential"),uY=class{static{a(this,"BrokerCredential")}brokerMsalClient;brokerTenantId;brokerAdditionallyAllowedTenantIds;constructor(e){this.brokerTenantId=qB(lY,e.tenantId),this.brokerAdditionallyAllowedTenantIds=mc(e?.additionallyAllowedTenants);let r={...e,tokenCredentialOptions:e,logger:lY,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0}};this.brokerMsalClient=Hd(v2,this.brokerTenantId,r)}async getToken(e,r={}){return os.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=tc(this.brokerTenantId,n,this.brokerAdditionallyAllowedTenantIds,lY);let o=mh(e);try{return this.brokerMsalClient.getBrokeredToken(o,!0,{...n,disableAutomaticAuthentication:!0})}catch(s){throw lY.getToken.info(bo(o,s)),new Wr("Failed to acquire token using broker authentication",{cause:s})}})}};function tje(t={}){return new uY(t)}a(tje,"createDefaultBrokerCredential");function CCe(t={}){return new PO(t)}a(CCe,"createDefaultVisualStudioCodeCredential");function vCe(t={}){t.retryOptions??={maxRetries:5,retryDelayInMs:800};let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=t?.managedIdentityResourceId,o=process.env.AZURE_FEDERATED_TOKEN_FILE,s=t?.tenantId??process.env.AZURE_TENANT_ID;if(n){let c={...t,resourceId:n};return new TT(c)}if(o&&r){let c={...t,tenantId:s};return new TT(r,c)}if(e){let c={...t,clientId:e};return new TT(c)}return new TT(t)}a(vCe,"createDefaultManagedIdentityCredential");function xCe(t){let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=process.env.AZURE_FEDERATED_TOKEN_FILE,o=t?.tenantId??process.env.AZURE_TENANT_ID;if(n&&r){let s={...t,tenantId:o,clientId:r,tokenFilePath:n};return new bx(s)}if(o){let s={...t,tenantId:o};return new bx(s)}return new bx(t)}a(xCe,"createDefaultWorkloadIdentityCredential");function ECe(t={}){return new SO(t)}a(ECe,"createDefaultAzureDeveloperCliCredential");function bCe(t={}){return new RO(t)}a(bCe,"createDefaultAzureCliCredential");function ICe(t={}){return new kO(t)}a(ICe,"createDefaultAzurePowershellCredential");function TCe(t={}){return new wO(t)}a(TCe,"createDefaultEnvironmentCredential");var wCe=ii("DefaultAzureCredential"),_Ce=class{static{a(this,"UnavailableDefaultCredential")}credentialUnavailableErrorMessage;credentialName;constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return wCe.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},GB=class extends O6{static{a(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[CCe,bCe,ICe,ECe,tje],o=[TCe,xCe,vCe],s=[],c="EnvironmentCredential, WorkloadIdentityCredential, ManagedIdentityCredential, VisualStudioCodeCredential, AzureCliCredential, AzurePowerShellCredential, AzureDeveloperCliCredential";if(r)switch(r){case"dev":s=n;break;case"prod":s=o;break;case"environmentcredential":s=[TCe];break;case"workloadidentitycredential":s=[xCe];break;case"managedidentitycredential":s=[vCe];break;case"visualstudiocodecredential":s=[CCe];break;case"azureclicredential":s=[bCe];break;case"azurepowershellcredential":s=[ICe];break;case"azuredeveloperclicredential":s=[ECe];break;default:{let u=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev' or any of these credentials - ${c}.`;throw wCe.warning(u),new Error(u)}}else s=[...o,...n];let l=s.map(u=>{try{return u(e)}catch(d){return wCe.warning(`Skipped ${u.name} because of an error creating the credential: ${d}`),new _Ce(u.name,d.message)}});super(...l)}};f();var OPn=ii("InteractiveBrowserCredential");f();var zPn=ii("DeviceCodeCredential");f();var IQt="AzurePipelinesCredential",i5n=ii(IQt);f();var m5n=ii("AuthorizationCodeCredential");f();var TQt="OnBehalfOfCredential",I5n=ii(TQt);f();var BO=new dt("capiFetchUtilities");function wQt(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}a(wQt,"getIntegrationId");function gh(t){let e={...y0(t),"X-GitHub-Api-Version":zB},r=wQt(t.get(on));return r&&(e["Copilot-Integration-Id"]=r),e}a(gh,"getCapiHeaders");function SCe(t,e){return BO.debug(t,"Using CES proxy mode for msbench"),{...e,"ces-proxy-target":t2.api,"Copilot-Integration-Id":"autodev-test"}}a(SCe,"addMsBenchCesProxyHeaders");async function RCe(t,e){BO.debug(t,"Using HMAC authentication mode for msbench");let r=await dOe(process.env.HMAC_SECRET);return{...e,...r}}a(RCe,"addMsBenchHmacHeaders");function rje(){return q1()&&!!process.env.HMAC_SECRET}a(rje,"isMsBenchHmacModeEnabled");function DO(){return q1()&&!process.env.HMAC_SECRET}a(DO,"isMsBenchCesProxyModeEnabled");async function VB(t,e){return process.env.HMAC_SECRET?await RCe(t,e):SCe(t,e)}a(VB,"addMsBenchHeaders");function dY(t,e,...r){if(DO()){BO.debug(t,"Using CES proxy endpoint for URL generation");let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return Gm(t,e,"api",...r)}a(dY,"getCapiUrl");async function CR(t,e,r){r??=await t.get(nr).getToken();let n=dY(t,r,e),o=r.token;DO()&&(BO.debug(t,"Using CES proxy authentication token for fetchCapiUrl"),o=await ije());let s={Authorization:`Bearer ${o}`,...gh(t)},c=rje()?await RCe(t,s):DO()?SCe(t,s):s;return await t.get(Lr).fetch(new URL(n).href,{method:"GET",headers:c})}a(CR,"fetchCapiUrl");async function nje(t,e,r){let n=await t.get(nr).getToken(),o=dY(t,n,e),s=n.token;DO()&&(BO.debug(t,"Using CES proxy authentication token for postCapiUrl"),s=await ije());let c={Authorization:`Bearer ${s}`,...gh(t)},l=rje()?await RCe(t,c):DO()?SCe(t,c):c;return await t.get(Lr).fetch(new URL(o).href,{method:"POST",headers:l,body:r})}a(nje,"postCapiUrl");async function ije(){let e=await new GB().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}a(ije,"getMsBenchToken");f();var oje=600*1e3,$r={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",Gpt5:"gpt-5",CopilotBase:"copilot-base",BYOK:"byok",Unknown:"unknown"},mY=new Set([$r.O1Ga,$r.O3Mini,$r.O1Mini,$r.Gemini20Pro,$r.Gemini20Flash]);function Ah(t){switch(t){case"edits":case"user":case"inline":return[$r.Gpt4o,$r.Gpt4turbo,$r.Gpt4,$r.O1Mini,$r.O1Ga,$r.Claude35Sonnet,$r.O3Mini,$r.Gemini20Flash,$r.Claude37Sonnet,$r.Claude37SonnetThought,$r.Gpt45,$r.Gpt41,$r.CopilotBase];case"meta":case"suggestions":case"synonyms":return[$r.Gpt4oMini,$r.Gpt4o,$r.Gpt35turbo,$r.Gpt41,$r.CopilotBase];case"gitCommit":return[$r.Gpt4oMini,$r.Gpt4o,$r.Gpt4,$r.Gpt41,$r.CopilotBase];case"codeReview":return[$r.Gpt4,$r.Gpt4o,$r.Gpt41,$r.CopilotBase];case"nesStubs":return[$r.Gpt4oMini,$r.Gpt4o,$r.Gpt41,$r.CopilotBase]}}a(Ah,"getSupportedModelFamiliesForPrompt");var hY={textEmbedding3Small:"text-embedding-3-small"},_Qt=E.Object({type:E.Union([E.Literal("chat"),E.Literal("embeddings"),E.Literal("completion")]),tokenizer:E.String(),family:E.String(),object:E.String(),supports:E.Optional(E.Object({tool_calls:E.Optional(E.Boolean()),parallel_tool_calls:E.Optional(E.Boolean()),streaming:E.Optional(E.Boolean()),vision:E.Optional(E.Boolean())})),limits:E.Optional(E.Object({max_inputs:E.Optional(E.Number()),max_prompt_tokens:E.Optional(E.Number()),max_output_tokens:E.Optional(E.Number()),max_context_window_tokens:E.Optional(E.Number())}))}),SQt=E.Object({id:E.String(),name:E.String(),version:E.String(),model_picker_enabled:E.Boolean(),is_chat_default:E.Optional(E.Boolean()),is_chat_fallback:E.Optional(E.Boolean()),capabilities:_Qt,billing:E.Optional(E.Object({is_premium:E.Optional(E.Boolean()),multiplier:E.Optional(E.Number())})),object:E.String(),preview:E.Optional(E.Boolean()),isExperimental:E.Optional(E.Boolean()),policy:E.Optional(E.Object({state:E.String(),terms:E.String()}))}),sje=E.Object({data:E.Array(SQt)}),od=class{static{a(this,"ModelMetadataProvider")}},fY=class extends od{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;this.allowTokenRefresh=a(()=>{this._lastFetchTime=0},"allowTokenRefresh");r.get(nr).onDidResetToken(this.allowTokenRefresh)}static{a(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await CR(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){pn.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw pn.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new pC(r)}await this.processModels(r)}async fetchModel(r){let n=await CR(this.ctx,`/models/${r}`);if(!n.ok){pn.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await nje(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){pn.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>oje}},pY=class extends od{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{a(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Lt),n=await r.fetchTokenAndUpdateExPValuesAndAssignments(),o=r.ideChatExpModelIds(n),s=[];if(o){let c=o?.split(",");for(let l of c){let u=await this.fetchModel(l.trim());u!==void 0&&(u.isExperimental=!0,s.push(u))}}return s.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[s,c]=n;if(Date.now()-c<oje)return s}let o=await this.delegate.fetchModel(r);if(o)return this._exp_models_cache.set(r,[o,Date.now()]),o}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function aje(t){let e=Ki(t,$t.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}a(aje,"getUserSelectedModelConfiguration");f();f();f();var KB=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{a(this,"CopilotPromptLoadFailure")}};f();var cje=Ne(require("node:fs/promises")),gY=Ne(require("node:path"));async function AY(t){return await cje.readFile(kCe(t))}a(AY,"readFile");function kCe(t){return gY.default.resolve(gY.default.extname(__filename)!==".ts"?__dirname:gY.default.resolve(__dirname,"../../dist"),t)}a(kCe,"locateFile");var JB=Ne(Eje());var bY=new Map;function Xi(t="o200k_base"){let e=bY.get(t);return e!==void 0||(e=bY.get("o200k_base"),e!==void 0)?e:new YB}a(Xi,"getTokenizer");async function IY(t="o200k_base"){return await vR,Xi(t)}a(IY,"getTokenizerAsync");async function $Qt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await AY(t),r=new Map,n=[];for(let o=0;o<e.length;o++){if(e[o]!==255||n.length===0){n.push(e[o]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}a($Qt,"parseTikTokenNoIndex");var qCe=class t{constructor(e){this._tokenizer=e}static{a(this,"TTokenizer")}static async create(e){try{let r=(0,JB.createTokenizer)(await $Qt(`resources/${e}.tiktoken.noindex`),(0,JB.getSpecialTokensByEncoder)(e),(0,JB.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new KB("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,o=1,s=Math.min(e.length,r*n),c=e.slice(-s),l=this.tokenize(c);for(;l.length<r+2&&s<e.length;)s=Math.min(e.length,s+r*o),c=e.slice(-s),l=this.tokenize(c);return l.length<r?{text:e,tokens:l}:(l=l.slice(-r),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,o=1,s=Math.min(e.length,r*n),c=e.slice(0,s),l=this.tokenize(c);for(;l.length<r+2&&s<e.length;)s=Math.min(e.length,s+r*o),c=e.slice(0,s),l=this.tokenize(c);return l.length<r?{text:e,tokens:l}:(l=l.slice(0,r),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let o=n.indexOf(`
`);return n.substring(o+1)}},HCe=class{constructor(){this.hash=a(e=>{let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);r=(r<<5)-r+o,r&=r&65535}return r},"hash")}static{a(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let o=n.indexOf(`
`);return n.substring(o+1)}},jQt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},UCe=4,YB=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{a(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let o=0;o<r.length;o++)n=n*Math.pow(10,UCe)+r.charCodeAt(o);return n})}detokenize(e){return e.map(r=>{let n=[],o=r.toString();for(;o.length>0;){let s=o.slice(-UCe),c=String.fromCharCode(parseInt(s));n.unshift(c),o=o.slice(0,-UCe)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?jQt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(o,s)=>s)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(o,s)=>s)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let o=n.indexOf(`
`);return n.substring(o+1)}};async function bje(t){try{let e=await qCe.create(t);bY.set(t,e)}catch{}}a(bje,"setTokenizer");var vR=(async()=>{bY.set("mock",new HCe),await Promise.all([bje("cl100k_base"),bje("o200k_base")])})();f();f();var GQt=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},Tje=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},WCe,TY,wje,$Ce=class extends Bn{static{a(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),WCe.add(this),TY.set(this,void 0),GQt(this,TY,e,"f"),this.error=r}Errors(){return new LI(Tje(this,WCe,"m",wje).call(this))}};TY=new WeakMap,WCe=new WeakSet,wje=a(function*(){this.error&&(yield this.error),yield*Tje(this,TY,"f")},"_AssertError_Iterator");function Ije(t,e,r){if(!Li(t,e,r))throw new $Ce(vC(t,e,r))}a(Ije,"AssertValue");function wY(...t){return t.length===3?Ije(t[0],t[1],t[2]):Ije(t[0],[],t[1])}a(wY,"Assert");f();f();f();function VQt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=ko(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=ko(t[r]);return e}a(VQt,"FromObject");function zQt(t){return t.map(e=>ko(e))}a(zQt,"FromArray");function KQt(t){return t.slice()}a(KQt,"FromTypedArray");function YQt(t){return new Map(ko([...t.entries()]))}a(YQt,"FromMap");function JQt(t){return new Set(ko([...t.entries()]))}a(JQt,"FromSet");function XQt(t){return new Date(t.toISOString())}a(XQt,"FromDate");function ko(t){if(Dn(t))return zQt(t);if(Af(t))return XQt(t);if(zm(t))return KQt(t);if(KNe(t))return YQt(t);if(YNe(t))return JQt(t);if(Pi(t))return VQt(t);if(x0(t))return t;throw new Error("ValueClone: Unable to clone value")}a(ko,"Clone");var j0=class extends Bn{static{a(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function Po(t){return _I(t)?t():ko(t)}a(Po,"FromDefault");function ZQt(t,e){return Pn(t,"default")?Po(t.default):{}}a(ZQt,"FromAny");function eUt(t,e){return{}}a(eUt,"FromArgument");function tUt(t,e){if(t.uniqueItems===!0&&!Pn(t,"default"))throw new j0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!Pn(t,"default"))throw new j0(t,"Array with the contains constraint requires a default value");return"default"in t?Po(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>_p(t.items,e)):[]}a(tUt,"FromArray");function rUt(t,e){return Pn(t,"default")?Po(t.default):async function*(){}()}a(rUt,"FromAsyncIterator");function nUt(t,e){return Pn(t,"default")?Po(t.default):BigInt(0)}a(nUt,"FromBigInt");function iUt(t,e){return Pn(t,"default")?Po(t.default):!1}a(iUt,"FromBoolean");function oUt(t,e){if(Pn(t,"default"))return Po(t.default);{let r=_p(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,o]of Object.entries(r)){let s=this;s[n]=o}}}:class{}}}a(oUt,"FromConstructor");function sUt(t,e){return Pn(t,"default")?Po(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}a(sUt,"FromDate");function aUt(t,e){return Pn(t,"default")?Po(t.default):()=>_p(t.returns,e)}a(aUt,"FromFunction");function cUt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return _p(n,[...e,...r])}a(cUt,"FromImport");function lUt(t,e){return Pn(t,"default")?Po(t.default):t.minimum!==void 0?t.minimum:0}a(lUt,"FromInteger");function uUt(t,e){if(Pn(t,"default"))return Po(t.default);{let r=t.allOf.reduce((n,o)=>{let s=_p(o,e);return typeof s=="object"?{...n,...s}:s},{});if(!Li(t,e,r))throw new j0(t,"Intersect produced invalid value. Consider using a default value.");return r}}a(uUt,"FromIntersect");function dUt(t,e){return Pn(t,"default")?Po(t.default):function*(){}()}a(dUt,"FromIterator");function fUt(t,e){return Pn(t,"default")?Po(t.default):t.const}a(fUt,"FromLiteral");function pUt(t,e){if(Pn(t,"default"))return Po(t.default);throw new j0(t,"Never types cannot be created. Consider using a default value.")}a(pUt,"FromNever");function mUt(t,e){if(Pn(t,"default"))return Po(t.default);throw new j0(t,"Not types must have a default value")}a(mUt,"FromNot");function hUt(t,e){return Pn(t,"default")?Po(t.default):null}a(hUt,"FromNull");function gUt(t,e){return Pn(t,"default")?Po(t.default):t.minimum!==void 0?t.minimum:0}a(gUt,"FromNumber");function AUt(t,e){if(Pn(t,"default"))return Po(t.default);{let r=new Set(t.required),n={};for(let[o,s]of Object.entries(t.properties))r.has(o)&&(n[o]=_p(s,e));return n}}a(AUt,"FromObject");function yUt(t,e){return Pn(t,"default")?Po(t.default):Promise.resolve(_p(t.item,e))}a(yUt,"FromPromise");function CUt(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(Pn(t,"default"))return Po(t.default);if(r===AC||r===gC)return{};{let o=r.slice(1,r.length-1).split("|"),s={};for(let c of o)s[c]=_p(n,e);return s}}a(CUt,"FromRecord");function vUt(t,e){return Pn(t,"default")?Po(t.default):_p(So(t,e),e)}a(vUt,"FromRef");function xUt(t,e){if(Pn(t,"default"))return Po(t.default);throw new j0(t,"RegExp types cannot be created. Consider using a default value.")}a(xUt,"FromRegExp");function EUt(t,e){if(t.pattern!==void 0){if(Pn(t,"default"))return Po(t.default);throw new j0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(Pn(t,"default"))return Po(t.default);throw new j0(t,"String types with formats must specify a default value")}else return Pn(t,"default")?Po(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}a(EUt,"FromString");function bUt(t,e){return Pn(t,"default")?Po(t.default):"value"in t?Symbol.for(t.value):Symbol()}a(bUt,"FromSymbol");function IUt(t,e){if(Pn(t,"default"))return Po(t.default);if(!aG(t))throw new j0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return aD(t)[0]}a(IUt,"FromTemplateLiteral");function TUt(t,e){if(_je++>BUt)throw new j0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return Pn(t,"default")?Po(t.default):_p(So(t,e),e)}a(TUt,"FromThis");function wUt(t,e){return Pn(t,"default")?Po(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>_p(t.items[n],e))}a(wUt,"FromTuple");function _Ut(t,e){if(Pn(t,"default"))return Po(t.default)}a(_Ut,"FromUndefined");function SUt(t,e){if(Pn(t,"default"))return Po(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return _p(t.anyOf[0],e)}a(SUt,"FromUnion");function RUt(t,e){return Pn(t,"default")?Po(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}a(RUt,"FromUint8Array");function kUt(t,e){return Pn(t,"default")?Po(t.default):{}}a(kUt,"FromUnknown");function PUt(t,e){if(Pn(t,"default"))return Po(t.default)}a(PUt,"FromVoid");function DUt(t,e){if(Pn(t,"default"))return Po(t.default);throw new Error("User defined types must specify a default value")}a(DUt,"FromKind");function _p(t,e){let r=ou(t,e),n=t;switch(n[st]){case"Any":return ZQt(n,r);case"Argument":return eUt(n,r);case"Array":return tUt(n,r);case"AsyncIterator":return rUt(n,r);case"BigInt":return nUt(n,r);case"Boolean":return iUt(n,r);case"Constructor":return oUt(n,r);case"Date":return sUt(n,r);case"Function":return aUt(n,r);case"Import":return cUt(n,r);case"Integer":return lUt(n,r);case"Intersect":return uUt(n,r);case"Iterator":return dUt(n,r);case"Literal":return fUt(n,r);case"Never":return pUt(n,r);case"Not":return mUt(n,r);case"Null":return hUt(n,r);case"Number":return gUt(n,r);case"Object":return AUt(n,r);case"Promise":return yUt(n,r);case"Record":return CUt(n,r);case"Ref":return vUt(n,r);case"RegExp":return xUt(n,r);case"String":return EUt(n,r);case"Symbol":return bUt(n,r);case"TemplateLiteral":return IUt(n,r);case"This":return TUt(n,r);case"Tuple":return wUt(n,r);case"Undefined":return _Ut(n,r);case"Union":return SUt(n,r);case"Uint8Array":return RUt(n,r);case"Unknown":return kUt(n,r);case"Void":return PUt(n,r);default:if(!yf.Has(n[st]))throw new j0(n,"Unknown type");return DUt(n,r)}}a(_p,"Visit");var BUt=512,_je=0;function yh(...t){return _je=0,t.length===2?_p(t[0],t[1]):_p(t[0],[])}a(yh,"Create");var _Y=class extends Bn{static{a(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function NUt(t,e,r){if(t[st]==="Object"&&typeof r=="object"&&!j1(r)){let n=t,o=Object.getOwnPropertyNames(r),s=Object.entries(n.properties),[c,l]=[1/s.length,s.length];return s.reduce((u,[d,p])=>{let m=p[st]==="Literal"&&p.const===r[d]?l:0,h=Li(p,e,r[d])?c:0,g=o.includes(d)?c:0;return u+(m+h+g)},0)}else return Li(t,e,r)?1:0}a(NUt,"ScoreUnion");function MUt(t,e,r){let n=t.anyOf.map(c=>So(c,e)),[o,s]=[n[0],0];for(let c of n){let l=NUt(c,e,r);l>s&&(o=c,s=l)}return o}a(MUt,"SelectUnion");function LUt(t,e,r){if("default"in t)return typeof r=="function"?t.default:ko(t.default);{let n=MUt(t,e,r);return MO(n,e,r)}}a(LUt,"CastUnion");function FUt(t,e,r){return Li(t,e,r)?ko(r):yh(t,e)}a(FUt,"DefaultClone");function OUt(t,e,r){return Li(t,e,r)?r:yh(t,e)}a(OUt,"Default");function QUt(t,e,r){if(Li(t,e,r))return ko(r);let n=Dn(r)?ko(r):yh(t,e),o=dn(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,c=(dn(t.maxItems)&&o.length>t.maxItems?o.slice(0,t.maxItems):o).map(u=>wA(t.items,e,u));if(t.uniqueItems!==!0)return c;let l=[...new Set(c)];if(!Li(t,e,l))throw new _Y(t,"Array cast produced invalid data due to uniqueItems constraint");return l}a(QUt,"FromArray");function UUt(t,e,r){if(Li(t,e,r))return yh(t,e);let n=new Set(t.returns.required||[]),o=a(function(){},"result");for(let[s,c]of Object.entries(t.returns.properties))!n.has(s)&&r.prototype[s]===void 0||(o.prototype[s]=wA(c,e,r.prototype[s]));return o}a(UUt,"FromConstructor");function qUt(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return wA(o,[...e,...n],r)}a(qUt,"FromImport");function HUt(t,e,r){let n=yh(t,e),o=Pi(n)&&Pi(r)?{...n,...r}:r;return Li(t,e,o)?o:yh(t,e)}a(HUt,"FromIntersect");function WUt(t,e,r){throw new _Y(t,"Never types cannot be cast")}a(WUt,"FromNever");function $Ut(t,e,r){if(Li(t,e,r))return r;if(r===null||typeof r!="object")return yh(t,e);let n=new Set(t.required||[]),o={};for(let[s,c]of Object.entries(t.properties))!n.has(s)&&r[s]===void 0||(o[s]=wA(c,e,r[s]));if(typeof t.additionalProperties=="object"){let s=Object.getOwnPropertyNames(t.properties);for(let c of Object.getOwnPropertyNames(r))s.includes(c)||(o[c]=wA(t.additionalProperties,e,r[c]))}return o}a($Ut,"FromObject");function jUt(t,e,r){if(Li(t,e,r))return ko(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return yh(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[n],s={};for(let[c,l]of Object.entries(r))s[c]=wA(o,e,l);return s}a(jUt,"FromRecord");function GUt(t,e,r){return wA(So(t,e),e,r)}a(GUt,"FromRef");function VUt(t,e,r){return wA(So(t,e),e,r)}a(VUt,"FromThis");function zUt(t,e,r){return Li(t,e,r)?ko(r):Dn(r)?t.items===void 0?[]:t.items.map((n,o)=>wA(n,e,r[o])):yh(t,e)}a(zUt,"FromTuple");function KUt(t,e,r){return Li(t,e,r)?ko(r):LUt(t,e,r)}a(KUt,"FromUnion");function wA(t,e,r){let n=vo(t.$id)?ou(t,e):e,o=t;switch(t[st]){case"Array":return QUt(o,n,r);case"Constructor":return UUt(o,n,r);case"Import":return qUt(o,n,r);case"Intersect":return HUt(o,n,r);case"Never":return WUt(o,n,r);case"Object":return $Ut(o,n,r);case"Record":return jUt(o,n,r);case"Ref":return GUt(o,n,r);case"This":return VUt(o,n,r);case"Tuple":return zUt(o,n,r);case"Union":return KUt(o,n,r);case"Date":case"Symbol":case"Uint8Array":return FUt(t,e,r);default:return OUt(o,n,r)}}a(wA,"Visit");function MO(...t){return t.length===3?wA(t[0],t[1],t[2]):wA(t[0],[],t[1])}a(MO,"Cast");f();function YUt(t){return RI(t)&&t[st]!=="Unsafe"}a(YUt,"IsCheckable");function JUt(t,e,r){return Dn(r)?r.map(n=>Sp(t.items,e,n)):r}a(JUt,"FromArray");function XUt(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return Sp(o,[...e,...n],r)}a(XUt,"FromImport");function ZUt(t,e,r){let n=t.unevaluatedProperties,s=t.allOf.map(l=>Sp(l,e,ko(r))).reduce((l,u)=>Pi(u)?{...l,...u}:u,{});if(!Pi(r)||!Pi(s)||!RI(n))return s;let c=dp(t);for(let l of Object.getOwnPropertyNames(r))c.includes(l)||Li(n,e,r[l])&&(s[l]=Sp(n,e,r[l]));return s}a(ZUt,"FromIntersect");function eqt(t,e,r){if(!Pi(r)||Dn(r))return r;let n=t.additionalProperties;for(let o of Object.getOwnPropertyNames(r)){if(Pn(t.properties,o)){r[o]=Sp(t.properties[o],e,r[o]);continue}if(RI(n)&&Li(n,e,r[o])){r[o]=Sp(n,e,r[o]);continue}delete r[o]}return r}a(eqt,"FromObject");function tqt(t,e,r){if(!Pi(r))return r;let n=t.additionalProperties,o=Object.getOwnPropertyNames(r),[s,c]=Object.entries(t.patternProperties)[0],l=new RegExp(s);for(let u of o){if(l.test(u)){r[u]=Sp(c,e,r[u]);continue}if(RI(n)&&Li(n,e,r[u])){r[u]=Sp(n,e,r[u]);continue}delete r[u]}return r}a(tqt,"FromRecord");function rqt(t,e,r){return Sp(So(t,e),e,r)}a(rqt,"FromRef");function nqt(t,e,r){return Sp(So(t,e),e,r)}a(nqt,"FromThis");function iqt(t,e,r){if(!Dn(r))return r;if(ea(t.items))return[];let n=Math.min(r.length,t.items.length);for(let o=0;o<n;o++)r[o]=Sp(t.items[o],e,r[o]);return r.length>n?r.slice(0,n):r}a(iqt,"FromTuple");function oqt(t,e,r){for(let n of t.anyOf)if(YUt(n)&&Li(n,e,r))return Sp(n,e,r);return r}a(oqt,"FromUnion");function Sp(t,e,r){let n=vo(t.$id)?ou(t,e):e,o=t;switch(o[st]){case"Array":return JUt(o,n,r);case"Import":return XUt(o,n,r);case"Intersect":return ZUt(o,n,r);case"Object":return eqt(o,n,r);case"Record":return tqt(o,n,r);case"Ref":return rqt(o,n,r);case"This":return nqt(o,n,r);case"Tuple":return iqt(o,n,r);case"Union":return oqt(o,n,r);default:return r}}a(Sp,"Visit");function SY(...t){return t.length===3?Sp(t[0],t[1],t[2]):Sp(t[0],[],t[1])}a(SY,"Clean");f();function RY(t){return vo(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}a(RY,"IsStringNumeric");function sqt(t){return ju(t)||hC(t)||dn(t)}a(sqt,"IsValueToString");function LO(t){return t===!0||dn(t)&&t===1||ju(t)&&t===BigInt("1")||vo(t)&&(t.toLowerCase()==="true"||t==="1")}a(LO,"IsValueTrue");function FO(t){return t===!1||dn(t)&&(t===0||Object.is(t,-0))||ju(t)&&t===BigInt("0")||vo(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}a(FO,"IsValueFalse");function aqt(t){return vo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}a(aqt,"IsTimeStringWithTimeZone");function cqt(t){return vo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}a(cqt,"IsTimeStringWithoutTimeZone");function lqt(t){return vo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}a(lqt,"IsDateTimeStringWithTimeZone");function uqt(t){return vo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}a(uqt,"IsDateTimeStringWithoutTimeZone");function dqt(t){return vo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}a(dqt,"IsDateString");function fqt(t,e){let r=Rje(t);return r===e?r:t}a(fqt,"TryConvertLiteralString");function pqt(t,e){let r=kje(t);return r===e?r:t}a(pqt,"TryConvertLiteralNumber");function mqt(t,e){let r=Sje(t);return r===e?r:t}a(mqt,"TryConvertLiteralBoolean");function hqt(t,e){return vo(t.const)?fqt(e,t.const):dn(t.const)?pqt(e,t.const):hC(t.const)?mqt(e,t.const):e}a(hqt,"TryConvertLiteral");function Sje(t){return LO(t)?!0:FO(t)?!1:t}a(Sje,"TryConvertBoolean");function gqt(t){let e=a(r=>r.split(".")[0],"truncateInteger");return RY(t)?BigInt(e(t)):dn(t)?BigInt(Math.trunc(t)):FO(t)?BigInt(0):LO(t)?BigInt(1):t}a(gqt,"TryConvertBigInt");function Rje(t){return G1(t)&&t.description!==void 0?t.description.toString():sqt(t)?t.toString():t}a(Rje,"TryConvertString");function kje(t){return RY(t)?parseFloat(t):LO(t)?1:FO(t)?0:t}a(kje,"TryConvertNumber");function Aqt(t){return RY(t)?parseInt(t):dn(t)?Math.trunc(t):LO(t)?1:FO(t)?0:t}a(Aqt,"TryConvertInteger");function yqt(t){return vo(t)&&t.toLowerCase()==="null"?null:t}a(yqt,"TryConvertNull");function Cqt(t){return vo(t)&&t==="undefined"?void 0:t}a(Cqt,"TryConvertUndefined");function vqt(t){return Af(t)?t:dn(t)?new Date(t):LO(t)?new Date(1):FO(t)?new Date(0):RY(t)?new Date(parseInt(t)):cqt(t)?new Date(`1970-01-01T${t}.000Z`):aqt(t)?new Date(`1970-01-01T${t}`):uqt(t)?new Date(`${t}.000Z`):lqt(t)?new Date(t):dqt(t)?new Date(`${t}T00:00:00.000Z`):t}a(vqt,"TryConvertDate");function xqt(t,e,r){return(Dn(r)?r:[r]).map(o=>_A(t.items,e,o))}a(xqt,"FromArray");function Eqt(t,e,r){return gqt(r)}a(Eqt,"FromBigInt");function bqt(t,e,r){return Sje(r)}a(bqt,"FromBoolean");function Iqt(t,e,r){return vqt(r)}a(Iqt,"FromDate");function Tqt(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return _A(o,[...e,...n],r)}a(Tqt,"FromImport");function wqt(t,e,r){return Aqt(r)}a(wqt,"FromInteger");function _qt(t,e,r){return t.allOf.reduce((n,o)=>_A(o,e,n),r)}a(_qt,"FromIntersect");function Sqt(t,e,r){return hqt(t,r)}a(Sqt,"FromLiteral");function Rqt(t,e,r){return yqt(r)}a(Rqt,"FromNull");function kqt(t,e,r){return kje(r)}a(kqt,"FromNumber");function Pqt(t,e,r){if(!Pi(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))Pn(r,n)&&(r[n]=_A(t.properties[n],e,r[n]));return r}a(Pqt,"FromObject");function Dqt(t,e,r){if(!Pi(r))return r;let o=Object.getOwnPropertyNames(t.patternProperties)[0],s=t.patternProperties[o];for(let[c,l]of Object.entries(r))r[c]=_A(s,e,l);return r}a(Dqt,"FromRecord");function Bqt(t,e,r){return _A(So(t,e),e,r)}a(Bqt,"FromRef");function Nqt(t,e,r){return Rje(r)}a(Nqt,"FromString");function Mqt(t,e,r){return vo(r)||dn(r)?Symbol(r):r}a(Mqt,"FromSymbol");function Lqt(t,e,r){return _A(So(t,e),e,r)}a(Lqt,"FromThis");function Fqt(t,e,r){return Dn(r)&&!ea(t.items)?r.map((o,s)=>s<t.items.length?_A(t.items[s],e,o):o):r}a(Fqt,"FromTuple");function Oqt(t,e,r){return Cqt(r)}a(Oqt,"FromUndefined");function Qqt(t,e,r){for(let n of t.anyOf){let o=_A(n,e,ko(r));if(Li(n,e,o))return o}return r}a(Qqt,"FromUnion");function _A(t,e,r){let n=ou(t,e),o=t;switch(t[st]){case"Array":return xqt(o,n,r);case"BigInt":return Eqt(o,n,r);case"Boolean":return bqt(o,n,r);case"Date":return Iqt(o,n,r);case"Import":return Tqt(o,n,r);case"Integer":return wqt(o,n,r);case"Intersect":return _qt(o,n,r);case"Literal":return Sqt(o,n,r);case"Null":return Rqt(o,n,r);case"Number":return kqt(o,n,r);case"Object":return Pqt(o,n,r);case"Record":return Dqt(o,n,r);case"Ref":return Bqt(o,n,r);case"String":return Nqt(o,n,r);case"Symbol":return Mqt(o,n,r);case"This":return Lqt(o,n,r);case"Tuple":return Fqt(o,n,r);case"Undefined":return Oqt(o,n,r);case"Union":return Qqt(o,n,r);default:return r}}a(_A,"Visit");function kY(...t){return t.length===3?_A(t[0],t[1],t[2]):_A(t[0],[],t[1])}a(kY,"Convert");f();function Pje(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!Li(e,r,n))throw new vD(e,n,vC(e,r,n).First());return tx(e,r)?xD(e,r,n):n}a(Pje,"Decode");f();function wx(t,e){let r=Pn(t,"default")?t.default:void 0,n=_I(r)?r():ko(r);return ea(e)?n:Pi(e)&&Pi(n)?Object.assign(n,e):e}a(wx,"ValueOrDefault");function jCe(t){return RI(t)&&"default"in t}a(jCe,"HasDefaultProperty");function Uqt(t,e,r){if(Dn(r)){for(let o=0;o<r.length;o++)r[o]=kf(t.items,e,r[o]);return r}let n=wx(t,r);if(!Dn(n))return n;for(let o=0;o<n.length;o++)n[o]=kf(t.items,e,n[o]);return n}a(Uqt,"FromArray");function qqt(t,e,r){return Af(r)?r:wx(t,r)}a(qqt,"FromDate");function Hqt(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return kf(o,[...e,...n],r)}a(Hqt,"FromImport");function Wqt(t,e,r){let n=wx(t,r);return t.allOf.reduce((o,s)=>{let c=kf(s,e,n);return Pi(c)?{...o,...c}:c},{})}a(Wqt,"FromIntersect");function $qt(t,e,r){let n=wx(t,r);if(!Pi(n))return n;let o=Object.getOwnPropertyNames(t.properties);for(let s of o){let c=kf(t.properties[s],e,n[s]);ea(c)||(n[s]=kf(t.properties[s],e,n[s]))}if(!jCe(t.additionalProperties))return n;for(let s of Object.getOwnPropertyNames(n))o.includes(s)||(n[s]=kf(t.additionalProperties,e,n[s]));return n}a($qt,"FromObject");function jqt(t,e,r){let n=wx(t,r);if(!Pi(n))return n;let o=t.additionalProperties,[s,c]=Object.entries(t.patternProperties)[0],l=new RegExp(s);for(let u of Object.getOwnPropertyNames(n))l.test(u)&&jCe(c)&&(n[u]=kf(c,e,n[u]));if(!jCe(o))return n;for(let u of Object.getOwnPropertyNames(n))l.test(u)||(n[u]=kf(o,e,n[u]));return n}a(jqt,"FromRecord");function Gqt(t,e,r){return kf(So(t,e),e,wx(t,r))}a(Gqt,"FromRef");function Vqt(t,e,r){return kf(So(t,e),e,r)}a(Vqt,"FromThis");function zqt(t,e,r){let n=wx(t,r);if(!Dn(n)||ea(t.items))return n;let[o,s]=[t.items,Math.max(t.items.length,n.length)];for(let c=0;c<s;c++)c<o.length&&(n[c]=kf(o[c],e,n[c]));return n}a(zqt,"FromTuple");function Kqt(t,e,r){let n=wx(t,r);for(let o of t.anyOf){let s=kf(o,e,ko(n));if(Li(o,e,s))return s}return n}a(Kqt,"FromUnion");function kf(t,e,r){let n=ou(t,e),o=t;switch(o[st]){case"Array":return Uqt(o,n,r);case"Date":return qqt(o,n,r);case"Import":return Hqt(o,n,r);case"Intersect":return Wqt(o,n,r);case"Object":return $qt(o,n,r);case"Record":return jqt(o,n,r);case"Ref":return Gqt(o,n,r);case"This":return Vqt(o,n,r);case"Tuple":return zqt(o,n,r);case"Union":return Kqt(o,n,r);default:return wx(o,r)}}a(kf,"Visit");function PY(...t){return t.length===3?kf(t[0],t[1],t[2]):kf(t[0],[],t[1])}a(PY,"Default");f();f();var SA={};Sa(SA,{Delete:()=>Jqt,Format:()=>OO,Get:()=>Zqt,Has:()=>Xqt,Set:()=>Yqt,ValuePointerRootDeleteError:()=>BY,ValuePointerRootSetError:()=>DY});f();var DY=class extends Bn{static{a(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},BY=class extends Bn{static{a(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function Dje(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}a(Dje,"Escape");function*OO(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield Dje(t.slice(e,r))),e=n+1):r=n;yield Dje(t.slice(e))}a(OO,"Format");function Yqt(t,e,r){if(e==="")throw new DY(t,e,r);let[n,o,s]=[null,t,""];for(let c of OO(e))o[c]===void 0&&(o[c]={}),n=o,o=o[c],s=c;n[s]=r}a(Yqt,"Set");function Jqt(t,e){if(e==="")throw new BY(t,e);let[r,n,o]=[null,t,""];for(let s of OO(e)){if(n[s]===void 0||n[s]===null)return;r=n,n=n[s],o=s}if(Array.isArray(r)){let s=parseInt(o);r.splice(s,1)}else delete r[o]}a(Jqt,"Delete");function Xqt(t,e){if(e==="")return!0;let[r,n,o]=[null,t,""];for(let s of OO(e)){if(n[s]===void 0)return!1;r=n,n=n[s],o=s}return Object.getOwnPropertyNames(r).includes(o)}a(Xqt,"Has");function Zqt(t,e){if(e==="")return t;let r=t;for(let n of OO(e)){if(r[n]===void 0)return;r=r[n]}return r}a(Zqt,"Get");f();function eHt(t,e){if(!Pi(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(o=>xR(t[o],e[o]))}a(eHt,"ObjectType");function tHt(t,e){return Af(e)&&t.getTime()===e.getTime()}a(tHt,"DateType");function rHt(t,e){return!Dn(e)||t.length!==e.length?!1:t.every((r,n)=>xR(r,e[n]))}a(rHt,"ArrayType");function nHt(t,e){return!zm(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>xR(r,e[n]))}a(nHt,"TypedArrayType");function iHt(t,e){return t===e}a(iHt,"ValueType");function xR(t,e){if(Af(t))return tHt(t,e);if(zm(t))return nHt(t,e);if(Dn(t))return rHt(t,e);if(Pi(t))return eHt(t,e);if(x0(t))return iHt(t,e);throw new Error("ValueEquals: Unable to compare value")}a(xR,"Equal");var oHt=Ho({type:uo("insert"),path:Cf(),value:uA()}),sHt=Ho({type:uo("update"),path:Cf(),value:uA()}),aHt=Ho({type:uo("delete"),path:Cf()}),Nje=qo([oHt,sHt,aHt]),NY=class extends Bn{static{a(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function MY(t,e){return{type:"update",path:t,value:e}}a(MY,"CreateUpdate");function Mje(t,e){return{type:"insert",path:t,value:e}}a(Mje,"CreateInsert");function Lje(t){return{type:"delete",path:t}}a(Lje,"CreateDelete");function Bje(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new NY(t,"Cannot diff objects with symbols")}a(Bje,"AssertDiffable");function*cHt(t,e,r){if(Bje(e),Bje(r),!Wpe(r))return yield MY(t,r);let n=globalThis.Object.getOwnPropertyNames(e),o=globalThis.Object.getOwnPropertyNames(r);for(let s of o)Pn(e,s)||(yield Mje(`${t}/${s}`,r[s]));for(let s of n)Pn(r,s)&&(xR(e,r)||(yield*LY(`${t}/${s}`,e[s],r[s])));for(let s of n)Pn(r,s)||(yield Lje(`${t}/${s}`))}a(cHt,"ObjectType");function*lHt(t,e,r){if(!Dn(r))return yield MY(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*LY(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield Mje(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield Lje(`${t}/${n}`))}a(lHt,"ArrayType");function*uHt(t,e,r){if(!zm(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield MY(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*LY(`${t}/${n}`,e[n],r[n])}a(uHt,"TypedArrayType");function*dHt(t,e,r){e!==r&&(yield MY(t,r))}a(dHt,"ValueType");function*LY(t,e,r){if(Wpe(e))return yield*cHt(t,e,r);if(Dn(e))return yield*lHt(t,e,r);if(zm(e))return yield*uHt(t,e,r);if(x0(e))return yield*dHt(t,e,r);throw new NY(e,"Unable to diff value")}a(LY,"Visit");function Fje(t,e){return[...LY("",t,e)]}a(Fje,"Diff");function fHt(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}a(fHt,"IsRootUpdate");function pHt(t){return t.length===0}a(pHt,"IsIdentity");function Oje(t,e){if(fHt(e))return ko(e[0].value);if(pHt(e))return ko(t);let r=ko(t);for(let n of e)switch(n.type){case"insert":{SA.Set(r,n.path,n.value);break}case"update":{SA.Set(r,n.path,n.value);break}case"delete":{SA.Delete(r,n.path);break}}return r}a(Oje,"Patch");f();function Qje(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],o=tx(e,r)?bD(e,r,n):n;if(!Li(e,r,o))throw new ED(e,o,vC(e,r,o).First());return o}a(Qje,"Encode");f();function FY(t){return Pi(t)&&!Dn(t)}a(FY,"IsStandardObject");var OY=class extends Bn{static{a(this,"ValueMutateError")}constructor(e){super(e)}};function mHt(t,e,r,n){if(!FY(r))SA.Set(t,e,ko(n));else{let o=Object.getOwnPropertyNames(r),s=Object.getOwnPropertyNames(n);for(let c of o)s.includes(c)||delete r[c];for(let c of s)o.includes(c)||(r[c]=null);for(let c of s)GCe(t,`${e}/${c}`,r[c],n[c])}}a(mHt,"ObjectType");function hHt(t,e,r,n){if(!Dn(r))SA.Set(t,e,ko(n));else{for(let o=0;o<n.length;o++)GCe(t,`${e}/${o}`,r[o],n[o]);r.splice(n.length)}}a(hHt,"ArrayType");function gHt(t,e,r,n){if(zm(r)&&r.length===n.length)for(let o=0;o<r.length;o++)r[o]=n[o];else SA.Set(t,e,ko(n))}a(gHt,"TypedArrayType");function AHt(t,e,r,n){r!==n&&SA.Set(t,e,n)}a(AHt,"ValueType");function GCe(t,e,r,n){if(Dn(n))return hHt(t,e,r,n);if(zm(n))return gHt(t,e,r,n);if(FY(n))return mHt(t,e,r,n);if(x0(n))return AHt(t,e,r,n)}a(GCe,"Visit");function Uje(t){return zm(t)||x0(t)}a(Uje,"IsNonMutableValue");function yHt(t,e){return FY(t)&&Dn(e)||Dn(t)&&FY(e)}a(yHt,"IsMismatchedValue");function qje(t,e){if(Uje(t)||Uje(e))throw new OY("Only object and array types can be mutated at the root level");if(yHt(t,e))throw new OY("Cannot assign due type mismatch of assignable values");GCe(t,"",t,e)}a(qje,"Mutate");f();var QY=class extends Bn{static{a(this,"ParseError")}constructor(e){super(e)}},VCe;(function(t){let e=new Map([["Assert",(s,c,l)=>(wY(s,c,l),l)],["Cast",(s,c,l)=>MO(s,c,l)],["Clean",(s,c,l)=>SY(s,c,l)],["Clone",(s,c,l)=>ko(l)],["Convert",(s,c,l)=>kY(s,c,l)],["Decode",(s,c,l)=>tx(s,c)?xD(s,c,l):l],["Default",(s,c,l)=>PY(s,c,l)],["Encode",(s,c,l)=>tx(s,c)?bD(s,c,l):l]]);function r(s){e.delete(s)}a(r,"Delete"),t.Delete=r;function n(s,c){e.set(s,c)}a(n,"Set"),t.Set=n;function o(s){return e.get(s)}a(o,"Get"),t.Get=o})(VCe||(VCe={}));var Hje=["Clone","Clean","Default","Convert","Assert","Decode"];function CHt(t,e,r,n){return t.reduce((o,s)=>{let c=VCe.Get(s);if(ea(c))throw new QY(`Unable to find Parse operation '${s}'`);return c(e,r,o)},n)}a(CHt,"ParseValue");function Wje(...t){let[e,r,n,o]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?Dn(t[0])?[t[0],t[1],[],t[2]]:[Hje,t[0],t[1],t[2]]:t.length===2?[Hje,t[0],[],t[1]]:(()=>{throw new QY("Invalid Arguments")})();return CHt(e,r,n,o)}a(Wje,"Parse");f();var jC={};Sa(jC,{Assert:()=>wY,Cast:()=>MO,Check:()=>Li,Clean:()=>SY,Clone:()=>ko,Convert:()=>kY,Create:()=>yh,Decode:()=>Pje,Default:()=>PY,Diff:()=>Fje,Edit:()=>Nje,Encode:()=>Qje,Equal:()=>xR,Errors:()=>vC,Hash:()=>MI,Mutate:()=>qje,Parse:()=>Wje,Patch:()=>Oje,ValueErrorIterator:()=>LI});f();var vHt="gpt-4o-copilot",Ch=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&lc(this._ctx,n=>this.refreshAvailableModels(n))}static{a(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return vHt}parseModelsResponse(e){try{return jC.Parse(sje,e)}catch(r){pn.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch(e)}async fetch(e){let r=await CR(this._ctx,"/models",e);return r.ok?this.parseModelsResponse(await r.json())?.data??[]:(pn.error(this._ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(o=>o.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=aje(this._ctx);if(n){let l=this.getGenericCompletionModels().map(u=>u.modelId);l.includes(n)||(l.length>0&&pn.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${l.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let o=Ki(this._ctx,$t.DebugOverrideEngine)||Ki(this._ctx,$t.DebugOverrideEngineLegacy);if(o)return new _T(o,"override");let s=e?this._ctx.get(Lt).customEngine(e):"",c=e?this._ctx.get(Lt).customEngineTargetEngine(e):void 0;return n?s&&c&&n===c?new _T(s,"exp"):new _T(n,"modelpicker"):s?new _T(s,"exp"):this.customModels.length>0?new _T(this.customModels[0],"custommodel"):new _T(r,"default")}},_T=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{a(this,"ModelRequestInfo")}get headers(){return{}}};function ST(t,e=void 0){let r=t.get(Ch),n=r.getCurrentModelRequestInfo(e),o=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:o}}a(ST,"getEngineRequestInfo");f();f();var Ui=class{static{a(this,"FileSystem")}};var aGe=Ne(sGe());function cGe(t){return t!==void 0&&t!==0}a(cGe,"isRepoInfo");function lGe(t){if(t===void 0||t===0)return"";let e=_x(t);if(e==="github/github")return e;let r=GHt(t)?.toLowerCase();return r!==void 0?r:""}a(lGe,"getDogFood");function _x(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}a(_x,"tryGetGitHubNWO");function GHt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}a(GHt,"tryGetADONWO");function RT(t,e){let r=Nl(e);return VHt(t,r)}a(RT,"extractRepoInfoInBackground");var VHt=JHt(zHt,1e4);async function zHt(t,e){let r=NNe(e);if(!r)return;let n=await KHt(t,r);if(!n)return;let o=t.get(Ui),s=bi(n,".git","config"),c;try{c=await o.readFileString(s)}catch{return}let l=YHt(c)??"",u=JCe(l),d={uri:n};return u===void 0?{baseFolder:d,url:l,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:d,url:l,...u}}a(zHt,"extractRepoInfo");function JCe(t){let e;try{if(e=(0,aGe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}a(JCe,"parseRepoUrl");async function KHt(t,e){let r=e+"_add_to_make_longer",n=t.get(Ui);for(;e!=="file:///"&&e.length<r.length;){let o=bi(e,".git","config"),s=!1;try{await n.stat(o),s=!0}catch{s=!1}if(s)return e;r=e,e=Nl(e)}}a(KHt,"getRepoBaseUri");function YHt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,o=/^\s*\[/,s,c,l=!1;for(let u of t.split(`
`))if(l&&s!==void 0){if(s+=u,u.endsWith("\\"))s=s.substring(0,s.length-1);else if(l=!1,c==="origin")return s}else{let d=u.match(e)??u.match(r);if(d)c=d[1];else if(u.match(o))c=void 0;else{if(s&&c!=="origin")continue;{let p=u.match(n);if(p){if(s=p[1],s.endsWith("\\"))s=s.substring(0,s.length-1),l=!0;else if(c==="origin")return s}}}}return s}a(YHt,"getRepoUrlFromConfigText");var YCe=class{static{a(this,"CompletedComputation")}constructor(e){this.result=e}};function JHt(t,e){let r=new vr(e),n=new Set;return(o,...s)=>{let c=JSON.stringify(s),l=r.get(c);if(l)return l.result;if(n.has(c))return 0;let u=t(o,...s);return n.add(c),u.then(d=>{r.set(c,new YCe(d)),n.delete(c)}),0}}a(JHt,"computeInBackgroundAndMemoize");f();var QO=500,uGe=8192-QO,dGe=4,UY=10,fGe=1e3*5,qY={prefix:35,suffix:15,stableContext:35,volatileContext:15},XHt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function UO(t){return t=t.toLowerCase(),XHt[t]??t}a(UO,"normalizeLanguageId");var XCe=class{constructor(e){this.ctx=e;this.cache=new vr(200)}static{a(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),o=this.cache.get(n);return o||(o=new ZCe(()=>this.ctx.get(CA).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,o)),o.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},ZCe=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{a(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function eWt(t){return"uri"in t}a(eWt,"isCompletionsFiltersInfo");var Lt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new XCe(this.ctx)}static{a(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r,n=Kr.createAndMarkAsIssued()){if(n instanceof IC)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let o=r&&eWt(r)?RT(this.ctx,r.uri):void 0,s=_x(o)??"",c=lGe(o)??"",l=r?.languageId??"",u=ST(this.ctx).modelId,d=A3e(e),p=e.getTokenValue("ft")??"",m=e.getTokenValue("ol")??"",h=e.getTokenValue("cml")??"",g=e.getTokenValue("tid")??"",A=e.endpoints,y={"X-Copilot-Repository":s,"X-Copilot-FileType":l,"X-Copilot-UserKind":d,"X-Copilot-Dogfood":c,"X-Copilot-Engine":u,"X-Copilot-CustomModel":p,"X-Copilot-Orgs":m,"X-Copilot-CustomModelNames":h,"X-Copilot-CopilotTrackingId":g},v=this.getGranularityDirectory(),b=this.makeFilterSettings(y),I=v.extendFilters(b),_=await this.getExpConfig(I.newFilterSettings,A);v.update(b,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=v.extendFilters(b),N=k.newFilterSettings,F=await this.getExpConfig(N,A),O=new Promise(Y=>setTimeout(Y,t.upcomingDynamicFilterCheckDelayMs));for(let Y of k.otherFilterSettingsToPrefetch)O=O.then(async()=>{await new Promise(z=>setTimeout(z,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(Y,A)});return this.prepareForUpcomingFilters(N,A),new IC(n.properties,n.measurements,n.issuedTime,{filters:N,exp:F})}async fetchTokenAndUpdateExPValuesAndAssignments(e,r){let n=await this.ctx.get(nr).getToken();return await this.updateExPValuesAndAssignments(n,e,r)}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Fs).machineId;this.granularityDirectory=new wV(e,this.ctx.get(wC))}return this.granularityDirectory}makeFilterSettings(e){return new r2({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return Vm.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,o]of Object.entries(this.upcomingDynamicFilters))await new Promise(s=>setTimeout(s,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,o()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new r2({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=z4(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??qY.suffix}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??UY}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??uGe+QO}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}workspaceContextCacheTime(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcachetime??fGe}stableContextPercent(e){return e.filtersAndExp.exp.variables.copilotstablecontextpercent??qY.stableContext}volatileContextPercent(e){return e.filtersAndExp.exp.variables.copilotvolatilecontextpercent??qY.volatileContext}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!0}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??9}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}maxMultilineTokens(e){return e.filtersAndExp.exp.variables.copilotmaxmultilinetokens??200}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??200}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}useCompletionsComparisonPanel(e){return e.filtersAndExp.exp.variables.copilotusecompletionscomparisonpanel??!1}comparisonPanelModelIds(e){return e.filtersAndExp.exp.variables.copilotcomparisonpanelmodelids??""}comparisonPanelRandomizedMode(e){return e.filtersAndExp.exp.variables.copilotcomparisonpanelrandomizedmode??!0}};f();f();f();var WY=Ne(HY());var tve={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c-sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function G0(t){return t in tve&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}a(G0,"isSupportedLanguageId");function $Y(t){if(!(t in tve))throw new Error(`Unrecognized language: ${t}`);return tve[t]}a($Y,"languageIdToWasmLanguage");var eve=new Map;async function tWt(t){let e;try{e=await AY(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new KB(`Could not load tree-sitter-${t}.wasm`,r):r}return WY.default.Language.load(e)}a(tWt,"loadWasmLanguage");function nve(t){let e=$Y(t);if(!eve.has(e)){let r=tWt(e);eve.set(e,r)}return eve.get(e)}a(nve,"getLanguage");var rve=class extends Error{static{a(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function kT(t,e){return(await ive(t,e))[0]}a(kT,"parseTreeSitter");async function ive(t,e){await WY.default.init({locateFile:a(s=>kCe(s),"locateFile")});let r;try{r=new WY.default}catch(s){throw s&&typeof s=="object"&&"message"in s&&typeof s.message=="string"&&s.message.includes("table index is out of bounds")?new rve(`Could not init Parse for language <${t}>`,s):s}let n=await nve(t);r.setLanguage(n);let o=r.parse(e);return r.delete(),[o,n.version]}a(ive,"parseTreeSitterIncludingVersion");function pGe(t){switch($Y(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c-sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}a(pGe,"getBlockCloseToken");function rWt(t,e){let r=[];for(let n of t){if(!n[1]){let o=e.tree.getLanguage();n[1]=o.query(n[0])}r.push(...n[1].matches(e))}return r}a(rWt,"innerQuery");var nWt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function mGe(t){return rWt([nWt],t).length==1}a(mGe,"queryPythonIsDocstring");var VC=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{a(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(o=>{n.push(o.dump(`${r}+- `,o.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let o=this.parent.dumpPath(e,r,!0),s=o.length-o.lastIndexOf(`
`)-1-r.length,c=" ".repeat(s),l=n?`
${r}${c}+- `:"";return o+this.description+l}else{let o=n?`
${r}+- `:"";return e+this.description+o}}},mu=class{constructor(e,r,n,o){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=o;this.statements=[]}static{a(this,"StatementTree")}static isSupported(e){return XB.languageIds.has(e)||ZB.languageIds.has(e)||qO.languageIds.has(e)||e3.languageIds.has(e)||HO.languageIds.has(e)||WO.languageIds.has(e)||$O.languageIds.has(e)||jO.languageIds.has(e)||GO.languageIds.has(e)}static isTrimmedByDefault(e){return XB.languageIds.has(e)||ZB.languageIds.has(e)||e3.languageIds.has(e)}static create(e,r,n,o){if(XB.languageIds.has(e))return new XB(e,r,n,o);if(ZB.languageIds.has(e))return new ZB(e,r,n,o);if(qO.languageIds.has(e))return new qO(e,r,n,o);if(e3.languageIds.has(e))return new e3(e,r,n,o);if($O.languageIds.has(e))return new $O(e,r,n,o);if(HO.languageIds.has(e))return new HO(e,r,n,o);if(WO.languageIds.has(e))return new WO(e,r,n,o);if(jO.languageIds.has(e))return new jO(e,r,n,o);if(GO.languageIds.has(e))return new GO(e,r,n,o);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,{startPosition:this.offsetToPosition(this.startOffset),endPosition:this.offsetToPosition(this.endOffset)}).forEach(o=>{let s=this.createNode(o.node);for(;e.length>0&&!e[0].containsStatement(s);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(s):this.addStatement(s),e.unshift(s)}),e.forEach(o=>o.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await kT(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,o=r[r.length-1].length;return{row:n,column:o}}dump(e=""){let r=[];return this.statements.forEach((n,o)=>{let s=`[${o}]`,c=" ".repeat(s.length);r.push(n.dump(`${e} ${s} `,`${e} ${c} `))}),r.join(`
`)}},jY=class t extends VC{static{a(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("alternative")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},XB=class extends mu{static{a(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx"])}createNode(e){return new jY(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (field_definition)
        ] @statement`}},ZB=class extends mu{static{a(this,"TSStatementTree")}static{this.languageIds=new Set(["typescript","typescriptreact"])}createNode(e){return new jY(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},ove=class t extends VC{static{a(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},qO=class extends mu{static{a(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new ove(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},sve=class t extends VC{static{a(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},e3=class extends mu{static{a(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new sve(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},ave=class t extends VC{static{a(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},HO=class extends mu{static{a(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new ave(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},cve=class t extends VC{static{a(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},WO=class extends mu{static{a(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new cve(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},lve=class t extends VC{static{a(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},$O=class extends mu{static{a(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new lve(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},uve=class t extends VC{static{a(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},jO=class extends mu{static{a(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new uve(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},dve=class t extends VC{static{a(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},GO=class extends mu{static{a(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new dve(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};var zC=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{a(this,"BlockTrimmer")}static isSupported(e){return mu.isSupported(e)}static isTrimmedByDefault(e){return mu.isTrimmedByDefault(e)}async withParsedStatementTree(e){var n=[];try{let r=tpe(n,mu.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(o){var s=o,c=!0}finally{rpe(n,s,c)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var GY=class extends zC{constructor(r,n,o,s=3,c=7){super(r,n,o);this.lineLimit=s;this.lookAhead=c;let l=[...this.completion.matchAll(/\n/g)],u=this.lineLimit+this.lookAhead;l.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=l[this.lineLimit-1].index),l.length>=u&&u>0&&(this.lookAheadOffset=l[u-1].index)}static{a(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(r=>{let n=r.statementAt(this.stmtStartPos()),o=this.getContainingBlockOffset(n);return o=this.trimAtFirstBlankLine(o),n&&(o=this.trimAtStatementChange(n,o)),this.limitOffset&&this.lookAheadOffset&&(o===void 0||o>this.lookAheadOffset)?this.limitOffset:o})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let o=n.shift();if(this.completion.substring(0,o.index).trim()!=="")return o.index}return r}trimAtStatementChange(r,n){let o=this.prefix.length,s=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>o&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<s?this.asCompletionOffset(r.node.endIndex):n;let c=r,l=r.nextSibling;for(;l&&l.node.endIndex<=s&&!this.hasNonStatementContentAfter(c)&&!this.isCompoundStatement(l);)c=l,l=l.nextSibling;return l&&c.node.endIndex>o&&c.node.endIndex<s?this.asCompletionOffset(c.node.endIndex):n}};async function hGe(t,e){var l=[];try{let r=t.getText();let n=t.offsetAt(e);let o=tpe(l,mu.create(t.detectedLanguageId,r,0,r.length));await o.build();let s=o.statementAt(n);if(!s)return"non-block";if(!s.isCompoundStatementType&&s.children.length===0)return s.parent&&!s.nextSibling&&s.node.endPosition.row<=e.line?"block-end":s.parent?"mid-block":"non-block";if(s.children.length===0)return"empty-block";let c=s.children[s.children.length-1];if(n<c.node.startIndex)return"mid-block";return"block-end"}catch(u){var d=u,p=!0}finally{rpe(l,d,p)}}a(hGe,"getBlockPositionType");f();function iWt(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}a(iWt,"getProxyFromEnvironment");function oWt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}a(oWt,"getRejectUnauthorizedFromEnvironment");var gGe=E.Object({proxy:E.Optional(E.String()),proxyStrictSSL:E.Optional(E.Boolean()),proxyAuthorization:E.Optional(E.String()),proxyKerberosServicePrincipal:E.Optional(E.String())});function AGe(t){let e=iWt(t),r=VO({proxy:e,proxyStrictSSL:oWt(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}a(AGe,"getHttpSettingsFromEnvironment");function VO(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:o,pathname:s,search:c,hash:l}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${s}${c}${l}`,proxyAuthorization:t.proxyAuthorization||sWt(n,o)}}catch{return{...t,proxy:""}}}a(VO,"normalizeHttpSettings");function sWt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}a(sWt,"getAuth");var fve={};Sa(fve,{activationEvents:()=>wWt,badges:()=>TWt,browser:()=>_Wt,bugs:()=>AWt,build:()=>dWt,buildType:()=>fWt,categories:()=>bWt,contributes:()=>pve,default:()=>NWt,dependencies:()=>DWt,description:()=>lWt,devDependencies:()=>PWt,displayName:()=>cWt,enabledApiProposals:()=>RWt,engines:()=>EWt,extensionPack:()=>xWt,homepage:()=>hWt,icon:()=>CWt,keywords:()=>IWt,license:()=>gWt,main:()=>SWt,name:()=>aWt,overrides:()=>BWt,preview:()=>mWt,pricing:()=>vWt,publisher:()=>pWt,qna:()=>yWt,scripts:()=>kWt,version:()=>uWt});var aWt="copilot",cWt="GitHub Copilot",lWt="Your AI pair programmer",uWt="1.371.0",dWt="1784",fWt="prod",pWt="GitHub",mWt=!1,hWt="https://github.com/features/copilot?editor=vscode",gWt="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",AWt={url:"https://github.com/microsoft/vscode/issues"},yWt="https://github.com/github-community/community/discussions/categories/copilot",CWt="assets/Copilot-App-Icon.png",vWt="Trial",xWt=["GitHub.copilot-chat","GitHub.copilot"],EWt={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},bWt=["AI","Chat","Programming Languages","Machine Learning"],IWt=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],TWt=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],wWt=["onStartupFinished"],_Wt="./dist/web",SWt="./dist/extension",RWt=["inlineCompletionsAdditions"],pve={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github-copilot-completions-debugger-view.refresh",title:"Refresh",icon:"$(refresh)"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],viewsContainers:{activitybar:[{id:"github-copilot-completions-debugger-panel",title:"Debugger",icon:"$(bug)",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator"}]},views:{"github-copilot-completions-debugger-panel":[{id:"github-copilot-completions-debugger-view",name:"Debugger",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator",icon:"$(bug)"}]},menus:{"view/title":[{command:"github-copilot-completions-debugger-view.refresh",when:"view == github-copilot-completions-debugger-view",group:"navigation"}]}},kWt={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/deviceFlow.ts --save-as-test-token",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},PWt={"@azure/identity":"^4.11.0","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.17.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^8.0.0","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.16.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.6.0","@yao-pkg/pkg":"^6.6.0",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^17.0.1",electron:"^28.1.4",esbuild:"^0.25.8","esbuild-plugin-copy":"^2.1.1",eslint:"^9.32.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",glob:"^11.0.3",globals:"^16.3.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.2.0",proxy:"^2.1.1","simple-git":"^3.28.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.9.2","typescript-eslint":"^8.39.1","vscode-dts":"^0.3.3","@vscode/tree-sitter-wasm":"0.0.5-php.2"},DWt={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@anthropic-ai/sdk":"^0.56.0","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.9","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.17.0","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.39","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^8.0.2",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.3",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.2.0","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.23.0","windows-ca-certs":"^0.2.2",yargs:"^17.7.2"},BWt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},NWt={name:aWt,displayName:cWt,description:lWt,version:uWt,build:dWt,buildType:fWt,publisher:pWt,preview:mWt,homepage:hWt,license:gWt,bugs:AWt,qna:yWt,icon:CWt,pricing:vWt,extensionPack:xWt,engines:EWt,categories:bWt,keywords:IWt,badges:TWt,activationEvents:wWt,browser:_Wt,main:SWt,enabledApiProposals:RWt,contributes:pve,scripts:kWt,devDependencies:PWt,dependencies:DWt,overrides:BWt};var $t={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",ToolConfirmAutoApprove:"agent.toolConfirmAutoApprove",MaxToolCallingLoop:"agent.maxToolCallingLoop",CompletionsDelay:"completionsDelay",CompletionsDebounce:"completionsDebounce",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",ShowWorkspaceContextDebugger:"internal.showWorkspaceContextDebugger",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function yGe(t){return["server","parsingandserver"].includes(t)}a(yGe,"shouldDoServerTrimming");var RA=class{static{a(this,"BlockModeConfig")}},r3=class extends RA{static{a(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let o=e.get(Lt).overrideBlockMode(n);if(o)return mve(o,r);let s=e.get(Lt).enableProgressiveReveal(n);return(Ki(e,$t.AlwaysRequestMultiline)??s)||zC.isTrimmedByDefault(r)?mve("moremultiline",r):r=="ruby"?"parsing":G0(r)?"parsingandserver":"server"}};function MWt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}a(MWt,"blockModeRequiresTreeSitter");function mve(t,e){return t==="moremultiline"&&mu.isSupported(e)?t:MWt(t)&&!G0(e)?"server":t}a(mve,"toApplicableBlockMode");var Oc=class{static{a(this,"ConfigProvider")}requireReady(){return Promise.resolve()}},n3=class extends Oc{constructor(){super(...arguments);this.onDidChangeCopilotSettings=a(()=>({dispose:a(()=>{},"dispose")}),"onDidChangeCopilotSettings");this.onDidChangeHttpSettings=this.onDidChangeCopilotSettings}static{a(this,"DefaultsOnlyConfigProvider")}getConfig(r){return FWt(r)}getOptionalConfig(r){return OWt(r)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}},ER=class extends Oc{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.copilotEmitter=new is;this.onDidChangeCopilotSettings=this.copilotEmitter.event;this.didChangeHttpSettingsEmitter=new is;this.onDidChangeHttpSettings=this.didChangeHttpSettingsEmitter.event;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{a(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){this.setCopilotSettings({[r]:n})}setCopilotSettings(r){for(let[n,o]of Object.entries(r))o!==void 0?this.overrides.set(n,o):this.overrides.delete(n);this.copilotEmitter.fire(this)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=VO(r);this.httpSettings=n,this.didChangeHttpSettingsEmitter.fire(this.getHttpSettings())}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[$t.ShowEditorCompletions,$t.EnableAutoCompletions,$t.DelayCompletions,$t.FilterCompletions]){let o=this.overrides.get(n);o!==void 0&&(r[n]=JSON.stringify(o))}return r}};function LWt(t){return t?.type==="object"&&"properties"in t}a(LWt,"isContributesObject");function CGe(t,e){let r=t,n=[];for(let o of e.split(".")){let s=[...n,o].join(".");r&&typeof r=="object"&&s in r?(r=r[s],n.length=0):n.push(o)}if(!(r===void 0||n.length>0))return r}a(CGe,"getConfigKeyRecursively");function FWt(t){if(t3.has(t))return t3.get(t);throw new Error(`Missing config default value: ${JF}.${t}`)}a(FWt,"getConfigDefaultForKey");function OWt(t){return t3.get(t)}a(OWt,"getOptionalConfigDefaultForKey");var t3=new Map([[$t.DebugOverrideCppHeadersEnableSwitch,!1],[$t.RelatedFilesVSCodeCSharp,!1],[$t.RelatedFilesVSCodeTypeScript,!1],[$t.RelatedFilesVSCode,!1],[$t.IncludeNeighboringFiles,!1],[$t.ExcludeRelatedFiles,!1],[$t.ContextProviders,[]],[$t.DebugUseEditorFetcher,null],[$t.DebugUseElectronFetcher,null],[$t.DebugOverrideLogLevels,{}],[$t.DebugSnippyOverrideUrl,""],[$t.FetchStrategy,"auto"],[$t.ToolConfirmAutoApprove,!1],[$t.MaxToolCallingLoop,25],[$t.UseSubsetMatching,null],[$t.ContextProviderTimeBudget,void 0],[$t.DebugOverrideCapiUrl,""],[$t.DebugTestOverrideCapiUrl,""],[$t.DebugOverrideProxyUrl,""],[$t.DebugTestOverrideProxyUrl,""],[$t.DebugOverrideEngine,""],[$t.AlwaysRequestMultiline,void 0],[$t.ModelAlwaysTerminatesSingleline,void 0],[$t.TrimCompletionsAggressively,void 0],[$t.CompletionsDebounce,void 0],[$t.NESXTab,void 0],[$t.UseWorkspaceContextCoordinator,void 0],[$t.ShowWorkspaceContextDebugger,!1],[$t.CompletionsDelay,void 0],[$t.UseSplitContextPrompt,void 0],[$t.UseCompletionsComparisonPanel,void 0],[$t.ComparisonPanelModelIds,void 0],[$t.ComparisonPanelRandomizedMode,void 0],[$t.ShowEditorCompletions,void 0],[$t.EnableAutoCompletions,void 0],[$t.DelayCompletions,void 0],[$t.FilterCompletions,void 0]]);for(let t of Object.values($t)){let e=pve.configuration[0],r=[],n=`${JF}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let o=e.properties[r.join(".")];if(LWt(o))r.length=0,e=o;else if(n.length==0&&o?.default!==void 0){if(t3.has(t))throw new Error(`Duplicate config default value ${JF}.${t}`);t3.set(t,o.default)}}if(!t3.has(t))throw new Error(`Missing config default value ${JF}.${t}`)}function Ki(t,e){return t.get(Oc).getConfig(e)}a(Ki,"getConfig");function K9e(t){return t.get(Oc).dumpForTelemetry()}a(K9e,"dumpForTelemetry");var wo=class{constructor(){this.packageJson=fve}static{a(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function Dpe(t){return t.get(wo).isProduction()}a(Dpe,"isProduction");function VD(t){return t.get(wo).getBuildType()==="dev"}a(VD,"isDevBuild");function TC(t){return t.get(wo).getBuildType()}a(TC,"getBuildType");function Y9e(t){return t.get(wo).getBuild()}a(Y9e,"getBuild");function y2(t){return t.get(wo).getVersion()}a(y2,"getVersion");var Fs=class{constructor(e,r,n="none",o="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=o}static{a(this,"EditorSession")}};function C0({name:t,version:e}){return`${t}/${e}`}a(C0,"formatNameAndVersion");var on=class{static{a(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}getEditorPluginSpecificFilters(){return[]}},zB="2025-05-01";function y0(t){let e=t.get(on);return{"Editor-Version":C0(e.getEditorInfo()),"Editor-Plugin-Version":C0(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":y2(t)}}a(y0,"editorVersionHeaders");var D0="Iv1.b507a08c87ecfe98",vGe="350ee525b5da0e4a54c6e8e043edc1b99cc02f19",uu=class{static{a(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??D0}};var Lr=class{static{a(this,"Fetcher")}getImplementation(){return this}};function Sx(t,e,r,n,o,s,c,l,u,d){let p={...l,Authorization:`Bearer ${r}`,...y0(t)};d===void 0&&(p["Openai-Organization"]="github-copilot",p["X-Request-Id"]=o,p["VScode-SessionId"]=t.get(Fs).sessionId,p["VScode-MachineId"]=t.get(Fs).machineId,p["X-GitHub-Api-Version"]=zB),n&&(p["OpenAI-Intent"]=n);let m={method:"POST",headers:p,json:s,timeout:u},h=t.get(Lr);if(c){let A=new AbortController;c.onCancellationRequested(()=>{Pt(t,"networking.cancelRequest",Kr.createAndMarkAsIssued({headerRequestId:o})),A.abort()}),m.signal=A.signal}return h.fetch(e,m).catch(A=>{if(QWt(A))return Pt(t,"networking.disconnectAll"),h.disconnectAll().then(()=>h.fetch(e,m));throw A})}a(Sx,"postRequest");function QWt(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}a(QWt,"isInterruptedNetworkError");var UWt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function qWt(t){return UWt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}a(qWt,"isOomError");function PT(t,e,r,n=pn){if(!kd(e)){if(e instanceof Error){let o=e;qWt(o)?t.get(Wo).setWarning("Out of memory"):o.code==="EMFILE"||o.code==="ENFILE"?t.get(Wo).setWarning("Too many open files"):o.code==="CopilotPromptLoadFailure"?t.get(Wo).setWarning("Corrupted Copilot installation"):`${o.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Wo).setWarning("Worker unexpectedly exited"):o.syscall==="uv_cwd"&&o.code==="ENOENT"&&t.get(Wo).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}a(PT,"handleException");function xGe(t){process.addListener("uncaughtException",r=>{PT(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,PT(t,r,"unhandledRejection")}finally{e=!1}})}a(xGe,"registerDefaultHandlers");async function EGe(t){try{await vR}catch(e){PT(t,e,"initializeTokenizers")}}a(EGe,"waitForTokenizers");f();var DT=require("fs"),bGe=require("os"),IGe=Ne(require("path")),i3=require("process");var hi=class{static{a(this,"PersistenceManager")}},hve=class extends hi{constructor(r){super();this.directory=r}static{a(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,o){await DT.promises.mkdir(this.directory,{recursive:!0,mode:448});let s=`${this.directory}/${r}.json`,c;try{c=await zO.acquire(s);let l=await this.readJsonObject(r);l[n]=o,await DT.promises.writeFile(s,JSON.stringify(l)+`
`,{encoding:"utf8"})}finally{c&&await c()}}async delete(r,n){let o=`${this.directory}/${r}.json`,s;try{s=await zO.acquire(o);let c=await this.readJsonObject(r);delete c[n];let l=JSON.stringify(c)+`
`;l===`{}
`?await DT.promises.rm(o):await DT.promises.writeFile(o,l,{encoding:"utf8"})}catch{}finally{s&&await s()}}async deleteSetting(r){let n=`${this.directory}/${r}.json`,o;try{o=await zO.acquire(n),await DT.promises.rm(n)}catch{}finally{o&&await o()}}async listSettings(){try{return(await DT.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let o=await DT.promises.readFile(n,{encoding:"utf8"});return JSON.parse(o)}catch{return{}}}},zO=class{static{a(this,"LockManager")}static{this.locks=new Map}static{this.DEFAULT_TIMEOUT_MS=1e4}static async acquire(e){await this.getLock(e);let r,n=new Promise(o=>{r=o});return this.locks.set(e,n),()=>Promise.resolve().then(()=>{r&&(r(),r=void 0,this.locks.get(e)===n&&this.locks.delete(e))})}static async getLock(e){let r=Date.now();for(;Date.now()-r<this.DEFAULT_TIMEOUT_MS;){let n=this.locks.get(e);if(!n)return;let o=this.DEFAULT_TIMEOUT_MS-(Date.now()-r);if(o<=0)return;let s=new Promise((c,l)=>{setTimeout(()=>{l(new Error("timeout"))},o)});try{await Promise.race([n,s])}catch{return}}}};function gve(){return i3.env.XDG_CONFIG_HOME&&IGe.isAbsolute(i3.env.XDG_CONFIG_HOME)?i3.env.XDG_CONFIG_HOME+"/github-copilot":(0,bGe.platform)()==="win32"?i3.env.USERPROFILE+"\\AppData\\Local\\github-copilot":i3.env.HOME+"/.config/github-copilot"}a(gve,"getXdgConfigPath");function TGe(){return new hve(gve())}a(TGe,"makeXdgPersistenceManager");f();f();f();var Rx={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var wGe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],_Ge={".php":[".blade"]},bR=Object.keys(Rx).flatMap(t=>Rx[t].extensions);var Ave=Ne(require("node:path"));var s3=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{a(this,"Language")}},KO=class{static{a(this,"LanguageDetection")}},yve=new Map,o3=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(Rx)){for(let n of e)yve.set(n,[...yve.get(n)??[],t]);for(let n of r??[])o3.set(n,[...o3.get(n)??[],t])}var Cve=class extends KO{static{a(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Mi(e.uri),n=Ave.extname(r).toLowerCase(),o=this.extensionWithoutTemplateLanguage(r,n),s=this.detectLanguageId(r,o),c=this.computeFullyQualifiedExtension(n,o);return s?new s3(s.languageId,s.isGuess,c):new s3(e.languageId,!0,c)}extensionWithoutTemplateLanguage(e,r){if(wGe.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),o=Ave.extname(n).toLowerCase();if(o.length>0&&bR.includes(o)&&this.isExtensionValidForTemplateLanguage(r,o))return o}return r}isExtensionValidForTemplateLanguage(e,r){let n=_Ge[e];return!n||n.includes(r)}detectLanguageId(e,r){if(o3.has(e))return{languageId:o3.get(e)[0],isGuess:!1};let n=yve.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),o3.has(e))return{languageId:o3.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},vve=class extends KO{constructor(r){super();this.delegate=r}static{a(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),o=n.languageId;return o==="c"||o==="cpp"?new s3("cpp",n.isGuess,n.fileExtension):n}},xve=class extends KO{constructor(r){super();this.delegate=r}static{a(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new s3(r.languageId,!0,""):this.delegate.detectLanguage(r)}},HWt=new vve(new xve(new Cve));function KC({uri:t,languageId:e}){let r=HWt.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}a(KC,"detectLanguage");f();f();f();f();function kx(t){if(t.isCancellationRequested)throw new VY}a(kx,"throwIfCancellationRequested");function KY(t){return t instanceof VY?!0:t instanceof Error&&t.name===Eve&&t.message===Eve}a(KY,"isCancellationError");var VY=class extends Error{static{a(this,"CancellationError")}constructor(){super(Eve),this.name=this.message}},Eve="Canceled",zY=class{constructor(){this.items=[]}static{a(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function IR(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}a(IR,"isTypeDefinition");var Ws=class t{static{a(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],o=this.start;for(o=RGe(e,e.length,o),SGe(n,r);o<this.end;)e[o]!=="\r"&&e[o]!==`
`?n.push(e[o++]):e[o]==="\r"&&o<e.length&&e[o+1]!==`
`||e[o]===`
`?(n.push(`
`),o=RGe(e,e.length,++o),SGe(n,r)):o++;return n.join("")}};function SGe(t,e){for(let r=0;r<e;r++)t.push(" ")}a(SGe,"appendIndent");function RGe(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}a(RGe,"consumeIndent");var vh=class{constructor(e,r,n,o,s,c,l,u,d){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=o;this.nameRange=s;this.bodyRange=c;this.extentRange=l;this.kind=u;this.refKind=d;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{a(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},dl=class t{constructor(){this.queriesCache=new Map}static{a(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await kT(this.languageId,e),o=n.getLanguage(),c=this.getOrCreateQuery(o,r).matches(n.rootNode);return{tree:n,matches:c}}async executeQuery(e,r,n){let o;try{o=await this.findMatches(r,n);let s=new zY,c=[];for(let l of o.matches){let u=this.createSymbolRange(s,e,r,l.captures);u&&c.push(u)}return c}catch{return[]}finally{o?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,o){let s=0,c=0,l=0,u=0,d=0,p=0,m=0,h=0,g=null,A=null;for(let b=0;b<o.length;b++){let I=o[b].name;I==="name"?(d=o[b].node.startIndex,p=o[b].node.endIndex):I==="reference"?(d=o[b].node.startIndex,p=o[b].node.endIndex,l=o[b].node.startIndex,u=o[b].node.endIndex,g=I):I==="body"?(m=o[b].node.startIndex,h=o[b].node.endIndex):I==="comment"?(s=s===0?o[b].node.startIndex:Math.min(s,o[b].node.startIndex),c=Math.max(c,o[b].node.endIndex)):I==="receiver"?A=Ws.fromBounds(o[b].node.startIndex,o[b].node.endIndex).getText(n):(l=o[b].node.startIndex,u=o[b].node.endIndex,g=I)}g==="definition.module.filescoped"&&(h=n.length,u=h);let y=Ws.fromBounds(l,u),v=l>0||u>0||d>0||p>0?new vh(r,"","",Ws.fromBounds(s,c),Ws.fromBounds(d,p),Ws.fromBounds(m,h),y,t.kindFromString(g),0):null;if(v){t.updateScopesForSymbol(e,v);let b=v.nameRange.getText(n),I=this.createNameFromScopes(n,e.toArray());return I=A?`${A}.${I}`:I,new vh(r,I,b.substring(b.lastIndexOf(".")+1),v.commentRange,v.nameRange,v.bodyRange,v.extentRange,v.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var YY=class extends dl{static{a(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,WWt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},JY=class extends dl{static{a(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,jWt)}async extractLocalReferences(e,r,n){let o=await this.executeQuery(e,r,GWt),s=o.filter(u=>u.kind!==9),c=o.filter(u=>u.kind===9&&u.extentRange.containsRange(n)),l=[];for(let u of c)l.push(...s.filter(d=>u.extentRange.containsRange(d.extentRange)));return l}},XY=class extends dl{static{a(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,$Wt),o=new Set;try{n.matches.forEach(s=>{let c,l,u;for(let d of s.captures)d.name==="import.name"?c=d:d.name==="alias"?l=d:d.name==="import"&&(u=d);if(c&&u){let d=this.cleanQuotedString(c.node.text),p=c.node.startIndex+1,m=c.node.endIndex-1,h=l?new Ws(l.node.startIndex,l.node.endIndex-l.node.startIndex):new Ws(p,m-p),g=new Ws(u.node.startIndex,u.node.endIndex-u.node.startIndex),A=Ws.empty,y=Ws.empty,v=d.substring(d.lastIndexOf("/")+1);o.add(new vh(e,d,v,A,h,y,g,17,0))}})}finally{n.tree.delete()}return o.size>0?[...o]:[]}},WWt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,$Wt=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,jWt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,GWt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var eJ=class extends dl{static{a(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,VWt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},tJ=class extends dl{static{a(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,KWt)}async extractLocalReferences(e,r,n){let o=await this.executeQuery(e,r,YWt),s=o.filter(u=>u.kind!==9),c=o.filter(u=>u.kind===9&&u.extentRange.containsRange(n)),l=[];for(let u of c)l.push(...s.filter(d=>u.extentRange.containsRange(d.extentRange)));return l}},rJ=class extends dl{static{a(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,zWt)).filter(o=>o.kind===0)}},VWt=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,zWt=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,KWt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,YWt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var JWt=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),nJ=class extends dl{static{a(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,XWt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},iJ=class extends dl{static{a(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,ZWt)).filter(o=>!JWt.has(o.unqualifiedName))}};var XWt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,ZWt=`
(call_expression function: (_) @name) @reference
`;f();var e$t=new Set(["int","str","float","bool","list","dict","tuple","set"]),oJ=class extends dl{static{a(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,t$t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},sJ=class extends dl{static{a(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,r$t)).filter(o=>!e$t.has(o.unqualifiedName))}async extractLocalReferences(e,r,n){let o=await this.executeQuery(e,r,i$t),s=o.filter(u=>u.kind!==9),c=o.filter(u=>u.kind===9&&u.extentRange.containsRange(n)),l=[];for(let u of c)l.push(...s.filter(d=>u.extentRange.containsRange(d.extentRange)));return l}},aJ=class extends dl{static{a(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,n$t),o=new Set;try{n.matches.forEach(s=>{let c,l,u,d;for(let p of s.captures)p.name==="import.name"?c=p:p.name==="import.module"?u=p:p.name==="alias"?l=p:p.name==="import"&&(d=p);if(u&&d){let p=c||u,m=l?new Ws(l.node.startIndex,l.node.endIndex-l.node.startIndex):new Ws(p.node.startIndex,d.node.endIndex-p.node.endIndex),h=new Ws(d.node.startIndex,d.node.endIndex-d.node.startIndex),g=Ws.empty,A=Ws.empty,y=p.node.text,v=y.split(".").pop()||y,b;c?b=`${u.node.text}.${c.node.text}`:b=u.node.text,o.add(new vh(e,b,v,g,m,A,h,17,0))}})}finally{n.tree.delete()}return o.size>0?[...o]:[]}},t$t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,r$t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,n$t=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,i$t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var o$t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),a3=class extends dl{static{a(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,s$t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},c3=class extends dl{static{a(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,a$t)).filter(o=>!o$t.has(o.unqualifiedName))}extractLocalReferences(){return Promise.reject(new Error("Method not implemented."))}};var s$t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,a$t=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var c$t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),cJ=class extends a3{static{a(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,l$t),super.extractSymbols(e,r)]).then(([n,o])=>[...n,...o])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},lJ=class extends c3{static{a(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,o]=await Promise.all([this.executeQuery(e,r,u$t),super.extractReferences(e,r)]);return[...n.filter(s=>!c$t.has(s.unqualifiedName)),...o]}},l$t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,u$t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var YO=[{symbolExtractor:new eJ,referenceExtractor:new tJ,importExtractor:new rJ,languageId:"java"},{symbolExtractor:new YY,referenceExtractor:new JY,importExtractor:new XY,languageId:"go"},{symbolExtractor:new oJ,referenceExtractor:new sJ,importExtractor:new aJ,languageId:"python"},{symbolExtractor:new a3,referenceExtractor:new c3,languageId:"typescript"},{symbolExtractor:new cJ,referenceExtractor:new lJ,languageId:"typescriptreact"},{symbolExtractor:new nJ,referenceExtractor:new iJ,languageId:"javascript"}];function kGe(t){let e=KC({uri:t});if(e&&YO.some(r=>e===r.languageId))return e}a(kGe,"getSupportedLanguageIdForMultiLanguageProvider");var PGe=new Map(YO.map(t=>[t.languageId,t.referenceExtractor])),uJ=new Map(YO.map(t=>[t.languageId,t.symbolExtractor])),DGe=new Map(YO.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),bve=YO.map(t=>Rx[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();f();function Ive(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}a(Ive,"virtualNode");function BGe(t,e,r,n,o){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:o}}a(BGe,"lineNode");function Tve(t){return{type:"blank",lineNumber:t,subs:[]}}a(Tve,"blankNode");function dJ(t){return{type:"top",indentation:-1,subs:t??[]}}a(dJ,"topNode");function sd(t){return t.type==="blank"}a(sd,"isBlank");function TR(t){return t.type==="line"}a(TR,"isLine");function wR(t){return t.type==="virtual"}a(wR,"isVirtual");f();function NGe(t,e){return Wd(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}a(NGe,"clearLabelsIf");function _R(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>_R(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>_R(r,e)),label:t.label?e(t.label):void 0}}}a(_R,"mapLabels");function Wd(t,e,r){function n(o){r==="topDown"&&e(o),o.subs.forEach(s=>{n(s)}),r==="bottomUp"&&e(o)}a(n,"_visit"),n(t)}a(Wd,"visitTree");function wve(t,e,r,n){let o=e;function s(c){o=r(c,o)}return a(s,"visitor"),Wd(t,s,n),o}a(wve,"foldTree");function fJ(t,e,r){let n=a(s=>{if(r!==void 0&&r(s))return s;{let c=s.subs.map(n).filter(l=>l!==void 0);return s.subs=c,e(s)}},"rebuild"),o=n(t);return o!==void 0?o:dJ()}a(fJ,"rebuildTree");f();function f$t(t){let e=t.split(`
`),r=e.map(d=>d.match(/^\s*/)[0].length),n=e.map(d=>d.trimLeft());function o(d){let[p,m]=s(d+1,r[d]);return[BGe(r[d],d,n[d],p),m]}a(o,"parseNode");function s(d,p){let m,h=[],g=d,A;for(;g<n.length&&(n[g]===""||r[g]>p);)if(n[g]==="")A===void 0&&(A=g),g+=1;else{if(A!==void 0){for(let y=A;y<g;y++)h.push(Tve(y));A=void 0}[m,g]=o(g),h.push(m)}return A!==void 0&&(g=A),[h,g]}a(s,"parseSubs");let[c,l]=s(0,-1),u=l;for(;u<n.length&&n[u]==="";)c.push(Tve(u)),u+=1;if(u<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${u} out of ${n.length}`);return dJ(c)}a(f$t,"parseRaw");function JO(t,e){function r(n){if(TR(n)){let o=e.find(s=>s.matches(n.sourceLine));o&&(n.label=o.label)}}a(r,"visitor"),Wd(t,r,"bottomUp")}a(JO,"labelLines");function pJ(t){function e(r){if(wR(r)&&r.label===void 0){let n=r.subs.filter(o=>!sd(o));n.length===1&&(r.label=n[0].label)}}a(e,"visitor"),Wd(t,e,"bottomUp")}a(pJ,"labelVirtualInherited");function XO(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=a(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}a(XO,"buildLabelRules");function _ve(t){let r=fJ(t,a(function(n){if(n.subs.length===0||n.subs.findIndex(c=>c.label==="closer"||c.label==="opener")===-1)return n;let o=[],s;for(let c=0;c<n.subs.length;c++){let l=n.subs[c],u=n.subs[c-1];if(l.label==="opener"&&u!==void 0&&TR(u))u.subs.push(l),l.subs.forEach(d=>u.subs.push(d)),l.subs=[];else if(l.label==="closer"&&s!==void 0&&(TR(l)||wR(l))&&l.indentation>=s.indentation){let d=o.length-1;for(;d>0&&sd(o[d]);)d-=1;if(s.subs.push(...o.splice(d+1)),l.subs.length>0){let p=s.subs.findIndex(A=>A.label!=="newVirtual"),m=s.subs.slice(0,p),h=s.subs.slice(p),g=h.length>0?[Ive(l.indentation,h,"newVirtual")]:[];s.subs=[...m,...g,l]}else s.subs.push(l)}else o.push(l),sd(l)||(s=l)}return n.subs=o,n},"rebuilder"));return NGe(t,n=>n==="newVirtual"),r}a(_ve,"combineClosersAndOpeners");function MGe(t,e=sd,r){return fJ(t,a(function(o){if(o.subs.length<=1)return o;let s=[],c=[],l,u=!1;function d(p=!1){if(l!==void 0&&(s.length>0||!p)){let m=Ive(l,c,r);s.push(m)}else c.forEach(m=>s.push(m))}a(d,"flushBlockIntoNewSubs");for(let p=0;p<o.subs.length;p++){let m=o.subs[p],h=e(m);!h&&u&&(d(),c=[]),u=h,c.push(m),sd(m)||(l=l??m.indentation)}return d(!0),o.subs=s,o},"rebuilder"))}a(MGe,"groupBlocks");function SR(t){return fJ(t,a(function(r){return wR(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&wR(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}a(SR,"flattenVirtual");var p$t={opener:/^[[({]/,closer:/^[\])}]/},m$t=XO(p$t),LGe={};function Sve(t,e){LGe[t]=e}a(Sve,"registerLanguageSpecificParser");function RR(t,e){let r=f$t(t),n=LGe[e??""];return n?n(r):(JO(r,m$t),_ve(r))}a(RR,"parseTree");var h$t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},g$t=XO(h$t);function FGe(t){let e=t;return JO(e,g$t),e=_ve(e),e=SR(e),pJ(e),Wd(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!sd(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}a(FGe,"processJava");f();var A$t={heading:/^# /,subheading:/^## /,subsubheading:/### /},y$t=XO(A$t);function OGe(t){let e=t;if(JO(e,y$t),sd(e))return e;function r(s){if(s.label==="heading")return 1;if(s.label==="subheading")return 2;if(s.label==="subsubheading")return 3}a(r,"headingLevel");let n=[e],o=[...e.subs];e.subs=[];for(let s of o){let c=r(s);if(c===void 0||sd(s))n[n.length-1].subs.push(s);else{for(;n.length<c;)n.push(n[n.length-1]);for(n[c-1].subs.push(s),n[c]=s;n.length>c+1;)n.pop()}}return e=MGe(e),e=SR(e),pJ(e),e}a(OGe,"processMarkdown");f();function QGe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}a(QGe,"deparseLine");Sve("markdown",OGe);Sve("java",FGe);var C$t={worthUp:.9,worthSibling:.88,worthDown:.8};function Rve(t,e,r=Xi(),n=C$t){let o=_R(t,s=>s?1:void 0);return Wd(o,s=>{if(sd(s))return;let c=s.subs.reduce((l,u)=>Math.max(l,u.label??0),0);s.label=Math.max(s.label??0,c*n.worthUp)},"bottomUp"),Wd(o,s=>{if(sd(s))return;let c=s.subs.map(d=>d.label??0),l=[...c];for(let d=0;d<c.length;d++)c[d]!==0&&(l=l.map((p,m)=>Math.max(p,Math.pow(n.worthSibling,Math.abs(d-m))*c[d])));let u=s.label;u!==void 0&&(l=l.map(d=>Math.max(d,n.worthDown*u))),s.subs.forEach((d,p)=>d.label=l[p])},"topDown"),v$t(o,e,r)}a(Rve,"fromTreeWithFocussedLines");function v$t(t,e,r=Xi()){let n=wve(t,[],(o,s)=>((o.type==="line"||o.type==="blank")&&s.push(o.type==="line"?[QGe(o).trimEnd(),o.label??0]:["",o.label??0]),s),"topDown");return new Ht(n,e,r)}a(v$t,"fromTreeWithValuedLines");function V0(t,e=!0,r=!0,n,o=Xi()){let s=typeof t=="string"?RR(t):RR(t.source,t.languageId);SR(s);let c=_R(s,l=>e&&l!=="closer");return Wd(c,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&Wd(c,l=>{if(l.label){let u=!1;for(let d of[...l.subs].reverse())d.label&&!u?u=!0:d.label=!1}else for(let u of l.subs)u.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),r&&Wd(c,l=>{l.label||=(TR(l)||sd(l))&&l.lineNumber==0},"topDown"),Rve(c,n,o)}a(V0,"elidableTextForSourceCode");f();var ZO=class t{constructor(e,r,n,o="strict",s){this.text=e;this._value=r;this._cost=n;this.metadata=s;this.markedForRemoval=!1;if(e.includes(`
`)&&o!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&o!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&o!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(o=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{a(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>Xi().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Ht=class t{constructor(e,r,n=Xi()){this.metadata=r;this.tokenizer=n;this.lines=[];let o=[];for(let s of e){let c=Array.isArray(s)?s[1]:1,l=Array.isArray(s)?s[0]:s;typeof l=="string"?l.split(`
`).forEach(u=>o.push(new ZO(u,c,n.tokenLength(u+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(u=>o.push(u.copy().adjustValue(c))):"source"in l&&"languageId"in l&&V0(l).lines.forEach(u=>o.push(u.copy().adjustValue(c)))}this.lines=o}static{a(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>Xi().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,o="removeLeastDesirable",s=this.tokenizer,c="topToBottom"){if(s.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:l,totalCost:u,priorityQueue:d}=E$t(this.lines,o);if(u<=e)return kve(l);b$t(d,c);let p=u;for(;p>e&&d.length>0;){let h=d.shift().originalIndex,g=l[h];if(g.markedForRemoval)continue;let A=n?I$t(l,h):"",y=UGe(A,r,s,g);l[h]=y,p-=g.cost,p+=y.cost;let v=h+1;if(v<l.length){let I=l[v];mJ(I,r)&&(p-=I.cost,I.markedForRemoval=!0)}let b=h-1;if(b>=0){let I=l[b];mJ(I,r)&&(p-=I.cost,I.markedForRemoval=!0)}}if(p>e)return kve([UGe("",r,s)]);let m=l.filter(h=>!h.markedForRemoval);for(let h=m.length-1;h>0;h--)mJ(m[h],r)&&mJ(m[h-1],r)&&m.splice(h,1);return kve(m)}};function x$t(t){return t?.text.match(/^\s*/)?.[0]??""}a(x$t,"getIndentation");function mJ(t,e){return t?.text.trim()===e.trim()}a(mJ,"isEllipsis");function kve(t){return{getText:a(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:a(()=>t,"getLines")}}a(kve,"produceElidedText");function E$t(t,e){let r=0,n=[];return{lines:t.map((s,c)=>{let l=s.copy();return e==="removeLeastBangForBuck"&&l.adjustValue(1/l.cost),r+=l.cost,n.push({originalIndex:c,value:l.value}),l}),totalCost:r,priorityQueue:n}}a(E$t,"initializeElisionContext");function b$t(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}a(b$t,"sortPriorityQueue");function I$t(t,e){let r="";for(let n=e;n>=0;n--){let o=t[n];if(!o.markedForRemoval&&o.text.trim()!==""){r=x$t(o);break}}return r}a(I$t,"getClosestIndentation");function UGe(t,e,r,n){let o=t+e;return new ZO(o,1/0,r.tokenLength(o+`
`),"loose",n?.metadata)}a(UGe,"getNewEllipsis");f();var qGe=require("fs");async function HGe(t,e,r,n,o){let s=new Map,c=0;for(let m of t){let h=m.node.fileName.toLowerCase(),g=s.get(h);g?g.symbols.push(m):s.set(h,{symbols:[m],topRank:c}),c++}if(s.delete(r.toLowerCase()),s.size===0)return[];let l=e,u=e/Math.min(4,s.size),d=[],p=Array.from(s.keys());p.sort((m,h)=>{let g=s.get(m).topRank,A=s.get(h).topRank;return g-A});for(let m of p){let h=s.get(m).symbols;if(h.length===0)continue;let g=h[0].node.fileName,A=h.reduce((y,v)=>y+v.node.extentRange.length,0);for(let y of h){if(l<=5)return d;kx(o);let v=y.node.extentRange.length/A,b=Math.min(l,v*u),I=(await T$t([y])).elide(b).getText();l-=n.tokenLength(I),d.push({uri:g,value:I})}}return d}a(HGe,"symbolRangesToCodeSnippets");async function T$t(t){if(t.length===0)return new Ht([]);let e=t[0].node.fileName,r=[],n="";try{let o=ns(e);o&&(n=(await qGe.promises.readFile(o)).toString())}catch{}for(let o of t)WGe(o,n).forEach(s=>r.push(s));return new Ht(r)}a(T$t,"sameFileSymbolRangeToElidableText");function WGe(t,e){let n=[],o=t.node,s=e.substring(Pve(e,o.commentRange.start),o.commentRange.end);n.push([Dve(s),1-3e-4]);let c=Pve(e,o.bodyRange.start),l=Pve(e,o.extentRange.start),u=o.bodyRange.length===0?e.substring(l,o.extentRange.end):e.substring(o.commentRange.length===0?l:o.commentRange.end,c);if(IR(o.kind)&&(u="BEGIN "+u.trimStart()),n.push([Dve(u),1-1e-4]),t.children.length>0)for(let d of t.children)n.push(...WGe(d,e));else{let d=1-(IR(t.node.kind)?3e-4:4e-4),p=e.substring(c,o.bodyRange.end);n.push([Dve(p),d])}return IR(o.kind)&&n.push(["END "+u.substring(6),1-1e-4]),n.filter(d=>d[0].length>0)}a(WGe,"prepareForElidableText");function Pve(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}a(Pve,"shiftLeftToNearestLineEndingOrAlphanumeric");function Dve(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}a(Dve,"trimLineEndingsAndTrailingWhitespace");var Bve=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{a(this,"ContextRetrievalStrategy")}},BT=class extends Bve{static{a(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,o){super(e,r),this.caseSensitive=n,this.typesOnly=o}async getContextAtPositionAsync(e,r,n,o,s,c){let l=this.referenceExtractors.get(o);if(!l)return[];kx(c);let u=await l.extractReferences(e,r);kx(c);let d=Array.from(u);d.sort((g,A)=>this.compareSymbolRangesByProximityToCaret(g,A,n));let p=[],m=new Set,h=await this.findDefinitionsViaUnqualifiedNames(d,s,c);this.typesOnly&&(h=h.filter(g=>IR(g.kind)));for(let g of h)m.has(JSON.stringify(g))||(m.add(JSON.stringify(g)),p.push(await this.makeSymbolRangeNodeFromDefinition(g,c)));return p}async findDefinitionsViaUnqualifiedNames(e,r,n){let o=Array.from(new Set(e.map(m=>m.unqualifiedName))),s=!this.caseSensitive,c=await this.index.findPotentialDefinitionsAsync(o,s,n),l=a(m=>s?m.toLowerCase():m,"lowercaseIfCaseInsensitive"),u=a(m=>l(m.unqualifiedName),"getSymbolKey"),d=new Map;for(let m of c){let h=u(m),g=d.get(h)??[];d.set(h,[...g,m])}let p=[];for(let m of o){let h=d.get(l(m));if(!(!h||h.length>r.mlcpMaxSymbolMatches)){if(p.length+h.length>r.mlcpMaxContextItems){p.push(...h.slice(0,r.mlcpMaxContextItems-p.length));break}p.push(...h)}}return p}async makeSymbolRangeNodeFromDefinition(e,r){if(kx(r),IR(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),o=await Promise.all(n.map(s=>this.makeSymbolRangeNodeFromDefinition(s,r)));return{node:e,children:o}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let o=e.extentRange.end<=n,s=r.extentRange.end<=n;if(o&&!s)return-1;if(!o&&s)return 1;let c=Math.abs(e.extentRange.start-n),l=Math.abs(r.extentRange.start-n);return c-l}},hJ=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new BT(e,r,!0,!0)),this.strategies.set("java",new BT(e,r,!0,!0)),this.strategies.set("python",new BT(e,r,!0,!1)),this.strategies.set("typescript",new BT(e,r,!0,!0)),this.strategies.set("typescriptreact",new BT(e,r,!0,!0)),this.strategies.set("javascript",new BT(e,r,!0,!1))}static{a(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,o,s,c,l){let u=await this.getContextAtPositionAsync(e,r,n,o,s,l);kx(l);let d=Xi();return HGe(u,c,e,d,l)}async getContextAtPositionAsync(e,r,n,o,s,c){return this.strategies.has(o)?this.strategies.get(o).getContextAtPositionAsync(e,r,n,o,s,c):[]}};f();f();f();f();var kR={Id:"id"},z0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},mo={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var gJ=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new Nve(kR.Id)}static{a(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},e7=class t extends gJ{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${z0.FilePath}');`]);this.fields=[new n7(z0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new Rp(z0.LastWriteTimeUtc,{notNull:!0})]}static{a(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},t7=class t extends gJ{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${mo.DocumentId}', '${mo.ExtentStart}', '${mo.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${mo.UnqualifiedName}');`],`FOREIGN KEY(${mo.DocumentId}) REFERENCES Document(${kR.Id}) ON DELETE CASCADE`);this.fields=[new Rp(mo.DocumentId),new n7(mo.FullyQualifiedName,{notNull:!0}),new n7(mo.UnqualifiedName,{notNull:!0}),new Rp(mo.CommentStart,{notNull:!0}),new Rp(mo.CommentLength,{notNull:!0}),new Rp(mo.NameStart,{notNull:!0}),new Rp(mo.NameLength,{notNull:!0}),new Rp(mo.BodyStart,{notNull:!0}),new Rp(mo.BodyLength,{notNull:!0}),new Rp(mo.ExtentStart,{notNull:!0}),new Rp(mo.ExtentLength,{notNull:!0}),new Rp(mo.SymbolKind,{notNull:!0}),new Rp(mo.RefKind,{notNull:!0})]}static{a(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},r7=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{a(this,"SQLField")}},n7=class extends r7{static{a(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,o=this.unique?"UNIQUE":void 0,s=[e,r,n,o].filter(c=>c).join(" ");return`'${this.name}' VARCHAR(500) ${s}`}},Rp=class extends r7{static{a(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},Nve=class extends r7{static{a(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var AJ=class{static{a(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=a(o=>new Promise((s,c)=>{e.run(o,l=>{l?c(l):s()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let o of n)await r(o)}async insert(e,r){let n=await this.init;n&&await new Promise((o,s)=>{let c=this.queryGenerator.insertQuery(r,e.length);n.run(c,e.map(l=>Object.values(l)).flat(),function(l){l?s(l):o(this)})})}async getAllRows(){let e=await this.init;return e?xh(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return xh(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${kR.Id} = ?`,[e])}},Px=class t extends AJ{static{a(this,"DocumentTable")}static{this.tableName=e7.tableName}createQueryGenerator(){return new e7}async updateTimestamp(e,r){let n=await this.init;n&&await xh(n,`UPDATE ${t.tableName} SET ${z0.LastWriteTimeUtc} = ? WHERE ${z0.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await xh(r,`DELETE FROM ${t.tableName} WHERE ${z0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?xh(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${z0.FilePath} = ?`,[e]):[]}},fl=class t extends AJ{static{a(this,"SymbolTable")}static{this.tableName=t7.tableName}createQueryGenerator(){return new t7}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return xh(r,`DELETE FROM ${t.tableName} WHERE ${mo.DocumentId} = ?`,[e])}};async function xh(t,e,r){return new Promise((n,o)=>t.all(e,r,(s,c)=>{s&&o(s),n(c)}))}a(xh,"runPromisifiedDBQuery");var vJ=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${Px.tableName} ON ${fl.tableName}.${mo.DocumentId} = ${Px.tableName}.${kR.Id}`;this.db=this.initDb(e),this.documentTable=new Px(this.db),this.symbolTable=new fl(this.db)}static{a(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Ne(tVe()))}catch(o){console.error("Error loading sqlite3 module:",o);return}let n;try{n=await new Promise((o,s)=>{let c=new r.default.Database(e,l=>{l?s(l):o(c)})})}catch(o){console.error("Error initializing database:",o);return}return await xh(n,"pragma journal_mode=wal",[]),await xh(n,"pragma synchronous=normal",[]),await xh(n,"pragma optimize=0x10002",[]),await xh(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(o=>o?n(o):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${fl.tableName}`,this.innerJoinStatement,`WHERE ${mo.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${mo.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),o=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${fl.tableName}`,this.innerJoinStatement,`WHERE ${mo.UnqualifiedName} ${o}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${fl.tableName}`,this.innerJoinStatement,`WHERE ${mo.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${fl.tableName}`,this.innerJoinStatement,`WHERE ${Px.tableName}.${z0.FilePath} = ? AND ${fl.tableName}.${mo.ExtentStart} <= ? AND (${fl.tableName}.${mo.ExtentStart} + ${fl.tableName}.${mo.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${fl.tableName}`,this.innerJoinStatement,`WHERE ${Px.tableName}.${z0.FilePath} = ? AND ${fl.tableName}.${mo.ExtentStart} >= ? AND (${fl.tableName}.${mo.ExtentStart} + ${fl.tableName}.${mo.ExtentLength}) <= ?`,`ORDER BY ${fl.tableName}.${mo.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${fl.tableName}`,this.innerJoinStatement,`WHERE ${Px.tableName}.${z0.FilePath} = ? AND ${fl.tableName}.${mo.FullyQualifiedName} LIKE ?`,`ORDER BY ${fl.tableName}.${mo.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,xh(n,e,r)):[]}};var xJ=class{static{a(this,"SQLStorageReaderWriter")}constructor(e){this.database=new vJ(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let o=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(o.id),n.length>0&&await this.database.insertSymbols(n.map(s=>({documentId:o.id,fullyQualifiedName:s.fullyQualifiedName,unqualifiedName:s.unqualifiedName,commentStart:s.commentRange.start,commentLength:s.commentRange.length,nameStart:s.nameRange.start,nameLength:s.nameRange.length,bodyStart:s.bodyRange.start,bodyLength:s.bodyRange.length,extentStart:s.extentRange.start,extentLength:s.extentRange.length,symbolKind:s.kind,refKind:s.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return d3(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let o=[],c=0;for(;c<e.length;){let l=e.slice(c,c+500);c+=500;let u=await this.database.querySymbolsUsingUnqualifiedNames(l,r);o.push(...u),kx(n)}return d3(o)}async getDefinitionsAsync(e){return d3(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return d3(n)}async findSymbolsContainedByRangeAsync(e,r,n){return d3(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return d3(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let o=await this.database.getDocument(e);if(!o)throw Error("Unable to insert document");return o[0]}};function d3(t){return t.map(e=>new vh(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Ws(e.commentStart,e.commentLength),new Ws(e.nameStart,e.nameLength),new Ws(e.bodyStart,e.bodyLength),new Ws(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}a(d3,"symbolsToSymbolRanges");var bJ=Ne(require("fs/promises"));var EJ=class{static{a(this,"Index")}constructor(e,r,n,o){this.storage=new xJ(e),this.symbolExtractors=r,this.importExtractors=n,this.params=o}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=ns(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let o;try{o=await bJ.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let s=o.mtimeMs,c=await this.storage.getDocumentAsync(e);if(c&&c.lastWriteTimeUtc>=s)return;let l=this.symbolExtractors.get(r);if(!l)return;let u=(await bJ.readFile(n)).toString(),d=await l.extractSymbols(e,u),p=d;if(this.params?.mlcpEnableImports){let m=this.importExtractors.get(r);if(m){let h=await m.extractSymbols(e,u);p=[...d,...h]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,s,p)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};f();function Uve(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>D$t(r))}a(Uve,"isIndexWorkerData");var o7=class{static{a(this,"IndexNotification")}constructor(e){this.operation=e}},NT=class extends o7{constructor(r,n){super(n);this.id=r;this.id=r}static{a(this,"IndexRequest")}},IJ=class extends o7{constructor(r){super($d.Cancel);this.messageIdToCancel=r}static{a(this,"CancellationNotification")}},$d={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},TJ=class extends NT{constructor(r,n,o){super(r,$d.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=o}static{a(this,"CreateIndexRequest")}},wJ=class extends NT{constructor(r,n){super(r,$d.RemoveIndex);this.baseWorkspaceFolderUri=n}static{a(this,"RemoveIndexRequest")}},_J=class extends NT{constructor(r,n,o){super(r,$d.AddOrInvalidated);this.fileUri=n;this.languageId=o}static{a(this,"AddOrInvalidatedRequest")}},SJ=class extends NT{constructor(r,n){super(r,$d.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{a(this,"GetAllDocumentsRequest")}},RJ=class extends NT{constructor(r,n,o,s,c,l){super(r,$d.GetContext);this.fileUri=n;this.code=o;this.offset=s;this.languageId=c;this.params=l}static{a(this,"GetContextRequest")}},kJ=class extends NT{static{a(this,"ExitRequest")}constructor(e){super(e,$d.Exit)}},kA=class extends o7{constructor(r,n,o){super($d.Response);this.id=r;this.error=n;this.data=o;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{a(this,"ResponseMessage")}};function D$t(t){return"databaseFilePath"in t&&"rootPath"in t}a(D$t,"isIndexableWorkspaceFolder");var rVe=Ne(mi()),MT=require("worker_threads");var PJ=class{static{a(this,"IndexInfo")}constructor(e,r){this.index=new EJ(e,uJ,DGe,r),this.contextRetreival=new hJ(this.index.reader,PGe)}},qve=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let o of r){let s=Pa(o.rootPath);this.indices.set(s,new PJ(o.databaseFilePath,n))}this.port=e,this.port.on("message",o=>void this.dispatchMessage(o,this.indices,this.cancellationTokens))}static{a(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let o=new rVe.CancellationTokenSource;n.set(e.id,o);let s;switch(e.operation){case $d.AddOrInvalidated:s=await t.dispatchAddOrInvalidate(e,r,o.token);break;case $d.GetContext:s=await t.dispatchGetContext(e,r,o.token);break;case $d.Cancel:n.get(e.id)?.cancel(),s=new kA(e.id,void 0,void 0);break;case $d.Exit:s=await this.dispatchExit(e,r,o.token);break;case $d.CreateIndex:s=t.dispatchCreateIndex(e,r,o.token);break;case $d.RemoveIndex:s=await t.dispatchRemoveIndex(e,r,o.token);break;case $d.GetAllDocumentsInWorkspace:s=await t.GetAllDocumentsInWorkspaceRequest(e,r,o.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}s&&this.port?.postMessage(s),n.get(e.id)?.dispose(),n.delete(e.id)}catch(o){if(!(o instanceof Error))throw o;this.port?.postMessage(new kA(e.id,o,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let o=Pa(e.baseWorkspaceFolderUri),s,c;return r.has(o)?c=await r.get(o).index.getDocumentFilePaths():s=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new kA(e.id,s,c)}static async dispatchAddOrInvalidate(e,r,n){let o=Pa(e.fileUri),s=t.getIndexInfo(o,r)?.index,c;return s?await s.indexFile(e.fileUri,e.languageId):c=new Error(`Index not found for ${e.fileUri}`),new kA(e.id,c,void 0)}static async dispatchGetContext(e,r,n){let o=Pa(e.fileUri),s=t.getIndexInfo(o,r)?.contextRetreival,c,l;return s?l=await s.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):c=new Error(`ContextRetrieval not found for ${e.fileUri}`),new kA(e.id,c,l)}async dispatchExit(e,r,n){for(let o of r.values())await o.index.dispose();r.clear(),this.port?.postMessage(new kA(e.id,void 0,void 0)),this.port?.close()}static dispatchCreateIndex(e,r,n){let o=Pa(e.baseWorkspaceFolderUri);return r.has(o)||r.set(o,new PJ(e.databaseFilePath)),new kA(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let o=Pa(e.baseWorkspaceFolderUri);if(r.has(o)){let s=r.get(o);s&&await s.index.dispose(),r.delete(o)}return new kA(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,o]of r)if(e.startsWith(n))return o}};function nVe(){return Uve(MT.workerData)}a(nVe,"isIndexWorker");function iVe(){let t=MT.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!Uve(MT.workerData))throw new Error("Worker data must provide a valid database path.");let e=MT.workerData.cwd;process.cwd=()=>e,new qve(t,MT.workerData.indexWorkspaceRoots,MT.workerData.params)}a(iVe,"runIndexWorker");f();f();var s7=require("fs"),oVe=require("path");var LT=class extends Ui{static{a(this,"LocalFileSystem")}async readFileString(e){return(await s7.promises.readFile(Pa(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:o}=await this.statWithLink(Pa(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,o)}}async readDirectory(e){let r=Pa(e),n=await s7.promises.readdir(r,{withFileTypes:!0}),o=[];for(let s of n){let{targetStat:c,lstat:l,stat:u}=await this.statWithLink((0,oVe.join)(r,s.name));o.push([s.name,this.getFileType(c,l,u)])}return o}async statWithLink(e){let r=await s7.promises.lstat(e);if(r.isSymbolicLink())try{let n=await s7.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let o=0;return e.isFile()&&(o=1),e.isDirectory()&&(o=2),r.isSymbolicLink()&&n&&(o|=64),o}};f();f();var kp=class{constructor(){this.resolve=a(()=>{},"resolve");this.reject=a(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{a(this,"Deferred")}};function YC(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}a(YC,"delay");async function B$t(t){if(t.isCancellationRequested)return;let e=new kp,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}a(B$t,"cancellationTokenToPromise");async function sVe(t,e){if(e){let r=B$t(e);await Promise.race([t,r])}else await t}a(sVe,"raceCancellation");function Hve(t){return Array.isArray(t)}a(Hve,"isArrayOfT");async function aVe(t,e){let r=new Map,n=[];for(let[o,s]of t.entries()){let c=(async()=>{let l=await Wve(s,e);r.set(o,l)})();n.push(c)}return await Promise.allSettled(n.values()),r}a(aVe,"resolveAll");async function Wve(t,e){let r;return t instanceof Promise?r=await N$t(t,e):r=await M$t(t,e),r}a(Wve,"resolve");async function N$t(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},o=(async()=>{try{let s=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:Hve(s)?[...s]:[s]}}catch(s){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:s}}})();return await sVe(o,e),n.resolutionTime=performance.now()-r,n}a(N$t,"resolvePromise");async function M$t(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},o=(async()=>{try{for await(let s of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(s)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(s){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:s}}})();return await sVe(o,e),n.resolutionTime=performance.now()-r,n}a(M$t,"resolveIterable");f();f();var DJ="[...]",L$t=0,Pp=-1;function rc(){return L$t++}a(rc,"getAvailableNodeId");function F$t(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,o])=>n===0?o:r[n-1]+o).join("")}a(F$t,"elideChildren");function cVe(t,e=DJ){return r=>t.tokenLength(F$t(r,e))}a(cVe,"getTokenizerCostFunction");f();var FT=class{static{a(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let o=this.heap.length-1;this.siftUp(o)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){for(;e<this.size-1;){let r=e,n=2*e+1,o=n+1;if(n<this.size&&this.heap[n].priority>this.heap[r].priority&&(r=n),o<this.size&&this.heap[o].priority>this.heap[r].priority&&(r=o),r===e)break;let s=this.heap[e];this.heap[e]=this.heap[r],this.heap[r]=s,e=r}}};function O$t(t){let e={id:t.id??rc(),text:t.text??new Array((t.children?.length??0)+1).fill(""),children:t.children??[],cost:t.cost??1,weight:t.weight??0,rectifiedWeight:t.rectifiedWeight,canMerge:t.canMerge??!1,elisionMarker:t.elisionMarker??DJ,requireRenderedChild:t.requireRenderedChild??!1};if(e.text.length!==e.children.length+1)throw new Error(`RenderNode text length (${e.text.length}) must be children length + 1 (${e.children.length+1})`);return e}a(O$t,"createRenderNode");function Q$t(t){return t.requireRenderedChild||(t.rectifiedWeight??t.weight)>t.weight}a(Q$t,"isRenderedChildRequired");function lVe(t){return(t.rectifiedWeight??t.weight)/Math.max(t.cost,1)}a(lVe,"rectifiedValue");function a7(t,e){let r=uVe(t,e);for(let{item:n,priority:o}of r.clear())for(let s of n.nodes)s.rectifiedWeight=o*Math.max(s.cost,1)}a(a7,"rectifyWeights");function uVe(t,e){let r=t.children.map(s=>uVe(s,e));if(t.weight=Math.max(0,e?e(t):t.weight),t.weight===0&&r.reduce((s,c)=>s+c.size,0)===0)return new FT([]);let n=new FT(r.flatMap(s=>s.clear())),o={nodes:[t],totalCost:t.cost,totalWeight:t.weight};for(;(n.peek()?.priority??0)>o.totalWeight/Math.max(o.totalCost,1);){let{item:s}=n.pop();o.nodes.push(...s.nodes),o.totalCost+=s.totalCost,o.totalWeight+=s.totalWeight}return n.insert(o,o.totalWeight/Math.max(o.totalCost,1)),n}a(uVe,"recursivelyRectifyWeights");function dVe(t,e={}){let{budget:r,mask:n,costFunction:o}=e,s=n??[],c=new Set(Array.isArray(s)?s:[s]);if((r??t.cost)<t.cost||c.has(t.id))return{text:t.elisionMarker,cost:o?o(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map};if(r===void 0){let m=a(v=>c.has(v.id),"elider"),h=[],g=new Map;if(jve(t,h,m,g),h.length===0)return $ve(t,o);let A=h.join(""),y=o?o(A):[...g.values()].reduce((v,b)=>v+b.cost,0);return{text:A,cost:y,renderedNodes:g}}let l=new Map,u=[],d=new FT([{item:t,priority:lVe(t)}]),p=r;for(;p>0&&d.size>0;){let{item:m}=d.pop();if(!c.has(m.id)&&m.cost<=p){p-=m.cost,l.set(m.id,m),u.push(m);for(let h of m.children)d.insert(h,lVe(h))}}for(;l.size>0;){let m=[],h=a(v=>!l.has(v.id),"elider"),g=new Map;if(jve(t,m,h,g),m.length===0)return $ve(t,o);let A=m.join("");if(o===void 0){let v=[...g.values()].reduce((b,I)=>b+I.cost,0);return{text:A,cost:v,renderedNodes:g}}let y=o(A);if(y<=r)return{text:A,cost:y,renderedNodes:g};for(l=g;u.length>0&&y>r;){let v=u.pop();l.has(v.id)&&(y-=v.cost,l.delete(v.id))}if(u.length===0)break}return $ve(t,o)}a(dVe,"render");function $ve(t,e){return{text:t.elisionMarker,cost:e?e(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map}}a($ve,"renderEmpty");function jve(t,e,r,n,o=!1){let s=e.length;if(r(t))return s>=2&&(o||e[s-2]===t.elisionMarker&&e[s-1].trim().length===0)?(e.pop(),!1):(e.push(t.elisionMarker),!1);let c=Q$t(t),l=!0;for(let[u,d]of t.children.entries())e.push(t.text[u]??""),l=jve(d,e,r,n,d.canMerge&&!l),c&&=!l;if(c){for(;e.length>s;)e.pop();return!1}return e.push(t.text[t.text.length-1]??""),n.set(t.id,t),!0}a(jve,"recursivelyRender");function c7(t,e,r=DJ){let n=t.children.map(c=>c7(c,e,r));r=t.elisionMarker??r;let o=e(t);return O$t({...t,children:n,cost:o,weight:0,elisionMarker:t.elisionMarker??r})}a(c7,"snapshot");var OT={id:rc(),text:[""],children:[],cost:0,weight:0,elisionMarker:"",canMerge:!0,requireRenderedChild:!1};f();f();var PA=class{constructor(){this.disposables=[]}static{a(this,"WorkspaceContextProvider")}dispose(){for(let e of this.disposables)e.dispose();this.disposables=[]}};var NJ={MaxDirectorySize:200,MaxResults:100,Decay:.5,CacheSize:2e3,CacheTime:1e3*60,InvalidCacheTime:1e3*60*60*24,MaxFileBytes:2*1024*1024};async function U$t(t,e,r=NJ,n){let o=n?.get(e);if(o!==void 0)return o;let s;try{s=await t.readDirectory(e)}catch{}if(s===void 0||r.MaxDirectorySize!==void 0&&s.length>r.MaxDirectorySize)return n?.set(e,"Invalid",r.InvalidCacheTime),"Invalid";let c={documents:[],directories:[]};for(let[l,u]of s){let d=bi(e,l);u&2?c.directories.push(d):c.documents.push(d)}return n?.set(e,c),c}a(U$t,"getDirectoryChildren");function q$t(t,e){let r=t.getWorkspaceFolder({uri:e});if(r===void 0)return[];let n=[],o=Nl(e);for(;o.startsWith(r);){n.push(o);let s=Nl(o);if(s.length>=o.length)break;o=s}return n}a(q$t,"getAncestors");function H$t(t,e,r=NJ.Decay){let n=new Map,o=new Map,s=new Map,c=new Map;for(let l of e){let u=q$t(t,l.uri);if(u.length===0){n.set(l.uri,new Set);continue}let d;for(let p of u){if(d!==void 0){let m=o.get(p)??new Set;m.add(d),o.set(p,m)}d=p}s.set(l.uri,d),n.set(l.uri,new Set(u))}for(let l of e){let u=[],d=n.get(l.uri);if(!(!d||d.size===0))for(u.push({uri:s.get(l.uri),weight:l.weight*Math.pow(r,d.size)});u.length>0;){let p=u.pop();c.set(p.uri,(c.get(p.uri)??0)+p.weight);let m=o.get(p.uri)??new Set;for(let h of m){let g=p.weight;d.has(h)?g/=r:g*=r,u.push({uri:h,weight:g})}}}return c}a(H$t,"getAncestorWeights");async function*Gve(t,e,r,n,o,s){let c={...NJ,...r},l=c.MaxResults,u=c.Decay,d=H$t(t,e,u),p=new FT([...d.entries()].map(([h,g])=>({item:h,priority:g}))),m=0;for(;p.size>0;){let{item:h,priority:g}=p.pop(),A=await U$t(t,h,c,n);if(s?.isCancellationRequested)return;if(A!=="Invalid"){for(let y of A.documents)if(!o||o(y)){try{if((await t.stat(y)).size>c.MaxFileBytes)continue}catch{continue}if(yield{uri:y,weight:g},m++,m>=l)return}for(let y of A.directories)d.has(y)||(p.insert(y,g*u),d.set(y,g*u))}}}a(Gve,"getNearbyDocuments");var BJ=class extends PA{constructor(r,n){super();this.fileSystem=r;this.documentManager=n;this.config=NJ;this.cache=new Zg(this.config.CacheSize,this.config.CacheTime)}static{a(this,"FileDirectoryDocumentProvider")}async*getContext(r,n,o,s){for await(let c of Gve(this.fileSystem,n.documents,this.config,this.cache,l=>this.documentManager.normalizeUri(l)!==void 0,s))yield{...c,source:"FileDirectoryDocumentProvider"}}};f();f();f();function Ul(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}a(Ul,"setDefault");var W$t={MaxActiveSymbols:500,SymbolCacheSize:1e6},MJ=class extends PA{constructor(){super(...arguments);this.config=W$t;this.nodeToSymbol=new Map;this.nodeValency=new Map;this.symbolToNode=new Map;this.symbolValency=new Map;this.identifierSymbols=new Set;this.identifiers=new vr(this.config.SymbolCacheSize);this.textSymbols=new vr(this.config.SymbolCacheSize);this.nextSymbolId=0}static{a(this,"SymbolContextProvider")}getContext(r,n,o,s){this.updateSymbolIndex(r,o);let c=this.getWeightedSymbols(n);return Promise.resolve(this.getWeightedNodes(c))}updateSymbolIndex(r,n){for(let{id:o}of r.getInvalidatedNodes()){let s=this.nodeToSymbol.get(o);if(this.nodeToSymbol.delete(o),this.nodeValency.delete(o),s)for(let[c,l]of s.entries()){let u=this.symbolToNode.get(c);u?.delete(o),u?.size===0?(this.symbolToNode.delete(c),this.symbolValency.delete(c),this.identifierSymbols.delete(c)):this.symbolValency.has(c)&&this.symbolValency.set(c,Math.max(1,(this.symbolValency.get(c)??0)-l))}}for(let{id:o}of r.getCreatedNodes()){let s=n.getNode(o);s!==void 0&&this.extractSymbols(s.document,s.node)}}getWeightedSymbols(r){let n=new Map;for(let{id:s,weight:c}of r.nodes){let l=this.nodeValency.get(s)??0,u=[],d=0;for(let[p,m]of this.nodeToSymbol.get(s)??[]){let h=this.symbolValency.get(p);if((h??0)<1)continue;let g=m/(Math.max(l,1)*Math.max(1,h));u.push({symbolId:p,nodeSymbolWeight:g}),d+=g}d=Math.max(d,1);for(let{symbolId:p,nodeSymbolWeight:m}of u)n.set(p,(n.get(p)??0)+c*m/d)}return[...n.entries()].map(([s,c])=>({symbolId:s,symbolWeight:c,symbolValency:this.symbolValency.get(s)})).filter(({symbolValency:s})=>(s??0)>0).sort((s,c)=>c.symbolWeight/c.symbolValency-s.symbolWeight/s.symbolValency).slice(0,this.config.MaxActiveSymbols)}getWeightedNodes(r){let n=[];for(let{symbolId:o,symbolWeight:s,symbolValency:c}of r){let l=this.identifierSymbols.has(o)?"SymbolContextProvider.Identifiers":"SymbolContextProvider.Text";for(let[u,d]of this.symbolToNode.get(o)??[]){let p=s*d/Math.max(c,this.nodeValency.get(u)??d);n.push({id:u,weight:p,source:l})}}return n}extractSymbols(r,n){if(this.nodeToSymbol.has(n.id))return;let o=new Map;this.nodeToSymbol.set(n.id,o);let s=0;for(let c of n.syntaxNodes()){let l=r.document.getText(c.range);if(this.isIdentifier(r,c,l)){let u=Ul(this.identifiers,l,()=>this.createSymbol(!0));o.set(u,(o.get(u)??0)+1),s+=1}if(this.isText(r,c,l)||this.isIdentifier(r,c,l))for(let u of Vve(l)){let d=Ul(this.textSymbols,u,()=>this.createSymbol());o.set(d,(o.get(d)??0)+1),s+=1}}this.nodeValency.set(n.id,s);for(let[c,l]of o.entries())Ul(this.symbolToNode,c,()=>new Map).set(n.id,l),this.symbolValency.set(c,(this.symbolValency.get(c)??0)+l)}createSymbol(r=!1){let n=this.nextSymbolId++;return r&&this.identifierSymbols.add(n),n}isText(r,n,o){return r.parser.labeler.isText?.(n)??(n.children.length===0&&o.search(/\s/)>=0)}isIdentifier(r,n,o){return r.parser.labeler.isIdentifier?.(n)??(n.children.length===0&&fVe(o))}},$$t=/^[a-zA-Z_]{2,}\w+$/;function fVe(t){return $$t.test(t)}a(fVe,"isSymbol");function j$t(t){return t.toLowerCase()}a(j$t,"normalizeWord");function*Vve(t){for(let e of t.split(/\W/))fVe(e)&&(yield j$t(e))}a(Vve,"getTextSymbols");var G$t={MaxDirectorySize:200,MaxResults:400,Decay:.5,CacheSize:2e4,CacheTime:1e3*60,InvalidCacheTime:1e3*60*60*24,MaxFileBytes:1*1024*1024,MaxActiveSymbols:500,DebouncedRemovalThreshold:3,UpdateDebounceTimeout:500,SymbolCacheSize:1e6},LJ=class extends MJ{constructor(r,n){super();this.fileSystem=r;this.documentManager=n;this.config=G$t;this.symbolToDocuments=new Map;this.documentToSymbols=new Map;this.documentValency=new Map;this.cache=new Zg(this.config.CacheSize,this.config.CacheTime);this.debouncedExpirationCount=new Map;this.updateDebounce=new Map;this.currentlyUpdating=new Set;this.isUpdatingIndex=!1;this.fileSystem.onDidFileChange(o=>{let s=o.document.uri;this.documentToSymbols.has(s)&&this.debouncedReadOrUpdateDocument(s)})}static{a(this,"IndexingSymbolContextProvider")}async getContext(r,n,o,s){super.updateSymbolIndex(r,o),await this.updateDocumentIndex(n);let c=super.getWeightedSymbols(n),l=super.getWeightedNodes(c),u=this.getWeightedDocuments(c);return[...l,...u]}getWeightedDocuments(r){let n=[];for(let{symbolId:o,symbolWeight:s}of r)for(let[c,l]of this.symbolToDocuments.get(o)??[]){let u=l/Math.max(1,this.documentValency.get(c)??1),d=Math.log(Math.max(this.documentToSymbols.size,1)/Math.max(1,this.symbolToDocuments.get(o)?.size??1)),p=s*u*d;n.push({source:"IndexingSymbolContextProvider.Text",uri:c,weight:p})}return n}debouncedReadOrUpdateDocument(r){this.updateDebounce.has(r)&&clearTimeout(this.updateDebounce.get(r)),this.updateDebounce.set(r,setTimeout(()=>{this.updateDebounce.delete(r),this.readOrUpdateDocument(r)},this.config.UpdateDebounceTimeout))}async readOrUpdateDocument(r){try{if(this.currentlyUpdating.has(r))return;if(this.documentManager.normalizeUri(r)===void 0){this.removeFromIndex(r);return}this.currentlyUpdating.add(r);let n=await this.fileSystem.readFileString({uri:r}),o=new Map,s=0;for(let l of Vve(n))o.set(l,(o.get(l)??0)+1),s++;let c=[];for(let[l,u]of o.entries()){let d=Ul(this.textSymbols,l,()=>this.createSymbol(!1));Ul(this.symbolToDocuments,d,()=>new Map).set(r,u),c.push(d)}this.documentValency.set(r,s),this.documentToSymbols.set(r,c)}catch{this.removeFromIndex(r)}finally{this.currentlyUpdating.delete(r)}}async updateDocumentIndex(r){if(!this.isUpdatingIndex){this.isUpdatingIndex=!0;try{for(let s of this.documentToSymbols.keys())this.debouncedExpirationCount.set(s,(this.debouncedExpirationCount.get(s)??0)+1);let n=a(s=>this.documentManager.normalizeUri(s)!==void 0,"filter");for await(let{uri:s}of Gve(this.fileSystem,r.documents,this.config,this.cache,n))this.documentToSymbols.has(s)||await this.readOrUpdateDocument(s),this.debouncedExpirationCount.delete(s);let o=[...this.debouncedExpirationCount.entries()].filter(([s,c])=>c>=this.config.DebouncedRemovalThreshold&&!this.currentlyUpdating.has(s)&&!this.updateDebounce.has(s));for(let[s]of o)this.removeFromIndex(s),this.debouncedExpirationCount.delete(s)}finally{this.isUpdatingIndex=!1}}}removeFromIndex(r){this.documentValency.delete(r);for(let n of this.documentToSymbols.get(r)??[]){let o=this.symbolToDocuments.get(n);o?.delete(r),o?.size===0&&this.symbolToDocuments.delete(n)}this.documentToSymbols.delete(r)}};f();function pVe(t){return t.nodeId!==void 0}a(pVe,"isNodeLocation");var mVe={"RecentDocumentProvider.RecentlyFocused":{maxEventCount:100,halflife:1e3*60*5,isImpulse:!1},"RecentDocumentProvider.RecentlyEdited":{maxEventCount:1e3,halflife:1e3*60*5,isImpulse:!0},"RecentDocumentProvider.RecentlyOpen":{maxEventCount:100,halflife:1e3*60*5,isImpulse:!1},RecentCompletionsRequestProvider:{maxEventCount:100,halflife:1e3*60*5,isImpulse:!0},"ExtensionActivityProvider.CurrentSelection":{maxEventCount:1,halflife:1e5,isImpulse:!0},"ExtensionActivityProvider.PrimarySelection":{maxEventCount:1e3,halflife:1e3*60*5,isImpulse:!1},"ExtensionActivityProvider.Selection":{maxEventCount:1e3,halflife:1e3*60*5,isImpulse:!1},"ExtensionActivityProvider.VisibleRange":{maxEventCount:1e3,halflife:1e3*60*5,isImpulse:!1}},FJ=class extends PA{constructor(){super(...arguments);this.eventsByType=new Map;this.nextId=0}static{a(this,"RecentActivityProvider")}getContext(r,n,o,s){let c=performance.now(),l=[];for(let[u,d]of this.eventsByType.entries()){let p=mVe[u],m=[...d.values()].sort((g,A)=>A.timestamp-g.timestamp),h=1;for(let g of m){this.resolveRanges(g,o);let A=.5**((c-g.timestamp)/p.halflife),y=p.isImpulse?A:h-A;h=A;for(let v of g.locations)pVe(v)?l.push({weight:y,uri:v.uri,id:v.nodeId,source:u}):l.push({weight:y,uri:v.uri,source:u})}}return Promise.resolve(l)}resolveRanges(r,n){if(r.isFullyResolved)return;let o=!0,s=[];for(let c of r.locations)if(pVe(c))s.push(c);else if(c.range&&c.range.start!==void 0&&c.range.end!==void 0){let l=n.getDocument(c.uri)?.document;if(l!==void 0){let u=l.findNode(l.document.offsetAt(c.range.start),l.document.offsetAt(c.range.end));s.push({uri:c.uri,nodeId:u.id})}else o=!1,s.push(c)}else s.push({uri:c.uri,nodeId:Pp});r.locations=s,r.isFullyResolved=o}recordEvent(r,n,o){let s=mVe[r];if(s===void 0)return;let c={timestamp:o,locations:n,isFullyResolved:!1};Ul(this.eventsByType,r,()=>new vr(s.maxEventCount)).set(++this.nextId,c)}};f();var OJ=class extends PA{constructor(){super(...arguments);this.nodeParent=new Map;this.nodeChildren=new Map}static{a(this,"TreeProximityProvider")}getContext(r,n,o,s){this.updateIndex(r,o,s);let c=new Map,l=new Map,u=new Map;for(let{id:p,weight:m}of n.nodes){let h=this.nodeParent.get(p)??Pp,g=this.nodeChildren.get(h)?.size??0;g>0&&c.set(h,(c.get(h)??0)+m/g);let A=this.nodeChildren.get(p);if(A&&A.size>0)for(let v of A)l.set(v,(l.get(v)??0)+m/A.size);let y=this.nodeChildren.get(h);if(y&&y.size>1)for(let v of y)v!==p&&u.set(v,(u.get(v)??0)+m/y.size)}let d=[...[...c.entries()].map(([p,m])=>({id:p,weight:m,source:"TreeProximityProvider.Parent"})),...[...l.entries()].map(([p,m])=>({id:p,weight:m,source:"TreeProximityProvider.Children"})),...[...u.entries()].map(([p,m])=>({id:p,weight:m,source:"TreeProximityProvider.Siblings"}))];return Promise.resolve(d)}updateIndex(r,n,o){for(let{id:s}of r.getInvalidatedNodes())this.nodeParent.delete(s),this.nodeChildren.delete(s);for(let{id:s}of r.getCreatedNodes()){let c=n.getNode(s),l=new Set;if(c!==void 0)for(let u of c.node.children)this.nodeParent.set(u.id,s),l.add(u.id);l.size>0&&this.nodeChildren.set(s,l)}}};f();function V$t(t){return t.id!==void 0}a(V$t,"isNodeItem");function z$t(t){return!("uri"in t)&&!("id"in t)}a(z$t,"isNullItem");var hVe={"RecentDocumentProvider.RecentlyOpen":.1,"RecentDocumentProvider.RecentlyFocused":.1,"RecentDocumentProvider.RecentlyEdited":.1,RecentCompletionsRequestProvider:1,"ExtensionActivityProvider.CurrentSelection":5,"ExtensionActivityProvider.PrimarySelection":2,"ExtensionActivityProvider.Selection":.2,"ExtensionActivityProvider.VisibleRange":1,FileDirectoryDocumentProvider:.05,"SymbolContextProvider.Identifiers":.2,"SymbolContextProvider.Text":.2,"IndexingSymbolContextProvider.Text":1,"TreeProximityProvider.Parent":.3,"TreeProximityProvider.Children":.3,"TreeProximityProvider.Siblings":.3,"ExtensionReferenceProvider.References":.2,"ExtensionReferenceProvider.Definitions":1};function gVe(t){return t in hVe}a(gVe,"isSourceId");var QT="64f5ff7d-e507-4558-81cf-3bdacc3c5c00",p3=class{static{a(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:o}of e)r.set(n,(r.get(n)??0)+o);this.documents=[...r.entries()].map(([n,o])=>({uri:n,weight:o})).sort((n,o)=>o.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==Pp),this.nodeWeights=new Map(e.map(({id:n,weight:o})=>[n,o]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},QJ=class{constructor(e,r){this.activeContext=e;this.config=r;this.sourceWeights=hVe;this.sourceContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new p3([])}static{a(this,"WorkspaceContextCoordinator")}getWeights(e){if(e){let r=this.sourceContext.get(e);return r?new p3(r.items):new p3([])}return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[o,{items:s,updateTime:c}]of this.sourceContext.entries()){let l=this.sourceWeights[o]??0;if(l<=0||s.length===0)continue;let u=.5**(-Math.max(0,(this.prevUpdateTime??c)-c)/n);l*=u,r+=l,this.aggregateWeights(s,e,l,!0)}if(r>0){if(this.weights.nodes.length>0){let o=r*this.config.Laziness,s=this.prevItems;this.aggregateWeights(s,e,o,!0)}for(let[o,s]of e.entries()){let c=this.activeContext.getDocument(o)?.document;if(c===void 0)continue;let l=s.get(Pp);if(l!==void 0&&l>0){s.delete(Pp);let u=0;for(let d of s.values())u+=d;if(u<=0){let d=c.getAllIds(),p=l/Math.max(d.length,1);for(let m of d)s.set(m,p)}else for(let[d,p]of[...s.entries()])s.set(d,p+l*(p/u))}}this.prevItems=this.truncateAndNormalize(e),this.weights=new p3(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),o=this.addUriAndId(r),s=new Map;this.aggregateWeights(o,s);let c=this.truncateAndNormalize(s);this.sourceContext.set(e,{items:c,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{if(z$t(r))return{weight:r.weight,uri:QT,id:Pp};let n=V$t(r)?r.id:Pp,o=r.uri??this.activeContext.getUri(n)??QT;return o===QT&&(n=Pp),{weight:r.weight,uri:o,id:n}})}aggregateWeights(e,r,n=1,o=!1){for(let{uri:s,id:c,weight:l}of e){if(l<=0||isNaN(l))continue;let u=Ul(r,s,()=>new Map),d=Pp;(!o||this.activeContext.getUri(c)!==void 0)&&(d=c),u.set(d,(u.get(d)??0)+l*n)}}truncateAndNormalize(e){let r=[],n=new Map,o=0;for(let[u,d]of e.entries()){let p=u!==QT?this.activeContext.normalizeUri(u)??QT:QT;for(let[m,h]of d.entries())u===QT||m===Pp?n.set(p,(n.get(p)??0)+h):r.push({uri:p,id:m,weight:h}),o+=h}if(o<=0)return[];n.delete(QT),r.sort((u,d)=>d.weight-u.weight);for(let{uri:u,weight:d}of r.slice(this.config.MaxActiveNodes,r.length))n.set(u,(n.get(u)??0)+d);let s=[...n.entries()].sort((u,d)=>d[1]-u[1]).slice(0,this.config.MaxActiveFiles).map(([u,d])=>({uri:u,id:Pp,weight:d}));return r.slice(0,this.config.MaxActiveNodes).concat(s).sort((u,d)=>d.weight-u.weight).map(u=>({...u,weight:u.weight/o}))}};f();f();f();var UJ=class{constructor(e,r,n,o=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=o}static{a(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*yVe(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,o=this.parts.length-1,s;for(;n<=o;){let l=Math.floor((n+o)/2);if(s=this.parts[l],s.root.startOffset<=e&&s.root.endOffset>=r)break;s.root.endOffset<e?n=l+1:o=l-1}if(s===void 0||o<n)return;n=0,o=s.children.length-1;let c;for(;n<=o;){let l=Math.floor((n+o)/2);if(c=s.children[l],c.startOffset<=e&&c.endOffset>=r)break;c.endOffset<e?n=l+1:o=l-1}if(!(c===void 0||o<n))return c}},K$t=6,qJ=class{constructor(e,r,n,o){this.textDocument=e;this.parser=r;this.minSize=n;this.updateId=rc();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(n,1),this.maxSize=Math.max(o??2*this.minSize,this.minSize+1),this._syntaxRoot=this.parser.parse(e,!0),this._root=this.buildTree()}static{a(this,"ContextDocument")}get uri(){return this.textDocument.uri}get version(){return this.updateId}get document(){return this.textDocument}get rootId(){return this._root.id}get root(){return this._root}get syntaxRoot(){return this._syntaxRoot}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this._root,o=n;for(;o;)n=o,o=n.findChild(e,r??e);return n}update(e){if(this.uri!==e.uri)throw new Error("Can't update ContextDocument using mismatched URI");this.textDocument=e,this._syntaxRoot=this.parser.parse(e,!0),this.recursivelyRemapNodes(this.root,()=>{}),this._root=this.buildTree(),this.updateId=rc()}recursivelyRemapNodes(e,r){let n=!0;for(let d of e.children)n=n&&this.recursivelyRemapNodes(d,r);if(!n)return this.invalidateNode(e),!1;let o=[];for(let{root:d,children:p}of e.parts){let m=r(d);if(m===void 0||m.type!==d.type)return this.invalidateNode(e),!1;o.push({root:m,children:p})}let s=o[0].root.parent,c=e.parts[0].root.parent;if((s&&this.canMergeChildren(s))!==(c&&this.canMergeChildren(c)))return this.invalidateNode(e),!1;let l=AVe(o,this.document);for(let[d,p]of l.entries())if(e.text[d]!==p)return this.invalidateNode(e),!1;let u=new UJ(e.id,o,e.text,e.canMerge);for(let{root:d}of e.parts)this.syntaxToAbstract.delete(d.id);for(let{root:d}of u.parts)this.syntaxToAbstract.set(d.id,u);return this.nodeById.set(e.id,u),!0}invalidateNode(e){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id)}createNode(e,r=!1){e.sort((s,c)=>s.root.startOffset-c.root.startOffset);let n=AVe(e,this.document),o=new UJ(rc(),e,n,r);for(let{root:s}of e)this.syntaxToAbstract.set(s.id,o);return this.nodeById.set(o.id,o),o}buildTree(){let e=this.buildRecursively(this._syntaxRoot);return this.createNode([{root:this._syntaxRoot,children:e}])}buildRecursively(e){if(e.endOffset-e.startOffset<this.minSize)return[];let r=e.children;if(this.canMergeChildren(e)){let o=r.map(c=>this.syntaxToAbstract.get(c.id));for(let c=0;c<r.length;c++)if(o[c]===void 0){if(c>0&&o[c-1]!==void 0){let l=o[c-1];for(let u=c-1;u>=0&&o[u]?.id===l.id;u--)o[u]=void 0;this.invalidateNode(l)}if(c<r.length-1&&o[c+1]!==void 0){let l=o[c+1];for(;c<r.length&&o[c+1]?.id===l.id;)c++,o[c]=void 0;this.invalidateNode(l)}}let s=[];for(let c=0;c<r.length;void 0)if(o[c]!==void 0)for(s.push(o[c]);c<r.length&&o[c+1]?.id===o[c].id;)c++;else{let l=[];for(;c<r.length&&o[c]===void 0;){let u=r[c];l.push({root:u,children:this.buildRecursively(u)}),c++}s.push(...this.mergeChildren(l))}return s}let n=[];for(let o=0;o<r.length;o++){let s=r[o];if(this.syntaxToAbstract.has(s.id)){let u=this.syntaxToAbstract.get(s.id);n.push(u),o+=u.parts.length-1;continue}let c=this.buildRecursively(s),l=s.endOffset-s.startOffset-c.reduce((u,d)=>u+(d.endOffset-d.startOffset),0);this.canBeNode(s)&&l>=this.minSize?n.push(this.createNode([{root:s,children:c}])):n.push(...c)}return n}mergeChildren(e){if(e.length===0)return[];e.sort((h,g)=>h.root.startOffset-g.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,n=[];for(let h of e){let g=h.root.endOffset-h.root.startOffset;for(let A of h.children){let y=A.endOffset-A.startOffset;g-=y,r-=y}n.push(g)}if(r<this.minSize)return e.flatMap(h=>h.children);let o=[0],s=0,c=null,l={line:-1,size:-1},u=e[0].root.startOffset,d=e[0].root.range.start.line;for(let h=0;h<e.length;h++){let g=e[h];if(s+=n[h]+g.root.startOffset-u,s>this.minSize&&s<this.maxSize){let A={line:g.root.range.start.line-d,size:g.root.startOffset-u};(A.line>l.line||A.line==l.line&&A.size>l.size)&&(l=A,c=h)}u=g.root.endOffset,d=g.root.range.end.line,s>=this.maxSize&&(c=c??h,o.push(c+1),h=c,s=0,c=null,l={line:-1,size:-1},u=e[h+1]?.root.startOffset,d=e[h+1]?.root.range.start.line)}o.length==1?o.push(e.length):o[o.length-1]!==e.length&&(o[o.length-1]=e.length);let p=[],m=!1;for(let h=0;h<o.length-1;h++){let g=e.slice(o[h],o[h+1]);p.push(this.createNode(g,m)),m=!0}return p}canMergeChildren(e){return this.parser.labeler.canMergeChildren?.(e)??e.children.length>K$t}canBeNode(e){return this.parser.labeler.canBeNode?.(e)??!0}};function AVe(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let s of t.flatMap(c=>c.children).sort((c,l)=>c.startOffset-l.startOffset)){let c=e.positionAt(s.startOffset);r.push(e.getText({start:n,end:c})),n=e.positionAt(s.endOffset)}let o=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:o})),r}a(AVe,"buildText");function*yVe(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*yVe(r,e))}a(yVe,"walk");f();f();f();var HJ=class{constructor(e,r,n,o,s,c){this.id=e;this.raw=r;this.children=n;this.source="indentation";this.parent=null;let l={start:{line:o,character:0},end:{line:s,character:c.lineAt(s).text.length}},u=c.getText(l),d=u.search(/\S/);if(d===-1){let h={line:s,character:0};this.startOffset=c.offsetAt(h),this.endOffset=this.startOffset,this.range={start:h,end:h};return}let p=u.search(/\S(?!.*\S)/s),m=c.offsetAt(l.start);this.startOffset=m+d,this.endOffset=m+p+1,this.range={start:c.positionAt(this.startOffset),end:c.positionAt(this.endOffset)}}static{a(this,"IndentationNode")}get type(){return this.raw.type}};function zve(t,e,r){let n=t.subs.map(u=>({subtree:u,node:zve(u,e,r)})).filter(u=>u.node!==null).sort((u,d)=>u.node.startOffset-d.node.startOffset),o=[],s=e;for(let u=n.length-1;u>=0;u--){let{subtree:d,node:p}=n[u];if(p.range.end.line>=s){let m=zve(d,s,r);m!==null&&(o.push(m),s=Math.min(m.range.start.line,s))}else o.push(p),s=Math.min(p.range.start.line,s)}o.sort((u,d)=>u.startOffset-d.startOffset);let c=e,l=0;if(o.length>0&&(c=Math.min(c,o[0].range.start.line),l=Math.max(l,o[o.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(c=Math.min(c,t.lineNumber),l=Math.max(l,t.lineNumber),t.type==="blank"&&c===l))return null;if(l=Math.min(l,e-1),c<=l){let u=new HJ(rc(),t,o,c,l,r);for(let d of o)d.parent=u;return u}return null}a(zve,"recursivelyBuildNode");function CVe(t){let e=RR(t.getText(),t.detectedLanguageId);return zve(e,t.lineCount,t)??new HJ(rc(),e,[],0,t.lineCount-1,t)}a(CVe,"parse");var vVe={source:"indentation",parse:CVe,update(t,e){return{root:CVe(e),remapper:a(()=>{},"remapper")}},dispose:a(()=>{},"dispose"),labeler:{isIdentifier:a(t=>!1,"isIdentifier"),isText:a(t=>!0,"isText")}};f();f();var EVe=Ne(HY());function xVe(t){return{line:t.row,character:t.column}}a(xVe,"asPosition");var Kve=class{constructor(e,r){this._parser=e;this._tree=r;this.didDispose=!1}static{a(this,"CachedTreeSitterParse")}get parser(){if(this.didDispose)throw new Error("Cannot access parser after dispose");return this._parser}get tree(){if(this.didDispose)throw new Error("Cannot access tree after dispose");return this._tree}dispose(){this.didDispose||(this.didDispose=!0,this._parser.delete(),this._tree.delete())}},JC=class{constructor(e,r,n,o){this.nodeList=e;this.mergeList=r;this.identifierList=n;this.textList=o}static{a(this,"BasicNodeLabeler")}canBeNode(e){return this.nodeList.has(e.type)}canMergeChildren(e){return this.mergeList.has(e.type)}isIdentifier(e){return this.identifierList.has(e.type)}isText(e){return this.textList.has(e.type)}},Y$t=50,UT=class{constructor(e,r,n={}){this.language=e;this.source=r;this.labeler=n;this.cache=new G4(Y$t)}static{a(this,"TreeSitterParser")}dispose(){this.cache.clear()}parse(e,r=!0){let n=new EVe.default;n.setLanguage(this.language);let o=n.parse(e.getText());return r&&this.cache.set(e.uri,new Kve(n,o)),this.snapshot(o.rootNode,null)}update(e,r){return{root:this.parse(r,!1),remapper:a(()=>{},"remapper")}}snapshot(e,r){let n={id:e.id,source:this.source,type:e.type,startOffset:e.startIndex,endOffset:e.endIndex,range:{start:xVe(e.startPosition),end:xVe(e.endPosition)},parent:r,children:[]};return n.children=e.namedChildren.map(o=>this.snapshot(o,n)),n}};var J$t=new Set(["class_specifier","function_definition","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement","compound_statement"]),X$t=new Set(["translation_unit","compound_statement","parameter_list","argument_list"]),Z$t=new Set(["identifier"]),ejt=new Set(["string","comment"]),bVe=new JC(J$t,X$t,Z$t,ejt);f();var tjt=new Set(["class_declaration","method_declaration","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement"]),rjt=new Set(["program","block","object_creation_expression","formal_parameters","argument_list","array_initializer"]),njt=new Set(["identifier"]),ijt=new Set(["string_literal","line_comment","block_comment"]),IVe=new JC(tjt,rjt,njt,ijt);f();var ojt=new Set(["class_definition","function_definition","expression_statement","if_statement","for_statement","while_statement","with_statement","try_statement"]),sjt=new Set(["module","block","parameters","dictionary","list"]),ajt=new Set(["identifier"]),cjt=new Set(["string","comment"]),TVe=new JC(ojt,sjt,ajt,cjt);f();var ljt=new Set(["class_declaration","function_declaration","arrow_function","method_definition","expression_statement","if_statement","while_statement","try_statement","for_statement","switch_statement"]),ujt=new Set(["program","statement_block","formal_parameters","arguments","object","array"]),djt=new Set(["identifier"]),fjt=new Set(["string","comment"]),wVe=new JC(ljt,ujt,djt,fjt);var _Ve=Ne(HY());async function SVe(t){await _Ve.default.init();try{let e=await nve(t);switch(t){case"python":return new UT(e,"tree-sitter-python",TVe);case"typescript":return new UT(e,"tree-sitter-typescript",wVe);case"java":return new UT(e,"tree-sitter-java",IVe);case"cpp":return new UT(e,"tree-sitter-cpp",bVe);default:return new UT(e,"tree-sitter-generic")}}catch{return vVe}}a(SVe,"getParser");var Yve=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,o])=>o.size>0).map(([n,o])=>n)))}static{a(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,o])=>[...o].map(s=>({uri:n,id:s}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},WJ=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{a(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},RVe=5e3,$J=class{constructor(e,r){this.fileSystem=e;this.config=r;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new vr(RVe);this.allowedExtensions=new Set(bR);this.invalidDocumentCache=new Zg(RVe,this.config.InvalidCacheTime),this.cachedDocuments=new G4(this.config.MaxActiveFiles),this.fileSystem.onDidFileChange(n=>this.handleFileChange(n.document.uri))}static{a(this,"WorkspaceContextDocumentManager")}setAllowedLanguages(e){this.allowedExtensions=new Set(e.flatMap(r=>Rx[r]?.extensions??[]))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let o=n.document.getNode(e);if(o!==void 0)return{...n,node:o}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){let r,n=this.uriCache.get(e);if(n!==null){if(n!==void 0)r=n;else try{if($j(e),r=ka(e),!(this.fileSystem.getWorkspaceFolder({uri:r})!==void 0)){this.uriCache.set(e,null);return}this.uriCache.set(e,r)}catch{this.uriCache.set(e,null);return}if(!(!this.allowedExtensions.has(LNe(r))||this.invalidDocumentCache.has(r)))return r}}dispose(){this.parsers.clear(),this.activeDocuments.clear(),this.cachedDocuments.clear()}updateDocuments(e){this.targetSet.clear();let r=[],n=e.documents.map(({uri:o})=>this.normalizeUri(o)).filter(o=>o!==void 0).slice(0,this.config.MaxActiveFiles);for(let o of n)this.targetSet.add(o),r.push(this.updateDocument(o));for(let o of[...this.activeDocuments.keys()])this.targetSet.has(o)||this.deactivateDocument(o);return Promise.all(r)}popChanges(){let e=new Yve(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new WJ(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new kp;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&(this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new WJ(n,o=>this.disposeDocument(o))))),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let o;try{o=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let c=new Set(r.getAllIds());r.update(n);let l=new Set(r.getAllIds()),u=[...l].filter(p=>!c.has(p)),d=[...c].filter(p=>!l.has(p));return this.recordDocumentChanges(e,{created:u,invalidated:d}),r}let s=new qJ(n,o,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:s.getAllIds(),invalidated:[]}),s}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()})}recordDocumentChanges(e,r){let n=Ul(this.createdNodes,e,()=>new Set),o=Ul(this.invalidatedNodes,e,()=>new Set);for(let s of r.created)n.add(s),this.nodeToDoc.set(s,e);for(let s of r.invalidated)n.has(s)?n.delete(s):o.add(s),this.nodeToDoc.delete(s)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await SVe(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e)||this.normalizeUri(e)===void 0)return;let r=await this.fileSystem.readValidFile({uri:e});if(r.status!=="valid"||r.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return r.document}handleFileChange(e){this.isKnownDocument(e)&&this.staleDocuments.add(e)}};f();var pjt="WorkspaceContextWorker";function Jve(t){let e=t;return e?.workerId===pjt&&typeof e?.cwd=="string"&&Array.isArray(e?.workspaceRoots)&&e.workspaceRoots.every(r=>typeof r=="string")}a(Jve,"isContextWorkerData");var mjt=["RequestUpdate","Exit","ReadAndValidateUri","Error","UpdateResponse","FlushUpdates","ReadAndValidateResponse"];function kVe(t){if(typeof t!="object"||t===null)return;let e=t.messageType;return mjt.includes(e)?e:void 0}a(kVe,"getContextMessageType");var qT=class{constructor(e,r,n){this.id=e;this.messageType=r;this.data=n}static{a(this,"ContextMessage")}};f();f();var jJ=class t{static{a(this,"FullTextDocument")}constructor(e,r,n,o){this._uri=e,this._languageId=r,this._version=n,this._content=o,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let o=BVe(n.range),s=this.offsetAt(o.start),c=this.offsetAt(o.end);this._content=this._content.substring(0,s)+n.text+this._content.substring(c,this._content.length);let l=Math.max(o.start.line,0),u=Math.max(o.end.line,0),d=this._lineOffsets,p=PVe(n.text,!1,s);if(u-l===p.length)for(let h=0,g=p.length;h<g;h++)d[h+l+1]=p[h];else p.length<1e4?d.splice(l+1,u-l,...p):this._lineOffsets=d=d.slice(0,l+1).concat(p,d.slice(u+1));let m=n.text.length-(c-s);if(m!==0)for(let h=l+1+p.length,g=d.length;h<g;h++)d[h]=d[h]+m}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=PVe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,o=r.length;if(o===0)return{line:0,character:e};for(;n<o;){let c=Math.floor((n+o)/2);r[c]>e?o=c:n=c+1}let s=n-1;return e=this.ensureBeforeEOL(e,r[s]),{line:s,character:e-r[s]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let o=e.line+1<r.length?r[e.line+1]:this._content.length,s=Math.min(n+e.character,o);return this.ensureBeforeEOL(s,n)}ensureBeforeEOL(e,r){for(;e>r&&DVe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},HT;(function(t){function e(o,s,c,l){return new jJ(o,s,c,l)}a(e,"create"),t.create=e;function r(o,s,c){if(o instanceof jJ)return o.update(s,c),o;throw new Error("TextDocument.update: document must be created by TextDocument.create")}a(r,"update"),t.update=r;function n(o,s){let c=o.getText(),l=Xve(s.map(hjt),(p,m)=>{let h=p.range.start.line-m.range.start.line;return h===0?p.range.start.character-m.range.start.character:h}),u=0,d=[];for(let p of l){let m=o.offsetAt(p.range.start);if(m<u)throw new Error("Overlapping edit");m>u&&d.push(c.substring(u,m)),p.newText.length&&d.push(p.newText),u=o.offsetAt(p.range.end)}return d.push(c.substr(u)),d.join("")}a(n,"applyEdits"),t.applyEdits=n})(HT||(HT={}));function Xve(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),o=t.slice(r);Xve(n,e),Xve(o,e);let s=0,c=0,l=0;for(;s<n.length&&c<o.length;)e(n[s],o[c])<=0?t[l++]=n[s++]:t[l++]=o[c++];for(;s<n.length;)t[l++]=n[s++];for(;c<o.length;)t[l++]=o[c++];return t}a(Xve,"mergeSort");function PVe(t,e,r=0){let n=e?[r]:[];for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);DVe(s)&&(s===13&&o+1<t.length&&t.charCodeAt(o+1)===10&&o++,n.push(r+o+1))}return n}a(PVe,"computeLineOffsets");function DVe(t){return t===13||t===10}a(DVe,"isEOL");function BVe(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}a(BVe,"getWellformedRange");function hjt(t){let e=BVe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}a(hjt,"getWellformedEdit");f();var NVe;(function(t){function e(r){return typeof r=="string"}a(e,"is"),t.is=e})(NVe||(NVe={}));var Zve;(function(t){function e(r){return typeof r=="string"}a(e,"is"),t.is=e})(Zve||(Zve={}));var MVe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}a(e,"is"),t.is=e})(MVe||(MVe={}));var GJ;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}a(e,"is"),t.is=e})(GJ||(GJ={}));var jd;(function(t){function e(n,o){return n===Number.MAX_VALUE&&(n=GJ.MAX_VALUE),o===Number.MAX_VALUE&&(o=GJ.MAX_VALUE),{line:n,character:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.uinteger(o.line)&&Ze.uinteger(o.character)}a(r,"is"),t.is=r})(jd||(jd={}));var $s;(function(t){function e(n,o,s,c){if(Ze.uinteger(n)&&Ze.uinteger(o)&&Ze.uinteger(s)&&Ze.uinteger(c))return{start:jd.create(n,o),end:jd.create(s,c)};if(jd.is(n)&&jd.is(o))return{start:n,end:o};throw new Error(`Range#create called with invalid arguments[${n}, ${o}, ${s}, ${c}]`)}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&jd.is(o.start)&&jd.is(o.end)}a(r,"is"),t.is=r})($s||($s={}));var VJ;(function(t){function e(n,o){return{uri:n,range:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&$s.is(o.range)&&(Ze.string(o.uri)||Ze.undefined(o.uri))}a(r,"is"),t.is=r})(VJ||(VJ={}));var LVe;(function(t){function e(n,o,s,c){return{targetUri:n,targetRange:o,targetSelectionRange:s,originSelectionRange:c}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&$s.is(o.targetRange)&&Ze.string(o.targetUri)&&$s.is(o.targetSelectionRange)&&($s.is(o.originSelectionRange)||Ze.undefined(o.originSelectionRange))}a(r,"is"),t.is=r})(LVe||(LVe={}));var e1e;(function(t){function e(n,o,s,c){return{red:n,green:o,blue:s,alpha:c}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.numberRange(o.red,0,1)&&Ze.numberRange(o.green,0,1)&&Ze.numberRange(o.blue,0,1)&&Ze.numberRange(o.alpha,0,1)}a(r,"is"),t.is=r})(e1e||(e1e={}));var FVe;(function(t){function e(n,o){return{range:n,color:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&$s.is(o.range)&&e1e.is(o.color)}a(r,"is"),t.is=r})(FVe||(FVe={}));var OVe;(function(t){function e(n,o,s){return{label:n,textEdit:o,additionalTextEdits:s}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.string(o.label)&&(Ze.undefined(o.textEdit)||h3.is(o))&&(Ze.undefined(o.additionalTextEdits)||Ze.typedArray(o.additionalTextEdits,h3.is))}a(r,"is"),t.is=r})(OVe||(OVe={}));var QVe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(QVe||(QVe={}));var UVe;(function(t){function e(n,o,s,c,l,u){let d={startLine:n,endLine:o};return Ze.defined(s)&&(d.startCharacter=s),Ze.defined(c)&&(d.endCharacter=c),Ze.defined(l)&&(d.kind=l),Ze.defined(u)&&(d.collapsedText=u),d}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.uinteger(o.startLine)&&Ze.uinteger(o.startLine)&&(Ze.undefined(o.startCharacter)||Ze.uinteger(o.startCharacter))&&(Ze.undefined(o.endCharacter)||Ze.uinteger(o.endCharacter))&&(Ze.undefined(o.kind)||Ze.string(o.kind))}a(r,"is"),t.is=r})(UVe||(UVe={}));var t1e;(function(t){function e(n,o){return{location:n,message:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&VJ.is(o.location)&&Ze.string(o.message)}a(r,"is"),t.is=r})(t1e||(t1e={}));var qVe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(qVe||(qVe={}));var HVe;(function(t){t.Unnecessary=1,t.Deprecated=2})(HVe||(HVe={}));var WVe;(function(t){function e(r){let n=r;return Ze.objectLiteral(n)&&Ze.string(n.href)}a(e,"is"),t.is=e})(WVe||(WVe={}));var zJ;(function(t){function e(n,o,s,c,l,u){let d={range:n,message:o};return Ze.defined(s)&&(d.severity=s),Ze.defined(c)&&(d.code=c),Ze.defined(l)&&(d.source=l),Ze.defined(u)&&(d.relatedInformation=u),d}a(e,"create"),t.create=e;function r(n){var o;let s=n;return Ze.defined(s)&&$s.is(s.range)&&Ze.string(s.message)&&(Ze.number(s.severity)||Ze.undefined(s.severity))&&(Ze.integer(s.code)||Ze.string(s.code)||Ze.undefined(s.code))&&(Ze.undefined(s.codeDescription)||Ze.string((o=s.codeDescription)===null||o===void 0?void 0:o.href))&&(Ze.string(s.source)||Ze.undefined(s.source))&&(Ze.undefined(s.relatedInformation)||Ze.typedArray(s.relatedInformation,t1e.is))}a(r,"is"),t.is=r})(zJ||(zJ={}));var m3;(function(t){function e(n,o,...s){let c={title:n,command:o};return Ze.defined(s)&&s.length>0&&(c.arguments=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.title)&&Ze.string(o.command)}a(r,"is"),t.is=r})(m3||(m3={}));var h3;(function(t){function e(s,c){return{range:s,newText:c}}a(e,"replace"),t.replace=e;function r(s,c){return{range:{start:s,end:s},newText:c}}a(r,"insert"),t.insert=r;function n(s){return{range:s,newText:""}}a(n,"del"),t.del=n;function o(s){let c=s;return Ze.objectLiteral(c)&&Ze.string(c.newText)&&$s.is(c.range)}a(o,"is"),t.is=o})(h3||(h3={}));var r1e;(function(t){function e(n,o,s){let c={label:n};return o!==void 0&&(c.needsConfirmation=o),s!==void 0&&(c.description=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.string(o.label)&&(Ze.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(Ze.string(o.description)||o.description===void 0)}a(r,"is"),t.is=r})(r1e||(r1e={}));var g3;(function(t){function e(r){let n=r;return Ze.string(n)}a(e,"is"),t.is=e})(g3||(g3={}));var $Ve;(function(t){function e(s,c,l){return{range:s,newText:c,annotationId:l}}a(e,"replace"),t.replace=e;function r(s,c,l){return{range:{start:s,end:s},newText:c,annotationId:l}}a(r,"insert"),t.insert=r;function n(s,c){return{range:s,newText:"",annotationId:c}}a(n,"del"),t.del=n;function o(s){let c=s;return h3.is(c)&&(r1e.is(c.annotationId)||g3.is(c.annotationId))}a(o,"is"),t.is=o})($Ve||($Ve={}));var n1e;(function(t){function e(n,o){return{textDocument:n,edits:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&c1e.is(o.textDocument)&&Array.isArray(o.edits)}a(r,"is"),t.is=r})(n1e||(n1e={}));var i1e;(function(t){function e(n,o,s){let c={kind:"create",uri:n};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),s!==void 0&&(c.annotationId=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return o&&o.kind==="create"&&Ze.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||Ze.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||Ze.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||g3.is(o.annotationId))}a(r,"is"),t.is=r})(i1e||(i1e={}));var o1e;(function(t){function e(n,o,s,c){let l={kind:"rename",oldUri:n,newUri:o};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(l.options=s),c!==void 0&&(l.annotationId=c),l}a(e,"create"),t.create=e;function r(n){let o=n;return o&&o.kind==="rename"&&Ze.string(o.oldUri)&&Ze.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||Ze.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||Ze.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||g3.is(o.annotationId))}a(r,"is"),t.is=r})(o1e||(o1e={}));var s1e;(function(t){function e(n,o,s){let c={kind:"delete",uri:n};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(c.options=o),s!==void 0&&(c.annotationId=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return o&&o.kind==="delete"&&Ze.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||Ze.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||Ze.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||g3.is(o.annotationId))}a(r,"is"),t.is=r})(s1e||(s1e={}));var a1e;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(o=>Ze.string(o.kind)?i1e.is(o)||o1e.is(o)||s1e.is(o):n1e.is(o)))}a(e,"is"),t.is=e})(a1e||(a1e={}));var jVe;(function(t){function e(n){return{uri:n}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.uri)}a(r,"is"),t.is=r})(jVe||(jVe={}));var GVe;(function(t){function e(n,o){return{uri:n,version:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.uri)&&Ze.integer(o.version)}a(r,"is"),t.is=r})(GVe||(GVe={}));var c1e;(function(t){function e(n,o){return{uri:n,version:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.uri)&&(o.version===null||Ze.integer(o.version))}a(r,"is"),t.is=r})(c1e||(c1e={}));var VVe;(function(t){function e(n,o,s,c){return{uri:n,languageId:o,version:s,text:c}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.uri)&&Ze.string(o.languageId)&&Ze.integer(o.version)&&Ze.string(o.text)}a(r,"is"),t.is=r})(VVe||(VVe={}));var l1e;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}a(e,"is"),t.is=e})(l1e||(l1e={}));var l7;(function(t){function e(r){let n=r;return Ze.objectLiteral(r)&&l1e.is(n.kind)&&Ze.string(n.value)}a(e,"is"),t.is=e})(l7||(l7={}));var zVe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(zVe||(zVe={}));var KVe;(function(t){t.PlainText=1,t.Snippet=2})(KVe||(KVe={}));var YVe;(function(t){t.Deprecated=1})(YVe||(YVe={}));var JVe;(function(t){function e(n,o,s){return{newText:n,insert:o,replace:s}}a(e,"create"),t.create=e;function r(n){let o=n;return o&&Ze.string(o.newText)&&$s.is(o.insert)&&$s.is(o.replace)}a(r,"is"),t.is=r})(JVe||(JVe={}));var XVe;(function(t){t.asIs=1,t.adjustIndentation=2})(XVe||(XVe={}));var ZVe;(function(t){function e(r){let n=r;return n&&(Ze.string(n.detail)||n.detail===void 0)&&(Ze.string(n.description)||n.description===void 0)}a(e,"is"),t.is=e})(ZVe||(ZVe={}));var eze;(function(t){function e(r){return{label:r}}a(e,"create"),t.create=e})(eze||(eze={}));var tze;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}a(e,"create"),t.create=e})(tze||(tze={}));var KJ;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}a(e,"fromPlainText"),t.fromPlainText=e;function r(n){let o=n;return Ze.string(o)||Ze.objectLiteral(o)&&Ze.string(o.language)&&Ze.string(o.value)}a(r,"is"),t.is=r})(KJ||(KJ={}));var rze;(function(t){function e(r){let n=r;return!!n&&Ze.objectLiteral(n)&&(l7.is(n.contents)||KJ.is(n.contents)||Ze.typedArray(n.contents,KJ.is))&&(r.range===void 0||$s.is(r.range))}a(e,"is"),t.is=e})(rze||(rze={}));var nze;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}a(e,"create"),t.create=e})(nze||(nze={}));var ize;(function(t){function e(r,n,...o){let s={label:r};return Ze.defined(n)&&(s.documentation=n),Ze.defined(o)?s.parameters=o:s.parameters=[],s}a(e,"create"),t.create=e})(ize||(ize={}));var oze;(function(t){t.Text=1,t.Read=2,t.Write=3})(oze||(oze={}));var sze;(function(t){function e(r,n){let o={range:r};return Ze.number(n)&&(o.kind=n),o}a(e,"create"),t.create=e})(sze||(sze={}));var aze;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(aze||(aze={}));var cze;(function(t){t.Deprecated=1})(cze||(cze={}));var lze;(function(t){function e(r,n,o,s,c){let l={name:r,kind:n,location:{uri:s,range:o}};return c&&(l.containerName=c),l}a(e,"create"),t.create=e})(lze||(lze={}));var uze;(function(t){function e(r,n,o,s){return s!==void 0?{name:r,kind:n,location:{uri:o,range:s}}:{name:r,kind:n,location:{uri:o}}}a(e,"create"),t.create=e})(uze||(uze={}));var dze;(function(t){function e(n,o,s,c,l,u){let d={name:n,detail:o,kind:s,range:c,selectionRange:l};return u!==void 0&&(d.children=u),d}a(e,"create"),t.create=e;function r(n){let o=n;return o&&Ze.string(o.name)&&Ze.number(o.kind)&&$s.is(o.range)&&$s.is(o.selectionRange)&&(o.detail===void 0||Ze.string(o.detail))&&(o.deprecated===void 0||Ze.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}a(r,"is"),t.is=r})(dze||(dze={}));var fze;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(fze||(fze={}));var YJ;(function(t){t.Invoked=1,t.Automatic=2})(YJ||(YJ={}));var pze;(function(t){function e(n,o,s){let c={diagnostics:n};return o!=null&&(c.only=o),s!=null&&(c.triggerKind=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.typedArray(o.diagnostics,zJ.is)&&(o.only===void 0||Ze.typedArray(o.only,Ze.string))&&(o.triggerKind===void 0||o.triggerKind===YJ.Invoked||o.triggerKind===YJ.Automatic)}a(r,"is"),t.is=r})(pze||(pze={}));var mze;(function(t){function e(n,o,s){let c={title:n},l=!0;return typeof o=="string"?(l=!1,c.kind=o):m3.is(o)?c.command=o:c.edit=o,l&&s!==void 0&&(c.kind=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return o&&Ze.string(o.title)&&(o.diagnostics===void 0||Ze.typedArray(o.diagnostics,zJ.is))&&(o.kind===void 0||Ze.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||m3.is(o.command))&&(o.isPreferred===void 0||Ze.boolean(o.isPreferred))&&(o.edit===void 0||a1e.is(o.edit))}a(r,"is"),t.is=r})(mze||(mze={}));var hze;(function(t){function e(n,o){let s={range:n};return Ze.defined(o)&&(s.data=o),s}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&$s.is(o.range)&&(Ze.undefined(o.command)||m3.is(o.command))}a(r,"is"),t.is=r})(hze||(hze={}));var gze;(function(t){function e(n,o){return{tabSize:n,insertSpaces:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.uinteger(o.tabSize)&&Ze.boolean(o.insertSpaces)}a(r,"is"),t.is=r})(gze||(gze={}));var Aze;(function(t){function e(n,o,s){return{range:n,target:o,data:s}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&$s.is(o.range)&&(Ze.undefined(o.target)||Ze.string(o.target))}a(r,"is"),t.is=r})(Aze||(Aze={}));var yze;(function(t){function e(n,o){return{range:n,parent:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&$s.is(o.range)&&(o.parent===void 0||t.is(o.parent))}a(r,"is"),t.is=r})(yze||(yze={}));var Cze;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(Cze||(Cze={}));var vze;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(vze||(vze={}));var xze;(function(t){function e(r){let n=r;return Ze.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}a(e,"is"),t.is=e})(xze||(xze={}));var Eze;(function(t){function e(n,o){return{range:n,text:o}}a(e,"create"),t.create=e;function r(n){let o=n;return o!=null&&$s.is(o.range)&&Ze.string(o.text)}a(r,"is"),t.is=r})(Eze||(Eze={}));var bze;(function(t){function e(n,o,s){return{range:n,variableName:o,caseSensitiveLookup:s}}a(e,"create"),t.create=e;function r(n){let o=n;return o!=null&&$s.is(o.range)&&Ze.boolean(o.caseSensitiveLookup)&&(Ze.string(o.variableName)||o.variableName===void 0)}a(r,"is"),t.is=r})(bze||(bze={}));var Ize;(function(t){function e(n,o){return{range:n,expression:o}}a(e,"create"),t.create=e;function r(n){let o=n;return o!=null&&$s.is(o.range)&&(Ze.string(o.expression)||o.expression===void 0)}a(r,"is"),t.is=r})(Ize||(Ize={}));var Tze;(function(t){function e(n,o){return{frameId:n,stoppedLocation:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&$s.is(n.stoppedLocation)}a(r,"is"),t.is=r})(Tze||(Tze={}));var u1e;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}a(e,"is"),t.is=e})(u1e||(u1e={}));var d1e;(function(t){function e(n){return{value:n}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&(o.tooltip===void 0||Ze.string(o.tooltip)||l7.is(o.tooltip))&&(o.location===void 0||VJ.is(o.location))&&(o.command===void 0||m3.is(o.command))}a(r,"is"),t.is=r})(d1e||(d1e={}));var wze;(function(t){function e(n,o,s){let c={position:n,label:o};return s!==void 0&&(c.kind=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&jd.is(o.position)&&(Ze.string(o.label)||Ze.typedArray(o.label,d1e.is))&&(o.kind===void 0||u1e.is(o.kind))&&o.textEdits===void 0||Ze.typedArray(o.textEdits,h3.is)&&(o.tooltip===void 0||Ze.string(o.tooltip)||l7.is(o.tooltip))&&(o.paddingLeft===void 0||Ze.boolean(o.paddingLeft))&&(o.paddingRight===void 0||Ze.boolean(o.paddingRight))}a(r,"is"),t.is=r})(wze||(wze={}));var _ze;(function(t){function e(r){return{kind:"snippet",value:r}}a(e,"createSnippet"),t.createSnippet=e})(_ze||(_ze={}));var Sze;(function(t){function e(r,n,o,s){return{insertText:r,filterText:n,range:o,command:s}}a(e,"create"),t.create=e})(Sze||(Sze={}));var Rze;(function(t){function e(r){return{items:r}}a(e,"create"),t.create=e})(Rze||(Rze={}));var kze;(function(t){t.Invoked=0,t.Automatic=1})(kze||(kze={}));var Pze;(function(t){function e(r,n){return{range:r,text:n}}a(e,"create"),t.create=e})(Pze||(Pze={}));var Dze;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}a(e,"create"),t.create=e})(Dze||(Dze={}));var Bze;(function(t){function e(r){let n=r;return Ze.objectLiteral(n)&&Zve.is(n.uri)&&Ze.string(n.name)}a(e,"is"),t.is=e})(Bze||(Bze={}));var Nze;(function(t){function e(s,c,l,u){return new f1e(s,c,l,u)}a(e,"create"),t.create=e;function r(s){let c=s;return!!(Ze.defined(c)&&Ze.string(c.uri)&&(Ze.undefined(c.languageId)||Ze.string(c.languageId))&&Ze.uinteger(c.lineCount)&&Ze.func(c.getText)&&Ze.func(c.positionAt)&&Ze.func(c.offsetAt))}a(r,"is"),t.is=r;function n(s,c){let l=s.getText(),u=o(c,(p,m)=>{let h=p.range.start.line-m.range.start.line;return h===0?p.range.start.character-m.range.start.character:h}),d=l.length;for(let p=u.length-1;p>=0;p--){let m=u[p],h=s.offsetAt(m.range.start),g=s.offsetAt(m.range.end);if(g<=d)l=l.substring(0,h)+m.newText+l.substring(g,l.length);else throw new Error("Overlapping edit");d=h}return l}a(n,"applyEdits"),t.applyEdits=n;function o(s,c){if(s.length<=1)return s;let l=s.length/2|0,u=s.slice(0,l),d=s.slice(l);o(u,c),o(d,c);let p=0,m=0,h=0;for(;p<u.length&&m<d.length;)c(u[p],d[m])<=0?s[h++]=u[p++]:s[h++]=d[m++];for(;p<u.length;)s[h++]=u[p++];for(;m<d.length;)s[h++]=d[m++];return s}a(o,"mergeSort")})(Nze||(Nze={}));var f1e=class{static{a(this,"FullTextDocument")}constructor(e,r,n,o){this._uri=e,this._languageId=r,this._version=n,this._content=o,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let o=0;o<r.length;o++){n&&(e.push(o),n=!1);let s=r.charAt(o);n=s==="\r"||s===`
`,s==="\r"&&o+1<r.length&&r.charAt(o+1)===`
`&&o++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,o=r.length;if(o===0)return jd.create(0,e);for(;n<o;){let c=Math.floor((n+o)/2);r[c]>e?o=c:n=c+1}let s=n-1;return jd.create(s,e-r[s])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],o=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,o),n)}get lineCount(){return this.getLineOffsets().length}},Ze;(function(t){let e=Object.prototype.toString;function r(g){return typeof g<"u"}a(r,"defined"),t.defined=r;function n(g){return typeof g>"u"}a(n,"undefined"),t.undefined=n;function o(g){return g===!0||g===!1}a(o,"boolean"),t.boolean=o;function s(g){return e.call(g)==="[object String]"}a(s,"string"),t.string=s;function c(g){return e.call(g)==="[object Number]"}a(c,"number"),t.number=c;function l(g,A,y){return e.call(g)==="[object Number]"&&A<=g&&g<=y}a(l,"numberRange"),t.numberRange=l;function u(g){return e.call(g)==="[object Number]"&&-2147483648<=g&&g<=2147483647}a(u,"integer"),t.integer=u;function d(g){return e.call(g)==="[object Number]"&&0<=g&&g<=2147483647}a(d,"uinteger"),t.uinteger=d;function p(g){return e.call(g)==="[object Function]"}a(p,"func"),t.func=p;function m(g){return g!==null&&typeof g=="object"}a(m,"objectLiteral"),t.objectLiteral=m;function h(g,A){return Array.isArray(g)&&g.every(A)}a(h,"typedArray"),t.typedArray=h})(Ze||(Ze={}));var Is=class{static{a(this,"LocationFactory")}static{this.range=$s.create.bind($s)}static{this.position=jd.create.bind(jd)}},DA=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{a(this,"CopilotTextDocument")}static withChanges(e,r,n){let o=HT.create(e.clientUri,e.clientLanguageId,n,e.getText());return HT.update(o,r,n),new t(e.uri,o,e.detectedLanguageId)}applyEdits(e){let r=HT.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return HT.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,o,s=KC({uri:e,languageId:r})){return new t(ka(e),HT.create(e,r,n,o),s)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=$s.create(r,0,r+1,0),o=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),s=$s.create(jd.create(r,0),jd.create(r,o.length)),c=o.trim().length===0;return{text:o,range:s,isEmptyOrWhitespace:c}}};var XC=require("worker_threads");var gjt=5,Mze=3e4,p1e=class extends LT{constructor(r){super();this.worker=r;this.didChangeEmitter=new is;this.onDidFileChange=this.didChangeEmitter.event;this.workspaceFolders=[]}static{a(this,"ContextWorkerFileSystem")}setWorkspaceFolders(r){this.workspaceFolders=r.map(n=>ka(n))}getWorkspaceFolder(r){let n=ka(r.uri);for(let o of this.workspaceFolders)if(n.startsWith(o))return o}async readValidFile(r){try{let n=await this.worker.readAndValidateUri(r.uri);return n.valid?{status:"valid",document:DA.create(n.uri,"UNKNOWN",-1,n.text)}:{status:"invalid",reason:`Invalid file ${r.uri}`}}catch{return{status:"invalid",reason:`Invalid file ${r.uri}`}}}},m1e=class{constructor(e,r,n){this.nextId=-1;this.activeValidations=new Map;this.validationQueue=new Map;this.fileSystem=new p1e(this);this.providers=[];this.port=e,this.port.on("message",o=>void this.handleMessage(o)),this.fileSystem.setWorkspaceFolders(r),this.documentManager=new $J(this.fileSystem,n),this.coordinator=new QJ(this.documentManager,n),this.recentActivityProvider=new FJ,this.providers.push(this.recentActivityProvider)}static{a(this,"ContextWorker")}addLocalProvider(e){this.providers.push(e)}async handleMessage(e){if(!kVe(e)||typeof e.id!="number"){this.port.postMessage({error:new Error(`Received unrecognized context worker message: ${JSON.stringify(e)}`)});return}let n=e;try{await this.handleMessageUnsafe(n)}catch(o){this.port.postMessage(new qT(n.id,"Error",o))}}async handleMessageUnsafe(e){switch(e.messageType){case"Exit":this.exit(),this.port.postMessage(new qT(e.id,"Exit",void 0)),this.port?.close();break;case"RequestUpdate":await this.updateContext(e);break;case"ReadAndValidateResponse":this.settleValidation(e);break;default:throw new Error(`Received inappropriate context client message: ${JSON.stringify(e)}`)}}readAndValidateUri(e){let r=this.validationQueue.get(e)?.deferred;if(!r){let n=this.nextId--,o=setTimeout(()=>{let s=this.activeValidations.get(n)??this.validationQueue.get(e);s&&s.id===n&&(s.deferred.reject(new Error(`Validation timed out after ${Mze}ms`)),this.activeValidations.delete(n)||this.validationQueue.delete(e),this.advanceValidationQueue())},Mze);r=new kp,this.validationQueue.set(e,{id:n,uri:e,deferred:r,timeout:o}),this.advanceValidationQueue()}return r.promise}advanceValidationQueue(){for(;this.validationQueue.size>0&&this.activeValidations.size<gjt;){let[e,r]=this.validationQueue.entries().next().value;this.validationQueue.delete(e),this.activeValidations.set(r.id,r),this.port.postMessage(new qT(r.id,"ReadAndValidateUri",e))}}settleValidation(e){let r=this.activeValidations.get(e.id);r&&(clearTimeout(r.timeout),this.activeValidations.delete(e.id),e.messageType==="ReadAndValidateResponse"?r.deferred.resolve(e.data):r.deferred.reject(e.data),this.advanceValidationQueue())}async updateContext(e){if(e.data.workspaceRoots&&this.fileSystem.setWorkspaceFolders(e.data.workspaceRoots),e.data.languages&&this.documentManager.setAllowedLanguages(e.data.languages),e.data.changedFiles)for(let d of e.data.changedFiles)this.fileSystem.didChangeEmitter.fire({document:{uri:d}});if(e.data.recentActivity)for(let{sourceId:d,locations:p,timestamp:m}of e.data.recentActivity)this.recentActivityProvider.recordEvent(d,p,m);if(e.data.sources)for(let[d,p]of Object.entries(e.data.sources))gVe(d)&&this.coordinator.pushWorkspaceContext(d,p??[]);let r=this.coordinator.updateWeights(),n=this.documentManager.popChanges();await this.documentManager.updateDocuments(r);let o=await IY(),s=cVe(o),c={};for(let d of this.documentManager.getActiveDocuments()){let p=c7(d.root,s);a7(p,m=>r.getNodeWeight(m.id)??0),c[d.uri]=p}this.port.postMessage(new qT(e.id,"UpdateResponse",{documents:c}));let l=[];for(let d of this.providers)l.push(Wve(d.getContext(n,r,this.documentManager)));let u=await Promise.all(l);for(let d of u)if(d.status==="error"){let p=d.reason instanceof Error?d.reason:new Error(String(d.reason));this.port.postMessage(new qT(e.id,"Error",p))}else for(let p of d.value??[])this.coordinator.pushWorkspaceContext(p.source,[p])}exit(){for(let e of this.providers)e.dispose();this.providers=[],this.documentManager.dispose()}};function h1e(){return XC.parentPort!==null&&Jve(XC.workerData)}a(h1e,"isContextWorker");function Lze(){if(!h1e())throw new Error("This must be run in a worker thread.");if(!Jve(XC.workerData))throw new Error(`Invalid worker data for context worker: ${JSON.stringify(XC.workerData)}`);let t=XC.workerData.cwd;process.cwd=()=>t;let e=new m1e(XC.parentPort,XC.workerData.workspaceRoots,XC.workerData.config);e.addLocalProvider(new BJ(e.fileSystem,e.documentManager)),e.addLocalProvider(new LJ(e.fileSystem,e.documentManager)),e.addLocalProvider(new OJ)}a(Lze,"runContextWorker");f();var u7=Ne(require("util"));function Fze(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...o){if(TC(t)==="dev")return t.get(rl).logIt(t,n,"console",...o)}return a(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...o)=>{n||(o.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",u7.format(...o)))},e.dir=(n,o)=>r(4,u7.inspect(n,o)),e.log=e.debug.bind(e),e.trace=(...n)=>{let o=new Error(u7.format(...n));o.name="Trace",e.log(o)},e}a(Fze,"createConsole");var rb=Ne(require("fs/promises")),mTt=Ne(require("os")),yW=Ne(require("path")),Sg=Ne(NA()),hTt=require("worker_threads");f();f();var NX=require("assert");f();f();var RGt={right:NGt,center:MGt},kGt=0,_X=1,PGt=2,SX=3,q1e=class{static{a(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(o=>o.split("	")),n=0;return r.forEach(o=>{o.length>1&&K0.stringWidth(o[0])>n&&(n=Math.min(Math.floor(this.width*.5),K0.stringWidth(o[0])))}),r.forEach(o=>{this.div(...o.map((s,c)=>({text:s.trim(),padding:this.measurePadding(s),width:c===0&&o.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=K0.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,o)=>{let s="";n.forEach((c,l)=>{let{width:u}=e[l],d=this.negatePadding(e[l]),p=c;if(d>K0.stringWidth(c)&&(p+=" ".repeat(d-K0.stringWidth(c))),e[l].align&&e[l].align!=="left"&&this.wrap){let h=RGt[e[l].align];p=h(p,d),K0.stringWidth(p)<d&&(p+=" ".repeat((u||0)-K0.stringWidth(p)-1))}let m=e[l].padding||[0,0,0,0];m[SX]&&(s+=" ".repeat(m[SX])),s+=PKe(e[l],p,"| "),s+=p,s+=PKe(e[l],p," |"),m[_X]&&(s+=" ".repeat(m[_X])),o===0&&r.length>0&&(s=this.renderInline(s,r[r.length-1]))}),r.push({text:s.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),o=n?n[0].length:0,s=r.text,c=K0.stringWidth(s.trimRight());return r.span?this.wrap?o<c?e:(r.hidden=!0,s.trimRight()+" ".repeat(o-c)+e.trimLeft()):(r.hidden=!0,s+e):e}rasterize(e){let r=[],n=this.columnWidths(e),o;return e.forEach((s,c)=>{s.width=n[c],this.wrap?o=K0.wrap(s.text,this.negatePadding(s),{hard:!0}).split(`
`):o=s.text.split(`
`),s.border&&(o.unshift("."+"-".repeat(this.negatePadding(s)+2)+"."),o.push("'"+"-".repeat(this.negatePadding(s)+2)+"'")),s.padding&&(o.unshift(...new Array(s.padding[kGt]||0).fill("")),o.push(...new Array(s.padding[PGt]||0).fill(""))),o.forEach((l,u)=>{r[u]||r.push([]);let d=r[u];for(let p=0;p<c;p++)d[p]===void 0&&d.push("");d.push(l)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[SX]||0)+(e.padding[_X]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(c=>c.width||K0.stringWidth(c.text));let r=e.length,n=this.width,o=e.map(c=>{if(c.width)return r--,n-=c.width,c.width}),s=r?Math.floor(n/r):0;return o.map((c,l)=>c===void 0?Math.max(s,DGt(e[l])):c)}};function PKe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}a(PKe,"addBorder");function DGt(t){let e=t.padding||[],r=1+(e[SX]||0)+(e[_X]||0);return t.border?r+4:r}a(DGt,"_minWidth");function BGt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}a(BGt,"getWindowWidth");function NGt(t,e){t=t.trim();let r=K0.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}a(NGt,"alignRight");function MGt(t,e){t=t.trim();let r=K0.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}a(MGt,"alignCenter");var K0;function DKe(t,e){return K0=e,new q1e({width:t?.width||BGt(),wrap:t?.wrap})}a(DKe,"cliui");f();var BKe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function H1e(t){return t.replace(BKe,"")}a(H1e,"stripAnsi");function NKe(t,e){let[r,n]=t.match(BKe)||["",""];t=H1e(t);let o="";for(let s=0;s<t.length;s++)s!==0&&s%e===0&&(o+=`
`),o+=t.charAt(s);return r&&n&&(o=`${r}${o}${n}`),o}a(NKe,"wrap");function W1e(t){return DKe(t,{stringWidth:a(e=>[...e].length,"stringWidth"),stripAnsi:H1e,wrap:NKe})}a(W1e,"ui");f();var v3=require("path"),RX=require("fs");function $1e(t,e){let r=(0,v3.resolve)(".",t),n;for((0,RX.statSync)(r).isDirectory()||(r=(0,v3.dirname)(r));;){if(n=e(r,(0,RX.readdirSync)(r)),n)return(0,v3.resolve)(r,n);if(r=(0,v3.dirname)(n=r),n===r)break}}a($1e,"default");var YKe=require("util"),JKe=require("fs"),XKe=require("url");f();var QKe=require("util"),BX=require("path");f();function NR(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,o=t.match(/^-+/);for(let s=o?o[0].length:0;s<t.length;s++){let c=t.charAt(s);n&&(n=!1,c=c.toUpperCase()),s!==0&&(c==="-"||c==="_")?n=!0:c!=="-"&&c!=="_"&&(r+=c)}return r}}a(NR,"camelCase");function kX(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let o=0;o<t.length;o++){let s=r.charAt(o),c=t.charAt(o);s!==c&&o>0?n+=`${e}${r.charAt(o)}`:n+=c}return n}a(kX,"decamelize");function PX(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}a(PX,"looksLikeNumber");f();f();function MKe(t){if(Array.isArray(t))return t.map(c=>typeof c!="string"?c+"":c);t=t.trim();let e=0,r=null,n=null,o=null,s=[];for(let c=0;c<t.length;c++){if(r=n,n=t.charAt(c),n===" "&&!o){r!==" "&&e++;continue}n===o?o=null:(n==="'"||n==='"')&&!o&&(o=n),s[e]||(s[e]=""),s[e]+=n}return s}a(MKe,"tokenizeArgString");f();var _h;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(_h||(_h={}));var Dx,DX=class{static{a(this,"YargsParser")}constructor(e){Dx=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),o=MKe(e),s=typeof e=="string",c=LGt(Object.assign(Object.create(null),n.alias)),l=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),u=Object.assign(Object.create(null),n.default),d=n.configObjects||[],p=n.envPrefix,m=l["populate--"],h=m?"--":"_",g=Object.create(null),A=Object.create(null),y=n.__||Dx.format,v={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,I=new RegExp("^--"+l["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(ce){let ue=typeof ce=="object"?ce.key:ce,He=Object.keys(ce).map(function(Me){return{boolean:"bools",string:"strings",number:"numbers"}[Me]}).filter(Boolean).pop();He&&(v[He][ue]=!0),v.arrays[ue]=!0,v.keys.push(ue)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(ce){v.bools[ce]=!0,v.keys.push(ce)}),[].concat(n.string||[]).filter(Boolean).forEach(function(ce){v.strings[ce]=!0,v.keys.push(ce)}),[].concat(n.number||[]).filter(Boolean).forEach(function(ce){v.numbers[ce]=!0,v.keys.push(ce)}),[].concat(n.count||[]).filter(Boolean).forEach(function(ce){v.counts[ce]=!0,v.keys.push(ce)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(ce){v.normalize[ce]=!0,v.keys.push(ce)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([ce,ue])=>{typeof ue=="number"&&(v.nargs[ce]=ue,v.keys.push(ce))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([ce,ue])=>{typeof ue=="function"&&(v.coercions[ce]=ue,v.keys.push(ce))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(ce){v.configs[ce]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([ce,ue])=>{(typeof ue=="boolean"||typeof ue=="function")&&(v.configs[ce]=ue)})),Qe(n.key,c,n.default,v.arrays),Object.keys(u).forEach(function(ce){(v.aliases[ce]||[]).forEach(function(ue){u[ue]=u[ce]})});let _=null;$e();let k=[],N=Object.assign(Object.create(null),{_:[]}),F={};for(let ce=0;ce<o.length;ce++){let ue=o[ce],He=ue.replace(/^-{3,}/,"---"),Me,be,Ge,rt,ht,Ot;if(ue!=="--"&&/^-/.test(ue)&&Rt(ue))O(ue);else if(He.match(/^---+(=|$)/)){O(ue);continue}else if(ue.match(/^--.+=/)||!l["short-option-groups"]&&ue.match(/^-.+=/))rt=ue.match(/^--?([^=]+)=([\s\S]*)$/),rt!==null&&Array.isArray(rt)&&rt.length>=3&&(we(rt[1],v.arrays)?ce=z(ce,rt[1],o,rt[2]):we(rt[1],v.nargs)!==!1?ce=Y(ce,rt[1],o,rt[2]):V(rt[1],rt[2],!0));else if(ue.match(I)&&l["boolean-negation"])rt=ue.match(I),rt!==null&&Array.isArray(rt)&&rt.length>=2&&(be=rt[1],V(be,we(be,v.arrays)?[!1]:!1));else if(ue.match(/^--.+/)||!l["short-option-groups"]&&ue.match(/^-[^-]+/))rt=ue.match(/^--?(.+)/),rt!==null&&Array.isArray(rt)&&rt.length>=2&&(be=rt[1],we(be,v.arrays)?ce=z(ce,be,o):we(be,v.nargs)!==!1?ce=Y(ce,be,o):(ht=o[ce+1],ht!==void 0&&(!ht.match(/^-/)||ht.match(b))&&!we(be,v.bools)&&!we(be,v.counts)||/^(true|false)$/.test(ht)?(V(be,ht),ce++):V(be,At(be))));else if(ue.match(/^-.\..+=/))rt=ue.match(/^-([^=]+)=([\s\S]*)$/),rt!==null&&Array.isArray(rt)&&rt.length>=3&&V(rt[1],rt[2]);else if(ue.match(/^-.\..+/)&&!ue.match(b))ht=o[ce+1],rt=ue.match(/^-(.\..+)/),rt!==null&&Array.isArray(rt)&&rt.length>=2&&(be=rt[1],ht!==void 0&&!ht.match(/^-/)&&!we(be,v.bools)&&!we(be,v.counts)?(V(be,ht),ce++):V(be,At(be)));else if(ue.match(/^-[^-]+/)&&!ue.match(b)){Ge=ue.slice(1,-1).split(""),Me=!1;for(let Zt=0;Zt<Ge.length;Zt++){if(ht=ue.slice(Zt+2),Ge[Zt+1]&&Ge[Zt+1]==="="){Ot=ue.slice(Zt+3),be=Ge[Zt],we(be,v.arrays)?ce=z(ce,be,o,Ot):we(be,v.nargs)!==!1?ce=Y(ce,be,o,Ot):V(be,Ot),Me=!0;break}if(ht==="-"){V(Ge[Zt],ht);continue}if(/[A-Za-z]/.test(Ge[Zt])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(ht)&&we(ht,v.bools)===!1){V(Ge[Zt],ht),Me=!0;break}if(Ge[Zt+1]&&Ge[Zt+1].match(/\W/)){V(Ge[Zt],ht),Me=!0;break}else V(Ge[Zt],At(Ge[Zt]))}be=ue.slice(-1)[0],!Me&&be!=="-"&&(we(be,v.arrays)?ce=z(ce,be,o):we(be,v.nargs)!==!1?ce=Y(ce,be,o):(ht=o[ce+1],ht!==void 0&&(!/^(-|--)[^-]/.test(ht)||ht.match(b))&&!we(be,v.bools)&&!we(be,v.counts)||/^(true|false)$/.test(ht)?(V(be,ht),ce++):V(be,At(be))))}else if(ue.match(/^-[0-9]$/)&&ue.match(b)&&we(ue.slice(1),v.bools))be=ue.slice(1),V(be,At(be));else if(ue==="--"){k=o.slice(ce+1);break}else if(l["halt-at-non-option"]){k=o.slice(ce);break}else O(ue)}Z(N,!0),Z(N,!1),J(N),j(),re(N,v.aliases,u,!0),ie(N),l["set-placeholder-key"]&&ne(N),Object.keys(v.counts).forEach(function(ce){fe(N,ce.split("."))||V(ce,0)}),m&&k.length&&(N[h]=[]),k.forEach(function(ce){N[h].push(ce)}),l["camel-case-expansion"]&&l["strip-dashed"]&&Object.keys(N).filter(ce=>ce!=="--"&&ce.includes("-")).forEach(ce=>{delete N[ce]}),l["strip-aliased"]&&[].concat(...Object.keys(c).map(ce=>c[ce])).forEach(ce=>{l["camel-case-expansion"]&&ce.includes("-")&&delete N[ce.split(".").map(ue=>NR(ue)).join(".")],delete N[ce]});function O(ce){let ue=ee("_",ce);(typeof ue=="string"||typeof ue=="number")&&N._.push(ue)}a(O,"pushPositional");function Y(ce,ue,He,Me){let be,Ge=we(ue,v.nargs);if(Ge=typeof Ge!="number"||isNaN(Ge)?1:Ge,Ge===0)return Ce(Me)||(_=Error(y("Argument unexpected for: %s",ue))),V(ue,At(ue)),ce;let rt=Ce(Me)?0:1;if(l["nargs-eats-options"])He.length-(ce+1)+rt<Ge&&(_=Error(y("Not enough arguments following: %s",ue))),rt=Ge;else{for(be=ce+1;be<He.length&&(!He[be].match(/^-[^0-9]/)||He[be].match(b)||Rt(He[be]));be++)rt++;rt<Ge&&(_=Error(y("Not enough arguments following: %s",ue)))}let ht=Math.min(rt,Ge);for(!Ce(Me)&&ht>0&&(V(ue,Me),ht--),be=ce+1;be<ht+ce+1;be++)V(ue,He[be]);return ce+ht}a(Y,"eatNargs");function z(ce,ue,He,Me){let be=[],Ge=Me||He[ce+1],rt=we(ue,v.nargs);if(we(ue,v.bools)&&!/^(true|false)$/.test(Ge))be.push(!0);else if(Ce(Ge)||Ce(Me)&&/^-/.test(Ge)&&!b.test(Ge)&&!Rt(Ge)){if(u[ue]!==void 0){let ht=u[ue];be=Array.isArray(ht)?ht:[ht]}}else{Ce(Me)||be.push(H(ue,Me,!0));for(let ht=ce+1;ht<He.length&&!(!l["greedy-arrays"]&&be.length>0||rt&&typeof rt=="number"&&be.length>=rt||(Ge=He[ht],/^-/.test(Ge)&&!b.test(Ge)&&!Rt(Ge)));ht++)ce=ht,be.push(H(ue,Ge,s))}return typeof rt=="number"&&(rt&&be.length<rt||isNaN(rt)&&be.length===0)&&(_=Error(y("Not enough arguments following: %s",ue))),V(ue,be),ce}a(z,"eatArray");function V(ce,ue,He=s){if(/-/.test(ce)&&l["camel-case-expansion"]){let Ge=ce.split(".").map(function(rt){return NR(rt)}).join(".");U(ce,Ge)}let Me=H(ce,ue,He),be=ce.split(".");ye(N,be,Me),v.aliases[ce]&&v.aliases[ce].forEach(function(Ge){let rt=Ge.split(".");ye(N,rt,Me)}),be.length>1&&l["dot-notation"]&&(v.aliases[be[0]]||[]).forEach(function(Ge){let rt=Ge.split("."),ht=[].concat(be);ht.shift(),rt=rt.concat(ht),(v.aliases[ce]||[]).includes(rt.join("."))||ye(N,rt,Me)}),we(ce,v.normalize)&&!we(ce,v.arrays)&&[ce].concat(v.aliases[ce]||[]).forEach(function(rt){Object.defineProperty(F,rt,{enumerable:!0,get(){return ue},set(ht){ue=typeof ht=="string"?Dx.normalize(ht):ht}})})}a(V,"setArg");function U(ce,ue){v.aliases[ce]&&v.aliases[ce].length||(v.aliases[ce]=[ue],g[ue]=!0),v.aliases[ue]&&v.aliases[ue].length||U(ue,ce)}a(U,"addNewAlias");function H(ce,ue,He){He&&(ue=FGt(ue)),(we(ce,v.bools)||we(ce,v.counts))&&typeof ue=="string"&&(ue=ue==="true");let Me=Array.isArray(ue)?ue.map(function(be){return ee(ce,be)}):ee(ce,ue);return we(ce,v.counts)&&(Ce(Me)||typeof Me=="boolean")&&(Me=j1e()),we(ce,v.normalize)&&we(ce,v.arrays)&&(Array.isArray(ue)?Me=ue.map(be=>Dx.normalize(be)):Me=Dx.normalize(ue)),Me}a(H,"processValue");function ee(ce,ue){return!l["parse-positional-numbers"]&&ce==="_"||!we(ce,v.strings)&&!we(ce,v.bools)&&!Array.isArray(ue)&&(PX(ue)&&l["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${ue}`)))||!Ce(ue)&&we(ce,v.numbers))&&(ue=Number(ue)),ue}a(ee,"maybeCoerceNumber");function J(ce){let ue=Object.create(null);re(ue,v.aliases,u),Object.keys(v.configs).forEach(function(He){let Me=ce[He]||ue[He];if(Me)try{let be=null,Ge=Dx.resolve(Dx.cwd(),Me),rt=v.configs[He];if(typeof rt=="function"){try{be=rt(Ge)}catch(ht){be=ht}if(be instanceof Error){_=be;return}}else be=Dx.require(Ge);G(be)}catch(be){be.name==="PermissionDenied"?_=be:ce[He]&&(_=Error(y("Invalid JSON config file: %s",Me)))}})}a(J,"setConfig");function G(ce,ue){Object.keys(ce).forEach(function(He){let Me=ce[He],be=ue?ue+"."+He:He;typeof Me=="object"&&Me!==null&&!Array.isArray(Me)&&l["dot-notation"]?G(Me,be):(!fe(N,be.split("."))||we(be,v.arrays)&&l["combine-arrays"])&&V(be,Me)})}a(G,"setConfigObject");function j(){typeof d<"u"&&d.forEach(function(ce){G(ce)})}a(j,"setConfigObjects");function Z(ce,ue){if(typeof p>"u")return;let He=typeof p=="string"?p:"",Me=Dx.env();Object.keys(Me).forEach(function(be){if(He===""||be.lastIndexOf(He,0)===0){let Ge=be.split("__").map(function(rt,ht){return ht===0&&(rt=rt.substring(He.length)),NR(rt)});(ue&&v.configs[Ge.join(".")]||!ue)&&!fe(ce,Ge)&&V(Ge.join("."),Me[be])}})}a(Z,"applyEnvVars");function ie(ce){let ue,He=new Set;Object.keys(ce).forEach(function(Me){if(!He.has(Me)&&(ue=we(Me,v.coercions),typeof ue=="function"))try{let be=ee(Me,ue(ce[Me]));[].concat(v.aliases[Me]||[],Me).forEach(Ge=>{He.add(Ge),ce[Ge]=be})}catch(be){_=be}})}a(ie,"applyCoercions");function ne(ce){return v.keys.forEach(ue=>{~ue.indexOf(".")||typeof ce[ue]>"u"&&(ce[ue]=void 0)}),ce}a(ne,"setPlaceholderKeys");function re(ce,ue,He,Me=!1){Object.keys(He).forEach(function(be){fe(ce,be.split("."))||(ye(ce,be.split("."),He[be]),Me&&(A[be]=!0),(ue[be]||[]).forEach(function(Ge){fe(ce,Ge.split("."))||ye(ce,Ge.split("."),He[be])}))})}a(re,"applyDefaultsAndAliases");function fe(ce,ue){let He=ce;l["dot-notation"]||(ue=[ue.join(".")]),ue.slice(0,-1).forEach(function(be){He=He[be]||{}});let Me=ue[ue.length-1];return typeof He!="object"?!1:Me in He}a(fe,"hasKey");function ye(ce,ue,He){let Me=ce;l["dot-notation"]||(ue=[ue.join(".")]),ue.slice(0,-1).forEach(function(Ot){Ot=LKe(Ot),typeof Me=="object"&&Me[Ot]===void 0&&(Me[Ot]={}),typeof Me[Ot]!="object"||Array.isArray(Me[Ot])?(Array.isArray(Me[Ot])?Me[Ot].push({}):Me[Ot]=[Me[Ot],{}],Me=Me[Ot][Me[Ot].length-1]):Me=Me[Ot]});let be=LKe(ue[ue.length-1]),Ge=we(ue.join("."),v.arrays),rt=Array.isArray(He),ht=l["duplicate-arguments-array"];!ht&&we(be,v.nargs)&&(ht=!0,(!Ce(Me[be])&&v.nargs[be]===1||Array.isArray(Me[be])&&Me[be].length===v.nargs[be])&&(Me[be]=void 0)),He===j1e()?Me[be]=j1e(Me[be]):Array.isArray(Me[be])?ht&&Ge&&rt?Me[be]=l["flatten-duplicate-arrays"]?Me[be].concat(He):(Array.isArray(Me[be][0])?Me[be]:[Me[be]]).concat([He]):!ht&&!!Ge==!!rt?Me[be]=He:Me[be]=Me[be].concat([He]):Me[be]===void 0&&Ge?Me[be]=rt?He:[He]:ht&&!(Me[be]===void 0||we(be,v.counts)||we(be,v.bools))?Me[be]=[Me[be],He]:Me[be]=He}a(ye,"setKey");function Qe(...ce){ce.forEach(function(ue){Object.keys(ue||{}).forEach(function(He){v.aliases[He]||(v.aliases[He]=[].concat(c[He]||[]),v.aliases[He].concat(He).forEach(function(Me){if(/-/.test(Me)&&l["camel-case-expansion"]){let be=NR(Me);be!==He&&v.aliases[He].indexOf(be)===-1&&(v.aliases[He].push(be),g[be]=!0)}}),v.aliases[He].concat(He).forEach(function(Me){if(Me.length>1&&/[A-Z]/.test(Me)&&l["camel-case-expansion"]){let be=kX(Me,"-");be!==He&&v.aliases[He].indexOf(be)===-1&&(v.aliases[He].push(be),g[be]=!0)}}),v.aliases[He].forEach(function(Me){v.aliases[Me]=[He].concat(v.aliases[He].filter(function(be){return Me!==be}))}))})})}a(Qe,"extendAliases");function we(ce,ue){let He=[].concat(v.aliases[ce]||[],ce),Me=Object.keys(ue),be=He.find(Ge=>Me.includes(Ge));return be?ue[be]:!1}a(we,"checkAllAliases");function Xe(ce){let ue=Object.keys(v);return[].concat(ue.map(Me=>v[Me])).some(function(Me){return Array.isArray(Me)?Me.includes(ce):Me[ce]})}a(Xe,"hasAnyFlag");function Oe(ce,...ue){return[].concat(...ue).some(function(Me){let be=ce.match(Me);return be&&Xe(be[1])})}a(Oe,"hasFlagsMatching");function ut(ce){if(ce.match(b)||!ce.match(/^-[^-]+/))return!1;let ue=!0,He,Me=ce.slice(1).split("");for(let be=0;be<Me.length;be++){if(He=ce.slice(be+2),!Xe(Me[be])){ue=!1;break}if(Me[be+1]&&Me[be+1]==="="||He==="-"||/[A-Za-z]/.test(Me[be])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(He)||Me[be+1]&&Me[be+1].match(/\W/))break}return ue}a(ut,"hasAllShortFlags");function Rt(ce){return l["unknown-options-as-args"]&&Et(ce)}a(Rt,"isUnknownOptionAsArg");function Et(ce){return ce=ce.replace(/^-{3,}/,"--"),ce.match(b)||ut(ce)?!1:!Oe(ce,/^-+([^=]+?)=[\s\S]*$/,I,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}a(Et,"isUnknownOption");function At(ce){return!we(ce,v.bools)&&!we(ce,v.counts)&&`${ce}`in u?u[ce]:de(qe(ce))}a(At,"defaultValue");function de(ce){return{[_h.BOOLEAN]:!0,[_h.STRING]:"",[_h.NUMBER]:void 0,[_h.ARRAY]:[]}[ce]}a(de,"defaultForType");function qe(ce){let ue=_h.BOOLEAN;return we(ce,v.strings)?ue=_h.STRING:we(ce,v.numbers)?ue=_h.NUMBER:we(ce,v.bools)?ue=_h.BOOLEAN:we(ce,v.arrays)&&(ue=_h.ARRAY),ue}a(qe,"guessType");function Ce(ce){return ce===void 0}a(Ce,"isUndefined");function $e(){Object.keys(v.counts).find(ce=>we(ce,v.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",ce)),!0):we(ce,v.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",ce)),!0):!1)}return a($e,"checkConfiguration"),{aliases:Object.assign({},v.aliases),argv:Object.assign(F,N),configuration:l,defaulted:Object.assign({},A),error:_,newAliases:Object.assign({},g)}}};function LGt(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(o){e.push([].concat(t[o],o))});n;){n=!1;for(let o=0;o<e.length;o++)for(let s=o+1;s<e.length;s++)if(e[o].filter(function(l){return e[s].indexOf(l)!==-1}).length){e[o]=e[o].concat(e[s]),e.splice(s,1),n=!0;break}}return e.forEach(function(o){o=o.filter(function(c,l,u){return u.indexOf(c)===l});let s=o.pop();s!==void 0&&typeof s=="string"&&(r[s]=o)}),r}a(LGt,"combineAliases");function j1e(t){return t!==void 0?t+1:1}a(j1e,"increment");function LKe(t){return t==="__proto__"?"___proto___":t}a(LKe,"sanitizeKey");function FGt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}a(FGt,"stripQuotes");var UKe=require("fs");var G1e,V1e,z1e,FKe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,OKe=(V1e=(G1e=process==null?void 0:process.versions)===null||G1e===void 0?void 0:G1e.node)!==null&&V1e!==void 0?V1e:(z1e=process==null?void 0:process.version)===null||z1e===void 0?void 0:z1e.slice(1);if(OKe&&Number(OKe.match(/^([^.]+)/)[1])<FKe)throw Error(`yargs parser supports a minimum Node.js version of ${FKe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var OGt=process?process.env:{},qKe=new DX({cwd:process.cwd,env:a(()=>OGt,"env"),format:QKe.format,normalize:BX.normalize,resolve:BX.resolve,require:a(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,UKe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),A7=a(function(e,r){return qKe.parse(e.slice(),r).argv},"Parser");A7.detailed=function(t,e){return qKe.parse(t.slice(),e)};A7.camelCase=NR;A7.decamelize=kX;A7.looksLikeNumber=PX;var HKe=A7;var LA=require("path");f();function QGt(){return UGt()?0:1}a(QGt,"getProcessArgvBinIndex");function UGt(){return qGt()&&!process.defaultApp}a(UGt,"isBundledElectronApp");function qGt(){return!!process.versions.electron}a(qGt,"isElectronApp");function WKe(){return process.argv[QGt()]}a(WKe,"getProcessArgvBin");f();var ca=class t extends Error{static{a(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var x3=require("fs"),$Ke=require("util"),jKe=require("path");var GKe={fs:{readFileSync:x3.readFileSync,writeFile:x3.writeFile},format:$Ke.format,resolve:jKe.resolve,exists:a(t=>{try{return(0,x3.statSync)(t).isFile()}catch{return!1}},"exists")};f();var MA,K1e=class{static{a(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=a(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),MA.format.apply(MA.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),o=e.shift(),s=a(function(){},"cb");typeof e[e.length-1]=="function"&&(s=e.pop()),this.cache[this.locale]||this._readLocaleFile();let c=o===1?r:n;this.cache[this.locale][r]&&(c=this.cache[this.locale][r][o===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:s})):s();let l=[c];return~c.indexOf("%d")&&l.push(o),MA.format.apply(MA.format,l.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(o,s){let c=r[s+1];n+=o,typeof c<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,o=r.locale,s=r.cb,c=this._resolveLocaleFile(n,o),l=JSON.stringify(this.cache[o],null,2);MA.fs.writeFile(c,l,"utf-8",function(u){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),s(u)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{MA.fs.readFileSync&&(e=JSON.parse(MA.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=MA.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let o=MA.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(o)&&(n=o)}return n}_fileExistsSync(e){return MA.exists(e)}};function VKe(t,e){MA=e;let r=new K1e(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}a(VKe,"y18n");var HGt=a(t=>VKe(t,GKe),"y18n"),zKe=HGt;var WGt="require is not supported by ESM",KKe="loading a directory of commands is not supported yet for ESM",y7;try{y7=(0,XKe.fileURLToPath)(importMetaUrlShim)}catch{y7=process.cwd()}var $Gt=y7.substring(0,y7.lastIndexOf("node_modules")),ZKe={assert:{notStrictEqual:NX.notStrictEqual,strictEqual:NX.strictEqual},cliui:W1e,findUp:$1e,getEnv:a(t=>process.env[t],"getEnv"),inspect:YKe.inspect,getCallerFile:a(()=>{throw new ca(KKe)},"getCallerFile"),getProcessArgvBin:WKe,mainFilename:$Gt||process.cwd(),Parser:HKe,path:{basename:LA.basename,dirname:LA.dirname,extname:LA.extname,relative:LA.relative,resolve:LA.resolve},process:{argv:a(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:a((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:a(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:JKe.readFileSync,require:a(()=>{throw new ca(WGt)},"require"),requireDirectory:a(()=>{throw new ca(KKe)},"requireDirectory"),stringWidth:a(t=>[...t].length,"stringWidth"),y18n:zKe({directory:(0,LA.resolve)(y7,"../../../locales"),updateFiles:!1})};f();f();f();function Df(t,e,r,n){r.assert.notStrictEqual(t,e,n)}a(Df,"assertNotStrictEqual");function Y1e(t,e){e.assert.strictEqual(typeof t,"string")}a(Y1e,"assertSingleKey");function E3(t){return Object.keys(t)}a(E3,"objectKeys");f();function la(t){return!!t&&!!t.then&&typeof t.then=="function"}a(la,"isPromise");f();f();f();function GT(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,o=r.shift();if(!o)throw new Error(`No command found in: ${t}`);let s={cmd:o.replace(n,""),demanded:[],optional:[]};return r.forEach((c,l)=>{let u=!1;c=c.replace(/\s/g,""),/\.+[\]>]/.test(c)&&l===r.length-1&&(u=!0),/^\[/.test(c)?s.optional.push({cmd:c.replace(n,"").split("|"),variadic:u}):s.demanded.push({cmd:c.replace(n,"").split("|"),variadic:u})}),s}a(GT,"parseCommand");var jGt=["first","second","third","fourth","fifth","sixth"];function Or(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[GT(`cmd ${t}`),e,r]}a(n,"parseArgs");try{let o=0,[s,c,l]=n(),u=[].slice.call(c);for(;u.length&&u[u.length-1]===void 0;)u.pop();let d=l||u.length;if(d<s.demanded.length)throw new ca(`Not enough arguments provided. Expected ${s.demanded.length} but received ${u.length}.`);let p=s.demanded.length+s.optional.length;if(d>p)throw new ca(`Too many arguments provided. Expected max ${p} but received ${d}.`);s.demanded.forEach(m=>{let h=u.shift(),g=eYe(h);m.cmd.filter(y=>y===g||y==="*").length===0&&tYe(g,m.cmd,o),o+=1}),s.optional.forEach(m=>{if(u.length===0)return;let h=u.shift(),g=eYe(h);m.cmd.filter(y=>y===g||y==="*").length===0&&tYe(g,m.cmd,o),o+=1})}catch(o){console.warn(o.stack)}}a(Or,"argsert");function eYe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}a(eYe,"guessType");function tYe(t,e,r){throw new ca(`Invalid ${jGt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}a(tYe,"argumentTypeError");var MX=class{static{a(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,o=!1){if(Or("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let s=0;s<e.length;s++){if(typeof e[s]!="function")throw Error("middleware must be a function");let c=e[s];c.applyBeforeValidation=r,c.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let s=e;s.applyBeforeValidation=r,s.global=n,s.mutates=o,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(o=>{let s=[...n[r]||[],r];return o.option?!s.includes(o.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function rYe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}a(rYe,"commandMiddlewareFactory");function MR(t,e,r,n){return r.reduce((o,s)=>{if(s.applyBeforeValidation!==n)return o;if(s.mutates){if(s.applied)return o;s.applied=!0}if(la(o))return o.then(c=>Promise.all([c,s(c,e)])).then(([c,l])=>Object.assign(c,l));{let c=s(o,e);return la(c)?c.then(l=>Object.assign(o,l)):Object.assign(o,c)}},t)}a(MR,"applyMiddleware");f();function LR(t,e,r=n=>{throw n}){try{let n=GGt(t)?t():t;return la(n)?n.then(o=>e(o)):e(n)}catch(n){return r(n)}}a(LR,"maybeAsyncResult");function GGt(t){return typeof t=="function"}a(GGt,"isFunction");f();function J1e(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}a(J1e,"whichModule");var b3=/(^\*)|(^\$0)/,X1e=class{static{a(this,"CommandInstance")}constructor(e,r,n,o){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=o,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,o){o=o||{},typeof o.recurse!="boolean"&&(o.recurse=!1),Array.isArray(o.extensions)||(o.extensions=["js"]);let s=typeof o.visit=="function"?o.visit:c=>c;o.visit=(c,l,u)=>{let d=s(c,l,u);if(d){if(this.requireCache.has(l))return d;this.requireCache.add(l),this.addHandler(d)}return d},this.shim.requireDirectory({require:r,filename:n},e,o)}addHandler(e,r,n,o,s,c){let l=[],u=rYe(s);if(o=o||(()=>{}),Array.isArray(e))if(VGt(e))[e,...l]=e;else for(let d of e)this.addHandler(d);else if(KGt(e)){let d=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(d=[].concat(d).concat(e.aliases)),this.addHandler(d,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(nYe(n)){this.addHandler([e].concat(l),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let d=GT(e);l=l.map(h=>GT(h).cmd);let p=!1,m=[d.cmd].concat(l).filter(h=>b3.test(h)?(p=!0,!1):!0);m.length===0&&p&&m.push("$0"),p&&(d.cmd=m[0],l=m.slice(1),e=e.replace(b3,d.cmd)),l.forEach(h=>{this.aliasMap[h]=d.cmd}),r!==!1&&this.usage.command(e,r,p,l,c),this.handlers[d.cmd]={original:e,description:r,handler:o,builder:n||{},middlewares:u,deprecated:c,demanded:d.demanded,optional:d.optional},p&&(this.defaultCommand=this.handlers[d.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,o,s,c){let l=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,u=r.getInternalMethods().getContext(),d=u.commands.slice(),p=!e;e&&(u.commands.push(e),u.fullCommands.push(l.original));let m=this.applyBuilderUpdateUsageAndParse(p,l,r,n.aliases,d,o,s,c);return la(m)?m.then(h=>this.applyMiddlewareAndGetResult(p,l,h.innerArgv,u,s,h.aliases,r)):this.applyMiddlewareAndGetResult(p,l,m.innerArgv,u,s,m.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,o,s,c,l,u){let d=r.builder,p=n;if(LX(d)){n.getInternalMethods().getUsageInstance().freeze();let m=d(n.getInternalMethods().reset(o),u);if(la(m))return m.then(h=>(p=oYe(h)?h:n,this.parseAndUpdateUsage(e,r,p,s,c,l)))}else zGt(d)&&(n.getInternalMethods().getUsageInstance().freeze(),p=n.getInternalMethods().reset(o),Object.keys(r.builder).forEach(m=>{p.option(m,d[m])}));return this.parseAndUpdateUsage(e,r,p,s,c,l)}parseAndUpdateUsage(e,r,n,o,s,c){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(o,r),r.description);let l=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,s,c);return la(l)?l.then(u=>({aliases:n.parsed.aliases,innerArgv:u})):{aliases:n.parsed.aliases,innerArgv:l}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=b3.test(r.original)?r.original.replace(b3,"").trim():r.original,o=e.filter(s=>!b3.test(s));return o.push(n),`$0 ${o.join(" ")}`}handleValidationAndGetResult(e,r,n,o,s,c,l,u){if(!c.getInternalMethods().getHasOutput()){let d=c.getInternalMethods().runValidation(s,u,c.parsed.error,e);n=LR(n,p=>(d(p),p))}if(r.handler&&!c.getInternalMethods().getHasOutput()){c.getInternalMethods().setHasOutput();let d=!!c.getOptions().configuration["populate--"];c.getInternalMethods().postProcess(n,d,!1,!1),n=MR(n,c,l,!1),n=LR(n,p=>{let m=r.handler(p);return la(m)?m.then(()=>p):p}),e||c.getInternalMethods().getUsageInstance().cacheHelpMessage(),la(n)&&!c.getInternalMethods().hasParseCallback()&&n.catch(p=>{try{c.getInternalMethods().getUsageInstance().fail(null,p)}catch{}})}return e||(o.commands.pop(),o.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,o,s,c,l){let u={};if(s)return n;l.getInternalMethods().getHasOutput()||(u=this.populatePositionals(r,n,o,l));let d=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),p=MR(n,l,d,!0);return la(p)?p.then(m=>this.handleValidationAndGetResult(e,r,m,o,c,l,d,u)):this.handleValidationAndGetResult(e,r,p,o,c,l,d,u)}populatePositionals(e,r,n,o){r._=r._.slice(n.commands.length);let s=e.demanded.slice(0),c=e.optional.slice(0),l={};for(this.validation.positionalCount(s.length,r._.length);s.length;){let u=s.shift();this.populatePositional(u,r,l)}for(;c.length;){let u=c.shift();this.populatePositional(u,r,l)}return r._=n.commands.concat(r._.map(u=>""+u)),this.postProcessPositionals(r,l,this.cmdToParseOptions(e.original),o),l}populatePositional(e,r,n){let o=e.cmd[0];e.variadic?n[o]=r._.splice(0).map(String):r._.length&&(n[o]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=GT(e);return n.demanded.forEach(o=>{let[s,...c]=o.cmd;o.variadic&&(r.array.push(s),r.default[s]=[]),r.alias[s]=c,r.demand[s]=!0}),n.optional.forEach(o=>{let[s,...c]=o.cmd;o.variadic&&(r.array.push(s),r.default[s]=[]),r.alias[s]=c}),r}postProcessPositionals(e,r,n,o){let s=Object.assign({},o.getOptions());s.default=Object.assign(n.default,s.default);for(let d of Object.keys(n.alias))s.alias[d]=(s.alias[d]||[]).concat(n.alias[d]);s.array=s.array.concat(n.array),s.config={};let c=[];if(Object.keys(r).forEach(d=>{r[d].map(p=>{s.configuration["unknown-options-as-args"]&&(s.key[d]=!0),c.push(`--${d}`),c.push(p)})}),!c.length)return;let l=Object.assign({},s.configuration,{"populate--":!1}),u=this.shim.Parser.detailed(c,Object.assign({},s,{configuration:l}));if(u.error)o.getInternalMethods().getUsageInstance().fail(u.error.message,u.error);else{let d=Object.keys(r);Object.keys(r).forEach(p=>{d.push(...u.aliases[p])}),Object.keys(u.argv).forEach(p=>{d.includes(p)&&(r[p]||(r[p]=u.argv[p]),!this.isInConfigs(o,p)&&!this.isDefaulted(o,p)&&Object.prototype.hasOwnProperty.call(e,p)&&Object.prototype.hasOwnProperty.call(u.argv,p)&&(Array.isArray(e[p])||Array.isArray(u.argv[p]))?e[p]=[].concat(e[p],u.argv[p]):e[p]=u.argv[p])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(o=>Object.prototype.hasOwnProperty.call(o,r))||n.some(o=>Object.prototype.hasOwnProperty.call(o,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=b3.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(LX(r))return r(e,!0);nYe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=J1e(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let o of[e,r,n]){if(typeof o=="string"||o===!1)return o;Df(o,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();Df(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function iYe(t,e,r,n){return new X1e(t,e,r,n)}a(iYe,"command");function nYe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}a(nYe,"isCommandBuilderDefinition");function VGt(t){return t.every(e=>typeof e=="string")}a(VGt,"isCommandAndAliases");function LX(t){return typeof t=="function"}a(LX,"isCommandBuilderCallback");function zGt(t){return typeof t=="object"}a(zGt,"isCommandBuilderOptionDefinitions");function KGt(t){return typeof t=="object"&&!Array.isArray(t)}a(KGt,"isCommandHandlerDefinition");f();f();function VT(t={},e=()=>!0){let r={};return E3(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}a(VT,"objFilter");f();function zT(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}a(zT,"setBlocking");function YGt(t){return typeof t=="boolean"}a(YGt,"isBoolean");function aYe(t,e){let r=e.y18n.__,n={},o=[];n.failFn=a(function(H){o.push(H)},"failFn");let s=null,c=null,l=!0;n.showHelpOnFail=a(function(H=!0,ee){let[J,G]=typeof H=="string"?[!0,H]:[H,ee];return t.getInternalMethods().isGlobalContext()&&(c=G),s=G,l=J,n},"showHelpOnFailFn");let u=!1;n.fail=a(function(H,ee){let J=t.getInternalMethods().getLoggerInstance();if(o.length)for(let G=o.length-1;G>=0;--G){let j=o[G];if(YGt(j)){if(ee)throw ee;if(H)throw Error(H)}else j(H,ee,n)}else{if(t.getExitProcess()&&zT(!0),!u){u=!0,l&&(t.showHelp("error"),J.error()),(H||ee)&&J.error(H||ee);let G=s||c;G&&((H||ee)&&J.error(""),J.error(G))}if(ee=ee||new ca(H),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,ee);throw ee}},"fail");let d=[],p=!1;n.usage=(U,H)=>U===null?(p=!0,d=[],n):(p=!1,d.push([U,H||""]),n),n.getUsage=()=>d,n.getUsageDisabled=()=>p,n.getPositionalGroupName=()=>r("Positionals:");let m=[];n.example=(U,H)=>{m.push([U,H||""])};let h=[];n.command=a(function(H,ee,J,G,j=!1){J&&(h=h.map(Z=>(Z[2]=!1,Z))),h.push([H,ee||"",J,G,j])},"command"),n.getCommands=()=>h;let g={};n.describe=a(function(H,ee){Array.isArray(H)?H.forEach(J=>{n.describe(J,ee)}):typeof H=="object"?Object.keys(H).forEach(J=>{n.describe(J,H[J])}):g[H]=ee},"describe"),n.getDescriptions=()=>g;let A=[];n.epilog=U=>{A.push(U)};let y=!1,v;n.wrap=U=>{y=!0,v=U},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(v=Y(),y=!0),v);let b="__yargsString__:";n.deferY18nLookup=U=>b+U,n.help=a(function(){if(k)return k;_();let H=t.customScriptName?t.$0:e.path.basename(t.$0),ee=t.getDemandedOptions(),J=t.getDemandedCommands(),G=t.getDeprecatedOptions(),j=t.getGroups(),Z=t.getOptions(),ie=[];ie=ie.concat(Object.keys(g)),ie=ie.concat(Object.keys(ee)),ie=ie.concat(Object.keys(J)),ie=ie.concat(Object.keys(Z.default)),ie=ie.filter(F),ie=Object.keys(ie.reduce((Oe,ut)=>(ut!=="_"&&(Oe[ut]=!0),Oe),{}));let ne=n.getWrap(),re=e.cliui({width:ne,wrap:!!ne});if(!p){if(d.length)d.forEach(Oe=>{re.div({text:`${Oe[0].replace(/\$0/g,H)}`}),Oe[1]&&re.div({text:`${Oe[1]}`,padding:[1,0,0,0]})}),re.div();else if(h.length){let Oe=null;J._?Oe=`${H} <${r("command")}>
`:Oe=`${H} [${r("command")}]
`,re.div(`${Oe}`)}}if(h.length>1||h.length===1&&!h[0][2]){re.div(r("Commands:"));let Oe=t.getInternalMethods().getContext(),ut=Oe.commands.length?`${Oe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(h=h.sort((Et,At)=>Et[0].localeCompare(At[0])));let Rt=H?`${H} `:"";h.forEach(Et=>{let At=`${Rt}${ut}${Et[0].replace(/^\$0 ?/,"")}`;re.span({text:At,padding:[0,2,0,2],width:I(h,ne,`${H}${ut}`)+4},{text:Et[1]});let de=[];Et[2]&&de.push(`[${r("default")}]`),Et[3]&&Et[3].length&&de.push(`[${r("aliases:")} ${Et[3].join(", ")}]`),Et[4]&&(typeof Et[4]=="string"?de.push(`[${r("deprecated: %s",Et[4])}]`):de.push(`[${r("deprecated")}]`)),de.length?re.div({text:de.join(" "),padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}let fe=(Object.keys(Z.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ie=ie.filter(Oe=>!t.parsed.newAliases[Oe]&&fe.every(ut=>(Z.alias[ut]||[]).indexOf(Oe)===-1));let ye=r("Options:");j[ye]||(j[ye]=[]),N(ie,Z.alias,j,ye);let Qe=a(Oe=>/^--/.test(FX(Oe)),"isLongSwitch"),we=Object.keys(j).filter(Oe=>j[Oe].length>0).map(Oe=>{let ut=j[Oe].filter(F).map(Rt=>{if(fe.includes(Rt))return Rt;for(let Et=0,At;(At=fe[Et])!==void 0;Et++)if((Z.alias[At]||[]).includes(Rt))return At;return Rt});return{groupName:Oe,normalizedKeys:ut}}).filter(({normalizedKeys:Oe})=>Oe.length>0).map(({groupName:Oe,normalizedKeys:ut})=>{let Rt=ut.reduce((Et,At)=>(Et[At]=[At].concat(Z.alias[At]||[]).map(de=>Oe===n.getPositionalGroupName()?de:(/^[0-9]$/.test(de)?Z.boolean.includes(At)?"-":"--":de.length>1?"--":"-")+de).sort((de,qe)=>Qe(de)===Qe(qe)?0:Qe(de)?1:-1).join(", "),Et),{});return{groupName:Oe,normalizedKeys:ut,switches:Rt}});if(we.filter(({groupName:Oe})=>Oe!==n.getPositionalGroupName()).some(({normalizedKeys:Oe,switches:ut})=>!Oe.every(Rt=>Qe(ut[Rt])))&&we.filter(({groupName:Oe})=>Oe!==n.getPositionalGroupName()).forEach(({normalizedKeys:Oe,switches:ut})=>{Oe.forEach(Rt=>{Qe(ut[Rt])&&(ut[Rt]=JGt(ut[Rt],4))})}),we.forEach(({groupName:Oe,normalizedKeys:ut,switches:Rt})=>{re.div(Oe),ut.forEach(Et=>{let At=Rt[Et],de=g[Et]||"",qe=null;de.includes(b)&&(de=r(de.substring(b.length))),Z.boolean.includes(Et)&&(qe=`[${r("boolean")}]`),Z.count.includes(Et)&&(qe=`[${r("count")}]`),Z.string.includes(Et)&&(qe=`[${r("string")}]`),Z.normalize.includes(Et)&&(qe=`[${r("string")}]`),Z.array.includes(Et)&&(qe=`[${r("array")}]`),Z.number.includes(Et)&&(qe=`[${r("number")}]`);let Ce=a(ue=>typeof ue=="string"?`[${r("deprecated: %s",ue)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),$e=[Et in G?Ce(G[Et]):null,qe,Et in ee?`[${r("required")}]`:null,Z.choices&&Z.choices[Et]?`[${r("choices:")} ${n.stringifiedValues(Z.choices[Et])}]`:null,O(Z.default[Et],Z.defaultDescription[Et])].filter(Boolean).join(" ");re.span({text:FX(At),padding:[0,2,0,2+sYe(At)],width:I(Rt,ne)+4},de);let ce=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;$e&&!ce?re.div({text:$e,padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}),m.length&&(re.div(r("Examples:")),m.forEach(Oe=>{Oe[0]=Oe[0].replace(/\$0/g,H)}),m.forEach(Oe=>{Oe[1]===""?re.div({text:Oe[0],padding:[0,2,0,2]}):re.div({text:Oe[0],padding:[0,2,0,2],width:I(m,ne)+4},{text:Oe[1]})}),re.div()),A.length>0){let Oe=A.map(ut=>ut.replace(/\$0/g,H)).join(`
`);re.div(`${Oe}
`)}return re.toString().replace(/\s*$/,"")},"help");function I(U,H,ee){let J=0;return Array.isArray(U)||(U=Object.values(U).map(G=>[G])),U.forEach(G=>{J=Math.max(e.stringWidth(ee?`${ee} ${FX(G[0])}`:FX(G[0]))+sYe(G[0]),J)}),H&&(J=Math.min(J,parseInt((H*.5).toString(),10))),J}a(I,"maxWidth");function _(){let U=t.getDemandedOptions(),H=t.getOptions();(Object.keys(H.alias)||[]).forEach(ee=>{H.alias[ee].forEach(J=>{g[J]&&n.describe(ee,g[J]),J in U&&t.demandOption(ee,U[J]),H.boolean.includes(J)&&t.boolean(ee),H.count.includes(J)&&t.count(ee),H.string.includes(J)&&t.string(ee),H.normalize.includes(J)&&t.normalize(ee),H.array.includes(J)&&t.array(ee),H.number.includes(J)&&t.number(ee)})})}a(_,"normalizeAliases");let k;n.cacheHelpMessage=function(){k=this.help()},n.clearCachedHelpMessage=function(){k=void 0},n.hasCachedHelpMessage=function(){return!!k};function N(U,H,ee,J){let G=[],j=null;return Object.keys(ee).forEach(Z=>{G=G.concat(ee[Z])}),U.forEach(Z=>{j=[Z].concat(H[Z]),j.some(ie=>G.indexOf(ie)!==-1)||ee[J].push(Z)}),G}a(N,"addUngroupedKeys");function F(U){return t.getOptions().hiddenOptions.indexOf(U)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}a(F,"filterHiddenOptions"),n.showHelp=U=>{let H=t.getInternalMethods().getLoggerInstance();U||(U="error"),(typeof U=="function"?U:H[U])(n.help())},n.functionDescription=U=>["(",U.name?e.Parser.decamelize(U.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=a(function(H,ee){let J="",G=ee||", ",j=[].concat(H);return!H||!j.length||j.forEach(Z=>{J.length&&(J+=G),J+=JSON.stringify(Z)}),J},"stringifiedValues");function O(U,H){let ee=`[${r("default:")} `;if(U===void 0&&!H)return null;if(H)ee+=H;else switch(typeof U){case"string":ee+=`"${U}"`;break;case"object":ee+=JSON.stringify(U);break;default:ee+=U}return`${ee}]`}a(O,"defaultString");function Y(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}a(Y,"windowWidth");let z=null;n.version=U=>{z=U},n.showVersion=U=>{let H=t.getInternalMethods().getLoggerInstance();U||(U="error"),(typeof U=="function"?U:H[U])(z)},n.reset=a(function(H){return s=null,u=!1,d=[],p=!1,A=[],m=[],h=[],g=VT(g,ee=>!H[ee]),n},"reset");let V=[];return n.freeze=a(function(){V.push({failMessage:s,failureOutput:u,usages:d,usageDisabled:p,epilogs:A,examples:m,commands:h,descriptions:g})},"freeze"),n.unfreeze=a(function(H=!1){let ee=V.pop();ee&&(H?(g={...ee.descriptions,...g},h=[...ee.commands,...h],d=[...ee.usages,...d],m=[...ee.examples,...m],A=[...ee.epilogs,...A]):{failMessage:s,failureOutput:u,usages:d,usageDisabled:p,epilogs:A,examples:m,commands:h,descriptions:g}=ee)},"unfreeze"),n}a(aYe,"usage");function Z1e(t){return typeof t=="object"}a(Z1e,"isIndentedText");function JGt(t,e){return Z1e(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}a(JGt,"addIndentation");function sYe(t){return Z1e(t)?t.indentation:0}a(sYe,"getIndentation");function FX(t){return Z1e(t)?t.text:t}a(FX,"getText");f();f();var cYe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,lYe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var exe=class{static{a(this,"Completion")}constructor(e,r,n,o){var s,c,l;this.yargs=e,this.usage=r,this.command=n,this.shim=o,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(l=((s=this.shim.getEnv("SHELL"))===null||s===void 0?void 0:s.includes("zsh"))||((c=this.shim.getEnv("ZSH_NAME"))===null||c===void 0?void 0:c.includes("zsh")))!==null&&l!==void 0?l:!1}defaultCompletion(e,r,n,o){let s=this.command.getCommandHandlers();for(let l=0,u=e.length;l<u;++l)if(s[e[l]]&&s[e[l]].builder){let d=s[e[l]].builder;if(LX(d)){this.indexAfterLastReset=l+1;let p=this.yargs.getInternalMethods().reset();return d(p,!0),p.argv}}let c=[];this.commandCompletions(c,e,n),this.optionCompletions(c,e,r,n),this.choicesFromOptionsCompletions(c,e,r,n),this.choicesFromPositionalsCompletions(c,e,r,n),o(null,c)}commandCompletions(e,r,n){let o=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&o[o.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(s=>{let c=GT(s[0]).cmd;if(r.indexOf(c)===-1)if(!this.zshShell)e.push(c);else{let l=s[1]||"";e.push(c.replace(/:/g,"\\:")+":"+l)}})}optionCompletions(e,r,n,o){if((o.match(/^-/)||o===""&&e.length===0)&&!this.previousArgHasChoices(r)){let s=this.yargs.getOptions(),c=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(s.key).forEach(l=>{let u=!!s.configuration["boolean-negation"]&&s.boolean.includes(l);!c.includes(l)&&!s.hiddenOptions.includes(l)&&!this.argsContainKey(r,l,u)&&this.completeOptionKey(l,e,o,u&&!!s.default[l])})}}choicesFromOptionsCompletions(e,r,n,o){if(this.previousArgHasChoices(r)){let s=this.getPreviousArgChoices(r);s&&s.length>0&&e.push(...s.map(c=>c.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,o){if(o===""&&e.length>0&&this.previousArgHasChoices(r))return;let s=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],c=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),l=s[n._.length-c-1];if(!l)return;let u=this.yargs.getOptions().choices[l]||[];for(let d of u)d.startsWith(o)&&e.push(d.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let o=r.replace(/^-+/,""),s=this.yargs.getOptions(),c=[o,...this.yargs.getAliases()[o]||[]],l;for(let u of c)if(Object.prototype.hasOwnProperty.call(s.key,u)&&Array.isArray(s.choices[u])){l=s.choices[u];break}if(l)return l.filter(u=>!n||u.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let o=a(s=>e.indexOf((/^[^0-9]$/.test(s)?"-":"--")+s)!==-1,"argsContains");if(o(r)||n&&o(`no-${r}`))return!0;if(this.aliases){for(let s of this.aliases[r])if(o(s))return!0}return!1}completeOptionKey(e,r,n,o){var s,c,l,u;let d=e;if(this.zshShell){let g=this.usage.getDescriptions(),A=(c=(s=this===null||this===void 0?void 0:this.aliases)===null||s===void 0?void 0:s[e])===null||c===void 0?void 0:c.find(b=>{let I=g[b];return typeof I=="string"&&I.length>0}),y=A?g[A]:void 0,v=(u=(l=g[e])!==null&&l!==void 0?l:y)!==null&&u!==void 0?u:"";d=`${e.replace(/:/g,"\\:")}:${v.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let p=a(g=>/^--/.test(g),"startsByTwoDashes"),m=a(g=>/^[^0-9]$/.test(g),"isShortOption"),h=!p(n)&&m(e)?"-":"--";r.push(h+d),o&&r.push(h+"no-"+d)}customCompletion(e,r,n,o){if(Df(this.customCompletionFunction,null,this.shim),ZGt(this.customCompletionFunction)){let s=this.customCompletionFunction(n,r);return la(s)?s.then(c=>{this.shim.process.nextTick(()=>{o(null,c)})}).catch(c=>{this.shim.process.nextTick(()=>{o(c,void 0)})}):o(null,s)}else return eVt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(s=o)=>this.defaultCompletion(e,r,n,s),s=>{o(null,s)}):this.customCompletionFunction(n,r,s=>{o(null,s)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",o=this.yargs.parse(e,!0),s=this.customCompletionFunction?c=>this.customCompletion(e,c,n,r):c=>this.defaultCompletion(e,c,n,r);return la(o)?o.then(s):s(o)}generateCompletionScript(e,r){let n=this.zshShell?lYe:cYe,o=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,o),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function uYe(t,e,r,n){return new exe(t,e,r,n)}a(uYe,"completion");function ZGt(t){return t.length<3}a(ZGt,"isSyncCompletionFunction");function eVt(t){return t.length>3}a(eVt,"isFallbackCompletionFunction");f();f();function dYe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let o;for(o=0;o<=t.length;o++)r[0][o]=o;for(n=1;n<=e.length;n++)for(o=1;o<=t.length;o++)e.charAt(n-1)===t.charAt(o-1)?r[n][o]=r[n-1][o-1]:n>1&&o>1&&e.charAt(n-2)===t.charAt(o-1)&&e.charAt(n-1)===t.charAt(o-2)?r[n][o]=r[n-2][o-2]+1:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[e.length][t.length]}a(dYe,"levenshtein");var fYe=["$0","--","_"];function pYe(t,e,r){let n=r.y18n.__,o=r.y18n.__n,s={};s.nonOptionCount=a(function(m){let h=t.getDemandedCommands(),A=m._.length+(m["--"]?m["--"].length:0)-t.getInternalMethods().getContext().commands.length;h._&&(A<h._.min||A>h._.max)&&(A<h._.min?h._.minMsg!==void 0?e.fail(h._.minMsg?h._.minMsg.replace(/\$0/g,A.toString()).replace(/\$1/,h._.min.toString()):null):e.fail(o("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",A,A.toString(),h._.min.toString())):A>h._.max&&(h._.maxMsg!==void 0?e.fail(h._.maxMsg?h._.maxMsg.replace(/\$0/g,A.toString()).replace(/\$1/,h._.max.toString()):null):e.fail(o("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",A,A.toString(),h._.max.toString()))))},"nonOptionCount"),s.positionalCount=a(function(m,h){h<m&&e.fail(o("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",h,h+"",m+""))},"positionalCount"),s.requiredArguments=a(function(m,h){let g=null;for(let A of Object.keys(h))(!Object.prototype.hasOwnProperty.call(m,A)||typeof m[A]>"u")&&(g=g||{},g[A]=h[A]);if(g){let A=[];for(let v of Object.keys(g)){let b=g[v];b&&A.indexOf(b)<0&&A.push(b)}let y=A.length?`
${A.join(`
`)}`:"";e.fail(o("Missing required argument: %s","Missing required arguments: %s",Object.keys(g).length,Object.keys(g).join(", ")+y))}},"requiredArguments"),s.unknownArguments=a(function(m,h,g,A,y=!0){var v;let b=t.getInternalMethods().getCommandInstance().getCommands(),I=[],_=t.getInternalMethods().getContext();if(Object.keys(m).forEach(k=>{!fYe.includes(k)&&!Object.prototype.hasOwnProperty.call(g,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!s.isValidAndSomeAliasIsNotNew(k,h)&&I.push(k)}),y&&(_.commands.length>0||b.length>0||A)&&m._.slice(_.commands.length).forEach(k=>{b.includes(""+k)||I.push(""+k)}),y){let N=((v=t.getDemandedCommands()._)===null||v===void 0?void 0:v.max)||0,F=_.commands.length+N;F<m._.length&&m._.slice(F).forEach(O=>{O=String(O),!_.commands.includes(O)&&!I.includes(O)&&I.push(O)})}I.length&&e.fail(o("Unknown argument: %s","Unknown arguments: %s",I.length,I.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),s.unknownCommands=a(function(m){let h=t.getInternalMethods().getCommandInstance().getCommands(),g=[],A=t.getInternalMethods().getContext();return(A.commands.length>0||h.length>0)&&m._.slice(A.commands.length).forEach(y=>{h.includes(""+y)||g.push(""+y)}),g.length>0?(e.fail(o("Unknown command: %s","Unknown commands: %s",g.length,g.join(", "))),!0):!1},"unknownCommands"),s.isValidAndSomeAliasIsNotNew=a(function(m,h){if(!Object.prototype.hasOwnProperty.call(h,m))return!1;let g=t.parsed.newAliases;return[m,...h[m]].some(A=>!Object.prototype.hasOwnProperty.call(g,A)||!g[m])},"isValidAndSomeAliasIsNotNew"),s.limitedChoices=a(function(m){let h=t.getOptions(),g={};if(!Object.keys(h.choices).length)return;Object.keys(m).forEach(v=>{fYe.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(h.choices,v)&&[].concat(m[v]).forEach(b=>{h.choices[v].indexOf(b)===-1&&b!==void 0&&(g[v]=(g[v]||[]).concat(b))})});let A=Object.keys(g);if(!A.length)return;let y=n("Invalid values:");A.forEach(v=>{y+=`
  ${n("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(g[v]),e.stringifiedValues(h.choices[v]))}`}),e.fail(y)},"limitedChoices");let c={};s.implies=a(function(m,h){Or("<string|object> [array|number|string]",[m,h],arguments.length),typeof m=="object"?Object.keys(m).forEach(g=>{s.implies(g,m[g])}):(t.global(m),c[m]||(c[m]=[]),Array.isArray(h)?h.forEach(g=>s.implies(m,g)):(Df(h,void 0,r),c[m].push(h)))},"implies"),s.getImplied=a(function(){return c},"getImplied");function l(p,m){let h=Number(m);return m=isNaN(h)?m:h,typeof m=="number"?m=p._.length>=m:m.match(/^--no-.+/)?(m=m.match(/^--no-(.+)/)[1],m=!Object.prototype.hasOwnProperty.call(p,m)):m=Object.prototype.hasOwnProperty.call(p,m),m}a(l,"keyExists"),s.implications=a(function(m){let h=[];if(Object.keys(c).forEach(g=>{let A=g;(c[g]||[]).forEach(y=>{let v=A,b=y;v=l(m,v),y=l(m,y),v&&!y&&h.push(` ${A} -> ${b}`)})}),h.length){let g=`${n("Implications failed:")}
`;h.forEach(A=>{g+=A}),e.fail(g)}},"implications");let u={};s.conflicts=a(function(m,h){Or("<string|object> [array|string]",[m,h],arguments.length),typeof m=="object"?Object.keys(m).forEach(g=>{s.conflicts(g,m[g])}):(t.global(m),u[m]||(u[m]=[]),Array.isArray(h)?h.forEach(g=>s.conflicts(m,g)):u[m].push(h))},"conflicts"),s.getConflicting=()=>u,s.conflicting=a(function(m){Object.keys(m).forEach(h=>{u[h]&&u[h].forEach(g=>{g&&m[h]!==void 0&&m[g]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",h,g))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(u).forEach(h=>{u[h].forEach(g=>{g&&m[r.Parser.camelCase(h)]!==void 0&&m[r.Parser.camelCase(g)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",h,g))})})},"conflictingFn"),s.recommendCommands=a(function(m,h){h=h.sort((v,b)=>b.length-v.length);let A=null,y=1/0;for(let v=0,b;(b=h[v])!==void 0;v++){let I=dYe(m,b);I<=3&&I<y&&(y=I,A=b)}A&&e.fail(n("Did you mean %s?",A))},"recommendCommands"),s.reset=a(function(m){return c=VT(c,h=>!m[h]),u=VT(u,h=>!m[h]),s},"reset");let d=[];return s.freeze=a(function(){d.push({implied:c,conflicting:u})},"freeze"),s.unfreeze=a(function(){let m=d.pop();Df(m,void 0,r),{implied:c,conflicting:u}=m},"unfreeze"),s}a(pYe,"validation");f();var txe=[],C7;function OX(t,e,r,n){C7=n;let o={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return o;let s=/\.json|\..*rc$/.test(t.extends),c=null;if(s)c=rVt(e,t.extends);else try{c=require.resolve(t.extends)}catch{return t}tVt(c),txe.push(c),o=s?JSON.parse(C7.readFileSync(c,"utf8")):require(t.extends),delete t.extends,o=OX(o,C7.path.dirname(c),r,C7)}return txe=[],r?mYe(o,t):Object.assign({},o,t)}a(OX,"applyExtends");function tVt(t){if(txe.indexOf(t)>-1)throw new ca(`Circular extended configurations: '${t}'.`)}a(tVt,"checkForCircularExtends");function rVt(t,e){return C7.path.resolve(t,e)}a(rVt,"getPathToDefaultConfig");function mYe(t,e){let r={};function n(o){return o&&typeof o=="object"&&!Array.isArray(o)}a(n,"isObject"),Object.assign(r,t);for(let o of Object.keys(e))n(e[o])&&n(r[o])?r[o]=mYe(t[o],e[o]):r[o]=e[o];return r}a(mYe,"mergeDeep");var Ur=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},ge=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Hc,FR,v7,Sh,Y0,QX,KT,OR,UX,Rh,qX,kh,ZC,J0,Ph,HX,I3,hu,cn,WX,$X,X0,QR,T3,UR,YT,jX,Kn,qR,HR,WR,ui,GX,ev,hc;function NYe(t){return(e=[],r=t.process.cwd(),n)=>{let o=new fxe(e,r,n,t);return Object.defineProperty(o,"argv",{get:a(()=>o.parse(),"get"),enumerable:!0}),o.help(),o.version(),o}}a(NYe,"YargsFactory");var hYe=Symbol("copyDoubleDash"),gYe=Symbol("copyDoubleDash"),rxe=Symbol("deleteFromParserHintObject"),AYe=Symbol("emitWarning"),yYe=Symbol("freeze"),CYe=Symbol("getDollarZero"),$R=Symbol("getParserConfiguration"),vYe=Symbol("getUsageConfiguration"),nxe=Symbol("guessLocale"),xYe=Symbol("guessVersion"),EYe=Symbol("parsePositionalNumbers"),ixe=Symbol("pkgUp"),JT=Symbol("populateParserHintArray"),w3=Symbol("populateParserHintSingleValueDictionary"),oxe=Symbol("populateParserHintArrayDictionary"),sxe=Symbol("populateParserHintDictionary"),axe=Symbol("sanitizeKey"),cxe=Symbol("setKey"),lxe=Symbol("unfreeze"),bYe=Symbol("validateAsync"),IYe=Symbol("getCommandInstance"),TYe=Symbol("getContext"),wYe=Symbol("getHasOutput"),_Ye=Symbol("getLoggerInstance"),SYe=Symbol("getParseContext"),RYe=Symbol("getUsageInstance"),kYe=Symbol("getValidationInstance"),VX=Symbol("hasParseCallback"),PYe=Symbol("isGlobalContext"),jR=Symbol("postProcess"),DYe=Symbol("rebase"),uxe=Symbol("reset"),x7=Symbol("runYargsParserAndExecuteCommands"),dxe=Symbol("runValidation"),BYe=Symbol("setHasOutput"),GR=Symbol("kTrackManuallySetKeys"),fxe=class{static{a(this,"YargsInstance")}constructor(e=[],r,n,o){this.customScriptName=!1,this.parsed=!1,Hc.set(this,void 0),FR.set(this,void 0),v7.set(this,{commands:[],fullCommands:[]}),Sh.set(this,null),Y0.set(this,null),QX.set(this,"show-hidden"),KT.set(this,null),OR.set(this,!0),UX.set(this,{}),Rh.set(this,!0),qX.set(this,[]),kh.set(this,void 0),ZC.set(this,{}),J0.set(this,!1),Ph.set(this,null),HX.set(this,!0),I3.set(this,void 0),hu.set(this,""),cn.set(this,void 0),WX.set(this,void 0),$X.set(this,{}),X0.set(this,null),QR.set(this,null),T3.set(this,{}),UR.set(this,{}),YT.set(this,void 0),jX.set(this,!1),Kn.set(this,void 0),qR.set(this,!1),HR.set(this,!1),WR.set(this,!1),ui.set(this,void 0),GX.set(this,{}),ev.set(this,null),hc.set(this,void 0),Ur(this,Kn,o,"f"),Ur(this,YT,e,"f"),Ur(this,FR,r,"f"),Ur(this,WX,n,"f"),Ur(this,kh,new MX(this),"f"),this.$0=this[CYe](),this[uxe](),Ur(this,Hc,ge(this,Hc,"f"),"f"),Ur(this,ui,ge(this,ui,"f"),"f"),Ur(this,hc,ge(this,hc,"f"),"f"),Ur(this,cn,ge(this,cn,"f"),"f"),ge(this,cn,"f").showHiddenOpt=ge(this,QX,"f"),Ur(this,I3,this[gYe](),"f")}addHelpOpt(e,r){let n="help";return Or("[string|boolean] [string]",[e,r],arguments.length),ge(this,Ph,"f")&&(this[rxe](ge(this,Ph,"f")),Ur(this,Ph,null,"f")),e===!1&&r===void 0?this:(Ur(this,Ph,typeof e=="string"?e:n,"f"),this.boolean(ge(this,Ph,"f")),this.describe(ge(this,Ph,"f"),r||ge(this,ui,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Or("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:ge(this,QX,"f");return this.boolean(n),this.describe(n,r||ge(this,ui,"f").deferY18nLookup("Show hidden options")),ge(this,cn,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Or("<object|string|array> [string|array]",[e,r],arguments.length),this[oxe](this.alias.bind(this),"alias",e,r),this}array(e){return Or("<array|string>",[e],arguments.length),this[JT]("array",e),this[GR](e),this}boolean(e){return Or("<array|string>",[e],arguments.length),this[JT]("boolean",e),this[GR](e),this}check(e,r){return Or("<function> [boolean]",[e,r],arguments.length),this.middleware((n,o)=>LR(()=>e(n,o.getOptions()),s=>(s?(typeof s=="string"||s instanceof Error)&&ge(this,ui,"f").fail(s.toString(),s):ge(this,ui,"f").fail(ge(this,Kn,"f").y18n.__("Argument check failed: %s",e.toString())),n),s=>(ge(this,ui,"f").fail(s.message?s.message:s.toString(),s),n)),!1,r),this}choices(e,r){return Or("<object|string|array> [string|array]",[e,r],arguments.length),this[oxe](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Or("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new ca("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new ca("coerce callback must be provided");return ge(this,cn,"f").key[e]=!0,ge(this,kh,"f").addCoerceMiddleware((n,o)=>{let s;return Object.prototype.hasOwnProperty.call(n,e)?LR(()=>(s=o.getAliases(),r(n[e])),l=>{n[e]=l;let u=o.getInternalMethods().getParserConfiguration()["strip-aliased"];if(s[e]&&u!==!0)for(let d of s[e])n[d]=l;return n},l=>{throw new ca(l.message)}):n},e),this}conflicts(e,r){return Or("<string|object> [string|array]",[e,r],arguments.length),ge(this,hc,"f").conflicts(e,r),this}config(e="config",r,n){return Or("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=OX(e,ge(this,FR,"f"),this[$R]()["deep-merge-config"]||!1,ge(this,Kn,"f")),ge(this,cn,"f").configObjects=(ge(this,cn,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||ge(this,ui,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(o=>{ge(this,cn,"f").config[o]=n||!0}),this)}completion(e,r,n){return Or("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Ur(this,Y0,e||ge(this,Y0,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(ge(this,Y0,"f"),r),n&&ge(this,Sh,"f").registerFunction(n),this}command(e,r,n,o,s,c){return Or("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,o,s,c],arguments.length),ge(this,Hc,"f").addHandler(e,r,n,o,s,c),this}commands(e,r,n,o,s,c){return this.command(e,r,n,o,s,c)}commandDir(e,r){Or("<string> [object]",[e,r],arguments.length);let n=ge(this,WX,"f")||ge(this,Kn,"f").require;return ge(this,Hc,"f").addDirectory(e,n,ge(this,Kn,"f").getCallerFile(),r),this}count(e){return Or("<array|string>",[e],arguments.length),this[JT]("count",e),this[GR](e),this}default(e,r,n){return Or("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(Y1e(e,ge(this,Kn,"f")),ge(this,cn,"f").defaultDescription[e]=n),typeof r=="function"&&(Y1e(e,ge(this,Kn,"f")),ge(this,cn,"f").defaultDescription[e]||(ge(this,cn,"f").defaultDescription[e]=ge(this,ui,"f").functionDescription(r)),r=r.call()),this[w3](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,o){return Or("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,o],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),ge(this,cn,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:o},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(o=>{Df(n,!0,ge(this,Kn,"f")),this.demandOption(o,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(Df(n,!0,ge(this,Kn,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(o=>{Df(n,!0,ge(this,Kn,"f")),this.demandOption(o,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Or("<object|string|array> [string]",[e,r],arguments.length),this[w3](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Or("<string> [string|boolean]",[e,r],arguments.length),ge(this,cn,"f").deprecatedOptions[e]=r,this}describe(e,r){return Or("<object|string|array> [string]",[e,r],arguments.length),this[cxe](e,!0),ge(this,ui,"f").describe(e,r),this}detectLocale(e){return Or("<boolean>",[e],arguments.length),Ur(this,OR,e,"f"),this}env(e){return Or("[string|boolean]",[e],arguments.length),e===!1?delete ge(this,cn,"f").envPrefix:ge(this,cn,"f").envPrefix=e||"",this}epilogue(e){return Or("<string>",[e],arguments.length),ge(this,ui,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Or("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):ge(this,ui,"f").example(e,r),this}exit(e,r){Ur(this,J0,!0,"f"),Ur(this,KT,r,"f"),ge(this,Rh,"f")&&ge(this,Kn,"f").process.exit(e)}exitProcess(e=!0){return Or("[boolean]",[e],arguments.length),Ur(this,Rh,e,"f"),this}fail(e){if(Or("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new ca("Invalid first argument. Expected function or boolean 'false'");return ge(this,ui,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Or("<array> [function]",[e,r],arguments.length),r?ge(this,Sh,"f").getCompletion(e,r):new Promise((n,o)=>{ge(this,Sh,"f").getCompletion(e,(s,c)=>{s?o(s):n(c)})})}getDemandedOptions(){return Or([],0),ge(this,cn,"f").demandedOptions}getDemandedCommands(){return Or([],0),ge(this,cn,"f").demandedCommands}getDeprecatedOptions(){return Or([],0),ge(this,cn,"f").deprecatedOptions}getDetectLocale(){return ge(this,OR,"f")}getExitProcess(){return ge(this,Rh,"f")}getGroups(){return Object.assign({},ge(this,ZC,"f"),ge(this,UR,"f"))}getHelp(){if(Ur(this,J0,!0,"f"),!ge(this,ui,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[x7](ge(this,YT,"f"),void 0,void 0,0,!0);if(la(r))return r.then(()=>ge(this,ui,"f").help())}let e=ge(this,Hc,"f").runDefaultBuilderOn(this);if(la(e))return e.then(()=>ge(this,ui,"f").help())}return Promise.resolve(ge(this,ui,"f").help())}getOptions(){return ge(this,cn,"f")}getStrict(){return ge(this,qR,"f")}getStrictCommands(){return ge(this,HR,"f")}getStrictOptions(){return ge(this,WR,"f")}global(e,r){return Or("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?ge(this,cn,"f").local=ge(this,cn,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{ge(this,cn,"f").local.includes(n)||ge(this,cn,"f").local.push(n)}),this}group(e,r){Or("<string|array> <string>",[e,r],arguments.length);let n=ge(this,UR,"f")[r]||ge(this,ZC,"f")[r];ge(this,UR,"f")[r]&&delete ge(this,UR,"f")[r];let o={};return ge(this,ZC,"f")[r]=(n||[]).concat(e).filter(s=>o[s]?!1:o[s]=!0),this}hide(e){return Or("<string>",[e],arguments.length),ge(this,cn,"f").hiddenOptions.push(e),this}implies(e,r){return Or("<string|object> [number|string|array]",[e,r],arguments.length),ge(this,hc,"f").implies(e,r),this}locale(e){return Or("[string]",[e],arguments.length),e===void 0?(this[nxe](),ge(this,Kn,"f").y18n.getLocale()):(Ur(this,OR,!1,"f"),ge(this,Kn,"f").y18n.setLocale(e),this)}middleware(e,r,n){return ge(this,kh,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Or("<string|object|array> [number]",[e,r],arguments.length),this[w3](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Or("<array|string>",[e],arguments.length),this[JT]("normalize",e),this}number(e){return Or("<array|string>",[e],arguments.length),this[JT]("number",e),this[GR](e),this}option(e,r){if(Or("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[GR](e),ge(this,ev,"f")&&(e==="version"||r?.alias==="version")&&this[AYe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),ge(this,cn,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let o=r.demand||r.required||r.require;o&&this.demand(e,o),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(ge(this,cn,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let s=r.describe||r.description||r.desc,c=ge(this,ui,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(c,e)||typeof s=="string")&&this.describe(e,s),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Or("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[yYe](),typeof e>"u"&&(e=ge(this,YT,"f")),typeof r=="object"&&(Ur(this,QR,r,"f"),r=n),typeof r=="function"&&(Ur(this,X0,r,"f"),r=!1),r||Ur(this,YT,e,"f"),ge(this,X0,"f")&&Ur(this,Rh,!1,"f");let o=this[x7](e,!!r),s=this.parsed;return ge(this,Sh,"f").setParsed(this.parsed),la(o)?o.then(c=>(ge(this,X0,"f")&&ge(this,X0,"f").call(this,ge(this,KT,"f"),c,ge(this,hu,"f")),c)).catch(c=>{throw ge(this,X0,"f")&&ge(this,X0,"f")(c,this.parsed.argv,ge(this,hu,"f")),c}).finally(()=>{this[lxe](),this.parsed=s}):(ge(this,X0,"f")&&ge(this,X0,"f").call(this,ge(this,KT,"f"),o,ge(this,hu,"f")),this[lxe](),this.parsed=s,o)}parseAsync(e,r,n){let o=this.parse(e,r,n);return la(o)?o:Promise.resolve(o)}parseSync(e,r,n){let o=this.parse(e,r,n);if(la(o))throw new ca(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return o}parserConfiguration(e){return Or("<object>",[e],arguments.length),Ur(this,$X,e,"f"),this}pkgConf(e,r){Or("<string> [string]",[e,r],arguments.length);let n=null,o=this[ixe](r||ge(this,FR,"f"));return o[e]&&typeof o[e]=="object"&&(n=OX(o[e],r||ge(this,FR,"f"),this[$R]()["deep-merge-config"]||!1,ge(this,Kn,"f")),ge(this,cn,"f").configObjects=(ge(this,cn,"f").configObjects||[]).concat(n)),this}positional(e,r){Or("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=VT(r,(c,l)=>c==="type"&&!["string","number","boolean"].includes(l)?!1:n.includes(c));let o=ge(this,v7,"f").fullCommands[ge(this,v7,"f").fullCommands.length-1],s=o?ge(this,Hc,"f").cmdToParseOptions(o):{array:[],alias:{},default:{},demand:{}};return E3(s).forEach(c=>{let l=s[c];Array.isArray(l)?l.indexOf(e)!==-1&&(r[c]=!0):l[e]&&!(c in r)&&(r[c]=l[e])}),this.group(e,ge(this,ui,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Or("[boolean]",[e],arguments.length),Ur(this,jX,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Or("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&ge(this,cn,"f").narg[e]?this:(this[w3](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Or("[string] [string]",[e,r],arguments.length),e=e||this.$0,ge(this,I3,"f").log(ge(this,Sh,"f").generateCompletionScript(e,r||ge(this,Y0,"f")||"completion")),this}showHelp(e){if(Or("[string|function]",[e],arguments.length),Ur(this,J0,!0,"f"),!ge(this,ui,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[x7](ge(this,YT,"f"),void 0,void 0,0,!0);if(la(n))return n.then(()=>{ge(this,ui,"f").showHelp(e)}),this}let r=ge(this,Hc,"f").runDefaultBuilderOn(this);if(la(r))return r.then(()=>{ge(this,ui,"f").showHelp(e)}),this}return ge(this,ui,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Or("[boolean|string] [string]",[e,r],arguments.length),ge(this,ui,"f").showHelpOnFail(e,r),this}showVersion(e){return Or("[string|function]",[e],arguments.length),ge(this,ui,"f").showVersion(e),this}skipValidation(e){return Or("<array|string>",[e],arguments.length),this[JT]("skipValidation",e),this}strict(e){return Or("[boolean]",[e],arguments.length),Ur(this,qR,e!==!1,"f"),this}strictCommands(e){return Or("[boolean]",[e],arguments.length),Ur(this,HR,e!==!1,"f"),this}strictOptions(e){return Or("[boolean]",[e],arguments.length),Ur(this,WR,e!==!1,"f"),this}string(e){return Or("<array|string>",[e],arguments.length),this[JT]("string",e),this[GR](e),this}terminalWidth(){return Or([],0),ge(this,Kn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Or("<object>",[e],arguments.length),Ur(this,OR,!1,"f"),ge(this,Kn,"f").y18n.updateLocale(e),this}usage(e,r,n,o){if(Or("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,o],arguments.length),r!==void 0){if(Df(e,null,ge(this,Kn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,o);throw new ca(".usage() description must start with $0 if being used as alias for .command()")}else return ge(this,ui,"f").usage(e),this}usageConfiguration(e){return Or("<object>",[e],arguments.length),Ur(this,GX,e,"f"),this}version(e,r,n){let o="version";if(Or("[boolean|string] [string] [string]",[e,r,n],arguments.length),ge(this,ev,"f")&&(this[rxe](ge(this,ev,"f")),ge(this,ui,"f").version(void 0),Ur(this,ev,null,"f")),arguments.length===0)n=this[xYe](),e=o;else if(arguments.length===1){if(e===!1)return this;n=e,e=o}else arguments.length===2&&(n=r,r=void 0);return Ur(this,ev,typeof e=="string"?e:o,"f"),r=r||ge(this,ui,"f").deferY18nLookup("Show version number"),ge(this,ui,"f").version(n||void 0),this.boolean(ge(this,ev,"f")),this.describe(ge(this,ev,"f"),r),this}wrap(e){return Or("<number|null|undefined>",[e],arguments.length),ge(this,ui,"f").wrap(e),this}[(Hc=new WeakMap,FR=new WeakMap,v7=new WeakMap,Sh=new WeakMap,Y0=new WeakMap,QX=new WeakMap,KT=new WeakMap,OR=new WeakMap,UX=new WeakMap,Rh=new WeakMap,qX=new WeakMap,kh=new WeakMap,ZC=new WeakMap,J0=new WeakMap,Ph=new WeakMap,HX=new WeakMap,I3=new WeakMap,hu=new WeakMap,cn=new WeakMap,WX=new WeakMap,$X=new WeakMap,X0=new WeakMap,QR=new WeakMap,T3=new WeakMap,UR=new WeakMap,YT=new WeakMap,jX=new WeakMap,Kn=new WeakMap,qR=new WeakMap,HR=new WeakMap,WR=new WeakMap,ui=new WeakMap,GX=new WeakMap,ev=new WeakMap,hc=new WeakMap,hYe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[gYe](){return{log:a((...e)=>{this[VX]()||console.log(...e),Ur(this,J0,!0,"f"),ge(this,hu,"f").length&&Ur(this,hu,ge(this,hu,"f")+`
`,"f"),Ur(this,hu,ge(this,hu,"f")+e.join(" "),"f")},"log"),error:a((...e)=>{this[VX]()||console.error(...e),Ur(this,J0,!0,"f"),ge(this,hu,"f").length&&Ur(this,hu,ge(this,hu,"f")+`
`,"f"),Ur(this,hu,ge(this,hu,"f")+e.join(" "),"f")},"error")}}[rxe](e){E3(ge(this,cn,"f")).forEach(r=>{if((o=>o==="configObjects")(r))return;let n=ge(this,cn,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete ge(this,ui,"f").getDescriptions()[e]}[AYe](e,r,n){ge(this,UX,"f")[n]||(ge(this,Kn,"f").process.emitWarning(e,r),ge(this,UX,"f")[n]=!0)}[yYe](){ge(this,qX,"f").push({options:ge(this,cn,"f"),configObjects:ge(this,cn,"f").configObjects.slice(0),exitProcess:ge(this,Rh,"f"),groups:ge(this,ZC,"f"),strict:ge(this,qR,"f"),strictCommands:ge(this,HR,"f"),strictOptions:ge(this,WR,"f"),completionCommand:ge(this,Y0,"f"),output:ge(this,hu,"f"),exitError:ge(this,KT,"f"),hasOutput:ge(this,J0,"f"),parsed:this.parsed,parseFn:ge(this,X0,"f"),parseContext:ge(this,QR,"f")}),ge(this,ui,"f").freeze(),ge(this,hc,"f").freeze(),ge(this,Hc,"f").freeze(),ge(this,kh,"f").freeze()}[CYe](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(ge(this,Kn,"f").process.argv()[0])?r=ge(this,Kn,"f").process.argv().slice(1,2):r=ge(this,Kn,"f").process.argv().slice(0,1),e=r.map(n=>{let o=this[DYe](ge(this,FR,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&o.length<n.length?o:n}).join(" ").trim(),ge(this,Kn,"f").getEnv("_")&&ge(this,Kn,"f").getProcessArgvBin()===ge(this,Kn,"f").getEnv("_")&&(e=ge(this,Kn,"f").getEnv("_").replace(`${ge(this,Kn,"f").path.dirname(ge(this,Kn,"f").process.execPath())}/`,"")),e}[$R](){return ge(this,$X,"f")}[vYe](){return ge(this,GX,"f")}[nxe](){if(!ge(this,OR,"f"))return;let e=ge(this,Kn,"f").getEnv("LC_ALL")||ge(this,Kn,"f").getEnv("LC_MESSAGES")||ge(this,Kn,"f").getEnv("LANG")||ge(this,Kn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[xYe](){return this[ixe]().version||"unknown"}[EYe](e){let r=e["--"]?e["--"]:e._;for(let n=0,o;(o=r[n])!==void 0;n++)ge(this,Kn,"f").Parser.looksLikeNumber(o)&&Number.isSafeInteger(Math.floor(parseFloat(`${o}`)))&&(r[n]=Number(o));return e}[ixe](e){let r=e||"*";if(ge(this,T3,"f")[r])return ge(this,T3,"f")[r];let n={};try{let o=e||ge(this,Kn,"f").mainFilename;!e&&ge(this,Kn,"f").path.extname(o)&&(o=ge(this,Kn,"f").path.dirname(o));let s=ge(this,Kn,"f").findUp(o,(c,l)=>{if(l.includes("package.json"))return"package.json"});Df(s,void 0,ge(this,Kn,"f")),n=JSON.parse(ge(this,Kn,"f").readFileSync(s,"utf8"))}catch{}return ge(this,T3,"f")[r]=n||{},ge(this,T3,"f")[r]}[JT](e,r){r=[].concat(r),r.forEach(n=>{n=this[axe](n),ge(this,cn,"f")[e].push(n)})}[w3](e,r,n,o){this[sxe](e,r,n,o,(s,c,l)=>{ge(this,cn,"f")[s][c]=l})}[oxe](e,r,n,o){this[sxe](e,r,n,o,(s,c,l)=>{ge(this,cn,"f")[s][c]=(ge(this,cn,"f")[s][c]||[]).concat(l)})}[sxe](e,r,n,o,s){if(Array.isArray(n))n.forEach(c=>{e(c,o)});else if((c=>typeof c=="object")(n))for(let c of E3(n))e(c,n[c]);else s(r,this[axe](n),o)}[axe](e){return e==="__proto__"?"___proto___":e}[cxe](e,r){return this[w3](this[cxe].bind(this),"key",e,r),this}[lxe](){var e,r,n,o,s,c,l,u,d,p,m,h;let g=ge(this,qX,"f").pop();Df(g,void 0,ge(this,Kn,"f"));let A;e=this,r=this,n=this,o=this,s=this,c=this,l=this,u=this,d=this,p=this,m=this,h=this,{options:{set value(y){Ur(e,cn,y,"f")}}.value,configObjects:A,exitProcess:{set value(y){Ur(r,Rh,y,"f")}}.value,groups:{set value(y){Ur(n,ZC,y,"f")}}.value,output:{set value(y){Ur(o,hu,y,"f")}}.value,exitError:{set value(y){Ur(s,KT,y,"f")}}.value,hasOutput:{set value(y){Ur(c,J0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){Ur(l,qR,y,"f")}}.value,strictCommands:{set value(y){Ur(u,HR,y,"f")}}.value,strictOptions:{set value(y){Ur(d,WR,y,"f")}}.value,completionCommand:{set value(y){Ur(p,Y0,y,"f")}}.value,parseFn:{set value(y){Ur(m,X0,y,"f")}}.value,parseContext:{set value(y){Ur(h,QR,y,"f")}}.value}=g,ge(this,cn,"f").configObjects=A,ge(this,ui,"f").unfreeze(),ge(this,hc,"f").unfreeze(),ge(this,Hc,"f").unfreeze(),ge(this,kh,"f").unfreeze()}[bYe](e,r){return LR(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[IYe].bind(this),getContext:this[TYe].bind(this),getHasOutput:this[wYe].bind(this),getLoggerInstance:this[_Ye].bind(this),getParseContext:this[SYe].bind(this),getParserConfiguration:this[$R].bind(this),getUsageConfiguration:this[vYe].bind(this),getUsageInstance:this[RYe].bind(this),getValidationInstance:this[kYe].bind(this),hasParseCallback:this[VX].bind(this),isGlobalContext:this[PYe].bind(this),postProcess:this[jR].bind(this),reset:this[uxe].bind(this),runValidation:this[dxe].bind(this),runYargsParserAndExecuteCommands:this[x7].bind(this),setHasOutput:this[BYe].bind(this)}}[IYe](){return ge(this,Hc,"f")}[TYe](){return ge(this,v7,"f")}[wYe](){return ge(this,J0,"f")}[_Ye](){return ge(this,I3,"f")}[SYe](){return ge(this,QR,"f")||{}}[RYe](){return ge(this,ui,"f")}[kYe](){return ge(this,hc,"f")}[VX](){return!!ge(this,X0,"f")}[PYe](){return ge(this,HX,"f")}[jR](e,r,n,o){return n||la(e)||(r||(e=this[hYe](e)),(this[$R]()["parse-positional-numbers"]||this[$R]()["parse-positional-numbers"]===void 0)&&(e=this[EYe](e)),o&&(e=MR(e,this,ge(this,kh,"f").getMiddleware(),!1))),e}[uxe](e={}){Ur(this,cn,ge(this,cn,"f")||{},"f");let r={};r.local=ge(this,cn,"f").local||[],r.configObjects=ge(this,cn,"f").configObjects||[];let n={};r.local.forEach(c=>{n[c]=!0,(e[c]||[]).forEach(l=>{n[l]=!0})}),Object.assign(ge(this,UR,"f"),Object.keys(ge(this,ZC,"f")).reduce((c,l)=>{let u=ge(this,ZC,"f")[l].filter(d=>!(d in n));return u.length>0&&(c[l]=u),c},{})),Ur(this,ZC,{},"f");let o=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],s=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return o.forEach(c=>{r[c]=(ge(this,cn,"f")[c]||[]).filter(l=>!n[l])}),s.forEach(c=>{r[c]=VT(ge(this,cn,"f")[c],l=>!n[l])}),r.envPrefix=ge(this,cn,"f").envPrefix,Ur(this,cn,r,"f"),Ur(this,ui,ge(this,ui,"f")?ge(this,ui,"f").reset(n):aYe(this,ge(this,Kn,"f")),"f"),Ur(this,hc,ge(this,hc,"f")?ge(this,hc,"f").reset(n):pYe(this,ge(this,ui,"f"),ge(this,Kn,"f")),"f"),Ur(this,Hc,ge(this,Hc,"f")?ge(this,Hc,"f").reset():iYe(ge(this,ui,"f"),ge(this,hc,"f"),ge(this,kh,"f"),ge(this,Kn,"f")),"f"),ge(this,Sh,"f")||Ur(this,Sh,uYe(this,ge(this,ui,"f"),ge(this,Hc,"f"),ge(this,Kn,"f")),"f"),ge(this,kh,"f").reset(),Ur(this,Y0,null,"f"),Ur(this,hu,"","f"),Ur(this,KT,null,"f"),Ur(this,J0,!1,"f"),this.parsed=!1,this}[DYe](e,r){return ge(this,Kn,"f").path.relative(e,r)}[x7](e,r,n,o=0,s=!1){let c=!!n||s;e=e||ge(this,YT,"f"),ge(this,cn,"f").__=ge(this,Kn,"f").y18n.__,ge(this,cn,"f").configuration=this[$R]();let l=!!ge(this,cn,"f").configuration["populate--"],u=Object.assign({},ge(this,cn,"f").configuration,{"populate--":!0}),d=ge(this,Kn,"f").Parser.detailed(e,Object.assign({},ge(this,cn,"f"),{configuration:{"parse-positional-numbers":!1,...u}})),p=Object.assign(d.argv,ge(this,QR,"f")),m,h=d.aliases,g=!1,A=!1;Object.keys(p).forEach(y=>{y===ge(this,Ph,"f")&&p[y]?g=!0:y===ge(this,ev,"f")&&p[y]&&(A=!0)}),p.$0=this.$0,this.parsed=d,o===0&&ge(this,ui,"f").clearCachedHelpMessage();try{if(this[nxe](),r)return this[jR](p,l,!!n,!1);ge(this,Ph,"f")&&[ge(this,Ph,"f")].concat(h[ge(this,Ph,"f")]||[]).filter(_=>_.length>1).includes(""+p._[p._.length-1])&&(p._.pop(),g=!0),Ur(this,HX,!1,"f");let y=ge(this,Hc,"f").getCommands(),v=ge(this,Sh,"f").completionKey in p,b=g||v||s;if(p._.length){if(y.length){let I;for(let _=o||0,k;p._[_]!==void 0;_++)if(k=String(p._[_]),y.includes(k)&&k!==ge(this,Y0,"f")){let N=ge(this,Hc,"f").runCommand(k,this,d,_+1,s,g||A||s);return this[jR](N,l,!!n,!1)}else if(!I&&k!==ge(this,Y0,"f")){I=k;break}!ge(this,Hc,"f").hasDefaultCommand()&&ge(this,jX,"f")&&I&&!b&&ge(this,hc,"f").recommendCommands(I,y)}ge(this,Y0,"f")&&p._.includes(ge(this,Y0,"f"))&&!v&&(ge(this,Rh,"f")&&zT(!0),this.showCompletionScript(),this.exit(0))}if(ge(this,Hc,"f").hasDefaultCommand()&&!b){let I=ge(this,Hc,"f").runCommand(null,this,d,0,s,g||A||s);return this[jR](I,l,!!n,!1)}if(v){ge(this,Rh,"f")&&zT(!0),e=[].concat(e);let I=e.slice(e.indexOf(`--${ge(this,Sh,"f").completionKey}`)+1);return ge(this,Sh,"f").getCompletion(I,(_,k)=>{if(_)throw new ca(_.message);(k||[]).forEach(N=>{ge(this,I3,"f").log(N)}),this.exit(0)}),this[jR](p,!l,!!n,!1)}if(ge(this,J0,"f")||(g?(ge(this,Rh,"f")&&zT(!0),c=!0,this.showHelp("log"),this.exit(0)):A&&(ge(this,Rh,"f")&&zT(!0),c=!0,ge(this,ui,"f").showVersion("log"),this.exit(0))),!c&&ge(this,cn,"f").skipValidation.length>0&&(c=Object.keys(p).some(I=>ge(this,cn,"f").skipValidation.indexOf(I)>=0&&p[I]===!0)),!c){if(d.error)throw new ca(d.error.message);if(!v){let I=this[dxe](h,{},d.error);n||(m=MR(p,this,ge(this,kh,"f").getMiddleware(),!0)),m=this[bYe](I,m??p),la(m)&&!n&&(m=m.then(()=>MR(p,this,ge(this,kh,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof ca)ge(this,ui,"f").fail(y.message,y);else throw y}return this[jR](m??p,l,!!n,!0)}[dxe](e,r,n,o){let s={...this.getDemandedOptions()};return c=>{if(n)throw new ca(n.message);ge(this,hc,"f").nonOptionCount(c),ge(this,hc,"f").requiredArguments(c,s);let l=!1;ge(this,HR,"f")&&(l=ge(this,hc,"f").unknownCommands(c)),ge(this,qR,"f")&&!l?ge(this,hc,"f").unknownArguments(c,e,r,!!o):ge(this,WR,"f")&&ge(this,hc,"f").unknownArguments(c,e,{},!1,!1),ge(this,hc,"f").limitedChoices(c),ge(this,hc,"f").implications(c),ge(this,hc,"f").conflicting(c)}}[BYe](){Ur(this,J0,!0,"f")}[GR](e){if(typeof e=="string")ge(this,cn,"f").key[e]=!0;else for(let r of e)ge(this,cn,"f").key[r]=!0}};function oYe(t){return!!t&&typeof t.getInternalMethods=="function"}a(oYe,"isYargsInstance");var nVt=NYe(ZKe),MYe=nVt;f();f();f();var LYe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function FYe(t,e,r){let n=Kr.createAndMarkAsIssued({authSource:e,authType:r});return Pt(t,LYe.NewGitHubLogin,n)}a(FYe,"telemetryNewGitHubLogin");function OYe(t,e){let r=Kr.createAndMarkAsIssued({authType:e});return Pt(t,LYe.GitHubLoginSuccess,r)}a(OYe,"telemetryGitHubLoginSuccess");var pxe=class extends Da{static{a(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function iVt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...y0(t)},json:{client_id:e,scope:"repo"},timeout:3e4},o,s=new URL("login/device/code",r).href;try{o=await t.get(Lr).fetch(s,n)}catch(c){throw c instanceof Error&&ZF(c)?new Da(`Could not log in with device flow on ${r}: ${c.message}`):c}if(!o.ok)throw new Da(`Could not log in with device flow on ${r}: HTTP ${o.status}`);return await o.json()}a(iVt,"requestDeviceFlowStage1");async function oVt(t,e,r,{serverUrl:n}){let o={method:"POST",headers:{Accept:"application/json",...y0(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},s=await t.get(Lr).fetch(new URL("login/oauth/access_token",n).href,o),c=await s.json();if(c.access_token||c.error==="authorization_pending"||c.error==="slow_down")return c;throw c.error&&c.error_description?new pxe(c):new Da(`Unexpected ${s.status} response from device flow: ${JSON.stringify(c)}`)}a(oVt,"requestDeviceFlowStage2");async function sVt(t,e){OYe(t,"deviceFlow");let n=await(await hf(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new Da(`Error retrieving user information: ${String(n.errors)}`);return n}a(sVt,"requestUserInfo");var Bf=class{constructor(e){this.ctx=e;this.pendingSignIn=void 0}static{a(this,"GitHubDeviceFlow")}get authManager(){return this.ctx.get(Fi)}get authPersistence(){return this.ctx.get(yA)}async save(e){let r=new URL(e.serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e.accessToken,user:e.login,githubAppId:e.githubAppId,authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n,freshSignIn:n})}async initiate(e,r){let n=e?.githubAppId??this.ctx.get(uu).findAppIdToAuthenticate();r??=this.authManager.getConfiguredUrls();try{let o=await this.getTokenUnguarded(n,r),s=o.waitForAuth.then(async c=>(this.ctx.get(uu).githubAppId=n,await this.save(c)));return s.catch(()=>{}),this.pendingSignIn={verificationUri:o.verification_uri,status:s},o}catch(o){throw this.ctx.get(Ap).notifyUser(this.ctx,o),o}}async abandon(){let{serverUrl:e}=this.authManager.getConfiguredUrls(),r=new URL(e).hostname;await this.authPersistence.deleteAuthRecord({authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n})}async getTokenUnguarded(e,r){let n=this.ctx;FYe(n,"unknown","deviceFlow");let o=await iVt(n,e,r),s=(async()=>{let c=o.expires_in,l=o.interval,u;do{await new Promise(p=>setTimeout(p,1e3*l)),u=await oVt(n,o.device_code,e,r),c-=l;let d=u.access_token;if(d){let p=await sVt(n,{...r,accessToken:d});return{...r,githubAppId:e,login:p.login,accessToken:d}}l=u.interval??l}while(c>0);throw new Da(`Timed out polling for access token. Last response was ${JSON.stringify(u)}`)})();return{...o,waitForAuth:s}}};f();var Nf=class{static{a(this,"CitationManager")}},zX=class extends Nf{static{a(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};f();f();f();var aVt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1,mcpElicitation:!1,mcpSampling:!1},ss=class{constructor(){this.capabilities={...aVt};this.emitter=new is;this.onDidSetCapabilities=this.emitter.event}static{a(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}this.emitter.fire(this.capabilities)}getCapabilities(){return this.capabilities}};f();f();f();f();function mxe(t,e){let r=FA(t,e);return r===-1?void 0:t[r]}a(mxe,"findLastMonotonous");function FA(t,e,r=0,n=t.length){let o=r,s=n;for(;o<s;){let c=Math.floor((o+s)/2);e(t[c])?o=c+1:s=c}return o-1}a(FA,"findLastIdxMonotonous");function _3(t,e,r=0,n=t.length){let o=r,s=n;for(;o<s;){let c=Math.floor((o+s)/2);e(t[c])?s=c:o=c+1}return o}a(_3,"findFirstIdxMonotonousOrArrLen");var QYe=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{a(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=FA(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};f();var hxe=class{static{a(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?KX.isErrorNoTelemetry(e)?new KX(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},UYe=new hxe;function VR(t){UYe.onUnexpectedError(t)}a(VR,"onBugIndicatingError");function S3(t){cVt(t)||UYe.onUnexpectedError(t)}a(S3,"onUnexpectedError");var gxe="Canceled";function cVt(t){return t instanceof Z0?!0:t instanceof Error&&t.name===gxe&&t.message===gxe}a(cVt,"isCancellationError");var Z0=class extends Error{static{a(this,"CancellationError")}constructor(){super(gxe),this.name=this.message}};function E7(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}a(E7,"illegalArgument");function qYe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}a(qYe,"illegalState");var KX=class t extends Error{static{a(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},bn=class t extends Error{static{a(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function R3(t,e,r=(n,o)=>n===o){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,o=t.length;n<o;n++)if(!r(t[n],e[n]))return!1;return!0}a(R3,"equals");function*zR(t,e){let r,n;for(let o of t)n!==void 0&&e(n,o)?r.push(o):(r&&(yield r),r=[o]),n=o;r&&(yield r)}a(zR,"groupAdjacentBy");function JX(t){return t.filter(e=>!!e)}a(JX,"coalesce");var WYe;(l=>{function t(u){return u<0}l.isLessThan=t,a(t,"isLessThan");function e(u){return u<=0}l.isLessThanOrEqual=e,a(e,"isLessThanOrEqual");function r(u){return u>0}l.isGreaterThan=r,a(r,"isGreaterThan");function n(u){return u===0}l.isNeitherLessOrGreaterThan=n,a(n,"isNeitherLessOrGreaterThan"),l.greaterThan=1,l.lessThan=-1,l.neitherLessOrGreaterThan=0})(WYe||={});function Dh(t,e){return(r,n)=>e(t(r),t(n))}a(Dh,"compareBy");var Bh=a((t,e)=>t-e,"numberComparator");var YX=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{a(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},HYe=class t{constructor(e){this.iterate=e}static{a(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(o=>((n||WYe.isGreaterThan(e(o,r)))&&(n=!1,r=o),!0)),r}};function b7(t,e){return t.reduce((r,n)=>r+e(n),0)}a(b7,"sumBy");f();function VYe(t,e){let r=Object.create(null);for(let n of t){let o=e(n),s=r[o];s||(s=r[o]=[]),s.push(n)}return r}a(VYe,"groupBy");var jYe,GYe,$Ye=class{constructor(e,r){this.toKey=r;this._map=new Map;this[jYe]="SetWithKey";for(let n of e)this.add(n)}static{a(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(GYe=Symbol.iterator,jYe=Symbol.toStringTag,GYe)](){return this.values()}};f();function Axe(t,e){let r=this,n=!1,o;return function(){if(n)return o;if(n=!0,e)try{o=t.apply(r,arguments)}finally{e()}else o=t.apply(r,arguments);return o}}a(Axe,"createSingleCallFunction");f();var yxe;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,a(t,"is");let e=Object.freeze([]);function r(){return e}_.empty=r,a(r,"empty");function*n(k){yield k}_.single=n,a(n,"single");function o(k){return t(k)?k:n(k)}_.wrap=o,a(o,"wrap");function s(k){return k||e}_.from=s,a(s,"from");function*c(k){for(let N=k.length-1;N>=0;N--)yield k[N]}_.reverse=c,a(c,"reverse");function l(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=l,a(l,"isEmpty");function u(k){return k[Symbol.iterator]().next().value}_.first=u,a(u,"first");function d(k,N){let F=0;for(let O of k)if(N(O,F++))return!0;return!1}_.some=d,a(d,"some");function p(k,N){for(let F of k)if(N(F))return F}_.find=p,a(p,"find");function*m(k,N){for(let F of k)N(F)&&(yield F)}_.filter=m,a(m,"filter");function*h(k,N){let F=0;for(let O of k)yield N(O,F++)}_.map=h,a(h,"map");function*g(k,N){let F=0;for(let O of k)yield*N(O,F++)}_.flatMap=g,a(g,"flatMap");function*A(...k){for(let N of k)yield*N}_.concat=A,a(A,"concat");function y(k,N,F){let O=F;for(let Y of k)O=N(O,Y);return O}_.reduce=y,a(y,"reduce");function*v(k,N,F=k.length){for(N<-k.length&&(N=0),N<0&&(N+=k.length),F<0?F+=k.length:F>k.length&&(F=k.length);N<F;N++)yield k[N]}_.slice=v,a(v,"slice");function b(k,N=Number.POSITIVE_INFINITY){let F=[];if(N===0)return[F,k];let O=k[Symbol.iterator]();for(let Y=0;Y<N;Y++){let z=O.next();if(z.done)return[F,_.empty()];F.push(z.value)}return[F,{[Symbol.iterator](){return O}}]}_.consume=b,a(b,"consume");async function I(k){let N=[];for await(let F of k)N.push(F);return Promise.resolve(N)}_.asyncToArray=I,a(I,"asyncToArray")})(yxe||={});f();var Cxe=class{constructor(e,r){this.uri=e;this.value=r}static{a(this,"ResourceMapEntry")}};function uVt(t){return Array.isArray(t)}a(uVt,"isEntries");var KYe,XX=class t{constructor(e,r){this[KYe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(uVt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,o]of e)this.set(n,o)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{a(this,"ResourceMap")}static{this.defaultToKey=a(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new Cxe(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,o]of this.map)e(o.value,o.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(KYe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},YYe,zYe=class{constructor(e,r){this[YYe]="ResourceSet";!e||typeof e=="function"?this._map=new XX(e):(this._map=new XX(r),e.forEach(this.add,this))}static{a(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,o)=>e.call(r,o,o,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(YYe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var JYe,vxe=class{constructor(){this[JYe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{a(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let o=this._map.get(e);if(o)o.value=r,n!==0&&this.touch(o,n);else{switch(o={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(o);break;case 1:this.addItemFirst(o);break;case 2:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,o=this._head;for(;o;){if(r?e.bind(r)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return o}values(){let e=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return o}entries(){let e=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return o}[(JYe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},xxe=class extends vxe{static{a(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},k3=class extends xxe{static{a(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var ZX=class{constructor(){this.map=new Map}static{a(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var dVt=!1,P3=null;var XYe=class t{constructor(){this.livingDisposables=new Map}static{a(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let o=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,o),o}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let u=new Map,d=[...this.livingDisposables.values()].filter(m=>m.source!==null&&!this.getRootParent(m,u).isSingleton);if(d.length===0)return;let p=new Set(d.map(m=>m.value));if(n=d.filter(m=>!(m.parent&&p.has(m.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function o(u){function d(m,h){for(;m.length>0&&h.some(g=>typeof g=="string"?g===m[0]:m[0].match(g));)m.shift()}a(d,"removePrefix");let p=u.source.split(`
`).map(m=>m.trim().replace("at ","")).filter(m=>m!=="");return d(p,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),p.reverse()}a(o,"getStackTracePath");let s=new ZX;for(let u of n){let d=o(u);for(let p=0;p<=d.length;p++)s.add(d.slice(0,p).join(`
`),u)}n.sort(Dh(u=>u.idx,Bh));let c="",l=0;for(let u of n.slice(0,e)){l++;let d=o(u),p=[];for(let m=0;m<d.length;m++){let h=d[m];h=`(shared with ${s.get(d.slice(0,m+1).join(`
`)).size}/${n.length} leaks) at ${h}`;let A=s.get(d.slice(0,m).join(`
`)),y=VYe([...A].map(v=>o(v)[m]),v=>v);delete y[d[m]];for(let[v,b]of Object.entries(y))p.unshift(`    - stacktraces of ${b.length} other leaks continue with ${v}`);p.unshift(h)}c+=`


==================== Leaking disposable ${l}/${n.length}: ${u.value.constructor.name} ====================
${p.join(`
`)}
============================================================

`}return n.length>e&&(c+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:c}}};function fVt(t){P3=t}a(fVt,"setDisposableTracker");if(dVt){let t="__is_disposable_tracked__";fVt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Ps.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ps.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function D3(t){return P3?.trackDisposable(t),t}a(D3,"trackDisposable");function B3(t){P3?.markAsDisposed(t)}a(B3,"markAsDisposed");function Exe(t,e){P3?.setParent(t,e)}a(Exe,"setParentOfDisposable");function pVt(t,e){if(P3)for(let r of t)P3.setParent(r,e)}a(pVt,"setParentOfDisposables");function ZYe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}a(ZYe,"isDisposable");function eZ(t){if(yxe.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}a(eZ,"dispose");function eJe(...t){let e=Wc(()=>eZ(t));return pVt(t,e),e}a(eJe,"combinedDisposable");function Wc(t){let e=D3({dispose:Axe(()=>{B3(e),t()})});return e}a(Wc,"toDisposable");var ad=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;D3(this)}static{a(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(B3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{eZ(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Exe(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Exe(e,null))}},Ps=class{constructor(){this._store=new ad;D3(this),Exe(this._store,this)}static{a(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){B3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Nh=class extends Ps{static{a(this,"ChatQuotaService")}constructor(e){super(),this._register(lc(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),o=parseInt(n.get("ent")||"0",10),s=parseFloat(n.get("ov")||"0.0"),c=n.get("ovPerm")==="true",l=parseFloat(n.get("rem")||"0.0"),u=n.get("rst"),d;u?d=new Date(u):(d=new Date,d.setMonth(d.getMonth()+1));let p=Math.max(0,o*(1-l/100));this._quotaInfo={quota:o,used:p,overageUsed:s,overageEnabled:c,resetDate:d}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();f();f();var tJe=Ne(mi()),rJe=E.Object({accessToken:E.Optional(E.String({minLength:1})),handle:E.Optional(E.String({minLength:1})),login:E.Optional(E.String({minLength:1})),githubAppId:E.Optional(E.String({minLength:1})),apiUrl:E.Optional(E.String({})),serverUrl:E.Optional(E.String({})),tokenEndpoint:E.Optional(E.String({}))}),bxe;(r=>(r.method="github/didChangeAuth",r.type=new tJe.ProtocolNotificationType(r.method)))(bxe||={});f();var nJe=Ne(mi()),Ixe;(r=>(r.method="copilot/ipCodeCitation",r.type=new nJe.NotificationType(r.method)))(Ixe||={});f();var iJe=Ne(mi()),tZ;(r=>(r.method="context/update",r.type=new iJe.ProtocolRequestType(r.method)))(tZ||={});f();f();var XT="Cancelled";f();var An=Ne(mi()),I7=E.String(),Bp=E.Object({uri:I7}),KR=E.Intersect([Bp,E.Object({version:E.Optional(E.Integer())})]),oGn=E.Required(KR),gu=E.Object({line:E.Integer({minimum:0}),character:E.Integer({minimum:0})}),$c=E.Object({start:gu,end:gu}),Txe=E.Union([E.Integer(),E.String()]),sGn=E.Object({isCancellationRequested:E.Boolean(),onCancellationRequested:E.Any()});f();var oJe=Ne(mi()),wxe;(r=>(r.method="textDocument/didFocus",r.type=new oJe.ProtocolNotificationType(r.method)))(wxe||={});f();var mVt=E.Object({didChangeFeatureFlags:E.Boolean(),fetch:E.Boolean(),ipCodeCitation:E.Boolean(),redirectedTelemetry:E.Boolean(),related:E.Boolean(),token:E.Boolean(),watchedFiles:E.Boolean(),showPanelMessage:E.Boolean(),mcpElicitation:E.Boolean(),mcpSampling:E.Boolean()}),hVt=E.Object({name:E.String(),version:E.String(),readableName:E.Optional(E.String())}),sJe=E.Object({name:E.String(),version:E.Optional(E.String()),readableName:E.Optional(E.String())}),aJe=E.Object({editorInfo:E.Optional(sJe),editorPluginInfo:E.Optional(sJe),relatedPluginInfo:E.Optional(E.Array(hVt)),copilotIntegrationId:E.Optional(E.String()),copilotCapabilities:E.Optional(E.Partial(mVt)),githubAppId:E.Optional(E.String())});f();var T7=Ne(mi());var rZ=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(rZ||{}),gVt=E.Enum(rZ),AVt=E.Object({triggerKind:gVt,selectedCompletionInfo:E.Optional(E.Object({text:E.String(),range:$c,tooltipSignature:E.Optional(E.String())}))}),cJe=E.Object({textDocument:KR,position:gu,formattingOptions:E.Optional(E.Object({tabSize:E.Optional(E.Union([E.Integer({minimum:1}),E.String()])),insertSpaces:E.Optional(E.Union([E.Boolean(),E.String()]))})),context:AVt,data:E.Optional(E.Unknown())}),_xe;(r=>(r.method="textDocument/inlineCompletion",r.type=new T7.ProtocolRequestType(r.method)))(_xe||={});var lJe=E.Object({command:E.Object({arguments:E.Tuple([E.String({minLength:1})])})}),uJe=E.Object({item:lJe}),Sxe;(r=>(r.method="textDocument/didShowCompletion",r.type=new T7.ProtocolNotificationType(r.method)))(Sxe||={});var dJe=E.Object({item:lJe,acceptedLength:E.Integer({minimum:1})}),Rxe;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new T7.ProtocolNotificationType(r.method)))(Rxe||={});f();var fJe=Ne(mi()),kxe;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new fJe.ProtocolRequestType(r.method)))(kxe||={});f();var pJe=Ne(mi()),mJe=E.Object({textDocument:KR,position:gu}),yVt=E.Object({command:E.Object({arguments:E.Tuple([E.String({minLength:1})])})}),hJe=E.Object({item:yVt}),Pxe;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new pJe.ProtocolNotificationType(r.method)))(Pxe||={});f();var nZ=Ne(mi());var gJe=E.Object({textDocument:KR,position:gu,partialResultToken:E.Optional(Txe),workDoneToken:E.Optional(Txe)}),iZ;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new nZ.ProtocolRequestType(n.method),n.partialResult=new nZ.ProgressType))(iZ||={});f();var AJe=Ne(mi()),Dxe;(r=>(r.method="copilot/related",r.type=new AJe.ProtocolRequestType(r.method)))(Dxe||={});f();var yJe=Ne(mi()),Bxe;(r=>(r.method="statusNotification",r.type=new yJe.ProtocolNotificationType(r.method)))(Bxe||={});var CJe=Ne(require("events"));var oZ="CompletionRequested",tv=class{constructor(e){this.ctx=e}static{a(this,"CompletionNotifier")}#e=new CJe.default;notifyRequest(e,r,n,o,s){return this.#e.emit(oZ,{completionId:r,completionState:e,telemetryData:n,cancellationToken:o,options:s})}onRequest(e){let r=iu(this.ctx,e,`event.${oZ}`);return this.#e.on(oZ,r),An.Disposable.create(()=>this.#e.off(oZ,r))}};f();var Nxe=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name=`UnregisteredContextErrorFor${r.name}`}static{a(this,"UnregisteredContextError")}},N3=class{constructor(){this.instances=new Map}static{a(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new Nxe(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};f();f();f();f();f();var w7={isBlocked:!1,reason:"VALID_FILE"},sZ={isBlocked:!1,reason:"NO_MATCHING_POLICY"},vJe={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},YR={all:"all",repo:"repo"},ZT=new dt("contentExclusion");f();f();var aZ=class{static{a(this,"PolicyEvaluator")}};f();f();f();var xJe=new dt("repository"),JR=class t{constructor(){this.data={}}static{a(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),o=`.${r}`.toLowerCase();return Object.keys(this.data).filter(s=>s.startsWith(n)&&s.endsWith(o)).map(s=>s.slice(n.length,-o.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,o])=>(o.forEach(s=>r.add(n,s)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},OA=class{static{a(this,"GitConfigLoader")}},cZ=class extends OA{constructor(r){super();this.loaders=r}static{a(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let o of this.loaders){let s=await o.getConfig(r,n);if(s)return s}}};f();var EJe=require("os");var lZ=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{a(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return wI.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=wI.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,EJe.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var uZ=class{static{a(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(OA).getConfig(e,r);if(!n)return;let o=this.getRemotes(n),s=o.filter(c=>c.url.isGitHub());if(s.length)return s.find(c=>c.name==="origin")?.url??s[0].url;if(o.length)return o.find(c=>c.name==="origin")?.url??o[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new lZ(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var CVt=100,Mxe=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{a(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},em=class t{constructor(e){this.ctx=e;this.remoteResolver=new uZ;this.cache=new vr(CVt)}static{a(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let s=this.cache.get(e);return this.updateCache(n,s),s}n.push(e.toString());let o=await this.tryGetRepoForFolder(e);if(o)return this.updateCache(n,o),o;r=e,e=Nl(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Mxe(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(Ui),o=bi(r,".git");if((await n.stat(o)).type&1)return await this.getConfigLocationForGitfile(n,r,o);let c=bi(o,"config");return await n.stat(c),c}catch{return}}static async getConfigLocationForGitfile(e,r,n){let s=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!s)return;let c=e2(r,s[1]),l=bi(c,"config");if(await this.tryStat(e,l)!==void 0)return l;let u=bi(c,"config.worktree");if(await this.tryStat(e,u)!==void 0)return u;let d=bi(c,"commondir");c=e2(c,(await e.readFileString(d)).trimEnd());let p=bi(c,"config");return await e.stat(p),p}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};f();var XR=a((t,e)=>{if(jC.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...jC.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");f();f();f();var dZ=new WeakMap;function fZ(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",o=0,s=Object.prototype.toString.call(t);if(s!=="[object RegExp]"&&s!=="[object Date]"&&dZ.has(t))return dZ.get(t);switch(dZ.set(t,"~"+ ++e),s){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";o<r.length;n+=fZ(r[o++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();o<r.length;n+=r[o]+fZ(t[r[o++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();o<r.length;n+=r[o]+fZ(t.get(r[o++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return dZ.set(t,n),n}a(fZ,"t");function pZ(t){return fZ(t,0)}a(pZ,"r");var Lxe=new WeakMap;function bJe(t,e,r=pZ(e)){let n,o,s=Lxe.get(t);s||(Lxe.set(t,s=[[],o=[],n=[]]),queueMicrotask(function(){let d,p=0;function m(h){for(;d=n[p++];d.r(h));}a(m,"o"),Lxe.delete(t),t(o).then(function(h){if(h.length!==n.length)return m(new Error("loader value length mismatch"));for(;d=h[p++],p<=h.length;d instanceof Error?n[p-1].r(d):n[p-1].s(d));},m)}));let c=s[0].indexOf(r);if(~c)return s[2][c].p;let l=s[0].push(r)-1,u=s[2][l]={};return s[1][l]=e,u.p=new Promise(function(d,p){u.s=d,u.r=p})}a(bJe,"n");var IJe=new WeakMap;function vVt(t,e,r,n=pZ(r)){if(e||(e=IJe.get(t)),e||IJe.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let o=bJe(t,r,n);return e.set(n,o),o.catch(()=>e.delete(n)),o}a(vVt,"n");function TJe(t,e){return function(r,n){return vVt(t,e,r,n)}}a(TJe,"o");f();var GJe=Ne(OJe(),1);f();var S7=a(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var SVt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},R7=a(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),RVt=a(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),QJe=a(t=>t.join(""),"rangesToString"),UJe=a((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],o=[],s=r+1,c=!1,l=!1,u=!1,d=!1,p=r,m="";e:for(;s<t.length;){let y=t.charAt(s);if((y==="!"||y==="^")&&s===r+1){d=!0,s++;continue}if(y==="]"&&c&&!u){p=s+1;break}if(c=!0,y==="\\"&&!u){u=!0,s++;continue}if(y==="["&&!u){for(let[v,[b,I,_]]of Object.entries(SVt))if(t.startsWith(v,s)){if(m)return["$.",!1,t.length-r,!0];s+=v.length,_?o.push(b):n.push(b),l=l||I;continue e}}if(u=!1,m){y>m?n.push(R7(m)+"-"+R7(y)):y===m&&n.push(R7(y)),m="",s++;continue}if(t.startsWith("-]",s+1)){n.push(R7(y+"-")),s+=2;continue}if(t.startsWith("-",s+1)){m=y,s+=2;continue}n.push(R7(y)),s++}if(p<s)return["",!1,0,!1];if(!n.length&&!o.length)return["$.",!1,t.length-r,!0];if(o.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!d){let y=n[0].length===2?n[0].slice(-1):n[0];return[RVt(y),!1,p-r,!1]}let h="["+(d?"^":"")+QJe(n)+"]",g="["+(d?"":"^")+QJe(o)+"]";return[n.length&&o.length?"("+h+"|"+g+")":n.length?h:g,l,p-r,!0]},"parseClass");f();var ew=a((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var kVt=new Set(["!","?","+","*","@"]),qJe=a(t=>kVt.has(t),"isExtglobType"),PVt="(?!(?:^|/)\\.\\.?(?:$|/))",mZ="(?!\\.)",DVt=new Set(["[","."]),BVt=new Set(["..","."]),NVt=new Set("().*{}+?[]^$\\!"),MVt=a(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Qxe="[^/]",HJe=Qxe+"*?",WJe=Qxe+"+?",M3=class t{static{a(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let o=r.#o+1;!n.type&&o<n.#n.length;o++)for(let s of e.#n){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(n.#n[o])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,o){let s=!1,c=!1,l=-1,u=!1;if(r.type===null){let g=n,A="";for(;g<e.length;){let y=e.charAt(g++);if(s||y==="\\"){s=!s,A+=y;continue}if(c){g===l+1?(y==="^"||y==="!")&&(u=!0):y==="]"&&!(g===l+2&&u)&&(c=!1),A+=y;continue}else if(y==="["){c=!0,l=g,u=!1,A+=y;continue}if(!o.noext&&qJe(y)&&e.charAt(g)==="("){r.push(A),A="";let v=new t(y,r);g=t.#u(e,v,g,o),r.push(v);continue}A+=y}return r.push(A),g}let d=n+1,p=new t(null,r),m=[],h="";for(;d<e.length;){let g=e.charAt(d++);if(s||g==="\\"){s=!s,h+=g;continue}if(c){d===l+1?(g==="^"||g==="!")&&(u=!0):g==="]"&&!(d===l+2&&u)&&(c=!1),h+=g;continue}else if(g==="["){c=!0,l=d,u=!1,h+=g;continue}if(qJe(g)&&e.charAt(d)==="("){p.push(h),h="";let A=new t(g,p);p.push(A),d=t.#u(e,A,d,o);continue}if(g==="|"){p.push(h),h="",m.push(p),p=new t(null,r);continue}if(g===")")return h===""&&r.#n.length===0&&(r.#d=!0),p.push(h),h="",r.push(...m,p),d;h+=g}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],d}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,o,s]=this.toRegExpSource();if(!(o||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#c.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let u=this.isStart()&&this.isEnd(),d=this.#n.map(g=>{let[A,y,v,b]=typeof g=="string"?t.#m(g,this.#t,u):g.toRegExpSource(e);return this.#t=this.#t||v,this.#i=this.#i||b,A}).join(""),p="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&BVt.has(this.#n[0]))){let A=DVt,y=r&&A.has(d.charAt(0))||d.startsWith("\\.")&&A.has(d.charAt(2))||d.startsWith("\\.\\.")&&A.has(d.charAt(4)),v=!r&&!e&&A.has(d.charAt(0));p=y?PVt:v?mZ:""}let m="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(m="(?:$|\\/)"),[p+d+m,ew(d),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",o=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#f(r);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,ew(this.toString()),!1,!1]}let c=!n||e||r||!mZ?"":this.#f(!0);c===s&&(c=""),c&&(s=`(?:${s})(?:${c})*?`);let l="";if(this.type==="!"&&this.#d)l=(this.isStart()&&!r?mZ:"")+WJe;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?mZ:"")+HJe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&c?")":this.type==="*"&&c?")?":`)${this.type}`;l=o+s+u}return[l,ew(s),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,o,s,c]=r.toRegExpSource(e);return this.#i=this.#i||c,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let o=!1,s="",c=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(o){o=!1,s+=(NVt.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?s+="\\\\":o=!0;continue}if(u==="["){let[d,p,m,h]=UJe(e,l);if(m){s+=d,c=c||p,l+=m-1,r=r||h;continue}}if(u==="*"){n&&e==="*"?s+=WJe:s+=HJe,r=!0;continue}if(u==="?"){s+=Qxe,r=!0;continue}s+=MVt(u)}return[s,ew(e),!!r,c]}};f();var Uxe=a((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var jc=a((t,e,r={})=>(S7(e),!r.nocomment&&e.charAt(0)==="#"?!1:new L3(e,r).match(t)),"minimatch"),LVt=/^\*+([^+@!?\*\[\(]*)$/,FVt=a(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),OVt=a(t=>e=>e.endsWith(t),"starDotExtTestDot"),QVt=a(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),UVt=a(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),qVt=/^\*+\.\*+$/,HVt=a(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),WVt=a(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),$Vt=/^\.\*+$/,jVt=a(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),GVt=/^\*+$/,VVt=a(t=>t.length!==0&&!t.startsWith("."),"starTest"),zVt=a(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),KVt=/^\?+([^+@!?\*\[\(]*)?$/,YVt=a(([t,e=""])=>{let r=VJe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),JVt=a(([t,e=""])=>{let r=zJe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),XVt=a(([t,e=""])=>{let r=zJe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),ZVt=a(([t,e=""])=>{let r=VJe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),VJe=a(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),zJe=a(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),KJe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",$Je={win32:{sep:"\\"},posix:{sep:"/"}},ezt=KJe==="win32"?$Je.win32.sep:$Je.posix.sep;jc.sep=ezt;var Lh=Symbol("globstar **");jc.GLOBSTAR=Lh;var tzt="[^/]",rzt=tzt+"*?",nzt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",izt="(?:(?!(?:\\/|^)\\.).)*?",ozt=a((t,e={})=>r=>jc(r,t,e),"filter");jc.filter=ozt;var Mh=a((t,e={})=>Object.assign({},t,e),"ext"),szt=a(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return jc;let e=jc;return Object.assign(a((n,o,s={})=>e(n,o,Mh(t,s)),"m"),{Minimatch:class extends e.Minimatch{static{a(this,"Minimatch")}constructor(o,s={}){super(o,Mh(t,s))}static defaults(o){return e.defaults(Mh(t,o)).Minimatch}},AST:class extends e.AST{static{a(this,"AST")}constructor(o,s,c={}){super(o,s,Mh(t,c))}static fromGlob(o,s={}){return e.AST.fromGlob(o,Mh(t,s))}},unescape:a((n,o={})=>e.unescape(n,Mh(t,o)),"unescape"),escape:a((n,o={})=>e.escape(n,Mh(t,o)),"escape"),filter:a((n,o={})=>e.filter(n,Mh(t,o)),"filter"),defaults:a(n=>e.defaults(Mh(t,n)),"defaults"),makeRe:a((n,o={})=>e.makeRe(n,Mh(t,o)),"makeRe"),braceExpand:a((n,o={})=>e.braceExpand(n,Mh(t,o)),"braceExpand"),match:a((n,o,s={})=>e.match(n,o,Mh(t,s)),"match"),sep:e.sep,GLOBSTAR:Lh})},"defaults");jc.defaults=szt;var YJe=a((t,e={})=>(S7(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,GJe.default)(t)),"braceExpand");jc.braceExpand=YJe;var azt=a((t,e={})=>new L3(t,e).makeRe(),"makeRe");jc.makeRe=azt;var czt=a((t,e,r={})=>{let n=new L3(e,r);return t=t.filter(o=>n.match(o)),n.options.nonull&&!t.length&&t.push(e),t},"match");jc.match=czt;var jJe=/[?*]|[+@!]\(.*?\)|\[|\]/,lzt=a(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),L3=class{static{a(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){S7(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||KJe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let o=this.globParts.map((s,c,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=s[0]===""&&s[1]===""&&(s[2]==="?"||!jJe.test(s[2]))&&!jJe.test(s[3]),d=/^[a-z]:/i.test(s[0]);if(u)return[...s.slice(0,4),...s.slice(4).map(p=>this.parse(p))];if(d)return[s[0],...s.slice(1).map(p=>this.parse(p))]}return s.map(u=>this.parse(u))});if(this.debug(this.pattern,o),this.set=o.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let c=this.set[s];c[0]===""&&c[1]===""&&this.globParts[s][2]==="?"&&typeof c[3]=="string"&&/^[a-z]:$/i.test(c[3])&&(c[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let o=0;o<e[n].length;o++)e[n][o]==="**"&&(e[n][o]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let o=n;for(;r[o+1]==="**";)o++;o!==n&&r.splice(n,o-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,o)=>{let s=n[n.length-1];return o==="**"&&s==="**"?n:o===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(n.pop(),n):(n.push(o),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let o=1;o<e.length-1;o++){let s=e[o];o===1&&s===""&&e[0]===""||(s==="."||s==="")&&(r=!0,e.splice(o,1),o--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let o=e[n-1];o&&o!=="."&&o!==".."&&o!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let o=-1;for(;(o=n.indexOf("**",o+1))!==-1;){let c=o;for(;n[c+1]==="**";)c++;c>o&&n.splice(o+1,c-o);let l=n[o+1],u=n[o+2],d=n[o+3];if(l!==".."||!u||u==="."||u===".."||!d||d==="."||d==="..")continue;r=!0,n.splice(o,1);let p=n.slice(0);p[o]="**",e.push(p),o--}if(!this.preserveMultipleSlashes){for(let c=1;c<n.length-1;c++){let l=n[c];c===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(c,1),c--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let s=0;for(;(s=n.indexOf("..",s+1))!==-1;){let c=n[s-1];if(c&&c!=="."&&c!==".."&&c!=="**"){r=!0;let u=s===1&&n[s+1]==="**"?["."]:[];n.splice(s-1,2,...u),n.length===0&&n.push(""),s-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let o=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(o){e[r]=[],e[n]=o;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let o=0,s=0,c=[],l="";for(;o<e.length&&s<r.length;)if(e[o]===r[s])c.push(l==="b"?r[s]:e[o]),o++,s++;else if(n&&e[o]==="**"&&r[s]===e[o+1])c.push(e[o]),o++;else if(n&&r[s]==="**"&&e[o]===r[s+1])c.push(r[s]),s++;else if(e[o]==="*"&&r[s]&&(this.options.dot||!r[s].startsWith("."))&&r[s]!=="**"){if(l==="b")return!1;l="a",c.push(e[o]),o++,s++}else if(r[s]==="*"&&e[o]&&(this.options.dot||!e[o].startsWith("."))&&e[o]!=="**"){if(l==="a")return!1;l="b",c.push(r[s]),o++,s++}else return!1;return e.length===r.length&&c}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let o=0;o<e.length&&e.charAt(o)==="!";o++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let o=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),I=!b&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=v?3:y?0:void 0,k=I?3:b?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[N,F]=[e[_],r[k]];N.toLowerCase()===F.toLowerCase()&&(r[k]=N,k>_?r=r.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var c=0,l=0,u=e.length,d=r.length;c<u&&l<d;c++,l++){this.debug("matchOne loop");var p=r[l],m=e[c];if(this.debug(r,p,m),p===!1)return!1;if(p===Lh){this.debug("GLOBSTAR",[r,p,m]);var h=c,g=l+1;if(g===d){for(this.debug("** at the end");c<u;c++)if(e[c]==="."||e[c]===".."||!o.dot&&e[c].charAt(0)===".")return!1;return!0}for(;h<u;){var A=e[h];if(this.debug(`
globstar while`,e,h,r,g,A),this.matchOne(e.slice(h),r.slice(g),n))return this.debug("globstar found match!",h,u,A),!0;if(A==="."||A===".."||!o.dot&&A.charAt(0)==="."){this.debug("dot detected!",e,h,r,g);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,h,r,g),h===u))}let y;if(typeof p=="string"?(y=m===p,this.debug("string match",p,m,y)):(y=p.test(m),this.debug("pattern match",p,m,y)),!y)return!1}if(c===u&&l===d)return!0;if(c===u)return n;if(l===d)return c===u-1&&e[c]==="";throw new Error("wtf?")}braceExpand(){return YJe(this.pattern,this.options)}parse(e){S7(e);let r=this.options;if(e==="**")return Lh;if(e==="")return"";let n,o=null;(n=e.match(GVt))?o=r.dot?zVt:VVt:(n=e.match(LVt))?o=(r.nocase?r.dot?UVt:QVt:r.dot?OVt:FVt)(n[1]):(n=e.match(KVt))?o=(r.nocase?r.dot?JVt:YVt:r.dot?XVt:ZVt)(n):(n=e.match(qVt))?o=r.dot?WVt:HVt:(n=e.match($Vt))&&(o=jVt);let s=M3.fromGlob(e,this.options).toMMPattern();return o&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:o}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?rzt:r.dot?nzt:izt,o=new Set(r.nocase?["i"]:[]),s=e.map(u=>{let d=u.map(p=>{if(p instanceof RegExp)for(let m of p.flags.split(""))o.add(m);return typeof p=="string"?lzt(p):p===Lh?Lh:p._src});return d.forEach((p,m)=>{let h=d[m+1],g=d[m-1];p!==Lh||g===Lh||(g===void 0?h!==void 0&&h!==Lh?d[m+1]="(?:\\/|"+n+"\\/)?"+h:d[m]=n:h===void 0?d[m-1]=g+"(?:\\/|"+n+")?":h!==Lh&&(d[m-1]=g+"(?:\\/|\\/"+n+"\\/)"+h,d[m+1]=Lh))}),d.filter(p=>p!==Lh).join("/")}).join("|"),[c,l]=e.length>1?["(?:",")"]:["",""];s="^"+c+s+l+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...o].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let o=this.slashSplit(e);this.debug(this.pattern,"split",o);let s=this.set;this.debug(this.pattern,"set",s);let c=o[o.length-1];if(!c)for(let l=o.length-2;!c&&l>=0;l--)c=o[l];for(let l=0;l<s.length;l++){let u=s[l],d=o;if(n.matchBase&&u.length===1&&(d=[c]),this.matchOne(d,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return jc.defaults(e).Minimatch}};jc.AST=M3;jc.Minimatch=L3;jc.escape=Uxe;jc.unescape=ew;var qxe="contentExclusion",hZ=class extends aZ{static{a(this,"CopilotContentExclusion")}#e;#t=new vr(1e4);#i=new vr(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=e2(e).toString();let n=await this.getGitRepo({uri:e}),o=await this.#n(n?.url??YR.all);if(!o)return sZ;let s=n?.baseFolder?.uri??"file://",c=this.evaluateFilePathRules(e,s,o);if(c.isBlocked)return c;let l=this.evaluateTextBasedRules(e,o,r);if(l.isBlocked)return l}catch(n){return ZT.exception(this.#e,n,`${qxe}.evaluate`),vJe}return w7}evaluateFilePathRules(e,r,n){let o=e;if(this.#t.has(o))return this.#t.get(o);let s=w7,c,l=kpe(e.replace(r,""));e:for(let u of n)for(let d of u.paths)if(jc(l,d,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){s=Hxe(u,"FILE_BLOCKED_PATH"),c=d;break e}return ZT.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:s,baseUri:r,fileName:l,matchingPattern:c}),this.#t.set(o,s),s}evaluateTextBasedRules(e,r,n){let o=r.filter(l=>l.ifAnyMatch),s=r.filter(l=>l.ifNoneMatch);if(!n||o.length===0&&s.length===0)return w7;let c=this.evaluateFileContent(o,s,n);return ZT.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:c}),c}evaluateFileContent(e,r,n){for(let o of e)if(o.ifAnyMatch&&o.ifAnyMatch.length>0&&o.ifAnyMatch.map(c=>JJe(c)).some(c=>c.test(n)))return Hxe(o,"FILE_BLOCKED_TEXT_BASED");for(let o of r)if(o.ifNoneMatch&&o.ifNoneMatch.length>0&&!o.ifNoneMatch.map(c=>JJe(c)).some(c=>c.test(n)))return Hxe(o,"FILE_BLOCKED_TEXT_BASED");return w7}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){Xa(this.#e,e,`${qxe}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=TJe(async e=>{let r=await this.#e.get(nr).getGitHubSession();if(!r)throw new Da("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",o=new URL(n,r.apiUrl),s=e.includes(YR.all);e.filter(d=>d!==YR.all).length>0&&o.searchParams.set("repos",e.filter(d=>d!==YR.all).join(",")),o.searchParams.set("scope",s?YR.all:YR.repo);let l=await hf(this.#e,r,o.href),u=await l.json();if(!l.ok){if(l.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:u.message}),new pC(l)}return this.#s("fetch.success"),XR(pzt,u).map(d=>d.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(em).getRepo(Nl(e));if(!n||!n?.remote)return;let o=n.remote.getUrlForApi();if(o)return{baseFolder:n.baseFolder,url:o}}#s(e,r,n){Pt(this.#e,`${qxe}.${e}`,Kr.createAndMarkAsIssued(r,n))}};function JJe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}a(JJe,"stringToRegex");function Hxe(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}a(Hxe,"fileBlockedEvaluationResult");var uzt=E.Object({name:E.String(),type:E.String()}),dzt=E.Object({paths:E.Array(E.String()),ifNoneMatch:E.Optional(E.Array(E.String())),ifAnyMatch:E.Optional(E.Array(E.String())),source:uzt}),Wxe=E.Array(dzt),fzt=E.Object({rules:Wxe,last_updated_at:E.String(),scope:E.String()}),pzt=E.Array(fzt);var gc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new hZ(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=a(async e=>{if(!this.#e)return;if(!e.document){this.updateStatusIcon(!1);return}let r=await this.ctx.get(Ar).getTextDocumentValidation(e.document),n=r.status==="invalid",o=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,o)},"onDidChangeActiveTextEditor");let r=iu(this.ctx,this.onDidChangeActiveTextEditor,"Content exclusions focus change");this.ctx.get(Ar).onDidFocusTextDocument(r),lc(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{a(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let o=[],s=a(async(u,d)=>{let p=performance.now(),m=await d.evaluate(e,r),h=performance.now();return o.push({key:u,result:m,elapsedMs:Math.round(h-p)}),m},"track"),l=(await Promise.all([s("contentExclusion.evaluate",this.#t)])).find(u=>u?.isBlocked)??{isBlocked:!1};try{for(let u of o)this.#i(u.key,e,u.result,u.elapsedMs)}catch(u){ZT.error(this.ctx,"Error tracking telemetry",u)}return n==="UPDATE"&&this.updateStatusIcon(l.isBlocked,l.message),l}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(Wo).setInactive(r??"Copilot is disabled"):this.ctx.get(Wo).clearInactive())}#i(e,r,n,o){let s=r+e;if(this.evaluateResultCache.get(s)===n.reason)return!1;if(this.evaluateResultCache.set(s,n.reason??"UNKNOWN"),n.reason===sZ.reason)return ZT.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let l={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},u={contentExclusionEvalMs:o};return Pt(this.ctx,e,Kr.createAndMarkAsIssued(l,u)),Pt(this.ctx,e,Kr.createAndMarkAsIssued({...l,path:r},u),1),ZT.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function Bx(t,e,r){let n=await t.get(gc).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}a(Bx,"isDocumentValid");var Ar=class{constructor(e){this.ctx=e}static{a(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await Bx(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=ka(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return Bx(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(Ui).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(Ui).readFileString(e)}getWorkspaceFolder(e){let r=ka(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(ka(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=ka(e.uri);for(let n of this.getWorkspaceFolders()){let o=ka(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(o))return r.slice(o.length)}return Mi(r)}};function ua(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}a(ua,"statusFromTextDocumentResult");var Nn=class{constructor(e){this.ctx=e}static{a(this,"FileReader")}getRelativePath(e){return this.ctx.get(Ar).getRelativePath(e)??Mi(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(Ar).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let s=await this.doReadFile(e),c=await Bx(this.ctx,{uri:e},s);return c.status==="valid"?{status:"valid",document:DA.create(e,"UNKNOWN",-1,s)}:c}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(Ui).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(Ui).stat(e)).size/1024/1024}};f();f();var $xe=class{constructor(){this.observers=new Set}static{a(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},gZ=class extends $xe{static{a(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var Np=class{constructor(e){this.ctx=e;this.#e=new dt("AsyncCompletionManager");this.requests=new vr(100);this.mostRecentRequestId=""}static{a(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,o]of this.requests)if(jxe(e,r,o))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,o,s){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let c=new gZ;return this.requests.set(e,{state:2,cancellationTokenSource:o,headerRequestId:e,prefix:r,prompt:n,subject:c}),s.then(l=>{if(this.requests.delete(e),l.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,l.reason),c.error(l.reason);return}let u={cancellationTokenSource:o,headerRequestId:e,prefix:r,prompt:n,subject:c,choice:l.value[0],result:l,state:0,allChoicesPromise:l.value[1]};this.requests.set(e,u),c.next(u),c.complete()}).catch(l=>{this.#e.error(this.ctx,`[${e}] Request errored with`,l),this.requests.delete(e),c.error(l)})}getFirstMatchingRequestWithTimeout(e,r,n,o,s){let c=this.ctx.get(Lt).asyncCompletionsTimeout(s);return c<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,o)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${c}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,o),new Promise(l=>setTimeout(()=>l(null),c))]).then(l=>{if(l===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return l}))}async getFirstMatchingRequest(e,r,n,o){o||(this.mostRecentRequestId=e);let s=!1,c=new kp,l=new Map,u=a(p=>()=>{let m=l.get(p);m!==void 0&&(m(),l.delete(p),!s&&l.size===0&&(s=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),c.resolve(void 0)))},"finishRequest"),d=a(p=>{if(jxe(r,n,p)){if(p.state===0){let m=r.substring(p.prefix.length),{completionText:h}=p.choice;if(!h.startsWith(m)||h.length<=m.length){u(p.headerRequestId)();return}h=h.substring(m.length),p.choice.telemetryData.measurements.foundOffset=m.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${m.length}: ${JSON.stringify(h)}`),c.resolve([{...p.choice,completionText:h},p.allChoicesPromise]),s=!0}}else this.cancelRequest(e,p),u(p.headerRequestId)()},"next");for(let[p,m]of this.requests)jxe(r,n,m)?l.set(p,m.subject.subscribe({next:d,error:u(p),complete:u(p)})):this.cancelRequest(e,m);return c.promise.finally(()=>{for(let p of l.values())p()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function jxe(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}a(jxe,"isCandidate");f();f();var P7=class{constructor(e){this.maxSize=e;this.root=new k7;this.leafNodes=new Set}static{a(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:o}=this.findClosestNode(e);if(o.length>0){for(let[s,c]of n.children)if(s.startsWith(o)){let l=s.slice(0,o.length),u=new k7;n.removeChild(s),n.addChild(l,u),u.addChild(s.slice(l.length),c),n=u,o=o.slice(l.length);break}if(o.length>0){let s=new k7;n.addChild(o,s),n=s}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,o=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[s,c]of n.children)if(e.startsWith(s)){e=e.slice(s.length),o.unshift({node:c,remainingKey:e}),n=c,r=!0;break}}return{node:n,remainingKey:e,stack:o}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[s,c]=Array.from(e.children)[0];e.removeChild(s),r.removeChild(n),r.addChild(n+s,c);return}if(r.removeChild(n),r.parent===void 0)return;let o=r.parent;if(r.value===void 0&&r.childCount===1){let[s,c]=Array.from(r.children)[0],l=o.edge+s;r.removeChild(s),o.node.removeChild(o.edge),o.node.addChild(l,c)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},k7=class{constructor(){this._children=new Map;this._touched=performance.now()}static{a(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var QA=class{constructor(){this.cache=new P7(100)}static{a(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:o})=>o.content.filter(s=>s.suffix===r&&s.choice.completionText.startsWith(n)&&s.choice.completionText.length>n.length).map(s=>({...s.choice,completionText:s.choice.completionText.slice(n.length),telemetryData:s.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let o=this.cache.findAll(e);if(o.length>0&&o[0].remainingKey===""){let s=o[0].value.content;this.cache.set(e,{content:[...s,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new P7(100)}};f();f();f();f();var Nx={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function XJe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.010230295672324606:o=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?o=.03086356292895467:o=.057128750867458604:t[5]>888.5000000000001?o=.07861602941396924:o=.030523262699070908:t[308]>1e-35?o=.048236117667577356:t[8]>370.50000000000006?o=-.05642125069212264:o=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.03640661467213915:o=-.005889820723907028:t[31]>1e-35?o=-.0009007166998276938:t[9]>6.500000000000001?o=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?o=-.1215445089091064:o=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?o=-.061555513040777825:t[4]>60.50000000000001?o=-.07053475504569347:o=-.013733369453963092:o=-.06302097189114152:t[227]>1e-35?o=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?o=-.08466979526809346:t[10]>24.500000000000004?o=-.017092159721119944:t[92]>1e-35?o=.03592901452463749:o=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?o=-.03963116207386097:t[118]>1e-35?o=-.09483996283536394:t[217]>1e-35?o=-.03394542089519989:t[242]>1e-35?o=-.07985899422287938:o=.019706602160656964:t[9]>12.500000000000002?o=.014072998937735146:o=-.021156294523894684;let s;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?s=.009197756540516563:s=.03458896869535166:t[5]>5082.500000000001?s=.08265545468131008:t[131]>1e-35?s=.0740738432473315:s=.045159136632942756:t[8]>319.50000000000006?s=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?s=-.011400839766681709:s=.11149800187510031:s=-.08683250977599462:s=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?s=.040389083779932555:s=-.009887614274108602:t[52]>1e-35?s=.03705353499757327:t[9]>6.500000000000001?s=-.025401260429257562:t[2]>98.50000000000001?s=-.09237673187534504:s=-.04298556869281803:t[222]>1e-35?s=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?s=-.05435318330148897:t[128]>1e-35?s=-.08672907303184191:t[227]>1e-35?s=-.05568304584186561:t[122]>1e-35?s=-.09623059693538563:t[225]>1e-35?s=.07558331642202279:t[82]>1e-35?s=-.07360566227233566:s=-.005646164647395919:t[242]>1e-35?s=-.08203758341228108:t[9]>13.500000000000002?s=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?s=-.011153942154062704:s=.03132858912391067:t[127]>1e-35?s=.021455228822345174:t[23]>1e-35?s=.01959966745346997:s=-.021764790177579325;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?c=.07547602514276922:c=-.08529678832140396:c=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?c=.011143589009415464:c=.0654700456802118:c=.021794712646632755:t[308]>1e-35?c=.04231872551095028:c=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?c=-.03678981254332261:c=.010518160384496255:t[8]>825.5000000000001?c=-.04506534842082387:t[9]>38.50000000000001?c=.01004983052203438:c=-.030580958620701027:t[39]>1e-35?c=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?c=.030426957004611704:c=-.0726407693060581:c=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?c=-.008024349629981291:t[31]>1e-35?c=.01296539930850471:t[308]>1e-35?c=-.012855016509024084:c=-.04564527976851505:c=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?c=-.1012064426380198:c=-.0062808850924854194:c=.030706323726162416:t[9]>13.500000000000002?c=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?c=-.009306613091760644:t[4]>1.5000000000000002?c=.03655523200850989:c=-.02671654212893341:t[127]>1e-35?c=.019261510468604387:c=-.017627818570628936;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?l=.036100405995889276:l=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?l=.03622542297472574:l=.05595579157301536:l=-.02234751038146796:t[8]>319.50000000000006?l=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?l=-.009306153573847916:l=.10058509567064988:l=-.0785668890966017:t[9]>28.500000000000004?l=-.04781977604130416:l=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?l=.02372493254975127:t[148]>1e-35?l=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?l=-.05000852203469597:l=.02922366846119705:t[23]>1e-35?l=-.0026335076988151292:l=-.03073993752935585:t[222]>1e-35?l=-.03867374428185713:t[32]>1e-35?l=-.07220729365053084:t[39]>1e-35?l=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?l=-.04836360271198036:t[8]>4968.500000000001?l=-.10873681915578029:t[149]>1e-35?l=-.11847484033769298:t[122]>1e-35?l=-.08916172460307559:t[82]>1e-35?l=-.06774726602152634:l=-.0033469147714351327:t[126]>1e-35?l=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?l=-.09002547031023511:l=.015475385187009489:t[25]>1e-35?l=-.08175501232759151:l=-.000429679055394914;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?u=.021942996005324917:u=.042349138084484074:t[308]>1e-35?u=.036507270845732874:u=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?u=.00210930790963475:t[31]>1e-35?u=.006825358293027163:t[9]>6.500000000000001?u=-.013772084269062394:t[308]>1e-35?u=-.008307929099892574:t[19]>1e-35?u=-.027706313312904487:u=-.04891108984170914:t[134]>1e-35?u=-.0605730733844732:t[25]>1e-35?u=-.05347926493253117:t[227]>1e-35?u=-.049415829249003666:t[32]>1e-35?u=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?u=-.00016302718260794637:u=-.10247095758122947:t[210]>1e-35?u=-.022149002072787024:t[95]>1e-35?u=.15222631630626304:u=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?u=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?u=-.045352728133789516:t[8]>683.5000000000001?u=.00474372227519902:u=.02635476098707525:t[92]>1e-35?u=.05659380819933452:t[105]>1e-35?u=.07431443210341222:t[186]>1e-35?u=.0915821133384904:u=-.016414750130401053:t[127]>1e-35?u=.011824693641866162:t[23]>1e-35?u=.0228468674288774:t[284]>1e-35?u=.06606936863302432:u=-.02872463273902358;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?d=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?d=.044961338592245194:d=.003659599513761676:t[121]>1e-35?d=-.04057103630479994:d=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?d=-.0003708603406529278:d=.05331312264472391:d=.0006575958601218936:t[8]>319.50000000000006?d=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?d=-.0076053515916517005:d=.09116695486305336:d=-.07137458699162028:d=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?d=-.0308520802187302:d=.013156423968295541:t[115]>1e-35?d=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?d=.12264179915175587:d=-.021905727233873535:t[8]>799.5000000000001?d=-.04181869575935412:d=-.023695901673350575:t[222]>1e-35?d=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?d=-.06892116536821917:t[149]>1e-35?d=-.11194586444154514:t[133]>1e-35?d=-.04269583234000504:t[128]>1e-35?d=-.0644631966969502:t[8]>4968.500000000001?d=-.09650726096330133:d=-.004219129180139438:t[126]>1e-35?d=-.08038306745347751:t[5]>1809.5000000000002?d=.009265335288169993:t[9]>2.5000000000000004?d=.006447645462117438:d=-.021047132609551503;let p;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?p=-.08436540015142402:t[8]>1861.5000000000002?p=-.01621425699342421:p=.01878613821895428:p=.031052879158242532:t[8]>319.50000000000006?p=-.031536619360997865:t[7]>3.5000000000000004?p=-.004510586962343298:p=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?p=.004757490541310808:t[9]>6.500000000000001?p=-.008842393772207996:t[31]>1e-35?p=.0010536183837006993:t[308]>1e-35?p=-.008145882815435419:t[2]>98.50000000000001?p=-.08404937622173021:t[276]>1e-35?p=.0020072791321856663:t[19]>1e-35?p=-.023031820639490178:p=-.04553314326377875:t[8]>2134.5000000000005?p=-.02244583113572251:t[134]>1e-35?p=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?p=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?p=-.00447733056482096:p=-.10191061664873849:p=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?p=-.07570059131536411:t[243]>1e-35?p=-.040983393346598646:t[3]>9.500000000000002?p=.014763759061483812:t[92]>1e-35?p=.05136368898963024:p=-.008162398981149495:t[127]>1e-35?p=.013999119696708346:t[23]>1e-35?t[20]>1e-35?p=.14138985500120907:p=.008668274102844162:t[284]>1e-35?p=.06356484011042893:p=-.024781304572706303;let m;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?m=.014387526569215037:t[8]>2266.5000000000005?m=-.1397298649743087:m=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?m=.0029819092211896296:t[218]>1e-35?m=.08450459375645737:m=.031646488019280654:m=-.03544960151460596:t[9]>9.500000000000002?m=-.026002317735915183:t[7]>1.5000000000000002?m=.005074258810794793:m=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?m=.023269218675640847:t[148]>1e-35?m=.03812942399144545:t[115]>1e-35?m=.10512283476967227:m=-.02607307479736138:t[227]>1e-35?m=-.036576708299046294:t[101]>1e-35?m=.027948683650881864:t[149]>1e-35?m=-.08195628451594297:t[50]>1e-35?m=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?m=-.06860333850762075:t[225]>1e-35?m=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?m=.028599705845427533:m=-.010746719511640914:t[0]>4877.500000000001?m=-.07251187886096228:m=-.021299712241446785:t[118]>1e-35?m=-.11902023760964736:m=15874469526809387e-21:t[8]>267.50000000000006?m=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?m=.09614842415142123:m=.006049073167176467:t[189]>1e-35?m=.05562696451900713:m=-.006257541923837303;let h;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?h=-.10069846585436666:h=-.010577995535809317:t[146]>1e-35?h=-.008877238274428668:t[280]>1e-35?h=.10076055897012692:t[6]>70.50000000000001?h=-.020603523042565547:t[7]>1.5000000000000002?h=.02819095420813202:h=-.1223354167911277:h=-.025073583348334844:t[8]>416.50000000000006?h=.01718560189149466:t[230]>1e-35?h=.12281803224342265:h=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.13070568109867683:t[4]>63.50000000000001?h=-.027221825262496814:h=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?h=-.00605574271293711:h=.04739407327741249:h=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?h=.1252215087035768:h=.003905888677601057:t[52]>1e-35?h=.045466299731038815:t[2]>100.50000000000001?h=-.07815624550168065:t[308]>1e-35?h=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?h=-.03538265083203445:t[18]>1e-35?h=.1591211669800727:h=.015151475408241136:t[8]>557.5000000000001?h=-.04225569725456342:h=-.022455546324243267:t[308]>1e-35?h=.01325441736085826:t[197]>1e-35?h=.03752194600682512:t[225]>1e-35?h=.06583712394533976:h=-.005205289866839043;let g;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?g=.010264022580774884:g=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?g=-.0936747137352166:t[0]>384.50000000000006?g=.019846244507320695:g=-.0751102554077272:g=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?g=.11654906890054273:g=.0346250587613322:t[4]>39.50000000000001?g=-.08568002378645614:t[9]>16.500000000000004?g=-.12010535752923689:g=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?g=-.12056431231412057:t[131]>1e-35?g=.03652965550568472:g=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?g=-.10141481732178981:g=-.003936457893178248:t[31]>1e-35?g=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?g=.12972828769588213:g=-.003137412232297087:t[2]>100.50000000000001?g=-.0730872929087944:t[308]>1e-35?g=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?g=.07934620723812878:g=-.018598568353702116:g=-.030635505446410763:t[128]>1e-35?g=-.06962290453843294:t[84]>1e-35?g=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?g=-.034938657503885584:g=.016339322898966915:t[197]>1e-35?g=.03358907965870046:t[18]>1e-35?g=-.01754013791515288:g=-.0004944586067698557;let A;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?A=.005888790687820524:A=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?A=-.0224319889201976:t[212]>1e-35?A=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?A=.010357273289123324:A=-.029749145161304082:t[218]>1e-35?A=.06449336340743606:A=.018047654539345502:A=-.07350502390293116:A=-.019594829995832414:t[4]>39.50000000000001?A=-.019338083179859314:t[39]>1e-35?A=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?A=-.019197415255018464:A=-.0836562507048181:t[149]>1e-35?A=-.07679624472577429:t[32]>1e-35?A=-.05097506748590604:t[191]>1e-35?A=.04670476485250936:t[30]>1e-35?A=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?A=.03930363008271334:A=-.06029171685615689:A=.016203086182431294:t[4]>7.500000000000001?A=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?A=-.09817668643367765:t[10]>40.50000000000001?A=-.023558078753593125:A=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?A=-.1352063548573715:A=.058203900441270634:A=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?A=-.012552876807800442:A=.05991247777734298:A=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let b;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?b=.022717227245241684:b=-.049700413274686266:b=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?b=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?b=-.12263724050601095:b=.0070743478891288035:t[288]>1e-35?b=-.050439138582109:b=.0255701593657891:b=-.005812703740580558:t[6]>49.50000000000001?b=-.008542694147899113:b=.035147383686665:b=-.0960461939274094:t[32]>1e-35?b=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?b=-.01800870272656664:b=-.07817304234604389:t[30]>1e-35?b=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?b=.08778416018479411:b=-.026563982720830256:b=-.05296139548112329:t[50]>1e-35?b=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?b=-.036572140520852024:t[183]>1e-35?b=-.10766853736801459:b=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?b=.09513215942486053:b=-.03641865277445567:t[10]>59.50000000000001?b=.03177172388687933:t[39]>1e-35?b=-.10234241303898953:t[243]>1e-35?b=-.02966738115984321:t[190]>1e-35?b=-.04312785336449181:t[118]>1e-35?b=-.05808521194081524:b=.006720381600740378;let I;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?I=-.046284053681928526:t[210]>1e-35?I=49778070699847876e-21:t[13]>1e-35?I=.03328070054739309:t[128]>1e-35?I=-.054790214922938896:t[126]>1e-35?I=-.08524792218532945:I=.014414055975542446:t[1]>38.50000000000001?I=-.07287851335872973:I=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?I=-.12459748864088374:I=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?I=.13044981041138526:t[9]>71.50000000000001?I=-.056068402282406865:t[9]>12.500000000000002?I=.038957722962512764:I=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?I=-.0852126122372075:t[225]>1e-35?I=.10082066771689505:t[1]>161.50000000000003?I=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?I=-.010835400874777133:I=.004607419973807752:I=-.016989075258564062:I=.009205417251698097:t[23]>1e-35?t[20]>1e-35?I=.10184317139657878:t[0]>5724.500000000001?I=-.1163666496650542:t[1]>106.50000000000001?I=.1303850608190687:t[129]>1e-35?I=.10745031509534769:I=.006166901738036226:t[31]>1e-35?I=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?I=.005004582564506611:I=-.10481581731668346:t[19]>1e-35?I=-.009850706427306281:I=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let N;t[131]>1e-35?N=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?N=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?N=-.022305242912035072:N=.024792895826340516:N=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?N=.2080083584805785:N=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?N=.060783227455868206:N=-.056904865557409035:N=-.03278952553107572:t[192]>1e-35?N=.13117402617043625:N=.01647119888257836:N=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?N=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?N=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?N=-.11083976837572328:t[146]>1e-35?N=-.03359294484446772:N=-.0042815953591236475:t[190]>1e-35?N=-.09264239592903775:t[10]>1e-35?N=.022282638485105657:N=-.0205994057928458:t[5]>4918.500000000001?N=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?N=.08935072241972036:N=-.03781647876237494:N=.0062655753179671515:t[31]>1e-35?N=.008603500300349887:t[230]>1e-35?N=.03350056932774173:t[23]>1e-35?t[241]>1e-35?N=.10277555508503314:N=.0017901817172993888:t[2]>98.50000000000001?N=-.05920081229672715:N=-.015722173275739208;let F;t[13]>1e-35?t[118]>1e-35?F=.07957905150112207:t[1]>125.50000000000001?F=-.0662620579858685:t[145]>1e-35?F=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?F=-.0009597832580977798:F=-.081474760755753:t[212]>1e-35?F=.03637001492325179:F=.006912305498963309:t[32]>1e-35?F=-.03919900630910754:t[134]>1e-35?F=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?F=.06671440854602108:t[136]>1e-35?F=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?F=.026430947016830915:F=-.04075501264495112:t[9]>93.50000000000001?F=-.04353169430417609:t[50]>1e-35?F=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?F=.068392679163672:t[10]>1.5000000000000002?F=-.0209659792007492:F=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?F=.07254524592323175:F=-.0319087835282534:F=.00037444813327793425:F=-.025138768151370408:t[243]>1e-35?F=-.050010891710502096:t[94]>1e-35?F=-.0817513550778599:t[122]>1e-35?F=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?F=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?F=.1454877641381946:F=.053787998331240316:t[9]>33.50000000000001?F=.08602629796680285:F=-.03895127455803038:F=.008830878042315722;let O;t[131]>1e-35?O=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?O=.07473600489975568:t[0]>93.50000000000001?O=-.021596848506011502:O=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?O=.10264284346448256:O=.031042487183181262:O=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?O=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?O=.006271403149804702:O=-.030013637555715046:t[0]>4449.500000000001?O=-.06556876058654929:O=.06437994816903034:t[32]>1e-35?O=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?O=-.09349726304052086:t[210]>1e-35?O=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?O=-.029188394315052574:O=.017219308333820193:O=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?O=-.04428555753857688:O=.0001456106867817353:t[5]>213.50000000000003?O=.01740292726636365:O=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?O=.03410288911259329:t[121]>1e-35?O=-.06056527462120627:t[8]>2592.5000000000005?O=.12166808844363577:t[191]>1e-35?O=.11669879218998758:O=-.001664858391716235:O=-.01262927450503166:O=-.04506589951879664:t[227]>1e-35?O=-.08548904959752329:O=.02156080776537726;let Y;t[306]>1e-35?t[149]>1e-35?Y=-.1389218965136736:Y=-.032218642644416894:t[13]>1e-35?Y=.006465035217331847:t[50]>1e-35?Y=-.1381687930130022:t[179]>1e-35?Y=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?Y=-.03262719498763048:Y=.023342916702125613:t[191]>1e-35?Y=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?Y=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?Y=-.09989343595668776:Y=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?Y=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?Y=-.09165257825246746:t[9]>32.50000000000001?Y=.02484870392366004:Y=-.008499493096971395:t[8]>24.500000000000004?Y=.02459679192828244:Y=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?Y=.0015644546318714849:Y=-.06579524865022705:Y=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?Y=.03331853632960164:Y=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?Y=-.019091477207111116:Y=.037878468575478504:t[94]>1e-35?Y=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?Y=.16919658785098224:t[243]>1e-35?Y=-.06580584936754524:Y=.01567555159935563:t[129]>1e-35?Y=.06721746994993226:t[10]>32.50000000000001?Y=-.046394462507797975:Y=-.006436180519584767;let z;t[131]>1e-35?z=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?z=.019122095523977856:t[298]>1e-35?z=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?z=-.026094309429557913:t[204]>1e-35?z=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?z=.012643810980689466:z=-.07884161741497837:z=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?z=.04493082949897325:z=.18046359750455776:t[7]>18.500000000000004?z=-.018667348656891496:z=.02584325784698236:z=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?z=.04749240016989375:z=-.0333334578246718:t[5]>3276.5000000000005?z=.11330554740098908:t[7]>94.50000000000001?z=.1296600395033268:z=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?z=-.13787130789142835:t[0]>1847.5000000000002?z=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?z=.028856848462727104:z=-.11197632885851168:z=.08169801342016791:t[1]>22.500000000000004?z=-.021052888644970163:z=.019048604298876753:t[7]>4.500000000000001?z=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?z=.03432638833359197:z=-.0036767863082454973:t[1]>48.50000000000001?z=.03087375270128195:t[2]>3.5000000000000004?z=-.04219917149740248:z=.018818493993207935;let V;t[306]>1e-35?V=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?V=-.09091897542577475:V=.04042943082645558:t[218]>1e-35?V=.056254985867151:V=-.053848117950183044:V=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?V=.021581808008986944:V=-.05639286496176611:V=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?V=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?V=.023885302967553288:V=.1617794086125622:t[212]>1e-35?V=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?V=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?V=.01894935813286188:V=-.06449356357429188:V=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?V=-.034718828212885515:V=.0898976288814321:t[1]>17.500000000000004?V=-.15440137451988326:V=-.03864183216821465:V=.009988507307006308:V=-.08540311947043305:t[50]>1e-35?V=-.13323659732101975:t[134]>1e-35?V=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?V=.08082476177379844:V=-.041665761903645876:t[179]>1e-35?V=-.12405023987936657:t[39]>1e-35?V=-.06247416524997478:t[138]>1e-35?V=-.10724031753676487:V=-.0005423122305122404;let U;t[308]>1e-35?U=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?U=.023223358334607133:U=-.04383410185346742:U=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?U=.023406489302867494:U=-.085521220804058:U=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?U=.028120059780969632:U=-.04211009474298743:t[294]>1e-35?U=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?U=-.0993035220737934:U=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?U=.029770210551187937:U=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?U=.06421359317599738:U=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?U=.024368404612215164:U=-.04045232374803373:t[131]>1e-35?U=.017372701982485795:t[120]>1e-35?U=.08812710275150198:t[18]>1e-35?t[90]>1e-35?U=.18451364351180236:t[7]>33.50000000000001?U=-.03850813130183531:t[195]>1e-35?U=.06966114053446336:t[3]>16.500000000000004?U=-.0012869181693341211:t[0]>4242.500000000001?U=-.054625548611291035:U=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?U=.006302103427145562:U=.13967622319898698:t[121]>1e-35?U=-.038798585213145644:t[5]>4544.500000000001?U=-.08050498033009466:U=-.002986974112681435;let H;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?H=-.03461119351456781:H=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?H=-.12404435523286539:H=-.0034376913880382956:H=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?H=.0037507103585310234:H=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?H=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?H=-.04832024079663151:t[37]>1e-35?H=-.037103393468366934:H=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?H=.032539071163832034:t[5]>1643.5000000000002?H=.036408625378035665:t[0]>1500.5000000000002?H=-.1346358322854993:H=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?H=-.1133991164577881:t[9]>52.50000000000001?H=-.024478640359723122:H=.03673777861098756:H=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?H=.002583438691776944:H=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?H=-.02141222346712401:H=.06392462314316179:t[4]>12.500000000000002?H=.08700122294434816:t[8]>267.50000000000006?H=.056923170082743224:H=-.07716309825583327:t[32]>1e-35?H=-.03961343943752142:H=.002674914122888783:t[1]>42.50000000000001?H=-.05217539654421676:t[145]>1e-35?H=.09553630282946368:H=-.009424791262477729;let ee;t[183]>1e-35?ee=-.05753337139158443:t[308]>1e-35?ee=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?ee=-.10477869875380448:ee=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?ee=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?ee=-.04442302951713574:ee=.00012409888451734224:ee=-.092199119633697:t[225]>1e-35?ee=.13773072450201831:t[0]>2882.5000000000005?ee=.0028540012229920533:t[298]>1e-35?ee=.07134486044361629:ee=.014297412329837425:t[145]>1e-35?ee=.05608385321902638:t[92]>1e-35?ee=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?ee=-.0039957800609801315:ee=.0776927564241081:t[203]>1e-35?ee=-.05502900859432093:t[105]>1e-35?ee=.06062892720841595:ee=-.009574839629252128:t[31]>1e-35?ee=.009488858841144216:t[23]>1e-35?t[20]>1e-35?ee=.08818126313644752:t[8]>161.50000000000003?ee=.014353968957885408:ee=-.022240738532827903:t[210]>1e-35?ee=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?ee=-.043902062079383485:ee=-.014741559220396223:ee=-.00934935734853194:t[6]>32.50000000000001?ee=.1514593126307404:ee=.010771222510801532:t[10]>22.500000000000004?ee=.01412495209334078:ee=-.08576940379502533;let J;t[0]>384.50000000000006?t[84]>1e-35?J=-.06647690967306838:t[2]>101.50000000000001?J=-.024451334501552457:t[306]>1e-35?J=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?J=.0031858381443673127:J=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?J=-.08601340441214533:t[1]>29.500000000000004?J=.10487598629539963:t[8]>597.5000000000001?J=-.0786529133673238:J=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?J=-.04883600353740688:t[126]>1e-35?J=-.03794042763348827:J=-.003358871967539988:t[210]>1e-35?J=.054991356498447566:t[6]>19.500000000000004?J=-.007418396981635549:J=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?J=-.02143003429501711:J=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?J=-.006636355416244082:J=-.06483095743431454:t[4]>21.500000000000004?J=-.028975965946833545:J=.022012264796522657:J=-.06653648243193663:t[5]>4593.500000000001?J=.01753551428088607:t[217]>1e-35?J=-.028864824937700297:t[94]>1e-35?J=-.04885192273020658:t[279]>1e-35?J=.08105715462329498:t[121]>1e-35?J=-.04576676034750651:J=.004795141324949362:t[1]>42.50000000000001?J=-.047446619702809195:t[145]>1e-35?J=.08400495571952321:J=-.00854528836489364;let G;t[294]>1e-35?G=-.042529778074638265:t[266]>1e-35?G=-.1180276669679798:t[134]>1e-35?G=-.026818144353279623:t[183]>1e-35?G=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?G=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?G=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?G=-.03049646619610203:t[1]>50.50000000000001?G=.20634590755061122:G=.06956378103625731:t[0]>3770.5000000000005?G=-.07946414366134913:t[19]>1e-35?G=.17083312065604694:t[2]>21.500000000000004?G=-.02327981978127724:G=.129717297518715:t[145]>1e-35?G=.006891245076133524:G=-.0789123467863741:t[3]>99.50000000000001?G=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?G=.06447639919732716:G=-.05457561977645972:t[306]>1e-35?G=-.029995903305383882:t[191]>1e-35?G=.030596508110850414:t[242]>1e-35?G=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?G=.09518584795377832:G=-.018197744600833596:t[13]>1e-35?G=.006751790086127549:t[148]>1e-35?G=.01904174573618417:t[99]>1e-35?G=.025287735102561926:t[4]>14.500000000000002?G=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?G=-.09467943982430241:t[243]>1e-35?G=-.02521824751996268:G=.005437570718352172:G=-.022476214821960674;let j;t[0]>384.50000000000006?t[84]>1e-35?j=-.06088131453064195:t[147]>1e-35?j=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?j=.04219361472548491:j=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?j=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?j=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?j=-.11431764534511478:j=.013549717238356157:j=-.020987333767091276:t[6]>2.5000000000000004?j=-.02914877855133127:j=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?j=-.10087072787978416:t[37]>1e-35?j=-.030467397753331196:t[229]>1e-35?j=-.1017559811057469:t[4]>20.500000000000004?j=-.00413177742240167:t[20]>1e-35?j=.05213315982685969:j=.0037921635866823133:t[8]>51.50000000000001?j=.07327913092421544:t[6]>49.50000000000001?j=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?j=.02744420891894289:j=.11288946357194463:j=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?j=-.012329314369909049:j=.026816658655600168:j=-.0872405354618811:j=.007872673500247845:t[1]>42.50000000000001?j=-.04309044198258254:t[145]>1e-35?j=.07572529147860785:t[7]>5.500000000000001?j=-.013837187093264945:t[1]>17.500000000000004?j=.04208698439539668:j=-.06284346769019863;let Z;t[294]>1e-35?Z=-.0384794324818203:t[266]>1e-35?Z=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?Z=.07432960094940501:Z=-.035248735855751855:t[134]>1e-35?Z=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?Z=-.01706896375068821:Z=.08212247914968074:t[2]>59.50000000000001?Z=-.09546478958824225:t[6]>53.50000000000001?Z=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Z=.02816463285971267:Z=.15449139016588445:Z=-.10199787406123524:Z=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?Z=-.13924786681478077:Z=-.0072772442570213335:t[39]>1e-35?Z=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?Z=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Z=-.11174465335620831:Z=.00013144040097180107:Z=-.08493919336681105:t[42]>1e-35?Z=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?Z=-.015540659878839153:Z=-.14442609417300142:t[21]>1e-35?Z=-.025251979447574083:Z=.0023698372645272847:t[18]>1e-35?Z=.07269739695712212:t[8]>2592.5000000000005?Z=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?Z=-.01835130329646532:t[9]>45.50000000000001?Z=.02023047454629885:Z=.16469378262221102:Z=-.042975030085836426;let ie;t[8]>2915.5000000000005?t[297]>1e-35?ie=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ie=-.01034964686484714:ie=-.07357437440667927:ie=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ie=-.09476398869062203:t[9]>72.50000000000001?ie=-.0757383854264379:ie=.02806542779508718:ie=-.05147742568418084:ie=.10212721564444344:ie=.0518263760642861:ie=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ie=-.10669213185972036:ie=.027050434286384796:t[302]>1e-35?ie=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ie=.06354599160071946:t[1]>67.50000000000001?ie=.05317447949011187:ie=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ie=-.09369289448773599:t[0]>2215.5000000000005?ie=.04077965380363924:t[0]>807.5000000000001?ie=-.0591771776458298:ie=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ie=-.016323380219241672:ie=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ie=.03720704290087811:ie=-.008730548158766654:t[4]>80.50000000000001?ie=-.05346644687473197:ie=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ie=.019984510398089086:ie=-.03917825025861855:t[9]>170.50000000000003?ie=-.09759719821334525:ie=-.0023586682752856298;let ne;t[183]>1e-35?t[17]>1e-35?ne=.030100940443356424:t[10]>1.5000000000000002?ne=-.10861112216742408:ne=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?ne=-.032062878390325456:ne=-.10808232631806887:t[8]>1641.5000000000002?ne=-.06147013392655731:t[4]>12.500000000000002?ne=.03324767551088266:t[145]>1e-35?ne=.028851633810612017:ne=-.054871239091792784:t[134]>1e-35?ne=-.023813968121342108:t[266]>1e-35?ne=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?ne=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?ne=-.025350325484720576:ne=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?ne=.056817276537534815:ne=-.07674158463557636:ne=-.06335553143454145:t[1]>56.50000000000001?ne=.16390494217299284:ne=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?ne=.041717597065890205:ne=-.10357913492269129:t[10]>29.500000000000004?ne=.1365512866715726:ne=.020600048310575665:ne=.09708785634773187:ne=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?ne=-.03146213719547347:ne=.11784024316238083:ne=-.050940520532045355:ne=-.047988344143075616:t[191]>1e-35?ne=.028764654731460032:ne=.0011911575567860023;let re;t[294]>1e-35?t[10]>50.50000000000001?re=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?re=-.05103908560370243:re=.05002066201169583:re=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?re=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?re=.127983140816313:re=-.05436534163636867:re=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?re=-.009504203657088933:t[8]>819.5000000000001?re=.18689664822602375:re=.03635576744011826:re=-.029862411809998525:t[223]>1e-35?re=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?re=-.09405026597863717:t[0]>4153.500000000001?re=.053577663326799765:re=-.05062127873995668:re=.06512222894425874:t[39]>1e-35?re=-.04985311717827547:t[51]>1e-35?re=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?re=-.02860634573675884:re=.08863753005590103:re=.11158892111063744:t[0]>655.5000000000001?re=-.031005736641654926:re=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?re=-.00843386136334982:re=-.05273594615999777:re=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?re=-.015774115523598486:re=.10147367091236065:re=-.048307000563071016:re=.002118376117677254;let fe;t[8]>1014.5000000000001?t[9]>137.50000000000003?fe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?fe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?fe=.07211107542565391:fe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?fe=-.0751486415451188:t[1]>59.50000000000001?fe=.13459005084554104:fe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?fe=.06715575425741895:fe=-.005895690393702183:t[8]>2915.5000000000005?fe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?fe=-.00029068886245881074:fe=.0613467393188786:t[148]>1e-35?fe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?fe=.003887223773199377:fe=-.08553893131979015:fe=.025654192706396767:fe=-.05651733979610658:fe=-.02039913645229667:t[2]>7.500000000000001?fe=-.1058450646728524:fe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?fe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?fe=.1283258201586378:fe=-.01718135372229775:fe=-.07702452408491414:t[125]>1e-35?fe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?fe=.04273051857848212:fe=-.04533122948101463:t[2]>196.50000000000003?fe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?fe=.0231032972703664:fe=-.04807386814498683:fe=.002729435991332102;let ye;t[179]>1e-35?ye=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?ye=.026484626664041125:t[10]>1.5000000000000002?ye=-.10187000872941615:ye=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ye=.09574540795390041:ye=-.06454986703691233:ye=-.11411849349353141:t[266]>1e-35?ye=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?ye=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?ye=-.04403391373512386:ye=.1132928075412222:t[2]>47.50000000000001?ye=-.09700191391838056:ye=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?ye=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?ye=-.001668912999010927:ye=-.02363511102970245:t[8]>58.50000000000001?ye=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?ye=.0911011436534449:t[1]>28.500000000000004?ye=-.07192390493729035:ye=.06913818091291246:ye=-.012312625373699222:ye=.06784496312307986:ye=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?ye=.0026564453057705273:ye=-.025425772389361445:t[122]>1e-35?ye=-.12046786388602149:t[0]>3183.5000000000005?ye=.01162092842804907:t[91]>1e-35?ye=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?ye=-.0001647792543020228:ye=-.023664538532907665:ye=.01609078206180752;let Qe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Qe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Qe=-.017696526862422682:Qe=.1450050954613223:Qe=-.05406930069823832:Qe=-.08308700260259043:t[120]>1e-35?Qe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Qe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Qe=.038431826961746934:Qe=-.05937462906539856:t[9]>65.50000000000001?Qe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Qe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Qe=-.09579030954062734:Qe=.025064711572811746:Qe=.02579440518821548:Qe=.1044440128091862:Qe=-.058348633139536844:Qe=.07766788227934436:Qe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Qe=.07463684068207214:Qe=.18244269035484484:t[6]>39.50000000000001?Qe=-.06050050067471004:Qe=.05787759066913493:Qe=.010783225857972171:Qe=.1674891243602606:t[4]>9.500000000000002?Qe=-.004814132027475892:Qe=-.14543299413454813:Qe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Qe=-.07634466313617769:Qe=.0287825335169114:Qe=-.06894721943300268:Qe=-.00023988459059521937;let we;t[131]>1e-35?t[1]>93.50000000000001?we=-.05706887458825395:t[2]>1.5000000000000002?we=.011446637886629108:we=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?we=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?we=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?we=.026278724448495064:we=.17053138400480508:t[0]>4463.500000000001?we=-.06482289890096041:we=.03026516489536295:we=-.031785170717683144:we=.1312690622980455:t[13]>1e-35?we=.14336922540461444:we=.03523850945454039:we=-.015407465968975714:t[39]>1e-35?we=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?we=-.0659975068798723:we=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?we=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?we=.057409156184759516:we=.2024322059866388:we=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?we=.010648654146284154:t[308]>1e-35?we=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?we=.12364025998551711:we=-.02247495081065243:t[1]>22.500000000000004?we=-.0726295464624251:we=.03481895086048152:t[0]>4331.500000000001?we=-.04775443357020673:we=.07172377425057568:t[2]>89.50000000000001?we=-.11782645274716962:we=.00010092665257989378;let Xe;t[147]>1e-35?Xe=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Xe=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Xe=-.016101990375700172:t[0]>2579.5000000000005?Xe=-.13045089661551845:Xe=-.02874367814784938:Xe=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Xe=.17084176915326055:Xe=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Xe=.10591712319944074:Xe=-.024082167264285:Xe=.16497698867036126:Xe=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Xe=-.021012910475524206:Xe=-.13058422554298485:t[0]>1102.5000000000002?Xe=.10955864175201457:Xe=-.03566689354348996:t[1]>11.500000000000002?Xe=-.02093884208606101:Xe=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Xe=-.013861861436128482:Xe=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Xe=.10163873449625677:Xe=-.02779270277623805:t[1]>26.500000000000004?Xe=-.08035058228527389:Xe=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Xe=-.007028075523033826:Xe=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Xe=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Xe=-.0032075580718124892:Xe=-.04442829143298883:Xe=-.06597073245775804:Xe=.0015594090939337751;let Oe;t[223]>1e-35?t[8]>668.5000000000001?Oe=-.12803889879260094:Oe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Oe=.08967966612917375:t[1]>39.50000000000001?Oe=-.059791671514498074:Oe=.05648934961902822:t[2]>59.50000000000001?Oe=-.08633234097449628:t[6]>53.50000000000001?Oe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Oe=.025606129643140924:Oe=.13835395886271978:Oe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Oe=-.09975506556937946:t[10]>36.50000000000001?Oe=-.09427724661655643:t[10]>24.500000000000004?Oe=.07329330653410447:Oe=-.02271182965807972:Oe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Oe=-.05082091374050816:Oe=.1687114435254966:t[0]>2314.5000000000005?Oe=-.06422664016383926:Oe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Oe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Oe=-.1274167728754332:Oe=.01308079126447365:t[4]>73.50000000000001?Oe=.13854015371106546:t[4]>48.50000000000001?Oe=-.03684255740123261:t[6]>45.50000000000001?Oe=.10329912215813097:t[10]>77.50000000000001?Oe=-.08630788656925215:Oe=.031022006843800853:t[1]>25.500000000000004?Oe=-.08278381528048026:Oe=.06664374548141594:t[84]>1e-35?Oe=-.05624227409079396:Oe=.00012184182357340415;let ut;t[179]>1e-35?ut=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ut=-.07595415373151816:ut=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ut=.022822510448266862:ut=.17491569312933697:ut=-.058362287133533565:t[2]>2.5000000000000004?ut=-.03633895806364428:ut=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ut=-.07294848747514579:ut=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ut=-.07009535282685533:t[8]>2640.0000000000005?ut=-.051761240111316276:t[131]>1e-35?ut=-.06245774419231631:ut=.03495606662854905:ut=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ut=.0015036626973581122:ut=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ut=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ut=.022343994371919224:ut=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ut=.07724450228328664:t[0]>3853.5000000000005?ut=-.15671707454435677:t[10]>28.500000000000004?ut=-.10179090671841723:ut=.014878216919760927:ut=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ut=.14054154485273487:ut=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ut=-.08632985141410315:ut=.005524157938954954:ut=-.08802502622523681:ut=-.0004649168897260341;let Rt;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?Rt=-.007458687464321174:Rt=-.09444966249102484:t[1]>23.500000000000004?Rt=.08564129697360716:Rt=-.07105002902845851:Rt=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?Rt=-.10326216566705966:t[1]>26.500000000000004?Rt=.0050539832484585365:Rt=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?Rt=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?Rt=.05783632021087773:t[10]>17.500000000000004?Rt=-.06720598671764105:t[1]>47.50000000000001?Rt=.097495825172558:Rt=-.013372242800584872:Rt=-.06463226787713715:t[42]>1e-35?Rt=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?Rt=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?Rt=.11051270080118503:Rt=.027719462817590454:t[8]>597.5000000000001?Rt=-.08441503592016869:Rt=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?Rt=-.12190088985091102:Rt=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?Rt=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?Rt=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?Rt=.016585157185448045:Rt=-.11032043771149425:Rt=.01586986028570486:t[8]>388.50000000000006?Rt=-.10592413013261853:Rt=.04930703248769364:t[13]>1e-35?Rt=.003621937787920821:Rt=-.0013786331198611841;let Et;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?Et=.009769895322846493:Et=-.10620052926943656:t[9]>19.500000000000004?Et=.03781202525403449:t[9]>14.500000000000002?Et=-.11485785321365344:t[9]>6.500000000000001?Et=.07677177833073881:t[0]>4342.500000000001?Et=-.07079285609687631:t[49]>1e-35?Et=.06156814809246001:Et=-.014788509042554625:Et=-.032659201618470655:t[5]>5207.500000000001?Et=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?Et=-.03094160322187924:t[1]>29.500000000000004?Et=.09474646043921069:Et=.023445783928231618:Et=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?Et=-.07164443768784848:t[1]>29.500000000000004?Et=.089473622509272:t[8]>597.5000000000001?Et=-.08155349903101317:Et=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?Et=-.004003900679358653:t[190]>1e-35?Et=-.09236113461485262:t[8]>3198.5000000000005?Et=-.0124130160451179:Et=.018453070064009328:t[15]>1e-35?Et=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?Et=-.0009580759587680961:Et=-.03227283036698222:Et=.01369287669536875:t[1]>50.50000000000001?Et=-.04213060332500437:t[35]>1e-35?Et=-.11508095777767471:t[190]>1e-35?Et=-.08611884672400155:t[297]>1e-35?Et=.05723551879433584:Et=-.004829340082311461;let At;t[183]>1e-35?At=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?At=-.11753465135886734:At=-.007515490299047085:At=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?At=-.12371142493530439:t[1]>36.50000000000001?At=.032189417575190435:At=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?At=-.0784518658439288:t[2]>54.50000000000001?At=.12477882322370665:At=.000313468482399738:At=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?At=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?At=.0353146070135579:At=-.06327619611098285:At=.02813577701641991:At=-.12354390728506215:t[34]>1e-35?At=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?At=-.01245803535276381:At=-.07169472553475001:t[1]>11.500000000000002?At=.12989984824561698:At=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?At=.010390226893521422:t[10]>14.500000000000002?At=.16790888126487719:At=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?At=-.043398307129729134:At=.09963544907820426:t[9]>30.500000000000004?At=-.13540713124984502:t[9]>17.500000000000004?At=.0509435850590757:At=-.04761897852404613:t[4]>78.50000000000001?At=.09197086656470652:At=.0006771050176682337;let de;t[122]>1e-35?t[6]>36.50000000000001?de=.05686884451670743:de=-.05334759543084309:t[266]>1e-35?de=-.08603579519816038:t[157]>1e-35?de=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?de=-.0499592651503952:t[0]>725.5000000000001?de=.11780353905132664:de=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?de=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?de=-.03190157229022304:de=.07985197845805492:de=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?de=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?de=-.027174047777029083:de=.057117284879796476:t[3]>43.50000000000001?de=-.0016147040913107311:de=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?de=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?de=-.01466076988151239:de=.13375695925484857:de=-.04885873081899647:t[0]>5566.500000000001?de=.11086813028591343:t[8]>992.5000000000001?de=-.07622304217072383:de=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?de=.03285858361708423:de=-.12354858211764992:de=.0672788301823281:t[15]>1e-35?de=.08658836986585006:de=-.02741484278509758:t[290]>1e-35?de=-.08161310335133287:t[135]>1e-35?de=-.04824156054814152:de=.0009156904299554183;let qe;t[3]>7.500000000000001?qe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?qe=.03642374718166293:qe=.16379973756366603:qe=-.03946685266127979:t[186]>1e-35?qe=.07618896623420895:t[96]>1e-35?qe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?qe=-.022822371600847505:qe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?qe=.044416424920571296:qe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?qe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?qe=.1061937286809567:t[7]>54.50000000000001?qe=.11487507743121311:t[8]>819.5000000000001?qe=-.07181278009001418:t[10]>25.500000000000004?qe=.13499019430369633:t[1]>31.500000000000004?qe=.09032979489780704:qe=-.12754166393372374:t[9]>37.50000000000001?qe=-.05093963635361407:qe=-.005026651151683848:t[9]>2.5000000000000004?qe=.07619735785573735:qe=.012363301341532136:t[26]>1e-35?qe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?qe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?qe=-.10764172927882483:qe=.01890760098464703:qe=.06573095405846417:t[8]>634.5000000000001?qe=-.00783575973273707:qe=-.050612689680229306:t[1]>22.500000000000004?qe=-.0016842490401359626:qe=.0738227088444087:qe=-.02663970950432175;let Ce;t[31]>1e-35?t[8]>17.500000000000004?Ce=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?Ce=.007191286124908192:Ce=-.09347881647636902:t[10]>1.5000000000000002?Ce=.07938758708008091:Ce=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?Ce=.12321804057595996:Ce=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?Ce=-.04644244754790671:Ce=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?Ce=.0706108609273337:t[2]>40.50000000000001?Ce=-.028046629962303716:Ce=-.06497613993109329:Ce=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?Ce=-.03056331974267756:Ce=-.11886389712497057:Ce=.053364962175658184:t[8]>2233.5000000000005?Ce=-.0448152521157682:Ce=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?Ce=.03818796510453344:Ce=.23673992112982362:Ce=.02858814226507374:t[10]>44.50000000000001?Ce=-.1125863771551199:Ce=.009129996952394916:t[1]>7.500000000000001?Ce=-.004374525302461639:Ce=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?Ce=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?Ce=-.13677189943034931:t[10]>2.5000000000000004?Ce=.039591891437078086:Ce=-.09312596849507347:Ce=-.02423172142089822:Ce=.0009836986075266283;let $e;t[189]>1e-35?t[0]>5269.500000000001?$e=-.103183298350443:t[2]>51.50000000000001?$e=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?$e=-.05186168947388339:$e=.0496996365539082:t[10]>23.500000000000004?$e=.1404445738719:t[93]>1e-35?$e=.0027146310074558505:t[5]>3821.5000000000005?$e=.002153033152069652:t[4]>2.5000000000000004?$e=.007663539551317215:$e=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?$e=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?$e=-.021479467709980358:$e=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?$e=.021660293256233334:$e=-.0927396152303864:$e=.0665074081601698:t[0]>1550.5000000000002?$e=.08972407105958534:$e=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?$e=.06761927942466854:$e=-.015762168112653286:t[17]>1e-35?$e=.10311304131145381:$e=-.017672785252336027:$e=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?$e=-.10638321435298535:$e=.0007073011744385905:t[18]>1e-35?$e=-.027056185501334325:t[145]>1e-35?$e=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?$e=.09762140519655171:t[9]>110.50000000000001?$e=-.06581942957595835:t[6]>54.50000000000001?$e=.04959634035251596:$e=.0022616298654554207:$e=-.007437620924990854;let ce;t[179]>1e-35?ce=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?ce=.1470294450403005:ce=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?ce=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?ce=.07965955447707423:t[10]>10.500000000000002?ce=-.09236156404262426:ce=.03396273196231458:ce=-.13246465021467432:ce=.07092822261735353:ce=-.08753829085942:ce=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?ce=.004705878789890202:ce=.13775378964952867:ce=-.04770928980587811:t[10]>29.500000000000004?ce=.011221519891071544:t[0]>3853.5000000000005?ce=.06365381191628273:ce=.15506252245336827:t[1]>37.50000000000001?ce=-.07254777021042061:ce=.026514587757252385:t[308]>1e-35?ce=.04115804816617256:t[10]>26.500000000000004?ce=.02077721353011946:t[5]>3548.5000000000005?ce=-.1280907116663952:ce=-.021974774274438:t[306]>1e-35?ce=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?ce=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?ce=-.005710865560475598:t[94]>1e-35?ce=-.06751507982853555:ce=.027250040757588703:t[9]>52.50000000000001?ce=.07060357924595577:ce=-.030297760713011795:ce=-.0006005400085266517;let ue;t[113]>1e-35?ue=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?ue=-.06996356565314456:ue=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?ue=-.08317707559926495:t[21]>1e-35?ue=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?ue=-.010538203005984922:ue=.08454819465349446:t[9]>124.50000000000001?ue=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?ue=-.08542251249346582:t[9]>50.50000000000001?ue=-.023428882537657472:ue=.010042500833979073:ue=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?ue=.03006025206979096:t[9]>108.50000000000001?ue=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?ue=.04222035773042132:ue=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?ue=-.07209095448054853:ue=.028065954981903313:ue=.08714651929917122:ue=-.006678820669279169:t[10]>40.50000000000001?ue=.006982396294941626:ue=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?ue=-.09351114982645548:t[4]>3.5000000000000004?ue=-.004837550129223451:ue=-.08324141237464677:t[303]>1e-35?ue=.10703037493990825:t[9]>156.50000000000003?ue=-.10803018621648303:t[116]>1e-35?ue=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?ue=.10261721665006701:ue=.018994509090668264:ue=.0011244262442038839;let He;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?He=-.08404263465005328:t[0]>3682.5000000000005?He=.041259223920298876:t[1]>29.500000000000004?He=-.09541257493441671:He=.001482192721625409:He=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?He=-.08268996098437432:t[230]>1e-35?He=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?He=-913218977737457e-19:t[4]>10.500000000000002?He=-.056334165674005156:t[127]>1e-35?He=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?He=-.04231200150318989:t[10]>42.50000000000001?He=.10182973257894812:He=.015934763950068445:He=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?He=-.041117068322885315:He=.1167767830037126:He=.13611206992387337:t[10]>41.50000000000001?He=-.07120286010564107:He=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?He=-.07702290997669524:t[198]>1e-35?He=.08776558554437136:He=-.008290740324975692:t[2]>32.50000000000001?He=.07198457624219955:He=.005463113714361629:He=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?He=.03295785445437507:He=.15140250150674536:He=-.035613213948910254:t[186]>1e-35?He=.06849425535860769:t[96]>1e-35?He=.06028225812727254:He=-.007582543288662308;let Me;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Me=.08396556264106572:Me=-.0562516995099192:Me=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Me=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Me=.0052017514017035915:Me=-.11194119432743639:Me=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Me=-.025692451287403446:Me=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Me=-.11892250746801664:t[10]>22.500000000000004?Me=.07548493166973796:Me=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Me=.13750699058082427:t[18]>1e-35?Me=.06535408879552801:Me=-.054118179035040674:Me=.1344282838979622:t[0]>3982.5000000000005?Me=-.10409582202467015:t[19]>1e-35?Me=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Me=.012705935670766466:Me=.14149359442527545:Me=-.047977876173706004:t[20]>1e-35?Me=.057945228080337946:t[0]>3642.5000000000005?Me=-.008726535792122467:Me=-.08424769891378858:t[34]>1e-35?Me=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Me=.01196849566739346:Me=.1614642278429876:Me=-.043022338150701625:t[3]>5.500000000000001?Me=-.03907848255033881:Me=.018280601026175593:Me=.0006654540402589085;let be;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?be=-.01386103677247845:be=.11386694333005128:t[4]>27.500000000000004?be=-.021862617610091336:t[2]>31.500000000000004?be=.0828858469030438:be=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?be=.11303635767048735:be=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?be=-.04238798044549342:be=.022091190130494303:t[5]>5082.500000000001?be=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?be=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?be=-.04291104140431434:t[17]>1e-35?be=.11256797532342613:be=-.017206916368289193:be=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?be=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?be=.03581712466863222:be=.14770264307668884:t[8]>73.50000000000001?be=-.13093289429740068:be=.042461737442702936:t[52]>1e-35?be=.0501831919044939:be=-.010450249720465756:be=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?be=.0005381332165438493:be=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?be=.04849637311285226:be=-.036671377119808564:t[0]>421.50000000000006?be=.00020968499911058945:be=.11636422423182405:be=-.12687837788222575:be=.0012774367867215346;let Ge;t[120]>1e-35?Ge=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Ge=-.042799574885345304:Ge=.07412430171193245:Ge=-.11248270469336048:t[193]>1e-35?Ge=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?Ge=.028911612178122104:Ge=.12326369727728437:t[0]>4091.5000000000005?Ge=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ge=.1159839898100149:Ge=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?Ge=-.0216343737351583:Ge=-.1220272260878369:t[2]>18.500000000000004?Ge=.09152924475072398:t[8]>55.50000000000001?Ge=.039508716651005665:Ge=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?Ge=.06793009902674053:Ge=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?Ge=-.04391068849624096:Ge=.04009967593394672:t[8]>1085.5000000000002?Ge=-.024773826356034825:Ge=-.13919707884246582:Ge=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?Ge=-.11567917501901476:Ge=-.006813640337684114:t[3]>7.500000000000001?Ge=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?Ge=-.001754586408351048:Ge=-.055422422450722056:Ge=-.06090032532532226:t[0]>5269.500000000001?Ge=.11787981735983527:Ge=-.00198119768540783:Ge=.00210412924303036;let rt;t[294]>1e-35?t[10]>50.50000000000001?rt=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?rt=-.06063239096209816:rt=.03317022411417386:rt=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?rt=-.013608609329298802:rt=.09078000157330264:t[99]>1e-35?rt=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?rt=-.07536137260189814:rt=.006253266595455118:t[10]>28.500000000000004?rt=-.006106041147592768:t[9]>156.50000000000003?rt=-.11828932797811101:t[94]>1e-35?rt=-.02566078479505714:t[303]>1e-35?rt=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?rt=-.08401252789168523:t[5]>4244.500000000001?rt=.026372887658499107:t[1]>16.500000000000004?rt=-.027836756345634026:rt=.09205362097909099:rt=.00934612788718244:t[203]>1e-35?rt=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?rt=-.09580979052540028:t[1]>50.50000000000001?rt=-.06402211827281554:rt=.08342858760095972:t[2]>36.50000000000001?rt=.008114897658204584:t[92]>1e-35?rt=.09541587072672864:rt=-.022342147210555434:rt=-.01660492519175128:rt=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?rt=.15846731118501817:rt=.039498507912023195:t[245]>1e-35?rt=.07008718676813333:rt=.0019806389728814727;let ht;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?ht=-.01192072916082109:ht=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?ht=.06874032717466054:t[4]>40.50000000000001?ht=-.07752510020707537:t[1]>76.50000000000001?ht=-.09944032260703917:t[8]>1381.5000000000002?ht=-.054466635810800745:t[1]>32.50000000000001?ht=.05974084520839573:ht=-.0384718740755954:ht=-.11374190719134032:t[0]>2151.5000000000005?ht=-.13703645155803298:ht=.004833344758654556:t[297]>1e-35?t[212]>1e-35?ht=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?ht=.013539805885738608:ht=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?ht=.09941880179344399:ht=-.01608127391210995:ht=.08025226531247417:t[9]>67.50000000000001?ht=.13525448212444113:t[6]>61.50000000000001?ht=-.05511099182158894:t[94]>1e-35?ht=-.06821509831783572:t[128]>1e-35?ht=.11361314817714643:ht=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?ht=-.09954181329804547:t[197]>1e-35?ht=.10102833149755386:t[188]>1e-35?ht=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?ht=-.03781554214742005:ht=.09927933385592314:ht=-.020006000056720083:ht=-.10520473615957895:ht=-.12006990846253787:ht=-.00026111570975317574;let Ot;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ot=-.019188245509744628:Ot=-.13354864350075848:t[0]>2461.5000000000005?Ot=.051885477468354396:Ot=-.0833581968852119:Ot=.08233441701532287:Ot=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ot=.09926337893072812:Ot=-.027753610497327715:t[0]>1972.5000000000002?Ot=-.09780045823152517:Ot=.032380915168504935:Ot=.11502632261226381:t[17]>1e-35?Ot=-.06094965899579662:t[10]>40.50000000000001?Ot=-.07500475582440802:Ot=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ot=-.09584538995220808:Ot=-.00908705814304442:Ot=.03203281520813893:t[10]>49.50000000000001?Ot=-.03146271513986384:t[2]>63.50000000000001?Ot=.13172001315536286:t[224]>1e-35?Ot=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ot=.09521549382082259:Ot=-.04414925613522197:t[0]>1847.5000000000002?Ot=-.09118580379557353:Ot=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ot=.03525144509943896:Ot=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ot=-.04766112322938157:t[2]>10.500000000000002?Ot=.0728516504357201:Ot=-.05049625965272536:Ot=-.10868663055825774:Ot=.0005382613419948969;let Zt;t[147]>1e-35?t[1]>53.50000000000001?Zt=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Zt=-.030504020655417463:Zt=.07102458639110094:Zt=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?Zt=.055304563442710876:t[1]>53.50000000000001?Zt=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?Zt=-.1568835288372895:Zt=-.0279829124400056:Zt=.04493843959601833:Zt=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?Zt=-.054133834303687026:t[9]>48.50000000000001?Zt=.11263810289007213:t[9]>9.500000000000002?Zt=-.02202034562838259:t[4]>45.50000000000001?Zt=-.03410927569045158:Zt=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?Zt=-.029687297407295893:Zt=.10673602850001934:t[4]>42.50000000000001?Zt=.0036275562945108117:Zt=-.0760789221330622:Zt=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Zt=.08274426793676076:Zt=-.07076234425516396:Zt=.13890177606150175:Zt=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?Zt=-.09250637750836187:Zt=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?Zt=-.01897867921812603:Zt=.04890781705365262:Zt=-.11569892307597907:t[2]>106.50000000000001?Zt=.09032697440623969:Zt=.00047935919155035045;let qt;t[115]>1e-35?qt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?qt=-.10131179514695865:t[8]>938.5000000000001?qt=.10203729808015481:qt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?qt=.03574015165562999:qt=-.07763042506449493:qt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?qt=.0665706259130275:qt=-.06586817559309924:qt=.11925564412287476:qt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?qt=.046017146627455346:qt=-.08623321630086885:t[8]>1765.5000000000002?qt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?qt=.11143827902215087:qt=-.01817808730473413:qt=.16980985030210127:qt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?qt=.010168994879727824:qt=-.09099594488792513:t[9]>1.5000000000000002?qt=.0533459678147928:qt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?qt=-.062346959148773695:t[1]>47.50000000000001?qt=-.0021578343835599316:t[2]>27.500000000000004?qt=.19567373210166172:qt=.07851555379116423:t[18]>1e-35?qt=.03711549097804649:t[8]>359.50000000000006?qt=.012492346746905587:t[4]>20.500000000000004?qt=.047511695735697544:qt=-.07999269063948773:qt=6802045404471004e-20;let Yr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Yr=.0011484728213539738:Yr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Yr=-.09828874964938798:t[8]>1586.5000000000002?Yr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Yr=.011938269926919522:Yr=.17541983715953954:t[19]>1e-35?Yr=.023002786011088672:Yr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Yr=.06508934844183291:Yr=-.10168553534835639:Yr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Yr=.021140806225203937:Yr=-.1167833342453639:t[2]>33.50000000000001?Yr=.13163585734056618:Yr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Yr=.06314479201263888:Yr=-.09639088327091713:t[10]>29.500000000000004?Yr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Yr=40577156464836036e-21:Yr=.12322387121810757:Yr=-.03697224045046014:t[1]>22.500000000000004?Yr=.016474835887320276:Yr=.16919298733903063:Yr=.07633203630214054:Yr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Yr=.14150493354700563:Yr=-.01831155354975749:t[1]>28.500000000000004?Yr=-.07952557178685365:t[10]>28.500000000000004?Yr=.0665695554984927:Yr=-.053640139319277094:Yr=.0004754840665898665;let Mr;t[76]>1e-35?Mr=-.06814884255939921:t[179]>1e-35?Mr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Mr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Mr=.004193658608848433:Mr=-.1066968975983452:t[8]>302.50000000000006?Mr=.05476730110440451:Mr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Mr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Mr=.013555772109446666:Mr=-.09856116699770784:Mr=.0284329611813383:t[2]>52.50000000000001?Mr=.04008708444763762:t[9]>29.500000000000004?Mr=-.1289599546008197:Mr=-.018566534248335896:t[8]>747.5000000000001?Mr=.02236484980076122:Mr=.1148871655157582:t[8]>3084.0000000000005?Mr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Mr=.03164751204281298:Mr=.11752140436184891:t[9]>42.50000000000001?Mr=-.07180559595410106:t[22]>1e-35?Mr=.09325040416256854:Mr=-.016041122807939914:Mr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Mr=-.010718250133458515:Mr=.09818827994853763:Mr=.010180038981174032:Mr=-.039472162599295535:t[9]>170.50000000000003?Mr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Mr=-.08674788057474031:Mr=.02077653508548371:Mr=-.0003536561382007414;let fn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?fn=.018337297491457794:fn=-.05926206443180149:fn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?fn=.10747078482128616:t[126]>1e-35?fn=-.10550625192391357:t[7]>71.50000000000001?fn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?fn=.1317396472229434:fn=-.025035791351328947:fn=-.0728334305864372:t[8]>963.5000000000001?fn=.023642201723096064:fn=.183010326734258:t[128]>1e-35?fn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?fn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?fn=-.1088876900335281:fn=.02758317023002635:fn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?fn=-.01928020117446408:fn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?fn=.07893723375925096:fn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?fn=-.10301657587280551:fn=.005787463140224318:fn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?fn=-.019296977889522397:fn=-.07274529751752634:t[1]>30.500000000000004?fn=-.050368901143148286:fn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?fn=.0015332402792773946:fn=.09930153676749967:fn=-.06370844564357069:fn=.00042272155209927616;let xe;t[71]>1e-35?t[4]>17.500000000000004?xe=.12586844370423247:xe=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?xe=-.08474891624263797:t[8]>125.50000000000001?xe=.08125086980439704:xe=-.04082085238068532:t[0]>3863.5000000000005?xe=.020481535807469208:xe=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?xe=-.019110200161573936:xe=-.12387719685855114:t[0]>1102.5000000000002?xe=.08376595701957407:xe=-.031821919580524834:t[9]>4.500000000000001?xe=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?xe=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?xe=.1349841206807871:xe=.011864053595560297:t[1]>41.50000000000001?xe=-.08203662486612544:t[2]>18.500000000000004?xe=-.009541865642346947:xe=.08345043168501759:t[2]>10.500000000000002?xe=-.09585031818030947:xe=.019432330487099865:xe=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?xe=.11951517733981365:xe=-.016651014735738538:t[1]>28.500000000000004?xe=-.07410922545030711:t[10]>28.500000000000004?xe=.05886430683844788:xe=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?xe=.04802269879144705:xe=-.026208212831796737:t[4]>45.50000000000001?xe=-.03227476944664786:xe=.05124575625622705:xe=.00020506696916003137;let Ve;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ve=-.03042091758483443:t[10]>14.500000000000002?Ve=.09816619204768777:Ve=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ve=-.02381165060401718:Ve=-.10950361804974783:Ve=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ve=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ve=-.06371052144380579:Ve=.0835500621252692:Ve=-.10408255929333915:t[1]>74.50000000000001?Ve=.13208968122712403:t[1]>64.50000000000001?Ve=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ve=.09922816902423433:Ve=.016366955328796718:Ve=.1592412560903584:t[1]>39.50000000000001?Ve=.05409467990258923:Ve=-.08260633210459611:Ve=-.06307205775247567:t[9]>36.50000000000001?Ve=.040253940015648144:Ve=.14202568969471283:Ve=-.028761848341594044:Ve=.08994073058773508:t[0]>807.5000000000001?Ve=-.043427848826323195:Ve=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ve=-.0758877731600639:t[23]>1e-35?Ve=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ve=.08124700978741987:Ve=.013296063087086852:t[7]>5.500000000000001?Ve=-.01640196088612987:Ve=-.12685498840146067:Ve=-.0004940792382459551;let mt;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?mt=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?mt=.08513773825688947:mt=-.1184664832315282:mt=.05676963535893477:mt=.14263843210340613:mt=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?mt=-.10669720555606924:mt=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?mt=.0664744575868955:mt=-.08469256188890871:mt=-.026746678040592144:t[281]>1e-35?mt=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?mt=.012131807587207655:mt=-.12776015795398743:mt=.04320472481083551:mt=.08390980661550446:t[10]>227.50000000000003?mt=-.09771783809101153:t[10]>130.50000000000003?mt=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?mt=-.07610698254064358:t[8]>902.5000000000001?mt=-.03136381213599649:t[131]>1e-35?mt=.0704821739127936:t[224]>1e-35?mt=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?mt=.10431473040024908:t[8]>841.5000000000001?mt=.07304745320500514:mt=-.038011541882439825:mt=-.01679746695007364:t[0]>3129.5000000000005?mt=.05589952587431965:t[210]>1e-35?mt=.06227198085800842:mt=-.0011341890997947812:t[8]>740.5000000000001?mt=.04817300084412584:mt=-.000577001010789238;let wt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?wt=-.10504730480402079:t[5]>3341.5000000000005?wt=.11087894671081754:wt=-.0406668834674614:wt=.03308382165616109:t[8]>104.50000000000001?wt=-.10431436764549162:wt=.0073928337244891455:t[4]>34.50000000000001?wt=-.10571751512748416:wt=-.006081128814142983:t[13]>1e-35?wt=.1299673566095023:t[4]>60.50000000000001?wt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?wt=.04857126072645073:wt=-.03431365358104773:t[4]>16.500000000000004?wt=.04101865986596709:wt=.16480274980378218:t[10]>26.500000000000004?wt=.03673978504199255:t[10]>9.500000000000002?wt=-.10996402743800027:t[308]>1e-35?wt=.0553693735082498:wt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?wt=.010902983761213922:wt=.1325118659895645:wt=-.064362945508595:t[1]>66.50000000000001?wt=.033416767779331176:wt=-.054080316225040496:t[42]>1e-35?wt=-.07762364337810815:t[10]>1089.5000000000002?wt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?wt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?wt=.0220102041325908:wt=-.06516708740003069:wt=.012833498905748267:t[224]>1e-35?wt=-.007038418272997865:wt=.00037666304316290967;let ar;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ar=.07554189644995735:ar=-.052089349455904946:ar=-.10148206848169845:t[113]>1e-35?ar=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?ar=.07172653627995676:ar=-.07602959317610998:ar=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ar=-.0399322883690891:ar=.06523495517476098:ar=-.10358715295743802:t[193]>1e-35?ar=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?ar=.015928764772252406:ar=.1341513061552287:ar=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?ar=-.033592997607280156:ar=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?ar=-.08402551858097379:ar=.017401984506038796:t[1]>25.500000000000004?ar=.13337205393591278:ar=-.01160208350090984:ar=.06708317942315471:t[8]>227.50000000000003?ar=-.08486943882418681:ar=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?ar=-.10496268177586783:ar=-.020921489532370493:ar=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?ar=.11639296062157028:ar=-.004275784356569115:t[32]>1e-35?ar=-.07297384970166025:ar=.006026841626381599:ar=.002034611134960428;let tr;t[248]>1e-35?tr=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?tr=-.06455513326540585:t[1]>29.500000000000004?tr=.07718474591552532:t[4]>7.500000000000001?tr=.040139336931404826:tr=-.09685734690563386:tr=.00015327283570347363:t[9]>88.50000000000001?tr=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?tr=-.04077257804338707:tr=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?tr=.03778141591008941:tr=-.06459919920634845:tr=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?tr=.14063930759326346:t[0]>179.50000000000003?tr=.07287482250668585:t[8]>1180.5000000000002?tr=-.14419393112726253:t[10]>28.500000000000004?tr=-.07993142770099469:t[17]>1e-35?tr=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?tr=.05527969663610186:tr=-.10824385941441346:t[3]>11.500000000000002?tr=.12358502961047915:tr=-.017509147119622873:t[0]>74.50000000000001?tr=-.014907705458730486:t[8]>95.50000000000001?tr=-.02225118168342062:tr=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?tr=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?tr=.04962819555610421:tr=-.07213577821855309:tr=.09139529824708481:t[19]>1e-35?tr=.013439401088345224:tr=-.049274647207292056:tr=.10531673719686951;let Sr;t[40]>1e-35?t[0]>1937.5000000000002?Sr=-.06421671152073961:Sr=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?Sr=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?Sr=-.03520420769287065:t[8]>1085.5000000000002?Sr=-.019817352506127633:Sr=.11444439424520964:Sr=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?Sr=-.010490117519863269:Sr=.08104430117757461:t[121]>1e-35?t[243]>1e-35?Sr=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?Sr=.06619344145920268:t[0]>4091.5000000000005?Sr=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?Sr=.10016091391222309:Sr=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?Sr=-.019511460451434884:Sr=-.11643672465055221:t[2]>18.500000000000004?Sr=.07848228087333317:t[8]>55.50000000000001?Sr=.032583027899956235:Sr=-.11209832692153521:t[11]>1e-35?Sr=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?Sr=-.09996887746328006:t[9]>2.5000000000000004?Sr=.02157682011863397:Sr=-.05247727848991843:Sr=.07409150201483244:t[1]>38.50000000000001?Sr=-.11378466075449625:t[224]>1e-35?Sr=-.10741749127732923:t[1]>26.500000000000004?Sr=.07343136534146562:Sr=-.07013573628594773:t[25]>1e-35?Sr=-.04626669734164317:Sr=.05518333197956482:Sr=.00032434010867555516;let fr;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?fr=.026313251010808853:fr=-.08997339150292381:fr=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?fr=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?fr=.0905155504503746:t[8]>1049.5000000000002?fr=-.062312558183394054:t[8]>719.5000000000001?fr=.09583836191410239:t[0]>3719.5000000000005?fr=-.0778097309430818:fr=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?fr=-.12920865648544927:t[0]>2699.5000000000005?fr=-.07086587879041864:fr=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?fr=-.11377786322600797:fr=-.009486325820117998:t[1]>55.50000000000001?fr=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?fr=-.07938291201004219:t[2]>36.50000000000001?fr=.01520046732530246:fr=.13649854049662832:fr=-.07145015938528873:t[8]>407.50000000000006?fr=-.00350257360822279:fr=.11332047082193297:fr=-.10060624458629897:fr=.05429496612497562:t[8]>1446.5000000000002?fr=.006073419197482838:fr=-.08718676350883998:fr=-.11532497988252638:fr=.10766270463068293:t[34]>1e-35?fr=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?fr=-.0004109812623829506:fr=.021601073497455662:fr=-7343540098965853e-20;let or;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?or=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?or=.05995640200798119:t[0]>3443.5000000000005?or=-.14698883458733583:or=-.030039164579240187:t[189]>1e-35?or=-.06086763220538141:t[1]>86.50000000000001?or=-.05096727866142538:t[4]>64.50000000000001?or=.11240554253834577:t[4]>45.50000000000001?or=-.030279760168394117:t[6]>45.50000000000001?or=.10161088917815142:t[10]>77.50000000000001?or=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?or=-.06672020005240323:or=.08831457502630258:t[8]>2592.5000000000005?or=-.052617701047376654:t[10]>29.500000000000004?or=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?or=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?or=-.064099222705728:or=.044332487521538365:t[0]>2882.5000000000005?or=.031099546885005065:or=.12938467051623853:t[0]>4221.500000000001?or=-.0928676413498701:t[9]>30.500000000000004?or=-.05781824812803708:or=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?or=-.06648105454098469:or=.05985487552383097:or=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?or=.05282385499619401:t[1]>66.50000000000001?or=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?or=.027885690791379255:or=-.08407126408362446:or=.014432924125571093:or=-9903435845205118e-20;let dr;t[76]>1e-35?dr=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?dr=.013633653464240465:dr=-.10164319411983509:dr=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?dr=.00632864847804078:dr=-.08393000368134668:dr=.07870508617440916:t[284]>1e-35?dr=.1092302727710421:dr=-.0025505047582483234:t[248]>1e-35?dr=.07101822393621864:t[274]>1e-35?dr=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?dr=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?dr=.025081789181021243:dr=-.014813325803582618:t[9]>33.50000000000001?dr=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?dr=.11926990418060353:dr=.01852125513565268:dr=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?dr=-.1178464984373743:t[283]>1e-35?dr=.043370859226927405:t[5]>4320.500000000001?dr=-.01103141226366587:t[8]>1104.5000000000002?dr=-.023053423988095886:dr=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?dr=.000579145585864887:dr=.03389152834202143:t[128]>1e-35?dr=-.14527722052568462:t[210]>1e-35?dr=-.08915971541902741:t[7]>9.500000000000002?dr=-.03307314577076116:t[18]>1e-35?dr=-.05521712302023565:dr=.009315605032770029:dr=.0036332551852289933;let sr;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?sr=-.07583539600416284:t[188]>1e-35?sr=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?sr=-.011038193049597113:sr=.08154028164397753:t[1]>85.50000000000001?sr=.10259361975201933:sr=.011640408330521594:sr=-.00023319159023748508:t[92]>1e-35?sr=.13771692859530546:sr=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?sr=.09967230141007705:t[30]>1e-35?sr=-.08888529037551285:sr=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?sr=.08284665960761373:sr=-.029292565021289504:t[7]>7.500000000000001?sr=-.09945093355204493:sr=-.008381393701708593:t[20]>1e-35?sr=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?sr=.07585582641438211:t[8]>284.50000000000006?sr=-.029387993239886723:sr=.07716738177321587:t[1]>18.500000000000004?sr=.026745348497993746:sr=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?sr=.02337306890530338:sr=-.10390355904767366:sr=.07390521199638532:sr=-.06788247515155237:sr=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?sr=-.06360325615644084:sr=.04342192339836601:sr=-.10598779152030145:sr=.05253384605768211;let Fr;t[3]>7.500000000000001?t[157]>1e-35?Fr=-.07514182877923786:Fr=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Fr=.028692053800951845:Fr=.14081686716133598:Fr=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Fr=.0037139292567243084:Fr=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Fr=.01202688580305612:Fr=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Fr=.043935495082738626:Fr=-.05639305759669704:t[247]>1e-35?Fr=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Fr=.10331836202616368:Fr=.0006926658459781341:t[96]>1e-35?Fr=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Fr=-.0741403257305367:Fr=.022900127535540854:t[7]>3.5000000000000004?Fr=.038110741403836294:Fr=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Fr=-.09552842289807008:t[1]>27.500000000000004?Fr=.012505935885798007:Fr=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Fr=-.1046104767723845:Fr=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Fr=.023466328488582572:Fr=.11730925774586994:Fr=-.04771965631104874:Fr=.17059689880751394:Fr=-.08181850955999449:t[26]>1e-35?Fr=-.12727482696678769:Fr=-.014343123272734182;let Jr;t[147]>1e-35?t[1]>53.50000000000001?Jr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Jr=-.02763546051134888:Jr=.06423344777499343:Jr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Jr=.049825139823021586:t[7]>22.500000000000004?Jr=-.01131680751379858:t[0]>2579.5000000000005?Jr=-.10673674485369694:Jr=-.015387212937189957:Jr=.04347325151148724:t[179]>1e-35?Jr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Jr=.0650355590939066:Jr=-.0473332870892226:Jr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Jr=.11139543329789044:t[126]>1e-35?Jr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Jr=.06370903833231022:t[10]>29.500000000000004?Jr=.03415223859607161:t[10]>3.5000000000000004?Jr=-.07415518117873297:Jr=-.0014119203473324082:Jr=.12617652343819508:t[9]>41.50000000000001?Jr=-.10311145857176976:t[8]>2757.5000000000005?Jr=-.08106484219011428:t[7]>71.50000000000001?Jr=-.09783384432091176:t[1]>88.50000000000001?Jr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Jr=-.008884084501608536:Jr=.061339437777743616:Jr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Jr=.01526664064166223:Jr=.13534828515415498:Jr=-.06985484465894776:Jr=.0005758961943178744;let ln;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?ln=-.029152732370514342:ln=.07173628916139178:t[1]>36.50000000000001?ln=-.08859111297255318:ln=.0018030071815630785:ln=.13652461563759322:ln=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?ln=-.07145140450454163:t[21]>1e-35?ln=-.07422841663493233:ln=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?ln=.11864240653986852:t[3]>33.50000000000001?ln=-.08821209591953476:ln=.05706392280054726:ln=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?ln=.01953613016837112:ln=-.059781039130025006:t[148]>1e-35?ln=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?ln=.07207826841738371:t[202]>1e-35?ln=.08163917539410503:ln=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?ln=-.06858280496900336:ln=-.1781828899516648:ln=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?ln=.018232649414147116:ln=-.04419781124222661:ln=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?ln=.11452368095776105:ln=-.036496437259924026:ln=-.040445338739465486:ln=.0816572651001145:ln=-.08968914517368663:ln=.0002826343082585516;let xn;t[189]>1e-35?t[0]>5269.500000000001?xn=-.08839493050459957:t[10]>85.50000000000001?xn=.10046908365702462:t[8]>2592.5000000000005?xn=-.09632233975926387:t[8]>2000.5000000000002?xn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?xn=.035504970430426296:t[1]>31.500000000000004?xn=-.1133764813142531:xn=-.01138280942244812:t[8]>1125.5000000000002?xn=.09800530246229806:xn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?xn=.07316772160107896:xn=-.059095014819051765:xn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?xn=-.09150209066166894:t[8]>3084.0000000000005?xn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?xn=-.04449234460408263:xn=.05568837973347338:xn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?xn=.12741077850267066:xn=.007372371864985329:t[2]>39.50000000000001?xn=.02295917234617787:xn=.14966532083907075:t[1]>39.50000000000001?xn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?xn=-.02511861881285652:t[1]>27.500000000000004?xn=.08683660011672288:xn=.02956214835267301:t[9]>15.500000000000002?xn=-.016538805462996232:xn=.04352738094981517:xn=-.05561856645643868:t[9]>170.50000000000003?xn=-.07996752635874248:t[179]>1e-35?xn=-.09065975936933919:xn=-.00042817975060427177;let oi;t[39]>1e-35?t[4]>25.500000000000004?oi=.03443173196222934:oi=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?oi=-.0013415395759330318:oi=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?oi=.002297618040307216:oi=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?oi=-.015297257305397608:oi=.09651828834062742:oi=-.06636003334371929:t[10]>11.500000000000002?oi=.17631616138309397:t[0]>1639.5000000000002?oi=3804386478092585e-20:oi=-.09099296398683193:oi=-.06874415876172972:t[0]>2151.5000000000005?oi=-.1311264883406766:oi=.00809052010141122:t[253]>1e-35?oi=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?oi=.045038497754638605:oi=-.07770167665661752:oi=-.08596294280650517:oi=.08538655727027213:oi=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?oi=.054627956617973275:t[1]>61.50000000000001?oi=-.11994465088415499:t[4]>8.500000000000002?oi=.06676200239406452:oi=-.027503148069376867:t[8]>676.5000000000001?oi=-.10363964928357075:t[4]>8.500000000000002?oi=-.07589816227175682:oi=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?oi=.009093153189012338:oi=-.06119765876605404:oi=.0004668642103528348;let Rn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Rn=-.10100794502567233:Rn=.08000205636470442:Rn=-.11945419826856896:t[113]>1e-35?Rn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Rn=.1224302423880318:Rn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Rn=.0019277012166729114:t[1]>28.500000000000004?Rn=-.054445821715687494:Rn=.045645722976713245:t[30]>1e-35?Rn=.13402660155331655:Rn=.008921176001777645:Rn=-.058547426505451076:Rn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Rn=-.13526418192218206:Rn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Rn=.0007263224246135398:Rn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Rn=-.11575657261278308:Rn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Rn=-.01995960178292952:Rn=.11216586049153021:Rn=-.10050961087149474:Rn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Rn=.10303451081526649:Rn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Rn=-.043799548968209395:Rn=-.12451444314954115:t[4]>12.500000000000002?Rn=-.03838117361958468:Rn=.06504990789767144:t[57]>1e-35?Rn=.06890006938293915:Rn=.0003914274695562949;let ri;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?ri=.004271749009686975:ri=-.10523878297127605:ri=.04633982158107851:ri=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?ri=-.08655730561951676:t[8]>919.5000000000001?ri=-.0676453705610183:t[7]>18.500000000000004?ri=-.027787974193650575:ri=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?ri=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?ri=-.03473877164537313:t[8]>719.5000000000001?ri=.10471053866934404:ri=.008236107678382981:t[4]>57.50000000000001?ri=.09412219478825269:t[10]>66.50000000000001?ri=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?ri=-.040681323751002293:ri=.06374650297561021:ri=.12884615227401788:t[10]>5.500000000000001?ri=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?ri=-.05474068967150784:ri=.03744700650806603:ri=-.07846396348680855:t[1]>42.50000000000001?ri=.018972315810821302:ri=.10953621007604744:t[5]>4439.500000000001?ri=.010999776705494586:t[1]>40.50000000000001?ri=-.12394200059775967:t[10]>2.5000000000000004?ri=.013528093962849453:ri=-.09222088417048682:ri=-.12662967149701485:ri=.09327296405849603:t[3]>99.50000000000001?ri=-.013581954439986752:ri=.0005526498251862075;let un;t[187]>1e-35?t[243]>1e-35?un=-.08392792551692502:t[10]>68.50000000000001?un=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?un=-.0825306209711224:un=.049559996084532945:un=-.1064938580886302:un=.03353240732240275:un=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?un=.16966001471529374:t[1]>57.50000000000001?un=-.005772777673676247:un=.09383677041525058:t[8]>747.5000000000001?un=.054068175469351235:un=-.049968216310277036:t[8]>753.5000000000001?un=-.0679383555784074:t[4]>8.500000000000002?un=-.059757341189735386:un=.05701083682780414:un=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?un=.05820296128730006:un=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?un=.15340611616954566:un=.04385036188666874:t[0]>4449.500000000001?un=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?un=.004840354641006495:un=.09967827580276283:un=.11605363537391578:t[9]>19.500000000000004?un=-.0735831692725717:un=.019973331823355176:t[306]>1e-35?t[149]>1e-35?un=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?un=-.02442182361342386:un=.10334853004243093:un=-.030431948680167104:un=-956078595250818e-19;let Xn;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?Xn=-.040232505718244854:t[0]>3030.5000000000005?Xn=.0634109586813073:Xn=-.04043617034245621:Xn=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?Xn=-.007859096946435131:Xn=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?Xn=.05515771679628051:Xn=-.04214471312668263:Xn=-.09589322222261765:t[193]>1e-35?Xn=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?Xn=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?Xn=-.08152604001147906:t[11]>1e-35?Xn=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?Xn=.13100930780107503:t[10]>25.500000000000004?Xn=.05921074710011526:Xn=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?Xn=.0009447118243153454:Xn=-.09820565036865991:Xn=.057146909749745546:t[0]>2115.5000000000005?Xn=-.12331216726611678:Xn=.007281983677694285:t[2]>56.50000000000001?Xn=.012310154675612615:Xn=-.08873665774670461:t[6]>25.500000000000004?Xn=.134708740821879:t[9]>5.500000000000001?Xn=-.0805901581148979:t[224]>1e-35?Xn=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?Xn=.10842593386554122:t[2]>13.500000000000002?Xn=.06466798320378395:Xn=-.08578130788886655:Xn=-.03590892078300114:Xn=.0003499894043880708;let De;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?De=.10839808814624702:De=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?De=-.007478368069393829:De=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?De=.04035247751736232:t[0]>4255.500000000001?De=-.1310865624507367:t[0]>4004.5000000000005?De=.06647367311982634:De=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?De=-.011618902907510411:De=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?De=.09356028223727986:De=-.03811765057032162:De=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?De=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?De=.1146142460964847:t[1]>62.50000000000001?De=-.09679869865322362:t[9]>71.50000000000001?De=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?De=-.039046426387852974:De=.04558778688367152:De=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?De=.03261697816211156:t[15]>1e-35?De=.02586252542264368:t[2]>14.500000000000002?De=-.016420452667484604:De=-.1011799626006976:De=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?De=.010193588102560583:De=.11748729525930773:De=-.04468162226743652:De=-.028365274393617957:t[71]>1e-35?De=.05115139346588793:De=-.0001510425316936658;let X;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?X=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?X=.020637047900190317:X=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?X=-.04632587527094407:X=.08603684785510396:X=-.05101401015448496:X=.025466432054358498:X=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?X=.020385355430046367:X=.12032592051335252:X=-.012387370292173013:t[2]>23.500000000000004?X=-.12568545484492677:X=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?X=.043528764484784536:X=.14352071657196003:X=-.009332833816977268:X=.11186782227735846:X=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?X=-.05649104643152564:X=.03884200719305747:t[42]>1e-35?X=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?X=-.04103416502526736:X=.04881823954656287:t[4]>15.500000000000002?X=.009342724662897898:t[0]>3969.5000000000005?X=-.025637309961309498:X=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?X=-.08185697075265091:t[0]>2215.5000000000005?X=.030063975892297354:t[0]>807.5000000000001?X=-.03924325550733229:X=.0415330999189793:X=-.00024374664461674863;let ve;t[3]>7.500000000000001?ve=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ve=.025798416259686565:ve=.13251610353146012:ve=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ve=-.11098564237775424:ve=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ve=.15347826616466054:t[3]>4.500000000000001?ve=.10379320730958941:ve=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ve=.03159791088468647:ve=-.10612873364104258:ve=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ve=-.02335760775001469:ve=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ve=-.011164334474672973:ve=-.06594044410501655:t[207]>1e-35?ve=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ve=-.01725821503981916:ve=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ve=-.04226531631656534:ve=-.14409800530171432:ve=-.03245576341206398:t[8]>4214.500000000001?ve=.0895409165534886:t[247]>1e-35?ve=-.06506383629143335:t[118]>1e-35?ve=-.07214270121257443:t[8]>546.5000000000001?ve=-.004385020865473831:ve=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ve=.046278501133958524:ve=-.030835570926968044:t[0]>493.50000000000006?ve=-.12794504651610425:ve=.009415039807550776;let Te;t[304]>1e-35?Te=-.04717777269217453:t[76]>1e-35?Te=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?Te=-.09648224457374217:t[132]>1e-35?Te=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?Te=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?Te=.10838431695638147:t[230]>1e-35?Te=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?Te=.050071316251979:Te=-.006356941111525215:t[6]>8.500000000000002?Te=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?Te=.10217402850540398:Te=-.048840949025349197:Te=-.03668313197909846:t[7]>39.50000000000001?Te=-.0562642841496003:t[10]>2.5000000000000004?Te=.09749777369987417:Te=-.04848223121417616:t[0]>5453.500000000001?Te=.08316648226133942:Te=-.0261979698267618:t[212]>1e-35?Te=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?Te=.04837009746506856:Te=-.09184360565631328:Te=.0032411047845613606:t[0]>4733.500000000001?Te=.0977378556864798:Te=.010776545559325588:Te=-.012483310473120218:Te=-.049284121449103935:Te=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?Te=-.08380361910948711:Te=.07375088778585813:Te=-.1084864186071348:Te=.0007819503469605476;let Q;t[7]>17.500000000000004?t[115]>1e-35?Q=.08741852531696623:t[167]>1e-35?Q=.10078975495600809:Q=-.0018324767784017562:t[290]>1e-35?Q=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?Q=.1379733311640402:Q=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?Q=-.09360083033774169:Q=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?Q=-.015599362579530679:t[0]>4593.500000000001?Q=-.12029549262691491:Q=-.018917032256501397:Q=.04632831686576592:Q=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?Q=-.05894883236412263:Q=.05213944998315824:Q=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?Q=.07577412405680808:Q=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?Q=-.0277076900736147:t[1]>65.50000000000001?Q=-.023587471585763506:Q=.10184896592433082:Q=-.057699270527916825:Q=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?Q=.06566902102799584:t[10]>25.500000000000004?Q=-.07033633753181047:Q=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?Q=-.08108035861059537:Q=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?Q=-.12431182772561139:Q=.01886235886984271:Q=.0025579594894418116;let B;t[8]>2915.5000000000005?t[101]>1e-35?B=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?B=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?B=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?B=.0687641681341721:t[10]>102.50000000000001?B=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?B=-.06762578396473291:t[10]>65.50000000000001?B=-.05226727783610509:t[282]>1e-35?B=.09911438410640917:t[19]>1e-35?B=.06915156336429933:B=-.006565637886508241:B=-.08344300251849307:B=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?B=.19428463865406298:B=.016073883020956765:t[13]>1e-35?B=.06864077097923665:B=-.01388867527034731:t[0]>1847.5000000000002?B=.004655280608161356:t[1]>40.50000000000001?B=.031406054057765996:B=.12798062439212832:B=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?B=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?B=-.0706095614785733:B=.04227164041372561:B=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?B=-.07139533369873902:B=.008952586782921625:B=.06086212582180936:B=-.0816938490403437:B=-.051224901945956025:B=-.10525399124186095:B=.000270924147208224;let te;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?te=.029186512383291244:t[7]>1.5000000000000002?te=-.14984127276725573:t[1]>40.50000000000001?te=.032757060730648144:te=-.07675575422749602:t[6]>8.500000000000002?te=.10599766037117893:te=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?te=-.051394622947855385:te=.03237141302699347:te=.12526173027943244:te=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?te=-.07383912482657777:t[0]>5147.500000000001?te=.07008813937042091:t[10]>38.50000000000001?te=-.06779203808365307:te=-.013782769999524498:te=.0880038869117715:te=-.12846294176070952:t[281]>1e-35?te=-.06810806903850834:t[10]>227.50000000000003?te=-.08937977001661111:t[10]>130.50000000000003?te=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?te=.011036530162093841:te=-.11500797478569702:te=.03702229366129399:te=.07242026683784307:t[189]>1e-35?te=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?te=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?te=-.02608892716555304:te=.09609599320761308:t[9]>105.50000000000001?te=-.06848127135991534:te=.0023675721254089715:t[86]>1e-35?te=-.11049635625500497:te=-.004847764219432233;let Ae;t[125]>1e-35?t[0]>3969.5000000000005?Ae=-.09462233499115416:Ae=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?Ae=-.030700661288166148:Ae=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?Ae=.03149547314036763:Ae=-.08166208257451366:t[0]>5850.500000000001?Ae=-.10228136324773157:t[102]>1e-35?Ae=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?Ae=.01782894842128785:t[13]>1e-35?Ae=.002680190260979968:Ae=.1773965720476949:t[2]>72.50000000000001?Ae=.09090831938627947:t[1]>59.50000000000001?Ae=-.12297206702816128:t[0]>4977.500000000001?Ae=.09899015653118268:Ae=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?Ae=-.0675900954187773:Ae=.012336403425364092:Ae=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?Ae=-.02671721777458802:Ae=-.09242452991958029:t[284]>1e-35?Ae=-.08585691288582491:Ae=.013332890564324447:t[4]>14.500000000000002?Ae=-.005245022074799553:t[23]>1e-35?Ae=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?Ae=-.09289852307936758:t[116]>1e-35?Ae=-.09686573010015055:t[8]>804.5000000000001?Ae=.03812547148215318:Ae=.005162744968176633:t[9]>43.50000000000001?Ae=-.059246106396159376:Ae=.050370113808135275:Ae=.000794041852811028;let Re;t[3]>7.500000000000001?Re=.0004981426543104341:t[9]>114.50000000000001?Re=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?Re=-.019061766497948867:Re=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?Re=-.006044199577160493:Re=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?Re=.11486607015912494:t[9]>16.500000000000004?Re=-.08686820858087294:Re=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?Re=-.022230207980026437:Re=.1056683690528792:Re=-.05859530800943035:Re=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?Re=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?Re=-.05177544573528314:Re=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?Re=.15159657923771555:Re=-.0060542654587671055:t[9]>5.500000000000001?Re=-.042808028205051786:t[1]>48.50000000000001?Re=-.010449538258110742:Re=.10026907521968294:Re=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?Re=-.02272452389409874:Re=-.11202691218244319:t[5]>1809.5000000000002?Re=-.04460413584255906:Re=.08196329474205256:t[10]>69.50000000000001?Re=.10221481166238167:Re=.0004063052701699382:t[243]>1e-35?Re=-.07563941678849846:t[18]>1e-35?Re=.02563513231103432:Re=-.004740081147303786;let ft;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ft=.057446442918106:ft=-.04404018270156349:ft=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?ft=-.05930486238817954:t[1]>29.500000000000004?ft=.06955866121256543:t[8]>597.5000000000001?ft=-.06538593556505168:ft=.06212512595497445:ft=.00021102929959182257:t[9]>90.50000000000001?ft=.0958061289119631:t[102]>1e-35?ft=.07172059675638813:t[1]>47.50000000000001?ft=-.03879798603977766:t[297]>1e-35?ft=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?ft=.003805910996312012:ft=.09304295674749524:t[11]>1e-35?t[18]>1e-35?ft=.11252376801858695:t[288]>1e-35?ft=-.10293901912180432:ft=.014669268837893872:t[1]>42.50000000000001?ft=-.05988274123836837:t[145]>1e-35?ft=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?ft=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?ft=-.03366718308159971:ft=.11936550608549797:t[1]>31.500000000000004?ft=-.07454716789539667:ft=.027859650621164217:t[10]>10.500000000000002?ft=-.11806374092321247:ft=-.03506042229223101:ft=-.0007080765837654515:t[10]>6.500000000000001?ft=-.028077713664996503:t[2]>7.500000000000001?ft=.15803724124216814:ft=.0351381284833169:ft=-.07877953381054767;let St;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?St=.14144941521975005:St=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?St=.10514088112381886:t[7]>18.500000000000004?St=-.10370643555956745:St=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?St=-.0508129468802936:t[224]>1e-35?St=-.037816066368733595:t[10]>43.50000000000001?St=.07793408602607932:St=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?St=.036972453794202324:St=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?St=.09475302525132188:St=-.03580104945898193:St=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?St=-.1282448778804823:St=-.014395808269207212:St=-.008940927190750592:St=-.1459118815453748:t[0]>4897.500000000001?St=-.09733068457286576:t[1]>57.50000000000001?St=.06575271409540207:St=-.019556422817450115:St=-.10623959222984136:t[18]>1e-35?St=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?St=.008125645893104896:St=-.11084368630465868:St=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?St=-.05854904579626861:t[4]>5.500000000000001?St=.02985784951394175:St=-.03247600140149334:St=-.11152899295304973:St=-.00035424577714215764;let Jt;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?Jt=-.06563670567578264:Jt=.067656954313663:Jt=-.10388217548685377:t[8]>2302.5000000000005?Jt=.07190621943790435:t[4]>67.50000000000001?Jt=.060020507643618604:t[4]>38.50000000000001?Jt=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?Jt=-.06568134366461277:t[8]>1075.5000000000002?Jt=-.004768057709758692:Jt=.11785959165999467:Jt=-.05080221682879267:Jt=.14814206127494542:Jt=-.07241946332311736:t[253]>1e-35?Jt=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?Jt=-.02471195342450034:Jt=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?Jt=-.10741850739482771:Jt=.010051635824944:Jt=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?Jt=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?Jt=-.08992396138178163:Jt=.010944365997007212:Jt=.06221307021813793:Jt=.1286024087559141:t[127]>1e-35?Jt=.06568148624531012:t[10]>40.50000000000001?Jt=-.07567979134643352:t[5]>5647.500000000001?Jt=.07594672895572069:Jt=-.018158016446439187:t[6]>55.50000000000001?Jt=.009293422430111872:t[4]>45.50000000000001?Jt=-.017749818406964022:t[2]>46.50000000000001?Jt=.01714136511113982:Jt=-724762291423549e-19;let rr;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?rr=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?rr=.07084726276890757:rr=-.11232323677722932:rr=.04812773089510436:rr=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?rr=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?rr=.0879462816013881:rr=-.002966662093626573:t[306]>1e-35?rr=-.04588085188342676:rr=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?rr=-.006600332774461143:rr=.1272481351557754:rr=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?rr=.011884312066620044:rr=.11678751052403374:t[4]>8.500000000000002?rr=.03627129613273813:rr=-.12132783497902287:rr=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?rr=-.06830131718398992:t[0]>5147.500000000001?rr=.062360406249609306:t[4]>4.500000000000001?rr=-.013162203864592055:rr=-.07153029184927609:rr=.07628618062271557:rr=-.12085065687320373:t[190]>1e-35?rr=-.045816889524231186:t[137]>1e-35?rr=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?rr=.025895337822752502:rr=-.06503949350616421:t[10]>227.50000000000003?rr=-.09989456525790491:t[10]>130.50000000000003?rr=.08616651057030683:rr=.0001234981796706021;let Xt;t[8]>1014.5000000000001?t[9]>137.50000000000003?Xt=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Xt=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Xt=-.141732381961068:Xt=-.0317152307496497:Xt=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Xt=.12191801556691254:Xt=-.0003444689085397977:Xt=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Xt=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Xt=-.05676033995381961:Xt=.10933961076803381:t[4]>26.500000000000004?Xt=-.11667582544549814:t[8]>1765.5000000000002?Xt=.032174455312047705:Xt=-.0755016390126608:t[293]>1e-35?Xt=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Xt=.026571311956824436:t[15]>1e-35?Xt=.06175459479851121:Xt=-.018778084411148754:t[9]>40.50000000000001?Xt=-.09420232889965811:Xt=-.004578248021263184:t[2]>1.5000000000000002?Xt=.005453714644971445:Xt=-.03907138175699279:Xt=-.055296364182154736:t[23]>1e-35?Xt=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Xt=-.09358146510580179:Xt=.060524657996178094:Xt=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Xt=-.12698331085931538:Xt=.006059605604079918:t[2]>196.50000000000003?Xt=-.09451315810804783:Xt=.0011390147031687425;let It;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?It=.05517359070460923:It=-.04758751221404857:It=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?It=.1040436595565776:t[9]>21.500000000000004?It=.04032250517675179:t[107]>1e-35?It=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?It=.1192453009230486:t[1]>51.50000000000001?It=.0443376336292195:It=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?It=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?It=-.08999822408398037:It=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?It=-.061850439226075:It=.08849196353361093:It=.10536348167793089:t[92]>1e-35?It=.04894947712119185:t[9]>16.500000000000004?It=.05900227903883853:t[9]>5.500000000000001?It=-.11946594348916476:It=-.03652096348071964:t[1]>41.50000000000001?It=-.07411603110840567:It=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?It=.08493634342741495:t[11]>1e-35?It=-.10899097825564363:It=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?It=.08356655906359918:t[7]>25.500000000000004?It=-.09475076526194888:t[10]>5.500000000000001?It=-.01999406228763778:It=.06696212545889428:t[6]>20.500000000000004?It=.14713592661393468:It=.0459917279002218:It=.00027445928493734093;let Er;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Er=-.06904501553217077:Er=.05696231672035904:Er=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Er=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Er=-.011419256378538392:t[0]>3830.5000000000005?Er=.140315841503076:Er=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Er=-.04027822909411164:Er=.03176085103667189:Er=.06779515865838849:t[4]>15.500000000000002?Er=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Er=.06124039747298539:Er=-.04312732764434027:Er=.09161522761808062:Er=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Er=.11211681010488772:t[13]>1e-35?Er=.06725735814960367:Er=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Er=.11743605068905603:Er=-.011309033539148687:Er=-.07896094707523052:Er=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Er=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Er=.02836295848998302:Er=.12210680366745175:Er=-.058302317470509096:t[5]>4144.500000000001?Er=.06123341960495106:Er=-.03840046906926525:Er=-.05221474543453495:Er=.03988215485860711:Er=-.00033074684693083496;let fi=mzt(e+r+n+o+s+c+l+u+d+p+m+h+g+A+y+v+b+I+_+k+N+F+O+Y+z+V+U+H+ee+J+G+j+Z+ie+ne+re+fe+ye+Qe+we+Xe+Oe+ut+Rt+Et+At+de+qe+Ce+$e+ce+ue+He+Me+be+Ge+rt+ht+Ot+Zt+qt+Yr+Mr+fn+xe+Ve+mt+wt+ar+tr+Sr+fr+or+dr+sr+Fr+Jr+ln+xn+oi+Rn+ri+un+Xn+De+X+ve+Te+Q+B+te+Ae+Re+ft+St+Jt+rr+Xt+It+Er);return[1-fi,fi]}a(XJe,"multilineModelPredict");function mzt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}a(mzt,"sigmoid");var hzt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},ZJe={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function eXe(t,e,r,n=!0){let o=t.split(`
`);if(n&&(o=o.filter(l=>l.trim().length>0)),Math.abs(e)>o.length||e>=o.length)return!1;e<0&&(e=o.length+e);let s=o[e];return(hzt[r]??[]).some(l=>s.includes(l))}a(eXe,"hasComment");var AZ=class{static{a(this,"PromptFeatures")}constructor(e,r){let[n,o]=this.firstAndLast(e),s=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=o.length,this.lastLineRstripLength=o.trimEnd().length,this.lastLineStripLength=o.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=s[1].length,this.rstripLastLineStripLength=s[1].trim().length,this.secondToLastLineHasComment=eXe(e,-2,r),this.rstripSecondToLastLineHasComment=eXe(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,o=r[0],s=r[n-1];return s==""&&n>1&&(s=r[n-2]),[o,s]}},Gxe=class{static{a(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new AZ(e,n),this.suffixFeatures=new AZ(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(ZJe).length+1).fill(0);r[ZJe[this.language]??0]=1;let n=new Array(Object.keys(Nx).length+1).fill(0);n[Nx[this.prefixFeatures.lastChar]??0]=1;let o=new Array(Object.keys(Nx).length+1).fill(0);o[Nx[this.prefixFeatures.rstripLastChar]??0]=1;let s=new Array(Object.keys(Nx).length+1).fill(0);s[Nx[this.suffixFeatures.firstChar]??0]=1;let c=new Array(Object.keys(Nx).length+1).fill(0);return c[Nx[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,o,s,c)}};function gzt(t,e){return new Gxe(t.prefix,t.suffix,e)}a(gzt,"constructMultilineFeatures");function tXe(t,e){let r=gzt(t,e).constructFeatures();return XJe(r)[1]}a(tXe,"requestMultilineScore");f();f();f();f();async function*Mx(t,e){for await(let r of t)yield e(r)}a(Mx,"asyncIterableMap");async function*rXe(t,e){for await(let r of t)await e(r)&&(yield r)}a(rXe,"asyncIterableFilter");async function*D7(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}a(D7,"asyncIterableMapFilter");async function*nXe(...t){for(let e of t)yield*e}a(nXe,"asyncIterableConcat");f();async function ZR(t,e,r,n){let o=Kr.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments(n,o)}a(ZR,"createTelemetryWithExpWithId");function nc(t,{turn:e,conversation:r}={},n){return ZR(t,e?.telemetryId??"",r?.telemetryId??"",n)}a(nc,"createTelemetryWithExpWithTurn");function B7(t,e,r,n,o,s,c,l){let u=t.turns[t.turns.length-1].skills.map(m=>m.skillId).sort(),d={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:u.join(",")},p={promptTokenLen:n,messageCharLen:r};return o&&(d.suggestion=o),s&&(d.suggestionId=s),l.length>0&&(d.skillResolutionsJson=JSON.stringify(Azt(l))),c=c.extendedBy(d,p),c}a(B7,"extendUserMessageTelemetryData");function Azt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}a(Azt,"mapSkillResolutionsForTelemetry");function iXe(t,e,r,n,o,s,c){return n!=null&&(c=c.extendedBy({offTopic:n.toString()})),yZ(t,s,e,r,{uiKind:e,headerRequestId:o},{},c).properties.messageId}a(iXe,"createUserMessageTelemetryData");function oXe(t,e,r,n,o,s,c){let l=Czt(r);return yZ(t.ctx,s,e,r,{source:"model",turnIndex:(t.conversation.turns.length-1).toString(),headerRequestId:o,uiKind:e,codeBlockLanguages:JSON.stringify(l),mode:(t.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:t.turn.getResolvedModelId()??"unknown"},{messageCharLen:r.length,numCodeBlocks:l.length,numTokens:n},c).properties.messageId}a(oXe,"createModelMessageTelemetryData");function sXe(t,e,r,n,o,s,c){yZ(t,s,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:o,uiKind:r},{messageCharLen:n.length},c)}a(sXe,"createOffTopicMessageTelemetryData");function aXe(t,e,r,n,o,s,c,l,u){let d=yZ(t,l,r,n,{source:"suggestion",suggestion:s,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:c},{promptTokenLen:o,messageCharLen:n.length},u);return yzt(t,r,s,d.properties.messageId,d.properties.conversationId,c,u,l),d.properties.messageId}a(aXe,"createSuggestionMessageTelemetryData");var cXe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function lXe(t,e,r){let n=await nc(t.ctx,t),o=t.conversation.source==="inline"?"conversationInline":"conversationPanel";Mf(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:o},r,"index.codesearch",n)}a(lXe,"telemetryIndexCodesearch");function yZ(t,e,r,n,o,s,c){let l=c??Kr.createAndMarkAsIssued();if(!("messageId"in o)&&!("messageId"in l.properties)){let h=wr();o.messageId=h}e&&(o.languageId=e.detectedLanguageId,s.documentLength=e.getText().length,s.documentLineCount=e.lineCount);let u={messageText:n,...o},d=l.extendedBy(o,s),p=l.extendedBy(u),m=Au(r);return Pt(t,`${m}.message`,d),Pt(t,`${m}.messageText`,p,1),d}a(yZ,"telemetryMessage");function uXe(t,e,r,n){Mf(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}a(uXe,"createSuggestionShownTelemetryData");function yzt(t,e,r,n,o,s,c,l){Mf(t,l,{suggestion:r,messageId:n,conversationId:o,suggestionId:s,uiKind:e},{},"conversation.suggestionSelected",c)}a(yzt,"createSuggestionSelectedTelemetryData");function Mf(t,e,r,n,o,s){let c=s??Kr.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let l=c.extendedBy(r,n);return Pt(t,o,l),l}a(Mf,"telemetryUserAction");function O3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Pt(t,"engine.messages",n,1)}a(O3,"logEngineMessages");function Au(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":case"agentPanel":case"editsPanel":default:return"conversation"}}a(Au,"telemetryPrefixForUiKind");function Czt(t){let e=t.split(`
`),r=[],n;for(let o=0;o<e.length;o++){let s=e[o];if(n)new RegExp(`^\\s*${n.delimiter}\\s*$`).test(s)?(r.push({languageId:n.languageId,totalLines:n.totalLines}),n=void 0):n.totalLines++;else{let c=s.match(/^(\s*)(`{3,}|~{3,})([a-zA-Z0-9_+]*)/);c&&(n={delimiter:c[2],languageId:c[3],totalLines:0})}}return r}a(Czt,"getCodeBlocks");function dXe(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}a(dXe,"uiKindToIntent");function tw(t){return t==="inline"?"conversationInline":"conversationPanel"}a(tw,"conversationSourceToUiKind");function fXe(t,e,r,n,o){let s={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},c={totalTimeMs:n};mXe(t,"round",o.extendedBy(s,c))}a(fXe,"createAgentRoundTelemetryData");function pXe(t,e,r,n,o,s,c,l){let u={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:o.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:c,uiKind:"agentPanel"},d={totalTimeMs:s};mXe(t,"toolCall",l.extendedBy(u,d))}a(pXe,"createToolInvocationTelemetryData");function mXe(t,e,r){return Pt(t,`${Au("agentPanel")}.${e}`,r)}a(mXe,"logAgenticEvent");function vzt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}a(vzt,"truncateContentIfNeeded");function CZ(t,e,r,n,o,s,c){let l=`${Au(e)}.${c}`,u=s.extendedBy(r,n);Pt(t,l,u);let d={...r};o.currentFileContent!==void 0&&(d.completionTextJson=vzt(o.currentFileContent));let p=s.extendedBy(d,n);Pt(t,`${l}.restricted`,p,1)}a(CZ,"telemetryEditSurvivalTracking");f();f();function UA(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}a(UA,"toString");var tm=new dt("streamChoices"),Vxe=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new Jxe;this.tool_calls=new Kxe;this.function_call=new Yxe;this.copilot_references=[];this.yielded=!1}static{a(this,"APIJsonDataStreaming")}append(e){e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0&&this.tool_calls.update(e.delta.tool_calls),e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function xzt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}a(xzt,"splitChunk");var zxe=class{constructor(){this.arguments=[]}static{a(this,"StreamingToolCall")}update(e){e.id&&(this.id=e.id),e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},Kxe=class{constructor(){this.toolCalls=[]}static{a(this,"StreamingToolCalls")}update(e){e.forEach(r=>{let n=this.toolCalls.length>0?this.toolCalls[this.toolCalls.length-1]:void 0;(!n||r.id&&n.id!==r.id)&&(n=new zxe,this.toolCalls.push(n)),n.update(r)})}getToolCalls(){return this.toolCalls}},Yxe=class{constructor(){this.arguments=[]}static{a(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},Jxe=class{constructor(){this.current={}}static{a(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(o=>this.update_namespace(r,o))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],o=n.findIndex(s=>s.id===r.id);o>=0?n[o]=r:n.push(r)}for(e){return this.current[e]??[]}},rw=class t{constructor(e,r,n,o,s,c,l){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=o;this.telemetryData=s;this.dropCompletionReasons=c;this.cancellationToken=l;this.requestId=ek(this.response);this.stats=new Xxe;this.solutions={}}static{a(this,"SSEProcessor")}static create(e,r,n,o,s,c){let l=n.body();if(l===null)throw new Error("No response body available");return typeof l.setEncoding=="function"?l.setEncoding("utf8"):l=l.pipeThrough(new TextDecoderStream),new t(e,r,n,l,o,s??[],c)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),tm.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),tm.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,o,s;e:for await(let c of this.body){if(this.maybeCancel("after awaiting body chunk"))return;tm.debug(this.ctx,"chunk",c.toString());let[l,u]=xzt(r+c.toString());r=u;for(let d of l){let p=d.slice(5).trim();if(p=="[DONE]"){yield*this.finishSolutions(n,o,s,e);return}n=null;let m;try{m=JSON.parse(p)}catch{tm.error(this.ctx,"Error parsing JSON stream data",d);continue}if(m.copilot_confirmation&&Ezt(m.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:m.copilot_confirmation}),m.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:m.copilot_references}),m.choices===void 0){!m.copilot_references&&!m.copilot_confirmation&&(m.error!==void 0?tm.error(this.ctx,"Error in response:",m.error.message):tm.error(this.ctx,"Unexpected response with no choices or error: "+p)),m.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:m.copilot_errors});continue}if(o===void 0&&m.model&&(o=m.model),s===void 0&&m.usage&&(s=m.usage),this.allSolutionsDone()){r="";break e}for(let h=0;h<m.choices?.length;h++){let g=m.choices[h];tm.debug(this.ctx,"choice",g),this.stats.add(g.index),g.index in this.solutions||(this.solutions[g.index]=new Vxe);let A=this.solutions[g.index];if(A==null)continue;A.append(g);let y=this.asSolutionDecision(),v=g.text?.indexOf(`
`)>-1||g.delta?.content?.indexOf(`
`)>-1;if(g.finish_reason||v){let I=A.text.join("");if(y=this.asSolutionDecision(await e(I,{text:I,index:g.index,requestId:this.requestId,annotations:A.copilot_annotations,copilotReferences:A.copilot_references,getAPIJsonData:a(()=>N7(A),"getAPIJsonData"),finished:!!g.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(g.finish_reason&&A.function_call.name!==void 0){n=g.finish_reason;continue}if(g.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let b=g.finish_reason??"client-trimmed";if(Pt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:b,engineName:o??"",engineChoiceSource:ST(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(g.finish_reason)?this.solutions[g.index]=null:A.yielded||(this.stats.markYielded(g.index),yield{solution:A,finishOffset:y.finishOffset,reason:g.finish_reason,requestId:this.requestId,index:g.index,model:o,usage:s},A.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[g.index]=null)}}}for(let[c,l]of Object.entries(this.solutions)){let u=Number(c);if(l!=null&&(Pt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:o??""})),this.stats.markYielded(u),yield{solution:l,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:u,model:o,usage:s},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let c=JSON.parse(r);c.error!==void 0&&tm.error(this.ctx,`Error in response: ${c.error.message}`,c.error)}catch{tm.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,o){for(let[s,c]of Object.entries(this.solutions)){let l=Number(s);if(c==null)continue;let u=c.text.join("");if(await o(u,{text:u,index:l,requestId:this.requestId,annotations:c.copilot_annotations,copilotReferences:c.copilot_references,getAPIJsonData:a(()=>N7(c),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!c.yielded&&(this.stats.markYielded(l),Pt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:c,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:l,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(tm.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function vZ(t,e,r){let n=e.solution.text.join(""),o=!1;e.finishOffset!==void 0&&(tm.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),o=!0),tm.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),tm.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let s=N7(e.solution);return xZ(t,n,s,e.index,e.requestId,o,r)}a(vZ,"prepareSolutionForReturn");function N7(t){let e=t.text.join(""),r=bzt(t),n=Izt(t),o=t.copilot_annotations.current,s={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:o,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return s;let c=t.logprobs.reduce((p,m)=>p.concat(m),[]),l=t.top_logprobs.reduce((p,m)=>p.concat(m),[]),u=t.text_offset.reduce((p,m)=>p.concat(m),[]),d=t.tokens.reduce((p,m)=>p.concat(m),[]);return{...s,logprobs:{token_logprobs:c,top_logprobs:l,text_offset:u,tokens:d}}}a(N7,"convertToAPIJsonData");function Ezt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}a(Ezt,"isCopilotConfirmation");function hXe(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${UA(n)}. Input: '${t}'`)}}a(hXe,"parseCallArguments");function bzt(t){let e=[],r=t.tool_calls.getToolCalls();for(let n of r)if(n.name){let o=n.arguments.join("").trim(),s=hXe(o,"tool call",n.name);e.push({type:"function",function:{name:n.name,arguments:s},approxNumTokens:n.arguments.length+1,id:n.id})}return e}a(bzt,"extractToolCalls");function Izt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=hXe(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}a(Izt,"extractFunctionCall");var Xxe=class{constructor(){this.choices=new Map}static{a(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new Zxe,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},Zxe=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{a(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function EZ(t,e){return t!==null&&typeof t=="object"&&e in t}a(EZ,"hasKey");function Lf(t,e){return EZ(t,e)?t[e]:void 0}a(Lf,"getKey");var AXe=Ne(mi());var ic=new dt("fetchCompletions");function ek(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}a(ek,"getRequestId");function Q3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}a(Q3,"getProcessingTime");function yXe(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}a(yXe,"uiKindToIntent");var Mp=class{static{a(this,"OpenAIFetcher")}};function Tzt(t,e,r,n){return Gm(t,e,"proxy","v1/engines",r,n)}a(Tzt,"getProxyEngineUrl");function bZ(t,e,r,n){for(let[o,s]of Object.entries(t)){if(r.includes(o))continue;let c=s;if(o==="extra"&&n){let l={...c};for(let u of n)delete l[u];c=l}e.properties[`request.option.${o}`]=JSON.stringify(c)??"undefined"}}a(bZ,"sanitizeRequestOptionTelemetry");async function gXe(t,e,r,n,o,s,c,l,u,d,p){let m=t.get(Wo),h=Tzt(t,c,r,n),g=u.extendedBy({endpoint:n,engineName:r,uiKind:l},$D(e));bZ(s,g,["prompt","suffix"],["context"]),g.properties.headerRequestId=o,Pt(t,"request.sent",g);let A=Fa(),y=yXe(l);return Sx(t,h,c.token,y,o,s,d,p).then(v=>{let b=ek(v);g.extendWithRequestId(b);let I=Fa()-A;return g.measurements.totalTimeMs=I,ic.info(t,`Request ${o} at <${h}> finished with ${v.status} status after ${I}ms`),g.properties.status=String(v.status),ic.debug(t,"request.response properties",g.properties),ic.debug(t,"request.response measurements",g.measurements),ic.debug(t,"prompt:",e),Pt(t,"request.response",g),v}).catch(v=>{if(kd(v))throw Pt(t,"request.cancel",g),v;m.setWarning(Lf(v,"message")??"");let b=g.extendedBy({error:"Network exception"});Pt(t,"request.shownWarning",b),g.properties.message=String(Lf(v,"name")??""),g.properties.code=String(Lf(v,"code")??""),g.properties.errno=String(Lf(v,"errno")??""),g.properties.type=String(Lf(v,"type")??"");let I=Fa()-A;throw g.measurements.totalTimeMs=I,ic.info(t,`Request ${o} at <${h}> rejected with ${String(v)} after ${I}ms`),ic.debug(t,"request.error properties",g.properties),ic.debug(t,"request.error measurements",g.measurements),Pt(t,"request.error",g),v}).finally(()=>{z9e(t,e,g)})}a(gXe,"fetchWithInstrumentation");async function wzt(t,e,r,n,o,s,c,l,u,d){let p=u.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:l});bZ(s,p,["messages"]),p.properties.headerRequestId=o,Pt(t,"request.sent",p);let m=Fa(),h=yXe(l),g=gh(t);q1()&&(g=await VB(t,g));try{let A=await Sx(t,n,c.token,h,o,s,d,g),y=ek(A);p.extendWithRequestId(y);let v=Fa()-m;return p.measurements.totalTimeMs=v,ic.info(t,`Request ${o} at <${n}> finished with ${A.status} status after ${v}ms`),ic.debug(t,"request.response properties",p.properties),ic.debug(t,"request.response measurements",p.measurements),ic.debug(t,"messages:",JSON.stringify(e)),Pt(t,"request.response",p),A}catch(A){if(kd(A))throw Pt(t,"request.cancel",p),A;let y=p.extendedBy({error:"Network exception"});Pt(t,"request.shownWarning",y),p.properties.message=String(Lf(A,"name")??""),p.properties.code=String(Lf(A,"code")??""),p.properties.errno=String(Lf(A,"errno")??""),p.properties.type=String(Lf(A,"type")??"");let v=Fa()-m;throw p.measurements.totalTimeMs=v,ic.info(t,`Request ${o} at <${n}> rejected with ${String(A)} after ${v}ms`),ic.debug(t,"request.error properties",p.properties),ic.debug(t,"request.error measurements",p.measurements),Pt(t,"request.error",p),A}finally{O3(t,e,p)}}a(wzt,"fetchChatWithInstrumentation");function eEe(t){return rXe(t,e=>e.completionText.trim().length>0)}a(eEe,"postProcessChoices");var _zt="github.copilot.completions.quotaExceeded",M7=class extends Mp{static{a(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,o,s){if(this.#e)return{type:"canceled",reason:this.#e};let c=e.get(Wo),l="completions",u=await e.get(nr).getToken(),d=await this.fetchWithParameters(e,l,r,u,n,s);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(s?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(A){ic.exception(e,A,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(l,e,r);return this.handleError(e,c,g,d,u)}let m=rw.create(e,r.count,d,n,[],s).processSSE(o),h=Mx(m,g=>vZ(e,g,n));return{type:"success",choices:eEe(h),getProcessingTime:a(()=>Q3(d),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,o,s,c,l,u={},d){if(this.#e)return{type:"canceled",reason:this.#e};let p="https://copilot-proxy.githubusercontent.com/chat/completions",m={messages:r,model:l.id,stream:!0,...u},h=n.extendedBy({endpoint:p,model:l.name}),g=e.get(Wo),A=await e.get(nr).getToken(),y=await wzt(e,r,l.id,p,s,m,A,o,h,d);if(d?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){ic.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=Kr.createAndMarkAsIssued({endpoint:p,engineName:l.name,uiKind:o,headerRequestId:s});return this.handleError(e,g,_,y,A)}let b=rw.create(e,1,y,h,[],AXe.CancellationToken.None).processSSE(),I=Mx(b,_=>vZ(e,_,n));return{type:"success",choices:eEe(I),getProcessingTime:a(()=>Q3(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,o,s){if(this.#e)return{type:"canceled",reason:this.#e};let c=e.get(Wo),l="speculation",u=await e.get(nr).getToken(),d={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:wr(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},p=await this.fetchSpeculationWithParameters(e,l,d,u,n,s);if(p==="not-sent")return{type:"canceled",reason:"before fetch request"};if(s?.isCancellationRequested){let A=p.body();try{A&&"destroy"in A&&typeof A.destroy=="function"?A.destroy():A instanceof ReadableStream&&A.cancel()}catch(y){ic.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(p.status!==200){let A=this.createTelemetryData(l,e,d);return this.handleError(e,c,A,p,u)}let h=rw.create(e,1,p,n,[],s).processSSE(o),g=Mx(h,A=>vZ(e,A,n));return{type:"success",choices:eEe(g),getProcessingTime:a(()=>Q3(p),"getProcessingTime")}}createTelemetryData(e,r,n){return Kr.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,o,s,c){let l={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await YC(0),c?.isCancellationRequested?"not-sent":await gXe(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,o,n.uiKind,s,c,n.headers)}async fetchWithParameters(e,r,n,o,s,c){let l=e.get(Lt).disableLogProb(s),u={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:TZ(e),temperature:U3(e,n.count),top_p:IZ(e),n:n.count,stop:CXe(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!l)&&(u.logprobs=2);let d=_x(n.repoInfo);return d!==void 0&&(u.nwo=d),n.postOptions&&Object.assign(u,n.postOptions),n.prompt.context&&(u.extra.context=n.prompt.context),await YC(0),c?.isCancellationRequested?"not-sent":await gXe(e,n.prompt,n.engineModelId,r,n.ourRequestId,u,o,n.uiKind,s,c,n.headers)}async handleError(e,r,n,o,s){let c=await o.text();if(o.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:_zt,title:"Learn More"});let u=lc(e,d=>{this.#e=void 0,(d.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),u.dispose())});return{type:"failed",reason:this.#e}}if(o.status===466)return r.setError(c),ic.info(e,c),{type:"failed",reason:`client not supported: ${c}`};if(o.clientError&&!o.headers.get("x-github-request-id")){let l=`Last response was a ${o.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;ic.error(e,l),r.setWarning(l),n.properties.error=`Response status was ${o.status} with no x-github-request-id header`}else o.clientError?(ic.warn(e,`Response status was ${o.status}:`,c),r.setWarning(`Last response was a ${o.status} error: ${c}`),n.properties.error=`Response status was ${o.status}: ${c}`):(r.setWarning(`Last response was a ${o.status} error`),n.properties.error=`Response status was ${o.status}`);return n.properties.status=String(o.status),Pt(e,"request.shownWarning",n),o.status===401||o.status===403?(e.get(nr).resetToken(o.status),{type:"failed",reason:`token expired or invalid: ${o.status}`}):o.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",ic.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):o.status===499?(ic.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(ic.error(e,"Unhandled status from server:",o.status,c),{type:"failed",reason:`unhandled status from server: ${o.status} ${c}`})}};function xZ(t,e,r,n,o,s,c){return V9e(t,e,r,o,n),{completionText:e,meanLogProb:Szt(t,r),meanAlternativeLogProb:Rzt(t,r),choiceIndex:n,requestId:o,blockFinished:s,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:c,copilotAnnotations:r.copilot_annotations,clientCompletionId:wr(),finishReason:r.finish_reason}}a(xZ,"convertToAPIChoice");function Szt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,o=50;for(let s=0;s<e.logprobs.token_logprobs.length-1&&o>0;s++,o--)r+=e.logprobs.token_logprobs[s],n+=1;return n>0?r/n:void 0}catch(r){pn.exception(t,r,"Error calculating mean prob")}}a(Szt,"calculateMeanLogProb");function Rzt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,o=50;for(let s=0;s<e.logprobs.token_logprobs.length-1&&o>0;s++,o--){let c={...e.logprobs.top_logprobs[s]};delete c[e.logprobs.tokens[s]],r+=Math.max(...Object.values(c)),n+=1}return n>0?r/n:void 0}catch(r){pn.exception(t,r,"Error calculating mean prob")}}a(Rzt,"calculateMeanAlternativeLogProb");function U3(t,e){return eA(t)||e<=1?0:e<10?.2:e<20?.4:.8}a(U3,"getTemperatureForSamples");var kzt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function CXe(t,e){return kzt[e??""]??[`


`,"\n```"]}a(CXe,"getStops");function IZ(t){return 1}a(IZ,"getTopP");function TZ(t){return QO}a(TZ,"getMaxSolutionTokens");var tEe=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{a(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},wZ=class{constructor(e,r,n,o,s,c){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=o;this.trimmerLookahead=s;this.cacheFunction=c;this.lineLimit=3;this.completions=new Map}static{a(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,o=this.getCompletion(n,e);if(o.isFirstCompletion&&this.initialSingleLine&&o.firstNewlineOffset>=0){let s={yieldSolution:!0,continueStreaming:!0,finishOffset:o.firstNewlineOffset};return o.trimAt(s.finishOffset),r.finished&&await this.trimAll(r,o),s}return r.finished?await this.trimAll(r,o):await this.trimOnce(r,o)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new tEe(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,o;do n=await this.trim(r),r.isFirstCompletion?(o=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return o!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:o}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new GY(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let o=r.trimAt(n??r.effectiveText.length);if(o.effectiveText.trim()==="")return;let s=xZ(this.ctx,o.effectiveText.trimEnd(),e.getAPIJsonData(),o.index,e.requestId,n!==void 0,e.telemetryData);s.copilotAnnotations=this.adjustedAnnotations(s,r,o),s.generatedChoiceIndex=o.trimCount,this.cacheFunction(o.addedToPrefix,s)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let o=n.addedToPrefix.length,c=o+e.completionText.length>=r.text.length,l={};for(let[u,d]of Object.entries(e.copilotAnnotations)){let p=d.filter(m=>m.start_offset-o<e.completionText.length&&m.stop_offset-o>0).map(m=>{let h={...m};return h.start_offset-=o,h.stop_offset-=o,c||(h.stop_offset=Math.min(h.stop_offset,e.completionText.length)),h});p.length>0&&(l[u]=p)}return Object.keys(l).length>0?l:void 0}};f();f();var Fh=class{constructor(){this.cache=new vr(100)}static{a(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var _Z=new dt("getCompletions");function SZ(t,e,r){t.get(Fh).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=q3(r.resultType),Pt(t,`${e}.shown`,r.telemetry)}a(SZ,"telemetryShown");function vXe(t,e,r){let n=e+".accepted";Pt(t,n,r)}a(vXe,"telemetryAccepted");function xXe(t,e,r){let n=e+".rejected";Pt(t,n,r)}a(xXe,"telemetryRejected");function nw(t,e={}){return{...e,telemetryBlob:t}}a(nw,"mkCanceledResultTelemetry");function Ac(t,e){let r={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};t.properties.sku!==void 0&&(r.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(r.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(r.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(r.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(r.clientCompletionId=t.properties.clientCompletionId);let n=t.filtersAndExp.exp.assignmentContext;if(e){let s=e.get(tA).inlineCompletionsUnificationState.expAssignments.filter(c=>!n.includes(c));n=[n,...s].filter(Boolean).join(";")}return r["abexp.assignmentcontext"]=n,r}a(Ac,"mkBasicResultTelemetry");function EXe(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=Fa()-e.telemetryBlob.issuedTime,n=q3(e.resultType),o=JSON.stringify(e.performanceMetrics),s={...e.telemetryData,reason:n,performanceMetrics:o},{foundOffset:c}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([u,d])=>`
${d.toFixed(2)}	${u}`).join("")??"";return _Z.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${c}${l}`),che(t,"ghostText.produced",s,{timeToProduceMs:r,foundOffset:c}),e.value}if(_Z.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Pt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}che(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}a(EXe,"handleGhostTextResultTelemetry");function q3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}a(q3,"resultTypeToString");f();f();f();var Pzt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},Dzt="ms-vscode.cpptools",Bzt="CppCompletionContextProvider";function bXe(t,e,r,n){(e.includes(Bzt)||e.length===1&&e[0]==="*")&&TXe(t,r,n)}a(bXe,"fillInCppVSActiveExperiments");function IXe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(Dzt))&&TXe(t,r,n)}a(IXe,"fillInCppVSCodeActiveExperiments");function TXe(t,e,r){try{let n=Pzt,o=t.get(Lt).cppContextProviderParams(r);if(o)try{n=JSON.parse(o)}catch(s){pn.error(t,"Failed to parse cppContextProviderParams",s)}for(let[s,c]of Object.entries(n))e.set(s,c)}catch(n){pn.exception(t,n,"fillInCppActiveExperiments")}}a(TXe,"addActiveExperiments");f();function RZ(t,e,r){try{let n=t.get(Lt).csharpContextProviderParams(r);if(n){let o=JSON.parse(n);for(let[s,c]of Object.entries(o))e.set(s,c)}}catch(n){return pn.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}a(RZ,"fillInCSharpActiveExperiments");f();var iw="fallbackContextProvider",kZ={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function wXe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(iw))&&Nzt(t,r,n)}a(wXe,"fillInMultiLanguageActiveExperiments");function Nzt(t,e,r){try{let n=Mzt(t,r);for(let[o,s]of Object.entries(n))e.set(o,s)}catch(n){pn.exception(t,n,"fillInMultiLanguageActiveExperiments")}}a(Nzt,"addActiveExperiments");function Mzt(t,e){let r=kZ,n=t.get(Lt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(o){pn.error(t,"Failed to parse multiLanguageContextProviderParams",o)}return r}a(Mzt,"getMultiLanguageContextProviderParamsFromExp");function _Xe(t){let e={...kZ};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}a(_Xe,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var Lzt="typescript-ai-context-provider";function SXe(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(Lzt)))return!1;try{let o=t.get(Lt).tsContextProviderParams(n);if(o){let s=JSON.parse(o);for(let[c,l]of Object.entries(s))r.set(c,l)}}catch(o){return pn.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",o),!1}return!0}a(SXe,"fillInTsActiveExperiments");f();var RXe=E.Object({importance:E.Optional(E.Integer({minimum:0,maximum:100})),id:E.Optional(E.String()),origin:E.Optional(E.Union([E.Literal("request"),E.Literal("update")]))}),kXe=E.Intersect([E.Object({name:E.String(),value:E.String()}),RXe]),PXe=E.Intersect([E.Object({uri:E.String(),value:E.String(),additionalUris:E.Optional(E.Array(E.String()))}),RXe]),Fzt=[kXe,PXe],Ozt=E.Union(Fzt),Qzt=new Map([["Trait",na.Compile(kXe)],["CodeSnippet",na.Compile(PXe)]]),Uzt=a(t=>t,"ensureTypesAreEqual");Uzt(!0);var qzt=E.Object({contextItems:E.Array(Ozt)}),Hzt=E.Object({selector:E.Array(E.Union([E.String(),E.Object({language:E.Optional(E.String()),scheme:E.Optional(E.String()),pattern:E.Optional(E.String())})]))}),rEe=E.Object({id:E.String()}),Wzt=E.Intersect([rEe,Hzt]),$zt=E.Intersect([rEe,qzt]),DXe=E.Object({providers:E.Array(Wzt)}),BXe=E.Object({providers:E.Array(rEe)}),nEe=E.Object({providers:E.Array($zt),updating:E.Optional(E.Array(E.String()))}),PZ=E.Intersect([cJe,E.Object({contextItems:E.Optional(nEe)})]);function DZ(t,e){return t.map(r=>{let n=r.data.filter(o=>o.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}a(DZ,"filterContextItemsByType");function NXe(t){let e=[],r=0;return t.forEach(n=>{let o=!1;for(let[s,c]of Qzt.entries())if(c.Check(n)){e.push({...n,type:s}),o=!0;break}o||r++}),[e,r]}a(NXe,"filterSupportedContextItems");function jzt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}a(jzt,"validateContextItemId");function MXe(t,e){let r=new Set,n=[];for(let o of e){let s=o.id??wr();if(!jzt(s)){let c=wr();pn.error(t,`Invalid context item ID ${s}, replacing with ${c}`),s=c}if(r.has(s)){let c=wr();pn.error(t,`Duplicate context item ID ${s}, replacing with ${c}`),s=c}r.add(s),n.push({...o,id:s})}return n}a(MXe,"addOrValidateContextItemsIDs");f();var ml=class{constructor(e=()=>new iEe){this.createStatistics=e;this.statistics=new vr(25)}static{a(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let o=r[n];if(o!==e)return this.statistics.peek(o)}}},iEe=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{a(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let o=this._lastResolution.get(r)??"none";if(o==="none"||o==="error"){this._statistics.set(r,{usage:"none",resolution:o});continue}let s=[];for(let[d,p]of n){let m={id:d.id,type:d.type};if(d.origin&&(m.origin=d.origin),p==="content_excluded"){s.push({...m,usage:"none_content_excluded"});continue}let h=e.find(g=>g.source===d);h===void 0?s.push({...m,usage:"error"}):s.push({...m,usage:h.expectedTokens>0&&h.expectedTokens===h.actualTokens?"full":h.actualTokens>0?"partial":"none",expectedTokens:h.expectedTokens,actualTokens:h.actualTokens})}let l=s.reduce((d,p)=>p.usage==="full"?d+1:p.usage==="partial"?d+.5:d,0)/n.length,u=l===1?"full":l===0?"none":"partial";this._statistics.set(r,{resolution:o,usage:u,usageDetails:s})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function BZ(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}a(BZ,"componentStatisticsToPromptMatcher");var LXe=Ne(mi());var Gc=class{static{a(this,"ContextProviderRegistry")}},rv=class{static{a(this,"DefaultContextProviders")}},W3=class extends rv{constructor(){super();this.ids=[]}static{a(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},oEe=class extends Gc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{a(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,o,s,c,l){if(c?.isCancellationRequested)return pn.debug(this.ctx,"Resolving context providers cancelled"),[];let u=new Map;RZ(this.ctx,u,s);let d=[];if(this._providers.length===0)return d;let p=await this.matchProviders(o,s),m=p.filter(k=>k[1]>0);if(p.filter(k=>k[1]<=0).forEach(([k,N])=>{let F={providerId:k.id,matchScore:N,resolution:"none",resolutionTimeMs:0,data:[]};d.push(F)}),m.length===0)return d;if(c?.isCancellationRequested)return pn.debug(this.ctx,"Resolving context providers cancelled"),[];IXe(this.ctx,m.map(k=>k[0].id),u,s),wXe(this.ctx,m.map(k=>k[0].id),u,s),SXe(this.ctx,m.map(k=>k[0].id),u,s);let g=new LXe.CancellationTokenSource;if(c){let k=c.onCancellationRequested(N=>{g.cancel(),k.dispose()})}let A=t6(this.ctx)&&!Hj(this.ctx)?0:Gzt(this.ctx,s),y=A>0?Date.now()+A:Number.MAX_SAFE_INTEGER,v;A>0&&(v=setTimeout(()=>{g.cancel(),g.dispose()},A));let b=new Map,I={completionId:r,opportunityId:n,documentContext:o,activeExperiments:u,timeBudget:A,timeoutEnd:y,data:l};for(let[k]of m){let N=this.ctx.get(ml).getPreviousStatisticsForCompletion(r)?.get(k.id);N&&(I.previousUsageStatistics=N);let F=k.resolver.resolve(I,g.token);b.set(k.id,F)}let _=await aVe(b,g.token);v&&clearTimeout(v);for(let[k,N]of m){let F=_.get(k.id);if(F){if(F.status==="error")KY(F.reason)||pn.error(this.ctx,`Error resolving context from ${k.id}: `,F.reason),d.push({providerId:k.id,matchScore:N,resolution:F.status,resolutionTimeMs:F.resolutionTime,data:[]});else{let O=[...F.value??[]];if((F.status==="none"||F.status==="partial")&&(pn.info(this.ctx,`Context provider ${k.id} exceeded time budget of ${A}ms`),k.resolver.resolveOnTimeout))try{let H=k.resolver.resolveOnTimeout(I);Hve(H)?O.push(...H):H&&O.push(H),O.length>0&&(F.status="partial")}catch(H){pn.error(this.ctx,`Error in fallback logic for context provider ${k.id}: `,H)}let[Y,z]=NXe(O);z&&pn.error(this.ctx,`Dropped ${z} context items from ${k.id} due to invalid schema`);let V=MXe(this.ctx,Y),U={providerId:k.id,matchScore:N,resolution:F.status,resolutionTimeMs:F.resolutionTime,data:V};d.push(U)}this.ctx.get(ml).getStatisticsForCompletion(r).setLastResolution(k.id,F.status)}else pn.error(this.ctx,`Context provider ${k.id} not found in results`)}return d.sort((k,N)=>N.matchScore-k.matchScore)}async matchProviders(r,n){let o=FZ(this.ctx,n),s=o.length===1&&o[0]==="*";return await Promise.all(this._providers.map(async l=>{if(!s&&!o.includes(l.id))return[l,0];let u=await this.match(this.ctx,l.selector,r);return[l,u]}))}},sEe=class extends Gc{constructor(r){super();this.delegate=r;this._cachedContextItems=new vr(5)}static{a(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,o,s,c,l){let u=this._cachedContextItems.get(r);if(r&&u&&u.length>0)return u;let d=await this.delegate.resolveAllProviders(r,n,o,s,c,l);return d.length>0&&r&&this._cachedContextItems.set(r,d),d}};function NZ(t,e){return new sEe(new oEe(t,e))}a(NZ,"getContextProviderRegistry");function MZ(t,e,r){let n=t.get(ml).getStatisticsForCompletion(e);return r.map(s=>{let{providerId:c,resolution:l,resolutionTimeMs:u,matchScore:d,data:p}=s,m=n.get(c),h=m?.usage??"none";(d<=0||l==="none"||l==="error")&&(h="none");let g={providerId:c,resolution:l,resolutionTimeMs:u,usage:h,usageDetails:m?.usageDetails,matched:d>0,numResolvedItems:p.length},A=m?.usageDetails!==void 0?m?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,y=m?.usageDetails!==void 0?m?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return A!==void 0&&(g.numUsedItems=A),y!==void 0&&(g.numPartiallyUsedItems=y),g})}a(MZ,"telemetrizeContextItems");function LZ(t){return t.matchScore>0&&t.resolution!=="error"}a(LZ,"matchContextItems");function FZ(t,e){let r=aEe(t,e),n=Ki(t,$t.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let o=t.get(rv).getIds();return Array.from(new Set([...o,...r,...n]))}a(FZ,"getActiveContextProviders");function aEe(t,e){return t6(t)?["*"]:t.get(Lt).contextProviders(e)}a(aEe,"getExpContextProviders");function $3(t,e){return FZ(t,e).length>0}a($3,"useContextProviderAPI");function Gzt(t,e){let r=Ki(t,$t.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Lt).contextProviderTimeBudget(e)}a(Gzt,"getContextProviderTimeBudget");var Lp=class{constructor(e){this.ctx=e;this.scheduledResolutions=new vr(25)}static{a(this,"ContextProviderBridge")}schedule(e,r,n,o,s,c){let l=this.ctx.get(Gc),{textDocument:u,originalPosition:d,originalOffset:p,originalVersion:m,editsWithPosition:h}=e,g=l.resolveAllProviders(r,n,{uri:u.uri,languageId:u.detectedLanguageId,version:m,offset:p,position:d,proposedEdits:h.length>0?h:void 0},o,s,c?.data);this.scheduledResolutions.set(r,g)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};f();f();var OZ=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{a(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let o=await kT(this.languageId,e);try{let c=o.rootNode.descendantForIndex(r);for(;c;){let l=this.nodeMatch[c.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(c.type))break;let u=this.nodeTypesWithBlockOrStmtChild.get(c.type);if((u==""?c.namedChildren[0]:c.childForFieldName(u))?.type==l)break}c=c.parent}return c?n(c):void 0}finally{o.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,o=>{let s=o.children.reverse().find(c=>c.type==this.nodeMatch[o.type]);if(s){if(this.languageId=="python"&&s.parent){let c=s.parent.type==":"?s.parent.parent:s.parent,l=c?.nextSibling;for(;l&&l.type=="comment";){let u=l.startPosition.row==s.endPosition.row&&l.startPosition.column>=s.endPosition.column,d=l.startPosition.row>c.endPosition.row&&l.startPosition.column>c.startPosition.column;if(u||d)s=l,l=l.nextSibling;else break}}if(!(s.endIndex>=s.tree.rootNode.endIndex-1&&(s.hasError||s.parent.hasError)))return n(s)}})}async isBlockBodyFinished(e,r,n){let o=(e+r).trimEnd(),s=await this.getNextBlockAtPosition(o,n,c=>c.endIndex);if(s!==void 0&&s<o.length){let c=s-e.length;return c>0?c:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,o=>o.startIndex)}},QZ=class extends OZ{constructor(r,n,o,s,c){super(r,s,c);this.blockEmptyMatch=n;this.lineMatch=o}static{a(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let o=await this.getNextBlockAtPosition(r,n,s=>{s.startIndex<n&&(n=s.startIndex);let c=r.substring(n,s.endIndex).trim();return c==""||c.replace(/\s/g,"")==this.blockEmptyMatch});return o===void 0||o}async isEmptyBlockStart(r,n){return n=OXe(r,n),this.isBlockStart(Vzt(r,n))&&this.isBlockBodyEmpty(r,n)}};function Vzt(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}a(Vzt,"getLineAtOffset");function OXe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}a(OXe,"rewindToNearestNonWs");function FXe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,o=e.substring(n,r);if(/^\s*$/.test(o))return o}a(FXe,"indent");function zzt(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=FXe(t,r),o=FXe(e,r);return n!==void 0&&o!==void 0&&n.startsWith(o)}a(zzt,"outdented");var nv=class extends OZ{constructor(r,n,o,s,c,l,u){super(r,n,o);this.startKeywords=s;this.blockNodeType=c;this.emptyStatementType=l;this.curlyBraceLanguage=u}static{a(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let o=r.text.trim();return this.curlyBraceLanguage&&(o.startsWith("{")&&(o=o.slice(1)),o.endsWith("}")&&(o=o.slice(0,-1)),o=o.trim()),!!(o.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&mGe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let c=n;c<r.length&&r.charAt(c)!=`
`;c++)if(/\S/.test(r.charAt(c)))return!1;n=OXe(r,n);let[o,s]=await ive(this.languageId,r);try{let c=o.rootNode.descendantForIndex(n-1);if(c==null||this.curlyBraceLanguage&&c.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&c.parent&&c.parent.type=="object"&&c.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let m=c;for(;m.parent;){if(m.type=="function_signature"||m.type=="method_signature"){let h=c.nextSibling;return h&&m.hasError&&zzt(m,h,r)?!0:!m.children.find(A=>A.type==";")&&m.endIndex<=n}m=m.parent}}let l=null,u=null,d=null,p=c;for(;p!=null;){if(p.type==this.blockNodeType){u=p;break}if(this.nodeMatch[p.type]){d=p;break}if(p.type=="ERROR"){l=p;break}p=p.parent}if(u!=null){if(!u.parent||!this.nodeMatch[u.parent.type])return!1;if(this.languageId=="python"){let m=u.previousSibling;if(m!=null&&m.hasError&&(m.text.startsWith('"""')||m.text.startsWith("'''")))return!0}return this.isBlockEmpty(u,n)}if(l!=null){if(l.previousSibling?.type=="module"||l.previousSibling?.type=="internal_module"||l.previousSibling?.type=="def")return!0;if(this.languageId==="python"&&s>=14&&l.hasError&&(l.text.startsWith('"')||l.text.startsWith("'"))){let A=l.parent?.type;if(A==="function_definition"||A==="class_definition"||A==="module")return!0}let m=[...l.children].reverse(),h=m.find(A=>this.startKeywords.includes(A.type)),g=m.find(A=>A.type==this.blockNodeType);if(h){switch(this.languageId){case"python":{h.type=="try"&&c.type=="identifier"&&c.text.length>4&&(g=m.find(v=>v.hasError)?.children.find(v=>v.type=="block"));let A,y=0;for(let v of l.children){if(v.type==":"&&y==0){A=v;break}v.type=="("&&(y+=1),v.type==")"&&(y-=1)}if(A&&h.endIndex<=A.startIndex&&A.nextSibling){if(h.type=="def"){let v=A.nextSibling;if(v.type=='"'||v.type=="'"||v.type=="ERROR"&&(v.text=='"""'||v.text=="'''"))return!0}return!1}break}case"javascript":{if(h.type==="class")if(s<=13){if(m.find(b=>b.type==="formal_parameters"))return!0}else{let v=l.children;for(let b=0;b<v.length;b++)if(v[b].type==="formal_parameters")return b+1===v.length||v[b+1]?.type==="{"&&b+2===v.length}let A=m.find(v=>v.type=="{");if(A&&A.startIndex>h.endIndex&&A.nextSibling!=null||m.find(v=>v.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}case"typescript":{let A=m.find(v=>v.type=="{");if(A&&A.startIndex>h.endIndex&&A.nextSibling!=null||m.find(v=>v.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}}return g&&g.startIndex>h.endIndex?this.isBlockEmpty(g,n):!0}}if(d!=null){let m=this.nodeMatch[d.type],h=d.children.slice().reverse().find(g=>g.type==m);if(h)return this.isBlockEmpty(h,n);if(this.nodeTypesWithBlockOrStmtChild.has(d.type)){let g=this.nodeTypesWithBlockOrStmtChild.get(d.type),A=g==""?d.children[0]:d.childForFieldName(g);if(A&&A.type!=this.blockNodeType&&A.type!=this.emptyStatementType)return!1}return!0}return!1}finally{o.delete()}}},Kzt={python:new nv("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new nv("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_expression:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new nv("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_expression:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new nv("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_expression:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new QZ("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new QZ("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),"c-sharp":new nv("csharp",{},new Map([]),[],"block",null,!0),java:new nv("java",{},new Map([]),[],"block",null,!0),php:new nv("php",{},new Map([]),[],"block",null,!0),cpp:new nv("cpp",{},new Map([]),[],"block",null,!0)};function cEe(t){if(!G0(t))throw new Error(`Language ${t} is not supported`);return Kzt[$Y(t)]}a(cEe,"getBlockParser");async function QXe(t,e,r){return G0(t)?cEe(t).isEmptyBlockStart(e,r):!1}a(QXe,"isEmptyBlockStart");async function UXe(t,e,r,n){if(G0(t))return cEe(t).isBlockBodyFinished(e,r,n)}a(UXe,"isBlockBodyFinished");async function qXe(t,e,r){if(G0(t))return cEe(t).getNodeStart(e,r)}a(qXe,"getNodeStart");var lZn=new dt("parseBlock");function L7(t,e,r){let n=e.getText(Is.range(Is.position(0,0),r)),o=e.offsetAt(r),s=e.detectedLanguageId;return c=>UXe(s,n,c,o)}a(L7,"parsingBlockFinished");function qZ(t,e){return QXe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}a(qZ,"isEmptyBlockStartUtil");async function HXe(t,e,r,n){let s=e.getText(Is.range(Is.position(0,0),r))+n,c=await qXe(e.detectedLanguageId,s,e.offsetAt(r));if(c)return e.positionAt(c)}a(HXe,"getNodeStartUtil");var Yzt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),Jzt=new RegExp(`^(${Yzt.join("|")})`);function Xzt(t){return Jzt.test(t.trimLeft().toLowerCase())}a(Xzt,"isContinuationLine");function UZ(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}a(UZ,"indentationOfLine");function HZ(t,e){let r=t.getText(),n=t.offsetAt(e);return lEe(r,n,t.detectedLanguageId)}a(HZ,"contextIndentation");function lEe(t,e,r){let n=t.slice(0,e).split(`
`),o=t.slice(e).split(`
`);function s(p,m,h){let g=m,A,y;for(;A===void 0&&g>=0&&g<p.length;)A=UZ(p[g]),y=g,g+=h;if(r==="python"&&h===-1){g++;let v=p[g].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(g--;g>=0&&!p[g].trim().startsWith('"""');)g--;if(g>=0)for(A=void 0,g--;A===void 0&&g>=0;)A=UZ(p[g]),y=g,g--}}return[A,y]}a(s,"seekNonBlank");let[c,l]=s(n,n.length-1,-1),u=(()=>{if(!(c===void 0||l===void 0))for(let p=l-1;p>=0;p--){let m=UZ(n[p]);if(m!==void 0&&m<c)return m}})(),[d]=s(o,1,1);return{prev:u,current:c??0,next:d}}a(lEe,"contextIndentationFromText");var Zzt=!1;function eKt(t,e,r){let n=t.split(`
`),o=r!==void 0,s=r?.split(`
`).pop(),c=0;if(o&&s?.trim()!=""&&n[0].trim()!==""&&c++,!o&&Zzt&&n[0].trim()===""&&c++,o||c++,n.length===c)return"continue";let l=Math.max(e.current,e.next??0);for(let u=c;u<n.length;u++){let d=n[u];u==0&&s!==void 0&&(d=s+d);let p=UZ(d);if(p!==void 0&&(p<l||p===l&&!Xzt(d)))return n.slice(0,u).join(`
`).length}return"continue"}a(eKt,"completionCutOrContinue");function WXe(t,e){return r=>{let n=eKt(r,t,e);return n==="continue"?void 0:n}}a(WXe,"indentationBlockFinished");f();f();f();f();f();f();var tKt={tokenizerName:"o200k_base"};function rKt(t){return{...tKt,...t}}a(rKt,"cursorContextOptions");function F7(t,e={}){let r=rKt(e),n=Xi(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let o=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(o=o.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(o=n.takeLastLinesTokens(o,r.maxTokenLength)),{context:o,lineCount:o.split(`
`).length,tokenLength:n.tokenLength(o),tokenizerName:r.tokenizerName}}a(F7,"getCursorContext");f();f();var nKt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function $Xe(t){let e=nKt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}a($Xe,"announceSnippet");var uEe=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{a(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var dEe=class{static{a(this,"Tokenizer")}constructor(e){this.stopsForLanguage=aKt.get(e.languageId)??sKt}tokenize(e){return new Set(iKt(e).filter(r=>!this.stopsForLanguage.has(r)))}},jXe=new uEe(20),j3=class{static{a(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new dEe(e)}get referenceTokens(){return Promise.resolve(this.createReferenceTokens())}createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,o)=>n.score>o.score?1:-1):r=="descending"?e.sort((n,o)=>n.score>o.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let o=e.source.split(`
`),s=this.id()+":"+e.source,c=jXe.get(s)??[],l=c.length==0,u=l?o.map(d=>this.tokenizer.tokenize(d),this.tokenizer):[];for(let[d,[p,m]]of this.getWindowsDelineations(o).entries()){if(l){let A=new Set;u.slice(p,m).forEach(y=>y.forEach(v=>A.add(v),A)),c.push(A)}let h=c[d],g=this.similarityScore(h,await this.referenceTokens);if(n.length&&p>0&&n[n.length-1].endLine>p){n[n.length-1].score<g&&(n[n.length-1].score=g,n[n.length-1].startLine=p,n[n.length-1].endLine=m);continue}n.push({score:g,startLine:p,endLine:m})}return l&&jXe.put(s,c),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),o=await this.retrieveAllSnippets(e,"descending");if(o.length===0)return[];let s=[];for(let c=0;c<o.length&&c<r;c++)if(o[c].score!==0){let l=n.slice(o[c].startLine,o[c].endLine).join(`
`);s.push({snippet:l,semantics:"snippet",provider:"similar-files",...o[c]})}return s}};function iKt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}a(iKt,"splitIntoWords");var oKt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),sKt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...oKt]),aKt=new Map([]);f();function WZ(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let o=0;o<n-t+1;o++)r.push([o,o+t]);return r}a(WZ,"getBasicWindowDelineations");var $Z=class t extends j3{static{a(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=a(e=>({to:a(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return WZ(this.windowLength,e)}_getCursorContextInfo(e){return F7(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return cKt(e,r)}};function cKt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}a(cKt,"computeScore");f();var jZ=class t extends j3{static{a(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=a(e=>({to:a(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return WZ(this.windowLength,e)}_getCursorContextInfo(e){return F7(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):F7(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return lKt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await kT(this.referenceDoc.languageId,e);let o=n.rootNode.namedDescendantForIndex(r);for(;o&&!(t.isMember(o)||t.isBlock(o));)o=o.parent??void 0;return o}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function lKt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}a(lKt,"computeScore");var uKt=0,dKt=60,fKt=4,pKt=1,mKt=20,hKt=1e4,GXe={snippetLength:dKt,threshold:uKt,maxTopSnippets:fKt,maxCharPerFile:hKt,maxNumberOfFiles:mKt,maxSnippetsPerFile:pKt,useSubsetMatching:!1};var fEe={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function gKt(t,e){return(e.useSubsetMatching?jZ.FACTORY(e.snippetLength):$Z.FACTORY(e.snippetLength)).to(t)}a(gKt,"getMatcher");async function VXe(t,e,r){let n=gKt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(s=>s.source.length<r.maxCharPerFile&&s.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(s,c)=>(await s).concat((await n.findMatches(c,r.maxSnippetsPerFile)).map(l=>({relativePath:c.relativePath,...l}))),Promise.resolve([]))).filter(s=>s.score&&s.snippet&&s.score>r.threshold).sort((s,c)=>s.score-c.score).slice(-r.maxTopSnippets)}a(VXe,"getSimilarSnippets");function zXe(t,e){return{...fEe,useSubsetMatching:pEe(t,e)}}a(zXe,"getCppSimilarFilesOptions");function KXe(t){return fEe.maxTopSnippets}a(KXe,"getCppNumberOfSnippets");var AKt=new Map([["cpp",zXe]]);function GZ(t,e,r){let n=AKt.get(r);return n?n(t,e):{...GXe,useSubsetMatching:pEe(t,e)}}a(GZ,"getSimilarFilesOptions");var yKt=new Map([["cpp",KXe]]);function YXe(t,e){let r=yKt.get(e);return r?r(t):dGe}a(YXe,"getNumberOfSnippets");function pEe(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Ki(t,$t.UseSubsetMatching))??!1}a(pEe,"useSubsetMatching");f();f();f();f();var CKt="content_excluded";async function VZ(t,e,r,n){let o=DZ(r,"CodeSnippet");if(o.length===0)return[];let s=new Set,c=o.flatMap(p=>p.data.map(m=>(s.add(m.uri),m.additionalUris?.forEach(h=>s.add(h)),{providerId:p.providerId,data:m}))),l=t.get(Ar),u=new Map;await Promise.all(Array.from(s).map(async p=>{u.set(p,await l.getTextDocumentValidation({uri:p}))}));let d=t.get(ml).getStatisticsForCompletion(e);return c.filter(p=>{let h=[p.data.uri,...p.data.additionalUris??[]].every(g=>u.get(g)?.status==="valid");return h?d.addExpectations(p.providerId,[[p.data,"included"]]):d.addExpectations(p.providerId,[[p.data,CKt]]),h}).map(p=>p.data)}a(VZ,"getCodeSnippetsFromContextItems");function JXe(t,e){let r=t.get(Ar);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}a(JXe,"addRelativePathToCodeSnippets");f();function yc(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}a(yc,"Text");function ow(t){return t.children}a(ow,"Chunk");f();function tn(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let o={...e,children:n};return r&&(o.key=r),{type:t,props:o}}a(tn,"functionComponentFunction");function qA(t){return{type:"f",children:t}}a(qA,"fragmentFunction");qA.isFragmentFunction=!0;var zZ=a((t,e)=>{let[r,n]=e.useState(),[o,s]=e.useState();if(e.useData(Fp,d=>{d.codeSnippets!==r&&n(d.codeSnippets),d.document.uri!==o?.uri&&s(d.document)}),!r||r.length===0||!o)return;let c=JXe(t.ctx,r),l=new Map;for(let d of c){let p=d.relativePath??d.snippet.uri,m=l.get(p);m===void 0&&(m=[],l.set(p,m)),m.push(d)}let u=[];for(let[d,p]of l.entries()){let m=p.filter(h=>h.snippet.value.length>0);m.length>0&&u.push({chunkElements:m.map(h=>h.snippet),importance:Math.max(...m.map(h=>h.snippet.importance??0)),uri:d})}if(u.length!==0)return u.sort((d,p)=>p.importance-d.importance),u.reverse(),u.map(d=>{let p=[];return p.push(tn(yc,{children:`Compare ${d.chunkElements.length>1?"these snippets":"this snippet"} from ${d.uri}:`})),d.chunkElements.forEach((m,h)=>{p.push(tn(yc,{source:m,children:m.value},m.id)),d.chunkElements.length>1&&h<d.chunkElements.length-1&&p.push(tn(yc,{children:"---"}))}),tn(ow,{children:p})})},"CodeSnippets");f();function mEe(t){return t.children}a(mEe,"CompletionsContext");function hEe(t){return t.children}a(hEe,"StableCompletionsContext");function gEe(t){return t.children}a(gEe,"AdditionalCompletionsContext");function KZ(t){return t.name===mEe.name||t.name===hEe.name||t.name===gEe.name}a(KZ,"isContextNode");f();f();f();function YZ(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let o=0;o<t.length;o++)r[o][n]=Math.min((o==0?n:r[o-1][n])+1,(n==0?o:r[o][n-1])+1,(o==0||n==0?Math.max(o,n):r[o-1][n-1])+(t[o]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}a(YZ,"findEditDistanceScore");var O7=50;function AEe(t){let e=t*4,r=t*.1;return Math.floor(e+r)}a(AEe,"approximateMaxCharacters");function Q7(t,e){let[r,n]=e.useState(),[o,s]=e.useState(),[c,l]=e.useState(0),[u,d]=e.useState(),[p,m]=e.useState();e.useData(Fp,g=>{let A=g.document;(g.document.uri!==r?.uri||A.getText()!==r?.getText())&&n(A),g.position!==o&&s(g.position),g.suffixMatchThreshold!==u&&d(g.suffixMatchThreshold),g.maxPromptTokens!==c&&l(g.maxPromptTokens),g.tokenizer!==p&&m(g.tokenizer)});let h=AEe(c);return tn(qA,{children:[tn(tk,{document:r,position:o,maxCharacters:h}),tn(JZ,{document:r,position:o,suffixMatchThreshold:u,maxCharacters:h,tokenizer:p})]})}a(Q7,"CurrentFile");function tk(t){if(t.document===void 0||t.position===void 0)return tn(yc,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),tn(yc,{children:e})}a(tk,"BeforeCursor");function JZ(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return tn(yc,{});let o=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});o.length>t.maxCharacters&&(o=o.slice(0,t.maxCharacters));let s=o.replace(/^.*/,"").trimStart();if(s==="")return tn(yc,{});if(r===s)return tn(yc,{children:r});let c=s;if(r!==""){let l=Xi(t.tokenizer),u=l.takeFirstTokens(s,O7);u.tokens.length>0&&100*YZ(u.tokens,l.takeFirstTokens(r,O7).tokens)?.score<(t.suffixMatchThreshold??UY)*u.tokens.length&&(c=r)}return c!==r&&n(c),tn(yc,{children:c})}a(JZ,"AfterCursor");function XXe(t,e){let[r,n]=e.useState(),[o,s]=e.useState(),[c,l]=e.useState(0);e.useData(Fp,d=>{let p=d.document;(d.document.uri!==r?.uri||p.getText()!==r?.getText())&&n(p),d.position!==o&&s(d.position),d.maxPromptTokens!==c&&l(d.maxPromptTokens)});let u=AEe(c);return tn(tk,{document:r,position:o,maxCharacters:u})}a(XXe,"DocumentPrefix");function ZXe(t,e){let[r,n]=e.useState(),[o,s]=e.useState(),[c,l]=e.useState(0),[u,d]=e.useState(),[p,m]=e.useState();e.useData(Fp,g=>{let A=g.document;(g.document.uri!==r?.uri||A.getText()!==r?.getText())&&n(A),g.position!==o&&s(g.position),g.suffixMatchThreshold!==u&&d(g.suffixMatchThreshold),g.maxPromptTokens!==c&&l(g.maxPromptTokens),g.tokenizer!==p&&m(g.tokenizer)});let h=AEe(c);return tn(JZ,{document:r,position:o,suffixMatchThreshold:u,maxCharacters:h,tokenizer:p})}a(ZXe,"DocumentSuffix");f();var XZ=class{static{a(this,"WishlistElision")}elide(e,r,n,o,s){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[c,l]=this.preparePrefixBlocks(e,s),{elidedSuffix:u,adjustedPrefixTokenLimit:d}=this.elideSuffix(n,o,r,l,s),p=this.elidePrefix(c,d,l,s);return{blocks:[u,...p],cycles:1}}preparePrefixBlocks(e,r){let n=0,o=new Set;return[e.map((c,l)=>{let u=0,p=c.value.split(/([^\n]*\n+)/).filter(h=>h!=="").map(h=>{let g=r.tokenLength(h);return u+=g,n+=g,{line:h,componentPath:c.componentPath,tokens:g}}),m=c.componentPath;if(o.has(m))throw new Error(`Duplicate component path in prefix blocks: ${m}`);return o.add(m),{...c,tokens:u,markedForRemoval:!1,originalIndex:l,lines:p}}),n]}elideSuffix(e,r,n,o,s){let c=e.value;if(c.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};o<n&&(r=r+(n-o),n=o);let l=s.takeFirstTokens(c,r);return{elidedSuffix:{...e,value:c,tokens:s.tokenLength(c),elidedValue:l.text,elidedTokens:l.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-l.tokens.length)}}elidePrefix(e,r,n,o){let s=this.removeLowWeightPrefixBlocks(e,r,n),c=s.filter(p=>!p.markedForRemoval).flatMap(p=>p.lines);if(c.length===0)return[];let[l,u]=this.trimPrefixLinesToFit(c,r,o),d=u;return s.map(p=>{if(p.markedForRemoval)return d+p.tokens<=r&&!p.chunks?(d+=p.tokens,{...p,elidedValue:p.value,elidedTokens:p.tokens}):{...p,elidedValue:"",elidedTokens:0};let m=l.filter(g=>g.componentPath===p.componentPath&&g.line!=="").map(g=>g.line).join(""),h=p.tokens;return m!==p.value&&(h=m!==""?o.tokenLength(m):0),{...p,elidedValue:m,elidedTokens:h}})}removeLowWeightPrefixBlocks(e,r,n){let o=n;e.sort((s,c)=>s.weight-c.weight);for(let s of e){if(o<=r)break;if(s.weight!==1&&!(s.chunks&&s.markedForRemoval))if(s.chunks&&s.chunks.size>0)for(let c of e)!c.markedForRemoval&&c.chunks&&[...s.chunks].every(l=>c.chunks?.has(l))&&(c.markedForRemoval=!0,o-=c.tokens);else s.markedForRemoval=!0,o-=s.tokens}return e.sort((s,c)=>s.originalIndex-c.originalIndex)}trimPrefixLinesToFit(e,r,n){let o=0,s=[];for(let c=e.length-1;c>=0;c--){let l=e[c],u=l.tokens;if(o+u<=r)s.unshift(l),o+=u;else break}if(s.length===0){let c=e[e.length-1];if(c&&c.line.length>0){let u=n.takeLastTokens(c.line,r);return s.push({line:u.text,componentPath:c.componentPath,tokens:u.tokens.length}),[s,u.tokens.length]}let l=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(l)}return[s,o]}};function eZe(t){return t.map(e=>e.elidedValue).join("")}a(eZe,"makePrompt");function tZe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}a(tZe,"makePrefixPrompt");function rZe(t){if(t.length===0)return[];let e=new Map;for(let o of t)if(o.type==="context"&&o.index!==void 0){e.has(o.index)||e.set(o.index,[]);let s=o.elidedValue.trim();s.length>0&&e.get(o.index).push(s)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let o=0;o<=r;o++){let s=e.get(o);if(s&&s.length>0){let c=s.join(`
`).trim();n.push(c)}else n.push("")}return n}a(rZe,"makeContextPrompt");f();var G3=class{constructor(e,r=yEe()){this.snapshot=e;this.transformers=r}static{a(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,o){let s=this.transformers.reduce((l,u)=>u(e,r,l),{...o});if(n(e,r,s))for(let l of e.children??[])this.walkSnapshotNode(l,e,n,s)}};function yEe(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,o=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:o*r.weight}},(t,e,r)=>{if(t.name===ow.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}a(yEe,"defaultTransformers");f();var U7={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},CEe={};for(let[t,e]of Object.entries(U7))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)CEe[r]=t;else CEe[t]=t;function iZe(t){return CEe[t]}a(iZe,"mdCodeBlockLangToLanguageId");var vKt={start:"//",end:""},xKt=["php","plaintext"],vEe={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function oZe(t){return Object.values(vEe).includes(t.trim())}a(oZe,"isShebangLine");function EKt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}a(EKt,"hasLanguageMarker");function bKt(t,e){let r=U7[e]?U7[e].lineComment:vKt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}a(bKt,"comment");function iv(t,e){if(t==="")return"";let r=t.endsWith(`
`),o=(r?t.slice(0,-1):t).split(`
`).map(s=>bKt(s,e)).join(`
`);return r?o+`
`:o}a(iv,"commentBlockAsSingles");function ZZ(t){let{languageId:e}=t;return xKt.indexOf(e)===-1&&!EKt(t)?e in vEe?vEe[e]:`Language: ${e}`:""}a(ZZ,"getLanguageMarker");function eee(t){return t.relativePath?`Path: ${t.relativePath}`:""}a(eee,"getPathMarker");function q7(t){return t===""||t.endsWith(`
`)?t:t+`
`}a(q7,"newLineEnded");function sZe(t){return nZe(typeof t=="string"?t:"plaintext")}a(sZe,"getLanguage");function nZe(t){return U7[t]!==void 0?{languageId:t,...U7[t]}:{languageId:t,lineComment:{start:"//",end:""}}}a(nZe,"_getLanguage");var IKt=5,V3=class{constructor(){this.renderId=0;this.formatPrefix=eZe}static{a(this,"CompletionsPromptRenderer")}render(e,r,n){let o=this.renderId++,s=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let c=r.delimiter??"",l=r.tokenizer??"o200k_base",{prefixBlocks:u,suffixBlock:d,componentStatistics:p}=this.processSnapshot(e,c,r.languageId),{prefixTokenLimit:m,suffixTokenLimit:h}=this.getPromptLimits(d,r),g=performance.now(),A=new XZ,{blocks:[y,...v]}=A.elide(u,m,d,h,Xi(l)),b=performance.now(),I=this.formatPrefix(v),_=this.formatContext?this.formatContext(v):void 0,k=y.elidedValue,N=v.reduce((F,O)=>F+O.elidedTokens,0);return p.push(...TKt([...v,y])),{prefix:I,prefixTokens:N,suffix:k,suffixTokens:y.elidedTokens,context:_,status:"ok",metadata:{renderId:o,rendererName:"c",tokenizer:l,elisionTimeMs:b-g,renderTimeMs:performance.now()-s,componentStatistics:p,updateDataTimeMs:p.reduce((F,O)=>F+(O.updateDataTimeMs??0),0)}}}catch(c){return{status:"error",error:c}}}getPromptLimits(e,r){let n=e?.value??"",o=r.promptTokenLimit,s=r.suffixPercent;if(n.length==0||s==0)return{prefixTokenLimit:o,suffixTokenLimit:0};o=n.length>0?o-IKt:o;let c=Math.ceil(o*(s/100));return{prefixTokenLimit:o-c,suffixTokenLimit:c}}processSnapshot(e,r,n){let o=[],s=[],c=[],l=!1;if(new G3(e,xEe).walkSnapshot((p,m,h)=>{if(p===e||(p.name===Q7.name&&(l=!0),p.statistics.updateDataTimeMs&&p.statistics.updateDataTimeMs>0&&c.push({componentPath:p.path,updateDataTimeMs:p.statistics.updateDataTimeMs}),p.value===void 0||p.value===""))return!0;let g=h.chunks;if(h.type==="suffix")s.push({value:H7(p.value),type:"suffix",weight:h.weight,componentPath:p.path,nodeStatistics:p.statistics,chunks:g,source:h.source});else{let A=p.value.endsWith(r)?p.value:p.value+r,y=A;h.type==="prefix"?y=p.value:oZe(p.value)?y=A:y=iv(A,n),o.push({type:h.type==="prefix"?"prefix":"context",value:H7(y),weight:h.weight,componentPath:p.path,nodeStatistics:p.statistics,chunks:g,source:h.source})}return!0}),!l)throw new Error(`Node of type ${Q7.name} not found`);if(s.length>1)throw new Error("Only one suffix is allowed");let d=s.length===1?s[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:o,suffixBlock:d,componentStatistics:c}}},xEe=[...yEe(),(t,e,r)=>KZ(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===tk.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===JZ.name?{...r,type:"suffix"}:r];function TKt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}a(TKt,"computeComponentStatistics");function H7(t){return t.replace(/\r\n?/g,`
`)}a(H7,"normalizeLineEndings");f();var tee=a((t,e)=>{let[r,n]=e.useState();if(e.useData(Fp,o=>{o.document.uri!==r?.uri&&n(o.document)}),r){let o=t.ctx.get(Ar),s=o.getRelativePath(r),c={uri:r.uri,source:r.getText(),relativePath:s,languageId:r.detectedLanguageId},l=o.findNotebook(r);return c.relativePath&&!l?tn(wKt,{docInfo:c}):tn(_Kt,{docInfo:c})}},"DocumentMarker"),wKt=a(t=>tn(yc,{children:eee(t.docInfo)}),"PathMarker"),_Kt=a(t=>tn(yc,{children:ZZ(t.docInfo)}),"LanguageMarker");f();f();f();f();function W7(t,e="Unreachable"){throw new Error(e)}a(W7,"assertNever");function ql(t,e="unexpected state"){if(!t)throw new bn(`Assertion Failed: ${e}`)}a(ql,"assert");function HA(t){if(!t()){debugger;t(),S3(new bn("Assertion Failed"))}}a(HA,"assertFn");function Lx(t,e){let r=0;for(;r<t.length-1;){let n=t[r],o=t[r+1];if(!e(n,o))return!1;r++}return!0}a(Lx,"checkAdjacentItems");f();f();f();f();f();var Fx=a((t,e)=>t===e,"strictEquals");f();f();var da=class t{static{a(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},$7=class{constructor(){this._first=da.Undefined;this._last=da.Undefined;this._size=0}static{a(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===da.Undefined}clear(){let e=this._first;for(;e!==da.Undefined;){let r=e.next;e.prev=da.Undefined,e.next=da.Undefined,e=r}this._first=da.Undefined,this._last=da.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new da(e);if(this._first===da.Undefined)this._first=n,this._last=n;else if(r){let s=this._last;this._last=n,n.prev=s,s.next=n}else{let s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let o=!1;return()=>{o||(o=!0,this._remove(n))}}shift(){if(this._first!==da.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==da.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==da.Undefined&&e.next!==da.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===da.Undefined&&e.next===da.Undefined?(this._first=da.Undefined,this._last=da.Undefined):e.next===da.Undefined?(this._last=this._last.prev,this._last.next=da.Undefined):e.prev===da.Undefined&&(this._first=this._first.next,this._first.prev=da.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==da.Undefined;)yield e.element,e=e.next}};f();var SKt=globalThis.performance&&typeof globalThis.performance.now=="function",z3=class t{static{a(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=SKt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var aZe=!1,RKt=!1,rk;(J=>{J.None=a(()=>Ps.None,"None");function e(G){if(RKt){let{onDidAddListener:j}=G,Z=j7.create(),ie=0;G.onDidAddListener=()=>{++ie===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Z.print()),j?.()}}}a(e,"_addLeakageTraceLogic");function r(G,j){return g(G,()=>{},0,void 0,!0,void 0,j)}J.defer=r,a(r,"defer");function n(G){return(j,Z=null,ie)=>{let ne=!1,re;return re=G(fe=>{if(!ne)return re?re.dispose():ne=!0,j.call(Z,fe)},null,ie),ne&&re.dispose(),re}}J.once=n,a(n,"once");function o(G,j){return J.once(J.filter(G,j))}J.onceIf=o,a(o,"onceIf");function s(G,j,Z){return m((ie,ne=null,re)=>G(fe=>ie.call(ne,j(fe)),null,re),Z)}J.map=s,a(s,"map");function c(G,j,Z){return m((ie,ne=null,re)=>G(fe=>{j(fe),ie.call(ne,fe)},null,re),Z)}J.forEach=c,a(c,"forEach");function l(G,j,Z){return m((ie,ne=null,re)=>G(fe=>j(fe)&&ie.call(ne,fe),null,re),Z)}J.filter=l,a(l,"filter");function u(G){return G}J.signal=u,a(u,"signal");function d(...G){return(j,Z=null,ie)=>{let ne=eJe(...G.map(re=>re(fe=>j.call(Z,fe))));return h(ne,ie)}}J.any=d,a(d,"any");function p(G,j,Z,ie){let ne=Z;return s(G,re=>(ne=j(ne,re),ne),ie)}J.reduce=p,a(p,"reduce");function m(G,j){let Z,ie={onWillAddFirstListener(){Z=G(ne.fire,ne)},onDidRemoveLastListener(){Z?.dispose()}};j||e(ie);let ne=new rm(ie);return j?.add(ne),ne.event}a(m,"snapshot");function h(G,j){return j instanceof Array?j.push(G):j&&j.add(G),G}a(h,"addAndReturnDisposable");function g(G,j,Z=100,ie=!1,ne=!1,re,fe){let ye,Qe,we,Xe=0,Oe,ut={leakWarningThreshold:re,onWillAddFirstListener(){ye=G(Et=>{Xe++,Qe=j(Qe,Et),ie&&!we&&(Rt.fire(Qe),Qe=void 0),Oe=a(()=>{let At=Qe;Qe=void 0,we=void 0,(!ie||Xe>1)&&Rt.fire(At),Xe=0},"doFire"),typeof Z=="number"?(clearTimeout(we),we=setTimeout(Oe,Z)):we===void 0&&(we=0,queueMicrotask(Oe))})},onWillRemoveListener(){ne&&Xe>0&&Oe?.()},onDidRemoveLastListener(){Oe=void 0,ye.dispose()}};fe||e(ut);let Rt=new rm(ut);return fe?.add(Rt),Rt.event}J.debounce=g,a(g,"debounce");function A(G,j=0,Z){return J.debounce(G,(ie,ne)=>ie?(ie.push(ne),ie):[ne],j,void 0,!0,void 0,Z)}J.accumulate=A,a(A,"accumulate");function y(G,j=(ie,ne)=>ie===ne,Z){let ie=!0,ne;return l(G,re=>{let fe=ie||!j(re,ne);return ie=!1,ne=re,fe},Z)}J.latch=y,a(y,"latch");function v(G,j,Z){return[J.filter(G,j,Z),J.filter(G,ie=>!j(ie),Z)]}J.split=v,a(v,"split");function b(G,j=!1,Z=[],ie){let ne=Z.slice(),re=G(Qe=>{ne?ne.push(Qe):ye.fire(Qe)});ie&&ie.add(re);let fe=a(()=>{ne?.forEach(Qe=>ye.fire(Qe)),ne=null},"flush"),ye=new rm({onWillAddFirstListener(){re||(re=G(Qe=>ye.fire(Qe)),ie&&ie.add(re))},onDidAddFirstListener(){ne&&(j?setTimeout(fe):fe())},onDidRemoveLastListener(){re&&re.dispose(),re=null}});return ie&&ie.add(ye),ye.event}J.buffer=b,a(b,"buffer");function I(G,j){return a((ie,ne,re)=>{let fe=j(new k);return G(function(ye){let Qe=fe.evaluate(ye);Qe!==_&&ie.call(ne,Qe)},void 0,re)},"fn")}J.chain=I,a(I,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{a(this,"ChainableSynthesis")}map(j){return this.steps.push(j),this}forEach(j){return this.steps.push(Z=>(j(Z),Z)),this}filter(j){return this.steps.push(Z=>j(Z)?Z:_),this}reduce(j,Z){let ie=Z;return this.steps.push(ne=>(ie=j(ie,ne),ie)),this}latch(j=(Z,ie)=>Z===ie){let Z=!0,ie;return this.steps.push(ne=>{let re=Z||!j(ne,ie);return Z=!1,ie=ne,re?ne:_}),this}evaluate(j){for(let Z of this.steps)if(j=Z(j),j===_)break;return j}}function N(G,j,Z=ie=>ie){let ie=a((...ye)=>fe.fire(Z(...ye)),"fn"),ne=a(()=>G.on(j,ie),"onFirstListenerAdd"),re=a(()=>G.removeListener(j,ie),"onLastListenerRemove"),fe=new rm({onWillAddFirstListener:ne,onDidRemoveLastListener:re});return fe.event}J.fromNodeEventEmitter=N,a(N,"fromNodeEventEmitter");function F(G,j,Z=ie=>ie){let ie=a((...ye)=>fe.fire(Z(...ye)),"fn"),ne=a(()=>G.addEventListener(j,ie),"onFirstListenerAdd"),re=a(()=>G.removeEventListener(j,ie),"onLastListenerRemove"),fe=new rm({onWillAddFirstListener:ne,onDidRemoveLastListener:re});return fe.event}J.fromDOMEventEmitter=F,a(F,"fromDOMEventEmitter");function O(G,j){return new Promise(Z=>n(G)(Z,null,j))}J.toPromise=O,a(O,"toPromise");function Y(G){let j=new rm;return G.then(Z=>{j.fire(Z)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}J.fromPromise=Y,a(Y,"fromPromise");function z(G,j){return G(Z=>j.fire(Z))}J.forward=z,a(z,"forward");function V(G,j,Z){return j(Z),G(ie=>j(ie))}J.runAndSubscribe=V,a(V,"runAndSubscribe");class U{constructor(j,Z){this._observable=j;this._counter=0;this._hasChanged=!1;let ie={onWillAddFirstListener:a(()=>{j.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:a(()=>{j.removeObserver(this)},"onDidRemoveLastListener")};Z||e(ie),this.emitter=new rm(ie),Z&&Z.add(this.emitter)}static{a(this,"EmitterObserver")}beginUpdate(j){this._counter++}handlePossibleChange(j){}handleChange(j,Z){this._hasChanged=!0}endUpdate(j){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function H(G,j){return new U(G,j).emitter.event}J.fromObservable=H,a(H,"fromObservable");function ee(G){return(j,Z,ie)=>{let ne=0,re=!1,fe={beginUpdate(){ne++},endUpdate(){ne--,ne===0&&(G.reportChanges(),re&&(re=!1,j.call(Z)))},handlePossibleChange(){},handleChange(){re=!0}};G.addObserver(fe),G.reportChanges();let ye={dispose(){G.removeObserver(fe)}};return ie instanceof ad?ie.add(ye):Array.isArray(ie)&&ie.push(ye),ye}}J.fromObservableLight=ee,a(ee,"fromObservableLight")})(rk||={});var EEe=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{a(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new z3,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},cZe=-1;var bEe=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{a(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[s,c]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${c}):`;console.warn(l),console.warn(s);let u=new IEe(l,s);this._errorHandler(u)}return()=>{let s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,o]of this._stacks)(!e||r<o)&&(e=[n,o],r=o);return e}},j7=class t{constructor(e){this.value=e}static{a(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},IEe=class extends Error{static{a(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},TEe=class extends Error{static{a(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},kKt=0,K3=class{constructor(e){this.value=e;this.id=kKt++}static{a(this,"UniqueContainer")}},PKt=2,DKt=a((t,e)=>{if(t instanceof K3)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),rm=class{constructor(e){this._size=0;this._options=e,this._leakageMon=cZe>0||this._options?.leakWarningThreshold?new bEe(e?.onListenerError??S3,this._options?.leakWarningThreshold??cZe):void 0,this._perfMon=this._options?._profName?new EEe(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{a(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(aZe){let e=this._listeners;queueMicrotask(()=>{DKt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let u=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(u);let d=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],p=new TEe(`${u}. HINT: Stack shows most frequent listener (${d[1]}-times)`,d[0]);return(this._options?.onListenerError||S3)(p),Ps.None}if(this._disposed)return Ps.None;r&&(e=e.bind(r));let o=new K3(e),s,c;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(o.stack=j7.create(),s=this._leakageMon.check(o.stack,this._size+1)),aZe&&(o.stack=c??j7.create()),this._listeners?this._listeners instanceof K3?(this._deliveryQueue??=new wEe,this._listeners=[this._listeners,o]):this._listeners.push(o):(this._options?.onWillAddFirstListener?.(this),this._listeners=o,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let l=Wc(()=>{s?.(),this._removeListener(o)});return n instanceof ad?n.add(l):Array.isArray(n)&&n.push(l),l},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let o=this._deliveryQueue.current===this;if(this._size*PKt<=r.length){let s=0;for(let c=0;c<r.length;c++)r[c]?r[s++]=r[c]:o&&s<this._deliveryQueue.end&&(this._deliveryQueue.end--,s<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=s}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||S3;if(!n){e.value(r);return}try{e.value(r)}catch(o){n(o)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof K3)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var wEe=class{constructor(){this.i=-1;this.end=0}static{a(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};f();var Ff=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{a(this,"DebugNameData")}getDebugName(e){return fZe(e,this)}},lZe=new Map,_Ee=new WeakMap;function fZe(t,e){let r=_Ee.get(t);if(r)return r;let n=BKt(t,e);if(n){let o=lZe.get(n)??0;o++,lZe.set(n,o);let s=o===1?n:`${n}#${o}`;return _Ee.set(t,s),s}}a(fZe,"getDebugName");function BKt(t,e){let r=_Ee.get(t);if(r)return r;let n=e.owner?MKt(e.owner)+".":"",o,s=e.debugNameSource;if(s!==void 0)if(typeof s=="function"){if(o=s(),o!==void 0)return n+o}else return n+s;let c=e.referenceFn;if(c!==void 0&&(o=ree(c),o!==void 0))return n+o;if(e.owner!==void 0){let l=NKt(e.owner,t);if(l!==void 0)return n+l}}a(BKt,"computeDebugName");function NKt(t,e){for(let r in t)if(t[r]===e)return r}a(NKt,"findKey");var uZe=new Map,dZe=new WeakMap;function MKt(t){let e=dZe.get(t);if(e)return e;let r=LKt(t),n=uZe.get(r)??0;n++,uZe.set(r,n);let o=n===1?r:`${r}#${n}`;return dZe.set(t,o),o}a(MKt,"formatOwner");function LKt(t){let e=t.constructor;return e?e.name:"Object"}a(LKt,"getClassName");function ree(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}a(ree,"getFunctionName");f();var nk;function iee(t){nk?nk instanceof nee?nk.loggers.push(t):nk=new nee([nk,t]):nk=t}a(iee,"addLogger");function Qa(){return nk}a(Qa,"getLogger");var SEe;function pZe(t){SEe=t}a(pZe,"setLogObservableFn");function mZe(t){SEe&&SEe(t)}a(mZe,"logObservable");var nee=class{constructor(e){this.loggers=e}static{a(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let o of this.loggers)o.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let o of this.loggers)o.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var hZe;function gZe(t){hZe=t}a(gZe,"_setRecomputeInitiallyAndOnChange");var AZe;function yZe(t){AZe=t}a(yZe,"_setKeepObserved");var REe;function CZe(t){REe=t}a(CZe,"_setDerivedOpts");var oee=class{static{a(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,o=r===void 0?e:r;return REe({owner:n,debugName:a(()=>{let s=ree(o);if(s!==void 0)return s;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(o.toString());if(l)return`${this.debugName}.${l[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:o},s=>o(this.read(s),s))}flatten(){return REe({owner:void 0,debugName:a(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(hZe(this,r)),this}keepObserved(e){return e.add(AZe(this)),this}get debugValue(){return this.get()}},sw=class extends oee{constructor(){super();this.observers=new Set;Qa()?.handleObservableCreated(this)}static{a(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&Qa()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&Qa()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!Qa();return mZe(this),r||Qa()?.handleObservableCreated(this),this}};function aee(t,e){let r=new Y3(t,e);try{t(r)}finally{r.finish()}}a(aee,"transaction");function kEe(t,e,r){t?e(t):aee(e,r)}a(kEe,"subtransaction");var Y3=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];Qa()?.handleBeginTransaction(this)}static{a(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():ree(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:o}=e[r];n.endUpdate(o)}this.updatingObservers=null,Qa()?.handleEndTransaction(this)}};function WA(t,e){let r;return typeof t=="string"?r=new Ff(void 0,t,void 0):r=new Ff(t,void 0,void 0),new see(r,e,Fx)}a(WA,"observableValue");var see=class extends sw{constructor(r,n,o){super();this._debugNameData=r;this._equalityComparator=o;this._value=n,Qa()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{a(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,o){if(o===void 0&&this._equalityComparator(this._value,r))return;let s;n||(n=s=new Y3(()=>{},()=>`Setting ${this.debugName}`));try{let c=this._value;this._setValue(r),Qa()?.handleObservableUpdated(this,{oldValue:c,newValue:r,change:o,didChange:!0,hadValue:!0});for(let l of this.observers)n.updateObserver(l,this),l.handleChange(this,o)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};f();f();function ik(t){return new J3(new Ff(void 0,void 0,t),t,void 0,void 0)}a(ik,"autorun");function PEe(t,e){return new J3(new Ff(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}a(PEe,"autorunOpts");function cee(t,e){return new J3(new Ff(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}a(cee,"autorunHandleChanges");function DEe(t,e){let r=new ad,n=cee({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(o,s)=>{r.clear(),e(o,s,r)});return Wc(()=>{n.dispose(),r.dispose()})}a(DEe,"autorunWithStoreHandleChanges");function BEe(t){let e=new ad,r=PEe({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return Wc(()=>{r.dispose(),e.dispose()})}a(BEe,"autorunWithStore");var J3=class{constructor(e,r,n,o){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=o;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Qa()?.handleAutorunCreated(this),this._runIfNeeded(),D3(this)}static{a(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Qa()?.handleAutorunDisposed(this),B3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Qa()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){VR(n)}finally{this._isRunning=!1}}}finally{this.disposed||Qa()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}HA(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){Qa()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:a(o=>o===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){VR(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new bn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=J3)(ik||={});f();function lee(t,e){return new ok(new Ff(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??Fx)}a(lee,"derivedOpts");CZe(lee);var ok=class extends sw{constructor(r,n,o,s,c=void 0,l){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=o;this._handleChange=s;this._handleLastObserverRemoved=c;this._equalityComparator=l;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{a(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Qa()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,o=this.value;this.state=3;let s=!1;this._isComputing=!0;try{let c=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,c)}finally{this._isReaderValid=!1;for(let l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}s=n&&!this._equalityComparator(o,this.value),Qa()?.handleObservableUpdated(this,{oldValue:o,newValue:this.value,change:void 0,didChange:s,hadValue:n})}catch(c){VR(c)}if(this._isComputing=!1,s)for(let c of this.observers)c.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new bn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let o of this.observers)o.handlePossibleChange(this);if(n)for(let o of this.observers)o.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let o of n)o.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let o=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let s of o)s.endUpdate(this)}}HA(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){Qa()?.handleDerivedDependencyChanged(this,r,n);let o=!1;try{o=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:a(c=>c===r,"didChange")},this.changeSummary):!0}catch(c){VR(c)}let s=this.state===3;if(o&&(this.state===1||s)&&(this.state=2,s))for(let c of this.observers)c.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new bn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};f();f();function NEe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new aw(new Ff(e,void 0,n),r,n,()=>aw.globalTransaction,Fx)}a(NEe,"observableFromEvent");var aw=class extends sw{constructor(r,n,o,s,c){super();this._debugNameData=r;this.event=n;this._getValue=o;this._getTransaction=s;this._equalityComparator=c;this.hasValue=!1;this.handleEvent=a(r=>{let n=this._getValue(r),o=this.value,s=!this.hasValue||!this._equalityComparator(o,n),c=!1;s&&(this.value=n,this.hasValue&&(c=!0,kEe(this._getTransaction(),l=>{Qa()?.handleObservableUpdated(this,{oldValue:o,newValue:n,change:void 0,didChange:s,hadValue:this.hasValue});for(let u of this.observers)l.updateObserver(u,this),u.handleChange(this,void 0)},()=>{let l=this.getDebugName();return"Event fired"+(l?`: ${l}`:"")})),this.hasValue=!0),c||Qa()?.handleObservableUpdated(this,{oldValue:o,newValue:n,change:void 0,didChange:s,hadValue:this.hasValue})},"handleEvent")}static{a(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=aw;function e(n,o){let s=!1;aw.globalTransaction===void 0&&(aw.globalTransaction=n,s=!0);try{o()}finally{s&&(aw.globalTransaction=void 0)}}r.batchEventsGlobally=e,a(e,"batchEventsGlobally")})(NEe||={});function xZe(t){let e=new uee(!1,void 0);return t.addObserver(e),Wc(()=>{t.removeObserver(e)})}a(xZe,"keepObserved");yZe(xZe);function EZe(t,e){let r=new uee(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),Wc(()=>{t.removeObserver(r)})}a(EZe,"recomputeInitiallyAndOnChange");gZe(EZe);var uee=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{a(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function Oh(t,e,r,n){let o=new dee(r,n);return lee({debugReferenceFn:r,owner:t,onLastObserverRemoved:a(()=>{o.dispose(),o=new dee(r)},"onLastObserverRemoved")},c=>(o.setItems(e.read(c)),o.getItems()))}a(Oh,"mapObservableArrayCached");var dee=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{a(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let o of e){let s=this._keySelector?this._keySelector(o):o,c=this._cache.get(s);if(c)n.delete(s);else{let l=new ad;c={out:this._map(o,l),store:l},this._cache.set(s,c)}r.push(c.out)}for(let o of n)this._cache.get(o).store.dispose(),this._cache.delete(o);this._items=r}getItems(){return this._items}};function MEe(t,e){let r;return DEe({createEmptyChangeSummary:a(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:a((n,o)=>{if(n.didChange(t)){let s=n.change;s!==void 0&&o.deltas.push(s),o.didChange=!0}return!0},"handleChange")},(n,o)=>{let s=t.read(n),c=r;o.didChange&&(r=s,e(s,c,o.deltas))})}a(MEe,"runOnChange");f();f();f();var bZe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),fee;(n=>{function t(o){return o===n.None||o===n.Cancelled||o instanceof X3?!0:!o||typeof o!="object"?!1:typeof o.isCancellationRequested=="boolean"&&typeof o.onCancellationRequested=="function"}n.isCancellationToken=t,a(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:rk.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:bZe})})(fee||={});var X3=class{constructor(){this._isCancelled=!1;this._emitter=null}static{a(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?bZe:(this._emitter||(this._emitter=new rm),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Ox=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{a(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new X3),this._token}cancel(){this._token?this._token instanceof X3&&this._token.cancel():this._token=fee.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof X3&&this._token.dispose():this._token=fee.None}};f();var pee;function IZe(t){pee||(pee=new V7,iee(pee)),pee.addFilteredObj(t)}a(IZe,"logObservableToConsole");var V7=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{a(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return FKt([Z3(UKt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[Z3(" "),Qh(G7(e.oldValue,70),{color:"red",strikeThrough:!0}),Z3(" "),Qh(G7(e.newValue,60),{color:"green"})]:[Z3(" (unchanged)")]:[Z3(" "),Qh(G7(e.newValue,60),{color:"green"}),Z3(" (initial)")]}handleObservableCreated(e){if(e instanceof ok){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let o=[];r.__debugUpdating=o;let s=r.beginUpdate;r.beginUpdate=l=>(o.push(l),s.apply(r,[l]));let c=r.endUpdate;r.endUpdate=l=>{let u=o.indexOf(l);return u===-1&&console.error("endUpdate called without beginUpdate",r.debugName,l.debugName),o.splice(u,1),c.apply(r,[l])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof ok){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([eN("observable value changed"),Qh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return Qh(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([eN("derived recomputed"),Qh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([eN("derived cleared"),Qh(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([eN("observable from event triggered"),Qh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([eN("autorun"),Qh(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([eN("transaction"),Qh(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function FKt(t){let e=new Array,r=[],n="";function o(c){if("length"in c)for(let l of c)l&&o(l);else"text"in c?(n+=`%c${c.text}`,e.push(c.style),c.data&&r.push(...c.data)):"data"in c&&r.push(...c.data)}a(o,"process"),o(t);let s=[n,...e];return s.push(...r),s}a(FKt,"consoleTextToArgs");function Z3(t){return Qh(t,{color:"black"})}a(Z3,"normalText");function eN(t){return Qh(qKt(`${t}: `,10),{color:"black",bold:!0})}a(eN,"formatKind");function Qh(t,e={color:"black"}){function r(o){return Object.entries(o).reduce((s,[c,l])=>`${s}${c}:${l};`,"")}a(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}a(Qh,"styled");function G7(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?OKt(t,e):QKt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}a(G7,"formatValue");function OKt(t,e){let r="[ ",n=!0;for(let o of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${G7(o,e-r.length)}`}return r+=" ]",r}a(OKt,"formatArray");function QKt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let o=t.toString();return o.length<=e?o:o.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[o,s]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${o}: ${G7(s,e-r.length)}`}return r+=" }",r}a(QKt,"formatObject");function UKt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}a(UKt,"repeat");function qKt(t,e){for(;t.length<e;)t+=" ";return t}a(qKt,"padStr");pZe(IZe);var HKt=!1;HKt&&iee(new V7);f();var sk;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,a(e,"create")})(sk||={});f();f();f();function TZe(t){return t}a(TZe,"identity");var mee=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=TZe):(this._fn=r,this._computeKey=e.getCacheKey)}static{a(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},Qx=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=TZe):(this._fn=r,this._computeKey=e.getCacheKey)}static{a(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};f();f();var Uh=class{constructor(e){this.executor=e;this._didRun=!1}static{a(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function ak(t){return t<0?0:t>4294967295?4294967295:t|0}a(ak,"toUint32");function rN(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}a(rN,"escapeRegExpCharacters");function kZe(t,e){if(!t||!e)return t;let r=e.length;if(r===0||t.length===0)return t;let n=0;for(;t.indexOf(e,n)===n;)n=n+r;return t.substring(n)}a(kZe,"ltrim");function qh(t){return t.split(/\r\n|\r|\n/)}a(qh,"splitLines");function $Kt(t,e,r=0,n=t.length,o=0,s=e.length){for(;r<n&&o<s;r++,o++){let u=t.charCodeAt(r),d=e.charCodeAt(o);if(u<d)return-1;if(u>d)return 1}let c=n-r,l=s-o;return c<l?-1:c>l?1:0}a($Kt,"compareSubstring");function jKt(t,e,r=0,n=t.length,o=0,s=e.length){for(;r<n&&o<s;r++,o++){let u=t.charCodeAt(r),d=e.charCodeAt(o);if(u===d)continue;if(u>=128||d>=128)return $Kt(t.toLowerCase(),e.toLowerCase(),r,n,o,s);wZe(u)&&(u-=32),wZe(d)&&(d-=32);let p=u-d;if(p!==0)return p}let c=n-r,l=s-o;return c<l?-1:c>l?1:0}a(jKt,"compareSubstringIgnoreCase");function wZe(t){return t>=97&&t<=122}a(wZe,"isLowerAsciiLetter");function PZe(t,e){let r=e.length;return e.length>t.length?!1:jKt(t,e,0,r)===0}a(PZe,"startsWithIgnoreCase");function cw(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}a(cw,"commonPrefixLength");function Ux(t,e){let r=Math.min(t.length,e.length),n,o=t.length-1,s=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(o-n)!==e.charCodeAt(s-n))return n;return r}a(Ux,"commonSuffixLength");var GKt=/^[\t\n\r\x20-\x7E]*$/;function LEe(t){return GKt.test(t)}a(LEe,"isBasicASCII");var Soi=String.fromCharCode(65279);var _Ze=class t{static{a(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=VKt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,o=1;for(;o<=n;)if(e<r[3*o])o=2*o;else if(e>r[3*o+1])o=2*o+1;else return r[3*o+2];return 0}};function VKt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}a(VKt,"getGraphemeBreakRawData");var SZe=class t{constructor(e){this.confusableDictionary=e}static{a(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Uh(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new mee({getCacheKey:JSON.stringify},e=>{function r(p){let m=new Map;for(let h=0;h<p.length;h+=2)m.set(p[h],p[h+1]);return m}a(r,"arrayToMap");function n(p,m){let h=new Map(p);for(let[g,A]of m)h.set(g,A);return h}a(n,"mergeMaps");function o(p,m){if(!p)return m;let h=new Map;for(let[g,A]of p)m.has(g)&&h.set(g,A);return h}a(o,"intersectMaps");let s=this.ambiguousCharacterData.value,c=e.filter(p=>!p.startsWith("_")&&p in s);c.length===0&&(c=["_default"]);let l;for(let p of c){let m=r(s[p]);l=o(l,m)}let u=r(s._common),d=n(u,l);return new t(d)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Uh(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},RZe=class t{static{a(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};f();var Kt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new bn(`Invalid range: ${this.toString()}`)}static{a(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let o=n;for(;o<r.length&&r[o].start<=e.endExclusive;)o++;if(n===o)r.splice(n,0,e);else{let s=Math.min(e.start,r[n].start),c=Math.max(e.endExclusive,r[o-1].endExclusive);r.splice(n,o-n,new t(s,c))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new bn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new bn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new bn(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};f();var jr=class t{static{a(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,o=r.lineNumber|0;if(n===o){let s=e.column|0,c=r.column|0;return s-c}return n-o}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var ir=class t{static{a(this,"Range")}constructor(e,r,n,o){e>n||e===n&&r>o?(this.startLineNumber=n,this.startColumn=o,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=o)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,o,s,c;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,o=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,o=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,o=e.startColumn),r.endLineNumber>e.endLineNumber?(s=r.endLineNumber,c=r.endColumn):r.endLineNumber===e.endLineNumber?(s=r.endLineNumber,c=Math.max(r.endColumn,e.endColumn)):(s=e.endLineNumber,c=e.endColumn),new t(n,o,s,c)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,o=e.startColumn,s=e.endLineNumber,c=e.endColumn,l=r.startLineNumber,u=r.startColumn,d=r.endLineNumber,p=r.endColumn;return n<l?(n=l,o=u):n===l&&(o=Math.max(o,u)),s>d?(s=d,c=p):s===d&&(c=Math.min(c,p)),n>s||n===s&&o>c?null:new t(n,o,s,c)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new jr(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new jr(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let s=e.startLineNumber|0,c=r.startLineNumber|0;if(s===c){let l=e.startColumn|0,u=r.startColumn|0;if(l===u){let d=e.endLineNumber|0,p=r.endLineNumber|0;if(d===p){let m=e.endColumn|0,h=r.endColumn|0;return m-h}return d-p}return l-u}return s-c}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Gr=class t{static{a(this,"LineRange")}static ofLength(e,r){return new t(e,e+r)}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static{this.compareByStart=Dh(e=>e.startLineNumber,Bh)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new hee(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new hee(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new bn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let o=1;o<e.length;o++)r=Math.min(r,e[o].startLineNumber),n=Math.max(n,e[o].endLineNumberExclusive);return new t(r,n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new bn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new ir(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new ir(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new Kt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},hee=class t{constructor(e=[]){this._normalizedRanges=e}static{a(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=_3(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),n=FA(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let o=this._normalizedRanges[r];this._normalizedRanges[r]=o.join(e)}else{let o=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,o)}}contains(e){let r=mxe(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=mxe(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,o=0,s=null;for(;n<this._normalizedRanges.length||o<e._normalizedRanges.length;){let c=null;if(n<this._normalizedRanges.length&&o<e._normalizedRanges.length){let l=this._normalizedRanges[n],u=e._normalizedRanges[o];l.startLineNumber<u.startLineNumber?(c=l,n++):(c=u,o++)}else n<this._normalizedRanges.length?(c=this._normalizedRanges[n],n++):(c=e._normalizedRanges[o],o++);s===null?s=c:s.endLineNumberExclusive>=c.startLineNumber?s=new Gr(s.startLineNumber,Math.max(s.endLineNumberExclusive,c.endLineNumberExclusive)):(r.push(s),s=c)}return s!==null&&r.push(s),new t(r)}subtractFrom(e){let r=_3(this._normalizedRanges,c=>c.endLineNumberExclusive>=e.startLineNumber),n=FA(this._normalizedRanges,c=>c.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let o=[],s=e.startLineNumber;for(let c=r;c<n;c++){let l=this._normalizedRanges[c];l.startLineNumber>s&&o.push(new Gr(s,l.startLineNumber)),s=l.endLineNumberExclusive}return s<e.endLineNumberExclusive&&o.push(new Gr(s,e.endLineNumberExclusive)),new t(o)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,o=0;for(;n<this._normalizedRanges.length&&o<e._normalizedRanges.length;){let s=this._normalizedRanges[n],c=e._normalizedRanges[o],l=s.intersect(c);l&&!l.isEmpty&&r.push(l),s.endLineNumberExclusive<c.endLineNumberExclusive?n++:o++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var Cu=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{a(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let o of e)o===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new ir(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new ir(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new ir(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Gr.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new jr(e.lineNumber,e.column+this.columnCount):new jr(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return ir.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var vu=class t{constructor(e){this.value=e}static{a(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new FEe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return qh(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},FEe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{a(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Kt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=FA(this.lineStartOffsetByLineIdx,s=>s<=e),n=r+1,o=e-this.lineStartOffsetByLineIdx[r]+1;return new jr(n,o)}getRange(e){return ir.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Cu.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Cu(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var $A=class{static{a(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var gee=class extends Ps{constructor(r,n,o,s,c,l){super();this.id=r;this.workspaceRoot=l;this.value=WA(this,n),this.selection=WA(this,o),this.languageId=WA(this,s),this._register(Wc(c))}static{a(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let o=this.value.get().apply(r);this.value.set(o,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};f();f();function qx(t,e,r){let n=new Map(Object.entries(e).map(([s,c])=>[c,s])),o=new Map(Object.keys(e).map(s=>[s,void 0]));return cee({owner:t,createEmptyChangeSummary:a(()=>({}),"createEmptyChangeSummary"),handleChange:a((s,c)=>{let l=n.get(s.changedObservable);return c[l]===void 0&&(c[l]={value:void 0,changes:[]}),c[l].changes.push(s.change),!0},"handleChange")},(s,c)=>{for(let[l,u]of Object.entries(e)){let d=u.read(s);c[l]===void 0&&(c[l]={value:d,changes:[],previous:o.get(l)}),c[l].value=d,c[l].previous=o.get(l)===void 0?void 0:o.get(l),o.set(l,d)}r(c)})}a(qx,"autorunWithChanges");f();var ov=class extends Ps{static{a(this,"RecentEditsProvider")}};function zKt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let o=t.startLine-1,s=t.endLine-1;return!!(e&&(Math.abs(o-r)<=n||Math.abs(s-r)<=n))}a(zKt,"editIsTooCloseToCursor");var Aee=a((t,e)=>{let[r,n]=e.useState();return e.useData(Fp,async o=>{if(!o.document)return;let s=t.ctx.get(ov);if(s.isEnabled())s.start();else return;let c=s.config,l=s.getRecentEdits(),u=new Set,d=t.ctx.get(Ar),p=[];for(let h=l.length-1;h>=0&&!(p.length>=c.maxEdits);h--){let g=l[h];if(!await d.getTextDocument({uri:g.file}))continue;let A=!u.has(g.file);if(u.size+(A?1:0)>c.maxFiles)break;let v=g.file===o.document?.uri,b=v?o.position.line:void 0;if(zKt(g,v,b,c.activeDocDistanceLimitFromCursor))continue;let _=s.getEditSummary(g);if(_){u.add(g.file);let k=d.getRelativePath({uri:g.file});p.unshift(q7(`File: ${k}`)+q7(_))}}if(p.length===0){n(void 0);return}let m=q7("These are recently edited files. Do not suggest code that has been deleted.")+p.join("")+q7("End of recent edits");n(m)}),r?tn(ow,{children:tn(yc,{children:r})}):void 0},"RecentEdits");f();f();f();f();var OEe=new vr;function DZe(t){return[...t].sort((e,r)=>{let n=OEe.get(e.uri)??0;return(OEe.get(r.uri)??0)-n})}a(DZe,"sortByAccessTimes");var BZe=a(t=>t.get(Ar).onDidFocusTextDocument(e=>{e.document&&OEe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var yee=class{constructor(e){this.docManager=e}static{a(this,"OpenTabFiles")}truncateDocs(e,r,n,o){let s=new Map,c=0;for(let l of e)if(!(c+l.getText().length>ck.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(l.uri.startsWith("file:")&&r.startsWith("file:")&&l.uri!==r&&Cee(n,l.detectedLanguageId)&&(s.set(l.uri.toString(),{uri:l.uri.toString(),relativePath:this.docManager.getRelativePath(l),source:l.getText()}),c+=l.getText().length),s.size>=o))break;return s}async getNeighborFiles(e,r,n){let o=new Map,s=new Map;return o=this.truncateDocs(DZe(await this.docManager.textDocuments()),e,r,n),s.set("opentabs",Array.from(o.keys()).map(c=>c.toString())),{docs:o,neighborSource:s}}};f();f();function NZe(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(o=>{setTimeout(o,e,r)})])}}a(NZe,"shortCircuit");f();function YKt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}a(YKt,"defaultHash");function QEe(t,e={}){let{hash:r=YKt,cache:n=new Map}=e;return function(...o){let s=r.apply(this,o);if(n.has(s))return n.get(s);let c=t.apply(this,o);return c instanceof Promise&&(c=c.catch(l=>{throw n.delete(s),l})),n.set(s,c),c}}a(QEe,"memoize");var MZe={entries:[],traits:[]},vee={entries:new Map,traits:[]},UEe=class extends vr{constructor(r,n=120*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{a(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let o=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),o}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},Hl=new dt("relatedFiles"),JKt=1e3,xee=class extends Error{static{a(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},lk=class t{constructor(e){this.context=e}static{a(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let o=await this.getRelatedFilesResponse(e,r,n);if(o===void 0)return;let s={entries:new Map,traits:o.traits??[]};for(let c of o.entries){let l=s.entries.get(c.type);l||(l=new Map,s.entries.set(c.type,l));for(let u of c.uris)try{Hl.debug(this.context,`Processing ${u}`);let d=await this.getFileContent(u);if(!d||d.length==0){Hl.debug(this.context,`Skip ${u} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(u,d)){Hl.debug(this.context,`Skip ${u} due content exclusion.`);continue}d=t.dropBOM(d),l.set(u,d)}catch(d){Hl.warn(this.context,d)}}return s}async getFileContent(e){try{return this.context.get(Ui).readFileString(e)}catch(r){Hl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(gc).evaluate(e,r)).isBlocked}catch(n){Hl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},XKt=3,LZe=new UEe(JKt);async function FZe(t,e,r,n,o){let s=performance.now(),c;try{c=await o.getRelatedFiles(e,r,n)}catch(u){Hl.exception(t,u,".getRelatedFiles"),c=void 0}c===void 0&&(LZe.bumpRetryCount(e.uri)>=XKt?c=vee:c=void 0);let l=performance.now()-s;if(Hl.debug(t,c!==void 0?`Fetched ${[...c.entries.values()].map(u=>u.size).reduce((u,d)=>u+d,0)} related files for '${e.uri}' in ${l}ms.`:`Failing fetching files for '${e.uri}' in ${l}ms.`),c===void 0)throw new xee;return c}a(FZe,"getRelatedFiles");var qEe=QEe(FZe,{cache:LZe,hash:a((t,e,r,n,o)=>`${e.uri}`,"hash")});qEe=NZe(qEe,200,vee);async function Eee(t,e,r,n,o,s=!1){let c=t.get(lk),l=vee;try{let u={uri:e.uri,clientLanguageId:e.clientLanguageId,data:o};l=s?await FZe(t,u,r,n,c):await qEe(t,u,r,n,c)}catch(u){l=vee,u instanceof xee&&Pt(t,"getRelatedFilesList",r)}return Hl.debug(t,l!=null?`Fetched following traits ${l.traits.map(u=>`{${u.name} : ${u.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),l}a(Eee,"getRelatedFilesAndTraits");function Cee(t,e){return UO(t)===UO(e)}a(Cee,"considerNeighborFile");var ck=class t{static{a(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,o,s,c,l){let u=e.get(Ar);t.instance===void 0&&(t.instance=new yee(u));let d={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(ZKt(e,o))return d;let p=await u.getTextDocument({uri:r});if(!p)return Hl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),d;let m=u.getWorkspaceFolder(p);if(!m)return Hl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),d;let h=await Eee(e,p,o,s,c,l);return h.entries.size===0?(Hl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),d.traits.push(...h.traits),d):(h.entries.forEach((g,A)=>{let y=[];g.forEach((v,b)=>{let I=t.getRelativePath(b,m.uri);if(!I||d.docs.has(b))return;let _={relativePath:I,uri:b,source:v};y.unshift(_),d.docs.set(b,_)}),y.length>0&&d.neighborSource.set(A,y.map(v=>v.uri.toString()))}),d.traits.push(...h.traits),d)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function ZKt(t,e){return t.get(Lt).excludeRelatedFiles(e)||Ki(t,$t.ExcludeRelatedFiles)}a(ZKt,"isExcludeRelatedFilesActive");function OZe(t,e){return t.get(Lt).includeNeighboringFiles(e)||Ki(t,$t.IncludeNeighboringFiles)}a(OZe,"isIncludeNeighborFilesActive");var bee=a((t,e)=>{let[r,n]=e.useState(),[o,s]=e.useState([]);e.useData(Fp,async u=>{u.document.uri!==r?.uri&&s([]),n(u.document);let d=ck.defaultEmptyResult();u.turnOffSimilarFiles||(d=await ck.getNeighborFilesAndTraits(t.ctx,u.document.uri,u.document.detectedLanguageId,u.telemetryData,u.cancellationToken,u.data));let p=await c(u.telemetryData,u.document,u,d);s(p)});async function c(u,d,p,m){let h=nN(t.ctx,u,d.detectedLanguageId);return(await l(h,u,d,p,m)).filter(A=>A.snippet.length>0).sort((A,y)=>A.score-y.score).map(A=>({...$Xe(A),score:A.score}))}a(c,"produceSimilarFiles");async function l(u,d,p,m,h){let g=u.similarFilesOptions||GZ(t.ctx,d,p.detectedLanguageId),y=t.ctx.get(Ar).getRelativePath(p),v={uri:p.uri,source:p.getText(),offset:p.offsetAt(m.position),relativePath:y,languageId:p.detectedLanguageId};return await VXe(v,Array.from(h.docs.values()),g)}return a(l,"findSimilarSnippets"),tn(qA,{children:[...o.map((u,d)=>tn(eYt,{snippet:u}))]})},"SimilarFiles"),eYt=a((t,e)=>tn(ow,{children:[tn(yc,{children:t.snippet.headline}),tn(yc,{children:t.snippet.snippet})]}),"SimilarFile");f();f();var Iee=a((t,e)=>{let[r,n]=e.useState(),[o,s]=e.useState();if(e.useData(Fp,c=>{c.traits!==r&&n(c.traits);let l=UO(c.document.detectedLanguageId);l!==o&&s(l)}),!(!r||r.length===0||!o))return tn(qA,{children:[tn(yc,{children:`Consider this related information:
`}),...r.map(c=>tn(yc,{source:c,children:`${c.name}: ${c.value}`},c.id))]})},"Traits");function QZe(t,e){return Ki(t,$t.UseSplitContextPrompt)??t.get(Lt).enablePromptContextProxyField(e)}a(QZe,"shouldUseSplitContextPrompt");function UZe(t){return tn(qA,{children:[tn(hEe,{children:[tn(tee,{ctx:t,weight:.7}),tn(Iee,{weight:.6}),tn(zZ,{ctx:t,weight:.9}),tn(bee,{ctx:t,weight:.8})]}),tn(ZXe,{weight:1}),tn(gEe,{children:tn(Aee,{ctx:t,weight:.99})}),tn(XXe,{weight:1})]})}a(UZe,"splitContextCompletionsPrompt");f();var qZe=0;function tYt(){qZe=0}a(tYt,"resetContextIndex");function rYt(){return qZe++}a(rYt,"getNextContextIndex");var Tee=class extends V3{constructor(){super(...arguments);this.formatPrefix=tZe;this.formatContext=rZe}static{a(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let o=[],s=[],c=[],l=!1;if(tYt(),new G3(r,nYt).walkSnapshot((p,m,h)=>{if(p===r||(p.statistics.updateDataTimeMs&&p.statistics.updateDataTimeMs>0&&c.push({componentPath:p.path,updateDataTimeMs:p.statistics.updateDataTimeMs}),p.name===tk.name&&(l=!0),p.value===void 0||p.value===""))return!0;let g=h.chunks,A=h.type;if(A==="suffix")s.push({value:H7(p.value),type:"suffix",weight:h.weight,componentPath:p.path,nodeStatistics:p.statistics,chunks:g,source:h.source});else{let y=A==="prefix",v=y||p.value.endsWith(n)?p.value:p.value+n;o.push({type:y?"prefix":"context",value:H7(v),weight:h.weight,componentPath:p.path,nodeStatistics:p.statistics,chunks:g,source:h.source,index:y?void 0:h.index})}return!0}),!l)throw new Error(`Node of type ${tk.name} not found`);if(s.length>1)throw new Error("Only one suffix is allowed");let d=s.length===1?s[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:o,suffixBlock:d,componentStatistics:c}}},nYt=[...xEe,(t,e,r)=>KZ(t)?{...r,index:rYt()}:r];f();function wee(t,e,r){let n=DZ(r,"Trait");for(let s of n)iYt(t,e,s.data,s.providerId);return n.flatMap(s=>s.data).sort((s,c)=>(s.importance??0)-(c.importance??0))}a(wee,"getTraitsFromContextItems");function iYt(t,e,r,n){let o=t.get(ml).getStatisticsForCompletion(e);r.forEach(s=>{o.addExpectations(n,[[s,"included"]])})}a(iYt,"setupExpectationsForTraits");var oYt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function _ee(t,e,r,n,o,s){if(r.length>0){let c={};c.detectedLanguageId=n,c.languageId=o;for(let u of r){let d=oYt.get(u.name);d&&(c[d]=u.value)}let l=s.extendedBy(c,{});return Pt(e,t,l)}}a(_ee,"ReportTraitsTelemetry");f();f();f();var See=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{a(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let o=typeof e=="function"?e():e;this.states[r]=o}let n=a(o=>{let s=typeof o=="function"?o(this.states[r]):o;this.states[r]=s,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},Ree=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{a(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var kee=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{a(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,o){if(!e.children&&!e.lifecycle)return e;let s=e;if(e.lifecycle?.isRemountRequired()){let l=this.collectChildPaths(e);s=this.virtualizeElement(e.component,r,n);let u=this.collectChildPaths(s);this.cleanupState(l,u)}else if(e.children){let l=[];for(let u=0;u<e.children.length;u++){let d=e.children[u];if(d){let p=this.reconcileNode(d,e.path,u,o);p!==void 0&&l.push(p)}}s.children=l}return s}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(sYt(e.type)){let o=e.type(e.props.children),s=r!=="$"?`[${n}]`:"",c=`${r}${s}.${o.type}`,l=o.children.map((u,d)=>this.virtualizeElement(u,c,d));return this.ensureUniqueKeys(l),{name:o.type,path:c,children:l.flat().filter(u=>u!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,o){let s=n.props.key?`["${n.props.key}"]`:`[${r}]`,c=`${e}${s}.${o.name}`,l=new WEe(this.getOrCreateLifecycleData(c)),u=o(n.props,l),m=(Array.isArray(u)?u:[u]).map((h,g)=>this.virtualizeElement(h,c,g)).flat().filter(h=>h!==void 0);return this.ensureUniqueKeys(m),{name:o.name,path:c,props:n.props,children:m,component:n,lifecycle:l}}ensureUniqueKeys(e){let r=new Map;for(let o of e){if(!o)continue;let s=o.props?.key;s&&r.set(s,(r.get(s)||0)+1)}let n=Array.from(r.entries()).filter(([o,s])=>s>1).map(([o])=>o);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new HEe([])),this.lifecycleData.get(e)}createPipe(){return{pump:a(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},HEe=class{static{a(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},WEe=class{constructor(e){this.lifecycleData=e;this.stateHook=new See(e.state),this.dataHook=new Ree(r=>{e._updateTimeMs=r})}static{a(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function sYt(t){return typeof t=="function"&&"isFragmentFunction"in t}a(sYt,"isFragmentFunction");var z7=class{static{a(this,"VirtualPrompt")}constructor(e){this.reconciler=new kee(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let o of e.children??[]){let s=this.snapshotNode(o,r);if(s==="cancelled")return"cancelled";s!==void 0&&n.push(s)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};function Fp(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}a(Fp,"isCompletionRequestData");var $Ee={default:{promptFunction:HZe,renderer:V3},splitContext:{promptFunction:UZe,renderer:Tee}};function HZe(t){return tn(qA,{children:[tn(mEe,{children:[tn(tee,{ctx:t,weight:.7}),tn(Iee,{weight:.6}),tn(zZ,{ctx:t,weight:.9}),tn(bee,{ctx:t,weight:.8}),tn(Aee,{ctx:t,weight:.99})]}),tn(Q7,{weight:1})]})}a(HZe,"defaultCompletionsPrompt");var Pee=class{constructor(e,r,n){this.ctx=e;this.promptOrdering=n??"default",this.virtualPrompt=r??new z7(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{a(this,"ComponentsCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:o},s){let{maxPromptLength:c,suffixPercent:l,suffixMatchThreshold:u}=nN(this.ctx,n,r.textDocument.detectedLanguageId),d=await this.failFastPrompt(r.textDocument,r.position,l,s);if(d)return d;let p=o?.separateContext?"splitContext":"default";this.setPromptOrdering(p);let m=performance.now(),{traits:h,codeSnippets:g,turnOffSimilarFiles:A,resolvedContextItems:y}=await this.resolveContext(e,r,n,s,o);if(await this.updateComponentData(r.textDocument,r.position,h,g,n,A,c,s,o,u,o?.tokenizer),s?.isCancellationRequested)return Hx;let v=this.virtualPrompt.snapshot(s),b=v.status;if(b==="cancelled")return Hx;if(b==="error")return this.errorPrompt(v.error);let I=this.renderer.render(v.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:c,suffixPercent:l,languageId:r.textDocument.detectedLanguageId},s);if(I.status==="cancelled")return Hx;if(I.status==="error")return this.errorPrompt(I.error);let[_,k]=lw(I.prefix),N={...I,prefix:_},F;if($3(this.ctx,n)){let Y=BZ(I.metadata.componentStatistics);this.ctx.get(ml).getStatisticsForCompletion(e).computeMatch(Y),F=MZ(this.ctx,e,y),pn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(F)}'`)}let O=performance.now();return this.resetIfEmpty(I),this.successPrompt(N,O,m,k,F)}async updateComponentData(e,r,n,o,s,c,l,u,d={},p,m){let h=this.createRequestData(e,r,s,u,d,l,n,o,c,p,m);await this.pipe.pump(h)}async resolveContext(e,r,n,o,s={}){let c=[],l,u,d=!1;if($3(this.ctx,n)){c=await this.ctx.get(Lp).resolution(e);let{textDocument:p}=r,m=c.filter(LZ);cYt(this.ctx,p.detectedLanguageId,m,n)||(d=!0),l=wee(this.ctx,e,m),_ee("contextProvider.traits",this.ctx,l,p.detectedLanguageId,p.detectedLanguageId,n),u=await VZ(this.ctx,e,m,p.detectedLanguageId)}return{traits:l,codeSnippets:u,turnOffSimilarFiles:d,resolvedContextItems:c}}async failFastPrompt(e,r,n,o){if(o?.isCancellationRequested)return Hx;if((await this.ctx.get(gc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return Nee;if((n>0?e.getText().length:e.offsetAt(r))<Dee)return Bee}createRequestData(e,r,n,o,s,c,l,u,d,p,m){return{document:e,position:r,telemetryData:n,cancellationToken:o,data:s.data,traits:l,codeSnippets:u,turnOffSimilarFiles:d,suffixMatchThreshold:p,maxPromptTokens:c,tokenizer:m}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,o,s){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:o,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:s}}errorPrompt(e){return Xa(this.ctx,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),iN}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new z7(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){return($Ee[this.promptOrdering]?.promptFunction??HZe)(this.ctx)}getRenderer(){let e=$Ee[this.promptOrdering]??$Ee.default;return new e.renderer}};function cYt(t,e,r,n){let o=["cpp","c"];return OZe(t,n)||o.includes(e)||!r.some(c=>c.data.some(l=>l.type==="CodeSnippet"))}a(cYt,"similarFilesEnabled");f();f();f();var GZe=2e4,WZe=0,$Ze=new vr;function VZe(t,e,r,n){WZe++;let o=r.promptOpts?.tokenizer??"o200k_base",s=performance.now(),{root:c,mask:l,statistics:u}=t.snapshot(r,n),d=performance.now(),p=new Set(l),m=$Ze?.get(c.id),h;if(m&&m.budget>=e&&m.render.cost<=e&&m.tokenizer===o&&p.size===m.mask.size&&[...p].every(I=>m.mask.has(I)))h=m.render;else{let I=Xi(o);h=dVe(c,{budget:e,mask:l,costFunction:a(k=>I.tokenLength(k),"costFunction")}),$Ze.set(c.id,{budget:e,mask:p,tokenizer:o,render:h})}let{text:g,cost:A,renderedNodes:y}=h,v=performance.now();for(let[I,_]of u?.entries()??[])_.actualTokens=y.get(I)?.cost??0;let b={renderId:WZe,rendererName:"renderNode",tokenizer:o,elisionTimeMs:v-d,renderTimeMs:d-s,updateDataTimeMs:0,componentStatistics:[{componentPath:t.name,actualTokens:A}]};return{root:c,renderedNodes:y,text:g,cost:A,metadata:b}}a(VZe,"renderWithMetadata");function zZe(t,e){return r=>{let n=r.text.join("")+`
`;return Ul(e,n,()=>t.tokenLength(n)+1)}}a(zZe,"cachedLineCostFunction");function KZe(t,e,r){let o=t.split(`
`).map(p=>({id:rc(),text:[p],children:[],canMerge:!0})),s=[""];o.length>=1&&s.push(...Array(o.length-1).fill(`
`),"");let c={id:rc(),text:s,children:o,canMerge:!0},u=c7(c,a(p=>p.id===c.id?0:e(p),"nodeCostFunction")),d=r?o.length:1;for(let p of u.children)p.weight=d*Math.max(1,p.cost),d+=r?-1:1;return u}a(KZe,"getLinewiseNode");var Mee=class{constructor(){this.name="basicPrefix";this.costCache=new vr(GZe)}static{a(this,"BasicPrefixComponent")}snapshot(e){let{completionState:r,promptOpts:n}=e,o=r.textDocument.getText({start:{line:0,character:0},end:r.position}),s=Xi(n?.tokenizer),c=zZe(s,this.costCache);return{root:KZe(o,c,!1)}}},jZe={root:OT,text:"",cost:0},Lee=class{constructor(e){this.ctx=e;this.name="cachedSuffix";this.cache=new vr(5);this.costCache=new vr(GZe)}static{a(this,"CachedSuffixComponent")}snapshot(e){return{root:this.getCachedSuffix(e).root}}estimatedCost(e,r){return this.getCachedSuffix(e).cost}getCachedSuffix(e){let{completionState:r,telemetryData:n,promptOpts:o}=e,c=r.textDocument.getText({start:r.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}}).replace(/^.*/,"").trimStart();if(c==="")return jZe;let l=this.cache.get(r.textDocument.uri)||jZe;if(l.text===c)return l;let u=this.ctx.get(Lt).suffixMatchThreshold(n);if(l.text!==""){let g=new YB,A=g.takeFirstTokens(c,O7);if(A.tokens.length>0&&100*YZ(A.tokens,g.takeFirstTokens(l.text,O7).tokens)?.score<u*A.tokens.length)return l}let d=Xi(o?.tokenizer),p=zZe(d,this.costCache),m=KZe(c,p,!0),h=m.children.reduce((g,A)=>g+A.cost+1,0);return{root:m,cost:h,text:c}}},Fee=class{constructor(){this.name="traitProvider"}static{a(this,"TraitComponent")}snapshot(e,r){let{promptOpts:n}=e,o=Xi(n?.tokenizer);if(!r||r.traits.length===0)return{root:OT};let s=new Map,c=0,l=[],u=new Map;for(let h of r.traits){let g=rc(),A=`${h.name}: ${h.value}`,y={id:g,text:[A],children:[],cost:o.tokenLength(A),weight:0,elisionMarker:"",canMerge:!0,requireRenderedChild:!0};l.push(y),u.set(g,{componentPath:h.id,source:h,expectedTokens:y.cost}),s.set(g,h.importance??0),c+=h.importance??0}c=Math.max(c,1);let p=[`Related context:
`,...new Array(l.length).fill(`
`)],m={id:rc(),text:p,children:l,cost:0,weight:0,elisionMarker:"",canMerge:!0,requireRenderedChild:!0};return a7(m,h=>(s.get(h.id)??0)/c),{root:m,statistics:u}}},Oee=class{constructor(e){this.ctx=e;this.name="contextProvider"}static{a(this,"CodeSnippetComponent")}snapshot(e,r){let{promptOpts:n}=e,o=Xi(n?.tokenizer);if(!r||r.codeSnippets.length===0)return{root:OT};let s=new Map;for(let g of r.codeSnippets){let A=g.uri;Ul(s,A,()=>[]).push(g)}let c=new Map,l=[],u=new Map,d=0,p=this.ctx.get(Ar);for(let[g,A]of s.entries()){let y=p.getRelativePath({uri:g})??g,b=[`Compare ${A.length>1?"these snippets":"this snippet"} from ${y}:
`,...new Array(A.length).fill(`
`)],I=[];for(let _ of A){let k=rc();u.set(k,_.importance??0);let N={id:k,text:[_.value],children:[],cost:o.tokenLength(_.value),weight:_.importance??0,elisionMarker:"",canMerge:!0,requireRenderedChild:!1};I.push(N),d+=_.importance??0,c.set(k,{componentPath:_.id,source:_,expectedTokens:N.cost})}l.push({id:rc(),text:b,children:I,cost:o.tokenLength(b.join("")),weight:0,elisionMarker:"",canMerge:!0,requireRenderedChild:!0})}d=Math.max(d,1);let m=new Array(l.length+1).fill(""),h={id:rc(),text:m,children:l,cost:0,weight:0,elisionMarker:"",canMerge:!0,requireRenderedChild:!0};return a7(h,g=>(u.get(g.id)??0)/d),{root:h,statistics:c}}},Qee=class{constructor(e,r){this.name=e;this.components=r}static{a(this,"ConcatenatedContextComponent")}snapshot(e,r){let n=this.components.map(d=>d.snapshot(e,r)),o=n.map(d=>d.root).filter(d=>d.id!==OT.id);if(o.length===0)return{root:OT};let s=["",...Array(o.length-1).fill(`
`),""],c={id:rc(),text:s,children:o,cost:0,weight:0,elisionMarker:"",canMerge:!0,requireRenderedChild:!1},l=[],u=new Map;for(let d of n){for(let[p,m]of d.statistics?.entries()??[])u.set(p,m);d.mask&&l.push(...d.mask)}return{root:c,mask:l,statistics:u}}};var lYt=.8,Uee=class{constructor(e,r){this.ctx=e;this.components=r;this.renderId=0}static{a(this,"CascadingPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}getComponentAllocation(e){let r=this.ctx.get(Lt).suffixPercent(e),n=this.ctx.get(Lt).stableContextPercent(e),o=this.ctx.get(Lt).volatileContextPercent(e);if(r<0||r>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${r}`);if(n<0||n>100)throw new Error(`stableContextPercent must be between 0 and 100, but was ${n}`);if(o<0||o>100)throw new Error(`volatileContextPercent must be between 0 and 100, but was ${o}`);let s=100-r-n-o;if(s<=1||s>100)throw new Error(`prefixPercent must be between 1 and 100, but was ${s}`);return{prefix:s/100,suffix:r/100,stableContext:n/100,volatileContext:o/100}}async createPromptUnsafe(e,r){this.renderId++;let{completionId:n,completionState:o,telemetryData:s,promptOpts:c}=e,l=await this.failFastPrompt(o.textDocument,r);if(l)return l;let u=performance.now(),d;$3(this.ctx,s)&&(d=await this.resolveContext(n,o,s,r));let p=performance.now()-u,m={},h={renderId:this.renderId,rendererName:"w",tokenizer:c?.tokenizer??"o200k_base",elisionTimeMs:0,renderTimeMs:0,updateDataTimeMs:p,componentStatistics:[]},g=o.textDocument.detectedLanguageId,{maxPromptLength:A}=nN(this.ctx,s,g),y=this.getComponentAllocation(s),v=y.suffix*A,b=this.components.suffix.estimatedCost?.(e,d),I=["stableContext","volatileContext","prefix","suffix"];v>lYt*(b??0)&&(I=["stableContext","volatileContext","suffix","prefix"]);let _=0;for(let V of I){let U=_+A*y[V],H=VZe(this.components[V],U,e,d);_=U-H.cost,m[V]=H,uYt(h,H.metadata)}let[k,N]=lw(m.prefix.text),F=performance.now(),O=$3(this.ctx,s)?this.telemetrizeContext(n,h.componentStatistics,d?.resolvedContextItems??[]):[],Y=[m.stableContext.text.trim(),m.volatileContext.text.trim()];return{type:"prompt",prompt:{prefix:c?.separateContext?k:iv(Y.join(`
`),g)+`

`+k,prefixTokens:m.prefix.cost+m.stableContext.cost+m.volatileContext.cost,suffix:m.suffix.text,suffixTokens:m.suffix.cost,context:c?.separateContext?Y:void 0,isFimEnabled:m.suffix.text.length>0},computeTimeMs:F-u,trailingWs:N,neighborSource:new Map,metadata:h,contextProvidersTelemetry:O}}async resolveContext(e,r,n,o){let s=await this.ctx.get(Lp).resolution(e),{textDocument:c}=r,l=s.filter(LZ),u=wee(this.ctx,e,l);_ee("contextProvider.traits",this.ctx,u,c.detectedLanguageId,c.detectedLanguageId,n);let d=await VZ(this.ctx,e,l,c.detectedLanguageId);return{traits:u,codeSnippets:d,resolvedContextItems:s}}telemetrizeContext(e,r,n){let o=BZ(r);this.ctx.get(ml).getStatisticsForCompletion(e).computeMatch(o);let s=MZ(this.ctx,e,n);return pn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(s)}'`),s}async failFastPrompt(e,r){if(r?.isCancellationRequested)return Hx;if((await this.ctx.get(gc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return Nee;if(e.getText().length<Dee)return Bee}errorPrompt(e){return Xa(this.ctx,e,"WorkspaceContextPromptFactory"),iN}};function uYt(t,e){t.elisionTimeMs+=e.elisionTimeMs,t.renderTimeMs+=e.renderTimeMs,t.updateDataTimeMs+=e.updateDataTimeMs,t.componentStatistics.push(...e.componentStatistics)}a(uYt,"aggregateMetadata");f();f();var YZe=Ne(require("events"));var dYt={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10,MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3},jA=class t{constructor(e){this.ctx=e;this.didDispose=!1;this.deferredStart=new kp;this.config=dYt;this.emitter=new YZe.default;this.client=void 0;this.flushUpdatesPromise=void 0;this.nextRequest={};this.lastEvent=void 0;this.emitter.setMaxListeners(27)}static{a(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}get didStart(){return this.client!==void 0}async maybeStart(e,r){if(this.didStart||this.didDispose)return;let n=Ki(this.ctx,$t.UseWorkspaceContextCoordinator);if(n===void 0&&r){let o=await this.ctx.get(Lt).updateExPValuesAndAssignments(r);n=this.isEnabled(o)}n&&this.start(e)}isActive(){return this.didStart&&!this.didDispose&&this.client!==void 0&&this.client.isActive()}get activation(){return this.deferredStart.promise}isEnabled(e){return Ki(this.ctx,$t.UseWorkspaceContextCoordinator)??this.ctx.get(Lt).workspaceContextCoordinator(e)}start(e){!this.didStart&&!this.didDispose&&(this.client=e,this.fileChangeDisposable=this.ctx.get(Ar).onDidChangeTextDocument(r=>{this.nextRequest.changedFiles===void 0&&(this.nextRequest.changedFiles=[]),this.nextRequest.changedFiles.push(r.document.uri)}),this.deferredStart.resolve(),this.loop())}dispose(){this.isActive()&&(this.didDispose=!0,this.emitter.emit(t.DisposeEventName),this.fileChangeDisposable?.dispose(),this.client?.exit())}pushWorkspaceContext(e,r){this.nextRequest.sources={...this.nextRequest.sources,[e]:r}}recordWorkspaceContextActivity(e,r,n){this.nextRequest.recentActivity===void 0&&(this.nextRequest.recentActivity=[]),this.nextRequest.recentActivity.push({sourceId:e,locations:r,timestamp:n})}getLastEvent(){return this.lastEvent}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),An.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),An.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}setContextLanguages(e){this.nextRequest.languages=e}async loop(){try{for(;this.isActive();){let e=this.nextRequest;this.nextRequest={},this.lastEvent=await this.client.updateContext(e),this.emitter.emit(t.UpdateEventName,this.lastEvent),await YC(this.config.UpdateInterval)}}catch(e){PT(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};function JZe(t,e){let r=iu(t,e,"event.WorkspaceContextUpdate");return t.get(jA).onUpdate(r)}a(JZe,"onWorkspaceContextUpdate");f();var qee=class{constructor(e){this.ctx=e;this.name="workspaceContext";this.documents=new Map;this.root=OT;this.disposables=[];this.rootWithPathCache=new vr;this.disposables.push(JZe(e,r=>{(this.nextUpdateTime===void 0||performance.now()>=this.nextUpdateTime)&&setTimeout(()=>{this.update(r)},0)}))}static{a(this,"WorkspaceContextPromptComponent")}snapshot(e){let{completionState:r,telemetryData:n}=e;this.nextUpdateTime=this.lastUpdateTime!==void 0?this.lastUpdateTime+this.ctx.get(Lt).workspaceContextCacheTime(n):performance.now();let o=Ul(this.rootWithPathCache,r.textDocument.uri,()=>{let c=this.getPathMarker(r);return{id:rc(),text:[`${c}
`,""],children:[this.root],cost:1,weight:1,elisionMarker:"",canMerge:!0,requireRenderedChild:!1}}),s=this.getMask(r.textDocument.uri);return{root:o,mask:s}}getRoot(){return this.root}getMask(e){let r=this.documents.get(e);return r===void 0?[]:[r.id]}getPathMarker(e){let r=e.textDocument,n=this.ctx.get(Ar),o=n.getRelativePath(e.textDocument),s={uri:r.uri,source:"",relativePath:o,languageId:r.detectedLanguageId},c=n.findNotebook(r);return s.relativePath&&!c?iv(eee(s),s.languageId):iv(ZZ(s),s.languageId)}update(e){this.rootWithPathCache.clear(),this.documents.clear();for(let[r,n]of Object.entries(e.documents)){let o=this.createAnnotatedDocumentRoot(r,n);n.requireRenderedChild=n.children.length>0,this.documents.set(r,o)}this.root=this.createRootNode(),this.lastUpdateTime=performance.now()}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return{id:rc(),text:e,children:r,cost:1,weight:0,elisionMarker:"",canMerge:!0,requireRenderedChild:!0}}createAnnotatedDocumentRoot(e,r){let n=KC({uri:e,languageId:"UNKNOWN"}),o=this.getDocumentAnnotation(e,n);return{id:rc(),text:[o,`

`],children:[r],cost:1,weight:0,elisionMarker:"",canMerge:!0,requireRenderedChild:!0}}getDocumentAnnotation(e,r){let o=this.ctx.get(Ar).getRelativePath({uri:e});return iv(`Related portions of ${o??e}:
`,r)}dispose(){for(let e of this.disposables)e.dispose();this.disposables=[]}};f();var Hee=class extends Uee{static{a(this,"WorkspaceContextPromptFactory")}constructor(e){let r={stableContext:new qee(e),prefix:new Mee,suffix:new Lee(e),volatileContext:new Qee("volatileContext",[new Fee,new Oee(e)])};super(e,r)}};var XZe=Ne(mi());var Wx=class{static{a(this,"CompletionsPromptFactory")}};function Wee(t,e,r){return new jEe(new GEe(new VEe(t,new Pee(t,e,r),new Hee(t),pYt)))}a(Wee,"createCompletionsPromptFactory");var jEe=class extends Wx{constructor(r){super();this.delegate=r}static{a(this,"SequentialCompletionsPromptFactory")}async prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return Hx;try{return await this.delegate.prompt(r,n)}catch{return iN}}},fYt=1200,GEe=class{constructor(e){this.delegate=e}static{a(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(e,r){let n=new XZe.CancellationTokenSource,o=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,o),new Promise(s=>{setTimeout(()=>{n.cancel(),s(ZZe)},fYt)})])}},VEe=class{constructor(e,r,n,o){this.ctx=e;this.defaultDelegate=r;this.experimentalDelegate=n;this.fn=o}static{a(this,"ExperimentalCompletionsPromptFactory")}async prompt(e,r){return this.fn(this.ctx,e.telemetryData)?this.experimentalDelegate.prompt(e,r):this.defaultDelegate.prompt(e,r)}};function pYt(t,e){let r=t.get(jA);return r.isEnabled(e)&&r.isActive()}a(pYt,"workspaceContextEnabledAndActive");var Dee=10,Bee={type:"contextTooShort"},Nee={type:"copilotContentExclusion"},iN={type:"promptError"},Hx={type:"promptCancelled"},ZZe={type:"promptTimeout"};function lw(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,o=t.slice(0,t.length-n),s=t.slice(o.length);return[r.length==n?o:t,s]}a(lw,"trimLastLine");function oN(t,e,r,n,o,s={}){let l=t.get(Ar).findNotebook(r.textDocument),u=l?.getCellFor(r.textDocument);l&&u&&(r=hYt(r,l,u)),n.extendWithConfigProperties(t),n.sanitizeKeys();let d=QZe(t,n);return t.get(Wx).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...s,separateContext:d}},o)}a(oN,"extractPrompt");function mYt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:iv(n,e)}a(mYt,"addNeighboringCellsToPrompt");function hYt(t,e,r){let o=e.getCells().filter(l=>l.index<r.index&&Cee(r.document.detectedLanguageId,l.document.detectedLanguageId)),s=o.length>0?o.map(l=>mYt(l,r.document.detectedLanguageId)).join(`

`)+`

`:"",c={line:0,character:0};return t.applyEdits([{newText:s,range:{start:c,end:c}}])}a(hYt,"applyEditsForNotebook");function nN(t,e,r){let o=t.get(Lt).maxPromptCompletionTokens(e)-TZ(t),s=YXe(e,r),c=GZ(t,e,r),l=t.get(Lt).suffixPercent(e),u=t.get(Lt).suffixMatchThreshold(e);if(l<0||l>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${l}`);if(u<0||u>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${u}`);return{maxPromptLength:o,similarFilesOptions:c,numberOfSnippets:s,suffixPercent:l,suffixMatchThreshold:u}}a(nN,"getPromptOptions");f();f();var eet=2.98410452738298,tet=-.838732736843507,ret=1.50314646255716,net=-.237798634012662,$ee={python:.314368072478742},iet={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var gYt={link:a(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:a(t=>Math.log(t/(1-t)),"unlink")};function AYt(t,e){let r=Math.min(...Array.from(e.keys()).filter(c=>c>=t)),n=Math.max(...Array.from(e.keys()).filter(c=>c<t)),o=e.get(r),s=e.get(n);return s+(o-s)*(t-n)/(r-n)}a(AYt,"linearInterpolation");var sN=class{static{a(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(o=>o)}contribution(e){return this.coefficient*this.transformation(e)}},zEe=class{constructor(e,r,n){this.link=gYt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let o in n)this.logitsToQuantiles.set(n[o],Number(o))}static{a(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let o of this.coefficients){let s=r[o.name];if(s===void 0)return NaN;n+=o.contribution(s)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return AYt(n,this.logitsToQuantiles)}},oet=new zEe(eet,[new sN("compCharLen",tet,t=>Math.log(1+t)),new sN("meanLogProb",ret),new sN("meanAlternativeLogProb",net)].concat(Object.entries($ee).map(t=>new sN(t[0],t[1]))),iet);function set(t,e){let r={...e.measurements};return Object.keys($ee).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),oet.predict(t,r)}a(set,"ghostTextScoreConfidence");function aet(t,e){let r={...e.measurements};return Object.keys($ee).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),oet.quantile(t,r)}a(aet,"ghostTextScoreQuantile");f();f();var yYt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function jee(t){let e=t.slice();return e.reverse(),cet(e)||cet(e.filter(r=>r.trim().length>0))}a(jee,"isRepetitive");function cet(t){let e=CYt(t);for(let r of yYt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}a(cet,"isRepeatedPattern");function CYt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}a(CYt,"kmp_prefix_function");function vYt(t,e,r,n){let o="}";try{o=pGe(e.detectedLanguageId)??"}"}catch{}return xYt({getLineText:a(s=>e.lineAt(s).text,"getLineText"),getLineCount:a(()=>e.lineCount,"getLineCount")},r,n,o)}a(vYt,"maybeSnipCompletion");function xYt(t,e,r,n){let o=EYt(r),s=o.lines;if(s.length===1)return r;for(let c=1;c<s.length;c++){let l=!0,u=0,d=0;for(let p=0;p+c+d<s.length;p++){let m;for(;;){let y=e.line+1+p+u;if(m=y>=t.getLineCount()?void 0:t.getLineText(y),m!==void 0&&m.trim()==="")u++;else break}let h,g;for(;h=c+p+d,g=h>=s.length?void 0:s[h],g!==void 0&&g.trim()==="";)d++;let A=h===s.length-1;if(!g||!(m&&(A?m.startsWith(g)||g.startsWith(m):m===g&&g.trim()===n))){l=!1;break}}if(l)return s.slice(0,c).join(o.newLineCharacter)}return r}a(xYt,"maybeSnipCompletionImpl");function EYt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}a(EYt,"splitByNewLine");function bYt(t,e,r,n){let o="",s=e.line+1,c=n?r.trim():r;for(;o===""&&s<t.lineCount;){if(o=t.lineAt(s).text,n&&(o=o.trim()),o===c)return!0;s++}return!1}a(bYt,"matchesNextLine");function K7(t,e,r,n,o,s){if(jee(n.tokens)){let l=Kr.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Pt(t,"repetition.detected",l,1),s.info(t,"Filtered out repetitive solution");return}let c={...n};if(bYt(e,r,c.completionText,!o)){let l=Kr.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Pt(t,"completion.alreadyInDocument",l),Pt(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(c.completionText)}),1),s.info(t,"Filtered out solution matching next line");return}return c.completionText=vYt(t,e,r,c.completionText),c.completionText?c:void 0}a(K7,"postProcessChoiceInContext");function uet(t,e,r){let o=t.lineAt(e.line).text.substring(e.character);if(o.length>0){if(r.completionText.indexOf(o)!==-1)return o.length;{let s=-1,c=0;for(let l of o){let u=r.completionText.indexOf(l,s+1);if(u>s)c++,s=u;else break}return c}}return 0}a(uet,"checkSuffix");var met=Ne(TI());var As=new dt("ghostText");var det=20;async function het(t,e,r,n,o,s,c){As.debug(t,`Getting ${s} from network`),r=r.extendedBy();let l=e.isCycling?3:1,u=U3(t,l),d={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:yGe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},p={n:l,temperature:u,code_annotations:!1},m=Ki(t,$t.ModelAlwaysTerminatesSingleline)??t.get(Lt).modelAlwaysTerminatesSingleline(r),h=e.blockMode==="moremultiline"&&zC.isSupported(e.languageId)&&!m;!e.multiline&&!h?p.stop=[`
`]:e.stop&&(p.stop=e.stop),e.maxTokens!==void 0&&(p.max_tokens=e.maxTokens);let g=Date.now(),A={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(u),n:JSON.stringify(l),stop:JSON.stringify(p.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,A);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:l,uiKind:"ghostText",postOptions:p,headers:e.headers,extra:d},v=await t.get(Mp).fetchAndStreamCompletions(t,y,r,o,n);return v.type==="failed"?{type:"failed",reason:v.reason,telemetryData:Ac(r,t)}:v.type==="canceled"?(As.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:v.reason,telemetryData:nw(r)}):c(g,v.getProcessingTime(),v.choices)}catch(y){if(kd(y))return{type:"canceled",reason:"network request aborted",telemetryData:nw(r,{cancelledNetworkRequest:!0})};if(As.exception(t,y,"Error on ghost text request"),t.get(Ap).notifyUser(t,y),V4(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:Ac(r,t)}}}a(het,"genericGetCompletionsFromNetwork");function KEe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}a(KEe,"postProcessChoices");async function TYt(t,e,r,n,o){return het(t,e,r,n,o,"completions",async(s,c,l)=>{let d=await l[Symbol.asyncIterator]().next();if(d.done)return As.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:Ac(r,t)};if(n?.isCancellationRequested)return As.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:nw(r)};let p=d.value;if(p===void 0)return As.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:Ac(r,t)};Aet(t,"performance",p,s,c),As.debug(t,`Awaited first result, id:  ${p.choiceIndex}`);let m=KEe(p,e);m&&(Gee(t,e,m),As.debug(t,`GhostText first completion (index ${m?.choiceIndex}): ${JSON.stringify(m?.completionText)}`));let h=(async()=>{let g=m!==void 0?[m]:[];for await(let A of l){if(A===void 0)continue;As.debug(t,`GhostText later completion (index ${A?.choiceIndex}): ${JSON.stringify(A.completionText)}`);let y=KEe(A,e,g);y&&(g.push(y),Gee(t,e,y))}})();return eA(t)&&await h,m?{type:"success",value:[YEe(m,{forceSingleLine:!1}),h],telemetryData:Ac(r,t),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:Ac(r,t)}})}a(TYt,"getCompletionsFromNetwork");async function wYt(t,e,r,n,o){return het(t,e,r,n,o,"all completions",async(s,c,l)=>{let u=[];for await(let d of l){if(n?.isCancellationRequested)return As.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:nw(r)};let p=KEe(d,e,u);p&&u.push(p)}if(u.length>0){for(let d of u)Gee(t,e,d);Aet(t,"cyclingPerformance",u[0],s,c)}return{type:"success",value:[u,Promise.resolve()],telemetryData:Ac(r,t),telemetryBlob:r,resultType:3}})}a(wYt,"getAllCompletionsFromNetwork");function YEe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,o=n.match(/^\r?\n/);o?r.completionText=o[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}a(YEe,"makeGhostAPIChoice");function fet(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}a(fet,"takeNLines");async function _Yt(t,e,r,n,o,s,c,l){let u=t.get(Lt).multilineAfterAcceptLines(l),d=t.get(RA).forLanguage(t,e.textDocument.detectedLanguageId,l);switch(d){case"server":return c?{blockMode:"parsing",requestMultiline:!0,finishedCb:fet(u),stop:[`

`],maxTokens:det*u}:{blockMode:"server",requestMultiline:!0,finishedCb:a(p=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let p;try{p=await LYt(t,d,e.textDocument,e.position,s,c,n)}catch{p={requestMultiline:!1}}if(!c&&p.requestMultiline&&t.get(Lt).singleLineUnlessAccepted(l)&&(p.requestMultiline=!1),p.requestMultiline){let m;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?m=Is.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):m=e.position,{blockMode:d,requestMultiline:!0,...pet(t,d,e.textDocument,m,p.blockPosition,r,!0,n.prompt,l)}}if(c){let m={blockMode:"parsing",requestMultiline:!0,finishedCb:fet(u),stop:[`

`],maxTokens:det*u};return d==="moremultiline"&&(m.blockMode="moremultiline"),m}return{blockMode:d,requestMultiline:!1,...pet(t,d,e.textDocument,e.position,p.blockPosition,r,!1,n.prompt,l)}}}}a(_Yt,"getGhostTextStrategy");function pet(t,e,r,n,o,s,c,l,u){if(c&&e==="moremultiline"&&zC.isSupported(r.detectedLanguageId)){let d=o==="empty-block"||o==="block-end"?t.get(Lt).longLookaheadSize(u):t.get(Lt).shortLookaheadSize(u);return{finishedCb:new wZ(t,s,r.detectedLanguageId,!1,d,(m,h)=>{let g={prefix:s+m,prompt:{...l,prefix:l.prefix+m}};Gee(t,g,h)}).getFinishedCallback(),maxTokens:t.get(Lt).maxMultilineTokens(u)}}return{finishedCb:c?L7(t,r,n):d=>{}}}a(pet,"buildFinishedCallback");var SYt={isCycling:!1,promptOnly:!1,isSpeculative:!1};function RYt(t,e,r){let n=Ki(t,$t.CompletionsDebounce)??t.get(Lt).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let o=Fa()-r.issuedTime;return Math.max(0,n-o)}a(RYt,"getRemainingDebounceMs");function Y7(t,e,r){return r?.isCancellationRequested||e!==t.get(Op).currentRequestId}a(Y7,"inlineCompletionRequestCancelled");async function kYt(t,e,r,n,o,s){let c=n.issuedTime,l=[];function u(v){let b=Fa();l.push([v,b-c]),c=b}a(u,"recordPerformance"),u("telemetry");let d=t.get(Lt);if(Y7(t,r,o))return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:Ac(n,t)};let p=DYt(e.textDocument,e.position);if(p===void 0)return As.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:Ac(n,t)};let m=ST(t,n),h={...SYt,...s,tokenizer:m.tokenizer},g=await oN(t,r,e,n,void 0,h);if(u("prompt"),g.type==="copilotContentExclusion")return As.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:Ac(n,t)};if(g.type==="contextTooShort")return As.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:Ac(n,t)};if(g.type==="promptError")return As.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:Ac(n,t)};if(h.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:g};if(g.type==="promptCancelled")return As.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:Ac(n,t)};if(g.type==="promptTimeout")return As.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:Ac(n,t)};if(g.prompt.prefix.length===0&&g.prompt.suffix.length===0)return As.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:Ac(n,t)};let A=RYt(t,h,n);return A>0&&(As.debug(t,`Debouncing ghost text request for ${A}ms`),await YC(A),Y7(t,r,o))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:Ac(n,t)}:t.get(Wo).withProgress(async()=>{let[v]=lw(e.textDocument.getText(Is.range(Is.position(0,0),e.position))),b=t.get(Op).hasAcceptedCurrentCompletion(v,g.prompt.suffix),I=g.prompt,_=await _Yt(t,e,v,g,h.isCycling,p,b,n);u("strategy");let k=PYt(t,v,I,_.requestMultiline);u("cache");let N=RT(t,e.textDocument.uri),F={blockMode:_.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:N,engineModelId:m.modelId,ourRequestId:r,prefix:v,prompt:g.prompt,multiline:_.requestMultiline,indentation:HZ(e.textDocument,e.position),isCycling:h.isCycling,headers:m.headers,stop:_.stop,maxTokens:_.maxTokens,afterAccept:b};F.headers={...F.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":h.isSpeculative?"true":"false"};let O=qYt(t,e.textDocument,F,e.position,g,n,m,h);if(k===void 0&&!h.isCycling&&t.get(Np).shouldWaitForAsyncCompletions(v,g.prompt)){let j=await t.get(Np).getFirstMatchingRequestWithTimeout(r,v,g.prompt,h.isSpeculative,O);if(u("asyncWait"),j){let Z=!_.requestMultiline;k=[[YEe(j[0],{forceSingleLine:Z})],4]}if(Y7(t,r,o))return As.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:Ac(O,t)}}let Y=_.blockMode==="moremultiline"&&zC.isSupported(e.textDocument.detectedLanguageId);if(k!==void 0&&(k[0]=k[0].map(j=>K7(t,e.textDocument,e.position,j,Y,As)).filter(j=>j!==void 0)),k!==void 0&&k[0].length===0)return As.debug(t,`Found empty inline suggestions locally via ${q3(k[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:Ac(O,t)};if(k!==void 0&&k[0].length>0&&(!h.isCycling||k[0].length>1))As.debug(t,`Found inline suggestions locally via ${q3(k[1])}`);else{if(h.isCycling){let j=await wYt(t,F,O,o,_.finishedCb);if(j.type==="success"){let Z=k?.[0]??[];j.value[0].forEach(ie=>{Z.findIndex(ne=>ne.completionText.trim()===ie.completionText.trim())===-1&&Z.push(ie)}),k=[Z,3]}else if(k===void 0)return j}else{let j=a((re,fe)=>(t.get(Np).updateCompletion(r,re),_.finishedCb(re,fe)),"finishedCb"),Z=new An.CancellationTokenSource,ie=TYt(t,F,O,Z.token,j);t.get(Np).queueCompletionRequest(r,v,g.prompt,Z,ie);let ne=await t.get(Np).getFirstMatchingRequest(r,v,g.prompt,h.isSpeculative);if(ne===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:Ac(O,t)};k=[[ne[0]],4]}u("network")}if(k===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:Ac(O,t)};let[z,V]=k,U=z.map(j=>K7(t,e.textDocument,e.position,j,Y,As)).filter(j=>j!==void 0),H=Ki(t,$t.CompletionsDelay)??d.completionsDelay(n),ee=Fa()-n.issuedTime,J=Math.max(H-ee,0);if(V!==2&&!h.isCycling&&J>0&&(As.debug(t,`Waiting ${J}ms before returning completion`),await YC(J),Y7(t,r,o)))return As.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:nw(O)};let G=[];for(let j of U){let Z=UYt(t,e.textDocument,F,j,O),ie=p?uet(e.textDocument,e.position,j):0,re={completion:FYt(j.choiceIndex,j.completionText,g.trailingWs),telemetry:Z,isMiddleOfTheLine:p,suffixCoverage:ie,copilotAnnotations:j.copilotAnnotations,clientCompletionId:j.clientCompletionId};G.push(re)}return O.properties.clientCompletionId=G[0]?.clientCompletionId,O.measurements.foundOffset=G?.[0]?.telemetry?.measurements?.foundOffset??-1,As.debug(t,`Produced ${G.length} results from ${q3(V)} at ${O.measurements.foundOffset} offset`),Y7(t,r,o)?{type:"canceled",reason:"after post processing completions",telemetryData:nw(O)}:(h.isSpeculative||t.get(Op).setGhostText(v,g.prompt.suffix,U,V),u("complete"),{type:"success",value:[G,V],telemetryData:Ac(O,t),telemetryBlob:O,resultType:V,performanceMetrics:l})})}a(kYt,"getGhostTextWithoutAbortHandling");async function JEe(t,e,r,n){let o=wr();t.get(Op).currentRequestId=o;let s=await QYt(t,e.textDocument,o,n);await vR.catch(()=>{});try{return t.get(Lp).schedule(e,o,n?.opportunityId??"",s,r,n),t.get(tv).notifyRequest(e,o,s,r,n),await kYt(t,e,o,s,r,n)}catch(c){if(kd(c))return{type:"canceled",reason:"aborted at unknown location",telemetryData:nw(s,{cancelledNetworkRequest:!0})};throw c}}a(JEe,"getGhostText");function PYt(t,e,r,n){let o=t.get(Op).getCompletionsForUserTyping(e,r.suffix),s=OYt(t,e,r.suffix,n);if(o&&o.length>0){let c=(s??[]).filter(l=>!o.some(u=>u.completionText===l.completionText));return[o.concat(c),2]}if(s&&s.length>0)return[s,1]}a(PYt,"getLocalInlineSuggestion");function DYt(t,e){let r=BYt(e,t),n=NYt(e,t);return r&&!n?void 0:r&&n}a(DYt,"isInlineSuggestion");function BYt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}a(BYt,"isMiddleOfTheLine");function NYt(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}a(NYt,"isValidMiddleOfTheLinePosition");function MYt(t,e){return e.lineAt(t).text.trim().length===0}a(MYt,"isNewLine");var $x=class t{constructor(e=!1){this.requestMultilineOverride=e}static{a(this,"ForceMultiLine")}static{this.default=new t}};async function LYt(t,e,r,n,o,s,c){if(t.get($x).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Pt(t,"ghostText.longFileMultilineSkip",Kr.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&zC.isSupported(r.detectedLanguageId))return s?{requestMultiline:!0,blockPosition:await hGe(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&MYt(n,r))return{requestMultiline:!0};let u=!1;return!o&&G0(r.detectedLanguageId)?u=await qZ(r,n):o&&G0(r.detectedLanguageId)&&(u=await qZ(r,n)||await qZ(r,r.lineAt(n).range.end)),u||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(u=tXe(c.prompt,r.detectedLanguageId)>.5),{requestMultiline:u}}return{requestMultiline:!1}}a(LYt,"shouldRequestMultiline");function Gee(t,e,r){t.get(QA).append(e.prefix,e.prompt.suffix,r)}a(Gee,"appendToCache");function FYt(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}a(FYt,"adjustLeadingWhitespace");function OYt(t,e,r,n){let o=t.get(QA).findAll(e,r);return o.length===0?(As.debug(t,"Found no completions in cache"),[]):(As.debug(t,`Found ${o.length} completions in cache`),o.map(s=>YEe(s,{forceSingleLine:!n})))}a(OYt,"getCompletionsFromCache");async function QYt(t,e,r,n){let o={headerRequestId:r};n?.opportunityId&&(o.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(o.completionsActive="true"),n?.isSpeculative&&(o.reason="speculative");let s=Kr.createAndMarkAsIssued(o);return await t.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},s)}a(QYt,"createTelemetryWithExp");function UYt(t,e,r,n,o){let s=n.requestId,c={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(c.originalChoiceIndex=c.choiceIndex,c.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let l={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(l.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(l.meanAlternativeLogProb=n.meanAlternativeLogProb);let u=n.telemetryData.extendedBy(c,l);return u.issuedTime=o.issuedTime,u.measurements.timeToProduceMs=performance.now()-o.issuedTime,get(u,e),u.extendWithRequestId(s),u.measurements.confidence=set(t,u),u.measurements.quantile=aet(t,u),As.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${u.measurements.confidence} (expected as good or better than about ${u.measurements.quantile} of all suggestions)`),u}a(UYt,"telemetryWithAddData");function qYt(t,e,r,n,o,s,c,l){let u={languageId:e.detectedLanguageId};u.afterAccept=r.afterAccept.toString(),u.isSpeculative=l.isSpeculative.toString();let d=s.extendedBy(u);get(d,e);let p=r.repoInfo;d.properties.gitRepoInformation=p===void 0?"unavailable":p===0?"pending":"available",p!==void 0&&p!==0&&(d.properties.gitRepoUrl=p.url,d.properties.gitRepoHost=p.hostname,d.properties.gitRepoOwner=p.owner,d.properties.gitRepoName=p.repo,d.properties.gitRepoPath=p.pathname),d.properties.engineName=c.modelId,d.properties.engineChoiceSource=c.engineChoiceSource,d.properties.isMultiline=JSON.stringify(r.multiline),d.properties.isCycling=JSON.stringify(r.isCycling);let m=e.lineAt(n.line),h=e.getText(Is.range(m.range.start,n)),g=e.getText(Is.range(n,m.range.end)),A=Array.from(o.neighborSource.entries()).map(I=>[I[0],I[1].map(_=>(0,met.SHA256)(_).toString())]),y={beforeCursorWhitespace:JSON.stringify(h.trim()===""),afterCursorWhitespace:JSON.stringify(g.trim()===""),neighborSource:JSON.stringify(A),blockMode:r.blockMode},v={...$D(o.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:o.computeTimeMs};o.metadata&&(y.promptMetadata=JSON.stringify(o.metadata)),o.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(o.contextProvidersTelemetry));let b=d.extendedBy(y,v);return Pt(t,"ghostText.issued",b),d}a(qYt,"telemetryIssued");function get(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}a(get,"addDocumentTelemetry");function Aet(t,e,r,n,o){let s=Date.now()-n,c=s-o,l=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:s,processingTimeMs:o,deltaMs:c,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});l.extendWithRequestId(r.requestId),Pt(t,`ghostText.${e}`,l)}a(Aet,"telemetryPerformance");var Op=class{constructor(){this.choices=[]}static{a(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,o){o!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&yet(this.choices[0].completionText,n))return HYt(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let o=n===this.choices?.[0].completionText,s=this.choices?.[0].finishReason;return o&&s==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function HYt(t,e){return t.filter(r=>yet(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}a(HYt,"adjustChoicesStart");function yet(t,e){return t.startsWith(e)&&t.length>e.length}a(yet,"startsWithAndExceeds");f();f();f();var uk=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let o=e.get(Ar);this._tracker=o.onDidChangeTextDocument(s=>{if(s.document.uri===r){for(let c of s.contentChanges)if(c.rangeOffset+c.rangeLength<=this.offset){let l=c.text.length-c.rangeLength;this._offset=this._offset+l}}})}static{a(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};f();var XEe=class t{constructor(e,r,n=[],o,s,c){this._textDocument=e;this._position=r;this.originalPosition=o??An.Position.create(r.line,r.character),this.originalVersion=s??e.version,this.originalOffset=c??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{a(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,o=this._position,s=n.offsetAt(o),c=this.editsWithPosition;for(let{range:l,newText:u}of e){let d=n.getText(l),p=n.offsetAt(l.end);if(n=n.applyEdits([{range:l,newText:u}]),s<n.offsetAt(l.start)){let h={range:l,newText:u,positionAfterEdit:An.Position.create(o.line,o.character)};r&&(h.source="selectedCompletionInfo"),c.push(h);continue}s<p&&(s=p),s+=u.length-d.length,o=n.positionAt(s);let m={range:l,newText:u,positionAfterEdit:An.Position.create(o.line,o.character)};r&&(m.source="selectedCompletionInfo"),c.push(m)}return this.updateState(n,o,c)}};function sv(t,e){return new XEe(t,e)}a(sv,"createCompletionState");f();f();f();f();f();f();var Cet="code-referencing";var Qp=new dt(Cet);var WYt=3e3,ZEe=2,vet=256,xet=Math.log(vet)/Math.log(ZEe)/ZEe,GA={connection:"disabled",maxAttempts:xet,retryAttempts:0,initialWait:!1},Vee,zee=[];function $Yt(){if(Vee)return Vee;function t(b){return zee.push(b),()=>{let I=zee.indexOf(b);I!==-1&&zee.splice(I,1)}}a(t,"subscribe");function e(){for(let b of zee)b()}a(e,"afterUpdateConnection");function r(b){GA.connection!==b&&(GA.connection=b,e())}a(r,"updateConnection");function n(){return GA.connection==="connected"}a(n,"isConnected");function o(){return GA.connection==="disconnected"}a(o,"isDisconnected");function s(){return GA.connection==="retry"}a(s,"isRetrying");function c(){return GA.connection==="disabled"}a(c,"isDisabled");function l(){r("connected"),m(!1)}a(l,"setConnected");function u(){r("disconnected")}a(u,"setDisconnected");function d(){r("retry")}a(d,"setRetrying");function p(){r("disabled")}a(p,"setDisabled");function m(b){GA.initialWait!==b&&(GA.initialWait=b)}a(m,"setInitialWait");function h(b,I=WYt){s()||(d(),m(!0),A(b,I))}a(h,"enableRetry");function g(){return GA.initialWait}a(g,"isInitialWait");async function A(b,I){Qp.info(b,`Attempting to reconnect in ${I}ms.`),await y(I),m(!1);let _=b.get(Lr);function k(N,F){if(N>vet){Qp.info(F,"Max retry time reached, disabling."),p();return}let O=a(async()=>{GA.retryAttempts=Math.min(GA.retryAttempts+1,xet);try{Qp.info(F,`Pinging service after ${N} second(s)`);let Y=await _.fetch(new URL("_ping",z4(F)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(Y.status!==200||!Y.ok)k(N**2,F);else{Qp.info(F,"Successfully reconnected."),l();return}}catch{k(N**2,F)}},"tryAgain");setTimeout(()=>void O(),N*1e3)}a(k,"succeedOrRetry"),Qp.info(b,"Attempting to reconnect."),k(ZEe,b)}a(A,"attemptToPing");let y=a(b=>new Promise(I=>setTimeout(I,b)),"timeout");function v(b){return{dispose:t(b)}}return a(v,"listen"),Vee={setConnected:l,setDisconnected:u,setRetrying:d,setDisabled:p,enableRetry:h,listen:v,isConnected:n,isDisconnected:o,isRetrying:s,isDisabled:c,isInitialWait:g},Vee}a($Yt,"registerConnectionState");var dk=$Yt();f();var xu={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"},J7={[xu.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[xu.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[xu.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function ebe(t){return t===401?xu.Unauthorized:t===400?xu.BadArguments:t===404?xu.NotFound:t===429?xu.RateLimit:t>=500&&t<600?xu.InternalError:t>=600?xu.ConnectionError:xu.Unknown}a(ebe,"getErrorType");function av(t,e,r={}){return{kind:"failure",reason:ebe(Number(t)),code:Number(t),msg:e,meta:r}}a(av,"createErrorResponse");f();var jYt=/^[1-6][0-9][0-9]$/,GYt=/([A-Z][a-z]+)/,VYt="code_referencing",X7=class{constructor(e){this.baseKey=e}static{a(this,"CodeQuoteTelemetry")}buildKey(...e){return[VYt,this.baseKey,...e].join(".")}},tbe=class extends X7{static{a(this,"CopilotOutputLogTelemetry")}constructor(){super("github_copilot_log")}handleOpen({context:e}){let r=this.buildKey("open","count"),n=Kr.createAndMarkAsIssued();Pt(e,r,n)}handleFocus({context:e}){let r=Kr.createAndMarkAsIssued(),n=this.buildKey("focus","count");Pt(e,n,r)}handleWrite({context:e}){let r=Kr.createAndMarkAsIssued(),n=this.buildKey("write","count");Pt(e,n,r)}},kpi=new tbe,rbe=class extends X7{static{a(this,"MatchNotificationTelemetry")}constructor(){super("match_notification")}handleDoAction({context:e,actor:r}){let n=Kr.createAndMarkAsIssued({actor:r}),o=this.buildKey("acknowledge","count");Pt(e,o,n)}handleDismiss({context:e,actor:r}){let n=Kr.createAndMarkAsIssued({actor:r}),o=this.buildKey("ignore","count");Pt(e,o,n)}},Ppi=new rbe,nbe=class extends X7{static{a(this,"SnippyTelemetry")}constructor(){super("snippy")}handleUnexpectedError({context:e,origin:r,reason:n}){let o=Kr.createAndMarkAsIssued({origin:r,reason:n});AA(e,this.buildKey("unexpectedError"),o)}handleCompletionMissing({context:e,origin:r,reason:n}){let o=Kr.createAndMarkAsIssued({origin:r,reason:n});AA(e,this.buildKey("completionMissing"),o)}handleSnippyNetworkError({context:e,origin:r,reason:n,message:o}){if(!r.match(jYt)){Qp.debug(e,"Invalid status code, not sending telemetry",{origin:r});return}let s=n.split(GYt).filter(l=>!!l).join("_").toLowerCase(),c=Kr.createAndMarkAsIssued({message:o});AA(e,this.buildKey(s,r),c)}},Kee=new nbe;var zYt="twirp/github.snippy.v1.SnippyAPI";async function ibe(t,e,r,n){let o;try{o=await t.get(nr).getToken()}catch{return dk.setDisconnected(),av(401,J7[xu.Unauthorized])}if(Qp.info(t,`Calling ${e}`),dk.isRetrying())return av(600,"Attempting to reconnect to the public code matching service.");if(dk.isDisconnected())return av(601,"The public code matching service is offline.");let s;try{s=await t.get(Lr).fetch(Gm(t,o,"origin-tracker",`${zYt}/${e}`),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${o.token}`,...y0(t)},signal:n})}catch{return dk.enableRetry(t),av(602,"Network error detected. Check your internet connection.")}let c;try{c=await s.json()}catch(A){let y=A.message;throw Kee.handleUnexpectedError({context:t,origin:"snippyNetwork",reason:y}),A}if(s.ok)return{kind:"success",...c};let l={...c,code:Number(s.status)},{code:u,msg:d,meta:p}=l,m=Number(u),h=ebe(m),g=d||"unknown error";switch(h){case xu.Unauthorized:return av(u,J7[xu.Unauthorized],p);case xu.BadArguments:return av(u,g,p);case xu.RateLimit:return dk.enableRetry(t,60*1e3),av(u,J7.RateLimitError,p);case xu.InternalError:return dk.enableRetry(t),av(u,J7[xu.InternalError],p);default:return av(u,g,p)}}a(ibe,"call");f();var Yee=E.Object({kind:E.Literal("failure"),reason:E.String(),code:E.Number(),msg:E.String(),meta:E.Optional(E.Any())}),YYt=E.Object({matched_source:E.String(),occurrences:E.String(),capped:E.Boolean(),cursor:E.String(),github_url:E.String()}),Eet=E.Object({source:E.String()}),JYt=E.Object({snippets:E.Array(YYt)}),bet=E.Union([JYt,Yee]),Iet=E.Object({cursor:E.String()}),XYt=E.Object({commit_id:E.String(),license:E.String(),nwo:E.String(),path:E.String(),url:E.String()}),ZYt=E.Object({has_next_page:E.Boolean(),cursor:E.String()}),eJt=E.Object({count:E.Record(E.String(),E.String())}),tJt=E.Object({file_matches:E.Array(XYt),page_info:ZYt,license_stats:eJt}),Tet=E.Union([tJt,Yee]);async function wet(t,e,r){let n=await ibe(t,"Match",{method:"POST",body:XR(Eet,{source:e})},r);return XR(bet,n)}a(wet,"Match");async function _et(t,{cursor:e},r){let n=await ibe(t,"FilesForMatch",{method:"POST",body:XR(Iet,{cursor:e})},r);return XR(Tet,n)}a(_et,"FilesForMatch");f();var Z7=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),Jee=65;function iJt(t){let e=0,r;Z7.lastIndex=0;do if(r=Z7.exec(t),r&&(e+=1),e>=Jee)break;while(r);return e}a(iJt,"lexemeLength");function oJt(t,e){let r=0,n;Z7.lastIndex=0;do if(n=Z7.exec(t),n&&(r+=1,r>=e))return Z7.lastIndex;while(n);return t.length}a(oJt,"offsetFirstLexemes");function Ret(t,e){let r=t.split("").reverse().join(""),n=oJt(r,e);return r.length-n}a(Ret,"offsetLastLexemes");function eQ(t){return iJt(t)>=Jee}a(eQ,"hasMinLexemeLength");function aJt(t){return jC.Check(Yee,t)}a(aJt,"isError");async function ket(t,e){let r=await e();if(aJt(r)){Kee.handleSnippyNetworkError({context:t,origin:String(r.code),reason:r.reason,message:r.msg});return}return r}a(ket,"snippyRequest");function Pet(t){return"kind"in t&&t.kind==="failure"}a(Pet,"isMatchError");async function Det(t,e,r,n){let s=await t.get(Ar).getTextDocument({uri:e});if(!s){Qp.debug(t,`Expected document matching ${e}, got nothing.`);return}let c=s.getText();if(!eQ(c)||!eQ(c))return;let l=r;if(!eQ(r)){let g=c.slice(0,n),A=Ret(g,Jee);l=c.slice(A,n+r.length)}if(!eQ(l))return;let u=await ket(t,()=>wet(t,l));if(!u||Pet(u)||!u.snippets.length){Qp.info(t,"No match found");return}Qp.info(t,"Match found");let{snippets:d}=u,p=d.map(async g=>{let A=await ket(t,()=>_et(t,{cursor:g.cursor}));if(!A||Pet(A))return;let y=A.file_matches,v=A.license_stats;return{match:g,files:y,licenseStats:v}}),h=(await Promise.all(p)).filter(g=>g!==void 0);if(h.length)for(let g of h){let A=new Set(Object.keys(g.licenseStats?.count??{}));A.has("NOASSERTION")&&(A.delete("NOASSERTION"),A.add("unknown"));let y=Array.from(A).sort(),v=n,b=n+g.match.matched_source.length,I=s.positionAt(v),_=s.positionAt(b);await t.get(Nf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:v,offsetEnd:b,version:s.version,location:{start:I,end:_},matchingText:l,details:y.map(k=>({license:k,url:g.match.github_url}))})}}a(Det,"fetchCitations");f();function obe(t,e,r=(n,o)=>n===o?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),o=new Array(e.length+1).fill(0),s=new Array(t.length+1).fill(0),c=new Array(t.length+1).fill(0),l=e[0];for(let d=0;d<t.length+1;d++)d===0?n[d]=1:n[d]=r(t[d-1],l,d-1,0),o[d]=d>0?d-1:0;for(let d=1;d<e.length;d++){let p=s;s=n,n=p,p=c,c=o,o=p,l=e[d],n[0]=d+1;for(let m=1;m<t.length+1;m++){let h=1+s[m],g=1+n[m-1],A=r(t[m-1],l,m-1,d)+s[m-1];n[m]=Math.min(g,h,A),n[m]===A?o[m]=c[m-1]:n[m]===h?o[m]=c[m]:o[m]=o[m-1]}}let u=0;for(let d=0;d<t.length+1;d++)n[d]<n[u]&&(u=d);return{distance:n[u],startOffset:o[u],endOffset:u}}a(obe,"editDistance");function cJt(){return new Map}a(cJt,"emptyLexDictionary");function lJt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}a(lJt,"reverseLexDictionary");function*uJt(t){let e="",r;(l=>(l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other"))(r||={});let n=0;for(let o of t){let s;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(o)?s=0:o===" "?s=1:s=2,s===n&&s!==2?e+=o:(e.length>0&&(yield e),e=o,n=s)}e.length>0&&(yield e)}a(uJt,"lexGeneratorWords");function Bet(t,e,r,n){let o=[],s=0;for(let c of r(t))n(c)&&(e.has(c)||e.set(c,e.size),o.push([e.get(c),s])),s+=c.length;return[o,e]}a(Bet,"lexicalAnalyzer");function Net(t){return t!==" "}a(Net,"notSingleSpace");function Met(t,e,r=uJt){let[n,o]=Bet(t,cJt(),r,Net),[s,c]=Bet(e,o,r,Net);if(s.length===0||n.length===0)return{lexDistance:s.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:s.length};let l=lJt(c),u=s.length,d=l[s[0][0]],p=l[s[u-1][0]];function m(y,v,b,I){if(I===0||I===u-1){let _=l[n[b][0]];return I==0&&_.endsWith(d)||I==u-1&&_.startsWith(p)?0:1}else return y===v?0:1}a(m,"compare");let h=obe(n.map(y=>y[0]),s.map(y=>y[0]),m),g=n[h.startOffset][1],A=h.endOffset<n.length?n[h.endOffset][1]:t.length;return A>0&&t[A-1]===" "&&--A,{lexDistance:h.distance,startOffset:g,endOffset:A,haystackLexLength:n.length,needleLexLength:s.length}}a(Met,"lexEditDistance");f();function uw(t){return t.length===0?0:t.split(`
`).length}a(uw,"countLines");function Let(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}a(Let,"computeCompletionText");var dw=new dt("postInsertion"),Fet=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],Oet=50,dJt=1500,fJt=.5,pJt=500,sbe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function Qet(t,e,r,n,o){let s=await t.get(Nn).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(s.status!=="valid")return dw.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let c=s.document,l=c.getText(),u=l.substring(0,n),d=c.positionAt(n),p=await oN(t,r.properties.headerRequestId,sv(c,d),r),m=p.type==="prompt"?p.prompt:{prefix:u,suffix:"",isFimEnabled:!1};if(m.isFimEnabled&&o!==void 0){let h=l.substring(n,o);return m.suffix=l.substring(o),{prompt:m,capturedCode:h,terminationOffset:0}}else{let h=l.substring(n),g=lEe(u,n,c.detectedLanguageId),y=WXe(g,void 0)(h),v=Math.min(l.length,n+(y?y*2:pJt)),b=l.substring(n,v);return{prompt:m,capturedCode:b,terminationOffset:y??-1}}}a(Qet,"captureCode");function Xee(t,e,r,n,o){o.forEach(({completionText:u,completionTelemetryData:d})=>{dw.debug(t,`${e}.rejected choiceIndex: ${d.properties.choiceIndex}`),xXe(t,e,d)});let s=new uk(t,n,r-1),c=new uk(t,n,r),l=a(async u=>{dw.debug(t,`Original offset: ${r}, Tracked offset: ${s.offset}`);let{completionTelemetryData:d}=o[0],{prompt:p,capturedCode:m,terminationOffset:h}=await Qet(t,n,d,s.offset+1,c.offset),g={hypotheticalPromptJson:JSON.stringify({prefix:p.prefix,context:p.context}),hypotheticalPromptSuffixJson:JSON.stringify(p.suffix)},A=d.extendedBy({...g,capturedCodeJson:JSON.stringify(m)},{timeout:u.seconds,insertionOffset:r,trackedOffset:s.offset,terminationOffsetInCapturedCode:h});dw.debug(t,`${e}.capturedAfterRejected choiceIndex: ${d.properties.choiceIndex}`,A),Pt(t,e+".capturedAfterRejected",A,1)},"checkInCode");Fet.filter(u=>u.captureRejection).map(u=>s.push(iu(t,()=>l(u),"postRejectionTasks"),u.seconds*1e3))}a(Xee,"postRejectionTasks");function tQ(t,e,r,n,o,s,c,l){let u=s.extendedBy({compType:c.compType},{compCharLen:c.acceptedLength,numLines:c.acceptedLines});dw.debug(t,`${e}.accepted choiceIndex: ${u.properties.choiceIndex}`),vXe(t,e,u);let d=r;r=Let(r,c);let p=r.trim(),m=new uk(t,o,n),h=new uk(t,o,n+r.length),g=a(async A=>{await AJt(t,e,p,n,o,A,u,m,h)},"stillInCodeCheck");if(sbe.triggerPostInsertionSynchroneously&&eA(t)){let A=g({seconds:0,captureCode:sbe.captureCode,captureRejection:sbe.captureRejection});t.get(nl).register(A)}else Fet.map(A=>m.push(iu(t,()=>g(A),"postInsertionTasks"),A.seconds*1e3));iu(t,mJt,"post insertion citation check")(t,o,d,r,n,l)}a(tQ,"postInsertionTasks");async function mJt(t,e,r,n,o,s){if(!s||(s.ip_code_citations?.length??0)<1){if(Gj(t)?.getTokenValue("sn")==="1")return;await Det(t,e,n,o);return}let c=await t.get(Ar).getTextDocument({uri:e});if(c){let l=abe(c.getText(),n,Oet,o);l.stillInCodeHeuristic&&(o=l.foundOffset)}for(let l of s.ip_code_citations){let u=hJt(r.length,n.length,l.start_offset);if(u===void 0){dw.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let d=o+u,p=c?.positionAt(d),m=o+gJt(r.length,n.length,l.stop_offset),h=c?.positionAt(m),g=p&&h?c?.getText({start:p,end:h}):"<unknown>";await t.get(Nf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:d,offsetEnd:m,version:c?.version,location:p&&h?{start:p,end:h}:void 0,matchingText:g,details:l.details.citations})}}a(mJt,"citationCheck");function hJt(t,e,r){if(!(e<t&&r>e))return r}a(hJt,"computeCitationStart");function gJt(t,e,r){return e<t?Math.min(r,e):r}a(gJt,"computeCitationEnd");function abe(t,e,r,n){let o=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),s=Met(o,e),c=s.lexDistance/s.needleLexLength,{distance:l}=obe(o.substring(s.startOffset,s.endOffset),e);return{relativeLexEditDistance:c,charEditDistance:l,completionLexLength:s.needleLexLength,foundOffset:s.startOffset+Math.max(0,n-r),lexEditDistance:s.lexDistance,stillInCodeHeuristic:c<=fJt?1:0}}a(abe,"find");async function AJt(t,e,r,n,o,s,c,l,u){let d=await t.get(Nn).getOrReadTextDocument({uri:o});if(d.status==="valid"){let m=d.document.getText(),h=abe(m,r,Oet,l.offset);h.stillInCodeHeuristic||(h=abe(m,r,dJt,l.offset)),dw.debug(t,`stillInCode: ${h.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${o}. lexEditDistance fraction was ${h.relativeLexEditDistance}. Char edit distance was ${h.charEditDistance}. Inserted at ${n}, tracked at ${l.offset}, found at ${h.foundOffset}. choiceIndex: ${c.properties.choiceIndex}`);let g=c.extendedBy({},{timeout:s.seconds,insertionOffset:n,trackedOffset:l.offset}).extendedBy({},h);if(Pt(t,e+".stillInCode",g),s.captureCode){let{prompt:A,capturedCode:y,terminationOffset:v}=await Qet(t,o,g,l.offset,u.offset),b={hypotheticalPromptJson:JSON.stringify({prefix:A.prefix,context:A.context}),hypotheticalPromptSuffixJson:JSON.stringify(A.suffix)},I=c.extendedBy({...b,capturedCodeJson:JSON.stringify(y)},{timeout:s.seconds,insertionOffset:n,trackedOffset:l.offset,terminationOffsetInCapturedCode:v});dw.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${c.properties.choiceIndex}`,g),Pt(t,e+".capturedAfterAccepted",I,1)}}}a(AJt,"checkStillInCode");var CJt=new dt("ghostText"),cd=class{constructor(){this.#i=[];this.linesAccepted=0}static{a(this,"LastGhostText")}#e;#t;#i;get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[],this.resetPartialAcceptanceState()}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0,this.totalLength=void 0,this.linesLeft=void 0,this.linesAccepted=0}};function vJt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,o;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),o=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,o=r.telemetry);let s={completionText:n,completionTelemetryData:o,offset:r.offset};e.push(s)}}),e}a(vJt,"computeRejectedCompletions");function cbe(t,e){let r=t.get(cd);if(!r.position||!r.uri)return;let n=vJt(r);n.length>0&&Xee(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}a(cbe,"rejectLastShown");function Uet(t,e,r,n){let o=t.get(cd);return o.position&&o.uri&&!(o.position.line===r.line&&o.position.character===r.character&&o.uri.toString()===e.uri.toString())&&n!==2&&cbe(t,e.offsetAt(o.position)),o.setState(e,r),o.index}a(Uet,"setLastShown");function qet(t,e){let r=t.get(cd);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;CJt.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,SZ(t,"ghostText",e)}}a(qet,"handleGhostTextShown");function xJt(t,e,r){let n=t.get(cd);n.linesLeft===void 0&&(n.linesAccepted=uw(e.insertText.substring(0,r)),n.linesLeft=uw(e.displayText));let o=uw(e.displayText);n.linesLeft>o&&(n.linesAccepted+=n.linesLeft-o,n.lastLineAcceptedLength=n.partiallyAcceptedLength,n.linesLeft=o),n.partiallyAcceptedLength=(n.lastLineAcceptedLength||0)+r}a(xJt,"handleLineAcceptance");function aN(t,e,r="ghostText"){let n=t.get(cd),o;return n.partiallyAcceptedLength?o={compType:"full",acceptedLength:(n.partiallyAcceptedLength||0)+e.displayText.length,acceptedLines:n.linesAccepted+(n.linesLeft??0)}:o={compType:"full",acceptedLength:e.displayText.length,acceptedLines:uw(e.displayText)},n.resetState(),tQ(t,r,e.displayText,e.offset,e.uri,e.telemetry,o,e.copilotAnnotations)}a(aN,"handleGhostTextPostInsert");function Zee(t,e,r,n=0,o="ghostText",s="line"){let c=t.get(cd),l;return s==="cumulative"?(EJt(t,e,r),l={compType:c.totalLength!=null?"full":"partial",acceptedLength:c.totalLength??(c.partiallyAcceptedLength||0),acceptedLines:c.linesAccepted},l.compType==="full"&&c.resetState()):(xJt(t,e,r),l={compType:"partial",acceptedLength:c.partiallyAcceptedLength||0,acceptedLines:c.linesAccepted}),tQ(t,o,e.displayText,e.offset,e.uri,e.telemetry,l,e.copilotAnnotations)}a(Zee,"handlePartialGhostTextPostInsert");function EJt(t,e,r){let n=t.get(cd);n.partiallyAcceptedLength=(n.partiallyAcceptedLength||0)+r,n.linesAccepted=uw(e.insertText.substring(0,n.partiallyAcceptedLength)),n.partiallyAcceptedLength>=e.insertText.length&&(n.totalLength=n.partiallyAcceptedLength)}a(EJt,"handleCumulativeAcceptance");function Het(t){let e=new N3;return e.set(Oc,t),e.set(wC,new wC),e.set(wo,new wo),e.set(QA,new QA),e.set(nr,new nr(e)),e.set(Lt,new Lt(e)),e.set(mC,new mC),e.set($u,new $u(e)),e.set(Yu,new Yu),e.set(Ap,new Ap),e.set(Mp,new M7),e.set(RA,new r3),e.set(CA,new B6),e.set(nl,new nl),e.set(tv,new tv(e)),e.set(Nn,new Nn(e)),e.set(jA,new jA(e)),e.set(Wx,Wee(e)),e.set(cd,new cd),e.set(Op,new Op),e.set($x,$x.default),e.set(em,new em(e)),e.set(Ch,new Ch(e)),e.set(uu,new uu),e.set(Np,new Np(e)),e.set(ss,new ss),e.set(Nh,new Nh(e)),e.set(Fh,new Fh),e}a(Het,"createCommonContext");f();f();var ete=class extends Error{static{a(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var cN=class extends Error{static{a(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var Qmi=E.Object({prompt:E.String(),speculation:E.String(),languageId:E.String(),stops:E.Array(E.String())}),rQ=class{static{a(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let o={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},s=await this.ctx.get(nr).getToken(),c=await this.ctx.get(Lt).updateExPValuesAndAssignments(s),l=await this.ctx.get(Mp).fetchAndStreamSpeculation(this.ctx,o,c,(u,d)=>{},r);switch(l.type){case"success":return l;case"canceled":throw new ete(l.reason);case"failed":throw new cN(l.reason)}}};f();f();var Wet=Ne(require("node:util"));function $et(t,...e){return`[${t}] ${bJt(e)}`}a($et,"formatLogMessage");function bJt(t){return Wet.default.formatWithOptions({maxStringLength:1/0},...t)}a(bJt,"format");function tte(t){return _Ne(t)}a(tte,"verboseLogging");var rte=class extends rl{constructor(r){super();this.console=r}static{a(this,"ConsoleLog")}logIt(r,n,o,...s){n==1?this.console.error(`[${o}]`,...s):(n==2||tte(r))&&this.console.warn(`[${o}]`,...s)}};f();var jet=require("node:util");var lN=class extends fC{static{a(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){AA(e,"log",Kr.createAndMarkAsIssued({context:r,level:XS[1],message:IJt(...n)}),1)}sendException(e,r,n){Xa(e,r,n)}};function IJt(...t){return t.map(e=>(0,jet.inspect)(e)).join(" ")}a(IJt,"telemetryMessage");f();var sdt=Ne(require("crypto")),adt=Ne(require("fs")),Nne=Ne(idt()),cdt=require("tls"),ldt=Ne(odt());var y8=new dt("certificates"),yl=class{static{a(this,"RootCertificateReader")}};function Mne(t,e=process.platform){return new B_e(t,[new N_e,new M_e,S0r(t,e)])}a(Mne,"getRootCertificateReader");function S0r(t,e){switch(e){case"linux":return new L_e(t);case"darwin":return new F_e(t);case"win32":return new O_e(t);default:return new Q_e}}a(S0r,"createPlatformReader");var D_e=class extends yl{constructor(r,n){super();this.ctx=r;this.delegate=n}static{a(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return y8.warn(this.ctx,"Failed to read root certificates:",r),[]}}},B_e=class extends yl{constructor(r,n){super();this.ctx=r;this.delegates=n.map(o=>new D_e(r,o))}static{a(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),o=r.filter(s=>{try{let c=new sdt.X509Certificate(s),l=Date.parse(c.validTo);return isNaN(l)||l>n}catch(c){return y8.warn(this.ctx,"Failed to parse certificate",s,c),!1}});return r.length!==o.length&&y8.info(this.ctx,`Removed ${r.length-o.length} expired certificates`),o}},N_e=class extends yl{static{a(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return cdt.rootCertificates}},M_e=class extends yl{static{a(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await udt(e):[]}},L_e=class extends yl{constructor(r){super();this.ctx=r}static{a(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let o=await udt(n);y8.debug(this.ctx,`Read ${o.length} certificates from ${n}`),r=r.concat(o)}return r}},F_e=class extends yl{constructor(r){super();this.ctx=r}static{a(this,"MacRootCertificateReader")}getAllRootCAs(){let r=Nne.get({excludeBundled:!1,format:Nne.Format.pem});return y8.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},O_e=class extends yl{constructor(r){super();this.ctx=r}static{a(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=ldt.all();return y8.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},Q_e=class extends yl{static{a(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function udt(t){let e;try{e=await adt.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(s=>s.length>0),o=new Set(n);return Array.from(o)}a(udt,"readCertsFromFile");f();var Edt=Ne(require("http"));var Z0r=407,pd=new dt("proxySocketFactory"),Rv=class{static{a(this,"ProxySocketFactory")}},$k=class extends Error{static{a(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function Lne(t){return new H_e(t,new W_e(t))}a(Lne,"getProxySocketFactory");var H_e=class extends Rv{constructor(r,n,o=new xU,s=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=o;this.platform=s;this.successfullyAuthorized=new vr(20)}static{a(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(pd.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(o){if(o instanceof $k&&o.code===`ProxyStatusCode${Z0r}`){pd.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let s=await this.authorizeAndCreateSocket(r,n);if(s)return pd.debug(this.ctx,"Proxy authorization successful, caching result"),Pt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),s}throw o}}async reauthorize(r,n){let o=await this.authorize(n);o&&(pd.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+o)}async authorizeAndCreateSocket(r,n){let o=await this.authorize(n);if(pd.debug(this.ctx,"Proxy authorization successful, received token"),o)return pd.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+o,await this.delegate.createSocket(r,n)}async authorize(r){pd.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),o=this.computeSpn(r);pd.debug(this.ctx,"Initializing kerberos client using spn",o);let s=await n.initializeClient(o);pd.debug(this.ctx,"Perform client side kerberos step");let c=await s.step("");return pd.debug(this.ctx,"Received kerberos server response"),c}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return pd.debug(this.ctx,"Using configured kerberos spn",n),n;let o=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return pd.debug(this.ctx,"Using default kerberos spn",o),o}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},W_e=class extends Rv{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(wo).getVersion()}`}static{a(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let o=this.createConnectRequestOptions(r,n);return new Promise((s,c)=>{pd.debug(this.ctx,"Attempting to establish connection to proxy");let l=Edt.request(o);l.useChunkedEncodingByDefault=!1,l.once("connect",(u,d,p)=>{pd.debug(this.ctx,"Socket Connect returned status code",u.statusCode),l.removeAllListeners(),d.removeAllListeners(),u.statusCode!==200?(d.destroy(),c(new $k(`tunneling socket could not be established, statusCode=${u.statusCode}`,void 0,`ProxyStatusCode${u.statusCode}`))):p.length>0?(d.destroy(),c(new $k(`got non-empty response body from proxy, length=${p.length}`,void 0,"ProxyNonEmptyResponseBody"))):(pd.debug(this.ctx,"Successfully established tunneling connection to proxy"),s(d))}),l.once("error",u=>{pd.debug(this.ctx,"Proxy socket connection error",u.message),l.removeAllListeners(),c(new $k(`tunneling socket could not be established, cause=${u.message}`,u))}),l.on("timeout",()=>{pd.debug(this.ctx,"Proxy socket connection timeout"),c(new $k(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${o.hostname}:${o.port}`,void 0,"ProxyTimeout"))}),l.end()})}createConnectRequestOptions(r,n){let o=`${r.hostname}:${r.port}`,s={hostname:n.hostname,port:n.port,method:"CONNECT",path:o,agent:!1,headers:{host:o,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(s.localAddress=r.localAddress),this.configureProxyAuthorization(s,r,n.authorization),s}configureProxyAuthorization(r,n,o){r.headers["Proxy-Authorization"]=[],o&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(o).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},xU=class{static{a(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Ne(xdt()))}};f();var wdt=require("node:os");var emr=new dt("repository"),jk="\\\\",_dt="(?:[#;].*)",x8=`(?:[^"${jk}]|${jk}.)`,tmr="[0-9A-Za-z-]",bdt=`[A-Za-z]${tmr}*`,Sdt=`\\s*${_dt}?$`,Rdt=`(?:[^"${jk};#]|${jk}.)`,rmr=`(?:"${x8}*"|"${x8}*(?<strCont>${jk})$)`,nmr=`(?:${Rdt}|${rmr})+`,imr=`(?:(?<cont>${jk})$)`,kdt=`(?<value>${nmr})${imr}?${Sdt}`,Idt=new RegExp(`^${kdt}`),omr=new RegExp(`^(?<value>${x8}*(?:(?<strCont>${jk})$|(?<quote>")))`),smr=new RegExp(`^\\s*(?:(?<key>${bdt})\\s*=\\s*${kdt}|(?<soloKey>${bdt})${Sdt})`),amr=new RegExp(`(?<value>${Rdt}+)|"(?<string>${x8}*)"`,"g"),Tdt="[-.0-9A-Za-z]+",cmr=`\\s+"(?<ext>${x8}*)"`,lmr=`\\s+"(?<extOnly>${x8}*)"`,umr=new RegExp(`^\\s*\\[(?:(?<simple>${Tdt})${cmr}|${lmr}|(?<simpleOnly>${Tdt}))\\]`),dmr=new RegExp(`^\\s*${_dt}$`),$_e=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{a(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(umr);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(smr);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(omr),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(Idt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(Idt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(amr)].map(o=>o.groups?.value?(r=!0,this.unescapeValue(o.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(o.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,o)=>r[o]||o)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){dmr.test(this.line)&&(this.line="")}},Fne=class extends OA{static{a(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await em.getRepoConfigLocation(e,r);if(!n)return;let o=await this.getParsedConfig(e,n);if(o)return this.mergeConfig(await this.baseConfig(e,n),o)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new JR)}async getParsedConfig(e,r,n=!0){let o=await this.tryLoadConfig(e,r,n);if(!o)return;let s=new $_e(o),c=new JR;return s.parse((l,u)=>c.add(l,u)),c}async tryLoadConfig(e,r,n){try{return await e.get(Ui).readFileString(r)}catch(o){(n||!(o instanceof Error)||o.code!=="ENOENT")&&emr.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,o);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),o=bi(this.xdgConfigUri(),"git","config"),s=bi(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,o,!1),await this.getParsedConfig(e,s,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Mi(r).toLowerCase()!=="config.worktree")return;let n=Nl(r),o=bi(n,"commondir");try{let s=(await e.get(Ui).readFileString(o)).trimEnd();return bi(e2(n,s),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?Bl(process.env.XDG_CONFIG_HOME):bi(this.homeUri(),".config")}homeUri(){return Bl((0,wdt.homedir)())}};f();var Pdt=require("child_process");var One=class extends OA{static{a(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((o,s)=>{(0,Pdt.execFile)(r,n,{cwd:e},(c,l)=>{c?s(c):o(l)})})}async tryRunCommand(e,r,n,o){try{return await this.runCommand(r,n,o)}catch(s){xJe.info(e,`Failed to run command '${n}' in ${r}:`,s);return}}async getConfig(e,r){let n=ns(r);if(n===void 0)return;let o=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return o?this.extractConfig(o):void 0}extractConfig(e){let r=new JR;for(let n of e.split("\0").filter(o=>o)){let o=n.split(`
`,1)[0],s=n.slice(o.length+1);r.add(o,s)}return r}extraArgs(){return[]}};function Ddt(t){let e=Het(t);return fmr(e),e.set(yl,Mne(e)),e.set(Rv,Lne(e)),e.set(OA,new cZ([new One,new Fne])),e.set(rQ,new rQ(e)),e}a(Ddt,"createProductionContext");function fmr(t){t.set(jm,jm.fromEnvironment(!1)),t.set(fC,new lN),t.set(rl,new rte(console))}a(fmr,"setupRudimentaryLogging");var vEi=new dt("context");f();f();f();var kv="byok",ha=class{constructor(e){this.persistenceManager=e}static{a(this,"BYOKPersistence")}async getAPIKey(e,r){if(r){let o=await this.persistenceManager.read(kv,`${e}-${r}-api-key`);if(o)return o}return await this.persistenceManager.read(kv,`${e}-api-key`)}async storeAPIKey(e,r,n,o){n!==2&&(n===0?await this.persistenceManager.update(kv,`${e}-api-key`,r):n===1&&o&&await this.persistenceManager.update(kv,`${e}-${o}-api-key`,r))}async deleteAPIKey(e,r,n){r!==2&&(r===0?await this.persistenceManager.delete(kv,`${e}-api-key`):r===1&&n&&await this.persistenceManager.delete(kv,`${e}-${n}-api-key`))}async getStoredModelConfigs(e){return await this.persistenceManager.read(kv,`${e}-models-config`)||{}}async getAllModels(){let e=[];for(let r of Object.values(Mo)){let n=await this.getStoredModelConfigs(r);e.push(...Object.keys(n).map(o=>({name:o,provider:r,capabilities:n[o].modelCapabilities})))}return e}async saveModelConfig(e,r,n,o,s){let c=await this.getStoredModelConfigs(e);c[r]=n,await this.persistenceManager.update(kv,`${e}-models-config`,c),o&&s&&await this.storeAPIKey(e,o,s,r)}async removeModelConfig(e,r){let n=await this.getStoredModelConfigs(e),o=n[r];o&&(delete n[r],await this.persistenceManager.update(kv,`${e}-models-config`,n),o.deploymentUrl&&await this.deleteAPIKey(e,1,r))}async removeAllModelConfigs(e){await this.persistenceManager.delete(kv,`${e}-models-config`)}};var Mo={Azure:"Azure",OpenAI:"OpenAI",Gemini:"Gemini",Groq:"Groq",OpenRouter:"OpenRouter",Anthropic:"Anthropic"};function Ww(t){switch(t){case Mo.Azure:return 1;default:return 0}}a(Ww,"getAuthTypeForProvider");function Une(t){return t===Mo.OpenAI||t===Mo.Gemini||t===Mo.Groq||t===Mo.OpenRouter||t===Mo.Anthropic}a(Une,"isOpenAICompatible");async function Pv(t,e,r){let o=await new ha(t.get(hi)).getStoredModelConfigs(e),s=o&&o[r]&&o[r].isRegistered!==!1?o[r]:void 0,c=s?.modelCapabilities,l=c?.name||r,u=c?.maxInputTokens||1e5,d=c?.maxOutputTokens||8192;return{modelId:r,uiName:l,modelFamily:$r.BYOK,providerName:e,deploymentUrl:s?.deploymentUrl,maxRequestTokens:u,maxResponseTokens:d,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!!c?.toolCalling}}a(Pv,"resolveModelConfiguration");async function Bdt(t,e,r){return await new ha(t.get(hi)).getAPIKey(e,r)}a(Bdt,"resolveModelKey");function Ndt(t,e){let{protocol:r,hostname:n,pathname:o}=new URL(e);if(o.endsWith("/chat/completions"))return e;if(n.endsWith(".models.ai.azure.com")||n.endsWith(".inference.ml.azure.com"))return`${r}//${n}/v1/chat/completions`;if(n.endsWith(".openai.azure.com"))return`${r}//${n}/openai/deployments/${t}/chat/completions?api-version=2025-01-01-preview`;throw new Error(`Unrecognized Azure deployment URL: ${e}`)}a(Ndt,"resolveAzureUrl");f();var EU=new dt("openAICompatibleLMProvider"),j_e={[Mo.OpenAI]:"https://api.openai.com/v1",[Mo.Gemini]:"https://generativelanguage.googleapis.com/v1beta/openai",[Mo.Groq]:"https://api.groq.com/openai/v1",[Mo.OpenRouter]:"https://openrouter.ai/api/v1",[Mo.Anthropic]:"https://api.anthropic.com/v1"},rg=class{constructor(e,r){this._lastFetchTime=0;this.providerName=e,this.ctx=r}static{a(this,"BaseOpenAICompatibleLMProvider")}async getAllModels(){await this.ensureKnownModelsCache();try{let e=this.getFetchModelUrl(),r={"Content-Type":"application/json"},n=await new ha(this.ctx.get(hi)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let o=await fetch(e,{method:"GET",headers:r});if(!o.ok)throw new Error(`Failed to fetch models: ${o.status} ${o.statusText}`);let s=await o.json();if(s.error)throw new Error(`API Error: ${JSON.stringify(s.error)}`);let c=[];for(let l of s.data){let u=this._knownModels?.[l.id];u&&c.push({providerName:this.providerName,modelId:l.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:u})}return c}catch(e){throw EU.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,e),e}}getBaseUrl(){let e=j_e[this.providerName];if(!e)throw new Error(`Unsupported provider: ${this.providerName}`);return e}getFetchModelUrl(){return`${this.getBaseUrl()}/models`}async ensureKnownModelsCache(){let e=Date.now();!this._knownModels&&(this._knownModels=await this.fetchKnownModelList(),this._lastFetchTime=e)}async fetchKnownModelList(){let e=await(await this.ctx.get(Lr).fetch("https://main.vscode-cdn.net/extensions/copilotChat.json",{method:"GET"})).json(),r;return e.version!==1?r={}:r=e.modelInfo[this.providerName]||{},r}};f();var kr=new dt("chat");f();f();var ga=(s=>(s.System="system",s.User="user",s.Assistant="assistant",s.Function="function",s.Tool="tool",s))(ga||{});function rn(t){return t?(t=pm(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}a(rn,"getTextPart");var Mdt=a((t,e)=>E.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),Ldt=E.Optional(E.Object({agentSlug:E.String(),state:E.Union([E.Literal("accepted"),E.Literal("dismissed")]),confirmation:E.Any()}));function $w(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}a($w,"parseToolCallArguments");function Fdt(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}a(Fdt,"toOpenAIToolCall");function Odt(t,e,r,n,o,s,c,l,u){let d=JSON.parse(JSON.stringify(e));return r.tool_calls&&(d.tool_calls=r.tool_calls),O3(t,[d],l),{message:e,choiceIndex:n,requestId:o,blockFinished:s,finishReason:c,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:l,copilotEditsSessionHeader:u}}a(Odt,"convertToChatCompletion");function bU(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}a(bU,"isChatCompletionContentPartArray");function qne(t){return Array.isArray(t)&&t.every(e=>"role"in e)}a(qne,"isChatMessageArray");function pm(t){if(typeof t=="string")return t;if(bU(t))return t;if(qne(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}a(pm,"resolveAsChatMessageContent");function Gk(t,e){return(typeof t=="string"||bU(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}a(Gk,"appendChatMessageContent");function Hne(t,e){if(t){if(typeof t=="string"||bU(t))return[{role:"assistant",content:t}];if(qne(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}a(Hne,"resolveResponseAsChatMessages");f();var G_e=new dt("streamMessages");function Qdt(t,e,r,n){let o=e.solution.text.join(""),s=!1;e.finishOffset!==void 0&&(G_e.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),o=o.substring(0,e.finishOffset),s=!0),G_e.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),G_e.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let c=N7(e.solution),l={role:"assistant",content:o};return Odt(t,l,c,e.index,e.requestId,s,e.reason??"",r,n)}a(Qdt,"prepareChatCompletionForReturn");var ng=new dt("fetchChat"),Wne=class{static{a(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,o,s){let c=await this.fetchWithParameters(e,r.endpoint,r,n,s);if(c==="not-sent")return{type:"canceled",reason:"before fetch request"};if(s?.isCancellationRequested){let u=c.body();try{u.destroy()}catch(d){ng.exception(e,d,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(c.status!==200){let u=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,u,c)}e.get(Nh).processQuotaHeaders(c.headers);let l=c.headers.get("copilot-edits-session")||void 0;if(r.postOptions?.stream===!1){let u=await c.text(),d=JSON.parse(u),p=d.choices!=null?d.choices[0].message:{role:"assistant",content:""},m=c.headers.get("X-Request-ID")??wr(),h={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:p,tokens:rn(p.content).split(" "),requestId:{headerRequestId:m,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0,copilotEditsSessionHeader:l},g=rn(p.content);return await o(g,{text:g,copilotReferences:d.copilot_references}),{type:"success",chatCompletions:async function*(){yield Promise.resolve(h)}(),getProcessingTime:a(()=>Q3(c),"getProcessingTime")}}else{let d=rw.create(e,r.count,c,n,[],s).processSSE(o);return{type:"success",chatCompletions:Mx(d,m=>Qdt(e,m,n,l)),getProcessingTime:a(()=>Q3(c),"getProcessingTime")}}}createTelemetryData(e,r,n){return Kr.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,o,s){let c={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:U3(e,n.count),top_p:IZ(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},l=_x(n.repoInfo);return l!==void 0&&(c.nwo=l),n.postOptions&&Object.assign(c,n.postOptions),n.intent&&(c.intent=n.intent,n.intent_model&&(c.intent_model=n.intent_model),n.intent_tokenizer&&(c.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(c.intent_threshold=n.intent_threshold),n.intent_content&&(c.intent_content=n.intent_content)),s?.isCancellationRequested?"not-sent":await pmr(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,c,n.authToken,n.uiKind,o,n.llmInteraction,n.apiKey,n.modelProviderName,n.copilotEditsSessionHeader,s)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let c=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;ng.error(e,c),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Pt(e,"request.shownWarning",r),n.status===401)try{let c=await n.text(),l=JSON.parse(c);if(l.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:l.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(nr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return ng.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let o=await n.text();if(n.status===466)return ng.info(e,o),{type:"failed",reason:`client not supported: ${o}`,code:n.status};if(n.status===400&&o.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&o.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&o.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:o};let s=await e.get(nr).getToken();if(n.status===402){if(o.includes("free_quota_exceeded")){let u=n.headers.get("retry-after");return{type:"failed",reason:u?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(u).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(o.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(o.includes("quota_exceeded"))switch(s.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:o,code:n.status}:(ng.error(e,"Unhandled status from server:",n.status,o),{type:"failed",reason:`unhandled status from server: ${n.status} ${o}`,code:n.status})}};async function pmr(t,e,r,n,o,s,c,l,u,d,p,m,h,g,A){let y=n===""&&o===""?r:bi(r,n,o),v=d.extendedBy({endpoint:o,engineName:n,uiKind:u});bZ(c,v,["messages"]),v.properties.headerRequestId=s,Pt(t,"request.sent",v);let b=Fa(),I=dXe(u),_={...gh(t),...p.toCapiHeaders()};return q1()&&(_=await VB(t,_)),c.messages?.some(k=>Array.isArray(k.content)?k.content.some(N=>"image_url"in N):!1)&&(_["Copilot-Vision-Request"]="true"),m&&(_["api-key"]=m),g&&(_["copilot-edits-session"]=g),c.messages&&c.messages.forEach(k=>{mmr(k)&&k.tool_calls&&(k.tool_calls=k.tool_calls.map(N=>Fdt(N)))}),Sx(t,y,l,I,s,c,A,_,void 0,h).then(k=>{let N=ek(k);v.extendWithRequestId(N);let F=Fa()-b;return v.measurements.totalTimeMs=F,ng.info(t,`Request ${s} at <${y}> finished with ${k.status} status after ${F}ms`),ng.debug(t,"request.response properties",v.properties),ng.debug(t,"request.response measurements",v.measurements),ng.debug(t,"messages:",JSON.stringify(e)),Pt(t,"request.response",v),k}).catch(k=>{if(kd(k))throw k;let N=v.extendedBy({error:"Network exception"});Pt(t,"request.shownWarning",N),v.properties.message=String(Lf(k,"name")??""),v.properties.code=String(Lf(k,"code")??""),v.properties.errno=String(Lf(k,"errno")??""),v.properties.type=String(Lf(k,"type")??"");let F=Fa()-b;throw v.measurements.totalTimeMs=F,ng.info(t,`Request ${s} at <${y}> rejected with ${String(k)} after ${F}ms`),ng.debug(t,"request.error properties",v.properties),ng.debug(t,"request.error measurements",v.measurements),Pt(t,"request.error",v),k}).finally(()=>{O3(t,e,v)})}a(pmr,"fetchWithInstrumentation");function mmr(t){return"tool_calls"in t}a(mmr,"isChatMessageWithToolCalls");var Bs=class{constructor(e){this.ctx=e;this.fetcher=new Wne}static{a(this,"ChatMLFetcher")}async fetchResponse(e,r,n,o){let s=wr(),c={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},l=e.modelConfiguration;l&&(e.prediction?.content||delete c.prediction,e.prediction||e.modelConfiguration?.providerName===void 0&&l.maxResponseTokens!==void 0&&(c.max_tokens=l.maxResponseTokens),c.stream=!!l.stream),e.logitBias&&(c.logit_bias=e.logitBias);let u=await this.ctx.get(nr).getToken(),d,p,m,h;if(e.modelConfiguration?.providerName)if(m=await Bdt(this.ctx,e.modelConfiguration?.providerName,e.modelConfiguration.modelId),h=e.modelConfiguration.providerName,e.intentParams=void 0,e.modelConfiguration?.providerName===Mo.Azure)if(e.modelConfiguration.deploymentUrl)d=Ndt(e.modelConfiguration.modelId,e.modelConfiguration.deploymentUrl),p="",e.engineName="";else throw new Error(`No deployment URL found for Azure model: ${e.modelConfiguration.modelId}`);else if(Une(e.modelConfiguration?.providerName))d=j_e[e.modelConfiguration?.providerName],p=e.endpoint??"completions",e.authToken=m;else throw new Error(`Unsupported BYOK provider: ${e.modelConfiguration?.providerName}`);else d=Gm(this.ctx,u,e.copilotApiProvider??"api"),p=e.endpoint??"completions";let g=e.authToken??u.token,A={messages:e.messages,repoInfo:void 0,ourRequestId:s,copilotApiBaseUrl:d,engineName:e.engineName??"chat",endpoint:p,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:c,authToken:g,apiKey:m,modelProviderName:h,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction,copilotEditsSessionHeader:e.copilotEditsSessionHeader};return l&&(A.model=l.modelId),e.tools&&e.tools?.length>0&&(l===void 0||l.toolCalls)&&(A.tools=e.tools,A.tool_choice=e.tool_choice??"auto"),await this.fetch(A,o,r,n)}async fetch(e,r,n,o){try{let s=await this.fetcher.fetchAndStreamChat(this.ctx,e,o.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(s.type){case"success":return await this.processSuccessfulResponse(e,s,e.ourRequestId,o);case"canceled":return this.processCanceledResponse(s,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(s,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:s.authUrl,requestId:e.ourRequestId}}}catch(s){return this.processError(s,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,o){let s=[],c=D7(r.chatCompletions,u=>this.postProcess(u,o));kr.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let l=0;for await(let u of c)kr.debug(this.ctx,`Received choice #${l} for request ${e.ourRequestId}: ${JSON.stringify(u,null,2)}`),s.push(u),l++;if(s.length==1){let u=s[0];switch(u.finishReason){case"stop":return{type:"success",value:rn(u.message?.content)??"",toolCalls:u.tool_calls,requestId:n,numTokens:u.numTokens,copilotEditsSessionHeader:u.copilotEditsSessionHeader};case"tool_calls":return{type:"tool_calls",toolCalls:u.tool_calls,requestId:n,copilotEditsSessionHeader:u.copilotEditsSessionHeader};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:rn(u.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(s.length>1){let u=s.filter(d=>d.finishReason=="stop"||d.finishReason=="tool_calls");if(u.length>0)return{type:"successMultiple",value:u.map(d=>rn(d.message.content)),toolCalls:u.map(d=>d.tool_calls).filter(d=>d),requestId:n,copilotEditsSessionHeader:u[0].copilotEditsSessionHeader}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return jee(e.tokens)?(r.extendWithRequestId(e.requestId),Pt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return kr.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return kd(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(kr.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};f();var ig=class{constructor(e){this.ctx=e}static{a(this,"AbstractClientToolConfirmationInvoker")}};f();var jw=class{constructor(e){this.ctx=e}static{a(this,"AbstractClientToolInvoker")}};f();var Udt=new dt("CommandLineAutoApprover"),lE=class{constructor(e){this.ctx=e;this._denyListRules=[];this._allowListRules=[]}static{a(this,"CommandLineAutoApprover")}updateConfiguration(e){let{denyListRules:r,allowListRules:n}=this._mapAutoApproveConfigToRules(e);this._allowListRules=n,this._denyListRules=r}isCommandAutoApproved(e){for(let r of this._denyListRules)if(this._commandMatchesRegex(r.regex,e))return{result:"denied",reason:`Command '${e}' is denied by deny list rule: ${r.sourceText}`};for(let r of this._allowListRules)if(this._commandMatchesRegex(r.regex,e))return{result:"approved",reason:`Command '${e}' is approved by allow list rule: ${r.sourceText}`};return{result:"noMatch",reason:`Command '${e}' has no matching auto approve entries`}}_commandMatchesRegex(e,r){return!!e.test(r)}_mapAutoApproveConfigToRules(e){if(!e||typeof e!="object")return{denyListRules:[],allowListRules:[]};let r=[],n=[];return Object.entries(e).forEach(([o,s])=>{if(typeof s=="boolean"){let c=this._convertAutoApproveEntryToRegex(o);s===!0?n.push({regex:c,sourceText:o}):s===!1&&r.push({regex:c,sourceText:o})}else if(typeof s=="object"&&s!==null){let c=s;if(typeof c.approve=="boolean"){let l=this._convertAutoApproveEntryToRegex(o);c.approve===!0?n.push({regex:l,sourceText:o}):c.approve===!1&&r.push({regex:l,sourceText:o})}}}),Udt.debug(this.ctx,"Update CommandLineAutoApprover denyListRules",r),Udt.debug(this.ctx,"Update CommandLineAutoApprover allowListRules",n),{denyListRules:r,allowListRules:n}}_convertAutoApproveEntryToRegex(e){let r=e.match(/^\/(?<pattern>.+)\/(?<flags>[dgimsuvy]*)$/),n=r?.groups?.pattern;if(n){let s=r.groups?.flags;s&&(s=s.replaceAll("g",""));try{let c=new RegExp(n,s||void 0);return this._regExpLeadsToEndlessLoop(c)?/(?!.*)/:c}catch{return/(?!.*)/}}let o=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&");return new RegExp(`^${o}\\b`)}_regExpLeadsToEndlessLoop(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}};f();var hmr=".github/copilot-instructions.md",gmr=".github/git-commit-instructions.md",Amr="global-copilot-instructions",ymr="global-git-commit-instructions",Dv=class{static{a(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:Amr}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:ymr}),r}async _collectInstructionsFromFile(e,r,n,o,s,c){try{let l=bi(r.uri,n),u=(await e.get(Ui).readFileString(l)).trim();if(!u)return;(await Bx(e,{uri:l},u)).status==="valid"&&s.push({kind:c,content:[{instruction:u,languageId:o}],reference:l})}catch{}}async readFromWorkspaces(e,r,n={}){let o=[];if(!r.length)return o;let s=r.flatMap(c=>{let l=[];return n.includeCodeGenerationInstructions!==!1&&l.push(this._collectInstructionsFromFile(e,c,hmr,n.languageId,o,0)),n.includeCommitMessageGenerationInstructions&&l.push(this._collectInstructionsFromFile(e,c,gmr,void 0,o,0)),l});return await Promise.all(s),o}};f();f();f();f();f();f();f();var Cmr=Symbol("MicrotaskDelay");function jne(t){return!!t&&typeof t.then=="function"}a(jne,"isThenable");function vmr(t){let e=new Ox,r=t(e.token),n=new Promise((o,s)=>{let c=e.token.onCancellationRequested(()=>{c.dispose(),s(new Z0)});Promise.resolve(r).then(l=>{c.dispose(),e.dispose(),o(l)},l=>{c.dispose(),e.dispose(),s(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(o,s){return n.then(o,s)}catch(o){return this.then(void 0,o)}finally(o){return n.finally(o)}}}a(vmr,"createCancelablePromise");function uE(t,e){return e?new Promise((r,n)=>{let o=setTimeout(()=>{s.dispose(),r()},t),s=e.onCancellationRequested(()=>{clearTimeout(o),s.dispose(),n(new Z0)})}):vmr(r=>uE(t,r))}a(uE,"timeout");var E8=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{a(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new bn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new bn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var IU=class{static{a(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new Z0)}},xmr;(r=>{async function t(n){let o,s=await Promise.all(n.map(c=>c.then(l=>l,l=>{o||(o=l)})));if(typeof o<"u")throw o;return s}r.settled=t,a(t,"settled");function e(n){return new Promise(async(o,s)=>{try{await n(o,s)}catch(c){s(c)}})}r.withAsyncBody=e,a(e,"withAsyncBody")})(xmr||={});var TU=class t{static{a(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let o of n)r.emitOne(o)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new rm,queueMicrotask(async()=>{let n={emitOne:a(o=>this.emitOne(o),"emitOne"),emitMany:a(o=>this.emitMany(o),"emitMany"),reject:a(o=>this.reject(o),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(o){this.reject(o)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:a(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await rk.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:a(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let o of e)n.emitOne(r(o))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let o of e)r(o)&&n.emitOne(o)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var $ne=class{constructor(e){this._deferred=new IU;this._asyncIterable=new TU(o=>{if(r){o.reject(r);return}return n&&o.emitMany(n),this._errorFn=s=>o.reject(s),this._emitFn=s=>o.emitOne(s),this._deferred.p},e);let r,n;this._emitFn=o=>{n||(n=[]),n.push(o)},this._errorFn=o=>{r||(r=o)}}static{a(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};f();f();f();f();var Gne=!1,Vne=!1,wU=!1,Emr=!1,bmr=!1,qdt=!1,Imr=!1,Tmr=!1,wmr=!1,_mr=!1;var dE,fE=globalThis,og;typeof fE.vscode<"u"&&typeof fE.vscode.process<"u"?og=fE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(og=process);var Hdt=typeof og?.versions?.electron=="string",Smr=Hdt&&og?.type==="renderer";typeof og=="object"?(Gne=og.platform==="win32",Vne=og.platform==="darwin",wU=og.platform==="linux",Emr=wU&&!!og.env.SNAP&&!!og.env.SNAP_REVISION,Imr=Hdt,wmr=!!og.env.CI||!!og.env.BUILD_ARTIFACTSTAGINGDIRECTORY,bmr=!0):typeof navigator=="object"&&!Smr?(dE=navigator.userAgent,Gne=dE.indexOf("Windows")>=0,Vne=dE.indexOf("Macintosh")>=0,Tmr=(dE.indexOf("Macintosh")>=0||dE.indexOf("iPad")>=0||dE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,wU=dE.indexOf("Linux")>=0,_mr=dE?.indexOf("Mobi")>=0,qdt=!0):console.error("Unable to resolve platform.");var V_e=0;Vne?V_e=1:Gne?V_e=3:wU&&(V_e=2);var Gw=Gne,Wdt=Vne,$dt=wU;var Rmr=qdt&&typeof fE.importScripts=="function",KIi=Rmr?fE.origin:void 0;var Bv=dE;var kmr=typeof fE.postMessage=="function"&&!fE.importScripts,YIi=(()=>{if(kmr){let t=[];fE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,o=t.length;n<o;n++){let s=t[n];if(s.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),s.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),fE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var Pmr=!!(Bv&&Bv.indexOf("Chrome")>=0),JIi=!!(Bv&&Bv.indexOf("Firefox")>=0),XIi=!!(!Pmr&&Bv&&Bv.indexOf("Safari")>=0),ZIi=!!(Bv&&Bv.indexOf("Edg/")>=0),eTi=!!(Bv&&Bv.indexOf("Android")>=0);var Vk,z_e=globalThis.vscode;if(typeof z_e<"u"&&typeof z_e.process<"u"){let t=z_e.process;Vk={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Vk={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Vk={get platform(){return Gw?"win32":Wdt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var _U=Vk.cwd,jdt=Vk.env,Gdt=Vk.platform,sTi=Vk.arch;var Bmr=65,Nmr=97,Mmr=90,Lmr=122,Kw=46,Su=47,Kp=92,Vw=58,Fmr=63,zne=class extends Error{static{a(this,"ErrorInvalidArgType")}constructor(e,r,n){let o;typeof r=="string"&&r.indexOf("not ")===0?(o="must not be",r=r.replace(/^not /,"")):o="must be";let s=e.indexOf(".")!==-1?"property":"argument",c=`The "${e}" ${s} ${o} of type ${r}`;c+=`. Received type ${typeof n}`,super(c),this.code="ERR_INVALID_ARG_TYPE"}};function Omr(t,e){if(t===null||typeof t!="object")throw new zne(e,"Object",t)}a(Omr,"validateObject");function Ec(t,e){if(typeof t!="string")throw new zne(e,"string",t)}a(Ec,"validateString");var Yp=Gdt==="win32";function _i(t){return t===Su||t===Kp}a(_i,"isPathSeparator");function K_e(t){return t===Su}a(K_e,"isPosixPathSeparator");function zw(t){return t>=Bmr&&t<=Mmr||t>=Nmr&&t<=Lmr}a(zw,"isWindowsDeviceRoot");function Kne(t,e,r,n){let o="",s=0,c=-1,l=0,u=0;for(let d=0;d<=t.length;++d){if(d<t.length)u=t.charCodeAt(d);else{if(n(u))break;u=Su}if(n(u)){if(!(c===d-1||l===1))if(l===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==Kw||o.charCodeAt(o.length-2)!==Kw){if(o.length>2){let p=o.lastIndexOf(r);p===-1?(o="",s=0):(o=o.slice(0,p),s=o.length-1-o.lastIndexOf(r)),c=d,l=0;continue}else if(o.length!==0){o="",s=0,c=d,l=0;continue}}e&&(o+=o.length>0?`${r}..`:"..",s=2)}else o.length>0?o+=`${r}${t.slice(c+1,d)}`:o=t.slice(c+1,d),s=d-c-1;c=d,l=0}else u===Kw&&l!==-1?++l:l=-1}return o}a(Kne,"normalizeString");function Qmr(t){return t?`${t[0]==="."?"":"."}${t}`:""}a(Qmr,"formatExt");function Vdt(t,e){Omr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${Qmr(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}a(Vdt,"_format");var bc={resolve(...t){let e="",r="",n=!1;for(let o=t.length-1;o>=-1;o--){let s;if(o>=0){if(s=t[o],Ec(s,`paths[${o}]`),s.length===0)continue}else e.length===0?s=_U():(s=jdt[`=${e}`]||_U(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===Kp)&&(s=`${e}\\`));let c=s.length,l=0,u="",d=!1,p=s.charCodeAt(0);if(c===1)_i(p)&&(l=1,d=!0);else if(_i(p))if(d=!0,_i(s.charCodeAt(1))){let m=2,h=m;for(;m<c&&!_i(s.charCodeAt(m));)m++;if(m<c&&m!==h){let g=s.slice(h,m);for(h=m;m<c&&_i(s.charCodeAt(m));)m++;if(m<c&&m!==h){for(h=m;m<c&&!_i(s.charCodeAt(m));)m++;(m===c||m!==h)&&(u=`\\\\${g}\\${s.slice(h,m)}`,l=m)}}}else l=1;else zw(p)&&s.charCodeAt(1)===Vw&&(u=s.slice(0,2),l=2,c>2&&_i(s.charCodeAt(2))&&(d=!0,l=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(n){if(e.length>0)break}else if(r=`${s.slice(l)}\\${r}`,n=d,d&&e.length>0)break}return r=Kne(r,!n,"\\",_i),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Ec(t,"path");let e=t.length;if(e===0)return".";let r=0,n,o=!1,s=t.charCodeAt(0);if(e===1)return K_e(s)?"\\":t;if(_i(s))if(o=!0,_i(t.charCodeAt(1))){let l=2,u=l;for(;l<e&&!_i(t.charCodeAt(l));)l++;if(l<e&&l!==u){let d=t.slice(u,l);for(u=l;l<e&&_i(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&!_i(t.charCodeAt(l));)l++;if(l===e)return`\\\\${d}\\${t.slice(u)}\\`;l!==u&&(n=`\\\\${d}\\${t.slice(u,l)}`,r=l)}}}else r=1;else zw(s)&&t.charCodeAt(1)===Vw&&(n=t.slice(0,2),r=2,e>2&&_i(t.charCodeAt(2))&&(o=!0,r=3));let c=r<e?Kne(t.slice(r),!o,"\\",_i):"";return c.length===0&&!o&&(c="."),c.length>0&&_i(t.charCodeAt(e-1))&&(c+="\\"),n===void 0?o?`\\${c}`:c:o?`${n}\\${c}`:`${n}${c}`},isAbsolute(t){Ec(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return _i(r)||e>2&&zw(r)&&t.charCodeAt(1)===Vw&&_i(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let s=0;s<t.length;++s){let c=t[s];Ec(c,"path"),c.length>0&&(e===void 0?e=r=c:e+=`\\${c}`)}if(e===void 0)return".";let n=!0,o=0;if(typeof r=="string"&&_i(r.charCodeAt(0))){++o;let s=r.length;s>1&&_i(r.charCodeAt(1))&&(++o,s>2&&(_i(r.charCodeAt(2))?++o:n=!1))}if(n){for(;o<e.length&&_i(e.charCodeAt(o));)o++;o>=2&&(e=`\\${e.slice(o)}`)}return bc.normalize(e)},relative(t,e){if(Ec(t,"from"),Ec(e,"to"),t===e)return"";let r=bc.resolve(t),n=bc.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let o=0;for(;o<t.length&&t.charCodeAt(o)===Kp;)o++;let s=t.length;for(;s-1>o&&t.charCodeAt(s-1)===Kp;)s--;let c=s-o,l=0;for(;l<e.length&&e.charCodeAt(l)===Kp;)l++;let u=e.length;for(;u-1>l&&e.charCodeAt(u-1)===Kp;)u--;let d=u-l,p=c<d?c:d,m=-1,h=0;for(;h<p;h++){let A=t.charCodeAt(o+h);if(A!==e.charCodeAt(l+h))break;A===Kp&&(m=h)}if(h!==p){if(m===-1)return n}else{if(d>p){if(e.charCodeAt(l+h)===Kp)return n.slice(l+h+1);if(h===2)return n.slice(l+h)}c>p&&(t.charCodeAt(o+h)===Kp?m=h:h===2&&(m=3)),m===-1&&(m=0)}let g="";for(h=o+m+1;h<=s;++h)(h===s||t.charCodeAt(h)===Kp)&&(g+=g.length===0?"..":"\\..");return l+=m,g.length>0?`${g}${n.slice(l,u)}`:(n.charCodeAt(l)===Kp&&++l,n.slice(l,u))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=bc.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Kp){if(e.charCodeAt(1)===Kp){let r=e.charCodeAt(2);if(r!==Fmr&&r!==Kw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(zw(e.charCodeAt(0))&&e.charCodeAt(1)===Vw&&e.charCodeAt(2)===Kp)return`\\\\?\\${e}`;return t},dirname(t){Ec(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,o=t.charCodeAt(0);if(e===1)return _i(o)?t:".";if(_i(o)){if(r=n=1,_i(t.charCodeAt(1))){let l=2,u=l;for(;l<e&&!_i(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&_i(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&!_i(t.charCodeAt(l));)l++;if(l===e)return t;l!==u&&(r=n=l+1)}}}}else zw(o)&&t.charCodeAt(1)===Vw&&(r=e>2&&_i(t.charCodeAt(2))?3:2,n=r);let s=-1,c=!0;for(let l=e-1;l>=n;--l)if(_i(t.charCodeAt(l))){if(!c){s=l;break}}else c=!1;if(s===-1){if(r===-1)return".";s=r}return t.slice(0,s)},basename(t,e){e!==void 0&&Ec(e,"suffix"),Ec(t,"path");let r=0,n=-1,o=!0,s;if(t.length>=2&&zw(t.charCodeAt(0))&&t.charCodeAt(1)===Vw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let c=e.length-1,l=-1;for(s=t.length-1;s>=r;--s){let u=t.charCodeAt(s);if(_i(u)){if(!o){r=s+1;break}}else l===-1&&(o=!1,l=s+1),c>=0&&(u===e.charCodeAt(c)?--c===-1&&(n=s):(c=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=r;--s)if(_i(t.charCodeAt(s))){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){Ec(t,"path");let e=0,r=-1,n=0,o=-1,s=!0,c=0;t.length>=2&&t.charCodeAt(1)===Vw&&zw(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let u=t.charCodeAt(l);if(_i(u)){if(!s){n=l+1;break}continue}o===-1&&(s=!1,o=l+1),u===Kw?r===-1?r=l:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||o===-1||c===0||c===1&&r===o-1&&r===n+1?"":t.slice(r,o)},format:Vdt.bind(null,"\\"),parse(t){Ec(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,o=t.charCodeAt(0);if(r===1)return _i(o)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(_i(o)){if(n=1,_i(t.charCodeAt(1))){let m=2,h=m;for(;m<r&&!_i(t.charCodeAt(m));)m++;if(m<r&&m!==h){for(h=m;m<r&&_i(t.charCodeAt(m));)m++;if(m<r&&m!==h){for(h=m;m<r&&!_i(t.charCodeAt(m));)m++;m===r?n=m:m!==h&&(n=m+1)}}}}else if(zw(o)&&t.charCodeAt(1)===Vw){if(r<=2)return e.root=e.dir=t,e;if(n=2,_i(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let s=-1,c=n,l=-1,u=!0,d=t.length-1,p=0;for(;d>=n;--d){if(o=t.charCodeAt(d),_i(o)){if(!u){c=d+1;break}continue}l===-1&&(u=!1,l=d+1),o===Kw?s===-1?s=d:p!==1&&(p=1):s!==-1&&(p=-1)}return l!==-1&&(s===-1||p===0||p===1&&s===l-1&&s===c+1?e.base=e.name=t.slice(c,l):(e.name=t.slice(c,s),e.base=t.slice(c,l),e.ext=t.slice(s,l))),c>0&&c!==n?e.dir=t.slice(0,c-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Umr=(()=>{if(Yp){let t=/\\/g;return()=>{let e=_U().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>_U()})(),Aa={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let o=n>=0?t[n]:Umr();Ec(o,`paths[${n}]`),o.length!==0&&(e=`${o}/${e}`,r=o.charCodeAt(0)===Su)}return e=Kne(e,!r,"/",K_e),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Ec(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Su,r=t.charCodeAt(t.length-1)===Su;return t=Kne(t,!e,"/",K_e),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Ec(t,"path"),t.length>0&&t.charCodeAt(0)===Su},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Ec(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Aa.normalize(e)},relative(t,e){if(Ec(t,"from"),Ec(e,"to"),t===e||(t=Aa.resolve(t),e=Aa.resolve(e),t===e))return"";let r=1,n=t.length,o=n-r,s=1,c=e.length-s,l=o<c?o:c,u=-1,d=0;for(;d<l;d++){let m=t.charCodeAt(r+d);if(m!==e.charCodeAt(s+d))break;m===Su&&(u=d)}if(d===l)if(c>l){if(e.charCodeAt(s+d)===Su)return e.slice(s+d+1);if(d===0)return e.slice(s+d)}else o>l&&(t.charCodeAt(r+d)===Su?u=d:d===0&&(u=0));let p="";for(d=r+u+1;d<=n;++d)(d===n||t.charCodeAt(d)===Su)&&(p+=p.length===0?"..":"/..");return`${p}${e.slice(s+u)}`},toNamespacedPath(t){return t},dirname(t){if(Ec(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Su,r=-1,n=!0;for(let o=t.length-1;o>=1;--o)if(t.charCodeAt(o)===Su){if(!n){r=o;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Ec(e,"ext"),Ec(t,"path");let r=0,n=-1,o=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let c=e.length-1,l=-1;for(s=t.length-1;s>=0;--s){let u=t.charCodeAt(s);if(u===Su){if(!o){r=s+1;break}}else l===-1&&(o=!1,l=s+1),c>=0&&(u===e.charCodeAt(c)?--c===-1&&(n=s):(c=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===Su){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){Ec(t,"path");let e=-1,r=0,n=-1,o=!0,s=0;for(let c=t.length-1;c>=0;--c){let l=t.charCodeAt(c);if(l===Su){if(!o){r=c+1;break}continue}n===-1&&(o=!1,n=c+1),l===Kw?e===-1?e=c:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Vdt.bind(null,"/"),parse(t){Ec(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Su,n;r?(e.root="/",n=1):n=0;let o=-1,s=0,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){let p=t.charCodeAt(u);if(p===Su){if(!l){s=u+1;break}continue}c===-1&&(l=!1,c=u+1),p===Kw?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}if(c!==-1){let p=s===0&&r?1:s;o===-1||d===0||d===1&&o===c-1&&o===s+1?e.base=e.name=t.slice(p,c):(e.name=t.slice(p,o),e.base=t.slice(p,c),e.ext=t.slice(o,c))}return s>0?e.dir=t.slice(0,s-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Aa.win32=bc.win32=bc;Aa.posix=bc.posix=Aa;var qmr=Yp?bc.normalize:Aa.normalize,Hmr=Yp?bc.isAbsolute:Aa.isAbsolute,Yne=Yp?bc.join:Aa.join,cTi=Yp?bc.resolve:Aa.resolve,lTi=Yp?bc.relative:Aa.relative,uTi=Yp?bc.dirname:Aa.dirname,Jne=Yp?bc.basename:Aa.basename,Xne=Yp?bc.extname:Aa.extname,dTi=Yp?bc.format:Aa.format,fTi=Yp?bc.parse:Aa.parse,pTi=Yp?bc.toNamespacedPath:Aa.toNamespacedPath,zk=Yp?bc.sep:Aa.sep,mTi=Yp?bc.delimiter:Aa.delimiter;f();function Kdt(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}a(Kdt,"isObject");function Zne(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}a(Zne,"assertType");function Ydt(t,e,r,n=zk){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!PZe(t,e))return!1;if(e.length===t.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,t.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}a(Ydt,"isEqualOrParent");var eie="**",Jdt="/",tie="[/\\\\]",rie="[^/\\\\]",Wmr=/\//g;function Xdt(t,e){switch(t){case 0:return"";case 1:return`${rie}*?`;default:return`(?:${tie}|${rie}+${tie}${e?`|${tie}${rie}+`:""})*?`}}a(Xdt,"starsToRegExp");function SU(t,e){if(!t)return[];let r=[],n=!1,o=!1,s="";for(let c of t){switch(c){case e:if(!n&&!o){r.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":o=!0;break;case"]":o=!1;break}s+=c}return s&&r.push(s),r}a(SU,"splitGlobAware");function rft(t){if(!t)return"";let e="",r=SU(t,Jdt);if(r.every(n=>n===eie))e=".*";else{let n=!1;r.forEach((o,s)=>{if(o===eie){if(n)return;e+=Xdt(2,s===r.length-1)}else{let c=!1,l="",u=!1,d="";for(let p of o){if(p!=="}"&&c){l+=p;continue}if(u&&(p!=="]"||!d)){let m;p==="-"?m=p:(p==="^"||p==="!")&&!d?m="^":p===Jdt?m="":m=rN(p),d+=m;continue}switch(p){case"{":c=!0;continue;case"[":u=!0;continue;case"}":{let h=`(?:${SU(l,",").map(g=>rft(g)).join("|")})`;e+=h,c=!1,l="";break}case"]":{e+="["+d+"]",u=!1,d="";break}case"?":e+=rie;continue;case"*":e+=Xdt(1);continue;default:e+=rN(p)}}s<r.length-1&&(r[s+1]!==eie||s+2<r.length)&&(e+=tie)}n=o===eie})}return e}a(rft,"parseRegExp");var $mr=/^\*\*\/\*\.[\w\.-]+$/,jmr=/^\*\*\/([\w\.-]+)\/?$/,Gmr=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Vmr=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,zmr=/^\*\*((\/[\w\.-]+)+)\/?$/,Kmr=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Zdt=new k3(1e4),J_e=a(function(){return!1},"FALSE"),sy=a(function(){return null},"NULL");function nft(t){return t===J_e||t===sy}a(nft,"isEmptyPattern");function X_e(t,e){if(!t)return sy;let r;typeof t!="string"?r=t.pattern:r=t,r=r.trim();let n=`${r}_${!!e.trimForExclusions}`,o=Zdt.get(n);if(o)return eft(o,t);let s;return $mr.test(r)?o=Ymr(r.substr(4),r):(s=jmr.exec(Y_e(r,e)))?o=Jmr(s[1],r):(e.trimForExclusions?Vmr:Gmr).test(r)?o=Xmr(r,e):(s=zmr.exec(Y_e(r,e)))?o=tft(s[1].substr(1),r,!0):(s=Kmr.exec(Y_e(r,e)))?o=tft(s[1],r,!1):o=Zmr(r),Zdt.set(n,o),eft(o,t)}a(X_e,"parsePattern");function eft(t,e){if(typeof e=="string")return t;let r=a(function(n,o){return Ydt(n,e.base,!$dt)?t(kZe(n.substr(e.base.length),zk),o):null},"wrappedPattern");return r.allBasenames=t.allBasenames,r.allPaths=t.allPaths,r.basenames=t.basenames,r.patterns=t.patterns,r}a(eft,"wrapRelativePattern");function Y_e(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}a(Y_e,"trimForExclusions");function Ymr(t,e){return function(r,n){return typeof r=="string"&&r.endsWith(t)?e:null}}a(Ymr,"trivia1");function Jmr(t,e){let r=`/${t}`,n=`\\${t}`,o=a(function(c,l){return typeof c!="string"?null:l?l===t?e:null:c===t||c.endsWith(r)||c.endsWith(n)?e:null},"parsedPattern"),s=[t];return o.basenames=s,o.patterns=[e],o.allBasenames=s,o}a(Jmr,"trivia2");function Xmr(t,e){let r=oft(t.slice(1,-1).split(",").map(l=>X_e(l,e)).filter(l=>l!==sy),t),n=r.length;if(!n)return sy;if(n===1)return r[0];let o=a(function(l,u){for(let d=0,p=r.length;d<p;d++)if(r[d](l,u))return t;return null},"parsedPattern"),s=r.find(l=>!!l.allBasenames);s&&(o.allBasenames=s.allBasenames);let c=r.reduce((l,u)=>u.allPaths?l.concat(u.allPaths):l,[]);return c.length&&(o.allPaths=c),o}a(Xmr,"trivia3");function tft(t,e,r){let n=zk===Aa.sep,o=n?t:t.replace(Wmr,zk),s=zk+o,c=Aa.sep+t,l;return r?l=a(function(u,d){return typeof u=="string"&&(u===o||u.endsWith(s)||!n&&(u===t||u.endsWith(c)))?e:null},"parsedPattern"):l=a(function(u,d){return typeof u=="string"&&(u===o||!n&&u===t)?e:null},"parsedPattern"),l.allPaths=[(r?"*/":"./")+t],l}a(tft,"trivia4and5");function Zmr(t){try{let e=new RegExp(`^${rft(t)}$`);return function(r){return e.lastIndex=0,typeof r=="string"&&e.test(r)?t:null}}catch{return sy}}a(Zmr,"toRegExp");function ift(t,e,r){return!t||typeof e!="string"?!1:Z_e(t)(e,void 0,r)}a(ift,"match");function Z_e(t,e={}){if(!t)return J_e;if(typeof t=="string"||ehr(t)){let r=X_e(t,e);if(r===sy)return J_e;let n=a(function(o,s){return!!r(o,s)},"resultPattern");return r.allBasenames&&(n.allBasenames=r.allBasenames),r.allPaths&&(n.allPaths=r.allPaths),n}return thr(t,e)}a(Z_e,"parse");function ehr(t){let e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}a(ehr,"isRelativePattern");function thr(t,e){let r=oft(Object.getOwnPropertyNames(t).map(l=>rhr(l,t[l],e)).filter(l=>l!==sy)),n=r.length;if(!n)return sy;if(!r.some(l=>!!l.requiresSiblings)){if(n===1)return r[0];let l=a(function(p,m){let h;for(let g=0,A=r.length;g<A;g++){let y=r[g](p,m);if(typeof y=="string")return y;jne(y)&&(h||(h=[]),h.push(y))}return h?(async()=>{for(let g of h){let A=await g;if(typeof A=="string")return A}return null})():null},"resultExpression"),u=r.find(p=>!!p.allBasenames);u&&(l.allBasenames=u.allBasenames);let d=r.reduce((p,m)=>m.allPaths?p.concat(m.allPaths):p,[]);return d.length&&(l.allPaths=d),l}let o=a(function(l,u,d){let p,m;for(let h=0,g=r.length;h<g;h++){let A=r[h];A.requiresSiblings&&d&&(u||(u=Jne(l)),p||(p=u.substr(0,u.length-Xne(l).length)));let y=A(l,u,p,d);if(typeof y=="string")return y;jne(y)&&(m||(m=[]),m.push(y))}return m?(async()=>{for(let h of m){let g=await h;if(typeof g=="string")return g}return null})():null},"resultExpression"),s=r.find(l=>!!l.allBasenames);s&&(o.allBasenames=s.allBasenames);let c=r.reduce((l,u)=>u.allPaths?l.concat(u.allPaths):l,[]);return c.length&&(o.allPaths=c),o}a(thr,"parsedExpression");function rhr(t,e,r){if(e===!1)return sy;let n=X_e(t,r);if(n===sy)return sy;if(typeof e=="boolean")return n;if(e){let o=e.when;if(typeof o=="string"){let s=a((c,l,u,d)=>{if(!d||!n(c,l))return null;let p=o.replace("$(basename)",()=>u),m=d(p);return jne(m)?m.then(h=>h?t:null):m?t:null},"result");return s.requiresSiblings=!0,s}}return n}a(rhr,"parseExpressionPattern");function oft(t,e){let r=t.filter(l=>!!l.basenames);if(r.length<2)return t;let n=r.reduce((l,u)=>{let d=u.basenames;return d?l.concat(d):l},[]),o;if(e){o=[];for(let l=0,u=n.length;l<u;l++)o.push(e)}else o=r.reduce((l,u)=>{let d=u.patterns;return d?l.concat(d):l},[]);let s=a(function(l,u){if(typeof l!="string")return null;if(!u){let p;for(p=l.length;p>0;p--){let m=l.charCodeAt(p-1);if(m===47||m===92)break}u=l.substr(p)}let d=n.indexOf(u);return d!==-1?o[d]:null},"aggregate");s.basenames=n,s.patterns=o,s.allBasenames=n;let c=t.filter(l=>!l.basenames);return c.push(s),c}a(oft,"aggregateBasenameMatches");function sft(t){let e=t.match(/^---\s*\r?\n([\s\S]*?)\r?\n---\s*\r?\n/);return e?e[1]:null}a(sft,"extractFrontMatter");function aft(t){let e=sft(t);if(!e)return{};let r=e.match(/^applyTo:\s*["']?(.*?)["']?\s*$/m),n=e.match(/^description:\s*["']?(.*?)["']?\s*$/m);return{applyTo:r?r[1].trim():void 0,description:n?n[1].trim():void 0}}a(aft,"extractMetadataFromContent");function cft(t){let e=sft(t);if(!e)return{};let r=e.match(/^description:\s*["']?(.*?)["']?\s*$/m);return{description:r?r[1].trim():void 0}}a(cft,"extractPromptMetadataFromContent");function lft(t){if(!t||t.trim()==="")return{pattern:t,isValid:!1,error:"Pattern cannot be empty"};let e=t.trim();return nhr(e)?{pattern:e,isValid:!0}:{pattern:e,isValid:!1,error:"Invalid glob pattern"}}a(lft,"validate");function uft(t,e){let r=SU(e,","),n=a(o=>{if(o=o.trim(),o.length!==0){if(o==="**"||o==="**/*"||o==="*")return{pattern:o};!o.startsWith("/")&&!o.startsWith("**/")&&(o="**/"+o);for(let s of t)if(ift(o,s))return{pattern:o,file:s}}},"patternMatches");for(let o of r){let s=n(o);if(s)return s}}a(uft,"matches");function nhr(t){try{let e=SU(t,",");if(e.length===0)return!1;for(let r of e){let n=Z_e(r);if(nft(n))return!1}return!0}catch{return!1}}a(nhr,"isValidGlob");f();f();var ihr=".prompt.md",ohr=".instructions.md",shr=".chatmode.md";function dft(t){if(t.endsWith(ihr))return"prompt";if(t.endsWith(ohr))return"instructions";if(t.endsWith(shr))return"mode"}a(dft,"getPromptFileType");var chr=".github/instructions",lhr=".github/prompts",Kk=class{static{a(this,"PromptFilesLocator")}async listFiles(e,r,n){if(!r.length)return[];let o=r.map(c=>{let l="";return n==="instructions"?l=bi(c.uri,chr):n==="prompt"&&(l=bi(c.uri,lhr)),this.getFilesByUri(e,l,n)});return(await Promise.all(o)).flat()}async getFilesByUri(e,r,n){let o,s=[];try{o=await e.get(Ui).readDirectory(r)}catch{return[]}for(let[c,l]of o)l===1&&dft(c)===n&&s.push(bi(r,c));return s}};var ay=class{constructor(){this.logger=new dt("PromptService");this.promptTemplatesCache=null;this.fileLocator=new Kk}static{a(this,"PromptService")}async collect(e,r,n){let o=await this.fileLocator.listFiles(e,r,"instructions").then(fft("instructions")),s=[];for(let c of o)try{let l=await this.parseInstructionFile(e,c.uri);l&&uft(n,l.applyTo)&&s.push(l)}catch(l){this.logger.warn(e,`Failed to parse instruction file ${c.uri}:`,l)}return s}async collectPromptFiles(e,r){let n=await this.fileLocator.listFiles(e,r,"prompt").then(fft("prompt")),o=[];for(let s of n)try{let c=await this.parsePromptFile(e,s.uri);c&&o.push(c)}catch(c){this.logger.warn(e,`Failed to parse prompt file ${s.uri}:`,c)}this.promptTemplatesCache?this.promptTemplatesCache.clear():this.promptTemplatesCache=new Map;for(let s of o)this.promptTemplatesCache.set(s.name,s);return o}async parseInstructionFile(e,r){try{let n=await e.get(Ui).readFileString(r),o=aft(n);if(!o.applyTo)return null;let s=lft(o.applyTo);return s.isValid?{uri:r,applyTo:s.pattern,description:o.description,content:n}:(this.logger.warn(e,`Invalid applyTo pattern in ${r}: ${s.error}`),null)}catch{return null}}async parsePromptFile(e,r){try{let n=await e.get(Ui).readFileString(r),o=cft(n),c=Mi(r).replace(/\.prompt\.md$/,"");return{uri:r,name:c,description:o.description,content:n}}catch{return null}}getPromptTemplates(){return this.promptTemplatesCache?Array.from(this.promptTemplatesCache.values()):[]}getPromptTemplate(e){return this.promptTemplatesCache?.get(e)}};function fft(t){return e=>e.map(r=>({uri:r,type:t}))}a(fft,"withType");var cy=class t{static{a(this,"CustomInstruction")}static async getInstructions(e,r,n={},o){try{let s=e.get(Dv),c=s.getGlobalInstructions(n),l=await s.readFromWorkspaces(e,r,n),d=await e.get(ay).collect(e,r,o||[]),p=d.map(g=>({content:[{instruction:g.content}],kind:2,reference:g.uri})),m=n;if(!n.customIntroduction&&d.length>0){let A=["Here is a list of instruction files that contain rules for modifying or creating new code.","These files are important for ensuring that the code is modified or created correctly.","Please make sure to follow the rules specified in these files when working with the codebase.","If the file is not already available as attachment, use the `read_file` tool to acquire it.","Make sure to acquire the instructions before making any changes to the code.","| Pattern | File Path | Description |","| ------- | --------- | ----------- |"],y=d.map(v=>{let b=v.applyTo||"*",I=v.uri,_=v.description||"";return`| \`${b}\` | \`${I}\` | ${_} |`});m={...n,customIntroduction:A.concat(y).join(`
`)}}let h=[...c,...l,...p];return this.processInstructions(h,m)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let s of e){let c=this.createInstructionElement(s,r);c&&n.push(c)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>
${n.join(`

`)}
</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let s of e.content)s.languageId?r.languageId&&s.languageId===r.languageId&&n.push(`For ${s.languageId} code: ${s.instruction}`):n.push(s.instruction);if(n.length===0)return;let o=n.join(`
`);return`<attachment filePath="${e.reference}">
${o}
</attachment>`}static async appendToUserMessage(e,r,n="",o={},s){if(!r||r.length===0)return n;let c=await t.getInstructions(e,r,o,s);return c?c+`

`+n:n}};f();var uhr="X-Initiator",dhr="X-Interaction-ID",fhr="X-Interaction-Type";var nie=class{static{a(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},eSe=class extends nie{static{a(this,"User")}static id(){return"user"}},tSe=class extends nie{static{a(this,"Agent")}static id(){return"agent"}},rSe=class{static{a(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[uhr]:this.initiator,[dhr]:this.interactionId,[fhr]:this.interactionType.toString()}}},Yd=class t extends rSe{static{a(this,"LlmInteraction")}static user(e,r){return new t(eSe,e,r)}static agent(e,r){return new t(tSe,e,r)}};f();f();var ya=class{static{a(this,"ModelConfigurationProvider")}},iie=class extends ya{constructor(r){super();this.ctx=r}static{a(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let o=[];for(let s of r){let c=await this.getFirstMatchingChatModelConfiguration(s,n);c&&o.push(c)}if(o.length>0){let s=o.find(c=>c.isExperimental);return s||o[0]}throw kr.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(od).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(od).getMetadata(),o=mhr(n,r);if(o.length>0)return o[0]}async getFirstMatchingChatModelConfiguration(r,n){let o=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(o!==void 0)return r===$r.Gpt35turbo||r===$r.Gpt4oMini?{modelId:o.id,uiName:o.name,modelFamily:r,maxRequestTokens:iSe(6144,o),maxResponseTokens:nSe(2048,o),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:o.capabilities.tokenizer,isExperimental:o.isExperimental??!1,stream:o.capabilities.supports?.streaming??!1,toolCalls:o.capabilities.supports?.tool_calls??!1}:r===$r.Gpt4||r===$r.Gpt4turbo?{modelId:o.id,uiName:o.name,modelFamily:r,maxRequestTokens:iSe(10240,o),maxResponseTokens:nSe(4096,o),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:o.capabilities.tokenizer,isExperimental:o.isExperimental??!1,stream:o.capabilities.supports?.streaming??!1,toolCalls:o.capabilities.supports?.tool_calls??!1}:r===$r.Gpt4o?{modelId:o.id,uiName:o.name,modelFamily:r,maxRequestTokens:await phr(this.ctx,o),maxResponseTokens:nSe(4096,o),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:o.capabilities.tokenizer,isExperimental:o.isExperimental??!1,stream:o.capabilities.supports?.streaming??!1,toolCalls:o.capabilities.supports?.tool_calls??!1}:{modelId:o.id,uiName:o.name,modelFamily:r,maxRequestTokens:o.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:o.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:o.capabilities.tokenizer,isExperimental:o.isExperimental??!1,stream:o.capabilities.supports?.streaming??!1,toolCalls:o.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case hY.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function phr(t,e){let r=t.get(Lt),n=await r.fetchTokenAndUpdateExPValuesAndAssignments(),o=r.ideChatMaxRequestTokens(n);return o===-1&&(o=16384),iSe(o,e)}a(phr,"getExpRequestTokens");function iSe(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}a(iSe,"getRequestTokens");function nSe(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}a(nSe,"getResponseTokens");function mhr(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}a(mhr,"filterModelsByCapabilities");var Go=class{static{a(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,o){if(n)return e.get(ya).getBestChatModelConfig([n]);if(e.get(Nh).quotaExhausted&&!(await e.get(nr).getToken()).userInfo?.isFreeUser){let s=await e.get(od).getFallbackModel();if(s)return e.get(ya).getBestChatModelConfig([s?.id])}return e.get(ya).getBestChatModelConfig(Ah(r),o)}static transformMessages(e,r){return r===$r.O1Ga||r===$r.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var Yk=class{constructor(){this.lastChanges=[];this.attemptCount=0;this.DEFAULT_TEMPERATURE=.1}static{a(this,"GitCommitGenerateService")}buildSystemMessage(e,r){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return r&&n.push(`
Current git branch name: ${r}`),e&&n.push(`
Respond in the following locale: ${e}`),n.join(`
`)}buildUserMessage(e,r){let n=[];return e.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",e.userCommits.map(o=>`- ${o}`).join(`
`),""),e.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",e.recentCommits.map(o=>`- ${o}`).join(`
`),""),n.push("# CODE CHANGES:",e.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),r&&n.push("<custom-instructions>",r,"</custom-instructions>"),n.join(`
`)}updateAttemptCount(e){if(e.length!==this.lastChanges.length){this.attemptCount=0;return}for(let r=0;r<e.length;r++)if(this.lastChanges[r]!==e[r]){this.attemptCount=0;return}this.attemptCount++}async generateCommitMessage(e,r,n,o){let s=new Bs(e),c=await Go.getModelConfiguration(e,"gitCommit"),l=[{uri:n.workspaceFolder?n.workspaceFolder:Bl(process.cwd())}],u=await cy.getInstructions(e,l,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),d=[{role:"system",content:this.buildSystemMessage(n.userLanguage,o)},{role:"user",content:this.buildUserMessage(n,u)}];this.updateAttemptCount(n.changes);let p=await e.get(nr).getToken(),m=await e.get(Lt).updateExPValuesAndAssignments(p),h=Math.min(this.DEFAULT_TEMPERATURE*(1+this.attemptCount),2),g=await s.fetchResponse({modelConfiguration:c,messages:d,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Yd.user("git-commit",wr()),temperature:h},r,m);if(this.lastChanges=n.changes,g.type!=="success")return;let A=g.value.match(/```text\n([\s\S]*?)\n```/);return A?A[1].trim():g.value.trim()}};f();var md=class{constructor(e){this.ctx=e}static{a(this,"EditProgressReporter")}},oie=class extends md{constructor(){super(...arguments);this.items=[]}static{a(this,"LibTestEditProgressReporter")}reset(){this.items=[]}reportTurn(r,n){return this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n}),Promise.resolve()}};f();f();f();function ly(){return wr()}a(ly,"uuidV4");f();var Yw=class extends Error{static{a(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var Nv=class extends Error{static{a(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var kU="filepath:",Cl="...existing code...",oSe="copilot-edited-file";f();function Jw(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}a(Jw,"getFenceForCodeBlock");var mm=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{a(this,"CodeBlock")}renderAsArray(){let e=Jw(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${kU} ${Pa(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var sSe=class{constructor(e){this.props=e}static{a(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},PU=class{constructor(e){this.props=e;this.shouldTrim=!0}static{a(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let o=rn(n.content);return n.role==="system"?`${r}<SYSTEM>
${o}
</SYSTEM>


`:r+o},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((s,c)=>{if(c.role==="system"){let l=rn(c.content).endsWith(`
`)?rn(c.content):`${rn(c.content)}
`;return`${s}<SYSTEM>
${l}
End your response with </${oSe}>.
</SYSTEM>


`}return s+rn(c.content)},"")+`


The resulting document:
<${oSe}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${Cl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let c=new mm({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...c.renderAsArray())}else r.push("I am in an empty editor.");let o=new sSe({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();o&&r.push(o);let s=new mm({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...s.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};f();var pE=class{constructor(e){this.ctx=e}static{a(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(Nn).getOrReadTextDocument({uri:e})}};f();f();f();f();f();f();var sg=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new bn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{a(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(vl.fromJson))}static from(e){let r=e.map(o=>new vl(Kt.ofStartAndLength(o.rangeOffset,o.rangeLength),o.text));return r.reverse(),new t(r)}static single(e,r){return new t([new vl(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new vl(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let o of this.edits)r.push(e.substring(n,o.replaceRange.start)),r.push(o.newText),n=o.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return hhr(this,e)}inverse(e){let r=[],n=0;for(let o of this.edits)r.push(new vl(Kt.ofStartAndLength(o.replaceRange.start+n,o.newText.length),e.substring(o.replaceRange.start,o.replaceRange.endExclusive))),n+=o.newText.length-o.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Kt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,o=0,s=0;for(;o<this.edits.length||n<e.edits.length;){let c=e.edits[n],l=this.edits[o];if(l)c?l.replaceRange.intersects(c.replaceRange)?o++:l.replaceRange.start<c.replaceRange.start?(r.push(new vl(l.replaceRange.delta(s),l.newText)),o++):(n++,s+=c.newText.length-c.replaceRange.length):(r.push(new vl(l.replaceRange.delta(s),l.newText)),o++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let o=n.removeCommonSuffixPrefix(e);o.isEmpty||r.push(o)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Kt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Kt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let o=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+o)return n.replaceRange.start;r+=o-n.replaceRange.length}else break}return e-r}},vl=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{a(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Kt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=cw(r,this.newText),o=Math.min(r.length-n,this.newText.length-n,Ux(r,this.newText)),s=new Kt(this.replaceRange.start+n,this.replaceRange.endExclusive-o),c=this.newText.substring(n,this.newText.length-o);return new t(s,c)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function hhr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],o=0;for(let s of e.edits){for(;;){let d=r[0];if(!d||d.replaceRange.start+o+d.newText.length>=s.replaceRange.start)break;r.shift(),n.push(d),o+=d.newText.length-d.replaceRange.length}let c=o,l,u;for(;;){let d=r[0];if(!d||d.replaceRange.start+o>s.replaceRange.endExclusive)break;l||(l=d),u=d,r.shift(),o+=d.newText.length-d.replaceRange.length}if(!l)n.push(new vl(s.replaceRange.delta(-o),s.newText));else{let d="",p=s.replaceRange.start-(l.replaceRange.start+c);p>0&&(d=l.newText.slice(0,p));let m=u.replaceRange.endExclusive+o-s.replaceRange.endExclusive;if(m>0){let A=new vl(Kt.ofStartAndLength(u.replaceRange.endExclusive,0),u.newText.slice(-m));r.unshift(A),o-=A.newText.length-A.replaceRange.length}let h=d+s.newText,g=new Kt(Math.min(l.replaceRange.start,s.replaceRange.start-c),s.replaceRange.endExclusive-o);n.push(new vl(g,h))}}for(;;){let s=r.shift();if(!s)break;n.push(s)}return new sg(n).normalize()}a(hhr,"joinEdits");f();f();var pft=-1;function b8(){return pft!==-1?pft:Date.now()}a(b8,"now");function mft(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}a(mft,"lineRangeDistance");f();var I8=class t{constructor(e){this.edits=e}static{a(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(o=>new mE(r.getTransformer().getRange(o.range),o.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>Ha.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return Ca.create(r)}mapEdits(e){return new t(this.edits.map(e))}},mE=class t{constructor(e,r){this.range=e;this.newText=r}static{a(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new bn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),o=e[e.length-1].range.getEndPosition(),s="";for(let c=0;c<e.length;c++){let l=e[c];if(s+=l.newText,c<e.length-1){let u=e[c+1],d=ir.fromPositions(l.range.getEndPosition(),u.range.getStartPosition()),p=r.getValueOfRange(d);s+=p}}return new t(ir.fromPositions(n,o),s)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),o=r.getValueOfRange(ir.fromPositions(n.getStartPosition(),this.range.getStartPosition())),s=r.getValueOfRange(ir.fromPositions(this.range.getEndPosition(),n.getEndPosition())),c=o+this.newText+s;return new t(n,c)}extendToFullLine(e){let r=new ir(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return Ha.replace(n,this.newText)}};var Cs=class t{constructor(e){this.edits=e;ql(Lx(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{a(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>uy.deserialize(r)))}static fromEdit(e){let r=I8.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,o=[],s=[];for(let c=0;c<n.length;c++){let l=n[c],u=c+1<n.length?n[c+1]:void 0;if(s.push(l),u&&u.range.startLineNumber===l.range.endLineNumber)continue;let d=mE.joinEdits(s,r);s.length=0;let p=uy.fromSingleTextEdit(d,r);o.push(p)}return new t(o)}static createFromUnsorted(e){let r=e.slice();return r.sort(Dh(n=>n.lineRange.startLineNumber,Bh)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let o=n.toSingleEdit(e);r.push(o)}return Ca.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(Gr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Gr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new uy(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(l,u,d,p){let m=d==="unmodified"?" ":d==="deleted"?"-":"+";p===void 0&&(p="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let h=l===-1?"   ":l.toString().padStart(3," "),g=u===-1?"   ":u.toString().padStart(3," ");r.push(`${m} ${h} ${g} ${p}`)}a(n,"pushLine");function o(){r.push("---")}a(o,"pushSeperator");let s=0,c=!0;for(let l of zR(this.edits,(u,d)=>mft(u.lineRange,d.lineRange)<=5)){c?c=!1:o();let u=l[0].lineRange.startLineNumber-2;for(let d of l){for(let h=Math.max(1,u);h<d.lineRange.startLineNumber;h++)n(h,h+s,"unmodified",e[h-1]);let p=d.lineRange,m=d.newLines;for(let h of p.mapToLineArray(g=>g)){let g=e[h-1];n(h,-1,"deleted",g)}for(let h=0;h<m.length;h++){let g=m[h];n(-1,p.startLineNumber+s+h,"added",g)}u=p.endLineNumberExclusive,s+=d.newLines.length-d.lineRange.length}for(let d=u;d<=Math.min(u+2,e.length);d++)n(d,d+s,"unmodified",e[d-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let o of this.edits){for(;n<o.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let s of o.newLines)r.push(s);n=o.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,o)=>new uy(r[o],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},uy=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{a(this,"SingleLineEdit")}static deserialize(e){return new t(Gr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=qh(e.newText),o=e.range.startLineNumber,s=r.getValueOfRange(ir.fromPositions(new jr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=s+n[0];let c=e.range.endLineNumber+1,l=r.getTransformer().getLineLength(e.range.endLineNumber)+1,u=r.getValueOfRange(ir.fromPositions(e.range.getEndPosition(),new jr(e.range.endLineNumber,l)));n[n.length-1]=n[n.length-1]+u;let d=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,p=e.range.endColumn===1;return d&&n[0].length===s.length&&(o++,n.shift()),n.length>0&&o<c&&p&&n[n.length-1].length===u.length&&(c--,n.pop()),new t(new Gr(o,c),n)}toLineEdit(){return new Cs([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let s=this.lineRange.startLineNumber-1,c=e.getTransformer().getLineLength(s)+1;n=new jr(s,c)}else n=new jr(1,1);let o=r.addToPosition(new jr(1,1));return new mE(ir.fromPositions(n,o),"")}else return new mE(new ir(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,o,s=this.lineRange.startLineNumber;return s===e.getTransformer().textLength.lineCount+2?(r=s-1,n=e.getTransformer().getLineLength(r)+1,o=this.newLines.map(c=>`
`+c).join("")):(r=s,n=1,o=this.newLines.map(c=>c+`
`).join("")),new mE(ir.fromPositions(new jr(r,n)),o)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,o=new ir(this.lineRange.startLineNumber,1,r,n),s=this.newLines.join(`
`);return new mE(o,s)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return Ha.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,o=0;for(;r<n&&o<this.newLines.length&&this.newLines[o]===e.getLineAt(r);)r++,o++;let s=0;for(;r<n&&s+o<this.newLines.length&&this.newLines[this.newLines.length-1-s]===e.getLineAt(n-1);)n--,s++;return o===0&&s===0?this:new t(new Gr(r,n),this.newLines.slice(o,this.newLines.length-s))}},ghr;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,a(t,"is")})(ghr||={});var Mv=class t{constructor(e,r){this.base=e;this.edit=r}static{a(this,"RootedLineEdit")}static fromEdit(e){let r=Cs.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new Jd(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=a(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new Cs(r))}};var Ca=class t{constructor(e){this.edits=e;ql(Lx(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{a(this,"Edit")}static deserialize(e){return new t(e.map(r=>Ha.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([Ha.replace(e,r)])}static insert(e,r){return new t([Ha.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>Ha.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((c,l)=>" ".repeat(l-c)),o=r.tryRebase(n);if(!o)return;let s=e.tryRebase(o);if(s)return{e1:o,e2:s}}toOffsetEdit(){return new sg(this.edits.map(e=>new vl(e.range,e.newText)))}compose(e){return Ahr(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let o of this.edits)r+=e.substring(n,o.range.start),r+=o.newText,n=o.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let o=r.data?.merge(n.data)??void 0;r=Ha.replaceWithData(r.range.join(n.range),r.newText+n.newText,o)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),o=Ha.replace(Kt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return o.isNeutral()?t.empty:o.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let o=[],s=0;for(let c of this.edits)o.push(Ha.replaceWithData(Kt.ofStartAndLength(c.range.start+s,c.range.length),c.newText,c.data)),s+=c.newText.length-c.range.length;return new sie(o)}if(this.edits.length!==e.arrayLength)throw E7(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let o=0;o<this.edits.length;++o){let s=e.mapIndexBack(o),c=n[s];r.push(c);for(let l=s;l<n.length;++l){let u=c.newText.length-c.range.length,d=n[l];n[l]=Ha.replaceWithData(Kt.ofStartAndLength(d.range.start+u,d.range.length),d.newText,d.data)}}return new sie(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),o=r.applyInverseToOffset(e.endExclusive);return new Kt(n,o)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let o of this.edits)r.push(Ha.replace(Kt.ofStartAndLength(o.range.start+n,o.newText.length),e(o.range.start,o.range.endExclusive))),n+=o.newText.length-o.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,o=0,s=0;for(;o<this.edits.length||n<e.edits.length;){let c=e.edits[n],l=this.edits[o];if(l)if(!c)r.push(Ha.replace(l.range.delta(s),l.newText)),o++;else{if(l.range.intersectsOrTouches(c.range))return;l.range.start<c.range.start?(r.push(Ha.replace(l.range.delta(s),l.newText)),o++):(n++,s+=c.newText.length-c.range.length)}else break}return new t(r)}};function Ahr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],o=0;for(let s of e.edits){for(;;){let d=r[0];if(!d||d.range.start+o+d.newText.length>=s.range.start)break;r.shift(),n.push(d),o+=d.newText.length-d.range.length}let c=o,l,u;for(;;){let d=r[0];if(!d||d.range.start+o>s.range.endExclusive)break;l||(l=d),u=d,r.shift(),o+=d.newText.length-d.range.length}if(!l)n.push(Ha.replaceWithData(s.range.delta(-o),s.newText,s.data));else{let d=s.range.start-c-l.range.start;d>0&&n.push(Ha.replaceWithData(Kt.emptyAt(l.range.start),l.newText.slice(0,d),l.data));let p=u.range.endExclusive+o-s.range.endExclusive;if(p>0){let h=Ha.replaceWithData(Kt.emptyAt(u.range.endExclusive),u.newText.slice(-p),u.data);r.unshift(h),o-=h.newText.length-h.range.length}let m=new Kt(Math.min(l.range.start,s.range.start-c),s.range.endExclusive-o);n.push(Ha.replaceWithData(m,s.newText,s.data))}}for(;;){let s=r.shift();if(!s)break;n.push(s)}return Ca.create(n).normalize()}a(Ahr,"joinEdits");var Ha=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{a(this,"SingleEdit")}static deserialize(e){return new t(new Kt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Kt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Kt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return Ca.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=yhr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=Chr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function yhr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}a(yhr,"commonPrefixLength");function Chr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}a(Chr,"commonSuffixLength");var Jd=class t{constructor(e,r){this.base=e;this.edit=r}static{a(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return HA(()=>null.base.equals(this.base.apply(e))),HA(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return Mv.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},sie=class t{constructor(e){this.edits=e}static{a(this,"SingleEdits")}static{this.empty=new t([])}compose(){return Ca.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new Lv(this.edits.map(e=>e.toEdit()))}},Lv=class t{constructor(e){this.edits=e}static{a(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return Ca.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let o of this.edits){let s=Ca.trySwap(r,o);if(!s)return;n.push(s.e1),r=s.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>Ca.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let o of this.edits){let s=Cs.fromEdit(new Jd(r,o));n.push(s.humanReadablePatch(r.getLines())),r=r.apply(o)}return n.join(`
---
`)}};f();f();f();var Jk=0;function aie(t){return t===0}a(aie,"lengthIsZero");var hm=2**26;function T8(t,e){return t*hm+e}a(T8,"toLength");function hE(t){let e=t,r=Math.floor(e/hm),n=e-r*hm;return new Cu(r,n)}a(hE,"lengthToObj");function DU(t,e){let r=t+e;return e>=hm&&(r=r-t%hm),r}a(DU,"lengthAdd");function hft(t,e){return t.reduce((r,n)=>DU(r,e(n)),Jk)}a(hft,"sumLengths");function aSe(t,e){return t===e}a(aSe,"lengthEquals");function BU(t,e){let r=t,n=e;if(n-r<=0)return Jk;let s=Math.floor(r/hm),c=Math.floor(n/hm),l=n-c*hm;if(s===c){let u=r-s*hm;return T8(0,l-u)}else return T8(c-s,l)}a(BU,"lengthDiffNonNegative");function gft(t,e){let r=t,n=Math.floor(r/hm),o=r-n*hm,s=e,c=Math.floor(s/hm),l=s-c*hm;return new ir(n+1,o+1,c+1,l+1)}a(gft,"lengthsToRange");f();var w8=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{a(this,"TextEditInfo")}toString(){return`[${hE(this.startOffset)}...${hE(this.endOffset)}) -> ${hE(this.newLength)}`}};function yft(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new YX(Aft(t)),n=Aft(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let o=r.dequeue();function s(d){if(d===void 0){let m=r.takeWhile(h=>!0)||[];return o&&m.unshift(o),m}let p=[];for(;o&&!aie(d);){let[m,h]=o.splitAt(d);p.push(m),d=BU(m.lengthAfter,d),o=h??r.dequeue()}return aie(d)||p.push(new NU(!1,d,d)),p}a(s,"nextS0ToS1MapWithS1LengthOf");let c=[];function l(d,p,m){if(c.length>0&&aSe(c[c.length-1].endOffset,d)){let h=c[c.length-1];c[c.length-1]=new w8(h.startOffset,p,DU(h.newLength,m))}else c.push({startOffset:d,endOffset:p,newLength:m})}a(l,"pushEdit");let u=Jk;for(let d of n){let p=s(d.lengthBefore);if(d.modified){let m=hft(p,g=>g.lengthBefore),h=DU(u,m);l(u,h,d.lengthAfter),u=h}else for(let m of p){let h=u;u=DU(u,m.lengthBefore),m.modified&&l(h,u,m.lengthAfter)}}return c}a(yft,"combineTextEditInfos");var NU=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{a(this,"LengthMapping")}splitAt(e){let r=BU(e,this.lengthAfter);return aSe(r,Jk)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,Jk,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${hE(this.lengthBefore)} -> ${hE(this.lengthAfter)}`}};function Aft(t){let e=[],r=Jk;for(let n of t){let o=BU(r,n.startOffset);aie(o)||e.push(new NU(!1,o,o));let s=BU(n.startOffset,n.endOffset);e.push(new NU(!0,s,n.newLength)),r=n.endOffset}return e}a(Aft,"toLengthMapping");var MU=class t{constructor(e){this.edits=e}static{a(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new cie(n.range,Cu.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let o=hE(n.newLength);return new cie(gft(n.startOffset,n.endOffset),new Cu(o.lineCount,o.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new w8(T8(e.range.startLineNumber-1,e.range.startColumn-1),T8(e.range.endLineNumber-1,e.range.endColumn-1),T8(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),o=yft(r,n);return t._fromTextEditInfo(o)}getRange(){if(this.edits.length!==0)return ir.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},cie=class{constructor(e,r){this.range=e;this.newLength=r}static{a(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var lie=class{constructor(e){this.documents=e;ql(e.length>0)}static{a(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},uie=class{constructor(e,r,n,o,s){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=o;this.lastSelection=s;this.lastEdit=new Jd(this.base,this.lastEdits.compose())}static{a(this,"DocumentHistory")}};f();var die=class extends Ps{constructor(){super();this.branch=WA("branchName",void 0);this._register(BEe((r,n)=>{this.init(n)}))}static{a(this,"ObservableGitStub")}async init(r){}};var fie=class extends Ps{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new lSe(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{a(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new die;this._register(ik(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=b8(),this._documentState.forEach(s=>s.applyAllEdits()))})),Oh(this,this.workspace.openDocuments,(n,o)=>{let s=n.selection.get().at(0),c=new cSe(n.id,n.value.get().value,n.languageId.get(),s);this._documentState.set(c.docId,c),s&&this._lastDocuments.push(c),o.add(qx(this,{value:n.value,selection:n.selection,languageId:n.languageId},l=>{l.languageId.changes.length>0&&(c.languageId=l.languageId.value);let u=this._isAwaitingGitCheckoutCooldown();for(let d of l.value.changes)this._lastDocuments.push(c),c.handleEdit(d,u);l.selection.changes.length>0&&(c.handleSelection(l.selection.value.at(0)),this._lastDocuments.push(c))})),o.add(Wc(()=>{let l=this._documentState.get(n.id);l&&this._lastDocuments.remove(l),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,o=100){let s=this._documentState.get(r);if(!s||!this._lastDocuments.has(s)||!await this.workspace.getDocument(r))return;let c=[],l=!1;for(let u of this._lastDocuments.getItemsReversed()){let d=u.getRecentEdit(n,o);if(d!==void 0){if(d.editCount===0&&l)break;if(await this.workspace.getDocument(u.docId)&&(u.docId===r&&(l=!0),c.push(d.history),n-=d.editCount,n<=0))break}}if(c.reverse(),!!c.some(u=>u.docId===r))return new lie(c)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=b8()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},cSe=class t{constructor(e,r,n,o){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new vu(r),this._currentValue=this._baseValue,this.handleSelection(o)}static{a(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=I8.fromEdit(e,this._currentValue),o=MU.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function s(l){return Xk(l.edits,u=>u.newText.length)}a(s,"editInsertSize");let c=this._edits.at(-1);c&&s(c.edit)<200&&vhr(e,c.edit)?(c.edit=c.edit.compose(e),c.textLengthEdit=c.textLengthEdit.compose(o),c.instant=b8(),c.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:o,instant:b8()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),o=new Lv(this._edits.map(s=>s.edit));return{history:new uie(this.docId,this.languageId,this._baseValue,o,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,o=Ca.empty,s=MU.empty,c,l=0,u=Ca.empty;for(c=this._edits.length-1;c>=0;c--){let d=this._edits[c];if(b8()-d.instant>600*1e3)break;let p=d.textLengthEdit.compose(s),m=p.getRange();Zne(m,"we only compose non-empty Edits");let h=m.endLineNumber-m.startLineNumber;if(r>0&&h>r)break;let g=Xk(d.textLengthEdit.edits,N=>N.range.endLineNumber-N.range.startLineNumber+N.newLength.lineCount);if(g>t.MAX_EDITED_LINES_PER_EDIT||Xk(d.edit.edits,N=>N.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||Xk(d.edit.edits,N=>N.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(c===this._edits.length-1)u=d.edit;else{let N=Ca.trySwap(d.edit,u);if(N)u=N.e1;else{if(g>=2)break;u=d.edit.compose(u)}}let v=d.edit.inverseOnString(n.value);n=n.apply(v);let b=d.edit.compose(o),I=Cs.fromEdit(new Jd(n,b)),k=new Mv(n,I).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;l=k,o=b,s=p}for(let d=0;d<=c;d++){let p=this._edits[d];this._baseValue=this._baseValue.apply(p.edit)}return this._edits=this._edits.slice(c+1),{editCount:l}}toString(){return new Lv(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function Xk(t,e){let r=0;for(let n of t)r+=e(n);return r}a(Xk,"sum");function vhr(t,e){let r=e.getNewRanges();return t.edits.every(n=>xhr(n.range,r))}a(vhr,"editExtends");function xhr(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}a(xhr,"doesTouch");var lSe=class{constructor(e){this.maxSize=e;this._arr=[]}static{a(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};f();f();var Zk=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{a(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Kt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=FA(this.lineStartOffsetByLineIdx,s=>s<=e),n=r+1,o=e-this.lineStartOffsetByLineIdx[r]+1;return new jr(n,o)}getRange(e){return ir.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Cu.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Cu(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var uSe=class{constructor(){this._transformer=void 0}static{a(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new jr(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new ir(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new Zk(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new ir(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return qh(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var gE=class extends uSe{constructor(r){super();this.value=r;this._t=new Zk(this.value)}static{a(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};f();f();f();var LU=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new bn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{a(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let o=r.tryJoinTouching(n);if(o){r=o;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let o=[...r.replacements],s=[],c=0;for(let l of n.replacements){for(;;){let m=o[0];if(!m||m.replaceRange.start+c+m.getNewLength()>=l.replaceRange.start)break;o.shift(),s.push(m),c+=m.getNewLength()-m.replaceRange.length}let u=c,d,p;for(;;){let m=o[0];if(!m||m.replaceRange.start+c>l.replaceRange.endExclusive)break;d||(d=m),p=m,o.shift(),c+=m.getNewLength()-m.replaceRange.length}if(!d)s.push(l.delta(-c));else{let m=Math.min(d.replaceRange.start,l.replaceRange.start-u),h=l.replaceRange.start-(d.replaceRange.start+u);if(h>0){let v=d.slice(Kt.emptyAt(m),new Kt(0,h));s.push(v)}if(!p)throw new bn("Invariant violation: lastIntersecting is undefined");let g=p.replaceRange.endExclusive+c-l.replaceRange.endExclusive;if(g>0){let v=p.slice(Kt.ofStartAndLength(p.replaceRange.endExclusive,0),new Kt(p.getNewLength()-g,p.getNewLength()));o.unshift(v),c-=v.getNewLength()-v.replaceRange.length}let A=new Kt(m,l.replaceRange.endExclusive-c),y=l.slice(A,new Kt(0,l.getNewLength()));s.push(y)}}for(;;){let l=o.shift();if(!l)break;s.push(l)}return this._createNew(s).normalize()}decomposeSplit(e){let r=[],n=[],o=0;for(let s of this.replacements)e(s)?(r.push(s),o+=s.getNewLength()-s.replaceRange.length):n.push(s.slice(s.replaceRange.delta(o),new Kt(0,s.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Kt.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return b7(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Kt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let o=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+o)return n.replaceRange.start;r+=o-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Kt(r,n)}},pie=class{constructor(e){this.replaceRange=e}static{a(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new Kt(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Kt(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},Cft=class t extends LU{static{a(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var mie=class extends LU{static{a(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((c,l)=>" ".repeat(l-c)),o=r.tryRebase(n);if(!o)return;let s=e.tryRebase(o);if(s)return{e1:o,e2:s}}apply(e){let r=[],n=0;for(let o of this.replacements)r.push(e.substring(n,o.replaceRange.start)),r.push(o.newText),n=o.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let o of this.replacements)r.push(hd.replace(Kt.ofStartAndLength(o.replaceRange.start+n,o.newText.length),e(o.replaceRange.start,o.replaceRange.endExclusive))),n+=o.newText.length-o.replaceRange.length;return new $f(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],o=0,s=0,c=0;for(;s<this.replacements.length||o<e.replacements.length;){let l=e.replacements[o],u=this.replacements[s];if(u)if(!l)n.push(new hd(u.replaceRange.delta(c),u.newText)),s++;else if(u.replaceRange.intersectsOrTouches(l.replaceRange)){if(s++,r)return}else u.replaceRange.start<l.replaceRange.start?(n.push(new hd(u.replaceRange.delta(c),u.newText)),s++):(o++,c+=l.newText.length-l.replaceRange.length);else break}return new $f(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let o=n.removeCommonSuffixPrefix(e);o.isEmpty||r.push(o)}return new $f(r)}normalizeEOL(e){return new $f(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),o=hd.replace(Kt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return o.isEmpty?$f.empty:o.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new gE(this.apply(e.value))}mapData(e){return new dSe(this.replacements.map(r=>new _8(r.replaceRange,r.newText,e(r))))}},hie=class extends pie{constructor(r,n){super(r);this.newText=n}static{a(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),o=cw(n,this.newText),s=Math.min(n.length-o,this.newText.length-o,Ux(n,this.newText)),c=new Kt(this.replaceRange.start+o,this.replaceRange.endExclusive-s),l=this.newText.substring(o,this.newText.length-s);return new hd(c,l)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new hd(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),o=cw(n,this.newText);return o===0?this:this.slice(this.replaceRange.deltaStart(o),new Kt(o,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),o=Ux(n,this.newText);return o===0?this:this.slice(this.replaceRange.deltaEnd(-o),new Kt(0,this.newText.length-o))}toEdit(){return new $f([this])}},$f=class t extends mie{static{a(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new hd(e,r)])}static insert(e,r){return new t([new hd(Kt.emptyAt(e),r)])}static delete(e){return new t([new hd(e,"")])}static fromJson(e){return new t(e.map(hd.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let o of e){let s=n.at(-1);!s||o.replaceRange.isBefore(s.replaceRange)?n.push(o):(r=r.compose(t.create(n.reverse())),n=[o])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},hd=class t extends hie{static{a(this,"StringReplacement")}static insert(e,r){return new t(Kt.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(Kt.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var dSe=class t extends mie{static{a(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new _8(e,r,n)])}static insert(e,r,n){return new t([new _8(Kt.emptyAt(e),r,n)])}static delete(e,r){return new t([new _8(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new $f(this.replacements.map(e=>new hd(e.replaceRange,e.newText)))}},_8=class t extends hie{constructor(r,n,o){super(r,n);this.data=o}static{a(this,"AnnotatedStringReplacement")}static insert(r,n,o){return new t(Kt.emptyAt(r),n,o)}static replace(r,n,o){return new t(r,n,o)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};f();var FU=class t{constructor(e){this.replacements=e;HA(()=>Lx(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{a(this,"TextEdit")}static fromStringEdit(e,r){let n=e.replacements.map(o=>Xd.fromStringReplacement(o,r));return new t(n)}static replace(e,r){return new t([new Xd(e,r)])}static insert(e,r){return new t([new Xd(ir.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.replacements)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new Xd(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,o=0;for(let s of this.replacements){let c=s.range.getStartPosition();if(e.isBeforeOrEqual(c))break;let l=s.range.getEndPosition(),u=Cu.ofText(s.text);if(e.isBefore(l)){let d=new jr(c.lineNumber+r,c.column+(c.lineNumber+r===n?o:0)),p=u.addToPosition(d);return gie(d,p)}c.lineNumber+r!==n&&(o=0),r+=u.lineCount-(s.range.endLineNumber-s.range.startLineNumber),u.lineCount===0?l.lineNumber!==c.lineNumber?o+=u.columnCount-(l.column-1):o+=u.columnCount-(l.column-c.column):o=u.columnCount,n=l.lineNumber+r}return new jr(e.lineNumber+r,e.column+(e.lineNumber+r===n?o:0))}mapRange(e){function r(c){return c instanceof jr?c:c.getStartPosition()}a(r,"getStart");function n(c){return c instanceof jr?c:c.getEndPosition()}a(n,"getEnd");let o=r(this.mapPosition(e.getStartPosition())),s=n(this.mapPosition(e.getEndPosition()));return gie(o,s)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new jr(1,1);for(let s of this.replacements){let c=s.range,l=c.getStartPosition(),u=c.getEndPosition(),d=gie(n,l);d.isEmpty()||(r+=e.getValueOfRange(d)),r+=s.text,n=u}let o=gie(n,e.endPositionExclusive);return o.isEmpty()||(r+=e.getValueOfRange(o)),r}applyToString(e){let r=new gE(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.replacements.map((n,o)=>new Xd(r[o],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,o=0;for(let s of this.replacements){let c=Cu.ofText(s.text),l=jr.lift({lineNumber:s.range.startLineNumber+n,column:s.range.startColumn+(s.range.startLineNumber===r?o:0)}),u=c.createRange(l);e.push(u),n=u.endLineNumber-s.range.endLineNumber,o=u.endColumn-s.range.endColumn,r=s.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new bn;if(this.replacements.length===1)return this.replacements[0];let r=this.replacements[0].range.getStartPosition(),n=this.replacements[this.replacements.length-1].range.getEndPosition(),o="";for(let s=0;s<this.replacements.length;s++){let c=this.replacements[s];if(o+=c.text,s<this.replacements.length-1){let l=this.replacements[s+1],u=ir.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),d=e.getValueOfRange(u);o+=d}}return new Xd(ir.fromPositions(r,n),o)}equals(e){return R3(this.replacements,e.replacements,(r,n)=>r.equals(n))}toString(e){return e===void 0?this.replacements.map(r=>r.toString()).join(`
`):typeof e=="string"?this.toString(new gE(e)):this.replacements.length===0?"":this.replacements.map(r=>{let o=e.getValueOfRange(r.range),s=ir.fromPositions(new jr(Math.max(1,r.range.startLineNumber-1),1),r.range.getStartPosition()),c=e.getValueOfRange(s);c.length>10&&(c="..."+c.substring(c.length-10));let l=ir.fromPositions(r.range.getEndPosition(),new jr(r.range.endLineNumber+1,1)),u=e.getValueOfRange(l);u.length>10&&(u=u.substring(0,10)+"...");let d=o;if(d.length>10){let m=Math.floor(5);d=d.substring(0,m)+"..."+d.substring(d.length-m)}let p=r.text;if(p.length>10){let m=Math.floor(5);p=p.substring(0,m)+"..."+p.substring(p.length-m)}return d.length===0?`${c}\u2770${p}\u2771${u}`:`${c}\u2770${d}\u21A6${p}\u2771${u}`}).join(`
`)}},Xd=class t{constructor(e,r){this.range=e;this.text=r}static{a(this,"TextReplacement")}static joinReplacements(e,r){if(e.length===0)throw new bn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),o=e[e.length-1].range.getEndPosition(),s="";for(let c=0;c<e.length;c++){let l=e[c];if(s+=l.text,c<e.length-1){let u=e[c+1],d=ir.fromPositions(l.range.getEndPosition(),u.range.getStartPosition()),p=r.getValueOfRange(d);s+=p}}return new t(ir.fromPositions(n,o),s)}static fromStringReplacement(e,r){return new t(r.getTransformer().getRange(e.replaceRange),e.newText)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new FU([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),o=r.getValueOfRange(ir.fromPositions(n.getStartPosition(),this.range.getStartPosition())),s=r.getValueOfRange(ir.fromPositions(this.range.getEndPosition(),n.getEndPosition())),c=o+this.text+s;return new t(n,c)}extendToFullLine(e){let r=new ir(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),o=cw(r,n),s=Cu.ofText(r.substring(0,o)).addToPosition(this.range.getStartPosition()),c=n.substring(o),l=ir.fromPositions(s,this.range.getEndPosition());return new t(l,c)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),o=cw(r,n);r=r.substring(o),n=n.substring(o);let s=Ux(r,n);return r=r.substring(0,r.length-s),n=n.substring(0,n.length-s),r===""}};function gie(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return ir.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new bn("start must be before end");return new ir(t.lineNumber,t.column,e.lineNumber,e.column)}a(gie,"rangeFromPositions");var OU=class t{constructor(e){this.replacements=e;ql(Lx(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{a(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>S8.deserialize(r)))}static fromEdit(e,r){let n=FU.fromStringEdit(e,r);return t.fromTextEdit(n,r)}static fromTextEdit(e,r){let n=e.replacements,o=[],s=[];for(let c=0;c<n.length;c++){let l=n[c],u=c+1<n.length?n[c+1]:void 0;if(s.push(l),u&&u.range.startLineNumber===l.range.endLineNumber)continue;let d=Xd.joinReplacements(s,r);s.length=0;let p=S8.fromSingleTextEdit(d,r);o.push(p)}return new t(o)}static createFromUnsorted(e){let r=e.slice();return r.sort(Dh(n=>n.lineRange.startLineNumber,Bh)),new t(r)}isEmpty(){return this.replacements.length===0}toEdit(e){let r=[];for(let n of this.replacements){let o=n.toSingleEdit(e);r.push(o)}return new $f(r)}toString(){return this.replacements.map(e=>e.toString()).join(",")}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Gr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.replacements){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Gr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.replacements.some(r=>e.replacements.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.replacements.map(r=>new S8(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(l,u,d,p){let m=d==="unmodified"?" ":d==="deleted"?"-":"+";p===void 0&&(p="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let h=l===-1?"   ":l.toString().padStart(3," "),g=u===-1?"   ":u.toString().padStart(3," ");r.push(`${m} ${h} ${g} ${p}`)}a(n,"pushLine");function o(){r.push("---")}a(o,"pushSeperator");let s=0,c=!0;for(let l of zR(this.replacements,(u,d)=>u.lineRange.distanceToRange(d.lineRange)<=5)){c?c=!1:o();let u=l[0].lineRange.startLineNumber-2;for(let d of l){for(let h=Math.max(1,u);h<d.lineRange.startLineNumber;h++)n(h,h+s,"unmodified",e[h-1]);let p=d.lineRange,m=d.newLines;for(let h of p.mapToLineArray(g=>g)){let g=e[h-1];n(h,-1,"deleted",g)}for(let h=0;h<m.length;h++){let g=m[h];n(-1,p.startLineNumber+s+h,"added",g)}u=p.endLineNumberExclusive,s+=d.newLines.length-d.lineRange.length}for(let d=u;d<=Math.min(u+2,e.length);d++)n(d,d+s,"unmodified",e[d-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let o of this.replacements){for(;n<o.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let s of o.newLines)r.push(s);n=o.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.replacements.map((n,o)=>new S8(r[o],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},S8=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{a(this,"LineReplacement")}static deserialize(e){return new t(Gr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=qh(e.text),o=e.range.startLineNumber,s=r.getValueOfRange(ir.fromPositions(new jr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=s+n[0];let c=e.range.endLineNumber+1,l=r.getTransformer().getLineLength(e.range.endLineNumber)+1,u=r.getValueOfRange(ir.fromPositions(e.range.getEndPosition(),new jr(e.range.endLineNumber,l)));n[n.length-1]=n[n.length-1]+u;let d=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,p=e.range.endColumn===1;return d&&n[0].length===s.length&&(o++,n.shift()),n.length>0&&o<c&&p&&n[n.length-1].length===u.length&&(c--,n.pop()),new t(new Gr(o,c),n)}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let s=this.lineRange.startLineNumber-1,c=e.getTransformer().getLineLength(s)+1;n=new jr(s,c)}else n=new jr(1,1);let o=r.addToPosition(new jr(1,1));return new Xd(ir.fromPositions(n,o),"")}else return new Xd(new ir(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,o,s=this.lineRange.startLineNumber;return s===e.getTransformer().textLength.lineCount+2?(r=s-1,n=e.getTransformer().getLineLength(r)+1,o=this.newLines.map(c=>`
`+c).join("")):(r=s,n=1,o=this.newLines.map(c=>c+`
`).join("")),new Xd(ir.fromPositions(new jr(r,n)),o)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,o=new ir(this.lineRange.startLineNumber,1,r,n),s=this.newLines.join(`
`);return new Xd(o,s)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return new hd(n,r.text)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,o=0;for(;r<n&&o<this.newLines.length&&this.newLines[o]===e.getLineAt(r);)r++,o++;let s=0;for(;r<n&&s+o<this.newLines.length&&this.newLines[this.newLines.length-1-s]===e.getLineAt(n-1);)n--,s++;return o===0&&s===0?this:new t(new Gr(r,n),this.newLines.slice(o,this.newLines.length-s))}toLineEdit(){return new OU([this])}},Ehr;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,a(t,"is")})(Ehr||={});var R8=class{constructor(e,r){this.originalText=e;this._trackedEdit=r;let n=r.removeCommonSuffixPrefix(e);this._updatedTrackedEdit=n.mapData(()=>new Aie(!0))}static{a(this,"ArcTracker")}handleEdits(e){let r=e.mapData(s=>new Aie(!1)),o=this._updatedTrackedEdit.compose(r).decomposeSplit(s=>!s.data.isTrackedEdit).e2;this._updatedTrackedEdit=o}getTrackedEdit(){return this._updatedTrackedEdit.toStringEdit()}getAcceptedRetainedCharactersCount(){return Xk(this._updatedTrackedEdit.replacements,r=>r.getNewLength())}getOriginalCharacterCount(){return Xk(this._trackedEdit.replacements,e=>e.getNewLength())}getTrackedEditLineMetrics(){let e=this.getTrackedEdit();if(!e)return{deletedLineCounts:0,insertedLineCounts:0};let r=OU.fromEdit(e,new gE(this.originalText)),n=b7(r.replacements,s=>s.lineRange.length),o=b7(r.getNewLineRanges(),s=>s.length);return{deletedLineCounts:n,insertedLineCounts:o}}getDebugState(){return{edits:this._updatedTrackedEdit.replacements.map(e=>({range:e.replaceRange.toString(),newText:e.newText,isTrackedEdit:e.data.isTrackedEdit}))}}},Aie=class{constructor(e){this.isTrackedEdit=e}static{a(this,"IsTrackedEditData")}join(e){if(this.isTrackedEdit===e.isTrackedEdit)return this}};f();var k8=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=$f.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{a(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let o=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${o}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),o=this._combinedEditsSinceStart.compose(e);o=o.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=o,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,o=0,s=this._originalEdits.getNewRanges(),c=bhr(s,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${s.length} edits:`);for(let d=0;d<s.length;d++){let p=this._originalEdits.replacements[d],m=this.originalText.substring(p.replaceRange.start,p.replaceRange.endExclusive),h=p.newText,g=c[d],A=this._text.substring(g.start,g.endExclusive),y=fSe(A,h),v=fSe(h,m),b=fSe(A,m);if(this._debugLog.push(`  #${d+1}: "${m}"->"${h}"->"${A}" | 4gram:${y.toFixed(2)} noRevert:(${v.toFixed(2)},${b.toFixed(2)})`),v!==1){let I=1-Math.max(b-v,0)/(1-v);n+=p.replaceRange.length*I,o+=p.replaceRange.length}e+=p.newText.length*y,r+=p.newText.length}let l=r===0?1:e/r,u=o===0?1:n/o;return this._debugLog.push(`[RESULT] fourGram: ${l.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${u.toFixed(3)} (${n.toFixed(1)}/${o.toFixed(1)})`),{fourGram:l,noRevert:u}}};function fSe(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let l=0;l<=t.length-4;l++){let u=t.substring(l,l+4),d=n.get(u)||0;n.set(u,d+1)}for(let l=0;l<=e.length-4;l++){let u=e.substring(l,l+4),d=n.get(u)||0;n.set(u,d-1)}let o=t.length-4+1+e.length-4+1,s=0;for(let l of n.values())s+=Math.abs(l);return(o-s)/o}a(fSe,"compute4GramTextSimilarity");function bhr(t,e){t=t.slice();let r=[],n=0;for(let o of e.replacements){for(;;){let c=t[0];if(!c||c.endExclusive>=o.replaceRange.start)break;t.shift(),r.push(c.delta(n))}let s=[];for(;;){let c=t[0];if(!c||!c.intersectsOrTouches(o.replaceRange))break;t.shift(),s.push(c)}for(let c=s.length-1;c>=0;c--){let l=s[c],u=l.intersect(o.replaceRange).length;l=l.deltaEnd(-u+(c===0?o.newText.length:0));let d=l.start-o.replaceRange.start;d>0&&(l=l.delta(-d)),c!==0&&(l=l.delta(o.newText.length)),l=l.delta(-(o.newText.length-o.replaceRange.length)),t.unshift(l)}n+=o.newText.length-o.replaceRange.length}for(;;){let o=t[0];if(!o)break;t.shift(),r.push(o.delta(n))}return r}a(bhr,"applyEditsToRanges");f();f();var QU=class{static{a(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new jr(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function yie(t,e,r,n=5e3){let o=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),s=new QU(t),c=new QU(e),l=[];for(let u of o.changes)for(let d of u.innerChanges??[]){let p=c.positionToOffset(d.modifiedRange.getStartPosition()),m=c.positionToOffset(d.modifiedRange.getEndPosition()),h=e.substring(p,m),g=s.positionToOffset(d.originalRange.getStartPosition()),A=s.positionToOffset(d.originalRange.getEndPosition()),y=new Kt(g,A);l.push(new hd(y,h))}return new $f(l)}a(yie,"stringEditFromDiff");f();f();var vft=require("worker_threads");var pSe=class{constructor(){this.nextId=1;this.handlers=new Map}static{a(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,o=new Promise((s,c)=>{r=s,n=c});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:o}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function Ihr(t){let e={get:a((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...o)=>t(n,o)),r[n]),"get")};return new Proxy(Object.create(null),e)}a(Ihr,"createRpcProxy");var Cie=class{constructor(e,r,n){this.responseHandler=new pSe;this.worker=new vft.Worker(e,r),this.worker.on("message",async o=>{if("fn"in o)try{let s=await n?.[o.fn].apply(n,o.args);this.worker.postMessage({id:o.id,res:s})}catch(s){let c=s instanceof Error?s:new Error(String(s));this.worker.postMessage({id:o.id,err:c})}else this.responseHandler.handleResponse(o)}),this.worker.on("error",o=>this.handleError(o)),this.worker.on("exit",o=>{o!==0&&this.handleError(new Error(`Worker thread exited with code ${o}.`))}),this.proxy=Ihr((o,s)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:c,result:l}=this.responseHandler.createHandler();return this.worker.postMessage({id:c,fn:o,args:s}),l})}static{a(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};f();var vie=class t{static{a(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var UU=class t{static{a(this,"LineRangeMapping")}static inverse(e,r,n){let o=[],s=1,c=1;for(let u of e){let d=new t(new Gr(s,u.original.startLineNumber),new Gr(c,u.modified.startLineNumber));d.modified.isEmpty||o.push(d),s=u.original.endLineNumberExclusive,c=u.modified.endLineNumberExclusive}let l=new t(new Gr(s,r+1),new Gr(c,n+1));return l.modified.isEmpty||o.push(l),o}static clip(e,r,n){let o=[];for(let s of e){let c=s.original.intersect(r),l=s.modified.intersect(n);c&&!c.isEmpty&&l&&!l.isEmpty&&o.push(new t(c,l))}return o}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new Fv(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new bn("not a valid diff");return new Fv(new ir(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new ir(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Fv(new ir(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new ir(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(xft(this.original.endLineNumberExclusive,e)&&xft(this.modified.endLineNumberExclusive,r))return new Fv(new ir(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new ir(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Fv(ir.fromPositions(new jr(this.original.startLineNumber,1),P8(new jr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),ir.fromPositions(new jr(this.modified.startLineNumber,1),P8(new jr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Fv(ir.fromPositions(P8(new jr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),P8(new jr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),ir.fromPositions(P8(new jr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),P8(new jr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new bn}};function P8(t,e){if(t.lineNumber<1)return new jr(1,1);if(t.lineNumber>e.length)return new jr(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new jr(t.lineNumber,r.length+1):t}a(P8,"normalizePosition");function xft(t,e){return t>=1&&t<=e.length}a(xft,"isValidLineNumber");var xie=class t extends UU{static{a(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=Gr.join(e.map(o=>Gr.fromRangeInclusive(o.originalRange))),n=Gr.join(e.map(o=>Gr.fromRangeInclusive(o.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},Fv=class t{static{a(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.replacements.map((o,s)=>new t(o.range,r[s]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.replacements.map((o,s)=>new t(o.range,r[s]));return t.join(n)}static join(e){if(e.length===0)throw new bn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],o=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(o.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(o.modifiedRange.getStartPosition())))throw new bn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new Xd(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var bft=require("fs");var Jp=class{static{a(this,"DiffServiceImpl")}constructor(){this._worker=new Uh(()=>{let e=Thr([Yne(__dirname,"diffWorker.js"),Yne(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new Cie(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let o=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:o.identical,quitEarly:o.quitEarly,changes:Eft(o.changes),moves:o.moves.map(c=>new vie(new UU(new Gr(c[0],c[1]),new Gr(c[2],c[3])),Eft(c[4])))}}};function Eft(t){return t.map(e=>new xie(new Gr(e[0],e[1]),new Gr(e[2],e[3]),e[4]?.map(r=>new Fv(new ir(r[0],r[1],r[2],r[3]),new ir(r[4],r[5],r[6],r[7])))))}a(Eft,"toLineRangeMappings");function Thr(t){for(let e of t)if((0,bft.existsSync)(e))return e}a(Thr,"firstExistingPath");f();var bie=new dt("repository"),AE=class t{static{a(this,"GitBranchData")}constructor(e,r=!1){this.currentBranch=e,this.isDetachedHead=r}static detachedHead(){return new t(void 0,!0)}static branch(e){return new t(e,!1)}},ag=class{static{a(this,"GitBranchLoader")}},Eie=class extends ag{constructor(r){super();this.loaders=r}static{a(this,"GitFallbackBranchLoader")}async getBranchInfo(r,n){for(let o of this.loaders){let s=await o.getBranchInfo(r,n);if(s)return s}}};var Iie=new dt("editSurvivalReporter"),mSe=class{constructor(e,r,n,o,s,c,l){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=o;this._markedEdits=s;this._sendTelemetryEvent=c;this._customTimeouts=l;this._store=new ad;this._editSurvivalTracker=new k8(this._documentTextBeforeMarkedEdits,this._markedEdits),this.captureInitialBranchInfo().then(()=>{this.setupTimeouts()}).catch(()=>{this.setupTimeouts()})}static{a(this,"BaseEditSurvivalReporter")}setupTimeouts(){if(this._store.isDisposed)return;let e=this._customTimeouts||[30*1e3,120*1e3,300*1e3,600*1e3];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}async report(e){let r=await this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs,this._arcTracker);this._sendTelemetryEvent(r)}_getLineCountInfo(){if(this._arcTracker)return this._arcTracker.getTrackedEditLineMetrics()}async triggerReport(e){await this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}async captureInitialBranchInfo(){try{let e=Nl(this._document.uri),r=this.ctx.get(ag);this._initialBranchInfo=await r.getBranchInfo(this.ctx,e)}catch(e){Iie.warn(this.ctx,"Failed to capture initial branch info",e),this._initialBranchInfo=void 0}}async checkBranchChange(){try{let e=Nl(this._document.uri),n=await this.ctx.get(ag).getBranchInfo(this.ctx,e);if(!this._initialBranchInfo||!n)return 0;let o=this._initialBranchInfo.currentBranch,s=n.currentBranch,c=this._initialBranchInfo.isDetachedHead,l=n.isDetachedHead;return o!==s||c!==l?1:0}catch(e){return Iie.warn(this.ctx,"Failed to check branch change",e),0}}async createEditSurvivalResult(e,r,n,o,s){let c=e.computeTrackedEditsSurvivalScore(),l=await this.checkBranchChange(),u=this._getLineCountInfo(),d={fourGram:c.fourGram,noRevert:c.noRevert,timeDelayMs:r,didBranchChange:l,arc:s?.getAcceptedRetainedCharactersCount(),originalCharCount:s?.getOriginalCharacterCount(),currentLineCount:u?.insertedLineCounts,currentDeletedLineCount:u?.deletedLineCounts,originalLineCount:this._initialLineCounts?.insertedLineCounts,originalDeletedLineCount:this._initialLineCounts?.deletedLineCounts,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:o};return{...d,currentLineCount:d.currentLineCount&&d.originalLineCount&&d.currentLineCount>d.originalLineCount?d.originalLineCount:d.currentLineCount,currentDeletedLineCount:d.currentDeletedLineCount&&d.originalDeletedLineCount&&d.currentDeletedLineCount>d.originalDeletedLineCount?d.originalDeletedLineCount:d.currentDeletedLineCount}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),o=await e.get(Nn).getOrReadTextDocument({uri:r.uri}),s=performance.now()-n;if(o.status!=="valid")throw new bn(`Document ${r.uri} is not valid, details ${JSON.stringify(o)}`);return{text:o.document.getText(),readDocumentTimeMs:s}}async computeDiffWithTiming(e,r,n){let o=performance.now(),s=await yie(r,n,e.get(Jp)),c=performance.now()-o;return{edits:s,diffComputationTimeMs:c}}};var Tie=class extends mSe{static{a(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,o,s,c,l){super(e,r,n,o,s,c,l),this._arcTracker=new R8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._initialLineCounts=this._getLineCountInfo()}scheduleReport(e,r){let n=new E8(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(o=>{Iie.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,o),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new k8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits),this._arcTracker=new R8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new k8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker=new R8(this._documentTextBeforeMarkedEdits,this._markedEdits);await this.report(e)}catch(r){throw Iie.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var Ift=new dt("editSurvivalTrackerService"),Ov=class{constructor(e){this.ctx=e}static{a(this,"EditSurvivalTrackerService")}initialize(e,r,n){Ift.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let o;return{startReporter:a(s=>{(async()=>{try{let c=await yie(r,n,this.ctx.get(Jp));o=new Tie(this.ctx,e,r,n,c,s,[0,30*1e3,120*1e3,300*1e3,600*1e3])}catch(c){Ift.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${UA(c)}`,c)}})()},"startReporter"),cancel:a(()=>{o?.cancel()},"cancel")}}};f();var va=class extends Error{static{a(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var whr=1e3,_hr={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:$r.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},D8=class{static{a(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new dt("codeMapper")}async mapCode(e,r,n,o,s,c=!1,l){if(!e.resource)throw new Nv("No uri found in code block");if(o.isCancellationRequested)throw new Yw;e.code.includes(Cl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let u=await this.ctx.get(Nn).getOrReadTextDocument({uri:e.resource});if(u.status==="notfound")return s&&await this.reportCodeBlock(e,s),{code:e.code};if(u.status==="invalid"){let k=`Failed to find file ${e.resource} with status ${u.status} and reason ${u.reason}`,N=new Nv(k);throw this.logger.error(this.ctx,k,N),N}let d=u.document.getText();if(d.length===0&&!e.code.includes(Cl))return s&&await this.reportCodeBlock(e,s),{code:e.code};let p=new PU({documentContext:{document:u},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new pE(this.ctx)}),m=this.ctx.get(Ov),h=await p.render();h=p.transformToFastApplyMessage(h),s&&await s({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Mi(e.resource),editDescription:e.markdownBeforeBlock});let g=await this.ctx.get(nr).getToken(),A=await this.ctx.get(Lt).updateExPValuesAndAssignments(g),y=ly(),v=[],b=0,I=0,_=d.length+e.code.length+whr;for(;;){let k={copilotApiProvider:"proxy",modelConfiguration:_hr,messages:h,uiKind:c?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:d},copilotEditsSessionHeader:l};this.logger.debug(this.ctx,`Send map code request ${y} in iteration ${I} with params: ${JSON.stringify(k,null,2)}`);let F=await this.ctx.get(Bs).fetchResponse(k,o,A);if(this.logger.debug(this.ctx,`Received map code response ${y} in iteration ${I} with result: ${JSON.stringify(F,null,2)}`),b=this.calculateResponseLength(F,v,b),F.type==="length"){if(b>_)throw new Nv(`Code mapper might be in a loop: Rewritten length: ${b}, Document length: ${d.length}, Code block length ${e.code.length}`);h=await new PU({documentContext:{document:u},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new pE(this.ctx),inProgressRewriteContent:F.truncatedValue}).render()}else if(F.type==="success"){let O=v.join("");if(O){s&&await s({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Mi(e.resource),partialText:O,languageId:u.document.detectedLanguageId,markdownCodeFence:Jw(O)});let Y=m.initialize(u.document,d,O);return{code:O,editSurvivalTrackingSession:Y,telemetry:{requestSource:n.chatRequestSource,chatRequestModel:n.chatRequestModel,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:F.requestId}}}else{let Y=`No valid completion found for uri ${e.resource}`;throw new Nv(Y)}}else{if(F.type==="canceled")throw new va;{let O=`Failed to map code for uri ${e.resource} with result type ${F.type}`;throw this.logger.error(this.ctx,O,F),new Nv(O)}}I+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Mi(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Mi(e.resource)})}};f();var Zd=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{a(this,"EditConversationException")}};f();f();var Xw=class{static{a(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in. If you are using a custom model, please check if the API key is still valid.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var wie=class extends Error{static{a(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var Zw=class{constructor(e,r){this.request=e;this.id=wr();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{a(this,"EditTurn")}},hSe=class{constructor(e=[]){this.turns=[];this.turns=e}static{a(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},_ie=class{constructor(e=[],r="panel",n="en"){this._id=wr();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new hSe(e)}static{a(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new wie(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var Sie=class{static{a(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new Zd({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:XT,type:"user"},new Zd({message:XT});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new Zd({message:Xw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new Zd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new Zd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new Zd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new Zd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new Zd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new Zd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new Zd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new Zd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*wft(t){yield Promise.resolve(t)}a(wft,"stringToAsyncIterable");f();f();var yE=class{static{a(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||Bl(r)}static uriToPath(e){let r=ns(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var Rie=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{a(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let o of this.props.history)r.push({role:"user",content:o.request.message}),o.response&&o.response.type==="model"&&r.push({role:"assistant",content:o.response.message});let n=await cy.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},[]);return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(yE.posixFilePathToUri(e))}getFilePath(e){return yE.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${kU} ${this.exampleFilePath}`,`// ${Cl}`,"{ changed code }",`// ${Cl}`,"{ changed code }",`// ${Cl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${kU} ${this.tsExampleFilePath}`,"class Person {",`   // ${Cl}`,"   age: number;",`   // ${Cl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,o]of e){let s=new mm({code:o.getText(),languageId:o.detectedLanguageId,uri:n});r.push("<file>",...s.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${Cl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};f();f();var kie=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{a(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var gSe="<file>",qU="```",WU="###",Rhr=/^(`+)([^ \n]*)/,HU="filepath:";async function*Sft(t,e){let r=new kie(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let y=await r.peek(Math.max(qU.length,gSe.length,WU.length));if(y.startsWith(gSe)||y.startsWith(qU))break;if(y.startsWith(WU)){let v=await r.readLineIncludingLF(),b=v.substring(WU.length).trim();e(b)?n.length=0:n.push(v)}else await _ft(r,n)}if(r.endOfStream)break;let o=await r.readLineIncludingLF(),s=o.startsWith(gSe);for(;!r.endOfStream&&!o.startsWith(qU);)o=await r.readLineIncludingLF();if(r.endOfStream)break;let c=o.match(Rhr),l=c?c[2]:void 0,u=sZe(l?iZe(l):void 0),d=[`${u.lineComment.start} ${HU}`,`:: ${HU}`,`<!-- ${HU}`,`// ${HU}`,`# ${HU}`],p=Math.max(...d.map(y=>y.length)),m=u.lineComment.end??"",h="</file>",g,A=[];for(;!r.endOfStream;){let y=await r.peek(Math.max(qU.length,p));if(y.startsWith(qU)){let v=await r.readLineIncludingLF();if(!s)break;if(await r.peek(h.length)===h){await r.readLineIncludingLF();break}else{A.push(v);continue}}if(!g&&d.some(v=>y.startsWith(v))){let v=await r.readLineIncludingLF(),b=d.reduce((I,_)=>y.startsWith(_)?v.substring(_.length):I,v);b=b.split("-->")[0].trim(),b.endsWith(m)&&(b=b.substring(0,b.length-m.length)),b=b.trim(),g=e(b);continue}await _ft(r,A)}yield{resource:g,language:l,code:A.join(""),markdownBeforeBlock:n.join("")},n.length=0}}a(Sft,"getCodeBlocksFromResponse");async function _ft(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}a(_ft,"pipeOneLine");function Rft(t){if(t.startsWith(`${WU} `))return"";let e=t.indexOf(`
${WU} `);return e===-1?"":t.substring(0,e)+`
`}a(Rft,"parseOverallDescription");f();f();var Pie=class extends Error{static{a(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var khr=new dt("CopilotEditsConversations"),xl=class{constructor(e){this.editConversations=new vr(50);this.ctx=e}static{a(this,"EditConversations")}create(e="panel",r){let n=new _ie([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&khr.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new Pie(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};var Phr=new dt("copilotEditsService"),CE=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new Bs(e)}static{a(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),o=Sie.processResult(e,n);await this.parseAndSendProgressBack(e,o,r),e.currentTurn.response={message:o,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof Yw)await this.reportEnd(e,{message:XT});else if(n instanceof Zd)await this.reportEnd(e,n.editConversationError);else{let o=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:o,type:"meta"},await this.reportEnd(e,{message:o})}}return[]}async getEditCodeResult(e,r){this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),o=await this.ctx.get(nr).getToken(),s=await this.ctx.get(Lt).updateExPValuesAndAssignments(o);this.abortIfCancelled(e,r);let c=e.userSelectedModelProviderName&&e.userSelectedModel?await Pv(this.ctx,e.userSelectedModelProviderName,e.userSelectedModel):await Go.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),l=Go.transformMessages(n,c.modelFamily);return this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:c,messages:l,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,s)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=e.userSelectedModelProviderName&&e.userSelectedModel?"customized":(await Go.getModelConfiguration(this.ctx,"edits",e.userSelectedModel)).uiName,o=e.editConversation.getTurns(),s=o.length>1?o.slice(0,-1):[];return await new Rie({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new pE(this.ctx),modelName:n,history:s,ctx:this.ctx}).render()}abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:XT,type:"user"},new Yw;this.ctx.get(xl).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let o=wft(r),s=new D8(this.ctx),c=a(d=>yE.pathToUri(e,d),"createUri"),l=[],u=Rft(r);u&&await this.ctx.get(md).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:u}),this.abortIfCancelled(e,n);for await(let d of Sft(o,c)){let p=s.mapCode(d,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async m=>{await this.ctx.get(md).reportTurn(e,m)}).then(async m=>(m.editSurvivalTrackingSession&&d.resource&&await this.startEditSurvivalTrackingWithSession(e,d.resource,m.editSurvivalTrackingSession,m.telemetry),m));l.push(p)}await Promise.all(l),l.length===0&&await this.reportNoCodeBlocks(e,r)}catch(o){if(o instanceof Nv||o instanceof cN)e.currentTurn.status="error",e.currentTurn.response={message:o.message,type:"meta"},await this.reportEnd(e,{message:o.message});else if(o instanceof Yw)e.currentTurn.status="cancelled",e.currentTurn.response={message:XT,type:"user"},await this.reportEnd(e,{message:XT});else throw o}}async reportNoCodeBlocks(e,r){await this.ctx.get(md).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(md).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(md).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}async startEditSurvivalTrackingWithSession(e,r,n,o){try{let s=KC({uri:r,languageId:"UNKNOWN"}),c=await this.ctx.get(nr).getToken(),l=await this.ctx.get(Lt).updateExPValuesAndAssignments(c);n.startReporter(u=>{this.handleEditSurvivalTelemetry(e,u,l,s,o)})}catch(s){let c=e?.editConversationId||"unknown",l=e?.currentTurn?.id||"unknown",u=r||"unknown";Phr.warn(this.ctx,`Failed to start edit survival tracking for file '${u}' in conversation '${c}', turn '${l}'.`,s)}}handleEditSurvivalTelemetry(e,r,n,o,s){CZ(this.ctx,"editsPanel",{requestSource:s?.requestSource??e.editConversation.getSource(),chatRequestModel:s?.chatRequestModel??"",mapper:s?.mapper??"",headerRequestId:s?.headerRequestId??"",mode:"edit",modelId:e.userSelectedModel??"unknown",languageId:o},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}};f();var B8=class extends gf{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{a(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let o=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let s=this.getConfiguredUrls();(o.apiUrl!==s.apiUrl||o.serverUrl!==s.serverUrl)&&r.get(nr).resetToken(),r.get(Qd).updateSessionConfig(s)}recalculateUrlDefaults(r,n){let{serverUrl:o,apiUrl:s}=P0({serverUrl:jj(r,n.serverUrl),apiUrl:jj(r,n.apiUrl)});this.baseUrlObject=new URL(o),this.apiUrl=s}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};f();var y4i=new dt("exp");function Pft(t){let e=t.get(Lt);e.registerStaticFilters(Nhr(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Ki(t,$t.DebugOverrideEngine)||Ki(t,$t.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>nj()?"copilot-web":t.get(on).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>kft(t)),e.registerDynamicFilter(Y4.CopilotRelatedPluginVersionGithubCopilot,()=>kft(t)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>Dhr(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(on).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>Die(t.get(on).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>Bhr(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(on).getRelatedPluginInfo()){let o=ap+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(Y4).includes(o)){Vj(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[o]=Die(n.version)}return r}),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(on).getEditorPluginSpecificFilters()){let o=n.isVersion?Die(n.value):n.value;r[n.filter]=o}return r})}a(Pft,"setupExperimentationService");function kft(t){return Die(!t.get(wo).isProduction()&&t.get(on).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(on).getEditorPluginInfo().version)}a(kft,"getEditorPluginVersion");function Dhr(t){let e=t.get(on).getEditorPluginInfo();return e.name==="copilot"&&TC(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}a(Dhr,"getPluginRelease");function Bhr(t){let e=t.get(on).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}a(Bhr,"getTargetPopulation");function Nhr(t){return Mhr(t)}a(Nhr,"createAllFilters");function Mhr(t){let e=t.get(Fs);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(wo).isProduction()?y2(t):"1.999.0"}}a(Mhr,"createDefaultFilters");function Die(t){return t.split("-")[0]}a(Die,"trimVersionSuffix");f();var e_=class{static{a(this,"LSPRequestSender")}};f();var eP=Symbol("onMCPToolsListChanged"),Dft=Symbol("onMCPResourcesListChanged"),Bft=Symbol("onMCPResourceUpdated"),jf=class{static{a(this,"McpManager")}};f();var dy=class{static{a(this,"McpRuntimeNotifier")}},Bie=class extends dy{static{a(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var t_=class{static{a(this,"AbstractCopilotMcpSamplingConfigSender")}};f();var N8=class{static{a(this,"AbstractCopilotMessageSender")}};f();f();f();var ASe=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{a(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},Nie=class{constructor(){this._recentUserActions=[]}static{a(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new ASe(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let l=Date.now(),u=1;for(let p of this._recentUserActions){let m=l-p.time;if(m>6e5)continue;let h=Math.exp(-m/6e5),g=p.kind==="rejected"?1.5:.8;u*=1+(g-1)*h}let d=e*u;return d=Math.min(3e3,Math.max(50,d)),d}};f();f();f();var vs;(n=>{function t(o){return new ySe(o)}n.ok=t,a(t,"ok");function e(o){return new CSe(o)}n.error=e,a(e,"error");function r(o){return n.error(new Error(o))}n.fromString=r,a(r,"fromString")})(vs||={});var ySe=class t{constructor(e){this.val=e}static{a(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},CSe=class{constructor(e){this.err=e}static{a(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();var Mie=class t{constructor(e){this._indexMap=e}static{a(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((o,s)=>r(e[o],e[s]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw E7(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw E7(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};f();f();var iq=Ne(xa());function Kpt(t){return t.map(Ogr).join(`
`)}a(Kpt,"stringifyChatMessages");function Ogr({role:t,content:e}){if(t!==iq.Raw.ChatRole.User&&t!==iq.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===iq.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==iq.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}a(Ogr,"stringifyMessage");f();f();var Qgr=/^\w[\w\d+.-]*$/,Ugr=/^\//,qgr=/^\/\//;function Hgr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Qgr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Ugr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(qgr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}a(Hgr,"_validateUri");function Wgr(t,e){return!t&&!e?"file":t}a(Wgr,"_schemeFix");function $gr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==gy&&(e=gy+e):e=gy;break}return e}a($gr,"_referenceResolution");var Ms="",gy="/",jgr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,f_=class t{static{a(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,o,s,c=!1){typeof e=="object"?(this.scheme=e.scheme||Ms,this.authority=e.authority||Ms,this.path=e.path||Ms,this.query=e.query||Ms,this.fragment=e.fragment||Ms):(this.scheme=Wgr(e,c),this.authority=r||Ms,this.path=$gr(this.scheme,n||Ms),this.query=o||Ms,this.fragment=s||Ms,Hgr(this,c))}get fsPath(){return f2e(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:o,query:s,fragment:c}=e;return r===void 0?r=this.scheme:r===null&&(r=Ms),n===void 0?n=this.authority:n===null&&(n=Ms),o===void 0?o=this.path:o===null&&(o=Ms),s===void 0?s=this.query:s===null&&(s=Ms),c===void 0?c=this.fragment:c===null&&(c=Ms),r===this.scheme&&n===this.authority&&o===this.path&&s===this.query&&c===this.fragment?this:new d_(r,n,o,s,c)}static parse(e,r=!1){let n=jgr.exec(e);return n?new d_(n[2]||Ms,loe(n[4]||Ms),loe(n[5]||Ms),loe(n[7]||Ms),loe(n[9]||Ms),r):new d_(Ms,Ms,Ms,Ms,Ms)}static file(e){let r=Ms;if(Gw&&(e=e.replace(/\\/g,gy)),e[0]===gy&&e[1]===gy){let n=e.indexOf(gy,2);n===-1?(r=e.substring(2),e=gy):(r=e.substring(2,n),e=e.substring(n)||gy)}return new d_("file",r,e,Ms,Ms)}static from(e,r){return new d_(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Gw&&e.scheme==="file"?n=t.file(bc.join(f2e(e,!0),...r)).path:n=Aa.join(e.path,...r),e.with({path:n})}toString(e=!1){return p2e(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new d_(e);return r._formatted=e.external??null,r._fsPath=e._sep===Xpt?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var Xpt=Gw?1:void 0,d_=class extends f_{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{a(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=f2e(this,!1)),this._fsPath}toString(r=!1){return r?p2e(this,!0):(this._formatted||(this._formatted=p2e(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=Xpt),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},Zpt={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Ypt(t,e,r){let n,o=-1;for(let s=0;s<t.length;s++){let c=t.charCodeAt(s);if(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c===45||c===46||c===95||c===126||e&&c===47||r&&c===91||r&&c===93||r&&c===58)o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n!==void 0&&(n+=t.charAt(s));else{n===void 0&&(n=t.substr(0,s));let l=Zpt[c];l!==void 0?(o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n+=l):o===-1&&(o=s)}}return o!==-1&&(n+=encodeURIComponent(t.substring(o))),n!==void 0?n:t}a(Ypt,"encodeURIComponentFast");function Ggr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Zpt[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}a(Ggr,"encodeURIComponentMinimal");function f2e(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Gw&&(r=r.replace(/\//g,"\\")),r}a(f2e,"uriToFsPath");function p2e(t,e){let r=e?Ggr:Ypt,n="",{scheme:o,authority:s,path:c,query:l,fragment:u}=t;if(o&&(n+=o,n+=":"),(s||o==="file")&&(n+=gy,n+=gy),s){let d=s.indexOf("@");if(d!==-1){let p=s.substr(0,d);s=s.substr(d+1),d=p.lastIndexOf(":"),d===-1?n+=r(p,!1,!1):(n+=r(p.substr(0,d),!1,!1),n+=":",n+=r(p.substr(d+1),!1,!0)),n+="@"}s=s.toLowerCase(),d=s.lastIndexOf(":"),d===-1?n+=r(s,!1,!0):(n+=r(s.substr(0,d),!1,!0),n+=s.substr(d))}if(c){if(c.length>=3&&c.charCodeAt(0)===47&&c.charCodeAt(2)===58){let d=c.charCodeAt(1);d>=65&&d<=90&&(c=`/${String.fromCharCode(d+32)}:${c.substr(3)}`)}else if(c.length>=2&&c.charCodeAt(1)===58){let d=c.charCodeAt(0);d>=65&&d<=90&&(c=`${String.fromCharCode(d+32)}:${c.substr(2)}`)}n+=r(c,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),u&&(n+="#",n+=e?u:Ypt(u,!1,!1)),n}a(p2e,"_asFormatted");function e0t(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+e0t(t.substr(3)):t}}a(e0t,"decodeURIComponentGraceful");var Jpt=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function loe(t){return t.match(Jpt)?t.replace(Jpt,e=>e0t(e)):t}a(loe,"percentDecode");f();var Ay=class t{constructor(e){this.uri=e;this._uri=f_.parse(ka(this.uri))}static{a(this,"DocumentId")}static{this._cache=new Qx({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return Jne(this.uri)}get extension(){return Xne(this.uri)}toUri(){return this._uri}};var oq=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{a(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},uoe=class t{constructor(e,r,n,o,s){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=o;this.options=s;this.seqid=String(++t.ID);this.cancellationTokenSource=new Ox;this.liveDependentants=0;this.fetchIssued=!1;this._result=new IU;ql(r.length>0),ql(n>=0&&n<r.length)}static{a(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>sq.deserialize(r)),e.activeDocumentIdx,[],oq.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},sq=class t{constructor(e,r,n,o,s,c,l,u,d,p,m,h,g=o.length,A=new Gr(1,o.length+1),y=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=o;this.recentEdit=s;this.recentlyEditedInLinesAfterEditRange=c;this.documentBeforeEdits=l;this.recentEdits=u;this.documentAfterEditsNoShortening=d;this.toEditOnDocumentAfterEditsNoShortening=p;this.toOffsetOnDocumentAfterEditsNoShortening=m;this.toProjectedOffset=h;this.lineCountBeforeClipping=g;this.clippingRange=A;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Gr.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new vu(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{a(this,"StatelessNextEditDocument")}static deserialize(e){return new t(Ay.create(e.id),e.workspaceRoot?f_.parse(e.workspaceRoot):void 0,sk.create(e.languageId),e.documentLinesBeforeEdit,Cs.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?ir.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new vu(e.documentBeforeEdits),Lv.deserialize(e.recentEdits),new vu(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Gr.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var ro=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{a(this,"StatelessNextEditResult")}static noEdit(e,r){let n=vs.error(e),o=r.build(n);return new t(n,o)}static edit(e,r){let n=vs.ok(e),o=r.build(n);return new t(n,o)}},p_=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{a(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,o=this._prompt?Kpt(this._prompt):void 0,s=o?.split(`
`).length,c=o?.length,l=e.isOk(),u=e.isOk()?void 0:e.err.kind,d;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":d=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":d=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:W7(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:l,noNextEditReasonKind:u,noNextEditReasonMessage:d,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:s,promptCharCount:c,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,ql(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function Vgr(t,...e){let r=t;for(let n of e)r=n(r);return r}a(Vgr,"chainStatelessNextEditProviders");var q8=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:a((o,s)=>this.provideNextEditBase(o,s),"provideNextEdit")};this._impl=Vgr(n,...this._providers)}static{a(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},H8=class{constructor(e){this._baseProvider=e}static{a(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let o=n.nextEdit.val,s=o.permutation===void 0?o.edit.edits:o.permutation.apply(o.edit.edits),c=this.filterEdit(e.getActiveDocument(),s);if(c.length===s.length)return n;if(c.length===0)return new ro(vs.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let l=Mie.createSortPermutation(c,Dh(d=>d.lineRange.startLineNumber,Bh)),u=new Cs(l.apply(c));return new ro(vs.ok({edit:u,permutation:l.inverse()}),n.telemetry)}},W8=class extends H8{static{a(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(o=>!this._isWhitespaceOnlyChange(o,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),o=e.newLines,s=o.length===0;if(s&&n.every(c=>c.trim()==="")||!s&&o.every(c=>c.trim()===""))return!0;if(n.length!==o.length)return!1;for(let c=0;c<n.length;c++){let l=n[c],u=o[c];if(l.trim()!==u.trim())return!1}return!0}},$8=class extends H8{static{a(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(o=>!this._isAtClippingBorder(o,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};f();f();var zgr=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),Kgr=new Map(Object.entries(zgr).map(([t,e])=>[t,{languageId:t,...e}]));function r0t(t){return m2e(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}a(r0t,"getLanguage");function m2e(t){return Kgr.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}a(m2e,"_getLanguage");f();var j8=class t{static{a(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?e0.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new e0(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new e0(new ls(0,0),new ls(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!e0.isRange(e))throw m_("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw m_("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw m_("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var ls=class t{static{a(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let o=e[n];o.isBefore(r)&&(r=o)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let o=e[n];o.isAfter(r)&&(r=o)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw m_("line must be non-negative");if(r<0)throw m_("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw m_();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw m_();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},e0=class t{static{a(this,"Range")}static isRange(e){return e instanceof t?!0:e?ls.isPosition(e.start)&&ls.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,o){let s,c;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof o=="number"?(s=new ls(e,r),c=new ls(n,o)):ls.isPosition(e)&&ls.isPosition(r)&&(s=e,c=r),!s||!c)throw new Error("Invalid arguments");s.isBefore(c)?(this._start=s,this._end=c):(this._start=c,this._end=s)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):ls.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=ls.Max(e.start,this._start),n=ls.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=ls.Min(e.start,this._start),n=ls.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw m_();let n;return e?ls.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return Ygr(this)}};function m_(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}a(m_,"illegalArgument");function Ygr(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}a(Ygr,"getDebugDescriptionOfRange");f();function n0t(t){let r=t.split(/\r?\n/).map(Jgr),n=r.filter(s=>s===1).length,o=r.filter(s=>s===2).length;return n>o}a(n0t,"looksLikeCode");function Jgr(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(o=>t.includes(o))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),LEe(t)||(e+=1);{LEe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let s=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(c=>t.includes(c)?1:0).filter(c=>c).length;r+=s}return e>r?2:r>e?1:0}a(Jgr,"guessLineType");var G8;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,a(t,"fromString");function e(n){if(n.lineCount===0)return[];let o=[];for(let s=0;s<n.lineCount;s++)o.push(n.lineAt(s).text);return o}r.fromDocument=e,a(e,"fromDocument")})(G8||={});function Xgr(t){return t.replace(/^\s+/g,"")}a(Xgr,"trimLeadingWhitespace");function h2e(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}a(h2e,"isImportStatement");var Zgr=new Qx(t=>{let e=r0t(t),{start:r,end:n}=e.lineComment,o=`(?:${rN(r)})`,s=n?`(?:${rN(n)})?`:"";return new RegExp(`${o}(.*)${s}$`)});function g2e(t,e){let r=t.match(Zgr.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let o=t.substring(0,n),s=r[0],c=Xgr(r[1]||"");return{content:o,commentWithTokens:s,commentWithoutTokens:c}}a(g2e,"extractEndLineComment");function foe(t,e){let r=g2e(t,e);if(!(r&&r.content.trim().length>0&&n0t(r.commentWithoutTokens)))return r}a(foe,"extractExplicativeEndLineComment");var V8=class t extends H8{static{a(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(o=>h2e(o,r))||eAr(e,n).some(o=>h2e(o,r))}filterEdit(e,r){let n=e.languageId;return r.filter(s=>!t.isImportChange(s,n,e.documentLinesBeforeEdit))}};function eAr(t,e){return JX(t.lineRange.mapToLineArray(r=>e[r-1]))}a(eAr,"getOldLines");f();var y2e=Ne(xa());f();f();f();var yy;(o=>{o.serviceIds=new Map,o.DI_TARGET="$di$target",o.DI_DEPENDENCIES="$di$dependencies";function n(s){return s[o.DI_DEPENDENCIES]||[]}o.getServiceDependencies=n,a(n,"getServiceDependencies")})(yy||={});var Hv=t0("instantiationService");function tAr(t,e,r){e[yy.DI_TARGET]===e?e[yy.DI_DEPENDENCIES].push({id:t,index:r}):(e[yy.DI_DEPENDENCIES]=[{id:t,index:r}],e[yy.DI_TARGET]=e)}a(tAr,"storeServiceDependency");function t0(t){if(yy.serviceIds.has(t))return yy.serviceIds.get(t);let e=a(function(r,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");tAr(e,r,o)},"id");return e.toString=()=>t,yy.serviceIds.set(t,e),e}a(t0,"createDecorator");f();f();var ym=class{static{a(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};f();var A2e=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{a(this,"Node")}},aq=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{a(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),o=this.lookupOrInsertNode(r);n.outgoing.set(o.key,o),o.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new A2e(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),o=this._findCycle(r,n);if(o)return o}}_findCycle(e,r){for(let[n,o]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let s=this._findCycle(o,r);if(s)return s;r.delete(n)}}};f();var cP=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{a(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var rAr=!1,poe=class extends Error{static{a(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},moe=class t{constructor(e=new cP,r=!1,n,o=rAr){this._services=e;this._strict=r;this._parent=n;this._enableTracing=o;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(Hv,this),this._globalGraph=o?n?._globalGraph??new aq(s=>s):void 0}static{a(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,eZ(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)ZYe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,o=new class extends t{dispose(){n._children.delete(o),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(o),r?.add(o),o}invokeFunction(e,...r){this._throwIfDisposed();let n=cq.traceInvocation(this._enableTracing,e),o=!1;try{return e({get:a(c=>{if(o)throw qYe("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(c,n);if(!l)throw new Error(`[invokeFunction] unknown service '${c}'`);return l},"get")},...r)}finally{o=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,o;return e instanceof ym?(n=cq.traceCreation(this._enableTracing,e.ctor),o=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=cq.traceCreation(this._enableTracing,e),o=this._createInstance(e,r,n)),n.stop(),o}_createInstance(e,r=[],n){let o=yy.getServiceDependencies(e).sort((l,u)=>l.index-u.index),s=[];for(let l of o){let u=this._getOrCreateServiceInstance(l.id,n);u||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id}.`,!1),s.push(u)}let c=o.length>0?o[0].index:r.length;if(r.length!==c){console.trace(`[createInstance] First service dependency of ${e.name} at position ${c+1} conflicts with ${r.length} static arguments`);let l=c-r.length;l>0?r=r.concat(new Array(l)):r=r.slice(0,c)}return Reflect.construct(e,r.concat(s))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof ym)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof ym?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let o=new aq(u=>u.id.toString()),s=0,c=[{id:e,desc:r,_trace:n}],l=new Set;for(;c.length;){let u=c.pop();if(!l.has(String(u.id))){if(l.add(String(u.id)),o.lookupOrInsertNode(u),s++>1e3)throw new poe(o);for(let d of yy.getServiceDependencies(u.desc.ctor)){let p=this._getServiceInstanceOrDescriptor(d.id);if(p||this._throwIfStrict(`[createInstance] ${e} depends on ${d.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(u.id),String(d.id)),p instanceof ym){let m={id:d.id,desc:p,_trace:u._trace.branch(d.id,!0)};o.insertEdge(u,m),c.push(m)}}}}for(;;){let u=o.roots();if(u.length===0){if(!o.isEmpty())throw new poe(o);break}for(let{data:d}of u){if(this._getServiceInstanceOrDescriptor(d.id)instanceof ym){let m=this._createServiceInstanceWithOwner(d.id,d.desc.ctor,d.desc.staticArguments,d.desc.supportsDelayedInstantiation,d._trace);this._setCreatedServiceInstance(d.id,m)}o.removeNode(d)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],o,s){if(this._services.get(e)instanceof ym)return this._createServiceInstance(e,r,n,o,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,o,s);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],o,s,c){if(o)throw new Error("Delayed instantiation not supported");{let l=this._createInstance(r,n,s);return c.add(l),l}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var cq=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{a(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(s,c){let l=[],u=new Array(s+1).join("	");for(let[d,p,m]of c._dep)if(p&&m){r=!0,l.push(`${u}CREATES -> ${d}`);let h=n(s+1,m);h&&l.push(h)}else l.push(`${u}uses -> ${d}`);return l.join(`
`)}a(n,"printChild");let o=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(o.join(`
`))}};var hoe=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new cP(...e):e??new cP}static{a(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new moe(this._collection,!0)}};var Aoe=t0("ITelemetrySender"),Cy=t0("IChatMLFetcher");var goe=class{constructor(){this._stream=new $ne;this._seenAnnotationTypes=new Set}static{a(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},yoe=t0("IEndpointProvider");f();var TE=t0("IParserService");f();var z8=class{static{a(this,"DiffChange")}constructor(e,r,n,o){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=o}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},lq=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{a(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},uq=class{static{a(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},h_=class{static{a(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},g_=class{static{a(this,"MyArray")}static Copy(e,r,n,o,s){for(let c=0;c<s;c++)n[o+c]=e[r+c]}static Copy2(e,r,n,o,s){for(let c=0;c<s;c++)n[o+c]=e[r+c]}};var Coe=class{static{a(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new z8(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},dq=class t{static{a(this,"LcsDiff")}constructor(e,r){let[n,o]=t._getElements(e),[s,c]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=o,this._modifiedStringElements=s,this._modifiedElementsOrHash=c,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let o=0,s=r.length;o<s;o++)n[o]=this._stringHash(r[o],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,o=e.length;n<o;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,o){return this.ComputeDiffRecursive(e,r,n,o)}ComputeDiffRecursive(e,r,n,o){for(;e<=r&&n<=o&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&o>=n&&this.ElementsAreEqual(r,o);)r--,o--;if(e>r||n>o){let p;return n<=o?(h_.Assert(e===r+1,"originalStart should only be one more than originalEnd"),p=[new z8(e,0,n,o-n+1)]):e<=r?(h_.Assert(n===o+1,"modifiedStart should only be one more than modifiedEnd"),p=[new z8(e,r-e+1,n,0)]):(h_.Assert(e===r+1,"originalStart should only be one more than originalEnd"),h_.Assert(n===o+1,"modifiedStart should only be one more than modifiedEnd"),p=[]),p}let s=[0],c=[0],l=this.ComputeRecursionPoint(e,r,n,o,s,c),u=s[0],d=c[0];if(l!==null)return l;{let p=this.ComputeDiffRecursive(e,u,n,d),m=this.ComputeDiffRecursive(u+1,r,d+1,o);return this.ConcatenateChanges(p,m)}}WALKTRACE(e,r,n,o,s,c,l,u,d,p,m,h,g,A,y,v,b){let I=null,_=null,k=new Coe,N=r,F=n,O=g[0]-v[0]-o,Y=-1073741824,z=this.m_forwardHistory.length-1;do{let V=O+e;V===N||V<F&&d[V-1]<d[V+1]?(m=d[V+1],A=m-O-o,m<Y&&k.MarkNextChange(),Y=m,k.AddModifiedElement(m+1,A),O=V+1-e):(m=d[V-1]+1,A=m-O-o,m<Y&&k.MarkNextChange(),Y=m-1,k.AddOriginalElement(m,A+1),O=V-1-e),z>=0&&(d=this.m_forwardHistory[z],e=d[0],N=1,F=d.length-1)}while(--z>=-1);I=k.getReverseChanges(),k=new Coe,N=c,F=l,O=g[0]-v[0]-u,Y=1073741824,z=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let V=O+s;V===N||V<F&&p[V-1]>=p[V+1]?(m=p[V+1]-1,A=m-O-u,m>Y&&k.MarkNextChange(),Y=m+1,k.AddOriginalElement(m+1,A+1),O=V+1-s):(m=p[V-1],A=m-O-u,m>Y&&k.MarkNextChange(),Y=m,k.AddModifiedElement(m+1,A+1),O=V-1-s),z>=0&&(p=this.m_reverseHistory[z],s=p[0],N=1,F=p.length-1)}while(--z>=-1);return _=k.getChanges(),this.ConcatenateChanges(I,_)}ComputeRecursionPoint(e,r,n,o,s,c){let l=0,u=0,d=0,p=0,m=0,h=0;e--,n--,s[0]=0,c[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let g=r-e+(o-n),A=g+1,y=new Int32Array(A),v=new Int32Array(A),b=o-n,I=r-e,_=e-n,k=r-o,F=(I-b)%2===0;y[b]=e,v[I]=r;for(let O=1;O<=g/2+1;O++){let Y=0,z=0;d=this.ClipDiagonalBound(b-O,O,b,A),p=this.ClipDiagonalBound(b+O,O,b,A);for(let V=d;V<=p;V+=2){V===d||V<p&&y[V-1]<y[V+1]?l=y[V+1]:l=y[V-1]+1,u=l-(V-b)-_;let U=l;for(;l<r&&u<o&&this.ElementsAreEqual(l+1,u+1);)l++,u++;if(y[V]=l,l+u>Y+z&&(Y=l,z=u),!F&&Math.abs(V-I)<=O-1&&l>=v[V])return s[0]=l,c[0]=u,U<=v[V]&&O<=1448?this.WALKTRACE(b,d,p,_,I,m,h,k,y,v,l,r,s,u,o,c,F):null}m=this.ClipDiagonalBound(I-O,O,I,A),h=this.ClipDiagonalBound(I+O,O,I,A);for(let V=m;V<=h;V+=2){V===m||V<h&&v[V-1]>=v[V+1]?l=v[V+1]-1:l=v[V-1],u=l-(V-I)-k;let U=l;for(;l>e&&u>n&&this.ElementsAreEqual(l,u);)l--,u--;if(v[V]=l,F&&Math.abs(V-b)<=O&&l<=y[V])return s[0]=l,c[0]=u,U>=y[V]&&O<=1448?this.WALKTRACE(b,d,p,_,I,m,h,k,y,v,l,r,s,u,o,c,F):null}if(O<=1447){let V=new Int32Array(p-d+2);V[0]=b-d+1,g_.Copy2(y,d,V,1,p-d+1),this.m_forwardHistory.push(V),V=new Int32Array(h-m+2),V[0]=I-m+1,g_.Copy2(v,m,V,1,h-m+1),this.m_reverseHistory.push(V)}}return this.WALKTRACE(b,d,p,_,I,m,h,k,y,v,l,r,s,u,o,c,F)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let o=new Array(e.length+r.length-1);return g_.Copy(e,0,o,0,e.length-1),o[e.length-1]=n[0],g_.Copy(r,1,o,e.length,r.length-1),o}else{let o=new Array(e.length+r.length);return g_.Copy(e,0,o,0,e.length),g_.Copy(r,0,o,e.length,r.length),o}}ChangesOverlap(e,r,n){if(h_.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),h_.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let o=e.originalStart,s=e.originalLength,c=e.modifiedStart,l=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(s=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(l=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new z8(o,s,c,l),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,o){if(e>=0&&e<o)return e;let s=n,c=o-n-1,l=r%2===0;if(e<0){let u=s%2===0;return l===u?0:1}else{let u=c%2===0;return l===u?o-1:o-2}}};f();function i0t(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(Kdt(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}a(i0t,"safeStringify");var voe=!1,x2e=!0,nAr=200,fq=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{a(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new p_(e),o=e.getActiveDocument(),s=lP(o);if(!s||!s.isEmpty())return ro.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let c=o.documentLinesBeforeEdit,l=o.recentEdit.apply(c),u=[];for(let _ of e.documents)_.id!==o.id&&(u.push(`RELATED DOC: ${_.getDisplayPath()}`),u.push("```patch"),u.push(...cAr(_)),u.push("```"),u.push(""));u.push(`ORIGINAL VERSION: ${o.getDisplayPath()}`),u.push("```"),u.push(...c),u.push("```"),u.push("");let d="// ...rest of the lines omitted...",p=new Gr(1,Math.max(1,s.startLineNumber-1)),m=o.recentEdit.edits.length>0?o.recentEdit.edits[o.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,h;if(m>0&&m>=p.endLineNumberExclusive){let _=m<l.length;u.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${o.getDisplayPath()}`),u.push("```"),u.push(...l.slice(0,m)),_&&(u.push(d),h={editRange:new Gr(p.endLineNumberExclusive,m+1),omittedMessage:d}),u.push("```"),u.push("")}u.push(`NEXT VERSION: ${o.getDisplayPath()}`),u.push("```"),u.push(...l.slice(0,p.endLineNumberExclusive-1)),u.push("");let g=l.slice(p.endLineNumberExclusive-1).join(`
`),A=await this.fetchUntilConvergence(u.join(`
`),g,r);if(r.isCancellationRequested)return ro.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(A.isError())return A.err.kind==="cancel"?ro.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):ro.noEdit({kind:"fetchFailure",error:new Error(i0t(A.err))},n);let{result:y,ttft:v}=A.val;if(v!==void 0&&n.setTtft(v),y.trim().length===0)return ro.noEdit({kind:"noSuggestions"},n);let b=xoe(o.languageId,l,p,void 0,y,h),I=await I2e(this._parserService,b,o,{requireEditWithinNLines:5});if(I){let _=new Cs([I]);return ro.edit({edit:_},n)}else return ro.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};fq=mf([Ra(1,TE)],fq);var K8=class extends fq{constructor(r,n){super(K8.ID,r);this._chatMLFetcher=n}static{a(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,o){if(o.isCancellationRequested)return vs.error({kind:"cancel"});let s=await E2e(this.ID,this._chatMLFetcher,[{role:y2e.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:y2e.OpenAI.ChatRole.User,content:r}],{convergence:n},o);if(s.isError())return s;let{ignored:c,result:l,ttft:u}=s.val;return l=l.replace(/^```[^\n]*\n/,""),vs.ok({ignored:c,result:l,ttft:u})}};K8=mf([Ra(0,TE),Ra(1,Cy)],K8);async function E2e(t,e,r,n,o){let s=new goe,c=!1,l,u=s.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),d=oAr(u,n),p=e.fetchOne(r,async(y,v,b)=>(typeof l>"u"&&(l=Date.now()),s.update(y,b),c?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},o);(async()=>{try{await p}finally{s.resolve()}})();let{ignored:m,result:h,shouldCancelRequest:g}=await d;g&&(c=!0);let A=await p;return A.type!=="success"?vs.error({kind:"failure",err:new Error(`Fetch failed (${A.type}, ${A.reason})`)}):vs.ok({ttft:l,ignored:m,result:h})}a(E2e,"fetchUntilConvergence");function lP(t){let e=new Kt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:iAr(t)}a(lP,"getOrDeduceSelectionFromLastEdit");function iAr(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,o=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,s=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new ir(o,s.length+1,o,s.length+1);let c=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],l=Ux(c,s),u=s.length-l+1;return new ir(o,u,o,u)}a(iAr,"deduceSelectionFromLastEdit");async function oAr(t,e){let r=sAr(t,e.ignoreReplyTextBefore),n=e.convergence,o=e.maxCompletionLineCount??20,s=e.convergenceNonWhitespaceCharOverlap??40,c=n.replace(/\s/g,""),l=[],u=[],d=[],p=[],m=a(h=>{let g=u[0];return{ignored:l[0]??"",result:g.substring(0,g.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let h of r){if(h.kind==="ignore"){l[h.index]=(l[h.index]??"")+h.text;continue}let g=h.text;if(u[h.index]=u[h.index]??"",u[h.index]+=g,p[h.index]=p[h.index]??"",p[h.index]+=g.replace(/\s/g,""),d[h.index]=d[h.index]??0,d[h.index]+=g.split(`
`).length-1,g.indexOf(`
`)===-1||h.index!==0)continue;if(d[h.index]>o)return m(`too many lines: ${d[h.index]}`);let A=u[h.index];if(n.startsWith(A))continue;let y=A.split(`
`).slice(-4,-1);if(y.length<3||n.indexOf(y.join(`
`)+`
`)<=0)continue;let b=p[h.index].substring(p[h.index].length-s);if(c.indexOf(b)>0)return m("convergence!")}return{ignored:l[0]??"",result:u[0]??"",shouldCancelRequest:!1}}a(oAr,"fetchCompletionUntilConvergence");function sAr(t,e){let r=[],n=[];return new TU(async o=>{for await(let s of t)for(let c of s.choices){let l=c.index,u=c.text??"";if(!e||r[l]){o.emitOne({kind:"completion",index:l,text:u});continue}n[l]=(n[l]??"")+u;let d=n[l].match(e);!d||typeof d.index>"u"||(r[l]=!0,o.emitOne({kind:"ignore",index:l,text:n[l].substring(0,d.index+d[0].length)}),o.emitOne({kind:"completion",index:c.index,text:n[l].substring(d.index+d[0].length)}),n[l]=void 0)}for(let s=0;s<n.length;s++)typeof n[s]<"u"&&o.emitOne({kind:"ignore",index:s,text:n[s]})})}a(sAr,"getTextAfterFirstPattern");function aAr(t,e,r){let n=e.startLineNumber,o=e.endLineNumberExclusive,s=r.slice(0);for(;n+1<o&&s.length>0;){let c=t[o-2],l=s[s.length-1];if(c!==l)break;o--,s.pop()}for(;n+1<o&&s.length>0;){let c=t[n-1],l=s[0];if(c!==l)break;n++,s.shift()}return new uy(new Gr(n,o),s)}a(aAr,"createReducedLineEdit");var Y8=class{constructor(e,r,n,o){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=aAr(r,n,o);let s=new Cs([this.edit]);this.newLines=s.apply(r)}static{a(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return s(r,n)<e;function s(c,l){for(let u=0;u<Math.min(c.length,l.length);u++)if(c[u]!==l[u])return u;return Math.min(c.length,l.length)}}resolveDiff(){let e=a((m,h,g)=>m.map(A=>{let y=h.lines.slice(A.originalStart,A.originalStart+A.originalLength),v=g.lines.slice(A.modifiedStart,A.modifiedStart+A.modifiedLength),b=y.join(`
`),I=v.join(`
`),{editDistance:_}=p(b,I);return new C2e(A.originalStart,A.originalLength,A.modifiedStart,A.modifiedLength,_)}),"computeEditDistances"),r=a(m=>{let h=0;for(let g of m)h+=g.editDistance;return{editDistance:h}},"computeDiffMetrics"),n=!1,o=new lq(this.oldLines,n),s=new lq(this.newLines,n),c=new dq(o,s),l=e(c.ComputeDiff(),o,s),u=r(l),d=[];{let m=0;for(let h of l)d=d.concat(this.oldLines.slice(m,h.originalStart)),d=d.concat(this.newLines.slice(h.modifiedStart,h.modifiedStart+h.modifiedLength)),m=h.originalStart+h.originalLength;d=d.concat(this.oldLines.slice(m))}if(R3(this.newLines,d))return new v2e(this.languageId,this.oldLines,this.edit,this.newLines,l,u);return s0t(this.languageId,this.oldLines,d);function p(m,h){let g=new uq(m),A=new uq(h),v=new dq(g,A).ComputeDiff(),b=0,I=0;for(let F of v)b+=F.originalLength,I+=F.modifiedLength;let _=m.length,k=h.length,N=b+I;return{aChanged:b,bChanged:I,aLength:_,bLength:k,editDistance:N}}}},C2e=class{constructor(e,r,n,o,s){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=o;this.editDistance=s}static{a(this,"DiffChangeWithEditDistance")}},v2e=class{constructor(e,r,n,o,s,c){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=o;this.diff=s;this.diffMetrics=c;this.parseErrorCount="unknown"}static{a(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new Cs([this.edit]);{let r=this.groupInHunks();return new Cs(r.map(n=>{let o=n[0],s=n[n.length-1];return new uy(new Gr(o.originalStart+1,s.originalStart+s.originalLength+1),this.newLines.slice(o.modifiedStart,s.modifiedStart+s.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!x2e)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(s=>s.originalLength===0)||n.reduce((c,l)=>c+l.editDistance,0)>nAr&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let o of r)for(let s of o){let c=s.originalStart+1,l=s.originalStart+s.originalLength+1;if(!b2e(new Gr(c,l),e)){n=n.concat(o);break}}if(n.length===this.diff.length)return null;if(n.length>0){let o=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(o).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let o=n[n.length-1],s=this.oldLines.slice(o.originalStart+o.originalLength,r.originalStart);if(s.length>1){e.push([r]);continue}if(s[0].trim().length>10){e.push([r]);continue}if(n.reduce((u,d)=>u+d.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let o of e)r=r.concat(this.newLines.slice(n,o.modifiedStart)),r=r.concat(this.oldLines.slice(o.originalStart,o.originalStart+o.originalLength)),n=o.modifiedStart+o.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new Cs([this.edit]),o=r(n);this.parseErrorCount=await pq(e,this.languageId,o)}eliminateEmptyLineChanges(){let e=a(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),o=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(c=>c.trim().length===0)){let c=this.newLines.slice(0);return c.splice(r.modifiedStart,0,...n),e(c)}continue}if(r.originalLength===0){if(o.every(c=>c.trim().length===0)){let c=this.newLines.slice(0);return c.splice(r.modifiedStart,r.modifiedLength),e(c)}continue}for(let s=0;s<n.length&&s<o.length;s++){let c=n[s],l=o[s],u=c.trim().length===0,d=l.trim().length===0;if(!(u&&d)){if(!u&&!d)break;if(u){let p=this.newLines.slice(0);return p.splice(r.modifiedStart+s,0,c),e(p)}if(d){let p=this.newLines.slice(0);return p.splice(r.modifiedStart+s,1),e(p)}}}for(let s=1;s<=n.length&&s<=o.length;s++){let c=n[n.length-s],l=o[o.length-s],u=c.trim().length===0,d=l.trim().length===0;if(!(u&&d)){if(!u&&!d)break;if(u){let p=this.newLines.slice(0);return p.splice(r.modifiedStart+r.modifiedLength-s+1,0,c),e(p)}if(d){let p=this.newLines.slice(0);return p.splice(r.modifiedStart+r.modifiedLength-s,1),e(p)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let o of this.diff){e=e.concat(this.newLines.slice(r,o.modifiedStart));let s=this.oldLines.slice(o.originalStart,o.originalStart+o.originalLength),c=this.newLines.slice(o.modifiedStart,o.modifiedStart+o.modifiedLength),{hasChanges:l,newDiffModifiedLines:u}=this._eliminateCommentsDiff(s,c);n=n||l,e=e.concat(u),r=o.modifiedStart+o.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let u=!1,d=!1;for(let p of e){if(p.trim().length===0)continue;let m=foe(p,this.languageId);m&&m.content.trim().length===0?u=!0:d=!0}if(u&&!d)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(u=>foe(u,this.languageId)),o=r.map(u=>foe(u,this.languageId)),s=n.filter(u=>!!u).length,c=o.filter(u=>!!u).length;if(s===0&&c===0)return{hasChanges:!1,newDiffModifiedLines:r};if(s>0)return{hasChanges:!1,newDiffModifiedLines:r};let l=!1;for(let u=0;u<r.length;u++){let d=r[u],p=o[u];if(!p)continue;let{content:m}=p;r[u]=d.substring(0,m.length).trimEnd(),l=!0}return{hasChanges:l,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return s0t(this.languageId,this.oldLines,e)}};function b2e(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}a(b2e,"editIsInsideEditWindow");function s0t(t,e,r){let o=e.length+1,s=r.slice(0);return new Y8(t,e,new Gr(1,o),s).resolveDiff()}a(s0t,"createPossibleEditFromLines");function xoe(t,e,r,n,o,s){if(o.trim().length===0)return[];let c=G8.fromString(o.trimEnd()),l=s?c.some(v=>v.indexOf(s.omittedMessage)>=0):!1,u=[],d=a((v,b)=>{u.push(new Y8(t,e,v,b))},"generateEdit");function p(){n&&d(n,c)}a(p,"generateEditCompletionRange");function m(){if(l)return;let b=new Gr(r.endLineNumberExclusive,e.length+1);b.length>c.length+5||d(b,c)}a(m,"generateEditAllDoc");function h(){for(let v=1;v<c.length;v++){let I=c.slice(c.length-v).join(`
`);for(let _=r.endLineNumberExclusive-1;_<e.length;_++){let N=e.slice(_,_+v).join(`
`);I===N&&d(new Gr(r.endLineNumberExclusive,_+1),c.slice(0,c.length-v))}}}a(h,"generateEditsUsingOverlappingLines");function g(){if(!s||!l)return;let v=[];for(let b of c){if(b.indexOf(s.omittedMessage)>=0){d(s.editRange,v.map(I=>I));return}v.push(b)}}if(a(g,"generateEditWhenReplyContainsOmittedMessage"),p(),g(),m(),h(),!o.endsWith(`
`)){let v=o.substring(0,o.lastIndexOf(`
`)+1);u.push(...xoe(t,e,r,n,v,s))}return A(u);function A(v){return y(v,a(I=>I.edit.lineRange.startLineNumber+","+I.edit.lineRange.endLineNumberExclusive+","+I.edit.newLines.join("|"),"keyfn"))}function y(v,b){let I=new Set,_=[];for(let k of v){let N=b(k);I.has(N)||(I.add(N),_.push(k))}return _}}a(xoe,"generatePossibleEdits");async function I2e(t,e,r,n){let c=e.filter(m=>m.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(m=>m.resolveDiff()).map(m=>m.eliminateEmptyLineChanges()),l=voe?await pq(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(voe){let m=a(h=>{let g=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(h).apply(g.value)},"applyToDocumentNoShortening");await Promise.all(c.map(h=>h.resolveParseErrorCountIfPossible(t,m)))}let u=c.filter(m=>l==="unknown"?m.parseErrorCount===0:m.parseErrorCount!=="unknown"&&m.parseErrorCount<=l),d=u.length>0?u:c;d.sort((m,h)=>m.parseErrorCount===h.parseErrorCount?0:m.parseErrorCount==="unknown"?1:h.parseErrorCount==="unknown"?-1:m.parseErrorCount-h.parseErrorCount);let p=a(m=>m.diffMetrics.editDistance,"score");return d.sort((m,h)=>p(m)-p(h)),d.length>0?d[0].edit:null}a(I2e,"selectBestEdit");function cAr(t){let r=[],n=t.documentLinesBeforeEdit,o=0,s=0,c=-1,l=a((u,d)=>{u>c+1&&r.push("[...]"),d?r.push(`-${n[u]}`):r.push(`${n[u]}`),c=u},"addOldLineIndex");for(let u of t.recentEdit.edits){for(;o<u.lineRange.startLineNumber-1;)Math.min(u.lineRange.startLineNumber-o-1,s>0?o-s-2:1073741824)<=2&&l(o,!1),o++;for(;o<u.lineRange.endLineNumberExclusive-1;)l(o,!0),o++;r.push(u.newLines.map(d=>`+${d}`).join(`
`)),s=u.lineRange.endLineNumberExclusive}for(;o<n.length;)o-s+2<=2&&l(o,!1),o++;return r.push("[...]"),r}a(cAr,"summariseDocDiff");function a0t(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),o=r.newLines;if(n.filter(c=>c.trim().length>0).length===0&&o.filter(c=>c.trim().length>0).length===0)continue;let s=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${s},${n.length} +${s},${o.length} @@`),e.push(...n.map(c=>`-${c}`)),e.push(...o.map(c=>`+${c}`))}return e}a(a0t,"summarizeEditsAsUnifiedDiff");async function pq(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:a(()=>r,"getText")})?.getParseErrorCount()??"unknown"}a(pq,"getParseErrorCount");f();var wE=Ne(xa());f();var mq=t0("ITokenizerProvider");var A_=class extends wE.PromptRenderer{constructor(r,n,o={validate:!0},s,c,l){let u=s.acquireTokenizer({tokenizer:l.tokenizerName}),d={modelMaxPromptTokens:l.tokenBudget};super(d,r,n,u);this.options=o;this._instantiationService=c}static{a(this,"PromptRenderer")}static create(r,n,o,s={validate:!0}){return r.invokeFunction(c=>{let l=c.get(mq);return new A_(n,o,s,l,r,c.get(Cy))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,o){let s=await super.render(r,n);o={...{trace:!0},...o};for(let u=1;u<s.messages.length;u++){let d=s.messages[u],p=s.messages[u-1];if(d.role===wE.Raw.ChatRole.System&&p.role===wE.Raw.ChatRole.System){let m=p.content.at(-1),h=d.content.at(0);m&&h&&m.type===wE.Raw.ChatCompletionContentPartKind.Text&&h.type===wE.Raw.ChatCompletionContentPartKind.Text?(m.text=m.text.trimEnd()+`
`+h.text,p.content=p.content.concat(d.content.slice(1))):(p.content.push({type:wE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),p.content=p.content.concat(d.content)),s.messages.splice(u,1),u--}}let l=s.messages[s.messages.length-1];if(this.options.validate&&l&&l.role!==wE.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...s,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};A_=mf([Ra(3,mq),Ra(4,Hv),Ra(5,Cy)],A_);f();var c0t=Ne(xa());var Eoe=class extends c0t.PromptElement{static{a(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();var T2e=class{static{a(this,"AbstractDocument")}rangeToOffsetRange(e){return new Kt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new e0(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},vy=class extends T2e{constructor(r){super();this.value=r;this._transformer=new Zk(this.value)}static{a(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new jr(r+1,1)),o=n+this.getLineLength(r);return this.value.substring(n,o)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return lAr(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(uAr(r))}_validatePosition(r){if(r.line<0)return new ls(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let s=this._transformer.getLineLength(n);return new ls(n-1,s)}if(r.character<0)return new ls(r.line,0);let o=this._transformer.getLineLength(r.line+1);return r.character>o?new ls(r.line,o):r}};function lAr(t){return new ls(t.lineNumber-1,t.column-1)}a(lAr,"corePositionToVSCodePosition");function uAr(t){return new jr(t.line+1,t.character+1)}a(uAr,"vsCodePositionToCorePosition");f();f();function l0t(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}a(l0t,"min");f();function w2e(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>w2e(n,e))}}a(w2e,"toAstNode");function u0t(t,e){let r=_3(e,c=>c.endExclusive>=t.start),n=FA(e,c=>c.start<=t.endExclusive)+1;if(r===n)return[t];let o=[],s=t.start;for(let c=r;c<n;c++){let l=e[c];l.start>s&&o.push(new Kt(s,l.start)),s=l.endExclusive}return s<t.endExclusive&&o.push(new Kt(s,t.endExclusive)),o}a(u0t,"subtractRange");f();f();f();var boe=class{static{a(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=ak(e);let n=this.values,o=this.prefixSum,s=r.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(o.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=ak(e),r=ak(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=ak(e),r=ak(r);let n=this.values,o=this.prefixSum;if(e>=n.length)return!1;let s=n.length-e;return r>=s&&(r=s),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(o.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=ak(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,o=0,s=0,c=0;for(;r<=n;)if(o=r+(n-r)/2|0,s=this.prefixSum[o],c=s-this.values[o],e<c)n=o-1;else if(e>=s)r=o+1;else break;return new _2e(o,e-c)}};var _2e=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{a(this,"PrefixSumIndexOfResult")}};var hq=class{static{a(this,"PositionOffsetTransformer")}constructor(e){this._lines=qh(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new boe(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let o=r[n],s=this.toRange(o.replaceRange);this._acceptDeleteRange(s),this._acceptInsertText(s.start,o.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=qh(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let o=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.line+1+s-1,0,n[s]),o[s-1]=n[s].length+this._eol.length;this._lineStarts.insertValues(e.line+1,o)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ls(r.index,Math.min(r.remainder,n))}toRange(e){return new e0(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Kt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new j8(this.validateRange(n.range),n.newText));return new sg(r.map(n=>new vl(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new j8(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof ls))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,o=!1;if(r<0)r=0,n=0,o=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,o=!0;else{let s=this._lines[r].length;n<0?(n=0,o=!0):n>s&&(n=s,o=!0)}return o?new ls(r,n):e}validateRange(e){return new e0(this.validatePosition(e.start),this.validatePosition(e.end))}};var Ioe=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new Uh(()=>new hq(this.text));this._originalPositionOffsetTransformer=new Uh(()=>new hq(this.originalText));this._text=new Uh(()=>this.edits.apply(this.originalText))}static{a(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var S2e=class{constructor(e,r,n,o,s){this.parent=e;this.overlayNode=r;this.range=n;this.children=o;this._document=s}static{a(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},dP=class extends Ioe{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{a(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function woe(t,e,r){let n=[],o=[],s=[];for(let l=0;l<r.length;l++){let{document:u,overlayNodeRoot:d,selection:p}=r[l],m=u.getText(),h=p?u.rangeToOffsetRange(p):void 0,g=d0t(d,u),A=R2e.fromRootNode(g,m),y=k2e.fromNode(A,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);h&&y.visitAll(O=>O.node.range.intersectsOrTouches(h)?(O.node.children.length===0&&O.markAsSurviving(),!0):!1),n.push(y),o.push(y.getTextFragment());let v=a(O=>h?O.range.endExclusive<h.start?h.start-O.range.endExclusive:O.range.start>h.endExclusive?3*(O.range.start-h.endExclusive):0:0,"distanceScoreToSelection"),b=new Qx(O=>h?O.children.length===0?O.range.intersectsOrTouches(h)?0:Number.MAX_SAFE_INTEGER:l0t(O.children.map(Y=>b.get(Y)))+1:0),I=new Qx(O=>{let Y=O.parent?I.get(O.parent):Number.MAX_SAFE_INTEGER,z=b.get(O);return Math.min(Y,z)}),_=!!e.tryPreserveTypeChecking,k=a(O=>_&&O.node?.kind==="import_statement"?0:100*I.get(O)+O.depth+10*(v(O)/m.length),"costFn"),N=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(u):e.costFnOverride;if(N!==void 0){let O=k;k=a(Y=>{let z=O(Y);return z===!1?!1:Y.node?N(Y.node,z,u):z},"costFn")}let F=y.getDescendantsAndSelf();for(let O of F){if(!O.node.node)continue;let Y=k(O.node);Y!==!1&&s.push({idx:l,node:O,cost:Y})}}s.sort(Dh(l=>l.cost,Bh));for(let{node:l,idx:u}of s){if(l.markAsSurviving(),n.reduce((p,m)=>p+m.getTextFragment().length,0)>t)break;o[u]=n[u].getTextFragment()}let c=[];for(let l=0;l<o.length;l++){let u=o[l],{document:d}=r[l],p=new dP(d,u.toTextEditFromOriginal(d.getText().length)),m=p,h=n[l];m.getVisualization=()=>({$fileExtension:"ast.w",source:{value:p.originalText,decorations:u0t(Kt.ofLength(p.originalText.length),p.edits.edits.map(g=>g.replaceRange)).map(g=>({range:[g.start,g.endExclusive],color:"lime"}))},root:w2e(h,g=>({label:(g.node.node?.kind||"unknown")+` (${s.find(A=>A.node===g)?.cost})`,range:g.node.range,children:g.childNodes,isMarked:g._surviving}))}),c.push(p)}return c}a(woe,"summarizeDocumentsSyncImpl");function d0t(t,e,r=void 0){let n=new Kt(t.startIndex,t.endIndex),o=[],s=new S2e(r,t,n,o,e);for(let c of t.children)o.push(d0t(c,e,s));return s}a(d0t,"createRemovableNodeFromOverlayNode");var R2e=class t{constructor(e,r,n,o,s,c){this.node=e;this.range=r;this.children=n;this.depth=o;this.parent=s;this.document=c}static{a(this,"TextNode")}static fromRootNode(e,r){let n=new Kt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let o=new Kt(0,e.range.start),s=new Kt(e.range.endExclusive,r.length),c=[],l=new t(void 0,n,c,0,null,r);return o.isEmpty||c.push(new t(void 0,o,[],0,l,r)),c.push(t.fromNode(e,r,1,null)),s.isEmpty||c.push(new t(void 0,s,[],0,l,r)),l}static fromNode(e,r,n=0,o=null){let s=[],c=new t(e,e.range,s,n,o,r);if(e.children.length>0){let l=e.range.start;for(let d of e.children){let p=new Kt(l,d.range.start);p.isEmpty||s.push(new t(void 0,p,[],n,c,r)),s.push(t.fromNode(d,r,n+1,c)),l=d.range.endExclusive}let u=new Kt(l,e.range.endExclusive);u.isEmpty||s.push(new t(void 0,u,[],n,c,r))}return c}getLeadingWs(){return dAr(this.document,this.range)}getTrailingWs(){return fAr(this.document,this.range)}};function dAr(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}a(dAr,"getLeadingWs");function fAr(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}a(fAr,"getTrailingWs");var k2e=class t{constructor(e,r,n,o,s){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=o;this._alwaysUseEllipsisForElisions=s;this._surviving=!1;this._textFragment=null}static{a(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,o){let s=[],c=new t(e,r,s,n,o);for(let l of e.children){let u=t.fromNodeParent(l,c,n,o);s.push(u)}return c}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new y_(this.node.range,this.node.document);if(!this._surviving)return new uP("");let e=Array.from(zR(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,o)=>n.fragment.length===0==(o.fragment.length===0)));for(let n=0;n<e.length;n++){let o=e[n],s=o[0].fragment.length===0;if(s&&n>0&&n<e.length-1){let c=e[n-1].at(-1),l=e[n+1].at(0);if(c.fragment instanceof y_&&l.fragment instanceof y_){let u=c.fragment.trimEnd(),d=l.fragment.trimStart();if(u.endsWith("{")&&d.startsWith("}")){e[n-1][e[n-1].length-1].fragment=u,o.length=1,o[0].fragment=new uP(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=d;continue}}}if(this._alwaysUseEllipsisForElisions&&s&&(n>0||n<e.length-1)){o.length=1;let c=o.at(0).node.node.getLeadingWs(),l=c.lastIndexOf(`
`);l!==-1&&(c=c.substring(l+1));let u=o.at(-1).node.node.getTrailingWs();o[0].fragment=new uP(c+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+u)}}let r=[];for(let n of e)for(let o of n)pAr(r,o.fragment);return Toe.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},gq=class{static{a(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,o="";function s(l){(n!==l||o.length>0)&&(r.push(new vl(new Kt(n,l),o)),o="")}a(s,"emit");function c(l){if(l instanceof Toe)for(let u of l.fragments)c(u);else l instanceof uP?o+=l.text:l instanceof y_&&(s(l.range.start),n=l.range.endExclusive)}return a(c,"process"),c(this),s(e),new sg(r)}},uP=class extends gq{constructor(r){super();this.text=r}static{a(this,"LiteralTextFragment")}get length(){return this.text.length}},y_=class t extends gq{constructor(r,n){super();this.range=r;this.originalText=n}static{a(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Kt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Kt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Kt(this.range.start,r.range.endExclusive),this.originalText):null}},Toe=class t extends gq{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{a(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new uP(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function pAr(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof y_&&e instanceof y_){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}a(pAr,"pushFragment");f();var _oe=Ne(xa());function Aq(t){if(Array.isArray(t))return t.map(r=>Aq(r));let e=(0,_oe.toMode)(_oe.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}a(Aq,"rawMessageToCAPI");f();f();var Soe=class{constructor(e,r,n,o){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=o;if(e>r)throw new bn("startIndex must be less than endIndex");let s=e;for(let c of o){if(c.startIndex<s)throw new bn("Invalid child startIndex");if(c.endIndex>r)throw new bn("Invalid child endIndex");s=Math.max(c.endIndex,s)}}static{a(this,"OverlayNode")}toString(){let e=[];function r(n,o=""){e.push(`${o}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(s=>r(s,o+"    "))}return a(r,"toString"),r(this),e.join(`
`)}};function p0t(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),o=r||{tabSize:4},s={getLineCount:a(()=>n.length,"getLineCount"),getLineContent:a(c=>n[c-1],"getLineContent"),getOptions:a(()=>o,"getOptions")};try{let c=mAr(s,e),[l]=m0t(t,c,void 0);return l.adjust(t,h0t(e)),l.toOverlayNode(t,!0)}catch{return new Roe(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}a(p0t,"getStructureUsingIndentation");function m0t(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),o=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),s=[],c=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let l=e.getStartLineNumber(r),u=e.getEndLineNumber(r);if(l>o||u>o)break;let d=c;if([c,r]=m0t(t,e,r),d&&c.startLineNumber<=d.endLineNumber)throw new bn("Invalid Folding Ranges: overlapping children");if(c.startLineNumber<n)throw new bn("Invalid Folding Ranges: child starts before parent");s.push(c)}return[new Roe(n,o,s),r]}a(m0t,"createFoldingRangeTree");var Roe=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new bn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{a(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),o=/^[\}\]\)];?$/.test(n),s=/^<\/\w/.test(n);(o||s)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let o=this.children[n],s=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;o._adjustRegular(e,s)}}toOverlayNode(e,r){let n=[],o=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let s of this.children){for(let c=o;c<s.startLineNumber;c++){let l=P2e(e,c,c,"LINE",[]);l&&n.push(l)}n.push(s.toOverlayNode(e,!1)),o=s.endLineNumber+1}for(let s=o;s<this.endLineNumber;s++){let c=P2e(e,s,s,"LINE",[]);c&&n.push(c)}return P2e(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function P2e(t,e,r,n,o){let s=t.getOffsetAtPosition(new ls(e-1,0)),c=r<t.getLineCount()?new ls(r,0):new ls(r-1,t.getLineLength(r-1)),l=t.getOffsetAtPosition(c);return new Soe(s,l,n,o)}a(P2e,"createOverlayNode");function mAr(t,e){return hAr(t,h0t(e))}a(mAr,"generateFoldingRegions");function h0t(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}a(h0t,"isOffSide");function hAr(t,e){let r=t.getOptions().tabSize,n=new D2e,o=[],s=t.getLineCount()+1;o.push({indent:-1,endAbove:s,line:s});for(let c=t.getLineCount();c>0;c--){let l=t.getLineContent(c),u=AAr(l,r),d=o[o.length-1];if(u===-1){e&&(d.endAbove=c);continue}if(d.indent>u){do o.pop(),d=o[o.length-1];while(d.indent>u);let p=d.endAbove-1;p-c>=1&&n.insertFirst(c,p,u)}d.indent===u?d.endAbove=c:o.push({indent:u,endAbove:c,line:c})}return n.toIndentRanges()}a(hAr,"_computeRanges");var gAr=65535,fP=16777215,f0t=4278190080,D2e=class{static{a(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>fP||r>fP)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,o=0;n>=0;n--,o++)e[o]=this._startIndexes[n],r[o]=this._endIndexes[n];return new B2e(e,r)}};function AAr(t,e){let r=0,n=0,o=t.length;for(;n<o;){let s=t.charCodeAt(n);if(s===32)r++;else if(s===9)r=r-r%e+e;else break;n++}return n===o?-1:r}a(AAr,"computeIndentLevel");var B2e=class{static{a(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=a((n,o)=>{let s=e[e.length-1];return this.getStartLineNumber(s)<=n&&this.getEndLineNumber(s)>=o},"isInsideLast");for(let n=0,o=this._startIndexes.length;n<o;n++){let s=this._startIndexes[n],c=this._endIndexes[n];if(s>fP||c>fP)throw new Error("startLineNumber or endLineNumber must not exceed "+fP);for(;e.length>0&&!r(s,c);)e.pop();let l=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=s+((l&255)<<24),this._endIndexes[n]=c+((l&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&fP}getEndLineNumber(e){return this._endIndexes[e]&fP}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&f0t)>>>24)+((this._endIndexes[e]&f0t)>>>16);return r===gAr?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let o=Math.floor((r+n)/2);e<this.getStartLineNumber(o)?n=o:r=o+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};f();function pP(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}a(pP,"fromUnknown");var $l=Ne(xa());var koe="current-version",mP="next-version",A0t=2,y0t=10,C0t=.7,yAr=/```[^\n]*\n/,C_=class extends q8{constructor(r,n,o){super(C_.ID,[s=>new V8(s),s=>new W8(s),s=>new $8(s)]);this.fetcher=r;this._parserService=n;this._instantiationService=o;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new Nie}static{a(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let o=new Map(r.documents.map(c=>[c.id,c]));for(let c of n.documents){let l=o.get(c.id);if(!l||!s(l,c))return!1}return!0;function s(c,l){if(c.documentAfterEditsNoShortening.value!==l.documentAfterEditsNoShortening.value)return!1;let u=lP(c),d=u?N2e(c,u):null,p=lP(l),m=p?N2e(l,p):null;return!d||!m?!0:Math.abs(d.line-m.line)<Math.min(A0t,y0t)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let o=new p_(r),s=this._delayer.createDelaySession(),c;try{c=await this.doGetNextEdit(r,o,s,n)}catch(u){return ro.noEdit({kind:"unexpected",error:pP(u)},o)}let l=s.getArtificalDelay();return l>0&&await uE(l),c}async doGetNextEdit(r,n,o,s){return r.documents.some(u=>{if(u.recentEdit.edits.length===0)return!1;for(let d of u.recentEdit.edits)if(!d.lineRange.isEmpty||d.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,o,s,n):ro.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,o,s){let c=await this.createPrompt(r,o);if(!c)return ro.noEdit({kind:"noSuggestions"},s);if(!c.editWindowIsInPrompt)return ro.noEdit({kind:"filteredOut",message:"promptTooLarge"},s);if(await this.debounce(n,s),o.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return ro.noEdit(k,s)}let{summarizedEditWindow:l,editWindowAllowedEditLineRange:u,allowedEditLineRange:d,maxCompletionLineCount:p,messages:m,completionPrefixRange:h,completionRange:g,convergence:A,activeDocument:y,activeDocumentLines:v}=c;s.setFetchStartedAt(),r.fetchIssued=!0;let b=await E2e(this.ID,this.fetcher,Aq(m),{convergence:A,ignoreReplyTextBefore:yAr,maxCompletionLineCount:p,convergenceNonWhitespaceCharOverlap:1e3},o);if(s.setFetchResultIfNotSet(b.isOk()?"success":b.err.kind==="cancel"||o.isCancellationRequested?"cancelled":"failure"),b.isOk()&&typeof b.val.ttft=="number"&&s.setTtft(b.val.ttft),o.isCancellationRequested)return ro.noEdit({kind:"gotCancelled",message:"afterFetchCall"},s);if(b.isError())return b.err.kind==="cancel"?ro.noEdit({kind:"gotCancelled",message:"afterFetchCall"},s):ro.noEdit({kind:"fetchFailure",error:pP(b.err.err)},s);let I=b.val.result;if(I.length===0){let k=`<${mP}>
`,N=b.val.ignored.indexOf(k);N>=0&&(I=b.val.ignored.substring(N+k.length))}if(I=CAr(I),I.trim().length===0)return ro.noEdit({kind:"noSuggestions"},s);let _;if(l&&u&&d){let k=vAr(y,l,u,I);if(!k||k.edits.length===0)return ro.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},s);let N=xAr(l,k);if(N.edits.length===0)return ro.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},s);if(voe){let Y=await pq(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),z=N.apply(y.documentAfterEditsNoShortening.value);if(await pq(this._parserService,y.languageId,z)>Y)return ro.noEdit({kind:"filteredOut",message:"More parse errors after edit"},s)}_=EAr(y,N);let F=_.edits[0].lineRange.startLineNumber,O=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!b2e(new Gr(F,O),d))return ro.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},s)}else{let k=xoe(y.languageId,v,h,g,I,void 0),N=await I2e(this._parserService,k,y,{requireEditWithinNLines:100});if(!N)return ro.noEdit({kind:"filteredOut",message:"Could not identify best edit"},s);_=new Cs([N])}return bAr(y,_)?ro.noEdit({kind:"filteredOut",message:"Undo of recent edit"},s):IAr(y,_)?ro.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},s):TAr(y,_)?ro.noEdit({kind:"filteredOut",message:"uncategorized"},s):wAr(y,_)?ro.noEdit({kind:"filteredOut",message:"uncategorized"},s):ro.edit({edit:_},s)}async debounce(r,n){let o=r.getDebounceTime();n.setDebounceTime(o),await uE(o)}async createPrompt(r,n){let o=r.getActiveDocument(),c=o.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,l=o.documentAfterEdits.value.split(c),u=lP(o);if(u===null)return;let d=N2e(o,u),p=new vy(o.documentAfterEditsNoShortening.value),m=await RAr(this._parserService,{getText:a(()=>p.getText(),"getText"),languageId:o.languageId}),{firstEditableLineInShortenedDocument:h,lastEditableLineInShortenedDocument:g,editWindow:A}=function(){let z=_Ar(o.documentAfterEditsLines,u.startLineNumber),V=Math.max(1,Math.min(z,u.startLineNumber-A0t)),U=u.startLineNumber-V,H=Math.min(l.length,u.endLineNumber+y0t),ee=H-u.endLineNumber,J=d.line-U,G=d.line+ee,j=new e0(J,0,G,p.getLineLength(G));return{firstEditableLineInShortenedDocument:V,lastEditableLineInShortenedDocument:H,editWindow:j}}(),y=woe(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:m,document:p,selection:A}])[0],v=new Gr(1,h),b=new Gr(h,g+1),I=y.text,{messages:_,prediction:k,editWindowIsInPrompt:N}=await this._renderPrompt({request:r,activeDocumentSlice:I,languageId:o.languageId},n),F=I.split(/\r\n|\r|\n/).length,O=y.projectRange(A),Y=y.positionOffsetTransformer.toOffsetRange(O);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new Gr(O.start.line+1,O.end.line+2),allowedEditLineRange:new Gr(h,g+1),messages:_,prediction:k,editWindowIsInPrompt:N,activeDocument:o,activeDocumentLines:l,completionPrefixRange:v,completionRange:b,convergence:I,expectedConvergencePrefix:Y.start,maxCompletionLineCount:F+20}}async _renderPrompt(r,n){let s=await A_.create(this._instantiationService,L2e,r).render(void 0,n,{trace:!1}),c=s.metadata.get(Moe)?.prediction,l=!!s.metadata.get(Doe);return{messages:s.messages,prediction:c,editWindowIsInPrompt:l}}};C_=mf([Ra(0,Cy),Ra(1,TE),Ra(2,Hv)],C_);function CAr(t){function e(r,n,o){let s=r.lastIndexOf(n);if(s===-1)return r;let c=r.slice(0,s);return c.trim().length>0?c+o:c}return a(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${mP}>`,`
`),t=e(t,`\`\`\`
</${mP}>`,`
`),t=e(t,`</${mP}>`,`
`),t}a(CAr,"removeSuffixFromReply");function N2e(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new vy(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}a(N2e,"getCursorPositionInOuterDocument");function vAr(t,e,r,n){let o=G8.fromString(e.text),s=G8.fromString(n.trimEnd()),l=new Y8(t.languageId,o,new Gr(1,o.length+1),s).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),u=e.isOriginal?l:l.containWithinLines(r);if(!u)return null;let d=x2e?u.eliminateLargeChangeHunks():u;return d?d.toLineEdit("multiple-hunks"):null}a(vAr,"generateSummarizedEditWindowEdit");function xAr(t,e){let r=e.toEdit(new vu(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}a(xAr,"convertSummarizedEditWindowEditToOuterDocumentEdit");function EAr(t,e){let r=e.edits.map(o=>{let s=o.replaceRange.start,c=t.toProjectedOffset(s);return Ha.replace(new Kt(c,c+o.replaceRange.length),o.newText)}),n=new Jd(t.documentAfterEdits,Ca.create(r));return Cs.fromEdit(n)}a(EAr,"convertOuterDocumentEditToProjectedEdit");function bAr(t,e){let r=e.toEdit(t.documentAfterEdits),n=v0t(t.documentAfterEdits.value,r),o=new Poe,s=t.documentBeforeEdits.value;for(let c of t.recentEdits.edits)o=o.combine(v0t(s,c)),s=c.apply(s);return!!o.isUndoneBy(n)}a(bAr,"editWouldUndo");function IAr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!T0t(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let o=t.recentEdits.edits[n],s=r.tryRebase(o);if(!s)return!0;r=s}return!1}a(IAr,"editWouldDeleteWhatWasJustInserted");function TAr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!T0t(r))return!1;for(let n of r.edits){let o=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(g2e(o,t.languageId))return!0}return!1}a(TAr,"editWouldDeleteAComment");function wAr(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=a(l=>l.trim().length>5,"isSignificantLine"),o=new Set(r.newLines.filter(n));if(o.size<=1)return!1;let s=new Set(t.documentAfterEditsLines.filter(n));return M2e(s,o)/o.size>.8}a(wAr,"editWouldDuplicateExistingLines");function T0t(t){let e=t.edits.reduce((n,o)=>n+o.range.length,0);return t.edits.reduce((n,o)=>n+o.newText.length,0)===0&&e>0}a(T0t,"editIsDeletion");function _Ar(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}a(_Ar,"findLineNumberAboveWithContent");var Poe=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{a(this,"InformationDelta")}combine(e){return new t(E0t(this.inserted,e.inserted),E0t(this.deleted,e.deleted))}isUndoneBy(e){let r=b0t(e.inserted,e.deleted),n=b0t(e.deleted,e.inserted),o=M2e(n,this.inserted),s=M2e(r,this.deleted);return n.size>6&&o/n.size>C0t||r.size>6&&s/r.size>C0t}};function v0t(t,e){let r=new Set,n=new Set,o=a(c=>{if(!c)return;let l=t.substring(c.start,c.endExclusive);for(let u of l.split(/\r\n|\r|\n/)){u=u.trim();for(let d of x0t(u))n.add(d)}},"tryAddDeleted"),s=a(c=>{for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of x0t(l))r.add(u)}},"tryAddInserted");for(let c of e.edits){let l=c.removeCommonPrefix(t).removeCommonSuffix(t),u=c.removeCommonSuffix(t).removeCommonPrefix(t);l.isNeutral()||(o(l.range),o(u.range),o(l.range.intersect(u.range)),s(SAr(l.newText,u.newText)))}return new Poe(r,n)}a(v0t,"getInformationDelta");function SAr(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let o=t.slice(0,t.length-n),s=e.slice(n);if(o===s)return o}return""}a(SAr,"trimOverlap");function x0t(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}a(x0t,"to4grams");function E0t(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}a(E0t,"setUnion");function b0t(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}a(b0t,"setMinus");function M2e(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}a(M2e,"setIntersectionCount");async function RAr(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||p0t(new vy(e.getText()),e.languageId,void 0)}a(RAr,"getStructure");var L2e=class extends $l.PromptElement{static{a(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:o,languageId:s}=this.props,c=[`<${mP}>`,`\`\`\`${s}`,`${o}`,"```",`</${mP}>`].join(`
`),l=(0,$l.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new Moe(c)}),vscpp($l.SystemMessage,{priority:1e3},vscpp(Eoe,null),this._getInstructions()),vscpp($l.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((u,d)=>u.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp($l.Chunk,{priority:300},vscpp(Boe,{doc:u}))):vscpp($l.Chunk,{priority:100+d},vscpp(Boe,{doc:u}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((u,d)=>u.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp($l.Chunk,{priority:300},vscpp(Noe,{doc:u}))):vscpp($l.Chunk,{priority:200+d},vscpp(Noe,{doc:u}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(l,{priority:300},vscpp($l.Chunk,{priority:300},vscpp("meta",{local:!0,value:new Doe}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",koe,">",vscpp("br",null),"```",s,vscpp("br",null),o,vscpp("br",null),"```",vscpp("br",null),"</",koe,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",koe,"> and </",koe,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",mP,">.")}},Doe=class extends $l.PromptMetadata{static{a(this,"EditWindowMarkerMetadata")}},Boe=class extends $l.PromptElement{static{a(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,o=[];for(let s=0;s<n.documentLinesBeforeEdit.length;s++){let c=n.documentLinesBeforeEdit[s];o.push(`${n.clippingRange.startLineNumber+s}\u2502${c}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),o.join(`
`))}},Noe=class extends $l.PromptElement{static{a(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,o=[];return o.push("```"),o.push(`---${n.getDisplayPath()}:`),o.push(`+++${n.getDisplayPath()}:`),o.push(...a0t(n)),o.push("```"),vscpp(vscppf,null,o.join(`
`))}},Moe=class extends $l.PromptMetadata{constructor(r){super();this.prediction=r}static{a(this,"PredictionMetadata")}};f();f();function w0t(t,e){let r=[];for(let[n,o]of t.entries())o===e&&r.push(n);return r}a(w0t,"findIndexes");function kAr(t,e,r,n=10){if(e.length===0)return e;let o=[...e],s=e.length-1;for(;s>=0&&e[s].trim()==="";)s--;if(s<0)return e;let c=w0t(r,e[s]).slice(0,n);for(let m of c){let h=!1,g=s;for(;g>=0&&m>=0;){let A=e[g],y=r[m];if(A===y)g--,m--;else if(y.trim()==="")m--;else{h=!0;break}}if(!h&&m===-1&&g!==e.length-1){e=e.slice(0,g+1);break}else e=[...o]}if(!e.length)return e;let l=0;for(;e.length&&e[l].trim()==="";)l++;let u=[...e],p=w0t(t,e[l]).slice(-n).reverse();for(let m of p){let h=!1,g=l;for(;g<e.length&&m<t.length;){let A=e[g],y=t[m];if(A===y)g++,m++;else if(y.trim()==="")m++;else{h=!0;break}}if(!h&&m===t.length&&g!==0){e=e.slice(g);break}else e=[...u]}return e}a(kAr,"deduplicateEditRegion");function _0t(t,e,r){let n=t.getLines(),o=n.slice(0,e[0]),s=n.slice(e[1]+1);return{updatedEditWindow:kAr(o,r.split(/\r?\n/),s).join(`
`)}}a(_0t,"postProcessUpdatedEditWindow");f();var Loe=Ne(xa());function S0t(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Loe.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Loe.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}a(S0t,"getTextPart");function PAr(t){return{type:Loe.Raw.ChatCompletionContentPartKind.Text,text:t}}a(PAr,"toTextPart");function F2e(t){return[PAr(t)]}a(F2e,"toTextParts");f();var Foe=t0("IDiffService");var H2e=Ne(xa());f();var Ooe="<|cursor|>",hP="<|code_to_edit|>",J8="<|/code_to_edit|>",k0t="<|area_around_code_to_edit|>",P0t="<|/area_around_code_to_edit|>",DAr="<|current_file_content|>",BAr="<|/current_file_content|>",NAr="<|edit_diff_history|>",MAr="<|/edit_diff_history|>",LAr="<|recently_viewed_code_snippets|>",FAr="<|/recently_viewed_code_snippets|>",OAr="<|recently_viewed_code_snippet|>",QAr="<|/recently_viewed_code_snippet|>",D0t=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${hP} and ${J8} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Ooe}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${hP} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${hP} and ${J8} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${hP} or ${J8} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function B0t(t,e,r,n){let o=t.getActiveDocument(),s=HAr(t,n),c=UAr(t,n,2e3),l=o.workspaceRoot===void 0?o.id.path:o.id.path.startsWith(o.workspaceRoot.path)?o.id.path.substring(o.workspaceRoot.path.length+1):o.id.path;return`
\`\`\`
${LAr}
${s}
${FAr}

${DAr}
current_file_path: ${l}
${e}
${BAr}

${NAr}
${c}
${MAr}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${l}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Ooe}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${hP}\` and \`${J8}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}a(B0t,"getUserPrompt");function UAr(t,e,r){let n=[];for(let c of t.xtabEditHistory.reverse()){let l=qAr(c);if(l===null)continue;let u=e(l);if(r-=u,r<0)break;n.push(l)}let o=n.reverse(),s=o.join(`

`);return o.length>0&&(s+=`
`),s}a(UAr,"getEditDiffHistory");function qAr(t){let e=[],r=Cs.fromEdit(t.edit);for(let o of r.edits){let s=t.edit.base.getLines().slice(o.lineRange.startLineNumber-1,o.lineRange.endLineNumberExclusive-1),c=o.newLines;if(s.filter(u=>u.trim().length>0).length===0&&c.filter(u=>u.trim().length>0).length===0)continue;let l=o.lineRange.startLineNumber-1;e.push(`@@ -${l},${s.length} +${l},${c.length} @@`),e.push(...s.map(u=>`-${u}`)),e.push(...c.map(u=>`+${u}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}a(qAr,"generateDocDiff");function R0t(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[OAr,n,e,QAr].join(`
`)}a(R0t,"formatCodeSnippet");function HAr(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let o=t.getActiveDocument(),c=t.documents.filter(d=>d.id!==o.id).map(d=>({path:d.id.path,content:d.documentAfterEdits.value})),l=[],u=0;for(let d=c.length-1;d>=0;d--){let p=c[d],m=p.content.split(/\r?\n/);n&&(m=m.map((v,b)=>`${b+1}|${v}`));let h=m.map(v=>e(v)+1),g=e(R0t(p.path,"",!0)),A=h.reduce((v,b)=>v+b,0)+g,y=!1;for(;m.length>0&&u+A>r;)m.pop(),A-=h.pop()||0,y=!0;m.length>0&&(u+=A,l.push(R0t(p.path,m.join(`
`),y)))}return l.join(`

`)}a(HAr,"getRecentCodeSnippets");function O2e(t,e,r){if(!t.length)return[0,0];let n=r*4,o=0,s=e?t.length-1:0;for(;o<n;)if(o+=t[s].length+1,e){if(s--,s<0)break}else if(s++,s>=t.length)break;return e?[s+1,t.length]:[0,s]}a(O2e,"truncateCode");var N0t=2,M0t=10,Q2e=15,U2e=1e3,q2e=2e3;var lg=class extends q8{constructor(r,n,o){super(lg.ID,[s=>new V8(s),s=>new W8(s),s=>new $8(s)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=o;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{a(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let o=new p_(r);try{if(r.xtabEditHistory.length===0)return ro.noEdit({kind:"activeDocumentHasNoEdits"},o);let s=await this.doGetNextEdit(r,n,o);return new ro(s,o.build(s))}catch(s){return ro.noEdit({kind:"unexpected",error:pP(s)},o)}}async doGetNextEdit(r,n,o){let s=r.getActiveDocument(),c=lP(s);if(c===null)return vs.error({kind:"uncategorized",error:pP(new Error("NoSelection"))});let l=a(ne=>Math.floor(ne.length/4),"computeTokens"),u=new jr(c.endLineNumber,c.endColumn),d=s.documentAfterEdits.getTransformer().getOffset(u),p=s.documentAfterEdits.value,m=p.substring(0,d)+Ooe+p.substring(d),h=u.lineNumber-1,g=m.split(/\r?\n/),A=Math.max(0,h-Q2e),y=Math.min(g.length,h+Q2e+1),v=N0t,b=M0t,I=Math.max(0,h-v),_=Math.min(g.length,h+b+1),k=s.documentAfterEdits.getTransformer().getOffsetRange(new ir(I,0,_,0)),N;N=p.split(/\r?\n/).slice(I,_);let F=[I,_],O=g.slice(I,_),Y=[k0t,...g.slice(A,I),hP,...O,J8,...g.slice(_,y),P0t].join(`
`),z=Y,V;{let ne=l(Y),re=0;if(ne>=q2e)V=Y,re=A;else{let fe=Math.floor((q2e-ne)/2),[ye]=O2e(g.slice(0,A),!0,fe),[,Qe]=O2e(g.slice(y),!1,fe);re=Math.max(ye,h-U2e);let we=Math.min(Qe+y,h+U2e+1);V=[...g.slice(re,A),Y,...g.slice(y,we)].join(`
`)}}let U=B0t(r,V,z,l),H=[{role:H2e.Raw.ChatRole.System,content:F2e(D0t)},{role:H2e.Raw.ChatRole.User,content:F2e(U)}];if(o.setPrompt(H),await this.debounce(o),n.isCancellationRequested)return vs.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let ee=new z3;o.setFetchStartedAt();let J,G=await this._endpointProvider.getEndpointInfo(this.ID),j=await this._chatMLFetcher.fetchOne(Aq(H),async(ne,re,fe)=>{J===void 0&&(J=ee.elapsed())},{id:G.id,name:G.name},{temperature:0},n);if(j.type==="canceled")return o.setFetchResultIfNotSet("cancelled"),vs.error({kind:"gotCancelled",message:"afterFetchCall"});if(j.type==="quotaExceeded")return o.setFetchResultIfNotSet("failure"),vs.error({kind:"quotaExceeded"});if(j.type!=="success")return o.setFetchResultIfNotSet("failure"),vs.error({kind:"fetchFailure",error:pP(j)});o.setFetchResultIfNotSet("success"),J&&o.setTtft(J),o.setResponse(j.value);let Z=lg.getBacktickSection(j.value);return await this.generateReturnEditFormat(s,k,N.join(`
`),Z,F,o)}async generateReturnEditFormat(r,n,o,s,c,l){let{updatedEditWindow:u}=_0t(r.documentAfterEdits,c,s),d=await this.diffService.computeDiff(o,u,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),p=u.split(/\r?\n/),m=d.changes.map(h=>new uy(new Gr(c[0]+h.original.startLineNumber,c[0]+h.original.endLineNumberExclusive),p.slice(h.modified.startLineNumber-1,h.modified.endLineNumberExclusive-1)));return m.length<1?vs.error({kind:"noSuggestions"}):vs.ok({editWindow:n,edit:new Cs(m)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,o=Math.max(0,lg.DEBOUNCE_MS-n);r.setDebounceTime(o),await uE(o)}};lg=mf([Ra(0,Foe),Ra(1,Cy),Ra(2,yoe)],lg);f();var Qoe=class t extends Ps{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new $7,Oh(this,r.openDocuments,(o,s)=>{s.add(qx(this,{rootedEdits:o.value},c=>{if(c.rootedEdits.changes.length<1||c.rootedEdits.previous===void 0)return;ql(c.rootedEdits.changes.length===1,`Expected 1 edit change but got ${c.rootedEdits.changes.length}`);let l=c.rootedEdits.changes[0];if(l.edits.length===0)return;let u=this.idToEntry.get(o.id),d=c.rootedEdits.previous,p=new Jd(d,l);if(u===void 0){this.pushToHistory(o.id,p);return}let m=u.entry.edit,h=Cs.fromEdit(m),g=Cs.fromEdit(p);if(!g.isEmpty()&&!h.isEmpty()&&h.edits[0].lineRange.startLineNumber===g.edits[0].lineRange.startLineNumber){u.removeFromHistory();let A=m.edit.compose(l),y=new Jd(m.base,A);this.pushToHistory(o.id,y)}else this.pushToHistory(o.id,p)}))},o=>o.id).recomputeInitiallyAndOnChange(this._store)}static{a(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let o={docId:r,edit:n},s=this.history.push(o);if(this.idToEntry.set(r,{entry:o,removeFromHistory:s}),this.history.size>this.maxHistorySize){let c=this.history.shift();if(c!==void 0){let l=this.idToEntry.get(c.docId);l!==void 0&&c===l.entry&&this.idToEntry.delete(c.docId)}}}};f();f();var W2e=Ne(require("crypto"));var yq=W2e.randomUUID.bind(W2e);var $0t=Ne(xa()),z2e=Ne($U());f();var Uoe=t0("ISnippyService");f();f();var Cq=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),qoe=65;function $Ar(t){let e=0,r;Cq.lastIndex=0;do if(r=Cq.exec(t),r&&(e+=1),e>=qoe)break;while(r);return e}a($Ar,"lexemeLength");function jAr(t,e){let r=0,n;Cq.lastIndex=0;do if(n=Cq.exec(t),n&&(r+=1,r>=e))return Cq.lastIndex;while(n);return t.length}a(jAr,"offsetFirstLexemes");function L0t(t,e){let r=t.split("").reverse().join(""),n=jAr(r,e);return r.length-n}a(L0t,"offsetLastLexemes");function $2e(t){return $Ar(t)>=qoe}a($2e,"hasMinLexemeLength");f();f();var F0t;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,a(t,"is")})(F0t||={});var j2e;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,a(t,"is")})(j2e||={});var O0t;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(F0t.is)}e.is=t,a(t,"is")})(O0t||={});var G2e;(e=>{function t(r){if(j2e.is(r))return vs.error(r);if(O0t.is(r))return vs.ok(r)}e.to=t,a(t,"to")})(G2e||={});var Q0t;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,a(t,"is")})(Q0t||={});var U0t;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,a(t,"is")})(U0t||={});var q0t;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,a(t,"is")})(q0t||={});var H0t;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(Q0t.is)&&"page_info"in r&&U0t.is(r.page_info)&&"license_stats"in r&&q0t.is(r.license_stats)}e.is=t,a(t,"is")})(H0t||={});var V2e;(e=>{function t(r){if(j2e.is(r))return vs.error(r);if(H0t.is(r))return vs.ok(r)}e.to=t,a(t,"to")})(V2e||={});var Hoe=class t{static{a(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,G2e.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,V2e.to)}async fetch(e,r,n){let o=this.ctx.get(Lr),s=await this.ctx.get(nr).getToken(),c=Gm(this.ctx,s,"origin-tracker",`${t.TWIRP_URL}/${e}`),l={Authorization:`Bearer ${s.token}`,...y0(this.ctx),"X-GitHub-Api-Version":zB},u=new AbortController,d=await o.fetch(c,{method:"POST",headers:l,json:r,signal:u.signal});if(!d.ok)throw new Error(`Failed with status ${d.status} and body: ${await d.text()}`);let p=await d.json();return n(p)}};var W0t=new dt("[CODE REFERENCING]"),X8=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(Hoe,this.ctx)}static{a(this,"SnippyService")}async handlePostInsertion(e,r,n){let o=this.computeSourceToCheck(r,n);if(!o)return;let c=await this.ctx.get(Ar).getTextDocument({uri:e.toString()});if(!c){W0t.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let l=c.version,u;try{u=await this.fetcher.fetchMatch(o.source)}catch(g){throw g}if(!u)throw new Error(`Failed to parse match response: ${u}`);if(u.isError())throw new Error(`Failed to match: ${u.err}`);if(u.val.snippets.length===0)return;let{snippets:d}=u.val,p=d.map(async g=>{let A=await this.fetcher.fetchFilesForMatch(g.cursor);if(!A||A.isError())return;let{file_matches:y,license_stats:v}=A.val;return{match:g,files:y,licenseStats:v}}),h=(await Promise.all(p)).filter(g=>!!g);if(h.length===0){W0t.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let g of h){let A=new Set(Object.keys(g.licenseStats?.count??{}));A.delete("NOASSERTION")&&A.add("unknown");let y=Array.from(A).sort(),v=`${g.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,b={inDocumentUri:e.toString(),offsetStart:o.startOffset,offsetEnd:o.endOffset,matchingText:v,location:{start:{line:o.startPosition.lineNumber,character:o.startPosition.column},end:{line:o.endPosition.lineNumber,character:o.endPosition.column}},version:l,details:y.map(I=>({license:I,url:`${g.match.github_url}`}))};await this.ctx.get(Nf).handleIPCodeCitation(this.ctx,b)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=Ca.single(r),s=n.getNewRanges().reduce((h,g)=>h.join(g)),c=e.apply(n),l=s.start,u=c.value.substring(s.start,s.endExclusive);if(!$2e(u)){let h=c.value.slice(0,s.start),g=L0t(h,qoe);l=g,u=c.value.slice(g,s.start+r.newText.length)}if(!$2e(u))return;let d=c.getTransformer(),p=d.getPosition(l),m=d.getPosition(s.endExclusive);return{source:u,startOffset:l,endOffset:s.endExclusive,startPosition:p,endPosition:m}}};X8=mf([Ra(1,Hv)],X8);async function j0t(t){let e=new hoe;return e.define(Aoe,new K2e(t)),e.define(Foe,new Jp),e.define(TE,new ym(Y2e,[!0])),e.define(Uoe,new ym(X8,[t])),e.define(Cy,await X2e.Create(t)),e.define(mq,new ym(Z2e)),e.define(yoe,new J2e(t)),e.seal()}a(j0t,"createInstantiationService");var K2e=class{constructor(e){this.ctx=e;this.ctx=e}static{a(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let o=Object.fromEntries(Object.entries(r??{}).filter(([l,u])=>u!==void 0)),s=Object.fromEntries(Object.entries(n??{}).filter(([l,u])=>u!==void 0)),c=Kr.createAndMarkAsIssued(o,s);Pt(this.ctx,e,c)}},Y2e=class{static{a(this,"ParserServiceImpl")}getTreeSitterAST(e){}},J2e=class{constructor(e){this.ctx=e}static{a(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==lg.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments();return{id:this.ctx.get(Lt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},X2e=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{a(this,"CLSChatMLFetcher")}static async Create(e){let r=await Go.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,o,s){let c=e.map(d=>t.chatMessageToClsChatMessage(d)),l=yq(),u=await this.ctx.get(Mp).fetchAndStreamChat(this.ctx,c,IC.createEmptyConfigForTesting(),"nextEditSuggestion",l,async(d,p)=>{if(r)return await r(d,0,{text:p.text})},n,o,s);if(u.type==="success"){let d=[];if(r)for await(let m of u.choices)if(m.finishReason!=="snippy")await r(m.completionText,0,{text:m.completionText}),d.push(m.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:l,serverRequestId:m.requestId.headerRequestId};let p=d.join("");return{type:"success",value:p}}else return u.type==="failed"&&u.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:u.reason}:{type:t.clsResponseTypeToResponseType(u.type),reason:u.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:S0t(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},Z2e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new Woe("cl100k_base")}static{a(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new Woe(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},Woe=class{constructor(e){this.mode=$0t.OutputMode.Raw;this.tokenizer=Xi(e)}static{a(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===z2e.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===z2e.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var $oe=class extends Ps{constructor(r){super();this.workspace=r;this._garbageCollector=new rRe(20);this._documentCaches=new Map;Oh(this,r.openDocuments,(n,o)=>{let s=new eRe(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(s.docId,s),o.add(qx(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{for(let l of c.value.changes)s.handleEdit(l)})),o.add(Wc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{a(this,"RejectionCollector")}reject(r,n){let o=this._documentCaches.get(r);o&&o.reject(n)}isRejected(r,n){let o=this._documentCaches.get(r);return o?o.isRejected(n):!1}},eRe=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{a(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new tRe(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},tRe=class{constructor(e,r){this._edit=e;this._onDispose=r}static{a(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},rRe=class{constructor(e){this._maxSize=e;this._disposables=[]}static{a(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var vq=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{a(this,"Node")}},joe=class{static{a(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new vq("",null),this._tail=new vq("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new vq(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let o=this._popTail();return this._cache.delete(o.key),[o.key,o.value]}}};var Goe=class extends Ps{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new joe(50);Oh(this,r.openDocuments,(n,o)=>{let s=new nRe(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(s.docId,s),o.add(qx(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{for(let l of c.value.changes)s.handleEdit(l)})),o.add(Wc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{a(this,"NextEditCache")}setNextEdits(r,n,o){let s=this._documentCaches.get(r);s&&s.setNextEdits(n,o)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},nRe=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{a(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let o=0;o<e.edits.length;o++){let s=e.edits[o],c=this._getKey(n.value);this._sharedCache.put(c,{edit:s,subsequentN:o,source:r,documentBeforeEdit:n}),n=n.apply(s.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var Voe=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{a(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,o,s,c;if(this._request){let u=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((d,p)=>d+p.recentEdits.edits.length,0),n=u.recentEdits.edits.length,o=u.languageId,s=u.lineCountBeforeClipping,c=u.clippingRange.length}let l=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:o,activeDocumentOriginalLineCount:s,activeDocumentShortenedLineCount:c,fetchStartedAfterMs:l,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},Z8=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{a(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let o=n.builder;o.setAcceptance(r),this._doSendTelemetry(o)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:o,requestN:s,providerId:c,hadStatelessNextEditProviderCall:l,statelessNextEditProviderDuration:u,nextEditProviderDuration:d,isFromCache:p,subsequentEditOrder:m,documentShorteningStrategy:h,activeDocumentLanguageId:g,activeDocumentOriginalLineCount:A,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:v,isShown:b,acceptance:I,logProbThreshold:_,documentsCount:k,editsCount:N,activeDocumentEditsCount:F,promptLineCount:O,promptCharCount:Y,isDefaultEndpoint:z,hadLowLogProbSuggestion:V,nonTerminatingError:U,nEditsSuggested:H,kthEditPicked:ee,lineDistanceToMostRecentEdit:J,debounceTime:G,hasNextEdit:j,nextEditLogprob:Z,maxLinesPerEdit:ie,noNextEditReasonKind:ne,noNextEditReasonMessage:re,firstEditStrategy:fe,firstPickStrategyOverride:ye,fetchTime:Qe,fetchResult:we,fetchError:Xe,fetchStartedAfterMs:Oe}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:o,providerId:c,documentShorteningStrategy:h,activeDocumentLanguageId:g,acceptance:I,nonTerminatingError:U,noNextEditReasonKind:ne,noNextEditReasonMessage:re,firstEditStrategy:fe,firstPickStrategyOverride:ye,fetchResult:we,fetchError:Xe},{requestN:s,hadStatelessNextEditProviderCall:this._boolToNum(l),statelessNextEditProviderDuration:u,nextEditProviderDuration:d,isFromCache:this._boolToNum(p),subsequentEditOrder:m,isDefaultEndpoint:this._boolToNum(z),activeDocumentOriginalLineCount:A,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(v),isShown:this._boolToNum(b),logProbThreshold:_,documentsCount:k,editsCount:N,activeDocumentEditsCount:F,promptLineCount:O,promptCharCount:Y,hadLowLogProbSuggestion:this._boolToNum(V),nEditsSuggested:H,kthEditPicked:ee,lineDistanceToMostRecentEdit:J,debounceTime:G,fetchStartedAfterMs:Oe,fetchTime:Qe,hasNextEdit:this._boolToNum(j),nextEditLogprob:Z,maxLinesPerEdit:ie})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};Z8=mf([Ra(0,Aoe)],Z8);f();var eM=class{constructor(e){this.result=e}static{a(this,"NextEditResult")}};var gP=!1,G0t=300,tM=class extends Ps{constructor(r,n,o,s,c,l,u){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=o;this._xtabHistoryTracker=s;this._parseService=c;this._instantiationService=l;this._snippyService=u;this._rejectionCollector=new $oe(this._workspace);this._nextEditCache=new Goe(this._workspace);this._recentlyShownCache=new sRe;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;Oh(this,this._workspace.openDocuments,(d,p)=>{p.add(MEe(d.value,m=>{this._cancelPendingRequestDueToDocChange(d.id,m)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(Z8)}static{a(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let o=this._pendingStatelessNextEditRequest.getActiveDocument();o.id===r&&o.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,o){this._lastTriggerTime=Date.now();let s=await this._workspace.getDocument(r);if(!s)return{result:void 0};let c=s.value.get(),l=new Voe(this._statelessNextEditProvider.ID);l.setOpportunityId(n.requestUuid??yq());let u=this._recentlyShownCache.get(r,c),d=this._nextEditCache.lookupNextEdit(r),p,m,h,g;if(u)p=u[0],g=u[1],m=c,l.setHeaderRequestId(g.headerRequestId),l.setIsFromCache(),await uE(G0t);else if(d)p=d.edit,g=d.source,m=d.documentBeforeEdit,l.setHeaderRequestId(g.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(d.subsequentN),await uE(G0t);else{g=new oRe,l.setHeaderRequestId(g.headerRequestId);let v=s.value.get();m=v;let b=await this.fetchNextEdit(g,r,l,o),I=v.value!==s.value.get().value;if(b.isError())switch(b.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":h=b.err.error;break;default:W7(b.err)}else if(!I){let _=b.val;_.isEmpty()||(p=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(r,_,g))}}if(l.markEndTime(),h)throw this._telemetrySender.sendTelemetry(l),h;if(!p)return this._telemetrySender.sendTelemetry(l),new eM(void 0);if(this._rejectionCollector.isRejected(r,p))return l.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(l),new eM(void 0);ql(m!==void 0,"should be defined if edit is defined");let A=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new eM({edit:p,showRangePreference:A,documentBeforeEdits:m});return this._telemetrySender.scheduleSendingTelemetry(y,l),p.isNeutral()||this._recentlyShownCache.add(r,c,[p,g]),y}async _shortenDocument(r,n){let o=r.lastEdit.getEditedState(),{document:s,clippedRange:c}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),l=Ca.fromOffsetEdit(s.edits).inverseOnString(s.originalText),{edits:u,editLast:d}=iRe(r.lastEdits.swap(l)),p=u.compose(),m=new dP(new vy(r.lastEdits.apply(s.originalText)),d.toOffsetEdit().inverse(u.apply(s.text))),h=new vu(s.text),A=Mv.fromEdit(new Jd(h,p)).removeCommonSuffixPrefixLines(),y=u.edits.at(-1)?.getNewRanges().at(0),v;y&&(v=new vu(m.text).getTransformer().getRange(y));let b=r.lastSelection?m.projectOffsetRange(r.lastSelection):void 0,I=this._workspace.getWorkspaceRoot(r.docId),_=a(O=>{let z=new Mv(new vu(m.text),O).toEdit();return V0t(z,m)},"toEditOnDocumentAfterEditsNoShortening"),k=a(O=>m.projectBack(O),"toOffsetOnDocumentAfterEditsNoShortening"),N=a(O=>m.project(O),"toProjectedOffset"),F=new sq(r.docId,I,r.languageId,A.base.getLines(),A.edit,v,h,u,o,_,k,N,r.lastEdit.base.getTextLength().lineCount,c,b);return{recentEdit:r.lastEdit,nextEditDoc:F,projectedDocument:m}}async fetchNextEdit(r,n,o,s){let c=await this._historyContextProvider.getHistoryContext(n);if(!c)return vs.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let l=iRe(c.getDocumentAndIdx(n)),u=this.getDocumentShorteningStrategy();o.setDocumentShorteningStrategy(u);let d=await Promise.all(c.documents.map(O=>this._shortenDocument(O,u))),p=d[l.idx],m=this._xtabHistoryTracker.getHistory(),h=new uoe(r.headerRequestId,d.map(O=>O.nextEditDoc),l.idx,m,this.nextEditOptions),g=this._findExistingPendingRequest(h),A,y;if(g){A=g,gP&&console.log(`=> reusing an existing request ${A.seqid}`),o.setHeaderRequestId(g.id),o.setIsFromCache(),o.setRequest(A);let O=this._hookupCancellation(A,s);try{y=await A.result}finally{O.dispose()}}else{A=h,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=A;let O=a(()=>{this._pendingStatelessNextEditRequest===A&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");o.setRequest(A);let Y=this._hookupCancellation(A,s);try{y=await this._statelessNextEditProvider.provideNextEdit(A,A.cancellationTokenSource.token),A.setResult(y)}catch(z){throw A.setResultError(z),z}finally{Y.dispose(),O()}}o.setStatelessNextEditTelemetry(y.telemetry);let v=y.nextEdit;if(v.isError())return v;let b=v.val.edit;if(b.edits.length===0)return vs.error({kind:"noSuggestions"});let _=new Mv(new vu(p.projectedDocument.text),b).toEdit(),k=V0t(_,p.projectedDocument),N=_.edits.length===k.edits.length?v.val.permutation:void 0,F=k.decompose(N);return vs.ok(F)}_hookupCancellation(r,n){let o=new ad,s=!1,c=a(()=>{s||(s=!0,r.liveDependentants--)},"removeDependant"),l=o.add(new E8);return o.add(n.onCancellationRequested(()=>{if(c(),r.liveDependentants>0){gP&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){gP&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}l.setIfNotSet(()=>{if(r.liveDependentants>0){gP&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}gP&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),o.add(Wc(()=>{c()})),r.liveDependentants++,o}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){Zne(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new dP(new vy(r.base.value),new sg([])),clippedRange:new Gr(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),o=n.getRange(r.edit.getRange()??new Kt(0,0)),s=Gr.fromRange(o);function c(m,h){return new Gr(m.startLineNumber-h,m.endLineNumberExclusive+h)}a(c,"extendRange");let l=new Gr(1,n.textLength.lineCount+1),u=iRe(l.intersect(c(s,100))),d=Gr.subtract(l,u);return{document:new dP(new vy(r.base.value),new sg(d.map(m=>vl.delete(n.getOffsetRange(new ir(m.startLineNumber,1,m.endLineNumberExclusive,1)))))),clippedRange:u}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new oq("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let o=await KAr(this._parseService,{getText:a(()=>n.base.value,"getText"),languageId:r});if(!o)return this.getProjectedDocumentClipping(n);let s=new vy(n.base.value),c=n.edit.edits.at(0)?.range??new Kt(0,0),l;if(n.edit.edits.length!==0){let g=n.edit.edits.at(0),A=n.edit.edits.at(-1);l=s.offsetRangeToRange(new Kt(g.range.start,A.range.endExclusive))}let u=z0t(s.offsetRangeToRange(c)),d=woe(1e4,{costFnOverride:a((g,A,y)=>{let v=z0t(y.offsetRangeToRange(g.range)),b=zAr(u,v);return b>100?!1:b},"costFnOverride")},[{overlayNodeRoot:o,document:s,selection:l}])[0],p=d.projectBack(1)-1,m=n.base.getTransformer().getPosition(p).lineNumber,h=new Gr(m,m+d.lineCount);return{document:d,clippedRange:h}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};tM=mf([Ra(4,TE),Ra(5,Hv),Ra(6,Uoe)],tM);function V0t(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return Ca.fromOffsetEdit(r)}a(V0t,"projectBackEdit");function z0t(t){return new Gr(t.start.line+1,t.end.line+1)}a(z0t,"lineRangeFromVSCodeRange");function zAr(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}a(zAr,"lineRangeDist");async function KAr(t,e){return await t.getTreeSitterAST(e)?.getStructure()}a(KAr,"getStructure");function iRe(t){if(!t)throw new bn("expected value to be defined, but it was not");return t}a(iRe,"assertDefined");var oRe=class{constructor(){this.headerRequestId=yq()}static{a(this,"NextEditFetchRequest")}},sRe=class{constructor(){this._cache=new k3(10)}static{a(this,"RecentlyShownCache")}add(e,r,n){let o=this._key(e,r);this._cache.set(o,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};var K0t=10,xy=class{constructor(e){this.lastResultsById=new vr(K0t);this.lastResultsByUri=new vr(K0t);this.ctx=e}static{a(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let o=await(this.nextEditProvider??=this.createNextEditProvider()),s=this.lastResultsByUri.get(e);s&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(s.resultId),s.isShown&&o.handleRejection(s.documentId,s.nextEditResult));let c=Ay.create(e),l=await o.getNextEdit(c,{triggerKind:1},n);if(l.result==null)return;let u=await this.ctx.get(Ar).getTextDocument({uri:e});if(!u)return;let d=u.positionAt(l.result.edit.range.start),p=u.positionAt(l.result.edit.range.endExclusive),m=wr(),h={resultId:m,nextEditResult:l,documentId:c,isShown:!1};return this.lastResultsById.set(m,h),this.lastResultsByUri.set(e,h),[{edit:{text:l.result?.edit.newText??"",range:{start:d,end:p},textDocument:{uri:e,version:r}},id:m}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await j0t(this.ctx),r=!1;try{let c=await this.ctx.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments();r=YAr(this.ctx,c)}catch(c){console.error("Error updating ExP values and assignments:",c)}let n=e.createInstance(r?lg:C_),o=this.ctx.get($A),s=new fie(o);return await vR.catch(()=>{}),e.createInstance(tM,o,n,s,new Qoe(o))}};function YAr(t,e){let r=Ki(t,$t.NESXTab);return r!==void 0?r:t.get(Lt).enableNESXTab(e)}a(YAr,"shouldUseXTab");f();var Y0t=Ne(mi());var zoe=class extends $A{constructor(r){super();this._openDocuments=WA(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{a(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(Ar);for(let n of r.getTextDocumentsUnsafe())this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,o){let s=Ay.create(r);return this.addDocument({id:s,initialValue:o,languageId:sk.create(n)},void 0)}onDidChangeLspDocument(r,n){let o=Ay.create(r),s=this._documents.get(o);s&&s.applyLspContentChanges(n)}onUserPositionChange(r,n){let o=Ay.create(r),s=this._documents.get(o);s&&s.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=Ay.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let o=this._documents.get(r.id);if(o)return o;let s=new aRe(r.id,new vu(r.initialValue??""),[],r.languageId??sk.PlainText,()=>{this._documents.delete(r.id);let c=this._openDocuments.get(),l=c.filter(u=>u.id!==s.id);l.length!==c.length&&this._openDocuments.set(l,n,{added:[],removed:[s]})},r.workspaceRoot);return this._documents.set(r.id,s),this._openDocuments.set([...this._openDocuments.get(),s],n,{added:[s],removed:[]}),s}async getDocument(r){if(await this.ctx.get(Ar).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},aRe=class extends gee{static{a(this,"MutableObservableLspDocument")}constructor(e,r,n,o,s,c){super(e,r,n,o,s,c)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new jr(e.lineNumber+1,e.column+1));this.updateSelection([new Kt(r,r)])}editFromLspContentChanges(e){return new Lv(e.map((n,o)=>this.editFromLspContentChange(n,o)))}editFromLspContentChange(e,r){if(Y0t.TextDocumentContentChangeEvent.isIncremental(e)){let n=this.value.get().getTransformer(),o=n.getOffset(new jr(e.range.start.line+1,e.range.start.character+1)),s=n.getOffset(new jr(e.range.end.line+1,e.range.end.character+1));if(o>s){let c=this.value.get().value,l=c.split(/\r\n|\n/).length,u=c.split(/\r\n|\r|\n/).length,d=new bn(`Invalid range: [${o}, ${s}) from ${JSON.stringify(e.range)}. Line counts: nes=${l}, lsp=${u}`);throw l<u?d.code="ObservableWorkspace_TooFewLines":l>u?d.code="ObservableWorkspace_TooManyLines":d.code="ObservableWorkspace_InvalidRange",d.code+=r>0?"_SubsequentChange":"_FirstChange",d}return Ca.replace(new Kt(o,s),e.text)}throw new Error("Full replacement edits are not supported")}};f();var Ey=class{static{a(this,"AuthenticationService")}};f();var J0t=require("crypto"),Wv=Ne(require("fs/promises")),X0t=require("os"),_E=Ne(require("path"));var SE=class{constructor(e){this.ctx=e;this.logger=new dt("ripgrep")}static{a(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let o=_E.extname(__filename)===".ts"?_E.resolve(__dirname,"../../../packages/ripgrep/bin"):_E.resolve(__dirname,"./bin"),s=_E.resolve(o,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let c=await Wv.readFile(s),l=(0,J0t.createHash)("sha256").update(c).digest("hex"),u=_E.join((0,X0t.homedir)(),".cache/pkg",l);await Wv.mkdir(u,{recursive:!0});let d=Mi(Bl(s)),p=_E.join(u,d);try{await Wv.stat(p)}catch{await Wv.copyFile(s,p),this.logger.debug(this.ctx,`Copied ripgrep to ${p}`)}s=p,e!=="win32"&&await Wv.chmod(s,493).catch(m=>{this.logger.error(this.ctx,`Failed to set executable permission for ${s}: ${m}`)})}return s}};f();var Z0t=require("child_process"),cRe=require("perf_hooks");var RE=new dt("ripgrepProcessManager"),by=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,RE.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{a(this,"RipgrepProcessManager")}dispose(){RE.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){RE.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,o,s){return new Promise((c,l)=>{if(this.taskQueue.length>=this.maxPendingTasks){RE.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),l(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(s!==void 0&&s<=0){RE.error(this.ctx,`Invalid timeout value: ${s}`),l(new Error(`Invalid timeout value: ${s}`));return}RE.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:ly(),command:e,args:r,options:o,resolve:c,reject:l,timeoutInMs:s??this.defaultTimeoutInMs,token:n});let u=this.taskQueue.map(d=>this.getTaskSimpleInfo(d)).join(`
`);RE.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${u}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=cRe.performance.now();RE.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,Z0t.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let o="",s="",c,l=a(()=>{c&&clearTimeout(c),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(c=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${o}`))),l(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+o))),l(),this.runNextTask()}),n.stdout?.on("data",u=>{o+=u.toString()}),n.stderr?.on("data",u=>{s+=u.toString()}),n.on("close",u=>{let p=cRe.performance.now()-r;RE.debug(this.ctx,`Task ${e.id} completed in ${p} ms`),l(),u===0?e.resolve(o):u===1?e.resolve(""):e.reject(new Error(`Process exited with code ${u}: ${s}`)),this.runNextTask()}),n.on("error",u=>{l(),e.reject(new Error(`Failed to start process: ${u.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var rM=class extends ov{static{a(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};f();var emt=100,tmt=1e3*60*5;function rmt(t){let e=new lRe(t);t.get(Gc).registerContextProvider(e),t.get(rv).add(e.id)}a(rmt,"registerRelatedFilesShim");var lRe=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new Zg(emt,tmt);this.relatedFilesCache=new Zg(emt,tmt);this.resolver={resolve:a(async(r,n)=>{let o=r.documentContext.uri,s=r.documentContext.languageId;return await this.getTraits(o,s,n)},"resolve")}}static{a(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,o){try{let s=await this.ctx.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments({uri:e,languageId:n}),c={uri:e,clientLanguageId:r,detectedLanguageId:n},l=await Eee(this.ctx,c,s,o,!0);if(o?.isCancellationRequested)return;let u=l.traits.filter(p=>p.includeInPrompt).map(p=>p.promptTextOverride?{name:"OtherInformation",value:p.promptTextOverride}:p),d=new Set;for(let p of l.entries.values())for(let m of p.keys())d.add(m);this.traitCache.set(e,u),this.relatedFilesCache.set(e,Array.from(d))}catch(s){PT(this.ctx,s,"relatedFilesShim")}}};f();f();f();var Koe=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new is;this.onFileChange=this.emitter.event;this.status="created",this.startWatching()}static{a(this,"WorkspaceWatcher")}emitFilesCreated(e){this.emitter.fire({type:"create",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesUpdated(e){this.emitter.fire({type:"update",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesDeleted(e){this.emitter.fire({type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var tf=class{constructor(e){this.ctx=e;this.watchers=new vr(25)}static{a(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let o=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(o)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(kr.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let s of this.watchers.values())r.push(s.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),o=r.filter(s=>s.uri!==e.uri&&s.uri.startsWith(n));for(let s of o)this.terminateWatching(s);return o}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r,n,o){return this.getWatcher(e)?.onFileChange(iu(this.ctx,r,"WorkspaceWatcherProvider.onFileChange"),n,o)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var nM=class{static{a(this,"WorkspaceLifecycleListener")}start(){}didAddWorkspace(e){}didRemoveWorkspace(e){}didTerminateWorkspaceSubfolders(e,r){}didChangeFiles(e){}},JAr="workspaceLifecycleManager",rf=new dt(JAr),$v=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=lc(e,async()=>{r.dispose(),await this.start()})}static{a(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?rf.debug(this.ctx,`listener ${e.constructor.name} is already started`):(rf.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):rf.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);rf.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(Ar).onDidChangeWorkspaceFolders(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(Ar).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,o=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==o&&n.startsWith(o)}async onWorkspacesAdded(e,r){if(!e.length){rf.debug(r,"No workspaces to add.");return}rf.debug(r,`Adding workspaces: ${e.map(l=>l.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];rf.debug(r,`Combined workspaces: ${n.map(l=>l.uri).join(", ")}`);let o=n.filter((l,u,d)=>d.findIndex(p=>p.uri===l.uri)===u&&!d.some(p=>t.isSubfolder(l,p)));rf.debug(r,`Filtered workspaces: ${o.map(l=>l.uri).join(", ")}`);let s=o.filter(l=>!this.watchedWorkspaces.some(u=>u.uri===l.uri));rf.debug(r,`New workspaces: ${s.map(l=>l.uri).join(", ")}`);let c=this.watchedWorkspaces.filter(l=>!o.some(u=>u.uri===l.uri));rf.debug(r,`Removed workspaces: ${c.map(l=>l.uri).join(", ")}`),this.watchedWorkspaces=o;for(let l of c){rf.debug(r,`Terminating watching for removed workspace: ${l.uri}`),r.get(tf).terminateWatching(l);for(let d of this.activeListeners)rf.debug(r,`Notifying listener of removed workspace: ${l.uri}`),await d.didRemoveWorkspace(l)}for(let l of s){if(!l.uri)continue;rf.debug(r,`Starting to watch new workspace: ${l.uri}`);let u=r.get(tf);if(u.shouldStartWatching(l)){u.startWatching(l);let d=u.terminateSubfolderWatchers(l);if(d.length){rf.debug(r,`Terminated subfolder watchers for workspace: ${l.uri}, Subfolders: ${d.map(p=>p.uri).join(", ")}`);for(let p of this.activeListeners)await p.didTerminateWorkspaceSubfolders(l,d)}for(let p of this.activeListeners)rf.debug(r,`Adding file change listener for workspace: ${l.uri}`),u.onFileChange(l,p.didChangeFiles.bind(p))}}for(let l of this.activeListeners)for(let u of s)rf.debug(r,`Notifying ${l.constructor.name} of added workspace: ${u.uri}`),await l.didAddWorkspace(u)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(tf).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(s=>s.uri!==n.uri);for(let s of this.activeListeners)await s.didRemoveWorkspace(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function Yoe(t){t.set($v,new $v(t))}a(Yoe,"setupWorkspaceLifecycleListener");f();var imt=require("child_process");var Joe=class extends ag{static{a(this,"GitCLIBranchLoader")}runCommand(e,r,n){return new Promise((o,s)=>{(0,imt.execFile)(r,n,{cwd:e},(c,l)=>{c?s(c):o(l)})})}async tryRunCommand(e,r,n,o){try{return await this.runCommand(r,n,o)}catch(s){bie.info(e,`Failed to run command '${n}' in ${r}:`,s);return}}async getBranchInfo(e,r){let n=ns(r);if(n===void 0)return;let o=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","branch","--show-current",...this.extraArgs()]);if(o!==void 0){let s=o.trim();return s?AE.branch(s):AE.detachedHead()}}extraArgs(){return[]}};f();var Xoe=class extends ag{static{a(this,"GitParsingBranchLoader")}async getBranchInfo(e,r){try{let n=e.get(Ui),o=bi(r,".git","HEAD"),s=await n.readFileString(o);return this.parseHeadContent(s.trim())}catch(n){let o=typeof r=="string"?r:r.uri;bie.info(e,`Failed to parse git HEAD file in ${o}:`,n);return}}parseHeadContent(e){if(e.startsWith("ref: refs/heads/")){let r=e.substring(16);return AE.branch(r)}else return this.isCommitSha(e)?AE.detachedHead():AE.detachedHead()}isCommitSha(e){return/^[a-f0-9]{40}$/i.test(e)}};f();f();var Zoe=class{constructor(){this._tools=new Map}static{a(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var XAr=64;var x_=(r=>(r.enabled="enabled",r.disabled="disabled",r))(x_||{}),E_={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},jv={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},uRe=class{constructor(e){this.status="enabled";this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,XAr)}static{a(this,"LanguageModelTool")}isEnabled(e){return Promise.resolve(!0)}},v_=class extends uRe{static{a(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Ri=class{static{a(this,"LanguageModelTextPart")}constructor(e){this.value=e}},AP=class{static{a(this,"LanguageModelDataPart")}constructor(e){this.value=e}},yP=class{static{a(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var Bi=class{static{a(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},iM=class extends Bi{static{a(this,"ExtendedLanguageModelToolResult")}},omt=E.Object({content:E.Array(E.Union([E.Object({value:E.String()}),E.Object({value:E.Unknown()})])),status:E.Optional(E.Union([E.Literal("success"),E.Literal("error"),E.Literal("cancelled")]))}),xq=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(xq||{}),smt=E.Object({result:E.Enum(xq)});var r0=class extends v_{static{a(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:E_,type:"shared"})}};f();var ZAr=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),eyr=new Map;for(let[t,e]of ZAr)eyr.set(e,t);f();f();var CP=class t{constructor(e){this.id=e}static{a(this,"EmbeddingType")}static{this.text3small_512=new t("text-embedding-3-small-512")}toString(){return this.id}equals(e){return this.id===e.id}};var R7i={[CP.text3small_512.id]:{model:"text-embedding-3-small",family:"text3small",dimensions:512}};f();f();var dRe=new dt("GitHubCodeSearch"),ese=class{static{a(this,"GithubCodeSearchService")}async getRemoteIndexState(e,r,n,o){if(!n.owner||!n.name)return"not-yet-indexed";let s=n.owner+"/"+n.name,c=await hf(e,{apiUrl:r.apiUrl,accessToken:r.accessToken},`repos/${s}/copilot_internal/embeddings_index`,{method:"GET"});if(!c.ok)return dRe.error(e,`Failed to fetch indexing status. Response: ${c.status}.`),"not-yet-indexed";let l=await c.json();return dRe.debug(e,`${s} - semantic_code_search_ok: ${l.semantic_code_search_ok}`),l.semantic_code_search_ok?"ready":"not-yet-indexed"}async searchRepo(e,r,n,o,s,c,l){let u=ryr(e),d=await hf(e,{apiUrl:r.apiUrl,accessToken:r.accessToken},"embeddings/code/search",{headers:u,method:"POST",json:{scoping_query:`repo:${o.owner}/${o.name}`,prompt:iyr(s,7800),include_embeddings:!1,limit:c,embedding_model:n.id}});if(!d.ok)throw new Error(`Code search semantic search failed with status: ${d.status}`);let p=await d.json();if(!Array.isArray(p.results))throw new Error("Code search semantic search unexpected response json shape");return nyr(e,p,o)}};function ryr(t){let e=t.get(on);return{"X-Client-Application":`${C0(e.getEditorInfo())}`,"X-Client-Source":C0(e.getEditorPluginInfo()),"X-Client-Feature":"Agent <- codebaseTool"}}a(ryr,"editorVersionHeaders");async function nyr(t,e,r){let o=[],s=new CP(e.embedding_model),c=ka(r.baseFolder.uri);return await Promise.all(e.results.map(async l=>{let u;try{u=bi(c,l.location.path)}catch(m){dRe.error(t,`Error joining path for ${l.location.path}:`,m);return}let d=amt(l.chunk.text);(await t.get(gc).evaluate(u,d)).isBlocked||o.push({chunk:{file:u,text:amt(l.chunk.text),rawText:void 0,range:new ir(l.chunk.line_range.start,0,l.chunk.line_range.end,0),isFullFile:!1},distance:{embeddingType:s,value:l.distance}})})),{chunks:o,outOfSync:!1}}a(nyr,"parseGithubCodeSearchResponse");function iyr(t,e){if(t.length*4<=e)return t;let o=new TextEncoder().encode(t);if(o.length<=e)return t;let s=o.slice(0,e);return new TextDecoder().decode(s,{stream:!0})}a(iyr,"truncateToMaxUtf8Length");function amt(t){let e=oyr(t);return e.length>=3&&e[0].startsWith("File: ")&&e[1].startsWith("```")&&e.at(-1)?.startsWith("```")?e.slice(2,-1).join(`
`):t}a(amt,"stripChunkTextMetadata");function oyr(t){return t.split(/\r\n|\r|\n/)}a(oyr,"splitLines");var syr=128,tse=class{constructor(){this._githubCodeSearchService=new ese;this._indexedRepos=new Set}static{a(this,"CodeSearchChunkSearch")}async isAvailable(e){return(await this.getRepos(e)).length>0}async getRepos(e){let r=e.turn.workspaceFolders;if(!r?.length)return[];let n=e.ctx.get(em);return(await Promise.all(r.map(async c=>await n.getRepo({uri:c.uri})))).filter(c=>c!==void 0).filter(c=>c.isGitHub()&&c.owner&&c.name)}async searchWorkspace(e,r,n){let o=await this.getRepos(e);if(o.length===0)throw new Error("No GitHub repositories found");let s=await e.ctx.get(nr).getGitHubSession();if(!s)throw new Error("No GitHub session found");let c=!1,l=await Promise.all(o.map(async u=>{let d=u?.baseFolder.uri;if(d){if(n.isCancellationRequested)throw new Error("Canceled");if(this._indexedRepos.has(d)||await this._githubCodeSearchService.getRemoteIndexState(e.ctx,s,u,n)==="ready"&&this._indexedRepos.add(d),n.isCancellationRequested)throw new Error("Canceled");if(this._indexedRepos.has(d))return c=!0,await this._githubCodeSearchService.searchRepo(e.ctx,s,CP.text3small_512,u,r,syr,n)}}));if(!c)throw new Error("Index not ready");return JX(l).flatMap(u=>u.chunks)}};var cmt=require("path");var ayr=new dt("CodebaseTool"),rse=class extends r0{constructor(){super({name:"semantic_search",displayName:"Codebase",description:"Run a natural language search for relevant code or documentation comments from the user's current workspace. Returns relevant code snippets from the user's current workspace if it is large, or the full contents of the workspace if it is small.",displayDescription:"Find relevant file chunks, symbols, and other information in your codebase",inputSchema:E.Object({query:E.String({description:"The query to search the codebase for. Should contain all relevant context. Should ideally be text that might appear in the codebase, such as function names, variable names, or comments."})})});this._codeSearchChunkSearch=new tse}static{a(this,"CodebaseTool")}async invoke(r,n,o){if(!n.input.query)throw new Error("Invalid input");let s=await this._codeSearchChunkSearch.searchWorkspace(r,n.input.query,o);if(s.length){let c=s.filter(g=>g.distance&&g.distance.value!==void 0&&g.distance.value!==null);if(c.length===0)return new Bi([new Ri("No relevant code found")],"success");let d=c[0].distance.value*.65,p=c.filter(g=>g.distance.value>=d),m=p.map(g=>{let A=Pa(g.chunk.file),y=g.chunk.range.startLineNumber+1;return new Ri(`Here is a potentially relevant text excerpt in \`${A}\` starting at line ${y}:
${Jw(g.chunk.text)}`)}),h=new iM(m,"success");return h.toolResultMessage=m.length===0?`Searched ${this.getDisplaySearchTarget(n.input)} for "${n.input.query}", no results`:m.length===1?`Searched ${this.getDisplaySearchTarget(n.input)} for "${n.input.query}", 1 result`:`Searched ${this.getDisplaySearchTarget(n.input)} for "${n.input.query}", ${m.length} results`,h.toolResultDetails=p.map(g=>({uri:g.chunk.file,range:{start:{line:g.chunk.range.startLineNumber,character:g.chunk.range.startColumn},end:{line:g.chunk.range.endLineNumber,character:g.chunk.range.endColumn}}})),h}return new Bi([],"success")}prepareInvocation(r,n){return{progressMessage:`Searching ${this.getDisplaySearchTarget(r.input)} for "${r.input.query}"`}}getDisplaySearchTarget(r){let n;return r.scopedDirectories&&r.scopedDirectories.length===1?n=`${(0,cmt.basename)(r.scopedDirectories[0])}`:r.scopedDirectories&&r.scopedDirectories.length>1?n=`${r.scopedDirectories.length} directories`:n="codebase",n}async isEnabled(r){try{return VD(r.ctx)&&await this._codeSearchChunkSearch.isAvailable(r)}catch(n){return ayr.error(r.ctx,"Error checking codebase tool availability:",n),!1}}};f();f();function oM(t){return`[${Mi(t)}](${t})`}a(oM,"formatUriForFileWidget");function Gv(t){let e=cyr(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}a(Gv,"resolvePathInput");function cyr(t){if(t.startsWith("/")||lmt()&&uyr(t)||lmt()&&t.startsWith("\\\\"))return Bl(t)}a(cyr,"resolveFsUri");function lmt(){return process.platform==="win32"}a(lmt,"isWindows");function lyr(t){return t>=65&&t<=90||t>=97&&t<=122}a(lyr,"isWindowsDriveLetter");function uyr(t){return lyr(t.charCodeAt(0))&&t.charCodeAt(1)===58}a(uyr,"hasDriveLetter");function bq(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Ri?r.value:r instanceof yP?"":r instanceof AP?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}a(bq,"parseToolResultToString");function nse(t){let{content:e}=t;return{message:bq(e)}}a(nse,"formatToolErrorResult");function umt(t){let{content:e}=t,r={data:e.map(n=>n instanceof Ri?{type:"text",value:n.value}:n instanceof yP?{type:"text",value:"<unsupported>"}:n instanceof AP?{type:"data",value:{mimeType:n.value.mimeType,data:n.value.data}}:{type:"text",value:""})};return t instanceof iM&&(t.toolResultMessage!==void 0&&(r.toolResultMessage=t.toolResultMessage),t.toolResultDetails!==void 0&&(r.toolResultDetails=t.toolResultDetails)),r}a(umt,"formatToolSuccessResult");var ise=class extends r0{static{a(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:E.Object({filePath:E.String({description:"The absolute path of the file to edit."}),code:E.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:E.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let o=await this.mapCode(r.input,e,n),s=o.code,c=await this.invokeClientEditFileTool(e,r,s,n);return await this.getFinalEditFileResult(e,r,c,o.editSurvivalTrackingSession,o.telemetry)}catch(o){let s=o instanceof Error?o.message:"An unknown error occurred";return new Bi([new Ri(s)],"error")}}async mapCode(e,r,n){let{filePath:o}=e,s=Gv(o);if(!s)throw new Error(`Invalid file path: ${o}`);return await new D8(r.ctx).mapCode({code:e.code,resource:s,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source,chatRequestModel:r.turn.resolvedModelConfiguration?.modelFamily??r.turn.userRequestedModel},n,void 0,!0,r.copilotEditsSessionHeader)}async invokeClientEditFileTool(e,r,n,o){let s=e.ctx.get(El).getToolByNameAndProvider("insert_edit_into_file",jv);if(!s)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(El).invokeTool(e,s.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},o)}async getFinalEditFileResult(e,r,n,o,s){if(n.status!=="success")return n;let c=KC({uri:Gv(r.input.filePath),languageId:"UNKNOWN"});if(o){let p=await nc(e.ctx,e,void 0);o.startReporter(m=>{this.handleEditSurvivalTelemetry(e,m,p,c,s)})}let l=bq(n.content),u=[];u.push(`<file_after_edit path="${r.input.filePath}">`),u.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let d=new mm({code:l,languageId:c,noFilePath:!0});return u.push(...d.renderAsArray()),u.push("</file_after_edit>"),new Bi([new Ri(u.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,o,s){CZ(e.ctx,"agentPanel",{requestSource:s?.requestSource??"",chatRequestModel:s?.chatRequestModel??"",mapper:s?.mapper??"",headerRequestId:s?.headerRequestId??"",mode:(e.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:e.turn.getResolvedModelId()??"unknown",languageId:o},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let o=Gv(n.filePath);return{progressMessage:`Editing ${oM(o)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var dmt=new dt("findFilesTool"),ose=class t extends r0{static{a(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:E.Object({query:E.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:E.Optional(E.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let o;try{if(n.isCancellationRequested)return new Bi([new Ri("Cancelled")],"cancelled");o=await e.ctx.get(SE).resolvePath()}catch(A){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(A)}`)}let{query:s,maxResults:c=20}=r.input,l=e.turn.workspaceFolders;if(!l?.length)return new Bi([new Ri("Failed to invoke tool file_search since no workspace folders found")],"error");let u=e.ctx.get(by),d={},p=l.map(async A=>{if(n.isCancellationRequested)throw new Error("Canceled");try{dmt.debug(e.ctx,`Start searching for query ${s} in workspace folder: ${A.uri.toString()}`);let y=await u.execute(o,["--files","-g",s],n,{cwd:Pa(A.uri)},t.timeOutInSeconds*1e3);dmt.debug(e.ctx,`Finished searching for query ${s} in workspace folder: ${A.uri.toString()} with results: ${y}`),d[A.uri.toString()]=y.split(`
`).map(v=>v.trim()).filter(v=>v.length>0).map(v=>`${Pa(bi(A.uri,v))}`)}catch(y){let v=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${A.uri.toString()}: ${v}`)}});try{await Promise.all(p)}catch(A){let y=A instanceof Error?A.message:"An unknown error occurred";return new Bi([new Ri(y)],"error")}let m=[],h=c;for(;h>0;){let A=!1;for(let y in d)d[y].length>0&&h>0&&(m.push(d[y].shift()),h--,A=!0);if(!A)break}let g=m.length===0?`No files found matching query: ${s}`:m.length===1?`Found 1 file matching query: ${s}
${m[0]}`:`Found ${m.length} files matching query: ${s}
${m.join(`
`)}`;return new Bi([new Ri(g)],"success")}catch(o){let s=o instanceof Error?o.message:"An unknown error occurred";return new Bi([new Ri(s)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var fmt=new dt("findTextInFilesTool"),sse=class t extends r0{static{a(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:E.Object({query:E.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:E.Optional(E.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:E.Optional(E.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let o;try{if(n.isCancellationRequested)return new Bi([new Ri("Cancelled")],"cancelled");o=await e.ctx.get(SE).resolvePath()}catch(v){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(v)}`)}let{query:s,isRegexp:c=!1,includePattern:l}=r.input,u=20,d=e.turn.workspaceFolders;if(!d?.length)return new Bi([new Ri("Failed to invoke tool grep_search since no workspace folders found")],"error");let p=e.ctx.get(by),m={},h=d.map(async v=>{if(n.isCancellationRequested)throw new Error("Canceled");try{fmt.debug(e.ctx,`Start searching for query ${s} in workspace folder: ${v.uri.toString()}`);let b=[c?"--regexp":"--fixed-strings",s,...l?["-g",l]:[],"--no-heading","--line-number","--color","never",Pa(v.uri)],I=await p.execute(o,b,n,{cwd:Pa(v.uri)},t.timeOutInSeconds*1e3);fmt.debug(e.ctx,`Finished searching for query ${s} in workspace folder: ${v.uri.toString()} with results: ${I}`),m[v.uri.toString()]=I.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(b){let I=b instanceof Error?b.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${v.uri.toString()}: ${I}`)}});try{await Promise.all(h)}catch(v){let b=v instanceof Error?v.message:"An unknown error occurred";return new Bi([new Ri(b)],"error")}let g=[],A=u;for(;A>0;){let v=!1;for(let b in m)m[b].length>0&&A>0&&(g.push(m[b].shift()),A--,v=!0);if(!v)break}let y=g.length===0?`Searched text for ${s}, no results`:g.length===1?`Searched text for: ${s}, 1 result
${g[0]}`:`Searched text for: ${s}, ${g.length} results
${g.join(`
`)}`;return new Bi([new Ri(y)],"success")}catch(o){let s=o instanceof Error?o.message:"An unknown error occurred";return new Bi([new Ri(s)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var cse=Ne(require("path"));var ase=class extends r0{static{a(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:E.Object({path:E.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:o}=r.input,s=e.turn.workspaceFolders,c=e.turn.workspaceFolder,l=Gv(o);if(!this.isPathWithinWorkspace(l,s,c))return new Bi([new Ri("Error: Path is outside of workspace folders")],"error");let d=await e.ctx.get(Ui).readDirectory(l.toString());return d.length===0?new Bi([new Ri("Folder is empty")],"success"):new Bi([new Ri(d.map(([p,m])=>`${p}${m&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=Gv(e.input.path);return{progressMessage:`Reading directory ${oM(n)}`}}isPathWithinWorkspace(e,r,n){return!r&&!n?!0:r&&r.length>0?r.some(o=>this.isUriWithinDirectory(e,o.uri)):n?this.isUriWithinDirectory(e,n.uri):!1}isUriWithinDirectory(e,r){let n=ns(e),o=ns(r);if(!n||!o)return!1;let s=cse.relative(o,n);return s===""?!0:!s.startsWith("..")&&!cse.isAbsolute(s)}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var lse=class extends r0{static{a(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:E.Object({filePath:E.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:E.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:E.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:o,startLineNumberBaseZero:s,endLineNumberBaseZero:c}=r.input,l=Gv(o);if(!l)throw new Error(`Invalid file path: ${o}`);let d=await e.ctx.get(Nn).getOrReadTextDocument({uri:l});if(d.status==="valid"){let p=new mm({code:d.document.getText({start:{line:s,character:0},end:{line:c+1,character:0}}),languageId:d.document.detectedLanguageId,uri:l});return new Bi([new Ri(p.renderAsString(`
`))],"success")}else return new Bi([new Ri(`Failed to read file ${o} with result ${JSON.stringify(d)}`)],"error")}catch(o){let s=o instanceof Error?o.message:"An unknown error occurred";return new Bi([new Ri(s)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let o=Gv(n.filePath);return{progressMessage:`Reading file ${oM(o)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function pmt(t){return[new ase,new lse,new ise,new ose,new sse,...VD(t)?[new rse]:[]]}a(pmt,"getAllClsTools");var El=class{constructor(e){this.ctx=e;this._toolRegistry=new Zoe;for(let r of pmt(e))this._toolRegistry.registerTool(r)}static{a(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let o=this._toolRegistry.getTool(e);if(!o)throw new Error(`Tool with id '${e}' is undefined`);return o.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,o){if(o.isCancellationRequested)throw new va;let s=this._toolRegistry.getTool(r);if(!s)throw new Error(`Tool with id '${r}' is undefined`);return await s.invoke?.(e,n,o)??new Bi([],"success")}async invokeToolConfirmation(e,r,n,o){if(o.isCancellationRequested)throw new va;let s=this._toolRegistry.getTool(r);if(!s)throw new Error(`Tool with id '${r}' is undefined`);return await s.invokeConfirmation?.(e,n,o)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let u of this._toolRegistry.listTools())e.has(u.toolProvider.id)||e.set(u.toolProvider.id,[]),u.status==="enabled"&&e.get(u.toolProvider.id)?.push(u);let r=e.get(E_.id)?.find(u=>u.name==="insert_edit_into_file");r&&e.get(E_.id)?.splice(e.get(E_.id)?.indexOf(r)??0,1);let n=e.get(jv.id)?.find(u=>u.name==="insert_edit_into_file");n&&e.get(jv.id)?.splice(e.get(jv.id)?.indexOf(n)??0,1);let o=new Map;r&&n&&o.set(r.nameForModel,r);let s=e.get(jv.id)??[],c=e.get(E_.id)??[],l=Array.from(e.entries()).filter(([u])=>u!==E_.id&&u!==jv.id).flatMap(([,u])=>u);return s.forEach(u=>{o.has(u.nameForModel)||o.set(u.nameForModel,u)}),c.forEach(u=>{o.has(u.nameForModel)||o.set(u.nameForModel,u)}),l.forEach(u=>{o.has(u.nameForModel)||o.set(u.nameForModel,u)}),o}updateToolStatus(e,r){for(let n of this._toolRegistry.listTools())n.toolProvider.isFirstPartyTool&&n.name===e&&(n.status=r)}};f();f();f();var Vv=new Map;Vv.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});Vv.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});Vv.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});Vv.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});Vv.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});Vv.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var dyr=new dt("sdk");function use(t,e){Vv.has(t.get(on).getEditorPluginInfo().name)||dyr.warn(t,...e)}a(use,"deprecationWarning");var E1t=Ne(bB()),Tm=Ne(NA());f();f();f();var Qt={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var gd=class extends Error{static{a(this,"SchemaValidationError")}constructor(e){super(mmt(e))}};function et(t,e){let r=na.Compile(t);return async(n,o,s)=>{if(!r.Check(s)){let c=mmt(r.Errors(s));return[null,{code:Qt.InvalidParams,message:c}]}return e(n,o,s)}}a(et,"addMethodHandlerValidation");function mmt(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}a(mmt,"createErrorMessage");f();var fRe=Ne(mi());f();var zv=class{constructor(e){this.ctx=e}static{a(this,"AbstractCommand")}};var dse="github.copilot.finishDeviceFlow",pRe=class extends zv{constructor(){super(...arguments);this.name=dse;this.arguments=E.Tuple([])}static{a(this,"FinishDeviceFlowCommand")}async handle(r,n){let o=this.ctx.get(Bf),s=o.pendingSignIn;if(!s)throw new fRe.ResponseError(Qt.InvalidRequest,"No pending sign in");try{await this.ctx.get(Ju).open(s.verificationUri)}catch(c){k0.warn(this.ctx,"Failed to open",s.verificationUri),k0.exception(this.ctx,c,dse)}try{return await s.status}catch(c){throw new fRe.ResponseError(Qt.DeviceFlowFailed,String(c))}finally{o.pendingSignIn=void 0}}},hmt=[pRe];f();f();var zs=class extends vr{static{a(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var Iq="github.copilot.didAcceptCompletionItem",mRe=class extends zv{constructor(){super(...arguments);this.name=Iq;this.arguments=E.Tuple([E.String({minLength:1})])}static{a(this,"DidAcceptCommand")}handle(r,[n]){let s=this.ctx.get(zs).get(n);return s?(aN(this.ctx,s),!0):!1}},gmt=[mRe];f();var fyr="github.copilot.didAcceptNextEditSuggestionItem",hRe=class extends zv{constructor(){super(...arguments);this.name=fyr;this.arguments=E.Tuple([E.String({minLength:1})])}static{a(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(xy).handleAcceptance(n),!0}},Amt=[hRe];f();var ARe="github.copilot.didAcceptPanelCompletionItem",gRe=class extends zv{constructor(){super(...arguments);this.name=ARe;this.arguments=E.Tuple([E.String({minLength:1})])}static{a(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[o]=n,c=this.ctx.get(zs).get(o);return c?(tQ(this.ctx,c.triggerCategory,c.displayText,c.offset,c.uri,c.telemetry,{compType:"full",acceptedLength:c.displayText.length,acceptedLines:uw(c.displayText)},c.copilotAnnotations),!0):!1}},ymt=[gRe];var pyr=[...hmt,...gmt,...Amt,...ymt];function Cmt(t,e){let r=new Map;for(let n of pyr){let o=new n(t),s=na.Compile(o.arguments);r.set(o.name,{typeCheck:s,command:o})}return e.onExecuteCommand((n,o)=>{let s=r.get(n.command);if(!s)throw new Error(`Unknown command: ${n.command}`);let c=PE(n.arguments??[]);if(c.length<s.command.arguments.minItems&&(c.length=s.command.arguments.minItems),s.typeCheck.Check(n.arguments))return s.command.handle(o,c);throw new gd(s.typeCheck.Errors(n.arguments))}),[...r.keys()]}a(Cmt,"registerCommands");f();var ug=class extends ER{constructor(r){super(new n3,new Map);this.envSettings=new Map;this.env={...r};let n;this.#e=new Promise(s=>{n=s}),this.markReady=n,["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(s=>{for(let c of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let l=`${c}${myr(s.replace(/^Debug/,""))}`;l in this.env&&this.envSettings.set($t[s],this.env[l])}})}static{a(this,"AgentConfigProvider")}#e;async requireReady(){await this.#e}getOptionalOverride(r){return super.getOptionalOverride(r)??this.envSettings.get(r)}};function myr(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}a(myr,"camelCaseToSnakeCaseAllCaps");var hyr="unknown-editor",vmt="unknown-editor-plugin",fse=class extends on{static{a(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:hyr,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:vmt,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function xmt(t){return t.getEditorPluginInfo().name!==vmt}a(xmt,"hasValidInfo");f();var DE=Ne(NA());var gyr=new Map([[4,DE.MessageType.Log],[3,DE.MessageType.Info],[2,DE.MessageType.Warning],[1,DE.MessageType.Error]]),pse=class extends rl{static{a(this,"NotificationLogger")}logIt(e,r,n,...o){if(r==4&&!tte(e)&&n!=="console")return;let s={type:gyr.get(r),message:$et(n,...o)},c=e.get(Ir).connection;try{c.sendNotification(new DE.NotificationType("window/logMessage"),s)}catch(l){if(l instanceof DE.ConnectionError)return;throw l}}};f();var Emt=Ne(qc());var mse=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{a(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(Ir).connection.sendNotification(new Emt.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};function bmt(t){t.get(Qd).setCustomReporters(new mse(t),new mse(t,!0))}a(bmt,"setupRedirectingTelemetryReporters");f();f();var hse=class{static{a(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Pt(e,"installed.reinstall"):Pt(e,"installed.new")}handleUpgrade(e){Pt(e,"installed.upgrade")}handleUninstall(e){Pt(e,"uninstalled")}};var Tq=Ne(bB());var sM=class extends hse{static{a(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(on).getEditorPluginInfo();return await e.get(hi).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(hi).listSettings()).length>0}async markInstalled(e){let r=e.get(on).getEditorPluginInfo();await e.get(hi).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(on).getEditorPluginInfo(),n=await e.get(hi).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,Tq.gt)((0,Tq.coerce)(r.version),(0,Tq.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(on).getEditorPluginInfo();await e.get(hi).delete("versions",r.name),(await e.get(hi).listKeys("versions")).length===0&&await e.get(hi).deleteSetting("versions")}};f();var yRe=Ne(require("path")),gse=Ne(qc());var Ayr={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},Kv=class t{constructor(e){this.ctx=e;this.#e=new is;this.onDidChangeWatchedFiles=this.#e.event}static{a(this,"LspFileWatcher")}#e;static{this.requestType=new gse.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(Ir).connection}init(){this.ctx.get(ss).getCapabilities().watchedFiles&&this.connection.onNotification(gse.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(ss).getCapabilities().watchedFiles)return Ayr;let o=(await this.connection.sendRequest(t.requestType,e)).files,s=[],c=[],l=[];for(let u of o){typeof u=="object"&&(u=u.uri);let d=yRe.extname(u).toLowerCase();if(!bR.includes(d)){l.push({uri:u});continue}let p=await this.getValidDocument(u);if(p===void 0){c.push({uri:u});continue}s.push(p)}return{watchedFiles:s,contentRestrictedFiles:c,unknownFileExtensions:l}}async didChangeWatchedFilesHandler(e){let r=[],n=[],o=[];for(let s of e.changes){let c=s.uri,l={uri:c,isRestricted:!1,isUnknownFileExtension:!1},u=yRe.extname(s.uri).toLowerCase();if(!bR.includes(u))l.isUnknownFileExtension=!0;else{let d=await this.getValidDocument(c);d===void 0?l.isRestricted=!0:l.document=d}switch(s.type){case 1:n.push(l);break;case 2:r.push(l);break;case 3:o.push(l);break}}this.#e.fire({workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:o})}async getValidDocument(e){let n=await this.ctx.get(Nn).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};f();f();var yyr=E.Object({providerName:E.String()});async function Cyr(t,e,r){try{let{providerName:n}=r,o=Ww(n);if(o!==0)return[null,{code:Qt.InvalidParams,message:`deleteApiKey is only supported for providers with GlobalApiKey auth type. Provider ${n} has auth type: ${o}`}];let s=new ha(t.get(hi));return await s.removeAllModelConfigs(n),await s.deleteAPIKey(n,o),[{success:!0,message:`API key and all model configurations deleted successfully for provider ${n}`},null]}catch(n){return[null,{code:Qt.InternalError,message:`Failed to delete API key: ${n instanceof Error?n.message:String(n)}`}]}}a(Cyr,"handleBYOKDeleteApiKeyChecked");var Imt=et(yyr,Cyr);f();var vyr=E.Object({providerName:E.String(),modelId:E.String()});async function xyr(t,e,r){try{let n=new ha(t.get(hi)),{providerName:o,modelId:s}=r,c=Ww(o);return await n.removeModelConfig(o,s),c===1&&await n.deleteAPIKey(o,c,s),[{success:!0,message:`Model ${s} deleted successfully for provider ${o}`},null]}catch(n){return[null,{code:Qt.InternalError,message:`Failed to delete model: ${n instanceof Error?n.message:String(n)}`}]}}a(xyr,"handleBYOKDeleteModelChecked");var Tmt=et(vyr,xyr);f();var Eyr=E.Object({providerName:E.Optional(E.String()),modelId:E.Optional(E.String())});async function byr(t,e,r){try{let n=new ha(t.get(hi)),{providerName:o,modelId:s}=r;if(!o){let l=t.get(hi),u=await l.listKeys("byok"),d=[];for(let p of u)if(p.endsWith("-api-key")){let m=await l.read("byok",p);if(m){let g=p.replace("-api-key","").split("-");if(g.length===1)d.push({providerName:g[0],apiKey:m});else if(g.length>=2){let A=g[0],y=g.slice(1).join("-");d.push({providerName:A,modelId:y,apiKey:m})}}}return[{apiKeys:d},null]}return[{apiKeys:[{apiKey:await n.getAPIKey(o,s)||void 0,providerName:o,modelId:s}]},null]}catch(n){return[null,{code:Qt.InternalError,message:`Failed to get API key: ${n instanceof Error?n.message:String(n)}`}]}}a(byr,"handleBYOKListApiKeysChecked");var wmt=et(Eyr,byr);f();f();f();f();f();f();function Sn(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}a(Sn,"__classPrivateFieldSet");function kt(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}a(kt,"__classPrivateFieldGet");f();var CRe=a(function(){let{crypto:t}=globalThis;if(t?.randomUUID)return CRe=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))},"uuid4");f();f();f();function BE(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}a(BE,"isAbortError");var wq=a(t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)},"castToError");var Tn=class extends Error{static{a(this,"AnthropicError")}},ku=class t extends Tn{static{a(this,"APIError")}constructor(e,r,n,o){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=o,this.requestID=o?.get("request-id"),this.error=r}static makeMessage(e,r,n){let o=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,r,n,o){if(!e||!o)return new I_({message:n,cause:wq(r)});let s=r;return e===400?new cM(e,s,n,o):e===401?new lM(e,s,n,o):e===403?new uM(e,s,n,o):e===404?new dM(e,s,n,o):e===409?new fM(e,s,n,o):e===422?new pM(e,s,n,o):e===429?new mM(e,s,n,o):e>=500?new hM(e,s,n,o):new t(e,s,n,o)}},Ad=class extends ku{static{a(this,"APIUserAbortError")}constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},I_=class extends ku{static{a(this,"APIConnectionError")}constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},aM=class extends I_{static{a(this,"APIConnectionTimeoutError")}constructor({message:e}={}){super({message:e??"Request timed out."})}},cM=class extends ku{static{a(this,"BadRequestError")}},lM=class extends ku{static{a(this,"AuthenticationError")}},uM=class extends ku{static{a(this,"PermissionDeniedError")}},dM=class extends ku{static{a(this,"NotFoundError")}},fM=class extends ku{static{a(this,"ConflictError")}},pM=class extends ku{static{a(this,"UnprocessableEntityError")}},mM=class extends ku{static{a(this,"RateLimitError")}},hM=class extends ku{static{a(this,"InternalServerError")}};var Tyr=/^[a-z][a-z0-9+.-]*:/i,_mt=a(t=>Tyr.test(t),"isAbsoluteURL"),vRe=a(t=>(vRe=Array.isArray,vRe(t)),"isArray"),xRe=vRe;function ERe(t){return typeof t!="object"?{}:t??{}}a(ERe,"maybeObj");function Smt(t){if(!t)return!0;for(let e in t)return!1;return!0}a(Smt,"isEmptyObj");function Rmt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}a(Rmt,"hasOwn");var kmt=a((t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Tn(`${t} must be an integer`);if(e<0)throw new Tn(`${t} must be a positive integer`);return e},"validatePositiveInteger");var Ase=a(t=>{try{return JSON.parse(t)}catch{return}},"safeJSON");f();var Pmt=a(t=>new Promise(e=>setTimeout(e,t)),"sleep");f();f();var T_="0.56.0";var Mmt=a(()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u","isRunningInBrowser");function wyr(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}a(wyr,"getDetectedPlatform");var _yr=a(()=>{let t=wyr();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":T_,"X-Stainless-OS":Bmt(Deno.build.os),"X-Stainless-Arch":Dmt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":T_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":T_,"X-Stainless-OS":Bmt(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Dmt(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let e=Syr();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":T_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":T_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},"getPlatformProperties");function Syr(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let o=n[1]||0,s=n[2]||0,c=n[3]||0;return{browser:e,version:`${o}.${s}.${c}`}}}return null}a(Syr,"getBrowserInfo");var Dmt=a(t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown","normalizeArch"),Bmt=a(t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),"normalizePlatform"),Nmt,Lmt=a(()=>Nmt??(Nmt=_yr()),"getPlatformHeaders");f();function Fmt(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}a(Fmt,"getDefaultFetch");function bRe(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}a(bRe,"makeReadableStream");function yse(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bRe({start(){},async pull(r){let{done:n,value:o}=await e.next();n?r.close():r.enqueue(o)},async cancel(){await e.return?.()}})}a(yse,"ReadableStreamFrom");function _q(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}a(_q,"ReadableStreamToAsyncIterable");async function Omt(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}let e=t.getReader(),r=e.cancel();e.releaseLock(),await r}a(Omt,"CancelReadableStream");f();var Qmt=a(({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),"FallbackEncoder");f();f();f();f();f();function Hmt(t){let e=0;for(let o of t)e+=o.length;let r=new Uint8Array(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}a(Hmt,"concatBytes");var Umt;function Sq(t){let e;return(Umt??(e=new globalThis.TextEncoder,Umt=e.encode.bind(e)))(t)}a(Sq,"encodeUTF8");var qmt;function IRe(t){let e;return(qmt??(e=new globalThis.TextDecoder,qmt=e.decode.bind(e)))(t)}a(IRe,"decodeUTF8");var Cm,vm,NE=class{static{a(this,"LineDecoder")}constructor(){Cm.set(this,void 0),vm.set(this,void 0),Sn(this,Cm,new Uint8Array,"f"),Sn(this,vm,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Sq(e):e;Sn(this,Cm,Hmt([kt(this,Cm,"f"),r]),"f");let n=[],o;for(;(o=Pyr(kt(this,Cm,"f"),kt(this,vm,"f")))!=null;){if(o.carriage&&kt(this,vm,"f")==null){Sn(this,vm,o.index,"f");continue}if(kt(this,vm,"f")!=null&&(o.index!==kt(this,vm,"f")+1||o.carriage)){n.push(IRe(kt(this,Cm,"f").subarray(0,kt(this,vm,"f")-1))),Sn(this,Cm,kt(this,Cm,"f").subarray(kt(this,vm,"f")),"f"),Sn(this,vm,null,"f");continue}let s=kt(this,vm,"f")!==null?o.preceding-1:o.preceding,c=IRe(kt(this,Cm,"f").subarray(0,s));n.push(c),Sn(this,Cm,kt(this,Cm,"f").subarray(o.index),"f"),Sn(this,vm,null,"f")}return n}flush(){return kt(this,Cm,"f").length?this.decode(`
`):[]}};Cm=new WeakMap,vm=new WeakMap;NE.NEWLINE_CHARS=new Set([`
`,"\r"]);NE.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Pyr(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}a(Pyr,"findNewlineIndex");function Wmt(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}a(Wmt,"findDoubleNewlineIndex");f();var vse={off:0,error:200,warn:300,info:400,debug:500},TRe=a((t,e,r)=>{if(t){if(Rmt(vse,t))return t;Pu(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(vse))}`)}},"parseLogLevel");function Rq(){}a(Rq,"noop");function Cse(t,e,r){return!e||vse[t]>vse[r]?Rq:e[t].bind(e)}a(Cse,"makeLogFn");var Dyr={error:Rq,warn:Rq,info:Rq,debug:Rq},$mt=new WeakMap;function Pu(t){let e=t.logger,r=t.logLevel??"off";if(!e)return Dyr;let n=$mt.get(e);if(n&&n[0]===r)return n[1];let o={error:Cse("error",e,r),warn:Cse("warn",e,r),info:Cse("info",e,r),debug:Cse("debug",e,r)};return $mt.set(e,[r,o]),o}a(Pu,"loggerFor");var ME=a(t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t),"formatRequestDetails");var kq,Yv=class t{static{a(this,"Stream")}constructor(e,r,n){this.iterator=e,kq.set(this,void 0),this.controller=r,Sn(this,kq,n,"f")}static fromSSEResponse(e,r,n){let o=!1,s=n?Pu(n):console;async function*c(){if(o)throw new Tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let l=!1;try{for await(let u of Byr(e,r)){if(u.event==="completion")try{yield JSON.parse(u.data)}catch(d){throw s.error("Could not parse message into JSON:",u.data),s.error("From chunk:",u.raw),d}if(u.event==="message_start"||u.event==="message_delta"||u.event==="message_stop"||u.event==="content_block_start"||u.event==="content_block_delta"||u.event==="content_block_stop")try{yield JSON.parse(u.data)}catch(d){throw s.error("Could not parse message into JSON:",u.data),s.error("From chunk:",u.raw),d}if(u.event!=="ping"&&u.event==="error")throw new ku(void 0,Ase(u.data)??u.data,void 0,e.headers)}l=!0}catch(u){if(BE(u))return;throw u}finally{l||r.abort()}}return a(c,"iterator"),new t(c,r,n)}static fromReadableStream(e,r,n){let o=!1;async function*s(){let l=new NE,u=_q(e);for await(let d of u)for(let p of l.decode(d))yield p;for(let d of l.flush())yield d}a(s,"iterLines");async function*c(){if(o)throw new Tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let l=!1;try{for await(let u of s())l||u&&(yield JSON.parse(u));l=!0}catch(u){if(BE(u))return;throw u}finally{l||r.abort()}}return a(c,"iterator"),new t(c,r,n)}[(kq=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),o=a(s=>({next:a(()=>{if(s.length===0){let c=n.next();e.push(c),r.push(c)}return s.shift()},"next")}),"teeIterator");return[new t(()=>o(e),this.controller,kt(this,kq,"f")),new t(()=>o(r),this.controller,kt(this,kq,"f"))]}toReadableStream(){let e=this,r;return bRe({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{let{value:o,done:s}=await r.next();if(s)return n.close();let c=Sq(JSON.stringify(o)+`
`);n.enqueue(c)}catch(o){n.error(o)}},async cancel(){await r.return?.()}})}};async function*Byr(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Tn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Tn("Attempted to iterate over a response with no body");let r=new wRe,n=new NE,o=_q(t.body);for await(let s of Nyr(o))for(let c of n.decode(s)){let l=r.decode(c);l&&(yield l)}for(let s of n.flush()){let c=r.decode(s);c&&(yield c)}}a(Byr,"_iterSSEMessages");async function*Nyr(t){let e=new Uint8Array;for await(let r of t){if(r==null)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?Sq(r):r,o=new Uint8Array(e.length+n.length);o.set(e),o.set(n,e.length),e=o;let s;for(;(s=Wmt(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}a(Nyr,"iterSSEChunks");var wRe=class{static{a(this,"SSEDecoder")}constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,o]=Myr(e,":");return o.startsWith(" ")&&(o=o.substring(1)),r==="event"?this.event=o:r==="data"&&this.data.push(o),null}};function Myr(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}a(Myr,"partition");async function xse(t,e){let{response:r,requestLogID:n,retryOfRequestLogID:o,startTime:s}=e,c=await(async()=>{if(e.options.stream)return Pu(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):Yv.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;let u=r.headers.get("content-type")?.split(";")[0]?.trim();if(u?.includes("application/json")||u?.endsWith("+json")){let m=await r.json();return _Re(m,r)}return await r.text()})();return Pu(t).debug(`[${n}] response parsed`,ME({retryOfRequestLogID:o,url:r.url,status:r.status,body:c,durationMs:Date.now()-s})),c}a(xse,"defaultParseResponse");function _Re(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}a(_Re,"addRequestID");f();var Pq,vP=class t extends Promise{static{a(this,"APIPromise")}constructor(e,r,n=xse){super(o=>{o(null)}),this.responsePromise=r,this.parseResponse=n,Pq.set(this,void 0),Sn(this,Pq,e,"f")}_thenUnwrap(e){return new t(kt(this,Pq,"f"),this.responsePromise,async(r,n)=>_Re(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(kt(this,Pq,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};Pq=new WeakMap;var Ese,SRe=class{static{a(this,"AbstractPage")}constructor(e,r,n,o){Ese.set(this,void 0),Sn(this,Ese,e,"f"),this.options=o,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new Tn("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await kt(this,Ese,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ese=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},Dq=class extends vP{static{a(this,"PagePromise")}constructor(e,r,n){super(e,r,async(o,s)=>new n(o,s.response,await xse(o,s),s.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},dg=class extends SRe{static{a(this,"Page")}constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let r=this.first_id;return r?{...this.options,query:{...ERe(this.options.query),before_id:r}}:null}let e=this.last_id;return e?{...this.options,query:{...ERe(this.options.query),after_id:e}}:null}};f();f();f();var kRe=a(()=>{if(typeof File>"u"){let{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}},"checkFileSupport");function xP(t,e,r){return kRe(),new File(t,e??"unknown_file",r)}a(xP,"makeFile");function Bq(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}a(Bq,"getName");var PRe=a(t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function","isAsyncIterable");var Gmt=a(async(t,e)=>({...t,body:await Oyr(t.body,e)}),"multipartFormRequestOptions"),jmt=new WeakMap;function Fyr(t){let e=typeof t=="function"?t:t.fetch,r=jmt.get(e);if(r)return r;let n=(async()=>{try{let o="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new o(s).text()}catch{return!0}})();return jmt.set(e,n),n}a(Fyr,"supportsFormData");var Oyr=a(async(t,e)=>{if(!await Fyr(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,o])=>RRe(r,n,o))),r},"createForm"),Qyr=a(t=>t instanceof Blob&&"name"in t,"isNamedBlob");var RRe=a(async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response){let n={},o=r.headers.get("Content-Type");o&&(n={type:o}),t.append(e,xP([await r.blob()],Bq(r),n))}else if(PRe(r))t.append(e,xP([await new Response(yse(r)).blob()],Bq(r)));else if(Qyr(r))t.append(e,xP([r],Bq(r),{type:r.type}));else if(Array.isArray(r))await Promise.all(r.map(n=>RRe(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,o])=>RRe(t,`${e}[${n}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},"addFormValue");var Vmt=a(t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function","isBlobLike"),Uyr=a(t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Vmt(t),"isFileLike"),qyr=a(t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function","isResponseLike");async function bse(t,e,r){if(kRe(),t=await t,e||(e=Bq(t)),Uyr(t))return t instanceof File&&e==null&&r==null?t:xP([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...r});if(qyr(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),xP(await DRe(o),e,r)}let n=await DRe(t);if(!r?.type){let o=n.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(r={...r,type:o})}return xP(n,e,r)}a(bse,"toFile");async function DRe(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Vmt(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(PRe(t))for await(let r of t)e.push(...await DRe(r));else{let r=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${Hyr(t)}`)}return e}a(DRe,"getBytes");function Hyr(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}a(Hyr,"propsForError");f();f();f();f();var bl=class{static{a(this,"APIResource")}constructor(e){this._client=e}};f();f();var zmt=Symbol.for("brand.privateNullableHeaders");function*$yr(t){if(!t)return;if(zmt in t){let{values:n,nulls:o}=t;yield*n.entries();for(let s of o)yield[s,null];return}let e=!1,r;t instanceof Headers?r=t.entries():xRe(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){let o=n[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let s=xRe(n[1])?n[1]:[n[1]],c=!1;for(let l of s)l!==void 0&&(e&&!c&&(c=!0,yield[o,null]),yield[o,l])}}a($yr,"iterateHeaders");var zo=a(t=>{let e=new Headers,r=new Set;for(let n of t){let o=new Set;for(let[s,c]of $yr(n)){let l=s.toLowerCase();o.has(l)||(e.delete(s),o.add(l)),c===null?(e.delete(s),r.add(l)):(e.append(s,c),r.delete(l))}}return{[zmt]:!0,values:e,nulls:r}},"buildHeaders");f();function Ymt(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}a(Ymt,"encodeURIPath");var Kmt=Object.freeze(Object.create(null)),jyr=a((t=Ymt)=>a(function(r,...n){if(r.length===1)return r[0];let o=!1,s=[],c=r.reduce((p,m,h)=>{/[?#]/.test(m)&&(o=!0);let g=n[h],A=(o?encodeURIComponent:t)(""+g);return h!==n.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??Kmt)??Kmt)?.toString)&&(A=g+"",s.push({start:p.length+m.length,length:A.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),p+m+(h===n.length?"":A)},""),l=c.split(/[?#]/,1)[0],u=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,d;for(;(d=u.exec(l))!==null;)s.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(s.sort((p,m)=>p.start-m.start),s.length>0){let p=0,m=s.reduce((h,g)=>{let A=" ".repeat(g.start-p),y="^".repeat(g.length);return p=g.start+g.length,h+A+y},"");throw new Tn(`Path parameters result in path with invalid segments:
${s.map(h=>h.error).join(`
`)}
${c}
${m}`)}return c},"path"),"createPathTagFunction"),nf=jyr(Ymt);var gM=class extends bl{static{a(this,"Files")}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/files",dg,{query:o,...r,headers:zo([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])})}delete(e,r={},n){let{betas:o}=r??{};return this._client.delete(nf`/v1/files/${e}`,{...n,headers:zo([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString()},n?.headers])})}download(e,r={},n){let{betas:o}=r??{};return this._client.get(nf`/v1/files/${e}/content`,{...n,headers:zo([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}retrieveMetadata(e,r={},n){let{betas:o}=r??{};return this._client.get(nf`/v1/files/${e}`,{...n,headers:zo([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString()},n?.headers])})}upload(e,r){let{betas:n,...o}=e;return this._client.post("/v1/files",Gmt({body:o,...r,headers:zo([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])},this._client))}};f();var AM=class extends bl{static{a(this,"Models")}retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(nf`/v1/models/${e}?beta=true`,{...n,headers:zo([{...o?.toString()!=null?{"anthropic-beta":o?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/models?beta=true",dg,{query:o,...r,headers:zo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};f();f();f();var yM=class t{static{a(this,"JSONLDecoder")}constructor(e,r){this.iterator=e,this.controller=r}async*decoder(){let e=new NE;for await(let r of this.iterator)for(let n of e.decode(r))yield JSON.parse(n);for(let r of e.flush())yield JSON.parse(r)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,r){if(!e.body)throw r.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Tn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Tn("Attempted to iterate over a response with no body");return new t(_q(e.body),r)}};f();var CM=class extends bl{static{a(this,"Batches")}create(e,r){let{betas:n,...o}=e;return this._client.post("/v1/messages/batches?beta=true",{body:o,...r,headers:zo([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(nf`/v1/messages/batches/${e}?beta=true`,{...n,headers:zo([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",dg,{query:o,...r,headers:zo([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}delete(e,r={},n){let{betas:o}=r??{};return this._client.delete(nf`/v1/messages/batches/${e}?beta=true`,{...n,headers:zo([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},n?.headers])})}cancel(e,r={},n){let{betas:o}=r??{};return this._client.post(nf`/v1/messages/batches/${e}/cancel?beta=true`,{...n,headers:zo([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},n?.headers])})}async results(e,r={},n){let o=await this.retrieve(e);if(!o.results_url)throw new Tn(`No batch \`results_url\`; Has it finished processing? ${o.processing_status} - ${o.id}`);let{betas:s}=r??{};return this._client.get(o.results_url,{...n,headers:zo([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((c,l)=>yM.fromResponse(l.response,l.controller))}};f();f();f();var Kyr=a(t=>{let e=0,r=[];for(;e<t.length;){let n=t[e];if(n==="\\"){e++;continue}if(n==="{"){r.push({type:"brace",value:"{"}),e++;continue}if(n==="}"){r.push({type:"brace",value:"}"}),e++;continue}if(n==="["){r.push({type:"paren",value:"["}),e++;continue}if(n==="]"){r.push({type:"paren",value:"]"}),e++;continue}if(n===":"){r.push({type:"separator",value:":"}),e++;continue}if(n===","){r.push({type:"delimiter",value:","}),e++;continue}if(n==='"'){let l="",u=!1;for(n=t[++e];n!=='"';){if(e===t.length){u=!0;break}if(n==="\\"){if(e++,e===t.length){u=!0;break}l+=n+t[e],n=t[++e]}else l+=n,n=t[++e]}n=t[++e],u||r.push({type:"string",value:l});continue}if(n&&/\s/.test(n)){e++;continue}let s=/[0-9]/;if(n&&s.test(n)||n==="-"||n==="."){let l="";for(n==="-"&&(l+=n,n=t[++e]);n&&s.test(n)||n===".";)l+=n,n=t[++e];r.push({type:"number",value:l});continue}let c=/[a-z]/i;if(n&&c.test(n)){let l="";for(;n&&c.test(n)&&e!==t.length;)l+=n,n=t[++e];if(l=="true"||l=="false"||l==="null")r.push({type:"name",value:l});else{e++;continue}continue}e++}return r},"tokenize"),vM=a(t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),vM(t);break;case"number":let r=e.value[e.value.length-1];if(r==="."||r==="-")return t=t.slice(0,t.length-1),vM(t);case"string":let n=t[t.length-2];if(n?.type==="delimiter")return t=t.slice(0,t.length-1),vM(t);if(n?.type==="brace"&&n.value==="{")return t=t.slice(0,t.length-1),vM(t);break;case"delimiter":return t=t.slice(0,t.length-1),vM(t);break}return t},"strip"),Yyr=a(t=>{let e=[];return t.map(r=>{r.type==="brace"&&(r.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),r.type==="paren"&&(r.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(r=>{r==="}"?t.push({type:"brace",value:"}"}):r==="]"&&t.push({type:"paren",value:"]"})}),t},"unstrip"),Jyr=a(t=>{let e="";return t.map(r=>{switch(r.type){case"string":e+='"'+r.value+'"';break;default:e+=r.value;break}}),e},"generate"),Ise=a(t=>JSON.parse(Jyr(Yyr(vM(Kyr(t))))),"partialParse");var fg,w_,Nq,Tse,Mq,Lq,wse,Fq,LE,Oq,_se,Sse,xM,Rse,kse,BRe,Jmt,Pse,NRe,MRe,LRe,Xmt,Zmt="__json_buf";function eht(t){return t.type==="tool_use"||t.type==="server_tool_use"||t.type==="mcp_tool_use"}a(eht,"tracksToolInput");var Dse=class t{static{a(this,"BetaMessageStream")}constructor(){fg.add(this),this.messages=[],this.receivedMessages=[],w_.set(this,void 0),this.controller=new AbortController,Nq.set(this,void 0),Tse.set(this,()=>{}),Mq.set(this,()=>{}),Lq.set(this,void 0),wse.set(this,()=>{}),Fq.set(this,()=>{}),LE.set(this,{}),Oq.set(this,!1),_se.set(this,!1),Sse.set(this,!1),xM.set(this,!1),Rse.set(this,void 0),kse.set(this,void 0),Pse.set(this,e=>{if(Sn(this,_se,!0,"f"),BE(e)&&(e=new Ad),e instanceof Ad)return Sn(this,Sse,!0,"f"),this._emit("abort",e);if(e instanceof Tn)return this._emit("error",e);if(e instanceof Error){let r=new Tn(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new Tn(String(e)))}),Sn(this,Nq,new Promise((e,r)=>{Sn(this,Tse,e,"f"),Sn(this,Mq,r,"f")}),"f"),Sn(this,Lq,new Promise((e,r)=>{Sn(this,wse,e,"f"),Sn(this,Fq,r,"f")}),"f"),kt(this,Nq,"f").catch(()=>{}),kt(this,Lq,"f").catch(()=>{})}get response(){return kt(this,Rse,"f")}get request_id(){return kt(this,kse,"f")}async withResponse(){let e=await kt(this,Nq,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let o=new t;for(let s of r.messages)o._addMessageParam(s);return o._run(()=>o._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},kt(this,Pse,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let o=n?.signal,s;o&&(o.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),o.addEventListener("abort",s));try{kt(this,fg,"m",NRe).call(this);let{response:c,data:l}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(c);for await(let u of l)kt(this,fg,"m",MRe).call(this,u);if(l.controller.signal?.aborted)throw new Ad;kt(this,fg,"m",LRe).call(this)}finally{o&&s&&o.removeEventListener("abort",s)}}_connected(e){this.ended||(Sn(this,Rse,e,"f"),Sn(this,kse,e?.headers.get("request-id"),"f"),kt(this,Tse,"f").call(this,e),this._emit("connect"))}get ended(){return kt(this,Oq,"f")}get errored(){return kt(this,_se,"f")}get aborted(){return kt(this,Sse,"f")}abort(){this.controller.abort()}on(e,r){return(kt(this,LE,"f")[e]||(kt(this,LE,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=kt(this,LE,"f")[e];if(!n)return this;let o=n.findIndex(s=>s.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(kt(this,LE,"f")[e]||(kt(this,LE,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Sn(this,xM,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Sn(this,xM,!0,"f"),await kt(this,Lq,"f")}get currentMessage(){return kt(this,w_,"f")}async finalMessage(){return await this.done(),kt(this,fg,"m",BRe).call(this)}async finalText(){return await this.done(),kt(this,fg,"m",Jmt).call(this)}_emit(e,...r){if(kt(this,Oq,"f"))return;e==="end"&&(Sn(this,Oq,!0,"f"),kt(this,wse,"f").call(this));let n=kt(this,LE,"f")[e];if(n&&(kt(this,LE,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!kt(this,xM,"f")&&!n?.length&&Promise.reject(o),kt(this,Mq,"f").call(this,o),kt(this,Fq,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!kt(this,xM,"f")&&!n?.length&&Promise.reject(o),kt(this,Mq,"f").call(this,o),kt(this,Fq,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",kt(this,fg,"m",BRe).call(this))}async _fromReadableStream(e,r){let n=r?.signal,o;n&&(n.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),n.addEventListener("abort",o));try{kt(this,fg,"m",NRe).call(this),this._connected(null);let s=Yv.fromReadableStream(e,this.controller);for await(let c of s)kt(this,fg,"m",MRe).call(this,c);if(s.controller.signal?.aborted)throw new Ad;kt(this,fg,"m",LRe).call(this)}finally{n&&o&&n.removeEventListener("abort",o)}}[(w_=new WeakMap,Nq=new WeakMap,Tse=new WeakMap,Mq=new WeakMap,Lq=new WeakMap,wse=new WeakMap,Fq=new WeakMap,LE=new WeakMap,Oq=new WeakMap,_se=new WeakMap,Sse=new WeakMap,xM=new WeakMap,Rse=new WeakMap,kse=new WeakMap,Pse=new WeakMap,fg=new WeakSet,BRe=a(function(){if(this.receivedMessages.length===0)throw new Tn("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},"_BetaMessageStream_getFinalMessage"),Jmt=a(function(){if(this.receivedMessages.length===0)throw new Tn("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new Tn("stream ended without producing a content block with type=text");return r.join(" ")},"_BetaMessageStream_getFinalText"),NRe=a(function(){this.ended||Sn(this,w_,void 0,"f")},"_BetaMessageStream_beginRequest"),MRe=a(function(r){if(this.ended)return;let n=kt(this,fg,"m",Xmt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let o=n.content.at(-1);switch(r.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",r.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",r.delta.citation,o.citations??[]);break}case"input_json_delta":{eht(o)&&o.input&&this._emit("inputJson",r.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",r.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Sn(this,w_,n,"f");break}case"content_block_start":case"message_delta":break}},"_BetaMessageStream_addStreamEvent"),LRe=a(function(){if(this.ended)throw new Tn("stream has ended, this shouldn't happen");let r=kt(this,w_,"f");if(!r)throw new Tn("request ended without sending any chunks");return Sn(this,w_,void 0,"f"),r},"_BetaMessageStream_endRequest"),Xmt=a(function(r){let n=kt(this,w_,"f");if(r.type==="message_start"){if(n)throw new Tn(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new Tn(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.container=r.delta.container,n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{let o=n.content.at(r.index);switch(r.delta.type){case"text_delta":{o?.type==="text"&&(n.content[r.index]={...o,text:(o.text||"")+r.delta.text});break}case"citations_delta":{o?.type==="text"&&(n.content[r.index]={...o,citations:[...o.citations??[],r.delta.citation]});break}case"input_json_delta":{if(o&&eht(o)){let s=o[Zmt]||"";s+=r.delta.partial_json;let c={...o};if(Object.defineProperty(c,Zmt,{value:s,enumerable:!1,writable:!0}),s)try{c.input=Ise(s)}catch(l){let u=new Tn(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${l}. JSON: ${s}`);kt(this,Pse,"f").call(this,u)}n.content[r.index]=c}break}case"thinking_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,thinking:o.thinking+r.delta.thinking});break}case"signature_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},"_BetaMessageStream_accumulateMessage"),Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",o=>{let s=r.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),{next:a(async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,c)=>r.push({resolve:s,reject:c})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),"next"),return:a(async()=>(this.abort(),{value:void 0,done:!0}),"return")}}toReadableStream(){return new Yv(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};f();var Bse={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192};var tht={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"},EP=class extends bl{static{a(this,"Messages")}constructor(){super(...arguments),this.batches=new CM(this._client)}create(e,r){let{betas:n,...o}=e;o.model in tht&&console.warn(`The model '${o.model}' is deprecated and will reach end-of-life on ${tht[o.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!o.stream&&s==null){let c=Bse[o.model]??void 0;s=this._client.calculateNonstreamingTimeout(o.max_tokens,c)}return this._client.post("/v1/messages?beta=true",{body:o,timeout:s??6e5,...r,headers:zo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}stream(e,r){return Dse.createMessage(this,e,r)}countTokens(e,r){let{betas:n,...o}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:o,...r,headers:zo([{"anthropic-beta":[...n??[],"token-counting-2024-11-01"].toString()},r?.headers])})}};EP.Batches=CM;var Jv=class extends bl{static{a(this,"Beta")}constructor(){super(...arguments),this.models=new AM(this._client),this.messages=new EP(this._client),this.files=new gM(this._client)}};Jv.Models=AM;Jv.Messages=EP;Jv.Files=gM;f();var bP=class extends bl{static{a(this,"Completions")}create(e,r){let{betas:n,...o}=e;return this._client.post("/v1/complete",{body:o,timeout:this._client._options.timeout??6e5,...r,headers:zo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}};f();f();var pg,__,Qq,Nse,Uq,qq,Mse,Hq,FE,Wq,Lse,Fse,EM,Ose,Qse,FRe,rht,ORe,QRe,URe,qRe,nht,iht="__json_buf";function oht(t){return t.type==="tool_use"||t.type==="server_tool_use"}a(oht,"tracksToolInput");var Use=class t{static{a(this,"MessageStream")}constructor(){pg.add(this),this.messages=[],this.receivedMessages=[],__.set(this,void 0),this.controller=new AbortController,Qq.set(this,void 0),Nse.set(this,()=>{}),Uq.set(this,()=>{}),qq.set(this,void 0),Mse.set(this,()=>{}),Hq.set(this,()=>{}),FE.set(this,{}),Wq.set(this,!1),Lse.set(this,!1),Fse.set(this,!1),EM.set(this,!1),Ose.set(this,void 0),Qse.set(this,void 0),ORe.set(this,e=>{if(Sn(this,Lse,!0,"f"),BE(e)&&(e=new Ad),e instanceof Ad)return Sn(this,Fse,!0,"f"),this._emit("abort",e);if(e instanceof Tn)return this._emit("error",e);if(e instanceof Error){let r=new Tn(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new Tn(String(e)))}),Sn(this,Qq,new Promise((e,r)=>{Sn(this,Nse,e,"f"),Sn(this,Uq,r,"f")}),"f"),Sn(this,qq,new Promise((e,r)=>{Sn(this,Mse,e,"f"),Sn(this,Hq,r,"f")}),"f"),kt(this,Qq,"f").catch(()=>{}),kt(this,qq,"f").catch(()=>{})}get response(){return kt(this,Ose,"f")}get request_id(){return kt(this,Qse,"f")}async withResponse(){let e=await kt(this,Qq,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let o=new t;for(let s of r.messages)o._addMessageParam(s);return o._run(()=>o._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},kt(this,ORe,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let o=n?.signal,s;o&&(o.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),o.addEventListener("abort",s));try{kt(this,pg,"m",QRe).call(this);let{response:c,data:l}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(c);for await(let u of l)kt(this,pg,"m",URe).call(this,u);if(l.controller.signal?.aborted)throw new Ad;kt(this,pg,"m",qRe).call(this)}finally{o&&s&&o.removeEventListener("abort",s)}}_connected(e){this.ended||(Sn(this,Ose,e,"f"),Sn(this,Qse,e?.headers.get("request-id"),"f"),kt(this,Nse,"f").call(this,e),this._emit("connect"))}get ended(){return kt(this,Wq,"f")}get errored(){return kt(this,Lse,"f")}get aborted(){return kt(this,Fse,"f")}abort(){this.controller.abort()}on(e,r){return(kt(this,FE,"f")[e]||(kt(this,FE,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=kt(this,FE,"f")[e];if(!n)return this;let o=n.findIndex(s=>s.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(kt(this,FE,"f")[e]||(kt(this,FE,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Sn(this,EM,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Sn(this,EM,!0,"f"),await kt(this,qq,"f")}get currentMessage(){return kt(this,__,"f")}async finalMessage(){return await this.done(),kt(this,pg,"m",FRe).call(this)}async finalText(){return await this.done(),kt(this,pg,"m",rht).call(this)}_emit(e,...r){if(kt(this,Wq,"f"))return;e==="end"&&(Sn(this,Wq,!0,"f"),kt(this,Mse,"f").call(this));let n=kt(this,FE,"f")[e];if(n&&(kt(this,FE,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!kt(this,EM,"f")&&!n?.length&&Promise.reject(o),kt(this,Uq,"f").call(this,o),kt(this,Hq,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!kt(this,EM,"f")&&!n?.length&&Promise.reject(o),kt(this,Uq,"f").call(this,o),kt(this,Hq,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",kt(this,pg,"m",FRe).call(this))}async _fromReadableStream(e,r){let n=r?.signal,o;n&&(n.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),n.addEventListener("abort",o));try{kt(this,pg,"m",QRe).call(this),this._connected(null);let s=Yv.fromReadableStream(e,this.controller);for await(let c of s)kt(this,pg,"m",URe).call(this,c);if(s.controller.signal?.aborted)throw new Ad;kt(this,pg,"m",qRe).call(this)}finally{n&&o&&n.removeEventListener("abort",o)}}[(__=new WeakMap,Qq=new WeakMap,Nse=new WeakMap,Uq=new WeakMap,qq=new WeakMap,Mse=new WeakMap,Hq=new WeakMap,FE=new WeakMap,Wq=new WeakMap,Lse=new WeakMap,Fse=new WeakMap,EM=new WeakMap,Ose=new WeakMap,Qse=new WeakMap,ORe=new WeakMap,pg=new WeakSet,FRe=a(function(){if(this.receivedMessages.length===0)throw new Tn("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},"_MessageStream_getFinalMessage"),rht=a(function(){if(this.receivedMessages.length===0)throw new Tn("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new Tn("stream ended without producing a content block with type=text");return r.join(" ")},"_MessageStream_getFinalText"),QRe=a(function(){this.ended||Sn(this,__,void 0,"f")},"_MessageStream_beginRequest"),URe=a(function(r){if(this.ended)return;let n=kt(this,pg,"m",nht).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let o=n.content.at(-1);switch(r.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",r.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",r.delta.citation,o.citations??[]);break}case"input_json_delta":{oht(o)&&o.input&&this._emit("inputJson",r.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",r.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Sn(this,__,n,"f");break}case"content_block_start":case"message_delta":break}},"_MessageStream_addStreamEvent"),qRe=a(function(){if(this.ended)throw new Tn("stream has ended, this shouldn't happen");let r=kt(this,__,"f");if(!r)throw new Tn("request ended without sending any chunks");return Sn(this,__,void 0,"f"),r},"_MessageStream_endRequest"),nht=a(function(r){let n=kt(this,__,"f");if(r.type==="message_start"){if(n)throw new Tn(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new Tn(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push({...r.content_block}),n;case"content_block_delta":{let o=n.content.at(r.index);switch(r.delta.type){case"text_delta":{o?.type==="text"&&(n.content[r.index]={...o,text:(o.text||"")+r.delta.text});break}case"citations_delta":{o?.type==="text"&&(n.content[r.index]={...o,citations:[...o.citations??[],r.delta.citation]});break}case"input_json_delta":{if(o&&oht(o)){let s=o[iht]||"";s+=r.delta.partial_json;let c={...o};Object.defineProperty(c,iht,{value:s,enumerable:!1,writable:!0}),s&&(c.input=Ise(s)),n.content[r.index]=c}break}case"thinking_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,thinking:o.thinking+r.delta.thinking});break}case"signature_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},"_MessageStream_accumulateMessage"),Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",o=>{let s=r.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),{next:a(async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,c)=>r.push({resolve:s,reject:c})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),"next"),return:a(async()=>(this.abort(),{value:void 0,done:!0}),"return")}}toReadableStream(){return new Yv(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};f();var bM=class extends bl{static{a(this,"Batches")}create(e,r){return this._client.post("/v1/messages/batches",{body:e,...r})}retrieve(e,r){return this._client.get(nf`/v1/messages/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/v1/messages/batches",dg,{query:e,...r})}delete(e,r){return this._client.delete(nf`/v1/messages/batches/${e}`,r)}cancel(e,r){return this._client.post(nf`/v1/messages/batches/${e}/cancel`,r)}async results(e,r){let n=await this.retrieve(e);if(!n.results_url)throw new Tn(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);return this._client.get(n.results_url,{...r,headers:zo([{Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((o,s)=>yM.fromResponse(s.response,s.controller))}};var S_=class extends bl{static{a(this,"Messages")}constructor(){super(...arguments),this.batches=new bM(this._client)}create(e,r){e.model in sht&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${sht[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!e.stream&&n==null){let o=Bse[e.model]??void 0;n=this._client.calculateNonstreamingTimeout(e.max_tokens,o)}return this._client.post("/v1/messages",{body:e,timeout:n??6e5,...r,stream:e.stream??!1})}stream(e,r){return Use.createMessage(this,e,r)}countTokens(e,r){return this._client.post("/v1/messages/count_tokens",{body:e,...r})}},sht={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};S_.Batches=bM;f();var IP=class extends bl{static{a(this,"Models")}retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(nf`/v1/models/${e}`,{...n,headers:zo([{...o?.toString()!=null?{"anthropic-beta":o?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/models",dg,{query:o,...r,headers:zo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};f();var $q=a(t=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()},"readEnv");var HRe,WRe,qse,aht,ac=class{static{a(this,"BaseAnthropic")}constructor({baseURL:e=$q("ANTHROPIC_BASE_URL"),apiKey:r=$q("ANTHROPIC_API_KEY")??null,authToken:n=$q("ANTHROPIC_AUTH_TOKEN")??null,...o}={}){HRe.add(this),qse.set(this,void 0);let s={apiKey:r,authToken:n,...o,baseURL:e||"https://api.anthropic.com"};if(!s.dangerouslyAllowBrowser&&Mmt())throw new Tn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=s.baseURL,this.timeout=s.timeout??WRe.DEFAULT_TIMEOUT,this.logger=s.logger??console;let c="warn";this.logLevel=c,this.logLevel=TRe(s.logLevel,"ClientOptions.logLevel",this)??TRe($q("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??c,this.fetchOptions=s.fetchOptions,this.maxRetries=s.maxRetries??2,this.fetch=s.fetch??Fmt(),Sn(this,qse,Qmt,"f"),this._options=s,this.apiKey=r,this.authToken=n}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(this.apiKey&&e.get("x-api-key"))&&!r.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!r.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){return zo([this.apiKeyAuth(e),this.bearerAuth(e)])}apiKeyAuth(e){if(this.apiKey!=null)return zo([{"X-Api-Key":this.apiKey}])}bearerAuth(e){if(this.authToken!=null)return zo([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new Tn(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${T_}`}defaultIdempotencyKey(){return`stainless-node-retry-${CRe()}`}makeStatusError(e,r,n,o){return ku.generate(e,r,n,o)}buildURL(e,r,n){let o=!kt(this,HRe,"m",aht).call(this)&&n||this.baseURL,s=_mt(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return Smt(c)||(r={...c,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(s.search=this.stringifyQuery(r)),s.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new Tn("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(o=>({method:e,path:r,...o})))}request(e,r=null){return new vP(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){let o=await e,s=o.maxRetries??this.maxRetries;r==null&&(r=s),await this.prepareOptions(o);let{req:c,url:l,timeout:u}=this.buildRequest(o,{retryCount:s-r});await this.prepareRequest(c,{url:l,options:o});let d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=n===void 0?"":`, retryOf: ${n}`,m=Date.now();if(Pu(this).debug(`[${d}] sending request`,ME({retryOfRequestLogID:n,method:o.method,url:l,options:o,headers:c.headers})),o.signal?.aborted)throw new Ad;let h=new AbortController,g=await this.fetchWithTimeout(l,c,u,h).catch(wq),A=Date.now();if(g instanceof Error){let b=`retrying, ${r} attempts remaining`;if(o.signal?.aborted)throw new Ad;let I=BE(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(r)return Pu(this).info(`[${d}] connection ${I?"timed out":"failed"} - ${b}`),Pu(this).debug(`[${d}] connection ${I?"timed out":"failed"} (${b})`,ME({retryOfRequestLogID:n,url:l,durationMs:A-m,message:g.message})),this.retryRequest(o,r,n??d);throw Pu(this).info(`[${d}] connection ${I?"timed out":"failed"} - error; no more retries left`),Pu(this).debug(`[${d}] connection ${I?"timed out":"failed"} (error; no more retries left)`,ME({retryOfRequestLogID:n,url:l,durationMs:A-m,message:g.message})),I?new aM:new I_({cause:g})}let y=[...g.headers.entries()].filter(([b])=>b==="request-id").map(([b,I])=>", "+b+": "+JSON.stringify(I)).join(""),v=`[${d}${p}${y}] ${c.method} ${l} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${A-m}ms`;if(!g.ok){let b=this.shouldRetry(g);if(r&&b){let O=`retrying, ${r} attempts remaining`;return await Omt(g.body),Pu(this).info(`${v} - ${O}`),Pu(this).debug(`[${d}] response error (${O})`,ME({retryOfRequestLogID:n,url:g.url,status:g.status,headers:g.headers,durationMs:A-m})),this.retryRequest(o,r,n??d,g.headers)}let I=b?"error; no more retries left":"error; not retryable";Pu(this).info(`${v} - ${I}`);let _=await g.text().catch(O=>wq(O).message),k=Ase(_),N=k?void 0:_;throw Pu(this).debug(`[${d}] response error (${I})`,ME({retryOfRequestLogID:n,url:g.url,status:g.status,headers:g.headers,message:N,durationMs:Date.now()-m})),this.makeStatusError(g.status,k,N,g.headers)}return Pu(this).info(v),Pu(this).debug(`[${d}] response start`,ME({retryOfRequestLogID:n,url:g.url,status:g.status,headers:g.headers,durationMs:A-m})),{response:g,options:o,controller:h,requestLogID:d,retryOfRequestLogID:n,startTime:m}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){let n=this.makeRequest(r,null,void 0);return new Dq(this,n,e)}async fetchWithTimeout(e,r,n,o){let{signal:s,method:c,...l}=r||{};s&&s.addEventListener("abort",()=>o.abort());let u=setTimeout(()=>o.abort(),n),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,p={signal:o.signal,...d?{duplex:"half"}:{},method:"GET",...l};c&&(p.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(u)}}shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,o){let s,c=o?.get("retry-after-ms");if(c){let u=parseFloat(c);Number.isNaN(u)||(s=u)}let l=o?.get("retry-after");if(l&&!s){let u=parseFloat(l);Number.isNaN(u)?s=Date.parse(l)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){let u=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,u)}return await Pmt(s),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){let s=r-e,c=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return c*l*1e3}calculateNonstreamingTimeout(e,r){if(36e5*e/128e3>6e5||r!=null&&e>r)throw new Tn("Streaming is strongly recommended for operations that may token longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}buildRequest(e,{retryCount:r=0}={}){let n={...e},{method:o,path:s,query:c,defaultBaseURL:l}=n,u=this.buildURL(s,c,l);"timeout"in n&&kmt("timeout",n.timeout),n.timeout=n.timeout??this.timeout;let{bodyHeaders:d,body:p}=this.buildBody({options:n}),m=this.buildHeaders({options:e,method:o,bodyHeaders:d,retryCount:r});return{req:{method:o,headers:m,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"},...p&&{body:p},...this.fetchOptions??{},...n.fetchOptions??{}},url:u,timeout:n.timeout}}buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:o}){let s={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let c=zo([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Lmt(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=zo([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:yse(e)}:kt(this,qse,"f").call(this,{body:e,headers:n})}};WRe=ac,qse=new WeakMap,HRe=new WeakSet,aht=a(function(){return this.baseURL!=="https://api.anthropic.com"},"_BaseAnthropic_baseURLOverridden");ac.Anthropic=WRe;ac.HUMAN_PROMPT=`

Human:`;ac.AI_PROMPT=`

Assistant:`;ac.DEFAULT_TIMEOUT=6e5;ac.AnthropicError=Tn;ac.APIError=ku;ac.APIConnectionError=I_;ac.APIConnectionTimeoutError=aM;ac.APIUserAbortError=Ad;ac.NotFoundError=dM;ac.ConflictError=fM;ac.RateLimitError=mM;ac.BadRequestError=cM;ac.AuthenticationError=lM;ac.InternalServerError=hM;ac.PermissionDeniedError=uM;ac.UnprocessableEntityError=pM;ac.toFile=bse;var Iy=class extends ac{static{a(this,"Anthropic")}constructor(){super(...arguments),this.completions=new bP(this),this.messages=new S_(this),this.models=new IP(this),this.beta=new Jv(this)}};Iy.Completions=bP;Iy.Messages=S_;Iy.Models=IP;Iy.Beta=Jv;var{HUMAN_PROMPT:tCr,AI_PROMPT:rCr}=Iy;var Hse=class extends rg{static{a(this,"AnthropicProvider")}constructor(e){super(Mo.Anthropic,e)}async getAllModels(){await this.ensureKnownModelsCache();let e=await new ha(this.ctx.get(hi)).getAPIKey(this.providerName);if(!e)throw new Error(`API key not found for provider: ${this.providerName}`);let r=new Iy({apiKey:e,fetch:nCr(this.ctx.get(Lr))});try{let n=await r.models.list(),o=[];for(let s of n.data){let c=this._knownModels?.[s.id];c&&o.push({providerName:this.providerName,modelId:s.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:c})}return o}catch(n){throw EU.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,n),n}}};function nCr(t){return async(e,r)=>{let n=iCr(e,r),o=sCr(r),s=await t.fetch(n,o);return cCr(s)}}a(nCr,"createAnthropicFetchAdapter");function iCr(t,e){return t instanceof Request?(oCr(t,e),t.url):t instanceof URL?t.toString():t}a(iCr,"convertInputToString");function oCr(t,e){e&&(e.headers??=t.headers,e.method??=t.method,!e.body&&!t.bodyUsed&&(e.body=t.body))}a(oCr,"mergeRequestInit");function sCr(t){let e;return t?.headers&&(e=aCr(t.headers)),{method:t?.method||"GET",headers:e,body:t?.body,signal:t?.signal||void 0}}a(sCr,"convertToFetchOptions");function aCr(t){let e={};if(t instanceof Headers)for(let[r,n]of t.entries())e[r]=n;else if(Array.isArray(t))for(let[r,n]of t)e[r]=n;else return t;return e}a(aCr,"convertHeaders");async function cCr(t){let e=t.body(),r=null;if(e)r=lCr(e);else{let n=await t.text();r=dCr(n)}return new globalThis.Response(r,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)})}a(cCr,"convertToWebResponse");function lCr(t){return new ReadableStream({start(e){let r=uCr(t,e);return()=>r()},cancel(){"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}})}a(lCr,"createReadableStreamFromNodeStream");function uCr(t,e){let r=a(c=>{e.enqueue(new Uint8Array(c))},"onData"),n=a(()=>{e.close(),s()},"onEnd"),o=a(c=>{e.error(c),s()},"onError"),s=a(()=>{t.off("data",r),t.off("end",n),t.off("error",o)},"cleanup");return t.on("data",r),t.on("end",n),t.on("error",o),s}a(uCr,"setupStreamHandlers");function dCr(t){return new ReadableStream({start(e){e.enqueue(new TextEncoder().encode(t)),e.close()}})}a(dCr,"createReadableStreamFromText");f();var Wse=class extends rg{static{a(this,"GeminiProvider")}constructor(e){super(Mo.Gemini,e)}};f();var $se=class extends rg{static{a(this,"GroqProvider")}constructor(e){super(Mo.Groq,e)}};f();var jse=class extends rg{static{a(this,"OpenAIProvider")}constructor(e){super(Mo.OpenAI,e)}};f();var cht=16e3,Gse=class extends rg{static{a(this,"OpenRouterProvider")}constructor(e){super(Mo.OpenRouter,e)}async getAllModels(){try{let e=this.getFetchModelUrl(),r={"Content-Type":"application/json"},n=await new ha(this.ctx.get(hi)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let o=await this.ctx.get(Lr).fetch(e,{method:"GET",headers:r});if(!o.ok)throw new Error(`Failed to fetch models: ${o.status} ${o.statusText}`);let s=await o.json();if(s.error)throw new Error(`API Error: ${JSON.stringify(s.error)}`);let c=[];for(let l of s.data)c.push({providerName:this.providerName,modelId:l.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:{name:l.name,maxInputTokens:Math.max(0,l.top_provider.context_length-cht),maxOutputTokens:cht,toolCalling:l.supported_parameters?.includes("tools")??!1,vision:l.architecture?.input_modalities?.includes("image")??!1}});return c}catch(e){throw EU.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,e),e}}getFetchModelUrl(){return`${this.getBaseUrl()}/models?supported_parameters=tools`}};var TP=class{static{a(this,"BYOKProviderFactory")}constructor(e){this.providers=new Map([[Mo.OpenAI,new jse(e)],[Mo.Gemini,new Wse(e)],[Mo.Groq,new $se(e)],[Mo.OpenRouter,new Gse(e)],[Mo.Anthropic,new Hse(e)]])}getBYOKProvider(e){return this.providers.get(e)}};var fCr=E.Object({providerName:E.Optional(E.String()),enableFetchUrl:E.Optional(E.Boolean())});async function pCr(t,e,r){try{let{providerName:n,enableFetchUrl:o}=r,s=new ha(t.get(hi)),c=[];if(n)if(o){if(!Une(n))return[null,{code:Qt.InvalidRequest,message:`enableFetchUrl is not supported for the ${n} provider`}];if(!await s.getAPIKey(n))return[null,{code:Qt.InvalidRequest,message:`API key is required to fetch models from ${n}`}];let u=t.get(TP).getBYOKProvider(n);if(u){let d=await u.getAllModels(),p=new Map;d.forEach(g=>{let A=`${g.providerName}_${g.modelId}`;p.set(A,g)});let m=await s.getStoredModelConfigs(n),h=[];Object.entries(m).forEach(([g,A])=>{h.push({providerName:n,modelId:g,deploymentUrl:A.deploymentUrl,isRegistered:A.isRegistered,isCustomModel:A.isCustomModel,modelCapabilities:A.modelCapabilities})}),h.forEach(g=>{let A=`${g.providerName}_${g.modelId}`;p.set(A,g)}),c.push(...p.values())}}else{let l=await s.getStoredModelConfigs(n);Object.entries(l).forEach(([u,d])=>{c.push({providerName:n,modelId:u,deploymentUrl:d.deploymentUrl,isRegistered:d.isRegistered,isCustomModel:d.isCustomModel,modelCapabilities:d.modelCapabilities})})}else{let l=Object.values(Mo);for(let u of l){let d=await s.getStoredModelConfigs(u);Object.entries(d).forEach(([p,m])=>{c.push({providerName:u,modelId:p,deploymentUrl:m.deploymentUrl,isRegistered:m.isRegistered,isCustomModel:m.isCustomModel,modelCapabilities:m.modelCapabilities})})}}return[{models:c},null]}catch(n){return[null,{code:Qt.InternalError,message:`Failed to get models: ${n instanceof Error?n.message:String(n)}`}]}}a(pCr,"handleBYOKListModelsChecked");var lht=et(fCr,pCr);f();var mCr=E.Object({providerName:E.String(),apiKey:E.String(),modelId:E.Optional(E.String())});async function hCr(t,e,r){try{let n=new ha(t.get(hi)),{providerName:o,apiKey:s,modelId:c}=r,l=Ww(o);if(l===1&&!c)return[null,{code:Qt.InvalidRequest,message:"modelId is required for PerModelDeployment auth type"}];await n.storeAPIKey(o,s,l,c);let u=`API key saved successfully for provider ${o}`;return[{success:!0,message:c?`${u} and model ${c}`:u},null]}catch(n){return[null,{code:Qt.InternalError,message:`Failed to save API key: ${n instanceof Error?n.message:String(n)}`}]}}a(hCr,"handleBYOKSaveApiKeyChecked");var uht=et(mCr,hCr);f();var gCr=E.Object({providerName:E.String(),modelId:E.String(),isRegistered:E.Boolean(),isCustomModel:E.Boolean(),deploymentUrl:E.Optional(E.String()),apiKey:E.Optional(E.String()),modelCapabilities:E.Optional(E.Object({name:E.String(),maxInputTokens:E.Optional(E.Number()),maxOutputTokens:E.Optional(E.Number()),toolCalling:E.Boolean(),vision:E.Boolean()}))});async function ACr(t,e,r){try{let{providerName:n,modelId:o,isRegistered:s,isCustomModel:c,deploymentUrl:l,apiKey:u,modelCapabilities:d}=r,p=new ha(t.get(hi)),m=Ww(n);if(m===1&&!l)return[null,{code:Qt.InvalidRequest,message:`deploymentUrl is required for the ${n} provider`}];if(l||d){let h={deploymentUrl:l,isRegistered:s,isCustomModel:c,modelCapabilities:d};await p.saveModelConfig(n,o,h,u,m)}else u!==void 0&&await p.storeAPIKey(n,u,m,o);return[{success:!0,message:`Model ${o} saved successfully for provider ${n}`},null]}catch(n){return[null,{code:Qt.InternalError,message:`Failed to save model: ${n instanceof Error?n.message:String(n)}`}]}}a(ACr,"handleBYOKSaveModelChecked");var dht=et(gCr,ACr);f();var yCr=E.Object({uri:E.String({minLength:1})});async function CCr(t,e,r){let n=await t.get(Nn).getOrReadTextDocument(r);return[{status:ua(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}a(CCr,"handleCheckFileStatusChecked");var fht=et(yCr,CCr);f();var vCr=E.Object({});function pht(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}a(pht,"calculatePercentRemaining");async function xCr(t,e,r){let n=await t.get(Fi).getSession();if(n){let o=await uhe(t,n);if(o.ok){let s=await o.json();return s.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:pht(s.limited_user_quotas?.chat,s.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:pht(s.limited_user_quotas?.completions,s.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:s.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:s.quota_snapshots?.chat?.percent_remaining??100,unlimited:s.quota_snapshots?.chat?.unlimited??!1,overagePermitted:s.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:s.quota_snapshots?.completions?.percent_remaining??100,unlimited:s.quota_snapshots?.completions?.unlimited??!1,overagePermitted:s.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:s.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:s.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:s.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:s.quota_reset_date??"",copilotPlan:s.copilot_plan},null]}return[null,{code:Qt.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:Qt.InternalError,message:"Not signed in"}]}a(xCr,"handleCheckQuotaChecked");var mht=et(vCr,xCr);f();var ECr=E.Object({options:E.Optional(E.Object({localChecksOnly:E.Optional(E.Boolean()),forceRefresh:E.Optional(E.Boolean())}))});async function bCr(t,e,r){return[await t.get(Fi).checkAndUpdateStatus(r.options),null]}a(bCr,"handleCheckStatusChecked");var hht=et(ECr,bCr);f();f();f();f();f();var wP={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var Ls=class{constructor(e){this.ctx=e;this.progressEntries=new vr(250)}static{a(this,"ConversationProgress")}async begin(e,r,n){let o={status:"open",handler:n};this.progressEntries.set(e.id,o),await o.handler.begin(this.ctx,e,r)}async report(e,r,n){let o=this.getProgressEntry(e);o.status==="open"&&await o.handler.report(this.ctx,e,r,n)}async end(e,r,n){let o=this.getProgressEntry(e);o.status==="open"&&(this.progressEntries.set(e.id,{...o,status:"done",updatedAt:Date.now()}),await o.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let o=this.getProgressEntry(e);o.status==="open"&&(this.progressEntries.set(e.id,{...o,status:"cancelled",updatedAt:Date.now()}),await o.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&kr.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};f();f();f();var Il=class{static{a(this,"ConversationInspector")}};f();f();f();function zse(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}a(zse,"toChatModeEnum");var R_=class{constructor(e,r){this.request=e;this.telemetryId=wr();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this._metadata=new Map;this.id=r??this.telemetryId}static{a(this,"Turn")}getResolvedModelId(){return this.resolvedModelConfiguration?.modelId}getChatModeWithDefault(){return this.chatMode??"Ask"}extractContextFilesUri(){let e=[...(this.request.references??[]).filter(r=>r.type==="file").map(r=>r.uri).filter(Boolean),...this.request.activeEditor?.uri?[this.request.activeEditor.uri]:[]];return Array.from(new Set(e))}getMetadata(e){return this._metadata.get(e)?.at(-1)}getAllMetadata(e){return this._metadata.get(e)}setMetadata(e){let r=e.constructor,n=this._metadata.get(r)??[];n.push(e),this._metadata.set(r,n)}hasMetadata(e){let r=this._metadata.get(e);return r!==void 0&&r.length>0}},Vse=class t{constructor(e=[],r="panel",n="en",o){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=wr();this._timestamp=Date.now();this.id=o??this.telemetryId}static{a(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};f();var jl=class{constructor(){this.skills=[]}static{a(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},$Re=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{a(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},jRe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{a(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},Du=class{constructor(e,r,n,o,s,c="explicit",l=[],u=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=o;this._processor=s;this.type=c;this._examples=l;this._isAvailable=u}static{a(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new $Re(this._resolver(e),this.id,this.stepTitle)}processor(e){return new jRe(this._processor(e),this.id)}};f();f();f();var ght={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},Aht="Alright, This response contains a code citation.";f();var yht=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var vht=Ne(xm());var Xv=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{a(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let s=this.doc.getText(r),c=s.match(/^\n*/)?.[0].length??0,l=s.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+c),end:this.expandLineToEnd(r.end.line-l)}}let o=new Ht([(0,vht.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(o),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),o;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?o=n:o={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let s={start:r.start,end:o.start.line>0?this.expandLineToEnd(o.start.line-1):r.start},c={start:o.start,end:n.start.line>0&&n.start.line>o.start.line?this.expandLineToEnd(n.start.line-1):o.start},l={start:n.end.line<this.doc.lineCount-1&&n.end.line<o.end.line?this.getLineStart(n.end.line+1):o.end,end:o.end},u={start:o.end.line<this.doc.lineCount-1?this.getLineStart(o.end.line+1):r.end,end:r.end},d=[[s,.6],[c,.8],[n,1],[l,.4],[u,.2]],p=new Ht(d.filter(([m,h])=>!IM(m)||h===1).map(([m,h])=>{let g;return e.addLineNumbers?g=this.addLineNumbers(m):g=this.doc.getText(m),[h==1?g:V0(g),h]}));return this.wrapInTicks(p)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||IM(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Ht([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((s,c)=>`${(e.start.line+c+1).toString().padEnd(n," ")}:${s}`).join(`
`)}};function IM(t){return t.start.line==t.end.line&&t.start.character==t.end.character}a(IM,"isEmptyRange");var xht=Ne(require("path"));var Eht=E.Object({uri:E.String(),visibleRange:E.Optional($c),selection:E.Optional($c)}),GRe=class{constructor(e){this.turnContext=e}static{a(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(Nn),n=await r.getOrReadTextDocument(e),o=ua(n);if(await this.turnContext.collectFile(of,e.uri,o),n.status==="valid"){let s=this.turnContext.conversation.source==="inline",c=new Xv(n.document,e.selection,e.visibleRange),l=r.getRelativePath(n.document);if(o==="empty")return new Ht([`The currently open file \`${l}\` is empty.`]);let u=[[`Code excerpt from the currently open file \`${l}\`:`,1],[c.fromAllCode({addLineNumbers:s}),1]],d=[];if(c.selectionIsDocument())d=[["The user is selecting the entire file.",1]];else if(s){let[p,m]=c.fromSelectedCode({trimNewLines:!0}),h=m.start.line+1;if(IM(m))d=[[`The user is selecting line ${h}, which is empty.`,1]];else{let g=m.end.line+1;d=[["The user is selecting"+(h==g?` line ${h}:`:` lines ${h} to ${g} (inclusive):`),1],[p,1]]}}else c.selectionIsEmpty()||(d=[["The user is selecting this code:",1],[c.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Ht([...u,...d])}else if(n.status==="invalid")return new Ht([`The currently open file \`${xht.basename(e.uri)}\` is content excluded.`])}},of="current-editor",Kse=class{constructor(e){this._resolver=e;this.id=of;this.type="explicit"}static{a(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new GRe(e)}};f();f();var bht=Ne(require("fs")),Gf=Ne(require("path"));var VRe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],zRe="test_",Gq={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},Vq=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{a(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Mi(e),n=Gf.extname(r).replace(".",""),o=Gq[n]??{location:"sameFolder",prefix:zRe,suffix:VRe},s=[];if(o.prefix&&s.push(o.prefix+r),o.suffix)for(let d of o.suffix??[]){let p=r.replace(`.${n}`,d+"."+n);s.push(p)}let c=o.location??"sameFolder",l;if(c==="sameFolder"){if(l=ns(Nl(e)),l===void 0)return}else{let d=ns(e);if(d===void 0)return;l=this.determineTestFolder(d,c)}for(let d of s){let p=Gf.join(l,d),m=this.parseTestFilePath(p);if(m&&await this.fileExists(m))return m}let u=Bl(l);if(await this.fileExists(u))return bi(u,s[0])}parseTestFilePath(e){try{return Bl(e)}catch(r){pn.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Mi(e),n=Gf.extname(r).replace(".",""),o=Gq[n]??{location:"sameFolder",prefix:zRe,suffix:VRe},s=[];if(o.prefix&&s.push(r.substring(o.prefix.length)),o.suffix)for(let u of o.suffix??[]){let p=r.substring(0,r.length-u.length-1-n.length)+"."+n;s.push(p)}let c=o.location??"sameFolder",l;c==="sameFolder"?l=Nl(e):l=this.determineImplFolder(e);for(let u of s){let d=bi(l,u);if(await this.fileExists(d))return d}}findExampleTestFile(e){let r=ns(e);if(r===void 0)return;let n=Gf.extname(Mi(e)).replace(".",""),o,s=Gq[n]?.location??"sameFolder";s==="sameFolder"?o=Gf.dirname(r):o=this.determineTestFolder(r,s);let c=this.findFiles(o,`.${n}`,Gq[n]);if(c.length>0)return Bl(c[0])}findFiles(e,r,n){let o=this._readdir(e),s=[];for(let c of o){let l=`${e}${Gf.sep}${c}`;n?.prefix&&c.startsWith(n.prefix)&&s.push(l),n?.suffix&&n?.suffix.some(u=>c.endsWith(u+r))&&s.push(l)}return s}_readdir(e){return bht.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&ns(this.baseUri))??"",o=Gf.extname(e).replace(".",""),s=this.getRelativeTestFolder(e,n,o,r);return[n,...s].filter(c=>c).join(Gf.sep)}getRelativeTestFolder(e,r,n,o){let s=Gf.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",s];case"cs":return[s.replace("src","src/tests")];case"java":case"scala":case"kt":return[s.replace(/src[\\/]main/,"src/test")];default:return o==="testFolder"?[s.replace("src","test")]:[s]}}determineImplFolder(e){let r=Gf.extname(Mi(e)).replace(".",""),n=Nl(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function zq(t){let e=Mi(t),r=Gf.extname(e),n=Gq[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(s=>e.endsWith(s+r))||n.prefix&&!e.startsWith(n.prefix)):!!(VRe.some(s=>e.endsWith(s+r))||e.startsWith(zRe))}a(zq,"isTestFile");f();var Iht=["indexed","indexing","not_indexed"],k_=class{constructor(){this._cache=new vr(100)}static{a(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let o=e.ctx;if(!n)return!1;let s=`repos/${r}/copilot_internal/embeddings_index`,c=await hf(o,n,s);return c.ok?(await c.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<1800*1e3}async isRepoIndexed(e,r,n,o=!1){let s=_x(r);if(!s)return!1;let c=this._cache.get(s);if(!o&&this.isValid(c))return c.status;let l=await this.queryIndexingStatus(e,s,n);return this._cache.set(s,{status:l,timestamp:Date.now()}),l}get cache(){return this._cache}};f();f();var Yse=Ne(TI()),Zv=Ne(require("fs")),Tht=require("os"),mg=Ne(require("path")),TM=require("process");var KRe=5e4,ICr=new dt("workspaceChunks"),Jse=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Mi(r.uri),o=(0,Yse.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=mg.join(TCr(),"project-context",`${n}.${o}`)}static{a(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,Yse.SHA256)(e).toString().substring(0,this.pathHashLength),n=mg.basename(e);return mg.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await Zv.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await Zv.promises.mkdir(mg.dirname(n),{recursive:!0}),await Zv.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(o){ICr.debug(this.ctx,"Failed to set chunks cache:",o)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await Zv.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await Zv.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=mg.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let o=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,o?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(mg.join(this.cacheRootPath,n))}}async getFileHash(e){let r=ns(e),n="";return r&&(n=await Zv.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,Yse.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,o=ns(e);if(!o)return;async function s(m){try{return(await Zv.promises.stat(m)).mtimeMs}catch{return}}a(s,"getLastModified");let c=await s(o),l=await this.getChunksCache(e);if(l!==void 0&&l.version===t.CACHE_VERSION&&c!==void 0&&l.lastModified===c){this.chunksCountCache.set(o,l.documentChunks.length);return}let u=await this.getFileHash(e),d=await n();this.chunksCountCache.set(o,d.length);let p={version:t.CACHE_VERSION,filePath:e,hash:u,lastModified:c,documentChunks:d};await this.setChunksCache(e,p)}async deleteChunksForSource(e){let r=Bl(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=ns(e);if(!r)return[];let n;try{n=await Zv.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let o=[];for(let s of n){let c=Bl(mg.join(r,s));o.push(...await this.deleteChunks({uri:c}))}return o}async clear(){await Zv.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function TCr(){return TM.env.XDG_CACHE_HOME&&mg.isAbsolute(TM.env.XDG_CACHE_HOME)?TM.env.XDG_CACHE_HOME+"/github-copilot":(0,Tht.platform)()==="win32"?TM.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":TM.env.HOME+"/.cache/github-copilot"}a(TCr,"getXdgCachePath");var YRe=1e4;var Xse=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new XRe;this.status="notStarted",this.workspaceChunks=new Jse(e,r),this.cancellationToken=new JRe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{a(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(tf).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>YRe&&(this._fileCountExceeded=!0,n=n.slice(0,YRe));let o=n.map(async s=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,s))});try{await Promise.all(o)}catch(s){Xa(e,s,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>KRe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async o=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(o.uri),await this._chunkLimiter.queue(()=>this._chunk(e,o)))});try{await Promise.all(n)}catch(o){Xa(e,o,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>KRe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>YRe&&(this._fileCountExceeded=!0),nXe(...r.map(o=>this.workspaceChunks.getChunks(o)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Go.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},JRe=class{constructor(){this.cancelled=!1}static{a(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},XRe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{a(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let o=e();o.then(r,n),o.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};f();f();f();var Bht=Ne(tae()),rke=Ne(require("path"));var Nht=500,MCr=Math.floor(.25*Nht),rae=class{static{a(this,"FixedSizeChunking")}async chunk(e,r){let n=[],o=rke.default.extname(__filename)===".ts"?rke.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await Bht.job(async({text:s,uri:c,tokenizerName:l,directory:u,chunkSize:d,overlap:p})=>{let h=await require(u).getTokenizerAsync(l),g=h.tokenize(s),A=g.length,y=[],v=0;for(;v<A;){let b=v+d>=A,I=b?A:v+d,_=g.slice(v,I),k=h.detokenize(_),N=s.indexOf(k);y.push({id:`${c.toString()}#${v}`,chunk:k,tokenCount:_.length,range:{start:N,end:N+k.length}}),v=b?I:I-p}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:o,chunkSize:Nht,overlap:MCr}}),n}};var LCr="fixedSize",FCr=new Map([["fixedSize",rae]]);function Mht(t){let e=t==="default"?LCr:t,r=FCr.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}a(Mht,"getChunkingAlgorithm");var Tc=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{a(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=Mht(r),o=new n;return new Xse(this.ctx,e,o)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let o=this.workspaceChunkingProviders.get(e.uri);return o||(o=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,o)),o}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let o=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(o)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let s=Kr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Pt(e,"index.terminate",s),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),o=[];Array.isArray(r)||(r=[r]);for(let s of r)o.push(...await n.deleteFileChunks(s));return o}async chunk(e,r,n,o){let s;return n&&(Array.isArray(n)?s=n:o=n),o||(o="default"),s?await this.chunkFiles(e,r,s,o):await this.chunkFolder(e,r,o)}async chunkFolder(e,r,n="default"){let o=this.getImplementation(r,n),s=await o.chunk(e),l=Kr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:o.totalFileCount,chunkCount:await o.getChunksCount(),timeTakenMs:o.chunkingTimeMs,workspaceCount:this.workspaceCount});return Pt(e,"index.chunk",l),s}async chunkFiles(e,r,n,o="default"){return await this.getImplementation(r,o).chunk(e,n)}};f();f();f();async function Lht(t,e,r,n){let o=Xi(e.tokenizer),s=r.filter(m=>o.tokenLength(m.text)<e.maxTokens);if(s.length===0)return;let c=[],l=await t.get(nr).getToken(),u=dY(t,l,"embeddings"),d=l.token,p=0;for(;p<s.length&&!n.isCancellationRequested;){let m=s.slice(p,p+e.maxBatchSize),h=await OCr(t,u,d,e.modelId,m,n);c.push(...h||[]),p+=e.maxBatchSize}return c.length?c:void 0}a(Lht,"fetchEmbeddings");async function OCr(t,e,r,n,o,s){let c=wr(),l=o.map(p=>p.text),u=gh(t);q1()&&(u=await VB(t,u));let d=await Sx(t,e,r,void 0,c,{input:l,model:n,dimensions:1024},s,u);if(d.status!==200||s.isCancellationRequested){Xa(t,new OE(`Failed to request dense embeddings, status: ${d.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await d.json()).data.map(m=>({id:o[m.index].id,embedding:m.embedding}))}catch{return}}a(OCr,"sendEmbeddingsRequest");f();f();var nae=class{static{a(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((c,l)=>c+l*l,0)),o=Math.sqrt(r.reduce((c,l)=>c+l*l,0));return e.reduce((c,l,u)=>c+l*r[u],0)/(n*o)}terminateScoring(){}};var QCr="cosine",UCr=new Map([["cosine",nae]]);function Fht(t){let e=t==="default"?QCr:t,r=UCr.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}a(Fht,"getScoringAlgorithm");f();var Em=class{constructor(){this.workspaceScoringProviders=new vr(25)}static{a(this,"ScoringProvider")}createImplementation(e,r){let n=Fht(r);return new n}getImplementation(e,r,n="default"){let o=this.workspaceScoringProviders.get(r.uri);return o||(o=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,o)),o}score(e,r,n,o,s){return this.getImplementation(e,r,s).score(n,o)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var Oht={modelFamily:hY.textEmbedding3Small,scoringType:"default",dimensions:null};async function Qht(t,e,r,n,o,s,c,l=Oht){let u={...Oht,...l},d=HCr(t,e,r,n);kr.debug(t,`EmbeddingsReranker: Reranking ${d.length} snippets (includes the user query)`);let p=await t.get(ya).getFirstMatchingEmbeddingModelConfiguration(u.modelFamily);if(p===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${u.modelFamily}`);let m=performance.now(),h=await Lht(t,p,d,s),g=performance.now();if(c.embeddingsTimeMs=Math.floor(g-m),h===void 0||h.length===0)return[];let A=h.findIndex(N=>N.id==="userQuery");if(A===void 0)return[];let y=h.splice(A,1)[0];if(s.isCancellationRequested)return[];let v=performance.now(),b=WCr(t,e,h,y,u.scoringType),I=performance.now();c.rerankingTimeMs=Math.floor(I-v);let _=b.slice(0,o);return kr.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(N=>d.find(F=>F.id===N.id).id)}a(Qht,"rerankSnippets");function HCr(t,e,r,n){let o=n.map(s=>({id:s.id,text:s.chunk.toLowerCase()}));return o.push({id:"userQuery",text:r.toLowerCase()}),o}a(HCr,"formatEmbeddingsInput");function WCr(t,e,r,n,o){let s=t.get(Em);return r.map(l=>({id:l.id,score:s.score(t,e,n.embedding,l.embedding,o)})).sort((l,u)=>u.score-l.score)}a(WCr,"scoreEmbeddings");f();f();f();var ike=Ne(tae());var $Cr=.75,jCr=1.2,GCr=47,iae=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{a(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await oae();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(l=>l.toLowerCase()),n=await this.calculateIDFValues(r),o=Math.min(10*e.length,GCr),s=Math.min(o,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,s)}async calculateIDFValues(e){let r=this.ctx.get(Tc).getChunks(this.workspaceFolder),n=Mx(r,s=>({...s,chunk:s.chunk.toLowerCase()})),o=Mx(n,s=>s.chunk);return await VCr(e,o)}async calculateBM25Scores(e,r,n,o){let s=this.ctx.get(Tc).getChunks(this.workspaceFolder),c=new nke(o);for await(let l of s){let u=await zCr({...l,chunk:l.chunk.toLowerCase()},e,r,n);c.add({...u,chunk:l.chunk})}return c.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function VCr(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),o=[],s=0;for await(let u of e){s++;let d=ike.job(({snippet:p,keywords:m})=>m.map(g=>p.includes(g)?1:0),{data:{snippet:u,keywords:t}}).then(p=>{for(let m=0;m<t.length;m++)Atomics.add(n,m,p[m])});o.push(d)}await Promise.all(o);let c=new Int32Array(r),l={};for(let u=0;u<t.length;u++)l[t[u]]=Math.log((s-c[u]+.5)/(c[u]+.5)+1);return l}a(VCr,"calculateIDFValues");async function zCr(t,e,r,n){return{score:await ike.job(({keywords:s,document:c,docLength:l,avgTokenCount:u,idfValues:d,k1:p,b:m})=>{let h=0;for(let g of s){let A=d[g],y=(c.match(new RegExp(g,"g"))||[]).length,v=A*(y*(p+1)),b=y+p*(1-m+m*l/u);h+=v/b}return h},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:jCr,b:$Cr}}),...t}}a(zCr,"calculateBM25Score");var nke=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{a(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var YCr="bm25",JCr=new Map([["bm25",iae]]);function Uht(t){let e=t==="default"?YCr:t,r=JCr.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}a(Uht,"getRankingAlgorithm");var yd=class{constructor(){this.workspaceRankingProviders=new vr(25)}static{a(this,"RankingProvider")}createImplementation(e,r,n){let o=Uht(n);return new o(e,r)}getImplementation(e,r,n="default"){let o=this.workspaceRankingProviders.get(r.uri);return o||(o=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,o)),o}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,o="default"){await this.getImplementation(e,r,o).initialize(n)}async addChunks(e,r,n,o="default"){await this.getImplementation(e,r,o).addChunks(n)}async query(e,r,n,o){return this.getImplementation(e,r,o).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,o){return this.getImplementation(e,r,o).deleteEmbeddings(n)}};f();async function qht(t,e){let r=t.ctx,n=await Go.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),o={promptType:"synonyms",modelConfiguration:n},s=await r.get(Cd).toPrompt(t,o);if(!s.toolConfig)return;let c={modelConfiguration:n,uiKind:"conversationPanel",messages:s.messages,tools:s.toolConfig?.tools,tool_choice:s.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},l=new Bs(r),u=await nc(r,t),d=await l.fetchResponse(c,e,u.extendedBy({messageSource:"chat.synonyms"}));if(d.type==="success"&&d.toolCalls&&d.toolCalls.length>0){let p=d.toolCalls[0],m=s.toolConfig?.extractArguments(p).keywords;return!m||!Array.isArray(m)?void 0:(kr.debug(r,`UserQueryParser: Parsed ${m.length} keywords from the original user query: ${m.join(", ")}`),m.length?m:void 0)}else{let p="reason"in d?d.reason:"";Xa(r,new OE(`Failed to request user query synonyms, result type: ${d.type}, reason: ${p}`),"LocalSnippetProvider.parseUserQuery")}}a(qht,"parseUserQuery");var Hht=Ne(xm());var OE=class extends Error{static{a(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},sae=class{constructor(){this.providerType="local"}static{a(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,o=n.get(Tc),s=o.status(e.turn.workspaceFolder),c=n.get(yd),l=c.status(n,e.turn.workspaceFolder);if(s==="completed"&&l==="completed")return Promise.resolve("indexed");if(s==="started"||l==="started")return Promise.resolve("indexing");if(r){let u=e.turn.workspaceFolder;if(s==="notStarted")return Promise.race([o.chunk(n,u).then(d=>{if(o.status(u)==="completed")return c.initialize(n,u,d)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))]);if(l==="notStarted"){let d=o.getChunks(u);return Promise.race([c.initialize(n,u,d).then(()=>this.snippetProviderStatus(e,!1)),new Promise(p=>setTimeout(()=>p("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let o=e.ctx,c=await o.get(Tc).chunkCount(n);if(c===0)return[];r.chunkCount=c;let l,u=performance.now();try{l=await qht(e,e.cancelationToken)}catch(A){let y=new OE(A);Xa(o,y,"LocalSnippetProvider.parseUserQuery")}let d=performance.now();if(r.synonymTimeMs=Math.floor(d-u),l===void 0)return[];let p=o.get(yd),m=[],h=performance.now();try{let A=await p.query(o,n,l);r.localSnippetCount=A.length,m=A}catch(A){let y=new OE(A);Xa(o,y,"LocalSnippetProvider.rankingQuery")}let g=performance.now();return r.rankingTimeMs=Math.floor(g-h),m}async rerankLocalSnippets(e,r,n){let o=e.turn.workspaceFolder;if(!o)return[];let s=e.ctx,c=rn(e.turn.request.message),l=[];try{l=await Qht(s,o,c,r,5,e.cancelationToken,n)}catch(p){let m=new OE(p);Xa(s,m,"LocalSnippetProvider.rerankSnippets")}let u=[],d=s.get(Nn);for(let p of l){let m=p.split("#")[0],h=await d.getOrReadTextDocument({uri:m}),g=r.find(A=>A.id===p);if(h.status==="valid"){let A=h.document.positionAt(g.range.start),y=h.document.positionAt(g.range.end),v=Is.range(A,y);u.push({uri:h.document.uri,range:v,snippet:g.chunk})}}return u}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...cXe},o=await this.collectLocalSnippets(e,n);if(o.length===0)return{snippets:[],measurements:n};let s=e.ctx;return kr.debug(s,`LocalSnippetProvider: First pass: Found ${o.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,o,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let s=e.ctx.get(Tc).checkLimits(r);if(s.fileCountExceeded||s.chunkCountExceeded)return Hht.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var $ht=Ne(Wht()),lae=Ne(tae()),jht=Ne(require("os")),Ght=Ne(xm());var tvr=Math.min(Math.max(Math.ceil(jht.cpus().length/2),1),10),Yq=class t{constructor(){this.isActive=!0}static{a(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new $ht.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await lae.start({maxWorkers:tvr})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await lae.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},oae=Yq.startWorkerPool.bind(Yq);var hZi=E.Object({uri:E.String(),snippet:E.String(),range:E.Object({start:E.Object({line:E.Number(),character:E.Number()}),end:E.Object({line:E.Number(),character:E.Number()})})}),ake=class{constructor(e){this.turnContext=e}static{a(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(wM);return}let r=[],n=this.turnContext.ctx.get(Nn),o=this.removeDuplicateSnippets(e);for(let s of o){let{uri:c,snippet:l,range:u}=s,d=await n.getOrReadTextDocument(s);if(d.status==="valid"){let p=new Xv(d.document,u,u),m=new Ht([l]),g=zq(c)?.5:.8;r.push([`Code excerpt from file \`${ns(c)}\`:`,1],[p.wrapInTicks(m,g),1]),await this.turnContext.collectFile(_M,c,ua(d),u)}}if(r.length>0)return r.unshift([new Ht(["The user wants you to consider the following snippets when computing your answer."]),1]),new Ht(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let o=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[o]||(r[o]=n)}),Object.values(r)}},wM="collect-project-context",aae=class extends nM{constructor(r,n=[new sae]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get($v).addListener(this)}static{a(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async didAddWorkspace(r){if(!await this.isEnabled()||(this.workerPoolToken=await oae(),!r.uri))return;let n=this.ctx.get(Tc),o=this.ctx.get(tf),s=this.ctx.get(yd),c=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&o.terminateWatching(r),await s.initialize(this.ctx,r,c),await this.workerPoolToken.stopWorkerPool()}async didRemoveWorkspace(r){if(!await this.isEnabled())return;let n=this.ctx.get(Tc);if(!r)return;let o=n.getParentFolder(r);if(o){let l=await n.deleteSubfolderChunks(o,r);await this.ctx.get(yd).deleteEmbeddings(this.ctx,o,l);return}n.terminateChunking(this.ctx,r),await this.ctx.get(yd).terminateRanking(this.ctx,r),this.ctx.get(Em).terminateScoring(this.ctx,r),n.workspaceCount===0&&await Yq.forceStopWorkerPool()}async didTerminateWorkspaceSubfolders(r,n){let o=this.ctx.get(Tc),s=this.ctx.get(yd),c=this.ctx.get(Em);for(let l of n)o.terminateChunking(this.ctx,l),await s.terminateRanking(this.ctx,l),c.terminateScoring(this.ctx,r)}async didChangeFiles(r){if(!await this.isEnabled())return;let n=await oae();try{let o=r.documents.map(u=>u.uri),s=r.workspaceFolder;if(!s)return;let c=this.ctx.get(Tc),l=this.ctx.get(yd);if(r.type==="delete"||r.type==="update"){let u=await c.deleteFileChunks(s,o);await l.deleteEmbeddings(this.ctx,s,u)}if(r.type==="create"||r.type==="update"){let u=await c.chunk(this.ctx,s,r.documents);await l.addChunks(this.ctx,s,u)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}isEnabled(){return Promise.resolve(!0)}async resolveSkill(r){await r.steps.start(wM,"Collecting relevant project context"),await r.info(Ght.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async l=>l.snippetProviderStatus(r)),o=await Promise.all(n),s="not_indexed",c;for(let l of Iht){let u=o.findIndex(d=>d===l);if(u!==-1){s=l,c=this.snippetProviders[u];break}}switch(s){case"indexed":{let{snippets:l,measurements:u}=await c.provideSnippets(r);if(await lXe(r,c.providerType,u),l.length===0){await r.steps.error(wM,"No project context found");return}return await r.steps.finish(wM),l}case"indexing":{await r.steps.error(wM,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(wM,"No project context available");return}}}},_M="project-context",cae=class extends Du{static{a(this,"ProjectContextSkill")}constructor(e){super(_M,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new ake(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var Vht=E.Object({labels:E.Array(E.String())}),cke=class{constructor(e){this.turnContext=e}static{a(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Ht(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Ht([`- ${n}`]),.9]),this.turnContext.collectLabel(Ty,n)}),new Ht(r)}},Ty="project-labels",uae=class{constructor(e){this._resolver=e;this.id=Ty;this.type="explicit"}static{a(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new cke(e)}};f();var dae=Ne(xm());var Kht={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},Yht=dae.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,Jht=dae.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,rvr=dae.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,lke=`

`,zht=Yht+lke+Jht;function Xht(t){let e=1;if(t.length===0)return{reply:zht,vulnerabilities:e};if(t==="0")return{reply:zht,vulnerabilities:0};if(t==="help")return{reply:rvr,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let o of t)o==="p"?n+=Yht+lke:o==="c"&&(n+=Jht+lke);return{reply:n.trimEnd(),vulnerabilities:e}}a(Xht,"parseVulnerabilitiesInstructions");var Zht=Ne(xm());var nvr="Oops, your response got filtered. Vote down if you think this shouldn't have happened",ivr="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",uke=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{a(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},ovr=new uke,dke=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{a(this,"DebugUpgradePromptTemplate")}response(e){return new Bu(ivr,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},svr=new dke,fke=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{a(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let o=r.replace("info","").replace("warning","").trim(),s=[{severity:n,message:o.length>0?o:"Debug Notification"}];return new Bu("Alright, I'm producing a notification",void 0,[],s)}},avr=new fke,pke=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{a(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Bu(nvr,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},cvr=new pke,mke=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{a(this,"DebugDumpPromptTemplate")}async response(e){return new Bu(await tgt(e))}},lvr=new mke,hke=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{a(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[Ty,of]}instructions(e,r){return"Create a function that prints a christmas tree"}},uvr=new hke,gke=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{a(this,"DebugEchoPromptTemplate")}response(e){return new Bu(rn(e.turn.request.message))}},dvr=new gke,Ake=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{a(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(Nu).getLastTurnPrompts();if(n!==void 0&&n.size>0){let o="Here are the prompts used in the last turn:";return n.forEach((s,c)=>{o+=Zht.default`

                        ### ${c} prompt
                        
                        \`\`\`\`
                        ${s}
                        \`\`\`\`
                    `}),new Bu(o)}return new Bu("No prompt available")}},fvr=new Ake,yke=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{a(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let o,s;if(r.length>0){let c=r.split(" ");o=c[0],s=c.slice(1).join(" ")}return e.turn.request.message=s??"",new Bu(await rgt(e,n,o))}},pvr=new yke,Cke=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{a(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:o}=Xht(r);for(let s=0;s<o;s++)e.turn.annotations.push(Kht);return new Bu(n,void 0,e.turn.annotations)}},mvr=new Cke,vke=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{a(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(ght),new Bu(Aht,void 0,e.turn.annotations)}},hvr=new vke,xke=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{a(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Bu(yht)}},gvr=new xke,Eke=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{a(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},Avr=new Eke,bke=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{a(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[_M]}},yvr=new bke,Ike=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{a(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Bu("Alright, I'm producing a notification",void 0,[],[],[],e)}},Cvr=new Ike;function egt(){return[ovr,svr,avr,cvr,uvr,lvr,dvr,fvr,pvr,mvr,hvr,Cvr,gvr,Avr,yvr]}a(egt,"getDebugTemplates");f();f();function D_(t,e){if(t.length==0)return new Ht([]);let r=t.map((n,o)=>{let s;switch(e){case"linear":s=1-o/t.length;break;case"inverseLinear":s=(o+1)/t.length;break;case"positional":s=1/(o+1);break;case"inversePositional":s=1/(t.length-o);break}return Array.isArray(n)&&n.length==2&&(s*=n[1],n=n[0]),[n,s]});return new Ht(r)}a(D_,"weighElidableList");var ngt=E.Object({uri:E.String(),problems:E.Array(E.Object({message:E.String(),range:$c}))}),Tke=class{constructor(e){this.turnContext=e}static{a(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(Nn),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(B_,e.uri,ua(n)),n.status==="valid"){let o=r.getRelativePath(n.document);this.turnContext.collectLabel(B_,`problems in ${o}`);let s=this.getElidableProblems(e,n,o);return await this.preElideDocuments(s)}else this.turnContext.collectLabel(B_,"problem markers")}getElidableProblems(e,r,n){let o=[];return o.push(new Ht([`Problems and errors in the active document (\`${n}\`):`])),o.push(...this.createElidableProblems(e,r)),D_(o,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let o=[];o.push(new Ht([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let s=n.range,c;if(s&&(this.isEmpty(s)?c=r.document.lineAt(s.start).text:c=r.document.getText(s),c)){let l=r.document.detectedLanguageId;o.push(new Ht([["```"+l,1],[V0(c),.8],["```",1]]))}return new Ht(o)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await Go.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ht([n])}},B_="problems-in-active-document",fae=class extends Du{static{a(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(B_,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new Tke(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var pae=class{constructor(e){this.turnContext=e}static{a(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(Ar).getWorkspaceFolder(e),n=this.fileExistFn(),o=new Vq(this.turnContext.ctx,n,r?.uri),s=await o.findTestFileForSourceFile(e.uri),c=zq(e.uri);if(s&&!c){let l=e.detectedLanguageId;if(await n(s))return await this.asTestFilePrompt(l,s);{let u=o.findExampleTestFile(e.uri);if(u)return await this.asExampleFilePrompt(l,u)}}}async fromTestFile(e){if(!zq(e))return;let n=this.turnContext.ctx.get(Ar).getWorkspaceFolder(e),o=this.fileExistFn(),c=await new Vq(this.turnContext.ctx,o,n?.uri).findImplFileForTestFile(e.uri);if(c){let l=e.detectedLanguageId;if(await o(c))return await this.asImplFilePrompt(l,c)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[o,s]=n;return new Ht([[`${vvr} \`${s}\`:`,1],["```"+e,1],[o,.9],["```",1]])}return new Ht([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[o,s]=n;return new Ht([[`${xvr} \`${s}\`:`,1],["```"+e,1],[o,.9],["```",1]])}return new Ht([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[o,s]=n;return new Ht([[`${Evr} \`${s}\`:`,1],["```"+e,1],[o,.9],["```",1]])}return new Ht([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(Nn),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(wy,e,ua(n)),n.status==="valid"){let o=r.getRelativePath(n.document);return[V0(n.document.getText()),o]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(Ui).stat(e),!0}catch{return!1}}}},vvr="Code excerpt from the implementation source file",xvr="Code excerpt from the test file",Evr="Code excerpt from an example test file";var igt=E.Object({currentFileUri:E.String(),sourceFileUri:E.Optional(E.String()),testFileUri:E.Optional(E.String())}),_ke=class{constructor(e){this.turnContext=e}static{a(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(Nn),n=new pae(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let o=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(wy,e.testFileUri,ua(o)),o.status==="valid")return await n.asImplFilePrompt(o.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let o=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(wy,e.sourceFileUri,ua(o)),o.status==="valid")return await n.asTestFilePrompt(o.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let o=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(wy,e.sourceFileUri,ua(o)),o.status==="valid")return await n.fromImplementationFile(o.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let o=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(wy,e.testFileUri,ua(o)),o.status==="valid")return await n.fromTestFile(o.document)}}},wy="test-context",mae=class extends Du{static{a(this,"TestContextSkill")}constructor(e){super(wy,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new _ke(r))}};f();var ogt=Ne(xm());var sgt=E.Object({failures:E.Array(E.Object({testName:E.String(),testSuite:E.Optional(E.String()),testFileUri:E.String(),failureReason:E.Optional(E.String()),testLocation:$c}))}),Ske=class{constructor(e){this.turnContext=e}static{a(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(RP,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Ht(["The latest test run produced the following failures and errors:"]);return new Ht([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(Nn),n=[],o=this.groupFailuresByFile(e);for(let[s,c]of o.entries()){let l=await r.getOrReadTextDocument({uri:s});if(await this.turnContext.collectFile(RP,s,ua(l)),l.status==="valid"){let u=r.getRelativePath(l.document),d=this.createElidableFailuresOfDoc(c,u),p=this.appendCode(d,u,l.document);n.push([p,1])}}if(n.length>0)return new Ht(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let o=r.get(n.testFileUri)||[];o.push(n),r.set(n.testFileUri,o)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(o=>{let s=`\`${o.testName}\``,c=`${o.testSuite?` in suite \`${o.testSuite}\``:""}`,l=` in file \`${r}\` `,u=". ";o.failureReason&&(u=" with the following error:",o.failureReason.includes(`
`)?u+="\n```\n"+o.failureReason+"\n```\n":u+=` \`${o.failureReason}\`. `);let d=`${o.testLocation.start.line==o.testLocation.end.line?"on line "+o.testLocation.start.line:"between lines "+o.testLocation.start.line+" and "+o.testLocation.end.line}`;return[new Ht([ogt.default`\n\n- Test ${s}${c}${l}failed${u}The failed test is ${d}.\n`]),1]});return new Ht(n)}appendCode(e,r,n){let o=[new Ht([`
The code of file \`${r}\` is:
`]),.6],s=[new Ht([["```"+n.detectedLanguageId,1],[V0(n.getText()),.9],["```",1]]),.7];return new Ht([[e,1],o,s])}},RP="test-failures",hae=class extends Du{static{a(this,"TestFailuresSkill")}constructor(e){super(RP,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new Ske(r))}};var hg=Ne(xm());var Bu=class{constructor(e,r,n=[],o=[],s=[],c){this.message=e;this.error=r;this.annotations=n;this.notifications=o;this.references=s;this.confirmationRequest=c}static{a(this,"PromptTemplateResponse")}},kP=class{constructor(e,r,n,o,s=[],c=[],l,u=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=o;this.skills=s;this.scopes=c;this.inlinePrompt=l;this.producesCodeEdits=u}static{a(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let o;return n==="inline"?o=this.inlinePrompt??this.prompt:o=this.prompt,o+`
`+r}requiredSkills(){return this.skills}},bvr=new kP("tests","Generate unit tests","Generate Tests",hg.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[wy,RP],["chat-panel","agent-panel","editor"]),Ivr=new kP("simplify","Simplify the code","Simplify This",hg.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","agent-panel","inline"],hg.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),Tvr=new kP("fix","Fix problems and compile errors","Fix This",hg.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[B_],["editor","chat-panel","agent-panel","inline"],hg.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),wvr=new kP("explain","Explain how the code works","Explain This",hg.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","agent-panel","inline"],hg.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),_vr=new kP("doc","Document the current selection of code","Generate Docs",hg.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","agent-panel","inline"],hg.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),Rke=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel","agent-panel"]}static{a(this,"FeedbackPromptTemplate")}response(e){let r=Dke(e.conversation),n=hg.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://aka.ms/copilot-jetbrains-feedback) to share your feedback.
            `;return r?new Bu(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new Bu(n)}},Svr=new Rke,kke=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel","agent-panel"]}static{a(this,"HelpPromptTemplate")}response(e){let r=Pke(e.ctx).filter(o=>o!=this),n=hg.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(o=>`- \`/${o.id}\` - ${o.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Bu(n)}},Rvr=new kke;function PP(){return[bvr,Ivr,Tvr,wvr,_vr,Svr,Rvr,...egt()]}a(PP,"getPromptTemplates");function Pke(t){let e=PP();return!t6(t)&&!eA(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}a(Pke,"getUserFacingPromptTemplates");var Bke=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{a(this,"ConversationHolder")}},no=class{constructor(e){this.ctx=e;this.conversations=new vr(100)}static{a(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:o}={}){let s=new Vse([],r??"panel",n,o),c=e?.skills??[];return e?.allSkills&&(c=this.ctx.get(jl).getDescriptors().map(l=>l.id)),this.conversations.set(s.id,new Bke(s,{skills:c})),s}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,o,s,c,l,u){let d=this.get(e);return r.request.references=n&&n.length>0?n:[],o&&(r.request.activeEditor=o),s&&(r.workspaceFolder=s),c&&c.length>0&&(r.workspaceFolders=c),l&&l.length>0&&(r.ignoredSkills=l.map(p=>({skillId:p}))),u&&(r.agent={agentSlug:u.agentSlug},r.confirmationResponse=u),await this.determineAndApplyAgent(d,r),await this.determineAndApplyTemplate(d,r),this.determineAndApplyPromptTemplate(this.ctx,d,r),d.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&rn(r.request.message).trim().startsWith("@")){let[n,o]=this.extractKeywordAndQuestionFromRequest(rn(r.request.message),"@");(await t1(this.ctx)).find(l=>l.slug===n)&&(r.request.message=o,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(rn(r.request.message).trim().startsWith("/")){let[n,o]=this.extractKeywordAndQuestionFromRequest(rn(r.request.message),"/"),s=PP().find(c=>c.id===n);if(s){r.request.message=o,r.request.type="user",await this.determineAndApplyAgent(e,r);let c=s.instructions?s.instructions(this.ctx,r.request.message,e.source):o;r.template={templateId:n,userQuestion:r.request.message},r.request.message=c,r.request.type="template"}}}determineAndApplyPromptTemplate(e,r,n){if(rn(n.request.message).trim().startsWith("/")){let[o,s]=this.extractKeywordAndQuestionFromRequest(rn(n.request.message),"/"),l=e.get(ay).getPromptTemplate(o);l&&(n.request.message=`Follow instructions in [${l.name}](${l.uri}). ${s}`,n.request.references=[...n.request.references||[],{type:"file",uri:l.uri}])}}extractKeywordAndQuestionFromRequest(e,r){let[n,...o]=e.trim().split(" "),s=o.join(" ");return[n.replace(r,""),s]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(jl).getDescriptors().filter(o=>o.type==="implicit").map(o=>o.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(o=>n.includes(o))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};f();function Egt(t){return typeof t>"u"||t===null}a(Egt,"isNothing");function kvr(t){return typeof t=="object"&&t!==null}a(kvr,"isObject");function Pvr(t){return Array.isArray(t)?t:Egt(t)?[]:[t]}a(Pvr,"toArray");function Dvr(t,e){var r,n,o,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)o=s[r],t[o]=e[o];return t}a(Dvr,"extend");function Bvr(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}a(Bvr,"repeat");function Nvr(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}a(Nvr,"isNegativeZero");var Mvr=Egt,Lvr=kvr,Fvr=Pvr,Ovr=Bvr,Qvr=Nvr,Uvr=Dvr,Gl={isNothing:Mvr,isObject:Lvr,toArray:Fvr,repeat:Ovr,isNegativeZero:Qvr,extend:Uvr};function bgt(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}a(bgt,"formatError");function Xq(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=bgt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}a(Xq,"YAMLException$1");Xq.prototype=Object.create(Error.prototype);Xq.prototype.constructor=Xq;Xq.prototype.toString=a(function(e){return this.name+": "+bgt(this,e)},"toString");var n0=Xq;function Nke(t,e,r,n,o){var s="",c="",l=Math.floor(o/2)-1;return n-e>l&&(s=" ... ",e=n-l+s.length),r-n>l&&(c=" ...",r=n+l-c.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+c,pos:n-e+s.length}}a(Nke,"getLine");function Mke(t,e){return Gl.repeat(" ",e-t.length)+t}a(Mke,"padStart");function qvr(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],o=[],s,c=-1;s=r.exec(t.buffer);)o.push(s.index),n.push(s.index+s[0].length),t.position<=s.index&&c<0&&(c=n.length-2);c<0&&(c=n.length-1);var l="",u,d,p=Math.min(t.line+e.linesAfter,o.length).toString().length,m=e.maxLength-(e.indent+p+3);for(u=1;u<=e.linesBefore&&!(c-u<0);u++)d=Nke(t.buffer,n[c-u],o[c-u],t.position-(n[c]-n[c-u]),m),l=Gl.repeat(" ",e.indent)+Mke((t.line-u+1).toString(),p)+" | "+d.str+`
`+l;for(d=Nke(t.buffer,n[c],o[c],t.position,m),l+=Gl.repeat(" ",e.indent)+Mke((t.line+1).toString(),p)+" | "+d.str+`
`,l+=Gl.repeat("-",e.indent+p+3+d.pos)+`^
`,u=1;u<=e.linesAfter&&!(c+u>=o.length);u++)d=Nke(t.buffer,n[c+u],o[c+u],t.position-(n[c]-n[c+u]),m),l+=Gl.repeat(" ",e.indent)+Mke((t.line+u+1).toString(),p)+" | "+d.str+`
`;return l.replace(/\n$/,"")}a(qvr,"makeSnippet");var Hvr=qvr,Wvr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$vr=["scalar","sequence","mapping"];function jvr(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}a(jvr,"compileStyleAliases");function Gvr(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Wvr.indexOf(r)===-1)throw new n0('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=jvr(e.styleAliases||null),$vr.indexOf(this.kind)===-1)throw new n0('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}a(Gvr,"Type$1");var sf=Gvr;function agt(t,e){var r=[];return t[e].forEach(function(n){var o=r.length;r.forEach(function(s,c){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(o=c)}),r[o]=n}),r}a(agt,"compileList");function Vvr(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(a(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}a(Vvr,"compileMap");function Fke(t){return this.extend(t)}a(Fke,"Schema$1");Fke.prototype.extend=a(function(e){var r=[],n=[];if(e instanceof sf)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new n0("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof sf))throw new n0("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new n0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new n0("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof sf))throw new n0("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(Fke.prototype);return o.implicit=(this.implicit||[]).concat(r),o.explicit=(this.explicit||[]).concat(n),o.compiledImplicit=agt(o,"implicit"),o.compiledExplicit=agt(o,"explicit"),o.compiledTypeMap=Vvr(o.compiledImplicit,o.compiledExplicit),o},"extend");var zvr=Fke,Kvr=new sf("tag:yaml.org,2002:str",{kind:"scalar",construct:a(function(t){return t!==null?t:""},"construct")}),Yvr=new sf("tag:yaml.org,2002:seq",{kind:"sequence",construct:a(function(t){return t!==null?t:[]},"construct")}),Jvr=new sf("tag:yaml.org,2002:map",{kind:"mapping",construct:a(function(t){return t!==null?t:{}},"construct")}),Xvr=new zvr({explicit:[Kvr,Yvr,Jvr]});function Zvr(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}a(Zvr,"resolveYamlNull");function e1r(){return null}a(e1r,"constructYamlNull");function t1r(t){return t===null}a(t1r,"isNull");var r1r=new sf("tag:yaml.org,2002:null",{kind:"scalar",resolve:Zvr,construct:e1r,predicate:t1r,represent:{canonical:a(function(){return"~"},"canonical"),lowercase:a(function(){return"null"},"lowercase"),uppercase:a(function(){return"NULL"},"uppercase"),camelcase:a(function(){return"Null"},"camelcase"),empty:a(function(){return""},"empty")},defaultStyle:"lowercase"});function n1r(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}a(n1r,"resolveYamlBoolean");function i1r(t){return t==="true"||t==="True"||t==="TRUE"}a(i1r,"constructYamlBoolean");function o1r(t){return Object.prototype.toString.call(t)==="[object Boolean]"}a(o1r,"isBoolean");var s1r=new sf("tag:yaml.org,2002:bool",{kind:"scalar",resolve:n1r,construct:i1r,predicate:o1r,represent:{lowercase:a(function(t){return t?"true":"false"},"lowercase"),uppercase:a(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:a(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function a1r(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}a(a1r,"isHexCode");function c1r(t){return 48<=t&&t<=55}a(c1r,"isOctCode");function l1r(t){return 48<=t&&t<=57}a(l1r,"isDecCode");function u1r(t){if(t===null)return!1;var e=t.length,r=0,n=!1,o;if(!e)return!1;if(o=t[r],(o==="-"||o==="+")&&(o=t[++r]),o==="0"){if(r+1===e)return!0;if(o=t[++r],o==="b"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(o!=="0"&&o!=="1")return!1;n=!0}return n&&o!=="_"}if(o==="x"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(!a1r(t.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}if(o==="o"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(!c1r(t.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}}if(o==="_")return!1;for(;r<e;r++)if(o=t[r],o!=="_"){if(!l1r(t.charCodeAt(r)))return!1;n=!0}return!(!n||o==="_")}a(u1r,"resolveYamlInteger");function d1r(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}a(d1r,"constructYamlInteger");function f1r(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Gl.isNegativeZero(t)}a(f1r,"isInteger");var p1r=new sf("tag:yaml.org,2002:int",{kind:"scalar",resolve:u1r,construct:d1r,predicate:f1r,represent:{binary:a(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:a(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:a(function(t){return t.toString(10)},"decimal"),hexadecimal:a(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),m1r=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function h1r(t){return!(t===null||!m1r.test(t)||t[t.length-1]==="_")}a(h1r,"resolveYamlFloat");function g1r(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}a(g1r,"constructYamlFloat");var A1r=/^[-+]?[0-9]+e/;function y1r(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Gl.isNegativeZero(t))return"-0.0";return r=t.toString(10),A1r.test(r)?r.replace("e",".e"):r}a(y1r,"representYamlFloat");function C1r(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Gl.isNegativeZero(t))}a(C1r,"isFloat");var v1r=new sf("tag:yaml.org,2002:float",{kind:"scalar",resolve:h1r,construct:g1r,predicate:C1r,represent:y1r,defaultStyle:"lowercase"}),x1r=Xvr.extend({implicit:[r1r,s1r,p1r,v1r]}),E1r=x1r,Igt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Tgt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function b1r(t){return t===null?!1:Igt.exec(t)!==null||Tgt.exec(t)!==null}a(b1r,"resolveYamlTimestamp");function I1r(t){var e,r,n,o,s,c,l,u=0,d=null,p,m,h;if(e=Igt.exec(t),e===null&&(e=Tgt.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(r,n,o));if(s=+e[4],c=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(p=+e[10],m=+(e[11]||0),d=(p*60+m)*6e4,e[9]==="-"&&(d=-d)),h=new Date(Date.UTC(r,n,o,s,c,l,u)),d&&h.setTime(h.getTime()-d),h}a(I1r,"constructYamlTimestamp");function T1r(t){return t.toISOString()}a(T1r,"representYamlTimestamp");var w1r=new sf("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:b1r,construct:I1r,instanceOf:Date,represent:T1r});function _1r(t){return t==="<<"||t===null}a(_1r,"resolveYamlMerge");var S1r=new sf("tag:yaml.org,2002:merge",{kind:"scalar",resolve:_1r}),Hke=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function R1r(t){if(t===null)return!1;var e,r,n=0,o=t.length,s=Hke;for(r=0;r<o;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}a(R1r,"resolveYamlBinary");function k1r(t){var e,r,n=t.replace(/[\r\n=]/g,""),o=n.length,s=Hke,c=0,l=[];for(e=0;e<o;e++)e%4===0&&e&&(l.push(c>>16&255),l.push(c>>8&255),l.push(c&255)),c=c<<6|s.indexOf(n.charAt(e));return r=o%4*6,r===0?(l.push(c>>16&255),l.push(c>>8&255),l.push(c&255)):r===18?(l.push(c>>10&255),l.push(c>>2&255)):r===12&&l.push(c>>4&255),new Uint8Array(l)}a(k1r,"constructYamlBinary");function P1r(t){var e="",r=0,n,o,s=t.length,c=Hke;for(n=0;n<s;n++)n%3===0&&n&&(e+=c[r>>18&63],e+=c[r>>12&63],e+=c[r>>6&63],e+=c[r&63]),r=(r<<8)+t[n];return o=s%3,o===0?(e+=c[r>>18&63],e+=c[r>>12&63],e+=c[r>>6&63],e+=c[r&63]):o===2?(e+=c[r>>10&63],e+=c[r>>4&63],e+=c[r<<2&63],e+=c[64]):o===1&&(e+=c[r>>2&63],e+=c[r<<4&63],e+=c[64],e+=c[64]),e}a(P1r,"representYamlBinary");function D1r(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}a(D1r,"isBinary");var B1r=new sf("tag:yaml.org,2002:binary",{kind:"scalar",resolve:R1r,construct:k1r,predicate:D1r,represent:P1r}),N1r=Object.prototype.hasOwnProperty,M1r=Object.prototype.toString;function L1r(t){if(t===null)return!0;var e=[],r,n,o,s,c,l=t;for(r=0,n=l.length;r<n;r+=1){if(o=l[r],c=!1,M1r.call(o)!=="[object Object]")return!1;for(s in o)if(N1r.call(o,s))if(!c)c=!0;else return!1;if(!c)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}a(L1r,"resolveYamlOmap");function F1r(t){return t!==null?t:[]}a(F1r,"constructYamlOmap");var O1r=new sf("tag:yaml.org,2002:omap",{kind:"sequence",resolve:L1r,construct:F1r}),Q1r=Object.prototype.toString;function U1r(t){if(t===null)return!0;var e,r,n,o,s,c=t;for(s=new Array(c.length),e=0,r=c.length;e<r;e+=1){if(n=c[e],Q1r.call(n)!=="[object Object]"||(o=Object.keys(n),o.length!==1))return!1;s[e]=[o[0],n[o[0]]]}return!0}a(U1r,"resolveYamlPairs");function q1r(t){if(t===null)return[];var e,r,n,o,s,c=t;for(s=new Array(c.length),e=0,r=c.length;e<r;e+=1)n=c[e],o=Object.keys(n),s[e]=[o[0],n[o[0]]];return s}a(q1r,"constructYamlPairs");var H1r=new sf("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:U1r,construct:q1r}),W1r=Object.prototype.hasOwnProperty;function $1r(t){if(t===null)return!0;var e,r=t;for(e in r)if(W1r.call(r,e)&&r[e]!==null)return!1;return!0}a($1r,"resolveYamlSet");function j1r(t){return t!==null?t:{}}a(j1r,"constructYamlSet");var G1r=new sf("tag:yaml.org,2002:set",{kind:"mapping",resolve:$1r,construct:j1r}),wgt=E1r.extend({implicit:[w1r,S1r],explicit:[B1r,O1r,H1r,G1r]}),M_=Object.prototype.hasOwnProperty,gae=1,_gt=2,Sgt=3,Aae=4,Lke=1,V1r=2,cgt=3,z1r=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,K1r=/[\x85\u2028\u2029]/,Y1r=/[,\[\]\{\}]/,Rgt=/^(?:!|!!|![a-z\-]+!)$/i,kgt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function lgt(t){return Object.prototype.toString.call(t)}a(lgt,"_class");function r1(t){return t===10||t===13}a(r1,"is_EOL");function BP(t){return t===9||t===32}a(BP,"is_WHITE_SPACE");function i0(t){return t===9||t===32||t===10||t===13}a(i0,"is_WS_OR_EOL");function RM(t){return t===44||t===91||t===93||t===123||t===125}a(RM,"is_FLOW_INDICATOR");function J1r(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}a(J1r,"fromHexCode");function X1r(t){return t===120?2:t===117?4:t===85?8:0}a(X1r,"escapedHexLen");function Z1r(t){return 48<=t&&t<=57?t-48:-1}a(Z1r,"fromDecimalCode");function ugt(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}a(ugt,"simpleEscapeSequence");function exr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}a(exr,"charFromCodepoint");var Pgt=new Array(256),Dgt=new Array(256);for(DP=0;DP<256;DP++)Pgt[DP]=ugt(DP)?1:0,Dgt[DP]=ugt(DP);var DP;function txr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||wgt,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}a(txr,"State$1");function Bgt(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=Hvr(r),new n0(e,r)}a(Bgt,"generateError");function gn(t,e){throw Bgt(t,e)}a(gn,"throwError");function yae(t,e){t.onWarning&&t.onWarning.call(null,Bgt(t,e))}a(yae,"throwWarning");var dgt={YAML:a(function(e,r,n){var o,s,c;e.version!==null&&gn(e,"duplication of %YAML directive"),n.length!==1&&gn(e,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),o===null&&gn(e,"ill-formed argument of the YAML directive"),s=parseInt(o[1],10),c=parseInt(o[2],10),s!==1&&gn(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=c<2,c!==1&&c!==2&&yae(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:a(function(e,r,n){var o,s;n.length!==2&&gn(e,"TAG directive accepts exactly two arguments"),o=n[0],s=n[1],Rgt.test(o)||gn(e,"ill-formed tag handle (first argument) of the TAG directive"),M_.call(e.tagMap,o)&&gn(e,'there is a previously declared suffix for "'+o+'" tag handle'),kgt.test(s)||gn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{gn(e,"tag prefix is malformed: "+s)}e.tagMap[o]=s},"handleTagDirective")};function N_(t,e,r,n){var o,s,c,l;if(e<r){if(l=t.input.slice(e,r),n)for(o=0,s=l.length;o<s;o+=1)c=l.charCodeAt(o),c===9||32<=c&&c<=1114111||gn(t,"expected valid JSON character");else z1r.test(l)&&gn(t,"the stream contains non-printable characters");t.result+=l}}a(N_,"captureSegment");function fgt(t,e,r,n){var o,s,c,l;for(Gl.isObject(r)||gn(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(r),c=0,l=o.length;c<l;c+=1)s=o[c],M_.call(e,s)||(e[s]=r[s],n[s]=!0)}a(fgt,"mergeMappings");function kM(t,e,r,n,o,s,c,l,u){var d,p;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),d=0,p=o.length;d<p;d+=1)Array.isArray(o[d])&&gn(t,"nested arrays are not supported inside keys"),typeof o=="object"&&lgt(o[d])==="[object Object]"&&(o[d]="[object Object]");if(typeof o=="object"&&lgt(o)==="[object Object]"&&(o="[object Object]"),o=String(o),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(d=0,p=s.length;d<p;d+=1)fgt(t,e,s[d],r);else fgt(t,e,s,r);else!t.json&&!M_.call(r,o)&&M_.call(e,o)&&(t.line=c||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,gn(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(e,o,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[o]=s,delete r[o];return e}a(kM,"storeMappingPair");function Wke(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):gn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}a(Wke,"readLineBreak");function Tl(t,e,r){for(var n=0,o=t.input.charCodeAt(t.position);o!==0;){for(;BP(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(e&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(r1(o))for(Wke(t),o=t.input.charCodeAt(t.position),n++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&yae(t,"deficient indentation"),n}a(Tl,"skipSeparationSpace");function xae(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||i0(r)))}a(xae,"testDocumentSeparator");function $ke(t,e){e===1?t.result+=" ":e>1&&(t.result+=Gl.repeat(`
`,e-1))}a($ke,"writeFoldedLines");function rxr(t,e,r){var n,o,s,c,l,u,d,p,m=t.kind,h=t.result,g;if(g=t.input.charCodeAt(t.position),i0(g)||RM(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(o=t.input.charCodeAt(t.position+1),i0(o)||r&&RM(o)))return!1;for(t.kind="scalar",t.result="",s=c=t.position,l=!1;g!==0;){if(g===58){if(o=t.input.charCodeAt(t.position+1),i0(o)||r&&RM(o))break}else if(g===35){if(n=t.input.charCodeAt(t.position-1),i0(n))break}else{if(t.position===t.lineStart&&xae(t)||r&&RM(g))break;if(r1(g))if(u=t.line,d=t.lineStart,p=t.lineIndent,Tl(t,!1,-1),t.lineIndent>=e){l=!0,g=t.input.charCodeAt(t.position);continue}else{t.position=c,t.line=u,t.lineStart=d,t.lineIndent=p;break}}l&&(N_(t,s,c,!1),$ke(t,t.line-u),s=c=t.position,l=!1),BP(g)||(c=t.position+1),g=t.input.charCodeAt(++t.position)}return N_(t,s,c,!1),t.result?!0:(t.kind=m,t.result=h,!1)}a(rxr,"readPlainScalar");function nxr(t,e){var r,n,o;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=o=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(N_(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,o=t.position;else return!0;else r1(r)?(N_(t,n,o,!0),$ke(t,Tl(t,!1,e)),n=o=t.position):t.position===t.lineStart&&xae(t)?gn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);gn(t,"unexpected end of the stream within a single quoted scalar")}a(nxr,"readSingleQuotedScalar");function ixr(t,e){var r,n,o,s,c,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return N_(t,r,t.position,!0),t.position++,!0;if(l===92){if(N_(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),r1(l))Tl(t,!1,e);else if(l<256&&Pgt[l])t.result+=Dgt[l],t.position++;else if((c=X1r(l))>0){for(o=c,s=0;o>0;o--)l=t.input.charCodeAt(++t.position),(c=J1r(l))>=0?s=(s<<4)+c:gn(t,"expected hexadecimal character");t.result+=exr(s),t.position++}else gn(t,"unknown escape sequence");r=n=t.position}else r1(l)?(N_(t,r,n,!0),$ke(t,Tl(t,!1,e)),r=n=t.position):t.position===t.lineStart&&xae(t)?gn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}gn(t,"unexpected end of the stream within a double quoted scalar")}a(ixr,"readDoubleQuotedScalar");function oxr(t,e){var r=!0,n,o,s,c=t.tag,l,u=t.anchor,d,p,m,h,g,A=Object.create(null),y,v,b,I;if(I=t.input.charCodeAt(t.position),I===91)p=93,g=!1,l=[];else if(I===123)p=125,g=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),I=t.input.charCodeAt(++t.position);I!==0;){if(Tl(t,!0,e),I=t.input.charCodeAt(t.position),I===p)return t.position++,t.tag=c,t.anchor=u,t.kind=g?"mapping":"sequence",t.result=l,!0;r?I===44&&gn(t,"expected the node content, but found ','"):gn(t,"missed comma between flow collection entries"),v=y=b=null,m=h=!1,I===63&&(d=t.input.charCodeAt(t.position+1),i0(d)&&(m=h=!0,t.position++,Tl(t,!0,e))),n=t.line,o=t.lineStart,s=t.position,PM(t,e,gae,!1,!0),v=t.tag,y=t.result,Tl(t,!0,e),I=t.input.charCodeAt(t.position),(h||t.line===n)&&I===58&&(m=!0,I=t.input.charCodeAt(++t.position),Tl(t,!0,e),PM(t,e,gae,!1,!0),b=t.result),g?kM(t,l,A,v,y,b,n,o,s):m?l.push(kM(t,null,A,v,y,b,n,o,s)):l.push(y),Tl(t,!0,e),I=t.input.charCodeAt(t.position),I===44?(r=!0,I=t.input.charCodeAt(++t.position)):r=!1}gn(t,"unexpected end of the stream within a flow collection")}a(oxr,"readFlowCollection");function sxr(t,e){var r,n,o=Lke,s=!1,c=!1,l=e,u=0,d=!1,p,m;if(m=t.input.charCodeAt(t.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(t.kind="scalar",t.result="";m!==0;)if(m=t.input.charCodeAt(++t.position),m===43||m===45)Lke===o?o=m===43?cgt:V1r:gn(t,"repeat of a chomping mode identifier");else if((p=Z1r(m))>=0)p===0?gn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?gn(t,"repeat of an indentation width identifier"):(l=e+p-1,c=!0);else break;if(BP(m)){do m=t.input.charCodeAt(++t.position);while(BP(m));if(m===35)do m=t.input.charCodeAt(++t.position);while(!r1(m)&&m!==0)}for(;m!==0;){for(Wke(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!c||t.lineIndent<l)&&m===32;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!c&&t.lineIndent>l&&(l=t.lineIndent),r1(m)){u++;continue}if(t.lineIndent<l){o===cgt?t.result+=Gl.repeat(`
`,s?1+u:u):o===Lke&&s&&(t.result+=`
`);break}for(n?BP(m)?(d=!0,t.result+=Gl.repeat(`
`,s?1+u:u)):d?(d=!1,t.result+=Gl.repeat(`
`,u+1)):u===0?s&&(t.result+=" "):t.result+=Gl.repeat(`
`,u):t.result+=Gl.repeat(`
`,s?1+u:u),s=!0,c=!0,u=0,r=t.position;!r1(m)&&m!==0;)m=t.input.charCodeAt(++t.position);N_(t,r,t.position,!1)}return!0}a(sxr,"readBlockScalar");function pgt(t,e){var r,n=t.tag,o=t.anchor,s=[],c,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,gn(t,"tab characters must not be used in indentation")),!(u!==45||(c=t.input.charCodeAt(t.position+1),!i0(c))));){if(l=!0,t.position++,Tl(t,!0,-1)&&t.lineIndent<=e){s.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,PM(t,e,Sgt,!1,!0),s.push(t.result),Tl(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)gn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=o,t.kind="sequence",t.result=s,!0):!1}a(pgt,"readBlockSequence");function axr(t,e,r){var n,o,s,c,l,u,d=t.tag,p=t.anchor,m={},h=Object.create(null),g=null,A=null,y=null,v=!1,b=!1,I;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=m),I=t.input.charCodeAt(t.position);I!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,gn(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),s=t.line,(I===63||I===58)&&i0(n))I===63?(v&&(kM(t,m,h,g,A,null,c,l,u),g=A=y=null),b=!0,v=!0,o=!0):v?(v=!1,o=!0):gn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,I=n;else{if(c=t.line,l=t.lineStart,u=t.position,!PM(t,r,_gt,!1,!0))break;if(t.line===s){for(I=t.input.charCodeAt(t.position);BP(I);)I=t.input.charCodeAt(++t.position);if(I===58)I=t.input.charCodeAt(++t.position),i0(I)||gn(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(kM(t,m,h,g,A,null,c,l,u),g=A=y=null),b=!0,v=!1,o=!1,g=t.tag,A=t.result;else if(b)gn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=d,t.anchor=p,!0}else if(b)gn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=d,t.anchor=p,!0}if((t.line===s||t.lineIndent>e)&&(v&&(c=t.line,l=t.lineStart,u=t.position),PM(t,e,Aae,!0,o)&&(v?A=t.result:y=t.result),v||(kM(t,m,h,g,A,y,c,l,u),g=A=y=null),Tl(t,!0,-1),I=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&I!==0)gn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&kM(t,m,h,g,A,null,c,l,u),b&&(t.tag=d,t.anchor=p,t.kind="mapping",t.result=m),b}a(axr,"readBlockMapping");function cxr(t){var e,r=!1,n=!1,o,s,c;if(c=t.input.charCodeAt(t.position),c!==33)return!1;if(t.tag!==null&&gn(t,"duplication of a tag property"),c=t.input.charCodeAt(++t.position),c===60?(r=!0,c=t.input.charCodeAt(++t.position)):c===33?(n=!0,o="!!",c=t.input.charCodeAt(++t.position)):o="!",e=t.position,r){do c=t.input.charCodeAt(++t.position);while(c!==0&&c!==62);t.position<t.length?(s=t.input.slice(e,t.position),c=t.input.charCodeAt(++t.position)):gn(t,"unexpected end of the stream within a verbatim tag")}else{for(;c!==0&&!i0(c);)c===33&&(n?gn(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(e-1,t.position+1),Rgt.test(o)||gn(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),c=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),Y1r.test(s)&&gn(t,"tag suffix cannot contain flow indicator characters")}s&&!kgt.test(s)&&gn(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{gn(t,"tag name is malformed: "+s)}return r?t.tag=s:M_.call(t.tagMap,o)?t.tag=t.tagMap[o]+s:o==="!"?t.tag="!"+s:o==="!!"?t.tag="tag:yaml.org,2002:"+s:gn(t,'undeclared tag handle "'+o+'"'),!0}a(cxr,"readTagProperty");function lxr(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&gn(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!i0(r)&&!RM(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&gn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}a(lxr,"readAnchorProperty");function uxr(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!i0(n)&&!RM(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&gn(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),M_.call(t.anchorMap,r)||gn(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Tl(t,!0,-1),!0}a(uxr,"readAlias");function PM(t,e,r,n,o){var s,c,l,u=1,d=!1,p=!1,m,h,g,A,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=c=l=Aae===r||Sgt===r,n&&Tl(t,!0,-1)&&(d=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;cxr(t)||lxr(t);)Tl(t,!0,-1)?(d=!0,l=s,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=d||o),(u===1||Aae===r)&&(gae===r||_gt===r?y=e:y=e+1,v=t.position-t.lineStart,u===1?l&&(pgt(t,v)||axr(t,v,y))||oxr(t,y)?p=!0:(c&&sxr(t,y)||nxr(t,y)||ixr(t,y)?p=!0:uxr(t)?(p=!0,(t.tag!==null||t.anchor!==null)&&gn(t,"alias node should not have any properties")):rxr(t,y,gae===r)&&(p=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(p=l&&pgt(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&gn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,h=t.implicitTypes.length;m<h;m+=1)if(A=t.implicitTypes[m],A.resolve(t.result)){t.result=A.construct(t.result),t.tag=A.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(M_.call(t.typeMap[t.kind||"fallback"],t.tag))A=t.typeMap[t.kind||"fallback"][t.tag];else for(A=null,g=t.typeMap.multi[t.kind||"fallback"],m=0,h=g.length;m<h;m+=1)if(t.tag.slice(0,g[m].tag.length)===g[m].tag){A=g[m];break}A||gn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&A.kind!==t.kind&&gn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+A.kind+'", not "'+t.kind+'"'),A.resolve(t.result,t.tag)?(t.result=A.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):gn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||p}a(PM,"composeNode");function dxr(t){var e=t.position,r,n,o,s=!1,c;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(c=t.input.charCodeAt(t.position))!==0&&(Tl(t,!0,-1),c=t.input.charCodeAt(t.position),!(t.lineIndent>0||c!==37));){for(s=!0,c=t.input.charCodeAt(++t.position),r=t.position;c!==0&&!i0(c);)c=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),o=[],n.length<1&&gn(t,"directive name must not be less than one character in length");c!==0;){for(;BP(c);)c=t.input.charCodeAt(++t.position);if(c===35){do c=t.input.charCodeAt(++t.position);while(c!==0&&!r1(c));break}if(r1(c))break;for(r=t.position;c!==0&&!i0(c);)c=t.input.charCodeAt(++t.position);o.push(t.input.slice(r,t.position))}c!==0&&Wke(t),M_.call(dgt,n)?dgt[n](t,n,o):yae(t,'unknown document directive "'+n+'"')}if(Tl(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Tl(t,!0,-1)):s&&gn(t,"directives end mark is expected"),PM(t,t.lineIndent-1,Aae,!1,!0),Tl(t,!0,-1),t.checkLineBreaks&&K1r.test(t.input.slice(e,t.position))&&yae(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&xae(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Tl(t,!0,-1));return}if(t.position<t.length-1)gn(t,"end of the stream or a document separator is expected");else return}a(dxr,"readDocument");function Ngt(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new txr(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,gn(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)dxr(r);return r.documents}a(Ngt,"loadDocuments");function fxr(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Ngt(t,r);if(typeof e!="function")return n;for(var o=0,s=n.length;o<s;o+=1)e(n[o])}a(fxr,"loadAll$1");function pxr(t,e){var r=Ngt(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new n0("expected a single document in the stream, but found more")}}a(pxr,"load$1");var mxr=fxr,hxr=pxr,Mgt={loadAll:mxr,load:hxr},Lgt=Object.prototype.toString,Fgt=Object.prototype.hasOwnProperty,jke=65279,gxr=9,Zq=10,Axr=13,yxr=32,Cxr=33,vxr=34,Oke=35,xxr=37,Exr=38,bxr=39,Ixr=42,Ogt=44,Txr=45,Cae=58,wxr=61,_xr=62,Sxr=63,Rxr=64,Qgt=91,Ugt=93,kxr=96,qgt=123,Pxr=124,Hgt=125,af={};af[0]="\\0";af[7]="\\a";af[8]="\\b";af[9]="\\t";af[10]="\\n";af[11]="\\v";af[12]="\\f";af[13]="\\r";af[27]="\\e";af[34]='\\"';af[92]="\\\\";af[133]="\\N";af[160]="\\_";af[8232]="\\L";af[8233]="\\P";var Dxr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Bxr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Nxr(t,e){var r,n,o,s,c,l,u;if(e===null)return{};for(r={},n=Object.keys(e),o=0,s=n.length;o<s;o+=1)c=n[o],l=String(e[c]),c.slice(0,2)==="!!"&&(c="tag:yaml.org,2002:"+c.slice(2)),u=t.compiledTypeMap.fallback[c],u&&Fgt.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[c]=l;return r}a(Nxr,"compileStyleMap");function Mxr(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new n0("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Gl.repeat("0",n-e.length)+e}a(Mxr,"encodeHex");var Lxr=1,eH=2;function Fxr(t){this.schema=t.schema||wgt,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Gl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Nxr(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?eH:Lxr,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}a(Fxr,"State");function mgt(t,e){for(var r=Gl.repeat(" ",e),n=0,o=-1,s="",c,l=t.length;n<l;)o=t.indexOf(`
`,n),o===-1?(c=t.slice(n),n=l):(c=t.slice(n,o+1),n=o+1),c.length&&c!==`
`&&(s+=r),s+=c;return s}a(mgt,"indentString");function Qke(t,e){return`
`+Gl.repeat(" ",t.indent*e)}a(Qke,"generateNextLine");function Oxr(t,e){var r,n,o;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(o=t.implicitTypes[r],o.resolve(e))return!0;return!1}a(Oxr,"testImplicitResolving");function vae(t){return t===yxr||t===gxr}a(vae,"isWhitespace");function tH(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==jke||65536<=t&&t<=1114111}a(tH,"isPrintable");function hgt(t){return tH(t)&&t!==jke&&t!==Axr&&t!==Zq}a(hgt,"isNsCharOrWhitespace");function ggt(t,e,r){var n=hgt(t),o=n&&!vae(t);return(r?n:n&&t!==Ogt&&t!==Qgt&&t!==Ugt&&t!==qgt&&t!==Hgt)&&t!==Oke&&!(e===Cae&&!o)||hgt(e)&&!vae(e)&&t===Oke||e===Cae&&o}a(ggt,"isPlainSafe");function Qxr(t){return tH(t)&&t!==jke&&!vae(t)&&t!==Txr&&t!==Sxr&&t!==Cae&&t!==Ogt&&t!==Qgt&&t!==Ugt&&t!==qgt&&t!==Hgt&&t!==Oke&&t!==Exr&&t!==Ixr&&t!==Cxr&&t!==Pxr&&t!==wxr&&t!==_xr&&t!==bxr&&t!==vxr&&t!==xxr&&t!==Rxr&&t!==kxr}a(Qxr,"isPlainSafeFirst");function Uxr(t){return!vae(t)&&t!==Cae}a(Uxr,"isPlainSafeLast");function Jq(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}a(Jq,"codePointAt");function Wgt(t){var e=/^\n* /;return e.test(t)}a(Wgt,"needIndentIndicator");var $gt=1,Uke=2,jgt=3,Ggt=4,SM=5;function qxr(t,e,r,n,o,s,c,l){var u,d=0,p=null,m=!1,h=!1,g=n!==-1,A=-1,y=Qxr(Jq(t,0))&&Uxr(Jq(t,t.length-1));if(e||c)for(u=0;u<t.length;d>=65536?u+=2:u++){if(d=Jq(t,u),!tH(d))return SM;y=y&&ggt(d,p,l),p=d}else{for(u=0;u<t.length;d>=65536?u+=2:u++){if(d=Jq(t,u),d===Zq)m=!0,g&&(h=h||u-A-1>n&&t[A+1]!==" ",A=u);else if(!tH(d))return SM;y=y&&ggt(d,p,l),p=d}h=h||g&&u-A-1>n&&t[A+1]!==" "}return!m&&!h?y&&!c&&!o(t)?$gt:s===eH?SM:Uke:r>9&&Wgt(t)?SM:c?s===eH?SM:Uke:h?Ggt:jgt}a(qxr,"chooseScalarStyle");function Hxr(t,e,r,n,o){t.dump=function(){if(e.length===0)return t.quotingType===eH?'""':"''";if(!t.noCompatMode&&(Dxr.indexOf(e)!==-1||Bxr.test(e)))return t.quotingType===eH?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),c=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(d){return Oxr(t,d)}switch(a(u,"testAmbiguity"),qxr(e,l,t.indent,c,u,t.quotingType,t.forceQuotes&&!n,o)){case $gt:return e;case Uke:return"'"+e.replace(/'/g,"''")+"'";case jgt:return"|"+Agt(e,t.indent)+ygt(mgt(e,s));case Ggt:return">"+Agt(e,t.indent)+ygt(mgt(Wxr(e,c),s));case SM:return'"'+$xr(e)+'"';default:throw new n0("impossible error: invalid scalar style")}}()}a(Hxr,"writeScalar");function Agt(t,e){var r=Wgt(t)?String(e):"",n=t[t.length-1]===`
`,o=n&&(t[t.length-2]===`
`||t===`
`),s=o?"+":n?"":"-";return r+s+`
`}a(Agt,"blockHeader");function ygt(t){return t[t.length-1]===`
`?t.slice(0,-1):t}a(ygt,"dropEndingNewline");function Wxr(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var d=t.indexOf(`
`);return d=d!==-1?d:t.length,r.lastIndex=d,Cgt(t.slice(0,d),e)}(),o=t[0]===`
`||t[0]===" ",s,c;c=r.exec(t);){var l=c[1],u=c[2];s=u[0]===" ",n+=l+(!o&&!s&&u!==""?`
`:"")+Cgt(u,e),o=s}return n}a(Wxr,"foldString");function Cgt(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,o=0,s,c=0,l=0,u="";n=r.exec(t);)l=n.index,l-o>e&&(s=c>o?c:l,u+=`
`+t.slice(o,s),o=s+1),c=l;return u+=`
`,t.length-o>e&&c>o?u+=t.slice(o,c)+`
`+t.slice(c+1):u+=t.slice(o),u.slice(1)}a(Cgt,"foldLine");function $xr(t){for(var e="",r=0,n,o=0;o<t.length;r>=65536?o+=2:o++)r=Jq(t,o),n=af[r],!n&&tH(r)?(e+=t[o],r>=65536&&(e+=t[o+1])):e+=n||Mxr(r);return e}a($xr,"escapeString");function jxr(t,e,r){var n="",o=t.tag,s,c,l;for(s=0,c=r.length;s<c;s+=1)l=r[s],t.replacer&&(l=t.replacer.call(r,String(s),l)),(UE(t,e,l,!1,!1)||typeof l>"u"&&UE(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=o,t.dump="["+n+"]"}a(jxr,"writeFlowSequence");function vgt(t,e,r,n){var o="",s=t.tag,c,l,u;for(c=0,l=r.length;c<l;c+=1)u=r[c],t.replacer&&(u=t.replacer.call(r,String(c),u)),(UE(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&UE(t,e+1,null,!0,!0,!1,!0))&&((!n||o!=="")&&(o+=Qke(t,e)),t.dump&&Zq===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=s,t.dump=o||"[]"}a(vgt,"writeBlockSequence");function Gxr(t,e,r){var n="",o=t.tag,s=Object.keys(r),c,l,u,d,p;for(c=0,l=s.length;c<l;c+=1)p="",n!==""&&(p+=", "),t.condenseFlow&&(p+='"'),u=s[c],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),UE(t,e,u,!1,!1)&&(t.dump.length>1024&&(p+="? "),p+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),UE(t,e,d,!1,!1)&&(p+=t.dump,n+=p));t.tag=o,t.dump="{"+n+"}"}a(Gxr,"writeFlowMapping");function Vxr(t,e,r,n){var o="",s=t.tag,c=Object.keys(r),l,u,d,p,m,h;if(t.sortKeys===!0)c.sort();else if(typeof t.sortKeys=="function")c.sort(t.sortKeys);else if(t.sortKeys)throw new n0("sortKeys must be a boolean or a function");for(l=0,u=c.length;l<u;l+=1)h="",(!n||o!=="")&&(h+=Qke(t,e)),d=c[l],p=r[d],t.replacer&&(p=t.replacer.call(r,d,p)),UE(t,e+1,d,!0,!0,!0)&&(m=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,m&&(t.dump&&Zq===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,m&&(h+=Qke(t,e)),UE(t,e+1,p,!0,m)&&(t.dump&&Zq===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,o+=h));t.tag=s,t.dump=o||"{}"}a(Vxr,"writeBlockMapping");function xgt(t,e,r){var n,o,s,c,l,u;for(o=r?t.explicitTypes:t.implicitTypes,s=0,c=o.length;s<c;s+=1)if(l=o[s],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,Lgt.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Fgt.call(l.represent,u))n=l.represent[u](e,u);else throw new n0("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}a(xgt,"detectType");function UE(t,e,r,n,o,s,c){t.tag=null,t.dump=r,xgt(t,r,!1)||xgt(t,r,!0);var l=Lgt.call(t.dump),u=n,d;n&&(n=t.flowLevel<0||t.flowLevel>e);var p=l==="[object Object]"||l==="[object Array]",m,h;if(p&&(m=t.duplicates.indexOf(r),h=m!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(o=!1),h&&t.usedDuplicates[m])t.dump="*ref_"+m;else{if(p&&h&&!t.usedDuplicates[m]&&(t.usedDuplicates[m]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(Vxr(t,e,t.dump,o),h&&(t.dump="&ref_"+m+t.dump)):(Gxr(t,e,t.dump),h&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!c&&e>0?vgt(t,e-1,t.dump,o):vgt(t,e,t.dump,o),h&&(t.dump="&ref_"+m+t.dump)):(jxr(t,e,t.dump),h&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&Hxr(t,t.dump,e,s,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new n0("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(d=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",t.dump=d+" "+t.dump)}return!0}a(UE,"writeNode");function zxr(t,e){var r=[],n=[],o,s;for(qke(t,r,n),o=0,s=n.length;o<s;o+=1)e.duplicates.push(r[n[o]]);e.usedDuplicates=new Array(s)}a(zxr,"getDuplicateReferences");function qke(t,e,r){var n,o,s;if(t!==null&&typeof t=="object")if(o=e.indexOf(t),o!==-1)r.indexOf(o)===-1&&r.push(o);else if(e.push(t),Array.isArray(t))for(o=0,s=t.length;o<s;o+=1)qke(t[o],e,r);else for(n=Object.keys(t),o=0,s=n.length;o<s;o+=1)qke(t[n[o]],e,r)}a(qke,"inspectNode");function Kxr(t,e){e=e||{};var r=new Fxr(e);r.noRefs||zxr(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),UE(r,0,n,!0,!0)?r.dump+`
`:""}a(Kxr,"dump$1");var Yxr=Kxr,Jxr={dump:Yxr};function Gke(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}a(Gke,"renamed");var lto=Mgt.load,uto=Mgt.loadAll,Vke=Jxr.dump;var dto=Gke("safeLoad","load"),fto=Gke("safeLoadAll","loadAll"),pto=Gke("safeDump","dump");var NP=Ne(xm());var zke=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{a(this,"SkillDump")}},Nu=class{constructor(){this.dump=new vr(25);this.promptsDump=new vr(1)}static{a(this,"ConversationDumper")}addResolvedSkill(e,r,n){let o=this.getDump(e);o.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new zke,this.dump.set(e,r)),r}addPrompt(e,r,n){let o=this.promptsDump.get(e);o===void 0&&(o=new Map,this.promptsDump.set(e,o)),o.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function Vgt(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}a(Vgt,"filterConversationTurns");function Dke(t){return Vgt(t).getLastTurn()?.id}a(Dke,"getLastTurnId");async function tgt(t){let e=Vgt(t.conversation),r=Dke(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let o=t.ctx.get(Nu).getDump(r),s=eEr(o,e.turns);pn.debug(t.ctx,`conversation.dump
`,`
`+s);let c=await tEr(o,t.ctx);return NP.default`
        ${Zxr(t.conversation,r)}
        ${Xxr(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${s}
        \`\`\`${c?`
${c}`:""}
        `}a(tgt,"getConversationDump");function Xxr(t){let e=t.get(on);return NP.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}a(Xxr,"getEditorInfoDumpMessage");function Zxr(t,e){return NP.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}a(Zxr,"getInfoDumpMessage");async function rgt(t,e,r){let n=t.ctx.get(jl),o="# Available skills",s=n.getDescriptors().filter(c=>t.ctx.get(no).getSupportedSkills(t.conversation.id).includes(c.id));if(r&&(s=s.filter(c=>c.id===r)),s.length===0)return`No skill with id ${r} available`;for(let c of s)o+=`
- ${c.id}`;t.turn.request.message&&rn(t.turn.request.message).trim().length>0&&(o+=`

**User message**: ${rn(t.turn.request.message)}`);for(let c of s){o+=`
## ${c.id}`,o+=NP.default`
            \n\n
            **Description**
            
            ${c.description()}`;let l=n.getSkill(c.id),u=await l?.resolver(t).resolveSkill(t);if(u){o+=NP.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${Vke(u)}
                \`\`\``;let d=await l?.processor(t).processSkill(u,t);if(d){let p=typeof d=="string"?d:d.elide(1e3).getText();o+=NP.default`
                    \n\n
                    **Processed value**
                    
                    ${p}`}else o+=`

**Unprocessable**`}else o+=`

**Unresolvable**`}return o}a(rgt,"getSkillsDump");function eEr(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,o)=>{let s={request:rn(n.request.message)};return n.response&&(s.response=rn(n.response.message)),s})};return Vke(r)}a(eEr,"toSimulationFormat");async function tEr(t,e){let r=t.resolutions.map(s=>s.files).flat(),n=r.filter((s,c)=>s&&r.indexOf(s)===c),o;for(let s of n)if(s&&s.status==="included"){o||(o=`The following files have been used:
`);let c=await e.get(Nn).getOrReadTextDocument(s),l;c.status==="valid"&&(l=c.document);let u=l?.getText();pn.debug(e,`conversation.dump.file
`,u),o+=`
**${s.uri}**

\`\`\`${l?.detectedLanguageId}
${u}
\`\`\``}return o}a(tEr,"fileDump");f();function Kke(t,e){let r=Xi(e.tokenizer),n=0;for(let o of t)n+=e.baseTokensPerMessage,o.role&&(n+=r.tokenize(o.role).length),o.name&&(n+=r.tokenize(o.name).length+e.baseTokensPerName),o.content&&(n+=r.tokenize(rn(o.content)).length);return n+=e.baseTokensPerCompletion,n}a(Kke,"countMessagesTokens");f();function zgt(t,e,r,n,o){let s=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),c=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),l=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",u=n?`The user is using ${n} as their operating system.`:"",d=o?`You use the ${o} large language model.`:"",p=r?`The user is logged in as ${r} on GitHub.`:"";return[s,u,d,p,l,c].filter(m=>m&&m!="").join(`
`)}a(zgt,"chatBasePrompt");f();f();f();f();f();function Kgt(t){let e=t.split(`
`),r=[],n=!1,o=[];for(let s of e)s.startsWith("```")?(n?(r.push([V0(o.join(`
`)),1]),o=[],r.push([new Ht([s]),1])):r.push([new Ht([s]),1]),n=!n):n?o.push(s):r.push([new Ht([s]),.8]);return n&&(r.push([V0(o.join(`
`)),1]),r.push([new Ht(["```"]),1])),new Ht(r)}a(Kgt,"fromMessage");function DM(t){let e=Yke(t),r=[];for(let n=0;n<e.length;n++){let o=e[n],s=Ygt(o.request,n+1),c=o.response&&o.response?.type!=="meta"?Ygt(o.response):"",l=s;c!==""&&(l+=`
`+c+(e.length>1&&n!==e.length-1?`
`:"")),r.push(Kgt(l))}return r.length>0?new Ht([[new Ht(["Consider the following conversation history:"]),1],[D_(r,"inverseLinear"),1]]):null}a(DM,"fromHistory");var rEr=5;function Yke(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&rn(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,rEr).reverse()}a(Yke,"filterTurns");function Ygt(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=rn(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${rn(t.message)}`}a(Ygt,"formatTurnMessage");f();f();f();var nEr=4,Jke={skillIds:[]},Eae=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{a(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,o,s){let c=e.conversation.getLastTurn().request.message;if(r.length>0){let l=await Go.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),u={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:l},d=await this.ctx.get(Cd).toPrompt(e,u),p=o.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:d.tokens}),m={modelConfiguration:l,messages:d.messages,uiKind:s,llmInteraction:e.toLlmInteraction()};if(d.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");m.tool_choice=d.toolConfig.tool_choice,m.tools=d.toolConfig.tools;let h=await this.chatFetcher.fetchResponse(m,n,p);return h.type!=="success"&&(kr.error(this.ctx,"Failed to fetch prompt context, trying again..."),h=await this.chatFetcher.fetchResponse(m,n,p)),await e.ctx.get(Il).inspectFetchResult(h),this.handleResult(h,p,rn(c),s,d.toolConfig)}else return Jke}handleResult(e,r,n,o,s){if(e.type!=="success")return this.telemetryError(r,e),Jke;let l;if(e.toolCalls&&e.toolCalls.length>0)l=s.extractArguments(e.toolCalls[0]).skillIds?.slice(0,nEr);else return kr.error(this.ctx,"Missing tool call in meta prompt response"),Jke;let u=r.extendedBy({uiKind:o,skillIds:l?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),d=u.extendedBy({messageText:n});return Pt(this.ctx,`${Au(o)}.metaPrompt`,u,0),Pt(this.ctx,`${Au(o)}.promptContext`,d,1),{skillIds:l??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Pt(this.ctx,"conversation.promptContextError",n,1)}};f();f();f();var bae=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{a(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return he(e,r,"org.springframework.boot","Spring Boot"),he(e,r,"jakarta.jakartaee-api","Jakarta EE"),he(e,r,"javax:javaee-api","Java EE"),he(e,r,"org.apache.struts:struts2-core","Apache Struts"),he(e,r,"org.hibernate:hibernate-core","Hibernate"),he(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),he(e,r,"javax.faces:jsf-api","JSF"),he(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return he(e,r,"com.google.guava","Google Guava"),he(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),he(e,r,"org.apache.commons:commons-io","Apache Commons IO"),he(e,r,"joda-time:joda-time","Joda-Time"),he(e,r,"com.google.code.gson:gson","Google Gson"),he(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),he(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),he(e,r,"org.apache.commons:commons-net","Apache Commons Net"),he(e,r,"org.apache.poi:poi","Apache POI"),he(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),he(e,r,"junit:junit","JUnit"),he(e,r,"org.testng:testng","TestNG"),he(e,r,"org.spockframework:spock-core","Spock"),he(e,r,"io.cucumber:cucumber-java","Cucumber"),he(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return he(e,r,"org.mockito","Mockito"),he(e,r,"org.assertj","AssertJ"),he(e,r,"org.hamcrest","Hamcrest"),he(e,r,"org.powermock","PowerMock"),he(e,r,"org.jmock","JMock"),he(e,r,"org.easymock","EasyMock"),he(e,r,"org.jmockit:jmockit","JMockit"),he(e,r,"com.github.tomakehurst:wiremock","WireMock"),he(e,r,"org.dbunit:dbunit","DBUnit"),he(e,r,"com.icegreen:greenmail","GreenMail"),he(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),he(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),he(e,r,"io.rest-assured:rest-assured","Rest-Assured"),he(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),he(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},Iae=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{a(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"@types/node","Node.js"),he(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||he(e,r,"react","React"),he(e,r,"angular","Angular"),he(e,r,"vue","Vue.js"),he(e,r,"ember","Ember.js"),he(e,r,"backbone","Backbone.js"),he(e,r,"meteor","Meteor"),he(e,r,"polymer","Polymer"),he(e,r,"aurelia","Aurelia"),he(e,r,"knockout","Knockout.js"),he(e,r,"dojo","Dojo Toolkit"),he(e,r,"mithril","Mithril.js"),he(e,r,"marionette","Marionette.js"),he(e,r,"marko","Marko.js"),he(e,r,"svelte","Svelte"),he(e,r,"hyperapp","Hyperapp"),he(e,r,"inferno","Inferno.js"),he(e,r,"preact","Preact"),he(e,r,"riot","Riot.js"),he(e,r,"moon","Moon.js"),he(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return he(e,r,"lodash","Lodash"),he(e,r,"moment","Moment.js"),he(e,r,"axios","Axios"),he(e,r,"redux","Redux"),he(e,r,"recoil","Recoil"),he(e,r,"jquery","jQuery"),he(e,r,"d3","D3.js"),he(e,r,"underscore","Underscore.js"),he(e,r,"ramda","Ramda"),he(e,r,"immutable","Immutable.js"),he(e,r,"rxjs","RxJS"),he(e,r,"three","Three.js"),he(e,r,"socket.io","Socket.IO"),he(e,r,"express","Express.js"),he(e,r,"next","Next.js"),he(e,r,"puppeteer","Puppeteer"),he(e,r,"cheerio","Cheerio"),he(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"jest","Jest"),he(e,r,"mocha","Mocha"),he(e,r,"jasmine","Jasmine"),he(e,r,"ava","AVA"),he(e,r,"qunit","QUnit"),he(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return he(e,r,"chai","Chai"),he(e,r,"sinon","Sinon"),he(e,r,"enzyme","Enzyme"),he(e,r,"protractor","Protractor"),he(e,r,"supertest","Supertest"),he(e,r,"nock","Nock"),he(e,r,"cypress","Cypress"),he(e,r,"@testing-library/react","React Testing Library"),r}},Tae=class{constructor(){this.languageId="go"}static{a(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"github.com/gorilla/mux","Gorilla Mux"),he(e,r,"github.com/go-chi/chi","Chi"),he(e,r,"github.com/gin-gonic/gin","Gin"),he(e,r,"github.com/labstack/echo","Echo"),he(e,r,"github.com/revel/revel","Revel"),he(e,r,"github.com/astaxie/beego","Beego"),he(e,r,"github.com/go-martini/martini","Martini"),he(e,r,"github.com/gobuffalo/buffalo","Buffalo"),he(e,r,"github.com/goji/goji","Goji"),he(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return he(e,r,"net/http","net/http"),he(e,r,"fmt","fmt"),he(e,r,"io","io"),he(e,r,"time","time"),he(e,r,"math","math"),he(e,r,"strconv","strconv"),he(e,r,"strings","strings"),he(e,r,"sort","sort"),he(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"github.com/onsi/ginkgo","ginkgo"),he(e,r,"github.com/onsi/gomega","gomega"),he(e,r,"github.com/stretchr/testify","testify"),he(e,r,"gopkg.in/check.v1","gocheck"),he(e,r,"github.com/franela/goblin","goblin"),he(e,r,"github.com/DATA-DOG/godog","godog"),he(e,r,"github.com/stesla/gospec","gospec"),he(e,r,"github.com/rjeczalik/gotest","gotest"),he(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return he(e,r,"github.com/stretchr/testify","Testify"),he(e,r,"github.com/smartystreets/goconvey","GoConvey"),he(e,r,"github.com/onsi/ginkgo","Ginkgo"),he(e,r,"github.com/golang/mock","GoMock"),he(e,r,"gopkg.in/check.v1","GoCheck"),he(e,r,"github.com/franela/goblin","Goblin"),he(e,r,"github.com/DATA-DOG/godog","GoDog"),he(e,r,"github.com/onsi/gomega","Gomega"),he(e,r,"github.com/stesla/gospec","GoSpec"),he(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},wae=class{constructor(){this.languageId=["python","jupyter"]}static{a(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"flask","Flask"),he(e,r,"django","Django"),he(e,r,"pyramid","Pyramid"),he(e,r,"tornado","Tornado"),he(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return he(e,r,"requests","requests"),he(e,r,"numpy","numpy"),he(e,r,"pandas","pandas"),he(e,r,"scipy","scipy"),he(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"pytest","Pytest"),he(e,r,"unittest","Unittest"),he(e,r,"doctest","Doctest"),he(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mock","Mock"),he(e,r,"hypothesis","Hypothesis"),he(e,r,"behave","Behave"),he(e,r,"lettuce","Lettuce"),he(e,r,"testify","Testify"),he(e,r,"pyhamcrest","PyHamcrest"),r}},_ae=class{constructor(){this.languageId=["php","blade"]}static{a(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"laravel/framework","Laravel"),he(e,r,"symfony/symfony","Symfony"),he(e,r,"slim/slim","Slim"),he(e,r,"cakephp/cakephp","CakePHP"),he(e,r,"yiisoft/yii2","Yii"),he(e,r,"zendframework/zendframework","Zend Framework"),he(e,r,"phalcon/cphalcon","Phalcon"),he(e,r,"bcosca/fatfree","Fat-Free"),he(e,r,"fuel/fuel","FuelPHP"),he(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return he(e,r,"monolog/monolog","Monolog"),he(e,r,"vlucas/phpdotenv","PHP dotenv"),he(e,r,"symfony/console","Symfony Console"),he(e,r,"guzzlehttp/guzzle","GuzzleHttp"),he(e,r,"ramsey/uuid","Ramsey UUID"),he(e,r,"doctrine/orm","Doctrine ORM"),he(e,r,"php-di/php-di","PHP-DI"),he(e,r,"phpunit/php-timer","PHPUnit Timer"),he(e,r,"symfony/finder","Symfony Finder"),he(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"phpunit/phpunit","PHPUnit"),he(e,r,"behat/behat","Behat"),he(e,r,"phpspec/phpspec","PHPSpec"),he(e,r,"codeception/codeception","Codeception"),he(e,r,"atoum/atoum","Atoum"),he(e,r,"pestphp/pest","PestPHP"),he(e,r,"kahlan/kahlan","Kahlan"),he(e,r,"peridot-php/peridot","Peridot"),he(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mockery/mockery","Mockery"),he(e,r,"php-mock/php-mock","PHP-Mock"),he(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),he(e,r,"padraic/mockery","Padraic Mockery"),he(e,r,"phpspec/prophecy","PHPSpec Prophecy"),he(e,r,"phpunit/php-invoker","PHPUnit Invoker"),he(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),he(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),he(e,r,"phpunit/php-timer","PHPUnit Timer"),he(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},Sae=class{constructor(){this.languageId="csharp"}static{a(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"Microsoft.NETCore.App",".NET Core"),he(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return he(e,r,"EntityFramework","Entity Framework"),he(e,r,"Newtonsoft.Json","Newtonsoft.Json"),he(e,r,"AutoMapper","AutoMapper"),he(e,r,"Serilog","Serilog"),he(e,r,"Dapper","Dapper"),he(e,r,"Polly","Polly"),he(e,r,"FluentValidation","FluentValidation"),he(e,r,"MediatR","MediatR"),he(e,r,"Hangfire","Hangfire"),he(e,r,"RabbitMQ.Client","RabbitMQ.Client"),he(e,r,"MassTransit","MassTransit"),he(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),he(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),he(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),he(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"xunit","xUnit"),he(e,r,"NUnit","NUnit"),he(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return he(e,r,"Moq","Moq"),he(e,r,"FluentAssertions","FluentAssertions"),he(e,r,"Bogus","Bogus"),he(e,r,"RestSharp","RestSharp"),he(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},Rae=class{constructor(){this.languageId="dart"}static{a(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"flutter","Flutter"),he(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return he(e,r,"dartx","dartx"),he(e,r,"provider","Provider"),he(e,r,"rxdart","RxDart"),he(e,r,"dio","Dio"),he(e,r,"json_serializable","json_serializable"),he(e,r,"freezed","Freezed"),he(e,r,"moor","Moor"),he(e,r,"hive","Hive"),he(e,r,"http","http"),he(e,r,"path","path"),he(e,r,"intl","intl"),he(e,r,"equatable","equatable"),he(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"test","test"),he(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mockito","mockito"),he(e,r,"bloc_test","bloc_test"),r}},kae=class{constructor(){this.languageId="ruby"}static{a(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"rails","Rails"),he(e,r,"sinatra","Sinatra"),he(e,r,"hanami","Hanami"),he(e,r,"grape","Grape"),he(e,r,"roda","Roda"),he(e,r,"padrino","Padrino"),he(e,r,"cuba","Cuba"),he(e,r,"ramaze","Ramaze"),he(e,r,"nyara","Nyara"),he(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return he(e,r,"active_record","ActiveRecord"),he(e,r,"sequel","Sequel"),he(e,r,"rom","ROM"),he(e,r,"datamapper","DataMapper"),he(e,r,"mongoid","Mongoid"),he(e,r,"neo4j","Neo4j"),he(e,r,"redis","Redis"),he(e,r,"cassandra","Cassandra"),he(e,r,"couchrest","CouchRest"),he(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"rspec","RSpec"),he(e,r,"minitest","Minitest"),he(e,r,"cucumber","Cucumber"),he(e,r,"spinach","Spinach"),he(e,r,"turnip","Turnip"),he(e,r,"bacon","Bacon"),he(e,r,"shoulda","Shoulda"),he(e,r,"test-unit","Test::Unit"),he(e,r,"wrong","Wrong"),he(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return he(e,r,"factory_bot","FactoryBot"),he(e,r,"faker","Faker"),he(e,r,"ffaker","FFaker"),he(e,r,"fabrication","Fabrication"),he(e,r,"machinist","Machinist"),he(e,r,"mocha","Mocha"),he(e,r,"flexmock","FlexMock"),he(e,r,"rr","RR"),he(e,r,"bourne","Bourne"),he(e,r,"not_a_mock","NotAMock"),r}},Pae=class{constructor(){this.languageId="rust"}static{a(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"tokio","tokio"),he(e,r,"async-std","async-std"),he(e,r,"hyper","hyper"),he(e,r,"actix-web","actix-web"),he(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return he(e,r,"serde","serde"),he(e,r,"regex","regex"),he(e,r,"rand","rand"),he(e,r,"log","log"),he(e,r,"lazy_static","lazy_static"),he(e,r,"libc","libc"),he(e,r,"futures","futures"),he(e,r,"rayon","rayon"),he(e,r,"reqwest","reqwest"),he(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"test-case","test-case"),he(e,r,"proptest","proptest"),he(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mockall","mockall"),he(e,r,"double","double"),he(e,r,"rstest","rstest"),he(e,r,"mockiato","mockiato"),he(e,r,"mock_derive","mock_derive"),he(e,r,"mocktopus","mocktopus"),he(e,r,"mockers","mockers"),he(e,r,"mock_it","mock_it"),r}},Dae=class{constructor(){this.languageId=["c","cpp"]}static{a(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function he(t,e,r,n){let o=t.libraries.find(s=>s.name.toLowerCase().indexOf(r.toLowerCase())>-1);o&&e.push({name:n,version:o.version})}a(he,"addFromLibraries");var Bae=class{constructor(e,r){this.languageId=e;this.delegates=r}static{a(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function Xgt(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}a(Xgt,"determineProgrammingLanguage");var Jgt=[new bae,new Iae,new Tae,new wae,new _ae,new Sae,new Rae,new kae,new Pae,new Dae];function Zgt(t){let e=Jgt.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new Bae(t,Jgt);return new Xke(e)}a(Zgt,"getMetadataLookup");var Xke=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{a(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(o=>o.name===n.name)||r.push(n)}),r}};var eAt=E.Object({name:E.String(),version:E.Optional(E.String())}),tAt=E.Object({language:E.Object({id:E.String(),name:E.String(),version:E.Optional(E.String())}),libraries:E.Array(eAt),buildTools:E.Array(eAt)}),Zke=class{constructor(e){this.turnContext=e}static{a(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Ht([`The user is working on a project with the following characteristics:
`]),1]);let n=Zgt(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Ht(r)}addProgrammingLanguage(e,r){let n=Xgt(e);this.turnContext.collectLabel(n1,n),r.push([new Ht([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(s=>{this.turnContext.collectLabel(n1,`${s.name}${s.version?" "+s.version:""}`)});let o=n.map(s=>`  - ${s.name}${s.version?" "+s.version:""}`).join(`
`);e.push([new Ht([`${r}
${o}`]),1])}}},n1="project-metadata",Nae=class{constructor(e){this._resolver=e;this.id=n1;this.type="explicit"}static{a(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new Zke(e)}};f();var rAt=Ne(require("path"));var ePe=class{constructor(e){this.turnContext=e}static{a(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(Nn),n=[],o=this.filterIncludedFiles(e),s=(await this.toFileChunks(o,r)).filter(c=>c!==void 0).flat();if(s.length>0)return n.push([new Ht(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...s),new Ht(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),o=ua(n);if(await this.turnContext.collectFile(Lae,r.uri,o),n.status==="valid"){let s=e.getRelativePath(n.document);if(o==="included"){let c=new Xv(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${s}\`:`,1],[c.fromAllCode({addLineNumbers:!1}),1]]}else if(o==="empty")return[[new Ht([`The referenced file \`${s}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Ht([`The referenced file \`${rAt.basename(r.uri)}\` is content excluded.`]),1]]}},tPe=class{static{a(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},Lae="references",Mae=class{constructor(){this.id=Lae;this.type="implicit"}static{a(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new tPe}processor(e){return new ePe(e)}};var MP=a(()=>[n1,Ty,Lae,of],"mandatorySkills"),Fae=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new Eae(e,this.chatFetcher)}static{a(this,"ConversationContextCollector")}async collectContext(e,r,n,o,s,c){let l=[];if(s){let u=s.requiredSkills?await s.requiredSkills(e.ctx):[];l.push(...u.filter(d=>!MP().includes(d)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,o)).skillIds.reverse().forEach(d=>{!l.includes(d)&&!MP().includes(d)&&l.push(d)});if(c){let u=await c.additionalSkills(e.ctx);l.push(...u.filter(d=>!MP().includes(d)))}return l.push(...MP()),l=l.filter(u=>!this.isIgnoredSkill(u,e.turn)),{skillIds:e.ctx.get(no).filterSupportedSkills(e.conversation.id,l)}}async selectableSkillDescriptors(e,r,n){let o=await this.getNonSelectableSkills(e),s=e.get(no).getSupportedSkills(r.id),c=e.get(jl).getDescriptors(),l=[];for(let u of c){if(o.includes(u.id)||!s.includes(u.id))continue;(u.isAvailable?await u.isAvailable(e):!0)&&!this.isIgnoredSkill(u.id,n)&&l.push(u)}return l}async getNonSelectableSkills(e){let r=await t1(e),n=(await Promise.all(r.map(o=>o.additionalSkills(e)))).flat();return[...MP(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};f();f();var Oae=class{constructor(e,r,n,o){this.ctx=e;this.conversation=r;this.turn=n;this.progress=o;this.rounds=[]}static{a(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,o){let s=this.getRound(e);if(s||(s={roundId:e,reply:""},this.rounds.push(s)),s.toolCalls?.find(l=>l.id===r))kr.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let l={id:r,name:n,progressMessage:o,status:"running"};s.toolCalls=[l],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[s]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,o=>{o.status="completed",o.result=n.data,n.toolResultMessage&&(o.progressMessage=n.toolResultMessage),o.resultDetails=n.toolResultDetails})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let o=n.toolCalls?.filter(s=>s.status==="running").map(s=>(s.status=e,s));if(o&&o.length>0)return n.toolCalls=o,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,o=>{o.status="error",o.error=n||"Unknown error"})}async update(e,r,n){let o=this.rounds.find(c=>c.roundId===e);o||(o={roundId:e,reply:""},this.rounds.push(o));let s=o.toolCalls?.find(c=>c.id===r);s?(n(s),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})):kr.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var Qae=class{constructor(e,r,n,o){this.ctx=e;this.conversation=r;this.turn=n;this.progress=o;this.steps=[]}static{a(this,"Steps")}async start(e,r,n){let o=this.steps.find(s=>s.id===e);if(!o)o={id:e,title:r,description:n,status:"running"},this.steps.push(o),await this.progress.report(this.conversation,this.turn,{steps:[o]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(o=>o.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):kr.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};var L_=class{constructor(e,r,n,o){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=o;this.skillResolver=new rPe(this),this.steps=new Qae(e,r,n,e.get(Ls)),this.collector=new nPe(r,n,e.get(Ls)),this.agentToolCalls=new Oae(e,r,n,e.get(Ls))}static{a(this,"TurnContext")}setResolvedModelConfiguration(e){this.turn.resolvedModelConfiguration=e}toLlmInteraction(){if(this.conversation.source==="inline")return Yd.user("conversation-inline",this.turn.telemetryId);{let e=this.turn.chatMode==="Agent"?"conversation-agent":"conversation-panel";return this.agentToolCalls.rounds.length?Yd.agent(e,this.turn.telemetryId):Yd.user(e,this.turn.telemetryId)}}async collectFile(e,r,n,o){let s={type:"file",collector:e,uri:r,status:n};o&&(s.range=o),await this.collector.collect(s)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(Ls).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}clearCopilotEditsSessionHeader(){this.copilotEditsSessionHeader=void 0}setCopilotEditsSessionHeader(e){this.copilotEditsSessionHeader=e}},Uae=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{a(this,"CycleError")}},rH=class extends Error{static{a(this,"ConversationAbortError")}constructor(e){super(e)}},rPe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{a(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(no).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(Nu).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let o=await this.newlyResolve(e);return this.resolveStack.pop(),o}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new Uae(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(jl).getSkill(e);try{let o=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(o)return this.turnContext.ctx.get(Nu).addResolvedSkill(this.turnContext.turn.id,e,o),o}catch(o){if(o instanceof Uae||o instanceof rH)throw o;kr.exception(this.turnContext.ctx,o,`Error while resolving skill ${e}`)}}},nPe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{a(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function nAt(t,e){let[r,n,o]=await oEr(t,e);return o.push(...cEr(t)),r.length>0||n.length>0?[new Ht([[new Ht(["Consider the additional context:"]),1],[D_(r,"inverseLinear"),.9],...n]),o]:[null,o]}a(nAt,"fromSkills");async function oEr(t,e){let r=[],n=[],o=[],s=[...t.turn.skills].reverse();for(let c of s){if(!await lEr(t,c.skillId,e?.languageId??""))continue;let[l,u]=await sEr(t,c.skillId);l&&(MP().indexOf(c.skillId)===-1?n.push(l):o.push(l)),r.push(u)}return n.reverse(),o.reverse(),r.reverse(),[n,o,r]}a(oEr,"handleSkillsInReverse");async function sEr(t,e){let n=t.ctx.get(jl).getSkill(e);try{let o=Date.now(),s=await t.skillResolver.resolve(e),c=Date.now()-o;if(s){let l=n?.processor(t),u=Date.now(),d=await l?.processSkill(s,t),p=Date.now()-u;return d?await aEr(t,n,l,d,c,p):[void 0,await qae(t,n,"unprocessable",void 0,c,p)]}else return[void 0,await qae(t,n,"unresolvable",void 0,c)]}catch(o){if(kr.exception(t.ctx,o,`Error while resolving skill ${e}`),o instanceof rH)throw o;return[void 0,await qae(t,n,"failed")]}}a(sEr,"safelyProcessSkill");async function aEr(t,e,r,n,o,s){let c;return typeof n=="string"?c=new Ht([[n,1]]):c=n,[[c,r?.value()||0],await qae(t,e,"resolved",c,o,s)]}a(aEr,"handleProcessedSkill");async function qae(t,e,r,n,o,s){let l=t.collector.collectiblesForCollector(e?.id??"unknown").filter(d=>d.type==="file"),u={skillId:e?.id??"unknown",resolution:r,files:l,resolutionTimeMs:o,processingTimeMs:s};if(n){let d=await t.ctx.get(ya).getBestChatModelConfig(Ah("user")),p=n.elide(d.maxRequestTokens).getText();u.tokensPreEliding=Xi(d.tokenizer).tokenLength(p)}return t.ctx.get(Nu).addResolution(t.turn.id,u),u}a(qae,"determineResolution");function cEr(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}a(cEr,"handleIgnoredSkills");async function lEr(t,e,r){if(e!==n1&&e!==Ty)return!0;let n=t.ctx.get(Lt),o=await n.fetchTokenAndUpdateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(o)?e===n1:e===Ty}a(lEr,"includeSkill");var iAt=Ne(xm());var LP=class{static{a(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],o=DM(e.conversation.turns.slice(0,-1));o!==null&&n.push([o,.6]);let[s,c]=await this.elidableSkills(e,r);return s!==null&&(o!==null&&n.push(["",.1]),n.push([s,.8])),[new Ht(n),c]}async elidableSkills(e,r){return await nAt(e,r)}async promptContent(e,r,n){let o,s={includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},c=e.turn.extractContextFilesUri();e.turn.workspaceFolders&&e.turn.workspaceFolders.length>0?o=await cy.getInstructions(e.ctx,e.turn.workspaceFolders,s,c):e.turn.workspaceFolder&&(o=await cy.getInstructions(e.ctx,[e.turn.workspaceFolder],s,c));let l=pm(e.conversation.getLastTurn().request.message),u;o?typeof l=="string"?u=o+`

`+l:u=[{type:"text",text:o},...l]:u=l;let[d,p]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:d},{role:"system",content:this.suffix(e)},{role:"user",content:u}],p]}},Hae=class extends LP{static{a(this,"PanelUserPromptStrategy")}suffix(e){return iAt.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var oAt=Ne(xm());var Wae=class extends LP{static{a(this,"InlineUserPromptStrategy")}suffix(e){return oAt.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var iPe=Ne(xm());var $ae=class{static{a(this,"MetaPromptStrategy")}elidableContent(e){let r=DM(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Ht(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return iPe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=Mdt(e.map(n=>n.id));return E.Object({skillIds:E.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:$w(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,o=e.examples?e.examples():[];return o.length>0&&(n+=`
Skill Examples:
${o.map(s=>`  - ${s}`).join(`
`)}`),n}promptContent(e,r,n){let o=e.conversation.getLastTurn().request.message,s=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:s},{role:"system",content:this.suffix(n)},{role:"user",content:iPe.default`
                    This is the user's question: 
                    ${rn(o).trim()} 
                `.trim()}],[]]}};f();var sAt=Ne(xm());var jae=class{static{a(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:E.Object({suggestedTitle:E.String({description:"The suggested title for the conversation"}),followUp:E.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=$w(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return sAt.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=DM(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Ht(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var uEr=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:E.Object({keywords:E.Array(E.Object({keyword:E.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:E.Array(E.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],Gae=class extends LP{static{a(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let o=pm(e.conversation.getLastTurn().request.message),s=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:o}];return Promise.resolve([s,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:uEr,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=$w(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let o=new Set;for(let s of n)if(!(!EZ(s,"keyword")||!s.keyword||typeof s.keyword!="string")&&(o.add(s.keyword.toLowerCase()),!(!EZ(s,"variations")||!s.variations||!Array.isArray(s.variations))))for(let c of s.variations)typeof c=="string"&&o.add(c.toLowerCase());return{keywords:Array.from(o)??[]}}}}};var oPe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{a(this,"PromptStrategyDescriptor")}};function nH(t,e,r){return new oPe(t,e,r)}a(nH,"descriptor");var aAt=[nH("user",Ah("user"),()=>new Hae),nH("inline",Ah("inline"),()=>new Wae),nH("meta",Ah("meta"),()=>new $ae),nH("suggestions",Ah("suggestions"),()=>new jae),nH("synonyms",Ah("synonyms"),()=>new Gae)],Vae=class{static{a(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let o=aAt.find(s=>s.promptType===r&&s.modelFamilies.includes(n));if(!o)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return o.strategy(e)}get descriptors(){return aAt}};var lAt=require("console");var Cd=class{constructor(e,r=new Vae){this.ctx=e;this.promptStrategyFactory=r}static{a(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),o=await this.ctx.get(Fi).getSession(),[s,c]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,o),r),[l,u]=this.elideChatMessages(s,r.modelConfiguration);return await this.ctx.get(Il).inspectPrompt({type:r.promptType,prompt:cAt(l),tokens:u}),this.ctx.get(Nu).addPrompt(e.turn.id,cAt(l),r.promptType),{messages:l,tokens:u,skillResolutions:c,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(l=>!(typeof l.content=="string"||Array.isArray(l.content)));(0,lAt.assert)(n.length==1,"Only one elidable message is supported right now.");let o=this.computeNonElidableTokens(e,r),s=r.maxRequestTokens-o,c=e.map(l=>typeof l.content=="string"||Array.isArray(l.content)?l:{role:l.role,content:dEr(l.content.elide(s).getText())}).filter(l=>l.content.length>0);return[c,Kke(c,r)]}computeNonElidableTokens(e,r){let n=e.filter(o=>typeof o.content=="string");return n.push({role:"user",content:""}),Kke(n,r)}safetyPrompt(e,r){let n=this.ctx.get(on).getEditorInfo().readableName??this.ctx.get(on).getEditorInfo().name,o=fEr(process.platform);return zgt(this.ctx,n,r?.login,o,e)}};function dEr(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}a(dEr,"processResultOfElidableText");function cAt(t){return t.map(e=>rn(e.content)).join(`

`)}a(cAt,"debugChatMessages");function fEr(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}a(fEr,"mapPlatformToOs");var F_=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{a(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,o){let s=await Go.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),c={promptType:"suggestions",modelConfiguration:s},l=await this.ctx.get(Cd).toPrompt(e,c),u=o.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:l.tokens}),d={modelConfiguration:s,messages:l.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(l.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");d.tool_choice=l.toolConfig.tool_choice,d.tools=l.toolConfig.tools;let p=await this.chatFetcher.fetchResponse(d,r,u);if(p.type!=="success"&&(kr.error(this.ctx,"Failed to fetch suggestions, trying again..."),p=await this.chatFetcher.fetchResponse(d,r,u)),p.type==="success"){if(!p.toolCalls||p.toolCalls.length===0){kr.error(this.ctx,"Missing tool call in suggestions response");return}let m=p.toolCalls[0],{followUp:h,suggestedTitle:g}=l.toolConfig.extractArguments(m);if(!h||!g){kr.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:h.trim(),suggestedTitle:g.trim(),promptTokenLen:l.tokens,numTokens:p.numTokens+m.approxNumTokens}}else if(p.type==="successMultiple"){kr.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(p.type==="tool_calls"){kr.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{kr.error(this.ctx,`Failed to fetch suggestions due to reason: ${p.reason}`);return}}};f();f();var FP=class extends Error{static{a(this,"CodingAgentError")}constructor(e){super(e),this.name=this.constructor.name}},zae=class extends FP{static{a(this,"CodingAgentAuthenticationError")}constructor(e){super(e)}},OP=class extends FP{static{a(this,"CodingAgentApiError")}constructor(e){super(e)}},BM=class extends OP{static{a(this,"CodingAgentUnauthorizedError")}constructor(e){super(e)}},_y=class extends FP{static{a(this,"CodingAgentValidationError")}constructor(e){super(e)}};var uAt=new dt("CodingAgentClient"),Kae=class{constructor(e,r){this.ctx=e;this.timeout=r??3e4}static{a(this,"CodingAgentClient")}getBaseUrl(){return"https://api.githubcopilot.com"}async createCodingTask(e,r,n,o,s){this.validateCreateTaskParams(e,r,n,o);let c=await this.getAccessToken(),u=`${this.getBaseUrl()}/agents/swe/v0/jobs/${n}/${o}`,d={problem_statement:`${e}

${r}`,event_type:"manual"},p={Authorization:`Bearer ${c}`,"Content-Type":"application/json",Accept:"application/json",...gh(this.ctx)};if(s?.isCancellationRequested)throw new Z0;uAt.debug(this.ctx,`Creating coding agent task for ${n}/${o} with title: ${e}`);let h=await this.ctx.get(Lr).fetch(u,{method:"POST",headers:p,body:JSON.stringify(d),timeout:this.timeout});if(s?.isCancellationRequested)throw new Z0;return await this.handleCreateTaskResponse(h)}validateCreateTaskParams(e,r,n,o){if(!e?.trim())throw new _y("Title is required and cannot be empty");if(!r?.trim())throw new _y("Body is required and cannot be empty");if(!n?.trim())throw new _y("Owner is required and cannot be empty");if(!o?.trim())throw new _y("Repository name is required and cannot be empty")}async getAccessToken(){let r=await this.ctx.get(Fi).getSession();if(!r?.accessToken)throw new zae("Failed to create coding task: Not authenticated with GitHub");return r.accessToken}async handleCreateTaskResponse(e){if(!e.ok){let o=await e.text().catch(()=>e.statusText);throw e.status===401?new BM("User does not have access to create PRs or push to the specified repository."):new OP(`API request failed: HTTP ${e.status} - ${o}`)}let r;try{r=await e.json()}catch(o){let s=o instanceof Error?o.message:JSON.stringify(o);throw new OP(`Failed to parse API response as JSON: ${s}`)}let n=r.pull_request?.html_url;if(!n)throw new OP("No pull request URL returned from API");return uAt.debug(this.ctx,`Coding task created successfully: ${n}`),n}};f();f();f();f();var i1=Ne(xa());function sPe(t){return{isCancellationRequested:t.isCancellationRequested,onCancellationRequested:a(e=>{let r=t.onCancellationRequested(e);return{dispose:a(()=>r.dispose(),"dispose")}},"onCancellationRequested")}}a(sPe,"adaptCancellationToken");function dAt(t){return{report:a(e=>{"value"in e&&typeof e.value=="string"?t({text:e.value}):t({})},"report")}}a(dAt,"adaptProgressCallback");function fAt(t){return{modelMaxPromptTokens:t.maxRequestTokens}}a(fAt,"createEndpointInfo");function pAt(t){let e={role:pEr(t.role),content:mEr(t.content)};return t.role===i1.Raw.ChatRole.Assistant&&"toolCalls"in t&&t.toolCalls&&(e.tool_calls=t.toolCalls.map(r=>({id:r.id,type:r.type,function:r.function,approxNumTokens:0}))),t.role===i1.Raw.ChatRole.Tool&&"toolCallId"in t&&t.toolCallId&&(e.tool_call_id=t.toolCallId),Object.entries(t).forEach(([r,n])=>{["role","content","toolCalls","toolCallId"].includes(r)||(e[r]=n)}),e}a(pAt,"convertToCopilotChatMessage");function pEr(t){switch(t){case i1.Raw.ChatRole.System:return"system";case i1.Raw.ChatRole.User:return"user";case i1.Raw.ChatRole.Assistant:return"assistant";case i1.Raw.ChatRole.Tool:return"tool";default:return"user"}}a(pEr,"convertRole");function mEr(t){return typeof t=="string"?t:Array.isArray(t)?t.length===1&&t[0].type===i1.Raw.ChatCompletionContentPartKind.Text?t[0].text:t.map(e=>e.type===i1.Raw.ChatCompletionContentPartKind.Text?{type:"text",text:e.text}:e.type===i1.Raw.ChatCompletionContentPartKind.Image?{type:"image_url",image_url:e.imageUrl}:{type:"text",text:String(e.type)}):String(t)}a(mEr,"convertContent");f();var qE=Ne(xa());var Yae=class extends qE.PromptRenderer{constructor(r,n,o,s,c){super(o,r,n,s);this.options=c}static{a(this,"InternalPromptRenderer")}async renderWithOptions(r,n,o){let s=await super.render(r,n);return{...this.options,...o}.collapseSystemMessages&&this.collapseConsecutiveSystemMessages(s.messages),s}collapseConsecutiveSystemMessages(r){let n=[],o=null;for(let s of r)if(s.role===qE.Raw.ChatRole.System&&o?.role===qE.Raw.ChatRole.System){let c=o.content.at(-1),l=s.content.at(0);c&&l&&c.type===qE.Raw.ChatCompletionContentPartKind.Text&&l.type===qE.Raw.ChatCompletionContentPartKind.Text?(c.text=c.text.trimEnd()+`
`+l.text,o.content=o.content.concat(s.content.slice(1))):(o.content.push({type:qE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),o.content=o.content.concat(s.content))}else n.push(s),o=s.role===qE.Raw.ChatRole.System?s:null;r.length=0,r.push(...n)}};f();f();function mAt(t){if(!t.startsWith("data:image/"))throw new Error("Could not read image: invalid base64 image string");let e=t.split(",")[1];switch(CEr(e)){case"image/png":return hEr(e);case"image/gif":return gEr(e);case"image/jpeg":case"image/jpg":return AEr(e);case"image/webp":return yEr(e);default:throw new Error("Unsupported image format")}}a(mAt,"getImageDimensions");function hEr(t){let e=atob(t.slice(0,50)).slice(16,24),r=Uint8Array.from(e,o=>o.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint32(0,!1),height:n.getUint32(4,!1)}}a(hEr,"getPngDimensions");function gEr(t){let e=atob(t.slice(0,50)),r=Uint8Array.from(e,o=>o.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint16(6,!0),height:n.getUint16(8,!0)}}a(gEr,"getGifDimensions");function AEr(t){let e=atob(t),r=Uint8Array.from(e,s=>s.charCodeAt(0)),n=r.length,o=2;for(;o<n;){let s=r[o]<<8|r[o+1],c=r[o+2]<<8|r[o+3];if(s>=65472&&s<=65474){let l=new DataView(r.buffer,o+5,4);return{height:l.getUint16(0,!1),width:l.getUint16(2,!1)}}o+=2+c}throw new Error("JPEG dimensions not found")}a(AEr,"getJpegDimensions");function yEr(t){let e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);if(e.slice(0,4)!=="RIFF"||e.slice(8,12)!=="WEBP")throw new Error("Not a valid WebP image.");let n=e.slice(12,16);if(n==="VP8 "){let o=(r[26]|r[27]<<8)&16383,s=(r[28]|r[29]<<8)&16383;return{width:o,height:s}}else if(n==="VP8L"){let o=(r[21]|r[22]<<8)&16383,s=(r[23]|r[24]<<8)&16383;return{width:o,height:s}}else if(n==="VP8X"){let o=((r[24]|r[25]<<8|r[26]<<16)&16777215)+1,s=((r[27]|r[28]<<8|r[29]<<16)&16777215)+1;return{width:o,height:s}}else throw new Error("Unsupported WebP format.")}a(yEr,"getWebPDimensions");function CEr(t){if(!t||t.length<4)return;let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return e[r]}a(CEr,"getMimeType");var QP=Ne(xa());var vEr=3,xEr=1,aPe=class{constructor(e,r){this.tokenizer=e;this.mode=QP.OutputMode.Raw;this._cache=new vr(5e3);this.baseTokensPerMessage=r.baseTokensPerMessage||vEr,this.baseTokensPerName=r.baseTokensPerName||xEr}static{a(this,"PromptTsxTokenizer")}tokenLength(e){if(typeof e=="string")return this._textTokenLength(e);switch(e.type){case QP.Raw.ChatCompletionContentPartKind.Text:return this._textTokenLength(e.text);case QP.Raw.ChatCompletionContentPartKind.Opaque:return e.tokenUsage||0;case QP.Raw.ChatCompletionContentPartKind.Image:return this.calculateImageTokenCost(e.imageUrl.url,e.imageUrl.detail);case QP.Raw.ChatCompletionContentPartKind.CacheBreakpoint:return 0}}_textTokenLength(e){if(!e)return 0;let r=this._cache.get(e);return r===void 0&&(r=this.tokenizer.tokenLength(e),this._cache.set(e,r)),r}countMessageTokens(e){let r=this.baseTokensPerMessage;typeof e.content=="string"?r+=this.tokenLength(e.content):Array.isArray(e.content)&&(r+=e.content.reduce((s,c)=>s+this.tokenLength(c),0));let n=e;n.name&&(r+=this.baseTokensPerName,r+=this.tokenLength(n.name));let o=e;if(o.tool_calls){let s=o.tool_calls,c=0;for(let l of s)c+=this.countObjectTokens({id:l.id,type:l.type,function:l.function});r+=Math.floor(c*1.5)}return r}countMessagesTokens(e){let r=this.baseTokensPerMessage;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){if(!e||e.length===0)return 0;let n=16,o=8;for(let s of e)n+=o,n+=this.countObjectTokens({name:s.name,description:s.description,parameters:s.inputSchema});return Math.floor(n*1.1)}countObjectTokens(e){let r=0;for(let[n,o]of Object.entries(e||{}))if(o){if(r+=this.tokenLength(n),typeof o=="string")r+=this.tokenLength(o);else if(o&&typeof o=="object"){let s=o;if("type"in s&&s.type==="text"&&"text"in s&&typeof s.text=="string")r+=this.tokenLength(s.text);else if("type"in s&&s.type==="image_url"&&"image_url"in s){let c=s.image_url;c.url&&c.url.startsWith("data")&&(r+=this.calculateImageTokenCost(c.url,c.detail))}else r+=this.countObjectTokens(s)}}return r}calculateImageTokenCost(e,r){let{width:n,height:o}=mAt(e);if(r==="low")return 85;if(n>2048||o>2048){let l=2048/Math.max(n,o);n=Math.round(n*l),o=Math.round(o*l)}let s=768/Math.min(n,o);return n=Math.round(n*s),o=Math.round(o*s),Math.ceil(n/512)*Math.ceil(o/512)*170+85}};function hAt(t){let e=Xi(t.tokenizer);return new aPe(e,t)}a(hAt,"createPromptTsxTokenizer");var O_=class t{static{a(this,"TsxPromptRenderer")}constructor(e,r,n,o={}){let s=fAt(n),c=hAt(n);this._internalRenderer=new Yae(e,r,s,c,o)}static create(e,r,n,o={}){return new t(e,r,n,o)}async renderPrompt(e,r,n){let o=e?dAt(e):void 0,s=r?sPe(r):void 0,c=await this._internalRenderer.renderWithOptions(o,s,n);return{messages:c.messages.map(pAt),tokenCount:c.tokenCount,hasIgnoredFiles:c.hasIgnoredFiles}}async countTokens(e){let r=e?sPe(e):void 0;return(await this._internalRenderer.renderWithOptions(void 0,r)).tokenCount}};async function cPe(t,e,r,n,o,s){return await O_.create(t,e,r,s).renderPrompt(n,o,s)}a(cPe,"renderTsxPrompt");f();var yAt=Ne(xa());var Yn=class extends yAt.PromptElement{static{a(this,"CopilotPromptElement")}constructor(e){super(e)}async prepare(e,r,n){if(!this.prepareCopilot)return;let o=r?gAt(r):void 0,s=n?AAt(n):void 0;return await this.prepareCopilot(e,o,s)}render(e,r,n,o){let s=n?gAt(n):void 0,c=o?AAt(o):void 0;return this.renderCopilot(e,r,s,c)}};function gAt(t){return e=>{let r=e.text||"";if(t?.report&&r){let n={value:r};t.report(n)}}}a(gAt,"adaptProgressCallbackFromVSCode");function AAt(t){return{get isCancellationRequested(){return t?.isCancellationRequested??!1},onCancellationRequested:a((e,r)=>{let n=t?.onCancellationRequested(e,r);return{dispose:a(()=>{n?.dispose()},"dispose")}},"onCancellationRequested")}}a(AAt,"adaptCancellationTokenFromVSCode");f();f();f();var wl=Ne(xa());function EEr(t){let e=t.filter(n=>n.type==="image_url"),r=t.filter(n=>n.type==="text").map(n=>n.text).join("");return{imageUrls:e,textContent:r}}a(EEr,"separateTextAndImages");function bEr(t){return t.map(e=>vscpp(wl.Image,{src:e.image_url.url,detail:e.image_url.detail}))}a(bEr,"createImageElements");function Jae(t){let{imageUrls:e,textContent:r}=EEr(t);return e.length===0?[vscpp(vscppf,null,r)]:[vscpp(wl.TextChunk,null,vscpp(vscppf,null,r)),...bEr(e)]}a(Jae,"renderMixedContent");function lPe(t){return t==null?[]:t.map(r=>({id:r.id||"",type:"function",function:{name:r.function.name,arguments:typeof r.function.arguments=="string"?r.function.arguments:JSON.stringify(r.function.arguments)},approxNumTokens:r.approxNumTokens}))}a(lPe,"convertToPromptTsxToolCall");function Xae(t){switch(t.role){case"assistant":return IEr(t);case"tool":return TEr(t);case"user":return wEr(t);case"system":return _Er(t);case"function":throw new Error("ChatRole.Function is not supported in prompt-tsx conversion. Use ChatRole.Tool instead.");default:throw new Error(`Unsupported chat role: ${String(t.role)}`)}}a(Xae,"convertChatMessageToPromptTsx");function IEr(t){return typeof t.content=="string"?vscpp(wl.AssistantMessage,{toolCalls:lPe(t.tool_calls)},vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(wl.AssistantMessage,{toolCalls:lPe(t.tool_calls)},Jae(t.content)):vscpp(wl.AssistantMessage,{toolCalls:lPe(t.tool_calls)},vscpp(vscppf,null,JSON.stringify(t.content)))}a(IEr,"renderAssistantMessage");function TEr(t){return typeof t.content=="string"?vscpp(wl.ToolMessage,{toolCallId:t.tool_call_id||""},vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(wl.ToolMessage,{toolCallId:t.tool_call_id||""},Jae(t.content)):vscpp(wl.ToolMessage,{toolCallId:t.tool_call_id||""},vscpp(vscppf,null,JSON.stringify(t.content)))}a(TEr,"renderToolMessage");function wEr(t){return typeof t.content=="string"?vscpp(wl.UserMessage,null,vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(wl.UserMessage,null,Jae(t.content)):vscpp(wl.UserMessage,null,vscpp(vscppf,null,JSON.stringify(t.content)))}a(wEr,"renderUserMessage");function _Er(t){return typeof t.content=="string"?vscpp(wl.SystemMessage,null,vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(wl.SystemMessage,null,Jae(t.content)):vscpp(wl.SystemMessage,null,vscpp(vscppf,null,JSON.stringify(t.content)))}a(_Er,"renderSystemMessage");var SEr=new dt("conversationHistoryPrompt"),NM=class extends Yn{static{a(this,"ConversationHistoryPrompt")}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:pm(n.request.message)}),n.response){let o=Hne(n.response.message,!0);o.forEach(s=>r.push(this.fixToolCallsInResponse(s,o)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,o=[];for(let s of n)r.some(l=>l.role==="tool"&&l.tool_call_id===s.id)?o.push(s):SEr.warn(this.props.ctx,`Tool call ${s.id} does not have a result in the response. Removing it from the tool calls history.`);return{...e,tool_calls:o}}return e}renderCopilot(){let e=this.createChatMessagesFromHistory(this.props.historyTurns);return vscpp(vscppf,null,e.map((r,n)=>Xae(r)))}};var ece=Ne(xa());var Zae=class extends Yn{static{a(this,"SummaryPrompt")}renderCopilot(){return vscpp(vscppf,null,vscpp(ece.SystemMessage,null,"You are an expert at summarizing chat conversations.",vscpp("br",null),vscpp("br",null),"You will be provided:",vscpp("br",null),vscpp("br",null),"- A series of user/assistant message pairs in chronological order",vscpp("br",null),"- A final user message indicating the user's intent.",vscpp("br",null),vscpp("br",null),"Your task is to:",vscpp("br",null),vscpp("br",null),"- Create a detailed summary of the conversation that captures the user's intent and key information.",vscpp("br",null),vscpp("br",null),"Keep in mind:",vscpp("br",null),vscpp("br",null),"- The user is iterating on a feature specification, bug fix, or other common programming task.",vscpp("br",null),"- There may be relevant code snippets or files referenced in the conversation.",vscpp("br",null),"- The user is collaborating with the assistant to refine their ideas and solutions, course-correcting the assistant as needed.",vscpp("br",null),"- The user will provide feedback on the assistant's suggestions and may request changes or improvements.",vscpp("br",null),"- Disregard messages that the user has indicated are incorrect, irrelevant, or unhelpful.",vscpp("br",null),"- Preserve relevant and actionable context and key information.",vscpp("br",null),"- If the conversation is long or discusses several tasks, keep the summary focused on the task indicated by the user's intent.",vscpp("br",null),"- Always prefer decisions in later messages over earlier ones.",vscpp("br",null),vscpp("br",null),"Structure your summary using the following format:",vscpp("br",null),vscpp("br",null),"TITLE: A brief title for the summary",vscpp("br",null),"USER INTENT: The user's goal or intent for the conversation",vscpp("br",null),"TASK DESCRIPTION: Main technical goals and user requirements",vscpp("br",null),"EXISTING: What has already been accomplished. Include file paths and other direct references.",vscpp("br",null),"PENDING: What still needs to be done. Include file paths and other direct references.",vscpp("br",null),"CODE STATE: A list of all files discussed or modified. Provide code snippets or diffs that illustrate important context.",vscpp("br",null),"RELEVANT CODE/DOCUMENTATION SNIPPETS: Key code or documentation snippets from referenced files or discussions.",vscpp("br",null),"OTHER NOTES: Any additional context or information that may be relevant."),vscpp(NM,{priority:1,ctx:this.props.ctx,historyTurns:this.props.conversationTurns}),vscpp(ece.UserMessage,null,vscpp(vscppf,null,"Here is the conversation to summarize above. Please provide a detailed summary following the specified format.")))}};function CAt(t){let e={title:"",userIntent:""},r=t.match(/TITLE:\s*(.+)/);r&&(e.title=r[1].trim());let n=t.match(/USER INTENT:\s*(.+)/);return n&&(e.userIntent=n[1].trim()),e}a(CAt,"parseStructuredSummary");var tce=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{a(this,"ChatMLConversationSummarizer")}async provideSummary(e,r,n){try{let o=e.turns.filter(h=>h.status==="success"&&h.request?.message&&h.response?.message),s=e.turns.length>0?e.turns[e.turns.length-1]:null,c=s&&s.request?.message?[...o,s]:o;if(c.length===0)return kr.debug(this.ctx,"No turns to summarize"),"";let l=n.modelProviderName&&n.userRequestedModel?await Pv(this.ctx,n.modelProviderName,n.userRequestedModel):await Go.getModelConfiguration(this.ctx,"user",n.userRequestedModel),p={messages:(await O_.create(Zae,{ctx:this.ctx,conversationTurns:c},l).renderPrompt(void 0,r)).messages,uiKind:n.uiKind,llmInteraction:n.llmInteraction,modelConfiguration:l},m=await this.chatFetcher.fetchResponse(p,r,n.telemetryWithExp,void 0);if(r.isCancellationRequested)return kr.debug(this.ctx,"Summarization cancelled"),"";if(m.type==="success"){let h=m.value.trim();return h.match(/^".*"$/)&&(h=h.slice(1,-1)),kr.debug(this.ctx,`Successfully generated conversation summary of length ${h.length}`),h}else{let h="reason"in m?m.reason:"unknown";return kr.error(this.ctx,`Failed to fetch conversation summary because of response type (${m.type}) and reason (${h})`),""}}catch(o){return kr.exception(this.ctx,o,"Error generating conversation summary"),""}}};var rce=new dt("codingAgentTurnProcessor"),nce=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Ls),this.chatFetcher=this.chatFetcher??new Bs(e.ctx),this.turnSuggestions=new F_(e.ctx,this.chatFetcher),this.codingAgentClient=new Kae(e.ctx),this.conversationSummarizer=new tce(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{a(this,"CodingAgentTurnProcessor")}async process(e,r,n,o,s,c){try{await this.processWithCodingAgent(e,r,this.turnContext,n,o,s,c)}catch(l){kr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,l);let u=l instanceof Error?l.message:JSON.stringify(l);this.turn.status="error",this.updateTurnResponseWithError(u),await this.endProgress({error:{message:u,code:wP.Unknown,responseIsIncomplete:!0}})}}async processWithCodingAgent(e,r,n,o,s,c,l){await this.conversationProgress.begin(this.conversation,this.turn,e);let u=await nc(this.turnContext.ctx,this.turnContext,{languageId:s?.detectedLanguageId??""});r.onCancellationRequested(async()=>{rce.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let d;if(this.turnContext.turn.workspaceFolders&&this.turnContext.turn.workspaceFolders.length>0?d=this.turnContext.turn.workspaceFolders[0]:d=this.turnContext.turn.workspaceFolder,!d)throw new _y("No workspace folder available for git repository detection");let m=await new em(this.turnContext.ctx).getRepo(d);if(!m||!m.isGitHub())throw new _y("No GitHub repository found in the workspace folder");if(!m.owner||!m.name)throw new _y("Could not determine repository owner and name");let h={owner:m.owner,name:m.name};await this.conversationProgress.report(this.conversation,this.turn,{reply:`Analyzing conversation to understand requirements...

`});let g=await this.summarizeConversation(r,u,c,l);if(r.isCancellationRequested)return;let A=rn(this.turn.request.message),y=A,v=A;g&&g.title&&(y=g.title),g&&g.userIntent&&(v=g.userIntent),await this.conversationProgress.report(this.conversation,this.turn,{reply:`Creating coding task in ${h.owner}/${h.name}: ${y}

`});let b=await this.codingAgentClient.createCodingTask(y,v,h.owner,h.name,r);if(r.isCancellationRequested)return;let I="Successfully created coding task!";I+=`

Pull Request: ${b}

`,await this.conversationProgress.report(this.conversation,this.turn,{reply:I}),this.turn.response={message:I,type:"model"},this.turn.status="success";let _={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let k=await this.fetchSuggestedTitle(r,u.extendedBy({messageSource:"chat.user"},{}));typeof k=="string"&&k!==""&&(_.suggestedTitle=k)}await this.endProgress(_)}catch(d){if(d instanceof va)rce.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,d),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(d instanceof BM)rce.warn(this.turnContext.ctx,`Unauthorized error in turn ${this.turn.id}`,d),this.turn.status="error",await this.conversationProgress.report(this.conversation,this.turn,{reply:"We are not able to create a coding task for you due to lack of permission. Please ensure you have permission to create PRs and push to the target repository. You also need to install GitHub App `GitHub Copilot IDE Plugin` to the target repository by following below steps to gain access:\n\n1. Visit https://github.com/apps/github-copilot-ide-plugin\n2. Click `Install` or `Configure` button to install the app to the owner account or organization of your target repository\n\nSend your request again after you have completed these steps."}),this.updateTurnResponseWithError(d.message),await this.endProgress({error:{message:d.message,code:wP.Default,responseIsIncomplete:!0}});else if(d instanceof FP)this.turn.status="error",this.updateTurnResponseWithError(d.message),await this.endProgress({error:{message:d.message,code:wP.Unknown,responseIsIncomplete:!0}});else throw rce.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,d),d}}async summarizeConversation(e,r,n,o){let s=await this.conversationSummarizer.provideSummary(this.conversation,e,{userRequestedModel:n||"",modelProviderName:o||"",llmInteraction:this.turnContext.toLlmInteraction(),uiKind:this.strategy.uiKind,telemetryWithExp:r});if(!s)return null;let c=CAt(s);return kr.debug(this.turnContext.ctx,`Generated conversation summary - Title: ${c.title}, Intent: ${c.userIntent}`),c}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return kr.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=Gk(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();f();var vAt="```",iH=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,REr=String.raw`${vAt}[\w]*?\n(?<codeblock>[\s\S]*?)\n${vAt}`,kEr=new RegExp(iH+`
`+REr,"gs"),uPe=["replace","delete"];function dPe(t,e){let r=t.matchAll(kEr),n=Array.from(r),o=[];for(let s of n){let c=s.groups;if(!c||!uPe.includes(c.mode))continue;let l=c.start?parseInt(c.start)-1:-1,u=c.end?parseInt(c.end)-1:l,p=c.codeblock.split(`
`),m=p[0].match(/^\s*/)?.[0]??"";p.forEach((y,v)=>{p[v]=y.slice(m.length)});let h={mode:c.mode,codeblock:p.join(`
`),start:l,end:u},g=fPe([h],e);if(!g)continue;let A={text:g,uri:e.uri};o.push({...h,updatedDocument:A})}return o}a(dPe,"extractEditsFromTaggedCodeblocks");function fPe(t,e){if(t.length===0)return;t.sort((n,o)=>n.start!==o.start?o.start-n.start:o.end-n.end);let r=e.getText().split(`
`);for(let n of t){let o=n.start,s=n.end,c=n.mode,l=n.codeblock.split(`
`);if(!(o<0||s<0||s<o)&&!(o>=r.length||s>=r.length)){if(c==="delete")r.splice(o,s-o+1);else if(c==="replace"){let u=r[o].match(/^\s*/)?.[0]??"";l.forEach((d,p)=>{l[p]=u+d}),r.splice(o,s-o+1,...l)}}}return r.join(`
`)}a(fPe,"applyEditsToDocument");var MM=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{a(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,o){let s="user",c=await Go.getModelConfiguration(e.ctx,s),l={promptType:s,modelConfiguration:c,languageId:r,userSelectedModelName:o};return await this.ctx.get(Cd).toPrompt(e,l)}extractEditsFromResponse(e,r){return[]}},ice=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{a(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let o=await this.getCurrentEditorSkill(e);if(!o)return;let s=await this.getDocumentIfValid(o.uri);if(!s)return;let c=n?.producesCodeEdits===!1?"user":"inline",l=await e.ctx.get(ya).getBestChatModelConfig(Ah(c)),u={promptType:c,modelConfiguration:l,languageId:r};return u.promptType==="inline"&&(this.currentDocument=s),await this.ctx.get(Cd).toPrompt(e,u)}async processResponse(e){let r=[],n=rn(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let o=await this.processInlineResponse(n,this.currentDocument);o&&r.push(o)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(of);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(Nn).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let o=dPe(e,r).filter(c=>uPe.includes(c.mode)),s=fPe(o,r);if(s)return await this.ctx.get(Il).documentDiff({original:r.getText(),updated:s}),{uri:r.uri,text:s}}extractEditsFromResponse(e,r){return dPe(e,r)}};var oce=class{constructor(){this.slug="github-copilot-coding-agent";this.name="GitHub Copilot Coding Agent";this.description="Create coding tasks that are executed by GitHub Copilot Coding Agent";this.avatarUrl=void 0}static{a(this,"BackendCodingAgent")}additionalSkills(e){return[]}turnProcessor(e){let r=new MM(e.ctx);return new nce(e,r)}};f();f();f();f();function xAt(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}a(xAt,"filterUnsupportedReferences");function EAt(t){return t?t.filter(e=>e.type==="github.web-search"):[]}a(EAt,"convertToCopilotReferences");var bAt=E.Object({type:E.Literal("github.web-search"),id:E.String(),data:E.Object({query:E.String(),type:E.String(),results:E.Optional(E.Array(E.Object({title:E.String(),excerpt:E.String(),url:E.String()})))}),metadata:E.Optional(E.Object({display_name:E.Optional(E.String()),display_icon:E.Optional(E.String())}))});var Q_=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{a(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),s=this.mapAnnotations(r.annotations).filter(c=>!this.appliedAnnotations.includes(c.id));this.append(n,s,xAt(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,o,s){this.deltaApplier(e,r,n,o,s),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(c=>c.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(s=>({...s,type:"code_vulnerability"})),o=e.for("IPCodeCitations").map(s=>({...s,type:"ip_code_citations"}));return r.push(...n),r.push(...o),r}};f();f();var o1=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{a(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let o=await this._doGetRepositoryInfo(e);if(o?.ok){let s=await o.json();return this.githubRepositoryInfoCache.set(r,s),s}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let o=await this.ctx.get(Fi).getSession(),s;if(o&&new URL(o.serverUrl).hostname===n)s=o;else{let u=await this.ctx.get(yA).getAuthRecord({authAuthority:n});u&&(s={accessToken:u.oauth_token,apiUrl:`https://api.${n}/`})}if(!s&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let c={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};s&&(c.Authorization=`Bearer ${s.accessToken}`);let l=new URL(`repos/${e}/${r}`,s?.apiUrl||`https://api.${n}`).href;return this.ctx.get(Lr).fetch(l,{method:"GET",headers:c})}};f();f();var IAt=E.Object({name:E.String(),url:E.String()}),TAt=E.Object({path:E.String(),head:E.Optional(E.Object({name:E.String(),upstream:E.Optional(IAt)})),remotes:E.Optional(E.Array(IAt))}),pPe=class{constructor(e){this.turnContext=e}static{a(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(s1,"git repository information");let r=[];return r.push([new Ht(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Ht([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Ht([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Ht(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Ht([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Ht(r)}},s1="git-metadata",sce=class extends Du{static{a(this,"GitMetadataSkill")}constructor(e){super(s1,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new pPe(r))}};async function wAt(t){let e=await t.skillResolver.resolve(of);if(e){let c=e.uri,l=RT(t.ctx,c);if(cGe(l))return{repoInfo:l,skillUsed:of}}let r=await t.skillResolver.resolve(s1);if(!r||!r.remotes||r.remotes.length===0){kr.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let o=r.remotes.find(c=>c.name==="origin")??r.remotes[0],s=JCe(o.url);if(s)return{repoInfo:{baseFolder:{uri:r.path},url:o.url,...s},skillUsed:s1}}a(wAt,"extractRepoInfo");async function _At(t){let e=[];return await PEr(t,e),await DEr(t,e),await BEr(t,e),e}a(_At,"skillsToReference");async function PEr(t,e){let r=await NEr(t);r&&e.push(r)}a(PEr,"addRepositoryReference");async function DEr(t,e){let r=await MEr(t);r&&e.push(r)}a(DEr,"addSelectionReference");async function BEr(t,e){let r=[],n=await FEr(t);n&&r.push(n),r.push(...await OEr(t)),r.length>0&&e.push(...r)}a(BEr,"addFileReferences");async function NEr(t){let e=await wAt(t);if(e){let r=t.ctx.get(o1),n=e.repoInfo.owner,o=e.repoInfo.repo,s=await r.getRepositoryInfo(e.repoInfo);if(s)return{type:"github.repository",id:`${n}/${o}`,data:{type:"repository",name:o,ownerLogin:n,id:s.id}}}}a(NEr,"gitMetadataToReference");async function MEr(t){let e=await t.skillResolver.resolve(of);if(e&&e.selection){let n=await t.ctx.get(Nn).getOrReadTextDocument(e),o=ua(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,o,e.selection),n.status==="valid")return LEr(e,n.document)}}a(MEr,"currentEditorToSelectionReference");function LEr(t,e){if(t.selection&&!IM(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}a(LEr,"extractSelection");async function FEr(t){let e=await t.skillResolver.resolve(of);if(e){let n=await t.ctx.get(Nn).getOrReadTextDocument(e),o=ua(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,o),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}a(FEr,"currentEditorToFileReference");async function OEr(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(Nn);for(let o of r)if(o.type==="file"){let s=await n.getOrReadTextDocument(o),c=ua(s);if(await t.collectFile(t.turn.agent.agentSlug,o.uri,c,o.selection),s.status==="valid"){let l=s.document.getText();e.push({type:"client.file",id:o.uri,data:{content:l,language:s.document.detectedLanguageId}})}}}return e}a(OEr,"fileReferenceToPlatformFileReference");f();var LM=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{a(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,o,s,c,l,u){switch(iXe(this.turnContext.ctx,l,c,e.type=="offTopic",e.requestId,u,s.extendedBy({},{fileCount:this.turnContext.ctx.get(Tc).workspaceCount})),await this.turnContext.ctx.get(Il).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,l,o,s,u);case"offTopic":return this.processOffTopicFetchResult(s,l,u);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:rn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:Xw.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,o,s,c,l,u){if(e&&e.length>0){c.markAsDisplayed(),l.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},oXe(this.turnContext,s,e,r,n,u,l);let d=this.computeSuggestions?await this.fetchSuggestions(o,s,c,u):void 0;if(d){let{followUp:p,suggestedTitle:m}=d;return{followup:p.message!==""?p:void 0,suggestedTitle:m!==""?m:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:rn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,o){let c=await new F_(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(c===void 0)return;let l=this.enrichFollowup(c,r,n,o);return kr.debug(this.turnContext.ctx,"Computed followup",l),kr.debug(this.turnContext.ctx,"Computed suggested title",c.suggestedTitle),{followUp:l,suggestedTitle:c.suggestedTitle}}enrichFollowup(e,r,n,o){let s=n.extendedBy({messageSource:"chat.suggestions",suggestionId:wr(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return uXe(this.turnContext.ctx,r,s,o),{message:e.followUp,id:s.properties.suggestionId,type:s.properties.suggestion}}processOffTopicFetchResult(e,r,n){let o="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:o,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",sXe(this.turnContext.ctx,this.turnContext.conversation,r,o,e.properties.messageId,n,e),{error:{message:o,responseIsFiltered:!0}}}};f();var ace=E.Union([E.String(),E.Number()]),UP=E.Union([E.String(),E.Number()]),QEr=E.Union([E.Literal("included"),E.Literal("blocked"),E.Literal("notfound"),E.Literal("empty")]),cce=E.Object({uri:E.String(),position:E.Optional(gu)}),oH=E.Object({type:E.Literal("file"),uri:E.String(),visibleRange:E.Optional($c),selection:E.Optional($c),status:E.Optional(QEr),range:E.Optional($c)}),UEr=E.Object({type:E.Literal("directory"),uri:E.String()}),FM=E.Union([oH,UEr,bAt]),gg=E.Union([E.Literal("panel"),E.Literal("inline")]),qEr=E.Union([E.Object({type:E.Literal("text"),text:E.String()}),E.Object({type:E.Literal("image_url"),imageUrl:E.Object({url:E.String(),detail:E.Optional(E.Union([E.Literal("low"),E.Literal("high")]))})})]),mPe=E.Union([E.String(),E.Array(qEr)]),SAt=E.Object({request:mPe,response:E.Optional(E.String()),agentSlug:E.Optional(E.String()),turnId:E.Optional(UP),model:E.Optional(E.String())});function lce(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}a(lce,"convertToMessageContent");function uce(t,e){if(t=pm(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],o=n[r];return n[r]={type:"text",text:o.text+e},n}return[...t,{type:"text",text:e}]}a(uce,"appendToMessage");var dce=E.Union([E.Literal("Ask"),E.Literal("Agent")]),HEr=E.Object({type:E.String(),description:E.String()}),RAt=E.Object({name:E.String(),description:E.String(),inputSchema:E.Optional(E.Object({type:E.String(),properties:E.Record(E.String(),HEr),required:E.Array(E.String())})),confirmationMessages:E.Optional(E.Object({title:E.String(),message:E.String()}))}),OM=E.Object({uri:E.String(),name:E.String()});var hPe="generate-response",fce=class extends Error{constructor(r,n,o,s){super(r);this.authorizationUri=n;this.agentSlug=o;this.agentName=s}static{a(this,"RemoteAgentAuthorizationError")}},sH=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(Ls),this.chatFetcher=this.chatFetcher??new Bs(r.ctx),this.postProcessor=new LM(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{a(this,"RemoteAgentTurnProcessor")}async process(e,r,n,o){try{await this.processWithAgent(e,r,this.turnContext,o)}catch(s){kr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,s);let c=s instanceof Error?s.message:String(s);this.turn.status="error",this.turn.response={message:c,type:"meta"},s instanceof fce?await this.endProgress({unauthorized:{authorizationUri:s.authorizationUri,agentSlug:s.agentSlug,agentName:s.agentName}}):await this.endProgress({error:{message:c,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,o){await this.conversationProgress.begin(this.conversation,this.turn,e);let s=await nc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let c=await this.buildAgentPrompt(n);if(!c)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let l={type:"user",prompt:JSON.stringify(c.messages,null,2),tokens:c.tokens};await n.ctx.get(Il).inspectPrompt(l),await n.steps.start(hPe,"Generating response");let u=this.augmentTelemetry(c,s,this.turn.template,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let d=await this.fetchConversationResponse(n,c.messages,r,s.extendedBy({messageSource:"chat.user"},{promptTokenLen:c.tokens}),u,o);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(d,n),await this.endProgress({error:d.error,followUp:d.followup,suggestedTitle:d.suggestedTitle,skillResolutions:c.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),o=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=o),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:pm(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return wr()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return Yke(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:pm(r.request.message)}),r.response&&r.response.type==="model"){let o=EAt(r.response.references);n.push({role:"assistant",content:pm(r.response.message),copilot_references:o.length>0?o:void 0})}return n})}async computeCopilotReferences(e){return await _At(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,o,s,c){n.onCancellationRequested(async()=>{await this.cancelProgress()});let l=new Q_((m,h,g,A,y)=>{let v=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:m,annotations:h,references:g,notifications:A.map(b=>({message:b.message,severity:"warning"})),confirmationRequest:v}),this.turn.response?(this.turn.response.message=uce(this.turn.response.message,m),this.turn.response.references.push(...g)):this.turn.response={message:m,type:"model",references:g},this.turn.annotations.push(...h??[]),v&&(this.turn.confirmationRequest=v)}),u=await this.turnContext.ctx.get(nr).getGitHubSession(),d={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:rn(this.turn.request.message)},authToken:u?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},p=await this.chatFetcher.fetchResponse(d,n,o,(m,h)=>l.isFinishedAfter(m,h));return this.ensureAgentIsAuthorized(p),await this.postProcessor.postProcess(p,n,l.appliedText,o,s.extendedBy(this.addExtensibilityInfoTelemetry()),rn(this.turn.request.message),"conversationPanel",c)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new fce("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,o){return B7(this.conversation,"conversationPanel",rn(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(hPe,e.error.message):await r.steps.finish(hPe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var aH=class{constructor(e,r,n,o,s,c){this.id=e;this.slug=r;this.name=n;this.description=o;this.avatarUrl=s;this.endpoint=c}static{a(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new sH(this,e)}},pce=class extends aH{static{a(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new sH(this,e)}};f();var WEr="github",Sy=class{static{a(this,"RemoteAgentRegistry")}},mce=class extends Sy{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{a(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await CR(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(pn.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||pn.error(this.ctx,"Expected 'agents' to be an array")}catch(o){return r.includes("access denied")||pn.warn(this.ctx,"Invalid remote agent response:",r,o),[]}return n.filter(o=>o.slug!==WEr).map(o=>new aH(o.id,o.slug,o.name,o.description,o.avatar_url))}};var gPe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{a(this,"ProjectAgent")}additionalSkills(){return[_M]}};async function t1(t){let e=[];return e.push(new pce),e.push(...await t.get(Sy).agents()),e.push(new gPe),e.push(new oce),e}a(t1,"getAgents");var $Er=E.Object({});async function jEr(t,e,r){return[(await t1(t)).map(s=>({slug:s.slug,name:s.name,description:s.description,avatarUrl:s.avatarUrl})),null]}a(jEr,"handleConversationAgentsChecked");var kAt=et($Er,jEr);f();f();var cH=Ne(qc());function GEr(t,e,r){let n=Kr.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Pt(t,"getCompletions.docVersionMismatch",n)}a(GEr,"telemetryVersionMismatch");async function Ry(t,e,r){let o=t.get(Ar).getTextDocumentUnsafe(e);if(!o)throw new cH.ResponseError(Qt.InvalidParams,`Document for URI could not be found: ${e.uri}`);let s=await Bx(t,e,o.getText());if(s.status==="invalid")throw t.get(Wo).setInactive(s.reason),new cH.ResponseError(Qt.CopilotNotAvailable,s.reason);if(e.version!==void 0&&o.version!==e.version)throw r?.isCancellationRequested||(GEr(t,o,e.version),Mu.debug(t,`Requested document version was ${e.version} but actual document version was ${o.version}.`)),new cH.ResponseError(Qt.ContentModified,"Document Version Mismatch");return o}a(Ry,"getTextDocument");async function a1(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await Ry(t,n,r)}catch(o){if(o instanceof cH.ResponseError&&o.code===Qt.CopilotNotAvailable)return;throw o}}a(a1,"getTextDocumentIfAvailable");var VEr=E.Union([E.Literal("keyboard"),E.Literal("toolbar")]),zEr=E.Object({turnId:UP,codeBlockIndex:E.Number(),source:VEr,copiedCharacters:E.Number(),totalCharacters:E.Number(),copiedText:E.String(),doc:E.Optional(cce),textDocument:E.Optional(Bp),position:E.Optional(gu),conversationSource:E.Optional(gg)});async function KEr(t,e,r){let n=await a1(t,r,e),o={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},s=r.position??r.doc?.position;n&&s&&(o={...o,currentLine:s.line});let c=tw(r.conversationSource),l=t.get(no).findByTurnId(r.turnId),u=await nc(t,l,{languageId:n?.detectedLanguageId??""});return Mf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:c,mode:l?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:l?.turn.getResolvedModelId()??"unknown"},o,`${Au(c)}.acceptedCopy`,u),["OK",null]}a(KEr,"handleConversationCodeCopyChecked");var PAt=et(zEr,KEr);f();var YEr=E.Union([E.Literal("keyboard"),E.Literal("toolbar"),E.Literal("diff")]),JEr=E.Object({turnId:UP,source:YEr,codeBlockIndex:E.Number(),acceptedLength:E.Optional(E.Number()),totalCharacters:E.Number(),newFile:E.Optional(E.Boolean()),doc:E.Optional(cce),textDocument:E.Optional(Bp),position:E.Optional(gu),conversationSource:E.Optional(gg)});async function XEr(t,e,r){let n=await a1(t,r,e),o={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},s=r.position??r.doc?.position;n&&s&&(o={...o,insertionOffset:n.offsetAt(s),currentLine:s.line});let c=tw(r.conversationSource),l=t.get(no).findByTurnId(r.turnId),u=await nc(t,l,{languageId:n?.detectedLanguageId??""});return Mf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:c,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full",mode:l?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:l?.turn.getResolvedModelId()??"unknown"},o,`${Au(c)}.acceptedInsert`,u),["OK",null]}a(XEr,"handleConversationCodeInsertChecked");var DAt=et(JEr,XEr);f();f();var hce=E.Array($c);function gce(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}a(gce,"resolveAsActiveEditor");f();var BAt=Ne(qc());var Ace=new BAt.ProgressType,APe=class{constructor(e){this.progressToken=e}static{a(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(Ir).connection.sendProgress(Ace,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,o){await e.get(Ir).connection.sendProgress(Ace,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...o})}async end(e,r,n,o){await e.get(Ir).connection.sendProgress(Ace,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...o})}async cancel(e,r,n,o){await e.get(Ir).connection.sendProgress(Ace,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:o})}};function QM(t){return new APe(t.workDoneToken)}a(QM,"createProgressHandler");f();f();f();var vd=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{a(this,"AgentConversationError")}};f();var HE=class extends Error{static{a(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var UM=class extends Error{static{a(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();f();var yPe=class{static{a(this,"TurnMetadata")}toString(){return this.constructor.name}},lH=class extends yPe{constructor(r){super();this.renderedGlobalContext=r}static{a(this,"GlobalContextMessageMetadata")}};f();f();var yce=class extends Yn{static{a(this,"UserOSPrompt")}renderCopilot(e,r,n,o){let s=process.platform;return vscpp(vscppf,null,"The user's current OS is: ",s==="win32"?"Windows":s==="darwin"?"macOS":s==="linux"?"Linux":"Unknown")}};f();var Cce=class extends Yn{static{a(this,"UserPreferences")}renderCopilot(e,r,n,o){return vscpp(vscppf,null)}};f();var NAt=require("path");var vce=class extends Yn{static{a(this,"UserShellPrompt")}renderCopilot(e,r,n,o){let s=this.getUserShell(),c=(0,NAt.basename)(s),l=c==="powershell.exe"?" (Windows PowerShell v5.1)":"",u="";return c==="powershell.exe"&&(u=" Use the `;` character if joining commands on a single line is needed."),vscpp(vscppf,null,`The user's default shell is: "`,c,'"',l,". When you generate terminal commands, please generate them correctly for this shell.",u)}getUserShell(){if(process.env.SHELL)return process.env.SHELL;switch(process.platform){case"win32":return process.env.ComSpec||"cmd.exe";case"darwin":case"linux":return"/bin/bash";default:return"sh"}}};f();var xce=class extends Yn{static{a(this,"WorkspaceFoldersHint")}renderCopilot(e,r,n,o){if(this.props.workspaceFolders&&this.props.workspaceFolders.length>0){let s=this.props.workspaceFolders.map(c=>` - ${ns(c.uri)}`).join(`
`);return vscpp(vscppf,null,"I am working in a workspace with the following folders:",vscpp("br",null),s)}else return vscpp(vscppf,null,"There is no workspace currently open.")}};f();f();f();function MAt(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}a(MAt,"partsLength");async function FAt(t,e=1/0,r){let n=LAt(0,t,e),o=e-MAt(n);for(;;){let s=!1,c=[];for(let l of n)if(l.type==="text")c.push(l);else if(l.type==="dir"){c.push({type:"text",uri:l.uri,value:l.value});let u=await l.getChildren();if(r?.isCancellationRequested)return ZEr();let d=LAt(l.level+1,u,o-1);d.length&&(s=!0,o-=MAt(d)+1,c.push(...d))}if(n=c,!s)break}return{files:n.map(s=>s.uri).filter(s=>s!==void 0),tree:n.map(s=>s.value).join(`
`)}}a(FAt,"visualFileTree");function LAt(t,e,r){let n="	".repeat(t),o=[],s=r;for(let c=0;c<e.length;++c){let l=e[c],u=n+l.name+(l.type===2?"/":"");if(u.length>s){let d=n+"...";for(;d.length>s&&o.length>0;)s+=o.pop().value.length+1;d.length<=s&&o.push({type:"text",uri:void 0,value:d});break}l.type===2?o.push({type:"dir",uri:l.uri,level:t,value:u,getChildren:l.getChildren}):o.push({type:"text",uri:l.uri,value:u}),s-=u.length,c!==e.length-1&&(s-=1)}return o}a(LAt,"toParts");var ZEr=a(()=>({tree:"",files:[]}),"emptyTree");var ebr=new dt("fileReferencesPrompt");async function OAt(t,e,r,n){let o=await QAt(t,e,r,n);if(!o.length)return"";let s;if(o.length===1)s=o[0].tree.tree;else{s="";for(let{label:l,tree:u}of o){s+=`${l}/
`;for(let d of u.tree.split(`
`))s+=`	${d}
`}}let c=Jw(s);return["I am working in a workspace that has the following structure:",c,s,c,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}a(OAt,"generateWorkspaceStructurePrompt");async function QAt(t,e,r,n){return e.length?Promise.all(e.map(async o=>{let s=o.name,c=o.uri,l=await FAt(await UAt(t,o.uri,r,n),r.maxLength/e.length,n);return{label:s,uri:c,tree:l}})):[]}a(QAt,"generateWorkspaceStructure");async function UAt(t,e,r,n){if(n.isCancellationRequested)return[];let o;try{o=await t.get(Ui).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(o.sort((s,c)=>s[1]===c[1]?s[0].localeCompare(c[0]):s[1]&2?1:-1),Promise.all(o.map(([s,c])=>{let l=bi(e,s);return r.excludeDotFiles&&s.startsWith(".")||nbr(l)?null:c&2?{type:2,uri:l,name:s,getChildren:a(()=>UAt(t,l,r,n),"getChildren")}:{type:1,uri:l,name:s}})).then(s=>s.filter(c=>c!=null)))}a(UAt,"buildFileList");var tbr=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],rbr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function nbr(t){return!!(rbr.includes(Mi(t).toLowerCase())||ns(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>tbr.includes(r)))}a(nbr,"shouldAlwaysIgnoreFile");async function Ece(t,e,r){if(r.length===0)return[];try{let n=r.map(c=>({uri:c.uri,name:Mi(c.uri)})),o=await QAt(t,n,{maxLength:2e3,excludeDotFiles:!0},e),s=[];for(let{label:c,uri:l,tree:u}of o)s.push("<attachment>"),s.push(`Directory: ${c} (${Pa(l)})`),s.push(u.tree),s.push("</attachment>");return s}catch(n){return ebr.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}a(Ece,"processDirectoryReferences");var bce=class extends Yn{static{a(this,"WorkspaceStructure")}async renderCopilot(e,r,n,o){if(!this.props.workspaceFolders)return vscpp(vscppf,null);let s=await OAt(this.props.ctx,this.props.workspaceFolders,{maxLength:this.props.maxSize||2e3,excludeDotFiles:this.props.excludeDotFiles??!0},o||An.CancellationToken.None);return s?vscpp(vscppf,null,s):vscpp(vscppf,null)}};f();var qP=Ne(xa());var Vl=class t extends qP.PromptElement{static{a(this,"Tag")}static{this._regex=/^[a-zA-Z_][\w.-]*$/}render(){let{name:e,children:r,attrs:n={}}=this.props;if(!t._regex.test(e))throw new Error(`Invalid tag name: ${this.props.name}. Tag names must start with a letter or underscore, and can contain letters, digits, underscores, hyphens, or periods.`);let o="";for(let[c,l]of Object.entries(n))l!==void 0&&(o+=` ${c}=${JSON.stringify(l)}`);if(r?.length===0)return o?vscpp(qP.TextChunk,null,vscpp(vscppf,null,`<${e}${o} />`)):void 0;let s=(0,qP.useKeepWith)();return vscpp(vscppf,null,vscpp(s,null,vscpp(vscppf,null,`<${e}${o}>
`)),vscpp(CPe,{priority:1,flexGrow:1},r,vscpp("br",null)),vscpp(s,null,vscpp(vscppf,null,`</${e}>`)),vscpp("br",null))}},CPe=class extends qP.PromptElement{static{a(this,"TagInner")}render(){return vscpp(vscppf,null,this.props.children)}};var qAt=Ne(xa());var uH=class extends Yn{static{a(this,"GlobalAgentContext")}renderCopilot(e,r,n,o){return vscpp(qAt.UserMessage,null,vscpp(Vl,{name:"environment_info"},vscpp(yce,{ctx:this.props.ctx}),vscpp(vce,{ctx:this.props.ctx})),vscpp(Vl,{name:"workspace_info"},vscpp(xce,{ctx:this.props.ctx,workspaceFolders:this.props.workspaceFolders}),vscpp(bce,{ctx:this.props.ctx,workspaceFolders:this.props.workspaceFolders,maxSize:2e3,excludeDotFiles:!0})),vscpp(Cce,{ctx:this.props.ctx,flexGrow:7,priority:800}))}};f();f();f();var qM=class extends Yn{static{a(this,"KeepGoingReminder")}renderCopilot(){return this.props.modelConfiguration.modelFamily===$r.Gpt41||this.props.modelConfiguration.modelFamily.startsWith($r.Gpt5)?vscpp(vscppf,null,"You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user.",vscpp("br",null),"Your thinking should be thorough and so it's fine if it's very long. However, avoid unnecessary repetition and verbosity. You should be concise, but thorough.",vscpp("br",null),"You MUST iterate and keep going until the problem is solved.",vscpp("br",null),"You have everything you need to resolve this problem. I want you to fully solve this autonomously before coming back to me.",vscpp("br",null),"Only terminate your turn when you are sure that the problem is solved and all items have been checked off. Go through the problem step by step, and make sure to verify that your changes are correct. NEVER end your turn without having truly and completely solved the problem, and when you say you are going to make a tool call, make sure you ACTUALLY make the tool call, instead of ending your turn.",vscpp("br",null),"Take your time and think through every step - remember to check your solution rigorously and watch out for boundary cases, especially with the changes you made. Your solution must be perfect. If not, continue working on it. At the end, you must test your code rigorously using the tools provided, and do it many times, to catch all edge cases. If it is not robust, iterate more and make it perfect. Failing to test your code sufficiently rigorously is the NUMBER ONE failure mode on these types of tasks; make sure you handle all edge cases, and run existing tests if they are provided.",vscpp("br",null),"You MUST plan extensively before each function call, and reflect extensively on the outcomes of the previous function calls. DO NOT do this entire process by making function calls only, as this can impair your ability to solve the problem and think insightfully.",vscpp("br",null),"You are a highly capable and autonomous agent, and you can definitely solve this problem without needing to ask the user for further input.",vscpp("br",null)):vscpp(vscppf,null,"You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user. ONLY terminate your turn when you are sure that the problem is solved, or you absolutely cannot continue.",vscpp("br",null),"You take action when possible- the user is expecting YOU to take action and go to work for them. Don't ask unnecessary questions about the details if you can simply DO something useful instead.",vscpp("br",null))}};f();var ibr=["en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],Ice=class extends Yn{static{a(this,"ResponseTranslationRules")}renderCopilot(){if(this.props.languageOverride&&ibr.find(e=>this.props.languageOverride===e)&&this.props.languageOverride!=="en")return vscpp(vscppf,null,"Respond in the following locale: ",this.props.languageOverride)}};var HAt=Ne(xa());var Tce=class extends Yn{static{a(this,"DefaultAgentPrompt")}renderCopilot(){let e=this.props.modelConfiguration.modelFamily.startsWith($r.Gpt5),r=this.props.toolsService.getToolMapForModel().get("semantic_search")!==void 0,n=this.props.toolsService.getToolMapForModel().get("get_errors")!==void 0,o=this.props.toolsService.getToolMapForModel().get("read_file")!==void 0,s=this.props.toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,c=this.props.toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,l=this.props.toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,u=this.props.toolsService.getToolMapForModel().get("grep_search")!==void 0;return vscpp(HAt.SystemMessage,null,vscpp(Vl,{name:"instructions"},"You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks.",vscpp("br",null),"The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question.",vscpp("br",null),vscpp(qM,{modelConfiguration:this.props.modelConfiguration}),e&&vscpp(vscppf,null,`Communication style: Use a friendly, confident, and conversational tone. Prefer short sentences, contractions, and concrete language. Keep it skimmable and encouraging, not formal or robotic. A tiny touch of personality is okay; avoid overusing exclamations or emoji. Avoid empty filler like "Sounds good!", "Great!", "Okay, I will\u2026", or apologies when not needed\u2014open with a purposeful preamble about what you're doing next.`,vscpp("br",null)),"If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes.",vscpp("br",null),"If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept.",vscpp("br",null),"If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context.",vscpp("br",null),e&&vscpp(vscppf,null,"Mission and stop criteria: You are responsible for completing the user's task end-to-end. Continue working until the goal is satisfied or you are truly blocked by missing information. Do not defer actions back to the user if you can execute them yourself with available tools. Only ask a clarifying question when essential to proceed.",vscpp("br",null),"Preamble and progress: Start with a brief, friendly preamble that explicitly acknowledges the user's task and states what you're about to do next. Make it engaging and tailored to the repo/task; keep it to a single sentence. If the user has not asked for anything actionable and it's only a greeting or small talk, respond warmly and invite them to share what they'd like to do\u2014do not create a checklist or run tools yet. Use the preamble only once per task; if the previous assistant message already included a preamble for this task, skip it this turn. Do not re-introduce your plan after tool calls or after creating files\u2014give a concise status and continue with the next concrete action. For multi-step tasks, keep a lightweight checklist and weave progress updates into your narration. Batch independent, read-only operations together; after a batch, share a concise progress note and what's next. If you say you will do something, execute it in the same turn using tools.",vscpp("br",null),vscpp(Vl,{name:"requirementsUnderstanding"},vscpp(vscppf,null,"Always read the user's request in full before acting. Extract the explicit requirements and any reasonable implicit requirements.",vscpp("br",null),"If a requirement cannot be completed with available tools, state why briefly and propose a viable alternative or follow-up."))),r&&vscpp(vscppf,null,"Prefer using the ","semantic_search"," tool to search for context unless you know the exact string or filename pattern you're searching for.",vscpp("br",null)),"Don't make assumptions about the situation-gather context first, then perform the task or answer the question.",vscpp("br",null),e&&vscpp(vscppf,null,"Under-specification policy: If details are missing, infer 1-2 reasonable assumptions from the repository conventions and proceed. Note assumptions briefly and continue; ask only when truly blocked.",vscpp("br",null),"Proactive extras: After satisfying the explicit ask, implement small, low-risk adjacent improvements that clearly add value (tests, types, docs, wiring). If a follow-up is larger or risky, list it as next steps.",vscpp("br",null),"Anti-laziness: Avoid generic restatements and high-level advice. Prefer concrete edits, running tools, and verifying outcomes over suggesting what the user should do.",vscpp("br",null),vscpp(Vl,{name:"engineeringMindsetHints"},vscpp(vscppf,null,"Think like a software engineer\u2014when relevant, prefer to:",vscpp("br",null),'- Outline a tiny "contract" in 2-4 bullets (inputs/outputs, data shapes, error modes, success criteria).',vscpp("br",null),"- List 3-5 likely edge cases (empty/null, large/slow, auth/permission, concurrency/timeouts) and ensure the plan covers them.",vscpp("br",null),"- Write or update minimal reusable tests first (happy path + 1-2 edge/boundary) in the project's framework; then implement until green.")),vscpp(Vl,{name:"qualityGatesHints"},vscpp(vscppf,null,'Before wrapping up, prefer a quick "quality gates" triage: Build, Lint/Typecheck, Unit tests, and a small smoke test. Ensure there are no syntax/type errors across the project; fix them or clearly call out any intentionally deferred ones. Report deltas only (PASS/FAIL). Include a brief "requirements coverage" line mapping each requirement to its status (Done/Deferred + reason).')),vscpp(Vl,{name:"responseModeHints"},vscpp(vscppf,null,"Choose response mode based on task complexity. Prefer a lightweight answer when it's a greeting, small talk, or a trivial/direct Q&A that doesn't require tools or edits: keep it short, skip todo lists and progress checkpoints, and avoid tool calls unless necessary. Use the full engineering workflow (checklist, phases, checkpoints) when the task is multi-step, requires edits/builds/tests, or has ambiguity/unknowns. Escalate from light to full only when needed; if you escalate, say so briefly and continue.")),"Validation and green-before-done: After any substantive change, run the relevant build/tests/linters automatically. For runnable code that you created or edited, immediately run a test to validate the code works (fast, minimal input) yourself using terminal tools. Prefer automated code-based tests where possible. Then provide optional fenced code blocks with commands for larger or platform-specific runs. Don't end a turn with a broken build if you can fix it. If failures occur, iterate up to three targeted fixes; if still failing, summarize the root cause, options, and exact failing output. For non-critical checks (e.g., a flaky health check), retry briefly (2-3 attempts with short backoff) and then proceed with the next step, noting the flake.",vscpp("br",null),"Never invent file paths, APIs, or commands. Verify with tools (search/read/list) before acting when uncertain.",vscpp("br",null),"Security and side-effects: Do not exfiltrate secrets or make network calls unless explicitly required by the task. Prefer local actions first.",vscpp("br",null),"Reproducibility and dependencies: Follow the project's package manager and configuration; prefer minimal, pinned, widely-used libraries and update manifests or lockfiles appropriately. Prefer adding or updating tests when you change public behavior.",vscpp("br",null),'Build characterization: Before stating that a project "has no build" or requires a specific build step, verify by checking the provided context or quickly looking for common build config files (for example: `package.json`, `pnpm-lock.yaml`, `requirements.txt`, `pyproject.toml`, `setup.py`, `Makefile`, `Dockerfile`, `build.gradle`, `pom.xml`). If uncertain, say what you know based on the available evidence and proceed with minimal setup instructions; note that you can adapt if additional build configs exist.',vscpp("br",null),"Deliverables for non-trivial code generation: Produce a complete, runnable solution, not just a snippet. Create the necessary source files plus a small runner or test/benchmark harness when relevant, a minimal `README.md` with usage and troubleshooting, and a dependency manifest (for example, `package.json`, `requirements.txt`, `pyproject.toml`) updated or added as appropriate. If you intentionally choose not to create one of these artifacts, briefly say why.",vscpp("br",null)),"Think creatively and explore the workspace in order to make a complete fix.",vscpp("br",null),"Don't repeat yourself after a tool call, pick up where you left off.",vscpp("br",null),"NEVER print out a codeblock with file changes unless the user asked for it. Use the"," ","insert_edit_into_file"," ",c?"or replace_string_in_file":""," tool instead.",vscpp("br",null),s&&vscpp(vscppf,null,"NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the ","run_in_terminal"," tool instead.",vscpp("br",null)),"You don't need to read a file if it's already provided in context."),vscpp(Vl,{name:"toolUseInstructions"},"When using a tool, follow the json schema very carefully and make sure to include ALL required properties.",vscpp("br",null),"Always output valid JSON when using a tool.",vscpp("br",null),"If a tool exists to do a task, use the tool instead of asking the user to manually take an action.",vscpp("br",null),"If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission.",vscpp("br",null),"Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs.",vscpp("br",null),"Never say the name of a tool to a user.",vscpp("br",null),"For example, instead of saying that you'll use the ","run_in_terminal",` tool, say "I'll run the command in a terminal".`,vscpp("br",null),"If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call ","semantic_search"," in parallel.",vscpp("br",null),e&&vscpp(vscppf,null,"Before notable tool batches, briefly tell the user what you're about to do and why. After the results return, briefly interpret them and state what you'll do next. Don't narrate every trivial call.",vscpp("br",null),`You MUST preface each tool call batch with a one-sentence "why/what/outcome" preamble (why you're doing it, what you'll run, expected outcome). If you make many tool calls in a row, you MUST checkpoint progress after roughly every 3-5 calls: what you ran, key results, and what you'll do next. If you create or edit more than ~3 files in a burst, checkpoint immediately with a compact bullet summary.`,vscpp("br",null),"If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call ","semantic_search"," in parallel. Parallelize read-only, independent operations only; do not parallelize edits or dependent steps.",vscpp("br",null),"Context acquisition: Trace key symbols to their definitions and usages. Read sufficiently large, meaningful chunks to avoid missing context. Prefer semantic or codebase search when you don't know the exact string; prefer exact search or direct reads when you do. Avoid redundant reads when the content is already attached and sufficient.",vscpp("br",null),"Verification preference: For service or API checks, prefer a tiny code-based test (unit/integration or a short script) over shell probes. Use shell probes (e.g., curl) only as optional documentation or quick one-off sanity checks, and mark them as optional.",vscpp("br",null)),o&&vscpp(vscppf,null,"When using the ","read_file"," tool, prefer reading a large section over calling the"," ","read_file"," tool many times in sequence. You can also think of all the pieces you may be interested in and read them in parallel. Read large enough context to ensure you get what you need.",vscpp("br",null)),r&&vscpp(vscppf,null,"If ","semantic_search"," returns the full contents of the text files in the workspace, you have all the workspace context.",vscpp("br",null)),u&&vscpp(vscppf,null,"You can use the ","grep_search"," to get an overview of a file by searching for a string within that one file, instead of using ","read_file"," many times.",vscpp("br",null)),r&&vscpp(vscppf,null,"If you don't know exactly the string or filename pattern you're looking for, use"," ","semantic_search"," to do a semantic search across the workspace.",vscpp("br",null)),s&&vscpp(vscppf,null,"Don't call the ","run_in_terminal"," tool multiple times in parallel. Instead, run one command and wait for the output before running the next command.",vscpp("br",null)),l&&vscpp(vscppf,null,"After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the"," ","update_user_preferences"," tool to save their preferences.",vscpp("br",null))),vscpp(Vl,{name:"editFileInstructions"},c?vscpp(vscppf,null,"Before you edit an existing file, make sure you either already have it in the provided context, or read it with the ","read_file"," tool, so that you can make proper changes.",vscpp("br",null),"Use the ","replace_string_in_file"," tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file.",vscpp("br",null),"Use the ","insert_edit_into_file"," tool to insert code into a file.",vscpp("br",null),"When editing files, group your changes by file.",vscpp("br",null),e&&vscpp(vscppf,null,"Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical.",vscpp("br",null)),"NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user.",vscpp("br",null),"NEVER print a codeblock that represents a change to a file, use ","insert_edit_into_file"," or"," ","replace_string_in_file"," instead.",vscpp("br",null),"For each file, give a short description of what needs to be changed, then use the"," ","replace_string_in_file"," or ","insert_edit_into_file"," tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.",vscpp("br",null)):vscpp(vscppf,null,"Don't try to edit an existing file without reading it first, so you can make changes properly.",vscpp("br",null),"Use the ","insert_edit_into_file"," tool to edit files. When editing files, group your changes by file.",vscpp("br",null),e&&vscpp(vscppf,null,"Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical.",vscpp("br",null)),"NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user.",vscpp("br",null),"NEVER print a codeblock that represents a change to a file, use ","insert_edit_into_file"," ",c?"or replace_string_in_file":""," instead.",vscpp("br",null),"For each file, give a short description of what needs to be changed, then use the"," ",c?"replace_string_in_file or":""," ","insert_edit_into_file"," tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.",vscpp("br",null)),"Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ",s?'with "npm install" or ':"",'creating a "requirements.txt".',vscpp("br",null),n&&vscpp(vscppf,null,"After editing a file, you MUST call ","get_errors"," to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed.",vscpp("br",null)),"The ","insert_edit_into_file"," tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints.",vscpp("br",null),"When you use the ","insert_edit_into_file"," tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:",vscpp("br",null),"// ",Cl,vscpp("br",null),"changed code",vscpp("br",null),"// ",Cl,vscpp("br",null),"changed code",vscpp("br",null),"// ",Cl,vscpp("br",null),vscpp("br",null),"Here is an example of how you should format an edit to an existing Person class:",vscpp("br",null),["class Person {",`	// ${Cl}`,"	age: number;",`	// ${Cl}`,"	getAge() {","		return this.age;","	}","}"].join(`
`)),vscpp(Ice,{languageOverride:this.props.languageOverride}))}};f();var wce=class extends Yn{static{a(this,"CopilotIdentityRules")}renderCopilot(){return vscpp(vscppf,null,'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.")}},_ce=class extends Yn{static{a(this,"GPT5CopilotIdentityRule")}renderCopilot(){return vscpp(vscppf,null,"Your name is GitHub Copilot.",vscpp("br",null))}};f();var Sce=class extends Yn{static{a(this,"SafetyRules")}renderCopilot(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, or violent, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}},Rce=class extends Yn{static{a(this,"Gpt5SafetyRule")}renderCopilot(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, or violent, only respond with "Sorry, I can't assist with that."`,vscpp("br",null))}};var WAt=Ne(xa());var kce=class extends Yn{static{a(this,"SystemInstructionsPrompt")}renderCopilot(){let e=this.props.turnContext.ctx.get(on).getEditorInfo().name;return vscpp(vscppf,null,vscpp(WAt.SystemMessage,null,"You are an expert AI programming assistant, working with a user in the ",e," editor.",vscpp("br",null),this.props.modelConfiguration.modelFamily.startsWith($r.Gpt5)?vscpp(vscppf,null,vscpp(_ce,null),vscpp(Rce,null)):vscpp(vscppf,null,vscpp(wce,null),vscpp(Sce,null))),vscpp(Tce,{toolsService:this.props.toolsService,modelConfiguration:this.props.modelConfiguration,languageOverride:this.props.turnContext.conversation.userLanguage}))}};f();var $At=Ne(xa());var Pce=class extends Yn{static{a(this,"ToolCallHistoryPrompt")}renderCopilot(){let e=Hne(this.props.currentTurn.response?.message,!0),r=e.length>0;return vscpp(vscppf,null,e.map((n,o)=>Xae(n)),r&&vscpp($At.UserMessage,null,vscpp(vscppf,null,"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself.")))}};f();f();var Dce=class extends Yn{static{a(this,"CurrentDatePrompt")}renderCopilot(){let e=this.props.date?.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})||new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return vscpp(vscppf,null,"The current date is ",e,".")}};f();var Bce=class extends Yn{static{a(this,"EditingReminder")}renderCopilot(){return vscpp(vscppf,null,"When using the ","insert_edit_into_file"," tool, avoid repeating existing code, instead use a line comment with `",Cl,"` to represent regions of unchanged code.")}};f();var Nce=class extends Yn{static{a(this,"ExplanationReminder")}renderCopilot(){if(this.props.modelConfiguration.modelFamily.startsWith($r.Gpt5))return vscpp(vscppf,null,`Skip filler acknowledgements like "Sounds good" or "Okay, I will\u2026". Open with a purposeful one-liner about what you're doing next.`,vscpp("br",null),"When sharing setup or run steps, present terminal commands in fenced code blocks with the correct language tag. Keep commands copyable and on separate lines.",vscpp("br",null),"Avoid definitive claims about the build or runtime setup unless verified from the provided context (or quick tool checks). If uncertain, state what's known from attachments and proceed with minimal steps you can adapt later.",vscpp("br",null),"When you create or edit runnable code, run a test yourself to confirm it works; then share optional fenced commands for more advanced runs.",vscpp("br",null),'For non-trivial code generation, produce a complete, runnable solution: necessary source files, a tiny runner or test/benchmark harness, a minimal `README.md`, and updated dependency manifests (e.g., `package.json`, `requirements.txt`, `pyproject.toml`). Offer quick "try it" commands and optional platform-specific speed-ups when relevant.',vscpp("br",null),"Your goal is to act like a pair programmer: be friendly and helpful. If you can do more, do more. Be proactive with your solutions, think about what the user needs and what they want, and implement it proactively.",vscpp("br",null),vscpp(Vl,{name:"importantReminders"},"Before starting a task, review and follow the guidance in <responseModeHints>, <engineeringMindsetHints>, and <requirementsUnderstanding>. ALWAYS start your response with a brief task receipt and a concise high-level plan for how you will proceed.",vscpp("br",null),"DO NOT state your identity or model name unless the user explicitly asks you to. ",vscpp("br",null),this.props.hasTodoTool&&vscpp(vscppf,null,"You MUST use the todo list tool to plan and track your progress. NEVER skip this step, and START with this step whenever the task is multi-step. This is essential for maintaining visibility and proper execution of large tasks. Follow the todoListToolInstructions strictly.",vscpp("br",null)),!this.props.hasTodoTool&&vscpp(vscppf,null,"Break down the request into clear, actionable steps and present them as a checklist at the beginning of your response before proceeding with implementation. This helps maintain visibility and ensures all requirements are addressed systematically.",vscpp("br",null)),"When referring to a filename or symbol in the user's workspace, wrap it in backticks.",vscpp("br",null)))}};f();f();f();f();var WE=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{a(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new mm({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var obr=new dt("activeEditorPrompt");async function jAt(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new va;let o=await t.textDocumentProvider.getByUri(n.uri);if(o.status==="valid")if(n.selection&&sbr(n.selection)){let s=new WE(o,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Mi(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...s.render());let c=new WE(o,void 0,["User's active file for additional context:"]);r.push(...c.render())}else if(n.visibleRange){let s=new WE(o,n.visibleRange,["User's current visible code:",`Excerpt from ${Mi(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...s.render())}else{let s=new WE(o,void 0,["User's active file for additional context:"]);r.push(...s.render())}else obr.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${o.status} and reason ${o.status==="notfound"?o.message:o.reason}`)}return r}a(jAt,"processActiveEditor");function sbr(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}a(sbr,"notEmptySelection");var abr=new dt("fileReferencesPrompt");async function GAt(t,e){let r=t.turnContext.turn.request.references?.filter(m=>m.type==="file")||[],n=t.turnContext.turn.request.references?.filter(m=>m.type==="directory")||[],o=["png","jpg","jpeg","bmp","gif","webp"],s=r.filter(m=>{let h=m.uri.toLowerCase();return!o.some(g=>h.endsWith(`.${g}`))});if(s.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[c,l,u]=await Promise.all([Promise.all(s.map(async m=>{if(e.isCancellationRequested)throw new va;let h=[],g=await t.textDocumentProvider.getByUri(m.uri);if(g.status==="valid"){let A=new WE(g,void 0,[]);A&&h.push(...A.render())}else abr.warn(t.context,`Failed to read file ${m.uri} with status ${g.status} and reason ${g.status==="notfound"?g.message:g.reason}`);return h})),jAt(t,e),Ece(t.context,e,n)]),d=c.flat(),p=u||[];return d.length>0||l.length>0||p.length>0?["<attachments>",...d,...l,...p,"</attachments>"]:[]}a(GAt,"processFileReferences");var VAt=Ne(xa());var cbr=new dt("fileReferences"),Mce=class extends Yn{static{a(this,"FileReferences")}async renderCopilot(e,r,n,o){let s=o??new An.CancellationTokenSource().token,c=[];try{c=await GAt({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.props.ctx},s)}catch(l){cbr.debug(this.props.ctx,"Failed to process file references",l)}return c.length===0?vscpp(vscppf,null):vscpp(vPe,{fileReferencesParts:c})}},vPe=class extends Yn{static{a(this,"FileReferencesSection")}renderCopilot(){return vscpp(VAt.TextChunk,null,[this.props.fileReferencesParts.join(`
`)])}};var HM=Ne(xa());var Lce=class extends Yn{static{a(this,"UserRequestPrompt")}renderCopilot(e,r,n,o){let s=rn(this.props.userRawMessage),c=bU(this.props.userRawMessage)?this.props.userRawMessage.filter(l=>l.type==="image_url"):[];return vscpp(HM.UserMessage,null,vscpp(HM.TokenLimit,{max:r.tokenBudget/6,flexGrow:3,priority:898},vscpp(Mce,{ctx:this.props.ctx,turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider}),c.map(l=>vscpp(HM.Image,{src:l.image_url.url,detail:l.image_url.detail}))),vscpp(Vl,{name:"context"},vscpp(Dce,null)),vscpp(Vl,{name:"reminderInstructions"},vscpp(qM,{modelConfiguration:this.props.modelConfiguration}),vscpp(Bce,null),vscpp(Nce,{modelConfiguration:this.props.modelConfiguration,hasTodoTool:!1})),vscpp(Vl,{name:"userRequest",priority:900,flexGrow:7},vscpp(vscppf,null,s)))}};var dH=Ne(xa());var xPe=new dt("agentPrompt"),Fce=class extends Yn{static{a(this,"AgentPrompt")}constructor(e){super(e),this.ctx=e.turnContext.ctx,this.turnContext=e.turnContext,this.currentTurn=e.turnContext.turn}async renderCopilot(e,r,n,o){let s=vscpp(vscppf,null,vscpp(kce,{turnContext:this.turnContext,modelConfiguration:this.props.modelConfiguration,toolsService:this.props.toolsService}),await this.getAgentCustomInstructions(),vscpp(dH.UserMessage,null,await this.getOrCreateGlobalAgentContext())),c=this.turnContext.conversation.turns.slice(0,-1);return vscpp(vscppf,null,s,vscpp(NM,{flexGrow:1,priority:700,historyTurns:c,ctx:this.ctx}),vscpp(Lce,{flexGrow:2,priority:900,ctx:this.ctx,turnContext:this.turnContext,userRawMessage:this.props.userRawMessage,workspaceFolders:this.props.workspaceFolders,textDocumentProvider:this.props.textDocumentProvider,toolsService:this.props.toolsService,modelConfiguration:this.props.modelConfiguration}),vscpp(Pce,{flexGrow:2,priority:899,currentTurn:this.currentTurn}))}async getOrCreateGlobalAgentContext(){let e=await this.getOrCreateGlobalAgentContextContent();return e?lbr(e):[vscpp(uH,{ctx:this.ctx,workspaceFolders:this.props.workspaceFolders})]}async getOrCreateGlobalAgentContextContent(){let e=`${this.turnContext.conversation.id}/${this.turnContext.turn.id}`,r=this.turnContext.conversation.turns.at(0);if(r){let s=r.getMetadata(lH);if(s?.renderedGlobalContext)return xPe.info(this.ctx,`Reusing cached global context from first turn for conversation/turn ${e}`),s.renderedGlobalContext}xPe.info(this.ctx,`Rendering fresh global context for conversation/turn ${e}`);let o=(await cPe(uH,{ctx:this.ctx,workspaceFolders:this.props.workspaceFolders},this.props.modelConfiguration)).messages.at(0)?.content;if(o)return r?.setMetadata(new lH(o)),o}async getAgentCustomInstructions(){try{if(!this.props.workspaceFolders||this.props.workspaceFolders.length===0)return vscpp(vscppf,null);let e=this.props.workspaceFolders.map(n=>({uri:n.uri,name:n.name})),r=await cy.getInstructions(this.ctx,e,{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});if(r)return vscpp(dH.UserMessage,null,vscpp(vscppf,null,r))}catch(e){xPe.warn(this.ctx,"Failed to get custom instructions",e)}return vscpp(vscppf,null)}};function lbr(t){return typeof t=="string"?[t]:t.map(e=>{if(e.type==="text")return e.text;if(e.type==="image_url")return vscpp(dH.Image,{src:e.image_url.url,detail:e.image_url.detail})}).filter(e=>e!==void 0)}a(lbr,"renderedMessageToTsxChildren");var zAt=128,ubr=100,dbr=200,U_=new dt("toolCallingLoop"),Oce=class t{constructor(e,r,n,o){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=o;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(Ls),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(El),this.agentPromptProps={turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new pE(this.turnContext.ctx),toolsService:this.toolsService,modelConfiguration:this.modelConfiguration},this.requestId=wr(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId});let s=y3e()?dbr:ubr;this.maxToolCallingLoop=Math.min(s,Ki(e.ctx,$t.MaxToolCallingLoop))}static{a(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n),this.turnContext.clearCopilotEditsSessionHeader();let o=performance.now(),s=await this.runOne(r,e);if(fXe(this.turnContext.ctx,this.turnContext,r,performance.now()-o,this.baseTelemetryWithExp),n={...s},this.toolCallRounds.push(s.round),!s.round.toolCalls.length||s.response.type!=="success"&&s.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let o=(await O_.create(Fce,this.agentPromptProps,this.modelConfiguration).renderPrompt(void 0,r,{collapseSystemMessages:!0})).messages,s="",c=new Q_((p,m,h,g)=>{let A=p.trim().match(iH)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:m,references:h,hideText:A,notifications:g.map(y=>({severity:"warning",message:y.message})),editAgentRounds:[{roundId:e,reply:p}]}),this.turn.annotations.push(...m??[]),s+=p});this.abortIfCanceled(r);let l=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let u={messages:o,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:await this.getAvailableChatTools(l),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(u),U_.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(u,null,2)}`);let d=await this.chatFetcher.fetchResponse(u,r,this.baseTelemetryWithExp,(p,m)=>c.isFinishedAfter(p,m));return this.processChatFetchResult(e,d,s,l,r)}async processChatFetchResult(e,r,n,o,s){switch(this.abortIfCanceled(s),U_.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return r.toolCalls&&r.toolCalls.length>0?await this.handleToolCalls({type:"tool_calls",requestId:r.requestId,toolCalls:r.toolCalls,copilotEditsSessionHeader:r.copilotEditsSessionHeader},n,o,e,s):(this.turn.status="success",this.addToolCallModelResponseToTurn(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}});case"offTopic":throw this.turn.status="off-topic",new vd({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new va;case"failed":throw this.turn.status="error",new vd({message:Xw.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new vd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new vd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new vd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new vd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new vd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new vd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new vd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,o,e,s);case"successMultiple":case"unknown":default:throw this.turn.status="error",new vd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,o,s){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");this.turnContext.setCopilotEditsSessionHeader(e.copilotEditsSessionHeader);let c=e.toolCalls.map(l=>{if(!l.id){let u=`cls_${t.NextToolCallId++}`;l.id=u}return l});this.addToolCallModelResponseToTurn(r,c);for(let l of c)await this.handleSingleToolCall(l,n,o,s);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:c.map(l=>({id:l.id,name:l.function.name,arguments:JSON.stringify(l.function.arguments)}))}}}async handleSingleToolCall(e,r,n,o){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let s=this.findToolByName(r,e.function.name);if(s){let c=performance.now(),l="success";try{let u=$w(e),d=this.toolsService.prepareInvocation(s.id,{input:u},o),p=this.shouldRequireToolConfirmation(s.id,u);U_.debug(this.turnContext.ctx,"need tool confirmation",p),await this.requestToolInvocationApproval(d,p,s.id,u,n,e.id,s.annotations,o),this.abortIfCanceled(o),await this.turnContext.agentToolCalls.start(n,e.id,s.name,d.progressMessage||`Running ${s.displayName} tool`);let m=await this.toolsService.invokeTool(this.turnContext,s.id,{toolInvocationToken:e.id,input:u,roundId:n,toolCallId:e.id},o);if(this.abortIfCanceled(o),m.status==="success"){let h=umt(m);await this.turnContext.agentToolCalls.result(n,e.id,h)}else if(m.status==="error"){let h=nse(m);await this.turnContext.agentToolCalls.error(n,e.id,h.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.addToolCallResultToTurn(m,e.id)}catch(u){if(u instanceof HE||u instanceof va)throw this.turn.status="cancelled",l="cancelled",this.addToolCallResultToTurn(new Bi([new Ri("")],"cancelled"),e.id),new HE(u.message);{U_.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${UA(u)}`,u),l="error";let d=new Bi([new Ri(UA(u).substring(0,300))],"error");this.addToolCallResultToTurn(d,e.id),this.abortIfCanceled(o);let p=nse(d);await this.turnContext.agentToolCalls.error(n,e.id,p.message)}}finally{let u=performance.now()-c;pXe(this.turnContext.ctx,this.turnContext,s,e.id,n,u,l,this.baseTelemetryWithExp)}}else{let c=`Tool with name ${e.function.name} not found in registered tools`;U_.error(this.turnContext.ctx,c);let l=new Bi([new Ri(c)],"error");this.addToolCallResultToTurn(l,e.id);let u=nse(l);await this.turnContext.agentToolCalls.error(n,e.id,u.message)}}async getAvailableChatTools(e){return(await Promise.all(e.map(async n=>await n.isEnabled(this.turnContext)?n:null))).filter(n=>n!==null).map(n=>({type:"function",function:{name:n.nameForModel,description:n.description,parameters:n.inputSchema}}))}addToolCallModelResponseToTurn(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.turn.response?this.turn.response.message=Gk(this.turn.response.message,n):this.turn.response={message:[n],type:"model"}}addToolCallResultToTurn(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let o=n+bq(e.content),s={role:"tool",content:o,tool_call_id:r};if(!this.turn.response)this.turn.response={message:[s],type:"model"};else{if(qne(this.turn.response.message)&&this.turn.response.message.find(l=>l.role==="tool"&&l.tool_call_id===r)){U_.info(this.turnContext.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.turn.response.message=Gk(this.turn.response.message,s)}}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}shouldRequireToolConfirmation(e,r){if(e.includes("run_in_terminal")){let o=r.command,c=this.turnContext.ctx.get(lE).isCommandAutoApproved(o);if(c.result==="denied")return!0;if(c.result==="approved")return!1}return Ki(this.turnContext.ctx,$t.ToolConfirmAutoApprove)===!0?!1:this.turnContext.turn.needToolCallConfirmation??!1}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new va}async requestToolInvocationApproval(e,r,n,o,s,c,l,u){if(e.confirmationMessages&&r){let d=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:o,roundId:s,toolCallId:c,annotations:l},u);switch(d.result){case"dismiss":throw this.turn.status="cancelled",new HE("Cancelled by user");case"accept":return Promise.resolve();default:throw new HE(`Invalid confirmation result ${d.result}`)}}else U_.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>this.maxToolCallingLoop)throw U_.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${this.maxToolCallingLoop} for turn ${this.turn.id}`),new UM}checkChatPayload(e){if(e.messages.length===0)throw new vd({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>zAt)throw new vd({message:`You may not include more than ${zAt} tools in your request.`,responseIsFiltered:!1})}};var Qce=new dt("agenticTurnProcessor"),Uce=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Ls),this.chatFetcher=this.chatFetcher??new Bs(e.ctx),this.turnSuggestions=new F_(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{a(this,"AgenticTurnProcessor")}async process(e,r,n,o,s,c){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,o,s,c)}catch(l){kr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,l);let u=l instanceof Error?l.message:String(l);this.turn.status="error",this.updateTurnResponseWithError(u),await this.endProgress({error:{message:u,code:wP.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,o,s,c,l){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let u=await nc(this.turnContext.ctx,this.turnContext,{languageId:s?.detectedLanguageId??""});r.onCancellationRequested(async()=>{Qce.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});let d=PP().find(p=>p.id===this.turn.template?.templateId);if(d?.response){await this.handleTemplateResponse(d,this.turn.template.userQuestion,r);return}try{let p=l&&c?await Pv(this.turnContext.ctx,l,c):await Go.getModelConfiguration(this.turnContext.ctx,"edits",c);this.turnContext.setResolvedModelConfiguration(p),await new Oce(this.turnContext,this.chatFetcher,p,u).run(r);let h={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let g=await this.fetchSuggestedTitle(r,u.extendedBy({messageSource:"chat.user"},{}));typeof g=="string"&&g!==""&&(h.suggestedTitle=g)}await this.endProgress(h)}catch(p){if(p instanceof HE)Qce.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,p),this.turn.status="cancelled",await this.cancelProgress();else if(p instanceof va)Qce.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,p),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(p instanceof UM)this.turn.status="error",this.updateTurnResponseWithError(p.message),await this.endProgress({error:{message:p.message,code:wP.ToolRoundExceedError,responseIsIncomplete:!0}});else if(p instanceof vd)this.turn.status="error",this.updateTurnResponseWithError(p.message),await this.endProgress({error:p.conversationError});else throw Qce.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,p),p}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return kr.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=Gk(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}async handleTemplateResponse(e,r,n){if(!e.response)return;let o=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:o.message},this.turn.status=o.error?.responseIsFiltered?"filtered":o.error?.responseIsIncomplete?"error":"success",o.error?.responseIsFiltered||o.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:o.annotations,notifications:o.notifications,references:o.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:o.message,code:o.error?.code||0,responseIsIncomplete:o.error?.responseIsIncomplete,responseIsFiltered:o.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:o.message,annotations:o.annotations,notifications:o.notifications,references:o.references,confirmationRequest:o.confirmationRequest}),await this.endProgress())}};f();var EPe="collect-context",bPe="generate-response",qce=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Ls),this.chatFetcher=this.chatFetcher??new Bs(e.ctx),this.postProcessor=new LM(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{a(this,"ModelTurnProcessor")}async process(e,r,n,o,s,c){try{await this.processWithModel(e,r,this.turnContext,n,o,s,c)}catch(l){kr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,l);let u=l instanceof Error?l.message:String(l);this.turn.status="error",this.turn.response={message:u,type:"meta"},await this.endProgress({error:{message:u,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,o,s,c,l){await this.conversationProgress.begin(this.conversation,this.turn,e);let u=await nc(this.turnContext.ctx,this.turnContext,{languageId:s?.detectedLanguageId??""});if(u=u.extendedBy({mode:this.turn.getChatModeWithDefault().toLowerCase(),...this.turn.userRequestedModel&&{modelId:this.turn.userRequestedModel}}),r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let d=PP().find(g=>g.id===this.turn.template?.templateId);if(d?.response){await this.handleTemplateResponse(d,this.turn.template.userQuestion,r);return}let p=(await t1(this.turnContext.ctx)).find(g=>g.slug===this.turn.agent?.agentSlug);if(p){let g=await this.checkAgentPreconditions(p);if(g){await this.endProgress(g);return}}await n.steps.start(EPe,"Collecting context"),await this.collectContext(n,r,u,this.strategy.uiKind,d,p);let m;l?m="customized":c?m=(await this.turnContext.ctx.get(ya).getBestChatModelConfig([c])).uiName:m=void 0;let h=await this.strategy.buildConversationPrompt(n,s?.detectedLanguageId??"",void 0,m);if(!h)await n.steps.error(EPe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(EPe),await n.steps.start(bPe,"Generating response");let g=this.augmentTelemetry(h,u,d,o,s);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let A=await this.fetchConversationResponse(h.messages,r,u.extendedBy({messageSource:"chat.user"},{promptTokenLen:h.tokens}),g,s,c,l),y=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(A,n),await this.endProgress({error:A.error,followUp:A.followup,suggestedTitle:A.suggestedTitle,skillResolutions:h.skillResolutions,updatedDocuments:y}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){kr.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let o=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:o.message},this.turn.status=o.error?.responseIsFiltered?"filtered":o.error?.responseIsIncomplete?"error":"success",o.error?.responseIsFiltered||o.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:o.annotations,notifications:o.notifications,references:o.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:o.message,code:o.error?.code||0,responseIsIncomplete:o.error?.responseIsIncomplete,responseIsFiltered:o.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:o.message,annotations:o.annotations,notifications:o.notifications,references:o.references,confirmationRequest:o.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,o,s,c){let u=await new Fae(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,o,s,c);return this.turn.skills=u.skillIds.map(d=>({skillId:d})),u}async fetchConversationResponse(e,r,n,o,s,c,l){r.onCancellationRequested(async()=>{await this.cancelProgress()});let u="",d=0,p=new Q_((y,v,b,I)=>{let _=y.trim().match(iH)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:y,annotations:v,references:b,hideText:_,notifications:I.map(k=>({severity:"warning",message:k.message}))}),this.turn.response?this.turn.response.message=uce(this.turn.response.message,y):this.turn.response={message:y,type:"model"},this.turn.annotations.push(...v??[]),u+=y,this.strategy.currentDocument){let k=this.strategy.extractEditsFromResponse(u,this.strategy.currentDocument);k&&k.length>0&&(u="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:k}),d+=k.length)}}),m=l&&c?await Pv(this.turnContext.ctx,l,c):await Go.getModelConfiguration(this.turnContext.ctx,"user",c);e=Go.transformMessages(e,m.modelFamily),this.turnContext.setResolvedModelConfiguration(m);let h=this.turn.getResolvedModelId();h&&(o=o.extendedBy({modelId:h}));let g={modelConfiguration:m,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:rn(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},A=await this.chatFetcher.fetchResponse(g,r,n,(y,v)=>p.isFinishedAfter(y,v));return o=o.extendedBy(void 0,{numCodeEdits:d}),await this.postProcessor.postProcess(A,r,p.appliedText,n,o,rn(this.turn.request.message),this.strategy.uiKind,s)}augmentTelemetry(e,r,n,o,s){let c;return o?(this.turn.request.type="follow-up",aXe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,rn(this.turn.request.message),e.tokens,o.type,o.id,s,r),c=B7(this.conversation,this.strategy.uiKind,rn(this.turn.request.message).length,e.tokens,o.type,o.id,r,e.skillResolutions)):c=B7(this.conversation,this.strategy.uiKind,rn(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),c}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(bPe,e.error.message):await r.steps.finish(bPe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();f();var KAt=Ne(qc()),YAt=Ne(NA());var Vf=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new KAt.ProtocolRequestType("conversation/context");this.typeCheck=na.Compile(n)}static{a(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(Ir).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},o;try{let s=await r.sendRequest(this.requestType,n),[c,l]=s;if(l){let u=new YAt.ResponseError(l.code,l.message,l.data);kr.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,u);return}o=c}catch(s){kr.error(this.ctx,`Error while resolving skill ${this.skillId}`,s);return}if(o!=null){if(!this.typeCheck.Check(o))throw new gd(this.typeCheck.Errors(o));return o}}};var IPe=class{constructor(e,r,n="",o="",s=[],c=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=o;this.skills=s;this.references=c}static{a(this,"SyntheticTurn")}},$E=class{constructor(){this.turns=[]}static{a(this,"SyntheticTurns")}add(e,r,n="",o="",s=[],c=[]){let l=new IPe(e,r,n,o,s,c);return this.turns.push(l),l}get(e){return this.turns.find(r=>r.progressToken===e)}},Hce=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(Ls)}static{a(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){kr.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let o=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:o,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:o,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(no).getCapabilities(this.turnContext.conversation.id),o=e.skills.filter(s=>n.skills.includes(s));for(let s of o){let l=await new Vf(this.turnContext.ctx,s,E.Object({value:E.String()})).resolveSkill(this.turnContext);l&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:l.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await YC(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:wr()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var jE=class{static{a(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let o=e.ctx.get($E).get(r);if(o)return new Hce(e,o);let c=(await t1(e.ctx)).find(u=>u.slug===e.turn.agent?.agentSlug);if(c?.turnProcessor)return c.turnProcessor(e);let l;return e.conversation.source==="inline"?l=new ice(e.ctx):l=new MM(e.ctx),n!==void 0&&(l.computeSuggestions=n),e.turn.chatMode==="Agent"?new Uce(e,l):new qce(e,l)}};f();var JAt=Ne(qc());var WM=class{static{a(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new JAt.ResponseError(Qt.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};f();function Wce(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Mi(t.uri)}]}a(Wce,"resolveAsWorkspaceFolders");f();f();var fbr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),cf=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=a((e,r)=>this._isCancelled?fbr(e,r):(this.handlers.push(e.bind(r)),{dispose:a(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{a(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var zf=class{constructor(){this.tokens=new vr(250)}static{a(this,"ProgressTokens")}add(e,r){let n=new An.CancellationTokenSource,o=new cf([r,n.token]);return this.tokens.set(e.toString(),n),o}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var pbr=E.Object({conversationId:E.Optional(ace),workDoneToken:E.Union([E.String(),E.Number()]),turns:E.Array(SAt,{minItems:1}),capabilities:E.Optional(E.Object({allSkills:E.Optional(E.Boolean()),skills:E.Optional(E.Array(E.String()))})),doc:E.Optional(Bp),textDocument:E.Optional(Bp),selection:E.Optional($c),visibleRanges:E.Optional(hce),computeSuggestions:E.Optional(E.Boolean()),references:E.Optional(E.Array(FM)),source:E.Optional(gg),workspaceFolder:E.Optional(E.String()),workspaceFolders:E.Optional(E.Array(OM)),ignoredSkills:E.Optional(E.Array(E.String())),userLanguage:E.Optional(E.String()),model:E.Optional(E.String()),modelProviderName:E.Optional(E.String()),chatMode:E.Optional(dce),needToolCallConfirmation:E.Optional(E.Boolean())});async function mbr(t,e,r){WM.validate(r.workspaceFolders);let n=await a1(t,r,e),o=t.get(no).create(r);await hbr(t,o,r,n);let s=o.turns[o.turns.length-1],c=QM(r),l=t.get(zf).add(c.progressToken,e),u=new L_(t,o,s,l);return await(await t.get(jE).createProcessor(u,c.progressToken,r.computeSuggestions)).process(c,l,void 0,n,r.model,r.modelProviderName),[{conversationId:o.id,turnId:s.id,agentSlug:s.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}a(mbr,"handleConversationCreateChecked");async function hbr(t,e,r,n){for(let o of r.turns){let s=lce(o.request),c=new R_({message:s,type:"user"},o.turnId);o.response&&(c.response={message:o.response,type:"model"}),o.agentSlug&&(c.agent={agentSlug:o.agentSlug}),c.chatMode=zse(r.chatMode),c.userRequestedModel=o.model??r.model,c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Wce(l),d=gce({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(no).addTurn(e.id,c,r.references,d,l,u,r.ignoredSkills,void 0)}}a(hbr,"addTurns");var XAt=et(pbr,mbr);f();var gbr=E.Object({conversationId:E.String()});function Abr(t,e,r){return t.get(no).destroy(r.conversationId),["OK",null]}a(Abr,"handleConversationDestroyChecked");var ZAt=et(gbr,Abr);f();var ybr=E.Object({turnId:E.String(),acceptedFileCount:E.Number({minimum:0}),totalFileCount:E.Number({minimum:1})}),Cbr=new dt("conversationNotifyCodeAcceptance");async function vbr(t,e,r){let n=t.get(no).findByTurnId(r.turnId);if(!n)return Cbr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let o=await nc(t,n,{languageId:""});return Mf(t,void 0,{mode:n?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:n?.turn.getResolvedModelId()??"unknown"},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${Au("agentPanel")}.codeAcceptance`,o),["OK",null]}a(vbr,"handleConversationNotifyCodeAcceptanceChecked");var eyt=et(ybr,vbr);f();var xbr=E.Object({});function Ebr(t,e,r){return[{path:t.get(hi).directory},null]}a(Ebr,"handleConversationPersistenceChecked");var tyt=et(xbr,Ebr);f();f();var TPe=class{static{a(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(Fi).getSession(),n=e.get(uu);return r&&r.githubAppId&&r.githubAppId!==D0?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},wPe=class{static{a(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(nr).getToken()).envelope.chat_enabled?"ok":"failed"}}},bbr=[new TPe,new wPe],Ag=class{constructor(e,r=bbr){this.ctx=e;this.checks=r;this.emitter=new is;this.onChange=this.emitter.event;lc(e,async()=>{await this.check()})}static{a(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(o=>o.check(this.ctx))));let r=e.every(o=>o.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emitter.fire(n),n}};var Ibr=E.Object({forceCheck:E.Optional(E.Boolean())});async function Tbr(t,e,r){let n=r.forceCheck??!1;return[await t.get(Ag).check(n),null]}a(Tbr,"handleConversationPreconditionsChecked");var ryt=et(Ibr,Tbr);f();var wbr=E.Object({turnId:E.String(),rating:E.Number(),doc:E.Optional(Bp),textDocument:E.Optional(Bp),source:E.Optional(gg)});async function _br(t,e,r){let n=await a1(t,r,e),o=tw(r.source),s="unrated";r.rating>0?s="positive":r.rating<0&&(s="negative");let c=await nc(t,t.get(no).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Mf(t,n,{rating:s,uiKind:o},{},`${Au(o)}.messageRating`,c),["OK",null]}a(_br,"handleConversationRatingChecked");var nyt=et(wbr,_br);f();f();var $ce=class extends v_{static{a(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:jv,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let o={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(jw).invokeClientTool(e,o)}catch(s){throw new Error(`Failed to invoke client tool ${this.name}: ${String(s)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new va;let o={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(ig).invokeClientToolConfirmation(e,o)}catch(s){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(s)}`)}}};var Sbr=E.Object({tools:E.Array(RAt)});function Rbr(t,e,r){let n=t.get(El);return r.tools.forEach(s=>{n.registerTool(new $ce({name:s.name,description:s.description,inputSchema:s.inputSchema,confirmationMessages:s.confirmationMessages}))}),[n.getToolsForModel().filter(s=>s.type!=="mcp"),null]}a(Rbr,"conversationRegisterToolsChecked");var iyt=et(Sbr,Rbr);f();var kbr=E.Object({workspaceFolders:E.Optional(E.Array(OM))});async function Pbr(t,e,r){let n=Pke(t).map(s=>({id:s.id,description:s.description,shortDescription:s.shortDescription,scopes:s.scopes})),o=t.get(ay);if(r.workspaceFolders&&r.workspaceFolders.length>0){let c=(await o.collectPromptFiles(t,r.workspaceFolders)).filter(l=>!n.some(u=>u.id===l.name)).map(l=>({id:l.name,description:l.description||"",shortDescription:"",scopes:["chat-panel","agent-panel"]}));n.push(...c)}return[n,null]}a(Pbr,"handleConversationTemplatesChecked");var oyt=et(kbr,Pbr);f();var Dbr=E.Object({workDoneToken:E.Union([E.String(),E.Number()]),conversationId:ace,turnId:E.Optional(UP),message:mPe,followUp:E.Optional(E.Object({id:E.String(),type:E.String()})),doc:E.Optional(Bp),textDocument:E.Optional(Bp),selection:E.Optional($c),visibleRanges:E.Optional(hce),computeSuggestions:E.Optional(E.Boolean()),references:E.Optional(E.Array(FM)),workspaceFolder:E.Optional(E.String()),workspaceFolders:E.Optional(E.Array(OM)),ignoredSkills:E.Optional(E.Array(E.String())),confirmationResponse:Ldt,model:E.Optional(E.String()),modelProviderName:E.Optional(E.String()),chatMode:E.Optional(dce),needToolCallConfirmation:E.Optional(E.Boolean()),agentSlug:E.Optional(E.String())});async function Bbr(t,e,r){WM.validate(r.workspaceFolders);let n=await a1(t,r,e),o=t.get(no),s=o.get(r.conversationId),c=lce(r.message),l=new R_({message:c,type:"user"},r.turnId);l.chatMode=zse(r.chatMode),l.userRequestedModel=r.model,l.needToolCallConfirmation=r.needToolCallConfirmation,r.agentSlug&&(l.agent={agentSlug:r.agentSlug});let u=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,d=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Wce(u),p=gce({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});l=await o.addTurn(s.id,l,r.references,p,u,d,r.ignoredSkills,r.confirmationResponse);let m=QM(r),h=t.get(zf).add(m.progressToken,e),g=new L_(t,s,l,h);return await(await t.get(jE).createProcessor(g,m.progressToken,r.computeSuggestions)).process(m,h,r.followUp,n,r.model,r.modelProviderName),[{conversationId:s.id,turnId:l.id,agentSlug:l.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}a(Bbr,"handleConversationTurnChecked");var syt=et(Dbr,Bbr);f();var Nbr=E.Object({conversationId:E.String(),turnId:E.String(),source:E.Optional(gg)});async function Mbr(t,e,r){t.get(no).deleteTurn(r.conversationId,r.turnId);let o=tw(r.source),s=await nc(t,t.get(no).findByTurnId(r.turnId),{languageId:""});return Mf(t,void 0,{messageId:r.turnId,uiKind:o,conversationId:r.conversationId},{},`${Au(o)}.messageDelete`,s),["OK",null]}a(Mbr,"handleConversationTurnDeleteChecked");var ayt=et(Nbr,Mbr);f();var Lbr=E.Object({toolIds:E.Array(E.String())});function Fbr(t,e,r){let n=t.get(El);return r.toolIds.forEach(s=>{n.unregisterTool(s)}),[n.getToolsForModel().filter(s=>s.type!=="mcp"),null]}a(Fbr,"conversationUnregisterToolsChecked");var cyt=et(Lbr,Fbr);f();var Obr=E.Object({tools:E.Array(E.Object({name:E.String(),status:E.Enum(x_)}))});function Qbr(t,e,r){let n=t.get(El);return r.tools.forEach(s=>{n.updateToolStatus(s.name,s.status)}),[n.getToolsForModel().filter(s=>s.type!=="mcp"),null]}a(Qbr,"conversationUpdateToolsStatusChecked");var lyt=et(Obr,Qbr);f();var Ubr=E.Object({document:E.Object({uri:E.String(),text:E.String(),languageId:E.String(),version:E.Number()}),selection:E.Object({start:E.Object({line:E.Number(),character:E.Number()}),end:E.Object({line:E.Number(),character:E.Number()})})});function qbr(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}a(qbr,"buildSystemMessage");function Hbr(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,o=t.selection.end.line+1,s=r.map((c,l)=>{let u=t.selection.start.line+l+1;return`/* ${u>n&&u<o?"Selected ":""}Line ${u} */${c}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${o}`,s,"```","","</currentChange>"].join(`
`)}a(Hbr,"buildUserMessage");function Wbr(t,e){let r=[],n=t.text.split(`
`),o=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,s;for(;(s=o.exec(e))!==null;){let[c,l,u,d,p,m,h]=s;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(p.toLowerCase()))continue;let g=parseInt(u)-1;if(g<0||g>=n.length)continue;let A=n[g],y=Math.max(A.search(/\S/),0),v=A.trimEnd().length,b={uri:t.uri,range:{start:{line:g,character:y},end:{line:g,character:v}},message:h.trim(),kind:p.toLowerCase(),severity:m.toLowerCase()};r.push(b)}return r}a(Wbr,"parseReviewComments");async function $br(t,e,r){if(!r.document.text)return[null,{code:Qt.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:Qt.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:Qt.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:Qt.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:Qt.InvalidRequest,message:"Selection start line must be before end line"}];let o=t.get(Bs),s=await Go.getModelConfiguration(t,"codeReview"),c=[{role:"system",content:qbr()},{role:"user",content:Hbr(r)}],l=await t.get(nr).getToken(),u=await t.get(Lt).updateExPValuesAndAssignments(l),d=await o.fetchResponse({modelConfiguration:s,messages:c,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Yd.user("code-review",wr())},e,u);if(d.type!=="success")return[null,{code:Qt.InternalError,message:"Failed to generate code review"}];let p=Wbr(r.document,d.value);return p.sort((m,h)=>m.range.start.line-h.range.start.line),[{comments:p},null]}a($br,"handleCopilotCodeReviewChecked");var uyt=et(Ubr,$br);f();f();var fH=class t{constructor(e){this.ctx=e;this.name="ReviewChangesProvider"}static{a(this,"ReviewChangesProvider")}static{this.DEFAULT_TIMEOUT=120*1e3}async fetchCodeReview(e,r){let n=await this.ctx.get(nr).getToken(),o=Gm(this.ctx,n,"api","agents/github-code-review"),c=gh(this.ctx)["Copilot-Integration-Id"];return Sx(this.ctx,o,n.token,void 0,ly(),e,r,{"X-Copilot-Code-Review-Mode":"ide","Copilot-Integration-Id":c},t.DEFAULT_TIMEOUT)}static changesToReference(e){return{type:"github.pull_request",id:"1",data:{type:"pull-request",headFileContents:e.map(r=>({path:r.path,content:r.headContent})),baseFileContents:e.map(r=>({path:r.path,content:r.baseContent}))}}}static createReviewRequest(e){return{messages:[{role:"user",copilot_references:[t.changesToReference(e)]}]}}};f();f();var jce=/```suggestion(\u0020*(\r\n|\n))((?<suggestion>[\s\S]*?)(\r\n|\n))?```/g;var Gce=class t{static{a(this,"ReviewChangesResponseParser")}static findFirstNonWhitespaceCharacterIndex(e){let r=e.match(/\S/);return r?r.index:e.length}static removeSuggestion(e){return e.replaceAll(jce,"")}static extractSuggestionAndText(e){jce.lastIndex=0;let n=jce.exec(e)?.groups?.suggestion||null,o=t.removeSuggestion(e);return{suggestion:n,textWithoutSuggestion:o}}static ghCommentToReviewComment(e,r){let n=r.headContent.split(`
`)[e.data.line-1],o=n.trimEnd().length,s={start:{line:e.data.start_line?e.data.start_line-1:e.data.line-1,character:t.findFirstNonWhitespaceCharacterIndex(n)},end:{line:e.data.line-1,character:o}},c=e.data.body,{suggestion:l,textWithoutSuggestion:u}=t.extractSuggestionAndText(c);return{uri:r.uri,range:s,message:u,kind:e.data.problem_type,severity:"medium",suggestion:l}}static parseLine(e){if(e==="data: [DONE]")return[];if(e==="")return[];let r=JSON.parse(e.replace("data: ",""));return Array.isArray(r.copilot_references)&&r.copilot_references.length>0?r.copilot_references.filter(n=>n.type):[]}static parseReviewResponse(e,r){let n=e.split(`
`),o=[];for(let s of n){let c=t.parseLine(s);for(let l of c.filter(u=>u.type==="github.generated-pull-request-comment")){if(l.data.side!=="RIGHT")continue;let u=r.find(p=>p.path===l.data.path);if(!u)continue;let d=t.ghCommentToReviewComment(l,u);o.push(d)}}return o}};var jbr=E.Object({uri:E.String(),path:E.String(),baseContent:E.String(),headContent:E.String()}),Gbr=E.Object({changes:E.Array(jbr)}),pH;async function Vbr(t,e,r){pH&&(pH.cancel(),pH.dispose()),pH=new An.CancellationTokenSource;let n=new cf([e,pH.token]),o=new fH(t);if(!(await t.get(nr).getToken()).isCopilotCodeReviewEnabled)return[null,{code:Qt.InternalError,message:"GitHub Copilot Code Review is not enabled."}];let c=fH.createReviewRequest(r.changes),l=await o.fetchCodeReview(c,n);if(!l.ok)return l.status===402?[null,{code:l.status,message:"You have reached your GitHub Copilot Code Review quota limit."}]:[null,{code:Qt.InternalError,message:"Failed to generate code review."}];let u=await l.text();return[{comments:Gce.parseReviewResponse(u,r.changes)},null]}a(Vbr,"handleCopilotCodeReviewReviewChangesChecked");var dyt=et(Gbr,Vbr);f();f();var q_=class{constructor(e,r,n,o,s,c){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=o;this.userSelectedModel=s;this.userSelectedModelProviderName=c;this.workingSetUriToPathMap=new Map;for(let l of n.workingSet)this.workingSetUriToPathMap.set(l.uri,yE.uriToPath(l.uri))}static{a(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return Yd.user("conversation-edits",this.editTurnId)}};f();async function Vce(t,e,r,n){let s=t.get(xl).create("panel","en"),c=new Zw({message:"",type:"user"},[]),l="file:///path/to/HelloWorld.java",u=new q_(t,s,c,n,$r.Gpt4o),d=t.get(md);await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${l})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:l}),await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:l,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let p="file:///path/to/HelloWorld.py";await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${p})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:p}),await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:p,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:p,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:p,partialText:"",languageId:"python",markdownCodeFence:"```"})}a(Vce,"streamMockedResult");f();var zbr=E.Object({enableMock:E.Boolean()}),c1=class{constructor(){this.enableMock=!1}static{a(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function Kbr(t,e,r){return t.get(c1).setMockEnabled(r.enableMock),["OK",null]}a(Kbr,"handleTestingSetCopilotEditsResponseChecked");var fyt=et(zbr,Kbr);var Ybr=E.Object({request:E.String(),response:E.Optional(E.String())}),Jbr=E.Union([E.Literal("panel")]),Xbr=E.Object({partialResultToken:E.Union([E.String(),E.Number()]),turns:E.Array(Ybr,{minItems:1}),workingSet:E.Optional(E.Array(oH)),source:E.Optional(Jbr),workspaceFolder:E.Optional(E.String()),userLanguage:E.Optional(E.String()),model:E.Optional(E.String()),modelProviderName:E.Optional(E.String())});function Zbr(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let o=new Zw({message:n.request,type:"user"},e.workingSet);n.response&&(o.response={message:n.response,type:"model"}),e.workspaceFolder&&(o.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,o)}return r}a(Zbr,"buildEditConversation");async function eIr(t,e,r){if(t.get(c1).isMockEnabled())return await Vce(t,wr(),wr(),r.partialResultToken),[[],null];let n=Zbr(t.get(xl),r),o=n.getLastTurn(),s=new q_(t,n,o,r.partialResultToken,r.model,r.modelProviderName),c=t.get(zf).add(r.partialResultToken,e);return[await t.get(CE).createOrContinueEditConversation(s,c),null]}a(eIr,"handleEditConversationCreateChecked");var pyt=et(Xbr,eIr);f();var tIr=E.Object({editConversationId:E.String()});function rIr(t,e,r){return t.get(xl).destroy(r.editConversationId),["OK",null]}a(rIr,"handleEditConversationDestroyChecked");var myt=et(tIr,rIr);f();var nIr=E.Object({partialResultToken:E.Union([E.String(),E.Number()]),editConversationId:E.String(),message:E.String(),workingSet:E.Optional(E.Array(oH)),workspaceFolder:E.Optional(E.String()),userLanguage:E.Optional(E.String()),model:E.Optional(E.String())});function iIr(t,e,r){let n=t.get(e),o=new Zw({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(o.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,o),n}a(iIr,"buildEditConversation");async function oIr(t,e,r){if(t.get(c1).isMockEnabled())return await Vce(t,r.editConversationId,wr(),r.partialResultToken),[[],null];let n=t.get(xl),o=iIr(n,r.editConversationId,r),s=o.getLastTurn(),c=new q_(t,o,s,r.partialResultToken,r.model),l=t.get(zf).add(r.partialResultToken,e);return[await t.get(CE).createOrContinueEditConversation(c,l),null]}a(oIr,"handleEditConversationTurnChecked");var hyt=et(nIr,oIr);f();var sIr=E.Object({editConversationId:E.String(),editTurnId:E.String(),source:E.Optional(gg)});async function aIr(t,e,r){t.get(xl).deleteTurn(r.editConversationId,r.editTurnId);let o=await ZR(t,r.editTurnId,r.editConversationId,{languageId:""});return Mf(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Au("editsPanel")}.copilotEditsMessageDelete`,o),["OK",null]}a(aIr,"handleEditConversationTurnDeleteChecked");var gyt=et(sIr,aIr);f();var cIr=E.Object({}),lIr=E.Object({servers:E.Array(E.Object({name:E.String(),tools:E.Array(E.Object({name:E.String(),status:E.Enum(x_)}))}))}),uIr=E.Object({serverName:E.String(),promptName:E.String(),arguments:E.Optional(E.Record(E.String(),E.String()))}),dIr=E.Object({serverName:E.String(),promptName:E.String(),argumentName:E.String(),prefix:E.String(),alreadyResolved:E.Optional(E.Record(E.String(),E.String()))}),fIr=E.Object({serverName:E.String(),uri:E.String()});function pIr(t,e,r){return[t.get(jf).getAllTools(),null]}a(pIr,"handleGetMCPToolsChecked");function mIr(t,e,r){for(let{name:o,tools:s}of r.servers)for(let{name:c,status:l}of s)t.get(jf).updateMCPToolStatus(o,c,l);return[t.get(jf).getAllTools(),null]}a(mIr,"handleUpdateMCPToolsStatusChecked");async function hIr(t,e,r){return[await t.get(jf).readResource(r.serverName,r.uri),null]}a(hIr,"handleReadResourceChecked");async function gIr(t,e,r){let{serverName:n,promptName:o,arguments:s={}}=r;return[await t.get(jf).getPrompt(n,o,s),null]}a(gIr,"handleGetPromptChecked");async function AIr(t,e,r){let{serverName:n,promptName:o,argumentName:s,prefix:c,alreadyResolved:l={}}=r;return[await t.get(jf).completePrompt(n,o,s,c,l),null]}a(AIr,"handleCompletePromptChecked");var Ayt=et(cIr,pIr),yyt=et(lIr,mIr),Cyt=et(fIr,hIr),vyt=et(uIr,gIr),xyt=et(dIr,AIr);f();var yIr=E.Object({});async function CIr(t,e,r){let n=await t.get(nr).getToken();return[vIr(await t.get(od).getMetadata(),n),null]}a(CIr,"handleCopilotModelsChecked");function vIr(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=Ch.filterModelsWithEditorPreviewFeatures(t,r),o=[];return n.forEach(s=>{if(s.model_picker_enabled===!0){let c=[];s.capabilities.type==="chat"?(c.push("chat-panel"),c.push("edit-panel"),c.push("inline"),!mY.has(s.capabilities.family)&&s.capabilities.supports?.tool_calls&&(s.capabilities.limits?.max_prompt_tokens??!1)&&c.push("agent-panel"),o.push({modelFamily:s.capabilities.family,modelName:s.name,modelPolicy:s.policy,scopes:c,id:s.id,preview:s.preview??!1,isChatDefault:s.is_chat_default??!1,isChatFallback:s.is_chat_fallback??!1,capabilities:{supports:{vision:s.capabilities.supports?.vision??!1}},billing:s.billing?{isPremium:s.billing?.is_premium??!0,multiplier:s.billing?.multiplier??0}:void 0})):s.capabilities.type==="completion"?o.push({modelFamily:s.capabilities.family,modelName:s.name,modelPolicy:s.policy,scopes:["completion"],id:s.id,preview:s.preview??!1,isChatDefault:s.is_chat_default??!1,isChatFallback:s.is_chat_fallback??!1,capabilities:{supports:{vision:s.capabilities.supports?.vision??!1}},billing:s.billing?{isPremium:s.billing?.is_premium??!0,multiplier:s.billing?.multiplier??0}:void 0}):o.push({modelFamily:s.capabilities.family,modelName:s.name,modelPolicy:s.policy,scopes:c,id:s.id,preview:s.preview??!1,isChatDefault:s.is_chat_default??!1,isChatFallback:s.is_chat_fallback??!1,capabilities:{supports:{vision:s.capabilities.supports?.vision??!1}},billing:s.billing?{isPremium:s.billing?.is_premium??!0,multiplier:s.billing?.multiplier??0}:void 0})}}),o}a(vIr,"filterModels");var Eyt=et(yIr,CIr);f();var xIr=E.Object({model:E.Optional(E.String()),status:E.Optional(E.String())});async function EIr(t,e,r){return r.model&&r.status==="enabled"?await t.get(od).acceptModelPolicy(r.model)?["OK",null]:[null,{code:Qt.InternalError,message:"Failed to accept model policy"}]:[null,{code:Qt.InvalidRequest,message:"Invalid model or status"}]}a(EIr,"handleCopilotModelsPolicyChecked");var byt=et(xIr,EIr);f();f();f();f();function bIr(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}a(bIr,"panelPositionForDocument");async function*Iyt(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}a(Iyt,"trimChoices");var $M=class{constructor(e,r,n,o){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=o;this.targetPosition=bIr(this.textDocument,this.startPosition)}static{a(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function _Pe(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await _Pe(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}a(_Pe,"reportSolutions");async function SPe(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:SPe(t,e)}}a(SPe,"generateSolutionsStream");function zce(t){return t.replace(/\s+/g,"")}a(zce,"normalizeCompletionText");async function Tyt(t,e,r,n,o,s){let c=e.targetPosition,l=e.textDocument,u=RT(t,l.uri),d=wr(),p=Kr.createAndMarkAsIssued({headerRequestId:d,languageId:l.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments({uri:l.uri,languageId:l.detectedLanguageId},p),o&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({engineName:o})),s&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({comparisonRequestId:s}));let m=await oN(t,d,sv(l,c),e.savedTelemetryData);if(m.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(m.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(m.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(m.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(m.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let h=m.prompt,g=m.trailingWs;return g.length>0&&(e.startPosition=Is.position(e.startPosition.line,e.startPosition.character-g.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...$D(h),solutionCount:e.solutionCountTarget,promptEndPos:l.offsetAt(c)}),n.debug(t,"prompt:",h),Pt(t,"solution.requested",e.savedTelemetryData),{prompt:h,trailingWs:g,telemetryData:e.savedTelemetryData,repoInfo:u,ourRequestId:d}}a(Tyt,"setupPromptAndTelemetry");function wyt(t,e,r,n,o,s){let c=t.get(RA).forLanguage(t,e.detectedLanguageId,s),l=G0(e.detectedLanguageId),u=HZ(e,r),d={language:e.detectedLanguageId,next_indent:u.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},p={};c==="parsing"&&!l&&(p.stop=[`

`,`\r
\r
`]);let m=ST(t,s),h;switch(c){case"server":h=a(()=>{},"finishedCb"),d.force_indent=u.prev??-1,d.trim_by_indentation=!0;break;case"parsingandserver":h=l?L7(t,e,o.startPosition):()=>{},d.force_indent=u.prev??-1,d.trim_by_indentation=!0;break;case"parsing":default:h=l?L7(t,e,o.startPosition):()=>{};break}return{extra:d,postOptions:p,finishedCb:h,engineInfo:m}}a(wyt,"setupCompletionParams");var RPe=new dt("solutions");async function IIr(t,e){let r=e.targetPosition,n=e.textDocument,o=await Tyt(t,e,"open copilot",RPe);if("status"in o)return o;let{prompt:s,trailingWs:c,telemetryData:l,repoInfo:u,ourRequestId:d}=o,{extra:p,postOptions:m,finishedCb:h,engineInfo:g}=wyt(t,n,r,s,e,l),A=e.cancellationToken,y={prompt:s,languageId:n.detectedLanguageId,repoInfo:u,ourRequestId:d,engineModelId:g.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:m,headers:g.headers,extra:p},v=await t.get(Mp).fetchAndStreamCompletions(t,y,l.extendedBy(),h,A);if(v.type==="failed"||v.type==="canceled")return{status:"FinishedWithError",error:`${v.type}: ${v.reason}`};let b=v.choices;b=Iyt(b),b=D7(b,k=>K7(t,n,r,k,!1,RPe));let I=D7(b,async k=>{let N=k.completionText;RPe.info(t,`Open Copilot completion: [${k.completionText}]`);let F=await HXe(t,n,r,k.completionText)??Is.position(r.line,0),[O]=lw(n.getText(Is.range(F,r)));N=O+N;let Y=k.completionText;c.length>0&&Y.startsWith(c)&&(Y=Y.substring(c.length));let z=k.meanLogProb,V=z!==void 0?Math.exp(z):0,U=l.extendedBy({choiceIndex:k.choiceIndex.toString()});return{completionText:Y,insertText:N,range:Is.range(F,r),meanProb:V,meanLogProb:z||0,requestId:k.requestId,choiceIndex:k.choiceIndex,telemetryData:U,copilotAnnotations:k.copilotAnnotations}});return SPe(A,I[Symbol.asyncIterator]())}a(IIr,"launchSolutions");async function Kce(t,e,r){return t.get(Wo).withProgress(async()=>{let o=IIr(t,e);return await _Pe(o,r)})}a(Kce,"runSolutions");var Syt=Ne(TI()),hH=Ne(qc());f();f();function Yce(t,e){let r=t.split(`
`),n=e,o=e,s=r[e.line],c=s.indexOf("%");c!==-1&&(s=s.substring(0,c)+s.substring(c+1),n={line:e.line,character:c});let l=s.indexOf("^");if(l!==-1){let u=s.indexOf("^",l+1);if(u===-1)throw new Error("Challenge document must contain zero or two ^ characters.");s=s.substring(0,l)+s.substring(l+1,u)+s.substring(u+1),n={line:e.line,character:e.character},o={line:e.line,character:e.character+u-l-1}}return{cursorLine:s,lines:r,start:n,end:o}}a(Yce,"parseChallengeDoc");var TIr=E.Object({text:E.String(),score:E.Number()}),wIr=E.Object({documents:E.Array(TIr),options:E.Optional(E.Object({}))});async function Jce(t,e,r){let n=wr();for(let o=0;o<e.length&&o<10;o++){let{text:s,score:c}=e[o],{cursorLine:l,lines:u,start:d}=Yce(s,t),p=[l.slice(Math.min(d.character,t.character))].concat(u.slice(t.line+1)).join(`
`);r.offset=u.slice(0,t.line).reduce((m,h)=>m+h.length+1,0)+d.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:p,insertText:p,range:{start:t,end:t},meanProb:c,meanLogProb:-1,choiceIndex:o,telemetryData:IC.createEmptyConfigForTesting()})}await r.onFinishedNormally()}a(Jce,"runTestSolutions");var ky=class{constructor(e){this.documents=e}static{a(this,"ExternalTestingPanelCompletionDocuments")}};function _Ir(t,e,r){return t.forceSet(ky,new ky(r.documents)),["OK",null]}a(_Ir,"handleTestingSetPanelCompletionDocumentsChecked");var _yt=et(wIr,_Ir);var Ryt=iZ.type;function SIr(t,e,r,n,o){let s=zce(n.completionText),c=(0,Syt.SHA256)(s).toString();return t.get(zs).set(c,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:c,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:o-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:c}),{range:n.range,insertText:n.insertText,command:{command:ARe,title:`Accept completion ${o}`,arguments:[c]}}}a(SIr,"makeCompletion");function PPe(t,e){return`${t}/${e}`}a(PPe,"progressMessage");var kPe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{a(this,"SolutionHandler")}get service(){return this.ctx.get(Ir)}async onSolution(e){this.count+=1;let r=SIr(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(hH.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:PPe(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return RIr(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(hH.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function RIr(t,e,r=0){t!==void 0&&await e.connection.sendProgress(hH.WorkDoneProgress.type,t,{kind:"end",message:PPe(r,10)})}a(RIr,"reportDone");var mH;async function kIr(t,e,r){let n=await Ry(t,r.textDocument,e),o=r.position;r.workDoneToken!==void 0&&await t.get(Ir).connection.sendProgress(hH.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:PPe(0,10),percentage:0});let s=[],c=a(p=>(s.push(p),Promise.resolve()),"onCompletion"),l=r.partialResultToken;l!==void 0&&(c=a(async p=>{await t.get(Ir).connection.sendProgress(iZ.partialResult,l,{items:[p]})},"onCompletion"));let u=new kPe(t,r,c),d=t.get(ky);if(d.documents){let p=d.documents;await Jce(o,p,u)}else{u.offset=n.offsetAt(o);let p=new $M(n,o,e,10);await Kce(t,p,u)}return u.error!==void 0?[null,{code:Qt.InternalError,message:u.error}]:[{items:s},null]}a(kIr,"handleChecked");async function PIr(t,e,r){mH&&(mH.cancel(),mH.dispose()),mH=new An.CancellationTokenSource;let n=mH.token,o=new cf([e,n]);try{return await kIr(t,o,r)}catch(s){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:Qt.ServerCancelled,message:"Request was superseded by a new request"}];throw s}}a(PIr,"handleCheckedWithAbort");var kyt=et(gJe,PIr);f();f();f();function BIr(t,e,r){let{apiUrl:n,serverUrl:o}=r||t.get(gf).getConfiguredUrls(),s=new URL("login/device",o).href,c=new URL("_ping",e.proxy).href,l=new URL("_ping",e.api).href,u=new URL("_ping",e.telemetry).href;function d(p){return new URL(p).host}return a(d,"label"),[{label:d(s),url:s},{label:d(n),url:n,session:r},{label:d(c),url:c},{label:d(l),url:l,session:r},{label:d(u),url:u}]}a(BIr,"urlsToCheck");async function Pyt(t,e,r=z4(t),n,o){let s=BIr(t,r,n).map(async({label:c,url:l,session:u})=>{let{message:d,status:p}=await NIr(e,l,u,o);return{label:c,url:l,message:d,status:p}});return await Promise.all(s)}a(Pyt,"checkReachability");async function NIr(t,e,r,n){try{let o=new AbortController;n?.onCancellationRequested(()=>o.abort());let s=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:o.signal}),c=s.status>=200&&s.status<400?"reachable":"unreachable";return{message:`HTTP ${s.status}`+(s.statusText?` - ${s.statusText}`:""),status:c}}catch(o){return{message:String(o),status:"unreachable"}}}a(NIr,"determineReachability");var bm=Ne(require("os")),jM=Ne(require("tls"));async function Byt(t,e){let r=await t.get(Lr).getImplementation(),n=await t.get(nr).getGitHubSession(),o=await t.get(nr).getToken().catch(()=>{});return{sections:[LIr(t),MIr(t,n),FIr(t,r),await OIr(t,r,o?.endpoints,n,e)]}}a(Byt,"collectDiagnostics");function Nyt(t){return t.sections.map(QIr).join(bm.EOL+bm.EOL)+bm.EOL}a(Nyt,"formatDiagnosticsAsMarkdown");function MIr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:y2(t),"GitHub Account":n,"Session ID":t.get(Fs).sessionId,"Send Restricted Telemetry":jD(t)?"enabled":"disabled","Content Exclusion":t.get(gc).enabled?"enabled":"unavailable"}}}a(MIr,"collectCopilotSection");function LIr(t){let e={Plugin:qIr(t),Editor:UIr(t),"Operating System":`${bm.type()} ${bm.release()} (${bm.arch()})`};return l1(e,"NODE_OPTIONS"),{name:"Environment",items:e}}a(LIr,"collectEnvironmentSection");function FIr(t,e){let r=t.get(Oc).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":jM.rootCertificates.length,"TLS Default Min Version":jM.DEFAULT_MIN_VERSION,"TLS Default Max Version":jM.DEFAULT_MAX_VERSION};return l1(n,"http_proxy"),l1(n,"https_proxy"),l1(n,"no_proxy"),l1(n,"SSL_CERT_FILE"),l1(n,"SSL_CERT_DIR"),l1(n,"OPENSSL_CONF"),l1(n,"NODE_EXTRA_CA_CERTS"),l1(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}a(FIr,"collectNetworkConfigSection");async function OIr(t,e,r,n,o){return{name:"Reachability",items:Object.fromEntries((await Pyt(t,e,r,n,o)).map(({label:c,message:l})=>[c,l]))}}a(OIr,"collectReachabilitySection");function Dyt(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}a(Dyt,"quoteCode");function l1(t,e){let r=process.env[e];r&&(t[Dyt(e)]=Dyt(r)),r!==process.env[e.toUpperCase()]&&l1(t,e.toUpperCase())}a(l1,"addEnvironmentVariable");function QIr(t){return`## ${t.name}`+bm.EOL+bm.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(bm.EOL)}a(QIr,"formatSectionAsMarkdown");function UIr(t){let e=t.get(on).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}a(UIr,"getEditorDisplayVersion");function qIr(t){let e=t.get(on).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}a(qIr,"getPluginDisplayVersion");var HIr=E.Object({});async function WIr(t,e){return[{report:Nyt(await Byt(t,e))},null]}a(WIr,"handleDiagnosticsChecked");var Myt=et(HIr,WIr);f();f();f();f();function Lyt(t,e,r){function n(s,c,l){let u=new RegExp(`^(${c})+`,"g");return s.split(`
`).map(d=>{let p=d.replace(u,""),m=d.length-p.length;return l(m)+p}).join(`
`)}a(n,"replace");let o;if(t.tabSize===void 0||typeof t.tabSize=="string"?o=4:o=t.tabSize,t.insertSpaces===!1){let s=a(c=>n(c," ",l=>"	".repeat(Math.floor(l/o))+" ".repeat(l%o)),"r");e.displayText=s(e.displayText),e.completionText=s(e.completionText)}else if(t.insertSpaces===!0){let s=a(c=>n(c,"	",l=>" ".repeat(l*o)),"r");if(e.displayText=s(e.displayText),e.completionText=s(e.completionText),r){let c=a(l=>{if(l==="")return l;let u=l.split(`
`)[0],d=u.length-u.trimStart().length,p=d%o;if(p!==0&&d>0){let m=" ".repeat(p);return n(l,m,h=>" ".repeat((Math.floor(h/o)+1)*o))}else return l},"re");e.displayText=c(e.displayText),e.completionText=c(e.completionText)}}return e}a(Lyt,"normalizeIndentCharacter");function Fyt(t,e,r,n,o,s,c){let l=n.lineAt(o),u=e.map(d=>{let p=Is.range(Is.position(o.line,0),Is.position(o.line,o.character+d.suffixCoverage)),m="";if(s&&(d.completion=Lyt(s,d.completion,l.isEmptyOrWhitespace)),l.isEmptyOrWhitespace&&(d.completion.displayNeedsWsOffset||d.completion.completionText.startsWith(l.text)))m=d.completion.completionText;else{let g=Is.range(p.start,o);m=n.getText(g)+d.completion.displayText}return{uuid:wr(),insertText:m,range:p,uri:n.uri,index:d.completion.completionIndex,telemetry:d.telemetry,displayText:d.completion.displayText,position:o,offset:n.offsetAt(o),resultType:r,copilotAnnotations:d.copilotAnnotations,clientCompletionId:d.clientCompletionId}});if(r===2&&c!==void 0){let d=u.find(p=>p.index===c);if(d){let p=u.filter(m=>m.index!==c);u=[d,...p]}}return u}a(Fyt,"completionsFromGhostTextResults");async function DPe(t,e,r,n={}){let o=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),o=e.position.character-n.selectedCompletionInfo.range.end.character);let s=await JEe(t,e,r,n);if(s.type!=="success")return s;let[c,l]=s.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:s.telemetryBlob}};let u=Uet(t,e.textDocument,e.position,l),d=Fyt(t,c,l,e.textDocument,e.position,n.formattingOptions,u);if(d.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:s.telemetryData};if(l!==2){e=e.applyEdits([{newText:d[0].insertText,range:d[0].range}]);let m={isSpeculative:!0,opportunityId:n.opportunityId},h=a(()=>JEe(t,e,void 0,m),"fn");t.get(Fh).set(d[0].clientCompletionId,h)}let p=d.map(m=>{let{start:h,end:g}=m.range,A=An.Range.create(h,An.Position.create(g.line,g.character-o));return{...m,range:A}});return{...s,value:p}}a(DPe,"getInlineCompletionsResult");async function Xce(t,e,r,n,o={}){$Ir(t,e,r);let s=await DPe(t,sv(e,r),n,o);return EXe(t,s)}a(Xce,"getInlineCompletions");function $Ir(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),o=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});_Z.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(o)}.`)}a($Ir,"logCompletionLocation");var Wyt=Ne(qc());f();var Oyt=require("crypto");var GM=class{static{a(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new NPe(e,this.id)}},NPe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{a(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let o=this.ctx.get(Ir),s=(0,Oyt.randomUUID)(),c=o.connection.onProgress(tZ.type,s,l=>{n.push(...l)});r.onCancellationRequested(()=>{c?.dispose()});try{let l=await o.connection.sendRequest(tZ.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:s},r);n.push(...l)}finally{c?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function VM(t,e,r){try{let n=t.get(Gc),o=new Map;n.providers.forEach(s=>{o.set(s.id,s)}),e.providers.forEach(s=>{let c=o.get(s.id);c&&c instanceof GM&&c.resolver.setContextItems(s.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(s=>{let c=o.get(s);c&&c instanceof GM&&(c.resolver.setUpdate(!0),c.resolver.data=r)})}catch(n){pn.error(t,"Failed to set context items on context providers",n)}}a(VM,"setContextItems");var BPe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};function Qyt(t,e,r){return e.map(o=>{try{if(typeof o=="string")return jc(r.uri,o,BPe);if(typeof o=="object"){let s=!0;return"language"in o&&(s&&=r.languageId==(o.language||"")),"scheme"in o&&(s&&=jc(r.uri,o.scheme||"",BPe)),"pattern"in o&&(s&&=jc(r.uri,o.pattern||"",BPe)),s}}catch{return!1}return!1}).some(Boolean)?10:0}a(Qyt,"match");f();var jIr=E.Object({documents:E.Array(E.String()),basename:E.Optional(E.String()),options:E.Optional(E.Object({}))}),W_=class{constructor(e,r){this.documents=e;this.basename=r}static{a(this,"ExternalTestingCompletionDocuments")}};function GIr(t,e,r){return t.forceSet(W_,new W_(r.documents,r.basename||"")),["OK",null]}a(GIr,"handleTestingSetCompletionDocumentsChecked");var Uyt=new dt("setCompletionDocuments"),Hyt=et(jIr,GIr);function Zce(t,e,r,n){let o=t.get(W_);if(o.documents){let s=n?3:1;if(r&&o.basename&&o.basename.trim().length>0){Uyt.debug(t,`Returning filtered completions by basename ${o.basename}`);let c=VIr(o,r);return c&&c.length>0?qyt(c,s,e):void 0}else return Uyt.debug(t,"Returning completions for all pre-set documents"),qyt(o.documents,s,e)}}a(Zce,"getTestCompletions");function qyt(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:o,lines:s,start:c,end:l}=Yce(n,r);return{insertText:[o.slice(Math.min(c.character,r.character))].concat(s.slice(r.line+1)).join(`
`),range:{start:c,end:l}}})}a(qyt,"sliceAndMapCompletions");function VIr(t,e){return t.basename===Mi(e)?t.documents||[]:[]}a(VIr,"getFilteredDocs");var $yt=E.Object({doc:E.Object({position:gu,insertSpaces:E.Optional(E.Boolean()),tabSize:E.Optional(E.Number()),uri:I7,version:E.Number()}),contextItems:E.Optional(nEe)}),gH;async function jyt(t,e,r,n){gH&&(gH.cancel(),gH.dispose()),gH=new An.CancellationTokenSource;let o=new cf([e,gH.token]);r.contextItems&&VM(t,r.contextItems);let s=Zce(t,r.doc.position,r.doc.uri,n);if(s)return[{completions:s.map(h=>({uuid:wr(),text:h.insertText,displayText:h.insertText,position:r.doc.position,range:h.range,docVersion:r.doc.version}))},null];let c;try{c=await Ry(t,r.doc,o)}catch(m){if(!(m instanceof Wyt.ResponseError))throw m;switch(m.code){case Qt.CopilotNotAvailable:case Qt.ContentModified:return[{completions:[]},null]}throw m}let l=r.doc.position,u=await Xce(t,c,l,o,{isCycling:n,formattingOptions:r.doc});if(!u)return[{completions:[]},null];let d=t.get(zs);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{completions:u.map(m=>({uuid:m.uuid,text:m.insertText,range:m.range,displayText:m.displayText,position:m.position,docVersion:c.version}))},null]}a(jyt,"handleGetCompletionsHelper");var Gyt=et($yt,(t,e,r)=>jyt(t,e,r,!1)),Vyt=et($yt,(t,e,r)=>jyt(t,e,r,!0));f();var zyt=Ne(TI()),zM=Ne(qc());var zIr=E.Object({doc:E.Object({position:gu,uri:I7,version:E.Number()}),panelId:E.String()});function KIr(t,e,r,n,o){let s=zce(o.completionText),c=(0,zyt.SHA256)(s).toString();return t.get(zs).set(c,{displayText:o.insertText,insertText:o.completionText,offset:n,uuid:c,range:r,uri:e.doc.uri,telemetry:o.telemetryData,index:o.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:o.copilotAnnotations,clientCompletionId:c}),{panelId:e.panelId,range:r,completionText:o.completionText,displayText:o.insertText,score:o.meanProb,solutionId:c}}a(KIr,"makeSolution");var MPe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{a(this,"SolutionHandler")}get service(){return this.ctx.get(Ir)}onSolution(e){return this.service.connection.sendNotification(new zM.NotificationType("PanelSolution"),KIr(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return Kyt(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new zM.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function Kyt(t,e){return e.connection.sendNotification(new zM.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}a(Kyt,"reportDone");var AH;async function YIr(t,e,r){AH&&(AH.cancel(),AH.dispose()),AH=new An.CancellationTokenSource;let n=new cf([e,AH.token]),o=r.doc.position,s=Is.range(o,o),c=new MPe(t,r,s),l=t.get(ky);if(l.documents){let u=l.documents;Jce(o,u,c)}else{let u;try{u=await Ry(t,r.doc,n)}catch(p){if(!(p instanceof zM.ResponseError))throw p;switch(p.code){case Qt.CopilotNotAvailable:case Qt.ContentModified:return JIr(t,r)}throw p}c.offset=u.offsetAt(o);let d=new $M(u,o,n,10);Kce(t,d,c)}return[{solutionCountTarget:10},null]}a(YIr,"handleGetPanelCompletionsChecked");async function JIr(t,e){return await Kyt(e.panelId,t.get(Ir)),[{solutionCountTarget:0},null]}a(JIr,"produceEmptySolutions");var Yyt=et(zIr,YIr);f();var XIr=E.Object({});function ZIr(t,e,r){return[{version:t.get(wo).getDisplayVersion(),buildType:TC(t),runtimeVersion:`node/${process.versions.node}`},null]}a(ZIr,"handleGetVersionChecked");var Jyt=et(XIr,ZIr);f();var eTr=E.Object({changes:E.Array(E.String()),userCommits:E.Array(E.String()),recentCommits:E.Array(E.String()),workspaceFolder:E.Optional(E.String()),userLanguage:E.Optional(E.String())});async function tTr(t,e,r){if(r.changes.length===0)return[null,{code:Qt.InvalidRequest,message:"No changes provided"}];let n=t.get(no),o=n.create({capabilities:{skills:[s1]}}),s=new R_({message:"",type:"user"});await n.addTurn(o.id,s);let c=QM({workDoneToken:wr()});await t.get(Ls).begin(o,s,c);let d=(await new L_(t,o,s,e).skillResolver.resolve(s1))?.head?.name,m=await t.get(Yk).generateCommitMessage(t,e,r,d);return m==null?[null,{code:Qt.InternalError,message:"Failed to generate commit message"}]:[{commitMessage:m},null]}a(tTr,"handleGitCommitGenerateChecked");var Xyt=et(eTr,tTr);f();var eCt=_xe.type,yH;function Zyt(t){return{title:"Completion Accepted",command:Iq,arguments:[t]}}a(Zyt,"makeCommand");async function rTr(t,e,r){yH&&(yH.cancel(),yH.dispose());let n=r.context.triggerKind===1;yH=new An.CancellationTokenSource;let o=yH.token,s=new cf([e,o]);r.contextItems&&VM(t,r.contextItems,r.data);let c=Zce(t,r.position,r.textDocument.uri,n);if(c)return[{items:c.map(g=>({command:Zyt(wr()),...g}))},null];let l=await Ry(t,r.textDocument,s),u=r.position,d=await Xce(t,l,u,s,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!d)return e.isCancellationRequested?[null,{code:Qt.RequestCancelled,message:"Request was canceled"}]:o.isCancellationRequested?[null,{code:Qt.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let p=t.get(zs);for(let h of d)p.set(h.uuid,{...h,triggerCategory:"ghostText"});return[{items:d.map(h=>({command:Zyt(h.uuid),insertText:h.insertText,range:h.range}))},null]}a(rTr,"handleChecked");var tCt=et(PZ,(t,e,r)=>rTr(t,e,r));f();var rCt=kxe.type,CH;async function iTr(t,e,r){CH&&(CH.cancel(),CH.dispose());let n=r.context.triggerKind===1;CH=new An.CancellationTokenSource;let o=CH.token,s=new cf([e,o]);r.contextItems&&VM(t,r.contextItems);let c=await Ry(t,r.textDocument,s),l=await DPe(t,sv(c,r.position),s,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(l.type!=="promptOnly")throw new Error(`Unexpected result type ${l.type}`);return[{prompt:l.prompt},null]}a(iTr,"handleChecked");var nCt=et(PZ,(t,e,r)=>iTr(t,e,r));f();f();function LPe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,o=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return KM(o)}a(LPe,"asReadableCert");function KM(t){return t.replace(/\s/g,"")}a(KM,"normalizeNewlines");var sTr=E.Object({});async function aTr(t){return[{certificates:(await t.get(yl).getAllRootCAs()).map(KM)},null]}a(aTr,"handleListCertificatesChecked");var iCt=et(sTr,aTr);f();f();var cTr=E.Object({url:E.String(),source:E.String(),id:E.String(),subfolder:E.Optional(E.String())}),oCt=E.Object({description:E.Optional(E.String()),is_required:E.Optional(E.Boolean()),format:E.Optional(E.Union([E.Literal("string"),E.Literal("number"),E.Literal("boolean"),E.Literal("filepath")])),value:E.Optional(E.String()),is_secret:E.Optional(E.Boolean()),default:E.Optional(E.String()),choices:E.Optional(E.Array(E.String()))}),FPe=E.Intersect([oCt,E.Object({variables:E.Optional(E.Record(E.String(),oCt))})]),lTr=E.Intersect([FPe,E.Object({type:E.Literal("positional"),value_hint:E.Optional(E.String()),is_repeated:E.Optional(E.Boolean())})]),uTr=E.Intersect([FPe,E.Object({type:E.Literal("named"),name:E.String(),is_repeated:E.Optional(E.Boolean())})]),sCt=E.Union([lTr,uTr]),aCt=E.Intersect([FPe,E.Object({name:E.String()})]),dTr=E.Object({registry_type:E.Optional(E.String()),registry_base_url:E.Optional(E.String()),identifier:E.Optional(E.String()),version:E.Optional(E.String()),file_sha256:E.Optional(E.String()),runtime_hint:E.Optional(E.String()),runtime_arguments:E.Optional(E.Array(sCt)),package_arguments:E.Optional(E.Array(sCt)),environment_variables:E.Optional(E.Array(aCt))}),fTr=E.Object({transport_type:E.Union([E.Literal("streamable"),E.Literal("sse")]),url:E.String(),headers:E.Optional(E.Array(aCt))}),pTr=E.Object({tool:E.Optional(E.String()),version:E.Optional(E.String()),build_info:E.Optional(E.Object({commit:E.Optional(E.String()),timestamp:E.Optional(E.String()),pipeline_id:E.Optional(E.String())}))},{additionalProperties:!0}),mTr=E.Object({id:E.String(),published_at:E.String(),updated_at:E.String(),is_latest:E.Boolean()},{additionalProperties:!1}),hTr=E.Object({"io.modelcontextprotocol.registry/publisher-provided":E.Optional(pTr),"io.modelcontextprotocol.registry/official":E.Optional(mTr)},{additionalProperties:!0}),gTr=E.Object({name:E.String(),description:E.String(),status:E.Optional(E.Union([E.Literal("active"),E.Literal("deprecated")])),repository:E.Optional(cTr),version:E.String(),website_url:E.Optional(E.String()),created_at:E.Optional(E.String()),updated_at:E.Optional(E.String()),$schema:E.Optional(E.String()),packages:E.Optional(E.Array(dTr)),remotes:E.Optional(E.Array(fTr)),_meta:E.Optional(hTr)}),Zbo=E.Object({servers:E.Array(gTr),metadata:E.Optional(E.Object({next_cursor:E.Optional(E.String()),count:E.Optional(E.Number())}))}),cCt=E.Object({baseUrl:E.String(),cursor:E.Optional(E.String()),limit:E.Optional(E.Number({minimum:1}))}),lCt=E.Object({baseUrl:E.String(),id:E.String(),version:E.Optional(E.String())});async function ATr(t,e,r){if(!r.baseUrl)return[null,{code:Qt.InvalidParams,message:"Base URL is required"}];let n=t.get(Lr),o=new URLSearchParams;r.limit!==void 0&&o.append("limit",r.limit.toString()),r.cursor!==void 0&&o.append("cursor",r.cursor);let s=`${r.baseUrl}${o.toString()?`?${o.toString()}`:""}`;try{let c=await n.fetch(s,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!c.ok)return[null,{code:Qt.InternalError,message:`MCP Registry API error: HTTP ${c.status}`}];let l=await c.text();return[JSON.parse(l),null]}catch(c){return[null,{code:Qt.InternalError,message:`Failed to fetch servers from MCP Registry: ${c instanceof Error?c.message:String(c)}`}]}}a(ATr,"handleListServersChecked");async function yTr(t,e,r){if(!r.baseUrl)return[null,{code:Qt.InvalidParams,message:"Base URL is required"}];if(!r.id)return[null,{code:Qt.InvalidParams,message:"Server ID is required"}];let n=t.get(Lr),o=new URLSearchParams;r.version!==void 0&&o.append("version",r.version);let s=`${r.baseUrl}/${r.id}${o.toString()?`?${o.toString()}`:""}`;try{let c=await n.fetch(s,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(c.status===404)return[null,{code:Qt.InternalError,message:"Server not found"}];if(!c.ok)return[null,{code:Qt.InternalError,message:`MCP Registry API error: HTTP ${c.status}`}];let l=await c.text();return[JSON.parse(l),null]}catch(c){return[null,{code:Qt.InternalError,message:`Failed to fetch server from MCP Registry: ${c instanceof Error?c.message:String(c)}`}]}}a(yTr,"handleGetServerChecked");var uCt=et(cCt,ATr),dCt=et(lCt,yTr);f();f();var fCt=E.Object({}),CTr=E.Object({login:E.String(),id:E.Number(),type:E.String(),parent_login:E.Union([E.String(),E.Null()]),parent_id:E.Union([E.Number(),E.Null()])}),vTr=E.Object({url:E.String(),registry_access:E.Union([E.Literal("registry_only"),E.Literal("allow_all")]),owner:CTr}),pIo=E.Object({mcp_registries:E.Array(vTr)});var xTr=300*1e3,ele=null;function ETr(t){return Date.now()-t<xTr}a(ETr,"isCacheValid");async function bTr(t){try{if(ele&&ETr(ele.timestamp))return[ele.data,null];let e=t.get(Lr),r="https://api.github.com/copilot/mcp_registry",n=await t.get(nr).getGitHubSession();if(!n)return[null,{code:Qt.InternalError,message:"Failed to get GitHub authentication token"}];let o=await e.fetch(r,{method:"GET",headers:{Authorization:`token ${n.accessToken}`}});if(!o.ok){let l=o.status;switch(l){case 401:return[null,{code:Qt.NoCopilotToken,message:"Missing or invalid authentication token for MCP registry allowlist",data:{status:l,errorType:"auth_error"}}];case 403:return[null,{code:Qt.InternalError,message:"MCP is disabled for this user",data:{status:l,errorType:"permission_error"}}];case 404:return[null,{code:Qt.InternalError,message:"No eligible Business/Enterprise seat found for MCP registry access",data:{status:l,errorType:"subscription_error"}}];default:return l>=500&&l<600?[null,{code:Qt.InternalError,message:`Transient server error when fetching MCP registry allowlist: HTTP ${l}`,data:{status:l,errorType:"transient_error",shouldRetry:!0}}]:[null,{code:Qt.InternalError,message:`Failed to fetch MCP registry allowlist: HTTP ${l}`,data:{status:l}}]}}let s;try{let l=await o.text();s=JSON.parse(l)}catch(l){return[null,{code:Qt.InternalError,message:`Failed to parse MCP registry allowlist: ${l instanceof Error?l.message:String(l)}`}]}return!s.mcp_registries||!Array.isArray(s.mcp_registries)?[null,{code:Qt.InternalError,message:"Invalid allowlist format: expected mcp_registries array"}]:s.mcp_registries.some(l=>!l.url||!l.registry_access)?[null,{code:Qt.InternalError,message:"Invalid allowlist format: registry entries missing required fields"}]:(ele={timestamp:Date.now(),data:s},[s,null])}catch(e){return[null,{code:Qt.InternalError,message:`Failed to fetch MCP registry allowlist: ${e instanceof Error?e.message:String(e)}`}]}}a(bTr,"fetchMcpRegistryAllowlist");async function ITr(t,e,r){try{if(e.isCancellationRequested)return[null,{code:Qt.RequestCancelled,message:"Request was cancelled"}];let[n,o]=await bTr(t);return o?[null,o]:n?n.mcp_registries.length===0?[null,{code:Qt.InternalError,message:"MCP registry allowlist is empty",data:{errorType:"empty_allowlist"}}]:[n,null]:[null,{code:Qt.InternalError,message:"Failed to retrieve MCP registry allowlist data"}]}catch(n){return[null,{code:Qt.InternalError,message:`Unexpected error in MCP registry allowlist handler: ${n instanceof Error?n.message:String(n)}`,data:{errorType:"unexpected"}}]}}a(ITr,"handleGetMcpRegistryAllowlistChecked");var pCt=et(fCt,ITr);f();async function TTr(t,e,r){let n=t.get(xy);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let o=ka(r.textDocument.uri);t.get($A).onUserPositionChange(o,new jr(r.position.line,r.position.character));let s=await n.handleNextEditRequest(o,r.textDocument.version,e);return s?[{edits:s.map(l=>({text:l.edit.text,textDocument:l.edit.textDocument,range:l.edit.range,command:{title:"Accept inline edit",command:Iq,arguments:[l.id]}}))},null]:[{edits:[]},null]}a(TTr,"handleChecked");var mCt=et(mJe,TTr);f();var _Tr=E.Object({uuid:E.String({minLength:1}),acceptedLength:E.Optional(E.Number({minimum:1}))});function STr(t,e,r){let n=t.get(zs),o=n.get(r.uuid);return o&&(RTr(r,o)==="full"?(n.delete(r.uuid),aN(t,o,o.triggerCategory)):Zee(t,o,r.acceptedLength,0,o.triggerCategory,"cumulative")),["OK",null]}a(STr,"notifyAcceptedChecked");function RTr(t,e){return t.acceptedLength===void 0?"full":t.acceptedLength<e.insertText.length?"partial":"full"}a(RTr,"getCompletionType");var hCt=et(_Tr,STr);f();var kTr=E.Object({uuids:E.Array(E.String())});function PTr(t,e,r){let n=t.get(zs),o=r.uuids.flatMap(s=>n.get(s)??[]);if(o.length>0){let s=o[0];for(let l of r.uuids)n.delete(l);let c=o.map(l=>({completionText:l.displayText,completionTelemetryData:l.telemetry}));Xee(t,"ghostText",s.offset,s.uri,c),t.get(cd).resetState()}return["OK",null]}a(PTr,"notifyRejectedChecked");var gCt=et(kTr,PTr);f();var DTr=E.Object({uuid:E.String({minLength:1})});function BTr(t,e,r){let o=t.get(zs).get(r.uuid);return o&&SZ(t,o.triggerCategory,o),["OK",null]}a(BTr,"notifyShownChecked");var ACt=et(DTr,BTr);f();var NTr=DXe;function MTr(t,e,r){let n=t.get(Gc),o={unregistered:[],registered:[]};return r.providers.forEach(s=>{try{let c=new GM(t,s.id,s.selector);n.registerContextProvider(c),o.registered.push(s.id)}catch{o.unregistered.push(s.id)}}),[o,null]}a(MTr,"registerContextProviders");var yCt=et(NTr,MTr);f();f();var LTr=E.Object({uri:E.Optional(E.String())}),FTr=E.Object({showEditorCompletions:E.Optional(E.Boolean()),enableAutoCompletions:E.Optional(E.Boolean()),delayCompletions:E.Optional(E.Boolean()),filterCompletions:E.Optional(E.Boolean())}),vCt=E.Object({github:E.Optional(E.Object({copilot:E.Optional(E.Object({}))})),[g3e]:E.Optional(LTr),http:E.Optional(gGe),telemetry:E.Optional(E.Object({telemetryLevel:E.Optional(E.String())}))}),vH=Object.keys(vCt.properties).filter(t=>t!=="github"),OTr=E.Intersect([vCt,FTr]),QTr=E.Object({settings:E.Optional(E.Union([E.Object({}),E.Array(E.Unknown(),{maxItems:0})])),authProvider:E.Optional(E.Never())}),CCt=na.Compile(QTr),OPe=na.Compile(OTr);async function rle(t,e){if(!CCt.Check(e))throw tle(t),new gd(CCt.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;return r&&UTr(t,r),tle(t,r),Promise.resolve()}a(rle,"notifyChangeConfiguration");function UTr(t,e){for(let n of OPe.Errors(e)){let o=n.path.split("/")?.[1];Mu.warn(t,`Invalid ${n.path.slice(1).replace(/\//g,".")} setting:`,n.message),delete e[o]}if(!OPe.Check(e))throw new gd(OPe.Errors(e));e.http&&QPe(t,e.http);let r=e["github-enterprise"];r&&FNe(t,r.uri),e.github?.copilot&&qTr(t,e.github.copilot)}a(UTr,"applySettingsToConfiguration");function qTr(t,e){let r=t.get(ug),n={};for(let o of Object.values($t)){let s=CGe(e,o);n[o]=s}r.setCopilotSettings(n),typeof e.mcp=="string"&&$Tr(t,e.mcp),e.agent&&typeof e.agent=="object"&&jTr(t,e.agent),HTr(t,e.globalCopilotInstructions||""),WTr(t,e.globalGitCommitInstructions||"")}a(qTr,"applyCopilotConfiguration");function HTr(t,e){try{t.get(Dv).setGlobalCopilotInstructions(e)}catch(r){Mu.error(t,"Failed to apply global Copilot instructions configuration",r)}}a(HTr,"applyGlobalCopilotInstructionsConfiguration");function WTr(t,e){try{t.get(Dv).setGlobalGitCommitInstructions(e)}catch(r){Mu.error(t,"Failed to apply global Git commit instructions configuration",r)}}a(WTr,"applyGlobalGitCommitInstructionsConfiguration");function QPe(t,e){let r=t.get(ug);e.proxy===void 0&&(e=AGe(r.env));try{r.setHttpSettings(VO(e))}catch(n){if(!(n instanceof TypeError))throw n;Mu.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}a(QPe,"applyHttpConfiguration");async function $Tr(t,e){try{let r=JSON.parse(e||"{}");await t.get(jf).updateMCPServers(r)}catch(r){Mu.error(t,"Failed to apply MCP configuration",r)}}a($Tr,"applyMCPConfiguration");function jTr(t,e){try{let r=e;t.get(lE).updateConfiguration(r.tools?.terminal?.autoApprove)}catch(r){Mu.error(t,"Failed to apply settings configuration",r)}}a(jTr,"applyTerminalAutoApproveConfiguration");function tle(t,e){if(t.get(ug).markReady(),!t.get(ss).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Qd).initialize(r)}}a(tle,"initializePostConfigurationDependencies");var xCt=E.Object({name:E.String(),version:E.String(),readableName:E.Optional(E.String())}),GTr=E.Object({editorInfo:xCt,editorPluginInfo:xCt,editorConfiguration:E.Optional(E.Object({}))});async function VTr(t,e,r){t.get(on).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),use(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),await rle(t,{settings:r.editorConfiguration}),Pt(t,"setEditorInfo");for(let n of["github",...vH])r.editorConfiguration&&n in r.editorConfiguration&&Pt(t,`setEditorInfo.editorConfiguration.${n}`);return["OK",null]}a(VTr,"handleSetEditorInfoChecked");var ECt=et(GTr,VTr);f();var zTr=E.Object({options:E.Optional(E.Object({}))});async function KTr(t,e,r){let n=t.get(Bf),o=n.pendingSignIn?.status;if(o===void 0)return[null,{code:Qt.InvalidRequest,message:"No pending sign in"}];let s;try{return s=await o,[s,null]}catch(c){return[null,{code:Qt.DeviceFlowFailed,message:String(c)}]}finally{n.pendingSignIn=void 0}}a(KTr,"handleSignInConfirmChecked");var bCt=et(zTr,KTr);f();var YTr=E.Object({options:E.Optional(E.Object({})),githubAppId:E.Optional(E.String())});async function JTr(t,e,r){try{let o=await t.get(Fi).checkAndUpdateStatus({githubAppId:r.githubAppId});if(o.status==="OK")return[{status:"AlreadySignedIn",user:o.user},null];let c=await t.get(Bf).initiate(r);return[{status:"PromptUserDeviceFlow",userCode:c.user_code,verificationUri:c.verification_uri,expiresIn:c.expires_in,interval:c.interval,command:{command:dse,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof Da))throw n;return[null,{code:Qt.DeviceFlowFailed,message:n.message}]}}a(JTr,"handleSignInInitiateChecked");var UPe=et(YTr,JTr);f();var XTr=E.Object({githubToken:E.String({minLength:1}),user:E.String({minLength:1}),githubAppId:E.Optional(E.String({minLength:1}))});async function ZTr(t,e,r){let n=r.githubToken,o=r.user,s=r.githubAppId,c=t.get(Fi);return[await t.get(Bf).save({...c.getConfiguredUrls(),accessToken:n,login:o,githubAppId:s}),null]}a(ZTr,"handleSignInWithGithubTokenChecked");var ICt=et(XTr,ZTr);f();var ewr=E.Object({options:E.Optional(E.Object({}))});async function twr(t,e,r){return[await t.get(Bf).abandon(),null]}a(twr,"handleSignOutChecked");var TCt=et(ewr,twr);f();var rwr=E.Object({transaction:E.Optional(E.String()),stacktrace:E.Optional(E.String()),properties:E.Optional(E.Record(E.String(),E.String())),platform:E.Optional(E.String()),exception_detail:E.Optional(E.Array(E.Object({type:E.Optional(E.String()),value:E.Optional(E.String()),stacktrace:E.Optional(E.Array(E.Object({filename:E.Optional(E.String()),lineno:E.Optional(E.Union([E.String(),E.Integer()])),colno:E.Optional(E.Union([E.String(),E.Integer()])),function:E.Optional(E.String()),in_app:E.Optional(E.Boolean())})))})))}),qPe=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{a(this,"AgentEditorError")}};function nwr(t,e,r){let n=t.get(wo),o=t.get(on).getEditorPluginInfo(),s=r.properties||{},c;r.platform&&r.exception_detail&&Vv.has(o.name)&&(c=Object.assign({rollup_id:"auto",context:Npe(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},Vv.get(o.name)),r.transaction&&(c.transaction=r.transaction),n.getBuildType()!=="dev"&&(c.release=`${c.app}@${o.version}`));let l=new qPe(r.stacktrace??"N/A",o.name);return l.stack=void 0,Xa(t,l,void 0,s,c),["OK",null]}a(nwr,"handleTelemetryExceptionChecked");var wCt=et(rwr,nwr);f();f();f();function HPe(t){let e=Date.now()+((t?.refresh_in??0)+yV)*1e3;return new C2({token:`test token ${wr()}`,refresh_in:0,expires_at:e,...t},void 0,e)}a(HPe,"createTestCopilotToken");var YM=class extends lu{constructor(){super(...arguments);this.defaultToken=HPe({token:"tid=test;rt=1"})}static{a(this,"FakeCopilotTokenFetcherFromSession")}fetchTokenResult(r,n){switch(n.accessToken){case"":return{copilotToken:this.defaultToken};case"valid-github-token":return{copilotToken:HPe({token:"tid=valid-copilot-token"})};case void 0:return{failureKind:"NotSignedIn"};case"notauth-github-token":return{failureKind:"NotAuthorized",message:"notauth",canSignUpForLimited:!0};case"bogus-github-token":return{failureKind:"NotAuthorized",message:"bogus",canSignUpForLimited:!1};case"expired-github-token":return{failureKind:"HTTP401",message:"expired"};default:throw new Error("Don't have a valid GitHub token")}}};var nle=class extends lu{constructor(r){super();this.envelopeFn=r}static{a(this,"StaticCopilotTokenFetcher")}async fetchTokenResult(){return{copilotToken:HPe(await this.envelopeFn())}}};var iwr=E.Object({options:E.Optional(E.Object({}))});async function owr(t,e,r){let n=new YM;return t.get(Fi).setTransientSession({accessToken:"valid-github-token",login:"always auth"}),t.forceSet(lu,n),t.get(Wo).forceNormal(),await new Promise(o=>setTimeout(o,0)),["OK",null]}a(owr,"handleTestingAlwaysAuthChecked");var _Ct=et(iwr,owr);f();var swr=E.Object({messages:E.Array(E.Object({role:E.Enum(ga),content:E.String(),name:E.Optional(E.String())})),modelFamily:E.Optional(E.Enum($r)),stop:E.Optional(E.Array(E.String())),conversationOptions:E.Optional(E.Object({maxResponseTokens:E.Optional(E.Number()),temperature:E.Optional(E.Number())}))});async function awr(t,e,r){let n=new Bs(t),o=await t.get(ya).getBestChatModelConfig([r.modelFamily??$r.CopilotBase]),s=await ZR(t,"","");return[await n.fetchResponse({modelConfiguration:o,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:Yd.user("test",wr())},e,s),null]}a(awr,"handleChatMLChecked");var SCt=et(swr,awr);f();f();f();var tL=Ne(Dvt(),1),NSo={ALPN_HTTP2:tL.default.ALPN_HTTP2,ALPN_HTTP2C:tL.default.ALPN_HTTP2C,ALPN_HTTP1_1:tL.default.ALPN_HTTP1_1,ALPN_HTTP1_0:tL.default.ALPN_HTTP1_0},{fetch:MSo,context:Bvt,reset:LSo,noCache:FSo,h1:OSo,keepAlive:QSo,h1NoCache:USo,keepAliveNoCache:qSo,cacheStats:HSo,clearCache:WSo,offPush:$So,onPush:jSo,createUrl:GSo,timeoutSignal:VSo,Body:zSo,Headers:Nvt,Request:KSo,Response:YSo,AbortController:JSo,AbortError:vle,AbortSignal:XSo,FetchBaseError:ZSo,FetchError:e2o,ALPN_HTTP2:t2o,ALPN_HTTP2C:r2o,ALPN_HTTP1_1:n2o,ALPN_HTTP1_0:i2o}=tL.default;var Lvt=require("crypto"),Fvt=require("http"),Ovt=require("stream"),Qvt=require("util"),nL=Ne(NA());var RSr=9e4,kSr=new nL.ProtocolRequestType("copilot/fetch"),PSr=new nL.ProtocolRequestType("copilot/fetchCancel"),DSr=new nL.ProgressType,BSr=new nL.ProtocolRequestType("copilot/fetchDisconnectAll"),u1=class extends Error{static{a(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},rL=class extends Lr{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(wo).getVersion()}`}static{a(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(Ir).connection.sendRequest(BSr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:o}=n,s=this.ctx.get(Ir).connection,c=(0,Lvt.randomUUID)(),l=new An.CancellationTokenSource,u=new Ovt.PassThrough,d=a(()=>{s.sendRequest(PSr,{workDoneToken:c})},"sendCancelRequest"),p=a(()=>{u.emit("error",new vle("EditorFetch request aborted")),u.end()},"destroyBodyStream");if(o){if(!(o instanceof AbortSignal))throw new u1("EditorFetcher received unexpected abort signal");if(o.aborted)throw new vle("EditorFetcher signal aborted before fetch");o.addEventListener("abort",d)}s.onProgress(DSr,c,h=>{h.kind==="end"?(o?.removeEventListener("abort",d),o?.removeEventListener("abort",p),h.error&&u.emit("error",new u1(h.error)),u.end()):h.kind==="report"&&u.write(h.chunk)});let m=await new Promise((h,g)=>{let A=setTimeout(()=>{g(new u1("Request timed out from lsp server"))},n.timeout??RSr),y=a(()=>{g(new vle("EditorFetcher request aborted"))},"rejectIfAborted");o?.addEventListener("abort",y),s.sendRequest(kSr,MSr(r,c,n),l.token).then(h).catch(v=>{let b="EditorFetcher request failed";v&&typeof v=="object"&&"message"in v&&(b+=`: ${String(v.message)}`),v&&typeof v=="object"&&"data"in v&&(b+=`: ${(0,Qvt.inspect)(v.data)}`),g(new u1(b))}).finally(()=>{o?.removeEventListener("abort",y),clearTimeout(A)})});if(!m.status)throw new u1("EditorFetcher received invalid response");return o?.addEventListener("abort",p),new EI(m.status,Fvt.STATUS_CODES[m.status]??"",new Nvt(m.headers),()=>NSr(u),()=>u)}};function NSr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",o=>n+=String(o))})}a(NSr,"consumeStream");function MSr(t,e,r){let{timeout:n,method:o}=r,s=r.headers??{},c=r.json?JSON.stringify(r.json):r.body;return r.json&&(s["content-type"]="application/json"),{url:t,headers:s,body:c,timeout:n,method:o,workDoneToken:e}}a(MSr,"convertOptionsToParams");var LSr=E.Object({url:E.String(),headers:E.Optional(E.Record(E.String(),E.String())),body:E.Optional(E.String()),timeout:E.Optional(E.Number()),method:E.Optional(E.Union([E.Literal("GET"),E.Literal("POST"),E.Literal("DELETE")])),cancelBeforeRequest:E.Optional(E.Boolean()),cancelAfterRequest:E.Optional(E.Boolean()),cancelAfterFirstChunk:E.Optional(E.Boolean())});async function FSr(t,e,r){let n=new rL(t),o=new AbortController,s=o.signal,{url:c,cancelBeforeRequest:l,cancelAfterRequest:u,cancelAfterFirstChunk:d,...p}=r;l&&o.abort();let m=n.fetch(c,{signal:s,...p});u&&o.abort();let h;try{h=await m}catch(y){return[{error:`Fetch stream error: ${y instanceof u1?y.message:String(y)}`},null]}let{status:g}=h,A=Object.fromEntries(Array.from(h.headers));try{if(d){let v=h.body();for await(let b of v){let I=b.toString();return o.abort(),[{status:g,headers:A,body:I},null]}}let y=await h.text();return[{status:g,headers:A,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof u1?y.message:String(y)}`},null]}}a(FSr,"handleTestingFetchChecked");var Uvt=et(LSr,FSr);f();var OSr=E.Object({});async function QSr(t,e,r){return await t.get(nl).flush(),["OK",null]}a(QSr,"handleTestingFlushPromiseQueueChecked");var qvt=et(OSr,QSr);f();f();f();var By=class{static{a(this,"FileSearch")}};f();var SH=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{a(this,"FileWatcher")}};f();f();var xle=Ne(require("path")),Hvt=require("worker_threads");function Wvt(t,e){return new Hvt.Worker(xle.default.resolve(xle.default.extname(__filename)!==".ts"?__dirname:xle.default.resolve(__dirname,"../../dist"),t),{workerData:e})}a(Wvt,"createWorker");f();var Ele=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{a(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,o)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:o}):this.outstandingPromises.push({factory:e,c:n,e:o}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var $vt=Ne(mi());var ble="main.js",Ile=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let o={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=Wvt(ble,o),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",s=>{this.handleUnexpectedError(s)}),this.postMessageQueue=new Ele(n)}catch(o){throw console.error(`Failed to create worker: ${o.message}`),o}}static{a(this,"IndexClient")}dispose(){return this.postMessageInQueue(new kJ(this.id++),$vt.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new _J(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new SJ(this.id++,e),r)}getContext(e,r,n,o,s,c){return this.postMessageInQueue(new RJ(this.id++,e,r,n,o,s),c,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new TJ(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new wJ(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((s,c)=>{this.promiseResolvers.set(e.id,{resolve:s,reject:c})});this.worker.postMessage(e);let o=r.onCancellationRequested(()=>{this.worker.postMessage(new IJ(e.id))});try{return await n}finally{o.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(ble+"'")&&(r=new Error(`Failed to load ${ble}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${ble} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var RH=Ne(mi());var Im=new dt(iw),GP=class{constructor(e,r,n,o,s){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(c,l)=>{await this.indexFile(l,this.languageId(l)??"plaintext")}),this.watcher.onWorkspaceChange(async(c,l)=>{if(c===1){Im.debug(this.ctx,`workspace removed: ${l}`),await this.indexClient.tryRemoveIndex(l,RH.CancellationToken.None);return}Im.debug(this.ctx,`workspace added: ${l}`),await this.indexAddedWorkspace(l)}),this.indexClient=new Ile(o,s);for(let c of o){let l=c.rootPath;this.workspaceInit.set(l,this.doWorkspaceIndex(l).then(()=>{Im.debug(this.ctx,`workspace ${l} indexed`),this.workspaceInit.delete(l)}))}}static{a(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await qSr(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,RH.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{Im.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){Im.debug(this.ctx,`indexing workspace ${e}`);let r=bve.map(p=>`*${p}`);if(r.length===0)return;let o=`**/${bve.length===1?r[0]:`{${r.join(",")}}`}`,s=this.ctx.get(By),c=await Promise.all([s.findFiles(o,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,RH.CancellationToken.None)]),l=c[0],u=c[1],d=Array.from(new Set([...l,...u]));Im.debug(this.ctx,`found ${d.length} files to index in ${e}`),await Promise.all(d.map(async p=>{let m=this.languageId(p);m&&await this.indexFile(p.replace(/\/+$/,""),m)})),Im.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{Im.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,RH.CancellationToken.None)}catch(n){Im.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return kGe(e)}};async function qSr(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}a(qSr,"createIndexableWorkspaceFolder");var HSr=E.Object({filePath:E.String(),code:E.String(),offset:E.Number(),languageId:E.String(),timeout:E.Optional(E.Number()),waitForContext:E.Optional(E.Boolean())});async function WSr(t,e,r){try{await t.get($v).start();let n=t.get(GP),o=r.timeout??1e3,s=Date.now(),c=[],l=!0;for(;l;)try{c=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,kZ,e)}catch{}finally{l=(r.waitForContext??!1)&&c.length==0&&Date.now()-s<o}return[{initialized:!0,context:c},null]}catch{return[{initialized:!1,context:[]},null]}}a(WSr,"handleTestingGetContextChecked");var jvt=et(HSr,WSr);f();var $Sr=E.Object({uri:E.String()});async function jSr(t,e,r){let o=await t.get(Ar).getTextDocument(r);return[{uri:r.uri,languageId:o?.clientLanguageId??"unknown",version:o?.version??-1,text:o?.getText()??""},null]}a(jSr,"handleGetDocumentChecked");var Gvt=et($Sr,jSr);f();var GSr=E.Object({options:E.Optional(E.Object({}))});async function VSr(t,e,r){t.get(Fi).setTransientSession({});try{await t.get(nr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}a(VSr,"handleTestingNeverAuthChecked");var Vvt=et(GSr,VSr);f();f();f();var A5e=class extends yl{constructor(r){super();this.certificates=r}static{a(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},zvt=a(t=>new A5e(t),"createTestCertificateReader");function C5e(t,e,r){let n=new y5e;n.set("x-github-request-id","1");for(let[o,s]of Object.entries(r||{}))n.set(o,s);return new EI(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}a(C5e,"createFakeResponse");function Kvt(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),C5e(t,n,Object.assign({"content-type":"application/json"},r))}a(Kvt,"createFakeJsonResponse");var kH=class extends Lr{constructor(){super(...arguments);this.name="FakeFetcher"}static{a(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var Tle=class extends kH{static{a(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var y5e=class{constructor(){this.headers=new Map}static{a(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var v5e=class extends kH{static{a(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(Kvt(200,this.fullConfig)):Promise.resolve(C5e(404,""))}},wle=class extends v5e{constructor(r,n){super(r);this.delegate=n}static{a(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var zSr=E.Object({expFlags:E.Record(E.String(),E.Union([E.String(),E.Number(),E.Boolean()]))});function KSr(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(Lr,new wle(n,t.get(Lr)))}return["OK",null]}a(KSr,"handleTestingOverrideExpFlagsChecked");var Yvt=et(zSr,KSr);f();var YSr=E.Object({rules:Wxe});function JSr(t,e,r){return t.get(gc).setTestingRules(r.rules),["OK",null]}a(JSr,"handleTestingSetContentExclusionRulesChecked");var Jvt=et(YSr,JSr);f();var XSr=E.Object({workDoneToken:E.Union([E.String(),E.Number()]),chunks:E.Array(E.String()),followUp:E.Optional(E.String()),suggestedTitle:E.Optional(E.String()),skills:E.Optional(E.Array(E.String())),references:E.Optional(E.Array(FM)),options:E.Optional(E.Object({}))});function ZSr(t,e,r){return t.get($E).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}a(ZSr,"handleTestingSetSyntheticTurnsChecked");var Xvt=et(XSr,ZSr);f();var e2r=E.Object({});async function t2r(t,e,r){let n=t.get(cc),o=t.get(rl);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(c=>s(3,"response from message request",c?.title)).catch(c=>s(1,"error sending show message request",c)),["OK",null];function s(c,l,u){return o.logIt(t,c,"triggerShowMessage",`${l} (${String(u)})`)}a(s,"sendNotification")}a(t2r,"handleTriggerShowMessageChecked");var Zvt=et(e2r,t2r);f();f();f();f();var e1t=Ne(require("tls"));var _le=class{static{a(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(yl)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=e1t.createSecureContext({_vscodeAdditionalCaCerts:e}),o=n.context;for(let s of e)o.addCACert(s);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var iL=class extends Lr{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new _le(r),this.proxySocketFactory=r.get(Rv),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(Oc).onDidChangeHttpSettings(o=>{this.fetchApi=this.createFetchApi(r,o)}),this.fetchApi=this.createFetchApi(r,r.get(Oc).getHttpSettings())}static{a(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let o=new URL(r.proxy);return async s=>(s.rejectUnauthorized=r.proxyStrictSSL,s.timeout=n,await this.certificateConfigurator.applyToRequestOptions(s),await this.proxySocketFactory.createSocket(s,{hostname:o.hostname,port:o.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let o=r.get(wo),s=this.proxySocketTimeoutForTesting;return Bvt({userAgent:`GithubCopilot/${o.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,s),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let o=n.signal,s=!1;if(n.timeout){let d=new AbortController;setTimeout(()=>{d.abort(),s=!0},n.timeout),n.signal?.addEventListener("abort",()=>d.abort()),n.signal?.aborted&&d.abort(),o=d.signal}let c={...n,body:n.body?n.body:n.json,signal:o};await this.certificateConfigurator.applyToRequestOptions(c);let l=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(l);let u=await this.fetchApi.fetch(r,c).catch(d=>{throw s?new XF(`Request to <${r}> timed out after ${n.timeout}ms`,d):d});return new EI(u.status,u.statusText,u.headers,()=>u.text(),()=>u.body)}disconnectAll(){return this.fetchApi.reset()}};f();f();var Sle=class extends Sy{constructor(r=[]){super();this._agents=r}static{a(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var Rle=class extends Il{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{a(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};f();var kle=class extends By{constructor(){super(...arguments);this.allowedFiles=[]}static{a(this,"TestingFileSearch")}addAllowedFiles(r){this.allowedFiles.push(...r)}findFiles(r,{uri:n},o){return Promise.resolve(this.allowedFiles)}};f();function r2r(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}a(r2r,"fakeChatModelConfiguration");function n2r(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}a(n2r,"fakeEmbeddingModelConfiguration");var Ple=class extends ya{static{a(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(r2r(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(n2r(e))}};f();var Dle=class extends Ju{constructor(){super(...arguments);this.openedUrls=[];this.opened=new kp}static{a(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},Ble=class extends cc{constructor(){super();this.sentMessages=[];this.warningPromises=[];this.informationPromises=[]}static{a(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let o;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")o=Promise.resolve(void 0);else{let s=n.find(c=>c.title===this.actionToPerform);o=s?Promise.resolve(s):Promise.resolve(void 0)}else o=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(o),o}showInformationMessage(r,...n){this.sentMessages.push(r);let o;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")o=Promise.resolve(void 0);else{let s=n.find(c=>c.title===this.actionToPerform);o=s?Promise.resolve(s):Promise.resolve(void 0)}else o=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.informationPromises.push(o),o}async waitForMessages(){await Promise.all(this.warningPromises),await Promise.all(this.informationPromises)}};f();function t1t(t,e,r,n){return DA.create($j(t),e,r,n,e)}a(t1t,"createTextDocument");var x5e=class extends Ar{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this.didFocusTextDocumentEmitter=new is;this.onDidFocusTextDocument=this.didFocusTextDocumentEmitter.event;this.didChangeTextDocumentEmitter=new is;this.onDidChangeTextDocument=this.didChangeTextDocumentEmitter.event;this.didOpenTextDocumentEmitter=new is;this.onDidOpenTextDocument=this.didOpenTextDocumentEmitter.event;this.didCloseTextDocumentEmitter=new is;this.onDidCloseTextDocument=this.didCloseTextDocumentEmitter.event;this.didChangeWorkspaceFoldersEmitter=new is;this.onDidChangeWorkspaceFolders=this.didChangeWorkspaceFoldersEmitter.event}static{a(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Mi(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,o){let s=t1t(r,n,0,o);return this._openTextDocuments.push(s),s}updateTextDocument(r,n){let o=this._openTextDocuments.findIndex(c=>c.uri===r.toString());if(o<0)throw new Error("Document not found");let s=this._openTextDocuments[o];this._openTextDocuments[o]=t1t(r,s.clientLanguageId,s.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}},Nle=class extends x5e{constructor(r){super(r);this.contents=new Map}static{a(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var E5e=class extends rl{static{a(this,"NullLog")}logIt(...e){}},b5e=class extends Fi{static{a(this,"TestAuthManager")}constructor(e,r){super(e,{}),this.transientSession=r&&Promise.resolve(r)}getPersistedSession(){return Promise.resolve(void 0)}};function i2r(t){let e=new N3;e.set(Oc,t),e.set(ER,t);let r=new b5e(e,{accessToken:"",login:"user"});e.set(Fi,r),e.set(wo,new wo),e.set(jm,new jm({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(yl,zvt([])),e.set(Rv,Lne(e)),e.set(wC,new wC),e.set(CA,new bV);let n=new YM;e.set(lu,n),e.set(nr,new nr(e,!0));let o=new $u(e);return o.updateFromToken(n.defaultToken),e.set($u,o),e.set(Yu,new Yu),e.set(mC,new mC),e.set(cc,new Ble),e.set(Ju,new Dle),e.set(fC,new lN),e.set(rl,new E5e),e.set(Ap,new Ap),e.set(Fs,new Fs("test-session","test-machine")),e.set(gf,new B8(e)),e.set(tA,new K4),e.set(Qd,new Qd(e,"copilot-test")),e.set(Lt,new Lt(e)),e.set(QA,new QA),e.set(RA,new r3),e.set(Wo,new EV),e.set(nl,new nl),e.set(tv,new tv(e)),e.set(By,new kle),e.set(jA,new jA(e)),e.set(Wx,Wee(e)),e.set(cd,new cd),e.set(Op,new Op),e.set($x,$x.default),e.set(Ch,new Ch(e,!1)),e.set(uu,new uu),e.set(Nn,new Nn(e)),e.set(Nf,new zX),e.set(ml,new ml),e.set(Gc,NZ(e,(s,c,l)=>c.find(u=>u==="*")?1:c.find(u=>typeof u!="string"&&u.language===l.languageId)?10:0)),e.set(Lp,new Lp(e)),o2r(e),e.set(Np,new Np(e)),e.set(ss,new ss),e.set(ov,new rM),e.set(Fh,new Fh),e.set(Jp,new Jp),e.set(Ov,new Ov(e)),e}a(i2r,"_createBaselineContext");function o2r(t){t.set(no,new no(t)),t.set(Ls,new Ls(t)),t.set(Cd,new Cd(t)),t.set(jl,new jl),t.set(Nu,new Nu),t.set(Il,new Rle),t.set(Ag,new Ag(t,[])),t.set(ya,new Ple),t.set(Sy,new Sle),t.set(o1,new o1(t)),t.set(k_,new k_),t.set(Tc,new Tc(t)),t.set(yd,new yd),t.set(Em,new Em)}a(o2r,"registerConversation");function r1t(){let t=i2r(new ER(new n3,new Map));return t.set(Lr,new Tle),t.set(on,new I5e),t.set(Ar,new Nle(t)),t.set(Ui,new LT),t.set(gc,new gc(t)),t.set(xl,new xl(t)),t.set(md,new oie(t)),t.set(Nh,new Nh(t)),t.set(rv,new W3),t.set(dy,new Bie),Yoe(t),t}a(r1t,"createLibTestingContext");var I5e=class extends on{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},o=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=o}static{a(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var i1t=Ne(require("fs"));var n1t=`${process.env.HOME}/.copilot-testing-gh-token`,Mle,Lle;function o1t(t){let e=s1t(),r=new nle(s2r);return t.forceSet(lu,r),t.get(Fi).setTransientSession(e),r}a(o1t,"setIntegrationTokenManager");var s2r=a(async()=>{if(Lle)return Lle;let t=await s1t(),e=r1t(),r=new iL(e);return e.forceSet(Lr,r),Lle=lhe(e,t).then(n=>{if(n.copilotToken)return{token:n.copilotToken.token,refresh_in:n.copilotToken.envelope.refresh_in};throw new Da('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Lle},"getEnvelope");async function s1t(){let t=mhe(process.env);if(t)return t;try{Mle??=(await i1t.promises.readFile(n1t)).toString().trim()}catch{Mle??=process.env.GITHUB_TOKEN??""}if(!Mle)throw new Error(`Tests: either GH_COPILOT_TOKEN, GITHUB_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${n1t}. Run "npm run get_token" to get one.`);return{...P0({}),accessToken:Mle,login:"copilot-client tests"}}a(s1t,"getTestingGitHubSession");var a2r=E.Object({options:E.Optional(E.Object({})),githubAppId:E.Optional(E.String())});async function c2r(t,e,r){return o1t(t),await t.get(nr).primeToken(),["OK",null]}a(c2r,"handleTestingUseTestingTokenChecked");var a1t=et(a2r,c2r);f();var l2r=E.Object({});async function u2r(t,e,r){return await new sM().uninstall(t),["OK",null]}a(u2r,"handleUninstallChecked");var c1t=et(l2r,u2r);f();var d2r=BXe;function f2r(t,e,r){let n=t.get(Gc),o={unregistered:[],notUnregistered:[]};return r.providers.forEach(s=>{try{n.unregisterContextProvider(s.id),o.unregistered.push(s.id)}catch{o.notUnregistered.push(s.id)}}),[o,null]}a(f2r,"unregisterContextProviders");var l1t=et(d2r,f2r);f();var T5e=Ne(require("os"));var p2r=E.Object({expectedCertificate:E.String()});async function m2r(t,e,r){let o=(await Mne(t).getAllRootCAs()).map(KM),s=KM(r.expectedCertificate);return o.includes(s)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${LPe(s)}. Only found those installed on the system:${T5e.EOL}${o.map(c=>"- "+LPe(c)).join(T5e.EOL)}`},null]}a(m2r,"handleVerifyCertificateChecked");var u1t=et(p2r,m2r);f();var h2r=E.Object({});async function g2r(){return[{status:!!await new xU().load()},null]}a(g2r,"handleVerifyKerberosChecked");var d1t=et(h2r,g2r);f();var A2r=E.Object({source:E.String(),version:E.Number(),uri:E.String()});async function y2r(t,e,r){let o=await t.get(Ar).getTextDocument(r);return o?o.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${o.getText()} !== [Request] ${r.source}`},null]:o.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${o.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}a(y2r,"handleVerifyStateChecked");var f1t=et(A2r,y2r);f();var C2r=E.Object({});function v2r(t,e,r){return[t.get(Ar).getWorkspaceFolders().map(o=>{let s=new URL(o.uri),c=decodeURIComponent(s.pathname);return{...o,path:c}}),null]}a(v2r,"handleVerifyWorkspaceStateChecked");var p1t=et(C2r,v2r);var VP=class{constructor(e){this.handlers=e}static{a(this,"MethodHandlers")}};function m1t(){let t=new Map;return t.set(eCt.method,tCt),t.set(rCt.method,nCt),t.set("getCompletions",Gyt),t.set("getCompletionsCycling",Vyt),t.set("getPanelCompletions",Yyt),t.set(Ryt.method,kyt),t.set("getVersion",Jyt),t.set("setEditorInfo",ECt),t.set("checkStatus",hht),t.set("checkQuota",mht),t.set("checkFileStatus",fht),t.set("signInInitiate",UPe),t.set("signIn",UPe),t.set("signInConfirm",bCt),t.set("signInWithGithubToken",ICt),t.set("signOut",TCt),t.set("notifyShown",ACt),t.set("notifyAccepted",hCt),t.set("notifyRejected",gCt),t.set("telemetry/exception",wCt),t.set("textDocument/copilotInlineEdit",mCt),t.set("testing/overrideExpFlags",Yvt),t.set("testing/alwaysAuth",_Ct),t.set("testing/neverAuth",Vvt),t.set("testing/useTestingToken",a1t),t.set("testing/setCompletionDocuments",Hyt),t.set("testing/setPanelCompletionDocuments",_yt),t.set("testing/triggerShowMessageRequest",Zvt),t.set("testing/flushPromiseQueue",qvt),t.set("testing/getDocument",Gvt),t.set("testing/chatml",SCt),t.set("testing/setSyntheticTurns",Xvt),t.set("testing/fetch",Uvt),t.set("testing/setContentExclusionRules",Jvt),t.set("testing/setCopilotEditsResponse",fyt),t.set("testing/getContext",jvt),t.set("uninstall",c1t),t.set("debug/diagnostics",Myt),t.set("debug/listCertificates",iCt),t.set("debug/verifyState",f1t),t.set("debug/verifyCertificate",u1t),t.set("debug/verifyKerberos",d1t),t.set("debug/verifyWorkspaceState",p1t),t.set("context/registerProviders",yCt),t.set("context/unregisterProviders",l1t),t.set("conversation/preconditions",ryt),t.set("conversation/persistence",tyt),t.set("conversation/create",XAt),t.set("conversation/turn",syt),t.set("conversation/turnDelete",ayt),t.set("conversation/destroy",ZAt),t.set("conversation/rating",nyt),t.set("conversation/copyCode",PAt),t.set("conversation/insertCode",DAt),t.set("conversation/templates",oyt),t.set("conversation/agents",kAt),t.set("conversation/registerTools",iyt),t.set("conversation/unregisterTools",cyt),t.set("conversation/updateToolsStatus",lyt),t.set("conversation/notifyCodeAcceptance",eyt),t.set("copilot/models",Eyt),t.set("copilot/byok/saveModel",dht),t.set("copilot/byok/deleteModel",Tmt),t.set("copilot/byok/listModels",lht),t.set("copilot/byok/saveApiKey",uht),t.set("copilot/byok/deleteApiKey",Imt),t.set("copilot/byok/listApiKeys",wmt),t.set("copilot/setModelPolicy",byt),t.set("copilot/codeReview",uyt),t.set("copilot/codeReview/reviewChanges",dyt),t.set("git/commitGenerate",Xyt),t.set("editConversation/create",pyt),t.set("editConversation/turn",hyt),t.set("editConversation/turnDelete",gyt),t.set("editConversation/destroy",myt),t.set("mcp/getTools",Ayt),t.set("mcp/updateToolsStatus",yyt),t.set("mcp/readResource",Cyt),t.set("mcp/registry/listServers",uCt),t.set("mcp/registry/getServer",dCt),t.set("mcp/registry/getAllowlist",pCt),t.set("mcp/getPrompt",vyt),t.set("mcp/completePrompt",xyt),new VP(t)}a(m1t,"getAllMethods");f();f();f();var h1t=Ne(NA());var Cg=class{constructor(e){this.ctx=e}static{a(this,"AbstractNotification")}get type(){return new h1t.NotificationType(this.name)}};var w5e=class extends Cg{constructor(){super(...arguments);this.name="copilot/didChangeToken";this.params=E.Unknown()}static{a(this,"DidChangeTokenNotificationHandler")}handle(){this.ctx.get(nr).resetToken()}},g1t=[w5e];f();var x2r=new dt("agentCopilotTokenManager");function S5e(t){try{let e=new URL(t||"https://api.github.com");if(e.protocol==="https:"&&e.hostname.startsWith("api."))return`${e.origin}/`}catch{}}a(S5e,"tokenEndpointToApiUrl");function E2r(t,e){if(!e.tokenEndpoint)return P0(e);let r=S5e(e.tokenEndpoint);return r||x2r.warn(t,`Invalid token endpoint URL <${e.tokenEndpoint}>`),P0({apiUrl:r})}a(E2r,"getUrlsFromParams");var _5e=class extends Cg{constructor(){super(...arguments);this.name=bxe.method;this.params=rJe}static{a(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(Fi),o=E2r(this.ctx,r);this.ctx.get(gf).setConfiguredUrls(this.ctx,o);let s=r.handle||r.login;s&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:s,githubAppId:r.githubAppId,...o}):n.setTransientSession({githubAppId:r.githubAppId,...o})}},A1t=[_5e];f();var R5e=class extends Cg{constructor(){super(...arguments);this.name=Sxe.method;this.params=uJe}static{a(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],s=this.ctx.get(zs).get(n);s&&qet(this.ctx,s)}},k5e=class extends Cg{constructor(){super(...arguments);this.name=Pxe.method;this.params=hJe}static{a(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(xy).handleShown(n)}},P5e=class extends Cg{constructor(){super(...arguments);this.name=Rxe.method;this.params=dJe}static{a(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=r.acceptedLength,s=this.ctx.get(zs),c=s.get(n);c&&(o>=c.insertText.length?(s.delete(n),aN(this.ctx,c)):Zee(this.ctx,c,o,void 0,void 0,"cumulative"))}},y1t=[R5e,k5e,P5e];f();var Fle=class extends Cg{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=E.Object({token:E.Union([E.String(),E.Number()])})}static{a(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(zf).cancel(r.token)}};var b2r=[...g1t,...A1t,...y1t,Fle];function C1t(t,e){for(let r of b2r){let n=new r(t),o=na.Compile(n.params);e.onNotification(n.type,iu(t,async s=>{PE(s),o.Check(s)?await n.handle(s):Mu.error(t,`Notification ${n.name}:`,new gd(o.Errors(s)))},`Notification ${n.name}`))}}a(C1t,"registerNotifications");f();var Ole=Ne(qc());var D5e=new dt("AgentTextDocumentConfiguration"),B5e=class{constructor(e){this.ctx=e;this.#e=new is;this.onDidChange=this.#e.event}static{a(this,"AgentTextDocumentsConfiguration")}#e;create(e,r,n,o){try{return DA.create(e,r,n,o)}catch(s){throw D5e.exception(this.ctx,s,".create"),s}}update(e,r,n){try{let o=[],s=DA.withChanges(e,r,n);for(let l of r)if(Ole.TextDocumentContentChangeEvent.isIncremental(l)){let u=e.offsetAt(l.range.start),d=e.offsetAt(l.range.end),p={start:e.positionAt(u),end:e.positionAt(d)};for(let h of["start","end"])(p[h].line!==l.range[h].line||p[h].character!==l.range[h].character)&&(D5e.debug(this.ctx,`textDocument/didChange for ${e.uri} has invalid range ${h} position ${JSON.stringify(l.range[h])}. Assuming ${JSON.stringify(p[h])}.`),Pt(this.ctx,`invalidRange.${h}`));let m={range:p,rangeOffset:u,rangeLength:d-u,text:l.text};o.push(m),e=e.applyEdits([{range:m.range,newText:m.text}])}let c={document:{uri:e.uri,version:n},contentChanges:o};return this.#e.fire(c),s}catch(o){throw D5e.exception(this.ctx,o,".update"),o}}},G_=class extends Ar{constructor(){super(...arguments);this.#e=new is;this.onDidOpenTextDocument=this.#e.event;this.#t=new is;this.onDidCloseTextDocument=this.#t.event;this.#i=new is;this.onDidFocusTextDocument=this.#i.event;this._textDocumentConfiguration=new B5e(this.ctx);this.onDidChangeTextDocument=this._textDocumentConfiguration.onDidChange;this._documents=new Map;this._notebookDocuments=new Ole.NotebookDocuments(this._textDocumentConfiguration);this.workspaceFolders=[];this.#n=new is;this.onDidChangeWorkspaceFolders=this.#n.event}static{a(this,"AgentTextDocumentManager")}#e;#t;#i;#n;get connection(){return this.ctx.get(Ir).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let o=n.textDocument,s=this._textDocumentConfiguration.create(o.uri,o.languageId,o.version,o.text);this._documents.set(ka(o.uri),s),this.#e.fire({document:{...o,uri:s.uri}})}),this.connection.onDidChangeTextDocument(n=>{let o=n.textDocument,s=n.contentChanges,{version:c}=o;if(c==null)throw new Error(`Received document change event for ${o.uri} without valid version identifier`);let l=ka(o.uri),u=this._documents.get(l);u!==void 0&&(u=this._textDocumentConfiguration.update(u,s,c),this._documents.set(l,u))}),this.connection.onDidCloseTextDocument(n=>{let o=ka(n.textDocument.uri);this._documents.delete(o),this.#t.fire({document:{uri:o}})}),this.connection.onNotification(wxe.type,n=>{let o=("textDocument"in n?n.textDocument:n)??{};this.#i.fire("uri"in o?{document:o}:{})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r),r.length>0&&this.#n.fire({workspaceFolders:this.workspaceFolders,added:r,removed:[]})}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n)),this.#n.fire({workspaceFolders:this.workspaceFolders,added:r.added,removed:r.removed})}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(o=>o.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.find(n=>n.uri===r.uri)||this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(ka(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:a(()=>n.cells.map((o,s)=>this.wrapCell(o,s)).filter(o=>!!o),"getCells"),getCellFor:a(({uri:o})=>{let s=n.cells.findIndex(c=>c.document===o);return s!==-1?this.wrapCell(n.cells[s],s):void 0},"getCellFor")}}wrapCell(r,n){let o=this._notebookDocuments.getCellTextDocument(r);if(o)return{kind:r.kind,metadata:r.metadata??{},index:n,document:o}}};var v1t=na.Compile(aJe);function PE(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=PE(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=PE(e[r])}return t}}a(PE,"purgeNulls");var x1t=["github.copilot",...vH],Ir=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.deactivated=!1;this.handleDidChangeConfiguration=a(async e=>{try{if(this.#t?.workspace?.configuration&&e&&typeof e=="object"&&!("settings"in e)){let n=await this.connection.workspace.getConfiguration(x1t.map(s=>({section:s}))),o={github:{copilot:n.shift()}};for(let s of vH)o[s]=n.shift();e.settings=o}return rle(this.ctx,PE(e))}catch(r){Mu.exception(this.ctx,r,"didChangeConfiguration")}},"handleDidChangeConfiguration");this.#i=this.ctx.get(rl)}static{a(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),C1t(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(wo).getDisplayVersion(),nodeVersion:process.versions.node};function o(c){try{e.get(G_).didChangeWorkspaceFolders(c)}catch(l){Mu.exception(e,l,"didChangeWorkspaceFolders")}}a(o,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:c,uri:l})=>o({added:[{uri:l,name:c??l}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:c,uri:l})=>o({added:[],removed:[{uri:l,name:c??l}]})),r.onInitialize(c=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=c.capabilities;let l=c.capabilities.copilot,u=PE(c.initializationOptions);if(u){if(!v1t.Check(u))throw new gd(v1t.Errors(u));let h=u,g=e.get(on);h.editorPluginInfo?g.setEditorAndPluginInfo({version:"unknown",...h.editorPluginInfo},h.editorInfo&&{version:"unknown",...h.editorInfo},h.relatedPluginInfo??[]):Mu.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),h.copilotIntegrationId&&g.setCopilotIntegrationId(h.copilotIntegrationId),h.githubAppId&&(e.get(uu).githubAppId=h.githubAppId),h.copilotCapabilities&&(l=h.copilotCapabilities)}let d=c.capabilities.workspace?.workspaceFolders??!1;e.get(G_).init(c.workspaceFolders??[]),BZe(this.ctx),l&&(e.get(ss).setCapabilities(l),"openURL"in l&&use(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let m=a(async()=>{this.initialized||(this.initialized=!0,Mu.info(e,`${n.name} ${n.version} initialized`),e.get(nr).primeToken(),d&&r.workspace.onDidChangeWorkspaceFolders(o),c.capabilities.workspace?.didChangeConfiguration?.dynamicRegistration&&await r.client.register(Tm.DidChangeConfigurationNotification.type,{section:x1t}),c.capabilities.workspace?.configuration?await this.handleDidChangeConfiguration({}):await Promise.race([this.ctx.get(ug).requireReady().then(()=>!0),new Promise(A=>setTimeout(()=>A(!1),200))])||tle(e),!this.deactivated&&new sM().startup(e).catch(()=>{}))},"onInitialized");return r.onInitialized(iu(e,m,"onInitialized")),e.get(Kv).init(),l?.token&&e.get(Fi).setTransientSession({}),l?.redirectedTelemetry&&bmt(e),E1t.lt(process.versions.node,"22.0.0")&&Mu.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 22 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:Tm.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:d,changeNotifications:d}},executeCommandProvider:{commands:Cmt(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(c=>void this.handleDidChangeConfiguration(c)),r.listen();let s=new pse;this.ctx.forceSet(rl,s)}async messageHandler(e,r,n){let o=this.ctx.get(VP).handlers.get(e);if(!o)return new Tm.ResponseError(Qt.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new Tm.ResponseError(Qt.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new Tm.ResponseError(Qt.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!xmt(this.ctx.get(on)))throw new Tm.ResponseError(Qt.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),PE(r);try{let[s,c]=await o(this.ctx,n,r);return c?new Tm.ResponseError(c.code,c.message,c.data):s}catch(s){if(n.isCancellationRequested)return new Tm.ResponseError(Qt.RequestCancelled,"Request was canceled");if(s instanceof Da)return new Tm.ResponseError(Qt.NoCopilotToken,`Not authenticated: ${s.message}`);throw s instanceof Tm.ResponseError||Mu.exception(this.ctx,s,`Request ${e}`),s}}async onExit(){try{this.ctx.get(by).dispose()}catch(e){Mu.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(rl,this.#i),await(this.#e??=this.deactivate())}markDeactivated(){this.deactivated=!0,this.ctx.get(ug).markReady()}async deactivate(){let e=this.ctx;this.markDeactivated(),cbe(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(nl).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Yu).deactivate()])}dispose(){this.markDeactivated(),this.connection.dispose()}},Mu=new dt("lsp");var Qle=class extends e_{constructor(r){super();this.ctx=r}static{a(this,"AgentLSPRequestSender")}async sendRequest(r,n){return await this.ctx.get(Ir).connection.sendRequest(r,n)}};f();f();var zP=class{static{a(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var T1t=require("crypto"),N5e=require("fs"),M5e=Ne(require("path"));var b1t="symbolDatabaseLookup",I1t="multiLanguageContextProviderDocumentSymbols",KP=class{constructor(e){this.persistenceManager=e}static{a(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(b1t,e);return r||(r=await this.createDBFile(e)),M5e.default.join(this.persistenceManager.directory,I1t,r)}async init(){let e=M5e.default.join(this.persistenceManager.directory,I1t);await this.createIfNotExists(e)}async dirExists(e){try{return await N5e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await N5e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,T1t.randomUUID)()}.db`;return await this.persistenceManager.update(b1t,e,r),r}async deleteDBFile(e){}};f();f();f();var w1t=100,I2r=5e3,Ule=class{static{a(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,o,s,c,l,u){let d=Date.now(),p=this.get(n,o,r,d);if(p)return this.incrementRefCount(p),u.onCancellationRequested(()=>this.decrementRefCount(p)),p.value;if(!c)return e(r,n,o,s,l,u);let m=new An.CancellationTokenSource,h=a(()=>m.cancel(),"cancel"),g=e(r,n,o,s,l,m.token);return p=this.setBasedOnLastDelimiter(n,o,r,d,g,h),this.incrementRefCount(p),u.onCancellationRequested(()=>this.decrementRefCount(p)),g}get(e,r,n,o){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>w1t)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(o-this.cachedValue.timestamp>I2r))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,o,s,c){let l=e.substring(0,r),u=/[A-Za-z0-9]+$/.exec(l),d=r;u&&(d=u.index),r-d>w1t&&(d=r);let p={cursorPosition:d,uri:n,timestamp:o,fullText:e,value:s.finally(()=>{p.complete=!0}),refCount:0,cancel:c,uuid:wr(),complete:!1};return this.cachedValue=p}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var qle=class{constructor(e){this.id=iw;this.selector=Array.from(uJ.keys()).map(e=>({language:e}));try{this.documentManager=e.get(Ar),this.resolver=new L5e(this.documentManager,e)}catch(r){throw Im.error(e,"Failed to create multi-language context provider",r),r}}static{a(this,"MultiLanguageContextProvider")}},L5e=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new Ule}static{a(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(zP).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let o=n.indexClient;try{let s=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(s===void 0||s?.version!==e.documentContext.version)return[];let c=e.documentContext.position,l=e.documentContext.proposedEdits??[],u=sv(s,c);u=u.applyEdits(l);let d=_Xe(e.activeExperiments),p=await this.cachedContextFetcher.runWithCache(o.getContext.bind(o),e.documentContext.uri,u.textDocument.getText(),u.textDocument.offsetAt(u.position),e.documentContext.languageId,u.editsWithPosition.length===0,d,r);return Im.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${p.map(m=>JSON.stringify(m)).join(", ")}`),p}catch(s){if(KY(s))return[];throw Im.error(this.ctx,"Failed to get context",s),s}}};var PH=class extends nM{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get($v).addListener(this)}static{a(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Gc).providers.some(r=>r.id===iw)){let r=this.ctx.get(KP);this.fileWatcher=new F5e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new GP(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new O5e(this.ctx),this.ctx.set(SH,this.fileWatcher),this.ctx.set(By,this.fileSearch),this.ctx.set(GP,this.multiLanguageContextIndexWatcher),this.ctx.get(Gc).registerContextProvider(new qle(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments(),n=FZ(this.ctx,r);return n.includes(iw)||n.length===1&&n[0]==="*"}async didAddWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async didRemoveWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async didTerminateWorkspaceSubfolders(r,n){if(await this.isEnabled())return super.didTerminateWorkspaceSubfolders(r,n)}async didChangeFiles(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},F5e=class extends SH{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{a(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let o of this.fileChangeListeners)await o(r,n)}async triggerWorkspaceChange(r,n){for(let o of this.workspaceChangeListeners)await o(r,n)}},O5e=class extends By{constructor(r){super();this.ctx=r}static{a(this,"LspFileSearch")}async findFiles(r,n,o){return(await this.ctx.get(tf).getWatchedFiles(n)).map(c=>this.ctx.get(Ar).getTextDocumentUnsafe(c)?.clientUri??c.uri)}};var Q5e=class extends zP{static{a(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new PH(e),e.set(PH,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function _1t(t){let e=t.get(hi),r=new KP(e);t.set(KP,r),t.set(zP,new Q5e(t))}a(_1t,"setupMultiLanguageContextProviderFeature");f();var Hle=class t extends lk{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{a(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(Ir)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",o="CSharpRoslynCompletionRelatedContextProvider",s="CppCopilotCompletionContextProvider",c="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case o:return"related/csharproslyn";case s:return"related/cpp";case c:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let o of r.entries){let s={type:t.mapProviderNameToNeighboringFileType(o.providerName),uris:o.uris};n.entries.push(s),s.type==="related/other"&&!this.reportedUnknownProviders.has(o.providerName)&&(this.reportedUnknownProviders.add(o.providerName),Hl.warn(this.context,`unknown providerName ${o.providerName}`))}return n}async getRelatedFilesResponse(r,n,o){Hl.debug(this.context,`Fetching related files for ${r.uri}`);let s=this.context.get(ss).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,s),!s)return Hl.debug(this.context,"`copilot/related` not supported"),MZe;try{let c=await this.service.connection.sendRequest(Dxe.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},o);return this.convert(c)}catch(c){Hl.exception(this.context,c,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,o){try{if(!o||t.telemetrySent)return;t.telemetrySent=!0,Pt(r,"copilotRelated.hasRelatedCapability",n)}catch(s){Hl.exception(r,s,"copilotRelated")}}};f();f();f();var Wle=new dt("OAuth Code Flow");function U5e(t,e,r=(n,o)=>n===o){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,o=t.length;n<o;n++)if(!r(t[n],e[n]))return!1;return!0}a(U5e,"arrayEquals");function S1t(t){return t===YP.providerId?{client_id:D0,client_secret:vGe}:null}a(S1t,"getClientInfoFromAuthServer");var q5e=`
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GitHub Copilot Authentication</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                text-align: center;
                padding: 50px;
            }
            .container {
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                padding-top: 50px;
            }
            .success {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #28a745;
            }
            .error {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #cccccc;
            }
            .message {
                font-size: 18px;
                margin: 20px 0;
            }
            .detail {
                font-size: 14px;
                color: #f85149;
                opacity: 0.7;
                margin: 0;
            }

            body.error .success-message {
                display: none;
            }

            body:not(.error) .error-message {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="success-message">
                <h1 class="success">\u2713</h1>
                <h1 class="success">Authentication Successful!</h1>
                <p class="message">You can now return to your IDE and continue using GitHub Copilot.</p>
            </div>
            <div class="error-message">
                <h1 class="error">An error occurred while signing in:</h1>
                <div class="detail"></div>
            </div>
        </div>
        <script>
            const urlParams = new URLSearchParams(window.location.search);

            const error = urlParams.get('error');
            if (error) {
                document.querySelector('.error-message > .detail').textContent = error;
                document.querySelector('body').classList.add('error');
            }
        </script>
    </body>
</html>`;var YP=class t{constructor(e){this.id=t.providerId;this.label="GitHub";this.supportsMultipleAccounts=!1;this.authorizationServers=[t.providerId];this.ctx=e,this._sessionsPromise=this.readSessions().then(r=>(setTimeout(()=>r.forEach(n=>void this.afterSessionLoad(n)),1e3),r))}static{a(this,"GitHubAuthenticationProvider")}static{this.providerId="https://github.com/login/oauth"}async getSessions(e,r){await this.checkSessionsExpiration();let n=await this._sessionsPromise,o=e?.sort()||[];return o.length?n.filter(c=>U5e([...c.scopes].sort(),o)):n}async afterSessionLoad(e){}async readSessions(){let e=await this.ctx.get(hi).read("oauth",this.id);return e||[]}async createSession(e,r){let n=[...e].sort(),o=await this._sessionsPromise,s=await this.tokenToSession(r,e);this.afterSessionLoad(s);let c=o.findIndex(u=>u.account.id===s.account.id&&U5e([...u.scopes].sort(),n)),l=new Array;return c>-1?l.push(...o.splice(c,1,s)):o.push(s),await this.storeSessions(o),s}async storeSessions(e){this._sessionsPromise=Promise.resolve(e),await this.ctx.get(hi).update("oauth",this.id,e)}async tokenToSession(e,r){let n=await this.getUserInfo(e);return{id:crypto.getRandomValues(new Uint32Array(2)).reduce((o,s)=>o+=s.toString(16),""),accessToken:e,account:{label:n.accountName,id:n.id},scopes:r}}async getUserInfo(e){let r="https://api.github.com/user",n;try{n=await this.ctx.get(Lr).fetch(new URL(r).href,{method:"GET",headers:{Authorization:`token ${e}`}})}catch(o){return Wle.error(this.ctx,"Failed to fetch user info: ",o),{id:"",accountName:""}}if(n.ok)try{let o=await n.json();return{id:`${o.id}`,accountName:o.login}}catch(o){return Wle.error(this.ctx,"Failed to fetch user info: ",o),{id:"",accountName:""}}else{let o=n.statusText;try{let s=await n.json();s.message&&(o=s.message)}catch{}return Wle.error(this.ctx,"Failed to fetch user info: ",o),{id:"",accountName:""}}}async removeSession(e){let r=await this._sessionsPromise,n=r.findIndex(o=>o.id===e);if(n>-1)r.splice(n,1),await this.storeSessions(r);else throw new Error(`No session with id '${e}' found.`)}async checkSessionsExpiration(){let e=await this._sessionsPromise;if(e.length!==0)for(let r of e)await this.isSessionExpired(r)&&await this.removeSession(r.id)}async isSessionExpired(e){let{accessToken:r}=e,{id:n,accountName:o}=await this.getUserInfo(r);return!n||!o}};var $le=class extends Ey{constructor(r){super();this._authenticationProviders=new Map;this.ctx=r}static{a(this,"CLSAuthenticationService")}registerAuthenticationProvider(r,n){this._authenticationProviders.set(r,n)}getOrActivateProviderIdForServer(r){for(let n of this._authenticationProviders.values())if(n.authorizationServers?.some(o=>o===r))return Promise.resolve(n.id);return Promise.resolve(void 0)}createAuthenticationProvider(r){if(r===YP.providerId){let n=new YP(this.ctx);return this.registerAuthenticationProvider(n.id,n),n}}getProvider(r){if(this._authenticationProviders.has(r))return this._authenticationProviders.get(r);throw new Error(`No authentication provider '${r}' is currently registered.`)}async getSessions(r,n,o,s=!1){let c=this._authenticationProviders.get(r);if(c){if(o?.authorizationServer){let l=o.authorizationServer;if(!c.authorizationServers?.some(u=>u===l))throw new Error(`The authorization server '${l}' is not supported by the authentication provider '${r}'.`)}return await c.getSessions(n,{...o})}else throw new Error(`No authentication provider '${r}' is currently registered.`)}};f();var R1t=Ne(qc());var H5e=new dt("agentCopilotTokenManager"),T2r={type:new R1t.ProtocolRequestType("copilot/token")},jle=class extends lu{constructor(){super(...arguments);this.networkFetcher=new AV}static{a(this,"AgentCopilotTokenFetcher")}async fetchTokenResult(r,n,o){if(!r.get(ss).getCapabilities().token)return this.networkFetcher.fetchTokenResult(r,n,o);let s=r.get(Ir).connection;try{let c=await s.sendRequest(T2r.type,{force:!1,session:n});if(!c?.envelope)return H5e.debug(r,"Envelope missing from copilot/token response"),{failureKind:"HTTP401",message:"Editor did not return a token"};let{envelope:l,tokenEndpoint:u}=c;if(H5e.debug(r,"Retrieved envelope from copilot/token"),l.expires_at*1e3<Date.now())throw new Da("Expired token in copilot/token response");return u!==void 0&&S5e(u)!==n.apiUrl&&H5e.exception(r,new Error(`Token endpoint ${u} does not match API URL ${n.apiUrl}`),".fetchTokenResult"),{copilotToken:new C2(l,void 0,l.expires_at)}}catch(c){throw c instanceof Error?new Da(c.message,c):c}}};f();var w2r=new dt("Public Code References"),Gle=class extends Nf{static{a(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",o=r.location?.start.character!==void 0?r.location.start.character+1:"-",s=(r.matchingText??"").replace(/[\r\n]/g," ");w2r.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${o}] near ${s}...:`+r.details.map((c,l)=>`
  ${l+1}) [${c.license}] ${c.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(ss).getCapabilities().ipCodeCitation===!0&&await e.get(Ir).connection.sendNotification(Ixe.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};f();f();function k1t(t){_2r(t)}a(k1t,"activateExtensibilityPlatformFeature");function _2r(t){t.set(Sy,new mce(t)),t.set(o1,new o1(t))}a(_2r,"registerContextDependencies");f();var P1t=E.String(),W5e=class{constructor(e){this.turnContext=e}static{a(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(zle,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},zle="build-logs",Vle=class extends Du{static{a(this,"BuildLogsSkill")}constructor(e){super(zle,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new W5e(r))}};f();var $5e=class{constructor(e){this.turnContext=e}static{a(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await Ece(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let o=[[new Ht(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let s of n)o.push([new Ht([s]),1]);return new Ht(o)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},j5e=class{static{a(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},S2r="directory-references",Kle=class{constructor(){this.id=S2r;this.type="implicit"}static{a(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new j5e}processor(e){return new $5e(e)}};f();var R2r=E.Object({uri:E.String(),visibleRange:E.Optional($c),openedAt:E.Optional(E.String()),activeAt:E.Optional(E.String())}),D1t=E.Object({files:E.Array(R2r)}),k2r=3,G5e=class{constructor(e){this.turnContext=e}static{a(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),o=D_(n,"inversePositional");return await this.preElideDocuments(o)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(Nn),o=[];for(let s of r){let c=await n.getOrReadTextDocument(s),l=ua(c);if(await this.turnContext.collectFile(Jle,s.uri,l),c.status==="valid"&&l!=="empty"&&(o.push([c.document,s]),o.length===k2r))break}return o.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,o]=r,s=this.turnContext.ctx.get(Nn).getRelativePath(n),c=new Xv(n,void 0,o.visibleRange);return new Ht([[`Code excerpt from file \`${s}\`:`,1],[c.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await Go.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ht([n])}},Jle="recent-files",Yle=class extends Du{static{a(this,"RecentFilesSkill")}constructor(e){super(Jle,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new G5e(r))}};f();var B1t=E.String(),V5e=class{constructor(e){this.turnContext=e}static{a(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Zle,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},Zle="runtime-logs",Xle=class extends Du{static{a(this,"RuntimeLogsSkill")}constructor(e){super(Zle,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new V5e(r))}};f();var eue=Ne(NA());var tue=class extends Il{constructor(r){super();this.ctx=r}static{a(this,"AgentConversationInspector")}shouldInspect(){return Hj(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(Ir).connection}async inspectPrompt(r){return this.connection?.sendNotification(new eue.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new eue.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new eue.NotificationType("conversation/documentDiff"),r)}};f();var N1t=Ne(qc());var DH=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Ag).onChange(r=>{this.sendNotification(r)})}static{a(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(Ir).connection.sendNotification(new N1t.NotificationType(this.notificationEndpoint),e)}};function M1t(t){P2r(t),D2r(t),k1t(t)}a(M1t,"activateConversationFeature");function P2r(t){t.set(no,new no(t)),t.set(Nu,new Nu),t.set(Cd,new Cd(t)),t.set(ya,new iie(t)),t.set($E,new $E),t.set(Ls,new Ls(t)),t.set(Ag,new Ag(t)),t.set(DH,new DH(t)),t.set(od,new pY(t,new fY(t))),t.set(jE,new jE),t.set(k_,new k_),t.set(Il,new tue(t)),t.set(Tc,new Tc(t)),t.set(yd,new yd),t.set(Em,new Em)}a(P2r,"registerContextDependencies");function D2r(t){let e=new jl;e.registerSkill(new cae(new aae(t))),e.registerSkill(new Nae(new Vf(t,n1,tAt))),e.registerSkill(new uae(new Vf(t,Ty,Vht))),e.registerSkill(new Kse(new Vf(t,of,Eht))),e.registerSkill(new Mae),e.registerSkill(new Kle),e.registerSkill(new Yle(new Vf(t,Jle,D1t))),e.registerSkill(new sce(new Vf(t,s1,TAt))),e.registerSkill(new fae(new Vf(t,B_,ngt))),e.registerSkill(new Xle(new Vf(t,Zle,B1t))),e.registerSkill(new Vle(new Vf(t,zle,P1t))),e.registerSkill(new mae(new Vf(t,wy,igt))),e.registerSkill(new hae(new Vf(t,RP,sgt))),t.set(jl,e)}a(D2r,"registerSkills");f();var L1t=Ne(mi());var rue=class extends md{static{a(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(Ir).connection.sendProgress(new L1t.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};f();var F1t=Ne(qc()),O1t=Ne(NA());var nue=class extends ig{constructor(){super(...arguments);this.requestType=new F1t.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=na.Compile(smt)}static{a(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let o=this.ctx.get(Ir).connection,s;try{let c=await o.sendRequest(this.requestType,n),[l,u]=c;if(u){let d=new O1t.ResponseError(u.code,u.message,u.data);throw kr.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,d),new Error(`Failed to invoke client tool confirmation ${n.name}: ${u.message}`)}s=l}catch(c){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(c)}`)}if(s==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(s))throw new gd(this.typeCheck.Errors(s));return s}};f();var Q1t=Ne(qc()),U1t=Ne(NA());var iue=class extends jw{constructor(){super(...arguments);this.requestType=new Q1t.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=na.Compile(omt)}static{a(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let o=this.ctx.get(Ir).connection,s;try{let c=await o.sendRequest(this.requestType,n),[l,u]=c;if(u){let d=new U1t.ResponseError(u.code,u.message,u.data);throw kr.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,d),new Error(`Failed to invoke client tool ${n.name}: ${u.message}`)}s=l}catch(c){throw new Error(`Failed to invoke client tool ${n.name}: ${String(c)}`)}if(s==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(s))throw new gd(this.typeCheck.Errors(s));return this.transformToToolResult(s)}transformToToolResult(r){let n=r.content.map(o=>typeof o.value=="string"?new Ri(o.value):new yP(o.value));return new Bi(n,r.status??"success")}};f();f();function q1t(t,e,r){try{let n=t.get(Lt).javaContextProviderParams(r);if(n){let o=JSON.parse(n);for(let[s,c]of Object.entries(o))e.set(s,c)}}catch(n){return pn.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}a(q1t,"fillInJavaActiveExperiments");var z5e=Ne(NA());var B2r={type:new z5e.NotificationType("featureFlagsNotification")},N2r={type:new z5e.NotificationType("copilot/didChangeFeatureFlags")},BH=class{constructor(e){this.ctx=e;lc(e,r=>this.sendNotification(r))}static{a(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,o=await r.get(Lt).updateExPValuesAndAssignments(e),s={};r.get(Lt).excludeRelatedFiles(o)&&(s.ExcludeRelatedFiles=!0);let c=aEe(r,o);c.length>0&&(s.ExpContextProviders=c);let l=new Map;bXe(r,c,l,o),RZ(r,l,o),q1t(r,l,o);for(let[p,m]of l.entries())s[p]=m;let u=r.get(ss),d=r.get(Ir).connection;if(u.getCapabilities().didChangeFeatureFlags)await d.sendNotification(N2r.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:s});else{let p={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:s};e.getTokenValue("agent_mode")==="0"&&(p.agent_mode=!1),e.getTokenValue("mcp")==="0"&&(p.mcp=!1),e.envelope.xcode_chat&&e.envelope.chat_enabled&&(p.xc=!0),await d.sendNotification(B2r.type,p)}}};f();var oue=class extends Wo{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{a(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(Ir).connection.sendNotification(Bxe.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(Ir).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};f();var H1t=new LT;f();f();f();var Vr=new dt("CopilotMCP");async function K5e(t,e){await t.get(dy).notifyLog(e)}a(K5e,"notifyMCPRuntimeLog");async function zl(t,e){await K5e(t,{...e,level:"error"})}a(zl,"notifyMCPRuntimeError");async function JP(t,e){await K5e(t,{...e,level:"warning"})}a(JP,"notifyMCPRuntimeWarning");async function es(t,e){await K5e(t,{...e,level:"info"})}a(es,"notifyMCPRuntimeInfo");f();f();var Lo;(function(t){t.assertEqual=o=>o;function e(o){}a(e,"assertIs"),t.assertIs=e;function r(o){throw new Error}a(r,"assertNever"),t.assertNever=r,t.arrayToEnum=o=>{let s={};for(let c of o)s[c]=c;return s},t.getValidEnumValues=o=>{let s=t.objectKeys(o).filter(l=>typeof o[o[l]]!="number"),c={};for(let l of s)c[l]=o[l];return t.objectValues(c)},t.objectValues=o=>t.objectKeys(o).map(function(s){return o[s]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let s=[];for(let c in o)Object.prototype.hasOwnProperty.call(o,c)&&s.push(c);return s},t.find=(o,s)=>{for(let c of o)if(s(c))return c},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function n(o,s=" | "){return o.map(c=>typeof c=="string"?`'${c}'`:c).join(s)}a(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(o,s)=>typeof s=="bigint"?s.toString():s})(Lo||(Lo={}));var J5e;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(J5e||(J5e={}));var Pr=Lo.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),JE=a(t=>{switch(typeof t){case"undefined":return Pr.undefined;case"string":return Pr.string;case"number":return isNaN(t)?Pr.nan:Pr.number;case"boolean":return Pr.boolean;case"function":return Pr.function;case"bigint":return Pr.bigint;case"symbol":return Pr.symbol;case"object":return Array.isArray(t)?Pr.array:t===null?Pr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Pr.promise:typeof Map<"u"&&t instanceof Map?Pr.map:typeof Set<"u"&&t instanceof Set?Pr.set:typeof Date<"u"&&t instanceof Date?Pr.date:Pr.object;default:return Pr.unknown}},"getParsedType"),Ut=Lo.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),M2r=a(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),wm=class t extends Error{static{a(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(s){return s.message},n={_errors:[]},o=a(s=>{for(let c of s.issues)if(c.code==="invalid_union")c.unionErrors.map(o);else if(c.code==="invalid_return_type")o(c.returnTypeError);else if(c.code==="invalid_arguments")o(c.argumentsError);else if(c.path.length===0)n._errors.push(r(c));else{let l=n,u=0;for(;u<c.path.length;){let d=c.path[u];u===c.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(c))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}},"processError");return o(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Lo.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let o of this.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};wm.create=t=>new wm(t);var aL=a((t,e)=>{let r;switch(t.code){case Ut.invalid_type:t.received===Pr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Ut.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Lo.jsonStringifyReplacer)}`;break;case Ut.unrecognized_keys:r=`Unrecognized key(s) in object: ${Lo.joinValues(t.keys,", ")}`;break;case Ut.invalid_union:r="Invalid input";break;case Ut.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Lo.joinValues(t.options)}`;break;case Ut.invalid_enum_value:r=`Invalid enum value. Expected ${Lo.joinValues(t.options)}, received '${t.received}'`;break;case Ut.invalid_arguments:r="Invalid function arguments";break;case Ut.invalid_return_type:r="Invalid function return type";break;case Ut.invalid_date:r="Invalid date";break;case Ut.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Lo.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Ut.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Ut.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Ut.custom:r="Invalid input";break;case Ut.invalid_intersection_types:r="Intersection results could not be merged";break;case Ut.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Ut.not_finite:r="Number must be finite";break;default:r=e.defaultError,Lo.assertNever(t)}return{message:r}},"errorMap"),G1t=aL;function L2r(t){G1t=t}a(L2r,"setErrorMap");function sue(){return G1t}a(sue,"getErrorMap");var aue=a(t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,s=[...r,...o.path||[]],c={...o,path:s};if(o.message!==void 0)return{...o,path:s,message:o.message};let l="",u=n.filter(d=>!!d).slice().reverse();for(let d of u)l=d(c,{data:e,defaultError:l}).message;return{...o,path:s,message:l}},"makeIssue"),F2r=[];function gr(t,e){let r=sue(),n=aue({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===aL?void 0:aL].filter(o=>!!o)});t.common.issues.push(n)}a(gr,"addIssueToContext");var lf=class t{static{a(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if(o.status==="aborted")return Jn;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let o of r){let s=await o.key,c=await o.value;n.push({key:s,value:c})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:s,value:c}=o;if(s.status==="aborted"||c.status==="aborted")return Jn;s.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof c.value<"u"||o.alwaysSet)&&(n[s.value]=c.value)}return{status:e.value,value:n}}},Jn=Object.freeze({status:"aborted"}),sL=a(t=>({status:"dirty",value:t}),"DIRTY"),Kf=a(t=>({status:"valid",value:t}),"OK"),X5e=a(t=>t.status==="aborted","isAborted"),Z5e=a(t=>t.status==="dirty","isDirty"),XP=a(t=>t.status==="valid","isValid"),LH=a(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function cue(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}a(cue,"__classPrivateFieldGet");function V1t(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}a(V1t,"__classPrivateFieldSet");var nn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(nn||(nn={}));var NH,MH,xg=class{static{a(this,"ParseInputLazyPath")}constructor(e,r,n,o){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},W1t=a((t,e)=>{if(XP(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new wm(t.common.issues);return this._error=r,this._error}}},"handleResult");function vi(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:a((c,l)=>{var u,d;let{message:p}=t;return c.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(u=p??n)!==null&&u!==void 0?u:l.defaultError}:c.code!=="invalid_type"?{message:l.defaultError}:{message:(d=p??r)!==null&&d!==void 0?d:l.defaultError}},"customMap"),description:o}}a(vi,"processCreateParams");var xi=class{static{a(this,"ZodType")}get description(){return this._def.description}_getType(e){return JE(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:JE(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new lf,ctx:{common:e.parent.common,data:e.data,parsedType:JE(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(LH(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let o={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:JE(e)},s=this._parseSync({data:e,path:o.path,parent:o});return W1t(o,s)}"~validate"(e){var r,n;let o={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:JE(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:o});return XP(s)?{value:s.value}:{issues:o.common.issues}}catch(s){!((n=(r=s?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),o.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:o}).then(s=>XP(s)?{value:s.value}:{issues:o.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:JE(e)},o=this._parse({data:e,path:n.path,parent:n}),s=await(LH(o)?o:Promise.resolve(o));return W1t(n,s)}refine(e,r){let n=a(o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r,"getIssueProperties");return this._refinement((o,s)=>{let c=e(o),l=a(()=>s.addIssue({code:Ut.custom,...n(o)}),"setError");return typeof Promise<"u"&&c instanceof Promise?c.then(u=>u?!0:(l(),!1)):c?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(e){return new _m({schema:this,typeName:jn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a(r=>this["~validate"](r),"validate")}}optional(){return vg.create(this,this._def)}nullable(){return f1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZE.create(this)}promise(){return K_.create(this,this._def)}or(e){return o5.create([this,e],this._def)}and(e){return s5.create(this,e,this._def)}transform(e){return new _m({...vi(this._def),schema:this,typeName:jn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new d5({...vi(this._def),innerType:this,defaultValue:r,typeName:jn.ZodDefault})}brand(){return new FH({typeName:jn.ZodBranded,type:this,...vi(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new f5({...vi(this._def),innerType:this,catchValue:r,typeName:jn.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return OH.create(this,e)}readonly(){return p5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},O2r=/^c[^\s-]{8,}$/i,Q2r=/^[0-9a-z]+$/,U2r=/^[0-9A-HJKMNP-TV-Z]{26}$/i,q2r=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,H2r=/^[a-z0-9_-]{21}$/i,W2r=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,$2r=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,j2r=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,G2r="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Y5e,V2r=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,z2r=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,K2r=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Y2r=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,J2r=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,X2r=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,z1t="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Z2r=new RegExp(`^${z1t}$`);function K1t(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}a(K1t,"timeRegexSource");function eRr(t){return new RegExp(`^${K1t(t)}$`)}a(eRr,"timeRegex");function Y1t(t){let e=`${z1t}T${K1t(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}a(Y1t,"datetimeRegex");function tRr(t,e){return!!((e==="v4"||!e)&&V2r.test(t)||(e==="v6"||!e)&&K2r.test(t))}a(tRr,"isValidIP");function rRr(t,e){if(!W2r.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||!o.typ||!o.alg||e&&o.alg!==e)}catch{return!1}}a(rRr,"isValidJWT");function nRr(t,e){return!!((e==="v4"||!e)&&z2r.test(t)||(e==="v6"||!e)&&Y2r.test(t))}a(nRr,"isValidCidr");var V_=class t extends xi{static{a(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Pr.string){let s=this._getOrReturnCtx(e);return gr(s,{code:Ut.invalid_type,expected:Pr.string,received:s.parsedType}),Jn}let n=new lf,o;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){let c=e.data.length>s.value,l=e.data.length<s.value;(c||l)&&(o=this._getOrReturnCtx(e,o),c?gr(o,{code:Ut.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&gr(o,{code:Ut.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")j2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"email",code:Ut.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")Y5e||(Y5e=new RegExp(G2r,"u")),Y5e.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"emoji",code:Ut.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")q2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"uuid",code:Ut.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")H2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"nanoid",code:Ut.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")O2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"cuid",code:Ut.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")Q2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"cuid2",code:Ut.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")U2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"ulid",code:Ut.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),gr(o,{validation:"url",code:Ut.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"regex",code:Ut.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?Y1t(s).test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?Z2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?eRr(s).test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?$2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"duration",code:Ut.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?tRr(e.data,s.version)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"ip",code:Ut.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?rRr(e.data,s.alg)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"jwt",code:Ut.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?nRr(e.data,s.version)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"cidr",code:Ut.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?J2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"base64",code:Ut.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?X2r.test(e.data)||(o=this._getOrReturnCtx(e,o),gr(o,{validation:"base64url",code:Ut.invalid_string,message:s.message}),n.dirty()):Lo.assertNever(s);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(o=>e.test(o),{validation:r,code:Ut.invalid_string,...nn.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...nn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...nn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...nn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...nn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...nn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...nn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...nn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...nn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...nn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...nn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...nn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...nn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...nn.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...nn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...nn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...nn.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...nn.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...nn.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...nn.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...nn.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...nn.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...nn.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...nn.errToObj(r)})}nonempty(e){return this.min(1,nn.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};V_.create=t=>{var e;return new V_({checks:[],typeName:jn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...vi(t)})};function iRr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,s=parseInt(t.toFixed(o).replace(".","")),c=parseInt(e.toFixed(o).replace(".",""));return s%c/Math.pow(10,o)}a(iRr,"floatSafeRemainder");var ZP=class t extends xi{static{a(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Pr.number){let s=this._getOrReturnCtx(e);return gr(s,{code:Ut.invalid_type,expected:Pr.number,received:s.parsedType}),Jn}let n,o=new lf;for(let s of this._def.checks)s.kind==="int"?Lo.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),gr(n,{code:Ut.invalid_type,expected:"integer",received:"float",message:s.message}),o.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),gr(n,{code:Ut.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),gr(n,{code:Ut.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="multipleOf"?iRr(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),gr(n,{code:Ut.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),gr(n,{code:Ut.not_finite,message:s.message}),o.dirty()):Lo.assertNever(s);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,nn.toString(r))}gt(e,r){return this.setLimit("min",e,!1,nn.toString(r))}lte(e,r){return this.setLimit("max",e,!0,nn.toString(r))}lt(e,r){return this.setLimit("max",e,!1,nn.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:nn.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:nn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:nn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:nn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:nn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:nn.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:nn.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:nn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:nn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:nn.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Lo.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ZP.create=t=>new ZP({checks:[],typeName:jn.ZodNumber,coerce:t?.coerce||!1,...vi(t)});var e5=class t extends xi{static{a(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Pr.bigint)return this._getInvalidInput(e);let n,o=new lf;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),gr(n,{code:Ut.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),gr(n,{code:Ut.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),gr(n,{code:Ut.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):Lo.assertNever(s);return{status:o.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return gr(r,{code:Ut.invalid_type,expected:Pr.bigint,received:r.parsedType}),Jn}gte(e,r){return this.setLimit("min",e,!0,nn.toString(r))}gt(e,r){return this.setLimit("min",e,!1,nn.toString(r))}lte(e,r){return this.setLimit("max",e,!0,nn.toString(r))}lt(e,r){return this.setLimit("max",e,!1,nn.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:nn.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:nn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:nn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:nn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:nn.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:nn.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};e5.create=t=>{var e;return new e5({checks:[],typeName:jn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...vi(t)})};var t5=class extends xi{static{a(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Pr.boolean){let n=this._getOrReturnCtx(e);return gr(n,{code:Ut.invalid_type,expected:Pr.boolean,received:n.parsedType}),Jn}return Kf(e.data)}};t5.create=t=>new t5({typeName:jn.ZodBoolean,coerce:t?.coerce||!1,...vi(t)});var r5=class t extends xi{static{a(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Pr.date){let s=this._getOrReturnCtx(e);return gr(s,{code:Ut.invalid_type,expected:Pr.date,received:s.parsedType}),Jn}if(isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return gr(s,{code:Ut.invalid_date}),Jn}let n=new lf,o;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(o=this._getOrReturnCtx(e,o),gr(o,{code:Ut.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Lo.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:nn.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:nn.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};r5.create=t=>new r5({checks:[],coerce:t?.coerce||!1,typeName:jn.ZodDate,...vi(t)});var cL=class extends xi{static{a(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==Pr.symbol){let n=this._getOrReturnCtx(e);return gr(n,{code:Ut.invalid_type,expected:Pr.symbol,received:n.parsedType}),Jn}return Kf(e.data)}};cL.create=t=>new cL({typeName:jn.ZodSymbol,...vi(t)});var n5=class extends xi{static{a(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==Pr.undefined){let n=this._getOrReturnCtx(e);return gr(n,{code:Ut.invalid_type,expected:Pr.undefined,received:n.parsedType}),Jn}return Kf(e.data)}};n5.create=t=>new n5({typeName:jn.ZodUndefined,...vi(t)});var i5=class extends xi{static{a(this,"ZodNull")}_parse(e){if(this._getType(e)!==Pr.null){let n=this._getOrReturnCtx(e);return gr(n,{code:Ut.invalid_type,expected:Pr.null,received:n.parsedType}),Jn}return Kf(e.data)}};i5.create=t=>new i5({typeName:jn.ZodNull,...vi(t)});var z_=class extends xi{static{a(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Kf(e.data)}};z_.create=t=>new z_({typeName:jn.ZodAny,...vi(t)});var XE=class extends xi{static{a(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Kf(e.data)}};XE.create=t=>new XE({typeName:jn.ZodUnknown,...vi(t)});var Ny=class extends xi{static{a(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return gr(r,{code:Ut.invalid_type,expected:Pr.never,received:r.parsedType}),Jn}};Ny.create=t=>new Ny({typeName:jn.ZodNever,...vi(t)});var lL=class extends xi{static{a(this,"ZodVoid")}_parse(e){if(this._getType(e)!==Pr.undefined){let n=this._getOrReturnCtx(e);return gr(n,{code:Ut.invalid_type,expected:Pr.void,received:n.parsedType}),Jn}return Kf(e.data)}};lL.create=t=>new lL({typeName:jn.ZodVoid,...vi(t)});var ZE=class t extends xi{static{a(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),o=this._def;if(r.parsedType!==Pr.array)return gr(r,{code:Ut.invalid_type,expected:Pr.array,received:r.parsedType}),Jn;if(o.exactLength!==null){let c=r.data.length>o.exactLength.value,l=r.data.length<o.exactLength.value;(c||l)&&(gr(r,{code:c?Ut.too_big:Ut.too_small,minimum:l?o.exactLength.value:void 0,maximum:c?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(gr(r,{code:Ut.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(gr(r,{code:Ut.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((c,l)=>o.type._parseAsync(new xg(r,c,r.path,l)))).then(c=>lf.mergeArray(n,c));let s=[...r.data].map((c,l)=>o.type._parseSync(new xg(r,c,r.path,l)));return lf.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:nn.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:nn.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:nn.toString(r)}})}nonempty(e){return this.min(1,e)}};ZE.create=(t,e)=>new ZE({type:t,minLength:null,maxLength:null,exactLength:null,typeName:jn.ZodArray,...vi(e)});function oL(t){if(t instanceof o0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=vg.create(oL(n))}return new o0({...t._def,shape:a(()=>e,"shape")})}else return t instanceof ZE?new ZE({...t._def,type:oL(t.element)}):t instanceof vg?vg.create(oL(t.unwrap())):t instanceof f1?f1.create(oL(t.unwrap())):t instanceof d1?d1.create(t.items.map(e=>oL(e))):t}a(oL,"deepPartialify");var o0=class t extends xi{static{a(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Lo.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Pr.object){let d=this._getOrReturnCtx(e);return gr(d,{code:Ut.invalid_type,expected:Pr.object,received:d.parsedType}),Jn}let{status:n,ctx:o}=this._processInputParams(e),{shape:s,keys:c}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ny&&this._def.unknownKeys==="strip"))for(let d in o.data)c.includes(d)||l.push(d);let u=[];for(let d of c){let p=s[d],m=o.data[d];u.push({key:{status:"valid",value:d},value:p._parse(new xg(o,m,o.path,d)),alwaysSet:d in o.data})}if(this._def.catchall instanceof Ny){let d=this._def.unknownKeys;if(d==="passthrough")for(let p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:o.data[p]}});else if(d==="strict")l.length>0&&(gr(o,{code:Ut.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let p of l){let m=o.data[p];u.push({key:{status:"valid",value:p},value:d._parse(new xg(o,m,o.path,p)),alwaysSet:p in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let d=[];for(let p of u){let m=await p.key,h=await p.value;d.push({key:m,value:h,alwaysSet:p.alwaysSet})}return d}).then(d=>lf.mergeObjectSync(n,d)):lf.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return nn.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:a((r,n)=>{var o,s,c,l;let u=(c=(s=(o=this._def).errorMap)===null||s===void 0?void 0:s.call(o,r,n).message)!==null&&c!==void 0?c:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=nn.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:a(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:a(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:jn.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Lo.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:a(()=>r,"shape")})}omit(e){let r={};return Lo.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:a(()=>r,"shape")})}deepPartial(){return oL(this)}partial(e){let r={};return Lo.objectKeys(this.shape).forEach(n=>{let o=this.shape[n];e&&!e[n]?r[n]=o:r[n]=o.optional()}),new t({...this._def,shape:a(()=>r,"shape")})}required(e){let r={};return Lo.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof vg;)s=s._def.innerType;r[n]=s}}),new t({...this._def,shape:a(()=>r,"shape")})}keyof(){return J1t(Lo.objectKeys(this.shape))}};o0.create=(t,e)=>new o0({shape:a(()=>t,"shape"),unknownKeys:"strip",catchall:Ny.create(),typeName:jn.ZodObject,...vi(e)});o0.strictCreate=(t,e)=>new o0({shape:a(()=>t,"shape"),unknownKeys:"strict",catchall:Ny.create(),typeName:jn.ZodObject,...vi(e)});o0.lazycreate=(t,e)=>new o0({shape:t,unknownKeys:"strip",catchall:Ny.create(),typeName:jn.ZodObject,...vi(e)});var o5=class extends xi{static{a(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function o(s){for(let l of s)if(l.result.status==="valid")return l.result;for(let l of s)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let c=s.map(l=>new wm(l.ctx.common.issues));return gr(r,{code:Ut.invalid_union,unionErrors:c}),Jn}if(a(o,"handleResults"),r.common.async)return Promise.all(n.map(async s=>{let c={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:c}),ctx:c}})).then(o);{let s,c=[];for(let u of n){let d={...r,common:{...r.common,issues:[]},parent:null},p=u._parseSync({data:r.data,path:r.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:d}),d.common.issues.length&&c.push(d.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let l=c.map(u=>new wm(u));return gr(r,{code:Ut.invalid_union,unionErrors:l}),Jn}}get options(){return this._def.options}};o5.create=(t,e)=>new o5({options:t,typeName:jn.ZodUnion,...vi(e)});var YE=a(t=>t instanceof a5?YE(t.schema):t instanceof _m?YE(t.innerType()):t instanceof c5?[t.value]:t instanceof l5?t.options:t instanceof u5?Lo.objectValues(t.enum):t instanceof d5?YE(t._def.innerType):t instanceof n5?[void 0]:t instanceof i5?[null]:t instanceof vg?[void 0,...YE(t.unwrap())]:t instanceof f1?[null,...YE(t.unwrap())]:t instanceof FH||t instanceof p5?YE(t.unwrap()):t instanceof f5?YE(t._def.innerType):[],"getDiscriminator"),lue=class t extends xi{static{a(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Pr.object)return gr(r,{code:Ut.invalid_type,expected:Pr.object,received:r.parsedType}),Jn;let n=this.discriminator,o=r.data[n],s=this.optionsMap.get(o);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(gr(r,{code:Ut.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Jn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let o=new Map;for(let s of r){let c=YE(s.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of c){if(o.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);o.set(l,s)}}return new t({typeName:jn.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...vi(n)})}};function e4e(t,e){let r=JE(t),n=JE(e);if(t===e)return{valid:!0,data:t};if(r===Pr.object&&n===Pr.object){let o=Lo.objectKeys(e),s=Lo.objectKeys(t).filter(l=>o.indexOf(l)!==-1),c={...t,...e};for(let l of s){let u=e4e(t[l],e[l]);if(!u.valid)return{valid:!1};c[l]=u.data}return{valid:!0,data:c}}else if(r===Pr.array&&n===Pr.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let s=0;s<t.length;s++){let c=t[s],l=e[s],u=e4e(c,l);if(!u.valid)return{valid:!1};o.push(u.data)}return{valid:!0,data:o}}else return r===Pr.date&&n===Pr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}a(e4e,"mergeValues");var s5=class extends xi{static{a(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=a((s,c)=>{if(X5e(s)||X5e(c))return Jn;let l=e4e(s.value,c.value);return l.valid?((Z5e(s)||Z5e(c))&&r.dirty(),{status:r.value,value:l.data}):(gr(n,{code:Ut.invalid_intersection_types}),Jn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,c])=>o(s,c)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};s5.create=(t,e,r)=>new s5({left:t,right:e,typeName:jn.ZodIntersection,...vi(r)});var d1=class t extends xi{static{a(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pr.array)return gr(n,{code:Ut.invalid_type,expected:Pr.array,received:n.parsedType}),Jn;if(n.data.length<this._def.items.length)return gr(n,{code:Ut.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Jn;!this._def.rest&&n.data.length>this._def.items.length&&(gr(n,{code:Ut.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...n.data].map((c,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new xg(n,c,n.path,l)):null}).filter(c=>!!c);return n.common.async?Promise.all(s).then(c=>lf.mergeArray(r,c)):lf.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};d1.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new d1({items:t,typeName:jn.ZodTuple,rest:null,...vi(e)})};var uue=class t extends xi{static{a(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pr.object)return gr(n,{code:Ut.invalid_type,expected:Pr.object,received:n.parsedType}),Jn;let o=[],s=this._def.keyType,c=this._def.valueType;for(let l in n.data)o.push({key:s._parse(new xg(n,l,n.path,l)),value:c._parse(new xg(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?lf.mergeObjectAsync(r,o):lf.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof xi?new t({keyType:e,valueType:r,typeName:jn.ZodRecord,...vi(n)}):new t({keyType:V_.create(),valueType:e,typeName:jn.ZodRecord,...vi(r)})}},uL=class extends xi{static{a(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pr.map)return gr(n,{code:Ut.invalid_type,expected:Pr.map,received:n.parsedType}),Jn;let o=this._def.keyType,s=this._def.valueType,c=[...n.data.entries()].map(([l,u],d)=>({key:o._parse(new xg(n,l,n.path,[d,"key"])),value:s._parse(new xg(n,u,n.path,[d,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of c){let d=await u.key,p=await u.value;if(d.status==="aborted"||p.status==="aborted")return Jn;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),l.set(d.value,p.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of c){let d=u.key,p=u.value;if(d.status==="aborted"||p.status==="aborted")return Jn;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),l.set(d.value,p.value)}return{status:r.value,value:l}}}};uL.create=(t,e,r)=>new uL({valueType:e,keyType:t,typeName:jn.ZodMap,...vi(r)});var dL=class t extends xi{static{a(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pr.set)return gr(n,{code:Ut.invalid_type,expected:Pr.set,received:n.parsedType}),Jn;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(gr(n,{code:Ut.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(gr(n,{code:Ut.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let s=this._def.valueType;function c(u){let d=new Set;for(let p of u){if(p.status==="aborted")return Jn;p.status==="dirty"&&r.dirty(),d.add(p.value)}return{status:r.value,value:d}}a(c,"finalizeSet");let l=[...n.data.values()].map((u,d)=>s._parse(new xg(n,u,n.path,d)));return n.common.async?Promise.all(l).then(u=>c(u)):c(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:nn.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:nn.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};dL.create=(t,e)=>new dL({valueType:t,minSize:null,maxSize:null,typeName:jn.ZodSet,...vi(e)});var due=class t extends xi{static{a(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Pr.function)return gr(r,{code:Ut.invalid_type,expected:Pr.function,received:r.parsedType}),Jn;function n(l,u){return aue({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,sue(),aL].filter(d=>!!d),issueData:{code:Ut.invalid_arguments,argumentsError:u}})}a(n,"makeArgsIssue");function o(l,u){return aue({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,sue(),aL].filter(d=>!!d),issueData:{code:Ut.invalid_return_type,returnTypeError:u}})}a(o,"makeReturnsIssue");let s={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof K_){let l=this;return Kf(async function(...u){let d=new wm([]),p=await l._def.args.parseAsync(u,s).catch(g=>{throw d.addIssue(n(u,g)),d}),m=await Reflect.apply(c,this,p);return await l._def.returns._def.type.parseAsync(m,s).catch(g=>{throw d.addIssue(o(m,g)),d})})}else{let l=this;return Kf(function(...u){let d=l._def.args.safeParse(u,s);if(!d.success)throw new wm([n(u,d.error)]);let p=Reflect.apply(c,this,d.data),m=l._def.returns.safeParse(p,s);if(!m.success)throw new wm([o(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:d1.create(e).rest(XE.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||d1.create([]).rest(XE.create()),returns:r||XE.create(),typeName:jn.ZodFunction,...vi(n)})}},a5=class extends xi{static{a(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};a5.create=(t,e)=>new a5({getter:t,typeName:jn.ZodLazy,...vi(e)});var c5=class extends xi{static{a(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return gr(r,{received:r.data,code:Ut.invalid_literal,expected:this._def.value}),Jn}return{status:"valid",value:e.data}}get value(){return this._def.value}};c5.create=(t,e)=>new c5({value:t,typeName:jn.ZodLiteral,...vi(e)});function J1t(t,e){return new l5({values:t,typeName:jn.ZodEnum,...vi(e)})}a(J1t,"createZodEnum");var l5=class t extends xi{static{a(this,"ZodEnum")}constructor(){super(...arguments),NH.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return gr(r,{expected:Lo.joinValues(n),received:r.parsedType,code:Ut.invalid_type}),Jn}if(cue(this,NH,"f")||V1t(this,NH,new Set(this._def.values),"f"),!cue(this,NH,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return gr(r,{received:r.data,code:Ut.invalid_enum_value,options:n}),Jn}return Kf(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};NH=new WeakMap;l5.create=J1t;var u5=class extends xi{static{a(this,"ZodNativeEnum")}constructor(){super(...arguments),MH.set(this,void 0)}_parse(e){let r=Lo.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Pr.string&&n.parsedType!==Pr.number){let o=Lo.objectValues(r);return gr(n,{expected:Lo.joinValues(o),received:n.parsedType,code:Ut.invalid_type}),Jn}if(cue(this,MH,"f")||V1t(this,MH,new Set(Lo.getValidEnumValues(this._def.values)),"f"),!cue(this,MH,"f").has(e.data)){let o=Lo.objectValues(r);return gr(n,{received:n.data,code:Ut.invalid_enum_value,options:o}),Jn}return Kf(e.data)}get enum(){return this._def.values}};MH=new WeakMap;u5.create=(t,e)=>new u5({values:t,typeName:jn.ZodNativeEnum,...vi(e)});var K_=class extends xi{static{a(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Pr.promise&&r.common.async===!1)return gr(r,{code:Ut.invalid_type,expected:Pr.promise,received:r.parsedType}),Jn;let n=r.parsedType===Pr.promise?r.data:Promise.resolve(r.data);return Kf(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};K_.create=(t,e)=>new K_({type:t,typeName:jn.ZodPromise,...vi(e)});var _m=class extends xi{static{a(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===jn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=this._def.effect||null,s={addIssue:a(c=>{gr(n,c),c.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),o.type==="preprocess"){let c=o.transform(n.data,s);if(n.common.async)return Promise.resolve(c).then(async l=>{if(r.value==="aborted")return Jn;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?Jn:u.status==="dirty"||r.value==="dirty"?sL(u.value):u});{if(r.value==="aborted")return Jn;let l=this._def.schema._parseSync({data:c,path:n.path,parent:n});return l.status==="aborted"?Jn:l.status==="dirty"||r.value==="dirty"?sL(l.value):l}}if(o.type==="refinement"){let c=a(l=>{let u=o.refinement(l,s);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Jn:(l.status==="dirty"&&r.dirty(),c(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Jn:(l.status==="dirty"&&r.dirty(),c(l.value).then(()=>({status:r.value,value:l.value}))))}if(o.type==="transform")if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!XP(c))return c;let l=o.transform(c.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>XP(c)?Promise.resolve(o.transform(c.value,s)).then(l=>({status:r.value,value:l})):c);Lo.assertNever(o)}};_m.create=(t,e,r)=>new _m({schema:t,typeName:jn.ZodEffects,effect:e,...vi(r)});_m.createWithPreprocess=(t,e,r)=>new _m({schema:e,effect:{type:"preprocess",transform:t},typeName:jn.ZodEffects,...vi(r)});var vg=class extends xi{static{a(this,"ZodOptional")}_parse(e){return this._getType(e)===Pr.undefined?Kf(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};vg.create=(t,e)=>new vg({innerType:t,typeName:jn.ZodOptional,...vi(e)});var f1=class extends xi{static{a(this,"ZodNullable")}_parse(e){return this._getType(e)===Pr.null?Kf(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};f1.create=(t,e)=>new f1({innerType:t,typeName:jn.ZodNullable,...vi(e)});var d5=class extends xi{static{a(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Pr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};d5.create=(t,e)=>new d5({innerType:t,typeName:jn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...vi(e)});var f5=class extends xi{static{a(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return LH(o)?o.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new wm(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new wm(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};f5.create=(t,e)=>new f5({innerType:t,typeName:jn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...vi(e)});var fL=class extends xi{static{a(this,"ZodNaN")}_parse(e){if(this._getType(e)!==Pr.nan){let n=this._getOrReturnCtx(e);return gr(n,{code:Ut.invalid_type,expected:Pr.nan,received:n.parsedType}),Jn}return{status:"valid",value:e.data}}};fL.create=t=>new fL({typeName:jn.ZodNaN,...vi(t)});var oRr=Symbol("zod_brand"),FH=class extends xi{static{a(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},OH=class t extends xi{static{a(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return a(async()=>{let s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Jn:s.status==="dirty"?(r.dirty(),sL(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})},"handleAsync")();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Jn:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:jn.ZodPipeline})}},p5=class extends xi{static{a(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=a(o=>(XP(o)&&(o.value=Object.freeze(o.value)),o),"freeze");return LH(r)?r.then(o=>n(o)):n(r)}unwrap(){return this._def.innerType}};p5.create=(t,e)=>new p5({innerType:t,typeName:jn.ZodReadonly,...vi(e)});function $1t(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}a($1t,"cleanParams");function X1t(t,e={},r){return t?z_.create().superRefine((n,o)=>{var s,c;let l=t(n);if(l instanceof Promise)return l.then(u=>{var d,p;if(!u){let m=$1t(e,n),h=(p=(d=m.fatal)!==null&&d!==void 0?d:r)!==null&&p!==void 0?p:!0;o.addIssue({code:"custom",...m,fatal:h})}});if(!l){let u=$1t(e,n),d=(c=(s=u.fatal)!==null&&s!==void 0?s:r)!==null&&c!==void 0?c:!0;o.addIssue({code:"custom",...u,fatal:d})}}):z_.create()}a(X1t,"custom");var sRr={object:o0.lazycreate},jn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(jn||(jn={}));var aRr=a((t,e={message:`Input not instance of ${t.name}`})=>X1t(r=>r instanceof t,e),"instanceOfType"),Z1t=V_.create,ext=ZP.create,cRr=fL.create,lRr=e5.create,txt=t5.create,uRr=r5.create,dRr=cL.create,fRr=n5.create,pRr=i5.create,mRr=z_.create,hRr=XE.create,gRr=Ny.create,ARr=lL.create,yRr=ZE.create,CRr=o0.create,vRr=o0.strictCreate,xRr=o5.create,ERr=lue.create,bRr=s5.create,IRr=d1.create,TRr=uue.create,wRr=uL.create,_Rr=dL.create,SRr=due.create,RRr=a5.create,kRr=c5.create,PRr=l5.create,DRr=u5.create,BRr=K_.create,j1t=_m.create,NRr=vg.create,MRr=f1.create,LRr=_m.createWithPreprocess,FRr=OH.create,ORr=a(()=>Z1t().optional(),"ostring"),QRr=a(()=>ext().optional(),"onumber"),URr=a(()=>txt().optional(),"oboolean"),qRr={string:a(t=>V_.create({...t,coerce:!0}),"string"),number:a(t=>ZP.create({...t,coerce:!0}),"number"),boolean:a(t=>t5.create({...t,coerce:!0}),"boolean"),bigint:a(t=>e5.create({...t,coerce:!0}),"bigint"),date:a(t=>r5.create({...t,coerce:!0}),"date")},HRr=Jn,R=Object.freeze({__proto__:null,defaultErrorMap:aL,setErrorMap:L2r,getErrorMap:sue,makeIssue:aue,EMPTY_PATH:F2r,addIssueToContext:gr,ParseStatus:lf,INVALID:Jn,DIRTY:sL,OK:Kf,isAborted:X5e,isDirty:Z5e,isValid:XP,isAsync:LH,get util(){return Lo},get objectUtil(){return J5e},ZodParsedType:Pr,getParsedType:JE,ZodType:xi,datetimeRegex:Y1t,ZodString:V_,ZodNumber:ZP,ZodBigInt:e5,ZodBoolean:t5,ZodDate:r5,ZodSymbol:cL,ZodUndefined:n5,ZodNull:i5,ZodAny:z_,ZodUnknown:XE,ZodNever:Ny,ZodVoid:lL,ZodArray:ZE,ZodObject:o0,ZodUnion:o5,ZodDiscriminatedUnion:lue,ZodIntersection:s5,ZodTuple:d1,ZodRecord:uue,ZodMap:uL,ZodSet:dL,ZodFunction:due,ZodLazy:a5,ZodLiteral:c5,ZodEnum:l5,ZodNativeEnum:u5,ZodPromise:K_,ZodEffects:_m,ZodTransformer:_m,ZodOptional:vg,ZodNullable:f1,ZodDefault:d5,ZodCatch:f5,ZodNaN:fL,BRAND:oRr,ZodBranded:FH,ZodPipeline:OH,ZodReadonly:p5,custom:X1t,Schema:xi,ZodSchema:xi,late:sRr,get ZodFirstPartyTypeKind(){return jn},coerce:qRr,any:mRr,array:yRr,bigint:lRr,boolean:txt,date:uRr,discriminatedUnion:ERr,effect:j1t,enum:PRr,function:SRr,instanceof:aRr,intersection:bRr,lazy:RRr,literal:kRr,map:wRr,nan:cRr,nativeEnum:DRr,never:gRr,null:pRr,nullable:MRr,number:ext,object:CRr,oboolean:URr,onumber:QRr,optional:NRr,ostring:ORr,pipeline:FRr,preprocess:LRr,promise:BRr,record:TRr,set:_Rr,strictObject:vRr,string:Z1t,symbol:dRr,transformer:j1t,tuple:IRr,undefined:fRr,union:xRr,unknown:hRr,void:ARr,NEVER:HRr,ZodIssueCode:Ut,quotelessJson:M2r,ZodError:wm});var fue="2025-06-18";var pue="2.0",rxt=R.union([R.string(),R.number().int()]),nxt=R.string(),WRr=R.object({progressToken:R.optional(rxt)}).passthrough(),Eg=R.object({_meta:R.optional(WRr)}).passthrough(),s0=R.object({method:R.string(),params:R.optional(Eg)}),UH=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),p1=R.object({method:R.string(),params:R.optional(UH)}),bg=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),mue=R.union([R.string(),R.number().int()]),$Rr=R.object({jsonrpc:R.literal(pue),id:mue}).merge(s0).strict();var jRr=R.object({jsonrpc:R.literal(pue)}).merge(p1).strict();var GRr=R.object({jsonrpc:R.literal(pue),id:mue,result:bg}).strict();var VRr=R.object({jsonrpc:R.literal(pue),id:mue,error:R.object({code:R.number().int(),message:R.string(),data:R.optional(R.unknown())})}).strict();var x6o=R.union([$Rr,jRr,GRr,VRr]),ixt=bg.strict(),oxt=p1.extend({method:R.literal("notifications/cancelled"),params:UH.extend({requestId:mue,reason:R.string().optional()})}),qH=R.object({name:R.string(),title:R.optional(R.string())}).passthrough(),sxt=qH.extend({version:R.string()}),zRr=R.object({experimental:R.optional(R.object({}).passthrough()),sampling:R.optional(R.object({}).passthrough()),elicitation:R.optional(R.object({}).passthrough()),roots:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),KRr=s0.extend({method:R.literal("initialize"),params:Eg.extend({protocolVersion:R.string(),capabilities:zRr,clientInfo:sxt})});var YRr=R.object({experimental:R.optional(R.object({}).passthrough()),logging:R.optional(R.object({}).passthrough()),completions:R.optional(R.object({}).passthrough()),prompts:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough()),resources:R.optional(R.object({subscribe:R.optional(R.boolean()),listChanged:R.optional(R.boolean())}).passthrough()),tools:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),JRr=bg.extend({protocolVersion:R.string(),capabilities:YRr,serverInfo:sxt,instructions:R.optional(R.string())}),XRr=p1.extend({method:R.literal("notifications/initialized")});var axt=s0.extend({method:R.literal("ping")}),ZRr=R.object({progress:R.number(),total:R.optional(R.number()),message:R.optional(R.string())}).passthrough(),cxt=p1.extend({method:R.literal("notifications/progress"),params:UH.merge(ZRr).extend({progressToken:rxt})}),hue=s0.extend({params:Eg.extend({cursor:R.optional(nxt)}).optional()}),gue=bg.extend({nextCursor:R.optional(nxt)}),lxt=R.object({uri:R.string(),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}).passthrough(),uxt=lxt.extend({text:R.string()}),dxt=lxt.extend({blob:R.string().base64()}),fxt=qH.extend({uri:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}),ekr=qH.extend({uriTemplate:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}),tkr=hue.extend({method:R.literal("resources/list")}),rkr=gue.extend({resources:R.array(fxt)}),nkr=hue.extend({method:R.literal("resources/templates/list")}),ikr=gue.extend({resourceTemplates:R.array(ekr)}),okr=s0.extend({method:R.literal("resources/read"),params:Eg.extend({uri:R.string()})}),skr=bg.extend({contents:R.array(R.union([uxt,dxt]))}),akr=p1.extend({method:R.literal("notifications/resources/list_changed")}),ckr=s0.extend({method:R.literal("resources/subscribe"),params:Eg.extend({uri:R.string()})}),lkr=s0.extend({method:R.literal("resources/unsubscribe"),params:Eg.extend({uri:R.string()})}),ukr=p1.extend({method:R.literal("notifications/resources/updated"),params:UH.extend({uri:R.string()})}),dkr=R.object({name:R.string(),description:R.optional(R.string()),required:R.optional(R.boolean())}).passthrough(),fkr=qH.extend({description:R.optional(R.string()),arguments:R.optional(R.array(dkr)),_meta:R.optional(R.object({}).passthrough())}),pkr=hue.extend({method:R.literal("prompts/list")}),mkr=gue.extend({prompts:R.array(fkr)}),hkr=s0.extend({method:R.literal("prompts/get"),params:Eg.extend({name:R.string(),arguments:R.optional(R.record(R.string()))})}),t4e=R.object({type:R.literal("text"),text:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),r4e=R.object({type:R.literal("image"),data:R.string().base64(),mimeType:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),n4e=R.object({type:R.literal("audio"),data:R.string().base64(),mimeType:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),gkr=R.object({type:R.literal("resource"),resource:R.union([uxt,dxt]),_meta:R.optional(R.object({}).passthrough())}).passthrough(),Akr=fxt.extend({type:R.literal("resource_link")}),pxt=R.union([t4e,r4e,n4e,Akr,gkr]),ykr=R.object({role:R.enum(["user","assistant"]),content:pxt}).passthrough(),Ckr=bg.extend({description:R.optional(R.string()),messages:R.array(ykr)}),vkr=p1.extend({method:R.literal("notifications/prompts/list_changed")}),xkr=R.object({title:R.optional(R.string()),readOnlyHint:R.optional(R.boolean()),destructiveHint:R.optional(R.boolean()),idempotentHint:R.optional(R.boolean()),openWorldHint:R.optional(R.boolean())}).passthrough(),Ekr=qH.extend({description:R.optional(R.string()),inputSchema:R.object({type:R.literal("object"),properties:R.optional(R.object({}).passthrough()),required:R.optional(R.array(R.string()))}).passthrough(),outputSchema:R.optional(R.object({type:R.literal("object"),properties:R.optional(R.object({}).passthrough()),required:R.optional(R.array(R.string()))}).passthrough()),annotations:R.optional(xkr),_meta:R.optional(R.object({}).passthrough())}),bkr=hue.extend({method:R.literal("tools/list")}),Ikr=gue.extend({tools:R.array(Ekr)}),mxt=bg.extend({content:R.array(pxt).default([]),structuredContent:R.object({}).passthrough().optional(),isError:R.optional(R.boolean())}),E6o=mxt.or(bg.extend({toolResult:R.unknown()})),Tkr=s0.extend({method:R.literal("tools/call"),params:Eg.extend({name:R.string(),arguments:R.optional(R.record(R.unknown()))})}),wkr=p1.extend({method:R.literal("notifications/tools/list_changed")}),hxt=R.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),_kr=s0.extend({method:R.literal("logging/setLevel"),params:Eg.extend({level:hxt})}),Skr=p1.extend({method:R.literal("notifications/message"),params:UH.extend({level:hxt,logger:R.optional(R.string()),data:R.unknown()})}),Rkr=R.object({name:R.string().optional()}).passthrough(),kkr=R.object({hints:R.optional(R.array(Rkr)),costPriority:R.optional(R.number().min(0).max(1)),speedPriority:R.optional(R.number().min(0).max(1)),intelligencePriority:R.optional(R.number().min(0).max(1))}).passthrough(),Pkr=R.object({role:R.enum(["user","assistant"]),content:R.union([t4e,r4e,n4e])}).passthrough(),Dkr=s0.extend({method:R.literal("sampling/createMessage"),params:Eg.extend({messages:R.array(Pkr),systemPrompt:R.optional(R.string()),includeContext:R.optional(R.enum(["none","thisServer","allServers"])),temperature:R.optional(R.number()),maxTokens:R.number().int(),stopSequences:R.optional(R.array(R.string())),metadata:R.optional(R.object({}).passthrough()),modelPreferences:R.optional(kkr)})}),Bkr=bg.extend({model:R.string(),stopReason:R.optional(R.enum(["endTurn","stopSequence","maxTokens"]).or(R.string())),role:R.enum(["user","assistant"]),content:R.discriminatedUnion("type",[t4e,r4e,n4e])}),Nkr=R.object({type:R.literal("boolean"),title:R.optional(R.string()),description:R.optional(R.string()),default:R.optional(R.boolean())}).passthrough(),Mkr=R.object({type:R.literal("string"),title:R.optional(R.string()),description:R.optional(R.string()),minLength:R.optional(R.number()),maxLength:R.optional(R.number()),format:R.optional(R.enum(["email","uri","date","date-time"]))}).passthrough(),Lkr=R.object({type:R.enum(["number","integer"]),title:R.optional(R.string()),description:R.optional(R.string()),minimum:R.optional(R.number()),maximum:R.optional(R.number())}).passthrough(),Fkr=R.object({type:R.literal("string"),title:R.optional(R.string()),description:R.optional(R.string()),enum:R.array(R.string()),enumNames:R.optional(R.array(R.string()))}).passthrough(),Okr=R.union([Nkr,Mkr,Lkr,Fkr]),i4e=s0.extend({method:R.literal("elicitation/create"),params:Eg.extend({message:R.string(),requestedSchema:R.object({type:R.literal("object"),properties:R.record(R.string(),Okr),required:R.optional(R.array(R.string()))}).passthrough()})}),Qkr=bg.extend({action:R.enum(["accept","decline","cancel"]),content:R.optional(R.record(R.string(),R.unknown()))}),Ukr=R.object({type:R.literal("ref/resource"),uri:R.string()}).passthrough();var qkr=R.object({type:R.literal("ref/prompt"),name:R.string()}).passthrough(),Hkr=s0.extend({method:R.literal("completion/complete"),params:Eg.extend({ref:R.union([qkr,Ukr]),argument:R.object({name:R.string(),value:R.string()}).passthrough(),context:R.optional(R.object({arguments:R.optional(R.record(R.string(),R.string()))}))})}),Wkr=bg.extend({completion:R.object({values:R.array(R.string()).max(100),total:R.optional(R.number().int()),hasMore:R.optional(R.boolean())}).passthrough()}),$kr=R.object({uri:R.string().startsWith("file://"),name:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}).passthrough(),jkr=s0.extend({method:R.literal("roots/list")}),Gkr=bg.extend({roots:R.array($kr)}),Vkr=p1.extend({method:R.literal("notifications/roots/list_changed")}),b6o=R.union([axt,KRr,Hkr,_kr,hkr,pkr,tkr,nkr,okr,ckr,lkr,Tkr,bkr]),I6o=R.union([oxt,cxt,XRr,Vkr]),T6o=R.union([ixt,Bkr,Qkr,Gkr]),w6o=R.union([axt,Dkr,i4e,jkr]),_6o=R.union([oxt,cxt,Skr,ukr,akr,wkr,vkr]),S6o=R.union([ixt,JRr,Wkr,Ckr,mkr,rkr,ikr,skr,mxt,Ikr]),QH=class extends Error{constructor(r,n,o){super(`MCP error ${r}: ${n}`);this.code=r;this.data=o;this.name="McpError"}static{a(this,"McpError")}};f();async function m5(t,e,r,n,o){return await t.get(Lr).fetch(new URL(e).href,{method:r,headers:n,body:o})}a(m5,"fetchOauthServer");async function o4e(t){try{return await t.text()}catch{return t.statusText}}a(o4e,"getErrText");f();var gxt="/.well-known",s4e=`${gxt}/oauth-protected-resource`,Axt=`${gxt}/oauth-authorization-server`;function yxt(t){return typeof t!="object"||t===null?!1:t.resource!==void 0}a(yxt,"isAuthorizationProtectedResourceMetadata");function Cxt(t){return typeof t!="object"||t===null?!1:t.issuer!==void 0}a(Cxt,"isAuthorizationServerMetadata");function vxt(t){let e=t.split(" "),r=e[0],n={};return e.length>1&&e.slice(1).join(" ").split(",").forEach(s=>{let[c,l]=s.split("=").map(u=>u.trim().replace(/"/g,""));n[c]=l}),{scheme:r,params:n}}a(vxt,"parseWWWAuthenticateHeader");function xxt(t){let e=new URL(t.issuer);return{...t,authorization_endpoint:t.authorization_endpoint??new URL("/authorize",e).toString(),token_endpoint:t.token_endpoint??new URL("/token",e).toString(),registration_endpoint:t.registration_endpoint??new URL("/register",e).toString()}}a(xxt,"getMetadataWithDefaultValues");function Ext(t){return{issuer:t.toString(),authorization_endpoint:new URL("/authorize",t).toString(),token_endpoint:new URL("/token",t).toString(),registration_endpoint:new URL("/register",t).toString(),response_types_supported:["code","id_token","id_token token"]}}a(Ext,"getDefaultMetadataForUrl");function bxt(t){let e=new URL(t);if(!e.pathname.startsWith(s4e))throw new Error(`Invalid discovery URL: expected path to start with ${s4e}`);let r=e.pathname.substring(s4e.length),n=new URL(e.origin);return n.pathname=r||"/",n.toString()}a(bxt,"getResourceServerBaseUrlFromDiscoveryUrl");var a4e=class{static{a(this,"AuthMetadata")}},Aue=class extends a4e{static{a(this,"MCPAuthMetadata")}constructor(e){super(),this.ctx=e}async getMetadataFromOriginalUrl(e,r){let n=await this.getResourceMetadataChallenge(e),o,s,c,l=await this.getResourceMetadata(n,{url:e,headers:r??{}});l.resource&&(o=l.authorization_servers?.[0],s=l.scopes_supported,c=l);let u=new URL(e).origin,d={};o||(o=u,d=r??{});let p;try{let h=await this.getAuthorizationServerMetadata(o,d),g=xxt(h);return p={authorizationServer:o,serverMetadata:g,resourceMetadata:c},Vr.info(this.ctx,"authMetadata",p),p}catch(h){Vr.warn(this.ctx,`Error populating auth metadata: ${String(h)}`)}let m=Ext(new URL(u));return m.scopes_supported=s??m.scopes_supported??[],p={authorizationServer:o,serverMetadata:m,resourceMetadata:c},p}async getResourceMetadataChallenge(e){let r=await m5(this.ctx,e,"POST"),n;if(r.status===401&&r.headers.has("WWW-Authenticate")){let o=r.headers.get("WWW-Authenticate"),{scheme:s,params:c}=vxt(o);s==="Bearer"&&c.resource_metadata&&(n=c.resource_metadata)}return n}async getResourceMetadata(e,r){if(!e)return{resource:""};let n=new URL(e),o=new URL(r.url),s={};n.origin===o.origin&&(s=r.headers);let c=await m5(this.ctx,e,"GET",{...s,Accept:"application/json","MCP-Protocol-Version":fue});if(c.status!==200)throw new Error(`Failed to fetch resource metadata: ${c.status} ${await o4e(c)}`);let l=await c.json();if(yxt(l)){let u=bxt(e);if(l.resource!==u)throw new Error(`Protected Resource Metadata resource "${l.resource}" does not match MCP server resolved resource "${u}". The MCP server must follow OAuth spec https://datatracker.ietf.org/doc/html/rfc9728#PRConfigurationValidation`);return l}else throw new Error(`Invalid resource metadata: ${JSON.stringify(l)}`)}async getAuthorizationServerMetadata(e,r){let n=new URL(e),o=n.pathname==="/"?"":n.pathname,s=new URL(Axt,e).toString()+o,c=await m5(this.ctx,s,"GET",{...r,Accept:"application/json","MCP-Protocol-Version":fue});if(c.status!==200&&(c=await m5(this.ctx,bi(e,".well-known","openid-configuration"),"GET",{...r,Accept:"application/json","MCP-Protocol-Version":fue}),c.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${c.status} ${await o4e(c)}`);let l=await c.json();if(Cxt(l))return l;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(l)}`)}};f();f();f();var Txt=Ne(mi());var yue=class{constructor(){this.ongoingMcpElicitationCalls=!1;this.elicitationRequestType=new Txt.ProtocolRequestType("copilot/mcpElicitation")}static{a(this,"ElicitationHandler")}async handleRequest(e,r,n,o,s){if(this.ongoingMcpElicitationCalls)throw new QH(-32603,"Another MCP elicitation request is already in progress.");this.ongoingMcpElicitationCalls=!0;try{let c=n.params.message,l=n.params.requestedSchema;return Vr.info(e.ctx,`MCP server ${r} elicitation request received: ${c}`),await es(e.ctx,{message:`MCP server ${r} elicitation request received: ${c}`,server:r}),await e.ctx.get(e_).sendRequest(this.elicitationRequestType,{mcpServer:r,message:c,requestedSchema:l,conversationId:e.conversation.id.toString(),roundId:o??e.agentToolCalls.getRound(0).roundId,turnId:e.turn.id.toString(),toolCallId:s??e.agentToolCalls.getRound(0).toolCalls[0].id})}catch(c){let l=`Failed to process elicitation request: ${c instanceof Error?c.message:String(c)}`;throw Vr.error(e.ctx,l,c),await zl(e.ctx,{message:l,server:r}),new QH(-32603,l)}finally{this.ongoingMcpElicitationCalls=!1}}};f();f();f();var Ig=class{static{a(this,"MCPNotificationHandler")}constructor(e,r){this.ctx=e,this.serverName=r}};var HH=class extends Ig{static{a(this,"LoggingMessageNotificationHandler")}constructor(e,r){super(e,r)}handle(e){let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":Vr.info(this.ctx,`MCP server ${this.serverName} log:`,r),es(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;case"warning":Vr.warn(this.ctx,`MCP server ${this.serverName} log:`,r),JP(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;case"error":case"critical":case"alert":case"emergency":Vr.error(this.ctx,`MCP server ${this.serverName} log:`,r),zl(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;default:Vr.info(this.ctx,`MCP server ${this.serverName} log:`,r),es(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break}}};f();var WH=class extends Ig{static{a(this,"PromptListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){Vr.info(this.ctx,"Prompts list changed, refreshing tools..."),es(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.serverName}),this.emitter.emit(eP)}};f();var $H=class extends Ig{static{a(this,"ResourceListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){Vr.info(this.ctx,"Resource list changed, refreshing resources..."),es(this.ctx,{message:"Resource list changed, refreshing resources...",server:this.serverName}),this.emitter.emit(Dft)}};f();var jH=class extends Ig{static{a(this,"ResourceUpdatedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){Vr.info(this.ctx,`Resource updated for URI: ${e.params.uri}`),es(this.ctx,{message:`Resource updated: ${e.params.uri}`,server:this.serverName}),this.emitter.emit(Bft)}};f();var Cue=class{static{a(this,"MCPRequestHandler")}constructor(e,r){this.ctx=e,this.serverName=r}},GH=class extends Cue{static{a(this,"ListRootsRequestHandler")}constructor(e,r){super(e,r)}handle(e){Vr.info(this.ctx,`MCP server ${this.serverName} requested roots list`);let r=[];try{(this.ctx.get(Ar).getWorkspaceFolders()||[]).forEach(o=>{r.push(o)}),es(this.ctx,{message:`Requested roots list and found ${r.length} root(s).`,server:this.serverName})}catch(n){Vr.error(this.ctx,`Error getting workspace folders for MCP server ${this.serverName}:`,n),zl(this.ctx,{message:`Error getting workspace folders for MCP server ${this.serverName}: ${n instanceof Error?n.message:String(n)}`,server:this.serverName})}return{roots:r}}};f();var VH=class extends Ig{static{a(this,"ToolListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){Vr.info(this.ctx,"Tool list changed, refreshing tools..."),es(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.serverName}),this.emitter.emit(eP)}};f();f();var pL="2025-06-18";var wxt=[pL,"2025-03-26","2024-11-05","2024-10-07"],vue="2.0",_xt=R.union([R.string(),R.number().int()]),Sxt=R.string(),zkr=R.object({progressToken:R.optional(_xt)}).passthrough(),wg=R.object({_meta:R.optional(zkr)}).passthrough(),a0=R.object({method:R.string(),params:R.optional(wg)}),zH=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),m1=R.object({method:R.string(),params:R.optional(zH)}),_g=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),xue=R.union([R.string(),R.number().int()]),Rxt=R.object({jsonrpc:R.literal(vue),id:xue}).merge(a0).strict(),Eue=a(t=>Rxt.safeParse(t).success,"isJSONRPCRequest"),kxt=R.object({jsonrpc:R.literal(vue)}).merge(m1).strict(),Pxt=a(t=>kxt.safeParse(t).success,"isJSONRPCNotification"),Dxt=R.object({jsonrpc:R.literal(vue),id:xue,result:_g}).strict(),KH=a(t=>Dxt.safeParse(t).success,"isJSONRPCResponse"),Tg;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Tg||(Tg={}));var Bxt=R.object({jsonrpc:R.literal(vue),id:xue,error:R.object({code:R.number().int(),message:R.string(),data:R.optional(R.unknown())})}).strict(),Nxt=a(t=>Bxt.safeParse(t).success,"isJSONRPCError"),Y_=R.union([Rxt,kxt,Dxt,Bxt]),h5=_g.strict(),bue=m1.extend({method:R.literal("notifications/cancelled"),params:zH.extend({requestId:xue,reason:R.string().optional()})}),YH=R.object({name:R.string(),title:R.optional(R.string())}).passthrough(),Mxt=YH.extend({version:R.string()}),Kkr=R.object({experimental:R.optional(R.object({}).passthrough()),sampling:R.optional(R.object({}).passthrough()),elicitation:R.optional(R.object({}).passthrough()),roots:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),Ykr=a0.extend({method:R.literal("initialize"),params:wg.extend({protocolVersion:R.string(),capabilities:Kkr,clientInfo:Mxt})});var Jkr=R.object({experimental:R.optional(R.object({}).passthrough()),logging:R.optional(R.object({}).passthrough()),completions:R.optional(R.object({}).passthrough()),prompts:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough()),resources:R.optional(R.object({subscribe:R.optional(R.boolean()),listChanged:R.optional(R.boolean())}).passthrough()),tools:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),c4e=_g.extend({protocolVersion:R.string(),capabilities:Jkr,serverInfo:Mxt,instructions:R.optional(R.string())}),Lxt=m1.extend({method:R.literal("notifications/initialized")}),Fxt=a(t=>Lxt.safeParse(t).success,"isInitializedNotification"),Iue=a0.extend({method:R.literal("ping")}),Xkr=R.object({progress:R.number(),total:R.optional(R.number()),message:R.optional(R.string())}).passthrough(),Tue=m1.extend({method:R.literal("notifications/progress"),params:zH.merge(Xkr).extend({progressToken:_xt})}),wue=a0.extend({params:wg.extend({cursor:R.optional(Sxt)}).optional()}),_ue=_g.extend({nextCursor:R.optional(Sxt)}),Oxt=R.object({uri:R.string(),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}).passthrough(),Qxt=Oxt.extend({text:R.string()}),l4e=R.string().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),Uxt=Oxt.extend({blob:l4e}),qxt=YH.extend({uri:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}),Zkr=YH.extend({uriTemplate:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}),ePr=wue.extend({method:R.literal("resources/list")}),u4e=_ue.extend({resources:R.array(qxt)}),tPr=wue.extend({method:R.literal("resources/templates/list")}),d4e=_ue.extend({resourceTemplates:R.array(Zkr)}),rPr=a0.extend({method:R.literal("resources/read"),params:wg.extend({uri:R.string()})}),f4e=_g.extend({contents:R.array(R.union([Qxt,Uxt]))}),p4e=m1.extend({method:R.literal("notifications/resources/list_changed")}),nPr=a0.extend({method:R.literal("resources/subscribe"),params:wg.extend({uri:R.string()})}),iPr=a0.extend({method:R.literal("resources/unsubscribe"),params:wg.extend({uri:R.string()})}),m4e=m1.extend({method:R.literal("notifications/resources/updated"),params:zH.extend({uri:R.string()})}),oPr=R.object({name:R.string(),description:R.optional(R.string()),required:R.optional(R.boolean())}).passthrough(),sPr=YH.extend({description:R.optional(R.string()),arguments:R.optional(R.array(oPr)),_meta:R.optional(R.object({}).passthrough())}),aPr=wue.extend({method:R.literal("prompts/list")}),h4e=_ue.extend({prompts:R.array(sPr)}),cPr=a0.extend({method:R.literal("prompts/get"),params:wg.extend({name:R.string(),arguments:R.optional(R.record(R.string()))})}),g4e=R.object({type:R.literal("text"),text:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),A4e=R.object({type:R.literal("image"),data:l4e,mimeType:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),y4e=R.object({type:R.literal("audio"),data:l4e,mimeType:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),lPr=R.object({type:R.literal("resource"),resource:R.union([Qxt,Uxt]),_meta:R.optional(R.object({}).passthrough())}).passthrough(),uPr=qxt.extend({type:R.literal("resource_link")}),Hxt=R.union([g4e,A4e,y4e,uPr,lPr]),dPr=R.object({role:R.enum(["user","assistant"]),content:Hxt}).passthrough(),C4e=_g.extend({description:R.optional(R.string()),messages:R.array(dPr)}),v4e=m1.extend({method:R.literal("notifications/prompts/list_changed")}),fPr=R.object({title:R.optional(R.string()),readOnlyHint:R.optional(R.boolean()),destructiveHint:R.optional(R.boolean()),idempotentHint:R.optional(R.boolean()),openWorldHint:R.optional(R.boolean())}).passthrough(),pPr=YH.extend({description:R.optional(R.string()),inputSchema:R.object({type:R.literal("object"),properties:R.optional(R.object({}).passthrough()),required:R.optional(R.array(R.string()))}).passthrough(),outputSchema:R.optional(R.object({type:R.literal("object"),properties:R.optional(R.object({}).passthrough()),required:R.optional(R.array(R.string()))}).passthrough()),annotations:R.optional(fPr),_meta:R.optional(R.object({}).passthrough())}),mPr=wue.extend({method:R.literal("tools/list")}),x4e=_ue.extend({tools:R.array(pPr)}),mL=_g.extend({content:R.array(Hxt).default([]),structuredContent:R.object({}).passthrough().optional(),isError:R.optional(R.boolean())}),Y9o=mL.or(_g.extend({toolResult:R.unknown()})),hPr=a0.extend({method:R.literal("tools/call"),params:wg.extend({name:R.string(),arguments:R.optional(R.record(R.unknown()))})}),E4e=m1.extend({method:R.literal("notifications/tools/list_changed")}),Wxt=R.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),gPr=a0.extend({method:R.literal("logging/setLevel"),params:wg.extend({level:Wxt})}),b4e=m1.extend({method:R.literal("notifications/message"),params:zH.extend({level:Wxt,logger:R.optional(R.string()),data:R.unknown()})}),APr=R.object({name:R.string().optional()}).passthrough(),yPr=R.object({hints:R.optional(R.array(APr)),costPriority:R.optional(R.number().min(0).max(1)),speedPriority:R.optional(R.number().min(0).max(1)),intelligencePriority:R.optional(R.number().min(0).max(1))}).passthrough(),CPr=R.object({role:R.enum(["user","assistant"]),content:R.union([g4e,A4e,y4e])}).passthrough(),I4e=a0.extend({method:R.literal("sampling/createMessage"),params:wg.extend({messages:R.array(CPr),systemPrompt:R.optional(R.string()),includeContext:R.optional(R.enum(["none","thisServer","allServers"])),temperature:R.optional(R.number()),maxTokens:R.number().int(),stopSequences:R.optional(R.array(R.string())),metadata:R.optional(R.object({}).passthrough()),modelPreferences:R.optional(yPr)})}),vPr=_g.extend({model:R.string(),stopReason:R.optional(R.enum(["endTurn","stopSequence","maxTokens"]).or(R.string())),role:R.enum(["user","assistant"]),content:R.discriminatedUnion("type",[g4e,A4e,y4e])}),xPr=R.object({type:R.literal("boolean"),title:R.optional(R.string()),description:R.optional(R.string()),default:R.optional(R.boolean())}).passthrough(),EPr=R.object({type:R.literal("string"),title:R.optional(R.string()),description:R.optional(R.string()),minLength:R.optional(R.number()),maxLength:R.optional(R.number()),format:R.optional(R.enum(["email","uri","date","date-time"]))}).passthrough(),bPr=R.object({type:R.enum(["number","integer"]),title:R.optional(R.string()),description:R.optional(R.string()),minimum:R.optional(R.number()),maximum:R.optional(R.number())}).passthrough(),IPr=R.object({type:R.literal("string"),title:R.optional(R.string()),description:R.optional(R.string()),enum:R.array(R.string()),enumNames:R.optional(R.array(R.string()))}).passthrough(),TPr=R.union([xPr,EPr,bPr,IPr]),wPr=a0.extend({method:R.literal("elicitation/create"),params:wg.extend({message:R.string(),requestedSchema:R.object({type:R.literal("object"),properties:R.record(R.string(),TPr),required:R.optional(R.array(R.string()))}).passthrough()})}),_Pr=_g.extend({action:R.enum(["accept","decline","cancel"]),content:R.optional(R.record(R.string(),R.unknown()))}),SPr=R.object({type:R.literal("ref/resource"),uri:R.string()}).passthrough();var RPr=R.object({type:R.literal("ref/prompt"),name:R.string()}).passthrough(),kPr=a0.extend({method:R.literal("completion/complete"),params:wg.extend({ref:R.union([RPr,SPr]),argument:R.object({name:R.string(),value:R.string()}).passthrough(),context:R.optional(R.object({arguments:R.optional(R.record(R.string(),R.string()))}))})}),T4e=_g.extend({completion:R.object({values:R.array(R.string()).max(100),total:R.optional(R.number().int()),hasMore:R.optional(R.boolean())}).passthrough()}),PPr=R.object({uri:R.string().startsWith("file://"),name:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}).passthrough(),w4e=a0.extend({method:R.literal("roots/list")}),DPr=_g.extend({roots:R.array(PPr)}),BPr=m1.extend({method:R.literal("notifications/roots/list_changed")}),J9o=R.union([Iue,Ykr,kPr,gPr,cPr,aPr,ePr,tPr,rPr,nPr,iPr,hPr,mPr]),X9o=R.union([bue,Tue,Lxt,BPr]),Z9o=R.union([h5,vPr,_Pr,DPr]),eOo=R.union([Iue,I4e,wPr,w4e]),tOo=R.union([bue,Tue,b4e,m4e,p4e,E4e,v4e]),rOo=R.union([h5,c4e,T4e,C4e,h4e,u4e,d4e,f4e,mL,x4e]),Kl=class extends Error{static{a(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var Sue=class{constructor(){this.defaultTemperature=.7;this.ongoingMcpSamplingCalls=!1}static{a(this,"McpSamplingService")}async handleSamplingRequest(e,r,n,o,s,c){try{if(this.ongoingMcpSamplingCalls)throw new Kl(-32603,"Another MCP sampling request is already in progress.");this.ongoingMcpSamplingCalls=!0;let l=ly();Vr.info(e.ctx,`MCP server ${o} requested sampling:`,n.params),await es(e.ctx,{message:`Sampling request received from ${o}: ${JSON.stringify({messageCount:n.params.messages.length,systemPrompt:n.params.systemPrompt?"provided":"none",maxTokens:n.params.maxTokens,temperature:n.params.temperature})}`,server:o});let u=await e.ctx.get(t_).readMcpSamplingConfig({serverName:o});if(u.alwaysDeny)throw new Error("User has chosen to always deny MCP tools with this mcp server.");if(!u.alwaysAllow){let y=n.params.messages.filter(I=>I.role==="user"),v=y[y.length-1];if((await e.ctx.get(ig).invokeClientToolConfirmation(e,{name:o,title:`Allow MCP tools from "${o}" to make LLM requests?`,message:`The MCP server "${o}" has issued a request to make a language model call. Do you want to allow it to make requests during chat?`,input:v,conversationId:e.conversation.id,roundId:s??e.agentToolCalls.getRound(0).roundId,turnId:e.turn.id,toolCallId:c??e.agentToolCalls.getRound(0).toolCalls[0].id})).result==="dismiss")throw new va}let d=await this.getModelConfiguration(e.ctx,n,u),p=this.convertMCPMessagesToChatML(e.ctx,n.params.messages,n.params.systemPrompt),m=(await ZR(e.ctx,l,ly())).extendedBy({messageSource:"mcp.sampling"}),g=new An.CancellationTokenSource().token,A=await r.fetchResponse({modelConfiguration:d,messages:p,uiKind:"conversationPanel",llmInteraction:Yd.user("conversation-panel",l),temperature:n.params.temperature??this.defaultTemperature,stop:n.params.stopSequences},g,m);return this.processFetchResult(A,d.uiName)}catch(l){let u=`Failed to process sampling request: ${l instanceof Error?l.message:String(l)}`;throw Vr.error(e.ctx,u,l),await zl(e.ctx,{message:u,server:o}),new Kl(-32603,u)}finally{this.ongoingMcpSamplingCalls=!1}}convertMCPMessagesToChatML(e,r,n){let o=[];n&&o.push({role:"system",content:n});for(let s of r){let c;if(s.content.type==="text")c=s.content.text;else if(s.content.type==="image")c=[{type:"image_url",image_url:{url:atob(s.content.data)}}];else throw Vr.warn(e,`Unknown MCP content type: ${s.content.type}, defaulting to empty array`),new Error(`Unknown MCP content type: ${s.content.type}`);let l;switch(s.role){case"user":l="user";break;case"assistant":l="assistant";break;default:l="user",Vr.warn(e,`Unknown MCP role: ${s.role}, defaulting to user`)}o.push({role:l,content:c})}return o}processFetchResult(e,r){if(e.type!=="success"){let n=`Unexpected fetch result type: ${e.type}.`;throw"reason"in e&&(n+=` Reason: ${e.reason}`),new Error(n)}return{model:r,role:"assistant",content:{type:"text",text:e.value}}}async getModelConfiguration(e,r,n){let o=await this.getAvailableBYOKModels(e),s=[...await this.getAvailableModels(e),...o.map(d=>d.name)];if(!s)throw new Error("No available models found");let c=n.allowedModels&&n.allowedModels.length>0?s.filter(d=>n.allowedModels.some(p=>p.toLowerCase()===d.toLowerCase())):s;if(!c||c.length===0)throw new Error("No available models found");let l;r.params.modelPreferences?.hints&&(l=this.mapFindFirst(r.params.modelPreferences.hints,d=>c.find(p=>p.toLowerCase().includes(d.name.toLowerCase())))),l=l??c[0];let u=o.find(d=>d.name===l);return u?Pv(e,u.provider,l):await e.get(ya).getBestChatModelConfig([l])}async getAvailableModels(e){return(await e.get(od).getMetadata()).filter(n=>n.capabilities.type&&!mY.has(n.capabilities.family)&&n.capabilities.supports?.tool_calls&&(n.capabilities.limits?.max_prompt_tokens??!1)).map(n=>n.capabilities.family)}async getAvailableBYOKModels(e){return(await new ha(e.get(hi)).getAllModels()).filter(n=>n.capabilities?.toolCalling)}mapFindFirst(e,r){for(let n of e){let o=r(n);if(o!==void 0)return o}}};f();var _4e=/[^a-z0-9_-]/gi;var NPr=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function $xt(){let t={};for(let e of NPr){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}a($xt,"getDefaultEnvironment");async function jxt(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;Vr.warn(t,n),await JP(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(_4e.lastIndex=0,_4e.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;Vr.warn(t,n),await JP(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(_4e,"_")}else e._nameForModel=e.name;return e}a(jxt,"normalizeTool");var Rue=class{constructor(){this.seenPrefixes=new Set}static{a(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let o=2;this.seenPrefixes.has(n);o++)n=r+o;return this.seenPrefixes.add(n),n}};f();f();var MPr=6e4,kue=class{static{a(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(bue,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(Tue,r=>{this._onprogress(r)}),this.setRequestHandler(Iue,r=>({}))}_setupTimeout(e,r,n,o,s=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(o,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:s,onTimeout:o})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Kl(Tg.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,n,o;this._transport=e;let s=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{s?.(),this._onclose()};let c=(n=this.transport)===null||n===void 0?void 0:n.onerror;this._transport.onerror=u=>{c?.(u),this._onerror(u)};let l=(o=this._transport)===null||o===void 0?void 0:o.onmessage;this._transport.onmessage=(u,d)=>{l?.(u,d),KH(u)||Nxt(u)?this._onresponse(u):Eue(u)?this._onrequest(u,d):Pxt(u)?this._onnotification(u):this._onerror(new Error(`Unknown message type: ${JSON.stringify(u)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new Kl(Tg.ConnectionClosed,"Connection closed");for(let o of r.values())o(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(o=>this._onerror(new Error(`Uncaught error in notification handler: ${o}`)))}_onrequest(e,r){var n,o,s,c;let l=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(l===void 0){(o=this._transport)===null||o===void 0||o.send({jsonrpc:"2.0",id:e.id,error:{code:Tg.MethodNotFound,message:"Method not found"}}).catch(p=>this._onerror(new Error(`Failed to send an error response: ${p}`)));return}let u=new AbortController;this._requestHandlerAbortControllers.set(e.id,u);let d={signal:u.signal,sessionId:(s=this._transport)===null||s===void 0?void 0:s.sessionId,_meta:(c=e.params)===null||c===void 0?void 0:c._meta,sendNotification:a(p=>this.notification(p,{relatedRequestId:e.id}),"sendNotification"),sendRequest:a((p,m,h)=>this.request(p,m,{...h,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>l(e,d)).then(p=>{var m;if(!u.signal.aborted)return(m=this._transport)===null||m===void 0?void 0:m.send({result:p,jsonrpc:"2.0",id:e.id})},p=>{var m,h;if(!u.signal.aborted)return(m=this._transport)===null||m===void 0?void 0:m.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(p.code)?p.code:Tg.InternalError,message:(h=p.message)!==null&&h!==void 0?h:"Internal error"}})}).catch(p=>this._onerror(new Error(`Failed to send response: ${p}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,o=Number(r),s=this._progressHandlers.get(o);if(!s){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let c=this._responseHandlers.get(o),l=this._timeoutInfo.get(o);if(l&&c&&l.resetTimeoutOnProgress)try{this._resetTimeout(o)}catch(u){c(u);return}s(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),KH(e))n(e);else{let o=new Kl(e.error.code,e.error.message,e.error.data);n(o)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:o,resumptionToken:s,onresumptiontoken:c}=n??{};return new Promise((l,u)=>{var d,p,m,h,g,A;if(!this._transport){u(new Error("Not connected"));return}((d=this._options)===null||d===void 0?void 0:d.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(p=n?.signal)===null||p===void 0||p.throwIfAborted();let y=this._requestMessageId++,v={...e,jsonrpc:"2.0",id:y};n?.onprogress&&(this._progressHandlers.set(y,n.onprogress),v.params={...e.params,_meta:{...((m=e.params)===null||m===void 0?void 0:m._meta)||{},progressToken:y}});let b=a(k=>{var N;this._responseHandlers.delete(y),this._progressHandlers.delete(y),this._cleanupTimeout(y),(N=this._transport)===null||N===void 0||N.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:y,reason:String(k)}},{relatedRequestId:o,resumptionToken:s,onresumptiontoken:c}).catch(F=>this._onerror(new Error(`Failed to send cancellation: ${F}`))),u(k)},"cancel");this._responseHandlers.set(y,k=>{var N;if(!(!((N=n?.signal)===null||N===void 0)&&N.aborted)){if(k instanceof Error)return u(k);try{let F=r.parse(k.result);l(F)}catch(F){u(F)}}}),(h=n?.signal)===null||h===void 0||h.addEventListener("abort",()=>{var k;b((k=n?.signal)===null||k===void 0?void 0:k.reason)});let I=(g=n?.timeout)!==null&&g!==void 0?g:MPr,_=a(()=>b(new Kl(Tg.RequestTimeout,"Request timed out",{timeout:I})),"timeoutHandler");this._setupTimeout(y,I,n?.maxTotalTimeout,_,(A=n?.resetTimeoutOnProgress)!==null&&A!==void 0?A:!1),this._transport.send(v,{relatedRequestId:o,resumptionToken:s,onresumptiontoken:c}).catch(k=>{this._cleanupTimeout(y),u(k)})})}async notification(e,r){var n,o;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((o=(n=this._options)===null||n===void 0?void 0:n.debouncedNotificationMethods)!==null&&o!==void 0?o:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var u;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let d={...e,jsonrpc:"2.0"};(u=this._transport)===null||u===void 0||u.send(d,r).catch(p=>this._onerror(p))});return}let l={...e,jsonrpc:"2.0"};await this._transport.send(l,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(o,s)=>Promise.resolve(r(e.parse(o),s)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function Gxt(t,e){return Object.entries(e).reduce((r,[n,o])=>(o&&typeof o=="object"?r[n]=r[n]?{...r[n],...o}:o:r[n]=o,r),{...t})}a(Gxt,"mergeCapabilities");var zbt=Ne(Vbt(),1);var Kue=class extends kue{static{a(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{},this._ajv=new zbt.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Gxt(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:pL,capabilities:this._capabilities,clientInfo:this._clientInfo}},c4e,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!wxt.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,o,s,c;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((s=this._serverCapabilities)===null||s===void 0)&&s.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((c=this._serverCapabilities)===null||c===void 0)&&c.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},h5,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},T4e,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},h5,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},C4e,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},h4e,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},u4e,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},d4e,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},f4e,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},h5,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},h5,r)}async callTool(e,r=mL,n){let o=await this.request({method:"tools/call",params:e},r,n),s=this.getToolOutputValidator(e.name);if(s){if(!o.structuredContent&&!o.isError)throw new Kl(Tg.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(o.structuredContent)try{if(!s(o.structuredContent))throw new Kl(Tg.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(s.errors)}`)}catch(c){throw c instanceof Kl?c:new Kl(Tg.InvalidParams,`Failed to validate structured content: ${c instanceof Error?c.message:String(c)}`)}}return o}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let r of e)if(r.outputSchema)try{let n=this._ajv.compile(r.outputSchema);this._cachedToolOutputValidators.set(r.name,n)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,r){let n=await this.request({method:"tools/list",params:e},x4e,r);return this.cacheToolOutputSchemas(n.tools),n}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var Kbt=Ne(require("events"));var eS=class{constructor(e,r,n){this.transport=null;this.emitter=new Kbt.default;this.ongoingMcpToolCalls=[];this.isSamplingEnabled=!1;this.isElicitationEnabled=!1;this.ctx=e;let o=e.get(ss);this.isSamplingEnabled=o.getCapabilities().mcpSampling,this.isSamplingEnabled&&(this.samplingService=new Sue),this.isElicitationEnabled=o.getCapabilities().mcpElicitation,this.isElicitationEnabled&&(this.elicitationHandler=new yue),this.mcp=new Kue({name:r,version:n},{capabilities:{roots:{listChanged:!0},...this.isSamplingEnabled?{sampling:{}}:{},...this.isElicitationEnabled?{elicitation:{}}:{}}}),this.name=r}static{a(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw Vr.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw Vr.error(this.ctx,"Connection failed:",r),await zl(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async handleMCPOperationError(e,r,n,o){try{return await e()}catch(s){let c=s;if(c.code===-32601)return Vr.info(this.ctx,`${r} not supported by server ${this.name}:`,c.message),o??n;let l=`Failed to ${r} from server ${this.name}: ${c.message||String(c)}`;return Vr.error(this.ctx,l),await zl(this.ctx,{message:l,server:this.name}),n}}async getPromptsList(){return this.transport?await this.handleMCPOperationError(async()=>(await this.mcp.listPrompts()).prompts,"get prompts",[]):[]}async getResources(){return this.transport?await this.handleMCPOperationError(async()=>{let r=(await this.mcp.listResources()).resources,n=`Discovered ${r.length} resources`;return es(this.ctx,{message:n,server:this.name}),r},"get resources",[]):[]}async getResourceTemplates(){return this.transport?await this.handleMCPOperationError(async()=>{let r=(await this.mcp.listResourceTemplates()).resourceTemplates,n=`Discovered ${r.length} resource templates`;return es(this.ctx,{message:n,server:this.name}),r},"get resource templates",[]):[]}async readResource(e){return this.transport?await this.handleMCPOperationError(async()=>await this.mcp.readResource({uri:e}),`read resource ${e}`,null,{contents:[]}):null}async subscribeResource(e){this.transport&&await this.handleMCPOperationError(async()=>{await this.mcp.subscribeResource({uri:e})},`subscribe resource ${e}`,void 0)}async unsubscribeResource(e){this.transport&&await this.handleMCPOperationError(async()=>{await this.mcp.unsubscribeResource({uri:e})},`unsubscribe resource ${e}`,void 0)}async getToolsList(){return this.transport?await this.handleMCPOperationError(async()=>{let e=await this.mcp.listTools(),r=await Promise.all(e.tools.map(async o=>{let s={name:o.name,description:o.description,inputSchema:{...o.inputSchema||{},properties:o.inputSchema?.properties||{},type:o.inputSchema?.type||"object"},_status:"enabled",_nameForModel:o.name,annotations:o.annotations};return await jxt(this.ctx,s,this.name),s})),n=`Discovered ${e.tools.length} tools`;return es(this.ctx,{message:n,server:this.name}),r},"list tools",[]):[]}async callTool(e,r,n,o,s,c){let l=new Bi([],"error"),u=ly();this.ongoingMcpToolCalls.push({requestId:u,toolName:e,turnContext:o,roundId:s,toolCallId:c});let d=await this.handleMCPOperationError(async()=>{let p=new AbortController;n.onCancellationRequested(()=>{p.abort()});let m=await this.mcp.callTool({name:e,arguments:r,_meta:{progressToken:u}},mL,{onprogress:a(h=>{Vr.info(this.ctx,`${e} calling progress`,h),es(this.ctx,{message:`${e} calling progress:`+JSON.stringify(h),server:this.name})},"onprogress"),resetTimeoutOnProgress:!0,signal:p.signal});if(m&&typeof m=="object"){if(m.content)return this.formatToolResult(m);{let h=`Error calling tool ${e}: `+JSON.stringify(m);return Vr.error(this.ctx,h),await zl(this.ctx,{message:h,server:this.name,tool:e}),l.content.push(new Ri(h)),l}}else{let h=`Error calling tool ${e}: `+JSON.stringify(m);return Vr.error(this.ctx,h),await zl(this.ctx,{message:h,server:this.name,tool:e}),l.content.push(new Ri(h)),l}},`call tool ${e}`,l);return this.ongoingMcpToolCalls=this.ongoingMcpToolCalls.filter(p=>p.requestId!==u),d}async getPrompt(e,r){return(await this.mcp.getPrompt({name:e,arguments:r})).messages}async completePrompt(e,r,n,o){return(await this.mcp.complete({ref:{type:"ref/prompt",name:e},argument:{name:r,value:n},context:{arguments:o}})).completion.values}addListeners(){this.mcp.onclose=()=>{Vr.info(this.ctx,`MCP server ${this.name} connection closed.`),es(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{Vr.error(this.ctx,`MCP server ${this.name} error:`,e),zl(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(b4e,e=>new HH(this.ctx,this.name).handle(e)),this.mcp.setNotificationHandler(E4e,e=>new VH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setNotificationHandler(v4e,e=>new WH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setNotificationHandler(p4e,e=>new $H(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setNotificationHandler(m4e,e=>new jH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setRequestHandler(w4e,e=>(this.initRootsTracker(),new GH(this.ctx,this.name).handle(e))),this.isSamplingEnabled&&this.mcp.setRequestHandler(I4e,async(e,r)=>{if(!this.samplingService){let o="Sampling is not enabled.";throw Vr.error(this.ctx,o),new Kl(-32603,o)}if(this.ongoingMcpToolCalls.length===0){let o="No ongoing tool call context found for sampling request.";throw Vr.error(this.ctx,o),new Kl(-32603,o)}let n=this.ongoingMcpToolCalls[this.ongoingMcpToolCalls.length-1];return await this.samplingService.handleSamplingRequest(n.turnContext,new Bs(this.ctx),e,this.name,n.roundId,n.toolCallId)}),this.isElicitationEnabled&&this.mcp.setRequestHandler(i4e,async e=>{if(this.ongoingMcpToolCalls.length===0){let n="No ongoing tool call context found for elicitation request.";throw Vr.error(this.ctx,n),new Kl(-32603,n)}let r=this.ongoingMcpToolCalls[this.ongoingMcpToolCalls.length-1];return this.elicitationHandler.handleRequest(r.turnContext,this.name,e,r.roundId,r.toolCallId)})}formatToolResult(e){let r=new Bi([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Ri(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new AP({mimeType:n.mimeType,data:n.data}));return r}initRootsTracker(){let e=this.ctx.get(Ar);this.rootsTracker=e.onDidChangeWorkspaceFolders(r=>{this.mcp.sendRootsListChanged().then(()=>{this.rootsTracker?.dispose()})})}getEmitter(){return this.emitter}async cleanup(){this.transport&&(await this.mcp.close(),this.rootsTracker?.dispose())}};f();function m4r(t){return a(async(r,n)=>{let o=r instanceof URL?r.toString():r,s;if(n?.headers)if(n.headers instanceof Headers){s={};for(let[p,m]of n.headers.entries())s[p]=m}else if(Array.isArray(n.headers)){s={};for(let[p,m]of n.headers)s[p]=m}else s=n.headers;let c={method:n?.method||"GET",headers:s,body:n?.body,signal:n?.signal||void 0},l=await t.fetch(o,c),u=l.body(),d=null;if(u)d=new ReadableStream({start(p){let m=a(y=>{p.enqueue(new Uint8Array(y))},"onData"),h=a(()=>{p.close(),A()},"onEnd"),g=a(y=>{p.error(y),A()},"onError"),A=a(()=>{u.off("data",m),u.off("end",h),u.off("error",g)},"cleanup");u.on("data",m),u.on("end",h),u.on("error",g)},cancel(){u&&"destroy"in u&&typeof u.destroy=="function"&&u.destroy()}});else{let p=await l.text();d=new ReadableStream({start(m){m.enqueue(new TextEncoder().encode(p)),m.close()}})}return new globalThis.Response(d,{status:l.status,statusText:l.statusText,headers:new Headers(l.headers)})},"fetchLike")}a(m4r,"createFetchAdapter");function Yue(t,e){let r=t.get(Lr),n=m4r(r);return{...e,fetch:n}}a(Yue,"createConfigWithFetch");f();f();f();var Jue=class extends Error{static{a(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function X4e(t){}a(X4e,"noop");function Xue(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=X4e,onError:r=X4e,onRetry:n=X4e,onComment:o}=t,s="",c=!0,l,u="",d="";function p(y){let v=c?y.replace(/^\xEF\xBB\xBF/,""):y,[b,I]=h4r(`${s}${v}`);for(let _ of b)m(_);s=I,c=!1}a(p,"feed");function m(y){if(y===""){g();return}if(y.startsWith(":")){o&&o(y.slice(y.startsWith(": ")?2:1));return}let v=y.indexOf(":");if(v!==-1){let b=y.slice(0,v),I=y[v+1]===" "?2:1,_=y.slice(v+I);h(b,_,y);return}h(y,"",y)}a(m,"parseLine");function h(y,v,b){switch(y){case"event":d=v;break;case"data":u=`${u}${v}
`;break;case"id":l=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?n(parseInt(v,10)):r(new Jue(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:b}));break;default:r(new Jue(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:v,line:b}));break}}a(h,"processField");function g(){u.length>0&&e({id:l,event:d||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),l=void 0,u="",d=""}a(g,"dispatchEvent");function A(y={}){s&&y.consume&&m(s),c=!0,l=void 0,u="",d="",s=""}return a(A,"reset"),{feed:p,reset:A}}a(Xue,"createParser");function h4r(t){let e=[],r="",n=0;for(;n<t.length;){let o=t.indexOf("\r",n),s=t.indexOf(`
`,n),c=-1;if(o!==-1&&s!==-1?c=Math.min(o,s):o!==-1?c=o:s!==-1&&(c=s),c===-1){r=t.slice(n);break}else{let l=t.slice(n,c);e.push(l),n=c+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}a(h4r,"splitLines");var ede=class extends Event{static{a(this,"ErrorEvent")}constructor(e,r){var n,o;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(o=r?.message)!=null?o:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(Ybt(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(Ybt(this),r)}};function g4r(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}a(g4r,"syntaxError");function Z4e(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(Z4e).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${Z4e(t.cause)}`:t.message:`${t}`}a(Z4e,"flattenError");function Ybt(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}a(Ybt,"inspectableError");var Xbt=a(t=>{throw TypeError(t)},"__typeError"),aDe=a((t,e,r)=>e.has(t)||Xbt("Cannot "+r),"__accessCheck"),io=a((t,e,r)=>(aDe(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Yl=a((t,e,r)=>e.has(t)?Xbt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Wa=a((t,e,r,n)=>(aDe(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),eb=a((t,e,r)=>(aDe(t,e,"access private method"),r),"__privateMethod"),c0,y5,hL,Zue,tde,eW,yL,tW,tS,gL,CL,AL,XH,My,eDe,tDe,rDe,Jbt,nDe,iDe,ZH,oDe,sDe,C5=class extends EventTarget{static{a(this,"EventSource")}constructor(e,r){var n,o;super(),Yl(this,My),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,Yl(this,c0),Yl(this,y5),Yl(this,hL),Yl(this,Zue),Yl(this,tde),Yl(this,eW),Yl(this,yL),Yl(this,tW,null),Yl(this,tS),Yl(this,gL),Yl(this,CL,null),Yl(this,AL,null),Yl(this,XH,null),Yl(this,tDe,async s=>{var c;io(this,gL).reset();let{body:l,redirected:u,status:d,headers:p}=s;if(d===204){eb(this,My,ZH).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(u?Wa(this,hL,new URL(s.url)):Wa(this,hL,void 0),d!==200){eb(this,My,ZH).call(this,`Non-200 status code (${d})`,d);return}if(!(p.get("content-type")||"").startsWith("text/event-stream")){eb(this,My,ZH).call(this,'Invalid content type, expected "text/event-stream"',d);return}if(io(this,c0)===this.CLOSED)return;Wa(this,c0,this.OPEN);let m=new Event("open");if((c=io(this,XH))==null||c.call(this,m),this.dispatchEvent(m),typeof l!="object"||!l||!("getReader"in l)){eb(this,My,ZH).call(this,"Invalid response body, expected a web ReadableStream",d),this.close();return}let h=new TextDecoder,g=l.getReader(),A=!0;do{let{done:y,value:v}=await g.read();v&&io(this,gL).feed(h.decode(v,{stream:!y})),y&&(A=!1,io(this,gL).reset(),eb(this,My,oDe).call(this))}while(A)}),Yl(this,rDe,s=>{Wa(this,tS,void 0),!(s.name==="AbortError"||s.type==="aborted")&&eb(this,My,oDe).call(this,Z4e(s))}),Yl(this,nDe,s=>{typeof s.id=="string"&&Wa(this,tW,s.id);let c=new MessageEvent(s.event||"message",{data:s.data,origin:io(this,hL)?io(this,hL).origin:io(this,y5).origin,lastEventId:s.id||""});io(this,AL)&&(!s.event||s.event==="message")&&io(this,AL).call(this,c),this.dispatchEvent(c)}),Yl(this,iDe,s=>{Wa(this,eW,s)}),Yl(this,sDe,()=>{Wa(this,yL,void 0),io(this,c0)===this.CONNECTING&&eb(this,My,eDe).call(this)});try{if(e instanceof URL)Wa(this,y5,e);else if(typeof e=="string")Wa(this,y5,new URL(e,A4r()));else throw new Error("Invalid URL")}catch{throw g4r("An invalid or illegal string was specified")}Wa(this,gL,Xue({onEvent:io(this,nDe),onRetry:io(this,iDe)})),Wa(this,c0,this.CONNECTING),Wa(this,eW,3e3),Wa(this,tde,(n=r?.fetch)!=null?n:globalThis.fetch),Wa(this,Zue,(o=r?.withCredentials)!=null?o:!1),eb(this,My,eDe).call(this)}get readyState(){return io(this,c0)}get url(){return io(this,y5).href}get withCredentials(){return io(this,Zue)}get onerror(){return io(this,CL)}set onerror(e){Wa(this,CL,e)}get onmessage(){return io(this,AL)}set onmessage(e){Wa(this,AL,e)}get onopen(){return io(this,XH)}set onopen(e){Wa(this,XH,e)}addEventListener(e,r,n){let o=r;super.addEventListener(e,o,n)}removeEventListener(e,r,n){let o=r;super.removeEventListener(e,o,n)}close(){io(this,yL)&&clearTimeout(io(this,yL)),io(this,c0)!==this.CLOSED&&(io(this,tS)&&io(this,tS).abort(),Wa(this,c0,this.CLOSED),Wa(this,tS,void 0))}};c0=new WeakMap,y5=new WeakMap,hL=new WeakMap,Zue=new WeakMap,tde=new WeakMap,eW=new WeakMap,yL=new WeakMap,tW=new WeakMap,tS=new WeakMap,gL=new WeakMap,CL=new WeakMap,AL=new WeakMap,XH=new WeakMap,My=new WeakSet,eDe=a(function(){Wa(this,c0,this.CONNECTING),Wa(this,tS,new AbortController),io(this,tde)(io(this,y5),eb(this,My,Jbt).call(this)).then(io(this,tDe)).catch(io(this,rDe))},"connect_fn"),tDe=new WeakMap,rDe=new WeakMap,Jbt=a(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...io(this,tW)?{"Last-Event-ID":io(this,tW)}:void 0},cache:"no-store",signal:(t=io(this,tS))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),nDe=new WeakMap,iDe=new WeakMap,ZH=a(function(t,e){var r;io(this,c0)!==this.CLOSED&&Wa(this,c0,this.CLOSED);let n=new ede("error",{code:e,message:t});(r=io(this,CL))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),oDe=a(function(t,e){var r;if(io(this,c0)===this.CLOSED)return;Wa(this,c0,this.CONNECTING);let n=new ede("error",{code:e,message:t});(r=io(this,CL))==null||r.call(this,n),this.dispatchEvent(n),Wa(this,yL,setTimeout(io(this,sDe),io(this,eW)))},"scheduleReconnect_fn"),sDe=new WeakMap,C5.CONNECTING=0,C5.OPEN=1,C5.CLOSED=2;function A4r(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}a(A4r,"getBaseURL");f();f();var cDe;cDe=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function y4r(t){return(await cDe).getRandomValues(new Uint8Array(t))}a(y4r,"getRandomValues");async function C4r(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await y4r(t);for(let o=0;o<t;o++){let s=n[o]%e.length;r+=e[s]}return r}a(C4r,"random");async function v4r(t){return await C4r(t)}a(v4r,"generateVerifier");async function x4r(t){let e=await(await cDe).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}a(x4r,"generateChallenge");async function lDe(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await v4r(t),r=await x4r(e);return{code_verifier:e,code_challenge:r}}a(lDe,"pkceChallenge");f();var Zbt=R.object({resource:R.string().url(),authorization_servers:R.array(R.string().url()).optional(),jwks_uri:R.string().url().optional(),scopes_supported:R.array(R.string()).optional(),bearer_methods_supported:R.array(R.string()).optional(),resource_signing_alg_values_supported:R.array(R.string()).optional(),resource_name:R.string().optional(),resource_documentation:R.string().optional(),resource_policy_uri:R.string().url().optional(),resource_tos_uri:R.string().url().optional(),tls_client_certificate_bound_access_tokens:R.boolean().optional(),authorization_details_types_supported:R.array(R.string()).optional(),dpop_signing_alg_values_supported:R.array(R.string()).optional(),dpop_bound_access_tokens_required:R.boolean().optional()}).passthrough(),uDe=R.object({issuer:R.string(),authorization_endpoint:R.string(),token_endpoint:R.string(),registration_endpoint:R.string().optional(),scopes_supported:R.array(R.string()).optional(),response_types_supported:R.array(R.string()),response_modes_supported:R.array(R.string()).optional(),grant_types_supported:R.array(R.string()).optional(),token_endpoint_auth_methods_supported:R.array(R.string()).optional(),token_endpoint_auth_signing_alg_values_supported:R.array(R.string()).optional(),service_documentation:R.string().optional(),revocation_endpoint:R.string().optional(),revocation_endpoint_auth_methods_supported:R.array(R.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:R.array(R.string()).optional(),introspection_endpoint:R.string().optional(),introspection_endpoint_auth_methods_supported:R.array(R.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:R.array(R.string()).optional(),code_challenge_methods_supported:R.array(R.string()).optional()}).passthrough(),E4r=R.object({issuer:R.string(),authorization_endpoint:R.string(),token_endpoint:R.string(),userinfo_endpoint:R.string().optional(),jwks_uri:R.string(),registration_endpoint:R.string().optional(),scopes_supported:R.array(R.string()).optional(),response_types_supported:R.array(R.string()),response_modes_supported:R.array(R.string()).optional(),grant_types_supported:R.array(R.string()).optional(),acr_values_supported:R.array(R.string()).optional(),subject_types_supported:R.array(R.string()),id_token_signing_alg_values_supported:R.array(R.string()),id_token_encryption_alg_values_supported:R.array(R.string()).optional(),id_token_encryption_enc_values_supported:R.array(R.string()).optional(),userinfo_signing_alg_values_supported:R.array(R.string()).optional(),userinfo_encryption_alg_values_supported:R.array(R.string()).optional(),userinfo_encryption_enc_values_supported:R.array(R.string()).optional(),request_object_signing_alg_values_supported:R.array(R.string()).optional(),request_object_encryption_alg_values_supported:R.array(R.string()).optional(),request_object_encryption_enc_values_supported:R.array(R.string()).optional(),token_endpoint_auth_methods_supported:R.array(R.string()).optional(),token_endpoint_auth_signing_alg_values_supported:R.array(R.string()).optional(),display_values_supported:R.array(R.string()).optional(),claim_types_supported:R.array(R.string()).optional(),claims_supported:R.array(R.string()).optional(),service_documentation:R.string().optional(),claims_locales_supported:R.array(R.string()).optional(),ui_locales_supported:R.array(R.string()).optional(),claims_parameter_supported:R.boolean().optional(),request_parameter_supported:R.boolean().optional(),request_uri_parameter_supported:R.boolean().optional(),require_request_uri_registration:R.boolean().optional(),op_policy_uri:R.string().optional(),op_tos_uri:R.string().optional()}).passthrough(),eIt=E4r.merge(uDe.pick({code_challenge_methods_supported:!0})),dDe=R.object({access_token:R.string(),id_token:R.string().optional(),token_type:R.string(),expires_in:R.number().optional(),scope:R.string().optional(),refresh_token:R.string().optional()}).strip(),tIt=R.object({error:R.string(),error_description:R.string().optional(),error_uri:R.string().optional()}),b4r=R.object({redirect_uris:R.array(R.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:R.string().optional(),grant_types:R.array(R.string()).optional(),response_types:R.array(R.string()).optional(),client_name:R.string().optional(),client_uri:R.string().optional(),logo_uri:R.string().optional(),scope:R.string().optional(),contacts:R.array(R.string()).optional(),tos_uri:R.string().optional(),policy_uri:R.string().optional(),jwks_uri:R.string().optional(),jwks:R.any().optional(),software_id:R.string().optional(),software_version:R.string().optional(),software_statement:R.string().optional()}).strip(),I4r=R.object({client_id:R.string(),client_secret:R.string().optional(),client_id_issued_at:R.number().optional(),client_secret_expires_at:R.number().optional()}).strip(),rIt=b4r.merge(I4r),XUo=R.object({error:R.string(),error_description:R.string().optional()}).strip(),ZUo=R.object({token:R.string(),token_type_hint:R.string().optional()}).strip();f();function nIt(t){let e=typeof t=="string"?new URL(t):new URL(t.href);return e.hash="",e}a(nIt,"resourceUrlFromServerUrl");function iIt({requestedResource:t,configuredResource:e}){let r=typeof t=="string"?new URL(t):new URL(t.href),n=typeof e=="string"?new URL(e):new URL(e.href);if(r.origin!==n.origin||r.pathname.length<n.pathname.length)return!1;let o=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",s=n.pathname.endsWith("/")?n.pathname:n.pathname+"/";return o.startsWith(s)}a(iIt,"checkResourceAllowed");f();var _l=class extends Error{static{a(this,"OAuthError")}constructor(e,r){super(e),this.errorUri=r,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}},rW=class extends _l{static{a(this,"InvalidRequestError")}};rW.errorCode="invalid_request";var v5=class extends _l{static{a(this,"InvalidClientError")}};v5.errorCode="invalid_client";var x5=class extends _l{static{a(this,"InvalidGrantError")}};x5.errorCode="invalid_grant";var E5=class extends _l{static{a(this,"UnauthorizedClientError")}};E5.errorCode="unauthorized_client";var nW=class extends _l{static{a(this,"UnsupportedGrantTypeError")}};nW.errorCode="unsupported_grant_type";var iW=class extends _l{static{a(this,"InvalidScopeError")}};iW.errorCode="invalid_scope";var oW=class extends _l{static{a(this,"AccessDeniedError")}};oW.errorCode="access_denied";var tb=class extends _l{static{a(this,"ServerError")}};tb.errorCode="server_error";var sW=class extends _l{static{a(this,"TemporarilyUnavailableError")}};sW.errorCode="temporarily_unavailable";var aW=class extends _l{static{a(this,"UnsupportedResponseTypeError")}};aW.errorCode="unsupported_response_type";var cW=class extends _l{static{a(this,"UnsupportedTokenTypeError")}};cW.errorCode="unsupported_token_type";var lW=class extends _l{static{a(this,"InvalidTokenError")}};lW.errorCode="invalid_token";var uW=class extends _l{static{a(this,"MethodNotAllowedError")}};uW.errorCode="method_not_allowed";var dW=class extends _l{static{a(this,"TooManyRequestsError")}};dW.errorCode="too_many_requests";var fW=class extends _l{static{a(this,"InvalidClientMetadataError")}};fW.errorCode="invalid_client_metadata";var pW=class extends _l{static{a(this,"InsufficientScopeError")}};pW.errorCode="insufficient_scope";var oIt={[rW.errorCode]:rW,[v5.errorCode]:v5,[x5.errorCode]:x5,[E5.errorCode]:E5,[nW.errorCode]:nW,[iW.errorCode]:iW,[oW.errorCode]:oW,[tb.errorCode]:tb,[sW.errorCode]:sW,[aW.errorCode]:aW,[cW.errorCode]:cW,[lW.errorCode]:lW,[uW.errorCode]:uW,[dW.errorCode]:dW,[fW.errorCode]:fW,[pW.errorCode]:pW};var l0=class extends Error{static{a(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};function aIt(t,e){let r=t.client_secret!==void 0;return e.length===0?r?"client_secret_post":"none":r&&e.includes("client_secret_basic")?"client_secret_basic":r&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":r?"client_secret_post":"none"}a(aIt,"selectClientAuthMethod");function cIt(t,e,r,n){let{client_id:o,client_secret:s}=e;switch(t){case"client_secret_basic":T4r(o,s,r);return;case"client_secret_post":w4r(o,s,n);return;case"none":_4r(o,n);return;default:throw new Error(`Unsupported client authentication method: ${t}`)}}a(cIt,"applyClientAuthentication");function T4r(t,e,r){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");let n=btoa(`${t}:${e}`);r.set("Authorization",`Basic ${n}`)}a(T4r,"applyBasicAuth");function w4r(t,e,r){r.set("client_id",t),e&&r.set("client_secret",e)}a(w4r,"applyPostAuth");function _4r(t,e){e.set("client_id",t)}a(_4r,"applyPublicAuth");async function pDe(t){let e=t instanceof Response?t.status:void 0,r=t instanceof Response?await t.text():t;try{let n=tIt.parse(JSON.parse(r)),{error:o,error_description:s,error_uri:c}=n,l=oIt[o]||tb;return new l(s||"",c)}catch(n){let o=`${e?`HTTP ${e}: `:""}Invalid OAuth error response: ${n}. Raw body: ${r}`;return new tb(o)}}a(pDe,"parseErrorResponse");async function rS(t,e){var r,n;try{return await fDe(t,e)}catch(o){if(o instanceof v5||o instanceof E5)return await((r=t.invalidateCredentials)===null||r===void 0?void 0:r.call(t,"all")),await fDe(t,e);if(o instanceof x5)return await((n=t.invalidateCredentials)===null||n===void 0?void 0:n.call(t,"tokens")),await fDe(t,e);throw o}}a(rS,"auth");async function fDe(t,{serverUrl:e,authorizationCode:r,scope:n,resourceMetadataUrl:o,fetchFn:s}){let c,l;try{c=await R4r(e,{resourceMetadataUrl:o},s),c.authorization_servers&&c.authorization_servers.length>0&&(l=c.authorization_servers[0])}catch{}l||(l=e);let u=await S4r(e,t,c),d=await N4r(l,{fetchFn:s}),p=await Promise.resolve(t.clientInformation());if(!p){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let y=await O4r(l,{metadata:d,clientMetadata:t.clientMetadata});await t.saveClientInformation(y),p=y}if(r!==void 0){let y=await t.codeVerifier(),v=await L4r(l,{metadata:d,clientInformation:p,authorizationCode:r,codeVerifier:y,redirectUri:t.redirectUrl,resource:u,addClientAuthentication:t.addClientAuthentication,fetchFn:s});return await t.saveTokens(v),"AUTHORIZED"}let m=await t.tokens();if(m?.refresh_token)try{let y=await F4r(l,{metadata:d,clientInformation:p,refreshToken:m.refresh_token,resource:u,addClientAuthentication:t.addClientAuthentication});return await t.saveTokens(y),"AUTHORIZED"}catch(y){if(!(!(y instanceof _l)||y instanceof tb))throw y}let h=t.state?await t.state():void 0,{authorizationUrl:g,codeVerifier:A}=await M4r(l,{metadata:d,clientInformation:p,state:h,redirectUrl:t.redirectUrl,scope:n||t.clientMetadata.scope,resource:u});return await t.saveCodeVerifier(A),await t.redirectToAuthorization(g),"REDIRECT"}a(fDe,"authInternal");async function S4r(t,e,r){let n=nIt(t);if(e.validateResourceURL)return await e.validateResourceURL(n,r?.resource);if(r){if(!iIt({requestedResource:n,configuredResource:r.resource}))throw new Error(`Protected resource ${r.resource} does not match expected ${n} (or origin)`);return new URL(r.resource)}}a(S4r,"selectResourceURL");function mW(t){let e=t.headers.get("WWW-Authenticate");if(!e)return;let[r,n]=e.split(" ");if(r.toLowerCase()!=="bearer"||!n)return;let s=/resource_metadata="([^"]*)"/.exec(e);if(s)try{return new URL(s[1])}catch{return}}a(mW,"extractResourceMetadataUrl");async function R4r(t,e,r=fetch){let n=await D4r(t,"oauth-protected-resource",r,{protocolVersion:e?.protocolVersion,metadataUrl:e?.resourceMetadataUrl});if(!n||n.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!n.ok)throw new Error(`HTTP ${n.status} trying to load well-known OAuth protected resource metadata.`);return Zbt.parse(await n.json())}a(R4r,"discoverOAuthProtectedResourceMetadata");async function mDe(t,e,r=fetch){try{return await r(t,{headers:e})}catch(n){if(n instanceof TypeError)return e?mDe(t,void 0,r):void 0;throw n}}a(mDe,"fetchWithCorsRetry");function k4r(t,e="",r={}){return e.endsWith("/")&&(e=e.slice(0,-1)),r.prependPathname?`${e}/.well-known/${t}`:`/.well-known/${t}${e}`}a(k4r,"buildWellKnownPath");async function sIt(t,e,r=fetch){return await mDe(t,{"MCP-Protocol-Version":e},r)}a(sIt,"tryMetadataDiscovery");function P4r(t,e){return!t||t.status===404&&e!=="/"}a(P4r,"shouldAttemptFallback");async function D4r(t,e,r,n){var o,s;let c=new URL(t),l=(o=n?.protocolVersion)!==null&&o!==void 0?o:pL,u;if(n?.metadataUrl)u=new URL(n.metadataUrl);else{let p=k4r(e,c.pathname);u=new URL(p,(s=n?.metadataServerUrl)!==null&&s!==void 0?s:c),u.search=c.search}let d=await sIt(u,l,r);if(!n?.metadataUrl&&P4r(d,c.pathname)){let p=new URL(`/.well-known/${e}`,c);d=await sIt(p,l,r)}return d}a(D4r,"discoverMetadataWithFallback");function B4r(t){let e=typeof t=="string"?new URL(t):t,r=e.pathname!=="/",n=[];if(!r)return n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/openid-configuration",e.origin),type:"oidc"}),n;let o=e.pathname;return o.endsWith("/")&&(o=o.slice(0,-1)),n.push({url:new URL(`/.well-known/oauth-authorization-server${o}`,e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL(`/.well-known/openid-configuration${o}`,e.origin),type:"oidc"}),n.push({url:new URL(`${o}/.well-known/openid-configuration`,e.origin),type:"oidc"}),n}a(B4r,"buildDiscoveryUrls");async function N4r(t,{fetchFn:e=fetch,protocolVersion:r=pL}={}){var n;let o={"MCP-Protocol-Version":r},s=B4r(t);for(let{url:c,type:l}of s){let u=await mDe(c,o,e);if(!u)throw new Error(`CORS error trying to load ${l==="oauth"?"OAuth":"OpenID provider"} metadata from ${c}`);if(!u.ok){if(u.status>=400&&u.status<500)continue;throw new Error(`HTTP ${u.status} trying to load ${l==="oauth"?"OAuth":"OpenID provider"} metadata from ${c}`)}if(l==="oauth")return uDe.parse(await u.json());{let d=eIt.parse(await u.json());if(!(!((n=d.code_challenge_methods_supported)===null||n===void 0)&&n.includes("S256")))throw new Error(`Incompatible OIDC provider at ${c}: does not support S256 code challenge method required by MCP specification`);return d}}}a(N4r,"discoverAuthorizationServerMetadata");async function M4r(t,{metadata:e,clientInformation:r,redirectUrl:n,scope:o,state:s,resource:c}){let l="code",u="S256",d;if(e){if(d=new URL(e.authorization_endpoint),!e.response_types_supported.includes(l))throw new Error(`Incompatible auth server: does not support response type ${l}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(u))throw new Error(`Incompatible auth server: does not support code challenge method ${u}`)}else d=new URL("/authorize",t);let p=await lDe(),m=p.code_verifier,h=p.code_challenge;return d.searchParams.set("response_type",l),d.searchParams.set("client_id",r.client_id),d.searchParams.set("code_challenge",h),d.searchParams.set("code_challenge_method",u),d.searchParams.set("redirect_uri",String(n)),s&&d.searchParams.set("state",s),o&&d.searchParams.set("scope",o),o?.includes("offline_access")&&d.searchParams.append("prompt","consent"),c&&d.searchParams.set("resource",c.href),{authorizationUrl:d,codeVerifier:m}}a(M4r,"startAuthorization");async function L4r(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:o,redirectUri:s,resource:c,addClientAuthentication:l,fetchFn:u}){var d;let p="authorization_code",m=e?.token_endpoint?new URL(e.token_endpoint):new URL("/token",t);if(e?.grant_types_supported&&!e.grant_types_supported.includes(p))throw new Error(`Incompatible auth server: does not support grant type ${p}`);let h=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),g=new URLSearchParams({grant_type:p,code:n,code_verifier:o,redirect_uri:String(s)});if(l)l(h,g,t,e);else{let y=(d=e?.token_endpoint_auth_methods_supported)!==null&&d!==void 0?d:[],v=aIt(r,y);cIt(v,r,h,g)}c&&g.set("resource",c.href);let A=await(u??fetch)(m,{method:"POST",headers:h,body:g});if(!A.ok)throw await pDe(A);return dDe.parse(await A.json())}a(L4r,"exchangeAuthorization");async function F4r(t,{metadata:e,clientInformation:r,refreshToken:n,resource:o,addClientAuthentication:s,fetchFn:c}){var l;let u="refresh_token",d;if(e){if(d=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(u))throw new Error(`Incompatible auth server: does not support grant type ${u}`)}else d=new URL("/token",t);let p=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),m=new URLSearchParams({grant_type:u,refresh_token:n});if(s)s(p,m,t,e);else{let g=(l=e?.token_endpoint_auth_methods_supported)!==null&&l!==void 0?l:[],A=aIt(r,g);cIt(A,r,p,m)}o&&m.set("resource",o.href);let h=await(c??fetch)(d,{method:"POST",headers:p,body:m});if(!h.ok)throw await pDe(h);return dDe.parse({refresh_token:n,...await h.json()})}a(F4r,"refreshAuthorization");async function O4r(t,{metadata:e,clientMetadata:r,fetchFn:n}){let o;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");o=new URL(e.registration_endpoint)}else o=new URL("/register",t);let s=await(n??fetch)(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw await pDe(s);return rIt.parse(await s.json())}a(O4r,"registerClient");var hDe=class extends Error{static{a(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},rde=class{static{a(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._resourceMetadataUrl=void 0,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch}async _authThenStart(){var e;if(!this._authProvider)throw new l0("No auth provider");let r;try{r=await rS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new l0;return await this._startOrAuth()}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}_startOrAuth(){var e,r,n;let o=(n=(r=(e=this===null||this===void 0?void 0:this._eventSourceInit)===null||e===void 0?void 0:e.fetch)!==null&&r!==void 0?r:this._fetch)!==null&&n!==void 0?n:fetch;return new Promise((s,c)=>{this._eventSource=new C5(this._url.href,{...this._eventSourceInit,fetch:a(async(l,u)=>{let d=await this._commonHeaders();d.set("Accept","text/event-stream");let p=await o(l,{...u,headers:d});return p.status===401&&p.headers.has("www-authenticate")&&(this._resourceMetadataUrl=mW(p)),p},"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=l=>{var u;if(l.code===401&&this._authProvider){this._authThenStart().then(s,c);return}let d=new hDe(l.code,l.message,l);c(d),(u=this.onerror)===null||u===void 0||u.call(this,d)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",l=>{var u;let d=l;try{if(this._endpoint=new URL(d.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(p){c(p),(u=this.onerror)===null||u===void 0||u.call(this,p),this.close();return}s()}),this._eventSource.onmessage=l=>{var u,d;let p=l,m;try{m=Y_.parse(JSON.parse(p.data))}catch(h){(u=this.onerror)===null||u===void 0||u.call(this,h);return}(d=this.onmessage)===null||d===void 0||d.call(this,m)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new l0("No auth provider");if(await rS(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new l0("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,o;if(!this._endpoint)throw new Error("Not connected");try{let s=await this._commonHeaders();s.set("content-type","application/json");let c={...this._requestInit,method:"POST",headers:s,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},l=await((n=this._fetch)!==null&&n!==void 0?n:fetch)(this._endpoint,c);if(!l.ok){if(l.status===401&&this._authProvider){if(this._resourceMetadataUrl=mW(l),await rS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new l0;return this.send(e)}let u=await l.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${l.status}): ${u}`)}}catch(s){throw(o=this.onerror)===null||o===void 0||o.call(this,s),s}}setProtocolVersion(e){this._protocolVersion=e}};var nde=class extends eS{constructor(r,n,o){super(r,n,o);this.transport=null}static{a(this,"MCPSSEServer")}initTransport(r){let n=Yue(this.ctx,r);return new rde(new URL(r.url),n)}};f();f();var XIt=Ne(YIt(),1),hW=Ne(require("node:process"),1),ZIt=require("node:stream");f();var ode=class{static{a(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),dDr(r)}clear(){this._buffer=void 0}};function dDr(t){return Y_.parse(JSON.parse(t))}a(dDr,"deserializeMessage");function JIt(t){return JSON.stringify(t)+`
`}a(JIt,"serializeMessage");var fDr=hW.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function pDr(){let t={};for(let e of fDr){let r=hW.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}a(pDr,"getDefaultEnvironment");var sde=class{static{a(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new ode,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new ZIt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,o,s,c,l;this._process=(0,XIt.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:{...pDr(),...this._serverParams.env},stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:hW.default.platform==="win32"&&mDr(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,p;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}r(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(s=this._process.stdin)===null||s===void 0||s.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(c=this._process.stdout)===null||c===void 0||c.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(l=this._process.stdout)===null||l===void 0||l.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}get pid(){var e,r;return(r=(e=this._process)===null||e===void 0?void 0:e.pid)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let o=JIt(e);this._process.stdin.write(o)?r():this._process.stdin.once("drain",r)})}};function mDr(){return"type"in hW.default}a(mDr,"isElectron");var TDe=require("child_process"),wDe=require("util");var ade=class extends eS{constructor(r,n,o){super(r,n,o);this.transport=null}static{a(this,"MCPStdioServer")}initTransport(r){return r.env={...$xt(),...r.env||{}},r.stderr="pipe",new sde(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{JP(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}async cleanup(){if(this.transport){if(process.platform==="win32"){let r=null;"pid"in this.transport&&typeof this.transport.pid=="number"&&(r=this.transport.pid),r&&await this.isUvProcess(r)&&await this.forceKillWindowsProcess(r)}await this.mcp.close()}}async isUvProcess(r){try{let s=(await(0,wDe.promisify)(TDe.exec)(`tasklist /fi "PID eq ${r}" /fo csv /nh`,{timeout:5e3})).stdout.trim().split(`
`);if(s.length>0){let l=s[0].split(",");if(l.length>0){let u=l[0].replace(/"/g,"").toLowerCase();return u==="uv.exe"||u==="uv"}}return!1}catch(n){return Vr.debug(this.ctx,`Failed to get process info for PID ${r}:`,n),!1}}async forceKillWindowsProcess(r){try{let n=(0,wDe.promisify)(TDe.exec);Vr.info(this.ctx,`Force killing Windows process with PID ${r} for MCP server ${this.name}`),es(this.ctx,{message:`Force killing Windows process with PID ${r}`,server:this.name}),await n(`taskkill /pid ${r} /t /f`,{timeout:1e4}),Vr.info(this.ctx,`Successfully force killed process ${r}`)}catch(n){Vr.debug(this.ctx,`Failed to kill process ${r} (process may not exist):`,n),zl(this.ctx,{message:`Failed to kill process ${r} (process may not exist): ${n instanceof Error?n.message:String(n)}`,server:this.name})}}};f();f();f();var cde=class extends TransformStream{static{a(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let o;super({start(s){o=Xue({onEvent:a(c=>{s.enqueue(c)},"onEvent"),onError(c){e==="terminate"?s.error(c):typeof e=="function"&&e(c)},onRetry:r,onComment:n})},transform(s){o.feed(s)}})}};var hDr={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},gW=class extends Error{static{a(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},lde=class{static{a(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:hDr}async _authThenStart(){var e;if(!this._authProvider)throw new l0("No auth provider");let r;try{r=await rS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new l0;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let o=await this._authProvider.tokens();o&&(r.Authorization=`Bearer ${o.access_token}`)}this._sessionId&&(r["mcp-session-id"]=this._sessionId),this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion);let n=this._normalizeHeaders((e=this._requestInit)===null||e===void 0?void 0:e.headers);return new Headers({...r,...n})}async _startOrAuthSse(e){var r,n,o;let{resumptionToken:s}=e;try{let c=await this._commonHeaders();c.set("Accept","text/event-stream"),s&&c.set("last-event-id",s);let l=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,{method:"GET",headers:c,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!l.ok){if(l.status===401&&this._authProvider)return await this._authThenStart();if(l.status===405)return;throw new gW(l.status,`Failed to open SSE stream: ${l.statusText}`)}this._handleSseStream(l.body,e,!0)}catch(c){throw(o=this.onerror)===null||o===void 0||o.call(this,c),c}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,o=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),o)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}_scheduleReconnection(e,r=0){var n;let o=this._reconnectionOptions.maxRetries;if(o>0&&r>=o){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${o}) exceeded.`));return}let s=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(c=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,new Error(`Failed to reconnect SSE stream: ${c instanceof Error?c.message:String(c)}`)),this._scheduleReconnection(e,r+1)})},s)}_handleSseStream(e,r,n){if(!e)return;let{onresumptiontoken:o,replayMessageId:s}=r,c;a(async()=>{var u,d,p,m;try{let h=e.pipeThrough(new TextDecoderStream).pipeThrough(new cde).getReader();for(;;){let{value:g,done:A}=await h.read();if(A)break;if(g.id&&(c=g.id,o?.(g.id)),!g.event||g.event==="message")try{let y=Y_.parse(JSON.parse(g.data));s!==void 0&&KH(y)&&(y.id=s),(u=this.onmessage)===null||u===void 0||u.call(this,y)}catch(y){(d=this.onerror)===null||d===void 0||d.call(this,y)}}}catch(h){if((p=this.onerror)===null||p===void 0||p.call(this,new Error(`SSE stream disconnected: ${h}`)),n&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:c,onresumptiontoken:o,replayMessageId:s},0)}catch(g){(m=this.onerror)===null||m===void 0||m.call(this,new Error(`Failed to reconnect: ${g instanceof Error?g.message:String(g)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new l0("No auth provider");if(await rS(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new l0("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,o,s,c;try{let{resumptionToken:l,onresumptiontoken:u}=r||{};if(l){this._startOrAuthSse({resumptionToken:l,replayMessageId:Eue(e)?e.id:void 0}).catch(v=>{var b;return(b=this.onerror)===null||b===void 0?void 0:b.call(this,v)});return}let d=await this._commonHeaders();d.set("content-type","application/json"),d.set("accept","application/json, text/event-stream");let p={...this._requestInit,method:"POST",headers:d,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},m=await((o=this._fetch)!==null&&o!==void 0?o:fetch)(this._url,p),h=m.headers.get("mcp-session-id");if(h&&(this._sessionId=h),!m.ok){if(m.status===401&&this._authProvider){if(this._resourceMetadataUrl=mW(m),await rS(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new l0;return this.send(e)}let v=await m.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${m.status}): ${v}`)}if(m.status===202){Fxt(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(v=>{var b;return(b=this.onerror)===null||b===void 0?void 0:b.call(this,v)});return}let A=(Array.isArray(e)?e:[e]).filter(v=>"method"in v&&"id"in v&&v.id!==void 0).length>0,y=m.headers.get("content-type");if(A)if(y?.includes("text/event-stream"))this._handleSseStream(m.body,{onresumptiontoken:u},!1);else if(y?.includes("application/json")){let v=await m.json(),b=Array.isArray(v)?v.map(I=>Y_.parse(I)):[Y_.parse(v)];for(let I of b)(s=this.onmessage)===null||s===void 0||s.call(this,I)}else throw new gW(-1,`Unexpected content type: ${y}`)}catch(l){throw(c=this.onerror)===null||c===void 0||c.call(this,l),l}}get sessionId(){return this._sessionId}async terminateSession(){var e,r,n;if(this._sessionId)try{let o=await this._commonHeaders(),s={...this._requestInit,method:"DELETE",headers:o,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},c=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,s);if(!c.ok&&c.status!==405)throw new gW(c.status,`Failed to terminate session: ${c.statusText}`);this._sessionId=void 0}catch(o){throw(n=this.onerror)===null||n===void 0||n.call(this,o),o}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}};var ude=class extends eS{constructor(r,n,o){super(r,n,o);this.transport=null}static{a(this,"MCPStreamableServer")}initTransport(r){let n=Yue(this.ctx,r);return new lde(new URL(r.url),n)}};f();var dde=class extends v_{static{a(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(e,r,r.input,n)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new va;let o={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(ig).invokeClientToolConfirmation(e,o)}catch(s){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(s)}`)}}};var hde=Ne(qc());f();f();sY();var EL=class extends Ju{constructor(r,n=new _De){super();this.ctx=r;this.fallback=n}static{a(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(Ir);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await Promise.race([n.connection.window.showDocument({uri:r,external:!0}),new Promise((s,c)=>setTimeout(()=>c(new Error("window/showDocument timed out")),15e3))])).success))return this.fallback.open(r)}},_De=class extends Ju{static{a(this,"SpawnUrlOpener")}async open(e){await vO(e)}};f();var eTt=require("crypto"),tTt=Ne(require("http"));var fde=class{constructor(e){this.nonce=(0,eTt.randomBytes)(16).toString("base64");if(!e)throw new Error("startingRedirect must be defined");this._startingRedirect=new URL(e);let r;this._resultPromise=new Promise((o,s)=>r={resolve:o,reject:s});let n=`&app_name=${encodeURIComponent("GitHub Copilot")}`;this._server=tTt.createServer((o,s)=>{let c=new URL(o.url,`http://${o.headers.host}`);switch(c.pathname){case"/signin":{(c.searchParams.get("nonce")??"").replace(/ /g,"+")!==this.nonce&&(s.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),s.end()),this._startingRedirect.searchParams.set("redirect_uri",`http://127.0.0.1:${this.port}/callback`),s.writeHead(302,{location:this._startingRedirect.toString()}),s.end();break}case"/callback":{let l=c.searchParams.get("code")??void 0,u=c.searchParams.get("state")??void 0,d=new URL(u||"").searchParams.get("nonce")??void 0;if(!l||!u||!d){s.writeHead(400),s.end();return}if(this.state!==u)throw s.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}${n}`}),s.end(),new Error("State does not match.");if(this.nonce!==d)throw s.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),s.end(),new Error("Nonce does not match.");r.resolve({code:l,state:u}),s.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),s.end(q5e);break}default:s.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),s.end(q5e)}})}static{a(this,"LoopbackAuthServer")}set state(e){e?this._startingRedirect.searchParams.set("state",e):this._startingRedirect.searchParams.delete("state")}get state(){return this._startingRedirect.searchParams.get("state")??void 0}start(){return new Promise((e,r)=>{if(this._server.listening)throw new Error("Server is already started");let n=setTimeout(()=>{r(new Error("Timeout waiting for port"))},5e3);this._server.on("listening",()=>{let o=this._server.address();if(typeof o=="string")this.port=parseInt(o);else if(o instanceof Object)this.port=o.port;else throw new Error("Unable to determine port");clearTimeout(n),this.state=`http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`,e(this.port)}),this._server.on("error",o=>{r(new Error(`Error listening to server: ${o}`))}),this._server.on("close",()=>{r(new Error("Closed"))}),this._server.listen(0,"127.0.0.1")})}stop(){return new Promise((e,r)=>{if(!this._server.listening)throw new Error("Server is not started");this._server.close(n=>{n?r(n):e()})})}waitForOAuthResponse(){return this._resultPromise}};var gDr="Timed out",SDe=class{static{a(this,"CodeFlow")}},pde=class extends SDe{static{a(this,"CLSCodeFlow")}constructor(e){super(),this.ctx=e}async auth(e,r,n){let o=S1t(e);if(!o)return"";let{client_id:s,client_secret:c}=o,l=new URLSearchParams([["client_id",s],["scope",(n?.scopes_supported??[]).join(" ")],["prompt","select_account"]]),u=r.authorization_endpoint+"?"+l.toString(),d=new fde(u),p=await d.start(),m=`http://127.0.0.1:${p}/signin?nonce=${encodeURIComponent(d.nonce)}`;pn.info(this.ctx,"auth url: ",m),await new EL(this.ctx).open(m);let h;try{h=(await Promise.race([d.waitForOAuthResponse(),new Promise((y,v)=>setTimeout(()=>v(new Error(gDr)),3e5))])).code}finally{setTimeout(()=>{d.stop()},5e3)}return await this.exchangeCodeForToken({endpointUri:r.token_endpoint,redirectUri:`http://127.0.0.1:${p}/callback`,code:h,client_id:s,client_secret:c})}async exchangeCodeForToken({endpointUri:e,redirectUri:r,code:n,client_id:o,client_secret:s}){let c=new URLSearchParams([["code",n],["client_id",o],["redirect_uri",r],["client_secret",s]]),l=await m5(this.ctx,e,"POST",{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},c.toString());if(l.ok)return(await l.json()).access_token;{let u=await l.text(),d=new Error(u);throw d.name="GitHubTokenExchangeError",d}}};var mde=class t extends jf{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new Rue;this.isMcpEnabled=!1;this.storedMCPServersConfig={};this.ctx=r,lc(this.ctx,async n=>{this.isMcpEnabled=this.isTokenMcpEnabled(n),this.isMcpEnabled?await this.updateMCPServers(this.storedMCPServersConfig):(Vr.info(this.ctx,"MCP is disabled, clearing all servers and tools"),this.clearAllServers())})}static{a(this,"CLSMCPManager")}static{this.toolsNotificationType=new hde.ProtocolNotificationType("copilot/mcpTools")}static{this.oauthRequestType=new hde.ProtocolRequestType("copilot/mcpOAuth")}isTokenMcpEnabled(r){if(!r)return!0;try{return r.getTokenValue("mcp")!=="0"}catch(n){return Vr.warn(this.ctx,`Error reading MCP value from token: ${n instanceof Error?n.message:String(n)}`),!0}}async updateMCPServers(r){if(this.storedMCPServersConfig=r,!!this.isMcpEnabled){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}}getAllTools(){return this.isMcpEnabled?this.cachedMCPServerTools:[]}updateMCPToolStatus(r,n,o){if(!this.isMcpEnabled){Vr.warn(this.ctx,`MCP is disabled, cannot update tool status for ${r}.${n}`);return}let s=this.getTool(r,n),c=this.getServerPrefix(r);if(!s){Vr.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}s._status=o,o==="enabled"?this.ctx.get(El).getToolById(`${r}.${n}`)||this.registerTool(r,c,s):this.unregisterTool(r,n)}async callTool(r,n,o,s,c,l,u){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot call tool ${r}.${n}`);let d=this.MCPServersMap.get(r);if(d){let{status:p,server:m}=d;if(p==="running"&&m)return await m.callTool(n,o,s,c,l,u)}throw new Error(`MCP server ${r} is not running`)}async getPrompt(r,n,o){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot get prompt ${r}.${n}`);let s=this.MCPServersMap.get(r);if(s){let{status:c,server:l}=s;if(c==="running"&&l)return await l.getPrompt(n,o)}throw new Error(`MCP server ${r} is not running`)}async completePrompt(r,n,o,s,c){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot complete prompt ${r}.${n}`);let l=this.MCPServersMap.get(r);if(l){let{status:u,server:d}=l;if(u==="running"&&d)return await d.completePrompt(n,o,s,c)}throw new Error(`MCP server ${r} is not running`)}async readResource(r,n){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot read resource from ${r}: ${n}`);let o=this.MCPServersMap.get(r);if(o){let{status:s,server:c}=o;if(s==="running"&&c)return await c.readResource(n)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let s=this.getAllTools().find(c=>c.name===r)?.tools;return!s||s.length===0?null:s.find(c=>c.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let o=this.MCPServersMap.get(n);try{if(o.status==="running"&&o.server){let s=await o.server.getToolsList();s.forEach(d=>{let p=d.name,m=this.getToolStatus(n,p);m&&(d._status=m)});let c=await o.server.getResources(),l=await o.server.getResourceTemplates(),u=await o.server.getPromptsList();r.push({name:n,prefix:this.getServerPrefix(n),status:o.status,tools:s,resources:c,resourceTemplates:l,prompts:u})}else o.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:o.status,tools:[],resources:[],resourceTemplates:[],prompts:[],error:o.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:o.status,tools:[],resources:[],resourceTemplates:[],prompts:[]})}catch(s){let c=`Failed to get tools list for MCP server ${n}.`+(s instanceof Error?` message: ${s.message} stack: ${s.stack}`:String(s));Vr.error(this.ctx,c),await zl(this.ctx,{message:c,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:o.status,tools:[],resources:[],resourceTemplates:[],prompts:[],error:c})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let o=this.getTool(r,n);return o?o._status:null}getServerPrefix(r){let o=this.getAllTools().find(s=>s.name===r);return o?o.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await es(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new nde(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new ude(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new ade(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(eP,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await es(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(Vr.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let s=/Error POSTing to endpoint \(HTTP (\d+)\):/,c=n.message.match(s);if(c&&"url"in r&&r.type!=="sse"&&c[1]!=="401"&&Number(c[1])>=400&&Number(c[1])<500){let l=`${c[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;Vr.info(this.ctx,l),es(this.ctx,{message:l,server:r.name});let u={...r,type:"sse"};return await this.addServer(u)}else if(c&&"url"in r&&r.type!=="sse"&&c[1]==="401"){let l=await this.getAuthMetadata(r),u=await this.getToken(r.url,l.authorizationServer,l.serverMetadata,l.resourceMetadata);if(!u){Vr.error(this.ctx,`Failed to get token for server: ${r.name}`);return}let d={...r,requestInit:{...r.requestInit??{},headers:{...r.requestInit?.headers??{},Authorization:`Bearer ${u}`}}};return await this.addServer(d)}}let o=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await zl(this.ctx,{message:o,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:o}),this.ctx.get(cc).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(Ir).connection.sendNotification(t.toolsNotificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:o,tools:s}=r;for(let c of s)this.registerTool(n,o,c)}}registerTool(r,n,o){let{name:s,description:c,inputSchema:l,_status:u,_nameForModel:d,annotations:p}=o;Vr.debug(this.ctx,"register MCP Tool:",{...o}),u!=="disabled"&&this.ctx.get(El).registerTool(new dde({serverName:r,serverNamePrefix:n,name:d,displayName:s,description:c||"",displayDescription:c||"",inputSchema:l,annotations:p},(m,h,g,A)=>(Vr.debug(this.ctx,"copilot MCP Invoker:",r,s,g),this.callTool(r,s,g,A,m,h.roundId,h.toolCallId?.toString()))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:o}=r;for(let s of o){let{name:c}=s;this.unregisterTool(n,c)}}}unregisterTool(r,n){this.ctx.get(El).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:o}=this.MCPServersMap.get(r);n==="running"&&o&&(await es(this.ctx,{message:`Stopping server ${r}`,server:r}),o.getEmitter().removeAllListeners(eP),await o.cleanup())}this.MCPServersMap.clear()}async getAuthMetadata(r){return await new Aue(this.ctx).getMetadataFromOriginalUrl(r.url,r.requestInit?.headers)}async getToken(r,n,o,s){let c=await this.ctx.get(Ey).getOrActivateProviderIdForServer(n);if(!c){let p=this.ctx.get(Ey).createAuthenticationProvider(n);if(!p){Vr.error(this.ctx,`No authentication provider found for server: ${n}`),await es(this.ctx,{message:`No authentication provider found for authserver: ${n}`,server:r});return}c=p.id}let l=s?.scopes_supported||o.scopes_supported||[],u=await this.ctx.get(Ey).getSessions(c,l,{authorizationServer:n},!0);if(u.length)return u[0].accessToken;let d=this.ctx.get(Ey).getProvider(c);try{let{confirm:p}=await this.ctx.get(Ir).connection.sendRequest(t.oauthRequestType,{mcpServer:r,authLabel:d.label});if(!p){Vr.warn(this.ctx,"no confirmation for OAuth request");return}}catch(p){Vr.warn(this.ctx,"no confirmation for OAuth request",p);return}try{let p=await new pde(this.ctx).auth(n,o,s),m=await d.createSession(l,p);return this.ctx.get(cc).showInformationMessageOnlyOnce("Authentication successful",`You have already authenticated with ${d.label}.`,{title:"OK"}),m.accessToken}catch(p){this.ctx.get(cc).showWarningMessageOnlyOnce("Authentication failed",`You need to restart the IDE to authenticate the MCP server again. ${p instanceof Error?p.message:String(p)}`);return}}};f();var rTt=Ne(qc());var gde=class t extends dy{static{a(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new rTt.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(Ir).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var nTt=Ne(qc());var ADr=new nTt.ProtocolRequestType("copilot/readMcpSamplingConfig"),Ade=class extends t_{constructor(r){super();this.ctx=r}static{a(this,"CopilotMcpSamplingConfigSender")}async readMcpSamplingConfig(r){let n=this.ctx.get(Ir).connection,o;try{o=await n.sendRequest(ADr,r)}catch(l){throw new Error(`Request copilot/readMcpSamplingConfig failed with message: ${UA(l)}`)}let[s,c]=o;if(c)throw new Error(`Request copilot/readMcpSamplingConfig failed with code: ${c.code}, message: ${c.message}`);return s}};f();var Cde=Ne(qc());var yDr=new Cde.ProtocolRequestType("copilot/showPanelMessageRequest"),CDr=new Cde.ProtocolNotificationType("copilot/showPanelMessage"),yde=class extends N8{constructor(r){super();this.ctx=r}static{a(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(Ir).connection.sendNotification(CDr,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(Ir).connection,o;try{o=await n.sendRequest(yDr,r)}catch(l){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${UA(l)}`)}let[s,c]=o;if(c)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${c.code}, message: ${c.message}`);return s}};f();f();var vDr=new dt("fetcher"),xDr="https://default.exp-tas.com/",vde=class extends Lr{constructor(r,n,o,s){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=o;this.onFallbackSuccess=s}static{a(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(o){if(kd(o)||`${r}/`.startsWith(xDr))throw o;vDr.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,o);let s=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),s}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var iTt=new dt("fetcher"),xde=class extends Lr{constructor(r,n=new iL(r),o=new rL(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=o;this.updateFetcher=a(()=>{let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let o=Ki(this.ctx,$t.DebugUseEditorFetcher);o?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):o?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(iTt.debug(this.ctx,n),this.currentFetcher=r)},"updateFetcher");this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new vde(r,n,o,()=>{iTt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(ss).onDidSetCapabilities(this.updateFetcher),r.get(Oc).onDidChangeCopilotSettings(this.updateFetcher)}static{a(this,"AgentDelegatingFetcher")}get fetchStrategy(){return Ki(this.ctx,$t.FetchStrategy)}get editorFetcherCapability(){return this.ctx.get(ss).getCapabilities().fetch??!1}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};f();var Ede=class extends cc{constructor(r){super();this.ctx=r}static{a(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(Ir).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}showInformationMessage(r,...n){return this.connection.window.showInformationMessage(r,...n)}};f();f();var oTt=Ne(require("crypto")),sTt=require("os");var EDr=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function bDr(t){let e=t.replace(/-/g,":").toLowerCase();return!EDr.has(e)}a(bDr,"validateMacAddress");function IDr(){let t=(0,sTt.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(bDr(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}a(IDr,"getMac");var RDe;function TDr(){try{let t=IDr();return oTt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}a(TDr,"getMacMachineId");function aTt(){return RDe||(RDe=TDr()||wr()),RDe}a(aTt,"getMachineId");var wDr=wr()+Date.now(),cTt=new Fs(wDr,aTt());f();f();var bde=class extends Koe{static{a(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(Kv).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;let e=this.ctx.get(Kv);this._watcher=e.onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this._watcher?.dispose(),this._watcher=void 0}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(c=>!c.isRestricted&&!c.isUnknownFileExtension);if(n.length){let c=n.map(l=>l.document).filter(l=>l!==void 0);this.emitFilesCreated(c)}let o=e.changed.filter(c=>!c.isRestricted&&!c.isUnknownFileExtension);if(o.length){let c=o.map(l=>l.document).filter(l=>l!==void 0);this.emitFilesUpdated(c)}let s=e.deleted.filter(c=>!c.isRestricted&&!c.isUnknownFileExtension);s.length&&this.emitFilesDeleted(s.map(c=>({uri:c.uri})))}};var Ide=class extends tf{static{a(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new bde(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(ss).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function lTt(t){let e=new ug(process.env),r=Ddt(e);r.set(ug,e),r.set(Lr,new xde(r)),r.set(Bs,new Bs(r)),QPe(r,{});let n=TGe();r.set(hi,n);let o=new jle;r.set(lu,o);let s=new yA(r,n);r.set(yA,s),r.set(Fi,new xV(r,process.env)),r.set(Bf,new Bf(r)),r.set(Qd,new Qd(r,"agent")),r.set(Fs,cTt),r.set(on,new fse),r.set(VP,m1t()),r.set(zs,new zs),r.set(Ui,H1t),r.set(lk,new Hle(r)),r.set(tf,new Ide(r)),r.set(Kv,new Kv(r)),r.set(ml,new ml),r.set(Gc,NZ(r,Qyt)),r.set(Lp,new Lp(r)),r.set(rv,new W3),rmt(r),Yoe(r),_1t(r),xGe(r),r.set(Ir,new Ir(r,t)),r.set(e_,new Qle(r)),r.set(cc,new Ede(r)),r.set(N8,new yde(r)),r.set(t_,new Ade(r)),r.set(Ju,new EL(r)),r.set(Wo,new oue(r)),r.set(BH,new BH(r));let c=new G_(r);return r.set(Ar,c),r.set(G_,c),r.set(gf,new B8(r,process.env)),r.set(tA,new K4),r.set(gc,new gc(r)),M1t(r),Pft(r),r.set(zf,new zf),r.set(W_,new W_),r.set(ky,new ky),r.set(Nf,new Gle),r.set(c1,new c1),r.set($A,new zoe(r)),r.set(ov,new rM),r.set(xy,new xy(r)),r.set(CE,new CE(r)),r.set(xl,new xl(r)),r.set(md,new rue(r)),r.set(jw,new iue(r)),r.set(ig,new nue(r)),r.set(El,new El(r)),r.set(SE,new SE(r)),r.set(by,new by(r)),r.set(lE,new lE(r)),r.set(jf,new mde(r)),r.set(dy,new gde(r)),r.set(Yk,new Yk),r.set(Ey,new $le(r)),r.set(Dv,new Dv),r.set(Kk,new Kk),r.set(ay,new ay),r.set(Jp,new Jp),r.set(Ov,new Ov(r)),r.set(ag,new Eie([new Joe,new Xoe])),r.set(TP,new TP(r)),r}a(lTt,"createLanguageServerContext");f();var kDe=require("events"),AW=Ne(require("fs"));sY();var wde=Ne(qc());f();var dTt=Ne(require("fs")),fTt=Ne(require("http")),bL=Ne(require("path"));var Tde=class{constructor(e,r){this.port=e;let n;this.server=fTt.createServer((o,s)=>{if(o.headers.accept&&o.headers.accept=="text/event-stream")switch(s.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),o.url){case"/stdin":r.on("read",l=>{uTt(s,JSON.stringify(l))});return;case"/stdout":r.on("write",l=>{uTt(s,JSON.stringify(l))});return;default:s.writeHead(404),s.end();return}s.writeHead(200,{"Content-Type":"text/html"});let c=__dirname;bL.basename(__dirname)!=="debug"&&(c=bL.dirname(__dirname)),n??=dTt.readFileSync(bL.join(c,"dist","debugServer.html")).toString(),s.write(n),s.end()}),this.server.on("error",o=>{console.error(o)})}static{a(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function uTt(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}a(uTt,"writeData");var PDe=class extends wde.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{a(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},DDe=class extends wde.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{a(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function pTt(t,e,r){let n,o=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(o)){n??=new kDe.EventEmitter;let l=new Tde(o,n).listen();o===0&&await vO(`http://localhost:${l.getPort()}`)}let s=t.GITHUB_COPILOT_RECORD??"",c;try{let l=Date.now().toString();s==="1"||s==="true"?c=AW.openSync(`stdio${l}.log`,"w"):s&&s!=="0"&&s!=="false"&&(c=AW.openSync(s.replaceAll("%s",l),"w"))}catch(l){console.error(l)}if(c){let l=a(u=>{c&&AW.appendFile(c,u,d=>{d&&(c=void 0,console.error(d))})},"log");n??=new kDe.EventEmitter,n.on("read",u=>l(`<-- ${JSON.stringify(u)}
`)),n.on("write",u=>l(`--> ${JSON.stringify(u)}
`))}return n&&(e=new DDe(e,n),r=new PDe(r,n)),[e,r]}a(pTt,"wrapTransports");async function gTt(){let t=MYe(process.argv.slice(2)).version(new wo().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new Sg.IPCMessageReader(process),n=new Sg.IPCMessageWriter(process)):e.stdio?(r=new Sg.StreamMessageReader(process.stdin),n=new Sg.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await rb.mkdtemp(mTt.default.tmpdir()+"/github-copilot-"));try{let l=gve(),u=JSON.parse(await rb.readFile(yW.join(l,"hosts.json"),"utf8")),d={};try{d=JSON.parse(await rb.readFile(yW.join(l,"apps.json"),"utf8"))}catch{}let p=!1;for(let m of Object.keys(u)){let h=`${m}:${D0}`;d[h]||!u[m].user||!u[m].oauth_token||(d[h]={user:u[m].user,oauth_token:u[m].oauth_token,githubAppId:D0},p=!0)}p&&await rb.writeFile(yW.join(l,"apps.json"),JSON.stringify(d)+`
`,"utf8"),await rb.rm(yW.join(l,"hosts.json"),{force:!0})}catch{}let o=(0,Sg.createConnection)(Sg.ProposedFeatures.all,...await pTt(process.env,r,n)),s=lTt(o);console=Fze(s);let c=s.get(Ir);r.onClose(()=>c.onExit()),process.on("SIGINT",()=>{c.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{c.onExit().finally(()=>process.exit(143)).catch(()=>{})}),EGe(s),c.listen()}a(gTt,"main");hTt.isMainThread?require.main===module&&gTt():(nVe()&&iVe(),h1e()&&Lze());0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cdric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
