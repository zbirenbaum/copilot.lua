"use strict";var LTt=Object.create;var P4=Object.defineProperty;var XDe=Object.getOwnPropertyDescriptor;var FTt=Object.getOwnPropertyNames;var OTt=Object.getPrototypeOf,QTt=Object.prototype.hasOwnProperty;var YDe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),JDe=t=>{throw TypeError(t)};var a=(t,e)=>P4(t,"name",{value:e,configurable:!0});var Om=(t,e)=>()=>(t&&(e=t(t=0)),e);var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Sa=(t,e)=>{for(var r in e)P4(t,r,{get:e[r],enumerable:!0})},ZDe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of FTt(e))!QTt.call(t,o)&&o!==r&&P4(t,o,{get:()=>e[o],enumerable:!(n=XDe(e,o))||n.enumerable});return t};var Ne=(t,e,r)=>(r=t!=null?LTt(OTt(t)):{},ZDe(e||!t||!t.__esModule?P4(r,"default",{value:t,enumerable:!0}):r,t)),UTt=t=>ZDe(P4({},"__esModule",{value:!0}),t),pf=(t,e,r,n)=>{for(var o=n>1?void 0:n?XDe(e,r):e,s=t.length-1,c;s>=0;s--)(c=t[s])&&(o=(n?c(e,r,o):c(o))||o);return n&&o&&P4(e,r,o),o},Ra=(t,e)=>(r,n)=>e(r,n,t);var Pfe=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&JDe("Object expected");var n,o;r&&(n=e[YDe("asyncDispose")]),n===void 0&&(n=e[YDe("dispose")],r&&(o=n)),typeof n!="function"&&JDe("Object not disposable"),o&&(n=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),t.push([r,n,e])}else r&&t.push([r]);return e},Dfe=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(c,l,u,d){return d=Error(u),d.name="SuppressedError",d.error=c,d.suppressed=l,d},o=c=>e=r?new n(c,e,"An error was suppressed during disposal"):(r=!0,c),s=c=>{for(;c=t.pop();)try{var l=c[1]&&c[1].call(c[2]);if(c[0])return Promise.resolve(l).then(s,u=>(o(u),s()))}catch(u){o(u)}if(r)throw e};return s()};var importMetaUrlShim,f=Om(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var tBe=$(Bfe=>{f();var eBe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Bfe.encode=function(t){if(0<=t&&t<eBe.length)return eBe[t];throw new TypeError("Must be between 0 and 63: "+t)};Bfe.decode=function(t){var e=65,r=90,n=97,o=122,s=48,c=57,l=43,u=47,d=26,p=52;return e<=t&&t<=r?t-e:n<=t&&t<=o?t-n+d:s<=t&&t<=c?t-s+p:t==l?62:t==u?63:-1}});var Lfe=$(Mfe=>{f();var rBe=tBe(),Nfe=5,nBe=1<<Nfe,iBe=nBe-1,oBe=nBe;function qTt(t){return t<0?(-t<<1)+1:(t<<1)+0}a(qTt,"toVLQSigned");function HTt(t){var e=(t&1)===1,r=t>>1;return e?-r:r}a(HTt,"fromVLQSigned");Mfe.encode=a(function(e){var r="",n,o=qTt(e);do n=o&iBe,o>>>=Nfe,o>0&&(n|=oBe),r+=rBe.encode(n);while(o>0);return r},"base64VLQ_encode");Mfe.decode=a(function(e,r,n){var o=e.length,s=0,c=0,l,u;do{if(r>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(u=rBe.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));l=!!(u&oBe),u&=iBe,s=s+(u<<c),c+=Nfe}while(l);n.value=HTt(s),n.rest=r},"base64VLQ_decode")});var N4=$(_d=>{f();function $Tt(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}a($Tt,"getArg");_d.getArg=$Tt;var sBe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,WTt=/^data:.+\,.+$/;function LF(t){var e=t.match(sBe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}a(LF,"urlParse");_d.urlParse=LF;function D4(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}a(D4,"urlGenerate");_d.urlGenerate=D4;function Ffe(t){var e=t,r=LF(t);if(r){if(!r.path)return t;e=r.path}for(var n=_d.isAbsolute(e),o=e.split(/\/+/),s,c=0,l=o.length-1;l>=0;l--)s=o[l],s==="."?o.splice(l,1):s===".."?c++:c>0&&(s===""?(o.splice(l+1,c),c=0):(o.splice(l,2),c--));return e=o.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,D4(r)):e}a(Ffe,"normalize");_d.normalize=Ffe;function aBe(t,e){t===""&&(t="."),e===""&&(e=".");var r=LF(e),n=LF(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),D4(r);if(r||e.match(WTt))return e;if(n&&!n.host&&!n.path)return n.host=e,D4(n);var o=e.charAt(0)==="/"?e:Ffe(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=o,D4(n)):o}a(aBe,"join");_d.join=aBe;_d.isAbsolute=function(t){return t.charAt(0)==="/"||sBe.test(t)};function jTt(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}a(jTt,"relative");_d.relative=jTt;var cBe=function(){var t=Object.create(null);return!("__proto__"in t)}();function lBe(t){return t}a(lBe,"identity");function GTt(t){return uBe(t)?"$"+t:t}a(GTt,"toSetString");_d.toSetString=cBe?lBe:GTt;function VTt(t){return uBe(t)?t.slice(1):t}a(VTt,"fromSetString");_d.fromSetString=cBe?lBe:VTt;function uBe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}a(uBe,"isProtoString");function zTt(t,e,r){var n=B4(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:B4(t.name,e.name)}a(zTt,"compareByOriginalPositions");_d.compareByOriginalPositions=zTt;function KTt(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=B4(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:B4(t.name,e.name)}a(KTt,"compareByGeneratedPositionsDeflated");_d.compareByGeneratedPositionsDeflated=KTt;function B4(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}a(B4,"strcmp");function YTt(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=B4(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:B4(t.name,e.name)}a(YTt,"compareByGeneratedPositionsInflated");_d.compareByGeneratedPositionsInflated=YTt;function JTt(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}a(JTt,"parseSourceMapInput");_d.parseSourceMapInput=JTt;function XTt(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=LF(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var o=n.path.lastIndexOf("/");o>=0&&(n.path=n.path.substring(0,o+1))}e=aBe(D4(n),e)}return Ffe(e)}a(XTt,"computeSourceURL");_d.computeSourceURL=XTt});var Ufe=$(dBe=>{f();var Ofe=N4(),Qfe=Object.prototype.hasOwnProperty,OS=typeof Map<"u";function Mv(){this._array=[],this._set=OS?new Map:Object.create(null)}a(Mv,"ArraySet");Mv.fromArray=a(function(e,r){for(var n=new Mv,o=0,s=e.length;o<s;o++)n.add(e[o],r);return n},"ArraySet_fromArray");Mv.prototype.size=a(function(){return OS?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");Mv.prototype.add=a(function(e,r){var n=OS?e:Ofe.toSetString(e),o=OS?this.has(e):Qfe.call(this._set,n),s=this._array.length;(!o||r)&&this._array.push(e),o||(OS?this._set.set(e,s):this._set[n]=s)},"ArraySet_add");Mv.prototype.has=a(function(e){if(OS)return this._set.has(e);var r=Ofe.toSetString(e);return Qfe.call(this._set,r)},"ArraySet_has");Mv.prototype.indexOf=a(function(e){if(OS){var r=this._set.get(e);if(r>=0)return r}else{var n=Ofe.toSetString(e);if(Qfe.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");Mv.prototype.at=a(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");Mv.prototype.toArray=a(function(){return this._array.slice()},"ArraySet_toArray");dBe.ArraySet=Mv});var mBe=$(pBe=>{f();var fBe=N4();function ZTt(t,e){var r=t.generatedLine,n=e.generatedLine,o=t.generatedColumn,s=e.generatedColumn;return n>r||n==r&&s>=o||fBe.compareByGeneratedPositionsInflated(t,e)<=0}a(ZTt,"generatedPositionAfter");function QW(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}a(QW,"MappingList");QW.prototype.unsortedForEach=a(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");QW.prototype.add=a(function(e){ZTt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");QW.prototype.toArray=a(function(){return this._sorted||(this._array.sort(fBe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");pBe.MappingList=QW});var qfe=$(hBe=>{f();var FF=Lfe(),Zc=N4(),UW=Ufe().ArraySet,ewt=mBe().MappingList;function Qm(t){t||(t={}),this._file=Zc.getArg(t,"file",null),this._sourceRoot=Zc.getArg(t,"sourceRoot",null),this._skipValidation=Zc.getArg(t,"skipValidation",!1),this._sources=new UW,this._names=new UW,this._mappings=new ewt,this._sourcesContents=null}a(Qm,"SourceMapGenerator");Qm.prototype._version=3;Qm.fromSourceMap=a(function(e){var r=e.sourceRoot,n=new Qm({file:e.file,sourceRoot:r});return e.eachMapping(function(o){var s={generated:{line:o.generatedLine,column:o.generatedColumn}};o.source!=null&&(s.source=o.source,r!=null&&(s.source=Zc.relative(r,s.source)),s.original={line:o.originalLine,column:o.originalColumn},o.name!=null&&(s.name=o.name)),n.addMapping(s)}),e.sources.forEach(function(o){var s=o;r!==null&&(s=Zc.relative(r,o)),n._sources.has(s)||n._sources.add(s);var c=e.sourceContentFor(o);c!=null&&n.setSourceContent(o,c)}),n},"SourceMapGenerator_fromSourceMap");Qm.prototype.addMapping=a(function(e){var r=Zc.getArg(e,"generated"),n=Zc.getArg(e,"original",null),o=Zc.getArg(e,"source",null),s=Zc.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,o,s),o!=null&&(o=String(o),this._sources.has(o)||this._sources.add(o)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:o,name:s})},"SourceMapGenerator_addMapping");Qm.prototype.setSourceContent=a(function(e,r){var n=e;this._sourceRoot!=null&&(n=Zc.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Zc.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Zc.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Qm.prototype.applySourceMap=a(function(e,r,n){var o=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);o=e.file}var s=this._sourceRoot;s!=null&&(o=Zc.relative(s,o));var c=new UW,l=new UW;this._mappings.unsortedForEach(function(u){if(u.source===o&&u.originalLine!=null){var d=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});d.source!=null&&(u.source=d.source,n!=null&&(u.source=Zc.join(n,u.source)),s!=null&&(u.source=Zc.relative(s,u.source)),u.originalLine=d.line,u.originalColumn=d.column,d.name!=null&&(u.name=d.name))}var p=u.source;p!=null&&!c.has(p)&&c.add(p);var m=u.name;m!=null&&!l.has(m)&&l.add(m)},this),this._sources=c,this._names=l,e.sources.forEach(function(u){var d=e.sourceContentFor(u);d!=null&&(n!=null&&(u=Zc.join(n,u)),s!=null&&(u=Zc.relative(s,u)),this.setSourceContent(u,d))},this)},"SourceMapGenerator_applySourceMap");Qm.prototype._validateMapping=a(function(e,r,n,o){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!o)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:o}))}},"SourceMapGenerator_validateMapping");Qm.prototype._serializeMappings=a(function(){for(var e=0,r=1,n=0,o=0,s=0,c=0,l="",u,d,p,m,h=this._mappings.toArray(),g=0,A=h.length;g<A;g++){if(d=h[g],u="",d.generatedLine!==r)for(e=0;d.generatedLine!==r;)u+=";",r++;else if(g>0){if(!Zc.compareByGeneratedPositionsInflated(d,h[g-1]))continue;u+=","}u+=FF.encode(d.generatedColumn-e),e=d.generatedColumn,d.source!=null&&(m=this._sources.indexOf(d.source),u+=FF.encode(m-c),c=m,u+=FF.encode(d.originalLine-1-o),o=d.originalLine-1,u+=FF.encode(d.originalColumn-n),n=d.originalColumn,d.name!=null&&(p=this._names.indexOf(d.name),u+=FF.encode(p-s),s=p)),l+=u}return l},"SourceMapGenerator_serializeMappings");Qm.prototype._generateSourcesContent=a(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Zc.relative(r,n));var o=Zc.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,o)?this._sourcesContents[o]:null},this)},"SourceMapGenerator_generateSourcesContent");Qm.prototype.toJSON=a(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");Qm.prototype.toString=a(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");hBe.SourceMapGenerator=Qm});var gBe=$(QS=>{f();QS.GREATEST_LOWER_BOUND=1;QS.LEAST_UPPER_BOUND=2;function Hfe(t,e,r,n,o,s){var c=Math.floor((e-t)/2)+t,l=o(r,n[c],!0);return l===0?c:l>0?e-c>1?Hfe(c,e,r,n,o,s):s==QS.LEAST_UPPER_BOUND?e<n.length?e:-1:c:c-t>1?Hfe(t,c,r,n,o,s):s==QS.LEAST_UPPER_BOUND?c:t<0?-1:t}a(Hfe,"recursiveSearch");QS.search=a(function(e,r,n,o){if(r.length===0)return-1;var s=Hfe(-1,r.length,e,r,n,o||QS.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&n(r[s],r[s-1],!0)===0;)--s;return s},"search")});var yBe=$(ABe=>{f();function $fe(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}a($fe,"swap");function twt(t,e){return Math.round(t+Math.random()*(e-t))}a(twt,"randomIntInRange");function Wfe(t,e,r,n){if(r<n){var o=twt(r,n),s=r-1;$fe(t,o,n);for(var c=t[n],l=r;l<n;l++)e(t[l],c)<=0&&(s+=1,$fe(t,s,l));$fe(t,s+1,l);var u=s+1;Wfe(t,e,r,u-1),Wfe(t,e,u+1,n)}}a(Wfe,"doQuickSort");ABe.quickSort=function(t,e){Wfe(t,e,0,t.length-1)}});var vBe=$(qW=>{f();var Hr=N4(),jfe=gBe(),M4=Ufe().ArraySet,rwt=Lfe(),OF=yBe().quickSort;function Xs(t,e){var r=t;return typeof t=="string"&&(r=Hr.parseSourceMapInput(t)),r.sections!=null?new Jg(r,e):new Uu(r,e)}a(Xs,"SourceMapConsumer");Xs.fromSourceMap=function(t,e){return Uu.fromSourceMap(t,e)};Xs.prototype._version=3;Xs.prototype.__generatedMappings=null;Object.defineProperty(Xs.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:a(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});Xs.prototype.__originalMappings=null;Object.defineProperty(Xs.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:a(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});Xs.prototype._charIsMappingSeparator=a(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");Xs.prototype._parseMappings=a(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");Xs.GENERATED_ORDER=1;Xs.ORIGINAL_ORDER=2;Xs.GREATEST_LOWER_BOUND=1;Xs.LEAST_UPPER_BOUND=2;Xs.prototype.eachMapping=a(function(e,r,n){var o=r||null,s=n||Xs.GENERATED_ORDER,c;switch(s){case Xs.GENERATED_ORDER:c=this._generatedMappings;break;case Xs.ORIGINAL_ORDER:c=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;c.map(function(u){var d=u.source===null?null:this._sources.at(u.source);return d=Hr.computeSourceURL(l,d,this._sourceMapURL),{source:d,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,o)},"SourceMapConsumer_eachMapping");Xs.prototype.allGeneratedPositionsFor=a(function(e){var r=Hr.getArg(e,"line"),n={source:Hr.getArg(e,"source"),originalLine:r,originalColumn:Hr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var o=[],s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Hr.compareByOriginalPositions,jfe.LEAST_UPPER_BOUND);if(s>=0){var c=this._originalMappings[s];if(e.column===void 0)for(var l=c.originalLine;c&&c.originalLine===l;)o.push({line:Hr.getArg(c,"generatedLine",null),column:Hr.getArg(c,"generatedColumn",null),lastColumn:Hr.getArg(c,"lastGeneratedColumn",null)}),c=this._originalMappings[++s];else for(var u=c.originalColumn;c&&c.originalLine===r&&c.originalColumn==u;)o.push({line:Hr.getArg(c,"generatedLine",null),column:Hr.getArg(c,"generatedColumn",null),lastColumn:Hr.getArg(c,"lastGeneratedColumn",null)}),c=this._originalMappings[++s]}return o},"SourceMapConsumer_allGeneratedPositionsFor");qW.SourceMapConsumer=Xs;function Uu(t,e){var r=t;typeof t=="string"&&(r=Hr.parseSourceMapInput(t));var n=Hr.getArg(r,"version"),o=Hr.getArg(r,"sources"),s=Hr.getArg(r,"names",[]),c=Hr.getArg(r,"sourceRoot",null),l=Hr.getArg(r,"sourcesContent",null),u=Hr.getArg(r,"mappings"),d=Hr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);c&&(c=Hr.normalize(c)),o=o.map(String).map(Hr.normalize).map(function(p){return c&&Hr.isAbsolute(c)&&Hr.isAbsolute(p)?Hr.relative(c,p):p}),this._names=M4.fromArray(s.map(String),!0),this._sources=M4.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(p){return Hr.computeSourceURL(c,p,e)}),this.sourceRoot=c,this.sourcesContent=l,this._mappings=u,this._sourceMapURL=e,this.file=d}a(Uu,"BasicSourceMapConsumer");Uu.prototype=Object.create(Xs.prototype);Uu.prototype.consumer=Xs;Uu.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Hr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Uu.fromSourceMap=a(function(e,r){var n=Object.create(Uu.prototype),o=n._names=M4.fromArray(e._names.toArray(),!0),s=n._sources=M4.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(g){return Hr.computeSourceURL(n.sourceRoot,g,r)});for(var c=e._mappings.toArray().slice(),l=n.__generatedMappings=[],u=n.__originalMappings=[],d=0,p=c.length;d<p;d++){var m=c[d],h=new CBe;h.generatedLine=m.generatedLine,h.generatedColumn=m.generatedColumn,m.source&&(h.source=s.indexOf(m.source),h.originalLine=m.originalLine,h.originalColumn=m.originalColumn,m.name&&(h.name=o.indexOf(m.name)),u.push(h)),l.push(h)}return OF(n.__originalMappings,Hr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");Uu.prototype._version=3;Object.defineProperty(Uu.prototype,"sources",{get:a(function(){return this._absoluteSources.slice()},"get")});function CBe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}a(CBe,"Mapping");Uu.prototype._parseMappings=a(function(e,r){for(var n=1,o=0,s=0,c=0,l=0,u=0,d=e.length,p=0,m={},h={},g=[],A=[],y,v,b,I,S;p<d;)if(e.charAt(p)===";")n++,p++,o=0;else if(e.charAt(p)===",")p++;else{for(y=new CBe,y.generatedLine=n,I=p;I<d&&!this._charIsMappingSeparator(e,I);I++);if(v=e.slice(p,I),b=m[v],b)p+=v.length;else{for(b=[];p<I;)rwt.decode(e,p,h),S=h.value,p=h.rest,b.push(S);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");m[v]=b}y.generatedColumn=o+b[0],o=y.generatedColumn,b.length>1&&(y.source=l+b[1],l+=b[1],y.originalLine=s+b[2],s=y.originalLine,y.originalLine+=1,y.originalColumn=c+b[3],c=y.originalColumn,b.length>4&&(y.name=u+b[4],u+=b[4])),A.push(y),typeof y.originalLine=="number"&&g.push(y)}OF(A,Hr.compareByGeneratedPositionsDeflated),this.__generatedMappings=A,OF(g,Hr.compareByOriginalPositions),this.__originalMappings=g},"SourceMapConsumer_parseMappings");Uu.prototype._findMapping=a(function(e,r,n,o,s,c){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return jfe.search(e,r,s,c)},"SourceMapConsumer_findMapping");Uu.prototype.computeColumnSpans=a(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");Uu.prototype.originalPositionFor=a(function(e){var r={generatedLine:Hr.getArg(e,"line"),generatedColumn:Hr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Hr.compareByGeneratedPositionsDeflated,Hr.getArg(e,"bias",Xs.GREATEST_LOWER_BOUND));if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===r.generatedLine){var s=Hr.getArg(o,"source",null);s!==null&&(s=this._sources.at(s),s=Hr.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));var c=Hr.getArg(o,"name",null);return c!==null&&(c=this._names.at(c)),{source:s,line:Hr.getArg(o,"originalLine",null),column:Hr.getArg(o,"originalColumn",null),name:c}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");Uu.prototype.hasContentsOfAllSources=a(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");Uu.prototype.sourceContentFor=a(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var o=e;this.sourceRoot!=null&&(o=Hr.relative(this.sourceRoot,o));var s;if(this.sourceRoot!=null&&(s=Hr.urlParse(this.sourceRoot))){var c=o.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(c))return this.sourcesContent[this._sources.indexOf(c)];if((!s.path||s.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(r)return null;throw new Error('"'+o+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");Uu.prototype.generatedPositionFor=a(function(e){var r=Hr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Hr.getArg(e,"line"),originalColumn:Hr.getArg(e,"column")},o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Hr.compareByOriginalPositions,Hr.getArg(e,"bias",Xs.GREATEST_LOWER_BOUND));if(o>=0){var s=this._originalMappings[o];if(s.source===n.source)return{line:Hr.getArg(s,"generatedLine",null),column:Hr.getArg(s,"generatedColumn",null),lastColumn:Hr.getArg(s,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");qW.BasicSourceMapConsumer=Uu;function Jg(t,e){var r=t;typeof t=="string"&&(r=Hr.parseSourceMapInput(t));var n=Hr.getArg(r,"version"),o=Hr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new M4,this._names=new M4;var s={line:-1,column:0};this._sections=o.map(function(c){if(c.url)throw new Error("Support for url field in sections not implemented.");var l=Hr.getArg(c,"offset"),u=Hr.getArg(l,"line"),d=Hr.getArg(l,"column");if(u<s.line||u===s.line&&d<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=l,{generatedOffset:{generatedLine:u+1,generatedColumn:d+1},consumer:new Xs(Hr.getArg(c,"map"),e)}})}a(Jg,"IndexedSourceMapConsumer");Jg.prototype=Object.create(Xs.prototype);Jg.prototype.constructor=Xs;Jg.prototype._version=3;Object.defineProperty(Jg.prototype,"sources",{get:a(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});Jg.prototype.originalPositionFor=a(function(e){var r={generatedLine:Hr.getArg(e,"line"),generatedColumn:Hr.getArg(e,"column")},n=jfe.search(r,this._sections,function(s,c){var l=s.generatedLine-c.generatedOffset.generatedLine;return l||s.generatedColumn-c.generatedOffset.generatedColumn}),o=this._sections[n];return o?o.consumer.originalPositionFor({line:r.generatedLine-(o.generatedOffset.generatedLine-1),column:r.generatedColumn-(o.generatedOffset.generatedLine===r.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");Jg.prototype.hasContentsOfAllSources=a(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");Jg.prototype.sourceContentFor=a(function(e,r){for(var n=0;n<this._sections.length;n++){var o=this._sections[n],s=o.consumer.sourceContentFor(e,!0);if(s)return s}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");Jg.prototype.generatedPositionFor=a(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Hr.getArg(e,"source"))!==-1){var o=n.consumer.generatedPositionFor(e);if(o){var s={line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)};return s}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");Jg.prototype._parseMappings=a(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var o=this._sections[n],s=o.consumer._generatedMappings,c=0;c<s.length;c++){var l=s[c],u=o.consumer._sources.at(l.source);u=Hr.computeSourceURL(o.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var d=null;l.name&&(d=o.consumer._names.at(l.name),this._names.add(d),d=this._names.indexOf(d));var p={source:u,generatedLine:l.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(o.generatedOffset.generatedLine===l.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:d};this.__generatedMappings.push(p),typeof p.originalLine=="number"&&this.__originalMappings.push(p)}OF(this.__generatedMappings,Hr.compareByGeneratedPositionsDeflated),OF(this.__originalMappings,Hr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");qW.IndexedSourceMapConsumer=Jg});var EBe=$(xBe=>{f();var nwt=qfe().SourceMapGenerator,HW=N4(),iwt=/(\r?\n)/,owt=10,L4="$$$isSourceNode$$$";function p0(t,e,r,n,o){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=o??null,this[L4]=!0,n!=null&&this.add(n)}a(p0,"SourceNode");p0.fromStringWithSourceMap=a(function(e,r,n){var o=new p0,s=e.split(iwt),c=0,l=a(function(){var h=A(),g=A()||"";return h+g;function A(){return c<s.length?s[c++]:void 0}},"shiftNextLine"),u=1,d=0,p=null;return r.eachMapping(function(h){if(p!==null)if(u<h.generatedLine)m(p,l()),u++,d=0;else{var g=s[c]||"",A=g.substr(0,h.generatedColumn-d);s[c]=g.substr(h.generatedColumn-d),d=h.generatedColumn,m(p,A),p=h;return}for(;u<h.generatedLine;)o.add(l()),u++;if(d<h.generatedColumn){var g=s[c]||"";o.add(g.substr(0,h.generatedColumn)),s[c]=g.substr(h.generatedColumn),d=h.generatedColumn}p=h},this),c<s.length&&(p&&m(p,l()),o.add(s.splice(c).join(""))),r.sources.forEach(function(h){var g=r.sourceContentFor(h);g!=null&&(n!=null&&(h=HW.join(n,h)),o.setSourceContent(h,g))}),o;function m(h,g){if(h===null||h.source===void 0)o.add(g);else{var A=n?HW.join(n,h.source):h.source;o.add(new p0(h.originalLine,h.originalColumn,A,g,h.name))}}a(m,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");p0.prototype.add=a(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[L4]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");p0.prototype.prepend=a(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[L4]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");p0.prototype.walk=a(function(e){for(var r,n=0,o=this.children.length;n<o;n++)r=this.children[n],r[L4]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");p0.prototype.join=a(function(e){var r,n,o=this.children.length;if(o>0){for(r=[],n=0;n<o-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");p0.prototype.replaceRight=a(function(e,r){var n=this.children[this.children.length-1];return n[L4]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");p0.prototype.setSourceContent=a(function(e,r){this.sourceContents[HW.toSetString(e)]=r},"SourceNode_setSourceContent");p0.prototype.walkSourceContents=a(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][L4]&&this.children[r].walkSourceContents(e);for(var o=Object.keys(this.sourceContents),r=0,n=o.length;r<n;r++)e(HW.fromSetString(o[r]),this.sourceContents[o[r]])},"SourceNode_walkSourceContents");p0.prototype.toString=a(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");p0.prototype.toStringWithSourceMap=a(function(e){var r={code:"",line:1,column:0},n=new nwt(e),o=!1,s=null,c=null,l=null,u=null;return this.walk(function(d,p){r.code+=d,p.source!==null&&p.line!==null&&p.column!==null?((s!==p.source||c!==p.line||l!==p.column||u!==p.name)&&n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:r.line,column:r.column},name:p.name}),s=p.source,c=p.line,l=p.column,u=p.name,o=!0):o&&(n.addMapping({generated:{line:r.line,column:r.column}}),s=null,o=!1);for(var m=0,h=d.length;m<h;m++)d.charCodeAt(m)===owt?(r.line++,r.column=0,m+1===h?(s=null,o=!1):o&&n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:r.line,column:r.column},name:p.name})):r.column++}),this.walkSourceContents(function(d,p){n.setSourceContent(d,p)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");xBe.SourceNode=p0});var bBe=$($W=>{f();$W.SourceMapGenerator=qfe().SourceMapGenerator;$W.SourceMapConsumer=vBe().SourceMapConsumer;$W.SourceNode=EBe().SourceNode});var TBe=$((C4r,IBe)=>{f();var swt=Object.prototype.toString,Gfe=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function awt(t){return swt.call(t).slice(8,-1)==="ArrayBuffer"}a(awt,"isArrayBuffer");function cwt(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return Gfe?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}a(cwt,"fromArrayBuffer");function lwt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Gfe?Buffer.from(t,e):new Buffer(t,e)}a(lwt,"fromString");function uwt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return awt(t)?cwt(t,e,r):typeof t=="string"?lwt(t,e):Gfe?Buffer.from(t):new Buffer(t)}a(uwt,"bufferFrom");IBe.exports=uwt});var BBe=$((qS,Yfe)=>{f();var dwt=bBe().SourceMapConsumer,Vfe=require("path"),aC;try{aC=require("fs"),(!aC.existsSync||!aC.readFileSync)&&(aC=null)}catch{}var fwt=TBe();function wBe(t,e){return t.require(e)}a(wBe,"dynamicRequire");var _Be=!1,SBe=!1,zfe=!1,QF="auto",US={},UF={},pwt=/^data:application\/json[^,]+base64,/,gI=[],AI=[];function Jfe(){return QF==="browser"?!0:QF==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}a(Jfe,"isInBrowser");function mwt(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}a(mwt,"hasGlobalProcessEventEmitter");function hwt(){return typeof process=="object"&&process!==null?process.version:""}a(hwt,"globalProcessVersion");function gwt(){if(typeof process=="object"&&process!==null)return process.stderr}a(gwt,"globalProcessStderr");function Awt(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}a(Awt,"globalProcessExit");function WW(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}a(WW,"handlerExec");var Xfe=WW(gI);gI.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,o){return o?"":"/"})),t in US)return US[t];var e="";try{if(aC)aC.existsSync(t)&&(e=aC.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return US[t]=e});function Kfe(t,e){if(!t)return e;var r=Vfe.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),o=n?n[0]:"",s=r.slice(o.length);return o&&/^\/\w\:/.test(s)?(o+="/",o+Vfe.resolve(r.slice(o.length),e).replace(/\\/g,"/")):o+Vfe.resolve(r.slice(o.length),e)}a(Kfe,"supportRelativeURL");function ywt(t){var e;if(Jfe())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=Xfe(t);for(var o=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,s,c;c=o.exec(e);)s=c;return s?s[1]:null}a(ywt,"retrieveSourceMapURL");var Zfe=WW(AI);AI.push(function(t){var e=ywt(t);if(!e)return null;var r;if(pwt.test(e)){var n=e.slice(e.indexOf(",")+1);r=fwt(n,"base64").toString(),e=t}else e=Kfe(t,e),r=Xfe(e);return r?{url:e,map:r}:null});function epe(t){var e=UF[t.source];if(!e){var r=Zfe(t.source);r?(e=UF[t.source]={url:r.url,map:new dwt(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(o,s){var c=e.map.sourcesContent[s];if(c){var l=Kfe(e.url,o);US[l]=c}})):e=UF[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=Kfe(e.url,n.source),n}return t}a(epe,"mapSourcePosition");function kBe(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=epe({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+kBe(e[2])+")":t}a(kBe,"mapEvalOrigin");function Cwt(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var o="",s=this.getFunctionName(),c=!0,l=this.isConstructor(),u=!(this.isToplevel()||l);if(u){var d=this.getTypeName();d==="[object Object]"&&(d="null");var p=this.getMethodName();s?(d&&s.indexOf(d)!=0&&(o+=d+"."),o+=s,p&&s.indexOf("."+p)!=s.length-p.length-1&&(o+=" [as "+p+"]")):o+=d+"."+(p||"<anonymous>")}else l?o+="new "+(s||"<anonymous>"):s?o+=s:(o+=e,c=!1);return c&&(o+=" ("+e+")"),o}a(Cwt,"CallSiteToString");function RBe(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=Cwt,e}a(RBe,"cloneCallSite");function PBe(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),o=t.getColumnNumber()-1,s=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,c=s.test(hwt())?0:62;n===1&&o>c&&!Jfe()&&!t.isEval()&&(o-=c);var l=epe({source:r,line:n,column:o});e.curPosition=l,t=RBe(t);var u=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?u():e.nextPosition.name||u()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var d=t.isEval()&&t.getEvalOrigin();return d&&(d=kBe(d),t=RBe(t),t.getEvalOrigin=function(){return d}),t}a(PBe,"wrapCallSite");function vwt(t,e){zfe&&(US={},UF={});for(var r=t.name||"Error",n=t.message||"",o=r+": "+n,s={nextPosition:null,curPosition:null},c=[],l=e.length-1;l>=0;l--)c.push(`
    at `+PBe(e[l],s)),s.nextPosition=s.curPosition;return s.curPosition=s.nextPosition=null,o+c.reverse().join("")}a(vwt,"prepareStackTrace");function DBe(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],o=+e[3],s=US[r];if(!s&&aC&&aC.existsSync(r))try{s=aC.readFileSync(r,"utf8")}catch{s=""}if(s){var c=s.split(/(?:\r\n|\r|\n)/)[n-1];if(c)return r+":"+n+`
`+c+`
`+new Array(o).join(" ")+"^"}}return null}a(DBe,"getErrorSource");function xwt(t){var e=DBe(t),r=gwt();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),Awt(1)}a(xwt,"printErrorAndExit");function Ewt(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return xwt(arguments[1])}return t.apply(this,arguments)}}a(Ewt,"shimEmitUncaughtException");var bwt=gI.slice(0),Iwt=AI.slice(0);qS.wrapCallSite=PBe;qS.getErrorSource=DBe;qS.mapSourcePosition=epe;qS.retrieveSourceMap=Zfe;qS.install=function(t){if(t=t||{},t.environment&&(QF=t.environment,["node","browser","auto"].indexOf(QF)===-1))throw new Error("environment "+QF+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(gI.length=0),gI.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(AI.length=0),AI.unshift(t.retrieveSourceMap)),t.hookRequire&&!Jfe()){var e=wBe(Yfe,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(s,c){return US[c]=s,UF[c]=void 0,r.call(this,s,c)},e.prototype._compile.__sourceMapSupport=!0)}if(zfe||(zfe="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),_Be||(_Be=!0,Error.prepareStackTrace=vwt),!SBe){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var o=wBe(Yfe,"worker_threads");o.isMainThread===!1&&(n=!1)}catch{}n&&mwt()&&(SBe=!0,Ewt())}};qS.resetRetrieveHandlers=function(){gI.length=0,AI.length=0,gI=bwt.slice(0),AI=Iwt.slice(0),Zfe=WW(AI),Xfe=WW(gI)}});var ao=$((VW,FBe)=>{f();(function(t,e){typeof VW=="object"?FBe.exports=VW=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(VW,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var o=a(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),s=Object.create||function(){function b(){}return a(b,"F"),function(I){var S;return b.prototype=I,S=new b,b.prototype=null,S}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:a(function(b){var I=s(this);return b&&I.mixIn(b),(!I.hasOwnProperty("init")||this.init===I.init)&&(I.init=function(){I.$super.init.apply(this,arguments)}),I.init.prototype=I,I.$super=this,I},"extend"),create:a(function(){var b=this.extend();return b.init.apply(b,arguments),b},"create"),init:a(function(){},"init"),mixIn:a(function(b){for(var I in b)b.hasOwnProperty(I)&&(this[I]=b[I]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},"mixIn"),clone:a(function(){return this.init.prototype.extend(this)},"clone")}}(),d=l.WordArray=u.extend({init:a(function(b,I){b=this.words=b||[],I!=r?this.sigBytes=I:this.sigBytes=b.length*4},"init"),toString:a(function(b){return(b||m).stringify(this)},"toString"),concat:a(function(b){var I=this.words,S=b.words,k=this.sigBytes,N=b.sigBytes;if(this.clamp(),k%4)for(var F=0;F<N;F++){var O=S[F>>>2]>>>24-F%4*8&255;I[k+F>>>2]|=O<<24-(k+F)%4*8}else for(var Y=0;Y<N;Y+=4)I[k+Y>>>2]=S[Y>>>2];return this.sigBytes+=N,this},"concat"),clamp:a(function(){var b=this.words,I=this.sigBytes;b[I>>>2]&=4294967295<<32-I%4*8,b.length=e.ceil(I/4)},"clamp"),clone:a(function(){var b=u.clone.call(this);return b.words=this.words.slice(0),b},"clone"),random:a(function(b){for(var I=[],S=0;S<b;S+=4)I.push(o());return new d.init(I,b)},"random")}),p=c.enc={},m=p.Hex={stringify:a(function(b){for(var I=b.words,S=b.sigBytes,k=[],N=0;N<S;N++){var F=I[N>>>2]>>>24-N%4*8&255;k.push((F>>>4).toString(16)),k.push((F&15).toString(16))}return k.join("")},"stringify"),parse:a(function(b){for(var I=b.length,S=[],k=0;k<I;k+=2)S[k>>>3]|=parseInt(b.substr(k,2),16)<<24-k%8*4;return new d.init(S,I/2)},"parse")},h=p.Latin1={stringify:a(function(b){for(var I=b.words,S=b.sigBytes,k=[],N=0;N<S;N++){var F=I[N>>>2]>>>24-N%4*8&255;k.push(String.fromCharCode(F))}return k.join("")},"stringify"),parse:a(function(b){for(var I=b.length,S=[],k=0;k<I;k++)S[k>>>2]|=(b.charCodeAt(k)&255)<<24-k%4*8;return new d.init(S,I)},"parse")},g=p.Utf8={stringify:a(function(b){try{return decodeURIComponent(escape(h.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:a(function(b){return h.parse(unescape(encodeURIComponent(b)))},"parse")},A=l.BufferedBlockAlgorithm=u.extend({reset:a(function(){this._data=new d.init,this._nDataBytes=0},"reset"),_append:a(function(b){typeof b=="string"&&(b=g.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},"_append"),_process:a(function(b){var I,S=this._data,k=S.words,N=S.sigBytes,F=this.blockSize,O=F*4,Y=N/O;b?Y=e.ceil(Y):Y=e.max((Y|0)-this._minBufferSize,0);var z=Y*F,V=e.min(z*4,N);if(z){for(var U=0;U<z;U+=F)this._doProcessBlock(k,U);I=k.splice(0,z),S.sigBytes-=V}return new d.init(I,V)},"_process"),clone:a(function(){var b=u.clone.call(this);return b._data=this._data.clone(),b},"clone"),_minBufferSize:0}),y=l.Hasher=A.extend({cfg:u.extend(),init:a(function(b){this.cfg=this.cfg.extend(b),this.reset()},"init"),reset:a(function(){A.reset.call(this),this._doReset()},"reset"),update:a(function(b){return this._append(b),this._process(),this},"update"),finalize:a(function(b){b&&this._append(b);var I=this._doFinalize();return I},"finalize"),blockSize:512/32,_createHelper:a(function(b){return function(I,S){return new b.init(S).finalize(I)}},"_createHelper"),_createHmacHelper:a(function(b){return function(I,S){return new v.HMAC.init(b,S).finalize(I)}},"_createHmacHelper")}),v=c.algo={};return c}(Math);return t})});var WF=$((zW,OBe)=>{f();(function(t,e){typeof zW=="object"?OBe.exports=zW=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(zW,function(t){return function(e){var r=t,n=r.lib,o=n.Base,s=n.WordArray,c=r.x64={},l=c.Word=o.extend({init:a(function(d,p){this.high=d,this.low=p},"init")}),u=c.WordArray=o.extend({init:a(function(d,p){d=this.words=d||[],p!=e?this.sigBytes=p:this.sigBytes=d.length*8},"init"),toX32:a(function(){for(var d=this.words,p=d.length,m=[],h=0;h<p;h++){var g=d[h];m.push(g.high),m.push(g.low)}return s.create(m,this.sigBytes)},"toX32"),clone:a(function(){for(var d=o.clone.call(this),p=d.words=this.words.slice(0),m=p.length,h=0;h<m;h++)p[h]=p[h].clone();return d},"clone")})}(),t})});var UBe=$((KW,QBe)=>{f();(function(t,e){typeof KW=="object"?QBe.exports=KW=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(KW,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,o=n.init,s=n.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],d=0;d<l;d++)u[d>>>2]|=c[d]<<24-d%4*8;o.call(this,u,l)}else o.apply(this,arguments)};s.prototype=n}}(),t.lib.WordArray})});var HBe=$((YW,qBe)=>{f();(function(t,e){typeof YW=="object"?qBe.exports=YW=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(YW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.enc,s=o.Utf16=o.Utf16BE={stringify:a(function(l){for(var u=l.words,d=l.sigBytes,p=[],m=0;m<d;m+=2){var h=u[m>>>2]>>>16-m%4*8&65535;p.push(String.fromCharCode(h))}return p.join("")},"stringify"),parse:a(function(l){for(var u=l.length,d=[],p=0;p<u;p++)d[p>>>1]|=l.charCodeAt(p)<<16-p%2*16;return n.create(d,u*2)},"parse")};o.Utf16LE={stringify:a(function(l){for(var u=l.words,d=l.sigBytes,p=[],m=0;m<d;m+=2){var h=c(u[m>>>2]>>>16-m%4*8&65535);p.push(String.fromCharCode(h))}return p.join("")},"stringify"),parse:a(function(l){for(var u=l.length,d=[],p=0;p<u;p++)d[p>>>1]|=c(l.charCodeAt(p)<<16-p%2*16);return n.create(d,u*2)},"parse")};function c(l){return l<<8&4278255360|l>>>8&16711935}a(c,"swapEndian")}(),t.enc.Utf16})});var CI=$((JW,$Be)=>{f();(function(t,e){typeof JW=="object"?$Be.exports=JW=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(JW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.enc,s=o.Base64={stringify:a(function(l){var u=l.words,d=l.sigBytes,p=this._map;l.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,A=u[h+1>>>2]>>>24-(h+1)%4*8&255,y=u[h+2>>>2]>>>24-(h+2)%4*8&255,v=g<<16|A<<8|y,b=0;b<4&&h+b*.75<d;b++)m.push(p.charAt(v>>>6*(3-b)&63));var I=p.charAt(64);if(I)for(;m.length%4;)m.push(I);return m.join("")},"stringify"),parse:a(function(l){var u=l.length,d=this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=l.indexOf(h);g!==-1&&(u=g)}return c(l,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(l,u,d){for(var p=[],m=0,h=0;h<u;h++)if(h%4){var g=d[l.charCodeAt(h-1)]<<h%4*2,A=d[l.charCodeAt(h)]>>>6-h%4*2,y=g|A;p[m>>>2]|=y<<24-m%4*8,m++}return n.create(p,m)}a(c,"parseLoop")}(),t.enc.Base64})});var jBe=$((XW,WBe)=>{f();(function(t,e){typeof XW=="object"?WBe.exports=XW=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(XW,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.enc,s=o.Base64url={stringify:a(function(l,u){u===void 0&&(u=!0);var d=l.words,p=l.sigBytes,m=u?this._safe_map:this._map;l.clamp();for(var h=[],g=0;g<p;g+=3)for(var A=d[g>>>2]>>>24-g%4*8&255,y=d[g+1>>>2]>>>24-(g+1)%4*8&255,v=d[g+2>>>2]>>>24-(g+2)%4*8&255,b=A<<16|y<<8|v,I=0;I<4&&g+I*.75<p;I++)h.push(m.charAt(b>>>6*(3-I)&63));var S=m.charAt(64);if(S)for(;h.length%4;)h.push(S);return h.join("")},"stringify"),parse:a(function(l,u){u===void 0&&(u=!0);var d=l.length,p=u?this._safe_map:this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var h=0;h<p.length;h++)m[p.charCodeAt(h)]=h}var g=p.charAt(64);if(g){var A=l.indexOf(g);A!==-1&&(d=A)}return c(l,d,m)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function c(l,u,d){for(var p=[],m=0,h=0;h<u;h++)if(h%4){var g=d[l.charCodeAt(h-1)]<<h%4*2,A=d[l.charCodeAt(h)]>>>6-h%4*2,y=g|A;p[m>>>2]|=y<<24-m%4*8,m++}return n.create(p,m)}a(c,"parseLoop")}(),t.enc.Base64url})});var vI=$((ZW,GBe)=>{f();(function(t,e){typeof ZW=="object"?GBe.exports=ZW=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(ZW,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,s=n.Hasher,c=r.algo,l=[];(function(){for(var g=0;g<64;g++)l[g]=e.abs(e.sin(g+1))*4294967296|0})();var u=c.MD5=s.extend({_doReset:a(function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:a(function(g,A){for(var y=0;y<16;y++){var v=A+y,b=g[v];g[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var I=this._hash.words,S=g[A+0],k=g[A+1],N=g[A+2],F=g[A+3],O=g[A+4],Y=g[A+5],z=g[A+6],V=g[A+7],U=g[A+8],H=g[A+9],ee=g[A+10],J=g[A+11],G=g[A+12],j=g[A+13],Z=g[A+14],ie=g[A+15],ne=I[0],re=I[1],fe=I[2],ye=I[3];ne=d(ne,re,fe,ye,S,7,l[0]),ye=d(ye,ne,re,fe,k,12,l[1]),fe=d(fe,ye,ne,re,N,17,l[2]),re=d(re,fe,ye,ne,F,22,l[3]),ne=d(ne,re,fe,ye,O,7,l[4]),ye=d(ye,ne,re,fe,Y,12,l[5]),fe=d(fe,ye,ne,re,z,17,l[6]),re=d(re,fe,ye,ne,V,22,l[7]),ne=d(ne,re,fe,ye,U,7,l[8]),ye=d(ye,ne,re,fe,H,12,l[9]),fe=d(fe,ye,ne,re,ee,17,l[10]),re=d(re,fe,ye,ne,J,22,l[11]),ne=d(ne,re,fe,ye,G,7,l[12]),ye=d(ye,ne,re,fe,j,12,l[13]),fe=d(fe,ye,ne,re,Z,17,l[14]),re=d(re,fe,ye,ne,ie,22,l[15]),ne=p(ne,re,fe,ye,k,5,l[16]),ye=p(ye,ne,re,fe,z,9,l[17]),fe=p(fe,ye,ne,re,J,14,l[18]),re=p(re,fe,ye,ne,S,20,l[19]),ne=p(ne,re,fe,ye,Y,5,l[20]),ye=p(ye,ne,re,fe,ee,9,l[21]),fe=p(fe,ye,ne,re,ie,14,l[22]),re=p(re,fe,ye,ne,O,20,l[23]),ne=p(ne,re,fe,ye,H,5,l[24]),ye=p(ye,ne,re,fe,Z,9,l[25]),fe=p(fe,ye,ne,re,F,14,l[26]),re=p(re,fe,ye,ne,U,20,l[27]),ne=p(ne,re,fe,ye,j,5,l[28]),ye=p(ye,ne,re,fe,N,9,l[29]),fe=p(fe,ye,ne,re,V,14,l[30]),re=p(re,fe,ye,ne,G,20,l[31]),ne=m(ne,re,fe,ye,Y,4,l[32]),ye=m(ye,ne,re,fe,U,11,l[33]),fe=m(fe,ye,ne,re,J,16,l[34]),re=m(re,fe,ye,ne,Z,23,l[35]),ne=m(ne,re,fe,ye,k,4,l[36]),ye=m(ye,ne,re,fe,O,11,l[37]),fe=m(fe,ye,ne,re,V,16,l[38]),re=m(re,fe,ye,ne,ee,23,l[39]),ne=m(ne,re,fe,ye,j,4,l[40]),ye=m(ye,ne,re,fe,S,11,l[41]),fe=m(fe,ye,ne,re,F,16,l[42]),re=m(re,fe,ye,ne,z,23,l[43]),ne=m(ne,re,fe,ye,H,4,l[44]),ye=m(ye,ne,re,fe,G,11,l[45]),fe=m(fe,ye,ne,re,ie,16,l[46]),re=m(re,fe,ye,ne,N,23,l[47]),ne=h(ne,re,fe,ye,S,6,l[48]),ye=h(ye,ne,re,fe,V,10,l[49]),fe=h(fe,ye,ne,re,Z,15,l[50]),re=h(re,fe,ye,ne,Y,21,l[51]),ne=h(ne,re,fe,ye,G,6,l[52]),ye=h(ye,ne,re,fe,F,10,l[53]),fe=h(fe,ye,ne,re,ee,15,l[54]),re=h(re,fe,ye,ne,k,21,l[55]),ne=h(ne,re,fe,ye,U,6,l[56]),ye=h(ye,ne,re,fe,ie,10,l[57]),fe=h(fe,ye,ne,re,z,15,l[58]),re=h(re,fe,ye,ne,j,21,l[59]),ne=h(ne,re,fe,ye,O,6,l[60]),ye=h(ye,ne,re,fe,J,10,l[61]),fe=h(fe,ye,ne,re,N,15,l[62]),re=h(re,fe,ye,ne,H,21,l[63]),I[0]=I[0]+ne|0,I[1]=I[1]+re|0,I[2]=I[2]+fe|0,I[3]=I[3]+ye|0},"_doProcessBlock"),_doFinalize:a(function(){var g=this._data,A=g.words,y=this._nDataBytes*8,v=g.sigBytes*8;A[v>>>5]|=128<<24-v%32;var b=e.floor(y/4294967296),I=y;A[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,A[(v+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,g.sigBytes=(A.length+1)*4,this._process();for(var S=this._hash,k=S.words,N=0;N<4;N++){var F=k[N];k[N]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return S},"_doFinalize"),clone:a(function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g},"clone")});function d(g,A,y,v,b,I,S){var k=g+(A&y|~A&v)+b+S;return(k<<I|k>>>32-I)+A}a(d,"FF");function p(g,A,y,v,b,I,S){var k=g+(A&v|y&~v)+b+S;return(k<<I|k>>>32-I)+A}a(p,"GG");function m(g,A,y,v,b,I,S){var k=g+(A^y^v)+b+S;return(k<<I|k>>>32-I)+A}a(m,"HH");function h(g,A,y,v,b,I,S){var k=g+(y^(A|~v))+b+S;return(k<<I|k>>>32-I)+A}a(h,"II"),r.MD5=s._createHelper(u),r.HmacMD5=s._createHmacHelper(u)}(Math),t.MD5})});var npe=$((ej,VBe)=>{f();(function(t,e){typeof ej=="object"?VBe.exports=ej=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(ej,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=r.Hasher,s=e.algo,c=[],l=s.SHA1=o.extend({_doReset:a(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:a(function(u,d){for(var p=this._hash.words,m=p[0],h=p[1],g=p[2],A=p[3],y=p[4],v=0;v<80;v++){if(v<16)c[v]=u[d+v]|0;else{var b=c[v-3]^c[v-8]^c[v-14]^c[v-16];c[v]=b<<1|b>>>31}var I=(m<<5|m>>>27)+y+c[v];v<20?I+=(h&g|~h&A)+1518500249:v<40?I+=(h^g^A)+1859775393:v<60?I+=(h&g|h&A|g&A)-1894007588:I+=(h^g^A)-899497514,y=A,A=g,g=h<<30|h>>>2,h=m,m=I}p[0]=p[0]+m|0,p[1]=p[1]+h|0,p[2]=p[2]+g|0,p[3]=p[3]+A|0,p[4]=p[4]+y|0},"_doProcessBlock"),_doFinalize:a(function(){var u=this._data,d=u.words,p=this._nDataBytes*8,m=u.sigBytes*8;return d[m>>>5]|=128<<24-m%32,d[(m+64>>>9<<4)+14]=Math.floor(p/4294967296),d[(m+64>>>9<<4)+15]=p,u.sigBytes=d.length*4,this._process(),this._hash},"_doFinalize"),clone:a(function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u},"clone")});e.SHA1=o._createHelper(l),e.HmacSHA1=o._createHmacHelper(l)}(),t.SHA1})});var rj=$((tj,zBe)=>{f();(function(t,e){typeof tj=="object"?zBe.exports=tj=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(tj,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,s=n.Hasher,c=r.algo,l=[],u=[];(function(){function m(y){for(var v=e.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}a(m,"isPrime");function h(y){return(y-(y|0))*4294967296|0}a(h,"getFractionalBits");for(var g=2,A=0;A<64;)m(g)&&(A<8&&(l[A]=h(e.pow(g,1/2))),u[A]=h(e.pow(g,1/3)),A++),g++})();var d=[],p=c.SHA256=s.extend({_doReset:a(function(){this._hash=new o.init(l.slice(0))},"_doReset"),_doProcessBlock:a(function(m,h){for(var g=this._hash.words,A=g[0],y=g[1],v=g[2],b=g[3],I=g[4],S=g[5],k=g[6],N=g[7],F=0;F<64;F++){if(F<16)d[F]=m[h+F]|0;else{var O=d[F-15],Y=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,z=d[F-2],V=(z<<15|z>>>17)^(z<<13|z>>>19)^z>>>10;d[F]=Y+d[F-7]+V+d[F-16]}var U=I&S^~I&k,H=A&y^A&v^y&v,ee=(A<<30|A>>>2)^(A<<19|A>>>13)^(A<<10|A>>>22),J=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),G=N+J+U+u[F]+d[F],j=ee+H;N=k,k=S,S=I,I=b+G|0,b=v,v=y,y=A,A=G+j|0}g[0]=g[0]+A|0,g[1]=g[1]+y|0,g[2]=g[2]+v|0,g[3]=g[3]+b|0,g[4]=g[4]+I|0,g[5]=g[5]+S|0,g[6]=g[6]+k|0,g[7]=g[7]+N|0},"_doProcessBlock"),_doFinalize:a(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,A=m.sigBytes*8;return h[A>>>5]|=128<<24-A%32,h[(A+64>>>9<<4)+14]=e.floor(g/4294967296),h[(A+64>>>9<<4)+15]=g,m.sigBytes=h.length*4,this._process(),this._hash},"_doFinalize"),clone:a(function(){var m=s.clone.call(this);return m._hash=this._hash.clone(),m},"clone")});r.SHA256=s._createHelper(p),r.HmacSHA256=s._createHmacHelper(p)}(Math),t.SHA256})});var YBe=$((nj,KBe)=>{f();(function(t,e,r){typeof nj=="object"?KBe.exports=nj=e(ao(),rj()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(nj,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=e.algo,s=o.SHA256,c=o.SHA224=s.extend({_doReset:a(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:a(function(){var l=s._doFinalize.call(this);return l.sigBytes-=4,l},"_doFinalize")});e.SHA224=s._createHelper(c),e.HmacSHA224=s._createHmacHelper(c)}(),t.SHA224})});var ipe=$((ij,JBe)=>{f();(function(t,e,r){typeof ij=="object"?JBe.exports=ij=e(ao(),WF()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(ij,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,o=e.x64,s=o.Word,c=o.WordArray,l=e.algo;function u(){return s.create.apply(s,arguments)}a(u,"X64Word_create");var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],p=[];(function(){for(var h=0;h<80;h++)p[h]=u()})();var m=l.SHA512=n.extend({_doReset:a(function(){this._hash=new c.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:a(function(h,g){for(var A=this._hash.words,y=A[0],v=A[1],b=A[2],I=A[3],S=A[4],k=A[5],N=A[6],F=A[7],O=y.high,Y=y.low,z=v.high,V=v.low,U=b.high,H=b.low,ee=I.high,J=I.low,G=S.high,j=S.low,Z=k.high,ie=k.low,ne=N.high,re=N.low,fe=F.high,ye=F.low,Qe=O,we=Y,Xe=z,Oe=V,ut=U,Rt=H,Et=ee,At=J,de=G,qe=j,Ce=Z,We=ie,ce=ne,ue=re,He=fe,Me=ye,be=0;be<80;be++){var Ge,rt,ht=p[be];if(be<16)rt=ht.high=h[g+be*2]|0,Ge=ht.low=h[g+be*2+1]|0;else{var Ot=p[be-15],Xt=Ot.high,Ut=Ot.low,Kr=(Xt>>>1|Ut<<31)^(Xt>>>8|Ut<<24)^Xt>>>7,Mr=(Ut>>>1|Xt<<31)^(Ut>>>8|Xt<<24)^(Ut>>>7|Xt<<25),fn=p[be-2],xe=fn.high,Ve=fn.low,mt=(xe>>>19|Ve<<13)^(xe<<3|Ve>>>29)^xe>>>6,wt=(Ve>>>19|xe<<13)^(Ve<<3|xe>>>29)^(Ve>>>6|xe<<26),sr=p[be-7],er=sr.high,wr=sr.low,pr=p[be-16],nr=pr.high,dr=pr.low;Ge=Mr+wr,rt=Kr+er+(Ge>>>0<Mr>>>0?1:0),Ge=Ge+wt,rt=rt+mt+(Ge>>>0<wt>>>0?1:0),Ge=Ge+dr,rt=rt+nr+(Ge>>>0<dr>>>0?1:0),ht.high=rt,ht.low=Ge}var ir=de&Ce^~de&ce,Lr=qe&We^~qe&ue,Yr=Qe&Xe^Qe&ut^Xe&ut,cn=we&Oe^we&Rt^Oe&Rt,xn=(Qe>>>28|we<<4)^(Qe<<30|we>>>2)^(Qe<<25|we>>>7),oi=(we>>>28|Qe<<4)^(we<<30|Qe>>>2)^(we<<25|Qe>>>7),kn=(de>>>14|qe<<18)^(de>>>18|qe<<14)^(de<<23|qe>>>9),ri=(qe>>>14|de<<18)^(qe>>>18|de<<14)^(qe<<23|de>>>9),ln=d[be],Xn=ln.high,De=ln.low,X=Me+ri,ve=He+kn+(X>>>0<Me>>>0?1:0),X=X+Lr,ve=ve+ir+(X>>>0<Lr>>>0?1:0),X=X+De,ve=ve+Xn+(X>>>0<De>>>0?1:0),X=X+Ge,ve=ve+rt+(X>>>0<Ge>>>0?1:0),Te=oi+cn,Q=xn+Yr+(Te>>>0<oi>>>0?1:0);He=ce,Me=ue,ce=Ce,ue=We,Ce=de,We=qe,qe=At+X|0,de=Et+ve+(qe>>>0<At>>>0?1:0)|0,Et=ut,At=Rt,ut=Xe,Rt=Oe,Xe=Qe,Oe=we,we=X+Te|0,Qe=ve+Q+(we>>>0<X>>>0?1:0)|0}Y=y.low=Y+we,y.high=O+Qe+(Y>>>0<we>>>0?1:0),V=v.low=V+Oe,v.high=z+Xe+(V>>>0<Oe>>>0?1:0),H=b.low=H+Rt,b.high=U+ut+(H>>>0<Rt>>>0?1:0),J=I.low=J+At,I.high=ee+Et+(J>>>0<At>>>0?1:0),j=S.low=j+qe,S.high=G+de+(j>>>0<qe>>>0?1:0),ie=k.low=ie+We,k.high=Z+Ce+(ie>>>0<We>>>0?1:0),re=N.low=re+ue,N.high=ne+ce+(re>>>0<ue>>>0?1:0),ye=F.low=ye+Me,F.high=fe+He+(ye>>>0<Me>>>0?1:0)},"_doProcessBlock"),_doFinalize:a(function(){var h=this._data,g=h.words,A=this._nDataBytes*8,y=h.sigBytes*8;g[y>>>5]|=128<<24-y%32,g[(y+128>>>10<<5)+30]=Math.floor(A/4294967296),g[(y+128>>>10<<5)+31]=A,h.sigBytes=g.length*4,this._process();var v=this._hash.toX32();return v},"_doFinalize"),clone:a(function(){var h=n.clone.call(this);return h._hash=this._hash.clone(),h},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(m),e.HmacSHA512=n._createHmacHelper(m)}(),t.SHA512})});var ZBe=$((oj,XBe)=>{f();(function(t,e,r){typeof oj=="object"?XBe.exports=oj=e(ao(),WF(),ipe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(oj,function(t){return function(){var e=t,r=e.x64,n=r.Word,o=r.WordArray,s=e.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:a(function(){this._hash=new o.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:a(function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u},"_doFinalize")});e.SHA384=c._createHelper(l),e.HmacSHA384=c._createHmacHelper(l)}(),t.SHA384})});var t3e=$((sj,e3e)=>{f();(function(t,e,r){typeof sj=="object"?e3e.exports=sj=e(ao(),WF()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(sj,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,s=n.Hasher,c=r.x64,l=c.Word,u=r.algo,d=[],p=[],m=[];(function(){for(var A=1,y=0,v=0;v<24;v++){d[A+5*y]=(v+1)*(v+2)/2%64;var b=y%5,I=(2*A+3*y)%5;A=b,y=I}for(var A=0;A<5;A++)for(var y=0;y<5;y++)p[A+5*y]=y+(2*A+3*y)%5*5;for(var S=1,k=0;k<24;k++){for(var N=0,F=0,O=0;O<7;O++){if(S&1){var Y=(1<<O)-1;Y<32?F^=1<<Y:N^=1<<Y-32}S&128?S=S<<1^113:S<<=1}m[k]=l.create(N,F)}})();var h=[];(function(){for(var A=0;A<25;A++)h[A]=l.create()})();var g=u.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:a(function(){for(var A=this._state=[],y=0;y<25;y++)A[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:a(function(A,y){for(var v=this._state,b=this.blockSize/2,I=0;I<b;I++){var S=A[y+2*I],k=A[y+2*I+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var N=v[I];N.high^=k,N.low^=S}for(var F=0;F<24;F++){for(var O=0;O<5;O++){for(var Y=0,z=0,V=0;V<5;V++){var N=v[O+5*V];Y^=N.high,z^=N.low}var U=h[O];U.high=Y,U.low=z}for(var O=0;O<5;O++)for(var H=h[(O+4)%5],ee=h[(O+1)%5],J=ee.high,G=ee.low,Y=H.high^(J<<1|G>>>31),z=H.low^(G<<1|J>>>31),V=0;V<5;V++){var N=v[O+5*V];N.high^=Y,N.low^=z}for(var j=1;j<25;j++){var Y,z,N=v[j],Z=N.high,ie=N.low,ne=d[j];ne<32?(Y=Z<<ne|ie>>>32-ne,z=ie<<ne|Z>>>32-ne):(Y=ie<<ne-32|Z>>>64-ne,z=Z<<ne-32|ie>>>64-ne);var re=h[p[j]];re.high=Y,re.low=z}var fe=h[0],ye=v[0];fe.high=ye.high,fe.low=ye.low;for(var O=0;O<5;O++)for(var V=0;V<5;V++){var j=O+5*V,N=v[j],Qe=h[j],we=h[(O+1)%5+5*V],Xe=h[(O+2)%5+5*V];N.high=Qe.high^~we.high&Xe.high,N.low=Qe.low^~we.low&Xe.low}var N=v[0],Oe=m[F];N.high^=Oe.high,N.low^=Oe.low}},"_doProcessBlock"),_doFinalize:a(function(){var A=this._data,y=A.words,v=this._nDataBytes*8,b=A.sigBytes*8,I=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(e.ceil((b+1)/I)*I>>>5)-1]|=128,A.sigBytes=y.length*4,this._process();for(var S=this._state,k=this.cfg.outputLength/8,N=k/8,F=[],O=0;O<N;O++){var Y=S[O],z=Y.high,V=Y.low;z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,F.push(V),F.push(z)}return new o.init(F,k)},"_doFinalize"),clone:a(function(){for(var A=s.clone.call(this),y=A._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return A},"clone")});r.SHA3=s._createHelper(g),r.HmacSHA3=s._createHmacHelper(g)}(Math),t.SHA3})});var n3e=$((aj,r3e)=>{f();(function(t,e){typeof aj=="object"?r3e.exports=aj=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(aj,function(t){return function(e){var r=t,n=r.lib,o=n.WordArray,s=n.Hasher,c=r.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),p=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=o.create([0,1518500249,1859775393,2400959708,2840853838]),h=o.create([1352829926,1548603684,1836072691,2053994217,0]),g=c.RIPEMD160=s.extend({_doReset:a(function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:a(function(k,N){for(var F=0;F<16;F++){var O=N+F,Y=k[O];k[O]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}var z=this._hash.words,V=m.words,U=h.words,H=l.words,ee=u.words,J=d.words,G=p.words,j,Z,ie,ne,re,fe,ye,Qe,we,Xe;fe=j=z[0],ye=Z=z[1],Qe=ie=z[2],we=ne=z[3],Xe=re=z[4];for(var Oe,F=0;F<80;F+=1)Oe=j+k[N+H[F]]|0,F<16?Oe+=A(Z,ie,ne)+V[0]:F<32?Oe+=y(Z,ie,ne)+V[1]:F<48?Oe+=v(Z,ie,ne)+V[2]:F<64?Oe+=b(Z,ie,ne)+V[3]:Oe+=I(Z,ie,ne)+V[4],Oe=Oe|0,Oe=S(Oe,J[F]),Oe=Oe+re|0,j=re,re=ne,ne=S(ie,10),ie=Z,Z=Oe,Oe=fe+k[N+ee[F]]|0,F<16?Oe+=I(ye,Qe,we)+U[0]:F<32?Oe+=b(ye,Qe,we)+U[1]:F<48?Oe+=v(ye,Qe,we)+U[2]:F<64?Oe+=y(ye,Qe,we)+U[3]:Oe+=A(ye,Qe,we)+U[4],Oe=Oe|0,Oe=S(Oe,G[F]),Oe=Oe+Xe|0,fe=Xe,Xe=we,we=S(Qe,10),Qe=ye,ye=Oe;Oe=z[1]+ie+we|0,z[1]=z[2]+ne+Xe|0,z[2]=z[3]+re+fe|0,z[3]=z[4]+j+ye|0,z[4]=z[0]+Z+Qe|0,z[0]=Oe},"_doProcessBlock"),_doFinalize:a(function(){var k=this._data,N=k.words,F=this._nDataBytes*8,O=k.sigBytes*8;N[O>>>5]|=128<<24-O%32,N[(O+64>>>9<<4)+14]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,k.sigBytes=(N.length+1)*4,this._process();for(var Y=this._hash,z=Y.words,V=0;V<5;V++){var U=z[V];z[V]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}return Y},"_doFinalize"),clone:a(function(){var k=s.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function A(k,N,F){return k^N^F}a(A,"f1");function y(k,N,F){return k&N|~k&F}a(y,"f2");function v(k,N,F){return(k|~N)^F}a(v,"f3");function b(k,N,F){return k&F|N&~F}a(b,"f4");function I(k,N,F){return k^(N|~F)}a(I,"f5");function S(k,N){return k<<N|k>>>32-N}a(S,"rotl"),r.RIPEMD160=s._createHelper(g),r.HmacRIPEMD160=s._createHmacHelper(g)}(Math),t.RIPEMD160})});var lj=$((cj,i3e)=>{f();(function(t,e){typeof cj=="object"?i3e.exports=cj=e(ao()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(cj,function(t){(function(){var e=t,r=e.lib,n=r.Base,o=e.enc,s=o.Utf8,c=e.algo,l=c.HMAC=n.extend({init:a(function(u,d){u=this._hasher=new u.init,typeof d=="string"&&(d=s.parse(d));var p=u.blockSize,m=p*4;d.sigBytes>m&&(d=u.finalize(d)),d.clamp();for(var h=this._oKey=d.clone(),g=this._iKey=d.clone(),A=h.words,y=g.words,v=0;v<p;v++)A[v]^=1549556828,y[v]^=909522486;h.sigBytes=g.sigBytes=m,this.reset()},"init"),reset:a(function(){var u=this._hasher;u.reset(),u.update(this._iKey)},"reset"),update:a(function(u){return this._hasher.update(u),this},"update"),finalize:a(function(u){var d=this._hasher,p=d.finalize(u);d.reset();var m=d.finalize(this._oKey.clone().concat(p));return m},"finalize")})})()})});var s3e=$((uj,o3e)=>{f();(function(t,e,r){typeof uj=="object"?o3e.exports=uj=e(ao(),rj(),lj()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(uj,function(t){return function(){var e=t,r=e.lib,n=r.Base,o=r.WordArray,s=e.algo,c=s.SHA256,l=s.HMAC,u=s.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:c,iterations:25e4}),init:a(function(d){this.cfg=this.cfg.extend(d)},"init"),compute:a(function(d,p){for(var m=this.cfg,h=l.create(m.hasher,d),g=o.create(),A=o.create([1]),y=g.words,v=A.words,b=m.keySize,I=m.iterations;y.length<b;){var S=h.update(p).finalize(A);h.reset();for(var k=S.words,N=k.length,F=S,O=1;O<I;O++){F=h.finalize(F),h.reset();for(var Y=F.words,z=0;z<N;z++)k[z]^=Y[z]}g.concat(S),v[0]++}return g.sigBytes=b*4,g},"compute")});e.PBKDF2=function(d,p,m){return u.create(m).compute(d,p)}}(),t.PBKDF2})});var Fv=$((dj,a3e)=>{f();(function(t,e,r){typeof dj=="object"?a3e.exports=dj=e(ao(),npe(),lj()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(dj,function(t){return function(){var e=t,r=e.lib,n=r.Base,o=r.WordArray,s=e.algo,c=s.MD5,l=s.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:c,iterations:1}),init:a(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:a(function(u,d){for(var p,m=this.cfg,h=m.hasher.create(),g=o.create(),A=g.words,y=m.keySize,v=m.iterations;A.length<y;){p&&h.update(p),p=h.update(u).finalize(d),h.reset();for(var b=1;b<v;b++)p=h.finalize(p),h.reset();g.concat(p)}return g.sigBytes=y*4,g},"compute")});e.EvpKDF=function(u,d,p){return l.create(p).compute(u,d)}}(),t.EvpKDF})});var Pl=$((fj,c3e)=>{f();(function(t,e,r){typeof fj=="object"?c3e.exports=fj=e(ao(),Fv()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(fj,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,o=n.Base,s=n.WordArray,c=n.BufferedBlockAlgorithm,l=r.enc,u=l.Utf8,d=l.Base64,p=r.algo,m=p.EvpKDF,h=n.Cipher=c.extend({cfg:o.extend(),createEncryptor:a(function(U,H){return this.create(this._ENC_XFORM_MODE,U,H)},"createEncryptor"),createDecryptor:a(function(U,H){return this.create(this._DEC_XFORM_MODE,U,H)},"createDecryptor"),init:a(function(U,H,ee){this.cfg=this.cfg.extend(ee),this._xformMode=U,this._key=H,this.reset()},"init"),reset:a(function(){c.reset.call(this),this._doReset()},"reset"),process:a(function(U){return this._append(U),this._process()},"process"),finalize:a(function(U){U&&this._append(U);var H=this._doFinalize();return H},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function U(H){return typeof H=="string"?V:O}return a(U,"selectCipherStrategy"),function(H){return{encrypt:a(function(ee,J,G){return U(J).encrypt(H,ee,J,G)},"encrypt"),decrypt:a(function(ee,J,G){return U(J).decrypt(H,ee,J,G)},"decrypt")}}}()}),g=n.StreamCipher=h.extend({_doFinalize:a(function(){var U=this._process(!0);return U},"_doFinalize"),blockSize:1}),A=r.mode={},y=n.BlockCipherMode=o.extend({createEncryptor:a(function(U,H){return this.Encryptor.create(U,H)},"createEncryptor"),createDecryptor:a(function(U,H){return this.Decryptor.create(U,H)},"createDecryptor"),init:a(function(U,H){this._cipher=U,this._iv=H},"init")}),v=A.CBC=function(){var U=y.extend();U.Encryptor=U.extend({processBlock:a(function(ee,J){var G=this._cipher,j=G.blockSize;H.call(this,ee,J,j),G.encryptBlock(ee,J),this._prevBlock=ee.slice(J,J+j)},"processBlock")}),U.Decryptor=U.extend({processBlock:a(function(ee,J){var G=this._cipher,j=G.blockSize,Z=ee.slice(J,J+j);G.decryptBlock(ee,J),H.call(this,ee,J,j),this._prevBlock=Z},"processBlock")});function H(ee,J,G){var j,Z=this._iv;Z?(j=Z,this._iv=e):j=this._prevBlock;for(var ie=0;ie<G;ie++)ee[J+ie]^=j[ie]}return a(H,"xorBlock"),U}(),b=r.pad={},I=b.Pkcs7={pad:a(function(U,H){for(var ee=H*4,J=ee-U.sigBytes%ee,G=J<<24|J<<16|J<<8|J,j=[],Z=0;Z<J;Z+=4)j.push(G);var ie=s.create(j,J);U.concat(ie)},"pad"),unpad:a(function(U){var H=U.words[U.sigBytes-1>>>2]&255;U.sigBytes-=H},"unpad")},S=n.BlockCipher=h.extend({cfg:h.cfg.extend({mode:v,padding:I}),reset:a(function(){var U;h.reset.call(this);var H=this.cfg,ee=H.iv,J=H.mode;this._xformMode==this._ENC_XFORM_MODE?U=J.createEncryptor:(U=J.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==U?this._mode.init(this,ee&&ee.words):(this._mode=U.call(J,this,ee&&ee.words),this._mode.__creator=U)},"reset"),_doProcessBlock:a(function(U,H){this._mode.processBlock(U,H)},"_doProcessBlock"),_doFinalize:a(function(){var U,H=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(H.pad(this._data,this.blockSize),U=this._process(!0)):(U=this._process(!0),H.unpad(U)),U},"_doFinalize"),blockSize:128/32}),k=n.CipherParams=o.extend({init:a(function(U){this.mixIn(U)},"init"),toString:a(function(U){return(U||this.formatter).stringify(this)},"toString")}),N=r.format={},F=N.OpenSSL={stringify:a(function(U){var H,ee=U.ciphertext,J=U.salt;return J?H=s.create([1398893684,1701076831]).concat(J).concat(ee):H=ee,H.toString(d)},"stringify"),parse:a(function(U){var H,ee=d.parse(U),J=ee.words;return J[0]==1398893684&&J[1]==1701076831&&(H=s.create(J.slice(2,4)),J.splice(0,4),ee.sigBytes-=16),k.create({ciphertext:ee,salt:H})},"parse")},O=n.SerializableCipher=o.extend({cfg:o.extend({format:F}),encrypt:a(function(U,H,ee,J){J=this.cfg.extend(J);var G=U.createEncryptor(ee,J),j=G.finalize(H),Z=G.cfg;return k.create({ciphertext:j,key:ee,iv:Z.iv,algorithm:U,mode:Z.mode,padding:Z.padding,blockSize:U.blockSize,formatter:J.format})},"encrypt"),decrypt:a(function(U,H,ee,J){J=this.cfg.extend(J),H=this._parse(H,J.format);var G=U.createDecryptor(ee,J).finalize(H.ciphertext);return G},"decrypt"),_parse:a(function(U,H){return typeof U=="string"?H.parse(U,this):U},"_parse")}),Y=r.kdf={},z=Y.OpenSSL={execute:a(function(U,H,ee,J,G){if(J||(J=s.random(64/8)),G)var j=m.create({keySize:H+ee,hasher:G}).compute(U,J);else var j=m.create({keySize:H+ee}).compute(U,J);var Z=s.create(j.words.slice(H),ee*4);return j.sigBytes=H*4,k.create({key:j,iv:Z,salt:J})},"execute")},V=n.PasswordBasedCipher=O.extend({cfg:O.cfg.extend({kdf:z}),encrypt:a(function(U,H,ee,J){J=this.cfg.extend(J);var G=J.kdf.execute(ee,U.keySize,U.ivSize,J.salt,J.hasher);J.iv=G.iv;var j=O.encrypt.call(this,U,H,G.key,J);return j.mixIn(G),j},"encrypt"),decrypt:a(function(U,H,ee,J){J=this.cfg.extend(J),H=this._parse(H,J.format);var G=J.kdf.execute(ee,U.keySize,U.ivSize,H.salt,J.hasher);J.iv=G.iv;var j=O.decrypt.call(this,U,H,G.key,J);return j},"decrypt")})}()})});var u3e=$((pj,l3e)=>{f();(function(t,e,r){typeof pj=="object"?l3e.exports=pj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(pj,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:a(function(n,o){var s=this._cipher,c=s.blockSize;r.call(this,n,o,c,s),this._prevBlock=n.slice(o,o+c)},"processBlock")}),e.Decryptor=e.extend({processBlock:a(function(n,o){var s=this._cipher,c=s.blockSize,l=n.slice(o,o+c);r.call(this,n,o,c,s),this._prevBlock=l},"processBlock")});function r(n,o,s,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var d=0;d<s;d++)n[o+d]^=l[d]}return a(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var f3e=$((mj,d3e)=>{f();(function(t,e,r){typeof mj=="object"?d3e.exports=mj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(mj,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:a(function(n,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var d=u.slice(0);s.encryptBlock(d,0),u[c-1]=u[c-1]+1|0;for(var p=0;p<c;p++)n[o+p]^=d[p]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var m3e=$((hj,p3e)=>{f();(function(t,e,r){typeof hj=="object"?p3e.exports=hj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(hj,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(s){if((s>>24&255)===255){var c=s>>16&255,l=s>>8&255,u=s&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,s=0,s+=c<<16,s+=l<<8,s+=u}else s+=1<<24;return s}a(r,"incWord");function n(s){return(s[0]=r(s[0]))===0&&(s[1]=r(s[1])),s}a(n,"incCounter");var o=e.Encryptor=e.extend({processBlock:a(function(s,c){var l=this._cipher,u=l.blockSize,d=this._iv,p=this._counter;d&&(p=this._counter=d.slice(0),this._iv=void 0),n(p);var m=p.slice(0);l.encryptBlock(m,0);for(var h=0;h<u;h++)s[c+h]^=m[h]},"processBlock")});return e.Decryptor=o,e}(),t.mode.CTRGladman})});var g3e=$((gj,h3e)=>{f();(function(t,e,r){typeof gj=="object"?h3e.exports=gj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(gj,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:a(function(n,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),s.encryptBlock(u,0);for(var d=0;d<c;d++)n[o+d]^=u[d]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var y3e=$((Aj,A3e)=>{f();(function(t,e,r){typeof Aj=="object"?A3e.exports=Aj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Aj,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:a(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:a(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var v3e=$((yj,C3e)=>{f();(function(t,e,r){typeof yj=="object"?C3e.exports=yj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(yj,function(t){return t.pad.AnsiX923={pad:a(function(e,r){var n=e.sigBytes,o=r*4,s=o-n%o,c=n+s-1;e.clamp(),e.words[c>>>2]|=s<<24-c%4*8,e.sigBytes+=s},"pad"),unpad:a(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var E3e=$((Cj,x3e)=>{f();(function(t,e,r){typeof Cj=="object"?x3e.exports=Cj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Cj,function(t){return t.pad.Iso10126={pad:a(function(e,r){var n=r*4,o=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(o-1)).concat(t.lib.WordArray.create([o<<24],1))},"pad"),unpad:a(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var I3e=$((vj,b3e)=>{f();(function(t,e,r){typeof vj=="object"?b3e.exports=vj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(vj,function(t){return t.pad.Iso97971={pad:a(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:a(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var w3e=$((xj,T3e)=>{f();(function(t,e,r){typeof xj=="object"?T3e.exports=xj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(xj,function(t){return t.pad.ZeroPadding={pad:a(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:a(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var S3e=$((Ej,_3e)=>{f();(function(t,e,r){typeof Ej=="object"?_3e.exports=Ej=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Ej,function(t){return t.pad.NoPadding={pad:a(function(){},"pad"),unpad:a(function(){},"unpad")},t.pad.NoPadding})});var k3e=$((bj,R3e)=>{f();(function(t,e,r){typeof bj=="object"?R3e.exports=bj=e(ao(),Pl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(bj,function(t){return function(e){var r=t,n=r.lib,o=n.CipherParams,s=r.enc,c=s.Hex,l=r.format,u=l.Hex={stringify:a(function(d){return d.ciphertext.toString(c)},"stringify"),parse:a(function(d){var p=c.parse(d);return o.create({ciphertext:p})},"parse")}}(),t.format.Hex})});var D3e=$((Ij,P3e)=>{f();(function(t,e,r){typeof Ij=="object"?P3e.exports=Ij=e(ao(),CI(),vI(),Fv(),Pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Ij,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,o=e.algo,s=[],c=[],l=[],u=[],d=[],p=[],m=[],h=[],g=[],A=[];(function(){for(var b=[],I=0;I<256;I++)I<128?b[I]=I<<1:b[I]=I<<1^283;for(var S=0,k=0,I=0;I<256;I++){var N=k^k<<1^k<<2^k<<3^k<<4;N=N>>>8^N&255^99,s[S]=N,c[N]=S;var F=b[S],O=b[F],Y=b[O],z=b[N]*257^N*16843008;l[S]=z<<24|z>>>8,u[S]=z<<16|z>>>16,d[S]=z<<8|z>>>24,p[S]=z;var z=Y*16843009^O*65537^F*257^S*16843008;m[N]=z<<24|z>>>8,h[N]=z<<16|z>>>16,g[N]=z<<8|z>>>24,A[N]=z,S?(S=F^b[b[b[Y^F]]],k^=b[b[k]]):S=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=n.extend({_doReset:a(function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,S=I.words,k=I.sigBytes/4,N=this._nRounds=k+6,F=(N+1)*4,O=this._keySchedule=[],Y=0;Y<F;Y++)Y<k?O[Y]=S[Y]:(b=O[Y-1],Y%k?k>6&&Y%k==4&&(b=s[b>>>24]<<24|s[b>>>16&255]<<16|s[b>>>8&255]<<8|s[b&255]):(b=b<<8|b>>>24,b=s[b>>>24]<<24|s[b>>>16&255]<<16|s[b>>>8&255]<<8|s[b&255],b^=y[Y/k|0]<<24),O[Y]=O[Y-k]^b);for(var z=this._invKeySchedule=[],V=0;V<F;V++){var Y=F-V;if(V%4)var b=O[Y];else var b=O[Y-4];V<4||Y<=4?z[V]=b:z[V]=m[s[b>>>24]]^h[s[b>>>16&255]]^g[s[b>>>8&255]]^A[s[b&255]]}}},"_doReset"),encryptBlock:a(function(b,I){this._doCryptBlock(b,I,this._keySchedule,l,u,d,p,s)},"encryptBlock"),decryptBlock:a(function(b,I){var S=b[I+1];b[I+1]=b[I+3],b[I+3]=S,this._doCryptBlock(b,I,this._invKeySchedule,m,h,g,A,c);var S=b[I+1];b[I+1]=b[I+3],b[I+3]=S},"decryptBlock"),_doCryptBlock:a(function(b,I,S,k,N,F,O,Y){for(var z=this._nRounds,V=b[I]^S[0],U=b[I+1]^S[1],H=b[I+2]^S[2],ee=b[I+3]^S[3],J=4,G=1;G<z;G++){var j=k[V>>>24]^N[U>>>16&255]^F[H>>>8&255]^O[ee&255]^S[J++],Z=k[U>>>24]^N[H>>>16&255]^F[ee>>>8&255]^O[V&255]^S[J++],ie=k[H>>>24]^N[ee>>>16&255]^F[V>>>8&255]^O[U&255]^S[J++],ne=k[ee>>>24]^N[V>>>16&255]^F[U>>>8&255]^O[H&255]^S[J++];V=j,U=Z,H=ie,ee=ne}var j=(Y[V>>>24]<<24|Y[U>>>16&255]<<16|Y[H>>>8&255]<<8|Y[ee&255])^S[J++],Z=(Y[U>>>24]<<24|Y[H>>>16&255]<<16|Y[ee>>>8&255]<<8|Y[V&255])^S[J++],ie=(Y[H>>>24]<<24|Y[ee>>>16&255]<<16|Y[V>>>8&255]<<8|Y[U&255])^S[J++],ne=(Y[ee>>>24]<<24|Y[V>>>16&255]<<16|Y[U>>>8&255]<<8|Y[H&255])^S[J++];b[I]=j,b[I+1]=Z,b[I+2]=ie,b[I+3]=ne},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(v)}(),t.AES})});var N3e=$((Tj,B3e)=>{f();(function(t,e,r){typeof Tj=="object"?B3e.exports=Tj=e(ao(),CI(),vI(),Fv(),Pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Tj,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,o=r.BlockCipher,s=e.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],p=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=s.DES=o.extend({_doReset:a(function(){for(var y=this._key,v=y.words,b=[],I=0;I<56;I++){var S=c[I]-1;b[I]=v[S>>>5]>>>31-S%32&1}for(var k=this._subKeys=[],N=0;N<16;N++){for(var F=k[N]=[],O=u[N],I=0;I<24;I++)F[I/6|0]|=b[(l[I]-1+O)%28]<<31-I%6,F[4+(I/6|0)]|=b[28+(l[I+24]-1+O)%28]<<31-I%6;F[0]=F[0]<<1|F[0]>>>31;for(var I=1;I<7;I++)F[I]=F[I]>>>(I-1)*4+3;F[7]=F[7]<<5|F[7]>>>27}for(var Y=this._invSubKeys=[],I=0;I<16;I++)Y[I]=k[15-I]},"_doReset"),encryptBlock:a(function(y,v){this._doCryptBlock(y,v,this._subKeys)},"encryptBlock"),decryptBlock:a(function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},"decryptBlock"),_doCryptBlock:a(function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],h.call(this,4,252645135),h.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),h.call(this,1,1431655765);for(var I=0;I<16;I++){for(var S=b[I],k=this._lBlock,N=this._rBlock,F=0,O=0;O<8;O++)F|=d[O][((N^S[O])&p[O])>>>0];this._lBlock=N,this._rBlock=k^F}var Y=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Y,h.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function h(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}a(h,"exchangeLR");function g(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}a(g,"exchangeRL"),e.DES=o._createHelper(m);var A=s.TripleDES=o.extend({_doReset:a(function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),I=v.length<4?v.slice(0,2):v.slice(2,4),S=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=m.createEncryptor(n.create(b)),this._des2=m.createEncryptor(n.create(I)),this._des3=m.createEncryptor(n.create(S))},"_doReset"),encryptBlock:a(function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},"encryptBlock"),decryptBlock:a(function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=o._createHelper(A)}(),t.TripleDES})});var L3e=$((wj,M3e)=>{f();(function(t,e,r){typeof wj=="object"?M3e.exports=wj=e(ao(),CI(),vI(),Fv(),Pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(wj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,o=e.algo,s=o.RC4=n.extend({_doReset:a(function(){for(var u=this._key,d=u.words,p=u.sigBytes,m=this._S=[],h=0;h<256;h++)m[h]=h;for(var h=0,g=0;h<256;h++){var A=h%p,y=d[A>>>2]>>>24-A%4*8&255;g=(g+m[h]+y)%256;var v=m[h];m[h]=m[g],m[g]=v}this._i=this._j=0},"_doReset"),_doProcessBlock:a(function(u,d){u[d]^=c.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function c(){for(var u=this._S,d=this._i,p=this._j,m=0,h=0;h<4;h++){d=(d+1)%256,p=(p+u[d])%256;var g=u[d];u[d]=u[p],u[p]=g,m|=u[(u[d]+u[p])%256]<<24-h*8}return this._i=d,this._j=p,m}a(c,"generateKeystreamWord"),e.RC4=n._createHelper(s);var l=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:a(function(){s._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)},"_doReset")});e.RC4Drop=n._createHelper(l)}(),t.RC4})});var O3e=$((_j,F3e)=>{f();(function(t,e,r){typeof _j=="object"?F3e.exports=_j=e(ao(),CI(),vI(),Fv(),Pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(_j,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,o=e.algo,s=[],c=[],l=[],u=o.Rabbit=n.extend({_doReset:a(function(){for(var p=this._key.words,m=this.cfg.iv,h=0;h<4;h++)p[h]=(p[h]<<8|p[h]>>>24)&16711935|(p[h]<<24|p[h]>>>8)&4278255360;var g=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],A=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var h=0;h<4;h++)d.call(this);for(var h=0;h<8;h++)A[h]^=g[h+4&7];if(m){var y=m.words,v=y[0],b=y[1],I=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,S=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=I>>>16|S&4294901760,N=S<<16|I&65535;A[0]^=I,A[1]^=k,A[2]^=S,A[3]^=N,A[4]^=I,A[5]^=k,A[6]^=S,A[7]^=N;for(var h=0;h<4;h++)d.call(this)}},"_doReset"),_doProcessBlock:a(function(p,m){var h=this._X;d.call(this),s[0]=h[0]^h[5]>>>16^h[3]<<16,s[1]=h[2]^h[7]>>>16^h[5]<<16,s[2]=h[4]^h[1]>>>16^h[7]<<16,s[3]=h[6]^h[3]>>>16^h[1]<<16;for(var g=0;g<4;g++)s[g]=(s[g]<<8|s[g]>>>24)&16711935|(s[g]<<24|s[g]>>>8)&4278255360,p[m+g]^=s[g]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function d(){for(var p=this._X,m=this._C,h=0;h<8;h++)c[h]=m[h];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<c[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<c[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<c[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<c[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<c[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<c[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<c[6]>>>0?1:0)|0,this._b=m[7]>>>0<c[7]>>>0?1:0;for(var h=0;h<8;h++){var g=p[h]+m[h],A=g&65535,y=g>>>16,v=((A*A>>>17)+A*y>>>15)+y*y,b=((g&4294901760)*g|0)+((g&65535)*g|0);l[h]=v^b}p[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,p[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,p[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,p[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,p[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,p[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,p[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,p[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}a(d,"nextState"),e.Rabbit=n._createHelper(u)}(),t.Rabbit})});var U3e=$((Sj,Q3e)=>{f();(function(t,e,r){typeof Sj=="object"?Q3e.exports=Sj=e(ao(),CI(),vI(),Fv(),Pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Sj,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,o=e.algo,s=[],c=[],l=[],u=o.RabbitLegacy=n.extend({_doReset:a(function(){var p=this._key.words,m=this.cfg.iv,h=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],g=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var A=0;A<4;A++)d.call(this);for(var A=0;A<8;A++)g[A]^=h[A+4&7];if(m){var y=m.words,v=y[0],b=y[1],I=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,S=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=I>>>16|S&4294901760,N=S<<16|I&65535;g[0]^=I,g[1]^=k,g[2]^=S,g[3]^=N,g[4]^=I,g[5]^=k,g[6]^=S,g[7]^=N;for(var A=0;A<4;A++)d.call(this)}},"_doReset"),_doProcessBlock:a(function(p,m){var h=this._X;d.call(this),s[0]=h[0]^h[5]>>>16^h[3]<<16,s[1]=h[2]^h[7]>>>16^h[5]<<16,s[2]=h[4]^h[1]>>>16^h[7]<<16,s[3]=h[6]^h[3]>>>16^h[1]<<16;for(var g=0;g<4;g++)s[g]=(s[g]<<8|s[g]>>>24)&16711935|(s[g]<<24|s[g]>>>8)&4278255360,p[m+g]^=s[g]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function d(){for(var p=this._X,m=this._C,h=0;h<8;h++)c[h]=m[h];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<c[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<c[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<c[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<c[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<c[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<c[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<c[6]>>>0?1:0)|0,this._b=m[7]>>>0<c[7]>>>0?1:0;for(var h=0;h<8;h++){var g=p[h]+m[h],A=g&65535,y=g>>>16,v=((A*A>>>17)+A*y>>>15)+y*y,b=((g&4294901760)*g|0)+((g&65535)*g|0);l[h]=v^b}p[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,p[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,p[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,p[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,p[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,p[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,p[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,p[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}a(d,"nextState"),e.RabbitLegacy=n._createHelper(u)}(),t.RabbitLegacy})});var H3e=$((Rj,q3e)=>{f();(function(t,e,r){typeof Rj=="object"?q3e.exports=Rj=e(ao(),CI(),vI(),Fv(),Pl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Rj,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,o=e.algo;let s=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(A,y){let v=y>>24&255,b=y>>16&255,I=y>>8&255,S=y&255,k=A.sbox[0][v]+A.sbox[1][b];return k=k^A.sbox[2][I],k=k+A.sbox[3][S],k}a(d,"F");function p(A,y,v){let b=y,I=v,S;for(let k=0;k<s;++k)b=b^A.pbox[k],I=d(A,b)^I,S=b,b=I,I=S;return S=b,b=I,I=S,I=I^A.pbox[s],b=b^A.pbox[s+1],{left:b,right:I}}a(p,"BlowFish_Encrypt");function m(A,y,v){let b=y,I=v,S;for(let k=s+1;k>1;--k)b=b^A.pbox[k],I=d(A,b)^I,S=b,b=I,I=S;return S=b,b=I,I=S,I=I^A.pbox[1],b=b^A.pbox[0],{left:b,right:I}}a(m,"BlowFish_Decrypt");function h(A,y,v){for(let N=0;N<4;N++){A.sbox[N]=[];for(let F=0;F<256;F++)A.sbox[N][F]=l[N][F]}let b=0;for(let N=0;N<s+2;N++)A.pbox[N]=c[N]^y[b],b++,b>=v&&(b=0);let I=0,S=0,k=0;for(let N=0;N<s+2;N+=2)k=p(A,I,S),I=k.left,S=k.right,A.pbox[N]=I,A.pbox[N+1]=S;for(let N=0;N<4;N++)for(let F=0;F<256;F+=2)k=p(A,I,S),I=k.left,S=k.right,A.sbox[N][F]=I,A.sbox[N][F+1]=S;return!0}a(h,"BlowFishInit");var g=o.Blowfish=n.extend({_doReset:a(function(){if(this._keyPriorReset!==this._key){var A=this._keyPriorReset=this._key,y=A.words,v=A.sigBytes/4;h(u,y,v)}},"_doReset"),encryptBlock:a(function(A,y){var v=p(u,A[y],A[y+1]);A[y]=v.left,A[y+1]=v.right},"encryptBlock"),decryptBlock:a(function(A,y){var v=m(u,A[y],A[y+1]);A[y]=v.left,A[y+1]=v.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(g)}(),t.Blowfish})});var xI=$((kj,$3e)=>{f();(function(t,e,r){typeof kj=="object"?$3e.exports=kj=e(ao(),WF(),UBe(),HBe(),CI(),jBe(),vI(),npe(),rj(),YBe(),ipe(),ZBe(),t3e(),n3e(),lj(),s3e(),Fv(),Pl(),u3e(),f3e(),m3e(),g3e(),y3e(),v3e(),E3e(),I3e(),w3e(),S3e(),k3e(),D3e(),N3e(),L3e(),O3e(),U3e(),H3e()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(kj,function(t){return t})});var hD=$(Md=>{"use strict";f();Object.defineProperty(Md,"__esModule",{value:!0});Md.stringArray=Md.array=Md.func=Md.error=Md.number=Md.string=Md.boolean=void 0;function q5t(t){return t===!0||t===!1}a(q5t,"boolean");Md.boolean=q5t;function BMe(t){return typeof t=="string"||t instanceof String}a(BMe,"string");Md.string=BMe;function H5t(t){return typeof t=="number"||t instanceof Number}a(H5t,"number");Md.number=H5t;function $5t(t){return t instanceof Error}a($5t,"error");Md.error=$5t;function W5t(t){return typeof t=="function"}a(W5t,"func");Md.func=W5t;function NMe(t){return Array.isArray(t)}a(NMe,"array");Md.array=NMe;function j5t(t){return NMe(t)&&t.every(e=>BMe(e))}a(j5t,"stringArray");Md.stringArray=j5t});var N0e=$(mn=>{"use strict";f();Object.defineProperty(mn,"__esModule",{value:!0});mn.Message=mn.NotificationType9=mn.NotificationType8=mn.NotificationType7=mn.NotificationType6=mn.NotificationType5=mn.NotificationType4=mn.NotificationType3=mn.NotificationType2=mn.NotificationType1=mn.NotificationType0=mn.NotificationType=mn.RequestType9=mn.RequestType8=mn.RequestType7=mn.RequestType6=mn.RequestType5=mn.RequestType4=mn.RequestType3=mn.RequestType2=mn.RequestType1=mn.RequestType=mn.RequestType0=mn.AbstractMessageSignature=mn.ParameterStructures=mn.ResponseError=mn.ErrorCodes=void 0;var i2=hD(),u0e;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(u0e||(mn.ErrorCodes=u0e={}));var d0e=class t extends Error{static{a(this,"ResponseError")}constructor(e,r,n){super(r),this.code=i2.number(e)?e:u0e.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};mn.ResponseError=d0e;var dp=class t{static{a(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};mn.ParameterStructures=dp;dp.auto=new dp("auto");dp.byPosition=new dp("byPosition");dp.byName=new dp("byName");var ia=class{static{a(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return dp.auto}};mn.AbstractMessageSignature=ia;var f0e=class extends ia{static{a(this,"RequestType0")}constructor(e){super(e,0)}};mn.RequestType0=f0e;var p0e=class extends ia{static{a(this,"RequestType")}constructor(e,r=dp.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};mn.RequestType=p0e;var m0e=class extends ia{static{a(this,"RequestType1")}constructor(e,r=dp.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};mn.RequestType1=m0e;var h0e=class extends ia{static{a(this,"RequestType2")}constructor(e){super(e,2)}};mn.RequestType2=h0e;var g0e=class extends ia{static{a(this,"RequestType3")}constructor(e){super(e,3)}};mn.RequestType3=g0e;var A0e=class extends ia{static{a(this,"RequestType4")}constructor(e){super(e,4)}};mn.RequestType4=A0e;var y0e=class extends ia{static{a(this,"RequestType5")}constructor(e){super(e,5)}};mn.RequestType5=y0e;var C0e=class extends ia{static{a(this,"RequestType6")}constructor(e){super(e,6)}};mn.RequestType6=C0e;var v0e=class extends ia{static{a(this,"RequestType7")}constructor(e){super(e,7)}};mn.RequestType7=v0e;var x0e=class extends ia{static{a(this,"RequestType8")}constructor(e){super(e,8)}};mn.RequestType8=x0e;var E0e=class extends ia{static{a(this,"RequestType9")}constructor(e){super(e,9)}};mn.RequestType9=E0e;var b0e=class extends ia{static{a(this,"NotificationType")}constructor(e,r=dp.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};mn.NotificationType=b0e;var I0e=class extends ia{static{a(this,"NotificationType0")}constructor(e){super(e,0)}};mn.NotificationType0=I0e;var T0e=class extends ia{static{a(this,"NotificationType1")}constructor(e,r=dp.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};mn.NotificationType1=T0e;var w0e=class extends ia{static{a(this,"NotificationType2")}constructor(e){super(e,2)}};mn.NotificationType2=w0e;var _0e=class extends ia{static{a(this,"NotificationType3")}constructor(e){super(e,3)}};mn.NotificationType3=_0e;var S0e=class extends ia{static{a(this,"NotificationType4")}constructor(e){super(e,4)}};mn.NotificationType4=S0e;var R0e=class extends ia{static{a(this,"NotificationType5")}constructor(e){super(e,5)}};mn.NotificationType5=R0e;var k0e=class extends ia{static{a(this,"NotificationType6")}constructor(e){super(e,6)}};mn.NotificationType6=k0e;var P0e=class extends ia{static{a(this,"NotificationType7")}constructor(e){super(e,7)}};mn.NotificationType7=P0e;var D0e=class extends ia{static{a(this,"NotificationType8")}constructor(e){super(e,8)}};mn.NotificationType8=D0e;var B0e=class extends ia{static{a(this,"NotificationType9")}constructor(e){super(e,9)}};mn.NotificationType9=B0e;var MMe;(function(t){function e(o){let s=o;return s&&i2.string(s.method)&&(i2.string(s.id)||i2.number(s.id))}a(e,"isRequest"),t.isRequest=e;function r(o){let s=o;return s&&i2.string(s.method)&&o.id===void 0}a(r,"isNotification"),t.isNotification=r;function n(o){let s=o;return s&&(s.result!==void 0||!!s.error)&&(i2.string(s.id)||i2.number(s.id)||s.id===null)}a(n,"isResponse"),t.isResponse=n})(MMe||(mn.Message=MMe={}))});var L0e=$(BI=>{"use strict";f();var LMe;Object.defineProperty(BI,"__esModule",{value:!0});BI.LRUCache=BI.LinkedMap=BI.Touch=void 0;var Ld;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Ld||(BI.Touch=Ld={}));var CG=class{static{a(this,"LinkedMap")}constructor(){this[LMe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=Ld.None){let n=this._map.get(e);if(n)return r!==Ld.None&&this.touch(n,r),n.value}set(e,r,n=Ld.None){let o=this._map.get(e);if(o)o.value=r,n!==Ld.None&&this.touch(o,n);else{switch(o={key:e,value:r,next:void 0,previous:void 0},n){case Ld.None:this.addItemLast(o);break;case Ld.First:this.addItemFirst(o);break;case Ld.Last:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,o=this._head;for(;o;){if(r?e.bind(r)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:a(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:a(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:a(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}},"next")};return n}[(LMe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Ld.First&&r!==Ld.Last)){if(r===Ld.First){if(e===this._head)return;let n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===Ld.Last){if(e===this._tail)return;let n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};BI.LinkedMap=CG;var M0e=class extends CG{static{a(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=Ld.AsNew){return super.get(e,r)}peek(e){return super.get(e,Ld.None)}set(e,r){return super.set(e,r,Ld.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};BI.LRUCache=M0e});var OMe=$(vG=>{"use strict";f();Object.defineProperty(vG,"__esModule",{value:!0});vG.Disposable=void 0;var FMe;(function(t){function e(r){return{dispose:r}}a(e,"create"),t.create=e})(FMe||(vG.Disposable=FMe={}))});var NI=$(Q0e=>{"use strict";f();Object.defineProperty(Q0e,"__esModule",{value:!0});var F0e;function O0e(){if(F0e===void 0)throw new Error("No runtime abstraction layer installed");return F0e}a(O0e,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");F0e=r}a(e,"install"),t.install=e})(O0e||(O0e={}));Q0e.default=O0e});var AD=$(gD=>{"use strict";f();Object.defineProperty(gD,"__esModule",{value:!0});gD.Emitter=gD.Event=void 0;var G5t=NI(),QMe;(function(t){let e={dispose(){}};t.None=function(){return e}})(QMe||(gD.Event=QMe={}));var U0e=class{static{a(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:a(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let o=0,s=this._callbacks.length;o<s;o++)if(this._callbacks[o]===e)if(this._contexts[o]===r){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),o=this._contexts.slice(0);for(let s=0,c=n.length;s<c;s++)try{r.push(n[s].apply(o[s],e))}catch(l){(0,G5t.default)().console.error(l)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},xG=class t{static{a(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new U0e),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let o={dispose:a(()=>{this._callbacks&&(this._callbacks.remove(e,r),o.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};gD.Emitter=xG;xG._noop=function(){}});var IG=$(yD=>{"use strict";f();Object.defineProperty(yD,"__esModule",{value:!0});yD.CancellationTokenSource=yD.CancellationToken=void 0;var V5t=NI(),z5t=hD(),q0e=AD(),EG;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:q0e.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:q0e.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||z5t.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}a(e,"is"),t.is=e})(EG||(yD.CancellationToken=EG={}));var K5t=Object.freeze(function(t,e){let r=(0,V5t.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),bG=class{static{a(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?K5t:(this._emitter||(this._emitter=new q0e.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},H0e=class{static{a(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new bG),this._token}cancel(){this._token?this._token.cancel():this._token=EG.Cancelled}dispose(){this._token?this._token instanceof bG&&this._token.dispose():this._token=EG.None}};yD.CancellationTokenSource=H0e});var UMe=$(CD=>{"use strict";f();Object.defineProperty(CD,"__esModule",{value:!0});CD.SharedArrayReceiverStrategy=CD.SharedArraySenderStrategy=void 0;var Y5t=IG(),d6;(function(t){t.Continue=0,t.Cancelled=1})(d6||(d6={}));var $0e=class{static{a(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=d6.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let o=new Int32Array(n,0,1);Atomics.store(o,0,d6.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};CD.SharedArraySenderStrategy=$0e;var W0e=class{static{a(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===d6.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},j0e=class{static{a(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new W0e(e)}cancel(){}dispose(){}},G0e=class{static{a(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new Y5t.CancellationTokenSource:new j0e(r)}};CD.SharedArrayReceiverStrategy=G0e});var z0e=$(TG=>{"use strict";f();Object.defineProperty(TG,"__esModule",{value:!0});TG.Semaphore=void 0;var J5t=NI(),V0e=class{static{a(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,J5t.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};TG.Semaphore=V0e});var HMe=$(MI=>{"use strict";f();Object.defineProperty(MI,"__esModule",{value:!0});MI.ReadableStreamMessageReader=MI.AbstractMessageReader=MI.MessageReader=void 0;var Y0e=NI(),vD=hD(),K0e=AD(),X5t=z0e(),qMe;(function(t){function e(r){let n=r;return n&&vD.func(n.listen)&&vD.func(n.dispose)&&vD.func(n.onError)&&vD.func(n.onClose)&&vD.func(n.onPartialMessage)}a(e,"is"),t.is=e})(qMe||(MI.MessageReader=qMe={}));var wG=class{static{a(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new K0e.Emitter,this.closeEmitter=new K0e.Emitter,this.partialMessageEmitter=new K0e.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${vD.string(e.message)?e.message:"unknown"}`)}};MI.AbstractMessageReader=wG;var J0e;(function(t){function e(r){let n,o,s,c=new Map,l,u=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(s=r.contentDecoder,c.set(s.name,s)),r.contentDecoders!==void 0)for(let d of r.contentDecoders)c.set(d.name,d);if(r.contentTypeDecoder!==void 0&&(l=r.contentTypeDecoder,u.set(l.name,l)),r.contentTypeDecoders!==void 0)for(let d of r.contentTypeDecoders)u.set(d.name,d)}return l===void 0&&(l=(0,Y0e.default)().applicationJson.decoder,u.set(l.name,l)),{charset:n,contentDecoder:s,contentDecoders:c,contentTypeDecoder:l,contentTypeDecoders:u}}a(e,"fromOptions"),t.fromOptions=e})(J0e||(J0e={}));var X0e=class extends wG{static{a(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=J0e.fromOptions(r),this.buffer=(0,Y0e.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new X5t.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let o=n.get("content-length");if(!o){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let s=parseInt(o);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${o}`));return}this.nextMessageLength=s}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,o=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(o)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Y0e.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};MI.ReadableStreamMessageReader=X0e});var VMe=$(LI=>{"use strict";f();Object.defineProperty(LI,"__esModule",{value:!0});LI.WriteableStreamMessageWriter=LI.AbstractMessageWriter=LI.MessageWriter=void 0;var $Me=NI(),f6=hD(),Z5t=z0e(),WMe=AD(),e4t="Content-Length: ",jMe=`\r
`,GMe;(function(t){function e(r){let n=r;return n&&f6.func(n.dispose)&&f6.func(n.onClose)&&f6.func(n.onError)&&f6.func(n.write)}a(e,"is"),t.is=e})(GMe||(LI.MessageWriter=GMe={}));var _G=class{static{a(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new WMe.Emitter,this.closeEmitter=new WMe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${f6.string(e.message)?e.message:"unknown"}`)}};LI.AbstractMessageWriter=_G;var Z0e;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,$Me.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,$Me.default)().applicationJson.encoder}}a(e,"fromOptions"),t.fromOptions=e})(Z0e||(Z0e={}));var eme=class extends _G{static{a(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=Z0e.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Z5t.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let o=[];return o.push(e4t,n.byteLength.toString(),jMe),o.push(jMe),this.doWrite(e,o,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(o){return this.handleError(o,e),Promise.reject(o)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};LI.WriteableStreamMessageWriter=eme});var zMe=$(SG=>{"use strict";f();Object.defineProperty(SG,"__esModule",{value:!0});SG.AbstractMessageBuffer=void 0;var t4t=13,r4t=10,n4t=`\r
`,tme=class{static{a(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,o=0,s=0;e:for(;n<this._chunks.length;){let d=this._chunks[n];for(o=0;o<d.length;){switch(d[o]){case t4t:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case r4t:switch(r){case 1:r=2;break;case 3:r=4,o++;break e;default:r=0}break;default:r=0}o++}s+=d.byteLength,n++}if(r!==4)return;let c=this._read(s+o),l=new Map,u=this.toString(c,"ascii").split(n4t);if(u.length<2)return l;for(let d=0;d<u.length-2;d++){let p=u[d],m=p.indexOf(":");if(m===-1)throw new Error(`Message header must separate key and value using ':'
${p}`);let h=p.substr(0,m),g=p.substr(m+1).trim();l.set(e?h.toLowerCase():h,g)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],c=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,c}let r=this.allocNative(e),n=0,o=0;for(;e>0;){let s=this._chunks[o];if(s.byteLength>e){let c=s.slice(0,e);r.set(c,n),n+=e,this._chunks[o]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}};SG.AbstractMessageBuffer=tme});var ZMe=$(gi=>{"use strict";f();Object.defineProperty(gi,"__esModule",{value:!0});gi.createMessageConnection=gi.ConnectionOptions=gi.MessageStrategy=gi.CancellationStrategy=gi.CancellationSenderStrategy=gi.CancellationReceiverStrategy=gi.RequestCancellationReceiverStrategy=gi.IdCancellationReceiverStrategy=gi.ConnectionStrategy=gi.ConnectionError=gi.ConnectionErrors=gi.LogTraceNotification=gi.SetTraceNotification=gi.TraceFormat=gi.TraceValues=gi.Trace=gi.NullLogger=gi.ProgressType=gi.ProgressToken=void 0;var KMe=NI(),Ya=hD(),Hn=N0e(),YMe=L0e(),p6=AD(),rme=IG(),g6;(function(t){t.type=new Hn.NotificationType("$/cancelRequest")})(g6||(g6={}));var nme;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}a(e,"is"),t.is=e})(nme||(gi.ProgressToken=nme={}));var m6;(function(t){t.type=new Hn.NotificationType("$/progress")})(m6||(m6={}));var ime=class{static{a(this,"ProgressType")}constructor(){}};gi.ProgressType=ime;var ome;(function(t){function e(r){return Ya.func(r)}a(e,"is"),t.is=e})(ome||(ome={}));gi.NullLogger=Object.freeze({error:a(()=>{},"error"),warn:a(()=>{},"warn"),info:a(()=>{},"info"),log:a(()=>{},"log")});var Jo;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Jo||(gi.Trace=Jo={}));var JMe;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(JMe||(gi.TraceValues=JMe={}));(function(t){function e(n){if(!Ya.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}a(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}a(r,"toString"),t.toString=r})(Jo||(gi.Trace=Jo={}));var b0;(function(t){t.Text="text",t.JSON="json"})(b0||(gi.TraceFormat=b0={}));(function(t){function e(r){return Ya.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}a(e,"fromString"),t.fromString=e})(b0||(gi.TraceFormat=b0={}));var sme;(function(t){t.type=new Hn.NotificationType("$/setTrace")})(sme||(gi.SetTraceNotification=sme={}));var RG;(function(t){t.type=new Hn.NotificationType("$/logTrace")})(RG||(gi.LogTraceNotification=RG={}));var h6;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(h6||(gi.ConnectionErrors=h6={}));var xD=class t extends Error{static{a(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};gi.ConnectionError=xD;var ame;(function(t){function e(r){let n=r;return n&&Ya.func(n.cancelUndispatched)}a(e,"is"),t.is=e})(ame||(gi.ConnectionStrategy=ame={}));var kG;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Ya.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ya.func(n.dispose))}a(e,"is"),t.is=e})(kG||(gi.IdCancellationReceiverStrategy=kG={}));var cme;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Ya.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ya.func(n.dispose))}a(e,"is"),t.is=e})(cme||(gi.RequestCancellationReceiverStrategy=cme={}));var PG;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new rme.CancellationTokenSource}});function e(r){return kG.is(r)||cme.is(r)}a(e,"is"),t.is=e})(PG||(gi.CancellationReceiverStrategy=PG={}));var DG;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(g6.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Ya.func(n.sendCancellation)&&Ya.func(n.cleanup)}a(e,"is"),t.is=e})(DG||(gi.CancellationSenderStrategy=DG={}));var BG;(function(t){t.Message=Object.freeze({receiver:PG.Message,sender:DG.Message});function e(r){let n=r;return n&&PG.is(n.receiver)&&DG.is(n.sender)}a(e,"is"),t.is=e})(BG||(gi.CancellationStrategy=BG={}));var NG;(function(t){function e(r){let n=r;return n&&Ya.func(n.handleMessage)}a(e,"is"),t.is=e})(NG||(gi.MessageStrategy=NG={}));var XMe;(function(t){function e(r){let n=r;return n&&(BG.is(n.cancellationStrategy)||ame.is(n.connectionStrategy)||NG.is(n.messageStrategy))}a(e,"is"),t.is=e})(XMe||(gi.ConnectionOptions=XMe={}));var pA;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(pA||(pA={}));function i4t(t,e,r,n){let o=r!==void 0?r:gi.NullLogger,s=0,c=0,l=0,u="2.0",d,p=new Map,m,h=new Map,g=new Map,A,y=new YMe.LinkedMap,v=new Map,b=new Set,I=new Map,S=Jo.Off,k=b0.Text,N,F=pA.New,O=new p6.Emitter,Y=new p6.Emitter,z=new p6.Emitter,V=new p6.Emitter,U=new p6.Emitter,H=n&&n.cancellationStrategy?n.cancellationStrategy:BG.Message;function ee(xe){if(xe===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+xe.toString()}a(ee,"createRequestQueueKey");function J(xe){return xe===null?"res-unknown-"+(++l).toString():"res-"+xe.toString()}a(J,"createResponseQueueKey");function G(){return"not-"+(++c).toString()}a(G,"createNotificationQueueKey");function j(xe,Ve){Hn.Message.isRequest(Ve)?xe.set(ee(Ve.id),Ve):Hn.Message.isResponse(Ve)?xe.set(J(Ve.id),Ve):xe.set(G(),Ve)}a(j,"addMessageToQueue");function Z(xe){}a(Z,"cancelUndispatched");function ie(){return F===pA.Listening}a(ie,"isListening");function ne(){return F===pA.Closed}a(ne,"isClosed");function re(){return F===pA.Disposed}a(re,"isDisposed");function fe(){(F===pA.New||F===pA.Listening)&&(F=pA.Closed,Y.fire(void 0))}a(fe,"closeHandler");function ye(xe){O.fire([xe,void 0,void 0])}a(ye,"readErrorHandler");function Qe(xe){O.fire(xe)}a(Qe,"writeErrorHandler"),t.onClose(fe),t.onError(ye),e.onClose(fe),e.onError(Qe);function we(){A||y.size===0||(A=(0,KMe.default)().timer.setImmediate(()=>{A=void 0,Oe()}))}a(we,"triggerMessageQueue");function Xe(xe){Hn.Message.isRequest(xe)?Rt(xe):Hn.Message.isNotification(xe)?At(xe):Hn.Message.isResponse(xe)?Et(xe):de(xe)}a(Xe,"handleMessage");function Oe(){if(y.size===0)return;let xe=y.shift();try{let Ve=n?.messageStrategy;NG.is(Ve)?Ve.handleMessage(xe,Xe):Xe(xe)}finally{we()}}a(Oe,"processMessageQueue");let ut=a(xe=>{try{if(Hn.Message.isNotification(xe)&&xe.method===g6.type.method){let Ve=xe.params.id,mt=ee(Ve),wt=y.get(mt);if(Hn.Message.isRequest(wt)){let er=n?.connectionStrategy,wr=er&&er.cancelUndispatched?er.cancelUndispatched(wt,Z):void 0;if(wr&&(wr.error!==void 0||wr.result!==void 0)){y.delete(mt),I.delete(Ve),wr.id=wt.id,ce(wr,xe.method,Date.now()),e.write(wr).catch(()=>o.error("Sending response for canceled message failed."));return}}let sr=I.get(Ve);if(sr!==void 0){sr.cancel(),He(xe);return}else b.add(Ve)}j(y,xe)}finally{we()}},"callback");function Rt(xe){if(re())return;function Ve(nr,dr,ir){let Lr={jsonrpc:u,id:xe.id};nr instanceof Hn.ResponseError?Lr.error=nr.toJson():Lr.result=nr===void 0?null:nr,ce(Lr,dr,ir),e.write(Lr).catch(()=>o.error("Sending response failed."))}a(Ve,"reply");function mt(nr,dr,ir){let Lr={jsonrpc:u,id:xe.id,error:nr.toJson()};ce(Lr,dr,ir),e.write(Lr).catch(()=>o.error("Sending response failed."))}a(mt,"replyError");function wt(nr,dr,ir){nr===void 0&&(nr=null);let Lr={jsonrpc:u,id:xe.id,result:nr};ce(Lr,dr,ir),e.write(Lr).catch(()=>o.error("Sending response failed."))}a(wt,"replySuccess"),ue(xe);let sr=p.get(xe.method),er,wr;sr&&(er=sr.type,wr=sr.handler);let pr=Date.now();if(wr||d){let nr=xe.id??String(Date.now()),dr=kG.is(H.receiver)?H.receiver.createCancellationTokenSource(nr):H.receiver.createCancellationTokenSource(xe);xe.id!==null&&b.has(xe.id)&&dr.cancel(),xe.id!==null&&I.set(nr,dr);try{let ir;if(wr)if(xe.params===void 0){if(er!==void 0&&er.numberOfParams!==0){mt(new Hn.ResponseError(Hn.ErrorCodes.InvalidParams,`Request ${xe.method} defines ${er.numberOfParams} params but received none.`),xe.method,pr);return}ir=wr(dr.token)}else if(Array.isArray(xe.params)){if(er!==void 0&&er.parameterStructures===Hn.ParameterStructures.byName){mt(new Hn.ResponseError(Hn.ErrorCodes.InvalidParams,`Request ${xe.method} defines parameters by name but received parameters by position`),xe.method,pr);return}ir=wr(...xe.params,dr.token)}else{if(er!==void 0&&er.parameterStructures===Hn.ParameterStructures.byPosition){mt(new Hn.ResponseError(Hn.ErrorCodes.InvalidParams,`Request ${xe.method} defines parameters by position but received parameters by name`),xe.method,pr);return}ir=wr(xe.params,dr.token)}else d&&(ir=d(xe.method,xe.params,dr.token));let Lr=ir;ir?Lr.then?Lr.then(Yr=>{I.delete(nr),Ve(Yr,xe.method,pr)},Yr=>{I.delete(nr),Yr instanceof Hn.ResponseError?mt(Yr,xe.method,pr):Yr&&Ya.string(Yr.message)?mt(new Hn.ResponseError(Hn.ErrorCodes.InternalError,`Request ${xe.method} failed with message: ${Yr.message}`),xe.method,pr):mt(new Hn.ResponseError(Hn.ErrorCodes.InternalError,`Request ${xe.method} failed unexpectedly without providing any details.`),xe.method,pr)}):(I.delete(nr),Ve(ir,xe.method,pr)):(I.delete(nr),wt(ir,xe.method,pr))}catch(ir){I.delete(nr),ir instanceof Hn.ResponseError?Ve(ir,xe.method,pr):ir&&Ya.string(ir.message)?mt(new Hn.ResponseError(Hn.ErrorCodes.InternalError,`Request ${xe.method} failed with message: ${ir.message}`),xe.method,pr):mt(new Hn.ResponseError(Hn.ErrorCodes.InternalError,`Request ${xe.method} failed unexpectedly without providing any details.`),xe.method,pr)}}else mt(new Hn.ResponseError(Hn.ErrorCodes.MethodNotFound,`Unhandled method ${xe.method}`),xe.method,pr)}a(Rt,"handleRequest");function Et(xe){if(!re())if(xe.id===null)xe.error?o.error(`Received response message without id: Error is: 
${JSON.stringify(xe.error,void 0,4)}`):o.error("Received response message without id. No further error information provided.");else{let Ve=xe.id,mt=v.get(Ve);if(Me(xe,mt),mt!==void 0){v.delete(Ve);try{if(xe.error){let wt=xe.error;mt.reject(new Hn.ResponseError(wt.code,wt.message,wt.data))}else if(xe.result!==void 0)mt.resolve(xe.result);else throw new Error("Should never happen.")}catch(wt){wt.message?o.error(`Response handler '${mt.method}' failed with message: ${wt.message}`):o.error(`Response handler '${mt.method}' failed unexpectedly.`)}}}}a(Et,"handleResponse");function At(xe){if(re())return;let Ve,mt;if(xe.method===g6.type.method){let wt=xe.params.id;b.delete(wt),He(xe);return}else{let wt=h.get(xe.method);wt&&(mt=wt.handler,Ve=wt.type)}if(mt||m)try{if(He(xe),mt)if(xe.params===void 0)Ve!==void 0&&Ve.numberOfParams!==0&&Ve.parameterStructures!==Hn.ParameterStructures.byName&&o.error(`Notification ${xe.method} defines ${Ve.numberOfParams} params but received none.`),mt();else if(Array.isArray(xe.params)){let wt=xe.params;xe.method===m6.type.method&&wt.length===2&&nme.is(wt[0])?mt({token:wt[0],value:wt[1]}):(Ve!==void 0&&(Ve.parameterStructures===Hn.ParameterStructures.byName&&o.error(`Notification ${xe.method} defines parameters by name but received parameters by position`),Ve.numberOfParams!==xe.params.length&&o.error(`Notification ${xe.method} defines ${Ve.numberOfParams} params but received ${wt.length} arguments`)),mt(...wt))}else Ve!==void 0&&Ve.parameterStructures===Hn.ParameterStructures.byPosition&&o.error(`Notification ${xe.method} defines parameters by position but received parameters by name`),mt(xe.params);else m&&m(xe.method,xe.params)}catch(wt){wt.message?o.error(`Notification handler '${xe.method}' failed with message: ${wt.message}`):o.error(`Notification handler '${xe.method}' failed unexpectedly.`)}else z.fire(xe)}a(At,"handleNotification");function de(xe){if(!xe){o.error("Received empty message.");return}o.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(xe,null,4)}`);let Ve=xe;if(Ya.string(Ve.id)||Ya.number(Ve.id)){let mt=Ve.id,wt=v.get(mt);wt&&wt.reject(new Error("The received response has neither a result nor an error property."))}}a(de,"handleInvalidMessage");function qe(xe){if(xe!=null)switch(S){case Jo.Verbose:return JSON.stringify(xe,null,4);case Jo.Compact:return JSON.stringify(xe);default:return}}a(qe,"stringifyTrace");function Ce(xe){if(!(S===Jo.Off||!N))if(k===b0.Text){let Ve;(S===Jo.Verbose||S===Jo.Compact)&&xe.params&&(Ve=`Params: ${qe(xe.params)}

`),N.log(`Sending request '${xe.method} - (${xe.id})'.`,Ve)}else be("send-request",xe)}a(Ce,"traceSendingRequest");function We(xe){if(!(S===Jo.Off||!N))if(k===b0.Text){let Ve;(S===Jo.Verbose||S===Jo.Compact)&&(xe.params?Ve=`Params: ${qe(xe.params)}

`:Ve=`No parameters provided.

`),N.log(`Sending notification '${xe.method}'.`,Ve)}else be("send-notification",xe)}a(We,"traceSendingNotification");function ce(xe,Ve,mt){if(!(S===Jo.Off||!N))if(k===b0.Text){let wt;(S===Jo.Verbose||S===Jo.Compact)&&(xe.error&&xe.error.data?wt=`Error data: ${qe(xe.error.data)}

`:xe.result?wt=`Result: ${qe(xe.result)}

`:xe.error===void 0&&(wt=`No result returned.

`)),N.log(`Sending response '${Ve} - (${xe.id})'. Processing request took ${Date.now()-mt}ms`,wt)}else be("send-response",xe)}a(ce,"traceSendingResponse");function ue(xe){if(!(S===Jo.Off||!N))if(k===b0.Text){let Ve;(S===Jo.Verbose||S===Jo.Compact)&&xe.params&&(Ve=`Params: ${qe(xe.params)}

`),N.log(`Received request '${xe.method} - (${xe.id})'.`,Ve)}else be("receive-request",xe)}a(ue,"traceReceivedRequest");function He(xe){if(!(S===Jo.Off||!N||xe.method===RG.type.method))if(k===b0.Text){let Ve;(S===Jo.Verbose||S===Jo.Compact)&&(xe.params?Ve=`Params: ${qe(xe.params)}

`:Ve=`No parameters provided.

`),N.log(`Received notification '${xe.method}'.`,Ve)}else be("receive-notification",xe)}a(He,"traceReceivedNotification");function Me(xe,Ve){if(!(S===Jo.Off||!N))if(k===b0.Text){let mt;if((S===Jo.Verbose||S===Jo.Compact)&&(xe.error&&xe.error.data?mt=`Error data: ${qe(xe.error.data)}

`:xe.result?mt=`Result: ${qe(xe.result)}

`:xe.error===void 0&&(mt=`No result returned.

`)),Ve){let wt=xe.error?` Request failed: ${xe.error.message} (${xe.error.code}).`:"";N.log(`Received response '${Ve.method} - (${xe.id})' in ${Date.now()-Ve.timerStart}ms.${wt}`,mt)}else N.log(`Received response ${xe.id} without active response promise.`,mt)}else be("receive-response",xe)}a(Me,"traceReceivedResponse");function be(xe,Ve){if(!N||S===Jo.Off)return;let mt={isLSPMessage:!0,type:xe,message:Ve,timestamp:Date.now()};N.log(mt)}a(be,"logLSPMessage");function Ge(){if(ne())throw new xD(h6.Closed,"Connection is closed.");if(re())throw new xD(h6.Disposed,"Connection is disposed.")}a(Ge,"throwIfClosedOrDisposed");function rt(){if(ie())throw new xD(h6.AlreadyListening,"Connection is already listening")}a(rt,"throwIfListening");function ht(){if(!ie())throw new Error("Call listen() first.")}a(ht,"throwIfNotListening");function Ot(xe){return xe===void 0?null:xe}a(Ot,"undefinedToNull");function Xt(xe){if(xe!==null)return xe}a(Xt,"nullToUndefined");function Ut(xe){return xe!=null&&!Array.isArray(xe)&&typeof xe=="object"}a(Ut,"isNamedParam");function Kr(xe,Ve){switch(xe){case Hn.ParameterStructures.auto:return Ut(Ve)?Xt(Ve):[Ot(Ve)];case Hn.ParameterStructures.byName:if(!Ut(Ve))throw new Error("Received parameters by name but param is not an object literal.");return Xt(Ve);case Hn.ParameterStructures.byPosition:return[Ot(Ve)];default:throw new Error(`Unknown parameter structure ${xe.toString()}`)}}a(Kr,"computeSingleParam");function Mr(xe,Ve){let mt,wt=xe.numberOfParams;switch(wt){case 0:mt=void 0;break;case 1:mt=Kr(xe.parameterStructures,Ve[0]);break;default:mt=[];for(let sr=0;sr<Ve.length&&sr<wt;sr++)mt.push(Ot(Ve[sr]));if(Ve.length<wt)for(let sr=Ve.length;sr<wt;sr++)mt.push(null);break}return mt}a(Mr,"computeMessageParams");let fn={sendNotification:a((xe,...Ve)=>{Ge();let mt,wt;if(Ya.string(xe)){mt=xe;let er=Ve[0],wr=0,pr=Hn.ParameterStructures.auto;Hn.ParameterStructures.is(er)&&(wr=1,pr=er);let nr=Ve.length,dr=nr-wr;switch(dr){case 0:wt=void 0;break;case 1:wt=Kr(pr,Ve[wr]);break;default:if(pr===Hn.ParameterStructures.byName)throw new Error(`Received ${dr} parameters for 'by Name' notification parameter structure.`);wt=Ve.slice(wr,nr).map(ir=>Ot(ir));break}}else{let er=Ve;mt=xe.method,wt=Mr(xe,er)}let sr={jsonrpc:u,method:mt,params:wt};return We(sr),e.write(sr).catch(er=>{throw o.error("Sending notification failed."),er})},"sendNotification"),onNotification:a((xe,Ve)=>{Ge();let mt;return Ya.func(xe)?m=xe:Ve&&(Ya.string(xe)?(mt=xe,h.set(xe,{type:void 0,handler:Ve})):(mt=xe.method,h.set(xe.method,{type:xe,handler:Ve}))),{dispose:a(()=>{mt!==void 0?h.delete(mt):m=void 0},"dispose")}},"onNotification"),onProgress:a((xe,Ve,mt)=>{if(g.has(Ve))throw new Error(`Progress handler for token ${Ve} already registered`);return g.set(Ve,mt),{dispose:a(()=>{g.delete(Ve)},"dispose")}},"onProgress"),sendProgress:a((xe,Ve,mt)=>fn.sendNotification(m6.type,{token:Ve,value:mt}),"sendProgress"),onUnhandledProgress:V.event,sendRequest:a((xe,...Ve)=>{Ge(),ht();let mt,wt,sr;if(Ya.string(xe)){mt=xe;let nr=Ve[0],dr=Ve[Ve.length-1],ir=0,Lr=Hn.ParameterStructures.auto;Hn.ParameterStructures.is(nr)&&(ir=1,Lr=nr);let Yr=Ve.length;rme.CancellationToken.is(dr)&&(Yr=Yr-1,sr=dr);let cn=Yr-ir;switch(cn){case 0:wt=void 0;break;case 1:wt=Kr(Lr,Ve[ir]);break;default:if(Lr===Hn.ParameterStructures.byName)throw new Error(`Received ${cn} parameters for 'by Name' request parameter structure.`);wt=Ve.slice(ir,Yr).map(xn=>Ot(xn));break}}else{let nr=Ve;mt=xe.method,wt=Mr(xe,nr);let dr=xe.numberOfParams;sr=rme.CancellationToken.is(nr[dr])?nr[dr]:void 0}let er=s++,wr;sr&&(wr=sr.onCancellationRequested(()=>{let nr=H.sender.sendCancellation(fn,er);return nr===void 0?(o.log(`Received no promise from cancellation strategy when cancelling id ${er}`),Promise.resolve()):nr.catch(()=>{o.log(`Sending cancellation messages for id ${er} failed`)})}));let pr={jsonrpc:u,id:er,method:mt,params:wt};return Ce(pr),typeof H.sender.enableCancellation=="function"&&H.sender.enableCancellation(pr),new Promise(async(nr,dr)=>{let ir=a(cn=>{nr(cn),H.sender.cleanup(er),wr?.dispose()},"resolveWithCleanup"),Lr=a(cn=>{dr(cn),H.sender.cleanup(er),wr?.dispose()},"rejectWithCleanup"),Yr={method:mt,timerStart:Date.now(),resolve:ir,reject:Lr};try{await e.write(pr),v.set(er,Yr)}catch(cn){throw o.error("Sending request failed."),Yr.reject(new Hn.ResponseError(Hn.ErrorCodes.MessageWriteError,cn.message?cn.message:"Unknown reason")),cn}})},"sendRequest"),onRequest:a((xe,Ve)=>{Ge();let mt=null;return ome.is(xe)?(mt=void 0,d=xe):Ya.string(xe)?(mt=null,Ve!==void 0&&(mt=xe,p.set(xe,{handler:Ve,type:void 0}))):Ve!==void 0&&(mt=xe.method,p.set(xe.method,{type:xe,handler:Ve})),{dispose:a(()=>{mt!==null&&(mt!==void 0?p.delete(mt):d=void 0)},"dispose")}},"onRequest"),hasPendingResponse:a(()=>v.size>0,"hasPendingResponse"),trace:a(async(xe,Ve,mt)=>{let wt=!1,sr=b0.Text;mt!==void 0&&(Ya.boolean(mt)?wt=mt:(wt=mt.sendNotification||!1,sr=mt.traceFormat||b0.Text)),S=xe,k=sr,S===Jo.Off?N=void 0:N=Ve,wt&&!ne()&&!re()&&await fn.sendNotification(sme.type,{value:Jo.toString(xe)})},"trace"),onError:O.event,onClose:Y.event,onUnhandledNotification:z.event,onDispose:U.event,end:a(()=>{e.end()},"end"),dispose:a(()=>{if(re())return;F=pA.Disposed,U.fire(void 0);let xe=new Hn.ResponseError(Hn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ve of v.values())Ve.reject(xe);v=new Map,I=new Map,b=new Set,y=new YMe.LinkedMap,Ya.func(e.dispose)&&e.dispose(),Ya.func(t.dispose)&&t.dispose()},"dispose"),listen:a(()=>{Ge(),rt(),F=pA.Listening,t.listen(ut)},"listen"),inspect:a(()=>{(0,KMe.default)().console.log("inspect")},"inspect")};return fn.onNotification(RG.type,xe=>{if(S===Jo.Off||!N)return;let Ve=S===Jo.Verbose||S===Jo.Compact;N.log(xe.message,Ve?xe.verbose:void 0)}),fn.onNotification(m6.type,xe=>{let Ve=g.get(xe.token);Ve?Ve(xe.value):V.fire(xe)}),fn}a(i4t,"createMessageConnection");gi.createMessageConnection=i4t});var MG=$(Ct=>{"use strict";f();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.ProgressType=Ct.ProgressToken=Ct.createMessageConnection=Ct.NullLogger=Ct.ConnectionOptions=Ct.ConnectionStrategy=Ct.AbstractMessageBuffer=Ct.WriteableStreamMessageWriter=Ct.AbstractMessageWriter=Ct.MessageWriter=Ct.ReadableStreamMessageReader=Ct.AbstractMessageReader=Ct.MessageReader=Ct.SharedArrayReceiverStrategy=Ct.SharedArraySenderStrategy=Ct.CancellationToken=Ct.CancellationTokenSource=Ct.Emitter=Ct.Event=Ct.Disposable=Ct.LRUCache=Ct.Touch=Ct.LinkedMap=Ct.ParameterStructures=Ct.NotificationType9=Ct.NotificationType8=Ct.NotificationType7=Ct.NotificationType6=Ct.NotificationType5=Ct.NotificationType4=Ct.NotificationType3=Ct.NotificationType2=Ct.NotificationType1=Ct.NotificationType0=Ct.NotificationType=Ct.ErrorCodes=Ct.ResponseError=Ct.RequestType9=Ct.RequestType8=Ct.RequestType7=Ct.RequestType6=Ct.RequestType5=Ct.RequestType4=Ct.RequestType3=Ct.RequestType2=Ct.RequestType1=Ct.RequestType0=Ct.RequestType=Ct.Message=Ct.RAL=void 0;Ct.MessageStrategy=Ct.CancellationStrategy=Ct.CancellationSenderStrategy=Ct.CancellationReceiverStrategy=Ct.ConnectionError=Ct.ConnectionErrors=Ct.LogTraceNotification=Ct.SetTraceNotification=Ct.TraceFormat=Ct.TraceValues=Ct.Trace=void 0;var Us=N0e();Object.defineProperty(Ct,"Message",{enumerable:!0,get:a(function(){return Us.Message},"get")});Object.defineProperty(Ct,"RequestType",{enumerable:!0,get:a(function(){return Us.RequestType},"get")});Object.defineProperty(Ct,"RequestType0",{enumerable:!0,get:a(function(){return Us.RequestType0},"get")});Object.defineProperty(Ct,"RequestType1",{enumerable:!0,get:a(function(){return Us.RequestType1},"get")});Object.defineProperty(Ct,"RequestType2",{enumerable:!0,get:a(function(){return Us.RequestType2},"get")});Object.defineProperty(Ct,"RequestType3",{enumerable:!0,get:a(function(){return Us.RequestType3},"get")});Object.defineProperty(Ct,"RequestType4",{enumerable:!0,get:a(function(){return Us.RequestType4},"get")});Object.defineProperty(Ct,"RequestType5",{enumerable:!0,get:a(function(){return Us.RequestType5},"get")});Object.defineProperty(Ct,"RequestType6",{enumerable:!0,get:a(function(){return Us.RequestType6},"get")});Object.defineProperty(Ct,"RequestType7",{enumerable:!0,get:a(function(){return Us.RequestType7},"get")});Object.defineProperty(Ct,"RequestType8",{enumerable:!0,get:a(function(){return Us.RequestType8},"get")});Object.defineProperty(Ct,"RequestType9",{enumerable:!0,get:a(function(){return Us.RequestType9},"get")});Object.defineProperty(Ct,"ResponseError",{enumerable:!0,get:a(function(){return Us.ResponseError},"get")});Object.defineProperty(Ct,"ErrorCodes",{enumerable:!0,get:a(function(){return Us.ErrorCodes},"get")});Object.defineProperty(Ct,"NotificationType",{enumerable:!0,get:a(function(){return Us.NotificationType},"get")});Object.defineProperty(Ct,"NotificationType0",{enumerable:!0,get:a(function(){return Us.NotificationType0},"get")});Object.defineProperty(Ct,"NotificationType1",{enumerable:!0,get:a(function(){return Us.NotificationType1},"get")});Object.defineProperty(Ct,"NotificationType2",{enumerable:!0,get:a(function(){return Us.NotificationType2},"get")});Object.defineProperty(Ct,"NotificationType3",{enumerable:!0,get:a(function(){return Us.NotificationType3},"get")});Object.defineProperty(Ct,"NotificationType4",{enumerable:!0,get:a(function(){return Us.NotificationType4},"get")});Object.defineProperty(Ct,"NotificationType5",{enumerable:!0,get:a(function(){return Us.NotificationType5},"get")});Object.defineProperty(Ct,"NotificationType6",{enumerable:!0,get:a(function(){return Us.NotificationType6},"get")});Object.defineProperty(Ct,"NotificationType7",{enumerable:!0,get:a(function(){return Us.NotificationType7},"get")});Object.defineProperty(Ct,"NotificationType8",{enumerable:!0,get:a(function(){return Us.NotificationType8},"get")});Object.defineProperty(Ct,"NotificationType9",{enumerable:!0,get:a(function(){return Us.NotificationType9},"get")});Object.defineProperty(Ct,"ParameterStructures",{enumerable:!0,get:a(function(){return Us.ParameterStructures},"get")});var lme=L0e();Object.defineProperty(Ct,"LinkedMap",{enumerable:!0,get:a(function(){return lme.LinkedMap},"get")});Object.defineProperty(Ct,"LRUCache",{enumerable:!0,get:a(function(){return lme.LRUCache},"get")});Object.defineProperty(Ct,"Touch",{enumerable:!0,get:a(function(){return lme.Touch},"get")});var o4t=OMe();Object.defineProperty(Ct,"Disposable",{enumerable:!0,get:a(function(){return o4t.Disposable},"get")});var eLe=AD();Object.defineProperty(Ct,"Event",{enumerable:!0,get:a(function(){return eLe.Event},"get")});Object.defineProperty(Ct,"Emitter",{enumerable:!0,get:a(function(){return eLe.Emitter},"get")});var tLe=IG();Object.defineProperty(Ct,"CancellationTokenSource",{enumerable:!0,get:a(function(){return tLe.CancellationTokenSource},"get")});Object.defineProperty(Ct,"CancellationToken",{enumerable:!0,get:a(function(){return tLe.CancellationToken},"get")});var rLe=UMe();Object.defineProperty(Ct,"SharedArraySenderStrategy",{enumerable:!0,get:a(function(){return rLe.SharedArraySenderStrategy},"get")});Object.defineProperty(Ct,"SharedArrayReceiverStrategy",{enumerable:!0,get:a(function(){return rLe.SharedArrayReceiverStrategy},"get")});var ume=HMe();Object.defineProperty(Ct,"MessageReader",{enumerable:!0,get:a(function(){return ume.MessageReader},"get")});Object.defineProperty(Ct,"AbstractMessageReader",{enumerable:!0,get:a(function(){return ume.AbstractMessageReader},"get")});Object.defineProperty(Ct,"ReadableStreamMessageReader",{enumerable:!0,get:a(function(){return ume.ReadableStreamMessageReader},"get")});var dme=VMe();Object.defineProperty(Ct,"MessageWriter",{enumerable:!0,get:a(function(){return dme.MessageWriter},"get")});Object.defineProperty(Ct,"AbstractMessageWriter",{enumerable:!0,get:a(function(){return dme.AbstractMessageWriter},"get")});Object.defineProperty(Ct,"WriteableStreamMessageWriter",{enumerable:!0,get:a(function(){return dme.WriteableStreamMessageWriter},"get")});var s4t=zMe();Object.defineProperty(Ct,"AbstractMessageBuffer",{enumerable:!0,get:a(function(){return s4t.AbstractMessageBuffer},"get")});var Gu=ZMe();Object.defineProperty(Ct,"ConnectionStrategy",{enumerable:!0,get:a(function(){return Gu.ConnectionStrategy},"get")});Object.defineProperty(Ct,"ConnectionOptions",{enumerable:!0,get:a(function(){return Gu.ConnectionOptions},"get")});Object.defineProperty(Ct,"NullLogger",{enumerable:!0,get:a(function(){return Gu.NullLogger},"get")});Object.defineProperty(Ct,"createMessageConnection",{enumerable:!0,get:a(function(){return Gu.createMessageConnection},"get")});Object.defineProperty(Ct,"ProgressToken",{enumerable:!0,get:a(function(){return Gu.ProgressToken},"get")});Object.defineProperty(Ct,"ProgressType",{enumerable:!0,get:a(function(){return Gu.ProgressType},"get")});Object.defineProperty(Ct,"Trace",{enumerable:!0,get:a(function(){return Gu.Trace},"get")});Object.defineProperty(Ct,"TraceValues",{enumerable:!0,get:a(function(){return Gu.TraceValues},"get")});Object.defineProperty(Ct,"TraceFormat",{enumerable:!0,get:a(function(){return Gu.TraceFormat},"get")});Object.defineProperty(Ct,"SetTraceNotification",{enumerable:!0,get:a(function(){return Gu.SetTraceNotification},"get")});Object.defineProperty(Ct,"LogTraceNotification",{enumerable:!0,get:a(function(){return Gu.LogTraceNotification},"get")});Object.defineProperty(Ct,"ConnectionErrors",{enumerable:!0,get:a(function(){return Gu.ConnectionErrors},"get")});Object.defineProperty(Ct,"ConnectionError",{enumerable:!0,get:a(function(){return Gu.ConnectionError},"get")});Object.defineProperty(Ct,"CancellationReceiverStrategy",{enumerable:!0,get:a(function(){return Gu.CancellationReceiverStrategy},"get")});Object.defineProperty(Ct,"CancellationSenderStrategy",{enumerable:!0,get:a(function(){return Gu.CancellationSenderStrategy},"get")});Object.defineProperty(Ct,"CancellationStrategy",{enumerable:!0,get:a(function(){return Gu.CancellationStrategy},"get")});Object.defineProperty(Ct,"MessageStrategy",{enumerable:!0,get:a(function(){return Gu.MessageStrategy},"get")});var a4t=NI();Ct.RAL=a4t.default});var oLe=$(hme=>{"use strict";f();Object.defineProperty(hme,"__esModule",{value:!0});var nLe=require("util"),Xv=MG(),LG=class t extends Xv.AbstractMessageBuffer{static{a(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new nLe.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};LG.emptyBuffer=Buffer.allocUnsafe(0);var fme=class{static{a(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Xv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Xv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Xv.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Xv.Disposable.create(()=>this.stream.off("data",e))}},pme=class{static{a(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Xv.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Xv.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Xv.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,o)=>{let s=a(c=>{c==null?n():o(c)},"callback");typeof e=="string"?this.stream.write(e,r,s):this.stream.write(e,s)})}end(){this.stream.end()}},iLe=Object.freeze({messageBuffer:Object.freeze({create:a(t=>new LG(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:a((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:a((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new nLe.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:a(t=>new fme(t),"asReadableStream"),asWritableStream:a(t=>new pme(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:a(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:a(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:a(()=>clearInterval(n),"dispose")}}})});function mme(){return iLe}a(mme,"RIL");(function(t){function e(){Xv.RAL.install(iLe)}a(e,"install"),t.install=e})(mme||(mme={}));hme.default=mme});var a2=$(Eo=>{"use strict";f();var c4t=Eo&&Eo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),l4t=Eo&&Eo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&c4t(e,t,r)};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.createMessageConnection=Eo.createServerSocketTransport=Eo.createClientSocketTransport=Eo.createServerPipeTransport=Eo.createClientPipeTransport=Eo.generateRandomPipeName=Eo.StreamMessageWriter=Eo.StreamMessageReader=Eo.SocketMessageWriter=Eo.SocketMessageReader=Eo.PortMessageWriter=Eo.PortMessageReader=Eo.IPCMessageWriter=Eo.IPCMessageReader=void 0;var ED=oLe();ED.default.install();var sLe=require("path"),u4t=require("os"),d4t=require("crypto"),QG=require("net"),I0=MG();l4t(MG(),Eo);var gme=class extends I0.AbstractMessageReader{static{a(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),I0.Disposable.create(()=>this.process.off("message",e))}};Eo.IPCMessageReader=gme;var Ame=class extends I0.AbstractMessageWriter{static{a(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Eo.IPCMessageWriter=Ame;var yme=class extends I0.AbstractMessageReader{static{a(this,"PortMessageReader")}constructor(e){super(),this.onData=new I0.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};Eo.PortMessageReader=yme;var Cme=class extends I0.AbstractMessageWriter{static{a(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Eo.PortMessageWriter=Cme;var o2=class extends I0.ReadableStreamMessageReader{static{a(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,ED.default)().stream.asReadableStream(e),r)}};Eo.SocketMessageReader=o2;var s2=class extends I0.WriteableStreamMessageWriter{static{a(this,"SocketMessageWriter")}constructor(e,r){super((0,ED.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Eo.SocketMessageWriter=s2;var FG=class extends I0.ReadableStreamMessageReader{static{a(this,"StreamMessageReader")}constructor(e,r){super((0,ED.default)().stream.asReadableStream(e),r)}};Eo.StreamMessageReader=FG;var OG=class extends I0.WriteableStreamMessageWriter{static{a(this,"StreamMessageWriter")}constructor(e,r){super((0,ED.default)().stream.asWritableStream(e),r)}};Eo.StreamMessageWriter=OG;var aLe=process.env.XDG_RUNTIME_DIR,f4t=new Map([["linux",107],["darwin",103]]);function p4t(){let t=(0,d4t.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;aLe?e=sLe.join(aLe,`vscode-ipc-${t}.sock`):e=sLe.join(u4t.tmpdir(),`vscode-${t}.sock`);let r=f4t.get(process.platform);return r!==void 0&&e.length>r&&(0,ED.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}a(p4t,"generateRandomPipeName");Eo.generateRandomPipeName=p4t;function m4t(t,e="utf-8"){let r,n=new Promise((o,s)=>{r=o});return new Promise((o,s)=>{let c=(0,QG.createServer)(l=>{c.close(),r([new o2(l,e),new s2(l,e)])});c.on("error",s),c.listen(t,()=>{c.removeListener("error",s),o({onConnected:a(()=>n,"onConnected")})})})}a(m4t,"createClientPipeTransport");Eo.createClientPipeTransport=m4t;function h4t(t,e="utf-8"){let r=(0,QG.createConnection)(t);return[new o2(r,e),new s2(r,e)]}a(h4t,"createServerPipeTransport");Eo.createServerPipeTransport=h4t;function g4t(t,e="utf-8"){let r,n=new Promise((o,s)=>{r=o});return new Promise((o,s)=>{let c=(0,QG.createServer)(l=>{c.close(),r([new o2(l,e),new s2(l,e)])});c.on("error",s),c.listen(t,"127.0.0.1",()=>{c.removeListener("error",s),o({onConnected:a(()=>n,"onConnected")})})})}a(g4t,"createClientSocketTransport");Eo.createClientSocketTransport=g4t;function A4t(t,e="utf-8"){let r=(0,QG.createConnection)(t,"127.0.0.1");return[new o2(r,e),new s2(r,e)]}a(A4t,"createServerSocketTransport");Eo.createServerSocketTransport=A4t;function y4t(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}a(y4t,"isReadableStream");function C4t(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}a(C4t,"isWritableStream");function v4t(t,e,r,n){r||(r=I0.NullLogger);let o=y4t(t)?new FG(t):t,s=C4t(e)?new OG(e):e;return I0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,I0.createMessageConnection)(o,s,r,n)}a(v4t,"createMessageConnection");Eo.createMessageConnection=v4t});var vme=$((xVr,cLe)=>{"use strict";f();cLe.exports=a2()});var qG=$((lLe,UG)=>{f();(function(t){if(typeof UG=="object"&&typeof UG.exports=="object"){var e=t(require,lLe);e!==void 0&&(UG.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(X){function ve(Te){return typeof Te=="string"}a(ve,"is"),X.is=ve})(r||(e.DocumentUri=r={}));var n;(function(X){function ve(Te){return typeof Te=="string"}a(ve,"is"),X.is=ve})(n||(e.URI=n={}));var o;(function(X){X.MIN_VALUE=-2147483648,X.MAX_VALUE=2147483647;function ve(Te){return typeof Te=="number"&&X.MIN_VALUE<=Te&&Te<=X.MAX_VALUE}a(ve,"is"),X.is=ve})(o||(e.integer=o={}));var s;(function(X){X.MIN_VALUE=0,X.MAX_VALUE=2147483647;function ve(Te){return typeof Te=="number"&&X.MIN_VALUE<=Te&&Te<=X.MAX_VALUE}a(ve,"is"),X.is=ve})(s||(e.uinteger=s={}));var c;(function(X){function ve(Q,B){return Q===Number.MAX_VALUE&&(Q=s.MAX_VALUE),B===Number.MAX_VALUE&&(B=s.MAX_VALUE),{line:Q,character:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.uinteger(B.line)&&De.uinteger(B.character)}a(Te,"is"),X.is=Te})(c||(e.Position=c={}));var l;(function(X){function ve(Q,B,te,Ae){if(De.uinteger(Q)&&De.uinteger(B)&&De.uinteger(te)&&De.uinteger(Ae))return{start:c.create(Q,B),end:c.create(te,Ae)};if(c.is(Q)&&c.is(B))return{start:Q,end:B};throw new Error("Range#create called with invalid arguments[".concat(Q,", ").concat(B,", ").concat(te,", ").concat(Ae,"]"))}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&c.is(B.start)&&c.is(B.end)}a(Te,"is"),X.is=Te})(l||(e.Range=l={}));var u;(function(X){function ve(Q,B){return{uri:Q,range:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&l.is(B.range)&&(De.string(B.uri)||De.undefined(B.uri))}a(Te,"is"),X.is=Te})(u||(e.Location=u={}));var d;(function(X){function ve(Q,B,te,Ae){return{targetUri:Q,targetRange:B,targetSelectionRange:te,originSelectionRange:Ae}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&l.is(B.targetRange)&&De.string(B.targetUri)&&l.is(B.targetSelectionRange)&&(l.is(B.originSelectionRange)||De.undefined(B.originSelectionRange))}a(Te,"is"),X.is=Te})(d||(e.LocationLink=d={}));var p;(function(X){function ve(Q,B,te,Ae){return{red:Q,green:B,blue:te,alpha:Ae}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.numberRange(B.red,0,1)&&De.numberRange(B.green,0,1)&&De.numberRange(B.blue,0,1)&&De.numberRange(B.alpha,0,1)}a(Te,"is"),X.is=Te})(p||(e.Color=p={}));var m;(function(X){function ve(Q,B){return{range:Q,color:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&l.is(B.range)&&p.is(B.color)}a(Te,"is"),X.is=Te})(m||(e.ColorInformation=m={}));var h;(function(X){function ve(Q,B,te){return{label:Q,textEdit:B,additionalTextEdits:te}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.string(B.label)&&(De.undefined(B.textEdit)||N.is(B))&&(De.undefined(B.additionalTextEdits)||De.typedArray(B.additionalTextEdits,N.is))}a(Te,"is"),X.is=Te})(h||(e.ColorPresentation=h={}));var g;(function(X){X.Comment="comment",X.Imports="imports",X.Region="region"})(g||(e.FoldingRangeKind=g={}));var A;(function(X){function ve(Q,B,te,Ae,Re,dt){var St={startLine:Q,endLine:B};return De.defined(te)&&(St.startCharacter=te),De.defined(Ae)&&(St.endCharacter=Ae),De.defined(Re)&&(St.kind=Re),De.defined(dt)&&(St.collapsedText=dt),St}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.uinteger(B.startLine)&&De.uinteger(B.startLine)&&(De.undefined(B.startCharacter)||De.uinteger(B.startCharacter))&&(De.undefined(B.endCharacter)||De.uinteger(B.endCharacter))&&(De.undefined(B.kind)||De.string(B.kind))}a(Te,"is"),X.is=Te})(A||(e.FoldingRange=A={}));var y;(function(X){function ve(Q,B){return{location:Q,message:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&u.is(B.location)&&De.string(B.message)}a(Te,"is"),X.is=Te})(y||(e.DiagnosticRelatedInformation=y={}));var v;(function(X){X.Error=1,X.Warning=2,X.Information=3,X.Hint=4})(v||(e.DiagnosticSeverity=v={}));var b;(function(X){X.Unnecessary=1,X.Deprecated=2})(b||(e.DiagnosticTag=b={}));var I;(function(X){function ve(Te){var Q=Te;return De.objectLiteral(Q)&&De.string(Q.href)}a(ve,"is"),X.is=ve})(I||(e.CodeDescription=I={}));var S;(function(X){function ve(Q,B,te,Ae,Re,dt){var St={range:Q,message:B};return De.defined(te)&&(St.severity=te),De.defined(Ae)&&(St.code=Ae),De.defined(Re)&&(St.source=Re),De.defined(dt)&&(St.relatedInformation=dt),St}a(ve,"create"),X.create=ve;function Te(Q){var B,te=Q;return De.defined(te)&&l.is(te.range)&&De.string(te.message)&&(De.number(te.severity)||De.undefined(te.severity))&&(De.integer(te.code)||De.string(te.code)||De.undefined(te.code))&&(De.undefined(te.codeDescription)||De.string((B=te.codeDescription)===null||B===void 0?void 0:B.href))&&(De.string(te.source)||De.undefined(te.source))&&(De.undefined(te.relatedInformation)||De.typedArray(te.relatedInformation,y.is))}a(Te,"is"),X.is=Te})(S||(e.Diagnostic=S={}));var k;(function(X){function ve(Q,B){for(var te=[],Ae=2;Ae<arguments.length;Ae++)te[Ae-2]=arguments[Ae];var Re={title:Q,command:B};return De.defined(te)&&te.length>0&&(Re.arguments=te),Re}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.title)&&De.string(B.command)}a(Te,"is"),X.is=Te})(k||(e.Command=k={}));var N;(function(X){function ve(te,Ae){return{range:te,newText:Ae}}a(ve,"replace"),X.replace=ve;function Te(te,Ae){return{range:{start:te,end:te},newText:Ae}}a(Te,"insert"),X.insert=Te;function Q(te){return{range:te,newText:""}}a(Q,"del"),X.del=Q;function B(te){var Ae=te;return De.objectLiteral(Ae)&&De.string(Ae.newText)&&l.is(Ae.range)}a(B,"is"),X.is=B})(N||(e.TextEdit=N={}));var F;(function(X){function ve(Q,B,te){var Ae={label:Q};return B!==void 0&&(Ae.needsConfirmation=B),te!==void 0&&(Ae.description=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&De.string(B.label)&&(De.boolean(B.needsConfirmation)||B.needsConfirmation===void 0)&&(De.string(B.description)||B.description===void 0)}a(Te,"is"),X.is=Te})(F||(e.ChangeAnnotation=F={}));var O;(function(X){function ve(Te){var Q=Te;return De.string(Q)}a(ve,"is"),X.is=ve})(O||(e.ChangeAnnotationIdentifier=O={}));var Y;(function(X){function ve(te,Ae,Re){return{range:te,newText:Ae,annotationId:Re}}a(ve,"replace"),X.replace=ve;function Te(te,Ae,Re){return{range:{start:te,end:te},newText:Ae,annotationId:Re}}a(Te,"insert"),X.insert=Te;function Q(te,Ae){return{range:te,newText:"",annotationId:Ae}}a(Q,"del"),X.del=Q;function B(te){var Ae=te;return N.is(Ae)&&(F.is(Ae.annotationId)||O.is(Ae.annotationId))}a(B,"is"),X.is=B})(Y||(e.AnnotatedTextEdit=Y={}));var z;(function(X){function ve(Q,B){return{textDocument:Q,edits:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&ne.is(B.textDocument)&&Array.isArray(B.edits)}a(Te,"is"),X.is=Te})(z||(e.TextDocumentEdit=z={}));var V;(function(X){function ve(Q,B,te){var Ae={kind:"create",uri:Q};return B!==void 0&&(B.overwrite!==void 0||B.ignoreIfExists!==void 0)&&(Ae.options=B),te!==void 0&&(Ae.annotationId=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&B.kind==="create"&&De.string(B.uri)&&(B.options===void 0||(B.options.overwrite===void 0||De.boolean(B.options.overwrite))&&(B.options.ignoreIfExists===void 0||De.boolean(B.options.ignoreIfExists)))&&(B.annotationId===void 0||O.is(B.annotationId))}a(Te,"is"),X.is=Te})(V||(e.CreateFile=V={}));var U;(function(X){function ve(Q,B,te,Ae){var Re={kind:"rename",oldUri:Q,newUri:B};return te!==void 0&&(te.overwrite!==void 0||te.ignoreIfExists!==void 0)&&(Re.options=te),Ae!==void 0&&(Re.annotationId=Ae),Re}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&B.kind==="rename"&&De.string(B.oldUri)&&De.string(B.newUri)&&(B.options===void 0||(B.options.overwrite===void 0||De.boolean(B.options.overwrite))&&(B.options.ignoreIfExists===void 0||De.boolean(B.options.ignoreIfExists)))&&(B.annotationId===void 0||O.is(B.annotationId))}a(Te,"is"),X.is=Te})(U||(e.RenameFile=U={}));var H;(function(X){function ve(Q,B,te){var Ae={kind:"delete",uri:Q};return B!==void 0&&(B.recursive!==void 0||B.ignoreIfNotExists!==void 0)&&(Ae.options=B),te!==void 0&&(Ae.annotationId=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&B.kind==="delete"&&De.string(B.uri)&&(B.options===void 0||(B.options.recursive===void 0||De.boolean(B.options.recursive))&&(B.options.ignoreIfNotExists===void 0||De.boolean(B.options.ignoreIfNotExists)))&&(B.annotationId===void 0||O.is(B.annotationId))}a(Te,"is"),X.is=Te})(H||(e.DeleteFile=H={}));var ee;(function(X){function ve(Te){var Q=Te;return Q&&(Q.changes!==void 0||Q.documentChanges!==void 0)&&(Q.documentChanges===void 0||Q.documentChanges.every(function(B){return De.string(B.kind)?V.is(B)||U.is(B)||H.is(B):z.is(B)}))}a(ve,"is"),X.is=ve})(ee||(e.WorkspaceEdit=ee={}));var J=function(){function X(ve,Te){this.edits=ve,this.changeAnnotations=Te}return a(X,"TextEditChangeImpl"),X.prototype.insert=function(ve,Te,Q){var B,te;if(Q===void 0?B=N.insert(ve,Te):O.is(Q)?(te=Q,B=Y.insert(ve,Te,Q)):(this.assertChangeAnnotations(this.changeAnnotations),te=this.changeAnnotations.manage(Q),B=Y.insert(ve,Te,te)),this.edits.push(B),te!==void 0)return te},X.prototype.replace=function(ve,Te,Q){var B,te;if(Q===void 0?B=N.replace(ve,Te):O.is(Q)?(te=Q,B=Y.replace(ve,Te,Q)):(this.assertChangeAnnotations(this.changeAnnotations),te=this.changeAnnotations.manage(Q),B=Y.replace(ve,Te,te)),this.edits.push(B),te!==void 0)return te},X.prototype.delete=function(ve,Te){var Q,B;if(Te===void 0?Q=N.del(ve):O.is(Te)?(B=Te,Q=Y.del(ve,Te)):(this.assertChangeAnnotations(this.changeAnnotations),B=this.changeAnnotations.manage(Te),Q=Y.del(ve,B)),this.edits.push(Q),B!==void 0)return B},X.prototype.add=function(ve){this.edits.push(ve)},X.prototype.all=function(){return this.edits},X.prototype.clear=function(){this.edits.splice(0,this.edits.length)},X.prototype.assertChangeAnnotations=function(ve){if(ve===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},X}(),G=function(){function X(ve){this._annotations=ve===void 0?Object.create(null):ve,this._counter=0,this._size=0}return a(X,"ChangeAnnotations"),X.prototype.all=function(){return this._annotations},Object.defineProperty(X.prototype,"size",{get:a(function(){return this._size},"get"),enumerable:!1,configurable:!0}),X.prototype.manage=function(ve,Te){var Q;if(O.is(ve)?Q=ve:(Q=this.nextId(),Te=ve),this._annotations[Q]!==void 0)throw new Error("Id ".concat(Q," is already in use."));if(Te===void 0)throw new Error("No annotation provided for id ".concat(Q));return this._annotations[Q]=Te,this._size++,Q},X.prototype.nextId=function(){return this._counter++,this._counter.toString()},X}(),j=function(){function X(ve){var Te=this;this._textEditChanges=Object.create(null),ve!==void 0?(this._workspaceEdit=ve,ve.documentChanges?(this._changeAnnotations=new G(ve.changeAnnotations),ve.changeAnnotations=this._changeAnnotations.all(),ve.documentChanges.forEach(function(Q){if(z.is(Q)){var B=new J(Q.edits,Te._changeAnnotations);Te._textEditChanges[Q.textDocument.uri]=B}})):ve.changes&&Object.keys(ve.changes).forEach(function(Q){var B=new J(ve.changes[Q]);Te._textEditChanges[Q]=B})):this._workspaceEdit={}}return a(X,"WorkspaceChange"),Object.defineProperty(X.prototype,"edit",{get:a(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),X.prototype.getTextEditChange=function(ve){if(ne.is(ve)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Te={uri:ve.uri,version:ve.version},Q=this._textEditChanges[Te.uri];if(!Q){var B=[],te={textDocument:Te,edits:B};this._workspaceEdit.documentChanges.push(te),Q=new J(B,this._changeAnnotations),this._textEditChanges[Te.uri]=Q}return Q}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var Q=this._textEditChanges[ve];if(!Q){var B=[];this._workspaceEdit.changes[ve]=B,Q=new J(B),this._textEditChanges[ve]=Q}return Q}},X.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new G,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},X.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},X.prototype.createFile=function(ve,Te,Q){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var B;F.is(Te)||O.is(Te)?B=Te:Q=Te;var te,Ae;if(B===void 0?te=V.create(ve,Q):(Ae=O.is(B)?B:this._changeAnnotations.manage(B),te=V.create(ve,Q,Ae)),this._workspaceEdit.documentChanges.push(te),Ae!==void 0)return Ae},X.prototype.renameFile=function(ve,Te,Q,B){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var te;F.is(Q)||O.is(Q)?te=Q:B=Q;var Ae,Re;if(te===void 0?Ae=U.create(ve,Te,B):(Re=O.is(te)?te:this._changeAnnotations.manage(te),Ae=U.create(ve,Te,B,Re)),this._workspaceEdit.documentChanges.push(Ae),Re!==void 0)return Re},X.prototype.deleteFile=function(ve,Te,Q){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var B;F.is(Te)||O.is(Te)?B=Te:Q=Te;var te,Ae;if(B===void 0?te=H.create(ve,Q):(Ae=O.is(B)?B:this._changeAnnotations.manage(B),te=H.create(ve,Q,Ae)),this._workspaceEdit.documentChanges.push(te),Ae!==void 0)return Ae},X}();e.WorkspaceChange=j;var Z;(function(X){function ve(Q){return{uri:Q}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.uri)}a(Te,"is"),X.is=Te})(Z||(e.TextDocumentIdentifier=Z={}));var ie;(function(X){function ve(Q,B){return{uri:Q,version:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.uri)&&De.integer(B.version)}a(Te,"is"),X.is=Te})(ie||(e.VersionedTextDocumentIdentifier=ie={}));var ne;(function(X){function ve(Q,B){return{uri:Q,version:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.uri)&&(B.version===null||De.integer(B.version))}a(Te,"is"),X.is=Te})(ne||(e.OptionalVersionedTextDocumentIdentifier=ne={}));var re;(function(X){function ve(Q,B,te,Ae){return{uri:Q,languageId:B,version:te,text:Ae}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.string(B.uri)&&De.string(B.languageId)&&De.integer(B.version)&&De.string(B.text)}a(Te,"is"),X.is=Te})(re||(e.TextDocumentItem=re={}));var fe;(function(X){X.PlainText="plaintext",X.Markdown="markdown";function ve(Te){var Q=Te;return Q===X.PlainText||Q===X.Markdown}a(ve,"is"),X.is=ve})(fe||(e.MarkupKind=fe={}));var ye;(function(X){function ve(Te){var Q=Te;return De.objectLiteral(Te)&&fe.is(Q.kind)&&De.string(Q.value)}a(ve,"is"),X.is=ve})(ye||(e.MarkupContent=ye={}));var Qe;(function(X){X.Text=1,X.Method=2,X.Function=3,X.Constructor=4,X.Field=5,X.Variable=6,X.Class=7,X.Interface=8,X.Module=9,X.Property=10,X.Unit=11,X.Value=12,X.Enum=13,X.Keyword=14,X.Snippet=15,X.Color=16,X.File=17,X.Reference=18,X.Folder=19,X.EnumMember=20,X.Constant=21,X.Struct=22,X.Event=23,X.Operator=24,X.TypeParameter=25})(Qe||(e.CompletionItemKind=Qe={}));var we;(function(X){X.PlainText=1,X.Snippet=2})(we||(e.InsertTextFormat=we={}));var Xe;(function(X){X.Deprecated=1})(Xe||(e.CompletionItemTag=Xe={}));var Oe;(function(X){function ve(Q,B,te){return{newText:Q,insert:B,replace:te}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&De.string(B.newText)&&l.is(B.insert)&&l.is(B.replace)}a(Te,"is"),X.is=Te})(Oe||(e.InsertReplaceEdit=Oe={}));var ut;(function(X){X.asIs=1,X.adjustIndentation=2})(ut||(e.InsertTextMode=ut={}));var Rt;(function(X){function ve(Te){var Q=Te;return Q&&(De.string(Q.detail)||Q.detail===void 0)&&(De.string(Q.description)||Q.description===void 0)}a(ve,"is"),X.is=ve})(Rt||(e.CompletionItemLabelDetails=Rt={}));var Et;(function(X){function ve(Te){return{label:Te}}a(ve,"create"),X.create=ve})(Et||(e.CompletionItem=Et={}));var At;(function(X){function ve(Te,Q){return{items:Te||[],isIncomplete:!!Q}}a(ve,"create"),X.create=ve})(At||(e.CompletionList=At={}));var de;(function(X){function ve(Q){return Q.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}a(ve,"fromPlainText"),X.fromPlainText=ve;function Te(Q){var B=Q;return De.string(B)||De.objectLiteral(B)&&De.string(B.language)&&De.string(B.value)}a(Te,"is"),X.is=Te})(de||(e.MarkedString=de={}));var qe;(function(X){function ve(Te){var Q=Te;return!!Q&&De.objectLiteral(Q)&&(ye.is(Q.contents)||de.is(Q.contents)||De.typedArray(Q.contents,de.is))&&(Te.range===void 0||l.is(Te.range))}a(ve,"is"),X.is=ve})(qe||(e.Hover=qe={}));var Ce;(function(X){function ve(Te,Q){return Q?{label:Te,documentation:Q}:{label:Te}}a(ve,"create"),X.create=ve})(Ce||(e.ParameterInformation=Ce={}));var We;(function(X){function ve(Te,Q){for(var B=[],te=2;te<arguments.length;te++)B[te-2]=arguments[te];var Ae={label:Te};return De.defined(Q)&&(Ae.documentation=Q),De.defined(B)?Ae.parameters=B:Ae.parameters=[],Ae}a(ve,"create"),X.create=ve})(We||(e.SignatureInformation=We={}));var ce;(function(X){X.Text=1,X.Read=2,X.Write=3})(ce||(e.DocumentHighlightKind=ce={}));var ue;(function(X){function ve(Te,Q){var B={range:Te};return De.number(Q)&&(B.kind=Q),B}a(ve,"create"),X.create=ve})(ue||(e.DocumentHighlight=ue={}));var He;(function(X){X.File=1,X.Module=2,X.Namespace=3,X.Package=4,X.Class=5,X.Method=6,X.Property=7,X.Field=8,X.Constructor=9,X.Enum=10,X.Interface=11,X.Function=12,X.Variable=13,X.Constant=14,X.String=15,X.Number=16,X.Boolean=17,X.Array=18,X.Object=19,X.Key=20,X.Null=21,X.EnumMember=22,X.Struct=23,X.Event=24,X.Operator=25,X.TypeParameter=26})(He||(e.SymbolKind=He={}));var Me;(function(X){X.Deprecated=1})(Me||(e.SymbolTag=Me={}));var be;(function(X){function ve(Te,Q,B,te,Ae){var Re={name:Te,kind:Q,location:{uri:te,range:B}};return Ae&&(Re.containerName=Ae),Re}a(ve,"create"),X.create=ve})(be||(e.SymbolInformation=be={}));var Ge;(function(X){function ve(Te,Q,B,te){return te!==void 0?{name:Te,kind:Q,location:{uri:B,range:te}}:{name:Te,kind:Q,location:{uri:B}}}a(ve,"create"),X.create=ve})(Ge||(e.WorkspaceSymbol=Ge={}));var rt;(function(X){function ve(Q,B,te,Ae,Re,dt){var St={name:Q,detail:B,kind:te,range:Ae,selectionRange:Re};return dt!==void 0&&(St.children=dt),St}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&De.string(B.name)&&De.number(B.kind)&&l.is(B.range)&&l.is(B.selectionRange)&&(B.detail===void 0||De.string(B.detail))&&(B.deprecated===void 0||De.boolean(B.deprecated))&&(B.children===void 0||Array.isArray(B.children))&&(B.tags===void 0||Array.isArray(B.tags))}a(Te,"is"),X.is=Te})(rt||(e.DocumentSymbol=rt={}));var ht;(function(X){X.Empty="",X.QuickFix="quickfix",X.Refactor="refactor",X.RefactorExtract="refactor.extract",X.RefactorInline="refactor.inline",X.RefactorRewrite="refactor.rewrite",X.Source="source",X.SourceOrganizeImports="source.organizeImports",X.SourceFixAll="source.fixAll"})(ht||(e.CodeActionKind=ht={}));var Ot;(function(X){X.Invoked=1,X.Automatic=2})(Ot||(e.CodeActionTriggerKind=Ot={}));var Xt;(function(X){function ve(Q,B,te){var Ae={diagnostics:Q};return B!=null&&(Ae.only=B),te!=null&&(Ae.triggerKind=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.typedArray(B.diagnostics,S.is)&&(B.only===void 0||De.typedArray(B.only,De.string))&&(B.triggerKind===void 0||B.triggerKind===Ot.Invoked||B.triggerKind===Ot.Automatic)}a(Te,"is"),X.is=Te})(Xt||(e.CodeActionContext=Xt={}));var Ut;(function(X){function ve(Q,B,te){var Ae={title:Q},Re=!0;return typeof B=="string"?(Re=!1,Ae.kind=B):k.is(B)?Ae.command=B:Ae.edit=B,Re&&te!==void 0&&(Ae.kind=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B&&De.string(B.title)&&(B.diagnostics===void 0||De.typedArray(B.diagnostics,S.is))&&(B.kind===void 0||De.string(B.kind))&&(B.edit!==void 0||B.command!==void 0)&&(B.command===void 0||k.is(B.command))&&(B.isPreferred===void 0||De.boolean(B.isPreferred))&&(B.edit===void 0||ee.is(B.edit))}a(Te,"is"),X.is=Te})(Ut||(e.CodeAction=Ut={}));var Kr;(function(X){function ve(Q,B){var te={range:Q};return De.defined(B)&&(te.data=B),te}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&l.is(B.range)&&(De.undefined(B.command)||k.is(B.command))}a(Te,"is"),X.is=Te})(Kr||(e.CodeLens=Kr={}));var Mr;(function(X){function ve(Q,B){return{tabSize:Q,insertSpaces:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&De.uinteger(B.tabSize)&&De.boolean(B.insertSpaces)}a(Te,"is"),X.is=Te})(Mr||(e.FormattingOptions=Mr={}));var fn;(function(X){function ve(Q,B,te){return{range:Q,target:B,data:te}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&l.is(B.range)&&(De.undefined(B.target)||De.string(B.target))}a(Te,"is"),X.is=Te})(fn||(e.DocumentLink=fn={}));var xe;(function(X){function ve(Q,B){return{range:Q,parent:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&l.is(B.range)&&(B.parent===void 0||X.is(B.parent))}a(Te,"is"),X.is=Te})(xe||(e.SelectionRange=xe={}));var Ve;(function(X){X.namespace="namespace",X.type="type",X.class="class",X.enum="enum",X.interface="interface",X.struct="struct",X.typeParameter="typeParameter",X.parameter="parameter",X.variable="variable",X.property="property",X.enumMember="enumMember",X.event="event",X.function="function",X.method="method",X.macro="macro",X.keyword="keyword",X.modifier="modifier",X.comment="comment",X.string="string",X.number="number",X.regexp="regexp",X.operator="operator",X.decorator="decorator"})(Ve||(e.SemanticTokenTypes=Ve={}));var mt;(function(X){X.declaration="declaration",X.definition="definition",X.readonly="readonly",X.static="static",X.deprecated="deprecated",X.abstract="abstract",X.async="async",X.modification="modification",X.documentation="documentation",X.defaultLibrary="defaultLibrary"})(mt||(e.SemanticTokenModifiers=mt={}));var wt;(function(X){function ve(Te){var Q=Te;return De.objectLiteral(Q)&&(Q.resultId===void 0||typeof Q.resultId=="string")&&Array.isArray(Q.data)&&(Q.data.length===0||typeof Q.data[0]=="number")}a(ve,"is"),X.is=ve})(wt||(e.SemanticTokens=wt={}));var sr;(function(X){function ve(Q,B){return{range:Q,text:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B!=null&&l.is(B.range)&&De.string(B.text)}a(Te,"is"),X.is=Te})(sr||(e.InlineValueText=sr={}));var er;(function(X){function ve(Q,B,te){return{range:Q,variableName:B,caseSensitiveLookup:te}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B!=null&&l.is(B.range)&&De.boolean(B.caseSensitiveLookup)&&(De.string(B.variableName)||B.variableName===void 0)}a(Te,"is"),X.is=Te})(er||(e.InlineValueVariableLookup=er={}));var wr;(function(X){function ve(Q,B){return{range:Q,expression:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return B!=null&&l.is(B.range)&&(De.string(B.expression)||B.expression===void 0)}a(Te,"is"),X.is=Te})(wr||(e.InlineValueEvaluatableExpression=wr={}));var pr;(function(X){function ve(Q,B){return{frameId:Q,stoppedLocation:B}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.defined(B)&&l.is(Q.stoppedLocation)}a(Te,"is"),X.is=Te})(pr||(e.InlineValueContext=pr={}));var nr;(function(X){X.Type=1,X.Parameter=2;function ve(Te){return Te===1||Te===2}a(ve,"is"),X.is=ve})(nr||(e.InlayHintKind=nr={}));var dr;(function(X){function ve(Q){return{value:Q}}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&(B.tooltip===void 0||De.string(B.tooltip)||ye.is(B.tooltip))&&(B.location===void 0||u.is(B.location))&&(B.command===void 0||k.is(B.command))}a(Te,"is"),X.is=Te})(dr||(e.InlayHintLabelPart=dr={}));var ir;(function(X){function ve(Q,B,te){var Ae={position:Q,label:B};return te!==void 0&&(Ae.kind=te),Ae}a(ve,"create"),X.create=ve;function Te(Q){var B=Q;return De.objectLiteral(B)&&c.is(B.position)&&(De.string(B.label)||De.typedArray(B.label,dr.is))&&(B.kind===void 0||nr.is(B.kind))&&B.textEdits===void 0||De.typedArray(B.textEdits,N.is)&&(B.tooltip===void 0||De.string(B.tooltip)||ye.is(B.tooltip))&&(B.paddingLeft===void 0||De.boolean(B.paddingLeft))&&(B.paddingRight===void 0||De.boolean(B.paddingRight))}a(Te,"is"),X.is=Te})(ir||(e.InlayHint=ir={}));var Lr;(function(X){function ve(Te){return{kind:"snippet",value:Te}}a(ve,"createSnippet"),X.createSnippet=ve})(Lr||(e.StringValue=Lr={}));var Yr;(function(X){function ve(Te,Q,B,te){return{insertText:Te,filterText:Q,range:B,command:te}}a(ve,"create"),X.create=ve})(Yr||(e.InlineCompletionItem=Yr={}));var cn;(function(X){function ve(Te){return{items:Te}}a(ve,"create"),X.create=ve})(cn||(e.InlineCompletionList=cn={}));var xn;(function(X){X.Invoked=0,X.Automatic=1})(xn||(e.InlineCompletionTriggerKind=xn={}));var oi;(function(X){function ve(Te,Q){return{range:Te,text:Q}}a(ve,"create"),X.create=ve})(oi||(e.SelectedCompletionInfo=oi={}));var kn;(function(X){function ve(Te,Q){return{triggerKind:Te,selectedCompletionInfo:Q}}a(ve,"create"),X.create=ve})(kn||(e.InlineCompletionContext=kn={}));var ri;(function(X){function ve(Te){var Q=Te;return De.objectLiteral(Q)&&n.is(Q.uri)&&De.string(Q.name)}a(ve,"is"),X.is=ve})(ri||(e.WorkspaceFolder=ri={})),e.EOL=[`
`,`\r
`,"\r"];var ln;(function(X){function ve(te,Ae,Re,dt){return new Xn(te,Ae,Re,dt)}a(ve,"create"),X.create=ve;function Te(te){var Ae=te;return!!(De.defined(Ae)&&De.string(Ae.uri)&&(De.undefined(Ae.languageId)||De.string(Ae.languageId))&&De.uinteger(Ae.lineCount)&&De.func(Ae.getText)&&De.func(Ae.positionAt)&&De.func(Ae.offsetAt))}a(Te,"is"),X.is=Te;function Q(te,Ae){for(var Re=te.getText(),dt=B(Ae,function(xr,fi){var io=xr.range.start.line-fi.range.start.line;return io===0?xr.range.start.character-fi.range.start.character:io}),St=Re.length,Yt=dt.length-1;Yt>=0;Yt--){var tr=dt[Yt],Jt=te.offsetAt(tr.range.start),It=te.offsetAt(tr.range.end);if(It<=St)Re=Re.substring(0,Jt)+tr.newText+Re.substring(It,Re.length);else throw new Error("Overlapping edit");St=Jt}return Re}a(Q,"applyEdits"),X.applyEdits=Q;function B(te,Ae){if(te.length<=1)return te;var Re=te.length/2|0,dt=te.slice(0,Re),St=te.slice(Re);B(dt,Ae),B(St,Ae);for(var Yt=0,tr=0,Jt=0;Yt<dt.length&&tr<St.length;){var It=Ae(dt[Yt],St[tr]);It<=0?te[Jt++]=dt[Yt++]:te[Jt++]=St[tr++]}for(;Yt<dt.length;)te[Jt++]=dt[Yt++];for(;tr<St.length;)te[Jt++]=St[tr++];return te}a(B,"mergeSort")})(ln||(e.TextDocument=ln={}));var Xn=function(){function X(ve,Te,Q,B){this._uri=ve,this._languageId=Te,this._version=Q,this._content=B,this._lineOffsets=void 0}return a(X,"FullTextDocument"),Object.defineProperty(X.prototype,"uri",{get:a(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"languageId",{get:a(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"version",{get:a(function(){return this._version},"get"),enumerable:!1,configurable:!0}),X.prototype.getText=function(ve){if(ve){var Te=this.offsetAt(ve.start),Q=this.offsetAt(ve.end);return this._content.substring(Te,Q)}return this._content},X.prototype.update=function(ve,Te){this._content=ve.text,this._version=Te,this._lineOffsets=void 0},X.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ve=[],Te=this._content,Q=!0,B=0;B<Te.length;B++){Q&&(ve.push(B),Q=!1);var te=Te.charAt(B);Q=te==="\r"||te===`
`,te==="\r"&&B+1<Te.length&&Te.charAt(B+1)===`
`&&B++}Q&&Te.length>0&&ve.push(Te.length),this._lineOffsets=ve}return this._lineOffsets},X.prototype.positionAt=function(ve){ve=Math.max(Math.min(ve,this._content.length),0);var Te=this.getLineOffsets(),Q=0,B=Te.length;if(B===0)return c.create(0,ve);for(;Q<B;){var te=Math.floor((Q+B)/2);Te[te]>ve?B=te:Q=te+1}var Ae=Q-1;return c.create(Ae,ve-Te[Ae])},X.prototype.offsetAt=function(ve){var Te=this.getLineOffsets();if(ve.line>=Te.length)return this._content.length;if(ve.line<0)return 0;var Q=Te[ve.line],B=ve.line+1<Te.length?Te[ve.line+1]:this._content.length;return Math.max(Math.min(Q+ve.character,B),Q)},Object.defineProperty(X.prototype,"lineCount",{get:a(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),X}(),De;(function(X){var ve=Object.prototype.toString;function Te(It){return typeof It<"u"}a(Te,"defined"),X.defined=Te;function Q(It){return typeof It>"u"}a(Q,"undefined"),X.undefined=Q;function B(It){return It===!0||It===!1}a(B,"boolean"),X.boolean=B;function te(It){return ve.call(It)==="[object String]"}a(te,"string"),X.string=te;function Ae(It){return ve.call(It)==="[object Number]"}a(Ae,"number"),X.number=Ae;function Re(It,xr,fi){return ve.call(It)==="[object Number]"&&xr<=It&&It<=fi}a(Re,"numberRange"),X.numberRange=Re;function dt(It){return ve.call(It)==="[object Number]"&&-2147483648<=It&&It<=2147483647}a(dt,"integer"),X.integer=dt;function St(It){return ve.call(It)==="[object Number]"&&0<=It&&It<=2147483647}a(St,"uinteger"),X.uinteger=St;function Yt(It){return ve.call(It)==="[object Function]"}a(Yt,"func"),X.func=Yt;function tr(It){return It!==null&&typeof It=="object"}a(tr,"objectLiteral"),X.objectLiteral=tr;function Jt(It,xr){return Array.isArray(It)&&It.every(xr)}a(Jt,"typedArray"),X.typedArray=Jt})(De||(De={}))})});var Ma=$(fp=>{"use strict";f();Object.defineProperty(fp,"__esModule",{value:!0});fp.ProtocolNotificationType=fp.ProtocolNotificationType0=fp.ProtocolRequestType=fp.ProtocolRequestType0=fp.RegistrationType=fp.MessageDirection=void 0;var bD=a2(),uLe;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(uLe||(fp.MessageDirection=uLe={}));var xme=class{static{a(this,"RegistrationType")}constructor(e){this.method=e}};fp.RegistrationType=xme;var Eme=class extends bD.RequestType0{static{a(this,"ProtocolRequestType0")}constructor(e){super(e)}};fp.ProtocolRequestType0=Eme;var bme=class extends bD.RequestType{static{a(this,"ProtocolRequestType")}constructor(e){super(e,bD.ParameterStructures.byName)}};fp.ProtocolRequestType=bme;var Ime=class extends bD.NotificationType0{static{a(this,"ProtocolNotificationType0")}constructor(e){super(e)}};fp.ProtocolNotificationType0=Ime;var Tme=class extends bD.NotificationType{static{a(this,"ProtocolNotificationType")}constructor(e){super(e,bD.ParameterStructures.byName)}};fp.ProtocolNotificationType=Tme});var HG=$(il=>{"use strict";f();Object.defineProperty(il,"__esModule",{value:!0});il.objectLiteral=il.typedArray=il.stringArray=il.array=il.func=il.error=il.number=il.string=il.boolean=void 0;function x4t(t){return t===!0||t===!1}a(x4t,"boolean");il.boolean=x4t;function dLe(t){return typeof t=="string"||t instanceof String}a(dLe,"string");il.string=dLe;function E4t(t){return typeof t=="number"||t instanceof Number}a(E4t,"number");il.number=E4t;function b4t(t){return t instanceof Error}a(b4t,"error");il.error=b4t;function I4t(t){return typeof t=="function"}a(I4t,"func");il.func=I4t;function fLe(t){return Array.isArray(t)}a(fLe,"array");il.array=fLe;function T4t(t){return fLe(t)&&t.every(e=>dLe(e))}a(T4t,"stringArray");il.stringArray=T4t;function w4t(t,e){return Array.isArray(t)&&t.every(e)}a(w4t,"typedArray");il.typedArray=w4t;function _4t(t){return t!==null&&typeof t=="object"}a(_4t,"objectLiteral");il.objectLiteral=_4t});var hLe=$($G=>{"use strict";f();Object.defineProperty($G,"__esModule",{value:!0});$G.ImplementationRequest=void 0;var pLe=Ma(),mLe;(function(t){t.method="textDocument/implementation",t.messageDirection=pLe.MessageDirection.clientToServer,t.type=new pLe.ProtocolRequestType(t.method)})(mLe||($G.ImplementationRequest=mLe={}))});var yLe=$(WG=>{"use strict";f();Object.defineProperty(WG,"__esModule",{value:!0});WG.TypeDefinitionRequest=void 0;var gLe=Ma(),ALe;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=gLe.MessageDirection.clientToServer,t.type=new gLe.ProtocolRequestType(t.method)})(ALe||(WG.TypeDefinitionRequest=ALe={}))});var xLe=$(ID=>{"use strict";f();Object.defineProperty(ID,"__esModule",{value:!0});ID.DidChangeWorkspaceFoldersNotification=ID.WorkspaceFoldersRequest=void 0;var jG=Ma(),CLe;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=jG.MessageDirection.serverToClient,t.type=new jG.ProtocolRequestType0(t.method)})(CLe||(ID.WorkspaceFoldersRequest=CLe={}));var vLe;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=jG.MessageDirection.clientToServer,t.type=new jG.ProtocolNotificationType(t.method)})(vLe||(ID.DidChangeWorkspaceFoldersNotification=vLe={}))});var ILe=$(GG=>{"use strict";f();Object.defineProperty(GG,"__esModule",{value:!0});GG.ConfigurationRequest=void 0;var ELe=Ma(),bLe;(function(t){t.method="workspace/configuration",t.messageDirection=ELe.MessageDirection.serverToClient,t.type=new ELe.ProtocolRequestType(t.method)})(bLe||(GG.ConfigurationRequest=bLe={}))});var _Le=$(TD=>{"use strict";f();Object.defineProperty(TD,"__esModule",{value:!0});TD.ColorPresentationRequest=TD.DocumentColorRequest=void 0;var VG=Ma(),TLe;(function(t){t.method="textDocument/documentColor",t.messageDirection=VG.MessageDirection.clientToServer,t.type=new VG.ProtocolRequestType(t.method)})(TLe||(TD.DocumentColorRequest=TLe={}));var wLe;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=VG.MessageDirection.clientToServer,t.type=new VG.ProtocolRequestType(t.method)})(wLe||(TD.ColorPresentationRequest=wLe={}))});var kLe=$(wD=>{"use strict";f();Object.defineProperty(wD,"__esModule",{value:!0});wD.FoldingRangeRefreshRequest=wD.FoldingRangeRequest=void 0;var zG=Ma(),SLe;(function(t){t.method="textDocument/foldingRange",t.messageDirection=zG.MessageDirection.clientToServer,t.type=new zG.ProtocolRequestType(t.method)})(SLe||(wD.FoldingRangeRequest=SLe={}));var RLe;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=zG.MessageDirection.serverToClient,t.type=new zG.ProtocolRequestType0(t.method)})(RLe||(wD.FoldingRangeRefreshRequest=RLe={}))});var BLe=$(KG=>{"use strict";f();Object.defineProperty(KG,"__esModule",{value:!0});KG.DeclarationRequest=void 0;var PLe=Ma(),DLe;(function(t){t.method="textDocument/declaration",t.messageDirection=PLe.MessageDirection.clientToServer,t.type=new PLe.ProtocolRequestType(t.method)})(DLe||(KG.DeclarationRequest=DLe={}))});var LLe=$(YG=>{"use strict";f();Object.defineProperty(YG,"__esModule",{value:!0});YG.SelectionRangeRequest=void 0;var NLe=Ma(),MLe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=NLe.MessageDirection.clientToServer,t.type=new NLe.ProtocolRequestType(t.method)})(MLe||(YG.SelectionRangeRequest=MLe={}))});var ULe=$(FI=>{"use strict";f();Object.defineProperty(FI,"__esModule",{value:!0});FI.WorkDoneProgressCancelNotification=FI.WorkDoneProgressCreateRequest=FI.WorkDoneProgress=void 0;var S4t=a2(),JG=Ma(),FLe;(function(t){t.type=new S4t.ProgressType;function e(r){return r===t.type}a(e,"is"),t.is=e})(FLe||(FI.WorkDoneProgress=FLe={}));var OLe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=JG.MessageDirection.serverToClient,t.type=new JG.ProtocolRequestType(t.method)})(OLe||(FI.WorkDoneProgressCreateRequest=OLe={}));var QLe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=JG.MessageDirection.clientToServer,t.type=new JG.ProtocolNotificationType(t.method)})(QLe||(FI.WorkDoneProgressCancelNotification=QLe={}))});var WLe=$(OI=>{"use strict";f();Object.defineProperty(OI,"__esModule",{value:!0});OI.CallHierarchyOutgoingCallsRequest=OI.CallHierarchyIncomingCallsRequest=OI.CallHierarchyPrepareRequest=void 0;var _D=Ma(),qLe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=_D.MessageDirection.clientToServer,t.type=new _D.ProtocolRequestType(t.method)})(qLe||(OI.CallHierarchyPrepareRequest=qLe={}));var HLe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=_D.MessageDirection.clientToServer,t.type=new _D.ProtocolRequestType(t.method)})(HLe||(OI.CallHierarchyIncomingCallsRequest=HLe={}));var $Le;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=_D.MessageDirection.clientToServer,t.type=new _D.ProtocolRequestType(t.method)})($Le||(OI.CallHierarchyOutgoingCallsRequest=$Le={}))});var YLe=$(pp=>{"use strict";f();Object.defineProperty(pp,"__esModule",{value:!0});pp.SemanticTokensRefreshRequest=pp.SemanticTokensRangeRequest=pp.SemanticTokensDeltaRequest=pp.SemanticTokensRequest=pp.SemanticTokensRegistrationType=pp.TokenFormat=void 0;var Zv=Ma(),jLe;(function(t){t.Relative="relative"})(jLe||(pp.TokenFormat=jLe={}));var A6;(function(t){t.method="textDocument/semanticTokens",t.type=new Zv.RegistrationType(t.method)})(A6||(pp.SemanticTokensRegistrationType=A6={}));var GLe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Zv.MessageDirection.clientToServer,t.type=new Zv.ProtocolRequestType(t.method),t.registrationMethod=A6.method})(GLe||(pp.SemanticTokensRequest=GLe={}));var VLe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Zv.MessageDirection.clientToServer,t.type=new Zv.ProtocolRequestType(t.method),t.registrationMethod=A6.method})(VLe||(pp.SemanticTokensDeltaRequest=VLe={}));var zLe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Zv.MessageDirection.clientToServer,t.type=new Zv.ProtocolRequestType(t.method),t.registrationMethod=A6.method})(zLe||(pp.SemanticTokensRangeRequest=zLe={}));var KLe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Zv.MessageDirection.serverToClient,t.type=new Zv.ProtocolRequestType0(t.method)})(KLe||(pp.SemanticTokensRefreshRequest=KLe={}))});var ZLe=$(XG=>{"use strict";f();Object.defineProperty(XG,"__esModule",{value:!0});XG.ShowDocumentRequest=void 0;var JLe=Ma(),XLe;(function(t){t.method="window/showDocument",t.messageDirection=JLe.MessageDirection.serverToClient,t.type=new JLe.ProtocolRequestType(t.method)})(XLe||(XG.ShowDocumentRequest=XLe={}))});var rFe=$(ZG=>{"use strict";f();Object.defineProperty(ZG,"__esModule",{value:!0});ZG.LinkedEditingRangeRequest=void 0;var eFe=Ma(),tFe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=eFe.MessageDirection.clientToServer,t.type=new eFe.ProtocolRequestType(t.method)})(tFe||(ZG.LinkedEditingRangeRequest=tFe={}))});var uFe=$(Fd=>{"use strict";f();Object.defineProperty(Fd,"__esModule",{value:!0});Fd.WillDeleteFilesRequest=Fd.DidDeleteFilesNotification=Fd.DidRenameFilesNotification=Fd.WillRenameFilesRequest=Fd.DidCreateFilesNotification=Fd.WillCreateFilesRequest=Fd.FileOperationPatternKind=void 0;var Xm=Ma(),nFe;(function(t){t.file="file",t.folder="folder"})(nFe||(Fd.FileOperationPatternKind=nFe={}));var iFe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Xm.MessageDirection.clientToServer,t.type=new Xm.ProtocolRequestType(t.method)})(iFe||(Fd.WillCreateFilesRequest=iFe={}));var oFe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Xm.MessageDirection.clientToServer,t.type=new Xm.ProtocolNotificationType(t.method)})(oFe||(Fd.DidCreateFilesNotification=oFe={}));var sFe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Xm.MessageDirection.clientToServer,t.type=new Xm.ProtocolRequestType(t.method)})(sFe||(Fd.WillRenameFilesRequest=sFe={}));var aFe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Xm.MessageDirection.clientToServer,t.type=new Xm.ProtocolNotificationType(t.method)})(aFe||(Fd.DidRenameFilesNotification=aFe={}));var cFe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Xm.MessageDirection.clientToServer,t.type=new Xm.ProtocolNotificationType(t.method)})(cFe||(Fd.DidDeleteFilesNotification=cFe={}));var lFe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Xm.MessageDirection.clientToServer,t.type=new Xm.ProtocolRequestType(t.method)})(lFe||(Fd.WillDeleteFilesRequest=lFe={}))});var hFe=$(QI=>{"use strict";f();Object.defineProperty(QI,"__esModule",{value:!0});QI.MonikerRequest=QI.MonikerKind=QI.UniquenessLevel=void 0;var dFe=Ma(),fFe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(fFe||(QI.UniquenessLevel=fFe={}));var pFe;(function(t){t.$import="import",t.$export="export",t.local="local"})(pFe||(QI.MonikerKind=pFe={}));var mFe;(function(t){t.method="textDocument/moniker",t.messageDirection=dFe.MessageDirection.clientToServer,t.type=new dFe.ProtocolRequestType(t.method)})(mFe||(QI.MonikerRequest=mFe={}))});var CFe=$(UI=>{"use strict";f();Object.defineProperty(UI,"__esModule",{value:!0});UI.TypeHierarchySubtypesRequest=UI.TypeHierarchySupertypesRequest=UI.TypeHierarchyPrepareRequest=void 0;var SD=Ma(),gFe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=SD.MessageDirection.clientToServer,t.type=new SD.ProtocolRequestType(t.method)})(gFe||(UI.TypeHierarchyPrepareRequest=gFe={}));var AFe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=SD.MessageDirection.clientToServer,t.type=new SD.ProtocolRequestType(t.method)})(AFe||(UI.TypeHierarchySupertypesRequest=AFe={}));var yFe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=SD.MessageDirection.clientToServer,t.type=new SD.ProtocolRequestType(t.method)})(yFe||(UI.TypeHierarchySubtypesRequest=yFe={}))});var EFe=$(RD=>{"use strict";f();Object.defineProperty(RD,"__esModule",{value:!0});RD.InlineValueRefreshRequest=RD.InlineValueRequest=void 0;var eV=Ma(),vFe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=eV.MessageDirection.clientToServer,t.type=new eV.ProtocolRequestType(t.method)})(vFe||(RD.InlineValueRequest=vFe={}));var xFe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=eV.MessageDirection.serverToClient,t.type=new eV.ProtocolRequestType0(t.method)})(xFe||(RD.InlineValueRefreshRequest=xFe={}))});var wFe=$(qI=>{"use strict";f();Object.defineProperty(qI,"__esModule",{value:!0});qI.InlayHintRefreshRequest=qI.InlayHintResolveRequest=qI.InlayHintRequest=void 0;var kD=Ma(),bFe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=kD.MessageDirection.clientToServer,t.type=new kD.ProtocolRequestType(t.method)})(bFe||(qI.InlayHintRequest=bFe={}));var IFe;(function(t){t.method="inlayHint/resolve",t.messageDirection=kD.MessageDirection.clientToServer,t.type=new kD.ProtocolRequestType(t.method)})(IFe||(qI.InlayHintResolveRequest=IFe={}));var TFe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=kD.MessageDirection.serverToClient,t.type=new kD.ProtocolRequestType0(t.method)})(TFe||(qI.InlayHintRefreshRequest=TFe={}))});var BFe=$(Zm=>{"use strict";f();Object.defineProperty(Zm,"__esModule",{value:!0});Zm.DiagnosticRefreshRequest=Zm.WorkspaceDiagnosticRequest=Zm.DocumentDiagnosticRequest=Zm.DocumentDiagnosticReportKind=Zm.DiagnosticServerCancellationData=void 0;var DFe=a2(),R4t=HG(),PD=Ma(),_Fe;(function(t){function e(r){let n=r;return n&&R4t.boolean(n.retriggerRequest)}a(e,"is"),t.is=e})(_Fe||(Zm.DiagnosticServerCancellationData=_Fe={}));var SFe;(function(t){t.Full="full",t.Unchanged="unchanged"})(SFe||(Zm.DocumentDiagnosticReportKind=SFe={}));var RFe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=PD.MessageDirection.clientToServer,t.type=new PD.ProtocolRequestType(t.method),t.partialResult=new DFe.ProgressType})(RFe||(Zm.DocumentDiagnosticRequest=RFe={}));var kFe;(function(t){t.method="workspace/diagnostic",t.messageDirection=PD.MessageDirection.clientToServer,t.type=new PD.ProtocolRequestType(t.method),t.partialResult=new DFe.ProgressType})(kFe||(Zm.WorkspaceDiagnosticRequest=kFe={}));var PFe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=PD.MessageDirection.serverToClient,t.type=new PD.ProtocolRequestType0(t.method)})(PFe||(Zm.DiagnosticRefreshRequest=PFe={}))});var UFe=$(lc=>{"use strict";f();Object.defineProperty(lc,"__esModule",{value:!0});lc.DidCloseNotebookDocumentNotification=lc.DidSaveNotebookDocumentNotification=lc.DidChangeNotebookDocumentNotification=lc.NotebookCellArrayChange=lc.DidOpenNotebookDocumentNotification=lc.NotebookDocumentSyncRegistrationType=lc.NotebookDocument=lc.NotebookCell=lc.ExecutionSummary=lc.NotebookCellKind=void 0;var y6=qG(),mA=HG(),yC=Ma(),wme;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}a(e,"is"),t.is=e})(wme||(lc.NotebookCellKind=wme={}));var _me;(function(t){function e(o,s){let c={executionOrder:o};return(s===!0||s===!1)&&(c.success=s),c}a(e,"create"),t.create=e;function r(o){let s=o;return mA.objectLiteral(s)&&y6.uinteger.is(s.executionOrder)&&(s.success===void 0||mA.boolean(s.success))}a(r,"is"),t.is=r;function n(o,s){return o===s?!0:o==null||s===null||s===void 0?!1:o.executionOrder===s.executionOrder&&o.success===s.success}a(n,"equals"),t.equals=n})(_me||(lc.ExecutionSummary=_me={}));var tV;(function(t){function e(s,c){return{kind:s,document:c}}a(e,"create"),t.create=e;function r(s){let c=s;return mA.objectLiteral(c)&&wme.is(c.kind)&&y6.DocumentUri.is(c.document)&&(c.metadata===void 0||mA.objectLiteral(c.metadata))}a(r,"is"),t.is=r;function n(s,c){let l=new Set;return s.document!==c.document&&l.add("document"),s.kind!==c.kind&&l.add("kind"),s.executionSummary!==c.executionSummary&&l.add("executionSummary"),(s.metadata!==void 0||c.metadata!==void 0)&&!o(s.metadata,c.metadata)&&l.add("metadata"),(s.executionSummary!==void 0||c.executionSummary!==void 0)&&!_me.equals(s.executionSummary,c.executionSummary)&&l.add("executionSummary"),l}a(n,"diff"),t.diff=n;function o(s,c){if(s===c)return!0;if(s==null||c===null||c===void 0||typeof s!=typeof c||typeof s!="object")return!1;let l=Array.isArray(s),u=Array.isArray(c);if(l!==u)return!1;if(l&&u){if(s.length!==c.length)return!1;for(let d=0;d<s.length;d++)if(!o(s[d],c[d]))return!1}if(mA.objectLiteral(s)&&mA.objectLiteral(c)){let d=Object.keys(s),p=Object.keys(c);if(d.length!==p.length||(d.sort(),p.sort(),!o(d,p)))return!1;for(let m=0;m<d.length;m++){let h=d[m];if(!o(s[h],c[h]))return!1}}return!0}a(o,"equalsMetadata")})(tV||(lc.NotebookCell=tV={}));var NFe;(function(t){function e(n,o,s,c){return{uri:n,notebookType:o,version:s,cells:c}}a(e,"create"),t.create=e;function r(n){let o=n;return mA.objectLiteral(o)&&mA.string(o.uri)&&y6.integer.is(o.version)&&mA.typedArray(o.cells,tV.is)}a(r,"is"),t.is=r})(NFe||(lc.NotebookDocument=NFe={}));var DD;(function(t){t.method="notebookDocument/sync",t.messageDirection=yC.MessageDirection.clientToServer,t.type=new yC.RegistrationType(t.method)})(DD||(lc.NotebookDocumentSyncRegistrationType=DD={}));var MFe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=yC.MessageDirection.clientToServer,t.type=new yC.ProtocolNotificationType(t.method),t.registrationMethod=DD.method})(MFe||(lc.DidOpenNotebookDocumentNotification=MFe={}));var LFe;(function(t){function e(n){let o=n;return mA.objectLiteral(o)&&y6.uinteger.is(o.start)&&y6.uinteger.is(o.deleteCount)&&(o.cells===void 0||mA.typedArray(o.cells,tV.is))}a(e,"is"),t.is=e;function r(n,o,s){let c={start:n,deleteCount:o};return s!==void 0&&(c.cells=s),c}a(r,"create"),t.create=r})(LFe||(lc.NotebookCellArrayChange=LFe={}));var FFe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=yC.MessageDirection.clientToServer,t.type=new yC.ProtocolNotificationType(t.method),t.registrationMethod=DD.method})(FFe||(lc.DidChangeNotebookDocumentNotification=FFe={}));var OFe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=yC.MessageDirection.clientToServer,t.type=new yC.ProtocolNotificationType(t.method),t.registrationMethod=DD.method})(OFe||(lc.DidSaveNotebookDocumentNotification=OFe={}));var QFe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=yC.MessageDirection.clientToServer,t.type=new yC.ProtocolNotificationType(t.method),t.registrationMethod=DD.method})(QFe||(lc.DidCloseNotebookDocumentNotification=QFe={}))});var $Fe=$(rV=>{"use strict";f();Object.defineProperty(rV,"__esModule",{value:!0});rV.InlineCompletionRequest=void 0;var qFe=Ma(),HFe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=qFe.MessageDirection.clientToServer,t.type=new qFe.ProtocolRequestType(t.method)})(HFe||(rV.InlineCompletionRequest=HFe={}))});var r9e=$(Ie=>{"use strict";f();Object.defineProperty(Ie,"__esModule",{value:!0});Ie.WorkspaceSymbolRequest=Ie.CodeActionResolveRequest=Ie.CodeActionRequest=Ie.DocumentSymbolRequest=Ie.DocumentHighlightRequest=Ie.ReferencesRequest=Ie.DefinitionRequest=Ie.SignatureHelpRequest=Ie.SignatureHelpTriggerKind=Ie.HoverRequest=Ie.CompletionResolveRequest=Ie.CompletionRequest=Ie.CompletionTriggerKind=Ie.PublishDiagnosticsNotification=Ie.WatchKind=Ie.RelativePattern=Ie.FileChangeType=Ie.DidChangeWatchedFilesNotification=Ie.WillSaveTextDocumentWaitUntilRequest=Ie.WillSaveTextDocumentNotification=Ie.TextDocumentSaveReason=Ie.DidSaveTextDocumentNotification=Ie.DidCloseTextDocumentNotification=Ie.DidChangeTextDocumentNotification=Ie.TextDocumentContentChangeEvent=Ie.DidOpenTextDocumentNotification=Ie.TextDocumentSyncKind=Ie.TelemetryEventNotification=Ie.LogMessageNotification=Ie.ShowMessageRequest=Ie.ShowMessageNotification=Ie.MessageType=Ie.DidChangeConfigurationNotification=Ie.ExitNotification=Ie.ShutdownRequest=Ie.InitializedNotification=Ie.InitializeErrorCodes=Ie.InitializeRequest=Ie.WorkDoneProgressOptions=Ie.TextDocumentRegistrationOptions=Ie.StaticRegistrationOptions=Ie.PositionEncodingKind=Ie.FailureHandlingKind=Ie.ResourceOperationKind=Ie.UnregistrationRequest=Ie.RegistrationRequest=Ie.DocumentSelector=Ie.NotebookCellTextDocumentFilter=Ie.NotebookDocumentFilter=Ie.TextDocumentFilter=void 0;Ie.MonikerRequest=Ie.MonikerKind=Ie.UniquenessLevel=Ie.WillDeleteFilesRequest=Ie.DidDeleteFilesNotification=Ie.WillRenameFilesRequest=Ie.DidRenameFilesNotification=Ie.WillCreateFilesRequest=Ie.DidCreateFilesNotification=Ie.FileOperationPatternKind=Ie.LinkedEditingRangeRequest=Ie.ShowDocumentRequest=Ie.SemanticTokensRegistrationType=Ie.SemanticTokensRefreshRequest=Ie.SemanticTokensRangeRequest=Ie.SemanticTokensDeltaRequest=Ie.SemanticTokensRequest=Ie.TokenFormat=Ie.CallHierarchyPrepareRequest=Ie.CallHierarchyOutgoingCallsRequest=Ie.CallHierarchyIncomingCallsRequest=Ie.WorkDoneProgressCancelNotification=Ie.WorkDoneProgressCreateRequest=Ie.WorkDoneProgress=Ie.SelectionRangeRequest=Ie.DeclarationRequest=Ie.FoldingRangeRefreshRequest=Ie.FoldingRangeRequest=Ie.ColorPresentationRequest=Ie.DocumentColorRequest=Ie.ConfigurationRequest=Ie.DidChangeWorkspaceFoldersNotification=Ie.WorkspaceFoldersRequest=Ie.TypeDefinitionRequest=Ie.ImplementationRequest=Ie.ApplyWorkspaceEditRequest=Ie.ExecuteCommandRequest=Ie.PrepareRenameRequest=Ie.RenameRequest=Ie.PrepareSupportDefaultBehavior=Ie.DocumentOnTypeFormattingRequest=Ie.DocumentRangesFormattingRequest=Ie.DocumentRangeFormattingRequest=Ie.DocumentFormattingRequest=Ie.DocumentLinkResolveRequest=Ie.DocumentLinkRequest=Ie.CodeLensRefreshRequest=Ie.CodeLensResolveRequest=Ie.CodeLensRequest=Ie.WorkspaceSymbolResolveRequest=void 0;Ie.InlineCompletionRequest=Ie.DidCloseNotebookDocumentNotification=Ie.DidSaveNotebookDocumentNotification=Ie.DidChangeNotebookDocumentNotification=Ie.NotebookCellArrayChange=Ie.DidOpenNotebookDocumentNotification=Ie.NotebookDocumentSyncRegistrationType=Ie.NotebookDocument=Ie.NotebookCell=Ie.ExecutionSummary=Ie.NotebookCellKind=Ie.DiagnosticRefreshRequest=Ie.WorkspaceDiagnosticRequest=Ie.DocumentDiagnosticRequest=Ie.DocumentDiagnosticReportKind=Ie.DiagnosticServerCancellationData=Ie.InlayHintRefreshRequest=Ie.InlayHintResolveRequest=Ie.InlayHintRequest=Ie.InlineValueRefreshRequest=Ie.InlineValueRequest=Ie.TypeHierarchySupertypesRequest=Ie.TypeHierarchySubtypesRequest=Ie.TypeHierarchyPrepareRequest=void 0;var Gt=Ma(),WFe=qG(),iu=HG(),k4t=hLe();Object.defineProperty(Ie,"ImplementationRequest",{enumerable:!0,get:a(function(){return k4t.ImplementationRequest},"get")});var P4t=yLe();Object.defineProperty(Ie,"TypeDefinitionRequest",{enumerable:!0,get:a(function(){return P4t.TypeDefinitionRequest},"get")});var X6e=xLe();Object.defineProperty(Ie,"WorkspaceFoldersRequest",{enumerable:!0,get:a(function(){return X6e.WorkspaceFoldersRequest},"get")});Object.defineProperty(Ie,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:a(function(){return X6e.DidChangeWorkspaceFoldersNotification},"get")});var D4t=ILe();Object.defineProperty(Ie,"ConfigurationRequest",{enumerable:!0,get:a(function(){return D4t.ConfigurationRequest},"get")});var Z6e=_Le();Object.defineProperty(Ie,"DocumentColorRequest",{enumerable:!0,get:a(function(){return Z6e.DocumentColorRequest},"get")});Object.defineProperty(Ie,"ColorPresentationRequest",{enumerable:!0,get:a(function(){return Z6e.ColorPresentationRequest},"get")});var e9e=kLe();Object.defineProperty(Ie,"FoldingRangeRequest",{enumerable:!0,get:a(function(){return e9e.FoldingRangeRequest},"get")});Object.defineProperty(Ie,"FoldingRangeRefreshRequest",{enumerable:!0,get:a(function(){return e9e.FoldingRangeRefreshRequest},"get")});var B4t=BLe();Object.defineProperty(Ie,"DeclarationRequest",{enumerable:!0,get:a(function(){return B4t.DeclarationRequest},"get")});var N4t=LLe();Object.defineProperty(Ie,"SelectionRangeRequest",{enumerable:!0,get:a(function(){return N4t.SelectionRangeRequest},"get")});var Dme=ULe();Object.defineProperty(Ie,"WorkDoneProgress",{enumerable:!0,get:a(function(){return Dme.WorkDoneProgress},"get")});Object.defineProperty(Ie,"WorkDoneProgressCreateRequest",{enumerable:!0,get:a(function(){return Dme.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(Ie,"WorkDoneProgressCancelNotification",{enumerable:!0,get:a(function(){return Dme.WorkDoneProgressCancelNotification},"get")});var Bme=WLe();Object.defineProperty(Ie,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:a(function(){return Bme.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(Ie,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:a(function(){return Bme.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(Ie,"CallHierarchyPrepareRequest",{enumerable:!0,get:a(function(){return Bme.CallHierarchyPrepareRequest},"get")});var BD=YLe();Object.defineProperty(Ie,"TokenFormat",{enumerable:!0,get:a(function(){return BD.TokenFormat},"get")});Object.defineProperty(Ie,"SemanticTokensRequest",{enumerable:!0,get:a(function(){return BD.SemanticTokensRequest},"get")});Object.defineProperty(Ie,"SemanticTokensDeltaRequest",{enumerable:!0,get:a(function(){return BD.SemanticTokensDeltaRequest},"get")});Object.defineProperty(Ie,"SemanticTokensRangeRequest",{enumerable:!0,get:a(function(){return BD.SemanticTokensRangeRequest},"get")});Object.defineProperty(Ie,"SemanticTokensRefreshRequest",{enumerable:!0,get:a(function(){return BD.SemanticTokensRefreshRequest},"get")});Object.defineProperty(Ie,"SemanticTokensRegistrationType",{enumerable:!0,get:a(function(){return BD.SemanticTokensRegistrationType},"get")});var M4t=ZLe();Object.defineProperty(Ie,"ShowDocumentRequest",{enumerable:!0,get:a(function(){return M4t.ShowDocumentRequest},"get")});var L4t=rFe();Object.defineProperty(Ie,"LinkedEditingRangeRequest",{enumerable:!0,get:a(function(){return L4t.LinkedEditingRangeRequest},"get")});var c2=uFe();Object.defineProperty(Ie,"FileOperationPatternKind",{enumerable:!0,get:a(function(){return c2.FileOperationPatternKind},"get")});Object.defineProperty(Ie,"DidCreateFilesNotification",{enumerable:!0,get:a(function(){return c2.DidCreateFilesNotification},"get")});Object.defineProperty(Ie,"WillCreateFilesRequest",{enumerable:!0,get:a(function(){return c2.WillCreateFilesRequest},"get")});Object.defineProperty(Ie,"DidRenameFilesNotification",{enumerable:!0,get:a(function(){return c2.DidRenameFilesNotification},"get")});Object.defineProperty(Ie,"WillRenameFilesRequest",{enumerable:!0,get:a(function(){return c2.WillRenameFilesRequest},"get")});Object.defineProperty(Ie,"DidDeleteFilesNotification",{enumerable:!0,get:a(function(){return c2.DidDeleteFilesNotification},"get")});Object.defineProperty(Ie,"WillDeleteFilesRequest",{enumerable:!0,get:a(function(){return c2.WillDeleteFilesRequest},"get")});var Nme=hFe();Object.defineProperty(Ie,"UniquenessLevel",{enumerable:!0,get:a(function(){return Nme.UniquenessLevel},"get")});Object.defineProperty(Ie,"MonikerKind",{enumerable:!0,get:a(function(){return Nme.MonikerKind},"get")});Object.defineProperty(Ie,"MonikerRequest",{enumerable:!0,get:a(function(){return Nme.MonikerRequest},"get")});var Mme=CFe();Object.defineProperty(Ie,"TypeHierarchyPrepareRequest",{enumerable:!0,get:a(function(){return Mme.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(Ie,"TypeHierarchySubtypesRequest",{enumerable:!0,get:a(function(){return Mme.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(Ie,"TypeHierarchySupertypesRequest",{enumerable:!0,get:a(function(){return Mme.TypeHierarchySupertypesRequest},"get")});var t9e=EFe();Object.defineProperty(Ie,"InlineValueRequest",{enumerable:!0,get:a(function(){return t9e.InlineValueRequest},"get")});Object.defineProperty(Ie,"InlineValueRefreshRequest",{enumerable:!0,get:a(function(){return t9e.InlineValueRefreshRequest},"get")});var Lme=wFe();Object.defineProperty(Ie,"InlayHintRequest",{enumerable:!0,get:a(function(){return Lme.InlayHintRequest},"get")});Object.defineProperty(Ie,"InlayHintResolveRequest",{enumerable:!0,get:a(function(){return Lme.InlayHintResolveRequest},"get")});Object.defineProperty(Ie,"InlayHintRefreshRequest",{enumerable:!0,get:a(function(){return Lme.InlayHintRefreshRequest},"get")});var C6=BFe();Object.defineProperty(Ie,"DiagnosticServerCancellationData",{enumerable:!0,get:a(function(){return C6.DiagnosticServerCancellationData},"get")});Object.defineProperty(Ie,"DocumentDiagnosticReportKind",{enumerable:!0,get:a(function(){return C6.DocumentDiagnosticReportKind},"get")});Object.defineProperty(Ie,"DocumentDiagnosticRequest",{enumerable:!0,get:a(function(){return C6.DocumentDiagnosticRequest},"get")});Object.defineProperty(Ie,"WorkspaceDiagnosticRequest",{enumerable:!0,get:a(function(){return C6.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(Ie,"DiagnosticRefreshRequest",{enumerable:!0,get:a(function(){return C6.DiagnosticRefreshRequest},"get")});var CC=UFe();Object.defineProperty(Ie,"NotebookCellKind",{enumerable:!0,get:a(function(){return CC.NotebookCellKind},"get")});Object.defineProperty(Ie,"ExecutionSummary",{enumerable:!0,get:a(function(){return CC.ExecutionSummary},"get")});Object.defineProperty(Ie,"NotebookCell",{enumerable:!0,get:a(function(){return CC.NotebookCell},"get")});Object.defineProperty(Ie,"NotebookDocument",{enumerable:!0,get:a(function(){return CC.NotebookDocument},"get")});Object.defineProperty(Ie,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:a(function(){return CC.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(Ie,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:a(function(){return CC.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(Ie,"NotebookCellArrayChange",{enumerable:!0,get:a(function(){return CC.NotebookCellArrayChange},"get")});Object.defineProperty(Ie,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:a(function(){return CC.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(Ie,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:a(function(){return CC.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(Ie,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:a(function(){return CC.DidCloseNotebookDocumentNotification},"get")});var F4t=$Fe();Object.defineProperty(Ie,"InlineCompletionRequest",{enumerable:!0,get:a(function(){return F4t.InlineCompletionRequest},"get")});var Sme;(function(t){function e(r){let n=r;return iu.string(n)||iu.string(n.language)||iu.string(n.scheme)||iu.string(n.pattern)}a(e,"is"),t.is=e})(Sme||(Ie.TextDocumentFilter=Sme={}));var Rme;(function(t){function e(r){let n=r;return iu.objectLiteral(n)&&(iu.string(n.notebookType)||iu.string(n.scheme)||iu.string(n.pattern))}a(e,"is"),t.is=e})(Rme||(Ie.NotebookDocumentFilter=Rme={}));var kme;(function(t){function e(r){let n=r;return iu.objectLiteral(n)&&(iu.string(n.notebook)||Rme.is(n.notebook))&&(n.language===void 0||iu.string(n.language))}a(e,"is"),t.is=e})(kme||(Ie.NotebookCellTextDocumentFilter=kme={}));var Pme;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!iu.string(n)&&!Sme.is(n)&&!kme.is(n))return!1;return!0}a(e,"is"),t.is=e})(Pme||(Ie.DocumentSelector=Pme={}));var jFe;(function(t){t.method="client/registerCapability",t.messageDirection=Gt.MessageDirection.serverToClient,t.type=new Gt.ProtocolRequestType(t.method)})(jFe||(Ie.RegistrationRequest=jFe={}));var GFe;(function(t){t.method="client/unregisterCapability",t.messageDirection=Gt.MessageDirection.serverToClient,t.type=new Gt.ProtocolRequestType(t.method)})(GFe||(Ie.UnregistrationRequest=GFe={}));var VFe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(VFe||(Ie.ResourceOperationKind=VFe={}));var zFe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(zFe||(Ie.FailureHandlingKind=zFe={}));var KFe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(KFe||(Ie.PositionEncodingKind=KFe={}));var YFe;(function(t){function e(r){let n=r;return n&&iu.string(n.id)&&n.id.length>0}a(e,"hasId"),t.hasId=e})(YFe||(Ie.StaticRegistrationOptions=YFe={}));var JFe;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||Pme.is(n.documentSelector))}a(e,"is"),t.is=e})(JFe||(Ie.TextDocumentRegistrationOptions=JFe={}));var XFe;(function(t){function e(n){let o=n;return iu.objectLiteral(o)&&(o.workDoneProgress===void 0||iu.boolean(o.workDoneProgress))}a(e,"is"),t.is=e;function r(n){let o=n;return o&&iu.boolean(o.workDoneProgress)}a(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(XFe||(Ie.WorkDoneProgressOptions=XFe={}));var ZFe;(function(t){t.method="initialize",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(ZFe||(Ie.InitializeRequest=ZFe={}));var e6e;(function(t){t.unknownProtocolVersion=1})(e6e||(Ie.InitializeErrorCodes=e6e={}));var t6e;(function(t){t.method="initialized",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method)})(t6e||(Ie.InitializedNotification=t6e={}));var r6e;(function(t){t.method="shutdown",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType0(t.method)})(r6e||(Ie.ShutdownRequest=r6e={}));var n6e;(function(t){t.method="exit",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType0(t.method)})(n6e||(Ie.ExitNotification=n6e={}));var i6e;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method)})(i6e||(Ie.DidChangeConfigurationNotification=i6e={}));var o6e;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(o6e||(Ie.MessageType=o6e={}));var s6e;(function(t){t.method="window/showMessage",t.messageDirection=Gt.MessageDirection.serverToClient,t.type=new Gt.ProtocolNotificationType(t.method)})(s6e||(Ie.ShowMessageNotification=s6e={}));var a6e;(function(t){t.method="window/showMessageRequest",t.messageDirection=Gt.MessageDirection.serverToClient,t.type=new Gt.ProtocolRequestType(t.method)})(a6e||(Ie.ShowMessageRequest=a6e={}));var c6e;(function(t){t.method="window/logMessage",t.messageDirection=Gt.MessageDirection.serverToClient,t.type=new Gt.ProtocolNotificationType(t.method)})(c6e||(Ie.LogMessageNotification=c6e={}));var l6e;(function(t){t.method="telemetry/event",t.messageDirection=Gt.MessageDirection.serverToClient,t.type=new Gt.ProtocolNotificationType(t.method)})(l6e||(Ie.TelemetryEventNotification=l6e={}));var u6e;(function(t){t.None=0,t.Full=1,t.Incremental=2})(u6e||(Ie.TextDocumentSyncKind=u6e={}));var d6e;(function(t){t.method="textDocument/didOpen",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method)})(d6e||(Ie.DidOpenTextDocumentNotification=d6e={}));var f6e;(function(t){function e(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range!==void 0&&(o.rangeLength===void 0||typeof o.rangeLength=="number")}a(e,"isIncremental"),t.isIncremental=e;function r(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range===void 0&&o.rangeLength===void 0}a(r,"isFull"),t.isFull=r})(f6e||(Ie.TextDocumentContentChangeEvent=f6e={}));var p6e;(function(t){t.method="textDocument/didChange",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method)})(p6e||(Ie.DidChangeTextDocumentNotification=p6e={}));var m6e;(function(t){t.method="textDocument/didClose",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method)})(m6e||(Ie.DidCloseTextDocumentNotification=m6e={}));var h6e;(function(t){t.method="textDocument/didSave",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method)})(h6e||(Ie.DidSaveTextDocumentNotification=h6e={}));var g6e;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(g6e||(Ie.TextDocumentSaveReason=g6e={}));var A6e;(function(t){t.method="textDocument/willSave",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method)})(A6e||(Ie.WillSaveTextDocumentNotification=A6e={}));var y6e;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(y6e||(Ie.WillSaveTextDocumentWaitUntilRequest=y6e={}));var C6e;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method)})(C6e||(Ie.DidChangeWatchedFilesNotification=C6e={}));var v6e;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(v6e||(Ie.FileChangeType=v6e={}));var x6e;(function(t){function e(r){let n=r;return iu.objectLiteral(n)&&(WFe.URI.is(n.baseUri)||WFe.WorkspaceFolder.is(n.baseUri))&&iu.string(n.pattern)}a(e,"is"),t.is=e})(x6e||(Ie.RelativePattern=x6e={}));var E6e;(function(t){t.Create=1,t.Change=2,t.Delete=4})(E6e||(Ie.WatchKind=E6e={}));var b6e;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Gt.MessageDirection.serverToClient,t.type=new Gt.ProtocolNotificationType(t.method)})(b6e||(Ie.PublishDiagnosticsNotification=b6e={}));var I6e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(I6e||(Ie.CompletionTriggerKind=I6e={}));var T6e;(function(t){t.method="textDocument/completion",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(T6e||(Ie.CompletionRequest=T6e={}));var w6e;(function(t){t.method="completionItem/resolve",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(w6e||(Ie.CompletionResolveRequest=w6e={}));var _6e;(function(t){t.method="textDocument/hover",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(_6e||(Ie.HoverRequest=_6e={}));var S6e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(S6e||(Ie.SignatureHelpTriggerKind=S6e={}));var R6e;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(R6e||(Ie.SignatureHelpRequest=R6e={}));var k6e;(function(t){t.method="textDocument/definition",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(k6e||(Ie.DefinitionRequest=k6e={}));var P6e;(function(t){t.method="textDocument/references",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(P6e||(Ie.ReferencesRequest=P6e={}));var D6e;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(D6e||(Ie.DocumentHighlightRequest=D6e={}));var B6e;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(B6e||(Ie.DocumentSymbolRequest=B6e={}));var N6e;(function(t){t.method="textDocument/codeAction",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(N6e||(Ie.CodeActionRequest=N6e={}));var M6e;(function(t){t.method="codeAction/resolve",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(M6e||(Ie.CodeActionResolveRequest=M6e={}));var L6e;(function(t){t.method="workspace/symbol",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(L6e||(Ie.WorkspaceSymbolRequest=L6e={}));var F6e;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(F6e||(Ie.WorkspaceSymbolResolveRequest=F6e={}));var O6e;(function(t){t.method="textDocument/codeLens",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(O6e||(Ie.CodeLensRequest=O6e={}));var Q6e;(function(t){t.method="codeLens/resolve",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(Q6e||(Ie.CodeLensResolveRequest=Q6e={}));var U6e;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Gt.MessageDirection.serverToClient,t.type=new Gt.ProtocolRequestType0(t.method)})(U6e||(Ie.CodeLensRefreshRequest=U6e={}));var q6e;(function(t){t.method="textDocument/documentLink",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(q6e||(Ie.DocumentLinkRequest=q6e={}));var H6e;(function(t){t.method="documentLink/resolve",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(H6e||(Ie.DocumentLinkResolveRequest=H6e={}));var $6e;(function(t){t.method="textDocument/formatting",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})($6e||(Ie.DocumentFormattingRequest=$6e={}));var W6e;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(W6e||(Ie.DocumentRangeFormattingRequest=W6e={}));var j6e;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(j6e||(Ie.DocumentRangesFormattingRequest=j6e={}));var G6e;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(G6e||(Ie.DocumentOnTypeFormattingRequest=G6e={}));var V6e;(function(t){t.Identifier=1})(V6e||(Ie.PrepareSupportDefaultBehavior=V6e={}));var z6e;(function(t){t.method="textDocument/rename",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(z6e||(Ie.RenameRequest=z6e={}));var K6e;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(K6e||(Ie.PrepareRenameRequest=K6e={}));var Y6e;(function(t){t.method="workspace/executeCommand",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolRequestType(t.method)})(Y6e||(Ie.ExecuteCommandRequest=Y6e={}));var J6e;(function(t){t.method="workspace/applyEdit",t.messageDirection=Gt.MessageDirection.serverToClient,t.type=new Gt.ProtocolRequestType("workspace/applyEdit")})(J6e||(Ie.ApplyWorkspaceEditRequest=J6e={}))});var i9e=$(nV=>{"use strict";f();Object.defineProperty(nV,"__esModule",{value:!0});nV.createProtocolConnection=void 0;var n9e=a2();function O4t(t,e,r,n){return n9e.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,n9e.createMessageConnection)(t,e,r,n)}a(O4t,"createProtocolConnection");nV.createProtocolConnection=O4t});var s9e=$(mp=>{"use strict";f();var Q4t=mp&&mp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iV=mp&&mp.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Q4t(e,t,r)};Object.defineProperty(mp,"__esModule",{value:!0});mp.LSPErrorCodes=mp.createProtocolConnection=void 0;iV(a2(),mp);iV(qG(),mp);iV(Ma(),mp);iV(r9e(),mp);var U4t=i9e();Object.defineProperty(mp,"createProtocolConnection",{enumerable:!0,get:a(function(){return U4t.createProtocolConnection},"get")});var o9e;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(o9e||(mp.LSPErrorCodes=o9e={}))});var Ai=$(vC=>{"use strict";f();var q4t=vC&&vC.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),a9e=vC&&vC.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&q4t(e,t,r)};Object.defineProperty(vC,"__esModule",{value:!0});vC.createProtocolConnection=void 0;var H4t=vme();a9e(vme(),vC);a9e(s9e(),vC);function $4t(t,e,r,n){return(0,H4t.createMessageConnection)(t,e,r,n)}a($4t,"createProtocolConnection");vC.createProtocolConnection=$4t});var y9e=$((lV,A9e)=>{f();(function(t,e){typeof lV=="object"&&typeof A9e<"u"?e(lV):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(lV,function(t){"use strict";function e(_,D){return _||D}a(e,"_pureAssign");function r(_,D){return _[D]}a(r,"_pureRef");var n=void 0,o=null,s="",c="function",l="object",u="prototype",d="__proto__",p="undefined",m="constructor",h="Symbol",g="_polyfill",A="length",y="name",v="call",b="toString",I=e(Object),S=r(I,u),k=e(String),N=r(k,u),F=e(Math),O=e(Array),Y=r(O,u),z=r(Y,"slice");function V(_,D){try{return{v:_.apply(this,D)}}catch(M){return{e:M}}}a(V,"safe");function U(_){return function(D){return typeof D===_}}a(U,"_createIs");function H(_){var D="[object "+_+"]";return function(M){return!!(M&&ee(M)===D)}}a(H,"_createObjIs");function ee(_){return S[b].call(_)}a(ee,"objToString");function J(_){return typeof _===p||_===p}a(J,"isUndefined");function G(_){return!Z(_)}a(G,"isStrictUndefined");function j(_){return _===o||J(_)}a(j,"isNullOrUndefined");function Z(_){return!!_||_!==n}a(Z,"isDefined");var ie=U("string"),ne=U(c);function re(_){return!_&&j(_)?!1:!!_&&typeof _===l}a(re,"isObject");var fe=r(O,"isArray"),ye=H("Error"),Qe=r(I,"getOwnPropertyDescriptor");function we(_,D){return!!_&&S.hasOwnProperty[v](_,D)}a(we,"objHasOwnProperty");var Xe=e(r(I,"hasOwn"),Oe);function Oe(_,D){return we(_,D)||!!Qe(_,D)}a(Oe,"polyObjHasOwn");function ut(_,D,M){if(_&&re(_)){for(var W in _)if(Xe(_,W)&&D[v](M||_,W,_[W])===-1)break}}a(ut,"objForEachKey");var Rt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Et(_){var D={};if(D[Rt.c]=!0,D[Rt.e]=!0,_.l){D.get=function(){return _.l.v};var M=Qe(_.l,"v");M&&M.set&&(D.set=function(W){_.l.v=W})}return ut(_,function(W,pe){D[Rt[W]]=G(pe)?D[Rt[W]]:pe}),D}a(Et,"_createProp");var At=r(I,"defineProperty");function de(_,D,M){return At(_,D,Et(M))}a(de,"objDefine");function qe(_,D,M,W,pe){var _e={};return ut(_,function(Pe,je){Ce(_e,Pe,D?je:Pe),Ce(_e,je,M?je:Pe)}),W?W(_e):_e}a(qe,"_createKeyValueMap");function Ce(_,D,M,W){At(_,D,{value:M,enumerable:!0,writable:!1})}a(Ce,"_assignMapValue");var We=e(k),ce="[object Error]";function ue(_,D){var M=s,W=S[b][v](_);W===ce&&(_={stack:We(_.stack),message:We(_.message),name:We(_.name)});try{M=JSON.stringify(_,o,D?typeof D=="number"?D:4:n),M=(M?M.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):o)||We(_)}catch(pe){M=" - "+ue(pe,D)}return W+": "+M}a(ue,"dumpObj");function He(_){throw new Error(_)}a(He,"throwError");function Me(_){throw new TypeError(_)}a(Me,"throwTypeError");var be=r(I,"freeze");function Ge(_){return _}a(Ge,"_doNothing");function rt(_){return _[d]||o}a(rt,"_getProto");var ht=r(I,"assign"),Ot=r(I,"keys"),Xt=e(be,Ge),Ut=e(r(I,"getPrototypeOf"),rt);function Kr(_){return qe(_,1,0,Xt)}a(Kr,"createEnum");function Mr(_){var D={};return ut(_,function(M,W){Ce(D,M,W[1]),Ce(D,W[0],W[1])}),Xt(D)}a(Mr,"createSimpleMap");function fn(_){return Mr(_)}a(fn,"createTypeMap");var xe="__tsUtils$gblCfg",Ve;function mt(){var _;return typeof globalThis!==p&&(_=globalThis),!_&&typeof self!==p&&(_=self),!_&&typeof window!==p&&(_=window),!_&&typeof global!==p&&(_=global),_}a(mt,"_getGlobalValue");function wt(){if(!Ve){var _=V(mt).v||{};Ve=_[xe]=_[xe]||{}}return Ve}a(wt,"_getGlobalConfig");var sr=er;function er(_,D,M){var W=D?D[_]:o;return function(pe){var _e=(pe?pe[_]:o)||W;if(_e||M){var Pe=arguments;return(_e||M).apply(pe,_e?z[v](Pe,1):Pe)}Me('"'+We(_)+'" not defined for '+ue(pe))}}a(er,"_unwrapFunctionWithPoly");var wr=r(F,"min"),pr=r(F,"max"),nr=sr("slice",N),dr=sr("substring",N),ir=er("substr",N,Lr);function Lr(_,D,M){return j(_)&&Me("Invalid "+ue(_)),M<0?s:(D=D||0,D<0&&(D=pr(D+_[A],0)),J(M)?nr(_,D):nr(_,D,D+M))}a(Lr,"polyStrSubstr");function Yr(_,D){return dr(_,0,D)}a(Yr,"strLeft");var cn="_urid",xn;function oi(){if(!xn){var _=wt();xn=_.gblSym=_.gblSym||{k:{},s:{}}}return xn}a(oi,"_globalSymbolRegistry");function kn(_){var D={description:We(_),toString:a(function(){return h+"("+_+")"},"toString")};return D[g]=!0,D}a(kn,"polyNewSymbol");function ri(_){var D=oi();if(!Xe(D.k,_)){var M=kn(_),W=Ot(D.s).length;M[cn]=function(){return W+"_"+M[b]()},D.k[_]=M,D.s[M[cn]()]=We(_)}return D.k[_]}a(ri,"polySymbolFor");var ln;function Xn(){ln=wt()}a(Xn,"_initTestHooks");function De(_){return At({toJSON:a(function(){return _},"toJSON")},"v",{value:_})}a(De,"createCachedValue");var X="window",ve;function Te(_,D){var M;return function(){return!ln&&Xn(),(!M||ln.lzy)&&(M=De(V(_,D).v)),M.v}}a(Te,"_getGlobalInstFn");function Q(_){return!ln&&Xn(),(!ve||_===!1||ln.lzy)&&(ve=De(V(mt).v||o)),ve.v}a(Q,"getGlobal");function B(_,D){var M;if(!ve||D===!1?M=Q(D):M=ve.v,M&&M[_])return M[_];if(_===X)try{return window}catch{}return o}a(B,"getInst");var te=Te(B,["document"]);function Ae(){return!!Re()}a(Ae,"hasWindow");var Re=Te(B,[X]);function dt(){return!!St()}a(dt,"hasNavigator");var St=Te(B,["navigator"]),Yt,tr;function Jt(){return Yt=De(V(B,[h]).v),Yt}a(Jt,"_initSymbol");function It(_){var D=(ln.lzy?0:Yt)||Jt();return D.v?D.v[_]:n}a(It,"_getSymbolKey");function xr(_,D){!ln&&Xn();var M=(ln.lzy?0:Yt)||Jt();return M.v?M.v(_):D?o:kn(_)}a(xr,"newSymbol");function fi(_){return!ln&&Xn(),tr=(ln.lzy?0:tr)||De(V(It,["for"]).v),(tr.v||ri)(_)}a(fi,"symbolFor");function io(_,D,M){return _.apply(D,M)}a(io,"fnApply");function _n(_,D,M){if(_)for(var W=_[A]>>>0,pe=0;pe<W&&!(pe in _&&D[v](M||_,_[pe],pe,_)===-1);pe++);}a(_n,"arrForEach");var Co=sr("indexOf",Y),Ei=sr("map",Y),es=sr("reduce",Y),Ia=e(r(I,"create"),Tc);function Tc(_){if(!_)return{};var D=typeof _;D!==l&&D!==c&&Me("Prototype must be an Object or function: "+ue(_));function M(){}return a(M,"tempFunc"),M[u]=_,new M}a(Tc,"polyObjCreate");var Fo;function Ks(_,D){var M=I.setPrototypeOf||function(W,pe){var _e;!Fo&&(Fo=De((_e={},_e[d]=[],_e instanceof Array))),Fo.v?W[d]=pe:ut(pe,function(Pe,je){return W[Pe]=je})};return M(_,D)}a(Ks,"objSetPrototypeOf");function Cd(_,D,M){V(de,[D,y,{v:_,c:!0,e:!1}]),D=Ks(D,M);function W(){this[m]=D,V(de,[this,y,{v:_,c:!0,e:!1}])}return a(W,"__"),D[u]=M===o?Ia(M):(W[u]=M[u],new W),D}a(Cd,"_createCustomError");function wc(_,D){D&&(_[y]=D)}a(wc,"_setName");function Sg(_,D,M){var W=M||Error,pe=W[u][y],_e=Error.captureStackTrace;return Cd(_,function(){var Pe=this,je=arguments;try{V(wc,[W,_]);var ot=io(W,Pe,z[v](je))||Pe;if(ot!==Pe){var bt=Ut(Pe);bt!==Ut(ot)&&Ks(ot,bt)}return _e&&_e(ot,Pe[m]),D&&D(ot,je),ot}finally{V(wc,[W,pe])}},W)}a(Sg,"createCustomError");function _l(){return(Date.now||Rg)()}a(_l,"utcNow");function Rg(){return new Date().getTime()}a(Rg,"polyUtcNow");function kg(_){return a(function(M){return j(M)&&Me("strTrim called ["+ue(M)+"]"),M&&M.replace&&(M=M.replace(_,s)),M},"_doTrim")}a(kg,"_createTrimFn");var ZE=kg(/^\s+|(?=\s)\s+$/g),$a=er("trim",N,ZE),Bu=r(F,"floor"),Nu,vd,Pg;function Vl(_){if(!_||typeof _!==l)return!1;Pg||(Pg=Ae()?Re():!0);var D=!1;if(_!==Pg){vd||(Nu=Function[u][b],vd=Nu[v](I));try{var M=Ut(_);D=!M,D||(we(M,m)&&(M=M[m]),D=!!(M&&typeof M===c&&Nu[v](M)===vd))}catch{}}return D}a(Vl,"isPlainObject");var eb;function uv(){return!ln&&Xn(),(!eb||ln.lzy)&&(eb=De(V(B,["performance"]).v)),eb.v}a(uv,"getPerformance");var tb=r(F,"round"),zf=er("endsWith",N,Kf);function Kf(_,D,M){ie(_)||Me("'"+ue(_)+"' is not a string");var W=ie(D)?D:We(D),pe=!J(M)&&M<_[A]?M:_[A];return dr(_,pe-W[A],pe)===W}a(Kf,"polyStrEndsWith");var Jr=sr("indexOf",N),_c="ref",Dg="unref",Bg="hasRef",mL="enabled";function zc(_,D,M){var W=!0,pe=_?D(o):o,_e;function Pe(){return W=!1,pe&&pe[Dg]&&pe[Dg](),_e}a(Pe,"_unref");function je(){pe&&M(pe),pe=o}a(je,"_cancel");function ot(){return pe=D(pe),W||Pe(),_e}a(ot,"_refresh");function bt(Cr){!Cr&&pe&&je(),Cr&&!pe&&ot()}return a(bt,"_setEnabled"),_e={cancel:je,refresh:ot},_e[Bg]=function(){return pe&&pe[Bg]?pe[Bg]():W},_e[_c]=function(){return W=!0,pe&&pe[_c]&&pe[_c](),_e},_e[Dg]=Pe,_e=At(_e,mL,{get:a(function(){return!!pe},"get"),set:bt}),{h:_e,dn:a(function(){pe=o},"dn")}}a(zc,"_createTimerHandler");function Dy(_,D,M){var W=fe(D),pe=W?D.length:0,_e=(pe>0?D[0]:W?n:D)||setTimeout,Pe=(pe>1?D[1]:n)||clearTimeout,je=M[0];M[0]=function(){ot.dn(),io(je,n,z[v](arguments))};var ot=zc(_,function(bt){if(bt){if(bt.refresh)return bt.refresh(),bt;io(Pe,n,[bt])}return io(_e,n,M)},function(bt){io(Pe,n,[bt])});return ot.h}a(Dy,"_createTimeoutWith");function dv(_,D){return Dy(!0,n,z[v](arguments))}a(dv,"scheduleTimeout");var bm=Kr,By=fn,rb="toLowerCase",ws="length",xd="warnToConsole",Ny="throwInternal",h5="watch",hL="apply",oo="push",My="splice",Ng="logger",g5="cancel",nb="name",Ed="unload",gL="version",AL="loggingLevelConsole",yL="messageId",fv="message",CL="diagLog",c$="userAgent",vL="split",ib="replace",Ly="type",l$="evtName",A5="traceFlags",xL="getAttribute",y5;function nde(_,D){y5||(y5=Sg("AggregationError",function(W,pe){pe[ws]>1&&(W.errors=pe[1])}));var M=_||"One or more errors occurred.";throw _n(D,function(W,pe){M+=`
`.concat(pe," > ").concat(ue(W))}),new y5(M,D||[])}a(nde,"throwAggregationError");var ide="function",u$="object",ode="undefined",Mg="prototype",C5=Object,EL=C5[Mg];(Q()||{}).Symbol,(Q()||{}).Reflect;var v5="hasOwnProperty",sde=a(function(_){for(var D,M=1,W=arguments.length;M<W;M++){D=arguments[M];for(var pe in D)EL[v5].call(D,pe)&&(_[pe]=D[pe])}return _},"__objAssignFnImpl"),x5=ht||sde,E5=a(function(_,D){return E5=C5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,W){M.__proto__=W}||function(M,W){for(var pe in W)W[v5](pe)&&(M[pe]=W[pe])},E5(_,D)},"extendStaticsFn");function Fy(_,D){typeof D!==ide&&D!==null&&Me("Class extends value "+String(D)+" is not a constructor or null"),E5(_,D);function M(){this.constructor=_}a(M,"__"),_[Mg]=D===null?Ia(D):(M[Mg]=D[Mg],new M)}a(Fy,"__extendsFn");var b5,pv="constructor",Yf="prototype",Jf="function",mv="_dynInstFuncs",ob="_isDynProxy",Oy="_dynClass",sb="_dynCls$",bL="_dynInstChk",hv=bL,ab="_dfOpts",IL="_unknown_",I5="__proto__",cb="_dyn"+I5,V_="__dynProto$Gbl",T5="_dynInstProto",lb="useBaseInst",ub="setInstFuncs",z_=Object,gv=z_.getPrototypeOf,db=z_.getOwnPropertyNames,TL=Q(),w5=TL[V_]||(TL[V_]={o:(b5={},b5[ub]=!0,b5[lb]=!0,b5),n:1e3});function fb(_){return _&&(_===z_[Yf]||_===Array[Yf])}a(fb,"_isObjectOrArrayPrototype");function pb(_){return fb(_)||_===Function[Yf]}a(pb,"_isObjectArrayOrFunctionPrototype");function Lg(_){var D;if(_){if(gv)return gv(_);var M=_[I5]||_[Yf]||(_[pv]?_[pv][Yf]:null);D=_[cb]||M,we(_,cb)||(delete _[T5],D=_[cb]=_[T5]||_[cb],_[T5]=M)}return D}a(Lg,"_getObjProto");function Im(_,D){var M=[];if(db)M=db(_);else for(var W in _)typeof W=="string"&&we(_,W)&&M.push(W);if(M&&M.length>0)for(var pe=0;pe<M.length;pe++)D(M[pe])}a(Im,"_forEachProp");function mb(_,D,M){return D!==pv&&typeof _[D]===Jf&&(M||we(_,D))&&D!==I5&&D!==Yf}a(mb,"_isDynamicCandidate");function hb(_){Me("DynamicProto: "+_)}a(hb,"_throwTypeError");function _5(_){var D=Ia(null);return Im(_,function(M){!D[M]&&mb(_,M,!1)&&(D[M]=_[M])}),D}a(_5,"_getInstanceFuncs");function wL(_,D){for(var M=_.length-1;M>=0;M--)if(_[M]===D)return!0;return!1}a(wL,"_hasVisited");function _L(_,D,M,W){function pe(ot,bt,Cr){var Qn=bt[Cr];if(Qn[ob]&&W){var ni=ot[mv]||{};ni[hv]!==!1&&(Qn=(ni[bt[Oy]]||{})[Cr]||Qn)}return function(){return Qn.apply(ot,arguments)}}a(pe,"_instFuncProxy");var _e=Ia(null);Im(M,function(ot){_e[ot]=pe(D,M,ot)});for(var Pe=Lg(_),je=[];Pe&&!pb(Pe)&&!wL(je,Pe);)Im(Pe,function(ot){!_e[ot]&&mb(Pe,ot,!gv)&&(_e[ot]=pe(D,Pe,ot))}),je.push(Pe),Pe=Lg(Pe);return _e}a(_L,"_getBaseFuncs");function ade(_,D,M,W){var pe=null;if(_&&we(M,Oy)){var _e=_[mv]||Ia(null);if(pe=(_e[M[Oy]]||Ia(null))[D],pe||hb("Missing ["+D+"] "+Jf),!pe[bL]&&_e[hv]!==!1){for(var Pe=!we(_,D),je=Lg(_),ot=[];Pe&&je&&!pb(je)&&!wL(ot,je);){var bt=je[D];if(bt){Pe=bt===W;break}ot.push(je),je=Lg(je)}try{Pe&&(_[D]=pe),pe[bL]=1}catch{_e[hv]=!1}}}return pe}a(ade,"_getInstFunc");function cde(_,D,M){var W=D[_];return W===M&&(W=Lg(D)[_]),typeof W!==Jf&&hb("["+_+"] is not a "+Jf),W}a(cde,"_getProtoFunc");function lde(_,D,M,W,pe){function _e(ot,bt){var Cr=a(function(){var Qn=ade(this,bt,ot,Cr)||cde(bt,ot,Cr);return Qn.apply(this,arguments)},"dynProtoProxy");return Cr[ob]=1,Cr}if(a(_e,"_createDynamicPrototype"),!fb(_)){var Pe=M[mv]=M[mv]||Ia(null);if(!fb(Pe)){var je=Pe[D]=Pe[D]||Ia(null);Pe[hv]!==!1&&(Pe[hv]=!!pe),fb(je)||Im(M,function(ot){mb(M,ot,!1)&&M[ot]!==W[ot]&&(je[ot]=M[ot],delete M[ot],(!we(_,ot)||_[ot]&&!_[ot][ob])&&(_[ot]=_e(_,ot)))})}}}a(lde,"_populatePrototype");function ude(_,D){if(gv){for(var M=[],W=Lg(D);W&&!pb(W)&&!wL(M,W);){if(W===_)return!0;M.push(W),W=Lg(W)}return!1}return!0}a(ude,"_checkPrototype");function SL(_,D){return we(_,Yf)?_.name||D||IL:((_||{})[pv]||{}).name||D||IL}a(SL,"_getObjName");function K_(_,D,M,W){we(_,Yf)||hb("theClass is an invalid class definition.");var pe=_[Yf];ude(pe,D)||hb("["+SL(_)+"] not in hierarchy of ["+SL(D)+"]");var _e=null;we(pe,Oy)?_e=pe[Oy]:(_e=sb+SL(_,"_")+"$"+w5.n,w5.n++,pe[Oy]=_e);var Pe=K_[ab],je=!!Pe[lb];je&&W&&W[lb]!==void 0&&(je=!!W[lb]);var ot=_5(D),bt=_L(pe,D,ot,je);M(D,bt);var Cr=!!gv&&!!Pe[ub];Cr&&W&&(Cr=!!W[ub]),lde(pe,_e,D,ot,Cr!==!1)}a(K_,"dynamicProto"),K_[ab]=w5.o;var Mu=void 0,Wa="",d$="Not dynamic - ",f$=/-([a-z])/g,Y_=/([^\w\d_$])/g,RL=/^(\d+[\w\d_$])/;function kL(_){return!j(_)}a(kL,"isNotNullOrUndefined");function S5(_){var D=_;return D&&ie(D)&&(D=D[ib](f$,function(M,W){return W.toUpperCase()}),D=D[ib](Y_,"_"),D=D[ib](RL,function(M,W){return"_"+W})),D}a(S5,"normalizeJsName");function p$(_,D){return _&&D?Jr(_,D)!==-1:!1}a(p$,"strContains");function Fg(_){return _&&_.toISOString()||""}a(Fg,"toISOString");function Qy(_){return ye(_)?_[nb]:Wa}a(Qy,"getExceptionName");function J_(_){return function(){function D(){var M=this;_&&ut(_,function(W,pe){M[W]=pe})}return a(D,"class_1"),D}()}a(J_,"createClassFromInterface");var m$="console",R5="JSON",dde="crypto",Uy="msCrypto",gb="msie",pi="trident/",Ab=null,Av=null,Og=null;function k5(){return typeof console!==ode?console:B(m$)}a(k5,"getConsole");function Io(){return!!(typeof JSON===u$&&JSON||B(R5)!==null)}a(Io,"hasJSON");function yb(){return Io()?JSON||B(R5):null}a(yb,"getJSON");function Sc(){return B(dde)}a(Sc,"getCrypto");function Cb(){return B(Uy)}a(Cb,"getMsCrypto");function X_(){var _=St();if(_&&(_[c$]!==Av||Ab===null)){Av=_[c$];var D=(Av||Wa)[rb]();Ab=p$(D,gb)||p$(D,pi)}return Ab}a(X_,"isIE");function qy(_){return(Og===null||_===!1)&&(Og=dt()&&!!St().sendBeacon),Og}a(qy,"isBeaconsSupported");function Z_(_,D){if(_)for(var M=0;M<_[ws];M++){var W=_[M];if(W[nb]&&W[nb]===D)return W}return{}}a(Z_,"_getNamedValue");function P5(_){var D=te();return D&&_?Z_(D.querySelectorAll("meta"),_).content:null}a(P5,"findMetaTag");function Tm(_){var D,M=uv();if(M){var W=M.getEntriesByType("navigation")||[];D=Z_((W[ws]>0?W[0]:{}).serverTiming,_).description}return D}a(Tm,"findNamedServerTiming");var vb=4294967296,s0=4294967295,xb=123456789,Hy=987654321,zl=!1,Eb=xb,wm=Hy;function h$(_){_<0&&(_>>>=0),Eb=xb+_&s0,wm=Hy-_&s0,zl=!0}a(h$,"_mwcSeed");function yv(){try{var _=_l()&2147483647;h$((Math.random()*vb^_)+_)}catch{}}a(yv,"_autoSeedMwc");function D5(_){return _>0?Bu(bb()/s0*(_+1))>>>0:0}a(D5,"randomValue");function bb(_){var D=0,M=Sc()||Cb();return M&&M.getRandomValues&&(D=M.getRandomValues(new Uint32Array(1))[0]&s0),D===0&&X_()&&(zl||yv(),D=g$()&s0),D===0&&(D=Bu(vb*Math.random()|0)),_||(D>>>=0),D}a(bb,"random32");function g$(_){wm=36969*(wm&65535)+(wm>>16)&s0,Eb=18e3*(Eb&65535)+(Eb>>16)&s0;var D=(wm<<16)+(Eb&65535)>>>0&s0|0;return _||(D>>>=0),D}a(g$,"mwcRandom32");function Cv(_){_===void 0&&(_=22);for(var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=bb()>>>0,W=0,pe=Wa;pe[ws]<_;)W++,pe+=D.charAt(M&63),M>>>=6,W===5&&(M=(bb()<<2&4294967295|M&3)>>>0,W=0);return pe}a(Cv,"newId");var _m="3.3.6",B5="."+Cv(6),vv=0;function Sm(_){return _.nodeType===1||_.nodeType===9||!+_.nodeType}a(Sm,"_canAcceptData");function N5(_,D){var M=D[_.id];if(!M){M={};try{Sm(D)&&de(D,_.id,{e:!1,v:M})}catch{}}return M}a(N5,"_getCache");function Qg(_,D){return D===void 0&&(D=!1),S5(_+vv+++(D?"."+_m:Wa)+B5)}a(Qg,"createUniqueNamespace");function Rm(_){var D={id:Qg("_aiData-"+(_||Wa)+"."+_m),accept:a(function(M){return Sm(M)},"accept"),get:a(function(M,W,pe,_e){var Pe=M[D.id];return Pe?Pe[S5(W)]:(_e&&(Pe=N5(D,M),Pe[S5(W)]=pe),pe)},"get"),kill:a(function(M,W){if(M&&M[W])try{delete M[W]}catch{}},"kill")};return D}a(Rm,"createElmNodeData");function $y(_){return _&&re(_)&&(_.isVal||_.fb||Xe(_,"v")||Xe(_,"mrg")||Xe(_,"ref")||_.set)}a($y,"_isConfigDefaults");function M5(_,D,M){var W,pe=M.dfVal||Z;if(D&&M.fb){var _e=M.fb;fe(_e)||(_e=[_e]);for(var Pe=0;Pe<_e[ws];Pe++){var je=_e[Pe],ot=D[je];if(pe(ot)?W=ot:_&&(ot=_.cfg[je],pe(ot)&&(W=ot),_.set(_.cfg,We(je),ot)),pe(W))break}}return!pe(W)&&pe(M.v)&&(W=M.v),W}a(M5,"_getDefault");function Wy(_,D,M){var W=M;if(M&&$y(M)&&(W=M5(_,D,M)),W){$y(W)&&(W=Wy(_,D,W));var pe;fe(W)?(pe=[],pe[ws]=W[ws]):Vl(W)&&(pe={}),pe&&(ut(W,function(_e,Pe){Pe&&$y(Pe)&&(Pe=Wy(_,D,Pe)),pe[_e]=Pe}),W=pe)}return W}a(Wy,"_resolveDefaultValue");function jy(_,D,M,W){var pe,_e,Pe,je=W,ot,bt,Cr,Qn;$y(je)?(pe=je.isVal,_e=je.set,Cr=je.rdOnly,Qn=je.blkVal,ot=je.mrg,bt=je.ref,!bt&&J(bt)&&(bt=!!ot),Pe=M5(_,D,je)):Pe=W,Qn&&_.blkVal(D,M);var ni,br=!0,Or=D[M];(Or||!j(Or))&&(ni=Or,br=!1,pe&&ni!==Pe&&!pe(ni)&&(ni=Pe,br=!0),_e&&(ni=_e(ni,Pe,D),br=ni===Pe)),br?Pe?ni=Wy(_,D,Pe):ni=Pe:(Vl(ni)||fe(Pe))&&ot&&Pe&&(Vl(Pe)||fe(Pe))&&ut(Pe,function(Zn,Un){jy(_,ni,Zn,Un)}),_.set(D,M,ni),bt&&_.ref(D,M),Cr&&_.rdOnly(D,M)}a(jy,"_applyDefaultValue");var Lu=fi("[[ai_dynCfg_1]]"),PL=fi("[[ai_blkDynCfg_1]]"),eS=fi("[[ai_frcDynCfg_1]]");function DL(_){if(_){var D;if(fe(_)?(D=[],D[ws]=_[ws]):Vl(_)&&(D={}),D)return ut(_,function(M,W){D[M]=DL(W)}),D}return _}a(DL,"_cfgDeepCopy");function BL(_){if(_){var D=_[Lu]||_;if(D.cfg&&(D.cfg===_||D.cfg[Lu]===D))return D}return null}a(BL,"getDynamicConfigHandler");function Ib(_){if(_&&(Vl(_)||fe(_)))try{_[PL]=!0}catch{}return _}a(Ib,"blockDynamicConversion");function Gy(_,D,M){var W=!1;return M&&!_[D.blkVal]&&(W=M[eS],!W&&!M[PL]&&(W=Vl(M)||fe(M))),W}a(Gy,"_canMakeDynamic");function a0(_){Me("InvalidAccess:"+_)}a(a0,"throwInvalidAccess");var A$=["push","pop","shift","unshift","splice"],Ug=a(function(_,D,M,W){_&&_[Ny](3,108,"".concat(M," [").concat(D,"] failed - ")+ue(W))},"_throwDynamicError");function NL(_,D,M){fe(D)&&_n(A$,function(W){var pe=D[W];D[W]=function(){for(var _e=[],Pe=0;Pe<arguments.length;Pe++)_e[Pe]=arguments[Pe];var je=pe[hL](this,_e);return xv(_,D,M,"Patching"),je}})}a(NL,"_patchArray");function qg(_,D){var M=Qe(_,D);return M&&M.get}a(qg,"_getOwnPropGetter");function y$(_,D,M,W){var pe={n:M,h:[],trk:a(function(bt){bt&&bt.fn&&(Co(pe.h,bt)===-1&&pe.h[oo](bt),_.trk(bt,pe))},"trk"),clr:a(function(bt){var Cr=Co(pe.h,bt);Cr!==-1&&pe.h[My](Cr,1)},"clr")},_e=!0,Pe=!1;function je(){_e&&(Pe=Pe||Gy(je,_,W),W&&!W[Lu]&&Pe&&(W=xv(_,W,M,"Converting")),_e=!1);var bt=_.act;return bt&&pe.trk(bt),W}a(je,"_getProperty"),je[_.prop]={chng:a(function(){_.add(pe)},"chng")};function ot(bt){if(W!==bt){je[_.ro]&&!_.upd&&a0("["+M+"] is read-only:"+ue(D)),_e&&(Pe=Pe||Gy(je,_,W),_e=!1);var Cr=Pe&&je[_.rf];if(Pe)if(Cr){ut(W,function(ni){W[ni]=bt?bt[ni]:Mu});try{ut(bt,function(ni,br){Tb(_,W,ni,br)}),bt=W}catch(ni){Ug((_.hdlr||{})[Ng],M,"Assigning",ni),Pe=!1}}else W&&W[Lu]&&ut(W,function(ni){var br=qg(W,ni);if(br){var Or=br[_.prop];Or&&Or.chng()}});if(bt!==W){var Qn=bt&&Gy(je,_,bt);!Cr&&Qn&&(bt=xv(_,bt,M,"Converting")),W=bt,Pe=Qn}_.add(pe)}}a(ot,"_setProperty"),de(D,pe.n,{g:je,s:ot})}a(y$,"_createDynamicProperty");function Tb(_,D,M,W){if(D){var pe=qg(D,M),_e=pe&&!!pe[_.prop];_e?D[M]=W:y$(_,D,M,W)}return D}a(Tb,"_setDynamicProperty");function ML(_,D,M,W){if(D){var pe=qg(D,M),_e=pe&&!!pe[_.prop],Pe=W&&W[0],je=W&&W[1],ot=W&&W[2];if(!_e){if(ot)try{Ib(D)}catch(bt){Ug((_.hdlr||{})[Ng],M,"Blocking",bt)}try{Tb(_,D,M,D[M]),pe=qg(D,M)}catch(bt){Ug((_.hdlr||{})[Ng],M,"State",bt)}}Pe&&(pe[_.rf]=Pe),je&&(pe[_.ro]=je),ot&&(pe[_.blkVal]=!0)}return D}a(ML,"_setDynamicPropertyState");function xv(_,D,M,W){try{ut(D,function(pe,_e){Tb(_,D,pe,_e)}),D[Lu]||(At(D,Lu,{get:a(function(){return _.hdlr},"get")}),NL(_,D,M))}catch(pe){Ug((_.hdlr||{})[Ng],M,W,pe)}return D}a(xv,"_makeDynamicObject");var Ev="[[ai_",Xf="]]";function C$(_){var D=xr(Ev+"get"+_.uid+Xf),M=xr(Ev+"ro"+_.uid+Xf),W=xr(Ev+"rf"+_.uid+Xf),pe=xr(Ev+"blkVal"+_.uid+Xf),_e=xr(Ev+"dtl"+_.uid+Xf),Pe=null,je=null,ot;function bt(br,Or){var Zn=ot.act;try{ot.act=br,br&&br[_e]&&(_n(br[_e],function(qi){qi.clr(br)}),br[_e]=[]),Or({cfg:_.cfg,set:_.set.bind(_),setDf:_.setDf.bind(_),ref:_.ref.bind(_),rdOnly:_.rdOnly.bind(_)})}catch(qi){var Un=_[Ng];throw Un&&Un[Ny](1,107,ue(qi)),qi}finally{ot.act=Zn||null}}a(bt,"_useHandler");function Cr(){if(Pe){var br=Pe;Pe=null,je&&je[g5](),je=null;var Or=[];if(_n(br,function(Zn){if(Zn&&(Zn[_e]&&(_n(Zn[_e],function(Un){Un.clr(Zn)}),Zn[_e]=null),Zn.fn))try{bt(Zn,Zn.fn)}catch(Un){Or[oo](Un)}}),Pe)try{Cr()}catch(Zn){Or[oo](Zn)}Or[ws]>0&&nde("Watcher error(s): ",Or)}}a(Cr,"_notifyWatchers");function Qn(br){if(br&&br.h[ws]>0){Pe||(Pe=[]),je||(je=dv(function(){je=null,Cr()},0));for(var Or=0;Or<br.h[ws];Or++){var Zn=br.h[Or];Zn&&Co(Pe,Zn)===-1&&Pe[oo](Zn)}}}a(Qn,"_addWatcher");function ni(br,Or){if(br){var Zn=br[_e]=br[_e]||[];Co(Zn,Or)===-1&&Zn[oo](Or)}}return a(ni,"_trackHandler"),ot={prop:D,ro:M,rf:W,blkVal:pe,hdlr:_,add:Qn,notify:Cr,use:bt,trk:ni},ot}a(C$,"_createState");function fde(_,D){var M={fn:D,rm:a(function(){M.fn=null,_=null,D=null},"rm")};return de(M,"toJSON",{v:a(function(){return"WatcherHandler"+(M.fn?"":"[X]")},"v")}),_.use(M,D),M}a(fde,"_createAndUseHandler");function v$(_,D,M){var W=BL(D);if(W)return W;var pe=Qg("dyncfg",!0),_e=D&&M!==!1?D:DL(D),Pe;function je(){Pe.notify()}a(je,"_notifyWatchers");function ot(Un,qi,Oo){try{Un=Tb(Pe,Un,qi,Oo)}catch(so){Ug(_,qi,"Setting value",so)}return Un[qi]}a(ot,"_setValue");function bt(Un){return fde(Pe,Un)}a(bt,"_watch");function Cr(Un,qi){Pe.use(null,function(Oo){var so=Pe.upd;try{J(qi)||(Pe.upd=qi),Un(Oo)}finally{Pe.upd=so}})}a(Cr,"_block");function Qn(Un,qi){var Oo;return ML(Pe,Un,qi,(Oo={},Oo[0]=!0,Oo))[qi]}a(Qn,"_ref");function ni(Un,qi){var Oo;return ML(Pe,Un,qi,(Oo={},Oo[1]=!0,Oo))[qi]}a(ni,"_rdOnly");function br(Un,qi){var Oo;return ML(Pe,Un,qi,(Oo={},Oo[2]=!0,Oo))[qi]}a(br,"_blkPropValue");function Or(Un,qi){return qi&&ut(qi,function(Oo,so){jy(Zn,Un,Oo,so)}),Un}a(Or,"_applyDefaults");var Zn={uid:null,cfg:_e,logger:_,notify:je,set:ot,setDf:Or,watch:bt,ref:Qn,rdOnly:ni,blkVal:br,_block:Cr};return de(Zn,"uid",{c:!1,e:!1,w:!1,v:pe}),Pe=C$(Zn),xv(Pe,_e,"config","Creating"),Zn}a(v$,"_createDynamicHandler");function x$(_,D){_?(_[xd](D),_[Ny](2,108,D)):a0(D)}a(x$,"_logInvalidAccess");function tS(_,D,M,W){var pe=v$(M,_||{},W);return D&&pe.setDf(pe.cfg,D),pe}a(tS,"createDynamicConfig");function E$(_,D,M){var W=_[Lu]||_;return W.cfg&&(W.cfg===_||W.cfg[Lu]===W)?W[h5](D):(x$(M,d$+ue(_)),tS(_,null,M)[h5](D))}a(E$,"onConfigChange");var L5=null;function b$(){var _=B("Microsoft");return _&&(L5=_.ApplicationInsights),L5}a(b$,"_getExtensionNamespace");function pde(_){var D=L5;return!D&&_.disableDbgExt!==!0&&(D=L5||b$()),D?D.ChromeDbgExt:null}a(pde,"getDebugExt");var wb,F5="warnToConsole",I$="AI (Internal): ",T$="AI: ",mde="AITR_",hde={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},w$=(wb={},wb[0]=null,wb[1]="errorToConsole",wb[2]=F5,wb[3]="debugToConsole",wb);function _$(_){return _?'"'+_[ib](/\"/g,Wa)+'"':Wa}a(_$,"_sanitizeDiagnosticText");function O5(_,D){var M=k5();if(M){var W="log";M[_]&&(W=_),ne(M[W])&&M[W](D)}}a(O5,"_logToConsole");var Q5=function(){function _(D,M,W,pe){W===void 0&&(W=!1);var _e=this;_e[yL]=D,_e[fv]=(W?T$:I$)+D;var Pe=Wa;Io()&&(Pe=yb().stringify(pe));var je=(M?" message:"+_$(M):Wa)+(pe?" props:"+_$(Pe):Wa);_e[fv]+=je}return a(_,"_InternalLogMessage"),_.dataType="MessageData",_}();function gde(_,D){return(_||{})[Ng]||new U5(D)}a(gde,"safeGetLogger");var U5=function(){function _(D){this.identifier="DiagnosticLogger",this.queue=[];var M=0,W={},pe,_e,Pe,je,ot;K_(_,this,function(bt){ot=Qn(D||{}),bt.consoleLoggingLevel=function(){return pe},bt[Ny]=function(Or,Zn,Un,qi,Oo){Oo===void 0&&(Oo=!1);var so=new Q5(Zn,Un,Oo,qi);if(je)throw ue(so);var Kc=w$[Or]||F5;if(J(so[fv]))br("throw"+(Or===1?"Critical":"Warning"),so);else{if(Oo){var nI=+so[yL];!W[nI]&&pe>=Or&&(bt[Kc](so[fv]),W[nI]=!0)}else pe>=Or&&bt[Kc](so[fv]);Cr(Or,so)}},bt.debugToConsole=function(Or){O5("debug",Or),br("warning",Or)},bt[xd]=function(Or){O5("warn",Or),br("warning",Or)},bt.errorToConsole=function(Or){O5("error",Or),br("error",Or)},bt.resetInternalMessageCount=function(){M=0,W={}},bt.logInternalMessage=Cr,bt[Ed]=function(Or){ot&&ot.rm(),ot=null};function Cr(Or,Zn){if(!ni()){var Un=!0,qi=mde+Zn[yL];if(W[qi]?Un=!1:W[qi]=!0,Un&&(Or<=_e&&(bt.queue[oo](Zn),M++,br(Or===1?"error":"warn",Zn)),M===Pe)){var Oo="Internal events throttle limit per PageView reached for this app.",so=new Q5(23,Oo,!1);bt.queue[oo](so),Or===1?bt.errorToConsole(Oo):bt[xd](Oo)}}}a(Cr,"_logInternalMessage");function Qn(Or){return E$(tS(Or,hde,bt).cfg,function(Zn){var Un=Zn.cfg;pe=Un[AL],_e=Un.loggingLevelTelemetry,Pe=Un.maxMessageLimit,je=Un.enableDebug})}a(Qn,"_setDefaultsFromConfig");function ni(){return M>=Pe}a(ni,"_areInternalMessagesThrottled");function br(Or,Zn){var Un=pde(D||{});Un&&Un[CL]&&Un[CL](Or,Zn)}a(br,"_debugExtMsg")})}return a(_,"DiagnosticLogger"),_.__ieDyn=1,_}();function q5(_){return _||new U5}a(q5,"_getLogger");function lf(_,D,M,W,pe,_e){_e===void 0&&(_e=!1),q5(_)[Ny](D,M,W,pe,_e)}a(lf,"_throwInternal");function H5(){for(var _=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],D=Wa,M,W=0;W<4;W++)M=bb(),D+=_[M&15]+_[M>>4&15]+_[M>>8&15]+_[M>>12&15]+_[M>>16&15]+_[M>>20&15]+_[M>>24&15]+_[M>>28&15];var pe=_[8+(bb()&3)|0];return ir(D,0,8)+ir(D,9,4)+"4"+ir(D,13,3)+pe+ir(D,16,3)+ir(D,19,12)}a(H5,"generateW3CId");var _b=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,LL="00",Zf="ff",Ui="00000000000000000000000000000000",Hg="0000000000000000",Rc=1;function c0(_,D,M){return _&&_[ws]===D&&_!==M?!!_.match(/^[\da-f]*$/i):!1}a(c0,"_isValid");function $5(_,D,M){return c0(_,D)?_:M}a($5,"_formatValue");function bv(_){(isNaN(_)||_<0||_>255)&&(_=1);for(var D=_.toString(16);D[ws]<2;)D="0"+D;return D}a(bv,"_formatFlags");function Sb(_,D,M,W){return{version:c0(W,2,Zf)?W:LL,traceId:Rb(_)?_:H5(),spanId:kb(D)?D:Yr(H5(),16),traceFlags:M>=0&&M<=255?M:1}}a(Sb,"createTraceParent");function ep(_,D){if(!_||(fe(_)&&(_=_[0]||""),!_||!ie(_)||_[ws]>8192))return null;if(_.indexOf(",")!==-1){var M=_[vL](",");_=M[D>0&&M[ws]>D?D:0]}var W=_b.exec($a(_));return!W||W[1]===Zf||W[2]===Ui||W[3]===Hg?null:{version:(W[1]||Wa)[rb](),traceId:(W[2]||Wa)[rb](),spanId:(W[3]||Wa)[rb](),traceFlags:parseInt(W[4],16)}}a(ep,"parseTraceParent");function Rb(_){return c0(_,32,Ui)}a(Rb,"isValidTraceId");function kb(_){return c0(_,16,Hg)}a(kb,"isValidSpanId");function Pb(_){return!(!_||!c0(_[gL],2,Zf)||!c0(_.traceId,32,Ui)||!c0(_.spanId,16,Hg)||!c0(bv(_[A5]),2))}a(Pb,"isValidTraceParent");function W5(_){return Pb(_)?(_[A5]&Rc)===Rc:!1}a(W5,"isSampledFlag");function Iv(_){if(_){var D=bv(_[A5]);c0(D,2)||(D="01");var M=_[gL]||LL;return M!=="00"&&M!=="ff"&&(M=LL),"".concat(M.toLowerCase(),"-").concat($5(_.traceId,32,Ui).toLowerCase(),"-").concat($5(_.spanId,16,Hg).toLowerCase(),"-").concat(D.toLowerCase())}return""}a(Iv,"formatTraceParent");function FL(_){var D="traceparent",M=ep(P5(D),_);return M||(M=ep(Tm(D),_)),M}a(FL,"findW3cTraceParent");function OL(_){var D=_.getElementsByTagName("script"),M=[];return _n(D,function(W){var pe=W[xL]("src");if(pe){var _e=W[xL]("crossorigin"),Pe=W.hasAttribute("async")===!0,je=W.hasAttribute("defer")===!0,ot=W[xL]("referrerpolicy"),bt={url:pe};_e&&(bt.crossOrigin=_e),Pe&&(bt.async=Pe),je&&(bt.defer=je),ot&&(bt.referrerPolicy=ot),M[oo](bt)}}),M}a(OL,"findAllScripts");var j5="on",rS="attachEvent",G5="addEventListener",V5="detachEvent",S$="removeEventListener",QL="events";Qg("aiEvtPageHide"),Qg("aiEvtPageShow");var Ade=/\.[\.]+/g,yde=/[\.]+$/,z5=1,Db=Rm("events"),Kl=/^([^.]*)(?:\.(.+)|)/;function nS(_){return _&&_[ib]?_[ib](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Wa):_}a(nS,"_normalizeNamespace");function Sl(_,D){if(D){var M=Wa;fe(D)?(M=Wa,_n(D,function(pe){pe=nS(pe),pe&&(pe[0]!=="."&&(pe="."+pe),M+=pe)})):M=nS(D),M&&(M[0]!=="."&&(M="."+M),_=(_||Wa)+M)}var W=Kl.exec(_||Wa)||[];return{type:W[1],ns:(W[2]||Wa).replace(Ade,".").replace(yde,Wa)[vL](".").sort().join(".")}}a(Sl,"_getEvtNamespace");function Vy(_,D,M){M===void 0&&(M=!0);var W=Db.get(_,QL,{},M),pe=W[D];return pe||(pe=W[D]=[]),pe}a(Vy,"_getRegisteredEvents");function R$(_,D,M,W){_&&D&&D[Ly]&&(_[S$]?_[S$](D[Ly],M,W):_[V5]&&_[V5](j5+D[Ly],M))}a(R$,"_doDetach");function Cde(_,D,M,W){var pe=!1;return _&&D&&D[Ly]&&M&&(_[G5]?(_[G5](D[Ly],M,W),pe=!0):_[rS]&&(_[rS](j5+D[Ly],M),pe=!0)),pe}a(Cde,"_doAttach");function iS(_,D,M,W){for(var pe=D[ws];pe--;){var _e=D[pe];_e&&(!M.ns||M.ns===_e[l$].ns)&&(!W||W(_e))&&(R$(_,_e[l$],_e.handler,_e.capture),D[My](pe,1))}}a(iS,"_doUnregister");function UL(_,D,M){if(D[Ly])iS(_,Vy(_,D[Ly]),D,M);else{var W=Db.get(_,QL,{});ut(W,function(pe,_e){iS(_,_e,D,M)}),Ot(W)[ws]===0&&Db.kill(_,QL)}}a(UL,"_unregisterEvents");function vde(_,D){var M;return D?(fe(D)?M=[_].concat(D):M=[_,D],M=Sl("xx",M).ns[vL](".")):M=_,M}a(vde,"mergeEvtNamespace");function qL(_,D,M,W,pe){pe===void 0&&(pe=!1);var _e=!1;if(_)try{var Pe=Sl(D,W);if(_e=Cde(_,Pe,M,pe),_e&&Db.accept(_)){var je={guid:z5++,evtName:Pe,handler:M,capture:pe};Vy(_,Pe.type)[oo](je)}}catch{}return _e}a(qL,"eventOn");function k$(_,D,M,W,pe){if(pe===void 0&&(pe=!1),_)try{var _e=Sl(D,W),Pe=!1;UL(_,_e,function(je){return _e.ns&&!M||je.handler===M?(Pe=!0,!0):!1}),Pe||R$(_,_e,M,pe)}catch{}}a(k$,"eventOff");var K5="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",P$="sampleRate",Y5="ProcessLegacy",D$="http.method",HL="https://dc.services.visualstudio.com",oS="/v2/track",km="not_specified",$L="iKey",B$=By({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),zy="split",On="length",Bb="toLowerCase",Tv="ingestionendpoint",wv="toString",WL="removeItem",sS="message",Nb="count",J5="preTriggerDate",jL="getUTCDate",X5="stringify",Mb="pathname",_v="match",GL="correlationHeaderExcludePatterns",tp="name",Lb="extensionConfig",Pm="properties",bd="measurements",Fb="sizeInBytes",aS="typeName",Ob="exceptions",cS="severityLevel",Qb="problemGroup",uf="parsedStack",Z5="hasFullStack",e4="assembly",l0="fileName",Ub="line",Ky="aiDataContract",lS="duration";function VL(_,D,M){var W=D[On],pe=zL(_,D);if(pe[On]!==W){for(var _e=0,Pe=pe;M[Pe]!==void 0;)_e++,Pe=dr(pe,0,147)+N$(_e);pe=Pe}return pe}a(VL,"dataSanitizeKeyAndAddUniqueness");function zL(_,D){var M;return D&&(D=$a(We(D)),D[On]>150&&(M=dr(D,0,150),lf(_,2,57,"name is too long.  It has been truncated to 150 characters.",{name:D},!0))),M||D}a(zL,"dataSanitizeKey");function Rl(_,D,M){M===void 0&&(M=1024);var W;return D&&(M=M||1024,D=$a(We(D)),D[On]>M&&(W=dr(D,0,M),lf(_,2,61,"string value is too long. It has been truncated to "+M+" characters.",{value:D},!0))),W||D}a(Rl,"dataSanitizeString");function Dm(_,D){return YL(_,D,2048,66)}a(Dm,"dataSanitizeUrl");function t4(_,D){var M;return D&&D[On]>32768&&(M=dr(D,0,32768),lf(_,2,56,"message is too long, it has been truncated to 32768 characters.",{message:D},!0)),M||D}a(t4,"dataSanitizeMessage");function KL(_,D){var M;if(D){var W=""+D;W[On]>32768&&(M=dr(W,0,32768),lf(_,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:D},!0))}return M||D}a(KL,"dataSanitizeException");function $g(_,D){if(D){var M={};ut(D,function(W,pe){if(re(pe)&&Io())try{pe=yb()[X5](pe)}catch(_e){lf(_,2,49,"custom property is not valid",{exception:_e},!0)}pe=Rl(_,pe,8192),W=VL(_,W,M),M[W]=pe}),D=M}return D}a($g,"dataSanitizeProperties");function rp(_,D){if(D){var M={};ut(D,function(W,pe){W=VL(_,W,M),M[W]=pe}),D=M}return D}a(rp,"dataSanitizeMeasurements");function qb(_,D){return D&&YL(_,D,128,69)[wv]()}a(qb,"dataSanitizeId");function YL(_,D,M,W){var pe;return D&&(D=$a(We(D)),D[On]>M&&(pe=dr(D,0,M),lf(_,2,W,"input is too long, it has been truncated to "+M+" characters.",{data:D},!0))),pe||D}a(YL,"dataSanitizeInput");function N$(_){var D="00"+_;return ir(D,D[On]-3)}a(N$,"dsPadNumber");var JL=te()||{},M$=0,xde=[null,null,null,null,null];function Hb(_){var D=M$,M=xde,W=M[D];return JL.createElement?M[D]||(W=M[D]=JL.createElement("a")):W={host:F$(_,!0)},W.href=_,D++,D>=M[On]&&(D=0),M$=D,W}a(Hb,"urlParseUrl");function Ede(_){var D,M=Hb(_);return M&&(D=M.href),D}a(Ede,"urlGetAbsoluteUrl");function bde(_){var D,M=Hb(_);return M&&(D=M[Mb]),D}a(bde,"urlGetPathName");function L$(_,D){return _?_.toUpperCase()+" "+D:D}a(L$,"urlGetCompleteUrl");function F$(_,D){var M=Wg(_,D)||"";if(M){var W=M[_v](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(W!=null&&W[On]>3&&ie(W[2])&&W[2][On]>0)return W[2]+(W[3]||"")}return M}a(F$,"urlParseHost");function Wg(_,D){var M=null;if(_){var W=_[_v](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(W!=null&&W[On]>2&&ie(W[2])&&W[2][On]>0&&(M=W[2]||"",D&&W[On]>2)){var pe=(W[1]||"")[Bb](),_e=W[3]||"";(pe==="http"&&_e===":80"||pe==="https"&&_e===":443")&&(_e=""),M+=_e}}return M}a(Wg,"urlParseFullHost");var O$=[HL+oS,"https://breeze.aimon.applicationinsights.io"+oS,"https://dc-int.services.visualstudio.com"+oS],$b="cid-v1:";function Q$(_){return Co(O$,_[Bb]())!==-1}a(Q$,"isInternalApplicationInsightsEndpoint");function XL(_){$b=_}a(XL,"correlationIdSetPrefix");function ZL(){return $b}a(ZL,"correlationIdGetPrefix");function Yy(_,D,M){if(!D||_&&_.disableCorrelationHeaders)return!1;if(_&&_[GL]){for(var W=0;W<_.correlationHeaderExcludePatterns[On];W++)if(_[GL][W].test(D))return!1}var pe=Hb(D).host[Bb]();if(pe&&(Jr(pe,":443")!==-1||Jr(pe,":80")!==-1)&&(pe=(Wg(D,!0)||"")[Bb]()),(!_||!_.enableCorsCorrelation)&&pe&&pe!==M)return!1;var _e=_&&_.correlationHeaderDomains;if(_e){var Pe;if(_n(_e,function(bt){var Cr=new RegExp(bt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));Pe=Pe||Cr.test(pe)}),!Pe)return!1}var je=_&&_.correlationHeaderExcludedDomains;if(!je||je[On]===0)return!0;for(var W=0;W<je[On];W++){var ot=new RegExp(je[W].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ot.test(pe))return!1}return pe&&pe[On]>0}a(Yy,"correlationIdCanIncludeCorrelationHeader");function U$(_){if(_){var D=q$(_,B$[1]);if(D&&D!==$b)return D}}a(U$,"correlationIdGetCorrelationContext");function q$(_,D){if(_)for(var M=_[zy](","),W=0;W<M[On];++W){var pe=M[W][zy]("=");if(pe[On]===2&&pe[0]===D)return pe[1]}}a(q$,"correlationIdGetCorrelationContextValue");function H$(_,D,M,W){var pe,_e=W,Pe=W;if(D&&D[On]>0){var je=Hb(D);if(pe=je.host,!_e)if(je[Mb]!=null){var ot=je.pathname[On]===0?"/":je[Mb];ot.charAt(0)!=="/"&&(ot="/"+ot),Pe=je[Mb],_e=Rl(_,M?M+" "+ot:ot)}else _e=Rl(_,D)}else pe=W,_e=W;return{target:pe,name:_e,data:Pe}}a(H$,"AjaxHelperParseDependencyPath");function Ide(){var _=uv();if(_&&_.now&&_.timing){var D=_.now()+_.timing.navigationStart;if(D>0)return D}return _l()}a(Ide,"dateTimeUtilsNow");function Tde(_,D){var M=null;return _!==0&&D!==0&&!j(_)&&!j(D)&&(M=D-_),M}a(Tde,"dateTimeUtilsDuration");function eF(_,D){var M=_||{};return{getName:a(function(){return M[tp]},"getName"),setName:a(function(W){D&&D.setName(W),M[tp]=W},"setName"),getTraceId:a(function(){return M.traceID},"getTraceId"),setTraceId:a(function(W){D&&D.setTraceId(W),Rb(W)&&(M.traceID=W)},"setTraceId"),getSpanId:a(function(){return M.parentID},"getSpanId"),setSpanId:a(function(W){D&&D.setSpanId(W),kb(W)&&(M.parentID=W)},"setSpanId"),getTraceFlags:a(function(){return M.traceFlags},"getTraceFlags"),setTraceFlags:a(function(W){D&&D.setTraceFlags(W),M.traceFlags=W},"setTraceFlags")}}a(eF,"createDistributedTraceContextFromTrace");var Wb=bm({LocalStorage:0,SessionStorage:1}),wde=bm({AI:0,AI_AND_W3C:1,W3C:2}),uS=bm({Normal:1,Critical:2}),Jy=void 0,u0=void 0,$$="";function jb(){return r4()?Gb(Wb.LocalStorage):null}a(jb,"_getLocalStorageObject");function Gb(_){try{if(j(Q()))return null;var D=new Date()[wv](),M=B(_===Wb.LocalStorage?"localStorage":"sessionStorage"),W=$$+D;M.setItem(W,D);var pe=M.getItem(W)!==D;if(M[WL](W),!pe)return M}catch{}return null}a(Gb,"_getVerifiedStorageObject");function Vb(){return jg()?Gb(Wb.SessionStorage):null}a(Vb,"_getSessionStorageObject");function dS(){Jy=!1,u0=!1}a(dS,"utlDisableStorage");function fS(_){$$=_||""}a(fS,"utlSetStoragePrefix");function _de(){Jy=r4(!0),u0=jg(!0)}a(_de,"utlEnableStorage");function r4(_){return(_||Jy===void 0)&&(Jy=!!Gb(Wb.LocalStorage)),Jy}a(r4,"utlCanUseLocalStorage");function W$(_,D){var M=jb();if(M!==null)try{return M.getItem(D)}catch(W){Jy=!1,lf(_,2,1,"Browser failed read of local storage. "+Qy(W),{exception:ue(W)})}return null}a(W$,"utlGetLocalStorage");function j$(_,D,M){var W=jb();if(W!==null)try{return W.setItem(D,M),!0}catch(pe){Jy=!1,lf(_,2,3,"Browser failed write to local storage. "+Qy(pe),{exception:ue(pe)})}return!1}a(j$,"utlSetLocalStorage");function np(_,D){var M=jb();if(M!==null)try{return M[WL](D),!0}catch(W){Jy=!1,lf(_,2,5,"Browser failed removal of local storage item. "+Qy(W),{exception:ue(W)})}return!1}a(np,"utlRemoveStorage");function jg(_){return(_||u0===void 0)&&(u0=!!Gb(Wb.SessionStorage)),u0}a(jg,"utlCanUseSessionStorage");function zb(){var _=[];return jg()&&ut(B("sessionStorage"),function(D){_.push(D)}),_}a(zb,"utlGetSessionStorageKeys");function G$(_,D){var M=Vb();if(M!==null)try{return M.getItem(D)}catch(W){u0=!1,lf(_,2,2,"Browser failed read of session storage. "+Qy(W),{exception:ue(W)})}return null}a(G$,"utlGetSessionStorage");function Sde(_,D,M){var W=Vb();if(W!==null)try{return W.setItem(D,M),!0}catch(pe){u0=!1,lf(_,2,4,"Browser failed write to session storage. "+Qy(pe),{exception:ue(pe)})}return!1}a(Sde,"utlSetSessionStorage");function V$(_,D){var M=Vb();if(M!==null)try{return M[WL](D),!0}catch(W){u0=!1,lf(_,2,6,"Browser failed removal of session storage item. "+Qy(W),{exception:ue(W)})}return!1}a(V$,"utlRemoveSessionStorage");var Rde="appInsightsThrottle",kde=function(){function _(D,M){var W=this,pe,_e,Pe,je,ot,bt,Cr,Qn=!1,ni=!1;Or(),W._getDbgPlgTargets=function(){return[Cr]},W.getConfig=function(){return Pe},W.canThrottle=function(Mt){var Xr=mF(Mt),En=Zn(Mt);return Oo(En,pe,Xr)},W.isTriggered=function(Mt){return uW(Mt)},W.isReady=function(){return Qn},W.flush=function(Mt){try{var Xr=dW(Mt);if(Xr&&Xr[On]>0){var En=Xr.slice(0);return Cr[Mt]=[],_n(En,function(Cs){br(Cs.msgID,Cs[sS],Cs.severity,!1)}),!0}}catch{}return!1},W.flushAll=function(){try{if(Cr){var Mt=!0;return ut(Cr,function(Xr){var En=W.flush(parseInt(Xr));Mt=Mt&&En}),Mt}}catch{}return!1},W.onReadyState=function(Mt,Xr){return Xr===void 0&&(Xr=!0),Qn=j(Mt)?!0:Mt,Qn&&Xr?W.flushAll():null},W.sendMessage=function(Mt,Xr,En){return br(Mt,Xr,En,!0)};function br(Mt,Xr,En,Cs){if(Qn){var Yc=zde(Mt);if(!Yc)return;var ja=Zn(Mt),Jc=mF(Mt),Rv=Oo(ja,pe,Jc),rC=!1,iI=0,fW=uW(Mt);try{Rv&&!fW?(iI=wr(ja.limit.maxSendNumber,Jc[Nb]+1),Jc[Nb]=0,rC=!0,ot[Mt]=!0,Jc[J5]=new Date):(ot[Mt]=Rv,Jc[Nb]+=1);var pW=so(Mt);pF(_e,pW,Jc);for(var g4=0;g4<iI;g4++)lW(Mt,_e,Xr,En)}catch{}return{isThrottled:rC,throttleNum:iI}}else if(Cs){var Kde=dW(Mt);Kde.push({msgID:Mt,message:Xr,severity:En})}return null}a(br,"_flushMessage");function Or(){_e=gde(D),ot={},je={},Cr={},Pe={},Un(109),bt=kL(M)?M:"",D.addUnloadHook(E$(D.config,function(Mt){var Xr=Mt.cfg;pe=r4();var En=Xr.throttleMgrCfg||{};ut(En,function(Cs,Yc){Un(parseInt(Cs),Yc)})}))}a(Or,"_initConfig");function Zn(Mt){return Pe[Mt]||Pe[109]}a(Zn,"_getCfgByKey");function Un(Mt,Xr){var En,Cs;try{var Yc=Xr||{},ja={};ja.disabled=!!Yc.disabled;var Jc=Yc.interval||{};ni=Jc?.daysOfMonth&&Jc?.daysOfMonth[On]>0,ja.interval=qi(Jc);var Rv={samplingRate:((En=Yc.limit)===null||En===void 0?void 0:En.samplingRate)||100,maxSendNumber:((Cs=Yc.limit)===null||Cs===void 0?void 0:Cs.maxSendNumber)||1};ja.limit=Rv,Pe[Mt]=ja}catch{}}a(Un,"_setCfgByKey");function qi(Mt){Mt=Mt||{};var Xr=Mt?.monthInterval,En=Mt?.dayInterval;return j(Xr)&&j(En)&&(Mt.monthInterval=3,ni||(Mt.daysOfMonth=[28],ni=!0)),Mt={monthInterval:Mt?.monthInterval,dayInterval:Mt?.dayInterval,daysOfMonth:Mt?.daysOfMonth},Mt}a(qi,"_getIntervalConfig");function Oo(Mt,Xr,En){if(Mt&&!Mt.disabled&&Xr&&kL(En)){var Cs=vS(),Yc=En.date,ja=Mt.interval,Jc=1;if(ja?.monthInterval){var Rv=(Cs.getUTCFullYear()-Yc.getUTCFullYear())*12+Cs.getUTCMonth()-Yc.getUTCMonth();Jc=h4(ja.monthInterval,0,Rv)}var rC=1;if(ni)rC=Co(ja.daysOfMonth,Cs[jL]());else if(ja?.dayInterval){var iI=Bu((Cs.getTime()-Yc.getTime())/864e5);rC=h4(ja.dayInterval,0,iI)}return Jc>=0&&rC>=0}return!1}a(Oo,"_canThrottle");function so(Mt,Xr){var En=kL(Xr)?Xr:"";return Mt?Rde+En+"-"+Mt:null}a(so,"_getLocalStorageName");function Kc(Mt){try{if(Mt){var Xr=new Date;return Mt.getUTCFullYear()===Xr.getUTCFullYear()&&Mt.getUTCMonth()===Xr.getUTCMonth()&&Mt[jL]()===Xr[jL]()}}catch{}return!1}a(Kc,"_isTriggeredOnCurDate");function nI(Mt,Xr,En){try{var Cs={date:vS(),count:0};if(Mt){var Yc=JSON.parse(Mt),ja={date:vS(Yc.date)||Cs.date,count:Yc[Nb]||Cs[Nb],preTriggerDate:Yc.preTriggerDate?vS(Yc[J5]):void 0};return ja}else return pF(Xr,En,Cs),Cs}catch{}return null}a(nI,"_getLocalStorageObj");function vS(Mt){try{if(Mt){var Xr=new Date(Mt);if(!isNaN(Xr.getDate()))return Xr}else return new Date}catch{}return null}a(vS,"_getThrottleDate");function pF(Mt,Xr,En){try{return j$(Mt,Xr,$a(JSON[X5](En)))}catch{}return!1}a(pF,"_resetLocalStorage");function h4(Mt,Xr,En){return Mt<=0?1:En>=Xr&&(En-Xr)%Mt==0?Bu((En-Xr)/Mt)+1:-1}a(h4,"_checkInterval");function lW(Mt,Xr,En,Cs){lf(Xr,Cs||1,Mt,En)}a(lW,"_sendMessage");function zde(Mt){try{var Xr=Zn(Mt);return D5(1e6)<=Xr.limit.samplingRate}catch{}return!1}a(zde,"_canSampledIn");function mF(Mt){try{var Xr=je[Mt];if(!Xr){var En=so(Mt,bt);Xr=nI(W$(_e,En),_e,En),je[Mt]=Xr}return je[Mt]}catch{}return null}a(mF,"_getLocalStorageObjByKey");function uW(Mt){var Xr=ot[Mt];if(j(Xr)){Xr=!1;var En=mF(Mt);En&&(Xr=Kc(En[J5])),ot[Mt]=Xr}return ot[Mt]}a(uW,"_isTrigger");function dW(Mt){return Cr=Cr||{},j(Cr[Mt])&&(Cr[Mt]=[]),Cr[Mt]}a(dW,"_getQueueByKey")}return a(_,"ThrottleMgr"),_}(),tF=";",Bm="=";function n4(_){if(!_)return{};var D=_[zy](tF),M=es(D,function(pe,_e){var Pe=_e[zy](Bm);if(Pe[On]===2){var je=Pe[0][Bb](),ot=Pe[1];pe[je]=ot}return pe},{});if(Ot(M)[On]>0){if(M.endpointsuffix){var W=M.location?M.location+".":"";M[Tv]=M[Tv]||"https://"+W+"dc."+M.endpointsuffix}M[Tv]=M[Tv]||HL,zf(M[Tv],"/")&&(M[Tv]=M[Tv].slice(0,-1))}return M}a(n4,"parseConnectionString");var i4={parse:n4},o4=function(){function _(D,M,W){var pe=this,_e=this;_e.ver=1,_e.sampleRate=100,_e.tags={},_e[tp]=Rl(D,W)||km,_e.data=M,_e.time=Fg(new Date),_e[Ky]={time:1,iKey:1,name:1,sampleRate:a(function(){return pe.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return a(_,"Envelope"),_}(),Pde=function(){function _(D,M,W,pe){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var _e=this;_e.ver=2,_e[tp]=Rl(D,M)||km,_e[Pm]=$g(D,W),_e[bd]=rp(D,pe)}return a(_,"Event"),_.envelopeType="Microsoft.ApplicationInsights.{0}.Event",_.dataType="EventData",_}(),Dde=58,z$=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Bde=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Kb=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,K$=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Nde=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Mde=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Lde=/([^\(\s\n]+):([0-9]+)$/,Y$="<no_method>",Yb="error",df="stack",pS="stackDetails",s4="errorSrc",mS="message",hS="description",rF=[{re:Bde,len:5,m:1,fn:2,ln:3,col:4},{chk:a4,pre:qr,re:Kb,len:4,m:1,fn:2,ln:3},{re:K$,len:3,m:1,fn:2,hdl:iF},{re:Nde,len:2,fn:1,hdl:iF}];function qr(_){return _.replace(/(\(anonymous\))/,"<anonymous>")}a(qr,"_scrubAnonymous");function a4(_){return Jr(_,"[native")<0}a(a4,"_ignoreNative");function gS(_,D){var M=_;return M&&!ie(M)&&(JSON&&JSON[X5]?(M=JSON[X5](_),D&&(!M||M==="{}")&&(ne(_[wv])?M=_[wv]():M=""+_)):M=""+_+" - (Missing JSON.stringify)"),M||""}a(gS,"_stringify");function Xy(_,D){var M=_;return _&&(M&&!ie(M)&&(M=_[mS]||_[hS]||M),M&&!ie(M)&&(M=gS(M,!0)),_.filename&&(M=M+" @"+(_.filename||"")+":"+(_.lineno||"?")+":"+(_.colno||"?"))),D&&D!=="String"&&D!=="Object"&&D!=="Error"&&Jr(M||"",D)===-1&&(M=D+": "+M),M||""}a(Xy,"_formatMessage");function J$(_){try{if(re(_))return"hasFullStack"in _&&"typeName"in _}catch{}return!1}a(J$,"_isExceptionDetailsInternal");function X$(_){try{if(re(_))return"ver"in _&&"exceptions"in _&&"properties"in _}catch{}return!1}a(X$,"_isExceptionInternal");function c4(_){return _&&_.src&&ie(_.src)&&_.obj&&fe(_.obj)}a(c4,"_isStackDetails");function Gg(_){var D=_||"";ie(D)||(ie(D[df])?D=D[df]:D=""+D);var M=D[zy](`
`);return{src:D,obj:M}}a(Gg,"_convertStackObj");function Z$(_){for(var D=[],M=_[zy](`
`),W=0;W<M[On];W++){var pe=M[W];M[W+1]&&(pe+="@"+M[W+1],W++),D.push(pe)}return{src:_,obj:D}}a(Z$,"_getOperaStack");function l4(_){var D=null;if(_)try{if(_[df])D=Gg(_[df]);else if(_[Yb]&&_[Yb][df])D=Gg(_[Yb][df]);else if(_.exception&&_.exception[df])D=Gg(_.exception[df]);else if(c4(_))D=_;else if(c4(_[pS]))D=_[pS];else if(Re()&&Re().opera&&_[mS])D=Z$(_[sS]);else if(_.reason&&_.reason[df])D=Gg(_.reason[df]);else if(ie(_))D=Gg(_);else{var M=_[mS]||_[hS]||"";ie(_[s4])&&(M&&(M+=`
`),M+=" from "+_[s4]),M&&(D=Gg(M))}}catch(W){D=Gg(W)}return D||{src:"",obj:null}}a(l4,"_getStackFromErrorObj");function eW(_){var D="";return _&&(_.obj?D=_.obj.join(`
`):D=_.src||""),D}a(eW,"_formatStackTrace");function u4(_){var D,M=_.obj;if(M&&M[On]>0){D=[];var W=0,pe=!1,_e=0;_n(M,function(Zn){if(pe||Fde(Zn)){var Un=We(Zn);pe=!0;var qi=Ode(Un,W);qi&&(_e+=qi[Fb],D.push(qi),W++)}});var Pe=32*1024;if(_e>Pe)for(var je=0,ot=D[On]-1,bt=0,Cr=je,Qn=ot;je<ot;){var ni=D[je][Fb],br=D[ot][Fb];if(bt+=ni+br,bt>Pe){var Or=Qn-Cr+1;D.splice(Cr,Or);break}Cr=je,Qn=ot,je++,ot--}}return D}a(u4,"_parseStack");function Jb(_){var D="";if(_&&(D=_.typeName||_[tp]||"",!D))try{var M=/function (.{1,200})\(/,W=M.exec(_.constructor[wv]());D=W&&W[On]>1?W[1]:""}catch{}return D}a(Jb,"_getErrorType");function d4(_){if(_)try{if(!ie(_)){var D=Jb(_),M=gS(_,!1);return(!M||M==="{}")&&(_[Yb]&&(_=_[Yb],D=Jb(_)),M=gS(_,!0)),Jr(M,D)!==0&&D!=="String"?D+":"+M:M}}catch{}return""+(_||"")}a(d4,"_formatErrorCode");var Nm=function(){function _(D,M,W,pe,_e,Pe){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var je=this;je.ver=2,X$(M)?(je[Ob]=M[Ob]||[],je[Pm]=M[Pm],je[bd]=M[bd],M[cS]&&(je[cS]=M[cS]),M.id&&(je.id=M.id,M[Pm].id=M.id),M[Qb]&&(je[Qb]=M[Qb]),j(M.isManual)||(je.isManual=M.isManual)):(W||(W={}),Pe&&(W.id=Pe),je[Ob]=[nW(D,M,W)],je[Pm]=$g(D,W),je[bd]=rp(D,pe),_e&&(je[cS]=_e),Pe&&(je.id=Pe))}return a(_,"Exception"),_.CreateAutoException=function(D,M,W,pe,_e,Pe,je,ot){var bt=Jb(_e||Pe||D);return{message:Xy(D,bt),url:M,lineNumber:W,columnNumber:pe,error:d4(_e||Pe||D),evt:d4(Pe||D),typeName:bt,stackDetails:l4(je||_e||Pe),errorSrc:ot}},_.CreateFromInterface=function(D,M,W,pe){var _e=M[Ob]&&Ei(M[Ob],function(je){return nF(D,je)}),Pe=new _(D,x5(x5({},M),{exceptions:_e}),W,pe);return Pe},_.prototype.toInterface=function(){var D=this,M=D.exceptions,W=D.properties,pe=D.measurements,_e=D.severityLevel,Pe=D.problemGroup,je=D.id,ot=D.isManual,bt=M instanceof Array&&Ei(M,function(Cr){return Cr.toInterface()})||void 0;return{ver:"4.0",exceptions:bt,severityLevel:_e,properties:W,measurements:pe,problemGroup:Pe,id:je,isManual:ot}},_.CreateSimpleException=function(D,M,W,pe,_e,Pe){var je;return{exceptions:[(je={},je[Z5]=!0,je.message=D,je.stack=_e,je.typeName=M,je)]}},_.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",_.dataType="ExceptionData",_.formatError=d4,_}(),tW=Xt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function rW(){var _=this,D=fe(_[uf])&&Ei(_[uf],function(W){return oW(W)}),M={id:_.id,outerId:_.outerId,typeName:_[aS],message:_[sS],hasFullStack:_[Z5],stack:_[df],parsedStack:D||void 0};return M}a(rW,"_toInterface");function nW(_,D,M){var W,pe,_e,Pe,je,ot,bt,Cr;if(J$(D))Pe=D[aS],je=D[sS],bt=D[df],Cr=D[uf]||[],ot=D[Z5];else{var Qn=D,ni=Qn&&Qn.evt;ye(Qn)||(Qn=Qn[Yb]||ni||Qn),Pe=Rl(_,Jb(Qn))||km,je=t4(_,Xy(D||Qn,Pe))||km;var br=D[pS]||l4(D);Cr=u4(br),fe(Cr)&&Ei(Cr,function(Or){Or[e4]=Rl(_,Or[e4]),Or[l0]=Rl(_,Or[l0])}),bt=KL(_,eW(br)),ot=fe(Cr)&&Cr[On]>0,M&&(M[aS]=M[aS]||Pe)}return W={},W[Ky]=tW,W.id=pe,W.outerId=_e,W.typeName=Pe,W.message=je,W[Z5]=ot,W.stack=bt,W.parsedStack=Cr,W.toInterface=rW,W}a(nW,"_createExceptionDetails");function nF(_,D){var M=fe(D[uf])&&Ei(D[uf],function(pe){return iW(pe)})||D[uf],W=nW(_,x5(x5({},D),{parsedStack:M}));return W}a(nF,"_createExDetailsFromInterface");function AS(_,D){var M=D[_v](Mde);if(M&&M[On]>=4)_[l0]=M[1],_[Ub]=parseInt(M[2]);else{var W=D[_v](Lde);W&&W[On]>=3?(_[l0]=W[1],_[Ub]=parseInt(W[2])):_[l0]=D}}a(AS,"_parseFilename");function iF(_,D,M){var W=_[l0];D.fn&&M&&M[On]>D.fn&&(D.ln&&M[On]>D.ln?(W=$a(M[D.fn]||""),_[Ub]=parseInt($a(M[D.ln]||""))||0):W=$a(M[D.fn]||"")),W&&AS(_,W)}a(iF,"_handleFilename");function Fde(_){var D=!1;if(_&&ie(_)){var M=$a(_);M&&(D=z$.test(M))}return D}a(Fde,"_isStackFrame");var oF=Xt({level:1,method:1,assembly:0,fileName:0,line:0});function Ode(_,D){var M,W;if(_&&ie(_)&&$a(_)){W=(M={},M[Ky]=oF,M.level=D,M.assembly=$a(_),M.method=Y$,M.fileName="",M.line=0,M.sizeInBytes=0,M);for(var pe=0;pe<rF[On];){var _e=rF[pe];if(_e.chk&&!_e.chk(_))break;_e.pre&&(_=_e.pre(_));var Pe=_[_v](_e.re);if(Pe&&Pe[On]>=_e.len){_e.m&&(W.method=$a(Pe[_e.m]||Y$)),_e.hdl?_e.hdl(W,_e,Pe):_e.fn&&(_e.ln?(W[l0]=$a(Pe[_e.fn]||""),W[Ub]=parseInt($a(Pe[_e.ln]||""))||0):AS(W,Pe[_e.fn]||""));break}pe++}}return sF(W)}a(Ode,"_extractStackFrame");function iW(_){var D,M=(D={},D[Ky]=oF,D.level=_.level,D.method=_.method,D.assembly=_[e4],D.fileName=_[l0],D.line=_[Ub],D.sizeInBytes=0,D);return sF(M)}a(iW,"_stackFrameFromInterface");function sF(_){var D=Dde;return _&&(D+=_.method[On],D+=_.assembly[On],D+=_.fileName[On],D+=_.level.toString()[On],D+=_.line.toString()[On],_[Fb]=D),_}a(sF,"_populateFrameSizeInBytes");function oW(_){return{level:_.level,method:_.method,assembly:_[e4],fileName:_[l0],line:_[Ub]}}a(oW,"_parsedFrameToInterface");var sW=function(){function _(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return a(_,"DataPoint"),_}(),Qde=function(){function _(D,M,W,pe,_e,Pe,je,ot,bt){this.aiDataContract={ver:1,metrics:1,properties:0};var Cr=this;Cr.ver=2;var Qn=new sW;Qn[Nb]=pe>0?pe:void 0,Qn.max=isNaN(Pe)||Pe===null?void 0:Pe,Qn.min=isNaN(_e)||_e===null?void 0:_e,Qn[tp]=Rl(D,M)||km,Qn.value=W,Qn.stdDev=isNaN(je)||je===null?void 0:je,Cr.metrics=[Qn],Cr[Pm]=$g(D,ot),Cr[bd]=rp(D,bt)}return a(_,"Metric"),_.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",_.dataType="MetricData",_}(),Xb="";function Ude(_,D){return D===void 0&&(D=!1),_==null?D:_.toString()[Bb]()==="true"}a(Ude,"stringToBoolOrDefault");function aF(_){(isNaN(_)||_<0)&&(_=0),_=tb(_);var D=Xb+_%1e3,M=Xb+Bu(_/1e3)%60,W=Xb+Bu(_/(1e3*60))%60,pe=Xb+Bu(_/(1e3*60*60))%24,_e=Bu(_/(1e3*60*60*24));return D=D[On]===1?"00"+D:D[On]===2?"0"+D:D,M=M[On]<2?"0"+M:M,W=W[On]<2?"0"+W:W,pe=pe[On]<2?"0"+pe:pe,(_e>0?_e+".":Xb)+pe+":"+W+":"+M+"."+D}a(aF,"msToTimeSpan");function qde(_,D){var M=null;return _n(_,function(W){if(W.identifier===D)return M=W,-1}),M}a(qde,"getExtensionByName");function Zy(_,D,M,W,pe){return!pe&&ie(_)&&(_==="Script error."||_==="Script error")}a(Zy,"isCrossOriginError");var Hde=function(){function _(D,M,W,pe,_e,Pe,je){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ot=this;ot.ver=2,ot.id=qb(D,je),ot.url=Dm(D,W),ot[tp]=Rl(D,M)||km,isNaN(pe)||(ot[lS]=aF(pe)),ot[Pm]=$g(D,_e),ot[bd]=rp(D,Pe)}return a(_,"PageView"),_.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",_.dataType="PageviewData",_}(),Zb=function(){function _(D,M,W,pe,_e,Pe,je,ot,bt,Cr,Qn,ni){bt===void 0&&(bt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var br=this;br.ver=2,br.id=M,br[lS]=aF(_e),br.success=Pe,br.resultCode=je+"",br.type=Rl(D,bt);var Or=H$(D,W,ot,pe);br.data=Dm(D,pe)||Or.data,br.target=Rl(D,Or.target),Cr&&(br.target="".concat(br.target," | ").concat(Cr)),br[tp]=Rl(D,Or[tp]),br[Pm]=$g(D,Qn),br[bd]=rp(D,ni)}return a(_,"RemoteDependencyData"),_.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",_.dataType="RemoteDependencyData",_}(),cF=function(){function _(D,M,W,pe,_e){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Pe=this;Pe.ver=2,M=M||km,Pe[sS]=t4(D,M),Pe[Pm]=$g(D,pe),Pe[bd]=rp(D,_e),W&&(Pe[cS]=W)}return a(_,"Trace"),_.envelopeType="Microsoft.ApplicationInsights.{0}.Message",_.dataType="MessageData",_}(),yS=function(){function _(D,M,W,pe,_e,Pe,je){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ot=this;ot.ver=2,ot.url=Dm(D,W),ot[tp]=Rl(D,M)||km,ot[Pm]=$g(D,_e),ot[bd]=rp(D,Pe),je&&(ot.domProcessing=je.domProcessing,ot[lS]=je[lS],ot.networkConnect=je.networkConnect,ot.perfTotal=je.perfTotal,ot.receivedResponse=je.receivedResponse,ot.sentRequest=je.sentRequest)}return a(_,"PageViewPerformance"),_.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",_.dataType="PageviewPerformanceData",_}(),$de=function(){function _(D,M){this.aiDataContract={baseType:1,baseData:1},this.baseType=D,this.baseData=M}return a(_,"Data"),_}(),f4=bm({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Wde=function(){function _(){}return a(_,"ConfigurationManager"),_.getConfig=function(D,M,W,pe){pe===void 0&&(pe=!1);var _e;return W&&D[Lb]&&D[Lb][W]&&!j(D[Lb][W][M])?_e=D[Lb][W][M]:_e=D[M],j(_e)?pe:_e},_}();function Mm(_){var D="ai."+_+".";return function(M){return D+M}}a(Mm,"_aiNameFunc");var eI=Mm("application"),kc=Mm("device"),p4=Mm("location"),tI=Mm("operation"),m4=Mm("session"),eC=Mm("user"),Sv=Mm("cloud"),CS=Mm("internal"),tC=function(_){Fy(D,_);function D(){return _.call(this)||this}return a(D,"ContextTagKeys"),D}(J_({applicationVersion:eI("ver"),applicationBuild:eI("build"),applicationTypeId:eI("typeId"),applicationId:eI("applicationId"),applicationLayer:eI("layer"),deviceId:kc("id"),deviceIp:kc("ip"),deviceLanguage:kc("language"),deviceLocale:kc("locale"),deviceModel:kc("model"),deviceFriendlyName:kc("friendlyName"),deviceNetwork:kc("network"),deviceNetworkName:kc("networkName"),deviceOEMName:kc("oemName"),deviceOS:kc("os"),deviceOSVersion:kc("osVersion"),deviceRoleInstance:kc("roleInstance"),deviceRoleName:kc("roleName"),deviceScreenResolution:kc("screenResolution"),deviceType:kc("type"),deviceMachineName:kc("machineName"),deviceVMName:kc("vmName"),deviceBrowser:kc("browser"),deviceBrowserVersion:kc("browserVersion"),locationIp:p4("ip"),locationCountry:p4("country"),locationProvince:p4("province"),locationCity:p4("city"),operationId:tI("id"),operationName:tI("name"),operationParentId:tI("parentId"),operationRootId:tI("rootId"),operationSyntheticSource:tI("syntheticSource"),operationCorrelationVector:tI("correlationVector"),sessionId:m4("id"),sessionIsFirst:m4("isFirst"),sessionIsNew:m4("isNew"),userAccountAcquisitionDate:eC("accountAcquisitionDate"),userAccountId:eC("accountId"),userAgent:eC("userAgent"),userId:eC("id"),userStoreRegion:eC("storeRegion"),userAuthUserId:eC("authUserId"),userAnonymousUserAcquisitionDate:eC("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:eC("authUserAcquisitionDate"),cloudName:Sv("name"),cloudRole:Sv("role"),cloudRoleVer:Sv("roleVer"),cloudRoleInstance:Sv("roleInstance"),cloudEnvironment:Sv("environment"),cloudLocation:Sv("location"),cloudDeploymentUnit:Sv("deploymentUnit"),internalNodeName:CS("nodeName"),internalSdkVersion:CS("sdkVersion"),internalAgentVersion:CS("agentVersion"),internalSnippet:CS("snippet"),internalSdkSrc:CS("sdkSrc")}));function lF(_,D,M,W,pe,_e){M=Rl(W,M)||km,(j(_)||j(D)||j(M))&&He("Input doesn't contain all required fields");var Pe="";_[$L]&&(Pe=_[$L],delete _[$L]);var je={name:M,time:Fg(new Date),iKey:Pe,ext:_e||{},tags:[],data:{},baseType:D,baseData:_};return j(pe)||ut(pe,function(ot,bt){je.data[ot]=bt}),je}a(lF,"createTelemetryItem");var uF=function(){function _(){}return a(_,"TelemetryItemCreator"),_.create=lF,_}(),jde={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Gde=new tC;function aW(_){var D=null;if(ne(Event))D=new Event(_);else{var M=te();M&&M.createEvent&&(D=M.createEvent("Event"),D.initEvent(_,!0,!0))}return D}a(aW,"createDomEvent");function dF(_,D){k$(_,null,null,D)}a(dF,"_disableEvents");function cW(_){var D=te(),M=St(),W=!1,pe=[],_e=1;M&&!j(M.onLine)&&!M.onLine&&(_e=2);var Pe=0,je=ni(),ot=vde(Qg("OfflineListener"),_);try{if(Cr(Re())&&(W=!0),D){var bt=D.body||D;bt.ononline&&Cr(bt)&&(W=!0)}}catch{W=!1}function Cr(so){var Kc=!1;return so&&(Kc=qL(so,"online",Zn,ot),Kc&&qL(so,"offline",Un,ot)),Kc}a(Cr,"_enableEvents");function Qn(){return je}a(Qn,"_isOnline");function ni(){return!(Pe===2||_e===2)}a(ni,"calCurrentState");function br(){var so=ni();je!==so&&(je=so,_n(pe,function(Kc){var nI={isOnline:je,rState:_e,uState:Pe};try{Kc(nI)}catch{}}))}a(br,"listnerNoticeCheck");function Or(so){Pe=so,br()}a(Or,"setOnlineState");function Zn(){_e=1,br()}a(Zn,"_setOnline");function Un(){_e=2,br()}a(Un,"_setOffline");function qi(){var so=Re();if(so&&W){if(dF(so,ot),D){var Kc=D.body||D;J(Kc.ononline)||dF(Kc,ot)}W=!1}}a(qi,"_unload");function Oo(so){return pe.push(so),{rm:a(function(){var Kc=pe.indexOf(so);if(Kc>-1)return pe.splice(Kc,1)},"rm")}}return a(Oo,"addListener"),{isOnline:Qn,isListening:a(function(){return W},"isListening"),unload:qi,addListener:Oo,setOnlineState:Or}}a(cW,"createOfflineListener");var Vde="AppInsightsPropertiesPlugin",fF="AppInsightsChannelPlugin",rI="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=rI,t.BreezeChannelIdentifier=fF,t.ConfigurationManager=Wde,t.ConnectionStringParser=i4,t.ContextTagKeys=tC,t.CtxTagKeys=Gde,t.DEFAULT_BREEZE_ENDPOINT=HL,t.DEFAULT_BREEZE_PATH=oS,t.Data=$de,t.DisabledPropertyName=K5,t.DistributedTracingModes=wde,t.Envelope=o4,t.Event=Pde,t.EventPersistence=uS,t.Exception=Nm,t.Extensions=jde,t.HttpMethod=D$,t.Metric=Qde,t.PageView=Hde,t.PageViewPerformance=yS,t.ProcessLegacy=Y5,t.PropertiesPluginIdentifier=Vde,t.RemoteDependencyData=Zb,t.RequestHeaders=B$,t.SampleRate=P$,t.SeverityLevel=f4,t.TelemetryItemCreator=uF,t.ThrottleMgr=kde,t.Trace=cF,t.correlationIdCanIncludeCorrelationHeader=Yy,t.correlationIdGetCorrelationContext=U$,t.correlationIdGetCorrelationContextValue=q$,t.correlationIdGetPrefix=ZL,t.correlationIdSetPrefix=XL,t.createDistributedTraceContextFromTrace=eF,t.createDomEvent=aW,t.createOfflineListener=cW,t.createTelemetryItem=lF,t.createTraceParent=Sb,t.dataSanitizeException=KL,t.dataSanitizeId=qb,t.dataSanitizeInput=YL,t.dataSanitizeKey=zL,t.dataSanitizeKeyAndAddUniqueness=VL,t.dataSanitizeMeasurements=rp,t.dataSanitizeMessage=t4,t.dataSanitizeProperties=$g,t.dataSanitizeString=Rl,t.dataSanitizeUrl=Dm,t.dateTimeUtilsDuration=Tde,t.dateTimeUtilsNow=Ide,t.dsPadNumber=N$,t.findAllScripts=OL,t.findW3cTraceParent=FL,t.formatTraceParent=Iv,t.getExtensionByName=qde,t.isBeaconApiSupported=qy,t.isCrossOriginError=Zy,t.isInternalApplicationInsightsEndpoint=Q$,t.isSampledFlag=W5,t.isValidSpanId=kb,t.isValidTraceId=Rb,t.isValidTraceParent=Pb,t.msToTimeSpan=aF,t.parseConnectionString=n4,t.parseTraceParent=ep,t.strNotSpecified=km,t.stringToBoolOrDefault=Ude,t.urlGetAbsoluteUrl=Ede,t.urlGetCompleteUrl=L$,t.urlGetPathName=bde,t.urlParseFullHost=Wg,t.urlParseHost=F$,t.urlParseUrl=Hb,t.utlCanUseLocalStorage=r4,t.utlCanUseSessionStorage=jg,t.utlDisableStorage=dS,t.utlEnableStorage=_de,t.utlGetLocalStorage=W$,t.utlGetSessionStorage=G$,t.utlGetSessionStorageKeys=zb,t.utlRemoveSessionStorage=V$,t.utlRemoveStorage=np,t.utlSetLocalStorage=j$,t.utlSetSessionStorage=Sde,t.utlSetStoragePrefix=fS})});var v9e=$((uV,C9e)=>{f();(function(t,e){typeof uV=="object"&&typeof C9e<"u"?e(uV):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(uV,function(t){"use strict";function e(x,T){return x||T}a(e,"_pureAssign");function r(x,T){return x[T]}a(r,"_pureRef");var n=void 0,o=null,s="",c="function",l="object",u="prototype",d="__proto__",p="undefined",m="constructor",h="Symbol",g="_polyfill",A="length",y="name",v="call",b="toString",I=e(Object),S=r(I,u),k=e(String),N=r(k,u),F=e(Math),O=e(Array),Y=r(O,u),z=r(Y,"slice");function V(x,T){try{return{v:x.apply(this,T)}}catch(w){return{e:w}}}a(V,"safe");function U(x,T){var w=V(x);return w.e?T:w.v}a(U,"safeGet");var H;function ee(x){return function(T){return typeof T===x}}a(ee,"_createIs");function J(x){var T="[object "+x+"]";return function(w){return!!(w&&G(w)===T)}}a(J,"_createObjIs");function G(x){return S[b].call(x)}a(G,"objToString");function j(x){return typeof x===p||x===p}a(j,"isUndefined");function Z(x){return!re(x)}a(Z,"isStrictUndefined");function ie(x){return x===o||j(x)}a(ie,"isNullOrUndefined");function ne(x){return x===o||!re(x)}a(ne,"isStrictNullOrUndefined");function re(x){return!!x||x!==n}a(re,"isDefined");function fe(x){return!H&&(H=["string","number","boolean",p,"symbol","bigint"]),x!==l&&H.indexOf(x)!==-1}a(fe,"isPrimitiveType");var ye=ee("string"),Qe=ee(c);function we(x){return!x&&ie(x)?!1:!!x&&typeof x===l}a(we,"isObject");var Xe=r(O,"isArray"),Oe=J("Date"),ut=ee("number"),Rt=ee("boolean"),Et=J("Error");function At(x){return!!(x&&x.then&&Qe(x.then))}a(At,"isPromiseLike");function de(x){return!(!x||U(function(){return!(x&&0+x)},!x))}a(de,"isTruthy");var qe=r(I,"getOwnPropertyDescriptor");function Ce(x,T){return!!x&&S.hasOwnProperty[v](x,T)}a(Ce,"objHasOwnProperty");var We=e(r(I,"hasOwn"),ce);function ce(x,T){return Ce(x,T)||!!qe(x,T)}a(ce,"polyObjHasOwn");function ue(x,T,w){if(x&&we(x)){for(var P in x)if(We(x,P)&&T[v](w||x,P,x[P])===-1)break}}a(ue,"objForEachKey");var He={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Me(x){var T={};if(T[He.c]=!0,T[He.e]=!0,x.l){T.get=function(){return x.l.v};var w=qe(x.l,"v");w&&w.set&&(T.set=function(P){x.l.v=P})}return ue(x,function(P,L){T[He[P]]=Z(L)?T[He[P]]:L}),T}a(Me,"_createProp");var be=r(I,"defineProperty");function Ge(x,T,w){return be(x,T,Me(w))}a(Ge,"objDefine");function rt(x,T,w,P,L){var q={};return ue(x,function(K,le){ht(q,K,T?le:K),ht(q,le,w?le:K)}),P?P(q):q}a(rt,"_createKeyValueMap");function ht(x,T,w,P){be(x,T,{value:w,enumerable:!0,writable:!1})}a(ht,"_assignMapValue");var Ot=e(k),Xt="[object Error]";function Ut(x,T){var w=s,P=S[b][v](x);P===Xt&&(x={stack:Ot(x.stack),message:Ot(x.message),name:Ot(x.name)});try{w=JSON.stringify(x,o,T?typeof T=="number"?T:4:n),w=(w?w.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):o)||Ot(x)}catch(L){w=" - "+Ut(L,T)}return P+": "+w}a(Ut,"dumpObj");function Kr(x){throw new Error(x)}a(Kr,"throwError");function Mr(x){throw new TypeError(x)}a(Mr,"throwTypeError");var fn=r(I,"freeze");function xe(x){return x}a(xe,"_doNothing");function Ve(x){return x[d]||o}a(Ve,"_getProto");var mt=r(I,"assign"),wt=r(I,"keys");function sr(x){return fn&&ue(x,function(T,w){(Xe(w)||we(w))&&sr(w)}),er(x)}a(sr,"objDeepFreeze");var er=e(fn,xe),wr=e(r(I,"getPrototypeOf"),Ve);function pr(x){return rt(x,1,0,er)}a(pr,"createEnum");function nr(x){return rt(x,0,0,er)}a(nr,"createEnumKeyMap");function dr(x){var T={};return ue(x,function(w,P){ht(T,w,P[1]),ht(T,P[0],P[1])}),er(T)}a(dr,"createSimpleMap");function ir(x){return dr(x)}a(ir,"createTypeMap");var Lr=nr({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Yr="__tsUtils$gblCfg",cn;function xn(){var x;return typeof globalThis!==p&&(x=globalThis),!x&&typeof self!==p&&(x=self),!x&&typeof window!==p&&(x=window),!x&&typeof global!==p&&(x=global),x}a(xn,"_getGlobalValue");function oi(){if(!cn){var x=V(xn).v||{};cn=x[Yr]=x[Yr]||{}}return cn}a(oi,"_getGlobalConfig");var kn=ri;function ri(x,T,w){var P=T?T[x]:o;return function(L){var q=(L?L[x]:o)||P;if(q||w){var K=arguments;return(q||w).apply(L,q?z[v](K,1):K)}Mr('"'+Ot(x)+'" not defined for '+Ut(L))}}a(ri,"_unwrapFunctionWithPoly");function ln(x){return function(T){return T[x]}}a(ln,"_unwrapProp");var Xn=r(F,"min"),De=r(F,"max"),X=kn("slice",N),ve=kn("substring",N),Te=ri("substr",N,Q);function Q(x,T,w){return ie(x)&&Mr("Invalid "+Ut(x)),w<0?s:(T=T||0,T<0&&(T=De(T+x[A],0)),j(w)?X(x,T):X(x,T,T+w))}a(Q,"polyStrSubstr");function B(x,T){return ve(x,0,T)}a(B,"strLeft");var te="_urid",Ae;function Re(){if(!Ae){var x=oi();Ae=x.gblSym=x.gblSym||{k:{},s:{}}}return Ae}a(Re,"_globalSymbolRegistry");var dt;function St(x){var T={description:Ot(x),toString:a(function(){return h+"("+x+")"},"toString")};return T[g]=!0,T}a(St,"polyNewSymbol");function Yt(x){var T=Re();if(!We(T.k,x)){var w=St(x),P=wt(T.s).length;w[te]=function(){return P+"_"+w[b]()},T.k[x]=w,T.s[w[te]()]=Ot(x)}return T.k[x]}a(Yt,"polySymbolFor");function tr(x){!dt&&(dt={});var T,w=Lr[x];return w&&(T=dt[w]=dt[w]||St(h+"."+w)),T}a(tr,"polyGetKnownSymbol");var Jt;function It(){Jt=oi()}a(It,"_initTestHooks");function xr(x){var T={};return!Jt&&It(),T.b=Jt.lzy,be(T,"v",{configurable:!0,get:a(function(){var w=x();return Jt.lzy||be(T,"v",{value:w}),T.b=Jt.lzy,w},"get")}),T}a(xr,"getLazy");function fi(x){return be({toJSON:a(function(){return x},"toJSON")},"v",{value:x})}a(fi,"createCachedValue");var io="window",_n;function Co(x,T){var w;return function(){return!Jt&&It(),(!w||Jt.lzy)&&(w=fi(V(x,T).v)),w.v}}a(Co,"_getGlobalInstFn");function Ei(x){return!Jt&&It(),(!_n||x===!1||Jt.lzy)&&(_n=fi(V(xn).v||o)),_n.v}a(Ei,"getGlobal");function es(x,T){var w;if(!_n||T===!1?w=Ei(T):w=_n.v,w&&w[x])return w[x];if(x===io)try{return window}catch{}return o}a(es,"getInst");function Ia(){return!!Tc()}a(Ia,"hasDocument");var Tc=Co(es,["document"]);function Fo(){return!!Ks()}a(Fo,"hasWindow");var Ks=Co(es,[io]);function Cd(){return!!wc()}a(Cd,"hasNavigator");var wc=Co(es,["navigator"]),Sg=Co(function(){return!!V(function(){return process&&(process.versions||{}).node}).v}),_l,Rg;function kg(){return _l=fi(V(es,[h]).v),_l}a(kg,"_initSymbol");function ZE(x){var T=(Jt.lzy?0:_l)||kg();return T.v?T.v[x]:n}a(ZE,"_getSymbolKey");function $a(){return!!Bu()}a($a,"hasSymbol");function Bu(){return!Jt&&It(),((Jt.lzy?0:_l)||kg()).v}a(Bu,"getSymbol");function Nu(x,T){var w=Lr[x];!Jt&&It();var P=(Jt.lzy?0:_l)||kg();return P.v?P.v[w||x]:T?n:tr(x)}a(Nu,"getKnownSymbol");function vd(x,T){!Jt&&It();var w=(Jt.lzy?0:_l)||kg();return w.v?w.v(x):T?o:St(x)}a(vd,"newSymbol");function Pg(x){return!Jt&&It(),Rg=(Jt.lzy?0:Rg)||fi(V(ZE,["for"]).v),(Rg.v||Yt)(x)}a(Pg,"symbolFor");function Vl(x){return!!x&&Qe(x.next)}a(Vl,"isIterator");function eb(x){return!ne(x)&&Qe(x[Nu(3)])}a(eb,"isIterable");var uv;function tb(x,T,w){if(x&&(Vl(x)||(!uv&&(uv=fi(Nu(3))),x=x[uv.v]?x[uv.v]():o),Vl(x))){var P=n,L=n;try{for(var q=0;!(L=x.next()).done&&T[v](w||x,L.value,q,x)!==-1;)q++}catch(K){P={e:K},x.throw&&(L=o,x.throw(P))}finally{try{L&&!L.done&&x.return&&x.return(L)}finally{if(P)throw P.e}}}}a(tb,"iterForOf");function zf(x,T,w){return x.apply(T,w)}a(zf,"fnApply");function Kf(x,T){return!j(T)&&x&&(Xe(T)?zf(x.push,x,T):Vl(T)||eb(T)?tb(T,function(w){x.push(w)}):x.push(T)),x}a(Kf,"arrAppend");function Jr(x,T,w){if(x)for(var P=x[A]>>>0,L=0;L<P&&!(L in x&&T[v](w||x,x[L],L,x)===-1);L++);}a(Jr,"arrForEach");var _c=kn("indexOf",Y),Dg=kn("map",Y);function Bg(x,T,w){return((x?x.slice:o)||z).apply(x,z[v](arguments,1))}a(Bg,"arrSlice");var mL=kn("reduce",Y),zc=e(r(I,"create"),Dy);function Dy(x){if(!x)return{};var T=typeof x;T!==l&&T!==c&&Mr("Prototype must be an Object or function: "+Ut(x));function w(){}return a(w,"tempFunc"),w[u]=x,new w}a(Dy,"polyObjCreate");var dv;function bm(x,T){var w=I.setPrototypeOf||function(P,L){var q;!dv&&(dv=fi((q={},q[d]=[],q instanceof Array))),dv.v?P[d]=L:ue(L,function(K,le){return P[K]=le})};return w(x,T)}a(bm,"objSetPrototypeOf");function By(x,T,w){V(Ge,[T,y,{v:x,c:!0,e:!1}]),T=bm(T,w);function P(){this[m]=T,V(Ge,[this,y,{v:x,c:!0,e:!1}])}return a(P,"__"),T[u]=w===o?zc(w):(P[u]=w[u],new P),T}a(By,"_createCustomError");function rb(x,T){T&&(x[y]=T)}a(rb,"_setName");function ws(x,T,w){var P=w||Error,L=P[u][y],q=Error.captureStackTrace;return By(x,function(){var K=this,le=arguments;try{V(rb,[P,x]);var me=zf(P,K,z[v](le))||K;if(me!==K){var Ee=wr(K);Ee!==wr(me)&&bm(me,Ee)}return q&&q(me,K[m]),T&&T(me,le),me}finally{V(rb,[P,L])}},P)}a(ws,"createCustomError");function xd(){return(Date.now||Ny)()}a(xd,"utcNow");function Ny(){return new Date().getTime()}a(Ny,"polyUtcNow");function h5(x){return a(function(w){return ie(w)&&Mr("strTrim called ["+Ut(w)+"]"),w&&w.replace&&(w=w.replace(x,s)),w},"_doTrim")}a(h5,"_createTrimFn");var hL=h5(/^\s+|(?=\s)\s+$/g),oo=ri("trim",N,hL),My=r(F,"floor"),Ng,g5,nb;function Ed(x){if(!x||typeof x!==l)return!1;nb||(nb=Fo()?Ks():!0);var T=!1;if(x!==nb){g5||(Ng=Function[u][b],g5=Ng[v](I));try{var w=wr(x);T=!w,T||(Ce(w,m)&&(w=w[m]),T=!!(w&&typeof w===c&&Ng[v](w)===g5))}catch{}}return T}a(Ed,"isPlainObject");function gL(x){return x.value&&A5(x),!0}a(gL,"_defaultDeepCopyHandler");var AL=[ib,A5,l$,Ly];function yL(x,T,w,P){var L;return Jr(x,function(q){if(q.k===T)return L=q,-1}),L||(L={k:T,v:T},x.push(L),P(L)),L.v}a(yL,"_getSetVisited");function fv(x,T,w,P){var L=w.handler,q=w.path?P?w.path.concat(P):w.path:[],K={handler:w.handler,src:w.src,path:q},le=typeof T,me=!1,Ee=T===o;Ee||(T&&le===l?me=Ed(T):Ee=fe(le));var ke={type:le,isPrim:Ee,isPlain:me,value:T,result:T,path:q,origin:w.src,copy:a(function(Ue,tt){return fv(x,Ue,tt?K:w,tt)},"copy"),copyTo:a(function(Ue,tt){return CL(x,Ue,tt,K)},"copyTo")};return ke.isPrim?L&&L[v](w,ke)?ke.result:T:yL(x,T,q,function(Ue){Ge(ke,"result",{g:a(function(){return Ue.v},"g"),s:a(function(Ye){Ue.v=Ye},"s")});for(var tt=0,$e=L;!($e||(tt<AL.length?AL[tt++]:gL))[v](w,ke);)$e=o})}a(fv,"_deepCopy");function CL(x,T,w,P){if(!ie(w))for(var L in w)T[L]=fv(x,w[L],P,L);return T}a(CL,"_copyProps");function c$(x,T,w){var P={handler:w,src:T,path:[]};return CL([],x,T,P)}a(c$,"objCopyProps");function vL(x,T){var w={handler:T,src:x};return fv([],x,w)}a(vL,"objDeepCopy");function ib(x){var T=x.value;if(Xe(T)){var w=x.result=[];return w.length=T.length,x.copyTo(w,T),!0}return!1}a(ib,"arrayDeepCopyHandler");function Ly(x){var T=x.value;return Oe(T)?(x.result=new Date(T.getTime()),!0):!1}a(Ly,"dateDeepCopyHandler");function l$(x){return x.type===c}a(l$,"functionDeepCopyHandler");function A5(x){var T=x.value;if(T&&x.isPlain){var w=x.result={};return x.copyTo(w,T),!0}return!1}a(A5,"plainObjDeepCopyHandler");function xL(x,T){return Jr(T,function(w){c$(x,w)}),x}a(xL,"_doExtend");function y5(x,T,w,P,L,q,K){return xL(vL(x)||{},z[v](arguments))}a(y5,"deepExtend");var nde=ln(A),ide=r(F,"round"),u$=ri("endsWith",N,ode);function ode(x,T,w){ye(x)||Mr("'"+Ut(x)+"' is not a string");var P=ye(T)?T:Ot(T),L=!j(w)&&w<x[A]?w:x[A];return ve(x,L-P[A],L)===P}a(ode,"polyStrEndsWith");var Mg=kn("indexOf",N),C5="ref",EL="unref",v5="hasRef",sde="enabled";function x5(x,T,w){var P=!0,L=x?T(o):o,q;function K(){return P=!1,L&&L[EL]&&L[EL](),q}a(K,"_unref");function le(){L&&w(L),L=o}a(le,"_cancel");function me(){return L=T(L),P||K(),q}a(me,"_refresh");function Ee(ke){!ke&&L&&le(),ke&&!L&&me()}return a(Ee,"_setEnabled"),q={cancel:le,refresh:me},q[v5]=function(){return L&&L[v5]?L[v5]():P},q[C5]=function(){return P=!0,L&&L[C5]&&L[C5](),q},q[EL]=K,q=be(q,sde,{get:a(function(){return!!L},"get"),set:Ee}),{h:q,dn:a(function(){L=o},"dn")}}a(x5,"_createTimerHandler");function E5(x,T,w){var P=Xe(T),L=P?T.length:0,q=(L>0?T[0]:P?n:T)||setTimeout,K=(L>1?T[1]:n)||clearTimeout,le=w[0];w[0]=function(){me.dn(),zf(le,n,z[v](arguments))};var me=x5(x,function(Ee){if(Ee){if(Ee.refresh)return Ee.refresh(),Ee;zf(K,n,[Ee])}return zf(q,n,w)},function(Ee){zf(K,n,[Ee])});return me.h}a(E5,"_createTimeoutWith");function Fy(x,T){return E5(!0,n,z[v](arguments))}a(Fy,"scheduleTimeout");function b5(x,T){return E5(!1,n,z[v](arguments))}a(b5,"createTimeout");var pv,Yf="constructor",Jf="prototype",mv="function",ob="_dynInstFuncs",Oy="_isDynProxy",sb="_dynClass",bL="_dynCls$",hv="_dynInstChk",ab=hv,IL="_dfOpts",I5="_unknown_",cb="__proto__",V_="_dyn"+cb,T5="__dynProto$Gbl",lb="_dynInstProto",ub="useBaseInst",z_="setInstFuncs",gv=Object,db=gv.getPrototypeOf,TL=gv.getOwnPropertyNames,w5=Ei(),fb=w5[T5]||(w5[T5]={o:(pv={},pv[z_]=!0,pv[ub]=!0,pv),n:1e3});function pb(x){return x&&(x===gv[Jf]||x===Array[Jf])}a(pb,"_isObjectOrArrayPrototype");function Lg(x){return pb(x)||x===Function[Jf]}a(Lg,"_isObjectArrayOrFunctionPrototype");function Im(x){var T;if(x){if(db)return db(x);var w=x[cb]||x[Jf]||(x[Yf]?x[Yf][Jf]:null);T=x[V_]||w,Ce(x,V_)||(delete x[lb],T=x[V_]=x[lb]||x[V_],x[lb]=w)}return T}a(Im,"_getObjProto");function mb(x,T){var w=[];if(TL)w=TL(x);else for(var P in x)typeof P=="string"&&Ce(x,P)&&w.push(P);if(w&&w.length>0)for(var L=0;L<w.length;L++)T(w[L])}a(mb,"_forEachProp");function hb(x,T,w){return T!==Yf&&typeof x[T]===mv&&(w||Ce(x,T))&&T!==cb&&T!==Jf}a(hb,"_isDynamicCandidate");function _5(x){Mr("DynamicProto: "+x)}a(_5,"_throwTypeError");function wL(x){var T=zc(null);return mb(x,function(w){!T[w]&&hb(x,w,!1)&&(T[w]=x[w])}),T}a(wL,"_getInstanceFuncs");function _L(x,T){for(var w=x.length-1;w>=0;w--)if(x[w]===T)return!0;return!1}a(_L,"_hasVisited");function ade(x,T,w,P){function L(me,Ee,ke){var Ue=Ee[ke];if(Ue[Oy]&&P){var tt=me[ob]||{};tt[ab]!==!1&&(Ue=(tt[Ee[sb]]||{})[ke]||Ue)}return function(){return Ue.apply(me,arguments)}}a(L,"_instFuncProxy");var q=zc(null);mb(w,function(me){q[me]=L(T,w,me)});for(var K=Im(x),le=[];K&&!Lg(K)&&!_L(le,K);)mb(K,function(me){!q[me]&&hb(K,me,!db)&&(q[me]=L(T,K,me))}),le.push(K),K=Im(K);return q}a(ade,"_getBaseFuncs");function cde(x,T,w,P){var L=null;if(x&&Ce(w,sb)){var q=x[ob]||zc(null);if(L=(q[w[sb]]||zc(null))[T],L||_5("Missing ["+T+"] "+mv),!L[hv]&&q[ab]!==!1){for(var K=!Ce(x,T),le=Im(x),me=[];K&&le&&!Lg(le)&&!_L(me,le);){var Ee=le[T];if(Ee){K=Ee===P;break}me.push(le),le=Im(le)}try{K&&(x[T]=L),L[hv]=1}catch{q[ab]=!1}}}return L}a(cde,"_getInstFunc");function lde(x,T,w){var P=T[x];return P===w&&(P=Im(T)[x]),typeof P!==mv&&_5("["+x+"] is not a "+mv),P}a(lde,"_getProtoFunc");function ude(x,T,w,P,L){function q(me,Ee){var ke=a(function(){var Ue=cde(this,Ee,me,ke)||lde(Ee,me,ke);return Ue.apply(this,arguments)},"dynProtoProxy");return ke[Oy]=1,ke}if(a(q,"_createDynamicPrototype"),!pb(x)){var K=w[ob]=w[ob]||zc(null);if(!pb(K)){var le=K[T]=K[T]||zc(null);K[ab]!==!1&&(K[ab]=!!L),pb(le)||mb(w,function(me){hb(w,me,!1)&&w[me]!==P[me]&&(le[me]=w[me],delete w[me],(!Ce(x,me)||x[me]&&!x[me][Oy])&&(x[me]=q(x,me)))})}}}a(ude,"_populatePrototype");function SL(x,T){if(db){for(var w=[],P=Im(T);P&&!Lg(P)&&!_L(w,P);){if(P===x)return!0;w.push(P),P=Im(P)}return!1}return!0}a(SL,"_checkPrototype");function K_(x,T){return Ce(x,Jf)?x.name||T||I5:((x||{})[Yf]||{}).name||T||I5}a(K_,"_getObjName");function Mu(x,T,w,P){Ce(x,Jf)||_5("theClass is an invalid class definition.");var L=x[Jf];SL(L,T)||_5("["+K_(x)+"] not in hierarchy of ["+K_(T)+"]");var q=null;Ce(L,sb)?q=L[sb]:(q=bL+K_(x,"_")+"$"+fb.n,fb.n++,L[sb]=q);var K=Mu[IL],le=!!K[ub];le&&P&&P[ub]!==void 0&&(le=!!P[ub]);var me=wL(T),Ee=ade(L,T,me,le);w(T,Ee);var ke=!!db&&!!K[z_];ke&&P&&(ke=!!P[z_]),ude(L,q,T,me,ke!==!1)}a(Mu,"dynamicProto"),Mu[IL]=fb.o;var Wa="function",d$="object",f$="undefined",Y_="prototype",RL=Object,kL=RL[Y_];(Ei()||{}).Symbol,(Ei()||{}).Reflect;var S5="hasOwnProperty",p$=a(function(x){for(var T,w=1,P=arguments.length;w<P;w++){T=arguments[w];for(var L in T)kL[S5].call(T,L)&&(x[L]=T[L])}return x},"__objAssignFnImpl"),Fg=mt||p$,Qy=a(function(x,T){return Qy=RL.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,P){w.__proto__=P}||function(w,P){for(var L in P)P[S5](L)&&(w[L]=P[L])},Qy(x,T)},"extendStaticsFn");function J_(x,T){typeof T!==Wa&&T!==null&&Mr("Class extends value "+String(T)+" is not a constructor or null"),Qy(x,T);function w(){this.constructor=x}a(w,"__"),x[Y_]=T===null?zc(T):(w[Y_]=T[Y_],new w)}a(J_,"__extendsFn");function m$(x,T){for(var w=0,P=T.length,L=x.length;w<P;w++,L++)x[L]=T[w];return x}a(m$,"__spreadArrayFn");var R5=pr,dde=ir,Uy=R5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),gb="toLowerCase",pi="length",Ab="warnToConsole",Av="throwInternal",Og="watch",k5="apply",Io="push",yb="splice",Sc="logger",Cb="cancel",X_="initialize",qy="identifier",Z_="removeNotificationListener",P5="addNotificationListener",Tm="isInitialized",vb="value",s0="getNotifyMgr",xb="getPlugin",Hy="name",zl="processNext",Eb="getProcessTelContext",wm="enabled",h$="stopPollingInternalLogs",yv="unload",D5="onComplete",bb="version",g$="loggingLevelConsole",Cv="createNew",_m="teardown",B5="messageId",vv="message",Sm="diagLog",N5="_doTeardown",Qg="update",Rm="getNext",$y="setNextPlugin",M5="userAgent",Wy="split",jy="replace",Lu="type",PL="evtName",eS="status",DL="getAllResponseHeaders",BL="isChildEvt",Ib="data",Gy="getCtx",a0="setCtx",A$="itemsReceived",Ug="urlString",NL="headers",qg="timeout",y$="traceFlags",Tb;function ML(x,T){Tb||(Tb=ws("AggregationError",function(P,L){L[pi]>1&&(P.errors=L[1])}));var w=x||"One or more errors occurred.";throw Jr(T,function(P,L){w+=`
`.concat(L," > ").concat(Ut(P))}),new Tb(w,T||[])}a(ML,"throwAggregationError");var xv="Promise",Ev="rejected";function Xf(x,T){return C$(x,function(w){return T?T({status:"fulfilled",rejected:!1,value:w}):w},function(w){return T?T({status:Ev,rejected:!0,reason:w}):w})}a(Xf,"doAwaitResponse");function C$(x,T,w,P){var L=x;try{if(At(x))(T||w)&&(L=x.then(T,w));else try{T&&(L=T(x))}catch(q){if(w)L=w(q);else throw q}}finally{P&&fde(L,P)}return L}a(C$,"doAwait");function fde(x,T){var w=x;return T&&(At(x)?x.finally?w=x.finally(T):w=x.then(function(P){return T(),P},function(P){throw T(),P}):T()),w}a(fde,"doFinally");var v$=["pending","resolving","resolved",Ev],x$="dispatchEvent",tS;function E$(x){var T;return x&&x.createEvent&&(T=x.createEvent("Event")),!!T&&T.initEvent}a(E$,"_hasInitEventFn");function L5(x,T,w,P){var L=Tc();!tS&&(tS=fi(!!V(E$,[L]).v));var q=tS.v?L.createEvent("Event"):P?new Event(T):{};if(w&&w(q),tS.v&&q.initEvent(T,!1,!0),q&&x[x$])x[x$](q);else{var K=x["on"+T];if(K)K(q);else{var le=es("console");le&&(le.error||le.log)(T,Ut(q))}}}a(L5,"emitEvent");var b$="unhandledRejection",pde=b$.toLowerCase(),wb=10,F5;function I$(x){return Qe(x)?x.toString():Ut(x)}a(I$,"dumpFnObj");function T$(x,T,w){var P=Bg(arguments,3),L=0,q=!1,K,le=[],me=!1,Ee=null,ke;function Ue(ar,Dr){try{me=!0,Ee&&Ee.cancel(),Ee=null;var si=x(function(Gi,Vi){le.push(function(){try{var Ko=L===2?ar:Dr,Sn=j(Ko)?K:Qe(Ko)?Ko(K):Ko;At(Sn)?Sn.then(Gi,Vi):Ko?Gi(Sn):L===3?Vi(Sn):Gi(Sn)}catch(nn){Vi(nn)}}),q&&yt()},P);return si}finally{}}a(Ue,"_then");function tt(ar){return Ue(void 0,ar)}a(tt,"_catch");function $e(ar){var Dr=ar,si=ar;return Qe(ar)&&(Dr=a(function(Gi){return ar&&ar(),Gi},"thenFinally"),si=a(function(Gi){throw ar&&ar(),Gi},"catchFinally")),Ue(Dr,si)}a($e,"_finally");function Ye(){return v$[L]}a(Ye,"_strState");function yt(){if(le.length>0){var ar=le.slice();le=[],me=!0,Ee&&Ee.cancel(),Ee=null,T(ar)}}a(yt,"_processQueue");function at(ar,Dr){return function(si){if(L===Dr){if(ar===2&&At(si)){L=1,si.then(at(2,1),at(3,1));return}L=ar,q=!0,K=si,yt(),!me&&ar===3&&!Ee&&(Ee=Fy(_t,wb))}}}a(at,"_createSettleIfFn");function _t(){if(!me)if(me=!0,Sg())process.emit(b$,K,ke);else{var ar=Ks()||Ei();!F5&&(F5=fi(V(es,[xv+"RejectionEvent"]).v)),L5(ar,pde,function(Dr){return Ge(Dr,"promise",{g:a(function(){return ke},"g")}),Dr.reason=K,Dr},!!F5.v)}}a(_t,"_notifyUnhandledRejection"),ke={then:Ue,catch:tt,finally:$e},be(ke,"state",{get:Ye}),$a()&&(ke[Nu(11)]="IPromise");function Wt(){return"IPromise "+Ye()+(q?" - "+I$(K):"")}return a(Wt,"_toString"),ke.toString=Wt,a(function(){Qe(w)||Mr(xv+": executor is not a function - "+I$(w));var Dr=at(3,0);try{w.call(ke,at(2,0),Dr)}catch(si){Dr(si)}},"_initialize")(),ke}a(T$,"_createPromise");function mde(x){return function(T){var w=Bg(arguments,1);return x(function(P,L){try{var q=[],K=1;tb(T,function(le,me){le&&(K++,C$(le,function(Ee){q[me]=Ee,--K===0&&P(q)},L))}),K--,K===0&&P(q)}catch(le){L(le)}},w)}}a(mde,"_createAllPromise");function hde(x){return fi(function(T){var w=Bg(arguments,1);return x(function(P,L){var q=[],K=1;function le(me,Ee){K++,Xf(me,function(ke){ke.rejected?q[Ee]={status:Ev,reason:ke.reason}:q[Ee]={status:"fulfilled",value:ke.value},--K===0&&P(q)})}a(le,"processItem");try{Xe(T)?Jr(T,le):eb(T)?tb(T,le):Mr("Input is not an iterable"),K--,K===0&&P(q)}catch(me){L(me)}},w)})}a(hde,"_createAllSettledPromise");function w$(x){Jr(x,function(T){try{T()}catch{}})}a(w$,"syncItemProcessor");function _$(x){var T=ut(x)?x:0;return function(w){Fy(function(){w$(w)},T)}}a(_$,"timeoutItemProcessor");function O5(x,T){return T$(O5,_$(T),x,T)}a(O5,"createAsyncPromise");var Q5;function gde(x,T){!Q5&&(Q5=fi(V(es,[xv]).v||null));var w=Q5.v;if(!w)return O5(x);Qe(x)||Mr(xv+": executor is not a function - "+Ut(x));var P=0;function L(){return v$[P]}a(L,"_strState");var q=new w(function(K,le){function me(ke){P=2,K(ke)}a(me,"_resolve");function Ee(ke){P=3,le(ke)}a(Ee,"_reject"),x(me,Ee)});return be(q,"state",{get:L}),q}a(gde,"createNativePromise");var U5;function q5(x){return T$(q5,w$,x)}a(q5,"createSyncPromise");function lf(x,T){return!U5&&(U5=hde(q5)),U5.v(x,T)}a(lf,"createSyncAllSettledPromise");var H5;function _b(x,T){return!H5&&(H5=fi(gde)),H5.v.call(this,x,T)}a(_b,"createPromise");var LL=mde(_b),Zf=void 0,Ui="",Hg="channels",Rc="core",c0="createPerfMgr",$5="disabled",bv="extensionConfig",Sb="extensions",ep="processTelemetry",Rb="priority",kb="eventsSent",Pb="eventsDiscarded",W5="eventsSendRequest",Iv="perfEvent",FL="offlineEventsStored",OL="offlineBatchSent",j5="offlineBatchDrop",rS="getPerfMgr",G5="domain",V5="path",S$="Not dynamic - ",QL=/-([a-z])/g,Ade=/([^\w\d_$])/g,yde=/^(\d+[\w\d_$])/;function z5(x){return!ie(x)}a(z5,"isNotNullOrUndefined");function Db(x){var T=x;return T&&ye(T)&&(T=T[jy](QL,function(w,P){return P.toUpperCase()}),T=T[jy](Ade,"_"),T=T[jy](yde,function(w,P){return"_"+P})),T}a(Db,"normalizeJsName");function Kl(x,T){return x&&T?Mg(x,T)!==-1:!1}a(Kl,"strContains");function nS(x){return x&&x.toISOString()||""}a(nS,"toISOString");function Sl(x){return Et(x)?x[Hy]:Ui}a(Sl,"getExceptionName");function Vy(x,T,w,P,L){var q=w;return x&&(q=x[T],q!==w&&(!L||L(q))&&(!P||P(w))&&(q=w,x[T]=q)),q}a(Vy,"setValue");function R$(x,T,w){var P;return x?(P=x[T],!P&&ie(P)&&(P=j(w)?{}:w,x[T]=P)):P=j(w)?{}:w,P}a(R$,"getSetValue");function Cde(x,T){var w=null,P=null;return Qe(x)?w=x:P=x,function(){var L=arguments;if(w&&(P=w()),P)return P[T][k5](P,L)}}a(Cde,"_createProxyFunction");function iS(x,T,w,P,L){x&&T&&w&&(L!==!1||j(x[T]))&&(x[T]=Cde(w,P))}a(iS,"proxyFunctionAs");function UL(x,T,w,P){return x&&T&&we(x)&&Xe(w)&&Jr(w,function(L){ye(L)&&iS(x,L,T,L,P)}),x}a(UL,"proxyFunctions");function vde(x){return function(){function T(){var w=this;x&&ue(x,function(P,L){w[P]=L})}return a(T,"class_1"),T}()}a(vde,"createClassFromInterface");function qL(x){return x&&mt&&(x=RL(mt({},x))),x}a(qL,"optimizeObject");function k$(x,T,w,P,L,q){var K=arguments,le=K[0]||{},me=K[pi],Ee=!1,ke=1;for(me>0&&Rt(le)&&(Ee=le,le=K[ke]||{},ke++),we(le)||(le={});ke<me;ke++){var Ue=K[ke],tt=Xe(Ue),$e=we(Ue);for(var Ye in Ue){var yt=tt&&Ye in Ue||$e&&We(Ue,Ye);if(yt){var at=Ue[Ye],_t=void 0;if(Ee&&at&&((_t=Xe(at))||Ed(at))){var Wt=le[Ye];_t?Xe(Wt)||(Wt=[]):Ed(Wt)||(Wt={}),at=k$(Ee,Wt,at)}at!==void 0&&(le[Ye]=at)}}}return le}a(k$,"objExtend");function K5(x){try{return x.responseText}catch{}return null}a(K5,"getResponseText");function P$(x,T){return x?"XDomainRequest,Response:"+K5(x)||"":T}a(P$,"formatErrorMessageXdr");function Y5(x,T){return x?"XMLHttpRequest,Status:"+x[eS]+",Response:"+K5(x)||x.response||"":T}a(Y5,"formatErrorMessageXhr");function D$(x,T){return T&&(ut(T)?x=[T].concat(x):Xe(T)&&(x=T.concat(x))),x}a(D$,"prependTransports");var HL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",oS="withCredentials",km="timeout";function $L(x,T,w,P,L,q){P===void 0&&(P=!1),L===void 0&&(L=!1);function K(me,Ee,ke){try{me[Ee]=ke}catch{}}a(K,"_wrapSetXhrProp");var le=new XMLHttpRequest;return P&&K(le,HL,P),w&&K(le,oS,w),le.open(x,T,!L),w&&K(le,oS,w),!L&&q&&K(le,km,q),le}a($L,"openXhr");function B$(x){var T={};if(ye(x)){var w=oo(x)[Wy](/[\r\n]+/);Jr(w,function(P){if(P){var L=P.indexOf(": ");if(L!==-1){var q=oo(P.substring(0,L))[gb](),K=oo(P.substring(L+1));T[q]=K}else T[oo(P)]=1}})}return T}a(B$,"convertAllHeadersToMap");function zy(x,T,w){if(!x[w]&&T&&T.getResponseHeader){var P=T.getResponseHeader(w);P&&(x[w]=oo(P))}return x}a(zy,"_appendHeader");var On="kill-duration",Bb="kill-duration-seconds",Tv="time-delta-millis";function wv(x,T){var w={};return x[DL]?w=B$(x[DL]()):T&&(w=zy(w,x,Tv),w=zy(w,x,On),w=zy(w,x,Bb)),w}a(wv,"_getAllResponseHeaders");var WL="documentMode",sS="location",Nb="console",J5="JSON",jL="crypto",X5="msCrypto",Mb="msie",_v="trident/",GL="XMLHttpRequest",tp=null,Lb=null,Pm=!1,bd=null,Fb=null;function aS(x,T){var w=!1;if(x){try{if(w=T in x,!w){var P=x[Y_];P&&(w=T in P)}}catch{}if(!w)try{var L=new x;w=!j(L[T])}catch{}}return w}a(aS,"_hasProperty");function Ob(x){if(x&&Pm){var T=es("__mockLocation");if(T)return T}return typeof location===d$&&location?location:es(sS)}a(Ob,"getLocation");function cS(){return typeof console!==f$?console:es(Nb)}a(cS,"getConsole");function Qb(){return!!(typeof JSON===d$&&JSON||es(J5)!==null)}a(Qb,"hasJSON");function uf(){return Qb()?JSON||es(J5):null}a(uf,"getJSON");function Z5(){return es(jL)}a(Z5,"getCrypto");function e4(){return es(X5)}a(e4,"getMsCrypto");function l0(){var x=wc();if(x&&(x[M5]!==Lb||tp===null)){Lb=x[M5];var T=(Lb||Ui)[gb]();tp=Kl(T,Mb)||Kl(T,_v)}return tp}a(l0,"isIE");function Ub(x){if(x===void 0&&(x=null),!x){var T=wc()||{};x=T?(T.userAgent||Ui)[gb]():Ui}var w=(x||Ui)[gb]();if(Kl(w,Mb)){var P=Tc()||{};return De(parseInt(w[Wy](Mb)[1]),P[WL]||0)}else if(Kl(w,_v)){var L=parseInt(w[Wy](_v)[1]);if(L)return L+4}return null}a(Ub,"getIEVersion");function Ky(x){return(Fb===null||x===!1)&&(Fb=Cd()&&!!wc().sendBeacon),Fb}a(Ky,"isBeaconsSupported");function lS(x){var T=!1;try{T=!!es("fetch");var w=es("Request");T&&x&&w&&(T=aS(w,"keepalive"))}catch{}return T}a(lS,"isFetchSupported");function VL(){return bd===null&&(bd=typeof XDomainRequest!==f$,bd&&zL()&&(bd=bd&&!aS(es(GL),"withCredentials"))),bd}a(VL,"useXDomainRequest");function zL(){var x=!1;try{var T=es(GL);x=!!T}catch{}return x}a(zL,"isXhrSupported");var Rl=4294967296,Dm=4294967295,t4=123456789,KL=987654321,$g=!1,rp=t4,qb=KL;function YL(x){x<0&&(x>>>=0),rp=t4+x&Dm,qb=KL-x&Dm,$g=!0}a(YL,"_mwcSeed");function N$(){try{var x=xd()&2147483647;YL((Math.random()*Rl^x)+x)}catch{}}a(N$,"_autoSeedMwc");function JL(x){var T=0,w=Z5()||e4();return w&&w.getRandomValues&&(T=w.getRandomValues(new Uint32Array(1))[0]&Dm),T===0&&l0()&&($g||N$(),T=M$()&Dm),T===0&&(T=My(Rl*Math.random()|0)),x||(T>>>=0),T}a(JL,"random32");function M$(x){qb=36969*(qb&65535)+(qb>>16)&Dm,rp=18e3*(rp&65535)+(rp>>16)&Dm;var T=(qb<<16)+(rp&65535)>>>0&Dm|0;return x||(T>>>=0),T}a(M$,"mwcRandom32");function xde(x){x===void 0&&(x=22);for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=JL()>>>0,P=0,L=Ui;L[pi]<x;)P++,L+=T.charAt(w&63),w>>>=6,P===5&&(w=(JL()<<2&4294967295|w&3)>>>0,P=0);return L}a(xde,"newId");var Hb="3.3.6",Ede="."+xde(6),bde=0;function L$(x){return x.nodeType===1||x.nodeType===9||!+x.nodeType}a(L$,"_canAcceptData");function F$(x,T){var w=T[x.id];if(!w){w={};try{L$(T)&&Ge(T,x.id,{e:!1,v:w})}catch{}}return w}a(F$,"_getCache");function Wg(x,T){return T===void 0&&(T=!1),Db(x+bde+++(T?"."+Hb:Ui)+Ede)}a(Wg,"createUniqueNamespace");function O$(x){var T={id:Wg("_aiData-"+(x||Ui)+"."+Hb),accept:a(function(w){return L$(w)},"accept"),get:a(function(w,P,L,q){var K=w[T.id];return K?K[Db(P)]:(q&&(K=F$(T,w),K[Db(P)]=L),L)},"get"),kill:a(function(w,P){if(w&&w[P])try{delete w[P]}catch{}},"kill")};return T}a(O$,"createElmNodeData");function $b(x){return x&&we(x)&&(x.isVal||x.fb||We(x,"v")||We(x,"mrg")||We(x,"ref")||x.set)}a($b,"_isConfigDefaults");function Q$(x,T,w){var P,L=w.dfVal||re;if(T&&w.fb){var q=w.fb;Xe(q)||(q=[q]);for(var K=0;K<q[pi];K++){var le=q[K],me=T[le];if(L(me)?P=me:x&&(me=x.cfg[le],L(me)&&(P=me),x.set(x.cfg,Ot(le),me)),L(P))break}}return!L(P)&&L(w.v)&&(P=w.v),P}a(Q$,"_getDefault");function XL(x,T,w){var P=w;if(w&&$b(w)&&(P=Q$(x,T,w)),P){$b(P)&&(P=XL(x,T,P));var L;Xe(P)?(L=[],L[pi]=P[pi]):Ed(P)&&(L={}),L&&(ue(P,function(q,K){K&&$b(K)&&(K=XL(x,T,K)),L[q]=K}),P=L)}return P}a(XL,"_resolveDefaultValue");function ZL(x,T,w,P){var L,q,K,le=P,me,Ee,ke,Ue;$b(le)?(L=le.isVal,q=le.set,ke=le.rdOnly,Ue=le.blkVal,me=le.mrg,Ee=le.ref,!Ee&&j(Ee)&&(Ee=!!me),K=Q$(x,T,le)):K=P,Ue&&x.blkVal(T,w);var tt,$e=!0,Ye=T[w];(Ye||!ie(Ye))&&(tt=Ye,$e=!1,L&&tt!==K&&!L(tt)&&(tt=K,$e=!0),q&&(tt=q(tt,K,T),$e=tt===K)),$e?K?tt=XL(x,T,K):tt=K:(Ed(tt)||Xe(K))&&me&&K&&(Ed(K)||Xe(K))&&ue(K,function(yt,at){ZL(x,tt,yt,at)}),x.set(T,w,tt),Ee&&x.ref(T,w),ke&&x.rdOnly(T,w)}a(ZL,"_applyDefaultValue");var Yy=Pg("[[ai_dynCfg_1]]"),U$=Pg("[[ai_blkDynCfg_1]]"),q$=Pg("[[ai_frcDynCfg_1]]");function H$(x){if(x){var T;if(Xe(x)?(T=[],T[pi]=x[pi]):Ed(x)&&(T={}),T)return ue(x,function(w,P){T[w]=H$(P)}),T}return x}a(H$,"_cfgDeepCopy");function Ide(x){if(x){var T=x[Yy]||x;if(T.cfg&&(T.cfg===x||T.cfg[Yy]===T))return T}return null}a(Ide,"getDynamicConfigHandler");function Tde(x){if(x&&(Ed(x)||Xe(x)))try{x[U$]=!0}catch{}return x}a(Tde,"blockDynamicConversion");function eF(x,T,w){var P=!1;return w&&!x[T.blkVal]&&(P=w[q$],!P&&!w[U$]&&(P=Ed(w)||Xe(w))),P}a(eF,"_canMakeDynamic");function Wb(x){Mr("InvalidAccess:"+x)}a(Wb,"throwInvalidAccess");var wde=["push","pop","shift","unshift","splice"],uS=a(function(x,T,w,P){x&&x[Av](3,108,"".concat(w," [").concat(T,"] failed - ")+Ut(P))},"_throwDynamicError");function Jy(x,T,w){Xe(T)&&Jr(wde,function(P){var L=T[P];T[P]=function(){for(var q=[],K=0;K<arguments.length;K++)q[K]=arguments[K];var le=L[k5](this,q);return Vb(x,T,w,"Patching"),le}})}a(Jy,"_patchArray");function u0(x,T){var w=qe(x,T);return w&&w.get}a(u0,"_getOwnPropGetter");function $$(x,T,w,P){var L={n:w,h:[],trk:a(function(Ee){Ee&&Ee.fn&&(_c(L.h,Ee)===-1&&L.h[Io](Ee),x.trk(Ee,L))},"trk"),clr:a(function(Ee){var ke=_c(L.h,Ee);ke!==-1&&L.h[yb](ke,1)},"clr")},q=!0,K=!1;function le(){q&&(K=K||eF(le,x,P),P&&!P[Yy]&&K&&(P=Vb(x,P,w,"Converting")),q=!1);var Ee=x.act;return Ee&&L.trk(Ee),P}a(le,"_getProperty"),le[x.prop]={chng:a(function(){x.add(L)},"chng")};function me(Ee){if(P!==Ee){le[x.ro]&&!x.upd&&Wb("["+w+"] is read-only:"+Ut(T)),q&&(K=K||eF(le,x,P),q=!1);var ke=K&&le[x.rf];if(K)if(ke){ue(P,function(tt){P[tt]=Ee?Ee[tt]:Zf});try{ue(Ee,function(tt,$e){jb(x,P,tt,$e)}),Ee=P}catch(tt){uS((x.hdlr||{})[Sc],w,"Assigning",tt),K=!1}}else P&&P[Yy]&&ue(P,function(tt){var $e=u0(P,tt);if($e){var Ye=$e[x.prop];Ye&&Ye.chng()}});if(Ee!==P){var Ue=Ee&&eF(le,x,Ee);!ke&&Ue&&(Ee=Vb(x,Ee,w,"Converting")),P=Ee,K=Ue}x.add(L)}}a(me,"_setProperty"),Ge(T,L.n,{g:le,s:me})}a($$,"_createDynamicProperty");function jb(x,T,w,P){if(T){var L=u0(T,w),q=L&&!!L[x.prop];q?T[w]=P:$$(x,T,w,P)}return T}a(jb,"_setDynamicProperty");function Gb(x,T,w,P){if(T){var L=u0(T,w),q=L&&!!L[x.prop],K=P&&P[0],le=P&&P[1],me=P&&P[2];if(!q){if(me)try{Tde(T)}catch(Ee){uS((x.hdlr||{})[Sc],w,"Blocking",Ee)}try{jb(x,T,w,T[w]),L=u0(T,w)}catch(Ee){uS((x.hdlr||{})[Sc],w,"State",Ee)}}K&&(L[x.rf]=K),le&&(L[x.ro]=le),me&&(L[x.blkVal]=!0)}return T}a(Gb,"_setDynamicPropertyState");function Vb(x,T,w,P){try{ue(T,function(L,q){jb(x,T,L,q)}),T[Yy]||(be(T,Yy,{get:a(function(){return x.hdlr},"get")}),Jy(x,T,w))}catch(L){uS((x.hdlr||{})[Sc],w,P,L)}return T}a(Vb,"_makeDynamicObject");var dS="[[ai_",fS="]]";function _de(x){var T=vd(dS+"get"+x.uid+fS),w=vd(dS+"ro"+x.uid+fS),P=vd(dS+"rf"+x.uid+fS),L=vd(dS+"blkVal"+x.uid+fS),q=vd(dS+"dtl"+x.uid+fS),K=null,le=null,me;function Ee($e,Ye){var yt=me.act;try{me.act=$e,$e&&$e[q]&&(Jr($e[q],function(_t){_t.clr($e)}),$e[q]=[]),Ye({cfg:x.cfg,set:x.set.bind(x),setDf:x.setDf.bind(x),ref:x.ref.bind(x),rdOnly:x.rdOnly.bind(x)})}catch(_t){var at=x[Sc];throw at&&at[Av](1,107,Ut(_t)),_t}finally{me.act=yt||null}}a(Ee,"_useHandler");function ke(){if(K){var $e=K;K=null,le&&le[Cb](),le=null;var Ye=[];if(Jr($e,function(yt){if(yt&&(yt[q]&&(Jr(yt[q],function(at){at.clr(yt)}),yt[q]=null),yt.fn))try{Ee(yt,yt.fn)}catch(at){Ye[Io](at)}}),K)try{ke()}catch(yt){Ye[Io](yt)}Ye[pi]>0&&ML("Watcher error(s): ",Ye)}}a(ke,"_notifyWatchers");function Ue($e){if($e&&$e.h[pi]>0){K||(K=[]),le||(le=Fy(function(){le=null,ke()},0));for(var Ye=0;Ye<$e.h[pi];Ye++){var yt=$e.h[Ye];yt&&_c(K,yt)===-1&&K[Io](yt)}}}a(Ue,"_addWatcher");function tt($e,Ye){if($e){var yt=$e[q]=$e[q]||[];_c(yt,Ye)===-1&&yt[Io](Ye)}}return a(tt,"_trackHandler"),me={prop:T,ro:w,rf:P,blkVal:L,hdlr:x,add:Ue,notify:ke,use:Ee,trk:tt},me}a(_de,"_createState");function r4(x,T){var w={fn:T,rm:a(function(){w.fn=null,x=null,T=null},"rm")};return Ge(w,"toJSON",{v:a(function(){return"WatcherHandler"+(w.fn?"":"[X]")},"v")}),x.use(w,T),w}a(r4,"_createAndUseHandler");function W$(x,T,w){var P=Ide(T);if(P)return P;var L=Wg("dyncfg",!0),q=T&&w!==!1?T:H$(T),K;function le(){K.notify()}a(le,"_notifyWatchers");function me(at,_t,Wt){try{at=jb(K,at,_t,Wt)}catch(ar){uS(x,_t,"Setting value",ar)}return at[_t]}a(me,"_setValue");function Ee(at){return r4(K,at)}a(Ee,"_watch");function ke(at,_t){K.use(null,function(Wt){var ar=K.upd;try{j(_t)||(K.upd=_t),at(Wt)}finally{K.upd=ar}})}a(ke,"_block");function Ue(at,_t){var Wt;return Gb(K,at,_t,(Wt={},Wt[0]=!0,Wt))[_t]}a(Ue,"_ref");function tt(at,_t){var Wt;return Gb(K,at,_t,(Wt={},Wt[1]=!0,Wt))[_t]}a(tt,"_rdOnly");function $e(at,_t){var Wt;return Gb(K,at,_t,(Wt={},Wt[2]=!0,Wt))[_t]}a($e,"_blkPropValue");function Ye(at,_t){return _t&&ue(_t,function(Wt,ar){ZL(yt,at,Wt,ar)}),at}a(Ye,"_applyDefaults");var yt={uid:null,cfg:q,logger:x,notify:le,set:me,setDf:Ye,watch:Ee,ref:Ue,rdOnly:tt,blkVal:$e,_block:ke};return Ge(yt,"uid",{c:!1,e:!1,w:!1,v:L}),K=_de(yt),Vb(K,q,"config","Creating"),yt}a(W$,"_createDynamicHandler");function j$(x,T){x?(x[Ab](T),x[Av](2,108,T)):Wb(T)}a(j$,"_logInvalidAccess");function np(x,T,w,P){var L=W$(w,x||{},P);return T&&L.setDf(L.cfg,T),L}a(np,"createDynamicConfig");function jg(x,T,w){var P=x[Yy]||x;return P.cfg&&(P.cfg===x||P.cfg[Yy]===P)?P[Og](T):(j$(w,S$+Ut(x)),np(x,null,w)[Og](T))}a(jg,"onConfigChange");function zb(x,T){if(x&&x[yv])return x[yv](T)}a(zb,"runTargetUnload");function G$(x,T,w){var P;return w||(P=_b(function(L){w=L})),x&&nde(x)>0?Xf(zb(x[0],T),function(){G$(Bg(x,1),T,w)}):w(),P}a(G$,"doUnloadAll");var Sde=500,V$="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Rde(x,T,w){return!x&&ie(x)?T:Rt(x)?x:Ot(x)[gb]()==="true"}a(Rde,"_stringToBoolOrDefault");function kde(x){return{mrg:!0,v:x}}a(kde,"cfgDfMerge");function tF(x,T,w){return{fb:w,isVal:x,v:T}}a(tF,"cfgDfValidate");function Bm(x,T){return{fb:T,set:Rde,v:!!x}}a(Bm,"cfgDfBoolean");var n4=[kb,Pb,W5,Iv],i4=null,o4;function Pde(x,T){return function(){var w=arguments,P=z$(T);if(P){var L=P.listener;L&&L[x]&&L[x][k5](L,w)}}}a(Pde,"_listenerProxyFunc");function Dde(){var x=es("Microsoft");return x&&(i4=x.ApplicationInsights),i4}a(Dde,"_getExtensionNamespace");function z$(x){var T=i4;return!T&&x.disableDbgExt!==!0&&(T=i4||Dde()),T?T.ChromeDbgExt:null}a(z$,"getDebugExt");function Bde(x){if(!o4){o4={};for(var T=0;T<n4[pi];T++)o4[n4[T]]=Pde(n4[T],x)}return o4}a(Bde,"getDebugListener");var Kb,K$="warnToConsole",Nde="AI (Internal): ",Mde="AI: ",Lde="AITR_",Y$={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Yb=(Kb={},Kb[0]=null,Kb[1]="errorToConsole",Kb[2]=K$,Kb[3]="debugToConsole",Kb);function df(x){return x?'"'+x[jy](/\"/g,Ui)+'"':Ui}a(df,"_sanitizeDiagnosticText");function pS(x,T){var w=cS();if(w){var P="log";w[x]&&(P=x),Qe(w[P])&&w[P](T)}}a(pS,"_logToConsole");var s4=function(){function x(T,w,P,L){P===void 0&&(P=!1);var q=this;q[B5]=T,q[vv]=(P?Mde:Nde)+T;var K=Ui;Qb()&&(K=uf().stringify(L));var le=(w?" message:"+df(w):Ui)+(L?" props:"+df(K):Ui);q[vv]+=le}return a(x,"_InternalLogMessage"),x.dataType="MessageData",x}();function mS(x,T){return(x||{})[Sc]||new hS(T)}a(mS,"safeGetLogger");var hS=function(){function x(T){this.identifier="DiagnosticLogger",this.queue=[];var w=0,P={},L,q,K,le,me;Mu(x,this,function(Ee){me=Ue(T||{}),Ee.consoleLoggingLevel=function(){return L},Ee[Av]=function(Ye,yt,at,_t,Wt){Wt===void 0&&(Wt=!1);var ar=new s4(yt,at,Wt,_t);if(le)throw Ut(ar);var Dr=Yb[Ye]||K$;if(j(ar[vv]))$e("throw"+(Ye===1?"Critical":"Warning"),ar);else{if(Wt){var si=+ar[B5];!P[si]&&L>=Ye&&(Ee[Dr](ar[vv]),P[si]=!0)}else L>=Ye&&Ee[Dr](ar[vv]);ke(Ye,ar)}},Ee.debugToConsole=function(Ye){pS("debug",Ye),$e("warning",Ye)},Ee[Ab]=function(Ye){pS("warn",Ye),$e("warning",Ye)},Ee.errorToConsole=function(Ye){pS("error",Ye),$e("error",Ye)},Ee.resetInternalMessageCount=function(){w=0,P={}},Ee.logInternalMessage=ke,Ee[yv]=function(Ye){me&&me.rm(),me=null};function ke(Ye,yt){if(!tt()){var at=!0,_t=Lde+yt[B5];if(P[_t]?at=!1:P[_t]=!0,at&&(Ye<=q&&(Ee.queue[Io](yt),w++,$e(Ye===1?"error":"warn",yt)),w===K)){var Wt="Internal events throttle limit per PageView reached for this app.",ar=new s4(23,Wt,!1);Ee.queue[Io](ar),Ye===1?Ee.errorToConsole(Wt):Ee[Ab](Wt)}}}a(ke,"_logInternalMessage");function Ue(Ye){return jg(np(Ye,Y$,Ee).cfg,function(yt){var at=yt.cfg;L=at[g$],q=at.loggingLevelTelemetry,K=at.maxMessageLimit,le=at.enableDebug})}a(Ue,"_setDefaultsFromConfig");function tt(){return w>=K}a(tt,"_areInternalMessagesThrottled");function $e(Ye,yt){var at=z$(T||{});at&&at[Sm]&&at[Sm](Ye,yt)}a($e,"_debugExtMsg")})}return a(x,"DiagnosticLogger"),x.__ieDyn=1,x}();function rF(x){return x||new hS}a(rF,"_getLogger");function qr(x,T,w,P,L,q){q===void 0&&(q=!1),rF(x)[Av](T,w,P,L,q)}a(qr,"_throwInternal");function a4(x,T){rF(x)[Ab](T)}a(a4,"_warnToConsole");var gS,Xy,J$="toGMTString",X$="toUTCString",c4="cookie",Gg="expires",Z$="isCookieUseDisabled",l4="disableCookiesUsage",eW="_ckMgr",u4=null,Jb=null,d4=null,Nm,tW={},rW={},nW=(gS={cookieCfg:kde((Xy={},Xy[G5]={fb:"cookieDomain",dfVal:z5},Xy.path={fb:"cookiePath",dfVal:z5},Xy.enabled=Zf,Xy.ignoreCookies=Zf,Xy.blockedCookies=Zf,Xy)),cookieDomain:Zf,cookiePath:Zf},gS[l4]=Zf,gS);function nF(){!Nm&&(Nm=xr(function(){return Tc()}))}a(nF,"_getDoc");function AS(x){return x?x.isEnabled():!0}a(AS,"_isMgrEnabled");function iF(x,T){return T&&x&&Xe(x.ignoreCookies)?_c(x.ignoreCookies,T)!==-1:!1}a(iF,"_isIgnoredCookie");function Fde(x,T){return T&&x&&Xe(x.blockedCookies)&&_c(x.blockedCookies,T)!==-1?!0:iF(x,T)}a(Fde,"_isBlockedCookie");function oF(x,T){var w=T[wm];if(ie(w)){var P=void 0;j(x[Z$])||(P=!x[Z$]),j(x[l4])||(P=!x[l4]),w=P}return w}a(oF,"_isCfgEnabled");function Ode(x,T){var w,P,L,q,K,le,me,Ee;x=np(x||rW,null,T).cfg,q=jg(x,function(Ue){Ue.setDf(Ue.cfg,nW),w=Ue.ref(Ue.cfg,"cookieCfg"),P=w[V5]||"/",L=w[G5],K=oF(x,w)!==!1,le=w.getCookie||Qde,me=w.setCookie||Xb,Ee=w.delCookie||Xb},T);var ke={isEnabled:a(function(){var Ue=oF(x,w)!==!1&&K&&iW(T),tt=rW[eW];return Ue&&tt&&ke!==tt&&(Ue=AS(tt)),Ue},"isEnabled"),setEnabled:a(function(Ue){K=Ue!==!1,w[wm]=Ue},"setEnabled"),set:a(function(Ue,tt,$e,Ye,yt){var at=!1;if(AS(ke)&&!Fde(w,Ue)){var _t={},Wt=oo(tt||Ui),ar=Mg(Wt,";");if(ar!==-1&&(Wt=oo(B(tt,ar)),_t=sF(ve(tt,ar+1))),Vy(_t,G5,Ye||L,de,j),!ie($e)){var Dr=l0();if(j(_t[Gg])){var si=xd(),Gi=si+$e*1e3;if(Gi>0){var Vi=new Date;Vi.setTime(Gi),Vy(_t,Gg,oW(Vi,Dr?J$:X$)||oW(Vi,Dr?J$:X$)||Ui,de)}}Dr||Vy(_t,"max-age",Ui+$e,null,j)}var Ko=Ob();Ko&&Ko.protocol==="https:"&&(Vy(_t,"secure",null,null,j),Jb===null&&(Jb=!Ude((wc()||{})[M5])),Jb&&Vy(_t,"SameSite","None",null,j)),Vy(_t,V5,yt||P,null,j),me(Ue,sW(Wt,_t)),at=!0}return at},"set"),get:a(function(Ue){var tt=Ui;return AS(ke)&&!iF(w,Ue)&&(tt=le(Ue)),tt},"get"),del:a(function(Ue,tt){var $e=!1;return AS(ke)&&($e=ke.purge(Ue,tt)),$e},"del"),purge:a(function(Ue,tt){var $e,Ye=!1;if(iW(T)){var yt=($e={},$e[V5]=tt||"/",$e[Gg]="Thu, 01 Jan 1970 00:00:01 GMT",$e);l0()||(yt["max-age"]="0"),Ee(Ue,sW(Ui,yt)),Ye=!0}return Ye},"purge"),unload:a(function(Ue){q&&q.rm(),q=null},"unload")};return ke[eW]=ke,ke}a(Ode,"createCookieMgr");function iW(x){if(u4===null){u4=!1,!Nm&&nF();try{var T=Nm.v||{};u4=T[c4]!==void 0}catch(w){qr(x,2,68,"Cannot access document.cookie - "+Sl(w),{exception:Ut(w)})}}return u4}a(iW,"areCookiesSupported");function sF(x){var T={};if(x&&x[pi]){var w=oo(x)[Wy](";");Jr(w,function(P){if(P=oo(P||Ui),P){var L=Mg(P,"=");L===-1?T[P]=null:T[oo(B(P,L))]=oo(ve(P,L+1))}})}return T}a(sF,"_extractParts");function oW(x,T){return Qe(x[T])?x[T]():null}a(oW,"_formatDate");function sW(x,T){var w=x||Ui;return ue(T,function(P,L){w+="; "+P+(ie(L)?Ui:"="+L)}),w}a(sW,"_formatCookieValue");function Qde(x){var T=Ui;if(!Nm&&nF(),Nm.v){var w=Nm.v[c4]||Ui;d4!==w&&(tW=sF(w),d4=w),T=oo(tW[x]||Ui)}return T}a(Qde,"_getCookieValue");function Xb(x,T){!Nm&&nF(),Nm.v&&(Nm.v[c4]=x+"="+T)}a(Xb,"_setCookieValue");function Ude(x){return ye(x)?!!(Kl(x,"CPU iPhone OS 12")||Kl(x,"iPad; CPU OS 12")||Kl(x,"Macintosh; Intel Mac OS X 10_14")&&Kl(x,"Version/")&&Kl(x,"Safari")||Kl(x,"Macintosh; Intel Mac OS X 10_14")&&u$(x,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Kl(x,"Chrome/5")||Kl(x,"Chrome/6")||Kl(x,"UnrealEngine")&&!Kl(x,"Chrome")||Kl(x,"UCBrowser/12")||Kl(x,"UCBrowser/11")):!1}a(Ude,"uaDisallowsSameSiteNone");var aF={perfEvtsSendAll:!1};function qde(x){x.h=null;var T=x.cb;x.cb=[],Jr(T,function(w){V(w.fn,[w.arg])})}a(qde,"_runScheduledListeners");function Zy(x,T,w,P){Jr(x,function(L){L&&L[T]&&(w?(w.cb[Io]({fn:P,arg:L}),w.h=w.h||Fy(qde,0,w)):V(P,[L]))})}a(Zy,"_runListeners");var Hde=function(){function x(T){this.listeners=[];var w,P,L=[],q={h:null,cb:[]},K=np(T,aF);P=K[Og](function(le){w=!!le.cfg.perfEvtsSendAll}),Mu(x,this,function(le){Ge(le,"listeners",{g:a(function(){return L},"g")}),le[P5]=function(me){L[Io](me)},le[Z_]=function(me){for(var Ee=_c(L,me);Ee>-1;)L[yb](Ee,1),Ee=_c(L,me)},le[kb]=function(me){Zy(L,kb,q,function(Ee){Ee[kb](me)})},le[Pb]=function(me,Ee){Zy(L,Pb,q,function(ke){ke[Pb](me,Ee)})},le[W5]=function(me,Ee){Zy(L,W5,Ee?q:null,function(ke){ke[W5](me,Ee)})},le[Iv]=function(me){me&&(w||!me[BL]())&&Zy(L,Iv,null,function(Ee){me.isAsync?Fy(function(){return Ee[Iv](me)},0):Ee[Iv](me)})},le[FL]=function(me){me&&me[pi]&&Zy(L,FL,q,function(Ee){Ee[FL](me)})},le[OL]=function(me){me&&me[Ib]&&Zy(L,OL,q,function(Ee){Ee[OL](me)})},le[j5]=function(me,Ee){if(me>0){var ke=Ee||0;Zy(L,j5,q,function(Ue){Ue[j5](me,ke)})}},le[yv]=function(me){var Ee=a(function(){P&&P.rm(),P=null,L=[],q.h&&q.h[Cb](),q.h=null,q.cb=[]},"_finishUnload"),ke;if(Zy(L,"unload",null,function(Ue){var tt=Ue[yv](me);tt&&(ke||(ke=[]),ke[Io](tt))}),ke)return _b(function(Ue){return Xf(LL(ke),function(){Ee(),Ue()})});Ee()}})}return a(x,"NotificationManager"),x.__ieDyn=1,x}(),Zb="ctx",cF="ParentContextKey",yS="ChildrenContextKey",$de=null,f4=function(){function x(T,w,P){var L=this;if(L.start=xd(),L[Hy]=T,L.isAsync=P,L[BL]=function(){return!1},Qe(w)){var q;Ge(L,"payload",{g:a(function(){return!q&&Qe(w)&&(q=w(),w=null),q},"g")})}L[Gy]=function(K){return K?K===x[cF]||K===x[yS]?L[K]:(L[Zb]||{})[K]:null},L[a0]=function(K,le){if(K)if(K===x[cF])L[K]||(L[BL]=function(){return!0}),L[K]=le;else if(K===x[yS])L[K]=le;else{var me=L[Zb]=L[Zb]||{};me[K]=le}},L.complete=function(){var K=0,le=L[Gy](x[yS]);if(Xe(le))for(var me=0;me<le[pi];me++){var Ee=le[me];Ee&&(K+=Ee.time)}L.time=xd()-L.start,L.exTime=L.time-K,L.complete=function(){}}}return a(x,"PerfEvent"),x.ParentContextKey="parent",x.ChildrenContextKey="childEvts",x}(),Wde=function(){function x(T){this.ctx={},Mu(x,this,function(w){w.create=function(P,L,q){return new f4(P,L,q)},w.fire=function(P){P&&(P.complete(),T&&Qe(T[Iv])&&T[Iv](P))},w[a0]=function(P,L){if(P){var q=w[Zb]=w[Zb]||{};q[P]=L}},w[Gy]=function(P){return(w[Zb]||{})[P]}})}return a(x,"PerfManager"),x.__ieDyn=1,x}(),Mm="CoreUtils.doPerf";function eI(x,T,w,P,L){if(x){var q=x;if(q[rS]&&(q=q[rS]()),q){var K=void 0,le=q[Gy](Mm);try{if(K=q.create(T(),P,L),K){if(le&&K[a0]&&(K[a0](f4[cF],le),le[Gy]&&le[a0])){var me=le[Gy](f4[yS]);me||(me=[],le[a0](f4[yS],me)),me[Io](K)}return q[a0](Mm,K),w(K)}}catch(Ee){K&&K[a0]&&K[a0]("exception",Ee)}finally{K&&q.fire(K),q[a0](Mm,le)}}}return w()}a(eI,"doPerf");function kc(){return $de}a(kc,"getGblPerfMgr");var p4="00000000000000000000000000000000",tI="0000000000000000";function m4(x,T,w){return x&&x[pi]===T&&x!==w?!!x.match(/^[\da-f]*$/i):!1}a(m4,"_isValid");function eC(x){return m4(x,32,p4)}a(eC,"isValidTraceId");function Sv(x){return m4(x,16,tI)}a(Sv,"isValidSpanId");var CS=O$("plugin");function tC(x){return CS.get(x,"state",{},!0)}a(tC,"_getPluginState");function lF(x,T){for(var w=[],P=null,L=x[Rm](),q;L;){var K=L[xb]();if(K){P&&P[$y]&&K[ep]&&P[$y](K),q=tC(K);var le=!!q[Tm];K[Tm]&&(le=K[Tm]()),le||w[Io](K),P=K,L=L[Rm]()}}Jr(w,function(me){var Ee=x[Rc]();me[X_](x.getCfg(),Ee,T,x[Rm]()),q=tC(me),!me[Rc]&&!q[Rc]&&(q[Rc]=Ee),q[Tm]=!0,delete q[_m]})}a(lF,"initializePlugins");function uF(x){return x.sort(function(T,w){var P=0;if(w){var L=w[ep];T[ep]?P=L?T[Rb]-w[Rb]:1:L&&(P=-1)}else P=T?1:-1;return P})}a(uF,"sortPlugins");function jde(x){var T={};return{getName:a(function(){return T[Hy]},"getName"),setName:a(function(w){x&&x.setName(w),T[Hy]=w},"setName"),getTraceId:a(function(){return T.traceId},"getTraceId"),setTraceId:a(function(w){x&&x.setTraceId(w),eC(w)&&(T.traceId=w)},"setTraceId"),getSpanId:a(function(){return T.spanId},"getSpanId"),setSpanId:a(function(w){x&&x.setSpanId(w),Sv(w)&&(T.spanId=w)},"setSpanId"),getTraceFlags:a(function(){return T[y$]},"getTraceFlags"),setTraceFlags:a(function(w){x&&x.setTraceFlags(w),T[y$]=w},"setTraceFlags")}}a(jde,"createDistributedTraceContext");var Gde="TelemetryPluginChain",aW="_hasRun",dF="_getTelCtx",cW=0;function Vde(x,T,w){for(;x;){if(x[xb]()===w)return x;x=x[Rm]()}return M([w],T.config||{},T)}a(Vde,"_getNextProxyStart");function fF(x,T,w,P){var L=null,q=[];T||(T=np({},null,w[Sc])),P!==null&&(L=P?Vde(x,w,P):x);var K={_next:me,ctx:{core:a(function(){return w},"core"),diagLog:a(function(){return mS(w,T.cfg)},"diagLog"),getCfg:a(function(){return T.cfg},"getCfg"),getExtCfg:ke,getConfig:Ue,hasNext:a(function(){return!!L},"hasNext"),getNext:a(function(){return L},"getNext"),setNext:a(function($e){L=$e},"setNext"),iterate:tt,onComplete:le}};function le($e,Ye){for(var yt=[],at=2;at<arguments.length;at++)yt[at-2]=arguments[at];$e&&q[Io]({func:$e,self:j(Ye)?K.ctx:Ye,args:yt})}a(le,"_addOnComplete");function me(){var $e=L;if(L=$e?$e[Rm]():null,!$e){var Ye=q;Ye&&Ye[pi]>0&&(Jr(Ye,function(yt){try{yt.func.call(yt.self,yt.args)}catch(at){qr(w[Sc],2,73,"Unexpected Exception during onComplete - "+Ut(at))}}),q=[])}return $e}a(me,"_moveNext");function Ee($e,Ye){var yt=null,at=T.cfg;if(at&&$e){var _t=at[bv];!_t&&Ye&&(_t={}),at[bv]=_t,_t=T.ref(at,bv),_t&&(yt=_t[$e],!yt&&Ye&&(yt={}),_t[$e]=yt,yt=T.ref(_t,$e))}return yt}a(Ee,"_getExtCfg");function ke($e,Ye){var yt=Ee($e,!0);return Ye&&ue(Ye,function(at,_t){if(ie(yt[at])){var Wt=T.cfg[at];(Wt||!ie(Wt))&&(yt[at]=Wt)}ZL(T,yt,at,_t)}),T.setDf(yt,Ye)}a(ke,"_resolveExtCfg");function Ue($e,Ye,yt){yt===void 0&&(yt=!1);var at,_t=Ee($e,!1),Wt=T.cfg;return _t&&(_t[Ye]||!ie(_t[Ye]))?at=_t[Ye]:(Wt[Ye]||!ie(Wt[Ye]))&&(at=Wt[Ye]),at||!ie(at)?at:yt}a(Ue,"_getConfig");function tt($e){for(var Ye;Ye=K._next();){var yt=Ye[xb]();yt&&$e(yt)}}return a(tt,"_iterateChain"),K}a(fF,"_createInternalContext");function rI(x,T,w,P){var L=np(T),q=fF(x,L,w,P),K=q.ctx;function le(Ee){var ke=q._next();return ke&&ke[ep](Ee,K),!ke}a(le,"_processNext");function me(Ee,ke){return Ee===void 0&&(Ee=null),Xe(Ee)&&(Ee=M(Ee,L.cfg,w,ke)),rI(Ee||K[Rm](),L.cfg,w,ke)}return a(me,"_createNew"),K[zl]=le,K[Cv]=me,K}a(rI,"createProcessTelemetryContext");function _(x,T,w){var P=np(T.config),L=fF(x,P,T,w),q=L.ctx;function K(me){var Ee=L._next();return Ee&&Ee[yv](q,me),!Ee}a(K,"_processNext");function le(me,Ee){return me===void 0&&(me=null),Xe(me)&&(me=M(me,P.cfg,T,Ee)),_(me||q[Rm](),T,Ee)}return a(le,"_createNew"),q[zl]=K,q[Cv]=le,q}a(_,"createProcessTelemetryUnloadContext");function D(x,T,w){var P=np(T.config),L=fF(x,P,T,w),q=L.ctx;function K(me){return q.iterate(function(Ee){Qe(Ee[Qg])&&Ee[Qg](q,me)})}a(K,"_processNext");function le(me,Ee){return me===void 0&&(me=null),Xe(me)&&(me=M(me,P.cfg,T,Ee)),D(me||q[Rm](),T,Ee)}return a(le,"_createNew"),q[zl]=K,q[Cv]=le,q}a(D,"createProcessTelemetryUpdateContext");function M(x,T,w,P){var L=null,q=!P;if(Xe(x)&&x[pi]>0){var K=null;Jr(x,function(le){if(!q&&P===le&&(q=!0),q&&le&&Qe(le[ep])){var me=W(le,T,w);L||(L=me),K&&K._setNext(me),K=me}})}return P&&!L?M([P],T,w):L}a(M,"createTelemetryProxyChain");function W(x,T,w){var P=null,L=Qe(x[ep]),q=Qe(x[$y]),K;x?K=x[qy]+"-"+x[Rb]+"-"+cW++:K="Unknown-0-"+cW++;var le={getPlugin:a(function(){return x},"getPlugin"),getNext:a(function(){return P},"getNext"),processTelemetry:ke,unload:Ue,update:tt,_id:K,_setNext:a(function($e){P=$e},"_setNext")};function me(){var $e;return x&&Qe(x[dF])&&($e=x[dF]()),$e||($e=rI(le,T,w)),$e}a(me,"_getTelCtx");function Ee($e,Ye,yt,at,_t){var Wt=!1,ar=x?x[qy]:Gde,Dr=$e[aW];return Dr||(Dr=$e[aW]={}),$e.setNext(P),x&&eI($e[Rc](),function(){return ar+":"+yt},function(){Dr[K]=!0;try{var si=P?P._id:Ui;si&&(Dr[si]=!1),Wt=Ye($e)}catch(Vi){var Gi=P?Dr[P._id]:!0;Gi&&(Wt=!0),(!P||!Gi)&&qr($e[Sm](),1,73,"Plugin ["+ar+"] failed during "+yt+" - "+Ut(Vi)+", run flags: "+Ut(Dr))}},at,_t),Wt}a(Ee,"_processChain");function ke($e,Ye){Ye=Ye||me();function yt(at){if(!x||!L)return!1;var _t=tC(x);return _t[_m]||_t[$5]?!1:(q&&x[$y](P),x[ep]($e,at),!0)}a(yt,"_callProcessTelemetry"),Ee(Ye,yt,"processTelemetry",function(){return{item:$e}},!$e.sync)||Ye[zl]($e)}a(ke,"_processTelemetry");function Ue($e,Ye){function yt(){var at=!1;if(x){var _t=tC(x),Wt=x[Rc]||_t[Rc];x&&(!Wt||Wt===$e.core())&&!_t[_m]&&(_t[Rc]=null,_t[_m]=!0,_t[Tm]=!1,x[_m]&&x[_m]($e,Ye)===!0&&(at=!0))}return at}a(yt,"_callTeardown"),Ee($e,yt,"unload",function(){},Ye.isAsync)||$e[zl](Ye)}a(Ue,"_unloadPlugin");function tt($e,Ye){function yt(){var at=!1;if(x){var _t=tC(x),Wt=x[Rc]||_t[Rc];x&&(!Wt||Wt===$e.core())&&!_t[_m]&&x[Qg]&&x[Qg]($e,Ye)===!0&&(at=!0)}return at}a(yt,"_callUpdate"),Ee($e,yt,"update",function(){},!1)||$e[zl](Ye)}return a(tt,"_updatePlugin"),er(le)}a(W,"createTelemetryPluginProxy");function pe(){var x=[];function T(P){P&&x[Io](P)}a(T,"_addHandler");function w(P,L){Jr(x,function(q){try{q(P,L)}catch(K){qr(P[Sm](),2,73,"Unexpected error calling unload handler - "+Ut(K))}}),x=[]}return a(w,"_runHandlers"),{add:T,run:w}}a(pe,"createUnloadHandlerContainer");function _e(){var x=[];function T(P){var L=x;x=[],Jr(L,function(q){try{(q.rm||q.remove).call(q)}catch(K){qr(P,2,73,"Unloading:"+Ut(K))}})}a(T,"_doUnload");function w(P){P&&Kf(x,P)}return a(w,"_addHook"),{run:T,add:w}}a(_e,"createUnloadHookContainer");var Pe,je="getPlugin",ot=(Pe={},Pe[bv]={isVal:z5,v:{}},Pe),bt=function(){function x(){var T=this,w,P,L,q,K;Ee(),Mu(x,T,function(ke){ke[X_]=function(Ue,tt,$e,Ye){me(Ue,tt,Ye),w=!0},ke[_m]=function(Ue,tt){var $e=ke[Rc];if(!$e||Ue&&$e!==Ue[Rc]())return;var Ye,yt=!1,at=Ue||_(null,$e,L&&L[je]?L[je]():L),_t=tt||{reason:0,isAsync:!1};function Wt(){yt||(yt=!0,q.run(at,tt),K.run(at[Sm]()),Ye===!0&&at[zl](_t),Ee())}return a(Wt,"_unloadCallback"),!ke[N5]||ke[N5](at,_t,Wt)!==!0?Wt():Ye=!0,Ye},ke[Qg]=function(Ue,tt){var $e=ke[Rc];if(!$e||Ue&&$e!==Ue[Rc]())return;var Ye,yt=!1,at=Ue||D(null,$e,L&&L[je]?L[je]():L),_t=tt||{reason:0};function Wt(){yt||(yt=!0,me(at.getCfg(),at.core(),at[Rm]()))}return a(Wt,"_updateCallback"),!ke._doUpdate||ke._doUpdate(at,_t,Wt)!==!0?Wt():Ye=!0,Ye},iS(ke,"_addUnloadCb",function(){return q},"add"),iS(ke,"_addHook",function(){return K},"add"),Ge(ke,"_unloadHooks",{g:a(function(){return K},"g")})}),T[Sm]=function(ke){return le(ke)[Sm]()},T[Tm]=function(){return w},T.setInitialized=function(ke){w=ke},T[$y]=function(ke){L=ke},T[zl]=function(ke,Ue){Ue?Ue[zl](ke):L&&Qe(L[ep])&&L[ep](ke,null)},T._getTelCtx=le;function le(ke){ke===void 0&&(ke=null);var Ue=ke;if(!Ue){var tt=P||rI(null,{},T[Rc]);L&&L[je]?Ue=tt[Cv](null,L[je]):Ue=tt[Cv](null,L)}return Ue}a(le,"_getTelCtx");function me(ke,Ue,tt){np(ke,ot,mS(Ue)),!tt&&Ue&&(tt=Ue[Eb]()[Rm]());var $e=L;L&&L[je]&&($e=L[je]()),T[Rc]=Ue,P=rI(tt,ke,Ue,$e)}a(me,"_setDefaults");function Ee(){w=!1,T[Rc]=null,P=null,L=null,K=_e(),q=pe()}a(Ee,"_initDefaults")}return a(x,"BaseTelemetryPlugin"),x.__ieDyn=1,x}();function Cr(x,T,w){var P={id:T,fn:w};Kf(x,P);var L={remove:a(function(){Jr(x,function(q,K){if(q.id===P.id)return x[yb](K,1),-1})},"remove")};return L}a(Cr,"_addInitializer");function Qn(x,T,w){for(var P=!1,L=x[pi],q=0;q<L;++q){var K=x[q];if(K)try{if(K.fn[k5](null,[T])===!1){P=!0;break}}catch(le){qr(w,2,64,"Telemetry initializer failed: "+Sl(le),{exception:Ut(le)},!0)}}return!P}a(Qn,"_runInitializers");var ni=function(x){J_(T,x);function T(){var w=x.call(this)||this;w.identifier="TelemetryInitializerPlugin",w.priority=199;var P,L;q(),Mu(T,w,function(K,le){K.addTelemetryInitializer=function(me){return Cr(L,P++,me)},K[ep]=function(me,Ee){Qn(L,me,Ee?Ee[Sm]():K[Sm]())&&K[zl](me,Ee)},K[N5]=function(){q()}});function q(){P=0,L=[]}return a(q,"_initDefaults"),w}return a(T,"TelemetryInitializerPlugin"),T.__ieDyn=1,T}(bt),br,Or="Plugins must provide initialize method",Zn="_notificationManager",Un="SDK is still unloading...",qi="SDK is not initialized",Oo=100,so=5e4,Kc=sr((br={cookieCfg:{}},br[Sb]={rdOnly:!0,ref:!0,v:[]},br[Hg]={rdOnly:!0,ref:!0,v:[]},br[bv]={ref:!0,v:{}},br[c0]=Zf,br.loggingLevelConsole=0,br.diagnosticLogInterval=Zf,br));function nI(x,T){return new Wde(T)}a(nI,"_createPerfManager");function vS(x,T,w){var P=[],L=[],q={};return Jr(w,function(K){(ie(K)||ie(K[X_]))&&Kr(Or);var le=K[Rb],me=K[qy];K&&le&&(ie(q[le])?q[le]=me:a4(x,"Two extensions have same priority #"+le+" - "+q[le]+", "+me)),!le||le<T?P[Io](K):L[Io](K)}),{core:P,channels:L}}a(vS,"_validateExtensions");function pF(x,T){var w=!1;return Jr(T,function(P){if(P===x)return w=!0,-1}),w}a(pF,"_isPluginPresent");function h4(x,T,w,P){w&&ue(w,function(L,q){P&&Ed(q)&&Ed(T[L])&&h4(x,T[L],q,P),P&&Ed(q)&&Ed(T[L])?h4(x,T[L],q,P):x.set(T,L,q)})}a(h4,"_deepMergeConfig");function lW(x,T){var w=null,P=-1;return Jr(x,function(L,q){if(L.w===T)return w=L,P=q,-1}),{i:P,l:w}}a(lW,"_findWatcher");function zde(x,T){var w=lW(x,T).l;return w||(w={w:T,rm:a(function(){var P=lW(x,T);P.i!==-1&&x[yb](P.i,1)},"rm")},x[Io](w)),w}a(zde,"_addDelayedCfgListener");function mF(x,T,w){Jr(T,function(P){var L=jg(x,P.w,w);delete P.w,P.rm=function(){L.rm()}})}a(mF,"_registerDelayedCfgListener");function uW(x,T,w,P){return T.add(x[Og](function(L){var q=L.cfg.disableDbgExt;q===!0&&P&&(w[Z_](P),P=null),w&&!P&&q!==!0&&(P=Bde(L.cfg),w[P5](P))})),P}a(uW,"_initDebugListener");function dW(x){return Ge({rm:a(function(){x.rm()},"rm")},"toJSON",{v:a(function(){return"aicore::onCfgChange<"+JSON.stringify(x)+">"},"v")})}a(dW,"_createUnloadHook");var Mt=function(){function x(){var T,w,P,L,q,K,le,me,Ee,ke,Ue,tt,$e,Ye,yt,at,_t,Wt,ar,Dr,si,Gi,Vi,Ko,Sn,nn,zi,wa,_s,jt,on,Qo;Mu(x,this,function(Bt){pt(),Bt._getDbgPlgTargets=function(){return[Vi,L]},Bt[Tm]=function(){return w},Bt.activeStatus=function(){return nn},Bt._setPendingStatus=function(){nn=3},Bt[X_]=function(vt,_r,Gn,Zr){$e&&Kr(Un),Bt[Tm]()&&Kr("Core cannot be initialized more than once"),T=np(vt,Kc,Gn||Bt[Sc],!1),vt=T.cfg,Ou(T[Og](function(as){var Js=as.cfg,wd=nn===3;if(!wd){wa=Js.initInMemoMaxSize||Oo;var ip=Js.instrumentationKey,Kg=Js.endpointUrl;if(ie(ip)){si=null,nn=Uy.INACTIVE;var Yg="Please provide instrumentation key";w?(qr(P,1,100,Yg),Ga()):Kr(Yg);return}var S4=[];if(At(ip)?(S4[Io](ip),si=null):si=ip,At(Kg)?(S4[Io](Kg),zi=null):zi=Kg,S4[pi]){_s=!1,nn=3;var NF=z5(Js.initTimeOut)?Js.initTimeOut:so,wfe=lf(S4);Fy(function(){_s||qn()},NF),Xf(wfe,function(mI){try{if(_s)return;if(!mI.rejected){var hI=mI[vb];if(hI&&hI[pi]){var MW=hI[0];if(si=MW&&MW[vb],hI[pi]>1){var LW=hI[1];zi=LW&&LW[vb]}}si&&(vt.instrumentationKey=si,vt.endpointUrl=zi)}qn()}catch{_s||qn()}})}else qn();var R4=as.ref(as.cfg,bv);ue(R4,function(mI){as.ref(R4,mI)})}})),q=Zr,ar=uW(T,Wt,q&&Bt[s0](),ar),fI(),Bt[Sc]=Gn;var Vn=vt[Sb];if(ke=[],ke[Io].apply(ke,m$(m$([],_r,!1),Vn)),Ue=vt[Hg],Va(null),(!tt||tt[pi]===0)&&Kr("No "+Hg+" available"),Ue&&Ue[pi]>1){var ts=Bt[xb]("TeeChannelController");(!ts||!ts.plugin)&&qr(P,1,28,"TeeChannel required")}mF(vt,Gi,P),Gi=null,w=!0,nn===Uy.ACTIVE&&Ga()},Bt.getChannels=function(){var vt=[];return tt&&Jr(tt,function(_r){vt[Io](_r)}),er(vt)},Bt.track=function(vt){eI(Bt[rS](),function(){return"AppInsightsCore:track"},function(){vt===null&&(_a(vt),Kr("Invalid telemetry item")),!vt[Hy]&&ie(vt[Hy])&&(_a(vt),Kr("telemetry name required")),vt.iKey=vt.iKey||si,vt.time=vt.time||nS(new Date),vt.ver=vt.ver||"4.0",!$e&&Bt[Tm]()&&nn===Uy.ACTIVE?Xc()[zl](vt):nn!==Uy.INACTIVE&&L[pi]<=wa&&L[Io](vt)},function(){return{item:vt}},!vt.sync)},Bt[Eb]=Xc,Bt[s0]=function(){return q||(q=new Hde(T.cfg),Bt[Zn]=q),q},Bt[P5]=function(vt){Bt.getNotifyMgr()[P5](vt)},Bt[Z_]=function(vt){q&&q[Z_](vt)},Bt.getCookieMgr=function(){return me||(me=Ode(T.cfg,Bt[Sc])),me},Bt.setCookieMgr=function(vt){me!==vt&&(zb(me,!1),me=vt)},Bt[rS]=function(){return K||le||kc()},Bt.setPerfMgr=function(vt){K=vt},Bt.eventCnt=function(){return L[pi]},Bt.releaseQueue=function(){if(w&&L[pi]>0){var vt=L;L=[],nn===2?Jr(vt,function(_r){_r.iKey=_r.iKey||si,Xc()[zl](_r)}):qr(P,2,20,"core init status is not active")}},Bt.pollInternalLogs=function(vt){return yt=vt||null,Qo=!1,jt&&jt[Cb](),Yo(!0)};function qn(){_s=!0,ie(si)?(nn=Uy.INACTIVE,qr(P,1,112,"ikey can't be resolved from promises")):nn=Uy.ACTIVE,Ga()}a(qn,"_setStatus");function Ga(){w&&(Bt.releaseQueue(),Bt.pollInternalLogs())}a(Ga,"_releaseQueues");function Yo(vt){if((!jt||!jt[wm])&&!Qo){var _r=vt||P&&P.queue[pi]>0;_r&&(on||(on=!0,Ou(T[Og](function(Gn){var Zr=Gn.cfg.diagnosticLogInterval;(!Zr||!(Zr>0))&&(Zr=1e4);var Vn=!1;jt&&(Vn=jt[wm],jt[Cb]()),jt=b5(dI,Zr),jt.unref(),jt[wm]=Vn}))),jt[wm]=!0)}return jt}a(Yo,"_startLogPoller"),Bt[h$]=function(){Qo=!0,jt&&jt[Cb](),dI()},UL(Bt,function(){return Ye},["addTelemetryInitializer"]),Bt[yv]=function(vt,_r,Gn){vt===void 0&&(vt=!0),w||Kr(qi),$e&&Kr(Un);var Zr={reason:50,isAsync:vt,flushComplete:!1},Vn;vt&&!_r&&(Vn=_b(function(Js){_r=Js}));var ts=_(Fm(),Bt);ts[D5](function(){Wt.run(Bt[Sc]),G$([me,q,P],vt,function(){pt(),_r&&_r(Zr)})},Bt);function as(Js){Zr.flushComplete=Js,$e=!0,_t.run(ts,Zr),Bt[h$](),ts[zl](Zr)}return a(as,"_doUnload"),dI(),Vg(vt,as,6,Gn),Vn},Bt[xb]=Zl,Bt.addPlugin=function(vt,_r,Gn,Zr){if(!vt){Zr&&Zr(!1),pI(Or);return}var Vn=Zl(vt[qy]);if(Vn&&!_r){Zr&&Zr(!1),pI("Plugin ["+vt[qy]+"] is already loaded!");return}var ts={reason:16};function as(ip){ke[Io](vt),ts.added=[vt],Va(ts),Zr&&Zr(!0)}if(a(as,"_addPlugin"),Vn){var Js=[Vn.plugin],wd={reason:2,isAsync:!!Gn};ff(Js,wd,function(ip){ip?(ts.removed=Js,ts.reason|=32,as()):Zr&&Zr(!1)})}else as()},Bt.updateCfg=function(vt,_r){_r===void 0&&(_r=!0);var Gn;if(Bt[Tm]()){Gn={reason:1,cfg:T.cfg,oldCfg:y5({},T.cfg),newConfig:y5({},vt),merge:_r},vt=Gn.newConfig;var Zr=T.cfg;vt[Sb]=Zr[Sb],vt[Hg]=Zr[Hg]}T._block(function(Vn){var ts=Vn.cfg;h4(Vn,ts,vt,_r),_r||ue(ts,function(as){We(vt,as)||Vn.set(ts,as,Zf)}),Vn.setDf(ts,Kc)},!0),T.notify(),Gn&&zg(Gn)},Bt.evtNamespace=function(){return at},Bt.flush=Vg,Bt.getTraceCtx=function(vt){return Dr||(Dr=jde()),Dr},Bt.setTraceCtx=function(vt){Dr=vt||null},Bt.addUnloadHook=Ou,iS(Bt,"addUnloadCb",function(){return _t},"add"),Bt.onCfgChange=function(vt){var _r;return w?_r=jg(T.cfg,vt,Bt[Sc]):_r=zde(Gi,vt),dW(_r)},Bt.getWParam=function(){return Ia()||T.cfg.enableWParam?0:-1};function Xl(){var vt={};Ko=[];var _r=a(function(Gn){Gn&&Jr(Gn,function(Zr){if(Zr[qy]&&Zr[bb]&&!vt[Zr.identifier]){var Vn=Zr[qy]+"="+Zr[bb];Ko[Io](Vn),vt[Zr.identifier]=Zr}})},"_addPluginVersions");_r(tt),Ue&&Jr(Ue,function(Gn){_r(Gn)}),_r(ke)}a(Xl,"_setPluginVersions");function pt(){w=!1,T=np({},Kc,Bt[Sc]),T.cfg[g$]=1,Ge(Bt,"config",{g:a(function(){return T.cfg},"g"),s:a(function(_r){Bt.updateCfg(_r,!1)},"s")}),Ge(Bt,"pluginVersionStringArr",{g:a(function(){return Ko||Xl(),Ko},"g")}),Ge(Bt,"pluginVersionString",{g:a(function(){return Sn||(Ko||Xl(),Sn=Ko.join(";")),Sn||Ui},"g")}),Ge(Bt,"logger",{g:a(function(){return P||(P=new hS(T.cfg),T[Sc]=P),P},"g"),s:a(function(_r){T[Sc]=_r,P!==_r&&(zb(P,!1),P=_r)},"s")}),Bt[Sc]=new hS(T.cfg),Vi=[];var vt=Bt.config[Sb]||[];vt.splice(0,vt[pi]),Kf(vt,Vi),Ye=new ni,L=[],zb(q,!1),q=null,K=null,le=null,zb(me,!1),me=null,Ee=null,ke=[],Ue=null,tt=null,$e=!1,yt=null,at=Wg("AIBaseCore",!0),_t=pe(),Dr=null,si=null,Wt=_e(),Gi=[],Sn=null,Ko=null,Qo=!1,jt=null,on=!1,nn=0,zi=null,wa=null,_s=!1}a(pt,"_initDefaults");function Xc(){var vt=rI(Fm(),T.cfg,Bt);return vt[D5](Yo),vt}a(Xc,"_createTelCtx");function Va(vt){var _r=vS(Bt[Sc],Sde,ke);Ee=null,Sn=null,Ko=null,tt=(Ue||[])[0]||[],tt=uF(Kf(tt,_r[Hg]));var Gn=Kf(uF(_r[Rc]),tt);Vi=er(Gn);var Zr=Bt.config[Sb]||[];Zr.splice(0,Zr[pi]),Kf(Zr,Vi);var Vn=Xc();tt&&tt[pi]>0&&lF(Vn[Cv](tt),Gn),lF(Vn,Gn),vt&&zg(vt)}a(Va,"_initPluginChain");function Zl(vt){var _r=null,Gn=null,Zr=[];return Jr(Vi,function(Vn){if(Vn[qy]===vt&&Vn!==Ye)return Gn=Vn,-1;Vn.getChannel&&Zr[Io](Vn)}),!Gn&&Zr[pi]>0&&Jr(Zr,function(Vn){if(Gn=Vn.getChannel(vt),!Gn)return-1}),Gn&&(_r={plugin:Gn,setEnabled:a(function(Vn){tC(Gn)[$5]=!Vn},"setEnabled"),isEnabled:a(function(){var Vn=tC(Gn);return!Vn[_m]&&!Vn[$5]},"isEnabled"),remove:a(function(Vn,ts){Vn===void 0&&(Vn=!0);var as=[Gn],Js={reason:1,isAsync:Vn};ff(as,Js,function(wd){wd&&Va({reason:32,removed:as}),ts&&ts(wd)})},"remove")}),_r}a(Zl,"_getPlugin");function Fm(){if(!Ee){var vt=(Vi||[]).slice();_c(vt,Ye)===-1&&vt[Io](Ye),Ee=M(uF(vt),T.cfg,Bt)}return Ee}a(Fm,"_getPluginChain");function ff(vt,_r,Gn){if(vt&&vt[pi]>0){var Zr=M(vt,T.cfg,Bt),Vn=_(Zr,Bt);Vn[D5](function(){var ts=!1,as=[];Jr(ke,function(wd,ip){pF(wd,vt)?ts=!0:as[Io](wd)}),ke=as,Sn=null,Ko=null;var Js=[];Ue&&(Jr(Ue,function(wd,ip){var Kg=[];Jr(wd,function(Yg){pF(Yg,vt)?ts=!0:Kg[Io](Yg)}),Js[Io](Kg)}),Ue=Js),Gn&&Gn(ts),Yo()}),Vn[zl](_r)}else Gn(!1)}a(ff,"_removePlugins");function dI(){if(P&&P.queue){var vt=P.queue.slice(0);P.queue[pi]=0,Jr(vt,function(_r){var Gn={name:yt||"InternalMessageId: "+_r[B5],iKey:si,time:nS(new Date),baseType:s4.dataType,baseData:{message:_r[vv]}};Bt.track(Gn)})}}a(dI,"_flushInternalLogs");function Vg(vt,_r,Gn,Zr){var Vn=1,ts=!1,as=null;Zr=Zr||5e3;function Js(){Vn--,ts&&Vn===0&&(as&&as[Cb](),as=null,_r&&_r(ts),_r=null)}if(a(Js,"doCallback"),tt&&tt[pi]>0){var wd=Xc()[Cv](tt);wd.iterate(function(ip){if(ip.flush){Vn++;var Kg=!1;ip.flush(vt,function(){Kg=!0,Js()},Gn)||Kg||(vt&&as==null?as=Fy(function(){as=null,Js()},Zr):Js())}})}return ts=!0,Js(),!0}a(Vg,"_flushChannels");function fI(){var vt;Ou(T[Og](function(_r){var Gn=_r.cfg.enablePerfMgr;if(Gn){var Zr=_r.cfg[c0];(vt!==Zr||!vt)&&(Zr||(Zr=nI),R$(_r.cfg,c0,Zr),vt=Zr,le=null),!K&&!le&&Qe(Zr)&&(le=Zr(Bt,Bt[s0]()))}else le=null,vt=null}))}a(fI,"_initPerfManager");function zg(vt){var _r=D(Fm(),Bt);_r[D5](Yo),(!Bt._updateHook||Bt._updateHook(_r,vt)!==!0)&&_r[zl](vt)}a(zg,"_doUpdate");function pI(vt){var _r=Bt[Sc];_r?(qr(_r,2,73,vt),Yo()):Kr(vt)}a(pI,"_logOrThrowError");function _a(vt){var _r=Bt[s0]();_r&&_r[Pb]([vt],2)}a(_a,"_notifyInvalidEvent");function Ou(vt){Wt.add(vt)}a(Ou,"_addUnloadHook")})}return a(x,"AppInsightsCore"),x.__ieDyn=1,x}();function Xr(x,T){try{if(x&&x!==""){var w=uf().parse(x);if(w&&w[A$]&&w[A$]>=w.itemsAccepted&&w.itemsReceived-w.itemsAccepted===w.errors[pi])return w}}catch(P){qr(T,1,43,"Cannot parse the response. "+(P[Hy]||Ut(P)),{response:x})}return null}a(Xr,"parseResponse");var En="",Cs="NoResponseBody",Yc="&"+Cs+"=true",ja="POST",Jc=function(){function x(){var T=0,w,P,L,q,K,le,me,Ee,ke,Ue,tt,$e,Ye,yt;Mu(x,this,function(at,_t){var Wt=!0;_s(),at[X_]=function(jt,on){L=on,P&&qr(L,1,28,"Sender is already initialized"),at.SetConfig(jt),P=!0},at._getDbgPlgTargets=function(){return[P,q,le,w]},at.SetConfig=function(jt){try{if(K=jt.senderOnCompleteCallBack||{},le=!!jt.disableCredentials,me=jt.fetchCredentials,q=!!jt.isOneDs,w=!!jt.enableSendPromise,ke=!!jt.disableXhr,Ue=!!jt.disableBeacon,tt=!!jt.disableBeaconSync,yt=jt.timeWrapper,Ye=!!jt.addNoResponse,$e=!!jt.disableFetchKeepAlive,Ee={sendPOST:nn},q||(Wt=!1),le){var on=Ob();on&&on.protocol&&on.protocol[gb]()==="file:"&&(Wt=!1)}return!0}catch{}return!1},at.getSyncFetchPayload=function(){return T},at.getSenderInst=function(jt,on){return jt&&jt[pi]?Gi(jt,on):null},at.getFallbackInst=function(){return Ee},at[N5]=function(jt,on){_s()};function ar(jt,on){Vi(on,200,{},jt)}a(ar,"_onSuccess");function Dr(jt,on){qr(L,2,26,"Failed to send telemetry.",{message:jt}),Vi(on,400,{})}a(Dr,"_onError");function si(jt){Dr("No endpoint url is provided for the batch",jt)}a(si,"_onNoPayloadUrl");function Gi(jt,on){for(var Qo=0,Bt=null,qn=0;Bt==null&&qn<jt[pi];)Qo=jt[qn],!ke&&Qo===1?VL()?Bt=wa:zL()&&(Bt=nn):Qo===2&&lS(on)&&(!on||!$e)?Bt=zi:Qo===3&&Ky()&&(on?!tt:!Ue)&&(Bt=Sn),qn++;return Bt?{_transport:Qo,_isSync:on,sendPOST:Bt}:null}a(Gi,"_getSenderInterface");function Vi(jt,on,Qo,Bt){try{jt&&jt(on,Qo,Bt)}catch{}}a(Vi,"_doOnComplete");function Ko(jt,on){var Qo=wc(),Bt=jt[Ug];if(!Bt)return si(on),!0;Bt=jt[Ug]+(Ye?Yc:En);var qn=jt[Ib],Ga=q?qn:new Blob([qn],{type:"text/plain;charset=UTF-8"}),Yo=Qo.sendBeacon(Bt,Ga);return Yo}a(Ko,"_doBeaconSend");function Sn(jt,on,Qo){var Bt=jt[Ib];try{if(Bt)if(Ko(jt,on))ar(En,on);else{var qn=K&&K.beaconOnRetry;qn&&Qe(qn)?qn(jt,on,Ko):(Ee&&Ee.sendPOST(jt,on,!0),qr(L,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ga){q&&a4(L,"Failed to send telemetry using sendBeacon API. Ex:"+Ut(Ga)),Vi(on,q?0:400,{},En)}}a(Sn,"_beaconSender");function nn(jt,on,Qo){var Bt,qn,Ga,Yo=jt[NL]||{};!Qo&&w&&(Bt=_b(function(Va,Zl){qn=Va,Ga=Zl})),q&&Qo&&jt.disableXhrSync&&(Qo=!1);var Xl=jt[Ug];if(!Xl){si(on),qn&&qn(!1);return}var pt=$L(ja,Xl,Wt,!0,Qo,jt[qg]);q||pt.setRequestHeader("Content-type","application/json"),Jr(wt(Yo),function(Va){pt.setRequestHeader(Va,Yo[Va])}),pt.onreadystatechange=function(){q||(Xc(pt),pt.readyState===4&&qn&&qn(!0))},pt.onload=function(){q&&Xc(pt)};function Xc(Va){var Zl=K&&K.xhrOnComplete,Fm=Zl&&Qe(Zl);if(Fm)Zl(Va,on,jt);else{var ff=K5(Va);Vi(on,Va[eS],wv(Va,q),ff)}}return a(Xc,"_doOnReadyFunc"),pt.onerror=function(Va){Vi(on,q?pt[eS]:400,wv(pt,q),q?En:Y5(pt)),Ga&&Ga(Va)},pt.ontimeout=function(){Vi(on,q?pt[eS]:500,wv(pt,q),q?En:Y5(pt)),qn&&qn(!1)},pt.send(jt[Ib]),Bt}a(nn,"_xhrSender");function zi(jt,on,Qo){var Bt,qn=jt[Ug],Ga=jt[Ib],Yo=q?Ga:new Blob([Ga],{type:"application/json"}),Xl,pt,Xc,Va=new Headers,Zl=Ga[pi],Fm=!1,ff=!1,dI=jt[NL]||{},Vg=(Bt={method:ja,body:Yo},Bt[V$]=!0,Bt);jt.headers&&wt(jt.headers)[pi]>0&&(Jr(wt(dI),function(_a){Va.append(_a,dI[_a])}),Vg[NL]=Va),me?Vg.credentials=me:Wt&&q&&(Vg.credentials="include"),Qo&&(Vg.keepalive=!0,T+=Zl,q?jt._sendReason===2&&(Fm=!0,Ye&&(qn+=Yc)):Fm=!0);var fI=new Request(qn,Vg);try{fI[V$]=!0}catch{}if(!Qo&&w&&(Xl=_b(function(_a,Ou){pt=_a,Xc=Ou})),!qn){si(on),pt&&pt(!1);return}function zg(_a){Vi(on,q?0:400,{},q?En:_a)}a(zg,"_handleError");function pI(_a,Ou,vt){var _r=_a[eS],Gn=K.fetchOnComplete;Gn&&Qe(Gn)?Gn(_a,on,vt||En,Ou):Vi(on,_r,{},vt||En)}a(pI,"_onFetchComplete");try{Xf(fetch(q?qn:fI,q?Vg:null),function(_a){if(Qo&&(T-=Zl,Zl=0),!ff)if(ff=!0,_a.rejected)zg(_a.reason&&_a.reason[vv]),Xc&&Xc(_a.reason);else{var Ou=_a[vb];try{!q&&!Ou.ok?(zg(Ou.statusText),pt&&pt(!1)):q&&!Ou.body?(pI(Ou,null,En),pt&&pt(!0)):Xf(Ou.text(),function(vt){pI(Ou,jt,vt[vb]),pt&&pt(!0)})}catch(vt){zg(Ut(vt)),Xc&&Xc(vt)}}})}catch(_a){ff||(zg(Ut(_a)),Xc&&Xc(_a))}return Fm&&!ff&&(ff=!0,Vi(on,200,{}),pt&&pt(!0)),q&&!ff&&jt[qg]>0&&yt&&yt.set(function(){ff||(ff=!0,Vi(on,500,{}),pt&&pt(!0))},jt[qg]),Xl}a(zi,"_doFetchSender");function wa(jt,on,Qo){var Bt=Ks(),qn=new XDomainRequest,Ga=jt[Ib];qn.onload=function(){var Va=K5(qn),Zl=K&&K.xdrOnComplete;Zl&&Qe(Zl)?Zl(qn,on,jt):Vi(on,200,{},Va)},qn.onerror=function(){Vi(on,400,{},q?En:P$(qn))},qn.ontimeout=function(){Vi(on,500,{})},qn.onprogress=function(){};var Yo=Bt&&Bt.location&&Bt.location.protocol||"",Xl=jt[Ug];if(!Xl){si(on);return}if(!q&&Xl.lastIndexOf(Yo,0)!==0){var pt="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";qr(L,2,40,". "+pt),Dr(pt,on);return}var Xc=q?Xl:Xl[jy](/^(https?:)/,"");qn.open(ja,Xc),jt[qg]&&(qn[qg]=jt[qg]),qn.send(Ga),q&&Qo?yt&&yt.set(function(){qn.send(Ga)},0):qn.send(Ga)}a(wa,"_xdrSender");function _s(){T=0,P=!1,w=!1,L=null,q=null,K=null,le=null,me=null,Ee=null,ke=!1,Ue=!1,tt=!1,$e=!1,Ye=!1,yt=null}a(_s,"_initDefaults")})}return a(x,"SenderPostManager"),x.__ieDyn=1,x}(),Rv="on",rC="attachEvent",iI="addEventListener",fW="detachEvent",pW="removeEventListener",g4="events";Wg("aiEvtPageHide"),Wg("aiEvtPageShow");var Kde=/\.[\.]+/g,J4e=/[\.]+$/,AIt=1,mW=O$("events"),yIt=/^([^.]*)(?:\.(.+)|)/;function X4e(x){return x&&x[jy]?x[jy](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ui):x}a(X4e,"_normalizeNamespace");function Yde(x,T){if(T){var w=Ui;Xe(T)?(w=Ui,Jr(T,function(L){L=X4e(L),L&&(L[0]!=="."&&(L="."+L),w+=L)})):w=X4e(T),w&&(w[0]!=="."&&(w="."+w),x=(x||Ui)+w)}var P=yIt.exec(x||Ui)||[];return{type:P[1],ns:(P[2]||Ui).replace(Kde,".").replace(J4e,Ui)[Wy](".").sort().join(".")}}a(Yde,"_getEvtNamespace");function Z4e(x,T,w){w===void 0&&(w=!0);var P=mW.get(x,g4,{},w),L=P[T];return L||(L=P[T]=[]),L}a(Z4e,"_getRegisteredEvents");function eDe(x,T,w,P){x&&T&&T[Lu]&&(x[pW]?x[pW](T[Lu],w,P):x[fW]&&x[fW](Rv+T[Lu],w))}a(eDe,"_doDetach");function CIt(x,T,w,P){var L=!1;return x&&T&&T[Lu]&&w&&(x[iI]?(x[iI](T[Lu],w,P),L=!0):x[rC]&&(x[rC](Rv+T[Lu],w),L=!0)),L}a(CIt,"_doAttach");function tDe(x,T,w,P){for(var L=T[pi];L--;){var q=T[L];q&&(!w.ns||w.ns===q[PL].ns)&&(!P||P(q))&&(eDe(x,q[PL],q.handler,q.capture),T[yb](L,1))}}a(tDe,"_doUnregister");function vIt(x,T,w){if(T[Lu])tDe(x,Z4e(x,T[Lu]),T,w);else{var P=mW.get(x,g4,{});ue(P,function(L,q){tDe(x,q,T,w)}),wt(P)[pi]===0&&mW.kill(x,g4)}}a(vIt,"_unregisterEvents");function rDe(x,T){var w;return T?(Xe(T)?w=[x].concat(T):w=[x,T],w=Yde("xx",w).ns[Wy](".")):w=x,w}a(rDe,"mergeEvtNamespace");function nDe(x,T,w,P,L){L===void 0&&(L=!1);var q=!1;if(x)try{var K=Yde(T,P);if(q=CIt(x,K,w,L),q&&mW.accept(x)){var le={guid:AIt++,evtName:K,handler:w,capture:L};Z4e(x,K.type)[Io](le)}}catch{}return q}a(nDe,"eventOn");function xIt(x,T,w,P,L){if(L===void 0&&(L=!1),x)try{var q=Yde(T,P),K=!1;vIt(x,q,function(le){return q.ns&&!w||le.handler===w?(K=!0,!0):!1}),K||eDe(x,q,w,L)}catch{}}a(xIt,"eventOff");var iDe="sampleRate",Jde="ProcessLegacy",oDe="http.method",Xde="https://dc.services.visualstudio.com",A4="/v2/track",oI="not_specified",sDe=dde({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),hW="split",Pi="length",Zde="toLowerCase",xS="ingestionendpoint",hF="toString",aDe="removeItem",gW="message",EIt="count",efe="stringify",tfe="pathname",gF="match",sI="name",nC="properties",kv="measurements",AW="sizeInBytes",yW="typeName",AF="exceptions",yF="severityLevel",rfe="problemGroup",y4="parsedStack",CW="hasFullStack",vW="assembly",Pv="fileName",C4="line",xW="aiDataContract",EW="duration";function cDe(x,T,w){var P=T[Pi],L=bIt(x,T);if(L[Pi]!==P){for(var q=0,K=L;w[K]!==void 0;)q++,K=ve(L,0,147)+wIt(q);L=K}return L}a(cDe,"dataSanitizeKeyAndAddUniqueness");function bIt(x,T){var w;return T&&(T=oo(Ot(T)),T[Pi]>150&&(w=ve(T,0,150),qr(x,2,57,"name is too long.  It has been truncated to 150 characters.",{name:T},!0))),w||T}a(bIt,"dataSanitizeKey");function Id(x,T,w){w===void 0&&(w=1024);var P;return T&&(w=w||1024,T=oo(Ot(T)),T[Pi]>w&&(P=ve(T,0,w),qr(x,2,61,"string value is too long. It has been truncated to "+w+" characters.",{value:T},!0))),P||T}a(Id,"dataSanitizeString");function nfe(x,T){return uDe(x,T,2048,66)}a(nfe,"dataSanitizeUrl");function lDe(x,T){var w;return T&&T[Pi]>32768&&(w=ve(T,0,32768),qr(x,2,56,"message is too long, it has been truncated to 32768 characters.",{message:T},!0)),w||T}a(lDe,"dataSanitizeMessage");function IIt(x,T){var w;if(T){var P=""+T;P[Pi]>32768&&(w=ve(P,0,32768),qr(x,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:T},!0))}return w||T}a(IIt,"dataSanitizeException");function ES(x,T){if(T){var w={};ue(T,function(P,L){if(we(L)&&Qb())try{L=uf()[efe](L)}catch(q){qr(x,2,49,"custom property is not valid",{exception:q},!0)}L=Id(x,L,8192),P=cDe(x,P,w),w[P]=L}),T=w}return T}a(ES,"dataSanitizeProperties");function bS(x,T){if(T){var w={};ue(T,function(P,L){P=cDe(x,P,w),w[P]=L}),T=w}return T}a(bS,"dataSanitizeMeasurements");function TIt(x,T){return T&&uDe(x,T,128,69)[hF]()}a(TIt,"dataSanitizeId");function uDe(x,T,w,P){var L;return T&&(T=oo(Ot(T)),T[Pi]>w&&(L=ve(T,0,w),qr(x,2,P,"input is too long, it has been truncated to "+w+" characters.",{data:T},!0))),L||T}a(uDe,"dataSanitizeInput");function wIt(x){var T="00"+x;return Te(T,T[Pi]-3)}a(wIt,"dsPadNumber");var dDe=Tc()||{},fDe=0,_It=[null,null,null,null,null];function SIt(x){var T=fDe,w=_It,P=w[T];return dDe.createElement?w[T]||(P=w[T]=dDe.createElement("a")):P={host:RIt(x,!0)},P.href=x,T++,T>=w[Pi]&&(T=0),fDe=T,P}a(SIt,"urlParseUrl");function RIt(x,T){var w=kIt(x,T)||"";if(w){var P=w[gF](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(P!=null&&P[Pi]>3&&ye(P[2])&&P[2][Pi]>0)return P[2]+(P[3]||"")}return w}a(RIt,"urlParseHost");function kIt(x,T){var w=null;if(x){var P=x[gF](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(P!=null&&P[Pi]>2&&ye(P[2])&&P[2][Pi]>0&&(w=P[2]||"",T&&P[Pi]>2)){var L=(P[1]||"")[Zde](),q=P[3]||"";(L==="http"&&q===":80"||L==="https"&&q===":443")&&(q=""),w+=q}}return w}a(kIt,"urlParseFullHost");var PIt=[Xde+A4,"https://breeze.aimon.applicationinsights.io"+A4,"https://dc-int.services.visualstudio.com"+A4];function pDe(x){return _c(PIt,x[Zde]())!==-1}a(pDe,"isInternalApplicationInsightsEndpoint");function DIt(x,T,w,P){var L,q=P,K=P;if(T&&T[Pi]>0){var le=SIt(T);if(L=le.host,!q)if(le[tfe]!=null){var me=le.pathname[Pi]===0?"/":le[tfe];me.charAt(0)!=="/"&&(me="/"+me),K=le[tfe],q=Id(x,w?w+" "+me:me)}else q=Id(x,T)}else L=P,q=P;return{target:L,name:q,data:K}}a(DIt,"AjaxHelperParseDependencyPath");var ife=R5({LocalStorage:0,SessionStorage:1}),v4=void 0,mDe="";function hDe(x){try{if(ie(Ei()))return null;var T=new Date()[hF](),w=es(x===ife.LocalStorage?"localStorage":"sessionStorage"),P=mDe+T;w.setItem(P,T);var L=w.getItem(P)!==T;if(w[aDe](P),!L)return w}catch{}return null}a(hDe,"_getVerifiedStorageObject");function ofe(){return gDe()?hDe(ife.SessionStorage):null}a(ofe,"_getSessionStorageObject");function BIt(x){mDe=x||""}a(BIt,"utlSetStoragePrefix");function gDe(x){return(x||v4===void 0)&&(v4=!!hDe(ife.SessionStorage)),v4}a(gDe,"utlCanUseSessionStorage");function NIt(x,T){var w=ofe();if(w!==null)try{return w.getItem(T)}catch(P){v4=!1,qr(x,2,2,"Browser failed read of session storage. "+Sl(P),{exception:Ut(P)})}return null}a(NIt,"utlGetSessionStorage");function MIt(x,T,w){var P=ofe();if(P!==null)try{return P.setItem(T,w),!0}catch(L){v4=!1,qr(x,2,4,"Browser failed write to session storage. "+Sl(L),{exception:Ut(L)})}return!1}a(MIt,"utlSetSessionStorage");function LIt(x,T){var w=ofe();if(w!==null)try{return w[aDe](T),!0}catch(P){v4=!1,qr(x,2,6,"Browser failed removal of session storage item. "+Sl(P),{exception:Ut(P)})}return!1}a(LIt,"utlRemoveSessionStorage");var FIt=";",OIt="=";function sfe(x){if(!x)return{};var T=x[hW](FIt),w=mL(T,function(L,q){var K=q[hW](OIt);if(K[Pi]===2){var le=K[0][Zde](),me=K[1];L[le]=me}return L},{});if(wt(w)[Pi]>0){if(w.endpointsuffix){var P=w.location?w.location+".":"";w[xS]=w[xS]||"https://"+P+"dc."+w.endpointsuffix}w[xS]=w[xS]||Xde,u$(w[xS],"/")&&(w[xS]=w[xS].slice(0,-1))}return w}a(sfe,"parseConnectionString");var QIt=function(){function x(T,w,P){var L=this,q=this;q.ver=1,q.sampleRate=100,q.tags={},q[sI]=Id(T,P)||oI,q.data=w,q.time=nS(new Date),q[xW]={time:1,iKey:1,name:1,sampleRate:a(function(){return L.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return a(x,"Envelope"),x}(),x4=function(){function x(T,w,P,L){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var q=this;q.ver=2,q[sI]=Id(T,w)||oI,q[nC]=ES(T,P),q[kv]=bS(T,L)}return a(x,"Event"),x.envelopeType="Microsoft.ApplicationInsights.{0}.Event",x.dataType="EventData",x}(),UIt=58,qIt=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,HIt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,$It=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,WIt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,jIt=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,GIt=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,VIt=/([^\(\s\n]+):([0-9]+)$/,ADe="<no_method>",E4="error",Lm="stack",afe="stackDetails",yDe="errorSrc",cfe="message",CDe="description",vDe=[{re:HIt,len:5,m:1,fn:2,ln:3,col:4},{chk:KIt,pre:zIt,re:$It,len:4,m:1,fn:2,ln:3},{re:WIt,len:3,m:1,fn:2,hdl:wDe},{re:jIt,len:2,fn:1,hdl:wDe}];function zIt(x){return x.replace(/(\(anonymous\))/,"<anonymous>")}a(zIt,"_scrubAnonymous");function KIt(x){return Mg(x,"[native")<0}a(KIt,"_ignoreNative");function lfe(x,T){var w=x;return w&&!ye(w)&&(JSON&&JSON[efe]?(w=JSON[efe](x),T&&(!w||w==="{}")&&(Qe(x[hF])?w=x[hF]():w=""+x)):w=""+x+" - (Missing JSON.stringify)"),w||""}a(lfe,"_stringify");function xDe(x,T){var w=x;return x&&(w&&!ye(w)&&(w=x[cfe]||x[CDe]||w),w&&!ye(w)&&(w=lfe(w,!0)),x.filename&&(w=w+" @"+(x.filename||"")+":"+(x.lineno||"?")+":"+(x.colno||"?"))),T&&T!=="String"&&T!=="Object"&&T!=="Error"&&Mg(w||"",T)===-1&&(w=T+": "+w),w||""}a(xDe,"_formatMessage");function YIt(x){try{if(we(x))return"hasFullStack"in x&&"typeName"in x}catch{}return!1}a(YIt,"_isExceptionDetailsInternal");function JIt(x){try{if(we(x))return"ver"in x&&"exceptions"in x&&"properties"in x}catch{}return!1}a(JIt,"_isExceptionInternal");function EDe(x){return x&&x.src&&ye(x.src)&&x.obj&&Xe(x.obj)}a(EDe,"_isStackDetails");function IS(x){var T=x||"";ye(T)||(ye(T[Lm])?T=T[Lm]:T=""+T);var w=T[hW](`
`);return{src:T,obj:w}}a(IS,"_convertStackObj");function XIt(x){for(var T=[],w=x[hW](`
`),P=0;P<w[Pi];P++){var L=w[P];w[P+1]&&(L+="@"+w[P+1],P++),T.push(L)}return{src:x,obj:T}}a(XIt,"_getOperaStack");function bDe(x){var T=null;if(x)try{if(x[Lm])T=IS(x[Lm]);else if(x[E4]&&x[E4][Lm])T=IS(x[E4][Lm]);else if(x.exception&&x.exception[Lm])T=IS(x.exception[Lm]);else if(EDe(x))T=x;else if(EDe(x[afe]))T=x[afe];else if(Ks()&&Ks().opera&&x[cfe])T=XIt(x[gW]);else if(x.reason&&x.reason[Lm])T=IS(x.reason[Lm]);else if(ye(x))T=IS(x);else{var w=x[cfe]||x[CDe]||"";ye(x[yDe])&&(w&&(w+=`
`),w+=" from "+x[yDe]),w&&(T=IS(w))}}catch(P){T=IS(P)}return T||{src:"",obj:null}}a(bDe,"_getStackFromErrorObj");function ZIt(x){var T="";return x&&(x.obj?T=x.obj.join(`
`):T=x.src||""),T}a(ZIt,"_formatStackTrace");function eTt(x){var T,w=x.obj;if(w&&w[Pi]>0){T=[];var P=0,L=!1,q=0;Jr(w,function(yt){if(L||iTt(yt)){var at=Ot(yt);L=!0;var _t=oTt(at,P);_t&&(q+=_t[AW],T.push(_t),P++)}});var K=32*1024;if(q>K)for(var le=0,me=T[Pi]-1,Ee=0,ke=le,Ue=me;le<me;){var tt=T[le][AW],$e=T[me][AW];if(Ee+=tt+$e,Ee>K){var Ye=Ue-ke+1;T.splice(ke,Ye);break}ke=le,Ue=me,le++,me--}}return T}a(eTt,"_parseStack");function bW(x){var T="";if(x&&(T=x.typeName||x[sI]||"",!T))try{var w=/function (.{1,200})\(/,P=w.exec(x.constructor[hF]());T=P&&P[Pi]>1?P[1]:""}catch{}return T}a(bW,"_getErrorType");function ufe(x){if(x)try{if(!ye(x)){var T=bW(x),w=lfe(x,!1);return(!w||w==="{}")&&(x[E4]&&(x=x[E4],T=bW(x)),w=lfe(x,!0)),Mg(w,T)!==0&&T!=="String"?T+":"+w:w}}catch{}return""+(x||"")}a(ufe,"_formatErrorCode");var IW=function(){function x(T,w,P,L,q,K){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var le=this;le.ver=2,JIt(w)?(le[AF]=w[AF]||[],le[nC]=w[nC],le[kv]=w[kv],w[yF]&&(le[yF]=w[yF]),w.id&&(le.id=w.id,w[nC].id=w.id),w[rfe]&&(le[rfe]=w[rfe]),ie(w.isManual)||(le.isManual=w.isManual)):(P||(P={}),K&&(P.id=K),le[AF]=[IDe(T,w,P)],le[nC]=ES(T,P),le[kv]=bS(T,L),q&&(le[yF]=q),K&&(le.id=K))}return a(x,"Exception"),x.CreateAutoException=function(T,w,P,L,q,K,le,me){var Ee=bW(q||K||T);return{message:xDe(T,Ee),url:w,lineNumber:P,columnNumber:L,error:ufe(q||K||T),evt:ufe(K||T),typeName:Ee,stackDetails:bDe(le||q||K),errorSrc:me}},x.CreateFromInterface=function(T,w,P,L){var q=w[AF]&&Dg(w[AF],function(le){return nTt(T,le)}),K=new x(T,Fg(Fg({},w),{exceptions:q}),P,L);return K},x.prototype.toInterface=function(){var T=this,w=T.exceptions,P=T.properties,L=T.measurements,q=T.severityLevel,K=T.problemGroup,le=T.id,me=T.isManual,Ee=w instanceof Array&&Dg(w,function(ke){return ke.toInterface()})||void 0;return{ver:"4.0",exceptions:Ee,severityLevel:q,properties:P,measurements:L,problemGroup:K,id:le,isManual:me}},x.CreateSimpleException=function(T,w,P,L,q,K){var le;return{exceptions:[(le={},le[CW]=!0,le.message=T,le.stack=q,le.typeName=w,le)]}},x.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",x.dataType="ExceptionData",x.formatError=ufe,x}(),tTt=er({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function rTt(){var x=this,T=Xe(x[y4])&&Dg(x[y4],function(P){return aTt(P)}),w={id:x.id,outerId:x.outerId,typeName:x[yW],message:x[gW],hasFullStack:x[CW],stack:x[Lm],parsedStack:T||void 0};return w}a(rTt,"_toInterface");function IDe(x,T,w){var P,L,q,K,le,me,Ee,ke;if(YIt(T))K=T[yW],le=T[gW],Ee=T[Lm],ke=T[y4]||[],me=T[CW];else{var Ue=T,tt=Ue&&Ue.evt;Et(Ue)||(Ue=Ue[E4]||tt||Ue),K=Id(x,bW(Ue))||oI,le=lDe(x,xDe(T||Ue,K))||oI;var $e=T[afe]||bDe(T);ke=eTt($e),Xe(ke)&&Dg(ke,function(Ye){Ye[vW]=Id(x,Ye[vW]),Ye[Pv]=Id(x,Ye[Pv])}),Ee=IIt(x,ZIt($e)),me=Xe(ke)&&ke[Pi]>0,w&&(w[yW]=w[yW]||K)}return P={},P[xW]=tTt,P.id=L,P.outerId=q,P.typeName=K,P.message=le,P[CW]=me,P.stack=Ee,P.parsedStack=ke,P.toInterface=rTt,P}a(IDe,"_createExceptionDetails");function nTt(x,T){var w=Xe(T[y4])&&Dg(T[y4],function(L){return sTt(L)})||T[y4],P=IDe(x,Fg(Fg({},T),{parsedStack:w}));return P}a(nTt,"_createExDetailsFromInterface");function TDe(x,T){var w=T[gF](GIt);if(w&&w[Pi]>=4)x[Pv]=w[1],x[C4]=parseInt(w[2]);else{var P=T[gF](VIt);P&&P[Pi]>=3?(x[Pv]=P[1],x[C4]=parseInt(P[2])):x[Pv]=T}}a(TDe,"_parseFilename");function wDe(x,T,w){var P=x[Pv];T.fn&&w&&w[Pi]>T.fn&&(T.ln&&w[Pi]>T.ln?(P=oo(w[T.fn]||""),x[C4]=parseInt(oo(w[T.ln]||""))||0):P=oo(w[T.fn]||"")),P&&TDe(x,P)}a(wDe,"_handleFilename");function iTt(x){var T=!1;if(x&&ye(x)){var w=oo(x);w&&(T=qIt.test(w))}return T}a(iTt,"_isStackFrame");var _De=er({level:1,method:1,assembly:0,fileName:0,line:0});function oTt(x,T){var w,P;if(x&&ye(x)&&oo(x)){P=(w={},w[xW]=_De,w.level=T,w.assembly=oo(x),w.method=ADe,w.fileName="",w.line=0,w.sizeInBytes=0,w);for(var L=0;L<vDe[Pi];){var q=vDe[L];if(q.chk&&!q.chk(x))break;q.pre&&(x=q.pre(x));var K=x[gF](q.re);if(K&&K[Pi]>=q.len){q.m&&(P.method=oo(K[q.m]||ADe)),q.hdl?q.hdl(P,q,K):q.fn&&(q.ln?(P[Pv]=oo(K[q.fn]||""),P[C4]=parseInt(oo(K[q.ln]||""))||0):TDe(P,K[q.fn]||""));break}L++}}return SDe(P)}a(oTt,"_extractStackFrame");function sTt(x){var T,w=(T={},T[xW]=_De,T.level=x.level,T.method=x.method,T.assembly=x[vW],T.fileName=x[Pv],T.line=x[C4],T.sizeInBytes=0,T);return SDe(w)}a(sTt,"_stackFrameFromInterface");function SDe(x){var T=UIt;return x&&(T+=x.method[Pi],T+=x.assembly[Pi],T+=x.fileName[Pi],T+=x.level.toString()[Pi],T+=x.line.toString()[Pi],x[AW]=T),x}a(SDe,"_populateFrameSizeInBytes");function aTt(x){return{level:x.level,method:x.method,assembly:x[vW],fileName:x[Pv],line:x[C4]}}a(aTt,"_parsedFrameToInterface");var cTt=function(){function x(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return a(x,"DataPoint"),x}(),CF=function(){function x(T,w,P,L,q,K,le,me,Ee){this.aiDataContract={ver:1,metrics:1,properties:0};var ke=this;ke.ver=2;var Ue=new cTt;Ue[EIt]=L>0?L:void 0,Ue.max=isNaN(K)||K===null?void 0:K,Ue.min=isNaN(q)||q===null?void 0:q,Ue[sI]=Id(T,w)||oI,Ue.value=P,Ue.stdDev=isNaN(le)||le===null?void 0:le,ke.metrics=[Ue],ke[nC]=ES(T,me),ke[kv]=bS(T,Ee)}return a(x,"Metric"),x.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",x.dataType="MetricData",x}(),vF="";function RDe(x){(isNaN(x)||x<0)&&(x=0),x=ide(x);var T=vF+x%1e3,w=vF+My(x/1e3)%60,P=vF+My(x/(1e3*60))%60,L=vF+My(x/(1e3*60*60))%24,q=My(x/(1e3*60*60*24));return T=T[Pi]===1?"00"+T:T[Pi]===2?"0"+T:T,w=w[Pi]<2?"0"+w:w,P=P[Pi]<2?"0"+P:P,L=L[Pi]<2?"0"+L:L,(q>0?q+".":vF)+L+":"+P+":"+w+"."+T}a(RDe,"msToTimeSpan");var TW=function(){function x(T,w,P,L,q,K,le){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var me=this;me.ver=2,me.id=TIt(T,le),me.url=nfe(T,P),me[sI]=Id(T,w)||oI,isNaN(L)||(me[EW]=RDe(L)),me[nC]=ES(T,q),me[kv]=bS(T,K)}return a(x,"PageView"),x.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",x.dataType="PageviewData",x}(),wW=function(){function x(T,w,P,L,q,K,le,me,Ee,ke,Ue,tt){Ee===void 0&&(Ee="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var $e=this;$e.ver=2,$e.id=w,$e[EW]=RDe(q),$e.success=K,$e.resultCode=le+"",$e.type=Id(T,Ee);var Ye=DIt(T,P,me,L);$e.data=nfe(T,L)||Ye.data,$e.target=Id(T,Ye.target),ke&&($e.target="".concat($e.target," | ").concat(ke)),$e[sI]=Id(T,Ye[sI]),$e[nC]=ES(T,Ue),$e[kv]=bS(T,tt)}return a(x,"RemoteDependencyData"),x.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",x.dataType="RemoteDependencyData",x}(),_W=function(){function x(T,w,P,L,q){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var K=this;K.ver=2,w=w||oI,K[gW]=lDe(T,w),K[nC]=ES(T,L),K[kv]=bS(T,q),P&&(K[yF]=P)}return a(x,"Trace"),x.envelopeType="Microsoft.ApplicationInsights.{0}.Message",x.dataType="MessageData",x}(),SW=function(){function x(T,w,P,L,q,K,le){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var me=this;me.ver=2,me.url=nfe(T,P),me[sI]=Id(T,w)||oI,me[nC]=ES(T,q),me[kv]=bS(T,K),le&&(me.domProcessing=le.domProcessing,me[EW]=le[EW],me.networkConnect=le.networkConnect,me.perfTotal=le.perfTotal,me.receivedResponse=le.receivedResponse,me.sentRequest=le.sentRequest)}return a(x,"PageViewPerformance"),x.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",x.dataType="PageviewPerformanceData",x}(),TS=function(){function x(T,w){this.aiDataContract={baseType:1,baseData:1},this.baseType=T,this.baseData=w}return a(x,"Data"),x}(),lTt=R5({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function aI(x){var T="ai."+x+".";return function(w){return T+w}}a(aI,"_aiNameFunc");var xF=aI("application"),kl=aI("device"),RW=aI("location"),b4=aI("operation"),dfe=aI("session"),cI=aI("user"),wS=aI("cloud"),EF=aI("internal"),kDe=function(x){J_(T,x);function T(){return x.call(this)||this}return a(T,"ContextTagKeys"),T}(vde({applicationVersion:xF("ver"),applicationBuild:xF("build"),applicationTypeId:xF("typeId"),applicationId:xF("applicationId"),applicationLayer:xF("layer"),deviceId:kl("id"),deviceIp:kl("ip"),deviceLanguage:kl("language"),deviceLocale:kl("locale"),deviceModel:kl("model"),deviceFriendlyName:kl("friendlyName"),deviceNetwork:kl("network"),deviceNetworkName:kl("networkName"),deviceOEMName:kl("oemName"),deviceOS:kl("os"),deviceOSVersion:kl("osVersion"),deviceRoleInstance:kl("roleInstance"),deviceRoleName:kl("roleName"),deviceScreenResolution:kl("screenResolution"),deviceType:kl("type"),deviceMachineName:kl("machineName"),deviceVMName:kl("vmName"),deviceBrowser:kl("browser"),deviceBrowserVersion:kl("browserVersion"),locationIp:RW("ip"),locationCountry:RW("country"),locationProvince:RW("province"),locationCity:RW("city"),operationId:b4("id"),operationName:b4("name"),operationParentId:b4("parentId"),operationRootId:b4("rootId"),operationSyntheticSource:b4("syntheticSource"),operationCorrelationVector:b4("correlationVector"),sessionId:dfe("id"),sessionIsFirst:dfe("isFirst"),sessionIsNew:dfe("isNew"),userAccountAcquisitionDate:cI("accountAcquisitionDate"),userAccountId:cI("accountId"),userAgent:cI("userAgent"),userId:cI("id"),userStoreRegion:cI("storeRegion"),userAuthUserId:cI("authUserId"),userAnonymousUserAcquisitionDate:cI("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:cI("authUserAcquisitionDate"),cloudName:wS("name"),cloudRole:wS("role"),cloudRoleVer:wS("roleVer"),cloudRoleInstance:wS("roleInstance"),cloudEnvironment:wS("environment"),cloudLocation:wS("location"),cloudDeploymentUnit:wS("deploymentUnit"),internalNodeName:EF("nodeName"),internalSdkVersion:EF("sdkVersion"),internalAgentVersion:EF("agentVersion"),internalSnippet:EF("snippet"),internalSdkSrc:EF("sdkSrc")})),Yl=new kDe;function PDe(x,T){xIt(x,null,null,T)}a(PDe,"_disableEvents");function uTt(x){var T=Tc(),w=wc(),P=!1,L=[],q=1;w&&!ie(w.onLine)&&!w.onLine&&(q=2);var K=0,le=tt(),me=rDe(Wg("OfflineListener"),x);try{if(ke(Ks())&&(P=!0),T){var Ee=T.body||T;Ee.ononline&&ke(Ee)&&(P=!0)}}catch{P=!1}function ke(ar){var Dr=!1;return ar&&(Dr=nDe(ar,"online",yt,me),Dr&&nDe(ar,"offline",at,me)),Dr}a(ke,"_enableEvents");function Ue(){return le}a(Ue,"_isOnline");function tt(){return!(K===2||q===2)}a(tt,"calCurrentState");function $e(){var ar=tt();le!==ar&&(le=ar,Jr(L,function(Dr){var si={isOnline:le,rState:q,uState:K};try{Dr(si)}catch{}}))}a($e,"listnerNoticeCheck");function Ye(ar){K=ar,$e()}a(Ye,"setOnlineState");function yt(){q=1,$e()}a(yt,"_setOnline");function at(){q=2,$e()}a(at,"_setOffline");function _t(){var ar=Ks();if(ar&&P){if(PDe(ar,me),T){var Dr=T.body||T;j(Dr.ononline)||PDe(Dr,me)}P=!1}}a(_t,"_unload");function Wt(ar){return L.push(ar),{rm:a(function(){var Dr=L.indexOf(ar);if(Dr>-1)return L.splice(Dr,1)},"rm")}}return a(Wt,"addListener"),{isOnline:Ue,isListening:a(function(){return P},"isListening"),unload:_t,addListener:Wt,setOnlineState:Ye}}a(uTt,"createOfflineListener");var dTt="AppInsightsChannelPlugin",_S="duration",Fu="tags",ffe="deviceType",d0="data",Dv="name",bF="traceID",Hi="length",IF="stringify",SS="measurements",iC="dataType",RS="envelopeType",kS="toString",PS="enqueue",DS="count",Bv="push",pfe="emitLineDelimitedJson",I4="clear",kW="markAsSent",TF="clearSent",mfe="bufferOverride",wF="BUFFER_KEY",lI="SENT_BUFFER_KEY",T4="concat",_F="MAX_BUFFER_SIZE",SF="triggerSend",Td="diagLog",hfe="initialize",RF="_sender",kF="endpointUrl",PF="instrumentationKey",gfe="customHeaders",DDe="maxBatchSizeInBytes",Afe="onunloadDisableBeacon",yfe="isBeaconApiDisabled",BDe="alwaysUseXhrOverride",NDe="enableSessionStorageBuffer",oC="_buffer",MDe="onunloadDisableFetch",LDe="disableSendBeaconSplit",PW="getSenderInst",BS="_onError",Cfe="_onPartialSuccess",DW="_onSuccess",vfe="itemsReceived",xfe="itemsAccepted",Efe="baseType",BW="sampleRate",fTt="getHashCodeScore",bfe="baseType",Ta="baseData",Jl="properties",FDe="true";function Pc(x,T,w){return Vy(x,T,w,de)}a(Pc,"_setValueIf");function pTt(x,T,w){var P=w[Fu]=w[Fu]||{},L=T.ext=T.ext||{},q=T[Fu]=T[Fu]||[],K=L.user;K&&(Pc(P,Yl.userAuthUserId,K.authId),Pc(P,Yl.userId,K.id||K.localId));var le=L.app;le&&Pc(P,Yl.sessionId,le.sesId);var me=L.device;me&&(Pc(P,Yl.deviceId,me.id||me.localId),Pc(P,Yl[ffe],me.deviceClass),Pc(P,Yl.deviceIp,me.ip),Pc(P,Yl.deviceModel,me.model),Pc(P,Yl[ffe],me[ffe]));var Ee=T.ext.web;if(Ee){Pc(P,Yl.deviceLanguage,Ee.browserLang),Pc(P,Yl.deviceBrowserVersion,Ee.browserVer),Pc(P,Yl.deviceBrowser,Ee.browser);var ke=w[d0]=w[d0]||{},Ue=ke[Ta]=ke[Ta]||{},tt=Ue[Jl]=Ue[Jl]||{};Pc(tt,"domain",Ee.domain),Pc(tt,"isManual",Ee.isManual?FDe:null),Pc(tt,"screenRes",Ee.screenRes),Pc(tt,"userConsent",Ee.userConsent?FDe:null)}var $e=L.os;$e&&(Pc(P,Yl.deviceOS,$e[Dv]),Pc(P,Yl.deviceOSVersion,$e.osVer));var Ye=L.trace;Ye&&(Pc(P,Yl.operationParentId,Ye.parentID),Pc(P,Yl.operationName,Id(x,Ye[Dv])),Pc(P,Yl.operationId,Ye[bF]));for(var yt={},at=q[Hi]-1;at>=0;at--){var _t=q[at];ue(_t,function(ar,Dr){yt[ar]=Dr}),q.splice(at,1)}ue(q,function(ar,Dr){yt[ar]=Dr});var Wt=Fg(Fg({},P),yt);Wt[Yl.internalSdkVersion]||(Wt[Yl.internalSdkVersion]=Id(x,"javascript:".concat(mTt.Version),64)),w[Fu]=qL(Wt)}a(pTt,"_extractPartAExtensions");function uI(x,T,w){ie(x)||ue(x,function(P,L){ut(L)?w[P]=L:ye(L)?T[P]=L:Qb()&&(T[P]=uf()[IF](L))})}a(uI,"_extractPropsAndMeasurements");function NS(x,T){ie(x)||ue(x,function(w,P){x[w]=P||T})}a(NS,"_convertPropsUndefinedToCustomDefinedValue");function MS(x,T,w,P){var L=new QIt(x,P,T);Pc(L,"sampleRate",w[iDe]),(w[Ta]||{}).startTime&&(L.time=nS(w[Ta].startTime)),L.iKey=w.iKey;var q=w.iKey.replace(/-/g,"");return L[Dv]=L[Dv].replace("{0}",q),pTt(x,w,L),w[Fu]=w[Fu]||[],qL(L)}a(MS,"_createEnvelope");function LS(x,T){ie(T[Ta])&&qr(x,1,46,"telemetryItem.baseData cannot be null.")}a(LS,"EnvelopeCreatorInit");var mTt={Version:"3.3.6"};function hTt(x,T,w){LS(x,T);var P=T[Ta][SS]||{},L=T[Ta][Jl]||{};uI(T[d0],L,P),ie(w)||NS(L,w);var q=T[Ta];if(ie(q))return a4(x,"Invalid input for dependency data"),null;var K=q[Jl]&&q[Jl][oDe]?q[Jl][oDe]:"GET",le=new wW(x,q.id,q.target,q[Dv],q[_S],q.success,q.responseCode,K,q.type,q.correlationContext,L,P),me=new TS(wW[iC],le);return MS(x,wW[RS],T,me)}a(hTt,"DependencyEnvelopeCreator");function ODe(x,T,w){LS(x,T);var P={},L={};T[bfe]!==x4[iC]&&(P.baseTypeSource=T[bfe]),T[bfe]===x4[iC]?(P=T[Ta][Jl]||{},L=T[Ta][SS]||{}):T[Ta]&&uI(T[Ta],P,L),uI(T[d0],P,L),ie(w)||NS(P,w);var q=T[Ta][Dv],K=new x4(x,q,P,L),le=new TS(x4[iC],K);return MS(x,x4[RS],T,le)}a(ODe,"EventEnvelopeCreator");function gTt(x,T,w){LS(x,T);var P=T[Ta][SS]||{},L=T[Ta][Jl]||{};uI(T[d0],L,P),ie(w)||NS(L,w);var q=T[Ta],K=IW.CreateFromInterface(x,q,L,P),le=new TS(IW[iC],K);return MS(x,IW[RS],T,le)}a(gTt,"ExceptionEnvelopeCreator");function ATt(x,T,w){LS(x,T);var P=T[Ta],L=P[Jl]||{},q=P[SS]||{};uI(T[d0],L,q),ie(w)||NS(L,w);var K=new CF(x,P[Dv],P.average,P.sampleCount,P.min,P.max,P.stdDev,L,q),le=new TS(CF[iC],K);return MS(x,CF[RS],T,le)}a(ATt,"MetricEnvelopeCreator");function yTt(x,T,w){LS(x,T);var P,L=T[Ta];!ie(L)&&!ie(L[Jl])&&!ie(L[Jl][_S])?(P=L[Jl][_S],delete L[Jl][_S]):!ie(T[d0])&&!ie(T[d0][_S])&&(P=T[d0][_S],delete T[d0][_S]);var q=T[Ta],K;((T.ext||{}).trace||{})[bF]&&(K=T.ext.trace[bF]);var le=q.id||K,me=q[Dv],Ee=q.uri,ke=q[Jl]||{},Ue=q[SS]||{};if(ie(q.refUri)||(ke.refUri=q.refUri),ie(q.pageType)||(ke.pageType=q.pageType),ie(q.isLoggedIn)||(ke.isLoggedIn=q.isLoggedIn[kS]()),!ie(q[Jl])){var tt=q[Jl];ue(tt,function(yt,at){ke[yt]=at})}uI(T[d0],ke,Ue),ie(w)||NS(ke,w);var $e=new TW(x,me,Ee,P,ke,Ue,le),Ye=new TS(TW[iC],$e);return MS(x,TW[RS],T,Ye)}a(yTt,"PageViewEnvelopeCreator");function CTt(x,T,w){LS(x,T);var P=T[Ta],L=P[Dv],q=P.uri||P.url,K=P[Jl]||{},le=P[SS]||{};uI(T[d0],K,le),ie(w)||NS(K,w);var me=new SW(x,L,q,void 0,K,le,P),Ee=new TS(SW[iC],me);return MS(x,SW[RS],T,Ee)}a(CTt,"PageViewPerformanceEnvelopeCreator");function vTt(x,T,w){LS(x,T);var P=T[Ta].message,L=T[Ta].severityLevel,q=T[Ta][Jl]||{},K=T[Ta][SS]||{};uI(T[d0],q,K),ie(w)||NS(q,w);var le=new _W(x,P,L,q,K),me=new TS(_W[iC],le);return MS(x,_W[RS],T,me)}a(vTt,"TraceEnvelopeCreator");var QDe=function(){function x(T,w){var P=[],L=!1,q=w.maxRetryCnt;this._get=function(){return P},this._set=function(K){return P=K,P},Mu(x,this,function(K){K[PS]=function(le){if(K[DS]()>=w.eventsLimitInMem){L||(qr(T,2,105,"Maximum in-memory buffer size reached: "+K[DS](),!0),L=!0);return}le.cnt=le.cnt||0,!(!ie(q)&&le.cnt>q)&&P[Bv](le)},K[DS]=function(){return P[Hi]},K.size=function(){for(var le=P[Hi],me=0;me<P[Hi];me++)le+=P[me].item[Hi];return w[pfe]||(le+=2),le},K[I4]=function(){P=[],L=!1},K.getItems=function(){return P.slice(0)},K.batchPayloads=function(le){if(le&&le[Hi]>0){var me=[];Jr(le,function(ke){me[Bv](ke.item)});var Ee=w[pfe]?me.join(`
`):"["+me.join(",")+"]";return Ee}return null},K.createNew=function(le,me,Ee){var ke=P.slice(0);le=le||T,me=me||{};var Ue=Ee?new UDe(le,me):new Ife(le,me);return Jr(ke,function(tt){Ue[PS](tt)}),Ue}})}return a(x,"BaseSendBuffer"),x.__ieDyn=1,x}(),Ife=function(x){J_(T,x);function T(w,P){var L=x.call(this,w,P)||this;return Mu(T,L,function(q,K){q[kW]=function(le){K[I4]()},q[TF]=function(le){}}),L}return a(T,"ArraySendBuffer"),T.__ieDyn=1,T}(QDe),xTt=["AI_buffer","AI_sentBuffer"],UDe=function(x){J_(T,x);function T(P,L){var q=x.call(this,P,L)||this,K=!1,le=L?.namePrefix,me=L[mfe]||{getItem:NIt,setItem:MIt},Ee=me.getItem,ke=me.setItem,Ue=L.maxRetryCnt;return Mu(T,q,function(tt,$e){var Ye=Dr(T[wF]),yt=Dr(T[lI]),at=Vi(),_t=yt[T4](at),Wt=tt._set(Ye[T4](_t));Wt[Hi]>T[_F]&&(Wt[Hi]=T[_F]),Gi(T[lI],[]),Gi(T[wF],Wt),tt[PS]=function(Sn){if(tt[DS]()>=T[_F]){K||(qr(P,2,67,"Maximum buffer size reached: "+tt[DS](),!0),K=!0);return}Sn.cnt=Sn.cnt||0,!(!ie(Ue)&&Sn.cnt>Ue)&&($e[PS](Sn),Gi(T[wF],tt._get()))},tt[I4]=function(){$e[I4](),Gi(T[wF],tt._get()),Gi(T[lI],[]),K=!1},tt[kW]=function(Sn){Gi(T[wF],tt._set(ar(Sn,tt._get())));var nn=Dr(T[lI]);nn instanceof Array&&Sn instanceof Array&&(nn=nn[T4](Sn),nn[Hi]>T[_F]&&(qr(P,1,67,"Sent buffer reached its maximum size: "+nn[Hi],!0),nn[Hi]=T[_F]),Gi(T[lI],nn))},tt[TF]=function(Sn){var nn=Dr(T[lI]);nn=ar(Sn,nn),Gi(T[lI],nn)},tt.createNew=function(Sn,nn,zi){zi=!!zi;var wa=tt._get().slice(0),_s=Dr(T[lI]).slice(0);Sn=Sn||P,nn=nn||{},tt[I4]();var jt=zi?new T(Sn,nn):new Ife(Sn,nn);return Jr(wa,function(on){jt[PS](on)}),zi&&jt[kW](_s),jt};function ar(Sn,nn){var zi=[],wa=[];return Jr(Sn,function(_s){wa[Bv](_s.item)}),Jr(nn,function(_s){!Qe(_s)&&_c(wa,_s.item)===-1&&zi[Bv](_s)}),zi}a(ar,"_removePayloadsFromBuffer");function Dr(Sn){var nn=Sn;return nn=le?le+"_"+nn:nn,si(nn)}a(Dr,"_getBuffer");function si(Sn){try{var nn=Ee(P,Sn);if(nn){var zi=uf().parse(nn);if(ye(zi)&&(zi=uf().parse(zi)),zi&&Xe(zi))return zi}}catch(wa){qr(P,1,42," storage key: "+Sn+", "+Sl(wa),{exception:Ut(wa)})}return[]}a(si,"_getBufferBase");function Gi(Sn,nn){var zi=Sn;try{zi=le?le+"_"+zi:zi;var wa=JSON[IF](nn);ke(P,zi,wa)}catch(_s){ke(P,zi,JSON[IF]([])),qr(P,2,41," storage key: "+zi+", "+Sl(_s)+". Buffer cleared",{exception:Ut(_s)})}}a(Gi,"_setBuffer");function Vi(){var Sn=[];try{return Jr(xTt,function(nn){var zi=Ko(nn);if(Sn=Sn[T4](zi),le){var wa=le+"_"+nn,_s=Ko(wa);Sn=Sn[T4](_s)}}),Sn}catch(nn){qr(P,2,41,"Transfer events from previous buffers: "+Sl(nn)+". previous Buffer items can not be removed",{exception:Ut(nn)})}return[]}a(Vi,"_getPreviousEvents");function Ko(Sn){try{var nn=si(Sn),zi=[];return Jr(nn,function(wa){var _s={item:wa,cnt:0};zi[Bv](_s)}),LIt(P,Sn),zi}catch{}return[]}a(Ko,"_getItemsFromPreviousKey")}),q}a(T,"SessionStorageSendBuffer");var w;return w=T,T.VERSION="_1",T.BUFFER_KEY="AI_buffer"+w.VERSION,T.SENT_BUFFER_KEY="AI_sentBuffer"+w.VERSION,T.MAX_BUFFER_SIZE=2e3,T}(QDe),ETt=function(){function x(T){Mu(x,this,function(w){w.serialize=function(K){var le=P(K,"root");try{return uf()[IF](le)}catch(me){qr(T,1,48,me&&Qe(me[kS])?me[kS]():"Error serializing object",null,!0)}};function P(K,le){var me="__aiCircularRefCheck",Ee={};if(!K)return qr(T,1,48,"cannot serialize object because it is null or undefined",{name:le},!0),Ee;if(K[me])return qr(T,2,50,"Circular reference detected while serializing object",{name:le},!0),Ee;if(!K.aiDataContract){if(le==="measurements")Ee=q(K,"number",le);else if(le==="properties")Ee=q(K,"string",le);else if(le==="tags")Ee=q(K,"string",le);else if(Xe(K))Ee=L(K,le);else{qr(T,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:le},!0);try{uf()[IF](K),Ee=K}catch(ke){qr(T,1,48,ke&&Qe(ke[kS])?ke[kS]():"Error serializing object",null,!0)}}return Ee}return K[me]=!0,ue(K.aiDataContract,function(ke,Ue){var tt=Qe(Ue)?Ue()&1:Ue&1,$e=Qe(Ue)?Ue()&4:Ue&4,Ye=Ue&2,yt=K[ke]!==void 0,at=we(K[ke])&&K[ke]!==null;if(tt&&!yt&&!Ye)qr(T,1,24,"Missing required field specification. The field is required but not present on source",{field:ke,name:le});else if(!$e){var _t=void 0;at?Ye?_t=L(K[ke],ke):_t=P(K[ke],ke):_t=K[ke],_t!==void 0&&(Ee[ke]=_t)}}),delete K[me],Ee}a(P,"_serializeObject");function L(K,le){var me;if(K)if(!Xe(K))qr(T,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:le},!0);else{me=[];for(var Ee=0;Ee<K[Hi];Ee++){var ke=K[Ee],Ue=P(ke,le+"["+Ee+"]");me[Bv](Ue)}}return me}a(L,"_serializeArray");function q(K,le,me){var Ee;return K&&(Ee={},ue(K,function(ke,Ue){if(le==="string")Ue===void 0?Ee[ke]="undefined":Ue===null?Ee[ke]="null":Ue[kS]?Ee[ke]=Ue[kS]():Ee[ke]="invalid field: toString() is not defined.";else if(le==="number")if(Ue===void 0)Ee[ke]="undefined";else if(Ue===null)Ee[ke]="null";else{var tt=parseFloat(Ue);Ee[ke]=tt}else Ee[ke]="invalid field: "+me+" is of unknown type.",qr(T,1,Ee[ke],null,!0)})),Ee}a(q,"_serializeStringMap")})}return a(x,"Serializer"),x.__ieDyn=1,x}(),bTt=8,ITt=function(){function x(){}return a(x,"HashCodeScoreGenerator"),x.prototype.getHashCodeScore=function(T){var w=this.getHashCode(T)/x.INT_MAX_VALUE;return w*100},x.prototype.getHashCode=function(T){if(T==="")return 0;for(;T[Hi]<bTt;)T=T[T4](T);for(var w=5381,P=0;P<T[Hi];++P)w=(w<<5)+w+T.charCodeAt(P),w=w&w;return Math.abs(w)},x.INT_MAX_VALUE=2147483647,x}(),TTt=function(){function x(){var T=this,w=new ITt,P=new kDe;T.getSamplingScore=function(L){var q=0;return L[Fu]&&L[Fu][P.userId]?q=w.getHashCodeScore(L[Fu][P.userId]):L.ext&&L.ext.user&&L.ext.user.id?q=w[fTt](L.ext.user.id):L[Fu]&&L[Fu][P.operationId]?q=w.getHashCodeScore(L[Fu][P.operationId]):L.ext&&L.ext.telemetryTrace&&L.ext.telemetryTrace[bF]?q=w.getHashCodeScore(L.ext.telemetryTrace[bF]):q=Math.random()*100,q}}return a(x,"SamplingScoreGenerator"),x}(),wTt=function(){function x(T,w){this.INT_MAX_VALUE=2147483647;var P=w||mS(null);(T>100||T<0)&&(P.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:T},!0),T=100),this[BW]=T,this.samplingScoreGenerator=new TTt}return a(x,"Sample"),x.prototype.isSampledIn=function(T){var w=this[BW],P=!1;return w==null||w>=100||T.baseType===CF[iC]?!0:(P=this.samplingScoreGenerator.getSamplingScore(T)<w,P)},x}(),Ys,Nv,sC=void 0,qDe="",_Tt=65e3;function HDe(x){try{return x.responseText}catch{}return null}a(HDe,"_getResponseText");function STt(x){return x&&x.sendPOST}a(STt,"isOverrideFn");var $De=sr((Ys={endpointUrl:tF(de,Xde+A4)},Ys[pfe]=Bm(),Ys.maxBatchInterval=15e3,Ys[DDe]=102400,Ys.disableTelemetry=Bm(),Ys[NDe]=Bm(!0),Ys.isRetryDisabled=Bm(),Ys[yfe]=Bm(!0),Ys[LDe]=Bm(!0),Ys.disableXhr=Bm(),Ys[MDe]=Bm(),Ys[Afe]=Bm(),Ys[PF]=sC,Ys.namePrefix=sC,Ys.samplingPercentage=tF(RTt,100),Ys[gfe]=sC,Ys.convertUndefined=sC,Ys.eventsLimitInMem=1e4,Ys[mfe]=!1,Ys.httpXHROverride={isVal:STt,v:sC},Ys[BDe]=Bm(),Ys.transports=sC,Ys.retryCodes=sC,Ys.maxRetryCnt={isVal:ut,v:10},Ys));function RTt(x){return!isNaN(x)&&x>0&&x<=100}a(RTt,"_chkSampling");var kTt=(Nv={},Nv[x4.dataType]=ODe,Nv[_W.dataType]=vTt,Nv[TW.dataType]=yTt,Nv[SW.dataType]=CTt,Nv[IW.dataType]=gTt,Nv[CF.dataType]=ATt,Nv[wW.dataType]=hTt,Nv),WDe=function(x){J_(T,x);function T(){var w=x.call(this)||this;w.priority=1001,w.identifier=dTt;var P,L,q,K,le,me,Ee,ke=0,Ue,tt,$e,Ye,yt,at,_t,Wt,ar,Dr,si,Gi,Vi,Ko,Sn,nn,zi,wa,_s,jt,on,Qo,Bt,qn,Ga,Yo,Xl;return Mu(T,w,function(pt,Xc){GDe(),pt.pause=function(){mI(),q=!0},pt.resume=function(){q&&(q=!1,L=null,as(),R4())},pt.flush=function(ze,Tt,mr){if(ze===void 0&&(ze=!0),!q){mI();try{return pt[SF](ze,null,mr||1)}catch(Vr){qr(pt[Td](),1,22,"flush failed, telemetry will not be collected: "+Sl(Vr),{exception:Ut(Vr)})}}},pt.onunloadFlush=function(){if(!q)if(_t||jt)try{return pt[SF](!0,ip,2)}catch(ze){qr(pt[Td](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Sl(ze),{exception:Ut(ze)})}else pt.flush(!1)},pt.addHeader=function(ze,Tt){Ee[ze]=Tt},pt[hfe]=function(ze,Tt,mr,Vr){pt.isInitialized()&&qr(pt[Td](),1,28,"Sender is already initialized"),Xc[hfe](ze,Tt,mr,Vr);var zn=pt.identifier;le=new ETt(Tt.logger),P=0,L=null,pt[RF]=null,me=0;var Pn=pt[Td]();$e=rDe(Wg("Sender"),Tt.evtNamespace&&Tt.evtNamespace()),tt=uTt($e),pt._addHook(jg(ze,function(To){var Dc=To.cfg;Dc.storagePrefix&&BIt(Dc.storagePrefix);var f0=rI(null,Dc,Tt),Si=f0.getExtCfg(zn,$De),VDe=Si[kF];if(Ye&&VDe===Ye){var _fe=Dc[kF];_fe&&_fe!==VDe&&(Si[kF]=_fe)}At(Si[PF])&&(Si[PF]=Dc[PF]),Ge(pt,"_senderConfig",{g:a(function(){return Si},"g")}),yt!==Si[kF]&&(Ye=yt=Si[kF]),Tt.activeStatus()===Uy.PENDING?pt.pause():Tt.activeStatus()===Uy.ACTIVE&&pt.resume(),Dr&&Dr!==Si[gfe]&&Jr(Dr,function(Qu){delete Ee[Qu.header]}),at=Si[DDe],_t=(Si[Afe]===!1||Si[yfe]===!1)&&Ky(),Wt=Si[Afe]===!1&&Ky(),ar=Si[yfe]===!1&&Ky(),jt=Si[BDe],on=!!Si.disableXhr,Xl=Si.retryCodes;var Sfe=Si[mfe],k4=!!Si[NDe]&&(!!Sfe||gDe()),zDe=Si.namePrefix,NTt=k4!==nn||k4&&wa!==zDe||k4&&zi!==Sfe;if(pt[oC]){if(NTt)try{pt[oC]=pt[oC].createNew(Pn,Si,k4)}catch(Qu){qr(pt[Td](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Sl(Qu),{exception:Ut(Qu)})}as()}else pt[oC]=k4?new UDe(Pn,Si):new Ife(Pn,Si);wa=zDe,nn=k4,zi=Sfe,Qo=!Si[MDe]&&lS(!0),Ga=!!Si[LDe],pt._sample=new wTt(Si.samplingPercentage,Pn),Gi=Si[PF],!At(Gi)&&!jDe(Gi,Dc)&&qr(Pn,1,100,"Invalid Instrumentation key "+Gi),Dr=Si[gfe],ye(Ye)&&!pDe(Ye)&&Dr&&Dr[Hi]>0?Jr(Dr,function(Qu){w.addHeader(Qu.header,Qu.value)}):Dr=null,_s=Si.enableSendPromise;var KDe=Zl();Yo?Yo.SetConfig(KDe):(Yo=new Jc,Yo[hfe](KDe,Pn));var FW=Si.httpXHROverride,OW=null,MF=null,MTt=D$([3,1,2],Si.transports);OW=Yo&&Yo[PW](MTt,!1);var Rfe=Yo&&Yo.getFallbackInst();Bt=a(function(Qu,FS){return Zr(Rfe,Qu,FS)},"_xhrSend"),qn=a(function(Qu,FS){return Zr(Rfe,Qu,FS,!1)},"_fallbackSend"),OW=jt?FW:OW||FW||Rfe,pt[RF]=function(Qu,FS){return Zr(OW,Qu,FS)},Qo&&(Ue=S4);var kfe=D$([3,1],Si.unloadTransports);Qo||(kfe=kfe.filter(function(Qu){return Qu!==2})),MF=Yo&&Yo[PW](kfe,!0),MF=jt?FW:MF||FW,(jt||Si.unloadTransports||!Ue)&&MF&&(Ue=a(function(Qu,FS){return Zr(MF,Qu,FS)},"_syncUnloadSender")),Ue||(Ue=Bt),si=Si.disableTelemetry,Vi=Si.convertUndefined||sC,Ko=Si.isRetryDisabled,Sn=Si.maxBatchInterval}))},pt.processTelemetry=function(ze,Tt){Tt=pt._getTelCtx(Tt);var mr=Tt[Td]();try{var Vr=zg(ze,mr);if(!Vr)return;var zn=pI(ze,mr);if(!zn)return;var Pn=le.serialize(zn),To=pt[oC];as(Pn);var Dc={item:Pn,cnt:0};To[PS](Dc),R4()}catch(f0){qr(mr,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Sl(f0),{exception:Ut(f0)})}pt.processNext(ze,Tt)},pt.isCompletelyIdle=function(){return!q&&ke===0&&pt._buffer[DS]()===0},pt.getOfflineListener=function(){return tt},pt._xhrReadyStateChange=function(ze,Tt,mr){if(!Yg(Tt))return Fm(ze,Tt,mr)},pt[SF]=function(ze,Tt,mr){ze===void 0&&(ze=!0);var Vr;if(!q)try{var zn=pt[oC];if(si)zn[I4]();else if(zn[DS]()>0){var Pn=zn.getItems();LW(mr||0,ze),Tt?Vr=Tt.call(pt,Pn,ze):Vr=pt[RF](Pn,ze)}mI()}catch(Dc){var To=Ub();(!To||To>9)&&qr(pt[Td](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Sl(Dc),{exception:Ut(Dc)})}return Vr},pt.getOfflineSupport=function(){return{getUrl:a(function(){return Ye},"getUrl"),createPayload:vt,serialize:_a,batch:Ou,shouldProcess:a(function(ze){return!!zg(ze)},"shouldProcess")}},pt._doTeardown=function(ze,Tt){pt.onunloadFlush(),zb(tt,!1),GDe()},pt[BS]=function(ze,Tt,mr){if(!Yg(ze))return ff(ze,Tt)},pt[Cfe]=function(ze,Tt){if(!Yg(ze))return dI(ze,Tt)},pt[DW]=function(ze,Tt){if(!Yg(ze))return Vg(ze)},pt._xdrOnLoad=function(ze,Tt){if(!Yg(Tt))return Va(ze,Tt)};function Va(ze,Tt){var mr=HDe(ze);if(ze&&(mr+""=="200"||mr===""))P=0,pt[DW](Tt,0);else{var Vr=Xr(mr);Vr&&Vr[vfe]&&Vr[vfe]>Vr[xfe]&&!Ko?pt[Cfe](Tt,Vr):pt[BS](Tt,P$(ze))}}a(Va,"_xdrOnLoad");function Zl(){try{var ze={xdrOnComplete:a(function(mr,Vr,zn){var Pn=fI(zn);if(Pn)return Va(mr,Pn)},"xdrOnComplete"),fetchOnComplete:a(function(mr,Vr,zn,Pn){var To=fI(Pn);if(To)return Js(mr.status,To,mr.url,To[Hi],mr.statusText,zn||"")},"fetchOnComplete"),xhrOnComplete:a(function(mr,Vr,zn){var Pn=fI(zn);if(Pn)return Fm(mr,Pn,Pn[Hi])},"xhrOnComplete"),beaconOnRetry:a(function(mr,Vr,zn){return Kg(mr,Vr,zn)},"beaconOnRetry")},Tt={enableSendPromise:_s,isOneDs:!1,disableCredentials:!1,disableXhr:on,disableBeacon:!ar,disableBeaconSync:!Wt,senderOnCompleteCallBack:ze};return Tt}catch{}return null}a(Zl,"_getSendPostMgrConfig");function Fm(ze,Tt,mr){ze.readyState===4&&Js(ze.status,Tt,ze.responseURL,mr,Y5(ze),HDe(ze)||ze.response)}a(Fm,"_xhrReadyStateChange");function ff(ze,Tt,mr){qr(pt[Td](),2,26,"Failed to send telemetry.",{message:Tt}),pt._buffer&&pt._buffer[TF](ze)}a(ff,"_onError");function dI(ze,Tt){for(var mr=[],Vr=[],zn=Tt.errors.reverse(),Pn=0,To=zn;Pn<To.length;Pn++){var Dc=To[Pn],f0=ze.splice(Dc.index,1)[0];hI(Dc.statusCode)?Vr[Bv](f0):mr[Bv](f0)}ze[Hi]>0&&pt[DW](ze,Tt[xfe]),mr[Hi]>0&&pt[BS](mr,Y5(null,["partial success",Tt[xfe],"of",Tt.itemsReceived].join(" "))),Vr[Hi]>0&&(NF(Vr),qr(pt[Td](),2,40,"Partial success. Delivered: "+ze[Hi]+", Failed: "+mr[Hi]+". Will retry to send "+Vr[Hi]+" our of "+Tt[vfe]+" items"))}a(dI,"_onPartialSuccess");function Vg(ze,Tt){pt._buffer&&pt._buffer[TF](ze)}a(Vg,"_onSuccess");function fI(ze){try{if(ze){var Tt=ze,mr=Tt.oriPayload;return mr&&mr[Hi]?mr:null}}catch{}return null}a(fI,"_getPayloadArr");function zg(ze,Tt){if(si)return!1;if(!ze)return Tt&&qr(Tt,1,7,"Cannot send empty telemetry"),!1;if(ze.baseData&&!ze[Efe])return Tt&&qr(Tt,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(ze[Efe]||(ze[Efe]="EventData"),!pt[RF])return Tt&&qr(Tt,1,28,"Sender was not initialized"),!1;if(_r(ze))ze[iDe]=pt._sample[BW];else return Tt&&qr(Tt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:pt._sample[BW]}),!1;return!0}a(zg,"_validate");function pI(ze,Tt){var mr=ze.iKey||Gi,Vr=T.constructEnvelope(ze,mr,Tt,Vi);if(!Vr){qr(Tt,1,47,"Unable to create an AppInsights envelope");return}var zn=!1;if(ze[Fu]&&ze[Fu][Jde]&&(Jr(ze[Fu][Jde],function(Pn){try{Pn&&Pn(Vr)===!1&&(zn=!0,a4(Tt,"Telemetry processor check returns false"))}catch(To){qr(Tt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Sl(To),{exception:Ut(To)},!0)}}),delete ze[Fu][Jde]),!zn)return Vr}a(pI,"_getEnvelope");function _a(ze){var Tt=qDe,mr=pt[Td]();try{var Vr=zg(ze,mr),zn=null;Vr&&(zn=pI(ze,mr)),zn&&(Tt=le.serialize(zn))}catch{}return Tt}a(_a,"_serialize");function Ou(ze){var Tt=qDe;return ze&&ze[Hi]&&(Tt="["+ze.join(",")+"]"),Tt}a(Ou,"_batch");function vt(ze){var Tt=ts();return{urlString:Ye,data:ze,headers:Tt}}a(vt,"_createPayload");function _r(ze){return pt._sample.isSampledIn(ze)}a(_r,"_isSampledIn");function Gn(ze,Tt,mr,Vr){Tt===200&&ze?pt._onSuccess(ze,ze[Hi]):Vr&&pt[BS](ze,Vr)}a(Gn,"_getOnComplete");function Zr(ze,Tt,mr,Vr){Vr===void 0&&(Vr=!0);var zn=a(function(Dc,f0,Si){return Gn(Tt,Dc,f0,Si)},"onComplete"),Pn=Vn(Tt),To=ze&&ze.sendPOST;return To&&Pn?(Vr&&pt._buffer[kW](Tt),To(Pn,zn,!mr)):null}a(Zr,"_doSend");function Vn(ze){if(Xe(ze)&&ze[Hi]>0){var Tt=pt[oC].batchPayloads(ze),mr=ts(),Vr={data:Tt,urlString:Ye,headers:mr,disableXhrSync:on,disableFetchKeepAlive:!Qo,oriPayload:ze};return Vr}return null}a(Vn,"_getPayload");function ts(){try{var ze=Ee||{};return pDe(Ye)&&(ze[sDe[6]]=sDe[7]),ze}catch{}return null}a(ts,"_getHeaders");function as(ze){var Tt=ze?ze[Hi]:0;return pt[oC].size()+Tt>at?((!tt||tt.isOnline())&&pt[SF](!0,null,10),!0):!1}a(as,"_checkMaxSize");function Js(ze,Tt,mr,Vr,zn,Pn){var To=null;if(pt._appId||(To=Xr(Pn),To&&To.appId&&(pt._appId=To.appId)),(ze<200||ze>=300)&&ze!==0){if((ze===301||ze===307||ze===308)&&!wd(mr)){pt[BS](Tt,zn);return}if(tt&&!tt.isOnline()){if(!Ko){var Dc=10;NF(Tt,Dc),qr(pt[Td](),2,40,". Offline - Response Code: ".concat(ze,". Offline status: ").concat(!tt.isOnline(),". Will retry to send ").concat(Tt.length," items."))}return}!Ko&&hI(ze)?(NF(Tt),qr(pt[Td](),2,40,". Response code "+ze+". Will retry to send "+Tt[Hi]+" items.")):pt[BS](Tt,zn)}else wd(mr),ze===206?(To||(To=Xr(Pn)),To&&!Ko?pt[Cfe](Tt,To):pt[BS](Tt,zn)):(P=0,pt[DW](Tt,Vr))}a(Js,"_checkResponsStatus");function wd(ze){return me>=10?!1:!ie(ze)&&ze!==""&&ze!==Ye?(Ye=ze,++me,!0):!1}a(wd,"_checkAndUpdateEndPointUrl");function ip(ze,Tt){if(Ue)Ue(ze,!1);else{var mr=Yo&&Yo[PW]([3],!0);return Zr(mr,ze,Tt)}}a(ip,"_doUnloadSend");function Kg(ze,Tt,mr){var Vr=ze,zn=Vr&&Vr.oriPayload;if(Ga)qn&&qn(zn,!0),qr(pt[Td](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var Pn=[],To=0;To<zn[Hi];To++){var Dc=zn[To],f0=[Dc],Si=Vn(f0);mr(Si,Tt)?pt._onSuccess(f0,f0[Hi]):Pn[Bv](Dc)}Pn[Hi]>0&&(qn&&qn(Pn,!0),qr(pt[Td](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}a(Kg,"_onBeaconRetry");function Yg(ze){try{if(ze&&ze[Hi])return ye(ze[0])}catch{}return null}a(Yg,"_isStringArr");function S4(ze,Tt){var mr=null;if(Xe(ze)){for(var Vr=ze[Hi],zn=0;zn<ze[Hi];zn++)Vr+=ze[zn].item[Hi];var Pn=Yo.getSyncFetchPayload();Pn+Vr<=_Tt?mr=2:Ky()?mr=3:(mr=1,qr(pt[Td](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var To=Yo&&Yo[PW]([mr],!0);return Zr(To,ze,Tt)}return null}a(S4,"_fetchKeepAliveSender");function NF(ze,Tt){if(Tt===void 0&&(Tt=1),!(!ze||ze[Hi]===0)){var mr=pt[oC];mr[TF](ze),P++;for(var Vr=0,zn=ze;Vr<zn.length;Vr++){var Pn=zn[Vr];Pn.cnt=Pn.cnt||0,Pn.cnt++,mr[PS](Pn)}wfe(Tt),R4()}}a(NF,"_resendPayload");function wfe(ze){var Tt=10,mr;if(P<=1)mr=Tt;else{var Vr=(Math.pow(2,P)-1)/2,zn=My(Math.random()*Vr*Tt)+1;zn=ze*zn,mr=De(Xn(zn,3600),Tt)}var Pn=xd()+mr*1e3;L=Pn}a(wfe,"_setRetryTime");function R4(){if(!K&&!q){var ze=L?De(0,L-xd()):0,Tt=De(Sn,ze);K=Fy(function(){K=null,pt[SF](!0,null,1)},Tt)}}a(R4,"_setupTimer");function mI(){K&&K.cancel(),K=null,L=null}a(mI,"_clearScheduledTimer");function hI(ze){return ie(Xl)?ze===401||ze===408||ze===429||ze===500||ze===502||ze===503||ze===504:Xl[Hi]&&Xl.indexOf(ze)>-1}a(hI,"_isRetriable");function MW(){var ze="getNotifyMgr";return pt.core[ze]?pt.core[ze]():pt.core._notificationManager}a(MW,"_getNotifyMgr");function LW(ze,Tt){var mr=MW();if(mr&&mr.eventsSendRequest)try{mr.eventsSendRequest(ze,Tt)}catch(Vr){qr(pt[Td](),1,74,"send request notification failed: "+Sl(Vr),{exception:Ut(Vr)})}}a(LW,"_notifySendRequest");function jDe(ze,Tt){var mr=Tt.disableInstrumentationKeyValidation,Vr=ie(mr)?!1:mr;if(Vr)return!0;var zn="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Pn=new RegExp(zn);return Pn.test(ze)}a(jDe,"_validateInstrumentationKey");function GDe(){pt[RF]=null,pt[oC]=null,pt._appId=null,pt._sample=null,Ee={},tt=null,P=0,L=null,q=!1,K=null,le=null,me=0,ke=0,Ue=null,$e=null,Ye=null,yt=null,at=0,_t=!1,Dr=null,si=!1,Gi=null,Vi=sC,Ko=!1,nn=null,wa=sC,on=!1,Qo=!1,Ga=!1,Bt=null,qn=null,Yo=null,Ge(pt,"_senderConfig",{g:a(function(){return k$({},$De)},"g")})}a(GDe,"_initDefaults")}),w}return a(T,"Sender"),T.constructEnvelope=function(w,P,L,q){var K;P!==w.iKey&&!ie(P)?K=Fg(Fg({},w),{iKey:P}):K=w;var le=kTt[K.baseType]||ODe;return le(L,K,q)},T}(bt),w4="instrumentationKey",NW="connectionString",DF="endpointUrl",BF="userOverrideEndpointUrl",_4,Tfe=void 0,PTt=(_4={diagnosticLogInterval:tF(DTt,1e4)},_4[NW]=Tfe,_4.endpointUrl=Tfe,_4[w4]=Tfe,_4.extensionConfig={},_4);function DTt(x){return x&&x>0}a(DTt,"_chkDiagLevel");var BTt=function(){function x(T){var w=new Mt,P;(ie(T)||ie(T[w4])&&ie(T[NW]))&&Kr("Invalid input configuration"),Mu(x,this,function(q){Ge(q,"config",{g:a(function(){return P},"g")}),K(),q.initialize=K,q.track=L,UL(q,w,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function K(){var le=np(T||{},PTt);P=le.cfg,w.addUnloadHook(jg(le,function(){var me=P[NW];if(At(me)){var Ee=q5(function($e,Ye){Xf(me,function(yt){var at=yt.value,_t=P[w4];if(!yt.rejected&&at){P[NW]=at;var Wt=sfe(at);_t=Wt.instrumentationkey||_t}$e(_t)})}),ke=q5(function($e,Ye){Xf(me,function(yt){var at=yt.value,_t=P[DF];if(!yt.rejected&&at){var Wt=sfe(at),ar=Wt.ingestionendpoint;_t=ar?ar+A4:_t}$e(_t)})});P[w4]=Ee,P[DF]=P[BF]||ke}if(ye(me)){var Ue=sfe(me),tt=Ue.ingestionendpoint;P[DF]=P[BF]?P[BF]:tt+A4,P[w4]=Ue.instrumentationkey||P[w4]}P[DF]=P[BF]?P[BF]:P[DF]})),w.initialize(P,[new WDe])}a(K,"_initialize")});function L(q){q&&(q.baseData=q.baseData||{},q.baseType=q.baseType||"EventData"),w.track(q)}a(L,"_track")}return a(x,"ApplicationInsights"),x.__ieDyn=1,x}();t.AppInsightsCore=Mt,t.ApplicationInsights=BTt,t.Sender=WDe,t.SeverityLevel=lTt,t.arrForEach=Jr,t.isNullOrUndefined=ie,t.proxyFunctions=UL,t.throwError=Kr})});var iOe=$(_V=>{"use strict";f();Object.defineProperty(_V,"__esModule",{value:!0});_V.state=void 0;_V.state={instrumenterImplementation:void 0}});var iB=$((wge,KOe)=>{f();var vz=require("buffer"),PC=vz.Buffer;function zOe(t,e){for(var r in t)e[r]=t[r]}a(zOe,"copyProps");PC.from&&PC.alloc&&PC.allocUnsafe&&PC.allocUnsafeSlow?KOe.exports=vz:(zOe(vz,wge),wge.Buffer=Z2);function Z2(t,e,r){return PC(t,e,r)}a(Z2,"SafeBuffer");Z2.prototype=Object.create(PC.prototype);zOe(PC,Z2);Z2.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return PC(t,e,r)};Z2.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=PC(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Z2.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return PC(t)};Z2.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return vz.SlowBuffer(t)}});var _ge=$((Lan,YOe)=>{f();var xz=iB().Buffer,FBt=require("stream"),OBt=require("util");function Ez(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=xz.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=xz.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}a(Ez,"DataStream");OBt.inherits(Ez,FBt);Ez.prototype.write=a(function(e){this.buffer=xz.concat([this.buffer,xz.from(e)]),this.emit("data",e)},"write");Ez.prototype.end=a(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");YOe.exports=Ez});var XOe=$((Qan,JOe)=>{"use strict";f();function Sge(t){var e=(t/8|0)+(t%8===0?0:1);return e}a(Sge,"getParamSize");var QBt={ES256:Sge(256),ES384:Sge(384),ES512:Sge(521)};function UBt(t){var e=QBt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}a(UBt,"getParamBytesForAlg");JOe.exports=UBt});var o7e=$((Han,i7e)=>{"use strict";f();var bz=iB().Buffer,e7e=XOe(),Iz=128,t7e=0,qBt=32,HBt=16,$Bt=2,r7e=HBt|qBt|t7e<<6,Tz=$Bt|t7e<<6;function WBt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}a(WBt,"base64Url");function n7e(t){if(bz.isBuffer(t))return t;if(typeof t=="string")return bz.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}a(n7e,"signatureAsBuffer");function jBt(t,e){t=n7e(t);var r=e7e(e),n=r+1,o=t.length,s=0;if(t[s++]!==r7e)throw new Error('Could not find expected "seq"');var c=t[s++];if(c===(Iz|1)&&(c=t[s++]),o-s<c)throw new Error('"seq" specified length of "'+c+'", only "'+(o-s)+'" remaining');if(t[s++]!==Tz)throw new Error('Could not find expected "int" for "r"');var l=t[s++];if(o-s-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(o-s-2)+'" available');if(n<l)throw new Error('"r" specified length of "'+l+'", max of "'+n+'" is acceptable');var u=s;if(s+=l,t[s++]!==Tz)throw new Error('Could not find expected "int" for "s"');var d=t[s++];if(o-s!==d)throw new Error('"s" specified length of "'+d+'", expected "'+(o-s)+'"');if(n<d)throw new Error('"s" specified length of "'+d+'", max of "'+n+'" is acceptable');var p=s;if(s+=d,s!==o)throw new Error('Expected to consume entire buffer, but "'+(o-s)+'" bytes remain');var m=r-l,h=r-d,g=bz.allocUnsafe(m+l+h+d);for(s=0;s<m;++s)g[s]=0;t.copy(g,s,u+Math.max(-m,0),u+l),s=r;for(var A=s;s<A+h;++s)g[s]=0;return t.copy(g,s,p+Math.max(-h,0),p+d),g=g.toString("base64"),g=WBt(g),g}a(jBt,"derToJose");function ZOe(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var o=t[e+n]>=Iz;return o&&--n,n}a(ZOe,"countPadding");function GBt(t,e){t=n7e(t);var r=e7e(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var o=ZOe(t,0,r),s=ZOe(t,r,t.length),c=r-o,l=r-s,u=2+c+1+1+l,d=u<Iz,p=bz.allocUnsafe((d?2:3)+u),m=0;return p[m++]=r7e,d?p[m++]=u:(p[m++]=Iz|1,p[m++]=u&255),p[m++]=Tz,p[m++]=c,o<0?(p[m++]=0,m+=t.copy(p,m,0,r)):m+=t.copy(p,m,o,r),p[m++]=Tz,p[m++]=l,s<0?(p[m++]=0,t.copy(p,m,r)):t.copy(p,m,r+s),p}a(GBt,"joseToDer");i7e.exports={derToJose:jBt,joseToDer:GBt}});var a7e=$((jan,s7e)=>{"use strict";f();var B9=require("buffer").Buffer,Rge=require("buffer").SlowBuffer;s7e.exports=wz;function wz(t,e){if(!B9.isBuffer(t)||!B9.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}a(wz,"bufferEq");wz.install=function(){B9.prototype.equal=Rge.prototype.equal=a(function(e){return wz(this,e)},"equal")};var VBt=B9.prototype.equal,zBt=Rge.prototype.equal;wz.restore=function(){B9.prototype.equal=VBt,Rge.prototype.equal=zBt}});var Bge=$((zan,g7e)=>{f();var sB=iB().Buffer,nh=require("crypto"),l7e=o7e(),c7e=require("util"),KBt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,N9="secret must be a string or buffer",oB="key must be a string or a buffer",YBt="key must be a string, a buffer or an object",Pge=typeof nh.createPublicKey=="function";Pge&&(oB+=" or a KeyObject",N9+="or a KeyObject");function u7e(t){if(!sB.isBuffer(t)&&typeof t!="string"&&(!Pge||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw vA(oB)}a(u7e,"checkIsPublicKey");function d7e(t){if(!sB.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw vA(YBt)}a(d7e,"checkIsPrivateKey");function JBt(t){if(!sB.isBuffer(t)){if(typeof t=="string")return t;if(!Pge||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw vA(N9)}}a(JBt,"checkIsSecretKey");function Dge(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}a(Dge,"fromBase64");function f7e(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}a(f7e,"toBase64");function vA(t){var e=[].slice.call(arguments,1),r=c7e.format.bind(c7e,t).apply(null,e);return new TypeError(r)}a(vA,"typeError");function XBt(t){return sB.isBuffer(t)||typeof t=="string"}a(XBt,"bufferOrString");function M9(t){return XBt(t)||(t=JSON.stringify(t)),t}a(M9,"normalizeInput");function p7e(t){return a(function(r,n){JBt(n),r=M9(r);var o=nh.createHmac("sha"+t,n),s=(o.update(r),o.digest("base64"));return Dge(s)},"sign")}a(p7e,"createHmacSigner");var kge,ZBt="timingSafeEqual"in nh?a(function(e,r){return e.byteLength!==r.byteLength?!1:nh.timingSafeEqual(e,r)},"timingSafeEqual"):a(function(e,r){return kge||(kge=a7e()),kge(e,r)},"timingSafeEqual");function e3t(t){return a(function(r,n,o){var s=p7e(t)(r,o);return ZBt(sB.from(n),sB.from(s))},"verify")}a(e3t,"createHmacVerifier");function m7e(t){return a(function(r,n){d7e(n),r=M9(r);var o=nh.createSign("RSA-SHA"+t),s=(o.update(r),o.sign(n,"base64"));return Dge(s)},"sign")}a(m7e,"createKeySigner");function h7e(t){return a(function(r,n,o){u7e(o),r=M9(r),n=f7e(n);var s=nh.createVerify("RSA-SHA"+t);return s.update(r),s.verify(o,n,"base64")},"verify")}a(h7e,"createKeyVerifier");function t3t(t){return a(function(r,n){d7e(n),r=M9(r);var o=nh.createSign("RSA-SHA"+t),s=(o.update(r),o.sign({key:n,padding:nh.constants.RSA_PKCS1_PSS_PADDING,saltLength:nh.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Dge(s)},"sign")}a(t3t,"createPSSKeySigner");function r3t(t){return a(function(r,n,o){u7e(o),r=M9(r),n=f7e(n);var s=nh.createVerify("RSA-SHA"+t);return s.update(r),s.verify({key:o,padding:nh.constants.RSA_PKCS1_PSS_PADDING,saltLength:nh.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}a(r3t,"createPSSKeyVerifier");function n3t(t){var e=m7e(t);return a(function(){var n=e.apply(null,arguments);return n=l7e.derToJose(n,"ES"+t),n},"sign")}a(n3t,"createECDSASigner");function i3t(t){var e=h7e(t);return a(function(n,o,s){o=l7e.joseToDer(o,"ES"+t).toString("base64");var c=e(n,o,s);return c},"verify")}a(i3t,"createECDSAVerifer");function o3t(){return a(function(){return""},"sign")}a(o3t,"createNoneSigner");function s3t(){return a(function(e,r){return r===""},"verify")}a(s3t,"createNoneVerifier");g7e.exports=a(function(e){var r={hs:p7e,rs:m7e,ps:t3t,es:n3t,none:o3t},n={hs:e3t,rs:h7e,ps:r3t,es:i3t,none:s3t},o=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!o)throw vA(KBt,e);var s=(o[1]||o[3]).toLowerCase(),c=o[2];return{sign:r[s](c),verify:n[s](c)}},"jwa")});var Nge=$((Jan,A7e)=>{f();var a3t=require("buffer").Buffer;A7e.exports=a(function(e){return typeof e=="string"?e:typeof e=="number"||a3t.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var b7e=$((ecn,E7e)=>{f();var c3t=iB().Buffer,y7e=_ge(),l3t=Bge(),u3t=require("stream"),C7e=Nge(),Mge=require("util");function v7e(t,e){return c3t.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}a(v7e,"base64url");function d3t(t,e,r){r=r||"utf8";var n=v7e(C7e(t),"binary"),o=v7e(C7e(e),r);return Mge.format("%s.%s",n,o)}a(d3t,"jwsSecuredInput");function x7e(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,o=t.encoding,s=l3t(e.alg),c=d3t(e,r,o),l=s.sign(c,n);return Mge.format("%s.%s",c,l)}a(x7e,"jwsSign");function _z(t){var e=t.secret||t.privateKey||t.key,r=new y7e(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new y7e(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}a(_z,"SignStream");Mge.inherits(_z,u3t);_z.prototype.sign=a(function(){try{var e=x7e({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");_z.sign=x7e;E7e.exports=_z});var B7e=$((ncn,D7e)=>{f();var T7e=iB().Buffer,I7e=_ge(),f3t=Bge(),p3t=require("stream"),w7e=Nge(),m3t=require("util"),h3t=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function g3t(t){return Object.prototype.toString.call(t)==="[object Object]"}a(g3t,"isObject");function A3t(t){if(g3t(t))return t;try{return JSON.parse(t)}catch{return}}a(A3t,"safeJsonParse");function _7e(t){var e=t.split(".",1)[0];return A3t(T7e.from(e,"base64").toString("binary"))}a(_7e,"headerFromJWS");function y3t(t){return t.split(".",2).join(".")}a(y3t,"securedInputFromJWS");function S7e(t){return t.split(".")[2]}a(S7e,"signatureFromJWS");function C3t(t,e){e=e||"utf8";var r=t.split(".")[1];return T7e.from(r,"base64").toString(e)}a(C3t,"payloadFromJWS");function R7e(t){return h3t.test(t)&&!!_7e(t)}a(R7e,"isValidJws");function k7e(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=w7e(t);var o=S7e(t),s=y3t(t),c=f3t(e);return c.verify(s,o,r)}a(k7e,"jwsVerify");function P7e(t,e){if(e=e||{},t=w7e(t),!R7e(t))return null;var r=_7e(t);if(!r)return null;var n=C3t(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:S7e(t)}}a(P7e,"jwsDecode");function aB(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new I7e(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new I7e(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}a(aB,"VerifyStream");m3t.inherits(aB,p3t);aB.prototype.verify=a(function(){try{var e=k7e(this.signature.buffer,this.algorithm,this.key.buffer),r=P7e(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");aB.decode=P7e;aB.isValid=R7e;aB.verify=k7e;D7e.exports=aB});var Rz=$(cT=>{f();var N7e=b7e(),Sz=B7e(),v3t=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];cT.ALGORITHMS=v3t;cT.sign=N7e.sign;cT.verify=Sz.verify;cT.decode=Sz.decode;cT.isValid=Sz.isValid;cT.createSign=a(function(e){return new N7e(e)},"createSign");cT.createVerify=a(function(e){return new Sz(e)},"createVerify")});var Lge=$((lcn,M7e)=>{f();var x3t=Rz();M7e.exports=function(t,e){e=e||{};var r=x3t.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var o=JSON.parse(n);o!==null&&typeof o=="object"&&(n=o)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var L9=$((dcn,L7e)=>{f();var kz=a(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");kz.prototype=Object.create(Error.prototype);kz.prototype.constructor=kz;L7e.exports=kz});var Fge=$((mcn,O7e)=>{f();var F7e=L9(),Pz=a(function(t,e){F7e.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");Pz.prototype=Object.create(F7e.prototype);Pz.prototype.constructor=Pz;O7e.exports=Pz});var Oge=$((Acn,U7e)=>{f();var Q7e=L9(),Dz=a(function(t,e){Q7e.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");Dz.prototype=Object.create(Q7e.prototype);Dz.prototype.constructor=Dz;U7e.exports=Dz});var Qge=$((vcn,q7e)=>{f();var cB=1e3,lB=cB*60,uB=lB*60,eR=uB*24,E3t=eR*7,b3t=eR*365.25;q7e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return I3t(t);if(r==="number"&&isFinite(t))return e.long?w3t(t):T3t(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function I3t(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*b3t;case"weeks":case"week":case"w":return r*E3t;case"days":case"day":case"d":return r*eR;case"hours":case"hour":case"hrs":case"hr":case"h":return r*uB;case"minutes":case"minute":case"mins":case"min":case"m":return r*lB;case"seconds":case"second":case"secs":case"sec":case"s":return r*cB;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}a(I3t,"parse");function T3t(t){var e=Math.abs(t);return e>=eR?Math.round(t/eR)+"d":e>=uB?Math.round(t/uB)+"h":e>=lB?Math.round(t/lB)+"m":e>=cB?Math.round(t/cB)+"s":t+"ms"}a(T3t,"fmtShort");function w3t(t){var e=Math.abs(t);return e>=eR?Bz(t,e,eR,"day"):e>=uB?Bz(t,e,uB,"hour"):e>=lB?Bz(t,e,lB,"minute"):e>=cB?Bz(t,e,cB,"second"):t+" ms"}a(w3t,"fmtLong");function Bz(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}a(Bz,"plural")});var Uge=$((bcn,H7e)=>{f();var _3t=Qge();H7e.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=_3t(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var F9=$((Tcn,$7e)=>{"use strict";f();var S3t="2.0.0",R3t=Number.MAX_SAFE_INTEGER||9007199254740991,k3t=16,P3t=250,D3t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];$7e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:k3t,MAX_SAFE_BUILD_LENGTH:P3t,MAX_SAFE_INTEGER:R3t,RELEASE_TYPES:D3t,SEMVER_SPEC_VERSION:S3t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var O9=$((_cn,W7e)=>{"use strict";f();var B3t=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};W7e.exports=B3t});var dB=$((DC,j7e)=>{"use strict";f();var{MAX_SAFE_COMPONENT_LENGTH:qge,MAX_SAFE_BUILD_LENGTH:N3t,MAX_LENGTH:M3t}=F9(),L3t=O9();DC=j7e.exports={};var F3t=DC.re=[],O3t=DC.safeRe=[],Br=DC.src=[],Q3t=DC.safeSrc=[],Nr=DC.t={},U3t=0,Hge="[a-zA-Z0-9-]",q3t=[["\\s",1],["\\d",M3t],[Hge,N3t]],H3t=a(t=>{for(let[e,r]of q3t)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),yi=a((t,e,r)=>{let n=H3t(e),o=U3t++;L3t(t,o,e),Nr[t]=o,Br[o]=e,Q3t[o]=n,F3t[o]=new RegExp(e,r?"g":void 0),O3t[o]=new RegExp(n,r?"g":void 0)},"createToken");yi("NUMERICIDENTIFIER","0|[1-9]\\d*");yi("NUMERICIDENTIFIERLOOSE","\\d+");yi("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Hge}*`);yi("MAINVERSION",`(${Br[Nr.NUMERICIDENTIFIER]})\\.(${Br[Nr.NUMERICIDENTIFIER]})\\.(${Br[Nr.NUMERICIDENTIFIER]})`);yi("MAINVERSIONLOOSE",`(${Br[Nr.NUMERICIDENTIFIERLOOSE]})\\.(${Br[Nr.NUMERICIDENTIFIERLOOSE]})\\.(${Br[Nr.NUMERICIDENTIFIERLOOSE]})`);yi("PRERELEASEIDENTIFIER",`(?:${Br[Nr.NONNUMERICIDENTIFIER]}|${Br[Nr.NUMERICIDENTIFIER]})`);yi("PRERELEASEIDENTIFIERLOOSE",`(?:${Br[Nr.NONNUMERICIDENTIFIER]}|${Br[Nr.NUMERICIDENTIFIERLOOSE]})`);yi("PRERELEASE",`(?:-(${Br[Nr.PRERELEASEIDENTIFIER]}(?:\\.${Br[Nr.PRERELEASEIDENTIFIER]})*))`);yi("PRERELEASELOOSE",`(?:-?(${Br[Nr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Br[Nr.PRERELEASEIDENTIFIERLOOSE]})*))`);yi("BUILDIDENTIFIER",`${Hge}+`);yi("BUILD",`(?:\\+(${Br[Nr.BUILDIDENTIFIER]}(?:\\.${Br[Nr.BUILDIDENTIFIER]})*))`);yi("FULLPLAIN",`v?${Br[Nr.MAINVERSION]}${Br[Nr.PRERELEASE]}?${Br[Nr.BUILD]}?`);yi("FULL",`^${Br[Nr.FULLPLAIN]}$`);yi("LOOSEPLAIN",`[v=\\s]*${Br[Nr.MAINVERSIONLOOSE]}${Br[Nr.PRERELEASELOOSE]}?${Br[Nr.BUILD]}?`);yi("LOOSE",`^${Br[Nr.LOOSEPLAIN]}$`);yi("GTLT","((?:<|>)?=?)");yi("XRANGEIDENTIFIERLOOSE",`${Br[Nr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);yi("XRANGEIDENTIFIER",`${Br[Nr.NUMERICIDENTIFIER]}|x|X|\\*`);yi("XRANGEPLAIN",`[v=\\s]*(${Br[Nr.XRANGEIDENTIFIER]})(?:\\.(${Br[Nr.XRANGEIDENTIFIER]})(?:\\.(${Br[Nr.XRANGEIDENTIFIER]})(?:${Br[Nr.PRERELEASE]})?${Br[Nr.BUILD]}?)?)?`);yi("XRANGEPLAINLOOSE",`[v=\\s]*(${Br[Nr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Br[Nr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Br[Nr.XRANGEIDENTIFIERLOOSE]})(?:${Br[Nr.PRERELEASELOOSE]})?${Br[Nr.BUILD]}?)?)?`);yi("XRANGE",`^${Br[Nr.GTLT]}\\s*${Br[Nr.XRANGEPLAIN]}$`);yi("XRANGELOOSE",`^${Br[Nr.GTLT]}\\s*${Br[Nr.XRANGEPLAINLOOSE]}$`);yi("COERCEPLAIN",`(^|[^\\d])(\\d{1,${qge}})(?:\\.(\\d{1,${qge}}))?(?:\\.(\\d{1,${qge}}))?`);yi("COERCE",`${Br[Nr.COERCEPLAIN]}(?:$|[^\\d])`);yi("COERCEFULL",Br[Nr.COERCEPLAIN]+`(?:${Br[Nr.PRERELEASE]})?(?:${Br[Nr.BUILD]})?(?:$|[^\\d])`);yi("COERCERTL",Br[Nr.COERCE],!0);yi("COERCERTLFULL",Br[Nr.COERCEFULL],!0);yi("LONETILDE","(?:~>?)");yi("TILDETRIM",`(\\s*)${Br[Nr.LONETILDE]}\\s+`,!0);DC.tildeTrimReplace="$1~";yi("TILDE",`^${Br[Nr.LONETILDE]}${Br[Nr.XRANGEPLAIN]}$`);yi("TILDELOOSE",`^${Br[Nr.LONETILDE]}${Br[Nr.XRANGEPLAINLOOSE]}$`);yi("LONECARET","(?:\\^)");yi("CARETTRIM",`(\\s*)${Br[Nr.LONECARET]}\\s+`,!0);DC.caretTrimReplace="$1^";yi("CARET",`^${Br[Nr.LONECARET]}${Br[Nr.XRANGEPLAIN]}$`);yi("CARETLOOSE",`^${Br[Nr.LONECARET]}${Br[Nr.XRANGEPLAINLOOSE]}$`);yi("COMPARATORLOOSE",`^${Br[Nr.GTLT]}\\s*(${Br[Nr.LOOSEPLAIN]})$|^$`);yi("COMPARATOR",`^${Br[Nr.GTLT]}\\s*(${Br[Nr.FULLPLAIN]})$|^$`);yi("COMPARATORTRIM",`(\\s*)${Br[Nr.GTLT]}\\s*(${Br[Nr.LOOSEPLAIN]}|${Br[Nr.XRANGEPLAIN]})`,!0);DC.comparatorTrimReplace="$1$2$3";yi("HYPHENRANGE",`^\\s*(${Br[Nr.XRANGEPLAIN]})\\s+-\\s+(${Br[Nr.XRANGEPLAIN]})\\s*$`);yi("HYPHENRANGELOOSE",`^\\s*(${Br[Nr.XRANGEPLAINLOOSE]})\\s+-\\s+(${Br[Nr.XRANGEPLAINLOOSE]})\\s*$`);yi("STAR","(<|>)?=?\\s*\\*");yi("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");yi("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Nz=$((Pcn,G7e)=>{"use strict";f();var $3t=Object.freeze({loose:!0}),W3t=Object.freeze({}),j3t=a(t=>t?typeof t!="object"?$3t:t:W3t,"parseOptions");G7e.exports=j3t});var $ge=$((Ncn,K7e)=>{"use strict";f();var V7e=/^[0-9]+$/,z7e=a((t,e)=>{let r=V7e.test(t),n=V7e.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),G3t=a((t,e)=>z7e(e,t),"rcompareIdentifiers");K7e.exports={compareIdentifiers:z7e,rcompareIdentifiers:G3t}});var Ud=$((Fcn,J7e)=>{"use strict";f();var Mz=O9(),{MAX_LENGTH:Y7e,MAX_SAFE_INTEGER:Lz}=F9(),{safeRe:Fz,t:Oz}=dB(),V3t=Nz(),{compareIdentifiers:fB}=$ge(),Wge=class t{static{a(this,"SemVer")}constructor(e,r){if(r=V3t(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Y7e)throw new TypeError(`version is longer than ${Y7e} characters`);Mz("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Fz[Oz.LOOSE]:Fz[Oz.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Lz||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lz||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lz||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let s=+o;if(s>=0&&s<Lz)return s}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Mz("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),fB(this.major,e.major)||fB(this.minor,e.minor)||fB(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=e.prerelease[r];if(Mz("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return fB(n,o)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],o=e.build[r];if(Mz("build compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return fB(n,o)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let o=`-${r}`.match(this.options.loose?Fz[Oz.PRERELEASELOOSE]:Fz[Oz.PRERELEASE]);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let s=[r,o];n===!1&&(s=[r]),fB(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};J7e.exports=Wge});var tR=$((Ucn,Z7e)=>{"use strict";f();var X7e=Ud(),z3t=a((t,e,r=!1)=>{if(t instanceof X7e)return t;try{return new X7e(t,e)}catch(n){if(!r)return null;throw n}},"parse");Z7e.exports=z3t});var tQe=$(($cn,eQe)=>{"use strict";f();var K3t=tR(),Y3t=a((t,e)=>{let r=K3t(t,e);return r?r.version:null},"valid");eQe.exports=Y3t});var nQe=$((Gcn,rQe)=>{"use strict";f();var J3t=tR(),X3t=a((t,e)=>{let r=J3t(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");rQe.exports=X3t});var sQe=$((Kcn,oQe)=>{"use strict";f();var iQe=Ud(),Z3t=a((t,e,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new iQe(t instanceof iQe?t.version:t,r).inc(e,n,o).version}catch{return null}},"inc");oQe.exports=Z3t});var lQe=$((Xcn,cQe)=>{"use strict";f();var aQe=tR(),eNt=a((t,e)=>{let r=aQe(t,null,!0),n=aQe(e,null,!0),o=r.compare(n);if(o===0)return null;let s=o>0,c=s?r:n,l=s?n:r,u=!!c.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(l.compareMain(c)===0)return l.minor&&!l.patch?"minor":"patch"}let p=u?"pre":"";return r.major!==n.major?p+"major":r.minor!==n.minor?p+"minor":r.patch!==n.patch?p+"patch":"prerelease"},"diff");cQe.exports=eNt});var dQe=$((tln,uQe)=>{"use strict";f();var tNt=Ud(),rNt=a((t,e)=>new tNt(t,e).major,"major");uQe.exports=rNt});var pQe=$((iln,fQe)=>{"use strict";f();var nNt=Ud(),iNt=a((t,e)=>new nNt(t,e).minor,"minor");fQe.exports=iNt});var hQe=$((aln,mQe)=>{"use strict";f();var oNt=Ud(),sNt=a((t,e)=>new oNt(t,e).patch,"patch");mQe.exports=sNt});var AQe=$((uln,gQe)=>{"use strict";f();var aNt=tR(),cNt=a((t,e)=>{let r=aNt(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");gQe.exports=cNt});var ih=$((pln,CQe)=>{"use strict";f();var yQe=Ud(),lNt=a((t,e,r)=>new yQe(t,r).compare(new yQe(e,r)),"compare");CQe.exports=lNt});var xQe=$((gln,vQe)=>{"use strict";f();var uNt=ih(),dNt=a((t,e,r)=>uNt(e,t,r),"rcompare");vQe.exports=dNt});var bQe=$((Cln,EQe)=>{"use strict";f();var fNt=ih(),pNt=a((t,e)=>fNt(t,e,!0),"compareLoose");EQe.exports=pNt});var Qz=$((Eln,TQe)=>{"use strict";f();var IQe=Ud(),mNt=a((t,e,r)=>{let n=new IQe(t,r),o=new IQe(e,r);return n.compare(o)||n.compareBuild(o)},"compareBuild");TQe.exports=mNt});var _Qe=$((Tln,wQe)=>{"use strict";f();var hNt=Qz(),gNt=a((t,e)=>t.sort((r,n)=>hNt(r,n,e)),"sort");wQe.exports=gNt});var RQe=$((Sln,SQe)=>{"use strict";f();var ANt=Qz(),yNt=a((t,e)=>t.sort((r,n)=>ANt(n,r,e)),"rsort");SQe.exports=yNt});var Q9=$((Pln,kQe)=>{"use strict";f();var CNt=ih(),vNt=a((t,e,r)=>CNt(t,e,r)>0,"gt");kQe.exports=vNt});var Uz=$((Nln,PQe)=>{"use strict";f();var xNt=ih(),ENt=a((t,e,r)=>xNt(t,e,r)<0,"lt");PQe.exports=ENt});var jge=$((Fln,DQe)=>{"use strict";f();var bNt=ih(),INt=a((t,e,r)=>bNt(t,e,r)===0,"eq");DQe.exports=INt});var Gge=$((Uln,BQe)=>{"use strict";f();var TNt=ih(),wNt=a((t,e,r)=>TNt(t,e,r)!==0,"neq");BQe.exports=wNt});var qz=$(($ln,NQe)=>{"use strict";f();var _Nt=ih(),SNt=a((t,e,r)=>_Nt(t,e,r)>=0,"gte");NQe.exports=SNt});var Hz=$((Gln,MQe)=>{"use strict";f();var RNt=ih(),kNt=a((t,e,r)=>RNt(t,e,r)<=0,"lte");MQe.exports=kNt});var Vge=$((Kln,LQe)=>{"use strict";f();var PNt=jge(),DNt=Gge(),BNt=Q9(),NNt=qz(),MNt=Uz(),LNt=Hz(),FNt=a((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return PNt(t,r,n);case"!=":return DNt(t,r,n);case">":return BNt(t,r,n);case">=":return NNt(t,r,n);case"<":return MNt(t,r,n);case"<=":return LNt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");LQe.exports=FNt});var OQe=$((Xln,FQe)=>{"use strict";f();var ONt=Ud(),QNt=tR(),{safeRe:$z,t:Wz}=dB(),UNt=a((t,e)=>{if(t instanceof ONt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?$z[Wz.COERCEFULL]:$z[Wz.COERCE]);else{let u=e.includePrerelease?$z[Wz.COERCERTLFULL]:$z[Wz.COERCERTL],d;for(;(d=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||d.index+d[0].length!==r.index+r[0].length)&&(r=d),u.lastIndex=d.index+d[1].length+d[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],o=r[3]||"0",s=r[4]||"0",c=e.includePrerelease&&r[5]?`-${r[5]}`:"",l=e.includePrerelease&&r[6]?`+${r[6]}`:"";return QNt(`${n}.${o}.${s}${c}${l}`,e)},"coerce");FQe.exports=UNt});var UQe=$((tun,QQe)=>{"use strict";f();var zge=class{static{a(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,r)}return this}};QQe.exports=zge});var oh=$((oun,WQe)=>{"use strict";f();var qNt=/\s+/g,Kge=class t{static{a(this,"Range")}constructor(e,r){if(r=$Nt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Yge)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(qNt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!HQe(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&YNt(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&zNt)|(this.options.loose&&KNt))+":"+e,o=qQe.get(n);if(o)return o;let s=this.options.loose,c=s?xp[bf.HYPHENRANGELOOSE]:xp[bf.HYPHENRANGE];e=e.replace(c,s8t(this.options.includePrerelease)),aa("hyphen replace",e),e=e.replace(xp[bf.COMPARATORTRIM],jNt),aa("comparator trim",e),e=e.replace(xp[bf.TILDETRIM],GNt),aa("tilde trim",e),e=e.replace(xp[bf.CARETTRIM],VNt),aa("caret trim",e);let l=e.split(" ").map(m=>JNt(m,this.options)).join(" ").split(/\s+/).map(m=>o8t(m,this.options));s&&(l=l.filter(m=>(aa("loose invalid filter",m,this.options),!!m.match(xp[bf.COMPARATORLOOSE])))),aa("range list",l);let u=new Map,d=l.map(m=>new Yge(m,this.options));for(let m of d){if(HQe(m))return[m];u.set(m.value,m)}u.size>1&&u.has("")&&u.delete("");let p=[...u.values()];return qQe.set(n,p),p}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>$Qe(n,r)&&e.set.some(o=>$Qe(o,r)&&n.every(s=>o.every(c=>s.intersects(c,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new WNt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(a8t(this.set[r],e,this.options))return!0;return!1}};WQe.exports=Kge;var HNt=UQe(),qQe=new HNt,$Nt=Nz(),Yge=U9(),aa=O9(),WNt=Ud(),{safeRe:xp,t:bf,comparatorTrimReplace:jNt,tildeTrimReplace:GNt,caretTrimReplace:VNt}=dB(),{FLAG_INCLUDE_PRERELEASE:zNt,FLAG_LOOSE:KNt}=F9(),HQe=a(t=>t.value==="<0.0.0-0","isNullSet"),YNt=a(t=>t.value==="","isAny"),$Qe=a((t,e)=>{let r=!0,n=t.slice(),o=n.pop();for(;r&&n.length;)r=n.every(s=>o.intersects(s,e)),o=n.pop();return r},"isSatisfiable"),JNt=a((t,e)=>(aa("comp",t,e),t=e8t(t,e),aa("caret",t),t=XNt(t,e),aa("tildes",t),t=r8t(t,e),aa("xrange",t),t=i8t(t,e),aa("stars",t),t),"parseComparator"),If=a(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),XNt=a((t,e)=>t.trim().split(/\s+/).map(r=>ZNt(r,e)).join(" "),"replaceTildes"),ZNt=a((t,e)=>{let r=e.loose?xp[bf.TILDELOOSE]:xp[bf.TILDE];return t.replace(r,(n,o,s,c,l)=>{aa("tilde",t,n,o,s,c,l);let u;return If(o)?u="":If(s)?u=`>=${o}.0.0 <${+o+1}.0.0-0`:If(c)?u=`>=${o}.${s}.0 <${o}.${+s+1}.0-0`:l?(aa("replaceTilde pr",l),u=`>=${o}.${s}.${c}-${l} <${o}.${+s+1}.0-0`):u=`>=${o}.${s}.${c} <${o}.${+s+1}.0-0`,aa("tilde return",u),u})},"replaceTilde"),e8t=a((t,e)=>t.trim().split(/\s+/).map(r=>t8t(r,e)).join(" "),"replaceCarets"),t8t=a((t,e)=>{aa("caret",t,e);let r=e.loose?xp[bf.CARETLOOSE]:xp[bf.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(o,s,c,l,u)=>{aa("caret",t,o,s,c,l,u);let d;return If(s)?d="":If(c)?d=`>=${s}.0.0${n} <${+s+1}.0.0-0`:If(l)?s==="0"?d=`>=${s}.${c}.0${n} <${s}.${+c+1}.0-0`:d=`>=${s}.${c}.0${n} <${+s+1}.0.0-0`:u?(aa("replaceCaret pr",u),s==="0"?c==="0"?d=`>=${s}.${c}.${l}-${u} <${s}.${c}.${+l+1}-0`:d=`>=${s}.${c}.${l}-${u} <${s}.${+c+1}.0-0`:d=`>=${s}.${c}.${l}-${u} <${+s+1}.0.0-0`):(aa("no pr"),s==="0"?c==="0"?d=`>=${s}.${c}.${l}${n} <${s}.${c}.${+l+1}-0`:d=`>=${s}.${c}.${l}${n} <${s}.${+c+1}.0-0`:d=`>=${s}.${c}.${l} <${+s+1}.0.0-0`),aa("caret return",d),d})},"replaceCaret"),r8t=a((t,e)=>(aa("replaceXRanges",t,e),t.split(/\s+/).map(r=>n8t(r,e)).join(" ")),"replaceXRanges"),n8t=a((t,e)=>{t=t.trim();let r=e.loose?xp[bf.XRANGELOOSE]:xp[bf.XRANGE];return t.replace(r,(n,o,s,c,l,u)=>{aa("xRange",t,n,o,s,c,l,u);let d=If(s),p=d||If(c),m=p||If(l),h=m;return o==="="&&h&&(o=""),u=e.includePrerelease?"-0":"",d?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&h?(p&&(c=0),l=0,o===">"?(o=">=",p?(s=+s+1,c=0,l=0):(c=+c+1,l=0)):o==="<="&&(o="<",p?s=+s+1:c=+c+1),o==="<"&&(u="-0"),n=`${o+s}.${c}.${l}${u}`):p?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:m&&(n=`>=${s}.${c}.0${u} <${s}.${+c+1}.0-0`),aa("xRange return",n),n})},"replaceXRange"),i8t=a((t,e)=>(aa("replaceStars",t,e),t.trim().replace(xp[bf.STAR],"")),"replaceStars"),o8t=a((t,e)=>(aa("replaceGTE0",t,e),t.trim().replace(xp[e.includePrerelease?bf.GTE0PRE:bf.GTE0],"")),"replaceGTE0"),s8t=a(t=>(e,r,n,o,s,c,l,u,d,p,m,h)=>(If(n)?r="":If(o)?r=`>=${n}.0.0${t?"-0":""}`:If(s)?r=`>=${n}.${o}.0${t?"-0":""}`:c?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,If(d)?u="":If(p)?u=`<${+d+1}.0.0-0`:If(m)?u=`<${d}.${+p+1}.0-0`:h?u=`<=${d}.${p}.${m}-${h}`:t?u=`<${d}.${p}.${+m+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),"hyphenReplace"),a8t=a((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(aa(t[n].semver),t[n].semver!==Yge.ANY&&t[n].semver.prerelease.length>0){let o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0},"testSet")});var U9=$((cun,YQe)=>{"use strict";f();var q9=Symbol("SemVer ANY"),Zge=class t{static{a(this,"Comparator")}static get ANY(){return q9}constructor(e,r){if(r=jQe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Xge("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===q9?this.value="":this.value=this.operator+this.semver.version,Xge("comp",this)}parse(e){let r=this.options.loose?GQe[VQe.COMPARATORLOOSE]:GQe[VQe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new zQe(n[2],this.options.loose):this.semver=q9}toString(){return this.value}test(e){if(Xge("Comparator.test",e,this.options.loose),this.semver===q9||e===q9)return!0;if(typeof e=="string")try{e=new zQe(e,this.options)}catch{return!1}return Jge(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new KQe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new KQe(this.value,r).test(e.semver):(r=jQe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Jge(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Jge(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};YQe.exports=Zge;var jQe=Nz(),{safeRe:GQe,t:VQe}=dB(),Jge=Vge(),Xge=O9(),zQe=Ud(),KQe=oh()});var H9=$((dun,JQe)=>{"use strict";f();var c8t=oh(),l8t=a((t,e,r)=>{try{e=new c8t(e,r)}catch{return!1}return e.test(t)},"satisfies");JQe.exports=l8t});var ZQe=$((mun,XQe)=>{"use strict";f();var u8t=oh(),d8t=a((t,e)=>new u8t(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");XQe.exports=d8t});var tUe=$((Aun,eUe)=>{"use strict";f();var f8t=Ud(),p8t=oh(),m8t=a((t,e,r)=>{let n=null,o=null,s=null;try{s=new p8t(e,r)}catch{return null}return t.forEach(c=>{s.test(c)&&(!n||o.compare(c)===-1)&&(n=c,o=new f8t(n,r))}),n},"maxSatisfying");eUe.exports=m8t});var nUe=$((vun,rUe)=>{"use strict";f();var h8t=Ud(),g8t=oh(),A8t=a((t,e,r)=>{let n=null,o=null,s=null;try{s=new g8t(e,r)}catch{return null}return t.forEach(c=>{s.test(c)&&(!n||o.compare(c)===1)&&(n=c,o=new h8t(n,r))}),n},"minSatisfying");rUe.exports=A8t});var sUe=$((bun,oUe)=>{"use strict";f();var eAe=Ud(),y8t=oh(),iUe=Q9(),C8t=a((t,e)=>{t=new y8t(t,e);let r=new eAe("0.0.0");if(t.test(r)||(r=new eAe("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let o=t.set[n],s=null;o.forEach(c=>{let l=new eAe(c.semver.version);switch(c.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||iUe(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),s&&(!r||iUe(r,s))&&(r=s)}return r&&t.test(r)?r:null},"minVersion");oUe.exports=C8t});var cUe=$((wun,aUe)=>{"use strict";f();var v8t=oh(),x8t=a((t,e)=>{try{return new v8t(t,e).range||"*"}catch{return null}},"validRange");aUe.exports=x8t});var jz=$((Run,fUe)=>{"use strict";f();var E8t=Ud(),dUe=U9(),{ANY:b8t}=dUe,I8t=oh(),T8t=H9(),lUe=Q9(),uUe=Uz(),w8t=Hz(),_8t=qz(),S8t=a((t,e,r,n)=>{t=new E8t(t,n),e=new I8t(e,n);let o,s,c,l,u;switch(r){case">":o=lUe,s=w8t,c=uUe,l=">",u=">=";break;case"<":o=uUe,s=_8t,c=lUe,l="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(T8t(t,e,n))return!1;for(let d=0;d<e.set.length;++d){let p=e.set[d],m=null,h=null;if(p.forEach(g=>{g.semver===b8t&&(g=new dUe(">=0.0.0")),m=m||g,h=h||g,o(g.semver,m.semver,n)?m=g:c(g.semver,h.semver,n)&&(h=g)}),m.operator===l||m.operator===u||(!h.operator||h.operator===l)&&s(t,h.semver))return!1;if(h.operator===u&&c(t,h.semver))return!1}return!0},"outside");fUe.exports=S8t});var mUe=$((Dun,pUe)=>{"use strict";f();var R8t=jz(),k8t=a((t,e,r)=>R8t(t,e,">",r),"gtr");pUe.exports=k8t});var gUe=$((Lun,hUe)=>{"use strict";f();var P8t=jz(),D8t=a((t,e,r)=>P8t(t,e,"<",r),"ltr");hUe.exports=D8t});var CUe=$((Qun,yUe)=>{"use strict";f();var AUe=oh(),B8t=a((t,e,r)=>(t=new AUe(t,r),e=new AUe(e,r),t.intersects(e,r)),"intersects");yUe.exports=B8t});var xUe=$((Hun,vUe)=>{"use strict";f();var N8t=H9(),M8t=ih();vUe.exports=(t,e,r)=>{let n=[],o=null,s=null,c=t.sort((p,m)=>M8t(p,m,r));for(let p of c)N8t(p,e,r)?(s=p,o||(o=p)):(s&&n.push([o,s]),s=null,o=null);o&&n.push([o,null]);let l=[];for(let[p,m]of n)p===m?l.push(p):!m&&p===c[0]?l.push("*"):m?p===c[0]?l.push(`<=${m}`):l.push(`${p} - ${m}`):l.push(`>=${p}`);let u=l.join(" || "),d=typeof e.raw=="string"?e.raw:String(e);return u.length<d.length?u:e}});var _Ue=$((Wun,wUe)=>{"use strict";f();var EUe=oh(),rAe=U9(),{ANY:tAe}=rAe,$9=H9(),nAe=ih(),L8t=a((t,e,r={})=>{if(t===e)return!0;t=new EUe(t,r),e=new EUe(e,r);let n=!1;e:for(let o of t.set){for(let s of e.set){let c=O8t(o,s,r);if(n=n||c!==null,c)continue e}if(n)return!1}return!0},"subset"),F8t=[new rAe(">=0.0.0-0")],bUe=[new rAe(">=0.0.0")],O8t=a((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===tAe){if(e.length===1&&e[0].semver===tAe)return!0;r.includePrerelease?t=F8t:t=bUe}if(e.length===1&&e[0].semver===tAe){if(r.includePrerelease)return!0;e=bUe}let n=new Set,o,s;for(let g of t)g.operator===">"||g.operator===">="?o=IUe(o,g,r):g.operator==="<"||g.operator==="<="?s=TUe(s,g,r):n.add(g.semver);if(n.size>1)return null;let c;if(o&&s){if(c=nAe(o.semver,s.semver,r),c>0)return null;if(c===0&&(o.operator!==">="||s.operator!=="<="))return null}for(let g of n){if(o&&!$9(g,String(o),r)||s&&!$9(g,String(s),r))return null;for(let A of e)if(!$9(g,String(A),r))return!1;return!0}let l,u,d,p,m=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;m&&m.prerelease.length===1&&s.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(let g of e){if(p=p||g.operator===">"||g.operator===">=",d=d||g.operator==="<"||g.operator==="<=",o){if(h&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===h.major&&g.semver.minor===h.minor&&g.semver.patch===h.patch&&(h=!1),g.operator===">"||g.operator===">="){if(l=IUe(o,g,r),l===g&&l!==o)return!1}else if(o.operator===">="&&!$9(o.semver,String(g),r))return!1}if(s){if(m&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===m.major&&g.semver.minor===m.minor&&g.semver.patch===m.patch&&(m=!1),g.operator==="<"||g.operator==="<="){if(u=TUe(s,g,r),u===g&&u!==s)return!1}else if(s.operator==="<="&&!$9(s.semver,String(g),r))return!1}if(!g.operator&&(s||o)&&c!==0)return!1}return!(o&&d&&!s&&c!==0||s&&p&&!o&&c!==0||h||m)},"simpleSubset"),IUe=a((t,e,r)=>{if(!t)return e;let n=nAe(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),TUe=a((t,e,r)=>{if(!t)return e;let n=nAe(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");wUe.exports=L8t});var pB=$((Vun,kUe)=>{"use strict";f();var iAe=dB(),SUe=F9(),Q8t=Ud(),RUe=$ge(),U8t=tR(),q8t=tQe(),H8t=nQe(),$8t=sQe(),W8t=lQe(),j8t=dQe(),G8t=pQe(),V8t=hQe(),z8t=AQe(),K8t=ih(),Y8t=xQe(),J8t=bQe(),X8t=Qz(),Z8t=_Qe(),eMt=RQe(),tMt=Q9(),rMt=Uz(),nMt=jge(),iMt=Gge(),oMt=qz(),sMt=Hz(),aMt=Vge(),cMt=OQe(),lMt=U9(),uMt=oh(),dMt=H9(),fMt=ZQe(),pMt=tUe(),mMt=nUe(),hMt=sUe(),gMt=cUe(),AMt=jz(),yMt=mUe(),CMt=gUe(),vMt=CUe(),xMt=xUe(),EMt=_Ue();kUe.exports={parse:U8t,valid:q8t,clean:H8t,inc:$8t,diff:W8t,major:j8t,minor:G8t,patch:V8t,prerelease:z8t,compare:K8t,rcompare:Y8t,compareLoose:J8t,compareBuild:X8t,sort:Z8t,rsort:eMt,gt:tMt,lt:rMt,eq:nMt,neq:iMt,gte:oMt,lte:sMt,cmp:aMt,coerce:cMt,Comparator:lMt,Range:uMt,satisfies:dMt,toComparators:fMt,maxSatisfying:pMt,minSatisfying:mMt,minVersion:hMt,validRange:gMt,outside:AMt,gtr:yMt,ltr:CMt,intersects:vMt,simplifyRange:xMt,subset:EMt,SemVer:Q8t,re:iAe.re,src:iAe.src,tokens:iAe.t,SEMVER_SPEC_VERSION:SUe.SEMVER_SPEC_VERSION,RELEASE_TYPES:SUe.RELEASE_TYPES,compareIdentifiers:RUe.compareIdentifiers,rcompareIdentifiers:RUe.rcompareIdentifiers}});var DUe=$((Kun,PUe)=>{f();var bMt=pB();PUe.exports=bMt.satisfies(process.version,">=15.7.0")});var NUe=$((Jun,BUe)=>{f();var IMt=pB();BUe.exports=IMt.satisfies(process.version,">=16.9.0")});var oAe=$((Zun,MUe)=>{f();var TMt=DUe(),wMt=NUe(),_Mt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},SMt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};MUe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=_Mt[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(TMt)switch(r){case"ec":let o=e.asymmetricKeyDetails.namedCurve,s=SMt[t];if(o!==s)throw new Error(`"alg" parameter "${t}" requires curve "${s}".`);break;case"rsa-pss":if(wMt){let c=parseInt(t.slice(-3),10),{hashAlgorithm:l,mgf1HashAlgorithm:u,saltLength:d}=e.asymmetricKeyDetails;if(l!==`sha${c}`||u!==l)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(d!==void 0&&d>c>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var sAe=$((tdn,LUe)=>{f();var RMt=pB();LUe.exports=RMt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var QUe=$((ndn,OUe)=>{f();var Hs=L9(),kMt=Fge(),FUe=Oge(),PMt=Lge(),DMt=Uge(),BMt=oAe(),NMt=sAe(),MMt=Rz(),{KeyObject:LMt,createSecretKey:FMt,createPublicKey:OMt}=require("crypto"),aAe=["RS256","RS384","RS512"],QMt=["ES256","ES384","ES512"],cAe=["RS256","RS384","RS512"],UMt=["HS256","HS384","HS512"];NMt&&(aAe.splice(aAe.length,0,"PS256","PS384","PS512"),cAe.splice(cAe.length,0,"PS256","PS384","PS512"));OUe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let o;if(n?o=n:o=a(function(p,m){if(p)throw p;return m},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return o(new Hs("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return o(new Hs("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return o(new Hs("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return o(new Hs("jwt must be provided"));if(typeof t!="string")return o(new Hs("jwt must be a string"));let c=t.split(".");if(c.length!==3)return o(new Hs("jwt malformed"));let l;try{l=PMt(t,{complete:!0})}catch(p){return o(p)}if(!l)return o(new Hs("invalid token"));let u=l.header,d;if(typeof e=="function"){if(!n)return o(new Hs("verify must be called asynchronous if secret or public key is provided as a callback"));d=e}else d=a(function(p,m){return m(null,e)},"getSecret");return d(u,function(p,m){if(p)return o(new Hs("error in secret or public key callback: "+p.message));let h=c[2].trim()!=="";if(!h&&m)return o(new Hs("jwt signature is required"));if(h&&!m)return o(new Hs("secret or public key must be provided"));if(!h&&!r.algorithms)return o(new Hs('please specify "none" in "algorithms" to verify unsigned tokens'));if(m!=null&&!(m instanceof LMt))try{m=OMt(m)}catch{try{m=FMt(typeof m=="string"?Buffer.from(m):m)}catch{return o(new Hs("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(m.type==="secret"?r.algorithms=UMt:["rsa","rsa-pss"].includes(m.asymmetricKeyType)?r.algorithms=cAe:m.asymmetricKeyType==="ec"?r.algorithms=QMt:r.algorithms=aAe),r.algorithms.indexOf(l.header.alg)===-1)return o(new Hs("invalid algorithm"));if(u.alg.startsWith("HS")&&m.type!=="secret")return o(new Hs(`secretOrPublicKey must be a symmetric key when using ${u.alg}`));if(/^(?:RS|PS|ES)/.test(u.alg)&&m.type!=="public")return o(new Hs(`secretOrPublicKey must be an asymmetric key when using ${u.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{BMt(u.alg,m)}catch(y){return o(y)}let g;try{g=MMt.verify(t,l.header.alg,m)}catch(y){return o(y)}if(!g)return o(new Hs("invalid signature"));let A=l.payload;if(typeof A.nbf<"u"&&!r.ignoreNotBefore){if(typeof A.nbf!="number")return o(new Hs("invalid nbf value"));if(A.nbf>s+(r.clockTolerance||0))return o(new kMt("jwt not active",new Date(A.nbf*1e3)))}if(typeof A.exp<"u"&&!r.ignoreExpiration){if(typeof A.exp!="number")return o(new Hs("invalid exp value"));if(s>=A.exp+(r.clockTolerance||0))return o(new FUe("jwt expired",new Date(A.exp*1e3)))}if(r.audience){let y=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(A.aud)?A.aud:[A.aud]).some(function(I){return y.some(function(S){return S instanceof RegExp?S.test(I):S===I})}))return o(new Hs("jwt audience invalid. expected: "+y.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&A.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(A.iss)===-1))return o(new Hs("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&A.sub!==r.subject)return o(new Hs("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&A.jti!==r.jwtid)return o(new Hs("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&A.nonce!==r.nonce)return o(new Hs("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof A.iat!="number")return o(new Hs("iat required when maxAge is specified"));let y=DMt(r.maxAge,A.iat);if(typeof y>"u")return o(new Hs('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=y+(r.clockTolerance||0))return o(new FUe("maxAge exceeded",new Date(y*1e3)))}if(r.complete===!0){let y=l.signature;return o(null,{header:u,payload:A,signature:y})}return o(null,A)})}});var jUe=$((sdn,WUe)=>{f();var UUe=1/0,HUe=9007199254740991,qMt=17976931348623157e292,qUe=NaN,HMt="[object Arguments]",$Mt="[object Function]",WMt="[object GeneratorFunction]",jMt="[object String]",GMt="[object Symbol]",VMt=/^\s+|\s+$/g,zMt=/^[-+]0x[0-9a-f]+$/i,KMt=/^0b[01]+$/i,YMt=/^0o[0-7]+$/i,JMt=/^(?:0|[1-9]\d*)$/,XMt=parseInt;function ZMt(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}a(ZMt,"arrayMap");function eLt(t,e,r,n){for(var o=t.length,s=r+(n?1:-1);n?s--:++s<o;)if(e(t[s],s,t))return s;return-1}a(eLt,"baseFindIndex");function tLt(t,e,r){if(e!==e)return eLt(t,rLt,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}a(tLt,"baseIndexOf");function rLt(t){return t!==t}a(rLt,"baseIsNaN");function nLt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}a(nLt,"baseTimes");function iLt(t,e){return ZMt(e,function(r){return t[r]})}a(iLt,"baseValues");function oLt(t,e){return function(r){return t(e(r))}}a(oLt,"overArg");var Gz=Object.prototype,uAe=Gz.hasOwnProperty,Vz=Gz.toString,sLt=Gz.propertyIsEnumerable,aLt=oLt(Object.keys,Object),cLt=Math.max;function lLt(t,e){var r=$Ue(t)||mLt(t)?nLt(t.length,String):[],n=r.length,o=!!n;for(var s in t)(e||uAe.call(t,s))&&!(o&&(s=="length"||dLt(s,n)))&&r.push(s);return r}a(lLt,"arrayLikeKeys");function uLt(t){if(!fLt(t))return aLt(t);var e=[];for(var r in Object(t))uAe.call(t,r)&&r!="constructor"&&e.push(r);return e}a(uLt,"baseKeys");function dLt(t,e){return e=e??HUe,!!e&&(typeof t=="number"||JMt.test(t))&&t>-1&&t%1==0&&t<e}a(dLt,"isIndex");function fLt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Gz;return t===r}a(fLt,"isPrototype");function pLt(t,e,r,n){t=dAe(t)?t:ILt(t),r=r&&!n?xLt(r):0;var o=t.length;return r<0&&(r=cLt(o+r,0)),yLt(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&tLt(t,e,r)>-1}a(pLt,"includes");function mLt(t){return hLt(t)&&uAe.call(t,"callee")&&(!sLt.call(t,"callee")||Vz.call(t)==HMt)}a(mLt,"isArguments");var $Ue=Array.isArray;function dAe(t){return t!=null&&ALt(t.length)&&!gLt(t)}a(dAe,"isArrayLike");function hLt(t){return fAe(t)&&dAe(t)}a(hLt,"isArrayLikeObject");function gLt(t){var e=lAe(t)?Vz.call(t):"";return e==$Mt||e==WMt}a(gLt,"isFunction");function ALt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=HUe}a(ALt,"isLength");function lAe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}a(lAe,"isObject");function fAe(t){return!!t&&typeof t=="object"}a(fAe,"isObjectLike");function yLt(t){return typeof t=="string"||!$Ue(t)&&fAe(t)&&Vz.call(t)==jMt}a(yLt,"isString");function CLt(t){return typeof t=="symbol"||fAe(t)&&Vz.call(t)==GMt}a(CLt,"isSymbol");function vLt(t){if(!t)return t===0?t:0;if(t=ELt(t),t===UUe||t===-UUe){var e=t<0?-1:1;return e*qMt}return t===t?t:0}a(vLt,"toFinite");function xLt(t){var e=vLt(t),r=e%1;return e===e?r?e-r:e:0}a(xLt,"toInteger");function ELt(t){if(typeof t=="number")return t;if(CLt(t))return qUe;if(lAe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=lAe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(VMt,"");var r=KMt.test(t);return r||YMt.test(t)?XMt(t.slice(2),r?2:8):zMt.test(t)?qUe:+t}a(ELt,"toNumber");function bLt(t){return dAe(t)?lLt(t):uLt(t)}a(bLt,"keys");function ILt(t){return t?iLt(t,bLt(t)):[]}a(ILt,"values");WUe.exports=pLt});var VUe=$((ldn,GUe)=>{f();var TLt="[object Boolean]",wLt=Object.prototype,_Lt=wLt.toString;function SLt(t){return t===!0||t===!1||RLt(t)&&_Lt.call(t)==TLt}a(SLt,"isBoolean");function RLt(t){return!!t&&typeof t=="object"}a(RLt,"isObjectLike");GUe.exports=SLt});var XUe=$((fdn,JUe)=>{f();var zUe=1/0,kLt=17976931348623157e292,KUe=NaN,PLt="[object Symbol]",DLt=/^\s+|\s+$/g,BLt=/^[-+]0x[0-9a-f]+$/i,NLt=/^0b[01]+$/i,MLt=/^0o[0-7]+$/i,LLt=parseInt,FLt=Object.prototype,OLt=FLt.toString;function QLt(t){return typeof t=="number"&&t==$Lt(t)}a(QLt,"isInteger");function YUe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}a(YUe,"isObject");function ULt(t){return!!t&&typeof t=="object"}a(ULt,"isObjectLike");function qLt(t){return typeof t=="symbol"||ULt(t)&&OLt.call(t)==PLt}a(qLt,"isSymbol");function HLt(t){if(!t)return t===0?t:0;if(t=WLt(t),t===zUe||t===-zUe){var e=t<0?-1:1;return e*kLt}return t===t?t:0}a(HLt,"toFinite");function $Lt(t){var e=HLt(t),r=e%1;return e===e?r?e-r:e:0}a($Lt,"toInteger");function WLt(t){if(typeof t=="number")return t;if(qLt(t))return KUe;if(YUe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=YUe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(DLt,"");var r=NLt.test(t);return r||MLt.test(t)?LLt(t.slice(2),r?2:8):BLt.test(t)?KUe:+t}a(WLt,"toNumber");JUe.exports=QLt});var eqe=$((hdn,ZUe)=>{f();var jLt="[object Number]",GLt=Object.prototype,VLt=GLt.toString;function zLt(t){return!!t&&typeof t=="object"}a(zLt,"isObjectLike");function KLt(t){return typeof t=="number"||zLt(t)&&VLt.call(t)==jLt}a(KLt,"isNumber");ZUe.exports=KLt});var iqe=$((ydn,nqe)=>{f();var YLt="[object Object]";function JLt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}a(JLt,"isHostObject");function XLt(t,e){return function(r){return t(e(r))}}a(XLt,"overArg");var ZLt=Function.prototype,tqe=Object.prototype,rqe=ZLt.toString,eFt=tqe.hasOwnProperty,tFt=rqe.call(Object),rFt=tqe.toString,nFt=XLt(Object.getPrototypeOf,Object);function iFt(t){return!!t&&typeof t=="object"}a(iFt,"isObjectLike");function oFt(t){if(!iFt(t)||rFt.call(t)!=YLt||JLt(t))return!1;var e=nFt(t);if(e===null)return!0;var r=eFt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&rqe.call(r)==tFt}a(oFt,"isPlainObject");nqe.exports=oFt});var sqe=$((xdn,oqe)=>{f();var sFt="[object String]",aFt=Object.prototype,cFt=aFt.toString,lFt=Array.isArray;function uFt(t){return!!t&&typeof t=="object"}a(uFt,"isObjectLike");function dFt(t){return typeof t=="string"||!lFt(t)&&uFt(t)&&cFt.call(t)==sFt}a(dFt,"isString");oqe.exports=dFt});var dqe=$((Idn,uqe)=>{f();var fFt="Expected a function",aqe=1/0,pFt=17976931348623157e292,cqe=NaN,mFt="[object Symbol]",hFt=/^\s+|\s+$/g,gFt=/^[-+]0x[0-9a-f]+$/i,AFt=/^0b[01]+$/i,yFt=/^0o[0-7]+$/i,CFt=parseInt,vFt=Object.prototype,xFt=vFt.toString;function EFt(t,e){var r;if(typeof e!="function")throw new TypeError(fFt);return t=_Ft(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}a(EFt,"before");function bFt(t){return EFt(2,t)}a(bFt,"once");function lqe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}a(lqe,"isObject");function IFt(t){return!!t&&typeof t=="object"}a(IFt,"isObjectLike");function TFt(t){return typeof t=="symbol"||IFt(t)&&xFt.call(t)==mFt}a(TFt,"isSymbol");function wFt(t){if(!t)return t===0?t:0;if(t=SFt(t),t===aqe||t===-aqe){var e=t<0?-1:1;return e*pFt}return t===t?t:0}a(wFt,"toFinite");function _Ft(t){var e=wFt(t),r=e%1;return e===e?r?e-r:e:0}a(_Ft,"toInteger");function SFt(t){if(typeof t=="number")return t;if(TFt(t))return cqe;if(lqe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=lqe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(hFt,"");var r=AFt.test(t);return r||yFt.test(t)?CFt(t.slice(2),r?2:8):gFt.test(t)?cqe:+t}a(SFt,"toNumber");uqe.exports=bFt});var vqe=$((_dn,Cqe)=>{f();var fqe=Uge(),RFt=sAe(),kFt=oAe(),pqe=Rz(),PFt=jUe(),zz=VUe(),mqe=XUe(),pAe=eqe(),gqe=iqe(),lT=sqe(),DFt=dqe(),{KeyObject:BFt,createSecretKey:NFt,createPrivateKey:MFt}=require("crypto"),Aqe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];RFt&&Aqe.splice(3,0,"PS256","PS384","PS512");var LFt={expiresIn:{isValid:a(function(t){return mqe(t)||lT(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:a(function(t){return mqe(t)||lT(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:a(function(t){return lT(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:PFt.bind(null,Aqe),message:'"algorithm" must be a valid string enum value'},header:{isValid:gqe,message:'"header" must be an object'},encoding:{isValid:lT,message:'"encoding" must be a string'},issuer:{isValid:lT,message:'"issuer" must be a string'},subject:{isValid:lT,message:'"subject" must be a string'},jwtid:{isValid:lT,message:'"jwtid" must be a string'},noTimestamp:{isValid:zz,message:'"noTimestamp" must be a boolean'},keyid:{isValid:lT,message:'"keyid" must be a string'},mutatePayload:{isValid:zz,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:zz,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:zz,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},FFt={iat:{isValid:pAe,message:'"iat" should be a number of seconds'},exp:{isValid:pAe,message:'"exp" should be a number of seconds'},nbf:{isValid:pAe,message:'"nbf" should be a number of seconds'}};function yqe(t,e,r,n){if(!gqe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(o){let s=t[o];if(!s){if(!e)throw new Error('"'+o+'" is not allowed in "'+n+'"');return}if(!s.isValid(r[o]))throw new Error(s.message)})}a(yqe,"validate");function OFt(t){return yqe(LFt,!1,t,"options")}a(OFt,"validateOptions");function QFt(t){return yqe(FFt,!0,t,"payload")}a(QFt,"validatePayload");var hqe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},UFt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Cqe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let o=typeof t=="object"&&!Buffer.isBuffer(t),s=Object.assign({alg:r.algorithm||"HS256",typ:o?"JWT":void 0,kid:r.keyid},r.header);function c(d){if(n)return n(d);throw d}if(a(c,"failure"),!e&&r.algorithm!=="none")return c(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof BFt))try{e=MFt(e)}catch{try{e=NFt(typeof e=="string"?Buffer.from(e):e)}catch{return c(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&e.type!=="secret")return c(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(e.type!=="private")return c(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!r.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return c(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof t>"u")return c(new Error("payload is required"));if(o){try{QFt(t)}catch(d){return c(d)}r.mutatePayload||(t=Object.assign({},t))}else{let d=UFt.filter(function(p){return typeof r[p]<"u"});if(d.length>0)return c(new Error("invalid "+d.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return c(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return c(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{OFt(r)}catch(d){return c(d)}if(!r.allowInvalidAsymmetricKeyTypes)try{kFt(s.alg,e)}catch(d){return c(d)}let l=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:o&&(t.iat=l),typeof r.notBefore<"u"){try{t.nbf=fqe(r.notBefore,l)}catch(d){return c(d)}if(typeof t.nbf>"u")return c(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=fqe(r.expiresIn,l)}catch(d){return c(d)}if(typeof t.exp>"u")return c(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(hqe).forEach(function(d){let p=hqe[d];if(typeof r[d]<"u"){if(typeof t[p]<"u")return c(new Error('Bad "options.'+d+'" option. The payload already has an "'+p+'" property.'));t[p]=r[d]}});let u=r.encoding||"utf8";if(typeof n=="function")n=n&&DFt(n),pqe.createSign({header:s,privateKey:e,payload:t,encoding:u}).once("error",n).once("done",function(d){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&d.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));n(null,d)});else{let d=pqe.sign({header:s,payload:t,secret:e,encoding:u});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&d.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return d}}});var Eqe=$((kdn,xqe)=>{f();xqe.exports={decode:Lge(),verify:QUe(),sign:vqe(),JsonWebTokenError:L9(),NotBeforeError:Fge(),TokenExpiredError:Oge()}});var $Ae=$((uyn,gHe)=>{f();function U6t(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=o,r.enabled=c,r.humanize=Qge(),r.destroy=d,Object.keys(t).forEach(p=>{r[p]=t[p]}),r.names=[],r.skips=[],r.formatters={};function e(p){let m=0;for(let h=0;h<p.length;h++)m=(m<<5)-m+p.charCodeAt(h),m|=0;return r.colors[Math.abs(m)%r.colors.length]}a(e,"selectColor"),r.selectColor=e;function r(p){let m,h=null,g,A;function y(...v){if(!y.enabled)return;let b=y,I=Number(new Date),S=I-(m||I);b.diff=S,b.prev=m,b.curr=I,m=I,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(F,O)=>{if(F==="%%")return"%";k++;let Y=r.formatters[O];if(typeof Y=="function"){let z=v[k];F=Y.call(b,z),v.splice(k,1),k--}return F}),r.formatArgs.call(b,v),(b.log||r.log).apply(b,v)}return a(y,"debug"),y.namespace=p,y.useColors=r.useColors(),y.color=r.selectColor(p),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:a(()=>h!==null?h:(g!==r.namespaces&&(g=r.namespaces,A=r.enabled(p)),A),"get"),set:a(v=>{h=v},"set")}),typeof r.init=="function"&&r.init(y),y}a(r,"createDebug");function n(p,m){let h=r(this.namespace+(typeof m>"u"?":":m)+p);return h.log=this.log,h}a(n,"extend");function o(p){r.save(p),r.namespaces=p,r.names=[],r.skips=[];let m,h=(typeof p=="string"?p:"").split(/[\s,]+/),g=h.length;for(m=0;m<g;m++)h[m]&&(p=h[m].replace(/\*/g,".*?"),p[0]==="-"?r.skips.push(new RegExp("^"+p.slice(1)+"$")):r.names.push(new RegExp("^"+p+"$")))}a(o,"enable");function s(){let p=[...r.names.map(l),...r.skips.map(l).map(m=>"-"+m)].join(",");return r.enable(""),p}a(s,"disable");function c(p){if(p[p.length-1]==="*")return!0;let m,h;for(m=0,h=r.skips.length;m<h;m++)if(r.skips[m].test(p))return!1;for(m=0,h=r.names.length;m<h;m++)if(r.names[m].test(p))return!0;return!1}a(c,"enabled");function l(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}a(l,"toNamespace");function u(p){return p instanceof Error?p.stack||p.message:p}a(u,"coerce");function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a(d,"destroy"),r.enable(r.load()),r}a(U6t,"setup");gHe.exports=U6t});var AHe=$((F0,bK)=>{f();F0.formatArgs=H6t;F0.save=$6t;F0.load=W6t;F0.useColors=q6t;F0.storage=j6t();F0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();F0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function q6t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}a(q6t,"useColors");function H6t(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+bK.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}a(H6t,"formatArgs");F0.log=console.debug||console.log||(()=>{});function $6t(t){try{t?F0.storage.setItem("debug",t):F0.storage.removeItem("debug")}catch{}}a($6t,"save");function W6t(){let t;try{t=F0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}a(W6t,"load");function j6t(){try{return localStorage}catch{}}a(j6t,"localstorage");bK.exports=$Ae()(F0);var{formatters:G6t}=bK.exports;G6t.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var CHe=$((hyn,yHe)=>{"use strict";f();yHe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),o=e.indexOf("--");return n!==-1&&(o===-1||n<o)}});var EHe=$((Ayn,xHe)=>{"use strict";f();var V6t=require("os"),vHe=require("tty"),ah=CHe(),{env:cu}=process,mT;ah("no-color")||ah("no-colors")||ah("color=false")||ah("color=never")?mT=0:(ah("color")||ah("colors")||ah("color=true")||ah("color=always"))&&(mT=1);"FORCE_COLOR"in cu&&(cu.FORCE_COLOR==="true"?mT=1:cu.FORCE_COLOR==="false"?mT=0:mT=cu.FORCE_COLOR.length===0?1:Math.min(parseInt(cu.FORCE_COLOR,10),3));function WAe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}a(WAe,"translateLevel");function jAe(t,e){if(mT===0)return 0;if(ah("color=16m")||ah("color=full")||ah("color=truecolor"))return 3;if(ah("color=256"))return 2;if(t&&!e&&mT===void 0)return 0;let r=mT||0;if(cu.TERM==="dumb")return r;if(process.platform==="win32"){let n=V6t.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in cu)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in cu)||cu.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in cu)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(cu.TEAMCITY_VERSION)?1:0;if(cu.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in cu){let n=parseInt((cu.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(cu.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(cu.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(cu.TERM)||"COLORTERM"in cu?1:r}a(jAe,"supportsColor");function z6t(t){let e=jAe(t,t&&t.isTTY);return WAe(e)}a(z6t,"getSupportLevel");xHe.exports={supportsColor:z6t,stdout:WAe(jAe(!0,vHe.isatty(1))),stderr:WAe(jAe(!0,vHe.isatty(2)))}});var IHe=$((td,TK)=>{f();var K6t=require("tty"),IK=require("util");td.init=r9t;td.log=Z6t;td.formatArgs=J6t;td.save=e9t;td.load=t9t;td.useColors=Y6t;td.destroy=IK.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");td.colors=[6,2,3,4,5,1];try{let t=EHe();t&&(t.stderr||t).level>=2&&(td.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}td.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Y6t(){return"colors"in td.inspectOpts?!!td.inspectOpts.colors:K6t.isatty(process.stderr.fd)}a(Y6t,"useColors");function J6t(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,o="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${o};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(o+"m+"+TK.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=X6t()+e+" "+t[0]}a(J6t,"formatArgs");function X6t(){return td.inspectOpts.hideDate?"":new Date().toISOString()+" "}a(X6t,"getDate");function Z6t(...t){return process.stderr.write(IK.format(...t)+`
`)}a(Z6t,"log");function e9t(t){t?process.env.DEBUG=t:delete process.env.DEBUG}a(e9t,"save");function t9t(){return process.env.DEBUG}a(t9t,"load");function r9t(t){t.inspectOpts={};let e=Object.keys(td.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=td.inspectOpts[e[r]]}a(r9t,"init");TK.exports=$Ae()(td);var{formatters:bHe}=TK.exports;bHe.o=function(t){return this.inspectOpts.colors=this.useColors,IK.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};bHe.O=function(t){return this.inspectOpts.colors=this.useColors,IK.inspect(t,this.inspectOpts)}});var MC=$((Eyn,GAe)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?GAe.exports=AHe():GAe.exports=IHe()});var _He=$(Ip=>{"use strict";f();var n9t=Ip&&Ip.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),i9t=Ip&&Ip.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),THe=Ip&&Ip.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&n9t(e,t,r);return i9t(e,t),e};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.req=Ip.json=Ip.toBuffer=void 0;var o9t=THe(require("http")),s9t=THe(require("https"));async function wHe(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}a(wHe,"toBuffer");Ip.toBuffer=wHe;async function a9t(t){let r=(await wHe(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let o=n;throw o.message+=` (input: ${r})`,o}}a(a9t,"json");Ip.json=a9t;function c9t(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?s9t:o9t).request(t,e),o=new Promise((s,c)=>{n.once("response",s).once("error",c).end()});return n.then=o.then.bind(o),n}a(c9t,"req");Ip.req=c9t});var zAe=$(O0=>{"use strict";f();var RHe=O0&&O0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),l9t=O0&&O0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kHe=O0&&O0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&RHe(e,t,r);return l9t(e,t),e},u9t=O0&&O0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&RHe(e,t,r)};Object.defineProperty(O0,"__esModule",{value:!0});O0.Agent=void 0;var d9t=kHe(require("net")),SHe=kHe(require("http")),f9t=require("https");u9t(_He(),O0);var LC=Symbol("AgentBaseInternalState"),VAe=class extends SHe.Agent{static{a(this,"Agent")}constructor(e){super(e),this[LC]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new d9t.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],o=n.indexOf(r);o!==-1&&(n.splice(o,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?f9t.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let o={...r,secureEndpoint:this.isSecureEndpoint(r)},s=this.getName(o),c=this.incrementSockets(s);Promise.resolve().then(()=>this.connect(e,o)).then(l=>{if(this.decrementSockets(s,c),l instanceof SHe.Agent)return l.addRequest(e,o);this[LC].currentSocket=l,super.createSocket(e,r,n)},l=>{this.decrementSockets(s,c),n(l)})}createConnection(){let e=this[LC].currentSocket;if(this[LC].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[LC].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[LC]&&(this[LC].defaultPort=e)}get protocol(){return this[LC].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[LC]&&(this[LC].protocol=e)}};O0.Agent=VAe});var PHe=$(_B=>{"use strict";f();var p9t=_B&&_B.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_B,"__esModule",{value:!0});_B.parseProxyResponse=void 0;var m9t=p9t(MC()),wK=(0,m9t.default)("https-proxy-agent:parse-proxy-response");function h9t(t){return new Promise((e,r)=>{let n=0,o=[];function s(){let p=t.read();p?d(p):t.once("readable",s)}a(s,"read");function c(){t.removeListener("end",l),t.removeListener("error",u),t.removeListener("readable",s)}a(c,"cleanup");function l(){c(),wK("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}a(l,"onend");function u(p){c(),wK("onerror %o",p),r(p)}a(u,"onerror");function d(p){o.push(p),n+=p.length;let m=Buffer.concat(o,n),h=m.indexOf(`\r
\r
`);if(h===-1){wK("have not received end of HTTP headers yet..."),s();return}let g=m.slice(0,h).toString("ascii").split(`\r
`),A=g.shift();if(!A)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let y=A.split(" "),v=+y[1],b=y.slice(2).join(" "),I={};for(let S of g){if(!S)continue;let k=S.indexOf(":");if(k===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${S}"`));let N=S.slice(0,k).toLowerCase(),F=S.slice(k+1).trimStart(),O=I[N];typeof O=="string"?I[N]=[O,F]:Array.isArray(O)?O.push(F):I[N]=F}wK("got proxy server response: %o %o",A,I),c(),e({connect:{statusCode:v,statusText:b,headers:I},buffered:m})}a(d,"ondata"),t.on("error",u),t.on("end",l),s()})}a(h9t,"parseProxyResponse");_B.parseProxyResponse=h9t});var LHe=$(ch=>{"use strict";f();var g9t=ch&&ch.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),A9t=ch&&ch.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),NHe=ch&&ch.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&g9t(e,t,r);return A9t(e,t),e},MHe=ch&&ch.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ch,"__esModule",{value:!0});ch.HttpsProxyAgent=void 0;var KAe=NHe(require("net")),DHe=NHe(require("tls")),y9t=MHe(require("assert")),C9t=MHe(MC()),v9t=zAe(),x9t=require("url"),E9t=PHe(),rO=(0,C9t.default)("https-proxy-agent"),_K=class extends v9t.Agent{static{a(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new x9t.URL(e):e,this.proxyHeaders=r?.headers??{},rO("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?BHe(r,"headers"):null,host:n,port:o}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let o;if(n.protocol==="https:"){rO("Creating `tls.Socket`: %o",this.connectOpts);let h=this.connectOpts.servername||this.connectOpts.host;o=DHe.connect({...this.connectOpts,servername:h})}else rO("Creating `net.Socket`: %o",this.connectOpts),o=KAe.connect(this.connectOpts);let s=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},c=KAe.isIPv6(r.host)?`[${r.host}]`:r.host,l=`CONNECT ${c}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let h=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(h).toString("base64")}`}s.Host=`${c}:${r.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let h of Object.keys(s))l+=`${h}: ${s[h]}\r
`;let u=(0,E9t.parseProxyResponse)(o);o.write(`${l}\r
`);let{connect:d,buffered:p}=await u;if(e.emit("proxyConnect",d),this.emit("proxyConnect",d,e),d.statusCode===200){if(e.once("socket",b9t),r.secureEndpoint){rO("Upgrading socket connection to TLS");let h=r.servername||r.host;return DHe.connect({...BHe(r,"host","path","port"),socket:o,servername:h})}return o}o.destroy();let m=new KAe.Socket({writable:!1});return m.readable=!0,e.once("socket",h=>{rO("Replaying proxy buffer for failed request"),(0,y9t.default)(h.listenerCount("data")>0),h.push(p),h.push(null)}),m}};_K.protocols=["http","https"];ch.HttpsProxyAgent=_K;function b9t(t){t.resume()}a(b9t,"resume");function BHe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}a(BHe,"omit")});var QHe=$(lh=>{"use strict";f();var I9t=lh&&lh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),T9t=lh&&lh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),OHe=lh&&lh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&I9t(e,t,r);return T9t(e,t),e},w9t=lh&&lh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lh,"__esModule",{value:!0});lh.HttpProxyAgent=void 0;var _9t=OHe(require("net")),S9t=OHe(require("tls")),R9t=w9t(MC()),k9t=require("events"),P9t=zAe(),FHe=require("url"),SB=(0,R9t.default)("http-proxy-agent"),SK=class extends P9t.Agent{static{a(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new FHe.URL(e):e,this.proxyHeaders=r?.headers??{},SB("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?D9t(r,"headers"):null,host:n,port:o}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,o=r.secureEndpoint?"https:":"http:",s=e.getHeader("host")||"localhost",c=`${o}//${s}`,l=new FHe.URL(e.path,c);r.port!==80&&(l.port=String(r.port)),e.path=String(l);let u=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let d=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;u["Proxy-Authorization"]=`Basic ${Buffer.from(d).toString("base64")}`}u["Proxy-Connection"]||(u["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let d of Object.keys(u)){let p=u[d];p&&e.setHeader(d,p)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,o;SB("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(SB("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,o=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(o),SB("Output buffer: %o",e.outputData[0].data));let s;return this.proxy.protocol==="https:"?(SB("Creating `tls.Socket`: %o",this.connectOpts),s=S9t.connect(this.connectOpts)):(SB("Creating `net.Socket`: %o",this.connectOpts),s=_9t.connect(this.connectOpts)),await(0,k9t.once)(s,"connect"),s}};SK.protocols=["http","https"];lh.HttpProxyAgent=SK;function D9t(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}a(D9t,"omit")});var d$e=$(WK=>{"use strict";f();Object.defineProperty(WK,"__esModule",{value:!0});WK.state=void 0;WK.state={operationRequestMap:new WeakMap}});function HOt(){try{return wye.default.statSync("/.dockerenv"),!0}catch{return!1}}function $Ot(){try{return wye.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function _ye(){return Tye===void 0&&(Tye=HOt()||$Ot()),Tye}var wye,Tye,w$e=Om(()=>{f();wye=Ne(require("node:fs"),1);a(HOt,"hasDockerEnv");a($Ot,"hasDockerCGroup");a(_ye,"isDocker")});function DB(){return Sye===void 0&&(Sye=WOt()||_ye()),Sye}var _$e,Sye,WOt,Rye=Om(()=>{f();_$e=Ne(require("node:fs"),1);w$e();WOt=a(()=>{try{return _$e.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");a(DB,"isInsideContainer")});var kye,R$e,k$e,S$e,yT,Pye=Om(()=>{f();kye=Ne(require("node:process"),1),R$e=Ne(require("node:os"),1),k$e=Ne(require("node:fs"),1);Rye();S$e=a(()=>{if(kye.default.platform!=="linux")return!1;if(R$e.default.release().toLowerCase().includes("microsoft"))return!DB();try{return k$e.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!DB():!1}catch{return!1}},"isWsl"),yT=kye.default.env.__IS_WSL_TEST__?S$e:S$e()});var Dye,cO,jOt,GOt,Bye,P$e=Om(()=>{f();Dye=Ne(require("node:process"),1),cO=Ne(require("node:fs/promises"),1);Pye();Pye();jOt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await cO.default.access(r,cO.constants.F_OK),n=!0}catch{}if(!n)return t;let o=await cO.default.readFile(r,{encoding:"utf8"}),s=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(o);return s?(e=s.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),GOt=a(async()=>`${await jOt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"powerShellPathFromWsl"),Bye=a(async()=>yT?GOt():`${Dye.default.env.SYSTEMROOT||Dye.default.env.windir||String.raw`C:\Windows`}\\System32\\WindowsPowerShell\\v1.0\\powershell.exe`,"powerShellPath")});function CT(t,e,r){let n=a(o=>Object.defineProperty(t,e,{value:o,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let o=r();return n(o),o},set(o){n(o)}}),t}var D$e=Om(()=>{f();a(CT,"defineLazyProperty")});async function Nye(){if(N$e.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await VOt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var B$e,N$e,M$e,VOt,L$e=Om(()=>{f();B$e=require("node:util"),N$e=Ne(require("node:process"),1),M$e=require("node:child_process"),VOt=(0,B$e.promisify)(M$e.execFile);a(Nye,"defaultBrowserId")});async function Q$e(t,{humanReadableOutput:e=!0}={}){if(F$e.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await zOt("osascript",["-e",t,r]);return n.trim()}var F$e,O$e,Mye,zOt,U$e=Om(()=>{f();F$e=Ne(require("node:process"),1),O$e=require("node:util"),Mye=require("node:child_process"),zOt=(0,O$e.promisify)(Mye.execFile);a(Q$e,"runAppleScript")});async function Lye(t){return Q$e(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var q$e=Om(()=>{f();U$e();a(Lye,"bundleName")});async function Fye(t=KOt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new GK(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,o=YOt[n];if(!o)throw new GK(`Unknown browser ID: ${n}`);return o}var H$e,$$e,KOt,YOt,GK,W$e=Om(()=>{f();H$e=require("node:util"),$$e=require("node:child_process"),KOt=(0,H$e.promisify)($$e.execFile),YOt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},GK=class extends Error{static{a(this,"UnknownBrowserError")}};a(Fye,"defaultBrowser")});async function Oye(){if(VK.default.platform==="darwin"){let t=await Nye();return{name:await Lye(t),id:t}}if(VK.default.platform==="linux"){let{stdout:t}=await JOt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:XOt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(VK.default.platform==="win32")return Fye();throw new Error("Only macOS, Linux, and Windows are supported")}var j$e,VK,G$e,JOt,XOt,V$e=Om(()=>{f();j$e=require("node:util"),VK=Ne(require("node:process"),1),G$e=require("node:child_process");L$e();q$e();W$e();JOt=(0,j$e.promisify)(G$e.execFile),XOt=a(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");a(Oye,"defaultBrowser")});var eWe={};Sa(eWe,{apps:()=>vT,default:()=>uO,openApp:()=>r7t});async function e7t(){let t=await Bye(),e=String.raw`(Get-ItemProperty -Path "HKCU:\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice").ProgId`,r=qye.Buffer.from(e,"utf16le").toString("base64"),{stdout:n}=await ZOt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),o=n.trim(),s={ChromeHTML:"com.google.chrome",BraveHTML:"com.brave.Browser",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return s[o]?{id:s[o]}:{}}function J$e(t){if(typeof t=="string"||Array.isArray(t))return t;let{[K$e]:e}=t;if(!e)throw new Error(`${K$e} is not supported`);return e}function KK({[BB]:t},{wsl:e}){if(e&&yT)return J$e(e);if(!t)throw new Error(`${BB} is not supported`);return J$e(t)}var Uye,qye,Hye,X$e,Z$e,$ye,zK,ZOt,Qye,z$e,BB,K$e,Y$e,lO,t7t,r7t,vT,uO,YK=Om(()=>{f();Uye=Ne(require("node:process"),1),qye=require("node:buffer"),Hye=Ne(require("node:path"),1),X$e=require("node:url"),Z$e=require("node:util"),$ye=Ne(require("node:child_process"),1),zK=Ne(require("node:fs/promises"),1);P$e();D$e();V$e();Rye();ZOt=(0,Z$e.promisify)($ye.default.execFile),Qye=Hye.default.dirname((0,X$e.fileURLToPath)(importMetaUrlShim)),z$e=Hye.default.join(Qye,"xdg-open"),{platform:BB,arch:K$e}=Uye.default;a(e7t,"getWindowsDefaultBrowserFromWsl");Y$e=a(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(o){r=o}throw r},"pTryEach"),lO=a(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return Y$e(t.app,l=>lO({...t,app:l}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return Y$e(e,l=>lO({...t,app:{name:l,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let l={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","com.brave.Browser":"brave","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},u={chrome:"--incognito",brave:"--incognito",firefox:"--private-window",edge:"--inPrivate"},d=yT?await e7t():await Oye();if(d.id in l){let p=l[d.id];return e==="browserPrivate"&&r.push(u[p]),lO({...t,app:{name:vT[p],arguments:r}})}throw new Error(`${d.name} is not supported as a default browser`)}let n,o=[],s={};if(BB==="darwin")n="open",t.wait&&o.push("--wait-apps"),t.background&&o.push("--background"),t.newInstance&&o.push("--new"),e&&o.push("-a",e);else if(BB==="win32"||yT&&!DB()&&!e){n=await Bye(),o.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),yT||(s.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&l.push(`"${t.target}"`),r.length>0&&(r=r.map(u=>`"\`"${u}\`""`),l.push("-ArgumentList",r.join(","))),t.target=qye.Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let l=!Qye||Qye==="/",u=!1;try{await zK.default.access(z$e,zK.constants.X_OK),u=!0}catch{}n=Uye.default.versions.electron??(BB==="android"||l||!u)?"xdg-open":z$e}r.length>0&&o.push(...r),t.wait||(s.stdio="ignore",s.detached=!0)}BB==="darwin"&&r.length>0&&o.push("--args",...r),t.target&&o.push(t.target);let c=$ye.default.spawn(n,o,s);return t.wait?new Promise((l,u)=>{c.once("error",u),c.once("close",d=>{if(!t.allowNonzeroExitCode&&d>0){u(new Error(`Exited with code ${d}`));return}l(c)})}):(c.unref(),c)},"baseOpen"),t7t=a((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return lO({...e,target:t})},"open"),r7t=a((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return lO({...e,app:{name:t,arguments:r}})},"openApp");a(J$e,"detectArchBinary");a(KK,"detectPlatformBinary");vT={};CT(vT,"chrome",()=>KK({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));CT(vT,"brave",()=>KK({darwin:"brave browser",win32:"brave",linux:["brave-browser","brave"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe",x64:["/mnt/c/Program Files/BraveSoftware/Brave-Browser/Application/brave.exe","/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe"]}}));CT(vT,"firefox",()=>KK({darwin:"firefox",win32:String.raw`C:\Program Files\Mozilla Firefox\firefox.exe`,linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));CT(vT,"edge",()=>KK({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));CT(vT,"browser",()=>"browser");CT(vT,"browserPrivate",()=>"browserPrivate");uO=t7t});var SWe=$(qC=>{"use strict";f();Object.defineProperty(qC,"__esModule",{value:!0});qC.bytePairEncode=qC.BinaryMap=qC.binaryMapKey=void 0;var R7t=a((t,e,r)=>{let n=r-e,o=16777215>>>Math.max(0,(3-n)*8),s=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&o,c=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&c;return s+16777216*l},"binaryMapKey");qC.binaryMapKey=R7t;var aCe=class t{static{a(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let o=n<6+r,s=(0,qC.binaryMapKey)(e,r,n);return o?this.final.get(s):this.nested.get(s)?.get(e,6+r,n)}set(e,r){let n=(0,qC.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let s=this.nested.get(n);if(s instanceof t)s.set(e.subarray(6),r);else{let c=new t;c.set(e.subarray(6),r),this.nested.set(n,c)}}};qC.BinaryMap=aCe;var UC=new Int32Array(128),_f=new Int32Array(128);function k7t(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,o=-1;for(;UC.length<r*2;)_f=new Int32Array(_f.length*2),UC=new Int32Array(UC.length*2);for(let u=0;u<r-1;u++){let d=e.get(t,u,u+2)??2147483647;d<n&&(n=d,o=u),_f[u]=u,UC[u]=d}_f[r-1]=r-1,UC[r-1]=2147483647,_f[r]=r,UC[r]=2147483647;let s=r+1;function c(u,d=0){if(u+d+2<s){let p=e.get(t,_f[u],_f[u+d+2]);if(p!==void 0)return p}return 2147483647}for(a(c,"getRank");n!==2147483647;){UC[_f[o]]=c(o,1),o>0&&(UC[_f[o-1]]=c(o-1,1));for(let u=o+1;u<s-1;u++)_f[u]=_f[u+1];s--,o=-1,n=2147483647;for(let u=0;u<s-1;u++){let d=UC[_f[u]];UC[_f[u]]<n&&(n=d,o=u)}}let l=[];for(let u=0;u<s-1;u++)l.push(e.get(t,_f[u],_f[u+1]));return l}a(k7t,"bytePairEncode");qC.bytePairEncode=k7t});var RWe=$(cY=>{"use strict";f();Object.defineProperty(cY,"__esModule",{value:!0});cY.makeTextEncoder=void 0;var cCe=class{static{a(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},lCe=class{static{a(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},P7t=a(()=>typeof Buffer<"u"?new lCe:new cCe,"makeTextEncoder");cY.makeTextEncoder=P7t});var kWe=$(lY=>{"use strict";f();Object.defineProperty(lY,"__esModule",{value:!0});lY.LRUCache=void 0;var uCe=class{static{a(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let o=new dCe(e,r);this.nodes.set(e,o),this.addNode(o),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};lY.LRUCache=uCe;var dCe=class{static{a(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var pCe=$(dY=>{"use strict";f();Object.defineProperty(dY,"__esModule",{value:!0});dY.TikTokenizer=void 0;var uY=SWe(),D7t=RWe(),B7t=kWe();function N7t(t){let e=new Map;try{let o=require("fs").readFileSync(t,"utf-8");return r(o),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let o of n.split(/[\r\n]+/)){if(o.trim()==="")continue;let s=o.split(" ");if(s.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let c=new Uint8Array(Buffer.from(s[0],"base64")),l=parseInt(s[1]);if(!isNaN(l))e.set(c,l);else throw new Error(`Can't parse ${s[1]} to integer`)}}a(r,"processBpeRanks")}a(N7t,"loadTikTokenBpe");function M7t(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(M7t,"escapeRegExp");var fCe=class{static{a(this,"TikTokenizer")}constructor(e,r,n,o=8192){this.textEncoder=(0,D7t.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new B7t.LRUCache(o);let s=typeof e=="string"?N7t(e):e;this.init(s,r,n)}init(e,r,n){this.encoder=new uY.BinaryMap;for(let[o,s]of e)this.encoder.set(o,s);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(o=>M7t(o)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[o,s]of e)this.decoder.set(s,o);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[o,s]of r)this.specialTokensDecoder.set(s,o)}findNextSpecialToken(e,r,n){let o=r,s=null;if(n&&this.specialTokensRegex)for(;s=e.slice(o).match(this.specialTokensRegex),!(!s||n&&n.includes(s[0]));)o+=s.index+1;let c=s?o+s.index:e.length;return[s,c]}encode(e,r){let n=[],o=0;for(;;){let s,c;if([s,c]=this.findNextSpecialToken(e,o,r),c>o&&this.encodeByIndex(e,n,o,c),s){if(o=o+this.encodeSpecialToken(n,s),o>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,o){let s,c=e.substring(n,o);for(this.regex.lastIndex=0;s=this.regex.exec(c);){let l=this.cache.get(s[0]);if(l)for(let u of l)r.push(u);else{let u=this.textEncoder.encode(s[0]),d=this.encoder.get(u,0,this.textEncoder.length);if(d!==void 0)r.push(d),this.cache.set(s[0],[d]);else{let p=(0,uY.bytePairEncode)(u,this.encoder,this.textEncoder.length);for(let m of p)r.push(m);this.cache.set(s[0],p)}}}}encodeTrimSuffixByIndex(e,r,n,o,s,c,l){let u,d=e.substring(n,o);for(this.regex.lastIndex=0;u=this.regex.exec(d);){let p=u[0],m=this.cache.get(p);if(m)if(c+m.length<=s)c+=m.length,l+=p.length,r.push(...m);else{let h=s-c;c+=h,l+=p.length,r.push(...m.slice(0,h));break}else{let h=this.textEncoder.encode(p),g=this.encoder.get(h,0,h.length);if(g!==void 0)if(this.cache.set(p,[g]),c+1<=s)c++,l+=p.length,r.push(g);else break;else{let A=(0,uY.bytePairEncode)(h,this.encoder,this.textEncoder.length);if(this.cache.set(p,A),c+A.length<=s){c+=A.length,l+=p.length;for(let y of A)r.push(y)}else{let y=s-c;c+=y,l+=p.length;for(let v=0;v<y;v++)r.push(A[v]);break}}}if(c>=s)break}return{tokenCount:c,encodeLength:l}}encodeTrimSuffix(e,r,n){let o=[],s=0,c=0,l=0;for(;;){let d,p;if([d,p]=this.findNextSpecialToken(e,s,n),p>s){let{tokenCount:m,encodeLength:h}=this.encodeTrimSuffixByIndex(e,o,s,p,r,c,l);if(c=m,l=h,c>=r)break}if(d!==null){if(c++,c<=r&&(s=s+this.encodeSpecialToken(o,d),l+=d[0].length,s>=e.length)||c>=r)break}else break}let u=l===e.length?e:e.slice(0,l);return{tokenIds:o,text:u}}encodeTrimPrefix(e,r,n){let o=[],s=0,c=0,l=0,u=new Map;for(u.set(c,l);;){let h,g;if([h,g]=this.findNextSpecialToken(e,s,n),g>s){let A,y=e.substring(s,g);for(this.regex.lastIndex=0;A=this.regex.exec(y);){let v=A[0],b=this.cache.get(v);if(b)c+=b.length,l+=v.length,o.push(...b),u.set(c,l);else{let I=this.textEncoder.encode(v),S=this.encoder.get(I);if(S!==void 0)this.cache.set(v,[S]),c++,l+=v.length,o.push(S),u.set(c,l);else{let k=(0,uY.bytePairEncode)(I,this.encoder,this.textEncoder.length);this.cache.set(v,k),c+=k.length,l+=v.length;for(let N of k)o.push(N);u.set(c,l)}}}}if(h!==null){if(s=s+this.encodeSpecialToken(o,h),c++,l+=h[0].length,u.set(c,l),s>=e.length)break}else break}if(c<=r)return{tokenIds:o,text:e};let d=c-r,p=0,m=0;for(let[h,g]of u)if(h>=d){p=h,m=g;break}if(p>r){let h=this.encode(e,n),g=h.slice(h.length-r);return{tokenIds:g,text:this.decode(g)}}return{tokenIds:o.slice(p),text:e.slice(m)}}decode(e){let r=[];for(let n of e){let o=[],s=this.decoder?.get(n);if(s!==void 0)o=Array.from(s);else{let c=this.specialTokensDecoder?.get(n);if(c!==void 0){let l=this.textEncoder.encode(c);o=Array.from(l.subarray(0,this.textEncoder.length))}}r.push(...o)}return this.textDecoder.decode(new Uint8Array(r))}};dY.TikTokenizer=fCe});var UWe=$(al=>{"use strict";f();Object.defineProperty(al,"__esModule",{value:!0});al.createTokenizer=al.createByEncoderName=al.createByModelName=al.getRegexByModel=al.getRegexByEncoder=al.getSpecialTokensByModel=al.getSpecialTokensByEncoder=al.MODEL_TO_ENCODING=void 0;var L7t=pCe(),F7t=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);al.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var fY="<|endoftext|>",PWe="<|fim_prefix|>",DWe="<|fim_middle|>",BWe="<|fim_suffix|>",NWe="<|endofprompt|>",IO="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",MWe="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",O7t=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],LWe=O7t.join("|");function mCe(t){let e="";if(al.MODEL_TO_ENCODING.has(t))e=al.MODEL_TO_ENCODING.get(t);else for(let[r,n]of F7t)if(t.startsWith(r)){e=n;break}return e}a(mCe,"getEncoderFromModelName");async function Q7t(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let o=await n.text();r.writeFileSync(e,o)}a(Q7t,"fetchAndSaveFile");function hCe(t){let e=new Map([[fY,50256]]);switch(t){case"o200k_base":e=new Map([[fY,199999],[NWe,200018]]);break;case"cl100k_base":e=new Map([[fY,100257],[PWe,100258],[DWe,100259],[BWe,100260],[NWe,100276]]);break;case"p50k_edit":e=new Map([[fY,50256],[PWe,50281],[DWe,50282],[BWe,50283]]);break;default:break}return e}a(hCe,"getSpecialTokensByEncoder");al.getSpecialTokensByEncoder=hCe;function U7t(t){let e=mCe(t);return hCe(e)}a(U7t,"getSpecialTokensByModel");al.getSpecialTokensByModel=U7t;function FWe(t){switch(t){case"o200k_base":return LWe;case"cl100k_base":return MWe;default:break}return IO}a(FWe,"getRegexByEncoder");al.getRegexByEncoder=FWe;function q7t(t){let e=mCe(t);return FWe(e)}a(q7t,"getRegexByModel");al.getRegexByModel=q7t;async function H7t(t,e=null){return OWe(mCe(t),e)}a(H7t,"createByModelName");al.createByModelName=H7t;async function OWe(t,e=null){let r,n,o=hCe(t);switch(t){case"o200k_base":r=LWe,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=MWe,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=IO,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=IO,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=IO,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=IO,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(o=new Map([...o,...e]));let s=require("fs"),c=require("path"),l=c.basename(n),u=c.resolve(__dirname,"..","model");s.existsSync(u)||s.mkdirSync(u,{recursive:!0});let d=c.resolve(u,l);return s.existsSync(d)||(console.log(`Downloading file from ${n}`),await Q7t(n,d),console.log(`Saved file to ${d}`)),QWe(d,o,r)}a(OWe,"createByEncoderName");al.createByEncoderName=OWe;function QWe(t,e,r,n=8192){return new L7t.TikTokenizer(t,e,r,n)}a(QWe,"createTokenizer");al.createTokenizer=QWe});var qWe=$(cl=>{"use strict";f();Object.defineProperty(cl,"__esModule",{value:!0});cl.createTokenizer=cl.createByEncoderName=cl.createByModelName=cl.getSpecialTokensByModel=cl.getSpecialTokensByEncoder=cl.getRegexByModel=cl.getRegexByEncoder=cl.MODEL_TO_ENCODING=cl.TikTokenizer=void 0;var $7t=pCe();Object.defineProperty(cl,"TikTokenizer",{enumerable:!0,get:a(function(){return $7t.TikTokenizer},"get")});var ET=UWe();Object.defineProperty(cl,"MODEL_TO_ENCODING",{enumerable:!0,get:a(function(){return ET.MODEL_TO_ENCODING},"get")});Object.defineProperty(cl,"getRegexByEncoder",{enumerable:!0,get:a(function(){return ET.getRegexByEncoder},"get")});Object.defineProperty(cl,"getRegexByModel",{enumerable:!0,get:a(function(){return ET.getRegexByModel},"get")});Object.defineProperty(cl,"getSpecialTokensByEncoder",{enumerable:!0,get:a(function(){return ET.getSpecialTokensByEncoder},"get")});Object.defineProperty(cl,"getSpecialTokensByModel",{enumerable:!0,get:a(function(){return ET.getSpecialTokensByModel},"get")});Object.defineProperty(cl,"createByModelName",{enumerable:!0,get:a(function(){return ET.createByModelName},"get")});Object.defineProperty(cl,"createByEncoderName",{enumerable:!0,get:a(function(){return ET.createByEncoderName},"get")});Object.defineProperty(cl,"createTokenizer",{enumerable:!0,get:a(function(){return ET.createTokenizer},"get")})});var ICe=$((KBn,uje)=>{"use strict";f();uje.exports=a(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var o=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?o[r]:o},"protocols")});var fje=$((XBn,dje)=>{"use strict";f();var xqt=ICe();function Eqt(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=xqt(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}a(Eqt,"parsePath");dje.exports=Eqt});var yje=$((t3n,Aje)=>{"use strict";f();var bqt=fje();function Iqt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}a(Iqt,"_interopDefaultLegacy");var Tqt=Iqt(bqt);function wqt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=a(function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var s=Function.bind.apply(e,o);return new s}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:a(function(){return t[n]},"get")})}),r}a(wqt,"getAugmentedNamespace");var mje={},_qt="text/plain",Sqt="us-ascii",pje=a((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),Rqt=a((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:o,hash:s}=r.groups,c=n.split(";");s=e?"":s;let l=!1;c[c.length-1]==="base64"&&(c.pop(),l=!0);let u=(c.shift()||"").toLowerCase(),p=[...c.map(m=>{let[h,g=""]=m.split("=").map(A=>A.trim());return h==="charset"&&(g=g.toLowerCase(),g===Sqt)?"":`${h}${g?`=${g}`:""}`}).filter(Boolean)];return l&&p.push("base64"),(p.length>0||u&&u!==_qt)&&p.unshift(u),`data:${p.join(";")},${l?o.trim():o}${s?`#${s}`:""}`},"normalizeDataURL");function kqt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return Rqt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let o=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&o.protocol==="https:"&&(o.protocol="http:"),e.forceHttps&&o.protocol==="http:"&&(o.protocol="https:"),e.stripAuthentication&&(o.username="",o.password=""),e.stripHash?o.hash="":e.stripTextFragment&&(o.hash=o.hash.replace(/#?:~:text.*?$/i,"")),o.pathname){let c=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,u="";for(;;){let p=c.exec(o.pathname);if(!p)break;let m=p[0],h=p.index,g=o.pathname.slice(l,h);u+=g.replace(/\/{2,}/g,"/"),u+=m,l=h+m.length}let d=o.pathname.slice(l,o.pathname.length);u+=d.replace(/\/{2,}/g,"/"),o.pathname=u}if(o.pathname)try{o.pathname=decodeURI(o.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let c=o.pathname.split("/"),l=c[c.length-1];pje(l,e.removeDirectoryIndex)&&(c=c.slice(0,-1),o.pathname=c.slice(1).join("/")+"/")}if(o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(o.hostname)&&(o.hostname=o.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let c of[...o.searchParams.keys()])pje(c,e.removeQueryParameters)&&o.searchParams.delete(c);if(e.removeQueryParameters===!0&&(o.search=""),e.sortQueryParameters){o.searchParams.sort();try{o.search=decodeURIComponent(o.search)}catch{}}e.removeTrailingSlash&&(o.pathname=o.pathname.replace(/\/$/,""));let s=t;return t=o.toString(),!e.removeSingleSlash&&o.pathname==="/"&&!s.endsWith("/")&&o.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||o.pathname==="/")&&o.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}a(kqt,"normalizeUrl");var Pqt=Object.freeze({__proto__:null,default:kqt}),Dqt=wqt(Pqt);Object.defineProperty(mje,"__esModule",{value:!0});var Bqt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nqt=Dqt,Mqt=hje(Nqt),Lqt=Tqt.default,Fqt=hje(Lqt);function hje(t){return t&&t.__esModule?t:{default:t}}a(hje,"_interopRequireDefault");var gje=a(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,o=a(function(u){var d=new Error(u);throw d.subject_url=e,d},"throwErr");(typeof e!="string"||!e.trim())&&o("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&o("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":Bqt(r))!=="object"&&(r={stripHash:!1}),e=(0,Mqt.default)(e,r));var s=(0,Fqt.default)(e);if(s.parse_failed){var c=s.href.match(n);c?(s.protocols=["ssh"],s.protocol="ssh",s.resource=c[2],s.host=c[2],s.user=c[1],s.pathname="/"+c[3],s.parse_failed=!1):o("URL parsing failed.")}return s},"parseUrl");gje.MAX_INPUT_LENGTH=2048;var Oqt=mje.default=gje;Aje.exports=Oqt});var xje=$((i3n,vje)=>{"use strict";f();var Qqt=ICe();function Cje(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=Qqt(t);if(t=t.substring(t.indexOf("://")+3),Cje(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}a(Cje,"isSsh");vje.exports=Cje});var Ije=$((a3n,bje)=>{"use strict";f();var Uqt=yje(),Eje=xje();function qqt(t){let e=Uqt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),Eje(e.protocols)||e.protocols.length===0&&Eje(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}a(qqt,"gitUp");bje.exports=qqt});var wje=$((u3n,Tje)=>{"use strict";f();var Hqt=Ije();function TCe(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(I){return typeof I=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=Hqt(t),o=n.resource.split("."),s=null;switch(n.toString=function(I){return TCe.stringify(this,I)},n.source=o.length>2?o.slice(1-o.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=o[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){s=n.name.split("/"),s.length===4&&(n.organization=s[1],n.owner=s[2],n.name=s[3],n.full_name=s[2]+"/"+s[3]);break}else{s=n.name.split("/"),s.length===2?(n.owner=s[1],n.name=s[1],n.full_name="_git/"+n.name):s.length===3?(n.name=s[2],s[0]==="DefaultCollection"?(n.owner=s[2],n.organization=s[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=s[0],n.full_name=n.owner+"/_git/"+n.name)):s.length===4&&(n.organization=s[0],n.owner=s[1],n.name=s[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){s=n.name.split("/"),s.length===4&&(n.organization=s[1],n.owner=s[2],n.name=s[3]);break}else{s=n.name.split("/"),s.length===5?(n.organization=s[0],n.owner=s[1],n.name=s[4],n.full_name="_git/"+n.name):s.length===3?(n.name=s[2],s[0]==="DefaultCollection"?(n.owner=s[2],n.organization=s[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=s[0],n.full_name=n.owner+"/_git/"+n.name)):s.length===4&&(n.organization=s[0],n.owner=s[1],n.name=s[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:s=n.name.split("/");var c=s.length-1;if(s.length>=2){var l=s.indexOf("-",2),u=s.indexOf("blob",2),d=s.indexOf("tree",2),p=s.indexOf("commit",2),m=s.indexOf("issues",2),h=s.indexOf("src",2),g=s.indexOf("raw",2),A=s.indexOf("edit",2);c=l>0?l-1:u>0&&d>0?Math.min(u-1,d-1):u>0?u-1:m>0?m-1:d>0?d-1:p>0?p-1:h>0?h-1:g>0?g-1:A>0?A-1:c,n.owner=s.slice(0,c).join("/"),n.name=s[c],p&&m<0&&(n.commit=s[c+2])}n.ref="",n.filepathtype="",n.filepath="";var y=s.length>c&&s[c+1]==="-"?c+1:c;s.length>y+2&&["raw","src","blob","tree","edit"].indexOf(s[y+1])>=0&&(n.filepathtype=s[y+1],n.ref=s[y+2],s.length>y+3&&(n.filepath=s.slice(y+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var v=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,b=v.exec(n.pathname);return b!=null&&(n.source="bitbucket-server",b[1]==="users"?n.owner="~"+b[2]:n.owner=b[2],n.organization=n.owner,n.name=b[3],s=b[4].split("/"),s.length>1&&(["raw","browse"].indexOf(s[1])>=0?(n.filepathtype=s[1],s.length>2&&(n.filepath=s.slice(2).join("/"))):s[1]==="commits"&&s.length>2&&(n.commit=s[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=jqt(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}a(TCe,"gitUrlParse");TCe.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",o=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+o:n+"@"+t.resource+":"+t.full_name+o;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+o;case"http":case"https":var s=t.token?$qt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+s+t.resource+r+"/"+Wqt(t)+o;default:return t.href}};function $qt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}a($qt,"buildToken");function Wqt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}a(Wqt,"buildPath");function jqt(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}a(jqt,"findLongestMatchingSubstring");Tje.exports=TCe});var Bje=$((exports,module)=>{f();var Module=typeof Module<"u"?Module:{},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{a(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=a((t,e)=>{throw e},"quit_"),scriptDirectory="";function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}a(locateFile,"locateFile");var readAsync,readBinary;if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=__dirname+"/",readBinary=a(t=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t);var e=fs.readFileSync(t);return e},"readBinary"),readAsync=a((t,e=!0)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),new Promise((r,n)=>{fs.readFile(t,e?void 0:"utf8",(o,s)=>{o?n(o):r(e?s.buffer:s)})})),"readAsync"),!Module.thisProgram&&process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=a((t,e)=>{throw process.exitCode=t,e},"quit_")}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:typeof document<"u"&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory.startsWith("blob:")?scriptDirectory="":scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1),ENVIRONMENT_IS_WORKER&&(readBinary=a(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=a(t=>isFileURI(t)?new Promise((e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{(n.status==200||n.status==0&&n.response)&&r(n.response),e(n.status)},n.onerror=e,n.send(null)}):fetch(t,{credentials:"same-origin"}).then(e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))),"readAsync"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.error.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var wasmMemory,ABORT=!1,EXITSTATUS,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,HEAP_DATA_VIEW;function updateMemoryViews(){var t=wasmMemory.buffer;Module.HEAP_DATA_VIEW=HEAP_DATA_VIEW=new DataView(t),Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}if(a(updateMemoryViews,"updateMemoryViews"),Module.wasmMemory)wasmMemory=Module.wasmMemory;else{var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:2147483648/65536})}updateMemoryViews();var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}a(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}a(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}a(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}a(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}a(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}a(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}a(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(t){return t}a(getUniqueRunDependency,"getUniqueRunDependency");function addRunDependency(t){runDependencies++,Module.monitorRunDependencies?.(runDependencies)}a(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies?.(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}a(removeRunDependency,"removeRunDependency");function abort(t){Module.onAbort?.(t),t="Aborted("+t+")",err(t),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(t);throw e}a(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",isDataURI=a(t=>t.startsWith(dataURIPrefix),"isDataURI"),isFileURI=a(t=>t.startsWith("file://"),"isFileURI");function findWasmBinary(){var t="tree-sitter.wasm";return isDataURI(t)?t:locateFile(t)}a(findWasmBinary,"findWasmBinary");var wasmBinaryFile;function getBinarySync(t){if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}a(getBinarySync,"getBinarySync");function getBinaryPromise(t){return wasmBinary?Promise.resolve().then(()=>getBinarySync(t)):readAsync(t).then(e=>new Uint8Array(e),()=>getBinarySync(t))}a(getBinaryPromise,"getBinaryPromise");function instantiateArrayBuffer(t,e,r){return getBinaryPromise(t).then(n=>WebAssembly.instantiate(n,e)).then(r,n=>{err(`failed to asynchronously prepare wasm: ${n}`),abort(n)})}a(instantiateArrayBuffer,"instantiateArrayBuffer");function instantiateAsync(t,e,r,n){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(e)&&!isFileURI(e)&&!ENVIRONMENT_IS_NODE&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(o=>{var s=WebAssembly.instantiateStreaming(o,r);return s.then(n,function(c){return err(`wasm streaming compile failed: ${c}`),err("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(e,r,n)})}):instantiateArrayBuffer(e,r,n)}a(instantiateAsync,"instantiateAsync");function getWasmImports(){return{env:wasmImports,wasi_snapshot_preview1:wasmImports,"GOT.mem":new Proxy(wasmImports,GOTHandler),"GOT.func":new Proxy(wasmImports,GOTHandler)}}a(getWasmImports,"getWasmImports");function createWasm(){var t=getWasmImports();function e(n,o){wasmExports=n.exports,wasmExports=relocateExports(wasmExports,1024);var s=getDylinkMetadata(o);return s.neededDynlibs&&(dynamicLibraries=s.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(wasmExports,"main"),LDSO.init(),loadDylibs(),addOnInit(wasmExports.__wasm_call_ctors),__RELOC_FUNCS__.push(wasmExports.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate"),wasmExports}a(e,"receiveInstance"),addRunDependency("wasm-instantiate");function r(n){e(n.instance,n.module)}if(a(r,"receiveInstantiationResult"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(n){return err(`Module.instantiateWasm callback failed with error: ${n}`),!1}return wasmBinaryFile||(wasmBinaryFile=findWasmBinary()),instantiateAsync(wasmBinary,wasmBinaryFile,t,r),{}}a(createWasm,"createWasm");var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}a(ExitStatus,"ExitStatus");var GOT={},currentModuleWeakSymbols=new Set([]),GOTHandler={get(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),currentModuleWeakSymbols.has(e)||(r.required=!0),r}},LE_HEAP_LOAD_F32=a(t=>HEAP_DATA_VIEW.getFloat32(t,!0),"LE_HEAP_LOAD_F32"),LE_HEAP_LOAD_F64=a(t=>HEAP_DATA_VIEW.getFloat64(t,!0),"LE_HEAP_LOAD_F64"),LE_HEAP_LOAD_I16=a(t=>HEAP_DATA_VIEW.getInt16(t,!0),"LE_HEAP_LOAD_I16"),LE_HEAP_LOAD_I32=a(t=>HEAP_DATA_VIEW.getInt32(t,!0),"LE_HEAP_LOAD_I32"),LE_HEAP_LOAD_U32=a(t=>HEAP_DATA_VIEW.getUint32(t,!0),"LE_HEAP_LOAD_U32"),LE_HEAP_STORE_F32=a((t,e)=>HEAP_DATA_VIEW.setFloat32(t,e,!0),"LE_HEAP_STORE_F32"),LE_HEAP_STORE_F64=a((t,e)=>HEAP_DATA_VIEW.setFloat64(t,e,!0),"LE_HEAP_STORE_F64"),LE_HEAP_STORE_I16=a((t,e)=>HEAP_DATA_VIEW.setInt16(t,e,!0),"LE_HEAP_STORE_I16"),LE_HEAP_STORE_I32=a((t,e)=>HEAP_DATA_VIEW.setInt32(t,e,!0),"LE_HEAP_STORE_I32"),LE_HEAP_STORE_U32=a((t,e)=>HEAP_DATA_VIEW.setUint32(t,e,!0),"LE_HEAP_STORE_U32"),callRuntimeCallbacks=a(t=>{for(;t.length>0;)t.shift()(Module)},"callRuntimeCallbacks"),UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder:void 0,UTF8ArrayToString=a((t,e,r)=>{for(var n=e+r,o=e;t[o]&&!(o>=n);)++o;if(o-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,o));for(var s="";e<o;){var c=t[e++];if(!(c&128)){s+=String.fromCharCode(c);continue}var l=t[e++]&63;if((c&224)==192){s+=String.fromCharCode((c&31)<<6|l);continue}var u=t[e++]&63;if((c&240)==224?c=(c&15)<<12|l<<6|u:c=(c&7)<<18|l<<12|u<<6|t[e++]&63,c<65536)s+=String.fromCharCode(c);else{var d=c-65536;s+=String.fromCharCode(55296|d>>10,56320|d&1023)}}return s},"UTF8ArrayToString"),getDylinkMetadata=a(t=>{var e=0,r=0;function n(){return t[e++]}a(n,"getU8");function o(){for(var ee=0,J=1;;){var G=t[e++];if(ee+=(G&127)*J,J*=128,!(G&128))break}return ee}a(o,"getLEB");function s(){var ee=o();return e+=ee,UTF8ArrayToString(t,e-ee,ee)}a(s,"getString");function c(ee,J){if(ee)throw new Error(J)}a(c,"failIf");var l="dylink.0";if(t instanceof WebAssembly.Module){var u=WebAssembly.Module.customSections(t,l);u.length===0&&(l="dylink",u=WebAssembly.Module.customSections(t,l)),c(u.length===0,"need dylink section"),t=new Uint8Array(u[0]),r=t.length}else{var d=new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer),p=d[0]==1836278016||d[0]==6386541;c(!p,"need to see wasm magic number"),c(t[8]!==0,"need the dylink section to be first"),e=9;var m=o();r=e+m,l=s()}var h={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(l=="dylink"){h.memorySize=o(),h.memoryAlign=o(),h.tableSize=o(),h.tableAlign=o();for(var g=o(),A=0;A<g;++A){var y=s();h.neededDynlibs.push(y)}}else{c(l!=="dylink.0");for(var v=1,b=2,I=3,S=4,k=256,N=3,F=1;e<r;){var O=n(),Y=o();if(O===v)h.memorySize=o(),h.memoryAlign=o(),h.tableSize=o(),h.tableAlign=o();else if(O===b)for(var g=o(),A=0;A<g;++A)y=s(),h.neededDynlibs.push(y);else if(O===I)for(var z=o();z--;){var V=s(),U=o();U&k&&h.tlsExports.add(V)}else if(O===S)for(var z=o();z--;){var H=s(),V=s(),U=o();(U&N)==F&&h.weakImports.add(V)}else e+=Y}}return h},"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return HEAP8[t];case"i8":return HEAP8[t];case"i16":return LE_HEAP_LOAD_I16((t>>1)*2);case"i32":return LE_HEAP_LOAD_I32((t>>2)*4);case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return LE_HEAP_LOAD_F32((t>>2)*4);case"double":return LE_HEAP_LOAD_F64((t>>3)*8);case"*":return LE_HEAP_LOAD_U32((t>>2)*4);default:abort(`invalid type for getValue: ${e}`)}}a(getValue,"getValue");var newDSO=a((t,e,r)=>{var n={refcount:1/0,name:t,exports:r,global:!0};return LDSO.loadedLibsByName[t]=n,e!=null&&(LDSO.loadedLibsByHandle[e]=n),n},"newDSO"),LDSO={loadedLibsByName:{},loadedLibsByHandle:{},init(){newDSO("__main__",0,wasmImports)}},___heap_base=78112,zeroMemory=a((t,e)=>(HEAPU8.fill(0,t,t+e),t),"zeroMemory"),alignMemory=a((t,e)=>Math.ceil(t/e)*e,"alignMemory"),getMemory=a(t=>{if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+alignMemory(t,16);return ___heap_base=r,GOT.__heap_base.value=r,e},"getMemory"),isInternalSym=a(t=>["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm","__start_em_js","__stop_em_js"].includes(t)||t.startsWith("__em_js__"),"isInternalSym"),uleb128Encode=a((t,e)=>{t<128?e.push(t):e.push(t%128|128,t>>7)},"uleb128Encode"),sigToWasmTypes=a(t=>{for(var e={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]);return r},"sigToWasmTypes"),generateFuncType=a((t,e)=>{var r=t.slice(0,1),n=t.slice(1),o={i:127,p:127,j:126,f:125,d:124,e:111};e.push(96),uleb128Encode(n.length,e);for(var s=0;s<n.length;++s)e.push(o[n[s]]);r=="v"?e.push(0):e.push(1,o[r])},"generateFuncType"),convertJsFunctionToWasm=a((t,e)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push(...r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var o=new WebAssembly.Module(new Uint8Array(n)),s=new WebAssembly.Instance(o,{e:{f:t}}),c=s.exports.f;return c},"convertJsFunctionToWasm"),wasmTableMirror=[],wasmTable=new WebAssembly.Table({initial:28,element:"anyfunc"}),getWasmTableEntry=a(t=>{var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e},"getWasmTableEntry"),updateTableMap=a((t,e)=>{if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}},"updateTableMap"),functionsInTableMap,getFunctionAddress=a(t=>(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.get(t)||0),"getFunctionAddress"),freeTableIndexes=[],getEmptyTableSlot=a(()=>{if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1},"getEmptyTableSlot"),setWasmTableEntry=a((t,e)=>{wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)},"setWasmTableEntry"),addFunction=a((t,e)=>{var r=getFunctionAddress(t);if(r)return r;var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(s){if(!(s instanceof TypeError))throw s;var o=convertJsFunctionToWasm(t,e);setWasmTableEntry(n,o)}return functionsInTableMap.set(t,n),n},"addFunction"),updateGOT=a((t,e)=>{for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||=new WebAssembly.Global({value:"i32",mutable:!0}),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err(`unhandled export type for '${r}': ${typeof n}`))}},"updateGOT"),relocateExports=a((t,e,r)=>{var n={};for(var o in t){var s=t[o];typeof s=="object"&&(s=s.value),typeof s=="number"&&(s+=e),n[o]=s}return updateGOT(n,r),n},"relocateExports"),isSymbolDefined=a(t=>{var e=wasmImports[t];return!(!e||e.stub)},"isSymbolDefined"),dynCallLegacy=a((t,e,r)=>{t=t.replace(/p/g,"i");var n=Module["dynCall_"+t];return n(e,...r)},"dynCallLegacy"),dynCall=a((t,e,r=[])=>{if(t.includes("j"))return dynCallLegacy(t,e,r);var n=getWasmTableEntry(e)(...r);return n},"dynCall"),stackSave=a(()=>_emscripten_stack_get_current(),"stackSave"),stackRestore=a(t=>__emscripten_stack_restore(t),"stackRestore"),createInvokeFunction=a(t=>(e,...r)=>{var n=stackSave();try{return dynCall(t,e,r)}catch(o){if(stackRestore(n),o!==o+0)throw o;_setThrew(1,0)}},"createInvokeFunction"),resolveGlobalSymbol=a((t,e=!1)=>{var r;return e&&"orig$"+t in wasmImports&&(t="orig$"+t),isSymbolDefined(t)?r=wasmImports[t]:t.startsWith("invoke_")&&(r=wasmImports[t]=createInvokeFunction(t.split("_")[1])),{sym:r,name:t}},"resolveGlobalSymbol"),UTF8ToString=a((t,e)=>t?UTF8ArrayToString(HEAPU8,t,e):"","UTF8ToString"),loadWebAssemblyModule=a((binary,flags,libName,localScope,handle)=>{var metadata=getDylinkMetadata(binary);currentModuleWeakSymbols=metadata.weakImports;function loadModule(){var firstLoad=!handle||!HEAP8[handle+8];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign),memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+8]=1,LE_HEAP_STORE_U32((handle+12>>2)*4,memoryBase),LE_HEAP_STORE_I32((handle+16>>2)*4,metadata.memorySize),LE_HEAP_STORE_U32((handle+20>>2)*4,tableBase),LE_HEAP_STORE_I32((handle+24>>2)*4,metadata.tableSize))}else memoryBase=LE_HEAP_LOAD_U32((handle+12>>2)*4),tableBase=LE_HEAP_LOAD_U32((handle+20>>2)*4);var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length;tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t).sym;return!e&&localScope&&(e=localScope[t]),e||(e=moduleExports[t]),e}a(resolveSymbol,"resolveSymbol");var proxyHandler={get(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in wasmImports&&!wasmImports[e].stub)return wasmImports[e];if(!(e in t)){var r;t[e]=(...n)=>(r||=resolveSymbol(e),r(...n))}return t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(module,instance){updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols();function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func=`(${args}) => { ${body} };`;ASM_CONSTS[start]=eval(func)}if(a(addEmAsm,"addEmAsm"),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}function addEmJs(name,cSig,body){var jsArgs=[];if(cSig=cSig.slice(1,-1),cSig!="void"){cSig=cSig.split(",");for(var i in cSig){var jsArg=cSig[i].split(" ").pop();jsArgs.push(jsArg.replace("*",""))}}var func=`(${jsArgs}) => ${body};`;moduleExports[name]=eval(func)}a(addEmJs,"addEmJs");for(var name in moduleExports)if(name.startsWith("__em_js__")){var start=moduleExports[name],jsString=UTF8ToString(start),parts=jsString.split("<::>");addEmJs(name.replace("__em_js__",""),parts[0],parts[1]),delete moduleExports[name]}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(a(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(binary,instance))}return WebAssembly.instantiate(binary,info).then(t=>postInstantiation(t.module,t.instance))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(module,instance)}return a(loadModule,"loadModule"),flags.loadAsync?metadata.neededDynlibs.reduce((t,e)=>t.then(()=>loadDynamicLibrary(e,flags,localScope)),Promise.resolve()).then(loadModule):(metadata.neededDynlibs.forEach(t=>loadDynamicLibrary(t,flags,localScope)),loadModule())},"loadWebAssemblyModule"),mergeLibSymbols=a((t,e)=>{for(var[r,n]of Object.entries(t)){let o=a(c=>{isSymbolDefined(c)||(wasmImports[c]=n)},"setImport");o(r);let s="__main_argc_argv";r=="main"&&o(s),r==s&&o("main"),r.startsWith("dynCall_")&&!Module.hasOwnProperty(r)&&(Module[r]=n)}},"mergeLibSymbols"),asyncLoad=a((t,e,r,n)=>{var o=n?"":`al ${t}`;readAsync(t).then(s=>{e(new Uint8Array(s)),o&&removeRunDependency(o)},s=>{if(r)r();else throw`Loading data file "${t}" failed.`}),o&&addRunDependency(o)},"asyncLoad");function loadDynamicLibrary(t,e={global:!0,nodelete:!0},r,n){var o=LDSO.loadedLibsByName[t];if(o)return e.global?o.global||(o.global=!0,mergeLibSymbols(o.exports,t)):r&&Object.assign(r,o.exports),e.nodelete&&o.refcount!==1/0&&(o.refcount=1/0),o.refcount++,n&&(LDSO.loadedLibsByHandle[n]=o),e.loadAsync?Promise.resolve(!0):!0;o=newDSO(t,n,"loading"),o.refcount=e.nodelete?1/0:1,o.global=e.global;function s(){if(n){var u=LE_HEAP_LOAD_U32((n+28>>2)*4),d=LE_HEAP_LOAD_U32((n+32>>2)*4);if(u&&d){var p=HEAP8.slice(u,u+d);return e.loadAsync?Promise.resolve(p):p}}var m=locateFile(t);if(e.loadAsync)return new Promise(function(h,g){asyncLoad(m,h,g)});if(!readBinary)throw new Error(`${m}: file not found, and synchronous loading of external files is not available`);return readBinary(m)}a(s,"loadLibData");function c(){return e.loadAsync?s().then(u=>loadWebAssemblyModule(u,e,t,r,n)):loadWebAssemblyModule(s(),e,t,r,n)}a(c,"getExports");function l(u){o.global?mergeLibSymbols(u,t):r&&Object.assign(r,u),o.exports=u}return a(l,"moduleLoaded"),e.loadAsync?c().then(u=>(l(u),!0)):(l(c()),!0)}a(loadDynamicLibrary,"loadDynamicLibrary");var reportUndefinedSymbols=a(()=>{for(var[t,e]of Object.entries(GOT))if(e.value==0){var r=resolveGlobalSymbol(t,!0).sym;if(!r&&!e.required)continue;if(typeof r=="function")e.value=addFunction(r,r.sig);else if(typeof r=="number")e.value=r;else throw new Error(`bad export type for '${t}': ${typeof r}`)}},"reportUndefinedSymbols"),loadDylibs=a(()=>{if(!dynamicLibraries.length){reportUndefinedSymbols();return}addRunDependency("loadDylibs"),dynamicLibraries.reduce((t,e)=>t.then(()=>loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})),Promise.resolve()).then(()=>{reportUndefinedSymbols(),removeRunDependency("loadDylibs")})},"loadDylibs"),noExitRuntime=Module.noExitRuntime||!0;function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":HEAP8[t]=e;break;case"i8":HEAP8[t]=e;break;case"i16":LE_HEAP_STORE_I16((t>>1)*2,e);break;case"i32":LE_HEAP_STORE_I32((t>>2)*4,e);break;case"i64":abort("to do setValue(i64) use WASM_BIGINT");case"float":LE_HEAP_STORE_F32((t>>2)*4,e);break;case"double":LE_HEAP_STORE_F64((t>>3)*8,e);break;case"*":LE_HEAP_STORE_U32((t>>2)*4,e);break;default:abort(`invalid type for setValue: ${r}`)}}a(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78112),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),__abort_js=a(()=>{abort("")},"__abort_js");__abort_js.sig="v";var nowIsMonotonic=1,__emscripten_get_now_is_monotonic=a(()=>nowIsMonotonic,"__emscripten_get_now_is_monotonic");__emscripten_get_now_is_monotonic.sig="i";var __emscripten_memcpy_js=a((t,e,r)=>HEAPU8.copyWithin(t,e,e+r),"__emscripten_memcpy_js");__emscripten_memcpy_js.sig="vppp";var _emscripten_date_now=a(()=>Date.now(),"_emscripten_date_now");_emscripten_date_now.sig="d";var _emscripten_get_now;_emscripten_get_now=a(()=>performance.now(),"_emscripten_get_now"),_emscripten_get_now.sig="d";var getHeapMax=a(()=>2147483648,"getHeapMax"),growMemory=a(t=>{var e=wasmMemory.buffer,r=(t-e.byteLength+65535)/65536;try{return wasmMemory.grow(r),updateMemoryViews(),1}catch{}},"growMemory"),_emscripten_resize_heap=a(t=>{var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=a((u,d)=>u+(d-u%d)%d,"alignUp"),o=1;o<=4;o*=2){var s=e*(1+.2/o);s=Math.min(s,t+100663296);var c=Math.min(r,n(Math.max(t,s),65536)),l=growMemory(c);if(l)return!0}return!1},"_emscripten_resize_heap");_emscripten_resize_heap.sig="ip";var _fd_close=a(t=>52,"_fd_close");_fd_close.sig="ii";var convertI32PairToI53Checked=a((t,e)=>e+2097152>>>0<4194305-!!t?(t>>>0)+e*4294967296:NaN,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,o){var s=convertI32PairToI53Checked(e,r);return 70}a(_fd_seek,"_fd_seek"),_fd_seek.sig="iiiiip";var printCharBuffers=[null,[],[]],printChar=a((t,e)=>{var r=printCharBuffers[t];e===0||e===10?((t===1?out:err)(UTF8ArrayToString(r,0)),r.length=0):r.push(e)},"printChar"),_fd_write=a((t,e,r,n)=>{for(var o=0,s=0;s<r;s++){var c=LE_HEAP_LOAD_U32((e>>2)*4),l=LE_HEAP_LOAD_U32((e+4>>2)*4);e+=8;for(var u=0;u<l;u++)printChar(t,HEAPU8[c+u]);o+=l}return LE_HEAP_STORE_U32((n>>2)*4,o),0},"_fd_write");_fd_write.sig="iippp";function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}a(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,o){let c=currentParseCallback(e,{row:r,column:n});typeof c=="string"?(setValue(o,c.length,"i32"),stringToUTF16(c,t,10240)):setValue(o,0,"i32")}a(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");var runtimeKeepaliveCounter=0,keepRuntimeAlive=a(()=>noExitRuntime||runtimeKeepaliveCounter>0,"keepRuntimeAlive"),_proc_exit=a(t=>{EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit?.(t),ABORT=!0),quit_(t,new ExitStatus(t))},"_proc_exit");_proc_exit.sig="vi";var exitJS=a((t,e)=>{EXITSTATUS=t,_proc_exit(t)},"exitJS"),handleException=a(t=>{if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)},"handleException"),lengthBytesUTF8=a(t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e},"lengthBytesUTF8"),stringToUTF8Array=a((t,e,r,n)=>{if(!(n>0))return 0;for(var o=r,s=r+n-1,c=0;c<t.length;++c){var l=t.charCodeAt(c);if(l>=55296&&l<=57343){var u=t.charCodeAt(++c);l=65536+((l&1023)<<10)|u&1023}if(l<=127){if(r>=s)break;e[r++]=l}else if(l<=2047){if(r+1>=s)break;e[r++]=192|l>>6,e[r++]=128|l&63}else if(l<=65535){if(r+2>=s)break;e[r++]=224|l>>12,e[r++]=128|l>>6&63,e[r++]=128|l&63}else{if(r+3>=s)break;e[r++]=240|l>>18,e[r++]=128|l>>12&63,e[r++]=128|l>>6&63,e[r++]=128|l&63}}return e[r]=0,r-o},"stringToUTF8Array"),stringToUTF8=a((t,e,r)=>stringToUTF8Array(t,HEAPU8,e,r),"stringToUTF8"),stackAlloc=a(t=>__emscripten_stack_alloc(t),"stackAlloc"),stringToUTF8OnStack=a(t=>{var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8(t,r,e),r},"stringToUTF8OnStack"),stringToUTF16=a((t,e,r)=>{if(r??=2147483647,r<2)return 0;r-=2;for(var n=e,o=r<t.length*2?r/2:t.length,s=0;s<o;++s){var c=t.charCodeAt(s);LE_HEAP_STORE_I16((e>>1)*2,c),e+=2}return LE_HEAP_STORE_I16((e>>1)*2,0),e-n},"stringToUTF16"),AsciiToString=a(t=>{for(var e="";;){var r=HEAPU8[t++];if(!r)return e;e+=String.fromCharCode(r)}},"AsciiToString"),wasmImports={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_abort_js:__abort_js,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,_emscripten_memcpy_js:__emscripten_memcpy_js,emscripten_get_now:_emscripten_get_now,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},wasmExports=createWasm(),___wasm_call_ctors=a(()=>(___wasm_call_ctors=wasmExports.__wasm_call_ctors)(),"___wasm_call_ctors"),___wasm_apply_data_relocs=a(()=>(___wasm_apply_data_relocs=wasmExports.__wasm_apply_data_relocs)(),"___wasm_apply_data_relocs"),_malloc=Module._malloc=t=>(_malloc=Module._malloc=wasmExports.malloc)(t),_calloc=Module._calloc=(t,e)=>(_calloc=Module._calloc=wasmExports.calloc)(t,e),_realloc=Module._realloc=(t,e)=>(_realloc=Module._realloc=wasmExports.realloc)(t,e),_free=Module._free=t=>(_free=Module._free=wasmExports.free)(t),_ts_language_symbol_count=Module._ts_language_symbol_count=t=>(_ts_language_symbol_count=Module._ts_language_symbol_count=wasmExports.ts_language_symbol_count)(t),_ts_language_state_count=Module._ts_language_state_count=t=>(_ts_language_state_count=Module._ts_language_state_count=wasmExports.ts_language_state_count)(t),_ts_language_version=Module._ts_language_version=t=>(_ts_language_version=Module._ts_language_version=wasmExports.ts_language_version)(t),_ts_language_field_count=Module._ts_language_field_count=t=>(_ts_language_field_count=Module._ts_language_field_count=wasmExports.ts_language_field_count)(t),_ts_language_next_state=Module._ts_language_next_state=(t,e,r)=>(_ts_language_next_state=Module._ts_language_next_state=wasmExports.ts_language_next_state)(t,e,r),_ts_language_symbol_name=Module._ts_language_symbol_name=(t,e)=>(_ts_language_symbol_name=Module._ts_language_symbol_name=wasmExports.ts_language_symbol_name)(t,e),_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=(t,e,r,n)=>(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=wasmExports.ts_language_symbol_for_name)(t,e,r,n),_strncmp=Module._strncmp=(t,e,r)=>(_strncmp=Module._strncmp=wasmExports.strncmp)(t,e,r),_ts_language_symbol_type=Module._ts_language_symbol_type=(t,e)=>(_ts_language_symbol_type=Module._ts_language_symbol_type=wasmExports.ts_language_symbol_type)(t,e),_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=(t,e)=>(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=wasmExports.ts_language_field_name_for_id)(t,e),_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=(t,e)=>(_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=wasmExports.ts_lookahead_iterator_new)(t,e),_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=t=>(_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=wasmExports.ts_lookahead_iterator_delete)(t),_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=(t,e)=>(_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=wasmExports.ts_lookahead_iterator_reset_state)(t,e),_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=(t,e,r)=>(_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=wasmExports.ts_lookahead_iterator_reset)(t,e,r),_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=t=>(_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=wasmExports.ts_lookahead_iterator_next)(t),_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=t=>(_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=wasmExports.ts_lookahead_iterator_current_symbol)(t),_memset=Module._memset=(t,e,r)=>(_memset=Module._memset=wasmExports.memset)(t,e,r),_memcpy=Module._memcpy=(t,e,r)=>(_memcpy=Module._memcpy=wasmExports.memcpy)(t,e,r),_ts_parser_delete=Module._ts_parser_delete=t=>(_ts_parser_delete=Module._ts_parser_delete=wasmExports.ts_parser_delete)(t),_ts_parser_reset=Module._ts_parser_reset=t=>(_ts_parser_reset=Module._ts_parser_reset=wasmExports.ts_parser_reset)(t),_ts_parser_set_language=Module._ts_parser_set_language=(t,e)=>(_ts_parser_set_language=Module._ts_parser_set_language=wasmExports.ts_parser_set_language)(t,e),_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=t=>(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=wasmExports.ts_parser_timeout_micros)(t),_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=(t,e,r)=>(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=wasmExports.ts_parser_set_timeout_micros)(t,e,r),_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=(t,e,r)=>(_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=wasmExports.ts_parser_set_included_ranges)(t,e,r),_memmove=Module._memmove=(t,e,r)=>(_memmove=Module._memmove=wasmExports.memmove)(t,e,r),_memcmp=Module._memcmp=(t,e,r)=>(_memcmp=Module._memcmp=wasmExports.memcmp)(t,e,r),_ts_query_new=Module._ts_query_new=(t,e,r,n,o)=>(_ts_query_new=Module._ts_query_new=wasmExports.ts_query_new)(t,e,r,n,o),_ts_query_delete=Module._ts_query_delete=t=>(_ts_query_delete=Module._ts_query_delete=wasmExports.ts_query_delete)(t),_iswspace=Module._iswspace=t=>(_iswspace=Module._iswspace=wasmExports.iswspace)(t),_iswalnum=Module._iswalnum=t=>(_iswalnum=Module._iswalnum=wasmExports.iswalnum)(t),_ts_query_pattern_count=Module._ts_query_pattern_count=t=>(_ts_query_pattern_count=Module._ts_query_pattern_count=wasmExports.ts_query_pattern_count)(t),_ts_query_capture_count=Module._ts_query_capture_count=t=>(_ts_query_capture_count=Module._ts_query_capture_count=wasmExports.ts_query_capture_count)(t),_ts_query_string_count=Module._ts_query_string_count=t=>(_ts_query_string_count=Module._ts_query_string_count=wasmExports.ts_query_string_count)(t),_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=(t,e,r)=>(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=wasmExports.ts_query_capture_name_for_id)(t,e,r),_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=(t,e,r)=>(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=wasmExports.ts_query_string_value_for_id)(t,e,r),_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=(t,e,r)=>(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=wasmExports.ts_query_predicates_for_pattern)(t,e,r),_ts_query_disable_capture=Module._ts_query_disable_capture=(t,e,r)=>(_ts_query_disable_capture=Module._ts_query_disable_capture=wasmExports.ts_query_disable_capture)(t,e,r),_ts_tree_copy=Module._ts_tree_copy=t=>(_ts_tree_copy=Module._ts_tree_copy=wasmExports.ts_tree_copy)(t),_ts_tree_delete=Module._ts_tree_delete=t=>(_ts_tree_delete=Module._ts_tree_delete=wasmExports.ts_tree_delete)(t),_ts_init=Module._ts_init=()=>(_ts_init=Module._ts_init=wasmExports.ts_init)(),_ts_parser_new_wasm=Module._ts_parser_new_wasm=()=>(_ts_parser_new_wasm=Module._ts_parser_new_wasm=wasmExports.ts_parser_new_wasm)(),_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=(t,e)=>(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=wasmExports.ts_parser_enable_logger_wasm)(t,e),_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=(t,e,r,n,o)=>(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=wasmExports.ts_parser_parse_wasm)(t,e,r,n,o),_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=t=>(_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=wasmExports.ts_parser_included_ranges_wasm)(t),_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=(t,e)=>(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=wasmExports.ts_language_type_is_named_wasm)(t,e),_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=(t,e)=>(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=wasmExports.ts_language_type_is_visible_wasm)(t,e),_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=t=>(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=wasmExports.ts_tree_root_node_wasm)(t),_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=t=>(_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=wasmExports.ts_tree_root_node_with_offset_wasm)(t),_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=t=>(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=wasmExports.ts_tree_edit_wasm)(t),_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=t=>(_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=wasmExports.ts_tree_included_ranges_wasm)(t),_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=(t,e)=>(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=wasmExports.ts_tree_get_changed_ranges_wasm)(t,e),_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=t=>(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=wasmExports.ts_tree_cursor_new_wasm)(t),_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=t=>(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=wasmExports.ts_tree_cursor_delete_wasm)(t),_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=t=>(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=wasmExports.ts_tree_cursor_reset_wasm)(t),_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=(t,e)=>(_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=wasmExports.ts_tree_cursor_reset_to_wasm)(t,e),_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=t=>(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=wasmExports.ts_tree_cursor_goto_first_child_wasm)(t),_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=t=>(_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=wasmExports.ts_tree_cursor_goto_last_child_wasm)(t),_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=t=>(_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_index_wasm)(t),_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=t=>(_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_position_wasm)(t),_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=t=>(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=wasmExports.ts_tree_cursor_goto_next_sibling_wasm)(t),_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=t=>(_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=wasmExports.ts_tree_cursor_goto_previous_sibling_wasm)(t),_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=(t,e)=>(_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=wasmExports.ts_tree_cursor_goto_descendant_wasm)(t,e),_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=t=>(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=wasmExports.ts_tree_cursor_goto_parent_wasm)(t),_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=t=>(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=wasmExports.ts_tree_cursor_current_node_type_id_wasm)(t),_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=t=>(_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=wasmExports.ts_tree_cursor_current_node_state_id_wasm)(t),_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=t=>(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=wasmExports.ts_tree_cursor_current_node_is_named_wasm)(t),_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=t=>(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=wasmExports.ts_tree_cursor_current_node_is_missing_wasm)(t),_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=t=>(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=wasmExports.ts_tree_cursor_current_node_id_wasm)(t),_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=t=>(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=wasmExports.ts_tree_cursor_start_position_wasm)(t),_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=t=>(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=wasmExports.ts_tree_cursor_end_position_wasm)(t),_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=t=>(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=wasmExports.ts_tree_cursor_start_index_wasm)(t),_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=t=>(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=wasmExports.ts_tree_cursor_end_index_wasm)(t),_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=t=>(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=wasmExports.ts_tree_cursor_current_field_id_wasm)(t),_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=t=>(_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=wasmExports.ts_tree_cursor_current_depth_wasm)(t),_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=t=>(_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=wasmExports.ts_tree_cursor_current_descendant_index_wasm)(t),_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=t=>(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=wasmExports.ts_tree_cursor_current_node_wasm)(t),_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=t=>(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=wasmExports.ts_node_symbol_wasm)(t),_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=(t,e)=>(_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=wasmExports.ts_node_field_name_for_child_wasm)(t,e),_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=(t,e)=>(_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=wasmExports.ts_node_children_by_field_id_wasm)(t,e),_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=t=>(_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=wasmExports.ts_node_first_child_for_byte_wasm)(t),_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=t=>(_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=wasmExports.ts_node_first_named_child_for_byte_wasm)(t),_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=t=>(_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=wasmExports.ts_node_grammar_symbol_wasm)(t),_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=t=>(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=wasmExports.ts_node_child_count_wasm)(t),_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=t=>(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=wasmExports.ts_node_named_child_count_wasm)(t),_ts_node_child_wasm=Module._ts_node_child_wasm=(t,e)=>(_ts_node_child_wasm=Module._ts_node_child_wasm=wasmExports.ts_node_child_wasm)(t,e),_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=(t,e)=>(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=wasmExports.ts_node_named_child_wasm)(t,e),_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=(t,e)=>(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=wasmExports.ts_node_child_by_field_id_wasm)(t,e),_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=t=>(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=wasmExports.ts_node_next_sibling_wasm)(t),_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=t=>(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=wasmExports.ts_node_prev_sibling_wasm)(t),_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=t=>(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=wasmExports.ts_node_next_named_sibling_wasm)(t),_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=t=>(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=wasmExports.ts_node_prev_named_sibling_wasm)(t),_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=t=>(_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=wasmExports.ts_node_descendant_count_wasm)(t),_ts_node_parent_wasm=Module._ts_node_parent_wasm=t=>(_ts_node_parent_wasm=Module._ts_node_parent_wasm=wasmExports.ts_node_parent_wasm)(t),_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=t=>(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=wasmExports.ts_node_descendant_for_index_wasm)(t),_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=t=>(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=wasmExports.ts_node_named_descendant_for_index_wasm)(t),_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=t=>(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=wasmExports.ts_node_descendant_for_position_wasm)(t),_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=t=>(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=wasmExports.ts_node_named_descendant_for_position_wasm)(t),_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=t=>(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=wasmExports.ts_node_start_point_wasm)(t),_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=t=>(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=wasmExports.ts_node_end_point_wasm)(t),_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=t=>(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=wasmExports.ts_node_start_index_wasm)(t),_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=t=>(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=wasmExports.ts_node_end_index_wasm)(t),_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=t=>(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=wasmExports.ts_node_to_string_wasm)(t),_ts_node_children_wasm=Module._ts_node_children_wasm=t=>(_ts_node_children_wasm=Module._ts_node_children_wasm=wasmExports.ts_node_children_wasm)(t),_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=t=>(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=wasmExports.ts_node_named_children_wasm)(t),_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=(t,e,r,n,o,s,c)=>(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=wasmExports.ts_node_descendants_of_type_wasm)(t,e,r,n,o,s,c),_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=t=>(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=wasmExports.ts_node_is_named_wasm)(t),_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=t=>(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=wasmExports.ts_node_has_changes_wasm)(t),_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=t=>(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=wasmExports.ts_node_has_error_wasm)(t),_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=t=>(_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=wasmExports.ts_node_is_error_wasm)(t),_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=t=>(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=wasmExports.ts_node_is_missing_wasm)(t),_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=t=>(_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=wasmExports.ts_node_is_extra_wasm)(t),_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=t=>(_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=wasmExports.ts_node_parse_state_wasm)(t),_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=t=>(_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=wasmExports.ts_node_next_parse_state_wasm)(t),_ts_query_matches_wasm=Module._ts_query_matches_wasm=(t,e,r,n,o,s,c,l,u,d)=>(_ts_query_matches_wasm=Module._ts_query_matches_wasm=wasmExports.ts_query_matches_wasm)(t,e,r,n,o,s,c,l,u,d),_ts_query_captures_wasm=Module._ts_query_captures_wasm=(t,e,r,n,o,s,c,l,u,d)=>(_ts_query_captures_wasm=Module._ts_query_captures_wasm=wasmExports.ts_query_captures_wasm)(t,e,r,n,o,s,c,l,u,d),_iswalpha=Module._iswalpha=t=>(_iswalpha=Module._iswalpha=wasmExports.iswalpha)(t),_iswblank=Module._iswblank=t=>(_iswblank=Module._iswblank=wasmExports.iswblank)(t),_iswdigit=Module._iswdigit=t=>(_iswdigit=Module._iswdigit=wasmExports.iswdigit)(t),_iswlower=Module._iswlower=t=>(_iswlower=Module._iswlower=wasmExports.iswlower)(t),_iswupper=Module._iswupper=t=>(_iswupper=Module._iswupper=wasmExports.iswupper)(t),_iswxdigit=Module._iswxdigit=t=>(_iswxdigit=Module._iswxdigit=wasmExports.iswxdigit)(t),_memchr=Module._memchr=(t,e,r)=>(_memchr=Module._memchr=wasmExports.memchr)(t,e,r),_strlen=Module._strlen=t=>(_strlen=Module._strlen=wasmExports.strlen)(t),_strcmp=Module._strcmp=(t,e)=>(_strcmp=Module._strcmp=wasmExports.strcmp)(t,e),_strncat=Module._strncat=(t,e,r)=>(_strncat=Module._strncat=wasmExports.strncat)(t,e,r),_strncpy=Module._strncpy=(t,e,r)=>(_strncpy=Module._strncpy=wasmExports.strncpy)(t,e,r),_towlower=Module._towlower=t=>(_towlower=Module._towlower=wasmExports.towlower)(t),_towupper=Module._towupper=t=>(_towupper=Module._towupper=wasmExports.towupper)(t),_setThrew=a((t,e)=>(_setThrew=wasmExports.setThrew)(t,e),"_setThrew"),__emscripten_stack_restore=a(t=>(__emscripten_stack_restore=wasmExports._emscripten_stack_restore)(t),"__emscripten_stack_restore"),__emscripten_stack_alloc=a(t=>(__emscripten_stack_alloc=wasmExports._emscripten_stack_alloc)(t),"__emscripten_stack_alloc"),_emscripten_stack_get_current=a(()=>(_emscripten_stack_get_current=wasmExports.emscripten_stack_get_current)(),"_emscripten_stack_get_current"),dynCall_jiji=Module.dynCall_jiji=(t,e,r,n,o)=>(dynCall_jiji=Module.dynCall_jiji=wasmExports.dynCall_jiji)(t,e,r,n,o),_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=t=>(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=wasmExports.orig$ts_parser_timeout_micros)(t),_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=(t,e)=>(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=wasmExports.orig$ts_parser_set_timeout_micros)(t,e);Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16;var calledRun;dependenciesFulfilled=a(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"runCaller");function callMain(t=[]){var e=resolveGlobalSymbol("main").sym;if(e){t.unshift(thisProgram);var r=t.length,n=stackAlloc((r+1)*4),o=n;t.forEach(c=>{LE_HEAP_STORE_U32((o>>2)*4,stringToUTF8OnStack(c)),o+=4}),LE_HEAP_STORE_U32((o>>2)*4,0);try{var s=e(r,n);return exitJS(s,!0),s}catch(c){return handleException(c)}}}a(callMain,"callMain");function run(t=arguments_){if(runDependencies>0||(preRun(),runDependencies>0))return;function e(){calledRun||(calledRun=!0,Module.calledRun=!0,!ABORT&&(initRuntime(),preMain(),Module.onRuntimeInitialized?.(),shouldRunNow&&callMain(t),postRun()))}a(e,"doRun"),Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()}if(a(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_CURSOR=4*SIZE_OF_INT,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/,VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{a(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(!e)r=0,e=null;else if(e.constructor===Language){r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}else throw new Error("Argument must be a Language");return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=a((u,d)=>e.slice(u),"currentParseCallback");else if(typeof e=="function")currentParseCallback=e;else throw new Error("Argument must be a string or a function");this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let o=0,s=0;if(n?.includedRanges){o=n.includedRanges.length,s=C._calloc(o,SIZE_OF_RANGE);let u=s;for(let d=0;d<o;d++)marshalRange(u,n.includedRanges[d]),u+=SIZE_OF_RANGE}let c=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,s,o);if(!c)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,c,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}getIncludedRanges(){C._ts_parser_included_ranges_wasm(this[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),n=new Array(e);if(e>0){let o=r;for(let s=0;s<e;s++)n[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return n}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}setLogger(e){if(!e)e=null;else if(typeof e!="function")throw new Error("Logger callback must be a function");return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{a(this,"Tree")}constructor(e,r,n,o){assertInternal(e),this[0]=r,this.language=n,this.textCallback=o}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}rootNodeWithOffset(e,r){let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),marshalPoint(n+SIZE_OF_INT,r),C._ts_tree_root_node_with_offset_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),o=new Array(r);if(r>0){let s=n;for(let c=0;c<r;c++)o[c]=unmarshalRange(s),s+=SIZE_OF_RANGE;C._free(n)}return o}getIncludedRanges(){C._ts_tree_included_ranges_wasm(this[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),n=new Array(e);if(e>0){let o=r;for(let s=0;s<e;s++)n[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return n}}class Node{static{a(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get grammarId(){return marshalNode(this),C._ts_node_grammar_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get grammarType(){return this.tree.language.types[this.grammarId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}get parseState(){return marshalNode(this),C._ts_node_parse_state_wasm(this.tree[0])}get nextParseState(){return marshalNode(this),C._ts_node_next_parse_state_wasm(this.tree[0])}get isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}get hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}get hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}get isError(){return marshalNode(this),C._ts_node_is_error_wasm(this.tree[0])===1}get isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}get isExtra(){return marshalNode(this),C._ts_node_is_extra_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);return r!==-1?this.childForFieldId(r):null}fieldNameForChild(e){marshalNode(this);let r=C._ts_node_field_name_for_child_wasm(this.tree[0],e);return r?AsciiToString(r):null}childrenForFieldName(e){let r=this.tree.language.fields.indexOf(e);return r!==-1&&r!==0?this.childrenForFieldId(r):[]}childrenForFieldId(e){marshalNode(this),C._ts_node_children_by_field_id_wasm(this.tree[0],e);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),o=new Array(r);if(r>0){let s=n;for(let c=0;c<r;c++)o[c]=unmarshalNode(this.tree,s),s+=SIZE_OF_NODE;C._free(n)}return o}firstChildForIndex(e){marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),C._ts_node_first_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}firstNamedChildForIndex(e){marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),C._ts_node_first_named_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let o=0;o<e;o++)this._children[o]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let o=0;o<e;o++)this._namedChildren[o]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let o=[],s=this.tree.language.types;for(let p=0,m=s.length;p<m;p++)e.includes(s[p])&&o.push(p);let c=C._malloc(SIZE_OF_INT*o.length);for(let p=0,m=o.length;p<m;p++)setValue(c+p*SIZE_OF_INT,o[p],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],c,o.length,r.row,r.column,n.row,n.column);let l=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=new Array(l);if(l>0){let p=u;for(let m=0;m<l;m++)d[m]=unmarshalNode(this.tree,p),p+=SIZE_OF_NODE}return C._free(u),C._free(c),d}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get descendantCount(){return marshalNode(this),C._ts_node_descendant_count_wasm(this.tree[0])}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{a(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}resetTo(e){marshalTreeCursor(this,TRANSFER_BUFFER),marshalTreeCursor(e,TRANSFER_BUFFER+SIZE_OF_CURSOR),C._ts_tree_cursor_reset_to_wasm(this.tree[0],e.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeStateId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_state_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}get currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}get currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}get currentFieldName(){return this.tree.language.fields[this.currentFieldId]}get currentDepth(){return marshalTreeCursor(this),C._ts_tree_cursor_current_depth_wasm(this.tree[0])}get currentDescendantIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_current_descendant_index_wasm(this.tree[0])}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoLastChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_last_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoFirstChildForIndex(e){marshalTreeCursor(this),setValue(TRANSFER_BUFFER+SIZE_OF_CURSOR,e,"i32");let r=C._ts_tree_cursor_goto_first_child_for_index_wasm(this.tree[0]);return unmarshalTreeCursor(this),r===1}gotoFirstChildForPosition(e){marshalTreeCursor(this),marshalPoint(TRANSFER_BUFFER+SIZE_OF_CURSOR,e);let r=C._ts_tree_cursor_goto_first_child_for_position_wasm(this.tree[0]);return unmarshalTreeCursor(this),r===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoPreviousSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_previous_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoDescendant(e){marshalTreeCursor(this),C._ts_tree_cursor_goto_descendant_wasm(this.tree[0],e),unmarshalTreeCursor(this)}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{a(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,o=this.types.length;n<o;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,o=this.fields.length;n<o;n++){let s=C._ts_language_field_name_for_id(this[0],n);s!==0?this.fields[n]=UTF8ToString(s):this.fields[n]=null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}get stateCount(){return C._ts_language_state_count(this[0])}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),o=C._malloc(n+1);stringToUTF8(e,o,n+1);let s=C._ts_language_symbol_for_name(this[0],o,n,r);return C._free(o),s||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}nextState(e,r){return C._ts_language_next_state(this[0],e,r)}lookaheadIterator(e){let r=C._ts_lookahead_iterator_new(this[0],e);return r?new LookaheadIterable(INTERNAL,r,this):null}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let o=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!o){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=getValue(TRANSFER_BUFFER,"i32"),b=UTF8ToString(n,v).length,I=e.substr(b,100).split(`
`)[0],S=I.match(QUERY_WORD_REGEX)[0],k;switch(y){case 2:k=new RangeError(`Bad node name '${S}'`);break;case 3:k=new RangeError(`Bad field name '${S}'`);break;case 4:k=new RangeError(`Bad capture name @${S}`);break;case 5:k=new TypeError(`Bad pattern structure at offset ${b}: '${I}'...`),S="";break;default:k=new SyntaxError(`Bad syntax at offset ${b}: '${I}'...`),S="";break}throw k.index=b,k.length=S.length,C._free(n),k}let s=C._ts_query_string_count(o),c=C._ts_query_capture_count(o),l=C._ts_query_pattern_count(o),u=new Array(c),d=new Array(s);for(let y=0;y<c;y++){let v=C._ts_query_capture_name_for_id(o,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(v,b)}for(let y=0;y<s;y++){let v=C._ts_query_string_value_for_id(o,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");d[y]=UTF8ToString(v,b)}let p=new Array(l),m=new Array(l),h=new Array(l),g=new Array(l),A=new Array(l);for(let y=0;y<l;y++){let v=C._ts_query_predicates_for_pattern(o,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");g[y]=[],A[y]=[];let I=[],S=v;for(let k=0;k<b;k++){let N=getValue(S,"i32");S+=SIZE_OF_INT;let F=getValue(S,"i32");if(S+=SIZE_OF_INT,N===PREDICATE_STEP_TYPE_CAPTURE)I.push({type:"capture",name:u[F]});else if(N===PREDICATE_STEP_TYPE_STRING)I.push({type:"string",value:d[F]});else if(I.length>0){if(I[0].type!=="string")throw new Error("Predicates must begin with a literal value");let O=I[0].value,Y=!0,z=!0,V;switch(O){case"any-not-eq?":case"not-eq?":Y=!1;case"any-eq?":case"eq?":if(I.length!==3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 2, got ${I.length-1}`);if(I[1].type!=="capture")throw new Error(`First argument of \`#${O}\` predicate must be a capture. Got "${I[1].value}"`);if(z=!O.startsWith("any-"),I[2].type==="capture"){let J=I[1].name,G=I[2].name;A[y].push(j=>{let Z=[],ie=[];for(let re of j)re.name===J&&Z.push(re.node),re.name===G&&ie.push(re.node);let ne=a((re,fe,ye)=>ye?re.text===fe.text:re.text!==fe.text,"compare");return z?Z.every(re=>ie.some(fe=>ne(re,fe,Y))):Z.some(re=>ie.some(fe=>ne(re,fe,Y)))})}else{V=I[1].name;let J=I[2].value,G=a(Z=>Z.text===J,"matches"),j=a(Z=>Z.text!==J,"doesNotMatch");A[y].push(Z=>{let ie=[];for(let re of Z)re.name===V&&ie.push(re.node);let ne=Y?G:j;return z?ie.every(ne):ie.some(ne)})}break;case"any-not-match?":case"not-match?":Y=!1;case"any-match?":case"match?":if(I.length!==3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 2, got ${I.length-1}.`);if(I[1].type!=="capture")throw new Error(`First argument of \`#${O}\` predicate must be a capture. Got "${I[1].value}".`);if(I[2].type!=="string")throw new Error(`Second argument of \`#${O}\` predicate must be a string. Got @${I[2].value}.`);V=I[1].name;let U=new RegExp(I[2].value);z=!O.startsWith("any-"),A[y].push(J=>{let G=[];for(let Z of J)Z.name===V&&G.push(Z.node.text);let j=a((Z,ie)=>ie?U.test(Z):!U.test(Z),"test");return G.length===0?!Y:z?G.every(Z=>j(Z,Y)):G.some(Z=>j(Z,Y))});break;case"set!":if(I.length<2||I.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${I.length-1}.`);if(I.some(J=>J.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');p[y]||(p[y]={}),p[y][I[1].value]=I[2]?I[2].value:null;break;case"is?":case"is-not?":if(I.length<2||I.length>3)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected 1 or 2. Got ${I.length-1}.`);if(I.some(J=>J.type!=="string"))throw new Error(`Arguments to \`#${O}\` predicate must be a strings.".`);let H=O==="is?"?m:h;H[y]||(H[y]={}),H[y][I[1].value]=I[2]?I[2].value:null;break;case"not-any-of?":Y=!1;case"any-of?":if(I.length<2)throw new Error(`Wrong number of arguments to \`#${O}\` predicate. Expected at least 1. Got ${I.length-1}.`);if(I[1].type!=="capture")throw new Error(`First argument of \`#${O}\` predicate must be a capture. Got "${I[1].value}".`);for(let J=2;J<I.length;J++)if(I[J].type!=="string")throw new Error(`Arguments to \`#${O}\` predicate must be a strings.".`);V=I[1].name;let ee=I.slice(2).map(J=>J.value);A[y].push(J=>{let G=[];for(let j of J)j.name===V&&G.push(j.node.text);return G.length===0?!Y:G.every(j=>ee.includes(j))===Y});break;default:g[y].push({operator:O,operands:I.slice(1)})}I.length=0}}Object.freeze(p[y]),Object.freeze(m[y]),Object.freeze(h[y])}return C._free(n),new Query(INTERNAL,o,u,A,g,Object.freeze(p),Object.freeze(m),Object.freeze(h))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let n=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(n))}else r=fetch(n).then(o=>o.arrayBuffer().then(s=>{if(o.ok)return new Uint8Array(s);{let c=new TextDecoder("utf-8").decode(s);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}return r.then(n=>loadWebAssemblyModule(n,{loadAsync:!0})).then(n=>{let o=Object.keys(n),s=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));s||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=n[s]();return new Language(INTERNAL,c)})}}class LookaheadIterable{static{a(this,"LookaheadIterable")}constructor(e,r,n){assertInternal(e),this[0]=r,this.language=n}get currentTypeId(){return C._ts_lookahead_iterator_current_symbol(this[0])}get currentType(){return this.language.types[this.currentTypeId]||"ERROR"}delete(){C._ts_lookahead_iterator_delete(this[0]),this[0]=0}resetState(e){return C._ts_lookahead_iterator_reset_state(this[0],e)}reset(e,r){return C._ts_lookahead_iterator_reset(this[0],e[0],r)?(this.language=e,!0):!1}[Symbol.iterator](){let e=this;return{next(){return C._ts_lookahead_iterator_next(e[0])?{done:!1,value:e.currentType}:{done:!0,value:""}}}}}class Query{static{a(this,"Query")}constructor(e,r,n,o,s,c,l,u){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=o,this.predicates=s,this.setProperties=c,this.assertedProperties=l,this.refutedProperties=u,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,{startPosition:r=ZERO_POINT,endPosition:n=ZERO_POINT,startIndex:o=0,endIndex:s=0,matchLimit:c=4294967295,maxStartDepth:l=4294967295}={}){if(typeof c!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o,s,c,l);let u=getValue(TRANSFER_BUFFER,"i32"),d=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),m=new Array(u);this.exceededMatchLimit=!!p;let h=0,g=d;for(let A=0;A<u;A++){let y=getValue(g,"i32");g+=SIZE_OF_INT;let v=getValue(g,"i32");g+=SIZE_OF_INT;let b=new Array(v);if(g=unmarshalCaptures(this,e.tree,g,b),this.textPredicates[y].every(I=>I(b))){m[h]={pattern:y,captures:b};let I=this.setProperties[y];I&&(m[h].setProperties=I);let S=this.assertedProperties[y];S&&(m[h].assertedProperties=S);let k=this.refutedProperties[y];k&&(m[h].refutedProperties=k),h++}}return m.length=h,C._free(d),m}captures(e,{startPosition:r=ZERO_POINT,endPosition:n=ZERO_POINT,startIndex:o=0,endIndex:s=0,matchLimit:c=4294967295,maxStartDepth:l=4294967295}={}){if(typeof c!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o,s,c,l);let u=getValue(TRANSFER_BUFFER,"i32"),d=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),m=[];this.exceededMatchLimit=!!p;let h=[],g=d;for(let A=0;A<u;A++){let y=getValue(g,"i32");g+=SIZE_OF_INT;let v=getValue(g,"i32");g+=SIZE_OF_INT;let b=getValue(g,"i32");if(g+=SIZE_OF_INT,h.length=v,g=unmarshalCaptures(this,e.tree,g,h),this.textPredicates[y].every(I=>I(h))){let I=h[b],S=this.setProperties[y];S&&(I.setProperties=S);let k=this.assertedProperties[y];k&&(I.assertedProperties=k);let N=this.refutedProperties[y];N&&(I.refutedProperties=N),m.push(I)}}return C._free(d),m}predicatesForPattern(e){return this.predicates[e]}disableCapture(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1),C._ts_query_disable_capture(this[0],n,r),C._free(n)}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,o=t.textCallback(e,null,r);for(e+=o.length;e<r;){let s=t.textCallback(e,null,r);if(s&&s.length>0)e+=s.length,o+=s;else break}return e>r&&(o=o.slice(0,n)),o}a(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let o=0,s=n.length;o<s;o++){let c=getValue(r,"i32");r+=SIZE_OF_INT;let l=unmarshalNode(e,r);r+=SIZE_OF_NODE,n[o]={name:t.captureNames[c],node:l}}return r}a(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}a(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}a(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}a(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(e+=SIZE_OF_INT,r===0)return null;let n=getValue(e,"i32");e+=SIZE_OF_INT;let o=getValue(e,"i32");e+=SIZE_OF_INT;let s=getValue(e,"i32");e+=SIZE_OF_INT;let c=getValue(e,"i32"),l=new Node(INTERNAL,t);return l.id=r,l.startIndex=n,l.startPosition={row:o,column:s},l[0]=c,l}a(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32"),setValue(e+3*SIZE_OF_INT,t[3],"i32")}a(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),t[3]=getValue(TRANSFER_BUFFER+3*SIZE_OF_INT,"i32")}a(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}a(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32")>>>0,column:getValue(t+SIZE_OF_INT,"i32")>>>0}}a(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.endPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.endIndex,"i32"),t+=SIZE_OF_INT}a(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32")>>>0,t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32")>>>0,e}a(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}a(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var d1e=$((mFn,pGe)=>{f();var u1e=require("fs"),sJ=require("path"),zO=sJ.join,_$t=sJ.dirname,dGe=u1e.accessSync&&function(t){try{u1e.accessSync(t)}catch{return!1}return!0}||u1e.existsSync||sJ.existsSync,fGe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function S$t(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(fGe).map(function(u){u in t||(t[u]=fGe[u])}),t.module_root||(t.module_root=R$t(__filename)),sJ.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,o=t.try.length,s,c,l;n<o;n++){s=zO.apply(null,t.try[n].map(function(u){return t[u]||u})),r.push(s);try{return c=t.path?e.resolve(s):e(s),t.path||(c.path=s),c}catch(u){if(u.code!=="MODULE_NOT_FOUND"&&u.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(u.message))throw u}}throw l=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(u){return t.arrow+u}).join(`
`)),l.tries=r,l}a(S$t,"bindings");pGe.exports=S$t;function R$t(t){for(var e=_$t(t),r;;){if(e==="."&&(e=process.cwd()),dGe(zO(e,"dist")))return zO(e,"dist");if(dGe(zO(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=zO(e,"..")}}a(R$t,"getRoot")});var hGe=$((AFn,mGe)=>{f();mGe.exports=d1e()("node_sqlite3.node")});var yGe=$(AGe=>{f();var k$t=require("util");function P$t(t,e,r){let n=t[e];t[e]=function(){let o=new Error,s=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return k$t.inspect(l,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let c=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=a(function(){let u=arguments[0];return u&&u.stack&&!u.__augmented&&(u.stack=gGe(u).join(`
`),u.stack+=`
--> in `+s,u.stack+=`
`+gGe(o).slice(1).join(`
`),u.__augmented=!0),c.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}a(P$t,"extendTrace");AGe.extendTrace=P$t;function gGe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}a(gGe,"filter")});var EGe=$((vGe,xGe)=>{f();var D$t=require("path"),yh=hGe(),XB=require("events").EventEmitter;xGe.exports=vGe=yh;function ZB(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let s=n[n.length-1];r=a(function(c){c&&s(c)},"errBack")}let o=new aJ(this,e,r);return t.call(this,o,n)}}a(ZB,"normalizeMethod");function p1e(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}a(p1e,"inherits");yh.cached={Database:a(function(t,e,r){if(t===""||t===":memory:")return new Rf(t,e,r);let n;if(t=D$t.resolve(t),!yh.cached.objects[t])n=yh.cached.objects[t]=new Rf(t,e,r);else{n=yh.cached.objects[t];let s=typeof e=="number"?r:e;if(typeof s=="function"){let c=function(){s.call(n,null)};var o=c;a(c,"cb"),n.open?process.nextTick(c):n.once("open",c)}}return n},"Database"),objects:{}};var Rf=yh.Database,aJ=yh.Statement,f1e=yh.Backup;p1e(Rf,XB);p1e(aJ,XB);p1e(f1e,XB);Rf.prototype.prepare=ZB(function(t,e){return e.length?t.bind.apply(t,e):t});Rf.prototype.run=ZB(function(t,e){return t.run.apply(t,e).finalize(),this});Rf.prototype.get=ZB(function(t,e){return t.get.apply(t,e).finalize(),this});Rf.prototype.all=ZB(function(t,e){return t.all.apply(t,e).finalize(),this});Rf.prototype.each=ZB(function(t,e){return t.each.apply(t,e).finalize(),this});Rf.prototype.map=ZB(function(t,e){return t.map.apply(t,e).finalize(),this});Rf.prototype.backup=function(){let t;return arguments.length<=2?t=new f1e(this,arguments[0],"main","main",!0,arguments[1]):t=new f1e(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[yh.BUSY,yh.LOCKED],t};aJ.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let o={};if(n.length){let s=Object.keys(n[0]),c=s[0];if(s.length>2)for(let l=0;l<n.length;l++)o[n[l][c]]=n[l];else{let l=s[1];for(let u=0;u<n.length;u++)o[n[u][c]]=n[u][l]}}e(r,o)}),this.all.apply(this,t)};var CGe=!1,m1e=["trace","profile","change"];Rf.prototype.addListener=Rf.prototype.on=function(t){let e=XB.prototype.addListener.apply(this,arguments);return m1e.indexOf(t)>=0&&this.configure(t,!0),e};Rf.prototype.removeListener=function(t){let e=XB.prototype.removeListener.apply(this,arguments);return m1e.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Rf.prototype.removeAllListeners=function(t){let e=XB.prototype.removeAllListeners.apply(this,arguments);return m1e.indexOf(t)>=0&&this.configure(t,!1),e};yh.verbose=function(){if(!CGe){let t=yGe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Rf.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(aJ.prototype,e)}),CGe=!0}return yh}});var vJ=$(dl=>{"use strict";f();Object.defineProperty(dl,"__esModule",{value:!0});dl.thenable=dl.typedArray=dl.stringArray=dl.array=dl.func=dl.error=dl.number=dl.string=dl.boolean=void 0;function N$t(t){return t===!0||t===!1}a(N$t,"boolean");dl.boolean=N$t;function _Ge(t){return typeof t=="string"||t instanceof String}a(_Ge,"string");dl.string=_Ge;function M$t(t){return typeof t=="number"||t instanceof Number}a(M$t,"number");dl.number=M$t;function L$t(t){return t instanceof Error}a(L$t,"error");dl.error=L$t;function SGe(t){return typeof t=="function"}a(SGe,"func");dl.func=SGe;function RGe(t){return Array.isArray(t)}a(RGe,"array");dl.array=RGe;function F$t(t){return RGe(t)&&t.every(e=>_Ge(e))}a(F$t,"stringArray");dl.stringArray=F$t;function O$t(t,e){return Array.isArray(t)&&t.every(e)}a(O$t,"typedArray");dl.typedArray=O$t;function Q$t(t){return t&&SGe(t.then)}a(Q$t,"thenable");dl.thenable=Q$t});var A1e=$(Ch=>{"use strict";f();Object.defineProperty(Ch,"__esModule",{value:!0});Ch.generateUuid=Ch.parse=Ch.isUUID=Ch.v4=Ch.empty=void 0;var JO=class{static{a(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},XO=class t extends JO{static{a(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};XO._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];XO._timeHighBits=["8","9","a","b"];Ch.empty=new JO("00000000-0000-0000-0000-000000000000");function kGe(){return new XO}a(kGe,"v4");Ch.v4=kGe;var U$t=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function PGe(t){return U$t.test(t)}a(PGe,"isUUID");Ch.isUUID=PGe;function q$t(t){if(!PGe(t))throw new Error("invalid uuid");return new JO(t)}a(q$t,"parse");Ch.parse=q$t;function H$t(){return kGe().asHex()}a(H$t,"generateUuid");Ch.generateUuid=H$t});var DGe=$(NT=>{"use strict";f();Object.defineProperty(NT,"__esModule",{value:!0});NT.attachPartialResult=NT.ProgressFeature=NT.attachWorkDone=void 0;var BT=Ai(),$$t=A1e(),ER=class t{static{a(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,o){let s={kind:"begin",title:e,percentage:r,message:n,cancellable:o};this._connection.sendProgress(BT.WorkDoneProgress.type,this._token,s)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(BT.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(BT.WorkDoneProgress.type,this._token,{kind:"end"})}};ER.Instances=new Map;var xJ=class extends ER{static{a(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new BT.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},ZO=class{static{a(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},EJ=class extends ZO{static{a(this,"NullProgressServerReporter")}constructor(){super(),this._source=new BT.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function W$t(t,e){if(e===void 0||e.workDoneToken===void 0)return new ZO;let r=e.workDoneToken;return delete e.workDoneToken,new ER(t,r)}a(W$t,"attachWorkDone");NT.attachWorkDone=W$t;var j$t=a(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(BT.WorkDoneProgressCancelNotification.type,r=>{let n=ER.Instances.get(r.token);(n instanceof xJ||n instanceof EJ)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new ZO:new ER(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,$$t.generateUuid)();return this.connection.sendRequest(BT.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new xJ(this.connection,e))}else return Promise.resolve(new EJ)}},"ProgressFeature");NT.ProgressFeature=j$t;var y1e;(function(t){t.type=new BT.ProgressType})(y1e||(y1e={}));var C1e=class{static{a(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(y1e.type,this._token,e)}};function G$t(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new C1e(t,r)}a(G$t,"attachPartialResult");NT.attachPartialResult=G$t});var BGe=$(bJ=>{"use strict";f();Object.defineProperty(bJ,"__esModule",{value:!0});bJ.ConfigurationFeature=void 0;var V$t=Ai(),z$t=vJ(),K$t=a(t=>class extends t{getConfiguration(e){return e?z$t.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(V$t.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");bJ.ConfigurationFeature=K$t});var NGe=$(TJ=>{"use strict";f();Object.defineProperty(TJ,"__esModule",{value:!0});TJ.WorkspaceFoldersFeature=void 0;var IJ=Ai(),Y$t=a(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new IJ.Emitter,this.connection.onNotification(IJ.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(IJ.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(IJ.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");TJ.WorkspaceFoldersFeature=Y$t});var MGe=$(wJ=>{"use strict";f();Object.defineProperty(wJ,"__esModule",{value:!0});wJ.CallHierarchyFeature=void 0;var v1e=Ai(),J$t=a(t=>class extends t{get callHierarchy(){return{onPrepare:a(e=>this.connection.onRequest(v1e.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:a(e=>{let r=v1e.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:a(e=>{let r=v1e.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");wJ.CallHierarchyFeature=J$t});var E1e=$(MT=>{"use strict";f();Object.defineProperty(MT,"__esModule",{value:!0});MT.SemanticTokensBuilder=MT.SemanticTokensDiff=MT.SemanticTokensFeature=void 0;var _J=Ai(),X$t=a(t=>class extends t{get semanticTokens(){return{refresh:a(()=>this.connection.sendRequest(_J.SemanticTokensRefreshRequest.type),"refresh"),on:a(e=>{let r=_J.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:a(e=>{let r=_J.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:a(e=>{let r=_J.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");MT.SemanticTokensFeature=X$t;var SJ=class{static{a(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let o=e-1,s=r-1;for(;o>=n&&s>=n&&this.originalSequence[o]===this.modifiedSequence[s];)o--,s--;(o<n||s<n)&&(o++,s++);let c=o-n+1,l=this.modifiedSequence.slice(n,s+1);return l.length===1&&l[0]===this.originalSequence[o]?[{start:n,deleteCount:c-1}]:[{start:n,deleteCount:c,data:l}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};MT.SemanticTokensDiff=SJ;var x1e=class{static{a(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,o,s){let c=e,l=r;this._dataLen>0&&(c-=this._prevLine,c===0&&(l-=this._prevChar)),this._data[this._dataLen++]=c,this._data[this._dataLen++]=l,this._data[this._dataLen++]=n,this._data[this._dataLen++]=o,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new SJ(this._prevData,this._data).computeDiff()}:this.build()}};MT.SemanticTokensBuilder=x1e});var LGe=$(RJ=>{"use strict";f();Object.defineProperty(RJ,"__esModule",{value:!0});RJ.ShowDocumentFeature=void 0;var Z$t=Ai(),eWt=a(t=>class extends t{showDocument(e){return this.connection.sendRequest(Z$t.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");RJ.ShowDocumentFeature=eWt});var FGe=$(kJ=>{"use strict";f();Object.defineProperty(kJ,"__esModule",{value:!0});kJ.FileOperationsFeature=void 0;var t3=Ai(),tWt=a(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(t3.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(t3.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(t3.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(t3.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(t3.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(t3.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");kJ.FileOperationsFeature=tWt});var OGe=$(PJ=>{"use strict";f();Object.defineProperty(PJ,"__esModule",{value:!0});PJ.LinkedEditingRangeFeature=void 0;var rWt=Ai(),nWt=a(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(rWt.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");PJ.LinkedEditingRangeFeature=nWt});var QGe=$(DJ=>{"use strict";f();Object.defineProperty(DJ,"__esModule",{value:!0});DJ.TypeHierarchyFeature=void 0;var b1e=Ai(),iWt=a(t=>class extends t{get typeHierarchy(){return{onPrepare:a(e=>this.connection.onRequest(b1e.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:a(e=>{let r=b1e.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:a(e=>{let r=b1e.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");DJ.TypeHierarchyFeature=iWt});var qGe=$(BJ=>{"use strict";f();Object.defineProperty(BJ,"__esModule",{value:!0});BJ.InlineValueFeature=void 0;var UGe=Ai(),oWt=a(t=>class extends t{get inlineValue(){return{refresh:a(()=>this.connection.sendRequest(UGe.InlineValueRefreshRequest.type),"refresh"),on:a(e=>this.connection.onRequest(UGe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");BJ.InlineValueFeature=oWt});var $Ge=$(NJ=>{"use strict";f();Object.defineProperty(NJ,"__esModule",{value:!0});NJ.FoldingRangeFeature=void 0;var HGe=Ai(),sWt=a(t=>class extends t{get foldingRange(){return{refresh:a(()=>this.connection.sendRequest(HGe.FoldingRangeRefreshRequest.type),"refresh"),on:a(e=>{let r=HGe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");NJ.FoldingRangeFeature=sWt});var WGe=$(MJ=>{"use strict";f();Object.defineProperty(MJ,"__esModule",{value:!0});MJ.InlayHintFeature=void 0;var I1e=Ai(),aWt=a(t=>class extends t{get inlayHint(){return{refresh:a(()=>this.connection.sendRequest(I1e.InlayHintRefreshRequest.type),"refresh"),on:a(e=>this.connection.onRequest(I1e.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:a(e=>this.connection.onRequest(I1e.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");MJ.InlayHintFeature=aWt});var jGe=$(LJ=>{"use strict";f();Object.defineProperty(LJ,"__esModule",{value:!0});LJ.DiagnosticFeature=void 0;var e7=Ai(),cWt=a(t=>class extends t{get diagnostics(){return{refresh:a(()=>this.connection.sendRequest(e7.DiagnosticRefreshRequest.type),"refresh"),on:a(e=>this.connection.onRequest(e7.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(e7.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:a(e=>this.connection.onRequest(e7.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(e7.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");LJ.DiagnosticFeature=cWt});var w1e=$(FJ=>{"use strict";f();Object.defineProperty(FJ,"__esModule",{value:!0});FJ.TextDocuments=void 0;var bR=Ai(),T1e=class{static{a(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new bR.Emitter,this._onDidOpen=new bR.Emitter,this._onDidClose=new bR.Emitter,this._onDidSave=new bR.Emitter,this._onWillSave=new bR.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=bR.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let o=n.textDocument,s=this._configuration.create(o.uri,o.languageId,o.version,o.text);this._syncedDocuments.set(o.uri,s);let c=Object.freeze({document:s});this._onDidOpen.fire(c),this._onDidChangeContent.fire(c)})),r.push(e.onDidChangeTextDocument(n=>{let o=n.textDocument,s=n.contentChanges;if(s.length===0)return;let{version:c}=o;if(c==null)throw new Error(`Received document change event for ${o.uri} without valid version identifier`);let l=this._syncedDocuments.get(o.uri);l!==void 0&&(l=this._configuration.update(l,s,c),this._syncedDocuments.set(o.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),r.push(e.onDidCloseTextDocument(n=>{let o=this._syncedDocuments.get(n.textDocument.uri);o!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:o})))})),r.push(e.onWillSaveTextDocument(n=>{let o=this._syncedDocuments.get(n.textDocument.uri);o!==void 0&&this._onWillSave.fire(Object.freeze({document:o,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,o)=>{let s=this._syncedDocuments.get(n.textDocument.uri);return s!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:s,reason:n.reason}),o):[]})),r.push(e.onDidSaveTextDocument(n=>{let o=this._syncedDocuments.get(n.textDocument.uri);o!==void 0&&this._onDidSave.fire(Object.freeze({document:o}))})),bR.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};FJ.TextDocuments=T1e});var S1e=$(r3=>{"use strict";f();Object.defineProperty(r3,"__esModule",{value:!0});r3.NotebookDocuments=r3.NotebookSyncFeature=void 0;var vh=Ai(),GGe=w1e(),lWt=a(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:a(e=>this.connection.onNotification(vh.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:a(e=>this.connection.onNotification(vh.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:a(e=>this.connection.onNotification(vh.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:a(e=>this.connection.onNotification(vh.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");r3.NotebookSyncFeature=lWt;var OJ=class t{static{a(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,vh.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,vh.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,vh.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};OJ.NULL_DISPOSE=Object.freeze({dispose:a(()=>{},"dispose")});var _1e=class{static{a(this,"NotebookDocuments")}constructor(e){e instanceof GGe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new GGe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new vh.Emitter,this._onDidChange=new vh.Emitter,this._onDidSave=new vh.Emitter,this._onDidClose=new vh.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new OJ,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(o=>{this.notebookDocuments.set(o.notebookDocument.uri,o.notebookDocument);for(let s of o.cellTextDocuments)r.openTextDocument({textDocument:s});this.updateCellMap(o.notebookDocument),this._onDidOpen.fire(o.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(o=>{let s=this.notebookDocuments.get(o.notebookDocument.uri);if(s===void 0)return;s.version=o.notebookDocument.version;let c=s.metadata,l=!1,u=o.change;u.metadata!==void 0&&(l=!0,s.metadata=u.metadata);let d=[],p=[],m=[],h=[];if(u.cells!==void 0){let b=u.cells;if(b.structure!==void 0){let I=b.structure.array;if(s.cells.splice(I.start,I.deleteCount,...I.cells!==void 0?I.cells:[]),b.structure.didOpen!==void 0)for(let S of b.structure.didOpen)r.openTextDocument({textDocument:S}),d.push(S.uri);if(b.structure.didClose)for(let S of b.structure.didClose)r.closeTextDocument({textDocument:S}),p.push(S.uri)}if(b.data!==void 0){let I=new Map(b.data.map(S=>[S.document,S]));for(let S=0;S<=s.cells.length;S++){let k=I.get(s.cells[S].document);if(k!==void 0){let N=s.cells.splice(S,1,k);if(m.push({old:N[0],new:k}),I.delete(k.document),I.size===0)break}}}if(b.textContent!==void 0)for(let I of b.textContent)r.changeTextDocument({textDocument:I.document,contentChanges:I.changes}),h.push(I.document.uri)}this.updateCellMap(s);let g={notebookDocument:s};l&&(g.metadata={old:c,new:s.metadata});let A=[];for(let b of d)A.push(this.getNotebookCell(b));let y=[];for(let b of p)y.push(this.getNotebookCell(b));let v=[];for(let b of h)v.push(this.getNotebookCell(b));(A.length>0||y.length>0||m.length>0||v.length>0)&&(g.cells={added:A,removed:y,changed:{data:m,textContent:v}}),(g.metadata!==void 0||g.cells!==void 0)&&this._onDidChange.fire(g)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(o=>{let s=this.notebookDocuments.get(o.notebookDocument.uri);s!==void 0&&this._onDidSave.fire(s)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(o=>{let s=this.notebookDocuments.get(o.notebookDocument.uri);if(s!==void 0){this._onDidClose.fire(s);for(let c of o.cellTextDocuments)r.closeTextDocument({textDocument:c});this.notebookDocuments.delete(o.notebookDocument.uri);for(let c of s.cells)this.notebookCellMap.delete(c.document)}})),vh.Disposable.create(()=>{n.forEach(o=>o.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};r3.NotebookDocuments=_1e});var VGe=$(QJ=>{"use strict";f();Object.defineProperty(QJ,"__esModule",{value:!0});QJ.MonikerFeature=void 0;var uWt=Ai(),dWt=a(t=>class extends t{get moniker(){return{on:a(e=>{let r=uWt.MonikerRequest.type;return this.connection.onRequest(r,(n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");QJ.MonikerFeature=dWt});var N1e=$(Vo=>{"use strict";f();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.createConnection=Vo.combineFeatures=Vo.combineNotebooksFeatures=Vo.combineLanguagesFeatures=Vo.combineWorkspaceFeatures=Vo.combineWindowFeatures=Vo.combineClientFeatures=Vo.combineTracerFeatures=Vo.combineTelemetryFeatures=Vo.combineConsoleFeatures=Vo._NotebooksImpl=Vo._LanguagesImpl=Vo.BulkUnregistration=Vo.BulkRegistration=Vo.ErrorMessageTracker=void 0;var lr=Ai(),xh=vJ(),k1e=A1e(),hi=DGe(),fWt=BGe(),pWt=NGe(),mWt=MGe(),hWt=E1e(),gWt=LGe(),AWt=FGe(),yWt=OGe(),CWt=QGe(),vWt=qGe(),xWt=$Ge(),EWt=WGe(),bWt=jGe(),IWt=S1e(),TWt=VGe();function R1e(t){if(t!==null)return t}a(R1e,"null2Undefined");var P1e=class{static{a(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Vo.ErrorMessageTracker=P1e;var UJ=class{static{a(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(lr.MessageType.Error,e)}warn(e){this.send(lr.MessageType.Warning,e)}info(e){this.send(lr.MessageType.Info,e)}log(e){this.send(lr.MessageType.Log,e)}debug(e){this.send(lr.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(lr.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,lr.RAL)().console.error("Sending log message failed")})}},D1e=class{static{a(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:lr.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(lr.ShowMessageRequest.type,n).then(R1e)}showWarningMessage(e,...r){let n={type:lr.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(lr.ShowMessageRequest.type,n).then(R1e)}showInformationMessage(e,...r){let n={type:lr.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(lr.ShowMessageRequest.type,n).then(R1e)}},zGe=(0,gWt.ShowDocumentFeature)((0,hi.ProgressFeature)(D1e)),KGe;(function(t){function e(){return new qJ}a(e,"create"),t.create=e})(KGe||(Vo.BulkRegistration=KGe={}));var qJ=class{static{a(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=xh.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let o=k1e.generateUuid();this._registrations.push({id:o,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},YGe;(function(t){function e(){return new t7(void 0,[])}a(e,"create"),t.create=e})(YGe||(Vo.BulkUnregistration=YGe={}));var t7=class{static{a(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(lr.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=xh.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let o={unregisterations:[n]};return this._connection.sendRequest(lr.UnregistrationRequest.type,o).then(()=>{this._unregistrations.delete(r)},s=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},HJ=class{static{a(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof qJ?this.registerMany(e):e instanceof t7?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let o=xh.string(r)?r:r.method,s=k1e.generateUuid(),c={registrations:[{id:s,method:o,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(lr.RegistrationRequest.type,c).then(l=>(e.add({id:s,method:o}),e),l=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(l)))}registerSingle2(e,r){let n=xh.string(e)?e:e.method,o=k1e.generateUuid(),s={registrations:[{id:o,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(lr.RegistrationRequest.type,s).then(c=>lr.Disposable.create(()=>{this.unregisterSingle(o,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${o} failed.`)})}),c=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(c)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(lr.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(lr.RegistrationRequest.type,r).then(()=>new t7(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},B1e=class{static{a(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(o){return o&&!!o.edit}a(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(lr.ApplyWorkspaceEditRequest.type,n)}},JGe=(0,AWt.FileOperationsFeature)((0,pWt.WorkspaceFoldersFeature)((0,fWt.ConfigurationFeature)(B1e))),$J=class{static{a(this,"TracerImpl")}constructor(){this._trace=lr.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==lr.Trace.Off&&this.connection.sendNotification(lr.LogTraceNotification.type,{message:e,verbose:this._trace===lr.Trace.Verbose?r:void 0}).catch(()=>{})}},WJ=class{static{a(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(lr.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},jJ=class{static{a(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,hi.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,hi.attachPartialResult)(this.connection,r)}};Vo._LanguagesImpl=jJ;var XGe=(0,xWt.FoldingRangeFeature)((0,TWt.MonikerFeature)((0,bWt.DiagnosticFeature)((0,EWt.InlayHintFeature)((0,vWt.InlineValueFeature)((0,CWt.TypeHierarchyFeature)((0,yWt.LinkedEditingRangeFeature)((0,hWt.SemanticTokensFeature)((0,mWt.CallHierarchyFeature)(jJ))))))))),GJ=class{static{a(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,hi.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,hi.attachPartialResult)(this.connection,r)}};Vo._NotebooksImpl=GJ;var ZGe=(0,IWt.NotebookSyncFeature)(GJ);function eVe(t,e){return function(r){return e(t(r))}}a(eVe,"combineConsoleFeatures");Vo.combineConsoleFeatures=eVe;function tVe(t,e){return function(r){return e(t(r))}}a(tVe,"combineTelemetryFeatures");Vo.combineTelemetryFeatures=tVe;function rVe(t,e){return function(r){return e(t(r))}}a(rVe,"combineTracerFeatures");Vo.combineTracerFeatures=rVe;function nVe(t,e){return function(r){return e(t(r))}}a(nVe,"combineClientFeatures");Vo.combineClientFeatures=nVe;function iVe(t,e){return function(r){return e(t(r))}}a(iVe,"combineWindowFeatures");Vo.combineWindowFeatures=iVe;function oVe(t,e){return function(r){return e(t(r))}}a(oVe,"combineWorkspaceFeatures");Vo.combineWorkspaceFeatures=oVe;function sVe(t,e){return function(r){return e(t(r))}}a(sVe,"combineLanguagesFeatures");Vo.combineLanguagesFeatures=sVe;function aVe(t,e){return function(r){return e(t(r))}}a(aVe,"combineNotebooksFeatures");Vo.combineNotebooksFeatures=aVe;function wWt(t,e){function r(o,s,c){return o&&s?c(o,s):o||s}return a(r,"combine"),{__brand:"features",console:r(t.console,e.console,eVe),tracer:r(t.tracer,e.tracer,rVe),telemetry:r(t.telemetry,e.telemetry,tVe),client:r(t.client,e.client,nVe),window:r(t.window,e.window,iVe),workspace:r(t.workspace,e.workspace,oVe),languages:r(t.languages,e.languages,sVe),notebooks:r(t.notebooks,e.notebooks,aVe)}}a(wWt,"combineFeatures");Vo.combineFeatures=wWt;function _Wt(t,e,r){let n=r&&r.console?new(r.console(UJ)):new UJ,o=t(n);n.rawAttach(o);let s=r&&r.tracer?new(r.tracer($J)):new $J,c=r&&r.telemetry?new(r.telemetry(WJ)):new WJ,l=r&&r.client?new(r.client(HJ)):new HJ,u=r&&r.window?new(r.window(zGe)):new zGe,d=r&&r.workspace?new(r.workspace(JGe)):new JGe,p=r&&r.languages?new(r.languages(XGe)):new XGe,m=r&&r.notebooks?new(r.notebooks(ZGe)):new ZGe,h=[n,s,c,l,u,d,p,m];function g(I){return I instanceof Promise?I:xh.thenable(I)?new Promise((S,k)=>{I.then(N=>S(N),N=>k(N))}):Promise.resolve(I)}a(g,"asPromise");let A,y,v,b={listen:a(()=>o.listen(),"listen"),sendRequest:a((I,...S)=>o.sendRequest(xh.string(I)?I:I.method,...S),"sendRequest"),onRequest:a((I,S)=>o.onRequest(I,S),"onRequest"),sendNotification:a((I,S)=>{let k=xh.string(I)?I:I.method;return o.sendNotification(k,S)},"sendNotification"),onNotification:a((I,S)=>o.onNotification(I,S),"onNotification"),onProgress:o.onProgress,sendProgress:o.sendProgress,onInitialize:a(I=>(y=I,{dispose:a(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:a(I=>o.onNotification(lr.InitializedNotification.type,I),"onInitialized"),onShutdown:a(I=>(A=I,{dispose:a(()=>{A=void 0},"dispose")}),"onShutdown"),onExit:a(I=>(v=I,{dispose:a(()=>{v=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return c},get tracer(){return s},get client(){return l},get window(){return u},get workspace(){return d},get languages(){return p},get notebooks(){return m},onDidChangeConfiguration:a(I=>o.onNotification(lr.DidChangeConfigurationNotification.type,I),"onDidChangeConfiguration"),onDidChangeWatchedFiles:a(I=>o.onNotification(lr.DidChangeWatchedFilesNotification.type,I),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:a(I=>o.onNotification(lr.DidOpenTextDocumentNotification.type,I),"onDidOpenTextDocument"),onDidChangeTextDocument:a(I=>o.onNotification(lr.DidChangeTextDocumentNotification.type,I),"onDidChangeTextDocument"),onDidCloseTextDocument:a(I=>o.onNotification(lr.DidCloseTextDocumentNotification.type,I),"onDidCloseTextDocument"),onWillSaveTextDocument:a(I=>o.onNotification(lr.WillSaveTextDocumentNotification.type,I),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:a(I=>o.onRequest(lr.WillSaveTextDocumentWaitUntilRequest.type,I),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:a(I=>o.onNotification(lr.DidSaveTextDocumentNotification.type,I),"onDidSaveTextDocument"),sendDiagnostics:a(I=>o.sendNotification(lr.PublishDiagnosticsNotification.type,I),"sendDiagnostics"),onHover:a(I=>o.onRequest(lr.HoverRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),void 0)),"onHover"),onCompletion:a(I=>o.onRequest(lr.CompletionRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onCompletion"),onCompletionResolve:a(I=>o.onRequest(lr.CompletionResolveRequest.type,I),"onCompletionResolve"),onSignatureHelp:a(I=>o.onRequest(lr.SignatureHelpRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),void 0)),"onSignatureHelp"),onDeclaration:a(I=>o.onRequest(lr.DeclarationRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onDeclaration"),onDefinition:a(I=>o.onRequest(lr.DefinitionRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onDefinition"),onTypeDefinition:a(I=>o.onRequest(lr.TypeDefinitionRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onTypeDefinition"),onImplementation:a(I=>o.onRequest(lr.ImplementationRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onImplementation"),onReferences:a(I=>o.onRequest(lr.ReferencesRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onReferences"),onDocumentHighlight:a(I=>o.onRequest(lr.DocumentHighlightRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onDocumentHighlight"),onDocumentSymbol:a(I=>o.onRequest(lr.DocumentSymbolRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onDocumentSymbol"),onWorkspaceSymbol:a(I=>o.onRequest(lr.WorkspaceSymbolRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:a(I=>o.onRequest(lr.WorkspaceSymbolResolveRequest.type,I),"onWorkspaceSymbolResolve"),onCodeAction:a(I=>o.onRequest(lr.CodeActionRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onCodeAction"),onCodeActionResolve:a(I=>o.onRequest(lr.CodeActionResolveRequest.type,(S,k)=>I(S,k)),"onCodeActionResolve"),onCodeLens:a(I=>o.onRequest(lr.CodeLensRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onCodeLens"),onCodeLensResolve:a(I=>o.onRequest(lr.CodeLensResolveRequest.type,(S,k)=>I(S,k)),"onCodeLensResolve"),onDocumentFormatting:a(I=>o.onRequest(lr.DocumentFormattingRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:a(I=>o.onRequest(lr.DocumentRangeFormattingRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:a(I=>o.onRequest(lr.DocumentOnTypeFormattingRequest.type,(S,k)=>I(S,k)),"onDocumentOnTypeFormatting"),onRenameRequest:a(I=>o.onRequest(lr.RenameRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),void 0)),"onRenameRequest"),onPrepareRename:a(I=>o.onRequest(lr.PrepareRenameRequest.type,(S,k)=>I(S,k)),"onPrepareRename"),onDocumentLinks:a(I=>o.onRequest(lr.DocumentLinkRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onDocumentLinks"),onDocumentLinkResolve:a(I=>o.onRequest(lr.DocumentLinkResolveRequest.type,(S,k)=>I(S,k)),"onDocumentLinkResolve"),onDocumentColor:a(I=>o.onRequest(lr.DocumentColorRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onDocumentColor"),onColorPresentation:a(I=>o.onRequest(lr.ColorPresentationRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onColorPresentation"),onFoldingRanges:a(I=>o.onRequest(lr.FoldingRangeRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onFoldingRanges"),onSelectionRanges:a(I=>o.onRequest(lr.SelectionRangeRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),(0,hi.attachPartialResult)(o,S))),"onSelectionRanges"),onExecuteCommand:a(I=>o.onRequest(lr.ExecuteCommandRequest.type,(S,k)=>I(S,k,(0,hi.attachWorkDone)(o,S),void 0)),"onExecuteCommand"),dispose:a(()=>o.dispose(),"dispose")};for(let I of h)I.attach(b);return o.onRequest(lr.InitializeRequest.type,I=>{e.initialize(I),xh.string(I.trace)&&(s.trace=lr.Trace.fromString(I.trace));for(let S of h)S.initialize(I.capabilities);if(y){let S=y(I,new lr.CancellationTokenSource().token,(0,hi.attachWorkDone)(o,I),void 0);return g(S).then(k=>{if(k instanceof lr.ResponseError)return k;let N=k;N||(N={capabilities:{}});let F=N.capabilities;F||(F={},N.capabilities=F),F.textDocumentSync===void 0||F.textDocumentSync===null?F.textDocumentSync=xh.number(b.__textDocumentSync)?b.__textDocumentSync:lr.TextDocumentSyncKind.None:!xh.number(F.textDocumentSync)&&!xh.number(F.textDocumentSync.change)&&(F.textDocumentSync.change=xh.number(b.__textDocumentSync)?b.__textDocumentSync:lr.TextDocumentSyncKind.None);for(let O of h)O.fillServerCapabilities(F);return N})}else{let S={capabilities:{textDocumentSync:lr.TextDocumentSyncKind.None}};for(let k of h)k.fillServerCapabilities(S.capabilities);return S}}),o.onRequest(lr.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,A)return A(new lr.CancellationTokenSource().token)}),o.onNotification(lr.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),o.onNotification(lr.SetTraceNotification.type,I=>{s.trace=lr.Trace.fromString(I.value)}),b}a(_Wt,"createConnection");Vo.createConnection=_Wt});var cVe=$(Sp=>{"use strict";f();Object.defineProperty(Sp,"__esModule",{value:!0});Sp.resolveModulePath=Sp.FileSystem=Sp.resolveGlobalYarnPath=Sp.resolveGlobalNodePath=Sp.resolve=Sp.uriToFilePath=void 0;var SWt=require("url"),RA=require("path"),M1e=require("fs"),Q1e=require("child_process");function RWt(t){let e=SWt.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,o=r.length;n<o;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let s=r[0],c=r[1];s.length===0&&c.length>1&&c[1]===":"&&r.shift()}return RA.normalize(r.join("/"))}a(RWt,"uriToFilePath");Sp.uriToFilePath=RWt;function L1e(){return process.platform==="win32"}a(L1e,"isWindows");function VJ(t,e,r,n){let o="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((c,l)=>{let u=process.env,d=Object.create(null);Object.keys(u).forEach(p=>d[p]=u[p]),e&&M1e.existsSync(e)&&(d[o]?d[o]=e+RA.delimiter+d[o]:d[o]=e,n&&n(`NODE_PATH value is: ${d[o]}`)),d.ELECTRON_RUN_AS_NODE="1";try{let p=(0,Q1e.fork)("",[],{cwd:r,env:d,execArgv:["-e",s]});if(p.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}p.on("error",h=>{l(h)}),p.on("message",h=>{h.c==="r"&&(p.send({c:"e"}),h.s?c(h.r):l(new Error(`Failed to resolve module: ${t}`)))});let m={c:"rs",a:t};p.send(m)}catch(p){l(p)}})}a(VJ,"resolve");Sp.resolve=VJ;function F1e(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(s=>r[s]=process.env[s]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};L1e()&&(e="npm.cmd",n.shell=!0);let o=a(()=>{},"handler");try{process.on("SIGPIPE",o);let s=(0,Q1e.spawnSync)(e,["config","get","prefix"],n).stdout;if(!s){t&&t("'npm config get prefix' didn't return a value.");return}let c=s.trim();return t&&t(`'npm config get prefix' value is: ${c}`),c.length>0?L1e()?RA.join(c,"node_modules"):RA.join(c,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",o)}}a(F1e,"resolveGlobalNodePath");Sp.resolveGlobalNodePath=F1e;function kWt(t){let e="yarn",r={encoding:"utf8"};L1e()&&(e="yarn.cmd",r.shell=!0);let n=a(()=>{},"handler");try{process.on("SIGPIPE",n);let o=(0,Q1e.spawnSync)(e,["global","dir","--json"],r),s=o.stdout;if(!s){t&&(t("'yarn global dir' didn't return a value."),o.stderr&&t(o.stderr));return}let c=s.trim().split(/\r?\n/);for(let l of c)try{let u=JSON.parse(l);if(u.type==="log")return RA.join(u.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}a(kWt,"resolveGlobalYarnPath");Sp.resolveGlobalYarnPath=kWt;var O1e;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!M1e.existsSync(__filename.toUpperCase())||!M1e.existsSync(__filename.toLowerCase())),e}a(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(o,s){return r()?RA.normalize(s).indexOf(RA.normalize(o))===0:RA.normalize(s).toLowerCase().indexOf(RA.normalize(o).toLowerCase())===0}a(n,"isParent"),t.isParent=n})(O1e||(Sp.FileSystem=O1e={}));function PWt(t,e,r,n){return r?(RA.isAbsolute(r)||(r=RA.join(t,r)),VJ(e,r,r,n).then(o=>O1e.isParent(r,o)?o:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,o=>VJ(e,F1e(n),t,n))):VJ(e,F1e(n),t,n)}a(PWt,"resolveModulePath");Sp.resolveModulePath=PWt});var U1e=$((B9n,lVe)=>{"use strict";f();lVe.exports=Ai()});var uVe=$(zJ=>{"use strict";f();Object.defineProperty(zJ,"__esModule",{value:!0});zJ.InlineCompletionFeature=void 0;var DWt=Ai(),BWt=a(t=>class extends t{get inlineCompletion(){return{on:a(e=>this.connection.onRequest(DWt.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");zJ.InlineCompletionFeature=BWt});var pVe=$(Wd=>{"use strict";f();var NWt=Wd&&Wd.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fVe=Wd&&Wd.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&NWt(e,t,r)};Object.defineProperty(Wd,"__esModule",{value:!0});Wd.ProposedFeatures=Wd.NotebookDocuments=Wd.TextDocuments=Wd.SemanticTokensBuilder=void 0;var MWt=E1e();Object.defineProperty(Wd,"SemanticTokensBuilder",{enumerable:!0,get:a(function(){return MWt.SemanticTokensBuilder},"get")});var LWt=uVe();fVe(Ai(),Wd);var FWt=w1e();Object.defineProperty(Wd,"TextDocuments",{enumerable:!0,get:a(function(){return FWt.TextDocuments},"get")});var OWt=S1e();Object.defineProperty(Wd,"NotebookDocuments",{enumerable:!0,get:a(function(){return OWt.NotebookDocuments},"get")});fVe(N1e(),Wd);var dVe;(function(t){t.all={__brand:"features",languages:LWt.InlineCompletionFeature}})(dVe||(Wd.ProposedFeatures=dVe={}))});var Qc=$(Eh=>{"use strict";f();var QWt=Eh&&Eh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AVe=Eh&&Eh.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&QWt(e,t,r)};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.createConnection=Eh.Files=void 0;var mVe=require("node:util"),q1e=vJ(),UWt=N1e(),r7=cVe(),IR=U1e();AVe(U1e(),Eh);AVe(pVe(),Eh);var hVe;(function(t){t.uriToFilePath=r7.uriToFilePath,t.resolveGlobalNodePath=r7.resolveGlobalNodePath,t.resolveGlobalYarnPath=r7.resolveGlobalYarnPath,t.resolve=r7.resolve,t.resolveModulePath=r7.resolveModulePath})(hVe||(Eh.Files=hVe={}));var gVe;function KJ(){if(gVe!==void 0)try{gVe.end()}catch{}}a(KJ,"endProtocolConnection");var n3=!1,yVe;function qWt(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(yVe=setInterval(()=>{try{process.kill(n,0)}catch{KJ(),process.exit(n3?0:1)}},3e3))}catch{}}a(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let o=n.split("=");o[0]===t&&e(o[1])}}}a(qWt,"setupExitTimer");qWt();var HWt={initialize:a(t=>{let e=t.processId;q1e.number(e)&&yVe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(n3?0:1)}},3e3)},"initialize"),get shutdownReceived(){return n3},set shutdownReceived(t){n3=t},exit:a(t=>{KJ(),process.exit(t)},"exit")};function $Wt(t,e,r,n){let o,s,c,l;return t!==void 0&&t.__brand==="features"&&(o=t,t=e,e=r,r=n),IR.ConnectionStrategy.is(t)||IR.ConnectionOptions.is(t)?l=t:(s=t,c=e,l=r),WWt(s,c,l,o)}a($Wt,"createConnection");Eh.createConnection=$Wt;function WWt(t,e,r,n){let o=!1;if(!t&&!e&&process.argv.length>2){let u,d,p=process.argv.slice(2);for(let m=0;m<p.length;m++){let h=p[m];if(h==="--node-ipc"){t=new IR.IPCMessageReader(process),e=new IR.IPCMessageWriter(process);break}else if(h==="--stdio"){o=!0,t=process.stdin,e=process.stdout;break}else if(h==="--socket"){u=parseInt(p[m+1]);break}else if(h==="--pipe"){d=p[m+1];break}else{var s=h.split("=");if(s[0]==="--socket"){u=parseInt(s[1]);break}else if(s[0]==="--pipe"){d=s[1];break}}}if(u){let m=(0,IR.createServerSocketTransport)(u);t=m[0],e=m[1]}else if(d){let m=(0,IR.createServerPipeTransport)(d);t=m[0],e=m[1]}}var c="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+c);if(!e)throw new Error("Connection output stream is not set. "+c);if(q1e.func(t.read)&&q1e.func(t.on)){let u=t;u.on("end",()=>{KJ(),process.exit(n3?0:1)}),u.on("close",()=>{KJ(),process.exit(n3?0:1)})}let l=a(u=>{let d=(0,IR.createProtocolConnection)(t,e,u,r);return o&&jWt(u),d},"connectionFactory");return(0,UWt.createConnection)(l,HWt,n)}a(WWt,"_createConnection");function jWt(t){function e(n){return n.map(o=>typeof o=="string"?o:(0,mVe.inspect)(o)).join(" ")}a(e,"serialize");let r=new Map;console.assert=a(function(o,...s){if(!o)if(s.length===0)t.error("Assertion failed");else{let[c,...l]=s;t.error(`Assertion failed: ${c} ${e(l)}`)}},"assert"),console.count=a(function(o="default"){let s=String(o),c=r.get(s)??0;c+=1,r.set(s,c),t.log(`${s}: ${s}`)},"count"),console.countReset=a(function(o){o===void 0?r.clear():r.delete(String(o))},"countReset"),console.debug=a(function(...o){t.log(e(o))},"debug"),console.dir=a(function(o,s){t.log((0,mVe.inspect)(o,s))},"dir"),console.log=a(function(...o){t.log(e(o))},"log"),console.error=a(function(...o){t.error(e(o))},"error"),console.trace=a(function(...o){let s=new Error().stack.replace(/(.+\n){2}/,""),c="Trace";o.length!==0&&(c+=`: ${e(o)}`),t.log(`${c}
${s}`)},"trace"),console.warn=a(function(...o){t.warn(e(o))},"warn")}a(jWt,"patchConsole")});var kA=$((j9n,CVe)=>{"use strict";f();CVe.exports=Qc()});var IYe=$((l$n,bYe)=>{"use strict";f();bYe.exports=xYe;function xYe(t,e,r){t instanceof RegExp&&(t=vYe(t,r)),e instanceof RegExp&&(e=vYe(e,r));var n=EYe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}a(xYe,"balanced");function vYe(t,e){var r=e.match(t);return r?r[0]:null}a(vYe,"maybeMatch");xYe.range=EYe;function EYe(t,e,r){var n,o,s,c,l,u=r.indexOf(t),d=r.indexOf(e,u+1),p=u;if(u>=0&&d>0){if(t===e)return[u,d];for(n=[],s=r.length;p>=0&&!l;)p==u?(n.push(p),u=r.indexOf(t,p+1)):n.length==1?l=[n.pop(),d]:(o=n.pop(),o<s&&(s=o,c=d),d=r.indexOf(e,p+1)),p=u<d&&u>=0?u:d;n.length&&(l=[s,c])}return l}a(EYe,"range")});var DYe=$((f$n,PYe)=>{f();var TYe=IYe();PYe.exports=qjt;var wYe="\0SLASH"+Math.random()+"\0",_Ye="\0OPEN"+Math.random()+"\0",exe="\0CLOSE"+Math.random()+"\0",SYe="\0COMMA"+Math.random()+"\0",RYe="\0PERIOD"+Math.random()+"\0";function Zve(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}a(Zve,"numeric");function Qjt(t){return t.split("\\\\").join(wYe).split("\\{").join(_Ye).split("\\}").join(exe).split("\\,").join(SYe).split("\\.").join(RYe)}a(Qjt,"escapeBraces");function Ujt(t){return t.split(wYe).join("\\").split(_Ye).join("{").split(exe).join("}").split(SYe).join(",").split(RYe).join(".")}a(Ujt,"unescapeBraces");function kYe(t){if(!t)return[""];var e=[],r=TYe("{","}",t);if(!r)return t.split(",");var n=r.pre,o=r.body,s=r.post,c=n.split(",");c[c.length-1]+="{"+o+"}";var l=kYe(s);return s.length&&(c[c.length-1]+=l.shift(),c.push.apply(c,l)),e.push.apply(e,c),e}a(kYe,"parseCommaParts");function qjt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),h7(Qjt(t),!0).map(Ujt)):[]}a(qjt,"expandTop");function Hjt(t){return"{"+t+"}"}a(Hjt,"embrace");function $jt(t){return/^-?0\d/.test(t)}a($jt,"isPadded");function Wjt(t,e){return t<=e}a(Wjt,"lte");function jjt(t,e){return t>=e}a(jjt,"gte");function h7(t,e){var r=[],n=TYe("{","}",t);if(!n)return[t];var o=n.pre,s=n.post.length?h7(n.post,!1):[""];if(/\$$/.test(n.pre))for(var c=0;c<s.length;c++){var l=o+"{"+n.body+"}"+s[c];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),p=u||d,m=n.body.indexOf(",")>=0;if(!p&&!m)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+exe+n.post,h7(t)):[t];var h;if(p)h=n.body.split(/\.\./);else if(h=kYe(n.body),h.length===1&&(h=h7(h[0],!1).map(Hjt),h.length===1))return s.map(function(V){return n.pre+h[0]+V});var g;if(p){var A=Zve(h[0]),y=Zve(h[1]),v=Math.max(h[0].length,h[1].length),b=h.length==3?Math.abs(Zve(h[2])):1,I=Wjt,S=y<A;S&&(b*=-1,I=jjt);var k=h.some($jt);g=[];for(var N=A;I(N,y);N+=b){var F;if(d)F=String.fromCharCode(N),F==="\\"&&(F="");else if(F=String(N),k){var O=v-F.length;if(O>0){var Y=new Array(O+1).join("0");N<0?F="-"+Y+F.slice(1):F=Y+F}}g.push(F)}}else{g=[];for(var z=0;z<h.length;z++)g.push.apply(g,h7(h[z],!1))}for(var z=0;z<g.length;z++)for(var c=0;c<s.length;c++){var l=o+g[z]+s[c];(!e||p||l)&&r.push(l)}}return r}a(h7,"expand")});var Qa=$((Qfi,VZe)=>{f();VZe.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Xo=$((qfi,zZe)=>{"use strict";f();var nc=class extends Error{static{a(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},PEe=class extends nc{static{a(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},DEe=class extends nc{static{a(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},BEe=class extends nc{static{a(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},NEe=class extends nc{static{a(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},MEe=class extends nc{static{a(this,"ResponseStatusCodeError")}constructor(e,r,n,o){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=o,this.status=r,this.statusCode=r,this.headers=n}},LEe=class extends nc{static{a(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},FEe=class extends nc{static{a(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},Qee=class extends nc{static{a(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},OEe=class extends Qee{static{a(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},QEe=class extends nc{static{a(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},UEe=class extends nc{static{a(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},qEe=class extends nc{static{a(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},HEe=class extends nc{static{a(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},$Ee=class extends nc{static{a(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},WEe=class extends nc{static{a(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},jEe=class extends nc{static{a(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},GEe=class extends nc{static{a(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},VEe=class extends Error{static{a(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},zEe=class extends nc{static{a(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},KEe=class extends nc{static{a(this,"RequestRetryError")}constructor(e,r,{headers:n,data:o}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=o,this.headers=n}},YEe=class extends nc{static{a(this,"ResponseError")}constructor(e,r,{headers:n,data:o}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=o,this.headers=n}},JEe=class extends nc{static{a(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};zZe.exports={AbortError:Qee,HTTPParserError:VEe,UndiciError:nc,HeadersTimeoutError:DEe,HeadersOverflowError:BEe,BodyTimeoutError:NEe,RequestContentLengthMismatchError:UEe,ConnectTimeoutError:PEe,ResponseStatusCodeError:MEe,InvalidArgumentError:LEe,InvalidReturnValueError:FEe,RequestAbortedError:OEe,ClientDestroyedError:HEe,ClientClosedError:$Ee,InformationalError:QEe,SocketError:WEe,NotSupportedError:jEe,ResponseContentLengthMismatchError:qEe,BalancedPoolMissingUpstreamError:GEe,ResponseExceededMaxSizeError:zEe,RequestRetryError:KEe,ResponseError:YEe,SecureProxyConnectionError:JEe}});var qee=$((Wfi,KZe)=>{"use strict";f();var Uee={},XEe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<XEe.length;++t){let e=XEe[t],r=e.toLowerCase();Uee[e]=Uee[r]=r}Object.setPrototypeOf(Uee,null);KZe.exports={wellknownHeaderNames:XEe,headerNameLowerCasedRecord:Uee}});var ZZe=$((Gfi,XZe)=>{"use strict";f();var{wellknownHeaderNames:YZe,headerNameLowerCasedRecord:eYt}=qee(),ZEe=class t{static{a(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let o=0,s=this;for(;;){let c=e.charCodeAt(o);if(c>127)throw new TypeError("key must be ascii string");if(s.code===c)if(n===++o){s.value=r;break}else if(s.middle!==null)s=s.middle;else{s.middle=new t(e,r,o);break}else if(s.code<c)if(s.left!==null)s=s.left;else{s.left=new t(e,r,o);break}else if(s.right!==null)s=s.right;else{s.right=new t(e,r,o);break}}}search(e){let r=e.length,n=0,o=this;for(;o!==null&&n<r;){let s=e[n];for(s<=90&&s>=65&&(s|=32);o!==null;){if(s===o.code){if(r===++n)return o;o=o.middle;break}o=o.code<s?o.left:o.right}}return null}},Hee=class{static{a(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new ZEe(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},JZe=new Hee;for(let t=0;t<YZe.length;++t){let e=eYt[YZe[t]];JZe.insert(e,e)}XZe.exports={TernarySearchTree:Hee,tree:JZe}});var Wi=$((Kfi,get)=>{"use strict";f();var G7=require("node:assert"),{kDestroyed:tet,kBodyUsed:Z3,kListeners:ebe,kBody:eet}=Qa(),{IncomingMessage:tYt}=require("node:http"),jee=require("node:stream"),rYt=require("node:net"),{Blob:nYt}=require("node:buffer"),iYt=require("node:util"),{stringify:oYt}=require("node:querystring"),{EventEmitter:sYt}=require("node:events"),{InvalidArgumentError:yu}=Xo(),{headerNameLowerCasedRecord:aYt}=qee(),{tree:ret}=ZZe(),[cYt,lYt]=process.versions.node.split(".").map(t=>Number(t)),Wee=class{static{a(this,"BodyAsyncIterable")}constructor(e){this[eet]=e,this[Z3]=!1}async*[Symbol.asyncIterator](){G7(!this[Z3],"disturbed"),this[Z3]=!0,yield*this[eet]}};function uYt(t){return Gee(t)?(aet(t)===0&&t.on("data",function(){G7(!1)}),typeof t.readableDidRead!="boolean"&&(t[Z3]=!1,sYt.prototype.on.call(t,"data",function(){this[Z3]=!0})),t):t&&typeof t.pipeTo=="function"?new Wee(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&set(t)?new Wee(t):t}a(uYt,"wrapRequestBody");function dYt(){}a(dYt,"nop");function Gee(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}a(Gee,"isStream");function net(t){if(t===null)return!1;if(t instanceof nYt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}a(net,"isBlobLike");function fYt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=oYt(e);return r&&(t+="?"+r),t}a(fYt,"buildURL");function iet(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}a(iet,"isValidPort");function $ee(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}a($ee,"isHttpOrHttpsPrefixed");function oet(t){if(typeof t=="string"){if(t=new URL(t),!$ee(t.origin||t.protocol))throw new yu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new yu("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&iet(t.port)===!1)throw new yu("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new yu("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new yu("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new yu("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new yu("Invalid URL origin: the origin must be a string or null/undefined.");if(!$ee(t.origin||t.protocol))throw new yu("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!$ee(t.origin||t.protocol))throw new yu("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}a(oet,"parseURL");function pYt(t){if(t=oet(t),t.pathname!=="/"||t.search||t.hash)throw new yu("invalid url");return t}a(pYt,"parseOrigin");function mYt(t){if(t[0]==="["){let r=t.indexOf("]");return G7(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}a(mYt,"getHostname");function hYt(t){if(!t)return null;G7(typeof t=="string");let e=mYt(t);return rYt.isIP(e)?"":e}a(hYt,"getServerName");function gYt(t){return JSON.parse(JSON.stringify(t))}a(gYt,"deepClone");function AYt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}a(AYt,"isAsyncIterable");function set(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}a(set,"isIterable");function aet(t){if(t==null)return 0;if(Gee(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(net(t))return t.size!=null?t.size:null;if(det(t))return t.byteLength}return null}a(aet,"bodyLength");function cet(t){return t&&!!(t.destroyed||t[tet]||jee.isDestroyed?.(t))}a(cet,"isDestroyed");function yYt(t,e){t==null||!Gee(t)||cet(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===tYt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[tet]=!0))}a(yYt,"destroy");var CYt=/timeout=(\d+)/;function vYt(t){let e=t.toString().match(CYt);return e?parseInt(e[1],10)*1e3:null}a(vYt,"parseKeepAliveTimeout");function uet(t){return typeof t=="string"?aYt[t]??t.toLowerCase():ret.lookup(t)??t.toString("latin1").toLowerCase()}a(uet,"headerNameToString");function xYt(t){return ret.lookup(t)??t.toString("latin1").toLowerCase()}a(xYt,"bufferToLowerCasedHeaderName");function EYt(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=uet(t[r]),o=e[n];if(o)typeof o=="string"&&(o=[o],e[n]=o),o.push(t[r+1].toString("utf8"));else{let s=t[r+1];typeof s=="string"?e[n]=s:e[n]=Array.isArray(s)?s.map(c=>c.toString("utf8")):s.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}a(EYt,"parseHeaders");function bYt(t){let e=t.length,r=new Array(e),n=!1,o=-1,s,c,l=0;for(let u=0;u<t.length;u+=2)s=t[u],c=t[u+1],typeof s!="string"&&(s=s.toString()),typeof c!="string"&&(c=c.toString("utf8")),l=s.length,l===14&&s[7]==="-"&&(s==="content-length"||s.toLowerCase()==="content-length")?n=!0:l===19&&s[7]==="-"&&(s==="content-disposition"||s.toLowerCase()==="content-disposition")&&(o=u+1),r[u]=s,r[u+1]=c;return n&&o!==-1&&(r[o]=Buffer.from(r[o]).toString("latin1")),r}a(bYt,"parseRawHeaders");function det(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}a(det,"isBuffer");function IYt(t,e,r){if(!t||typeof t!="object")throw new yu("handler must be an object");if(typeof t.onConnect!="function")throw new yu("invalid onConnect method");if(typeof t.onError!="function")throw new yu("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new yu("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new yu("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new yu("invalid onHeaders method");if(typeof t.onData!="function")throw new yu("invalid onData method");if(typeof t.onComplete!="function")throw new yu("invalid onComplete method")}}a(IYt,"validateHandler");function TYt(t){return!!(t&&(jee.isDisturbed(t)||t[Z3]))}a(TYt,"isDisturbed");function wYt(t){return!!(t&&jee.isErrored(t))}a(wYt,"isErrored");function _Yt(t){return!!(t&&jee.isReadable(t))}a(_Yt,"isReadable");function SYt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}a(SYt,"getSocketInfo");function RYt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:o}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let s=Buffer.isBuffer(o)?o:Buffer.from(o);s.byteLength&&r.enqueue(new Uint8Array(s))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}a(RYt,"ReadableStreamFrom");function kYt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}a(kYt,"isFormDataLike");function PYt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}a(PYt,"addAbortListener");var DYt=typeof String.prototype.toWellFormed=="function",BYt=typeof String.prototype.isWellFormed=="function";function fet(t){return DYt?`${t}`.toWellFormed():iYt.toUSVString(t)}a(fet,"toUSVString");function NYt(t){return BYt?`${t}`.isWellFormed():fet(t)===`${t}`}a(NYt,"isUSVString");function pet(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}a(pet,"isTokenCharCode");function MYt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!pet(t.charCodeAt(e)))return!1;return!0}a(MYt,"isValidHTTPToken");var LYt=/[^\t\x20-\x7e\x80-\xff]/;function FYt(t){return!LYt.test(t)}a(FYt,"isValidHeaderValue");function OYt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}a(OYt,"parseRangeHeader");function QYt(t,e,r){return(t[ebe]??=[]).push([e,r]),t.on(e,r),t}a(QYt,"addListener");function UYt(t){for(let[e,r]of t[ebe]??[])t.removeListener(e,r);t[ebe]=null}a(UYt,"removeAllListeners");function qYt(t,e,r){try{e.onError(r),G7(e.aborted)}catch(n){t.emit("error",n)}}a(qYt,"errorRequest");var met=Object.create(null);met.enumerable=!0;var tbe={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},het={...tbe,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(tbe,null);Object.setPrototypeOf(het,null);get.exports={kEnumerableProperty:met,nop:dYt,isDisturbed:TYt,isErrored:wYt,isReadable:_Yt,toUSVString:fet,isUSVString:NYt,isBlobLike:net,parseOrigin:pYt,parseURL:oet,getServerName:hYt,isStream:Gee,isIterable:set,isAsyncIterable:AYt,isDestroyed:cet,headerNameToString:uet,bufferToLowerCasedHeaderName:xYt,addListener:QYt,removeAllListeners:UYt,errorRequest:qYt,parseRawHeaders:bYt,parseHeaders:EYt,parseKeepAliveTimeout:vYt,destroy:yYt,bodyLength:aet,deepClone:gYt,ReadableStreamFrom:RYt,isBuffer:det,validateHandler:IYt,getSocketInfo:SYt,isFormDataLike:kYt,buildURL:fYt,addAbortListener:PYt,isValidHTTPToken:MYt,isValidHeaderValue:FYt,isTokenCharCode:pet,parseRangeHeader:OYt,normalizedMethodRecordsBase:tbe,normalizedMethodRecords:het,isValidPort:iet,isHttpOrHttpsPrefixed:$ee,nodeMajor:cYt,nodeMinor:lYt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:uYt}});var eN=$((Xfi,yet)=>{"use strict";f();var is=require("node:diagnostics_channel"),nbe=require("node:util"),Vee=nbe.debuglog("undici"),rbe=nbe.debuglog("fetch"),ik=nbe.debuglog("websocket"),Aet=!1,HYt={beforeConnect:is.channel("undici:client:beforeConnect"),connected:is.channel("undici:client:connected"),connectError:is.channel("undici:client:connectError"),sendHeaders:is.channel("undici:client:sendHeaders"),create:is.channel("undici:request:create"),bodySent:is.channel("undici:request:bodySent"),headers:is.channel("undici:request:headers"),trailers:is.channel("undici:request:trailers"),error:is.channel("undici:request:error"),open:is.channel("undici:websocket:open"),close:is.channel("undici:websocket:close"),socketError:is.channel("undici:websocket:socket_error"),ping:is.channel("undici:websocket:ping"),pong:is.channel("undici:websocket:pong")};if(Vee.enabled||rbe.enabled){let t=rbe.enabled?rbe:Vee;is.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s}}=e;t("connecting to %s using %s%s",`${s}${o?`:${o}`:""}`,n,r)}),is.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s}}=e;t("connected to %s using %s%s",`${s}${o?`:${o}`:""}`,n,r)}),is.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s},error:c}=e;t("connection to %s using %s%s errored - %s",`${s}${o?`:${o}`:""}`,n,r,c.message)}),is.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:o}}=e;t("sending request to %s %s/%s",r,o,n)}),is.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:o},response:{statusCode:s}}=e;t("received response to %s %s/%s - HTTP %d",r,o,n,s)}),is.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:o}}=e;t("trailers received from %s %s/%s",r,o,n)}),is.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:o},error:s}=e;t("request to %s %s/%s errored - %s",r,o,n,s.message)}),Aet=!0}if(ik.enabled){if(!Aet){let t=Vee.enabled?Vee:ik;is.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s}}=e;t("connecting to %s%s using %s%s",s,o?`:${o}`:"",n,r)}),is.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s}}=e;t("connected to %s%s using %s%s",s,o?`:${o}`:"",n,r)}),is.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:o,host:s},error:c}=e;t("connection to %s%s using %s%s errored - %s",s,o?`:${o}`:"",n,r,c.message)}),is.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:o}}=e;t("sending request to %s %s/%s",r,o,n)})}is.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;ik("connection opened %s%s",e,r?`:${r}`:"")}),is.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;ik("closed connection to %s - %s %s",e.url,r,n)}),is.channel("undici:websocket:socket_error").subscribe(t=>{ik("connection errored - %s",t.message)}),is.channel("undici:websocket:ping").subscribe(t=>{ik("ping received")}),is.channel("undici:websocket:pong").subscribe(t=>{ik("pong received")})}yet.exports={channels:HYt}});var bet=$((epi,Eet)=>{"use strict";f();var{InvalidArgumentError:ic,NotSupportedError:$Yt}=Xo(),Hx=require("node:assert"),{isValidHTTPToken:xet,isValidHeaderValue:Cet,isStream:WYt,destroy:jYt,isBuffer:GYt,isFormDataLike:VYt,isIterable:zYt,isBlobLike:KYt,buildURL:YYt,validateHandler:JYt,getServerName:XYt,normalizedMethodRecords:ZYt}=Wi(),{channels:n1}=eN(),{headerNameLowerCasedRecord:vet}=qee(),eJt=/[^\u0021-\u00ff]/,Uh=Symbol("handler"),ibe=class{static{a(this,"Request")}constructor(e,{path:r,method:n,body:o,headers:s,query:c,idempotent:l,blocking:u,upgrade:d,headersTimeout:p,bodyTimeout:m,reset:h,throwOnError:g,expectContinue:A,servername:y},v){if(typeof r!="string")throw new ic("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new ic("path must be an absolute URL or start with a slash");if(eJt.test(r))throw new ic("invalid request path");if(typeof n!="string")throw new ic("method must be a string");if(ZYt[n]===void 0&&!xet(n))throw new ic("invalid request method");if(d&&typeof d!="string")throw new ic("upgrade must be a string");if(p!=null&&(!Number.isFinite(p)||p<0))throw new ic("invalid headersTimeout");if(m!=null&&(!Number.isFinite(m)||m<0))throw new ic("invalid bodyTimeout");if(h!=null&&typeof h!="boolean")throw new ic("invalid reset");if(A!=null&&typeof A!="boolean")throw new ic("invalid expectContinue");if(this.headersTimeout=p,this.bodyTimeout=m,this.throwOnError=g===!0,this.method=n,this.abort=null,o==null)this.body=null;else if(WYt(o)){this.body=o;let b=this.body._readableState;(!b||!b.autoDestroy)&&(this.endHandler=a(function(){jYt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=I=>{this.abort?this.abort(I):this.error=I},this.body.on("error",this.errorHandler)}else if(GYt(o))this.body=o.byteLength?o:null;else if(ArrayBuffer.isView(o))this.body=o.buffer.byteLength?Buffer.from(o.buffer,o.byteOffset,o.byteLength):null;else if(o instanceof ArrayBuffer)this.body=o.byteLength?Buffer.from(o):null;else if(typeof o=="string")this.body=o.length?Buffer.from(o):null;else if(VYt(o)||zYt(o)||KYt(o))this.body=o;else throw new ic("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=d||null,this.path=c?YYt(r,c):r,this.origin=e,this.idempotent=l??(n==="HEAD"||n==="GET"),this.blocking=u??!1,this.reset=h??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=A??!1,Array.isArray(s)){if(s.length%2!==0)throw new ic("headers array must be even");for(let b=0;b<s.length;b+=2)zee(this,s[b],s[b+1])}else if(s&&typeof s=="object")if(s[Symbol.iterator])for(let b of s){if(!Array.isArray(b)||b.length!==2)throw new ic("headers must be in key-value pair format");zee(this,b[0],b[1])}else{let b=Object.keys(s);for(let I=0;I<b.length;++I)zee(this,b[I],s[b[I]])}else if(s!=null)throw new ic("headers must be an object or an array");JYt(v,n,d),this.servername=y||XYt(this.host),this[Uh]=v,n1.create.hasSubscribers&&n1.create.publish({request:this})}onBodySent(e){if(this[Uh].onBodySent)try{return this[Uh].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(n1.bodySent.hasSubscribers&&n1.bodySent.publish({request:this}),this[Uh].onRequestSent)try{return this[Uh].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(Hx(!this.aborted),Hx(!this.completed),this.error)e(this.error);else return this.abort=e,this[Uh].onConnect(e)}onResponseStarted(){return this[Uh].onResponseStarted?.()}onHeaders(e,r,n,o){Hx(!this.aborted),Hx(!this.completed),n1.headers.hasSubscribers&&n1.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:o}});try{return this[Uh].onHeaders(e,r,n,o)}catch(s){this.abort(s)}}onData(e){Hx(!this.aborted),Hx(!this.completed);try{return this[Uh].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return Hx(!this.aborted),Hx(!this.completed),this[Uh].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),Hx(!this.aborted),this.completed=!0,n1.trailers.hasSubscribers&&n1.trailers.publish({request:this,trailers:e});try{return this[Uh].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),n1.error.hasSubscribers&&n1.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[Uh].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return zee(this,e,r),this}};function zee(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new ic(`invalid ${e} header`);if(r===void 0)return;let n=vet[e];if(n===void 0&&(n=e.toLowerCase(),vet[n]===void 0&&!xet(n)))throw new ic("invalid header key");if(Array.isArray(r)){let o=[];for(let s=0;s<r.length;s++)if(typeof r[s]=="string"){if(!Cet(r[s]))throw new ic(`invalid ${e} header`);o.push(r[s])}else if(r[s]===null)o.push("");else{if(typeof r[s]=="object")throw new ic(`invalid ${e} header`);o.push(`${r[s]}`)}r=o}else if(typeof r=="string"){if(!Cet(r))throw new ic(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new ic("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new ic("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new ic(`invalid ${n} header`);if(n==="connection"){let o=typeof r=="string"?r.toLowerCase():null;if(o!=="close"&&o!=="keep-alive")throw new ic("invalid connection header");o==="close"&&(t.reset=!0)}else{if(n==="expect")throw new $Yt("expect header not supported");t.headers.push(e,r)}}}a(zee,"processHeader");Eet.exports=ibe});var V7=$((npi,Iet)=>{"use strict";f();var tJt=require("node:events"),Kee=class extends tJt{static{a(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let o of r)if(o!=null){if(typeof o!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof o}`);if(n=o(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new obe(this,n)}},obe=class extends Kee{static{a(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};Iet.exports=Kee});var iN=$((spi,Tet)=>{"use strict";f();var rJt=V7(),{ClientDestroyedError:sbe,ClientClosedError:nJt,InvalidArgumentError:tN}=Xo(),{kDestroy:iJt,kClose:oJt,kClosed:z7,kDestroyed:rN,kDispatch:abe,kInterceptors:ok}=Qa(),$x=Symbol("onDestroyed"),nN=Symbol("onClosed"),Yee=Symbol("Intercepted Dispatch"),cbe=class extends rJt{static{a(this,"DispatcherBase")}constructor(){super(),this[rN]=!1,this[$x]=null,this[z7]=!1,this[nN]=[]}get destroyed(){return this[rN]}get closed(){return this[z7]}get interceptors(){return this[ok]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[ok][r]!="function")throw new tN("interceptor must be an function")}this[ok]=e}close(e){if(e===void 0)return new Promise((n,o)=>{this.close((s,c)=>s?o(s):n(c))});if(typeof e!="function")throw new tN("invalid callback");if(this[rN]){queueMicrotask(()=>e(new sbe,null));return}if(this[z7]){this[nN]?this[nN].push(e):queueMicrotask(()=>e(null,null));return}this[z7]=!0,this[nN].push(e);let r=a(()=>{let n=this[nN];this[nN]=null;for(let o=0;o<n.length;o++)n[o](null,null)},"onClosed");this[oJt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((o,s)=>{this.destroy(e,(c,l)=>c?s(c):o(l))});if(typeof r!="function")throw new tN("invalid callback");if(this[rN]){this[$x]?this[$x].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new sbe),this[rN]=!0,this[$x]=this[$x]||[],this[$x].push(r);let n=a(()=>{let o=this[$x];this[$x]=null;for(let s=0;s<o.length;s++)o[s](null,null)},"onDestroyed");this[iJt](e).then(()=>{queueMicrotask(n)})}[Yee](e,r){if(!this[ok]||this[ok].length===0)return this[Yee]=this[abe],this[abe](e,r);let n=this[abe].bind(this);for(let o=this[ok].length-1;o>=0;o--)n=this[ok][o](n);return this[Yee]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new tN("handler must be an object");try{if(!e||typeof e!="object")throw new tN("opts must be an object.");if(this[rN]||this[$x])throw new sbe;if(this[z7])throw new nJt;return this[Yee](e,r)}catch(n){if(typeof r.onError!="function")throw new tN("invalid onError method");return r.onError(n),!1}}};Tet.exports=cbe});var hbe=$((lpi,ket)=>{"use strict";f();var oN=0,lbe=1e3,ube=(lbe>>1)-1,Wx,dbe=Symbol("kFastTimer"),jx=[],fbe=-2,pbe=-1,_et=0,wet=1;function mbe(){oN+=ube;let t=0,e=jx.length;for(;t<e;){let r=jx[t];r._state===_et?(r._idleStart=oN-ube,r._state=wet):r._state===wet&&oN>=r._idleStart+r._idleTimeout&&(r._state=pbe,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===pbe?(r._state=fbe,--e!==0&&(jx[t]=jx[e])):++t}jx.length=e,jx.length!==0&&Ret()}a(mbe,"onTick");function Ret(){Wx?Wx.refresh():(clearTimeout(Wx),Wx=setTimeout(mbe,ube),Wx.unref&&Wx.unref())}a(Ret,"refreshTimeout");var Jee=class{static{a(this,"FastTimer")}[dbe]=!0;_state=fbe;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===fbe&&jx.push(this),(!Wx||jx.length===1)&&Ret(),this._state=_et}clear(){this._state=pbe,this._idleStart=-1}};ket.exports={setTimeout(t,e,r){return e<=lbe?setTimeout(t,e,r):new Jee(t,e,r)},clearTimeout(t){t[dbe]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new Jee(t,e,r)},clearFastTimeout(t){t.clear()},now(){return oN},tick(t=0){oN+=t-lbe+1,mbe(),mbe()},reset(){oN=0,jx.length=0,clearTimeout(Wx),Wx=null},kFastTimer:dbe}});var K7=$((mpi,Met)=>{"use strict";f();var sJt=require("node:net"),Pet=require("node:assert"),Net=Wi(),{InvalidArgumentError:aJt,ConnectTimeoutError:cJt}=Xo(),Xee=hbe();function Det(){}a(Det,"noop");var gbe,Abe;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?Abe=class{static{a(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:Abe=class{static{a(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function lJt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:o,...s}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new aJt("maxCachedSessions must be a positive integer or zero");let c={path:r,...s},l=new Abe(e??100);return n=n??1e4,t=t??!1,a(function({hostname:d,host:p,protocol:m,port:h,servername:g,localAddress:A,httpSocket:y},v){let b;if(m==="https:"){gbe||(gbe=require("node:tls")),g=g||c.servername||Net.getServerName(p)||null;let S=g||d;Pet(S);let k=o||l.get(S)||null;h=h||443,b=gbe.connect({highWaterMark:16384,...c,servername:g,session:k,localAddress:A,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:h,host:d}),b.on("session",function(N){l.set(S,N)})}else Pet(!y,"httpSocket can only be sent on TLS update"),h=h||80,b=sJt.connect({highWaterMark:64*1024,...c,localAddress:A,port:h,host:d});if(c.keepAlive==null||c.keepAlive){let S=c.keepAliveInitialDelay===void 0?6e4:c.keepAliveInitialDelay;b.setKeepAlive(!0,S)}let I=uJt(new WeakRef(b),{timeout:n,hostname:d,port:h});return b.setNoDelay(!0).once(m==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(I),v){let S=v;v=null,S(null,this)}}).on("error",function(S){if(queueMicrotask(I),v){let k=v;v=null,k(S)}}),b},"connect")}a(lJt,"buildConnector");var uJt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return Det;let r=null,n=null,o=Xee.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>Bet(t.deref(),e))})},e.timeout);return()=>{Xee.clearFastTimeout(o),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return Det;let r=null,n=Xee.setFastTimeout(()=>{r=setImmediate(()=>{Bet(t.deref(),e)})},e.timeout);return()=>{Xee.clearFastTimeout(n),clearImmediate(r)}};function Bet(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,Net.destroy(t,new cJt(r))}a(Bet,"onConnectTimeout");Met.exports=lJt});var Let=$(Zee=>{"use strict";f();Object.defineProperty(Zee,"__esModule",{value:!0});Zee.enumToMap=void 0;function dJt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}a(dJt,"enumToMap");Zee.enumToMap=dJt});var Fet=$(Kt=>{"use strict";f();Object.defineProperty(Kt,"__esModule",{value:!0});Kt.SPECIAL_HEADERS=Kt.HEADER_STATE=Kt.MINOR=Kt.MAJOR=Kt.CONNECTION_TOKEN_CHARS=Kt.HEADER_CHARS=Kt.TOKEN=Kt.STRICT_TOKEN=Kt.HEX=Kt.URL_CHAR=Kt.STRICT_URL_CHAR=Kt.USERINFO_CHARS=Kt.MARK=Kt.ALPHANUM=Kt.NUM=Kt.HEX_MAP=Kt.NUM_MAP=Kt.ALPHA=Kt.FINISH=Kt.H_METHOD_MAP=Kt.METHOD_MAP=Kt.METHODS_RTSP=Kt.METHODS_ICE=Kt.METHODS_HTTP=Kt.METHODS=Kt.LENIENT_FLAGS=Kt.FLAGS=Kt.TYPE=Kt.ERROR=void 0;var fJt=Let(),pJt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(pJt=Kt.ERROR||(Kt.ERROR={}));var mJt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(mJt=Kt.TYPE||(Kt.TYPE={}));var hJt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(hJt=Kt.FLAGS||(Kt.FLAGS={}));var gJt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(gJt=Kt.LENIENT_FLAGS||(Kt.LENIENT_FLAGS={}));var Tn;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(Tn=Kt.METHODS||(Kt.METHODS={}));Kt.METHODS_HTTP=[Tn.DELETE,Tn.GET,Tn.HEAD,Tn.POST,Tn.PUT,Tn.CONNECT,Tn.OPTIONS,Tn.TRACE,Tn.COPY,Tn.LOCK,Tn.MKCOL,Tn.MOVE,Tn.PROPFIND,Tn.PROPPATCH,Tn.SEARCH,Tn.UNLOCK,Tn.BIND,Tn.REBIND,Tn.UNBIND,Tn.ACL,Tn.REPORT,Tn.MKACTIVITY,Tn.CHECKOUT,Tn.MERGE,Tn["M-SEARCH"],Tn.NOTIFY,Tn.SUBSCRIBE,Tn.UNSUBSCRIBE,Tn.PATCH,Tn.PURGE,Tn.MKCALENDAR,Tn.LINK,Tn.UNLINK,Tn.PRI,Tn.SOURCE];Kt.METHODS_ICE=[Tn.SOURCE];Kt.METHODS_RTSP=[Tn.OPTIONS,Tn.DESCRIBE,Tn.ANNOUNCE,Tn.SETUP,Tn.PLAY,Tn.PAUSE,Tn.TEARDOWN,Tn.GET_PARAMETER,Tn.SET_PARAMETER,Tn.REDIRECT,Tn.RECORD,Tn.FLUSH,Tn.GET,Tn.POST];Kt.METHOD_MAP=fJt.enumToMap(Tn);Kt.H_METHOD_MAP={};Object.keys(Kt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Kt.H_METHOD_MAP[t]=Kt.METHOD_MAP[t])});var AJt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(AJt=Kt.FINISH||(Kt.FINISH={}));Kt.ALPHA=[];for(let t=65;t<=90;t++)Kt.ALPHA.push(String.fromCharCode(t)),Kt.ALPHA.push(String.fromCharCode(t+32));Kt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Kt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Kt.NUM=["0","1","2","3","4","5","6","7","8","9"];Kt.ALPHANUM=Kt.ALPHA.concat(Kt.NUM);Kt.MARK=["-","_",".","!","~","*","'","(",")"];Kt.USERINFO_CHARS=Kt.ALPHANUM.concat(Kt.MARK).concat(["%",";",":","&","=","+","$",","]);Kt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Kt.ALPHANUM);Kt.URL_CHAR=Kt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Kt.URL_CHAR.push(t);Kt.HEX=Kt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Kt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Kt.ALPHANUM);Kt.TOKEN=Kt.STRICT_TOKEN.concat([" "]);Kt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Kt.HEADER_CHARS.push(t);Kt.CONNECTION_TOKEN_CHARS=Kt.HEADER_CHARS.filter(t=>t!==44);Kt.MAJOR=Kt.NUM_MAP;Kt.MINOR=Kt.MAJOR;var sN;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(sN=Kt.HEADER_STATE||(Kt.HEADER_STATE={}));Kt.SPECIAL_HEADERS={connection:sN.CONNECTION,"content-length":sN.CONTENT_LENGTH,"proxy-connection":sN.CONNECTION,"transfer-encoding":sN.TRANSFER_ENCODING,upgrade:sN.UPGRADE}});var ybe=$((Epi,Oet)=>{"use strict";f();var{Buffer:yJt}=require("node:buffer");Oet.exports=yJt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var Uet=$((Ipi,Qet)=>{"use strict";f();var{Buffer:CJt}=require("node:buffer");Qet.exports=CJt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var Y7=$((wpi,zet)=>{"use strict";f();var qet=["GET","HEAD","POST"],vJt=new Set(qet),xJt=[101,204,205,304],Het=[301,302,303,307,308],EJt=new Set(Het),$et=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],bJt=new Set($et),Wet=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],IJt=new Set(Wet),TJt=["follow","manual","error"],jet=["GET","HEAD","OPTIONS","TRACE"],wJt=new Set(jet),_Jt=["navigate","same-origin","no-cors","cors"],SJt=["omit","same-origin","include"],RJt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],kJt=["content-encoding","content-language","content-location","content-type","content-length"],PJt=["half"],Get=["CONNECT","TRACE","TRACK"],DJt=new Set(Get),Vet=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],BJt=new Set(Vet);zet.exports={subresource:Vet,forbiddenMethods:Get,requestBodyHeader:kJt,referrerPolicy:Wet,requestRedirect:TJt,requestMode:_Jt,requestCredentials:SJt,requestCache:RJt,redirectStatus:Het,corsSafeListedMethods:qet,nullBodyStatus:xJt,safeMethods:jet,badPorts:$et,requestDuplex:PJt,subresourceSet:BJt,badPortsSet:bJt,redirectStatusSet:EJt,corsSafeListedMethodsSet:vJt,safeMethodsSet:wJt,forbiddenMethodsSet:DJt,referrerPolicySet:IJt}});var vbe=$((Spi,Ket)=>{"use strict";f();var Cbe=Symbol.for("undici.globalOrigin.1");function NJt(){return globalThis[Cbe]}a(NJt,"getGlobalOrigin");function MJt(t){if(t===void 0){Object.defineProperty(globalThis,Cbe,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,Cbe,{value:e,writable:!0,enumerable:!1,configurable:!1})}a(MJt,"setGlobalOrigin");Ket.exports={getGlobalOrigin:NJt,setGlobalOrigin:MJt}});var Fp=$((Ppi,rtt)=>{"use strict";f();var tte=require("node:assert"),LJt=new TextEncoder,J7=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,FJt=/[\u000A\u000D\u0009\u0020]/,OJt=/[\u0009\u000A\u000C\u000D\u0020]/g,QJt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function UJt(t){tte(t.protocol==="data:");let e=Xet(t,!0);e=e.slice(5);let r={position:0},n=aN(",",e,r),o=n.length;if(n=GJt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let s=e.slice(o+1),c=Zet(s);if(/;(\u0020){0,}base64$/i.test(n)){let u=ttt(c);if(c=HJt(u),c==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let l=xbe(n);return l==="failure"&&(l=xbe("text/plain;charset=US-ASCII")),{mimeType:l,body:c}}a(UJt,"dataURLProcessor");function Xet(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,o=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?o.slice(0,-1):o}a(Xet,"URLSerializer");function rte(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}a(rte,"collectASequenceOfCodePoints");function aN(t,e,r){let n=e.indexOf(t,r.position),o=r.position;return n===-1?(r.position=e.length,e.slice(o)):(r.position=n,e.slice(o,r.position))}a(aN,"collectASequenceOfCodePointsFast");function Zet(t){let e=LJt.encode(t);return qJt(e)}a(Zet,"stringPercentDecode");function Yet(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}a(Yet,"isHexCharByte");function Jet(t){return t>=48&&t<=57?t-48:(t&223)-55}a(Jet,"hexByteToNumber");function qJt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let o=0;o<e;++o){let s=t[o];s!==37?r[n++]=s:s===37&&!(Yet(t[o+1])&&Yet(t[o+2]))?r[n++]=37:(r[n++]=Jet(t[o+1])<<4|Jet(t[o+2]),o+=2)}return e===n?r:r.subarray(0,n)}a(qJt,"percentDecode");function xbe(t){t=ete(t,!0,!0);let e={position:0},r=aN("/",t,e);if(r.length===0||!J7.test(r)||e.position>t.length)return"failure";e.position++;let n=aN(";",t,e);if(n=ete(n,!1,!0),n.length===0||!J7.test(n))return"failure";let o=r.toLowerCase(),s=n.toLowerCase(),c={type:o,subtype:s,parameters:new Map,essence:`${o}/${s}`};for(;e.position<t.length;){e.position++,rte(d=>FJt.test(d),t,e);let l=rte(d=>d!==";"&&d!=="=",t,e);if(l=l.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let u=null;if(t[e.position]==='"')u=ett(t,e,!0),aN(";",t,e);else if(u=aN(";",t,e),u=ete(u,!1,!0),u.length===0)continue;l.length!==0&&J7.test(l)&&(u.length===0||QJt.test(u))&&!c.parameters.has(l)&&c.parameters.set(l,u)}return c}a(xbe,"parseMIMEType");function HJt(t){t=t.replace(OJt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}a(HJt,"forgivingBase64");function ett(t,e,r){let n=e.position,o="";for(tte(t[e.position]==='"'),e.position++;o+=rte(c=>c!=='"'&&c!=="\\",t,e),!(e.position>=t.length);){let s=t[e.position];if(e.position++,s==="\\"){if(e.position>=t.length){o+="\\";break}o+=t[e.position],e.position++}else{tte(s==='"');break}}return r?o:t.slice(n,e.position)}a(ett,"collectAnHTTPQuotedString");function $Jt(t){tte(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[o,s]of e.entries())n+=";",n+=o,n+="=",J7.test(s)||(s=s.replace(/(\\|")/g,"\\$1"),s='"'+s,s+='"'),n+=s;return n}a($Jt,"serializeAMimeType");function WJt(t){return t===13||t===10||t===9||t===32}a(WJt,"isHTTPWhiteSpace");function ete(t,e=!0,r=!0){return Ebe(t,e,r,WJt)}a(ete,"removeHTTPWhitespace");function jJt(t){return t===13||t===10||t===9||t===12||t===32}a(jJt,"isASCIIWhitespace");function GJt(t,e=!0,r=!0){return Ebe(t,e,r,jJt)}a(GJt,"removeASCIIWhitespace");function Ebe(t,e,r,n){let o=0,s=t.length-1;if(e)for(;o<t.length&&n(t.charCodeAt(o));)o++;if(r)for(;s>0&&n(t.charCodeAt(s));)s--;return o===0&&s===t.length-1?t:t.slice(o,s+1)}a(Ebe,"removeChars");function ttt(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,o=65535;for(;n<e;)n+o>e&&(o=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=o));return r}a(ttt,"isomorphicDecode");function VJt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}a(VJt,"minimizeSupportedMimeType");rtt.exports={dataURLProcessor:UJt,URLSerializer:Xet,collectASequenceOfCodePoints:rte,collectASequenceOfCodePointsFast:aN,stringPercentDecode:Zet,parseMIMEType:xbe,collectAnHTTPQuotedString:ett,serializeAMimeType:$Jt,removeChars:Ebe,removeHTTPWhitespace:ete,minimizeSupportedMimeType:VJt,HTTP_TOKEN_CODEPOINTS:J7,isomorphicDecode:ttt}});var sd=$((Npi,ntt)=>{"use strict";f();var{types:i1,inspect:zJt}=require("node:util"),{markAsUncloneable:KJt}=require("node:worker_threads"),{toUSVString:YJt}=Wi(),$t={};$t.converters={};$t.util={};$t.errors={};$t.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};$t.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return $t.errors.exception({header:t.prefix,message:r})};$t.errors.invalidArgument=function(t){return $t.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};$t.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};$t.argumentLengthCheck=function({length:t},e,r){if(t<e)throw $t.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};$t.illegalConstructor=function(){throw $t.errors.exception({header:"TypeError",message:"Illegal constructor"})};$t.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};$t.util.markAsUncloneable=KJt||(()=>{});$t.util.ConvertToInt=function(t,e,r,n){let o,s;e===64?(o=Math.pow(2,53)-1,r==="unsigned"?s=0:s=Math.pow(-2,53)+1):r==="unsigned"?(s=0,o=Math.pow(2,e)-1):(s=Math.pow(-2,e)-1,o=Math.pow(2,e-1)-1);let c=Number(t);if(c===0&&(c=0),n?.enforceRange===!0){if(Number.isNaN(c)||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)throw $t.errors.exception({header:"Integer conversion",message:`Could not convert ${$t.util.Stringify(t)} to an integer.`});if(c=$t.util.IntegerPart(c),c<s||c>o)throw $t.errors.exception({header:"Integer conversion",message:`Value must be between ${s}-${o}, got ${c}.`});return c}return!Number.isNaN(c)&&n?.clamp===!0?(c=Math.min(Math.max(c,s),o),Math.floor(c)%2===0?c=Math.floor(c):c=Math.ceil(c),c):Number.isNaN(c)||c===0&&Object.is(0,c)||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY?0:(c=$t.util.IntegerPart(c),c=c%Math.pow(2,e),r==="signed"&&c>=Math.pow(2,e)-1?c-Math.pow(2,e):c)};$t.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};$t.util.Stringify=function(t){switch($t.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return zJt(t);case"String":return`"${t}"`;default:return`${t}`}};$t.sequenceConverter=function(t){return(e,r,n,o)=>{if($t.util.Type(e)!=="Object")throw $t.errors.exception({header:r,message:`${n} (${$t.util.Stringify(e)}) is not iterable.`});let s=typeof o=="function"?o():e?.[Symbol.iterator]?.(),c=[],l=0;if(s===void 0||typeof s.next!="function")throw $t.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:u,value:d}=s.next();if(u)break;c.push(t(d,r,`${n}[${l++}]`))}return c}};$t.recordConverter=function(t,e){return(r,n,o)=>{if($t.util.Type(r)!=="Object")throw $t.errors.exception({header:n,message:`${o} ("${$t.util.Type(r)}") is not an Object.`});let s={};if(!i1.isProxy(r)){let l=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let u of l){let d=t(u,n,o),p=e(r[u],n,o);s[d]=p}return s}let c=Reflect.ownKeys(r);for(let l of c)if(Reflect.getOwnPropertyDescriptor(r,l)?.enumerable){let d=t(l,n,o),p=e(r[l],n,o);s[d]=p}return s}};$t.interfaceConverter=function(t){return(e,r,n,o)=>{if(o?.strict!==!1&&!(e instanceof t))throw $t.errors.exception({header:r,message:`Expected ${n} ("${$t.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};$t.dictionaryConverter=function(t){return(e,r,n)=>{let o=$t.util.Type(e),s={};if(o==="Null"||o==="Undefined")return s;if(o!=="Object")throw $t.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let c of t){let{key:l,defaultValue:u,required:d,converter:p}=c;if(d===!0&&!Object.hasOwn(e,l))throw $t.errors.exception({header:r,message:`Missing required key "${l}".`});let m=e[l],h=Object.hasOwn(c,"defaultValue");if(h&&m!==null&&(m??=u()),d||h||m!==void 0){if(m=p(m,r,`${n}.${l}`),c.allowedValues&&!c.allowedValues.includes(m))throw $t.errors.exception({header:r,message:`${m} is not an accepted type. Expected one of ${c.allowedValues.join(", ")}.`});s[l]=m}}return s}};$t.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};$t.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw $t.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};$t.converters.ByteString=function(t,e,r){let n=$t.converters.DOMString(t,e,r);for(let o=0;o<n.length;o++)if(n.charCodeAt(o)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${o} has a value of ${n.charCodeAt(o)} which is greater than 255.`);return n};$t.converters.USVString=YJt;$t.converters.boolean=function(t){return!!t};$t.converters.any=function(t){return t};$t.converters["long long"]=function(t,e,r){return $t.util.ConvertToInt(t,64,"signed",void 0,e,r)};$t.converters["unsigned long long"]=function(t,e,r){return $t.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};$t.converters["unsigned long"]=function(t,e,r){return $t.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};$t.converters["unsigned short"]=function(t,e,r,n){return $t.util.ConvertToInt(t,16,"unsigned",n,e,r)};$t.converters.ArrayBuffer=function(t,e,r,n){if($t.util.Type(t)!=="Object"||!i1.isAnyArrayBuffer(t))throw $t.errors.conversionFailed({prefix:e,argument:`${r} ("${$t.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&i1.isSharedArrayBuffer(t))throw $t.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw $t.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};$t.converters.TypedArray=function(t,e,r,n,o){if($t.util.Type(t)!=="Object"||!i1.isTypedArray(t)||t.constructor.name!==e.name)throw $t.errors.conversionFailed({prefix:r,argument:`${n} ("${$t.util.Stringify(t)}")`,types:[e.name]});if(o?.allowShared===!1&&i1.isSharedArrayBuffer(t.buffer))throw $t.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw $t.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};$t.converters.DataView=function(t,e,r,n){if($t.util.Type(t)!=="Object"||!i1.isDataView(t))throw $t.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&i1.isSharedArrayBuffer(t.buffer))throw $t.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw $t.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};$t.converters.BufferSource=function(t,e,r,n){if(i1.isAnyArrayBuffer(t))return $t.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(i1.isTypedArray(t))return $t.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(i1.isDataView(t))return $t.converters.DataView(t,e,r,{...n,allowShared:!1});throw $t.errors.conversionFailed({prefix:e,argument:`${r} ("${$t.util.Stringify(t)}")`,types:["BufferSource"]})};$t.converters["sequence<ByteString>"]=$t.sequenceConverter($t.converters.ByteString);$t.converters["sequence<sequence<ByteString>>"]=$t.sequenceConverter($t.converters["sequence<ByteString>"]);$t.converters["record<ByteString, ByteString>"]=$t.recordConverter($t.converters.ByteString,$t.converters.ByteString);ntt.exports={webidl:$t}});var X0=$((Lpi,Att)=>{"use strict";f();var{Transform:JJt}=require("node:stream"),itt=require("node:zlib"),{redirectStatusSet:XJt,referrerPolicySet:ZJt,badPortsSet:eXt}=Y7(),{getGlobalOrigin:ott}=vbe(),{collectASequenceOfCodePoints:sk,collectAnHTTPQuotedString:tXt,removeChars:rXt,parseMIMEType:nXt}=Fp(),{performance:iXt}=require("node:perf_hooks"),{isBlobLike:oXt,ReadableStreamFrom:sXt,isValidHTTPToken:stt,normalizedMethodRecordsBase:aXt}=Wi(),ak=require("node:assert"),{isUint8Array:cXt}=require("node:util/types"),{webidl:X7}=sd(),att=[],ite;try{ite=require("node:crypto");let t=["sha256","sha384","sha512"];att=ite.getHashes().filter(e=>t.includes(e))}catch{}function ctt(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}a(ctt,"responseURL");function lXt(t,e){if(!XJt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&utt(r)&&(ltt(r)||(r=uXt(r)),r=new URL(r,ctt(t))),r&&!r.hash&&(r.hash=e),r}a(lXt,"responseLocationURL");function ltt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}a(ltt,"isValidEncodedURL");function uXt(t){return Buffer.from(t,"binary").toString("utf8")}a(uXt,"normalizeBinaryStringToUtf8");function eQ(t){return t.urlList[t.urlList.length-1]}a(eQ,"requestCurrentURL");function dXt(t){let e=eQ(t);return htt(e)&&eXt.has(e.port)?"blocked":"allowed"}a(dXt,"requestBadPort");function fXt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}a(fXt,"isErrorLike");function pXt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}a(pXt,"isValidReasonPhrase");var mXt=stt;function utt(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}a(utt,"isValidHeaderValue");function hXt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),o="";if(n.length>0)for(let s=n.length;s!==0;s--){let c=n[s-1].trim();if(ZJt.has(c)){o=c;break}}o!==""&&(t.referrerPolicy=o)}a(hXt,"setRequestReferrerPolicyOnRedirect");function gXt(){return"allowed"}a(gXt,"crossOriginResourcePolicyCheck");function AXt(){return"success"}a(AXt,"corsCheck");function yXt(){return"success"}a(yXt,"TAOCheck");function CXt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}a(CXt,"appendFetchMetadata");function vXt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&Ibe(t.origin)&&!Ibe(eQ(t))&&(e=null);break;case"same-origin":ote(t,eQ(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}a(vXt,"appendRequestOriginHeader");function cN(t,e){return t}a(cN,"coarsenTime");function xXt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:cN(t.domainLookupStartTime,r),domainLookupEndTime:cN(t.domainLookupEndTime,r),connectionStartTime:cN(t.connectionStartTime,r),connectionEndTime:cN(t.connectionEndTime,r),secureConnectionStartTime:cN(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}a(xXt,"clampAndCoarsenConnectionTimingInfo");function EXt(t){return cN(iXt.now(),t)}a(EXt,"coarsenedSharedCurrentTime");function bXt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}a(bXt,"createOpaqueTimingInfo");function dtt(){return{referrerPolicy:"strict-origin-when-cross-origin"}}a(dtt,"makePolicyContainer");function IXt(t){return{referrerPolicy:t.referrerPolicy}}a(IXt,"clonePolicyContainer");function TXt(t){let e=t.referrerPolicy;ak(e);let r=null;if(t.referrer==="client"){let l=ott();if(!l||l.origin==="null")return"no-referrer";r=new URL(l)}else t.referrer instanceof URL&&(r=t.referrer);let n=bbe(r),o=bbe(r,!0);n.toString().length>4096&&(n=o);let s=ote(t,n),c=Z7(n)&&!Z7(t.url);switch(e){case"origin":return o??bbe(r,!0);case"unsafe-url":return n;case"same-origin":return s?o:"no-referrer";case"origin-when-cross-origin":return s?n:o;case"strict-origin-when-cross-origin":{let l=eQ(t);return ote(n,l)?n:Z7(n)&&!Z7(l)?"no-referrer":o}case"strict-origin":case"no-referrer-when-downgrade":default:return c?"no-referrer":o}}a(TXt,"determineRequestsReferrer");function bbe(t,e){return ak(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}a(bbe,"stripURLForReferrer");function Z7(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}a(Z7,"isURLPotentiallyTrustworthy");function wXt(t,e){if(ite===void 0)return!0;let r=ftt(e);if(r==="no metadata"||r.length===0)return!0;let n=SXt(r),o=RXt(r,n);for(let s of o){let c=s.algo,l=s.hash,u=ite.createHash(c).update(t).digest("base64");if(u[u.length-1]==="="&&(u[u.length-2]==="="?u=u.slice(0,-2):u=u.slice(0,-1)),kXt(u,l))return!0}return!1}a(wXt,"bytesMatch");var _Xt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function ftt(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let o=_Xt.exec(n);if(o===null||o.groups===void 0||o.groups.algo===void 0)continue;let s=o.groups.algo.toLowerCase();att.includes(s)&&e.push(o.groups)}return r===!0?"no metadata":e}a(ftt,"parseMetadata");function SXt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}a(SXt,"getStrongestMetadata");function RXt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}a(RXt,"filterMetadataListByAlgorithm");function kXt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}a(kXt,"compareBase64Mixed");function PXt(t){}a(PXt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function ote(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}a(ote,"sameOrigin");function DXt(){let t,e;return{promise:new Promise((n,o)=>{t=n,e=o}),resolve:t,reject:e}}a(DXt,"createDeferredPromise");function BXt(t){return t.controller.state==="aborted"}a(BXt,"isAborted");function NXt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}a(NXt,"isCancelled");function MXt(t){return aXt[t.toLowerCase()]??t}a(MXt,"normalizeMethod");function LXt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return ak(typeof e=="string"),e}a(LXt,"serializeJavascriptValueToJSONString");var FXt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function ptt(t,e,r=0,n=1){class o{static{a(this,"FastIterableIterator")}#e;#t;#i;constructor(c,l){this.#e=c,this.#t=l,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let c=this.#i,l=this.#e[e],u=l.length;if(c>=u)return{value:void 0,done:!0};let{[r]:d,[n]:p}=l[c];this.#i=c+1;let m;switch(this.#t){case"key":m=d;break;case"value":m=p;break;case"key+value":m=[d,p];break}return{value:m,done:!1}}}return delete o.prototype.constructor,Object.setPrototypeOf(o.prototype,FXt),Object.defineProperties(o.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(s,c){return new o(s,c)}}a(ptt,"createIterator");function OXt(t,e,r,n=0,o=1){let s=ptt(t,r,n,o),c={keys:{writable:!0,enumerable:!0,configurable:!0,value:a(function(){return X7.brandCheck(this,e),s(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:a(function(){return X7.brandCheck(this,e),s(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:a(function(){return X7.brandCheck(this,e),s(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:a(function(u,d=globalThis){if(X7.brandCheck(this,e),X7.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof u!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:p,1:m}of s(this,"key+value"))u.call(d,m,p,this)},"forEach")}};return Object.defineProperties(e.prototype,{...c,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:c.entries.value}})}a(OXt,"iteratorMixin");async function QXt(t,e,r){let n=e,o=r,s;try{s=t.stream.getReader()}catch(c){o(c);return}try{n(await mtt(s))}catch(c){o(c)}}a(QXt,"fullyReadBody");function UXt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}a(UXt,"isReadableStreamLike");function qXt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}a(qXt,"readableStreamClose");var HXt=/[^\x00-\xFF]/;function nte(t){return ak(!HXt.test(t)),t}a(nte,"isomorphicEncode");async function mtt(t){let e=[],r=0;for(;;){let{done:n,value:o}=await t.read();if(n)return Buffer.concat(e,r);if(!cXt(o))throw new TypeError("Received non-Uint8Array chunk");e.push(o),r+=o.length}}a(mtt,"readAllBytes");function $Xt(t){ak("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}a($Xt,"urlIsLocal");function Ibe(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}a(Ibe,"urlHasHttpsScheme");function htt(t){ak("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}a(htt,"urlIsHttpHttpsScheme");function WXt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&sk(u=>u==="	"||u===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&sk(u=>u==="	"||u===" ",r,n);let o=sk(u=>{let d=u.charCodeAt(0);return d>=48&&d<=57},r,n),s=o.length?Number(o):null;if(e&&sk(u=>u==="	"||u===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&sk(u=>u==="	"||u===" ",r,n);let c=sk(u=>{let d=u.charCodeAt(0);return d>=48&&d<=57},r,n),l=c.length?Number(c):null;return n.position<r.length||l===null&&s===null||s>l?"failure":{rangeStartValue:s,rangeEndValue:l}}a(WXt,"simpleRangeHeaderValue");function jXt(t,e,r){let n="bytes ";return n+=nte(`${t}`),n+="-",n+=nte(`${e}`),n+="/",n+=nte(`${r}`),n}a(jXt,"buildContentRange");var Tbe=class extends JJt{static{a(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?itt.createInflate(this.#e):itt.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",o=>this.destroy(o))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function GXt(t){return new Tbe(t)}a(GXt,"createInflate");function VXt(t){let e=null,r=null,n=null,o=gtt("content-type",t);if(o===null)return"failure";for(let s of o){let c=nXt(s);c==="failure"||c.essence==="*/*"||(n=c,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}a(VXt,"extractMimeType");function zXt(t){let e=t,r={position:0},n=[],o="";for(;r.position<e.length;){if(o+=sk(s=>s!=='"'&&s!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(o+=tXt(e,r),r.position<e.length)continue}else ak(e.charCodeAt(r.position)===44),r.position++;o=rXt(o,!0,!0,s=>s===9||s===32),n.push(o),o=""}return n}a(zXt,"gettingDecodingSplitting");function gtt(t,e){let r=e.get(t,!0);return r===null?null:zXt(r)}a(gtt,"getDecodeSplit");var KXt=new TextDecoder;function YXt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),KXt.decode(t))}a(YXt,"utf8DecodeBytes");var wbe=class{static{a(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return ott()}get origin(){return this.baseUrl?.origin}policyContainer=dtt()},_be=class{static{a(this,"EnvironmentSettingsObject")}settingsObject=new wbe},JXt=new _be;Att.exports={isAborted:BXt,isCancelled:NXt,isValidEncodedURL:ltt,createDeferredPromise:DXt,ReadableStreamFrom:sXt,tryUpgradeRequestToAPotentiallyTrustworthyURL:PXt,clampAndCoarsenConnectionTimingInfo:xXt,coarsenedSharedCurrentTime:EXt,determineRequestsReferrer:TXt,makePolicyContainer:dtt,clonePolicyContainer:IXt,appendFetchMetadata:CXt,appendRequestOriginHeader:vXt,TAOCheck:yXt,corsCheck:AXt,crossOriginResourcePolicyCheck:gXt,createOpaqueTimingInfo:bXt,setRequestReferrerPolicyOnRedirect:hXt,isValidHTTPToken:stt,requestBadPort:dXt,requestCurrentURL:eQ,responseURL:ctt,responseLocationURL:lXt,isBlobLike:oXt,isURLPotentiallyTrustworthy:Z7,isValidReasonPhrase:pXt,sameOrigin:ote,normalizeMethod:MXt,serializeJavascriptValueToJSONString:LXt,iteratorMixin:OXt,createIterator:ptt,isValidHeaderName:mXt,isValidHeaderValue:utt,isErrorLike:fXt,fullyReadBody:QXt,bytesMatch:wXt,isReadableStreamLike:UXt,readableStreamClose:qXt,isomorphicEncode:nte,urlIsLocal:$Xt,urlHasHttpsScheme:Ibe,urlIsHttpHttpsScheme:htt,readAllBytes:mtt,simpleRangeHeaderValue:WXt,buildContentRange:jXt,parseMetadata:ftt,createInflate:GXt,extractMimeType:VXt,getDecodeSplit:gtt,utf8DecodeBytes:YXt,environmentSettingsObject:JXt}});var iw=$((Qpi,ytt)=>{"use strict";f();ytt.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var Rbe=$((qpi,Ctt)=>{"use strict";f();var{Blob:XXt,File:ZXt}=require("node:buffer"),{kState:Gx}=iw(),{webidl:o1}=sd(),Sbe=class t{static{a(this,"FileLike")}constructor(e,r,n={}){let o=r,s=n.type,c=n.lastModified??Date.now();this[Gx]={blobLike:e,name:o,type:s,lastModified:c}}stream(...e){return o1.brandCheck(this,t),this[Gx].blobLike.stream(...e)}arrayBuffer(...e){return o1.brandCheck(this,t),this[Gx].blobLike.arrayBuffer(...e)}slice(...e){return o1.brandCheck(this,t),this[Gx].blobLike.slice(...e)}text(...e){return o1.brandCheck(this,t),this[Gx].blobLike.text(...e)}get size(){return o1.brandCheck(this,t),this[Gx].blobLike.size}get type(){return o1.brandCheck(this,t),this[Gx].blobLike.type}get name(){return o1.brandCheck(this,t),this[Gx].name}get lastModified(){return o1.brandCheck(this,t),this[Gx].lastModified}get[Symbol.toStringTag](){return"File"}};o1.converters.Blob=o1.interfaceConverter(XXt);function eZt(t){return t instanceof ZXt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}a(eZt,"isFileLike");Ctt.exports={FileLike:Sbe,isFileLike:eZt}});var rQ=$((Wpi,Itt)=>{"use strict";f();var{isBlobLike:ste,iteratorMixin:tZt}=X0(),{kState:Lf}=iw(),{kEnumerableProperty:lN}=Wi(),{FileLike:vtt,isFileLike:rZt}=Rbe(),{webidl:js}=sd(),{File:btt}=require("node:buffer"),xtt=require("node:util"),Ett=globalThis.File??btt,tQ=class t{static{a(this,"FormData")}constructor(e){if(js.util.markAsUncloneable(this),e!==void 0)throw js.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Lf]=[]}append(e,r,n=void 0){js.brandCheck(this,t);let o="FormData.append";if(js.argumentLengthCheck(arguments,2,o),arguments.length===3&&!ste(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=js.converters.USVString(e,o,"name"),r=ste(r)?js.converters.Blob(r,o,"value",{strict:!1}):js.converters.USVString(r,o,"value"),n=arguments.length===3?js.converters.USVString(n,o,"filename"):void 0;let s=kbe(e,r,n);this[Lf].push(s)}delete(e){js.brandCheck(this,t);let r="FormData.delete";js.argumentLengthCheck(arguments,1,r),e=js.converters.USVString(e,r,"name"),this[Lf]=this[Lf].filter(n=>n.name!==e)}get(e){js.brandCheck(this,t);let r="FormData.get";js.argumentLengthCheck(arguments,1,r),e=js.converters.USVString(e,r,"name");let n=this[Lf].findIndex(o=>o.name===e);return n===-1?null:this[Lf][n].value}getAll(e){js.brandCheck(this,t);let r="FormData.getAll";return js.argumentLengthCheck(arguments,1,r),e=js.converters.USVString(e,r,"name"),this[Lf].filter(n=>n.name===e).map(n=>n.value)}has(e){js.brandCheck(this,t);let r="FormData.has";return js.argumentLengthCheck(arguments,1,r),e=js.converters.USVString(e,r,"name"),this[Lf].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){js.brandCheck(this,t);let o="FormData.set";if(js.argumentLengthCheck(arguments,2,o),arguments.length===3&&!ste(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=js.converters.USVString(e,o,"name"),r=ste(r)?js.converters.Blob(r,o,"name",{strict:!1}):js.converters.USVString(r,o,"name"),n=arguments.length===3?js.converters.USVString(n,o,"name"):void 0;let s=kbe(e,r,n),c=this[Lf].findIndex(l=>l.name===e);c!==-1?this[Lf]=[...this[Lf].slice(0,c),s,...this[Lf].slice(c+1).filter(l=>l.name!==e)]:this[Lf].push(s)}[xtt.inspect.custom](e,r){let n=this[Lf].reduce((s,c)=>(s[c.name]?Array.isArray(s[c.name])?s[c.name].push(c.value):s[c.name]=[s[c.name],c.value]:s[c.name]=c.value,s),{__proto__:null});r.depth??=e,r.colors??=!0;let o=xtt.formatWithOptions(r,n);return`FormData ${o.slice(o.indexOf("]")+2)}`}};tZt("FormData",tQ,Lf,"name","value");Object.defineProperties(tQ.prototype,{append:lN,delete:lN,get:lN,getAll:lN,has:lN,set:lN,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function kbe(t,e,r){if(typeof e!="string"){if(rZt(e)||(e=e instanceof Blob?new Ett([e],"blob",{type:e.type}):new vtt(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof btt?new Ett([e],r,n):new vtt(e,r,n)}}return{name:t,value:e}}a(kbe,"makeEntry");Itt.exports={FormData:tQ,makeEntry:kbe}});var ktt=$((Vpi,Rtt)=>{"use strict";f();var{isUSVString:Ttt,bufferToLowerCasedHeaderName:nZt}=Wi(),{utf8DecodeBytes:iZt}=X0(),{HTTP_TOKEN_CODEPOINTS:oZt,isomorphicDecode:wtt}=Fp(),{isFileLike:sZt}=Rbe(),{makeEntry:aZt}=rQ(),ate=require("node:assert"),{File:cZt}=require("node:buffer"),lZt=globalThis.File??cZt,uZt=Buffer.from('form-data; name="'),_tt=Buffer.from("; filename"),dZt=Buffer.from("--"),fZt=Buffer.from(`--\r
`);function pZt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}a(pZt,"isAsciiString");function mZt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}a(mZt,"validateBoundary");function hZt(t,e){ate(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),o=[],s={position:0};for(;t[s.position]===13&&t[s.position+1]===10;)s.position+=2;let c=t.length;for(;t[c-1]===10&&t[c-2]===13;)c-=2;for(c!==t.length&&(t=t.subarray(0,c));;){if(t.subarray(s.position,s.position+n.length).equals(n))s.position+=n.length;else return"failure";if(s.position===t.length-2&&cte(t,dZt,s)||s.position===t.length-4&&cte(t,fZt,s))return o;if(t[s.position]!==13||t[s.position+1]!==10)return"failure";s.position+=2;let l=gZt(t,s);if(l==="failure")return"failure";let{name:u,filename:d,contentType:p,encoding:m}=l;s.position+=2;let h;{let A=t.indexOf(n.subarray(2),s.position);if(A===-1)return"failure";h=t.subarray(s.position,A-4),s.position+=h.length,m==="base64"&&(h=Buffer.from(h.toString(),"base64"))}if(t[s.position]!==13||t[s.position+1]!==10)return"failure";s.position+=2;let g;d!==null?(p??="text/plain",pZt(p)||(p=""),g=new lZt([h],d,{type:p})):g=iZt(Buffer.from(h)),ate(Ttt(u)),ate(typeof g=="string"&&Ttt(g)||sZt(g)),o.push(aZt(u,g,d))}}a(hZt,"multipartFormDataParser");function gZt(t,e){let r=null,n=null,o=null,s=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:o,encoding:s};let c=uN(l=>l!==10&&l!==13&&l!==58,t,e);if(c=Pbe(c,!0,!0,l=>l===9||l===32),!oZt.test(c.toString())||t[e.position]!==58)return"failure";switch(e.position++,uN(l=>l===32||l===9,t,e),nZt(c)){case"content-disposition":{if(r=n=null,!cte(t,uZt,e)||(e.position+=17,r=Stt(t,e),r===null))return"failure";if(cte(t,_tt,e)){let l=e.position+_tt.length;if(t[l]===42&&(e.position+=1,l+=1),t[l]!==61||t[l+1]!==34||(e.position+=12,n=Stt(t,e),n===null))return"failure"}break}case"content-type":{let l=uN(u=>u!==10&&u!==13,t,e);l=Pbe(l,!1,!0,u=>u===9||u===32),o=wtt(l);break}case"content-transfer-encoding":{let l=uN(u=>u!==10&&u!==13,t,e);l=Pbe(l,!1,!0,u=>u===9||u===32),s=wtt(l);break}default:uN(l=>l!==10&&l!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}a(gZt,"parseMultipartFormDataHeaders");function Stt(t,e){ate(t[e.position-1]===34);let r=uN(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}a(Stt,"parseMultipartFormDataName");function uN(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}a(uN,"collectASequenceOfBytes");function Pbe(t,e,r,n){let o=0,s=t.length-1;if(e)for(;o<t.length&&n(t[o]);)o++;if(r)for(;s>0&&n(t[s]);)s--;return o===0&&s===t.length-1?t:t.subarray(o,s+1)}a(Pbe,"removeChars");function cte(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}a(cte,"bufferStartsWith");Rtt.exports={multipartFormDataParser:hZt,validateBoundary:mZt}});var pN=$((Ypi,Ott)=>{"use strict";f();var nQ=Wi(),{ReadableStreamFrom:AZt,isBlobLike:Ptt,isReadableStreamLike:yZt,readableStreamClose:CZt,createDeferredPromise:vZt,fullyReadBody:xZt,extractMimeType:EZt,utf8DecodeBytes:Ntt}=X0(),{FormData:Dtt}=rQ(),{kState:fN}=iw(),{webidl:bZt}=sd(),{Blob:IZt}=require("node:buffer"),Dbe=require("node:assert"),{isErrored:Mtt,isDisturbed:TZt}=require("node:stream"),{isArrayBuffer:wZt}=require("node:util/types"),{serializeAMimeType:_Zt}=Fp(),{multipartFormDataParser:SZt}=ktt(),Bbe;try{let t=require("node:crypto");Bbe=a(e=>t.randomInt(0,e),"random")}catch{Bbe=a(t=>Math.floor(Math.random(t)),"random")}var lte=new TextEncoder;function RZt(){}a(RZt,"noop");var Nbe=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,Mbe;Nbe&&(Mbe=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!TZt(e)&&!Mtt(e)&&e.cancel("Response object has been garbage collected").catch(RZt)}));function Ltt(t,e=!1){let r=null;t instanceof ReadableStream?r=t:Ptt(t)?r=t.stream():r=new ReadableStream({async pull(u){let d=typeof o=="string"?lte.encode(o):o;d.byteLength&&u.enqueue(d),queueMicrotask(()=>CZt(u))},start(){},type:"bytes"}),Dbe(yZt(r));let n=null,o=null,s=null,c=null;if(typeof t=="string")o=t,c="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)o=t.toString(),c="application/x-www-form-urlencoded;charset=UTF-8";else if(wZt(t))o=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))o=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(nQ.isFormDataLike(t)){let u=`----formdata-undici-0${`${Bbe(1e11)}`.padStart(11,"0")}`,d=`--${u}\r
Content-Disposition: form-data`;let p=a(v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),m=a(v=>v.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),h=[],g=new Uint8Array([13,10]);s=0;let A=!1;for(let[v,b]of t)if(typeof b=="string"){let I=lte.encode(d+`; name="${p(m(v))}"\r
\r
${m(b)}\r
`);h.push(I),s+=I.byteLength}else{let I=lte.encode(`${d}; name="${p(m(v))}"`+(b.name?`; filename="${p(b.name)}"`:"")+`\r
Content-Type: ${b.type||"application/octet-stream"}\r
\r
`);h.push(I,b,g),typeof b.size=="number"?s+=I.byteLength+b.size+g.byteLength:A=!0}let y=lte.encode(`--${u}--\r
`);h.push(y),s+=y.byteLength,A&&(s=null),o=t,n=a(async function*(){for(let v of h)v.stream?yield*v.stream():yield v},"action"),c=`multipart/form-data; boundary=${u}`}else if(Ptt(t))o=t,s=t.size,t.type&&(c=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(nQ.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:AZt(t)}if((typeof o=="string"||nQ.isBuffer(o))&&(s=Buffer.byteLength(o)),n!=null){let u;r=new ReadableStream({async start(){u=n(t)[Symbol.asyncIterator]()},async pull(d){let{value:p,done:m}=await u.next();if(m)queueMicrotask(()=>{d.close(),d.byobRequest?.respond(0)});else if(!Mtt(r)){let h=new Uint8Array(p);h.byteLength&&d.enqueue(h)}return d.desiredSize>0},async cancel(d){await u.return()},type:"bytes"})}return[{stream:r,source:o,length:s},c]}a(Ltt,"extractBody");function kZt(t,e=!1){return t instanceof ReadableStream&&(Dbe(!nQ.isDisturbed(t),"The body has already been consumed."),Dbe(!t.locked,"The stream is locked.")),Ltt(t,e)}a(kZt,"safelyExtractBody");function PZt(t,e){let[r,n]=e.stream.tee();return Nbe&&Mbe.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}a(PZt,"cloneBody");function DZt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}a(DZt,"throwIfAborted");function BZt(t){return{blob(){return dN(this,r=>{let n=Btt(this);return n===null?n="":n&&(n=_Zt(n)),new IZt([r],{type:n})},t)},arrayBuffer(){return dN(this,r=>new Uint8Array(r).buffer,t)},text(){return dN(this,Ntt,t)},json(){return dN(this,MZt,t)},formData(){return dN(this,r=>{let n=Btt(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let o=SZt(r,n);if(o==="failure")throw new TypeError("Failed to parse body as FormData.");let s=new Dtt;return s[fN]=o,s}case"application/x-www-form-urlencoded":{let o=new URLSearchParams(r.toString()),s=new Dtt;for(let[c,l]of o)s.append(c,l);return s}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return dN(this,r=>new Uint8Array(r),t)}}}a(BZt,"bodyMixinMethods");function NZt(t){Object.assign(t.prototype,BZt(t))}a(NZt,"mixinBody");async function dN(t,e,r){if(bZt.brandCheck(t,r),Ftt(t))throw new TypeError("Body is unusable: Body has already been read");DZt(t[fN]);let n=vZt(),o=a(c=>n.reject(c),"errorSteps"),s=a(c=>{try{n.resolve(e(c))}catch(l){o(l)}},"successSteps");return t[fN].body==null?(s(Buffer.allocUnsafe(0)),n.promise):(await xZt(t[fN].body,s,o),n.promise)}a(dN,"consumeBody");function Ftt(t){let e=t[fN].body;return e!=null&&(e.stream.locked||nQ.isDisturbed(e.stream))}a(Ftt,"bodyUnusable");function MZt(t){return JSON.parse(Ntt(t))}a(MZt,"parseJSONFromBytes");function Btt(t){let e=t[fN].headersList,r=EZt(e);return r==="failure"?null:r}a(Btt,"bodyMimeType");Ott.exports={extractBody:Ltt,safelyExtractBody:kZt,cloneBody:PZt,mixinBody:NZt,streamRegistry:Mbe,hasFinalizationRegistry:Nbe,bodyUnusable:Ftt}});var Ktt=$((Zpi,ztt)=>{"use strict";f();var Mn=require("node:assert"),di=Wi(),{channels:Qtt}=eN(),Lbe=hbe(),{RequestContentLengthMismatchError:ck,ResponseContentLengthMismatchError:LZt,RequestAbortedError:jtt,HeadersTimeoutError:FZt,HeadersOverflowError:OZt,SocketError:hte,InformationalError:mN,BodyTimeoutError:QZt,HTTPParserError:UZt,ResponseExceededMaxSizeError:qZt}=Xo(),{kUrl:Gtt,kReset:Op,kClient:Ube,kParser:Ac,kBlocking:sQ,kRunning:Gd,kPending:HZt,kSize:Utt,kWriting:sw,kQueue:WA,kNoRef:iQ,kKeepAliveDefaultTimeout:$Zt,kHostHeader:WZt,kPendingIdx:jZt,kRunningIdx:qh,kError:Hh,kPipelining:pte,kSocket:hN,kKeepAliveTimeoutValue:gte,kMaxHeadersSize:Fbe,kKeepAliveMaxTimeout:GZt,kKeepAliveTimeoutThreshold:VZt,kHeadersTimeout:zZt,kBodyTimeout:KZt,kStrictContentLength:qbe,kMaxRequests:qtt,kCounter:YZt,kMaxResponseSize:JZt,kOnError:XZt,kResume:ow,kHTTPContext:Vtt}=Qa(),s1=Fet(),ZZt=Buffer.alloc(0),ute=Buffer[Symbol.species],dte=di.addListener,eer=di.removeAllListeners,Obe;async function ter(){let t=process.env.JEST_WORKER_ID?ybe():void 0,e;try{e=await WebAssembly.compile(Uet())}catch{e=await WebAssembly.compile(t||ybe())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:a((r,n,o)=>0,"wasm_on_url"),wasm_on_status:a((r,n,o)=>{Mn(ql.ptr===r);let s=n-c1+a1.byteOffset;return ql.onStatus(new ute(a1.buffer,s,o))||0},"wasm_on_status"),wasm_on_message_begin:a(r=>(Mn(ql.ptr===r),ql.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:a((r,n,o)=>{Mn(ql.ptr===r);let s=n-c1+a1.byteOffset;return ql.onHeaderField(new ute(a1.buffer,s,o))||0},"wasm_on_header_field"),wasm_on_header_value:a((r,n,o)=>{Mn(ql.ptr===r);let s=n-c1+a1.byteOffset;return ql.onHeaderValue(new ute(a1.buffer,s,o))||0},"wasm_on_header_value"),wasm_on_headers_complete:a((r,n,o,s)=>(Mn(ql.ptr===r),ql.onHeadersComplete(n,!!o,!!s)||0),"wasm_on_headers_complete"),wasm_on_body:a((r,n,o)=>{Mn(ql.ptr===r);let s=n-c1+a1.byteOffset;return ql.onBody(new ute(a1.buffer,s,o))||0},"wasm_on_body"),wasm_on_message_complete:a(r=>(Mn(ql.ptr===r),ql.onMessageComplete()||0),"wasm_on_message_complete")}})}a(ter,"lazyllhttp");var Qbe=null,Hbe=ter();Hbe.catch();var ql=null,a1=null,fte=0,c1=null,rer=0,oQ=1,gN=2|oQ,mte=4|oQ,$be=8|rer,Wbe=class{static{a(this,"Parser")}constructor(e,r,{exports:n}){Mn(Number.isFinite(e[Fbe])&&e[Fbe]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(s1.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[Fbe],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[JZt]}setTimeout(e,r){e!==this.timeoutValue||r&oQ^this.timeoutType&oQ?(this.timeout&&(Lbe.clearTimeout(this.timeout),this.timeout=null),e&&(r&oQ?this.timeout=Lbe.setFastTimeout(Htt,e,new WeakRef(this)):(this.timeout=setTimeout(Htt,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(Mn(this.ptr!=null),Mn(ql==null),this.llhttp.llhttp_resume(this.ptr),Mn(this.timeoutType===mte),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||ZZt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Mn(this.ptr!=null),Mn(ql==null),Mn(!this.paused);let{socket:r,llhttp:n}=this;e.length>fte&&(c1&&n.free(c1),fte=Math.ceil(e.length/4096)*4096,c1=n.malloc(fte)),new Uint8Array(n.memory.buffer,c1,fte).set(e);try{let o;try{a1=e,ql=this,o=n.llhttp_execute(this.ptr,c1,e.length)}catch(c){throw c}finally{ql=null,a1=null}let s=n.llhttp_get_error_pos(this.ptr)-c1;if(o===s1.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(s));else if(o===s1.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(s));else if(o!==s1.ERROR.OK){let c=n.llhttp_get_error_reason(this.ptr),l="";if(c){let u=new Uint8Array(n.memory.buffer,c).indexOf(0);l="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,c,u).toString()+")"}throw new UZt(l,s1.ERROR[o],e.slice(s))}}catch(o){di.destroy(r,o)}}destroy(){Mn(this.ptr!=null),Mn(ql==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Lbe.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[WA][r[qh]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let o=di.bufferToLowerCasedHeaderName(n);o==="keep-alive"?this.keepAlive+=e.toString():o==="connection"&&(this.connection+=e.toString())}else n.length===14&&di.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&di.destroy(this.socket,new OZt)}onUpgrade(e){let{upgrade:r,client:n,socket:o,headers:s,statusCode:c}=this;Mn(r),Mn(n[hN]===o),Mn(!o.destroyed),Mn(!this.paused),Mn((s.length&1)===0);let l=n[WA][n[qh]];Mn(l),Mn(l.upgrade||l.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,o.unshift(e),o[Ac].destroy(),o[Ac]=null,o[Ube]=null,o[Hh]=null,eer(o),n[hN]=null,n[Vtt]=null,n[WA][n[qh]++]=null,n.emit("disconnect",n[Gtt],[n],new mN("upgrade"));try{l.onUpgrade(c,s,o)}catch(u){di.destroy(o,u)}n[ow]()}onHeadersComplete(e,r,n){let{client:o,socket:s,headers:c,statusText:l}=this;if(s.destroyed)return-1;let u=o[WA][o[qh]];if(!u)return-1;if(Mn(!this.upgrade),Mn(this.statusCode<200),e===100)return di.destroy(s,new hte("bad response",di.getSocketInfo(s))),-1;if(r&&!u.upgrade)return di.destroy(s,new hte("bad upgrade",di.getSocketInfo(s))),-1;if(Mn(this.timeoutType===gN),this.statusCode=e,this.shouldKeepAlive=n||u.method==="HEAD"&&!s[Op]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let p=u.bodyTimeout!=null?u.bodyTimeout:o[KZt];this.setTimeout(p,mte)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(u.method==="CONNECT")return Mn(o[Gd]===1),this.upgrade=!0,2;if(r)return Mn(o[Gd]===1),this.upgrade=!0,2;if(Mn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&o[pte]){let p=this.keepAlive?di.parseKeepAliveTimeout(this.keepAlive):null;if(p!=null){let m=Math.min(p-o[VZt],o[GZt]);m<=0?s[Op]=!0:o[gte]=m}else o[gte]=o[$Zt]}else s[Op]=!0;let d=u.onHeaders(e,c,this.resume,l)===!1;return u.aborted?-1:u.method==="HEAD"||e<200?1:(s[sQ]&&(s[sQ]=!1,o[ow]()),d?s1.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:o,maxResponseSize:s}=this;if(n.destroyed)return-1;let c=r[WA][r[qh]];if(Mn(c),Mn(this.timeoutType===mte),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Mn(o>=200),s>-1&&this.bytesRead+e.length>s)return di.destroy(n,new qZt),-1;if(this.bytesRead+=e.length,c.onData(e)===!1)return s1.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:o,headers:s,contentLength:c,bytesRead:l,shouldKeepAlive:u}=this;if(r.destroyed&&(!n||u))return-1;if(o)return;Mn(n>=100),Mn((this.headers.length&1)===0);let d=e[WA][e[qh]];if(Mn(d),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(d.method!=="HEAD"&&c&&l!==parseInt(c,10))return di.destroy(r,new LZt),-1;if(d.onComplete(s),e[WA][e[qh]++]=null,r[sw])return Mn(e[Gd]===0),di.destroy(r,new mN("reset")),s1.ERROR.PAUSED;if(u){if(r[Op]&&e[Gd]===0)return di.destroy(r,new mN("reset")),s1.ERROR.PAUSED;e[pte]==null||e[pte]===1?setImmediate(()=>e[ow]()):e[ow]()}else return di.destroy(r,new mN("reset")),s1.ERROR.PAUSED}}};function Htt(t){let{socket:e,timeoutType:r,client:n,paused:o}=t.deref();r===gN?(!e[sw]||e.writableNeedDrain||n[Gd]>1)&&(Mn(!o,"cannot be paused while waiting for headers"),di.destroy(e,new FZt)):r===mte?o||di.destroy(e,new QZt):r===$be&&(Mn(n[Gd]===0&&n[gte]),di.destroy(e,new mN("socket idle timeout")))}a(Htt,"onParserTimeout");async function ner(t,e){t[hN]=e,Qbe||(Qbe=await Hbe,Hbe=null),e[iQ]=!1,e[sw]=!1,e[Op]=!1,e[sQ]=!1,e[Ac]=new Wbe(t,e,Qbe),dte(e,"error",function(n){Mn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let o=this[Ac];if(n.code==="ECONNRESET"&&o.statusCode&&!o.shouldKeepAlive){o.onMessageComplete();return}this[Hh]=n,this[Ube][XZt](n)}),dte(e,"readable",function(){let n=this[Ac];n&&n.readMore()}),dte(e,"end",function(){let n=this[Ac];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}di.destroy(this,new hte("other side closed",di.getSocketInfo(this)))}),dte(e,"close",function(){let n=this[Ube],o=this[Ac];o&&(!this[Hh]&&o.statusCode&&!o.shouldKeepAlive&&o.onMessageComplete(),this[Ac].destroy(),this[Ac]=null);let s=this[Hh]||new hte("closed",di.getSocketInfo(this));if(n[hN]=null,n[Vtt]=null,n.destroyed){Mn(n[HZt]===0);let c=n[WA].splice(n[qh]);for(let l=0;l<c.length;l++){let u=c[l];di.errorRequest(n,u,s)}}else if(n[Gd]>0&&s.code!=="UND_ERR_INFO"){let c=n[WA][n[qh]];n[WA][n[qh]++]=null,di.errorRequest(n,c,s)}n[jZt]=n[qh],Mn(n[Gd]===0),n.emit("disconnect",n[Gtt],[n],s),n[ow]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return ser(t,...n)},resume(){ier(t)},destroy(n,o){r?queueMicrotask(o):e.destroy(n).on("close",o)},get destroyed(){return e.destroyed},busy(n){return!!(e[sw]||e[Op]||e[sQ]||n&&(t[Gd]>0&&!n.idempotent||t[Gd]>0&&(n.upgrade||n.method==="CONNECT")||t[Gd]>0&&di.bodyLength(n.body)!==0&&(di.isStream(n.body)||di.isAsyncIterable(n.body)||di.isFormDataLike(n.body))))}}}a(ner,"connectH1");function ier(t){let e=t[hN];if(e&&!e.destroyed){if(t[Utt]===0?!e[iQ]&&e.unref&&(e.unref(),e[iQ]=!0):e[iQ]&&e.ref&&(e.ref(),e[iQ]=!1),t[Utt]===0)e[Ac].timeoutType!==$be&&e[Ac].setTimeout(t[gte],$be);else if(t[Gd]>0&&e[Ac].statusCode<200&&e[Ac].timeoutType!==gN){let r=t[WA][t[qh]],n=r.headersTimeout!=null?r.headersTimeout:t[zZt];e[Ac].setTimeout(n,gN)}}}a(ier,"resumeH1");function oer(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}a(oer,"shouldSendContentLength");function ser(t,e){let{method:r,path:n,host:o,upgrade:s,blocking:c,reset:l}=e,{body:u,headers:d,contentLength:p}=e,m=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(di.isFormDataLike(u)){Obe||(Obe=pN().extractBody);let[v,b]=Obe(u);e.contentType==null&&d.push("content-type",b),u=v.stream,p=v.length}else di.isBlobLike(u)&&e.contentType==null&&u.type&&d.push("content-type",u.type);u&&typeof u.read=="function"&&u.read(0);let h=di.bodyLength(u);if(p=h??p,p===null&&(p=e.contentLength),p===0&&!m&&(p=null),oer(r)&&p>0&&e.contentLength!==null&&e.contentLength!==p){if(t[qbe])return di.errorRequest(t,e,new ck),!1;process.emitWarning(new ck)}let g=t[hN],A=a(v=>{e.aborted||e.completed||(di.errorRequest(t,e,v||new jtt),di.destroy(u),di.destroy(g,new mN("aborted")))},"abort");try{e.onConnect(A)}catch(v){di.errorRequest(t,e,v)}if(e.aborted)return!1;r==="HEAD"&&(g[Op]=!0),(s||r==="CONNECT")&&(g[Op]=!0),l!=null&&(g[Op]=l),t[qtt]&&g[YZt]++>=t[qtt]&&(g[Op]=!0),c&&(g[sQ]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof o=="string"?y+=`host: ${o}\r
`:y+=t[WZt],s?y+=`connection: upgrade\r
upgrade: ${s}\r
`:t[pte]&&!g[Op]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(d))for(let v=0;v<d.length;v+=2){let b=d[v+0],I=d[v+1];if(Array.isArray(I))for(let S=0;S<I.length;S++)y+=`${b}: ${I[S]}\r
`;else y+=`${b}: ${I}\r
`}return Qtt.sendHeaders.hasSubscribers&&Qtt.sendHeaders.publish({request:e,headers:y,socket:g}),!u||h===0?$tt(A,null,t,e,g,p,y,m):di.isBuffer(u)?$tt(A,u,t,e,g,p,y,m):di.isBlobLike(u)?typeof u.stream=="function"?Wtt(A,u.stream(),t,e,g,p,y,m):cer(A,u,t,e,g,p,y,m):di.isStream(u)?aer(A,u,t,e,g,p,y,m):di.isIterable(u)?Wtt(A,u,t,e,g,p,y,m):Mn(!1),!0}a(ser,"writeH1");function aer(t,e,r,n,o,s,c,l){Mn(s!==0||r[Gd]===0,"stream body cannot be pipelined");let u=!1,d=new Ate({abort:t,socket:o,request:n,contentLength:s,client:r,expectsPayload:l,header:c}),p=a(function(A){if(!u)try{!d.write(A)&&this.pause&&this.pause()}catch(y){di.destroy(this,y)}},"onData"),m=a(function(){u||e.resume&&e.resume()},"onDrain"),h=a(function(){if(queueMicrotask(()=>{e.removeListener("error",g)}),!u){let A=new jtt;queueMicrotask(()=>g(A))}},"onClose"),g=a(function(A){if(!u){if(u=!0,Mn(o.destroyed||o[sw]&&r[Gd]<=1),o.off("drain",m).off("error",g),e.removeListener("data",p).removeListener("end",g).removeListener("close",h),!A)try{d.end()}catch(y){A=y}d.destroy(A),A&&(A.code!=="UND_ERR_INFO"||A.message!=="reset")?di.destroy(e,A):di.destroy(e)}},"onFinished");e.on("data",p).on("end",g).on("error",g).on("close",h),e.resume&&e.resume(),o.on("drain",m).on("error",g),e.errorEmitted??e.errored?setImmediate(()=>g(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>g(null)),(e.closeEmitted??e.closed)&&setImmediate(h)}a(aer,"writeStream");function $tt(t,e,r,n,o,s,c,l){try{e?di.isBuffer(e)&&(Mn(s===e.byteLength,"buffer body must have content length"),o.cork(),o.write(`${c}content-length: ${s}\r
\r
`,"latin1"),o.write(e),o.uncork(),n.onBodySent(e),!l&&n.reset!==!1&&(o[Op]=!0)):s===0?o.write(`${c}content-length: 0\r
\r
`,"latin1"):(Mn(s===null,"no body must not have content length"),o.write(`${c}\r
`,"latin1")),n.onRequestSent(),r[ow]()}catch(u){t(u)}}a($tt,"writeBuffer");async function cer(t,e,r,n,o,s,c,l){Mn(s===e.size,"blob body must have content length");try{if(s!=null&&s!==e.size)throw new ck;let u=Buffer.from(await e.arrayBuffer());o.cork(),o.write(`${c}content-length: ${s}\r
\r
`,"latin1"),o.write(u),o.uncork(),n.onBodySent(u),n.onRequestSent(),!l&&n.reset!==!1&&(o[Op]=!0),r[ow]()}catch(u){t(u)}}a(cer,"writeBlob");async function Wtt(t,e,r,n,o,s,c,l){Mn(s!==0||r[Gd]===0,"iterator body cannot be pipelined");let u=null;function d(){if(u){let h=u;u=null,h()}}a(d,"onDrain");let p=a(()=>new Promise((h,g)=>{Mn(u===null),o[Hh]?g(o[Hh]):u=h}),"waitForDrain");o.on("close",d).on("drain",d);let m=new Ate({abort:t,socket:o,request:n,contentLength:s,client:r,expectsPayload:l,header:c});try{for await(let h of e){if(o[Hh])throw o[Hh];m.write(h)||await p()}m.end()}catch(h){m.destroy(h)}finally{o.off("close",d).off("drain",d)}}a(Wtt,"writeIterable");var Ate=class{static{a(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:o,client:s,expectsPayload:c,header:l}){this.socket=r,this.request=n,this.contentLength=o,this.client=s,this.bytesWritten=0,this.expectsPayload=c,this.header=l,this.abort=e,r[sw]=!0}write(e){let{socket:r,request:n,contentLength:o,client:s,bytesWritten:c,expectsPayload:l,header:u}=this;if(r[Hh])throw r[Hh];if(r.destroyed)return!1;let d=Buffer.byteLength(e);if(!d)return!0;if(o!==null&&c+d>o){if(s[qbe])throw new ck;process.emitWarning(new ck)}r.cork(),c===0&&(!l&&n.reset!==!1&&(r[Op]=!0),o===null?r.write(`${u}transfer-encoding: chunked\r
`,"latin1"):r.write(`${u}content-length: ${o}\r
\r
`,"latin1")),o===null&&r.write(`\r
${d.toString(16)}\r
`,"latin1"),this.bytesWritten+=d;let p=r.write(e);return r.uncork(),n.onBodySent(e),p||r[Ac].timeout&&r[Ac].timeoutType===gN&&r[Ac].timeout.refresh&&r[Ac].timeout.refresh(),p}end(){let{socket:e,contentLength:r,client:n,bytesWritten:o,expectsPayload:s,header:c,request:l}=this;if(l.onRequestSent(),e[sw]=!1,e[Hh])throw e[Hh];if(!e.destroyed){if(o===0?s?e.write(`${c}content-length: 0\r
\r
`,"latin1"):e.write(`${c}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&o!==r){if(n[qbe])throw new ck;process.emitWarning(new ck)}e[Ac].timeout&&e[Ac].timeoutType===gN&&e[Ac].timeout.refresh&&e[Ac].timeout.refresh(),n[ow]()}}destroy(e){let{socket:r,client:n,abort:o}=this;r[sw]=!1,e&&(Mn(n[Gd]<=1,"pipeline should only contain this request"),o(e))}};ztt.exports=ner});var nrt=$((r0i,rrt)=>{"use strict";f();var $h=require("node:assert"),{pipeline:ler}=require("node:stream"),mo=Wi(),{RequestContentLengthMismatchError:jbe,RequestAbortedError:Ytt,SocketError:aQ,InformationalError:Gbe}=Xo(),{kUrl:yte,kReset:vte,kClient:AN,kRunning:xte,kPending:uer,kQueue:aw,kPendingIdx:Vbe,kRunningIdx:jA,kError:VA,kSocket:Cu,kStrictContentLength:der,kOnError:zbe,kMaxConcurrentStreams:trt,kHTTP2Session:GA,kResume:cw,kSize:fer,kHTTPContext:per}=Qa(),Vx=Symbol("open streams"),Jtt,Xtt=!1,Cte;try{Cte=require("node:http2")}catch{Cte={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:mer,HTTP2_HEADER_METHOD:her,HTTP2_HEADER_PATH:ger,HTTP2_HEADER_SCHEME:Aer,HTTP2_HEADER_CONTENT_LENGTH:yer,HTTP2_HEADER_EXPECT:Cer,HTTP2_HEADER_STATUS:ver}}=Cte;function xer(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let o of n)e.push(Buffer.from(r),Buffer.from(o));else e.push(Buffer.from(r),Buffer.from(n));return e}a(xer,"parseH2Headers");async function Eer(t,e){t[Cu]=e,Xtt||(Xtt=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=Cte.connect(t[yte],{createConnection:a(()=>e,"createConnection"),peerMaxConcurrentStreams:t[trt]});r[Vx]=0,r[AN]=t,r[Cu]=e,mo.addListener(r,"error",Ier),mo.addListener(r,"frameError",Ter),mo.addListener(r,"end",wer),mo.addListener(r,"goaway",_er),mo.addListener(r,"close",function(){let{[AN]:o}=this,{[Cu]:s}=o,c=this[Cu][VA]||this[VA]||new aQ("closed",mo.getSocketInfo(s));if(o[GA]=null,o.destroyed){$h(o[uer]===0);let l=o[aw].splice(o[jA]);for(let u=0;u<l.length;u++){let d=l[u];mo.errorRequest(o,d,c)}}}),r.unref(),t[GA]=r,e[GA]=r,mo.addListener(e,"error",function(o){$h(o.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[VA]=o,this[AN][zbe](o)}),mo.addListener(e,"end",function(){mo.destroy(this,new aQ("other side closed",mo.getSocketInfo(this)))}),mo.addListener(e,"close",function(){let o=this[VA]||new aQ("closed",mo.getSocketInfo(this));t[Cu]=null,this[GA]!=null&&this[GA].destroy(o),t[Vbe]=t[jA],$h(t[xte]===0),t.emit("disconnect",t[yte],[t],o),t[cw]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...o){return Rer(t,...o)},resume(){ber(t)},destroy(o,s){n?queueMicrotask(s):e.destroy(o).on("close",s)},get destroyed(){return e.destroyed},busy(){return!1}}}a(Eer,"connectH2");function ber(t){let e=t[Cu];e?.destroyed===!1&&(t[fer]===0&&t[trt]===0?(e.unref(),t[GA].unref()):(e.ref(),t[GA].ref()))}a(ber,"resumeH2");function Ier(t){$h(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Cu][VA]=t,this[AN][zbe](t)}a(Ier,"onHttp2SessionError");function Ter(t,e,r){if(r===0){let n=new Gbe(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Cu][VA]=n,this[AN][zbe](n)}}a(Ter,"onHttp2FrameError");function wer(){let t=new aQ("other side closed",mo.getSocketInfo(this[Cu]));this.destroy(t),mo.destroy(this[Cu],t)}a(wer,"onHttp2SessionEnd");function _er(t){let e=this[VA]||new aQ(`HTTP/2: "GOAWAY" frame received with code ${t}`,mo.getSocketInfo(this)),r=this[AN];if(r[Cu]=null,r[per]=null,this[GA]!=null&&(this[GA].destroy(e),this[GA]=null),mo.destroy(this[Cu],e),r[jA]<r[aw].length){let n=r[aw][r[jA]];r[aw][r[jA]++]=null,mo.errorRequest(r,n,e),r[Vbe]=r[jA]}$h(r[xte]===0),r.emit("disconnect",r[yte],[r],e),r[cw]()}a(_er,"onHTTP2GoAway");function Ser(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}a(Ser,"shouldSendContentLength");function Rer(t,e){let r=t[GA],{method:n,path:o,host:s,upgrade:c,expectContinue:l,signal:u,headers:d}=e,{body:p}=e;if(c)return mo.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let m={};for(let k=0;k<d.length;k+=2){let N=d[k+0],F=d[k+1];if(Array.isArray(F))for(let O=0;O<F.length;O++)m[N]?m[N]+=`,${F[O]}`:m[N]=F[O];else m[N]=F}let h,{hostname:g,port:A}=t[yte];m[mer]=s||`${g}${A?`:${A}`:""}`,m[her]=n;let y=a(k=>{e.aborted||e.completed||(k=k||new Ytt,mo.errorRequest(t,e,k),h!=null&&mo.destroy(h,k),mo.destroy(p,k),t[aw][t[jA]++]=null,t[cw]())},"abort");try{e.onConnect(y)}catch(k){mo.errorRequest(t,e,k)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),h=r.request(m,{endStream:!1,signal:u}),h.id&&!h.pending?(e.onUpgrade(null,null,h),++r[Vx],t[aw][t[jA]++]=null):h.once("ready",()=>{e.onUpgrade(null,null,h),++r[Vx],t[aw][t[jA]++]=null}),h.once("close",()=>{r[Vx]-=1,r[Vx]===0&&r.unref()}),!0;m[ger]=o,m[Aer]="https";let v=n==="PUT"||n==="POST"||n==="PATCH";p&&typeof p.read=="function"&&p.read(0);let b=mo.bodyLength(p);if(mo.isFormDataLike(p)){Jtt??=pN().extractBody;let[k,N]=Jtt(p);m["content-type"]=N,p=k.stream,b=k.length}if(b==null&&(b=e.contentLength),(b===0||!v)&&(b=null),Ser(n)&&b>0&&e.contentLength!=null&&e.contentLength!==b){if(t[der])return mo.errorRequest(t,e,new jbe),!1;process.emitWarning(new jbe)}b!=null&&($h(p,"no body must not have content length"),m[yer]=`${b}`),r.ref();let I=n==="GET"||n==="HEAD"||p===null;return l?(m[Cer]="100-continue",h=r.request(m,{endStream:I,signal:u}),h.once("continue",S)):(h=r.request(m,{endStream:I,signal:u}),S()),++r[Vx],h.once("response",k=>{let{[ver]:N,...F}=k;if(e.onResponseStarted(),e.aborted){let O=new Ytt;mo.errorRequest(t,e,O),mo.destroy(h,O);return}e.onHeaders(Number(N),xer(F),h.resume.bind(h),"")===!1&&h.pause(),h.on("data",O=>{e.onData(O)===!1&&h.pause()})}),h.once("end",()=>{(h.state?.state==null||h.state.state<6)&&e.onComplete([]),r[Vx]===0&&r.unref(),y(new Gbe("HTTP/2: stream half-closed (remote)")),t[aw][t[jA]++]=null,t[Vbe]=t[jA],t[cw]()}),h.once("close",()=>{r[Vx]-=1,r[Vx]===0&&r.unref()}),h.once("error",function(k){y(k)}),h.once("frameError",(k,N)=>{y(new Gbe(`HTTP/2: "frameError" received - type ${k}, code ${N}`))}),!0;function S(){!p||b===0?Ztt(y,h,null,t,e,t[Cu],b,v):mo.isBuffer(p)?Ztt(y,h,p,t,e,t[Cu],b,v):mo.isBlobLike(p)?typeof p.stream=="function"?ert(y,h,p.stream(),t,e,t[Cu],b,v):Per(y,h,p,t,e,t[Cu],b,v):mo.isStream(p)?ker(y,t[Cu],v,h,p,t,e,b):mo.isIterable(p)?ert(y,h,p,t,e,t[Cu],b,v):$h(!1)}a(S,"writeBodyH2")}a(Rer,"writeH2");function Ztt(t,e,r,n,o,s,c,l){try{r!=null&&mo.isBuffer(r)&&($h(c===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),o.onBodySent(r)),l||(s[vte]=!0),o.onRequestSent(),n[cw]()}catch(u){t(u)}}a(Ztt,"writeBuffer");function ker(t,e,r,n,o,s,c,l){$h(l!==0||s[xte]===0,"stream body cannot be pipelined");let u=ler(o,n,p=>{p?(mo.destroy(u,p),t(p)):(mo.removeAllListeners(u),c.onRequestSent(),r||(e[vte]=!0),s[cw]())});mo.addListener(u,"data",d);function d(p){c.onBodySent(p)}a(d,"onPipeData")}a(ker,"writeStream");async function Per(t,e,r,n,o,s,c,l){$h(c===r.size,"blob body must have content length");try{if(c!=null&&c!==r.size)throw new jbe;let u=Buffer.from(await r.arrayBuffer());e.cork(),e.write(u),e.uncork(),e.end(),o.onBodySent(u),o.onRequestSent(),l||(s[vte]=!0),n[cw]()}catch(u){t(u)}}a(Per,"writeBlob");async function ert(t,e,r,n,o,s,c,l){$h(c!==0||n[xte]===0,"iterator body cannot be pipelined");let u=null;function d(){if(u){let m=u;u=null,m()}}a(d,"onDrain");let p=a(()=>new Promise((m,h)=>{$h(u===null),s[VA]?h(s[VA]):u=m}),"waitForDrain");e.on("close",d).on("drain",d);try{for await(let m of r){if(s[VA])throw s[VA];let h=e.write(m);o.onBodySent(m),h||await p()}e.end(),o.onRequestSent(),l||(s[vte]=!0),n[cw]()}catch(m){t(m)}finally{e.off("close",d).off("drain",d)}}a(ert,"writeIterable");rrt.exports=Eer});var bte=$((o0i,srt)=>{"use strict";f();var l1=Wi(),{kBodyUsed:cQ}=Qa(),Ybe=require("node:assert"),{InvalidArgumentError:Der}=Xo(),Ber=require("node:events"),Ner=[300,301,302,303,307,308],irt=Symbol("body"),Ete=class{static{a(this,"BodyAsyncIterable")}constructor(e){this[irt]=e,this[cQ]=!1}async*[Symbol.asyncIterator](){Ybe(!this[cQ],"disturbed"),this[cQ]=!0,yield*this[irt]}},Kbe=class{static{a(this,"RedirectHandler")}constructor(e,r,n,o){if(r!=null&&(!Number.isInteger(r)||r<0))throw new Der("maxRedirections must be a positive number");l1.validateHandler(o,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=o,this.history=[],this.redirectionLimitReached=!1,l1.isStream(this.opts.body)?(l1.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){Ybe(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[cQ]=!1,Ber.prototype.on.call(this.opts.body,"data",function(){this[cQ]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new Ete(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&l1.isIterable(this.opts.body)&&(this.opts.body=new Ete(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,o){if(this.location=this.history.length>=this.maxRedirections||l1.isDisturbed(this.opts.body)?null:Mer(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,o);let{origin:s,pathname:c,search:l}=l1.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),u=l?`${c}${l}`:c;this.opts.headers=Ler(this.opts.headers,e===303,this.opts.origin!==s),this.opts.path=u,this.opts.origin=s,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function Mer(t,e){if(Ner.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&l1.headerNameToString(e[r])==="location")return e[r+1]}a(Mer,"parseLocation");function ort(t,e,r){if(t.length===4)return l1.headerNameToString(t)==="host";if(e&&l1.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=l1.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}a(ort,"shouldRemoveHeader");function Ler(t,e,r){let n=[];if(Array.isArray(t))for(let o=0;o<t.length;o+=2)ort(t[o],e,r)||n.push(t[o],t[o+1]);else if(t&&typeof t=="object")for(let o of Object.keys(t))ort(o,e,r)||n.push(o,t[o]);else Ybe(t==null,"headers must be an object or an array");return n}a(Ler,"cleanRequestHeaders");srt.exports=Kbe});var Ite=$((c0i,art)=>{"use strict";f();var Fer=bte();function Oer({maxRedirections:t}){return e=>a(function(n,o){let{maxRedirections:s=t}=n;if(!s)return e(n,o);let c=new Fer(e,s,n,o);return n={...n,maxRedirections:0},e(n,c)},"Intercept")}a(Oer,"createRedirectInterceptor");art.exports=Oer});var hQ=$((d0i,Art)=>{"use strict";f();var zx=require("node:assert"),prt=require("node:net"),Qer=require("node:http"),lk=Wi(),{channels:yN}=eN(),Uer=bet(),qer=iN(),{InvalidArgumentError:jc,InformationalError:Her,ClientDestroyedError:$er}=Xo(),Wer=K7(),{kUrl:u1,kServerName:lw,kClient:jer,kBusy:Jbe,kConnect:Ger,kResuming:uk,kRunning:pQ,kPending:mQ,kSize:fQ,kQueue:zA,kConnected:Ver,kConnecting:CN,kNeedDrain:dw,kKeepAliveDefaultTimeout:crt,kHostHeader:zer,kPendingIdx:KA,kRunningIdx:Kx,kError:Ker,kPipelining:Tte,kKeepAliveTimeoutValue:Yer,kMaxHeadersSize:Jer,kKeepAliveMaxTimeout:Xer,kKeepAliveTimeoutThreshold:Zer,kHeadersTimeout:etr,kBodyTimeout:ttr,kStrictContentLength:rtr,kConnector:lQ,kMaxRedirections:ntr,kMaxRequests:Xbe,kCounter:itr,kClose:otr,kDestroy:str,kDispatch:atr,kInterceptors:lrt,kLocalAddress:uQ,kMaxResponseSize:ctr,kOnError:ltr,kHTTPContext:Gc,kMaxConcurrentStreams:utr,kResume:dQ}=Qa(),dtr=Ktt(),ftr=nrt(),urt=!1,uw=Symbol("kClosedResolve"),drt=a(()=>{},"noop");function mrt(t){return t[Tte]??t[Gc]?.defaultPipelining??1}a(mrt,"getPipelining");var Zbe=class extends qer{static{a(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:o,socketTimeout:s,requestTimeout:c,connectTimeout:l,bodyTimeout:u,idleTimeout:d,keepAlive:p,keepAliveTimeout:m,maxKeepAliveTimeout:h,keepAliveMaxTimeout:g,keepAliveTimeoutThreshold:A,socketPath:y,pipelining:v,tls:b,strictContentLength:I,maxCachedSessions:S,maxRedirections:k,connect:N,maxRequestsPerClient:F,localAddress:O,maxResponseSize:Y,autoSelectFamily:z,autoSelectFamilyAttemptTimeout:V,maxConcurrentStreams:U,allowH2:H}={}){if(super(),p!==void 0)throw new jc("unsupported keepAlive, use pipelining=0 instead");if(s!==void 0)throw new jc("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(c!==void 0)throw new jc("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(d!==void 0)throw new jc("unsupported idleTimeout, use keepAliveTimeout instead");if(h!==void 0)throw new jc("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new jc("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new jc("invalid socketPath");if(l!=null&&(!Number.isFinite(l)||l<0))throw new jc("invalid connectTimeout");if(m!=null&&(!Number.isFinite(m)||m<=0))throw new jc("invalid keepAliveTimeout");if(g!=null&&(!Number.isFinite(g)||g<=0))throw new jc("invalid keepAliveMaxTimeout");if(A!=null&&!Number.isFinite(A))throw new jc("invalid keepAliveTimeoutThreshold");if(o!=null&&(!Number.isInteger(o)||o<0))throw new jc("headersTimeout must be a positive integer or zero");if(u!=null&&(!Number.isInteger(u)||u<0))throw new jc("bodyTimeout must be a positive integer or zero");if(N!=null&&typeof N!="function"&&typeof N!="object")throw new jc("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new jc("maxRedirections must be a positive number");if(F!=null&&(!Number.isInteger(F)||F<0))throw new jc("maxRequestsPerClient must be a positive number");if(O!=null&&(typeof O!="string"||prt.isIP(O)===0))throw new jc("localAddress must be valid string IP address");if(Y!=null&&(!Number.isInteger(Y)||Y<-1))throw new jc("maxResponseSize must be a positive number");if(V!=null&&(!Number.isInteger(V)||V<-1))throw new jc("autoSelectFamilyAttemptTimeout must be a positive number");if(H!=null&&typeof H!="boolean")throw new jc("allowH2 must be a valid boolean value");if(U!=null&&(typeof U!="number"||U<1))throw new jc("maxConcurrentStreams must be a positive integer, greater than 0");typeof N!="function"&&(N=Wer({...b,maxCachedSessions:S,allowH2:H,socketPath:y,timeout:l,...z?{autoSelectFamily:z,autoSelectFamilyAttemptTimeout:V}:void 0,...N})),r?.Client&&Array.isArray(r.Client)?(this[lrt]=r.Client,urt||(urt=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[lrt]=[ptr({maxRedirections:k})],this[u1]=lk.parseOrigin(e),this[lQ]=N,this[Tte]=v??1,this[Jer]=n||Qer.maxHeaderSize,this[crt]=m??4e3,this[Xer]=g??6e5,this[Zer]=A??2e3,this[Yer]=this[crt],this[lw]=null,this[uQ]=O??null,this[uk]=0,this[dw]=0,this[zer]=`host: ${this[u1].hostname}${this[u1].port?`:${this[u1].port}`:""}\r
`,this[ttr]=u??3e5,this[etr]=o??3e5,this[rtr]=I??!0,this[ntr]=k,this[Xbe]=F,this[uw]=null,this[ctr]=Y>-1?Y:-1,this[utr]=U??100,this[Gc]=null,this[zA]=[],this[Kx]=0,this[KA]=0,this[dQ]=ee=>eIe(this,ee),this[ltr]=ee=>hrt(this,ee)}get pipelining(){return this[Tte]}set pipelining(e){this[Tte]=e,this[dQ](!0)}get[mQ](){return this[zA].length-this[KA]}get[pQ](){return this[KA]-this[Kx]}get[fQ](){return this[zA].length-this[Kx]}get[Ver](){return!!this[Gc]&&!this[CN]&&!this[Gc].destroyed}get[Jbe](){return!!(this[Gc]?.busy(null)||this[fQ]>=(mrt(this)||1)||this[mQ]>0)}[Ger](e){grt(this),this.once("connect",e)}[atr](e,r){let n=e.origin||this[u1].origin,o=new Uer(n,e,r);return this[zA].push(o),this[uk]||(lk.bodyLength(o.body)==null&&lk.isIterable(o.body)?(this[uk]=1,queueMicrotask(()=>eIe(this))):this[dQ](!0)),this[uk]&&this[dw]!==2&&this[Jbe]&&(this[dw]=2),this[dw]<2}async[otr](){return new Promise(e=>{this[fQ]?this[uw]=e:e(null)})}async[str](e){return new Promise(r=>{let n=this[zA].splice(this[KA]);for(let s=0;s<n.length;s++){let c=n[s];lk.errorRequest(this,c,e)}let o=a(()=>{this[uw]&&(this[uw](),this[uw]=null),r(null)},"callback");this[Gc]?(this[Gc].destroy(e,o),this[Gc]=null):queueMicrotask(o),this[dQ]()})}},ptr=Ite();function hrt(t,e){if(t[pQ]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){zx(t[KA]===t[Kx]);let r=t[zA].splice(t[Kx]);for(let n=0;n<r.length;n++){let o=r[n];lk.errorRequest(t,o,e)}zx(t[fQ]===0)}}a(hrt,"onError");async function grt(t){zx(!t[CN]),zx(!t[Gc]);let{host:e,hostname:r,protocol:n,port:o}=t[u1];if(r[0]==="["){let s=r.indexOf("]");zx(s!==-1);let c=r.substring(1,s);zx(prt.isIP(c)),r=c}t[CN]=!0,yN.beforeConnect.hasSubscribers&&yN.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:o,version:t[Gc]?.version,servername:t[lw],localAddress:t[uQ]},connector:t[lQ]});try{let s=await new Promise((c,l)=>{t[lQ]({host:e,hostname:r,protocol:n,port:o,servername:t[lw],localAddress:t[uQ]},(u,d)=>{u?l(u):c(d)})});if(t.destroyed){lk.destroy(s.on("error",drt),new $er);return}zx(s);try{t[Gc]=s.alpnProtocol==="h2"?await ftr(t,s):await dtr(t,s)}catch(c){throw s.destroy().on("error",drt),c}t[CN]=!1,s[itr]=0,s[Xbe]=t[Xbe],s[jer]=t,s[Ker]=null,yN.connected.hasSubscribers&&yN.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:o,version:t[Gc]?.version,servername:t[lw],localAddress:t[uQ]},connector:t[lQ],socket:s}),t.emit("connect",t[u1],[t])}catch(s){if(t.destroyed)return;if(t[CN]=!1,yN.connectError.hasSubscribers&&yN.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:o,version:t[Gc]?.version,servername:t[lw],localAddress:t[uQ]},connector:t[lQ],error:s}),s.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(zx(t[pQ]===0);t[mQ]>0&&t[zA][t[KA]].servername===t[lw];){let c=t[zA][t[KA]++];lk.errorRequest(t,c,s)}else hrt(t,s);t.emit("connectionError",t[u1],[t],s)}t[dQ]()}a(grt,"connect");function frt(t){t[dw]=0,t.emit("drain",t[u1],[t])}a(frt,"emitDrain");function eIe(t,e){t[uk]!==2&&(t[uk]=2,mtr(t,e),t[uk]=0,t[Kx]>256&&(t[zA].splice(0,t[Kx]),t[KA]-=t[Kx],t[Kx]=0))}a(eIe,"resume");function mtr(t,e){for(;;){if(t.destroyed){zx(t[mQ]===0);return}if(t[uw]&&!t[fQ]){t[uw](),t[uw]=null;return}if(t[Gc]&&t[Gc].resume(),t[Jbe])t[dw]=2;else if(t[dw]===2){e?(t[dw]=1,queueMicrotask(()=>frt(t))):frt(t);continue}if(t[mQ]===0||t[pQ]>=(mrt(t)||1))return;let r=t[zA][t[KA]];if(t[u1].protocol==="https:"&&t[lw]!==r.servername){if(t[pQ]>0)return;t[lw]=r.servername,t[Gc]?.destroy(new Her("servername changed"),()=>{t[Gc]=null,eIe(t)})}if(t[CN])return;if(!t[Gc]){grt(t);return}if(t[Gc].destroyed||t[Gc].busy(r))return;!r.aborted&&t[Gc].write(r)?t[KA]++:t[zA].splice(t[KA],1)}}a(mtr,"_resume");Art.exports=Zbe});var tIe=$((h0i,yrt)=>{"use strict";f();var wte=class{static{a(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};yrt.exports=class{static{a(this,"FixedQueue")}constructor(){this.head=this.tail=new wte}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new wte),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var vrt=$((y0i,Crt)=>{f();var{kFree:htr,kConnected:gtr,kPending:Atr,kQueued:ytr,kRunning:Ctr,kSize:vtr}=Qa(),dk=Symbol("pool"),rIe=class{static{a(this,"PoolStats")}constructor(e){this[dk]=e}get connected(){return this[dk][gtr]}get free(){return this[dk][htr]}get pending(){return this[dk][Atr]}get queued(){return this[dk][ytr]}get running(){return this[dk][Ctr]}get size(){return this[dk][vtr]}};Crt.exports=rIe});var cIe=$((x0i,krt)=>{"use strict";f();var xtr=iN(),Etr=tIe(),{kConnected:nIe,kSize:xrt,kRunning:Ert,kPending:brt,kQueued:gQ,kBusy:btr,kFree:Itr,kUrl:Ttr,kClose:wtr,kDestroy:_tr,kDispatch:Str}=Qa(),Rtr=vrt(),Qp=Symbol("clients"),Ff=Symbol("needDrain"),AQ=Symbol("queue"),iIe=Symbol("closed resolve"),oIe=Symbol("onDrain"),Irt=Symbol("onConnect"),Trt=Symbol("onDisconnect"),wrt=Symbol("onConnectionError"),sIe=Symbol("get dispatcher"),Srt=Symbol("add client"),Rrt=Symbol("remove client"),_rt=Symbol("stats"),aIe=class extends xtr{static{a(this,"PoolBase")}constructor(){super(),this[AQ]=new Etr,this[Qp]=[],this[gQ]=0;let e=this;this[oIe]=a(function(n,o){let s=e[AQ],c=!1;for(;!c;){let l=s.shift();if(!l)break;e[gQ]--,c=!this.dispatch(l.opts,l.handler)}this[Ff]=c,!this[Ff]&&e[Ff]&&(e[Ff]=!1,e.emit("drain",n,[e,...o])),e[iIe]&&s.isEmpty()&&Promise.all(e[Qp].map(l=>l.close())).then(e[iIe])},"onDrain"),this[Irt]=(r,n)=>{e.emit("connect",r,[e,...n])},this[Trt]=(r,n,o)=>{e.emit("disconnect",r,[e,...n],o)},this[wrt]=(r,n,o)=>{e.emit("connectionError",r,[e,...n],o)},this[_rt]=new Rtr(this)}get[btr](){return this[Ff]}get[nIe](){return this[Qp].filter(e=>e[nIe]).length}get[Itr](){return this[Qp].filter(e=>e[nIe]&&!e[Ff]).length}get[brt](){let e=this[gQ];for(let{[brt]:r}of this[Qp])e+=r;return e}get[Ert](){let e=0;for(let{[Ert]:r}of this[Qp])e+=r;return e}get[xrt](){let e=this[gQ];for(let{[xrt]:r}of this[Qp])e+=r;return e}get stats(){return this[_rt]}async[wtr](){this[AQ].isEmpty()?await Promise.all(this[Qp].map(e=>e.close())):await new Promise(e=>{this[iIe]=e})}async[_tr](e){for(;;){let r=this[AQ].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[Qp].map(r=>r.destroy(e)))}[Str](e,r){let n=this[sIe]();return n?n.dispatch(e,r)||(n[Ff]=!0,this[Ff]=!this[sIe]()):(this[Ff]=!0,this[AQ].push({opts:e,handler:r}),this[gQ]++),!this[Ff]}[Srt](e){return e.on("drain",this[oIe]).on("connect",this[Irt]).on("disconnect",this[Trt]).on("connectionError",this[wrt]),this[Qp].push(e),this[Ff]&&queueMicrotask(()=>{this[Ff]&&this[oIe](e[Ttr],[this,e])}),this}[Rrt](e){e.close(()=>{let r=this[Qp].indexOf(e);r!==-1&&this[Qp].splice(r,1)}),this[Ff]=this[Qp].some(r=>!r[Ff]&&r.closed!==!0&&r.destroyed!==!0)}};krt.exports={PoolBase:aIe,kClients:Qp,kNeedDrain:Ff,kAddClient:Srt,kRemoveClient:Rrt,kGetDispatcher:sIe}});var vN=$((I0i,Nrt)=>{"use strict";f();var{PoolBase:ktr,kClients:_te,kNeedDrain:Ptr,kAddClient:Dtr,kGetDispatcher:Btr}=cIe(),Ntr=hQ(),{InvalidArgumentError:lIe}=Xo(),Prt=Wi(),{kUrl:Drt,kInterceptors:Mtr}=Qa(),Ltr=K7(),uIe=Symbol("options"),dIe=Symbol("connections"),Brt=Symbol("factory");function Ftr(t,e){return new Ntr(t,e)}a(Ftr,"defaultFactory");var fIe=class extends ktr{static{a(this,"Pool")}constructor(e,{connections:r,factory:n=Ftr,connect:o,connectTimeout:s,tls:c,maxCachedSessions:l,socketPath:u,autoSelectFamily:d,autoSelectFamilyAttemptTimeout:p,allowH2:m,...h}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new lIe("invalid connections");if(typeof n!="function")throw new lIe("factory must be a function.");if(o!=null&&typeof o!="function"&&typeof o!="object")throw new lIe("connect must be a function or an object");typeof o!="function"&&(o=Ltr({...c,maxCachedSessions:l,allowH2:m,socketPath:u,timeout:s,...d?{autoSelectFamily:d,autoSelectFamilyAttemptTimeout:p}:void 0,...o})),this[Mtr]=h.interceptors?.Pool&&Array.isArray(h.interceptors.Pool)?h.interceptors.Pool:[],this[dIe]=r||null,this[Drt]=Prt.parseOrigin(e),this[uIe]={...Prt.deepClone(h),connect:o,allowH2:m},this[uIe].interceptors=h.interceptors?{...h.interceptors}:void 0,this[Brt]=n,this.on("connectionError",(g,A,y)=>{for(let v of A){let b=this[_te].indexOf(v);b!==-1&&this[_te].splice(b,1)}})}[Btr](){for(let e of this[_te])if(!e[Ptr])return e;if(!this[dIe]||this[_te].length<this[dIe]){let e=this[Brt](this[Drt],this[uIe]);return this[Dtr](e),e}}};Nrt.exports=fIe});var Qrt=$((_0i,Ort)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:Otr,InvalidArgumentError:Qtr}=Xo(),{PoolBase:Utr,kClients:Vd,kNeedDrain:yQ,kAddClient:qtr,kRemoveClient:Htr,kGetDispatcher:$tr}=cIe(),Wtr=vN(),{kUrl:pIe,kInterceptors:jtr}=Qa(),{parseOrigin:Mrt}=Wi(),Lrt=Symbol("factory"),Ste=Symbol("options"),Frt=Symbol("kGreatestCommonDivisor"),fk=Symbol("kCurrentWeight"),pk=Symbol("kIndex"),Wh=Symbol("kWeight"),Rte=Symbol("kMaxWeightPerServer"),kte=Symbol("kErrorPenalty");function Gtr(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}a(Gtr,"getGreatestCommonDivisor");function Vtr(t,e){return new Wtr(t,e)}a(Vtr,"defaultFactory");var mIe=class extends Utr{static{a(this,"BalancedPool")}constructor(e=[],{factory:r=Vtr,...n}={}){if(super(),this[Ste]=n,this[pk]=-1,this[fk]=0,this[Rte]=this[Ste].maxWeightPerServer||100,this[kte]=this[Ste].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new Qtr("factory must be a function.");this[jtr]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[Lrt]=r;for(let o of e)this.addUpstream(o);this._updateBalancedPoolStats()}addUpstream(e){let r=Mrt(e).origin;if(this[Vd].find(o=>o[pIe].origin===r&&o.closed!==!0&&o.destroyed!==!0))return this;let n=this[Lrt](r,Object.assign({},this[Ste]));this[qtr](n),n.on("connect",()=>{n[Wh]=Math.min(this[Rte],n[Wh]+this[kte])}),n.on("connectionError",()=>{n[Wh]=Math.max(1,n[Wh]-this[kte]),this._updateBalancedPoolStats()}),n.on("disconnect",(...o)=>{let s=o[2];s&&s.code==="UND_ERR_SOCKET"&&(n[Wh]=Math.max(1,n[Wh]-this[kte]),this._updateBalancedPoolStats())});for(let o of this[Vd])o[Wh]=this[Rte];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[Vd].length;r++)e=Gtr(this[Vd][r][Wh],e);this[Frt]=e}removeUpstream(e){let r=Mrt(e).origin,n=this[Vd].find(o=>o[pIe].origin===r&&o.closed!==!0&&o.destroyed!==!0);return n&&this[Htr](n),this}get upstreams(){return this[Vd].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[pIe].origin)}[$tr](){if(this[Vd].length===0)throw new Otr;if(!this[Vd].find(s=>!s[yQ]&&s.closed!==!0&&s.destroyed!==!0)||this[Vd].map(s=>s[yQ]).reduce((s,c)=>s&&c,!0))return;let n=0,o=this[Vd].findIndex(s=>!s[yQ]);for(;n++<this[Vd].length;){this[pk]=(this[pk]+1)%this[Vd].length;let s=this[Vd][this[pk]];if(s[Wh]>this[Vd][o][Wh]&&!s[yQ]&&(o=this[pk]),this[pk]===0&&(this[fk]=this[fk]-this[Frt],this[fk]<=0&&(this[fk]=this[Rte])),s[Wh]>=this[fk]&&!s[yQ])return s}return this[fk]=this[Vd][o][Wh],this[pk]=o,this[Vd][o]}};Ort.exports=mIe});var xN=$((k0i,Grt)=>{"use strict";f();var{InvalidArgumentError:Pte}=Xo(),{kClients:fw,kRunning:Urt,kClose:ztr,kDestroy:Ktr,kDispatch:Ytr,kInterceptors:Jtr}=Qa(),Xtr=iN(),Ztr=vN(),trr=hQ(),rrr=Wi(),nrr=Ite(),qrt=Symbol("onConnect"),Hrt=Symbol("onDisconnect"),$rt=Symbol("onConnectionError"),irr=Symbol("maxRedirections"),Wrt=Symbol("onDrain"),jrt=Symbol("factory"),hIe=Symbol("options");function orr(t,e){return e&&e.connections===1?new trr(t,e):new Ztr(t,e)}a(orr,"defaultFactory");var gIe=class extends Xtr{static{a(this,"Agent")}constructor({factory:e=orr,maxRedirections:r=0,connect:n,...o}={}){if(super(),typeof e!="function")throw new Pte("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new Pte("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new Pte("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[Jtr]=o.interceptors?.Agent&&Array.isArray(o.interceptors.Agent)?o.interceptors.Agent:[nrr({maxRedirections:r})],this[hIe]={...rrr.deepClone(o),connect:n},this[hIe].interceptors=o.interceptors?{...o.interceptors}:void 0,this[irr]=r,this[jrt]=e,this[fw]=new Map,this[Wrt]=(s,c)=>{this.emit("drain",s,[this,...c])},this[qrt]=(s,c)=>{this.emit("connect",s,[this,...c])},this[Hrt]=(s,c,l)=>{this.emit("disconnect",s,[this,...c],l)},this[$rt]=(s,c,l)=>{this.emit("connectionError",s,[this,...c],l)}}get[Urt](){let e=0;for(let r of this[fw].values())e+=r[Urt];return e}[Ytr](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new Pte("opts.origin must be a non-empty string or URL.");let o=this[fw].get(n);return o||(o=this[jrt](e.origin,this[hIe]).on("drain",this[Wrt]).on("connect",this[qrt]).on("disconnect",this[Hrt]).on("connectionError",this[$rt]),this[fw].set(n,o)),o.dispatch(e,r)}async[ztr](){let e=[];for(let r of this[fw].values())e.push(r.close());this[fw].clear(),await Promise.all(e)}async[Ktr](e){let r=[];for(let n of this[fw].values())r.push(n.destroy(e));this[fw].clear(),await Promise.all(r)}};Grt.exports=gIe});var CIe=$((B0i,Yrt)=>{"use strict";f();var{kProxy:srr,kClose:arr,kDestroy:crr,kInterceptors:lrr}=Qa(),{URL:CQ}=require("node:url"),urr=xN(),drr=vN(),frr=iN(),{InvalidArgumentError:Nte,RequestAbortedError:prr,SecureProxyConnectionError:mrr}=Xo(),Vrt=K7(),Dte=Symbol("proxy agent"),Bte=Symbol("proxy client"),vQ=Symbol("proxy headers"),AIe=Symbol("request tls settings"),zrt=Symbol("proxy tls settings"),Krt=Symbol("connect endpoint function");function hrr(t){return t==="https:"?443:80}a(hrr,"defaultProtocolPort");function grr(t,e){return new drr(t,e)}a(grr,"defaultFactory");var Arr=a(()=>{},"noop"),yIe=class extends frr{static{a(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof CQ)&&!e.uri)throw new Nte("Proxy uri is mandatory");let{clientFactory:r=grr}=e;if(typeof r!="function")throw new Nte("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:o,origin:s,port:c,protocol:l,username:u,password:d,hostname:p}=n;if(this[srr]={uri:o,protocol:l},this[lrr]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[AIe]=e.requestTls,this[zrt]=e.proxyTls,this[vQ]=e.headers||{},e.auth&&e.token)throw new Nte("opts.auth cannot be used in combination with opts.token");e.auth?this[vQ]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[vQ]["proxy-authorization"]=e.token:u&&d&&(this[vQ]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(u)}:${decodeURIComponent(d)}`).toString("base64")}`);let m=Vrt({...e.proxyTls});this[Krt]=Vrt({...e.requestTls}),this[Bte]=r(n,{connect:m}),this[Dte]=new urr({...e,connect:a(async(h,g)=>{let A=h.host;h.port||(A+=`:${hrr(h.protocol)}`);try{let{socket:y,statusCode:v}=await this[Bte].connect({origin:s,port:c,path:A,signal:h.signal,headers:{...this[vQ],host:h.host},servername:this[zrt]?.servername||p});if(v!==200&&(y.on("error",Arr).destroy(),g(new prr(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),h.protocol!=="https:"){g(null,y);return}let b;this[AIe]?b=this[AIe].servername:b=h.servername,this[Krt]({...h,servername:b,httpSocket:y},g)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?g(new mrr(y)):g(y)}},"connect")})}dispatch(e,r){let n=yrr(e.headers);if(Crr(n),n&&!("host"in n)&&!("Host"in n)){let{host:o}=new CQ(e.origin);n.host=o}return this[Dte].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new CQ(e):e instanceof CQ?e:new CQ(e.uri)}async[arr](){await this[Dte].close(),await this[Bte].close()}async[crr](){await this[Dte].destroy(),await this[Bte].destroy()}};function yrr(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}a(yrr,"buildHeaders");function Crr(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new Nte("Proxy-Authorization should be sent in ProxyAgent constructor")}a(Crr,"throwIfProxyAuthIsSent");Yrt.exports=yIe});var rnt=$((L0i,tnt)=>{"use strict";f();var vrr=iN(),{kClose:xrr,kDestroy:Err,kClosed:Jrt,kDestroyed:Xrt,kDispatch:brr,kNoProxyAgent:xQ,kHttpProxyAgent:pw,kHttpsProxyAgent:mk}=Qa(),Zrt=CIe(),Irr=xN(),Trr={"http:":80,"https:":443},ent=!1,vIe=class extends vrr{static{a(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,ent||(ent=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:o,...s}=e;this[xQ]=new Irr(s);let c=r??process.env.http_proxy??process.env.HTTP_PROXY;c?this[pw]=new Zrt({...s,uri:c}):this[pw]=this[xQ];let l=n??process.env.https_proxy??process.env.HTTPS_PROXY;l?this[mk]=new Zrt({...s,uri:l}):this[mk]=this[pw],this.#o()}[brr](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[xrr](){await this[xQ].close(),this[pw][Jrt]||await this[pw].close(),this[mk][Jrt]||await this[mk].close()}async[Err](e){await this[xQ].destroy(e),this[pw][Xrt]||await this[pw].destroy(e),this[mk][Xrt]||await this[mk].destroy(e)}#n(e){let{protocol:r,host:n,port:o}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),o=Number.parseInt(o,10)||Trr[r]||0,this.#r(n,o)?r==="https:"?this[mk]:this[pw]:this[xQ]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let o=this.#t[n];if(!(o.port&&o.port!==r)){if(/^[.*]/.test(o.hostname)){if(e.endsWith(o.hostname.replace(/^\*/,"")))return!1}else if(e===o.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let o=0;o<r.length;o++){let s=r[o];if(!s)continue;let c=s.match(/^(.+):(\d+)$/);n.push({hostname:(c?c[1]:s).toLowerCase(),port:c?Number.parseInt(c[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};tnt.exports=vIe});var Mte=$((Q0i,snt)=>{"use strict";f();var EN=require("node:assert"),{kRetryHandlerDefaultRetry:nnt}=Qa(),{RequestRetryError:EQ}=Xo(),{isDisturbed:int,parseHeaders:wrr,parseRangeHeader:ont,wrapRequestBody:_rr}=Wi();function Srr(t){let e=Date.now();return new Date(t).getTime()-e}a(Srr,"calculateRetryAfterHeader");var xIe=class t{static{a(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...o}=e,{retry:s,maxRetries:c,maxTimeout:l,minTimeout:u,timeoutFactor:d,methods:p,errorCodes:m,retryAfter:h,statusCodes:g}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...o,body:_rr(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:s??t[nnt],retryAfter:h??!0,maxTimeout:l??30*1e3,minTimeout:u??500,timeoutFactor:d??2,maxRetries:c??5,methods:p??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:g??[500,502,503,504,429],errorCodes:m??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(A=>{this.aborted=!0,this.abort?this.abort(A):this.reason=A})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[nnt](e,{state:r,opts:n},o){let{statusCode:s,code:c,headers:l}=e,{method:u,retryOptions:d}=n,{maxRetries:p,minTimeout:m,maxTimeout:h,timeoutFactor:g,statusCodes:A,errorCodes:y,methods:v}=d,{counter:b}=r;if(c&&c!=="UND_ERR_REQ_RETRY"&&!y.includes(c)){o(e);return}if(Array.isArray(v)&&!v.includes(u)){o(e);return}if(s!=null&&Array.isArray(A)&&!A.includes(s)){o(e);return}if(b>p){o(e);return}let I=l?.["retry-after"];I&&(I=Number(I),I=Number.isNaN(I)?Srr(I):I*1e3);let S=I>0?Math.min(I,h):Math.min(m*g**(b-1),h);setTimeout(()=>o(null),S)}onHeaders(e,r,n,o){let s=wrr(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,o):(this.abort(new EQ("Request failed",e,{headers:s,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new EQ("server does not support the range header and the payload was partially consumed",e,{headers:s,data:{count:this.retryCount}})),!1;let l=ont(s["content-range"]);if(!l)return this.abort(new EQ("Content-Range mismatch",e,{headers:s,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==s.etag)return this.abort(new EQ("ETag mismatch",e,{headers:s,data:{count:this.retryCount}})),!1;let{start:u,size:d,end:p=d-1}=l;return EN(this.start===u,"content-range mismatch"),EN(this.end==null||this.end===p,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let l=ont(s["content-range"]);if(l==null)return this.handler.onHeaders(e,r,n,o);let{start:u,size:d,end:p=d-1}=l;EN(u!=null&&Number.isFinite(u),"content-range mismatch"),EN(p!=null&&Number.isFinite(p),"invalid content-length"),this.start=u,this.end=p}if(this.end==null){let l=s["content-length"];this.end=l!=null?Number(l)-1:null}return EN(Number.isFinite(this.start)),EN(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=s.etag!=null?s.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,o)}let c=new EQ("Request failed",e,{headers:s,data:{count:this.retryCount}});return this.abort(c),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||int(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||int(this.opts.body))return this.handler.onError(n);if(this.start!==0){let o={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(o["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...o}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(o){this.handler.onError(o)}}a(r,"onRetry")}};snt.exports=xIe});var cnt=$((H0i,ant)=>{"use strict";f();var Rrr=V7(),krr=Mte(),EIe=class extends Rrr{static{a(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new krr({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};ant.exports=EIe});var SIe=$((j0i,Ant)=>{"use strict";f();var pnt=require("node:assert"),{Readable:Prr}=require("node:stream"),{RequestAbortedError:mnt,NotSupportedError:Drr,InvalidArgumentError:Brr,AbortError:bIe}=Xo(),hnt=Wi(),{ReadableStreamFrom:Nrr}=Wi(),Z0=Symbol("kConsume"),bQ=Symbol("kReading"),mw=Symbol("kBody"),lnt=Symbol("kAbort"),gnt=Symbol("kContentType"),unt=Symbol("kContentLength"),Mrr=a(()=>{},"noop"),IIe=class extends Prr{static{a(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:o,highWaterMark:s=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:s}),this._readableState.dataEmitted=!1,this[lnt]=r,this[Z0]=null,this[mw]=null,this[gnt]=n,this[unt]=o,this[bQ]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new mnt),e&&this[lnt](),super.destroy(e)}_destroy(e,r){this[bQ]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[bQ]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[bQ]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[Z0]&&e!==null?(wIe(this[Z0],e),this[bQ]?super.push(e):!0):super.push(e)}async text(){return IQ(this,"text")}async json(){return IQ(this,"json")}async blob(){return IQ(this,"blob")}async bytes(){return IQ(this,"bytes")}async arrayBuffer(){return IQ(this,"arrayBuffer")}async formData(){throw new Drr}get bodyUsed(){return hnt.isDisturbed(this)}get body(){return this[mw]||(this[mw]=Nrr(this),this[Z0]&&(this[mw].getReader(),pnt(this[mw].locked))),this[mw]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new Brr("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((o,s)=>{this[unt]>r&&this.destroy(new bIe);let c=a(()=>{this.destroy(n.reason??new bIe)},"onAbort");n?.addEventListener("abort",c),this.on("close",function(){n?.removeEventListener("abort",c),n?.aborted?s(n.reason??new bIe):o(null)}).on("error",Mrr).on("data",function(l){r-=l.length,r<=0&&this.destroy()}).resume()})}};function Lrr(t){return t[mw]&&t[mw].locked===!0||t[Z0]}a(Lrr,"isLocked");function Frr(t){return hnt.isDisturbed(t)||Lrr(t)}a(Frr,"isUnusable");async function IQ(t,e){return pnt(!t[Z0]),new Promise((r,n)=>{if(Frr(t)){let o=t._readableState;o.destroyed&&o.closeEmitted===!1?t.on("error",s=>{n(s)}).on("close",()=>{n(new TypeError("unusable"))}):n(o.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[Z0]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(o){_Ie(this[Z0],o)}).on("close",function(){this[Z0].body!==null&&_Ie(this[Z0],new mnt)}),Orr(t[Z0])})})}a(IQ,"consume");function Orr(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let o=r;o<n;o++)wIe(t,e.buffer[o])}else for(let r of e.buffer)wIe(t,r);for(e.endEmitted?fnt(this[Z0]):t.stream.on("end",function(){fnt(this[Z0])}),t.stream.resume();t.stream.read()!=null;);}a(Orr,"consumeStart");function TIe(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,o=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(o,n)}a(TIe,"chunksDecode");function dnt(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let o=0;o<t.length;++o){let s=t[o];r.set(s,n),n+=s.length}return r}a(dnt,"chunksConcat");function fnt(t){let{type:e,body:r,resolve:n,stream:o,length:s}=t;try{e==="text"?n(TIe(r,s)):e==="json"?n(JSON.parse(TIe(r,s))):e==="arrayBuffer"?n(dnt(r,s).buffer):e==="blob"?n(new Blob(r,{type:o[gnt]})):e==="bytes"&&n(dnt(r,s)),_Ie(t)}catch(c){o.destroy(c)}}a(fnt,"consumeEnd");function wIe(t,e){t.length+=e.length,t.body.push(e)}a(wIe,"consumePush");function _Ie(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}a(_Ie,"consumeFinish");Ant.exports={Readable:IIe,chunksDecode:TIe}});var RIe=$((z0i,Ent)=>{f();var Qrr=require("node:assert"),{ResponseStatusCodeError:ynt}=Xo(),{chunksDecode:Cnt}=SIe(),Urr=128*1024;async function qrr({callback:t,body:e,contentType:r,statusCode:n,statusMessage:o,headers:s}){Qrr(e);let c=[],l=0;try{for await(let m of e)if(c.push(m),l+=m.length,l>Urr){c=[],l=0;break}}catch{c=[],l=0}let u=`Response status code ${n}${o?`: ${o}`:""}`;if(n===204||!r||!l){queueMicrotask(()=>t(new ynt(u,n,s)));return}let d=Error.stackTraceLimit;Error.stackTraceLimit=0;let p;try{vnt(r)?p=JSON.parse(Cnt(c,l)):xnt(r)&&(p=Cnt(c,l))}catch{}finally{Error.stackTraceLimit=d}queueMicrotask(()=>t(new ynt(u,n,s,p)))}a(qrr,"getResolveErrorBodyCallback");var vnt=a(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),xnt=a(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");Ent.exports={getResolveErrorBodyCallback:qrr,isContentTypeApplicationJson:vnt,isContentTypeText:xnt}});var Tnt=$((J0i,kIe)=>{"use strict";f();var Hrr=require("node:assert"),{Readable:$rr}=SIe(),{InvalidArgumentError:bN,RequestAbortedError:bnt}=Xo(),em=Wi(),{getResolveErrorBodyCallback:Wrr}=RIe(),{AsyncResource:jrr}=require("node:async_hooks"),Lte=class extends jrr{static{a(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new bN("invalid opts");let{signal:n,method:o,opaque:s,body:c,onInfo:l,responseHeaders:u,throwOnError:d,highWaterMark:p}=e;try{if(typeof r!="function")throw new bN("invalid callback");if(p&&(typeof p!="number"||p<0))throw new bN("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new bN("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new bN("invalid method");if(l&&typeof l!="function")throw new bN("invalid onInfo callback");super("UNDICI_REQUEST")}catch(m){throw em.isStream(c)&&em.destroy(c.on("error",em.nop),m),m}this.method=o,this.responseHeaders=u||null,this.opaque=s||null,this.callback=r,this.res=null,this.abort=null,this.body=c,this.trailers={},this.context=null,this.onInfo=l||null,this.throwOnError=d,this.highWaterMark=p,this.signal=n,this.reason=null,this.removeAbortListener=null,em.isStream(c)&&c.on("error",m=>{this.onError(m)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new bnt:this.removeAbortListener=em.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new bnt,this.res?em.destroy(this.res.on("error",em.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}Hrr(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,o){let{callback:s,opaque:c,abort:l,context:u,responseHeaders:d,highWaterMark:p}=this,m=d==="raw"?em.parseRawHeaders(r):em.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:m});return}let h=d==="raw"?em.parseHeaders(r):m,g=h["content-type"],A=h["content-length"],y=new $rr({resume:n,abort:l,contentType:g,contentLength:this.method!=="HEAD"&&A?Number(A):null,highWaterMark:p});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,s!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(Wrr,null,{callback:s,body:y,contentType:g,statusCode:e,statusMessage:o,headers:m}):this.runInAsyncScope(s,null,null,{statusCode:e,headers:m,trailers:this.trailers,opaque:c,body:y,context:u}))}onData(e){return this.res.push(e)}onComplete(e){em.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:o,opaque:s}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:s})})),r&&(this.res=null,queueMicrotask(()=>{em.destroy(r,e)})),o&&(this.body=null,em.destroy(o,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function Int(t,e){if(e===void 0)return new Promise((r,n)=>{Int.call(this,t,(o,s)=>o?n(o):r(s))});try{this.dispatch(t,new Lte(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}a(Int,"request");kIe.exports=Int;kIe.exports.RequestHandler=Lte});var TQ=$((emi,Snt)=>{f();var{addAbortListener:Grr}=Wi(),{RequestAbortedError:Vrr}=Xo(),IN=Symbol("kListener"),d1=Symbol("kSignal");function wnt(t){t.abort?t.abort(t[d1]?.reason):t.reason=t[d1]?.reason??new Vrr,_nt(t)}a(wnt,"abort");function zrr(t,e){if(t.reason=null,t[d1]=null,t[IN]=null,!!e){if(e.aborted){wnt(t);return}t[d1]=e,t[IN]=()=>{wnt(t)},Grr(t[d1],t[IN])}}a(zrr,"addSignal");function _nt(t){t[d1]&&("removeEventListener"in t[d1]?t[d1].removeEventListener("abort",t[IN]):t[d1].removeListener("abort",t[IN]),t[d1]=null,t[IN]=null)}a(_nt,"removeSignal");Snt.exports={addSignal:zrr,removeSignal:_nt}});var Dnt=$((nmi,Pnt)=>{"use strict";f();var Krr=require("node:assert"),{finished:Yrr,PassThrough:Jrr}=require("node:stream"),{InvalidArgumentError:TN,InvalidReturnValueError:Xrr}=Xo(),YA=Wi(),{getResolveErrorBodyCallback:Zrr}=RIe(),{AsyncResource:enr}=require("node:async_hooks"),{addSignal:tnr,removeSignal:Rnt}=TQ(),PIe=class extends enr{static{a(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new TN("invalid opts");let{signal:o,method:s,opaque:c,body:l,onInfo:u,responseHeaders:d,throwOnError:p}=e;try{if(typeof n!="function")throw new TN("invalid callback");if(typeof r!="function")throw new TN("invalid factory");if(o&&typeof o.on!="function"&&typeof o.addEventListener!="function")throw new TN("signal must be an EventEmitter or EventTarget");if(s==="CONNECT")throw new TN("invalid method");if(u&&typeof u!="function")throw new TN("invalid onInfo callback");super("UNDICI_STREAM")}catch(m){throw YA.isStream(l)&&YA.destroy(l.on("error",YA.nop),m),m}this.responseHeaders=d||null,this.opaque=c||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=l,this.onInfo=u||null,this.throwOnError=p||!1,YA.isStream(l)&&l.on("error",m=>{this.onError(m)}),tnr(this,o)}onConnect(e,r){if(this.reason){e(this.reason);return}Krr(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,o){let{factory:s,opaque:c,context:l,callback:u,responseHeaders:d}=this,p=d==="raw"?YA.parseRawHeaders(r):YA.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}this.factory=null;let m;if(this.throwOnError&&e>=400){let A=(d==="raw"?YA.parseHeaders(r):p)["content-type"];m=new Jrr,this.callback=null,this.runInAsyncScope(Zrr,null,{callback:u,body:m,contentType:A,statusCode:e,statusMessage:o,headers:p})}else{if(s===null)return;if(m=this.runInAsyncScope(s,null,{statusCode:e,headers:p,opaque:c,context:l}),!m||typeof m.write!="function"||typeof m.end!="function"||typeof m.on!="function")throw new Xrr("expected Writable");Yrr(m,{readable:!1},g=>{let{callback:A,res:y,opaque:v,trailers:b,abort:I}=this;this.res=null,(g||!y.readable)&&YA.destroy(y,g),this.callback=null,this.runInAsyncScope(A,null,g||null,{opaque:v,trailers:b}),g&&I()})}return m.on("drain",n),this.res=m,(m.writableNeedDrain!==void 0?m.writableNeedDrain:m._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;Rnt(this),r&&(this.trailers=YA.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:o,body:s}=this;Rnt(this),this.factory=null,r?(this.res=null,YA.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),s&&(this.body=null,YA.destroy(s,e))}};function knt(t,e,r){if(r===void 0)return new Promise((n,o)=>{knt.call(this,t,e,(s,c)=>s?o(s):n(c))});try{this.dispatch(t,new PIe(t,e,r))}catch(n){if(typeof r!="function")throw n;let o=t?.opaque;queueMicrotask(()=>r(n,{opaque:o}))}}a(knt,"stream");Pnt.exports=knt});var Lnt=$((smi,Mnt)=>{"use strict";f();var{Readable:Nnt,Duplex:rnr,PassThrough:nnr}=require("node:stream"),{InvalidArgumentError:wQ,InvalidReturnValueError:inr,RequestAbortedError:DIe}=Xo(),jh=Wi(),{AsyncResource:onr}=require("node:async_hooks"),{addSignal:snr,removeSignal:anr}=TQ(),Bnt=require("node:assert"),wN=Symbol("resume"),BIe=class extends Nnt{static{a(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[wN]=null}_read(){let{[wN]:e}=this;e&&(this[wN]=null,e())}_destroy(e,r){this._read(),r(e)}},NIe=class extends Nnt{static{a(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[wN]=e}_read(){this[wN]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new DIe),r(e)}},MIe=class extends onr{static{a(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new wQ("invalid opts");if(typeof r!="function")throw new wQ("invalid handler");let{signal:n,method:o,opaque:s,onInfo:c,responseHeaders:l}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new wQ("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new wQ("invalid method");if(c&&typeof c!="function")throw new wQ("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=s||null,this.responseHeaders=l||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=c||null,this.req=new BIe().on("error",jh.nop),this.ret=new rnr({readableObjectMode:e.objectMode,autoDestroy:!0,read:a(()=>{let{body:u}=this;u?.resume&&u.resume()},"read"),write:a((u,d,p)=>{let{req:m}=this;m.push(u,d)||m._readableState.destroyed?p():m[wN]=p},"write"),destroy:a((u,d)=>{let{body:p,req:m,res:h,ret:g,abort:A}=this;!u&&!g._readableState.endEmitted&&(u=new DIe),A&&u&&A(),jh.destroy(p,u),jh.destroy(m,u),jh.destroy(h,u),anr(this),d(u)},"destroy")}).on("prefinish",()=>{let{req:u}=this;u.push(null)}),this.res=null,snr(this,n)}onConnect(e,r){let{ret:n,res:o}=this;if(this.reason){e(this.reason);return}Bnt(!o,"pipeline cannot be retried"),Bnt(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:o,handler:s,context:c}=this;if(e<200){if(this.onInfo){let u=this.responseHeaders==="raw"?jh.parseRawHeaders(r):jh.parseHeaders(r);this.onInfo({statusCode:e,headers:u})}return}this.res=new NIe(n);let l;try{this.handler=null;let u=this.responseHeaders==="raw"?jh.parseRawHeaders(r):jh.parseHeaders(r);l=this.runInAsyncScope(s,null,{statusCode:e,headers:u,opaque:o,body:this.res,context:c})}catch(u){throw this.res.on("error",jh.nop),u}if(!l||typeof l.on!="function")throw new inr("expected Readable");l.on("data",u=>{let{ret:d,body:p}=this;!d.push(u)&&p.pause&&p.pause()}).on("error",u=>{let{ret:d}=this;jh.destroy(d,u)}).on("end",()=>{let{ret:u}=this;u.push(null)}).on("close",()=>{let{ret:u}=this;u._readableState.ended||jh.destroy(u,new DIe)}),this.body=l}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,jh.destroy(r,e)}};function cnr(t,e){try{let r=new MIe(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new nnr().destroy(r)}}a(cnr,"pipeline");Mnt.exports=cnr});var Hnt=$((lmi,qnt)=>{"use strict";f();var{InvalidArgumentError:LIe,SocketError:lnr}=Xo(),{AsyncResource:unr}=require("node:async_hooks"),Fnt=Wi(),{addSignal:dnr,removeSignal:Ont}=TQ(),Qnt=require("node:assert"),FIe=class extends unr{static{a(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new LIe("invalid opts");if(typeof r!="function")throw new LIe("invalid callback");let{signal:n,opaque:o,responseHeaders:s}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new LIe("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=s||null,this.opaque=o||null,this.callback=r,this.abort=null,this.context=null,dnr(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}Qnt(this.callback),this.abort=e,this.context=null}onHeaders(){throw new lnr("bad upgrade",null)}onUpgrade(e,r,n){Qnt(e===101);let{callback:o,opaque:s,context:c}=this;Ont(this),this.callback=null;let l=this.responseHeaders==="raw"?Fnt.parseRawHeaders(r):Fnt.parseHeaders(r);this.runInAsyncScope(o,null,null,{headers:l,socket:n,opaque:s,context:c})}onError(e){let{callback:r,opaque:n}=this;Ont(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function Unt(t,e){if(e===void 0)return new Promise((r,n)=>{Unt.call(this,t,(o,s)=>o?n(o):r(s))});try{let r=new FIe(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}a(Unt,"upgrade");qnt.exports=Unt});var Vnt=$((fmi,Gnt)=>{"use strict";f();var fnr=require("node:assert"),{AsyncResource:pnr}=require("node:async_hooks"),{InvalidArgumentError:OIe,SocketError:mnr}=Xo(),$nt=Wi(),{addSignal:hnr,removeSignal:Wnt}=TQ(),QIe=class extends pnr{static{a(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new OIe("invalid opts");if(typeof r!="function")throw new OIe("invalid callback");let{signal:n,opaque:o,responseHeaders:s}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new OIe("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=o||null,this.responseHeaders=s||null,this.callback=r,this.abort=null,hnr(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}fnr(this.callback),this.abort=e,this.context=r}onHeaders(){throw new mnr("bad connect",null)}onUpgrade(e,r,n){let{callback:o,opaque:s,context:c}=this;Wnt(this),this.callback=null;let l=r;l!=null&&(l=this.responseHeaders==="raw"?$nt.parseRawHeaders(r):$nt.parseHeaders(r)),this.runInAsyncScope(o,null,null,{statusCode:e,headers:l,socket:n,opaque:s,context:c})}onError(e){let{callback:r,opaque:n}=this;Wnt(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function jnt(t,e){if(e===void 0)return new Promise((r,n)=>{jnt.call(this,t,(o,s)=>o?n(o):r(s))});try{let r=new QIe(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}a(jnt,"connect");Gnt.exports=jnt});var znt=$((hmi,_N)=>{"use strict";f();_N.exports.request=Tnt();_N.exports.stream=Dnt();_N.exports.pipeline=Lnt();_N.exports.upgrade=Hnt();_N.exports.connect=Vnt()});var qIe=$((Ami,Knt)=>{"use strict";f();var{UndiciError:gnr}=Xo(),UIe=class t extends gnr{static{a(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};Knt.exports={MockNotMatchedError:UIe}});var SN=$((vmi,Ynt)=>{"use strict";f();Ynt.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var _Q=$((Emi,ait)=>{"use strict";f();var{MockNotMatchedError:hk}=qIe(),{kDispatches:Fte,kMockAgent:Anr,kOriginalDispatch:ynr,kOrigin:Cnr,kGetNetConnect:vnr}=SN(),{buildURL:xnr}=Wi(),{STATUS_CODES:Enr}=require("node:http"),{types:{isPromise:bnr}}=require("node:util");function Yx(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}a(Yx,"matchValue");function Xnt(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}a(Xnt,"lowerCaseEntries");function Znt(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):Xnt(t)[e.toLocaleLowerCase()]}a(Znt,"getHeaderByName");function WIe(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}a(WIe,"buildHeadersFromArray");function eit(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=WIe(e)),t.headers(e?Xnt(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let o=Znt(e,r);if(!Yx(n,o))return!1}return!0}a(eit,"matchHeaders");function Jnt(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}a(Jnt,"safeUrl");function Inr(t,{path:e,method:r,body:n,headers:o}){let s=Yx(t.path,e),c=Yx(t.method,r),l=typeof t.body<"u"?Yx(t.body,n):!0,u=eit(t,o);return s&&c&&l&&u}a(Inr,"matchKey");function tit(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}a(tit,"getResponseData");function rit(t,e){let r=e.query?xnr(e.path,e.query):e.path,n=typeof r=="string"?Jnt(r):r,o=t.filter(({consumed:s})=>!s).filter(({path:s})=>Yx(Jnt(s),n));if(o.length===0)throw new hk(`Mock dispatch not matched for path '${n}'`);if(o=o.filter(({method:s})=>Yx(s,e.method)),o.length===0)throw new hk(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(o=o.filter(({body:s})=>typeof s<"u"?Yx(s,e.body):!0),o.length===0)throw new hk(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(o=o.filter(s=>eit(s,e.headers)),o.length===0){let s=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new hk(`Mock dispatch not matched for headers '${s}' on path '${n}'`)}return o[0]}a(rit,"getMockDispatch");function Tnr(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},o=typeof r=="function"?{callback:r}:{...r},s={...n,...e,pending:!0,data:{error:null,...o}};return t.push(s),s}a(Tnr,"addMockDispatch");function HIe(t,e){let r=t.findIndex(n=>n.consumed?Inr(n,e):!1);r!==-1&&t.splice(r,1)}a(HIe,"deleteMockDispatch");function nit(t){let{path:e,method:r,body:n,headers:o,query:s}=t;return{path:e,method:r,body:n,headers:o,query:s}}a(nit,"buildKey");function $Ie(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let o=e[n],s=t[o],c=Buffer.from(`${o}`);if(Array.isArray(s))for(let l=0;l<s.length;++l)r.push(c,Buffer.from(`${s[l]}`));else r.push(c,Buffer.from(`${s}`))}return r}a($Ie,"generateKeyValues");function iit(t){return Enr[t]||"unknown"}a(iit,"getStatusText");async function wnr(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}a(wnr,"getResponse");function oit(t,e){let r=nit(t),n=rit(this[Fte],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:o,data:s,headers:c,trailers:l,error:u},delay:d,persist:p}=n,{timesInvoked:m,times:h}=n;if(n.consumed=!p&&m>=h,n.pending=m<h,u!==null)return HIe(this[Fte],r),e.onError(u),!0;typeof d=="number"&&d>0?setTimeout(()=>{g(this[Fte])},d):g(this[Fte]);function g(y,v=s){let b=Array.isArray(t.headers)?WIe(t.headers):t.headers,I=typeof v=="function"?v({...t,headers:b}):v;if(bnr(I)){I.then(F=>g(y,F));return}let S=tit(I),k=$Ie(c),N=$Ie(l);e.onConnect?.(F=>e.onError(F),null),e.onHeaders?.(o,k,A,iit(o)),e.onData?.(Buffer.from(S)),e.onComplete?.(N),HIe(y,r)}a(g,"handleReply");function A(){}return a(A,"resume"),!0}a(oit,"mockDispatch");function _nr(){let t=this[Anr],e=this[Cnr],r=this[ynr];return a(function(o,s){if(t.isMockActive)try{oit.call(this,o,s)}catch(c){if(c instanceof hk){let l=t[vnr]();if(l===!1)throw new hk(`${c.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(sit(l,e))r.call(this,o,s);else throw new hk(`${c.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw c}else r.call(this,o,s)},"dispatch")}a(_nr,"buildMockDispatch");function sit(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>Yx(n,r.host)))}a(sit,"checkNetConnect");function Snr(t){if(t){let{agent:e,...r}=t;return r}}a(Snr,"buildMockOptions");ait.exports={getResponseData:tit,getMockDispatch:rit,addMockDispatch:Tnr,deleteMockDispatch:HIe,buildKey:nit,generateKeyValues:$Ie,matchValue:Yx,getResponse:wnr,getStatusText:iit,mockDispatch:oit,buildMockDispatch:_nr,checkNetConnect:sit,buildMockOptions:Snr,getHeaderByName:Znt,buildHeadersFromArray:WIe}});var JIe=$((Tmi,YIe)=>{"use strict";f();var{getResponseData:Rnr,buildKey:knr,addMockDispatch:jIe}=_Q(),{kDispatches:Ote,kDispatchKey:Qte,kDefaultHeaders:GIe,kDefaultTrailers:VIe,kContentLength:zIe,kMockDispatch:Ute}=SN(),{InvalidArgumentError:f1}=Xo(),{buildURL:Pnr}=Wi(),RN=class{static{a(this,"MockScope")}constructor(e){this[Ute]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new f1("waitInMs must be a valid integer > 0");return this[Ute].delay=e,this}persist(){return this[Ute].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new f1("repeatTimes must be a valid integer > 0");return this[Ute].times=e,this}},KIe=class{static{a(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new f1("opts must be an object");if(typeof e.path>"u")throw new f1("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=Pnr(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[Qte]=knr(e),this[Ote]=r,this[GIe]={},this[VIe]={},this[zIe]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let o=Rnr(r),s=this[zIe]?{"content-length":o.length}:{},c={...this[GIe],...s,...n.headers},l={...this[VIe],...n.trailers};return{statusCode:e,data:r,headers:c,trailers:l}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new f1("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new f1("responseOptions must be an object")}reply(e){if(typeof e=="function"){let s=a(l=>{let u=e(l);if(typeof u!="object"||u===null)throw new f1("reply options callback must return an object");let d={data:"",responseOptions:{},...u};return this.validateReplyParameters(d),{...this.createMockScopeDispatchData(d)}},"wrappedDefaultsCallback"),c=jIe(this[Ote],this[Qte],s);return new RN(c)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),o=jIe(this[Ote],this[Qte],n);return new RN(o)}replyWithError(e){if(typeof e>"u")throw new f1("error must be defined");let r=jIe(this[Ote],this[Qte],{error:e});return new RN(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new f1("headers must be defined");return this[GIe]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new f1("trailers must be defined");return this[VIe]=e,this}replyContentLength(){return this[zIe]=!0,this}};YIe.exports.MockInterceptor=KIe;YIe.exports.MockScope=RN});var eTe=$((Smi,mit)=>{"use strict";f();var{promisify:Dnr}=require("node:util"),Bnr=hQ(),{buildMockDispatch:Nnr}=_Q(),{kDispatches:cit,kMockAgent:lit,kClose:uit,kOriginalClose:dit,kOrigin:fit,kOriginalDispatch:Mnr,kConnected:XIe}=SN(),{MockInterceptor:Lnr}=JIe(),pit=Qa(),{InvalidArgumentError:Fnr}=Xo(),ZIe=class extends Bnr{static{a(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new Fnr("Argument opts.agent must implement Agent");this[lit]=r.agent,this[fit]=e,this[cit]=[],this[XIe]=1,this[Mnr]=this.dispatch,this[dit]=this.close.bind(this),this.dispatch=Nnr.call(this),this.close=this[uit]}get[pit.kConnected](){return this[XIe]}intercept(e){return new Lnr(e,this[cit])}async[uit](){await Dnr(this[dit])(),this[XIe]=0,this[lit][pit.kClients].delete(this[fit])}};mit.exports=ZIe});var nTe=$((Pmi,xit)=>{"use strict";f();var{promisify:Onr}=require("node:util"),Qnr=vN(),{buildMockDispatch:Unr}=_Q(),{kDispatches:hit,kMockAgent:git,kClose:Ait,kOriginalClose:yit,kOrigin:Cit,kOriginalDispatch:qnr,kConnected:tTe}=SN(),{MockInterceptor:Hnr}=JIe(),vit=Qa(),{InvalidArgumentError:$nr}=Xo(),rTe=class extends Qnr{static{a(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new $nr("Argument opts.agent must implement Agent");this[git]=r.agent,this[Cit]=e,this[hit]=[],this[tTe]=1,this[qnr]=this.dispatch,this[yit]=this.close.bind(this),this.dispatch=Unr.call(this),this.close=this[Ait]}get[vit.kConnected](){return this[tTe]}intercept(e){return new Hnr(e,this[hit])}async[Ait](){await Onr(this[yit])(),this[tTe]=0,this[git][vit.kClients].delete(this[Cit])}};xit.exports=rTe});var bit=$((Mmi,Eit)=>{"use strict";f();var Wnr={pronoun:"it",is:"is",was:"was",this:"this"},jnr={pronoun:"they",is:"are",was:"were",this:"these"};Eit.exports=class{static{a(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?Wnr:jnr,o=r?this.singular:this.plural;return{...n,count:e,noun:o}}}});var Tit=$((Qmi,Iit)=>{"use strict";f();var{Transform:Gnr}=require("node:stream"),{Console:Vnr}=require("node:console"),znr=process.versions.icu?"\u2705":"Y ",Knr=process.versions.icu?"\u274C":"N ";Iit.exports=class{static{a(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new Gnr({transform(r,n,o){o(null,r)}}),this.logger=new Vnr({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:o,data:{statusCode:s},persist:c,times:l,timesInvoked:u,origin:d})=>({Method:n,Origin:d,Path:o,"Status code":s,Persistent:c?znr:Knr,Invocations:u,Remaining:c?1/0:l-u}));return this.logger.table(r),this.transform.read().toString()}}});var Rit=$((Hmi,Sit)=>{"use strict";f();var{kClients:gk}=Qa(),Ynr=xN(),{kAgent:iTe,kMockAgentSet:qte,kMockAgentGet:wit,kDispatches:oTe,kIsMockActive:Hte,kNetConnect:Ak,kGetNetConnect:Jnr,kOptions:$te,kFactory:Wte}=SN(),Xnr=eTe(),Znr=nTe(),{matchValue:eir,buildMockOptions:tir}=_Q(),{InvalidArgumentError:_it,UndiciError:rir}=Xo(),nir=V7(),iir=bit(),oir=Tit(),sTe=class extends nir{static{a(this,"MockAgent")}constructor(e){if(super(e),this[Ak]=!0,this[Hte]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new _it("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new Ynr(e);this[iTe]=r,this[gk]=r[gk],this[$te]=tir(e)}get(e){let r=this[wit](e);return r||(r=this[Wte](e),this[qte](e,r)),r}dispatch(e,r){return this.get(e.origin),this[iTe].dispatch(e,r)}async close(){await this[iTe].close(),this[gk].clear()}deactivate(){this[Hte]=!1}activate(){this[Hte]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[Ak])?this[Ak].push(e):this[Ak]=[e];else if(typeof e>"u")this[Ak]=!0;else throw new _it("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[Ak]=!1}get isMockActive(){return this[Hte]}[qte](e,r){this[gk].set(e,r)}[Wte](e){let r=Object.assign({agent:this},this[$te]);return this[$te]&&this[$te].connections===1?new Xnr(e,r):new Znr(e,r)}[wit](e){let r=this[gk].get(e);if(r)return r;if(typeof e!="string"){let n=this[Wte]("http://localhost:9999");return this[qte](e,n),n}for(let[n,o]of Array.from(this[gk]))if(o&&typeof n!="string"&&eir(n,e)){let s=this[Wte](e);return this[qte](e,s),s[oTe]=o[oTe],s}}[Jnr](){return this[Ak]}pendingInterceptors(){let e=this[gk];return Array.from(e.entries()).flatMap(([r,n])=>n[oTe].map(o=>({...o,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new oir}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new iir("interceptor","interceptors").pluralize(r.length);throw new rir(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};Sit.exports=sTe});var jte=$((jmi,Bit)=>{"use strict";f();var kit=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:sir}=Xo(),air=xN();Dit()===void 0&&Pit(new air);function Pit(t){if(!t||typeof t.dispatch!="function")throw new sir("Argument agent must implement Agent");Object.defineProperty(globalThis,kit,{value:t,writable:!0,enumerable:!1,configurable:!1})}a(Pit,"setGlobalDispatcher");function Dit(){return globalThis[kit]}a(Dit,"getGlobalDispatcher");Bit.exports={setGlobalDispatcher:Pit,getGlobalDispatcher:Dit}});var Gte=$((Kmi,Nit)=>{"use strict";f();Nit.exports=class{static{a(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var Lit=$((Xmi,Mit)=>{"use strict";f();var cir=bte();Mit.exports=t=>{let e=t?.maxRedirections;return r=>a(function(o,s){let{maxRedirections:c=e,...l}=o;if(!c)return r(o,s);let u=new cir(r,c,o,s);return r(l,u)},"redirectInterceptor")}});var Oit=$((thi,Fit)=>{"use strict";f();var lir=Mte();Fit.exports=t=>e=>a(function(n,o){return e(n,new lir({...n,retryOptions:{...t,...n.retryOptions}},{handler:o,dispatch:e}))},"retryInterceptor")});var Uit=$((ihi,Qit)=>{"use strict";f();var uir=Wi(),{InvalidArgumentError:dir,RequestAbortedError:fir}=Xo(),pir=Gte(),aTe=class extends pir{static{a(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new dir("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,o){let c=uir.parseHeaders(r)["content-length"];if(c!=null&&c>this.#e)throw new fir(`Response size (${c}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,o)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function mir({maxSize:t}={maxSize:1024*1024}){return e=>a(function(n,o){let{dumpMaxSize:s=t}=n,c=new aTe({maxSize:s},o);return e(n,c)},"Intercept")}a(mir,"createDumpInterceptor");Qit.exports=mir});var $it=$((ahi,Hit)=>{"use strict";f();var{isIP:hir}=require("node:net"),{lookup:gir}=require("node:dns"),Air=Gte(),{InvalidArgumentError:kN,InformationalError:yir}=Xo(),qit=Math.pow(2,31)-1,cTe=class{static{a(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let o=this.#i.get(e.hostname);if(o==null&&this.full){n(null,e.origin);return}let s={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(o==null)this.lookup(e,s,(c,l)=>{if(c||l==null||l.length===0){n(c??new yir("No DNS entries found"));return}this.setRecords(e,l);let u=this.#i.get(e.hostname),d=this.pick(e,u,s.affinity),p;typeof d.port=="number"?p=`:${d.port}`:e.port!==""?p=`:${e.port}`:p="",n(null,`${e.protocol}//${d.family===6?`[${d.address}]`:d.address}${p}`)});else{let c=this.pick(e,o,s.affinity);if(c==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let l;typeof c.port=="number"?l=`:${c.port}`:e.port!==""?l=`:${e.port}`:l="",n(null,`${e.protocol}//${c.family===6?`[${c.address}]`:c.address}${l}`)}}#n(e,r,n){gir(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(o,s)=>{if(o)return n(o);let c=new Map;for(let l of s)c.set(`${l.address}:${l.family}`,l);n(null,c.values())})}#r(e,r,n){let o=null,{records:s,offset:c}=r,l;if(this.dualStack?(n==null&&(c==null||c===qit?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),s[n]!=null&&s[n].ips.length>0?l=s[n]:l=s[n===4?6:4]):l=s[n],l==null||l.ips.length===0)return o;l.offset==null||l.offset===qit?l.offset=0:l.offset++;let u=l.offset%l.ips.length;return o=l.ips[u]??null,o==null?o:Date.now()-o.timestamp>o.ttl?(l.ips.splice(u,1),this.pick(e,r,n)):o}setRecords(e,r){let n=Date.now(),o={records:{4:null,6:null}};for(let s of r){s.timestamp=n,typeof s.ttl=="number"?s.ttl=Math.min(s.ttl,this.#e):s.ttl=this.#e;let c=o.records[s.family]??{ips:[]};c.ips.push(s),o.records[s.family]=c}this.#i.set(e.hostname,o)}getHandler(e,r){return new lTe(this,e,r)}},lTe=class extends Air{static{a(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:o},s){super(n),this.#r=r,this.#n=n,this.#t={...s},this.#e=e,this.#i=o}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let o={...this.#t,origin:n};this.#i(o,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};Hit.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new kN("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new kN("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new kN("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new kN("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new kN("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new kN("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},o=new cTe(n);return s=>a(function(l,u){let d=l.origin.constructor===URL?l.origin:new URL(l.origin);return hir(d.hostname)!==0?s(l,u):(o.runLookup(d,l,(p,m)=>{if(p)return u.onError(p);let h=null;h={...l,servername:d.hostname,origin:m,headers:{host:d.hostname,...l.headers}},s(h,o.getHandler({origin:d,dispatch:s,handler:u},l))}),!0)},"dnsInterceptor")}});var yk=$((uhi,Yit)=>{"use strict";f();var{kConstruct:Cir}=Qa(),{kEnumerableProperty:PN}=Wi(),{iteratorMixin:vir,isValidHeaderName:SQ,isValidHeaderValue:jit}=X0(),{webidl:Do}=sd(),uTe=require("node:assert"),Vte=require("node:util"),ml=Symbol("headers map"),tm=Symbol("headers map sorted");function Wit(t){return t===10||t===13||t===9||t===32}a(Wit,"isHTTPWhiteSpaceCharCode");function Git(t){let e=0,r=t.length;for(;r>e&&Wit(t.charCodeAt(r-1));)--r;for(;r>e&&Wit(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}a(Git,"headerValueNormalize");function Vit(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw Do.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});dTe(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)dTe(t,r[n],e[r[n]])}else throw Do.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}a(Vit,"fill");function dTe(t,e,r){if(r=Git(r),SQ(e)){if(!jit(r))throw Do.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Do.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(Kit(t)==="immutable")throw new TypeError("immutable");return fTe(t).append(e,r,!1)}a(dTe,"appendHeader");function zit(t,e){return t[0]<e[0]?-1:1}a(zit,"compareHeaderName");var zte=class t{static{a(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[ml]=new Map(e[ml]),this[tm]=e[tm],this.cookies=e.cookies===null?null:[...e.cookies]):(this[ml]=new Map(e),this[tm]=null)}contains(e,r){return this[ml].has(r?e:e.toLowerCase())}clear(){this[ml].clear(),this[tm]=null,this.cookies=null}append(e,r,n){this[tm]=null;let o=n?e:e.toLowerCase(),s=this[ml].get(o);if(s){let c=o==="cookie"?"; ":", ";this[ml].set(o,{name:s.name,value:`${s.value}${c}${r}`})}else this[ml].set(o,{name:e,value:r});o==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[tm]=null;let o=n?e:e.toLowerCase();o==="set-cookie"&&(this.cookies=[r]),this[ml].set(o,{name:e,value:r})}delete(e,r){this[tm]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[ml].delete(e)}get(e,r){return this[ml].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[ml])yield[e,r]}get entries(){let e={};if(this[ml].size!==0)for(let{name:r,value:n}of this[ml].values())e[r]=n;return e}rawValues(){return this[ml].values()}get entriesList(){let e=[];if(this[ml].size!==0)for(let{0:r,1:{name:n,value:o}}of this[ml])if(r==="set-cookie")for(let s of this.cookies)e.push([n,s]);else e.push([n,o]);return e}toSortedArray(){let e=this[ml].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[ml][Symbol.iterator](),o=n.next().value;r[0]=[o[0],o[1].value],uTe(o[1].value!==null);for(let s=1,c=0,l=0,u=0,d=0,p,m;s<e;++s){for(m=n.next().value,p=r[s]=[m[0],m[1].value],uTe(p[1]!==null),u=0,l=s;u<l;)d=u+(l-u>>1),r[d][0]<=p[0]?u=d+1:l=d;if(s!==d){for(c=s;c>u;)r[c]=r[--c];r[u]=p}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:o,1:{value:s}}of this[ml])r[n++]=[o,s],uTe(s!==null);return r.sort(zit)}}},JA=class t{static{a(this,"Headers")}#e;#t;constructor(e=void 0){Do.util.markAsUncloneable(this),e!==Cir&&(this.#t=new zte,this.#e="none",e!==void 0&&(e=Do.converters.HeadersInit(e,"Headers contructor","init"),Vit(this,e)))}append(e,r){Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=Do.converters.ByteString(e,n,"name"),r=Do.converters.ByteString(r,n,"value"),dTe(this,e,r)}delete(e){if(Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,1,"Headers.delete"),e=Do.converters.ByteString(e,"Headers.delete","name"),!SQ(e))throw Do.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=Do.converters.ByteString(e,r,"name"),!SQ(e))throw Do.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=Do.converters.ByteString(e,r,"name"),!SQ(e))throw Do.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){Do.brandCheck(this,t),Do.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=Do.converters.ByteString(e,n,"name"),r=Do.converters.ByteString(r,n,"value"),r=Git(r),SQ(e)){if(!jit(r))throw Do.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Do.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){Do.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[tm](){if(this.#t[tm])return this.#t[tm];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[tm]=r;for(let o=0;o<r.length;++o){let{0:s,1:c}=r[o];if(s==="set-cookie")for(let l=0;l<n.length;++l)e.push([s,n[l]]);else e.push([s,c])}return this.#t[tm]=e}[Vte.inspect.custom](e,r){return r.depth??=e,`Headers ${Vte.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:Kit,setHeadersGuard:xir,getHeadersList:fTe,setHeadersList:Eir}=JA;Reflect.deleteProperty(JA,"getHeadersGuard");Reflect.deleteProperty(JA,"setHeadersGuard");Reflect.deleteProperty(JA,"getHeadersList");Reflect.deleteProperty(JA,"setHeadersList");vir("Headers",JA,tm,0,1);Object.defineProperties(JA.prototype,{append:PN,delete:PN,get:PN,has:PN,set:PN,getSetCookie:PN,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[Vte.inspect.custom]:{enumerable:!1}});Do.converters.HeadersInit=function(t,e,r){if(Do.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!Vte.types.isProxy(t)&&n===JA.prototype.entries)try{return fTe(t).entriesList}catch{}return typeof n=="function"?Do.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):Do.converters["record<ByteString, ByteString>"](t,e,r)}throw Do.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};Yit.exports={fill:Vit,compareHeaderName:zit,Headers:JA,HeadersList:zte,getHeadersGuard:Kit,setHeadersGuard:xir,setHeadersList:Eir,getHeadersList:fTe}});var kQ=$((phi,sot)=>{"use strict";f();var{Headers:rot,HeadersList:Jit,fill:bir,getHeadersGuard:Iir,setHeadersGuard:not,setHeadersList:iot}=yk(),{extractBody:Xit,cloneBody:Tir,mixinBody:wir,hasFinalizationRegistry:_ir,streamRegistry:Sir,bodyUnusable:Rir}=pN(),pTe=Wi(),Zit=require("node:util"),{kEnumerableProperty:rm}=pTe,{isValidReasonPhrase:kir,isCancelled:Pir,isAborted:Dir,isBlobLike:Bir,serializeJavascriptValueToJSONString:Nir,isErrorLike:Mir,isomorphicEncode:Lir,environmentSettingsObject:Fir}=X0(),{redirectStatusSet:Oir,nullBodyStatus:Qir}=Y7(),{kState:yc,kHeaders:Jx}=iw(),{webidl:Ii}=sd(),{FormData:Uir}=rQ(),{URLSerializer:eot}=Fp(),{kConstruct:Yte}=Qa(),mTe=require("node:assert"),{types:qir}=require("node:util"),Hir=new TextEncoder("utf-8"),Ck=class t{static{a(this,"Response")}static error(){return RQ(Jte(),"immutable")}static json(e,r={}){Ii.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=Ii.converters.ResponseInit(r));let n=Hir.encode(Nir(e)),o=Xit(n),s=RQ(DN({}),"response");return tot(s,r,{body:o[0],type:"application/json"}),s}static redirect(e,r=302){Ii.argumentLengthCheck(arguments,1,"Response.redirect"),e=Ii.converters.USVString(e),r=Ii.converters["unsigned short"](r);let n;try{n=new URL(e,Fir.settingsObject.baseUrl)}catch(c){throw new TypeError(`Failed to parse URL from ${e}`,{cause:c})}if(!Oir.has(r))throw new RangeError(`Invalid status code ${r}`);let o=RQ(DN({}),"immutable");o[yc].status=r;let s=Lir(eot(n));return o[yc].headersList.append("location",s,!0),o}constructor(e=null,r={}){if(Ii.util.markAsUncloneable(this),e===Yte)return;e!==null&&(e=Ii.converters.BodyInit(e)),r=Ii.converters.ResponseInit(r),this[yc]=DN({}),this[Jx]=new rot(Yte),not(this[Jx],"response"),iot(this[Jx],this[yc].headersList);let n=null;if(e!=null){let[o,s]=Xit(e);n={body:o,type:s}}tot(this,r,n)}get type(){return Ii.brandCheck(this,t),this[yc].type}get url(){Ii.brandCheck(this,t);let e=this[yc].urlList,r=e[e.length-1]??null;return r===null?"":eot(r,!0)}get redirected(){return Ii.brandCheck(this,t),this[yc].urlList.length>1}get status(){return Ii.brandCheck(this,t),this[yc].status}get ok(){return Ii.brandCheck(this,t),this[yc].status>=200&&this[yc].status<=299}get statusText(){return Ii.brandCheck(this,t),this[yc].statusText}get headers(){return Ii.brandCheck(this,t),this[Jx]}get body(){return Ii.brandCheck(this,t),this[yc].body?this[yc].body.stream:null}get bodyUsed(){return Ii.brandCheck(this,t),!!this[yc].body&&pTe.isDisturbed(this[yc].body.stream)}clone(){if(Ii.brandCheck(this,t),Rir(this))throw Ii.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=hTe(this[yc]);return RQ(e,Iir(this[Jx]))}[Zit.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${Zit.formatWithOptions(r,n)}`}};wir(Ck);Object.defineProperties(Ck.prototype,{type:rm,url:rm,status:rm,ok:rm,redirected:rm,statusText:rm,headers:rm,clone:rm,body:rm,bodyUsed:rm,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(Ck,{json:rm,redirect:rm,error:rm});function hTe(t){if(t.internalResponse)return oot(hTe(t.internalResponse),t.type);let e=DN({...t,body:null});return t.body!=null&&(e.body=Tir(e,t.body)),e}a(hTe,"cloneResponse");function DN(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new Jit(t?.headersList):new Jit,urlList:t?.urlList?[...t.urlList]:[]}}a(DN,"makeResponse");function Jte(t){let e=Mir(t);return DN({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}a(Jte,"makeNetworkError");function $ir(t){return t.type==="error"&&t.status===0}a($ir,"isNetworkError");function Kte(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,o){return mTe(!(n in e)),r[n]=o,!0}})}a(Kte,"makeFilteredResponse");function oot(t,e){if(e==="basic")return Kte(t,{type:"basic",headersList:t.headersList});if(e==="cors")return Kte(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return Kte(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return Kte(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});mTe(!1)}a(oot,"filterResponse");function Wir(t,e=null){return mTe(Pir(t)),Dir(t)?Jte(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):Jte(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}a(Wir,"makeAppropriateNetworkError");function tot(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!kir(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[yc].status=e.status),"statusText"in e&&e.statusText!=null&&(t[yc].statusText=e.statusText),"headers"in e&&e.headers!=null&&bir(t[Jx],e.headers),r){if(Qir.includes(t.status))throw Ii.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[yc].body=r.body,r.type!=null&&!t[yc].headersList.contains("content-type",!0)&&t[yc].headersList.append("content-type",r.type,!0)}}a(tot,"initializeResponse");function RQ(t,e){let r=new Ck(Yte);return r[yc]=t,r[Jx]=new rot(Yte),iot(r[Jx],t.headersList),not(r[Jx],e),_ir&&t.body?.stream&&Sir.register(r,new WeakRef(t.body.stream)),r}a(RQ,"fromInnerResponse");Ii.converters.ReadableStream=Ii.interfaceConverter(ReadableStream);Ii.converters.FormData=Ii.interfaceConverter(Uir);Ii.converters.URLSearchParams=Ii.interfaceConverter(URLSearchParams);Ii.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?Ii.converters.USVString(t,e,r):Bir(t)?Ii.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||qir.isArrayBuffer(t)?Ii.converters.BufferSource(t,e,r):pTe.isFormDataLike(t)?Ii.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?Ii.converters.URLSearchParams(t,e,r):Ii.converters.DOMString(t,e,r)};Ii.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?Ii.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:Ii.converters.XMLHttpRequestBodyInit(t,e,r)};Ii.converters.ResponseInit=Ii.dictionaryConverter([{key:"status",converter:Ii.converters["unsigned short"],defaultValue:a(()=>200,"defaultValue")},{key:"statusText",converter:Ii.converters.ByteString,defaultValue:a(()=>"","defaultValue")},{key:"headers",converter:Ii.converters.HeadersInit}]);sot.exports={isNetworkError:$ir,makeNetworkError:Jte,makeResponse:DN,makeAppropriateNetworkError:Wir,filterResponse:oot,Response:Ck,cloneResponse:hTe,fromInnerResponse:RQ}});var uot=$((ghi,lot)=>{"use strict";f();var{kConnected:aot,kSize:cot}=Qa(),gTe=class{static{a(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[aot]===0&&this.value[cot]===0?void 0:this.value}},ATe=class{static{a(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[aot]===0&&e[cot]===0&&this.finalizer(r)})}unregister(e){}};lot.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:gTe,FinalizationRegistry:ATe}):{WeakRef,FinalizationRegistry}}});var BN=$((Chi,Tot)=>{"use strict";f();var{extractBody:jir,mixinBody:Gir,cloneBody:Vir,bodyUnusable:dot}=pN(),{Headers:vot,fill:zir,HeadersList:tre,setHeadersGuard:CTe,getHeadersGuard:Kir,setHeadersList:xot,getHeadersList:fot}=yk(),{FinalizationRegistry:Yir}=uot()(),Zte=Wi(),pot=require("node:util"),{isValidHTTPToken:Jir,sameOrigin:mot,environmentSettingsObject:Xte}=X0(),{forbiddenMethodsSet:Xir,corsSafeListedMethodsSet:Zir,referrerPolicy:eor,requestRedirect:tor,requestMode:ror,requestCredentials:nor,requestCache:ior,requestDuplex:oor}=Y7(),{kEnumerableProperty:hl,normalizedMethodRecordsBase:sor,normalizedMethodRecords:aor}=Zte,{kHeaders:nm,kSignal:ere,kState:fa,kDispatcher:yTe}=iw(),{webidl:Ln}=sd(),{URLSerializer:cor}=Fp(),{kConstruct:rre}=Qa(),lor=require("node:assert"),{getMaxListeners:hot,setMaxListeners:got,getEventListeners:uor,defaultMaxListeners:Aot}=require("node:events"),dor=Symbol("abortController"),Eot=new Yir(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),nre=new WeakMap;function yot(t){return e;function e(){let r=t.deref();if(r!==void 0){Eot.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=nre.get(r.signal);if(n!==void 0){if(n.size!==0){for(let o of n){let s=o.deref();s!==void 0&&s.abort(this.reason)}n.clear()}nre.delete(r.signal)}}}}a(yot,"buildAbort");var Cot=!1,hw=class t{static{a(this,"Request")}constructor(e,r={}){if(Ln.util.markAsUncloneable(this),e===rre)return;let n="Request constructor";Ln.argumentLengthCheck(arguments,1,n),e=Ln.converters.RequestInfo(e,n,"input"),r=Ln.converters.RequestInit(r,n,"init");let o=null,s=null,c=Xte.settingsObject.baseUrl,l=null;if(typeof e=="string"){this[yTe]=r.dispatcher;let b;try{b=new URL(e,c)}catch(I){throw new TypeError("Failed to parse URL from "+e,{cause:I})}if(b.username||b.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);o=ire({urlList:[b]}),s="cors"}else this[yTe]=r.dispatcher||e[yTe],lor(e instanceof t),o=e[fa],l=e[ere];let u=Xte.settingsObject.origin,d="client";if(o.window?.constructor?.name==="EnvironmentSettingsObject"&&mot(o.window,u)&&(d=o.window),r.window!=null)throw new TypeError(`'window' option '${d}' must be null`);"window"in r&&(d="no-window"),o=ire({method:o.method,headersList:o.headersList,unsafeRequest:o.unsafeRequest,client:Xte.settingsObject,window:d,priority:o.priority,origin:o.origin,referrer:o.referrer,referrerPolicy:o.referrerPolicy,mode:o.mode,credentials:o.credentials,cache:o.cache,redirect:o.redirect,integrity:o.integrity,keepalive:o.keepalive,reloadNavigation:o.reloadNavigation,historyNavigation:o.historyNavigation,urlList:[...o.urlList]});let p=Object.keys(r).length!==0;if(p&&(o.mode==="navigate"&&(o.mode="same-origin"),o.reloadNavigation=!1,o.historyNavigation=!1,o.origin="client",o.referrer="client",o.referrerPolicy="",o.url=o.urlList[o.urlList.length-1],o.urlList=[o.url]),r.referrer!==void 0){let b=r.referrer;if(b==="")o.referrer="no-referrer";else{let I;try{I=new URL(b,c)}catch(S){throw new TypeError(`Referrer "${b}" is not a valid URL.`,{cause:S})}I.protocol==="about:"&&I.hostname==="client"||u&&!mot(I,Xte.settingsObject.baseUrl)?o.referrer="client":o.referrer=I}}r.referrerPolicy!==void 0&&(o.referrerPolicy=r.referrerPolicy);let m;if(r.mode!==void 0?m=r.mode:m=s,m==="navigate")throw Ln.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(m!=null&&(o.mode=m),r.credentials!==void 0&&(o.credentials=r.credentials),r.cache!==void 0&&(o.cache=r.cache),o.cache==="only-if-cached"&&o.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(o.redirect=r.redirect),r.integrity!=null&&(o.integrity=String(r.integrity)),r.keepalive!==void 0&&(o.keepalive=!!r.keepalive),r.method!==void 0){let b=r.method,I=aor[b];if(I!==void 0)o.method=I;else{if(!Jir(b))throw new TypeError(`'${b}' is not a valid HTTP method.`);let S=b.toUpperCase();if(Xir.has(S))throw new TypeError(`'${b}' HTTP method is unsupported.`);b=sor[S]??b,o.method=b}!Cot&&o.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),Cot=!0)}r.signal!==void 0&&(l=r.signal),this[fa]=o;let h=new AbortController;if(this[ere]=h.signal,l!=null){if(!l||typeof l.aborted!="boolean"||typeof l.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(l.aborted)h.abort(l.reason);else{this[dor]=h;let b=new WeakRef(h),I=yot(b);try{(typeof hot=="function"&&hot(l)===Aot||uor(l,"abort").length>=Aot)&&got(1500,l)}catch{}Zte.addAbortListener(l,I),Eot.register(h,{signal:l,abort:I},I)}}if(this[nm]=new vot(rre),xot(this[nm],o.headersList),CTe(this[nm],"request"),m==="no-cors"){if(!Zir.has(o.method))throw new TypeError(`'${o.method} is unsupported in no-cors mode.`);CTe(this[nm],"request-no-cors")}if(p){let b=fot(this[nm]),I=r.headers!==void 0?r.headers:new tre(b);if(b.clear(),I instanceof tre){for(let{name:S,value:k}of I.rawValues())b.append(S,k,!1);b.cookies=I.cookies}else zir(this[nm],I)}let g=e instanceof t?e[fa].body:null;if((r.body!=null||g!=null)&&(o.method==="GET"||o.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let A=null;if(r.body!=null){let[b,I]=jir(r.body,o.keepalive);A=b,I&&!fot(this[nm]).contains("content-type",!0)&&this[nm].append("content-type",I)}let y=A??g;if(y!=null&&y.source==null){if(A!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(o.mode!=="same-origin"&&o.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');o.useCORSPreflightFlag=!0}let v=y;if(A==null&&g!=null){if(dot(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let b=new TransformStream;g.stream.pipeThrough(b),v={source:g.source,length:g.length,stream:b.readable}}this[fa].body=v}get method(){return Ln.brandCheck(this,t),this[fa].method}get url(){return Ln.brandCheck(this,t),cor(this[fa].url)}get headers(){return Ln.brandCheck(this,t),this[nm]}get destination(){return Ln.brandCheck(this,t),this[fa].destination}get referrer(){return Ln.brandCheck(this,t),this[fa].referrer==="no-referrer"?"":this[fa].referrer==="client"?"about:client":this[fa].referrer.toString()}get referrerPolicy(){return Ln.brandCheck(this,t),this[fa].referrerPolicy}get mode(){return Ln.brandCheck(this,t),this[fa].mode}get credentials(){return this[fa].credentials}get cache(){return Ln.brandCheck(this,t),this[fa].cache}get redirect(){return Ln.brandCheck(this,t),this[fa].redirect}get integrity(){return Ln.brandCheck(this,t),this[fa].integrity}get keepalive(){return Ln.brandCheck(this,t),this[fa].keepalive}get isReloadNavigation(){return Ln.brandCheck(this,t),this[fa].reloadNavigation}get isHistoryNavigation(){return Ln.brandCheck(this,t),this[fa].historyNavigation}get signal(){return Ln.brandCheck(this,t),this[ere]}get body(){return Ln.brandCheck(this,t),this[fa].body?this[fa].body.stream:null}get bodyUsed(){return Ln.brandCheck(this,t),!!this[fa].body&&Zte.isDisturbed(this[fa].body.stream)}get duplex(){return Ln.brandCheck(this,t),"half"}clone(){if(Ln.brandCheck(this,t),dot(this))throw new TypeError("unusable");let e=bot(this[fa]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=nre.get(this.signal);n===void 0&&(n=new Set,nre.set(this.signal,n));let o=new WeakRef(r);n.add(o),Zte.addAbortListener(r.signal,yot(o))}return Iot(e,r.signal,Kir(this[nm]))}[pot.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${pot.formatWithOptions(r,n)}`}};Gir(hw);function ire(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new tre(t.headersList):new tre}}a(ire,"makeRequest");function bot(t){let e=ire({...t,body:null});return t.body!=null&&(e.body=Vir(e,t.body)),e}a(bot,"cloneRequest");function Iot(t,e,r){let n=new hw(rre);return n[fa]=t,n[ere]=e,n[nm]=new vot(rre),xot(n[nm],t.headersList),CTe(n[nm],r),n}a(Iot,"fromInnerRequest");Object.defineProperties(hw.prototype,{method:hl,url:hl,headers:hl,redirect:hl,clone:hl,signal:hl,duplex:hl,destination:hl,body:hl,bodyUsed:hl,isHistoryNavigation:hl,isReloadNavigation:hl,keepalive:hl,integrity:hl,cache:hl,credentials:hl,attribute:hl,referrerPolicy:hl,referrer:hl,mode:hl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});Ln.converters.Request=Ln.interfaceConverter(hw);Ln.converters.RequestInfo=function(t,e,r){return typeof t=="string"?Ln.converters.USVString(t,e,r):t instanceof hw?Ln.converters.Request(t,e,r):Ln.converters.USVString(t,e,r)};Ln.converters.AbortSignal=Ln.interfaceConverter(AbortSignal);Ln.converters.RequestInit=Ln.dictionaryConverter([{key:"method",converter:Ln.converters.ByteString},{key:"headers",converter:Ln.converters.HeadersInit},{key:"body",converter:Ln.nullableConverter(Ln.converters.BodyInit)},{key:"referrer",converter:Ln.converters.USVString},{key:"referrerPolicy",converter:Ln.converters.DOMString,allowedValues:eor},{key:"mode",converter:Ln.converters.DOMString,allowedValues:ror},{key:"credentials",converter:Ln.converters.DOMString,allowedValues:nor},{key:"cache",converter:Ln.converters.DOMString,allowedValues:ior},{key:"redirect",converter:Ln.converters.DOMString,allowedValues:tor},{key:"integrity",converter:Ln.converters.DOMString},{key:"keepalive",converter:Ln.converters.boolean},{key:"signal",converter:Ln.nullableConverter(t=>Ln.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:Ln.converters.any},{key:"duplex",converter:Ln.converters.DOMString,allowedValues:oor},{key:"dispatcher",converter:Ln.converters.any}]);Tot.exports={Request:hw,makeRequest:ire,fromInnerRequest:Iot,cloneRequest:bot}});var DQ=$((Ehi,Uot)=>{"use strict";f();var{makeNetworkError:hs,makeAppropriateNetworkError:ore,filterResponse:vTe,makeResponse:sre,fromInnerResponse:por}=kQ(),{HeadersList:wot}=yk(),{Request:mor,cloneRequest:hor}=BN(),gw=require("node:zlib"),{bytesMatch:gor,makePolicyContainer:Aor,clonePolicyContainer:yor,requestBadPort:Cor,TAOCheck:vor,appendRequestOriginHeader:xor,responseLocationURL:Eor,requestCurrentURL:p1,setRequestReferrerPolicyOnRedirect:bor,tryUpgradeRequestToAPotentiallyTrustworthyURL:Ior,createOpaqueTimingInfo:TTe,appendFetchMetadata:Tor,corsCheck:wor,crossOriginResourcePolicyCheck:_or,determineRequestsReferrer:Sor,coarsenedSharedCurrentTime:PQ,createDeferredPromise:Ror,isBlobLike:kor,sameOrigin:ITe,isCancelled:vk,isAborted:_ot,isErrorLike:Por,fullyReadBody:Dor,readableStreamClose:Bor,isomorphicEncode:are,urlIsLocal:Nor,urlIsHttpHttpsScheme:wTe,urlHasHttpsScheme:Mor,clampAndCoarsenConnectionTimingInfo:Lor,simpleRangeHeaderValue:For,buildContentRange:Oor,createInflate:Qor,extractMimeType:Uor}=X0(),{kState:Pot,kDispatcher:qor}=iw(),xk=require("node:assert"),{safelyExtractBody:_Te,extractBody:Sot}=pN(),{redirectStatusSet:Dot,nullBodyStatus:Bot,safeMethodsSet:Hor,requestBodyHeader:$or,subresourceSet:Wor}=Y7(),jor=require("node:events"),{Readable:Gor,pipeline:Vor,finished:zor}=require("node:stream"),{addAbortListener:Kor,isErrored:Yor,isReadable:cre,bufferToLowerCasedHeaderName:Rot}=Wi(),{dataURLProcessor:Jor,serializeAMimeType:Xor,minimizeSupportedMimeType:Zor}=Fp(),{getGlobalDispatcher:esr}=jte(),{webidl:tsr}=sd(),{STATUS_CODES:rsr}=require("node:http"),nsr=["GET","HEAD"],isr=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",xTe,lre=class extends jor{static{a(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function osr(t){Not(t,"fetch")}a(osr,"handleFetchDone");function ssr(t,e=void 0){tsr.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=Ror(),n;try{n=new mor(t,e)}catch(p){return r.reject(p),r.promise}let o=n[Pot];if(n.signal.aborted)return ETe(r,o,null,n.signal.reason),r.promise;o.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(o.serviceWorkers="none");let c=null,l=!1,u=null;return Kor(n.signal,()=>{l=!0,xk(u!=null),u.abort(n.signal.reason);let p=c?.deref();ETe(r,o,p,n.signal.reason)}),u=Lot({request:o,processResponseEndOfBody:osr,processResponse:a(p=>{if(!l){if(p.aborted){ETe(r,o,c,u.serializedAbortReason);return}if(p.type==="error"){r.reject(new TypeError("fetch failed",{cause:p.error}));return}c=new WeakRef(por(p,"immutable")),r.resolve(c.deref()),r=null}},"processResponse"),dispatcher:n[qor]}),r.promise}a(ssr,"fetch");function Not(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,o=t.cacheState;wTe(r)&&n!==null&&(t.timingAllowPassed||(n=TTe({startTime:n.startTime}),o=""),n.endTime=PQ(),t.timingInfo=n,Mot(n,r.href,e,globalThis,o))}a(Not,"finalizeAndReportTiming");var Mot=performance.markResourceTiming;function ETe(t,e,r,n){if(t&&t.reject(n),e.body!=null&&cre(e.body?.stream)&&e.body.stream.cancel(n).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s}),r==null)return;let o=r[Pot];o.body!=null&&cre(o.body?.stream)&&o.body.stream.cancel(n).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s})}a(ETe,"abortFetch");function Lot({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:o,processResponseConsumeBody:s,useParallelQueue:c=!1,dispatcher:l=esr()}){xk(l);let u=null,d=!1;t.client!=null&&(u=t.client.globalObject,d=t.client.crossOriginIsolatedCapability);let p=PQ(d),m=TTe({startTime:p}),h={controller:new lre(l),request:t,timingInfo:m,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:s,processResponseEndOfBody:o,taskDestination:u,crossOriginIsolatedCapability:d};return xk(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=yor(t.client.policyContainer):t.policyContainer=Aor()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,Wor.has(t.destination),Fot(h).catch(g=>{h.controller.terminate(g)}),h.controller}a(Lot,"fetching");async function Fot(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!Nor(p1(r))&&(n=hs("local URLs only")),Ior(r),Cor(r)==="blocked"&&(n=hs("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=Sor(r)),n===null&&(n=await(async()=>{let s=p1(r);return ITe(s,r.url)&&r.responseTainting==="basic"||s.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await kot(t)):r.mode==="same-origin"?hs('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?hs('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await kot(t)):wTe(p1(r))?(r.responseTainting="cors",await Oot(t)):hs("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=vTe(n,"basic"):r.responseTainting==="cors"?n=vTe(n,"cors"):r.responseTainting==="opaque"?n=vTe(n,"opaque"):xk(!1));let o=n.status===0?n:n.internalResponse;if(o.urlList.length===0&&o.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&o.status===206&&o.rangeRequested&&!r.headers.contains("range",!0)&&(n=o=hs()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||Bot.includes(o.status))&&(o.body=null,t.controller.dump=!0),r.integrity){let s=a(l=>bTe(t,hs(l)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){s(n.error);return}let c=a(l=>{if(!gor(l,r.integrity)){s("integrity mismatch");return}n.body=_Te(l)[0],bTe(t,n)},"processBody");await Dor(n.body,c,s)}else bTe(t,n)}a(Fot,"mainFetch");function kot(t){if(vk(t)&&t.request.redirectCount===0)return Promise.resolve(ore(t));let{request:e}=t,{protocol:r}=p1(e);switch(r){case"about:":return Promise.resolve(hs("about scheme is not supported"));case"blob:":{xTe||(xTe=require("node:buffer").resolveObjectURL);let n=p1(e);if(n.search.length!==0)return Promise.resolve(hs("NetworkError when attempting to fetch resource."));let o=xTe(n.toString());if(e.method!=="GET"||!kor(o))return Promise.resolve(hs("invalid method"));let s=sre(),c=o.size,l=are(`${c}`),u=o.type;if(e.headersList.contains("range",!0)){s.rangeRequested=!0;let d=e.headersList.get("range",!0),p=For(d,!0);if(p==="failure")return Promise.resolve(hs("failed to fetch the data URL"));let{rangeStartValue:m,rangeEndValue:h}=p;if(m===null)m=c-h,h=m+h-1;else{if(m>=c)return Promise.resolve(hs("Range start is greater than the blob's size."));(h===null||h>=c)&&(h=c-1)}let g=o.slice(m,h,u),A=Sot(g);s.body=A[0];let y=are(`${g.size}`),v=Oor(m,h,c);s.status=206,s.statusText="Partial Content",s.headersList.set("content-length",y,!0),s.headersList.set("content-type",u,!0),s.headersList.set("content-range",v,!0)}else{let d=Sot(o);s.statusText="OK",s.body=d[0],s.headersList.set("content-length",l,!0),s.headersList.set("content-type",u,!0)}return Promise.resolve(s)}case"data:":{let n=p1(e),o=Jor(n);if(o==="failure")return Promise.resolve(hs("failed to fetch the data URL"));let s=Xor(o.mimeType);return Promise.resolve(sre({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:s}]],body:_Te(o.body)[0]}))}case"file:":return Promise.resolve(hs("not implemented... yet..."));case"http:":case"https:":return Oot(t).catch(n=>hs(n));default:return Promise.resolve(hs("unknown scheme"))}}a(kot,"schemeFetch");function asr(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}a(asr,"finalizeResponse");function bTe(t,e){let r=t.timingInfo,n=a(()=>{let s=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=s;let l=e.cacheState,u=e.bodyInfo;e.timingAllowPassed||(r=TTe(r),l="");let d=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){d=e.status;let p=Uor(e.headersList);p!=="failure"&&(u.contentType=Zor(p))}t.request.initiatorType!=null&&Mot(r,t.request.url.href,t.request.initiatorType,globalThis,l,u,d)};let c=a(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>c())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let o=e.type==="error"?e:e.internalResponse??e;o.body==null?n():zor(o.body.stream,()=>{n()})}a(bTe,"fetchFinale");async function Oot(t){let e=t.request,r=null,n=null,o=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await Qot(t),e.responseTainting==="cors"&&wor(e,r)==="failure")return hs("cors failure");vor(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&_or(e.origin,e.client,e.destination,n)==="blocked"?hs("blocked"):(Dot.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=hs("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await csr(t,r):xk(!1)),r.timingInfo=o,r)}a(Oot,"httpFetch");function csr(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,o;try{if(o=Eor(n,p1(r).hash),o==null)return e}catch(c){return Promise.resolve(hs(c))}if(!wTe(o))return Promise.resolve(hs("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(hs("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(o.username||o.password)&&!ITe(r,o))return Promise.resolve(hs('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(o.username||o.password))return Promise.resolve(hs('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(hs());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!nsr.includes(r.method)){r.method="GET",r.body=null;for(let c of $or)r.headersList.delete(c)}ITe(p1(r),o)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(xk(r.body.source!=null),r.body=_Te(r.body.source)[0]);let s=t.timingInfo;return s.redirectEndTime=s.postRedirectStartTime=PQ(t.crossOriginIsolatedCapability),s.redirectStartTime===0&&(s.redirectStartTime=s.startTime),r.urlList.push(o),bor(r,n),Fot(t,!0)}a(csr,"httpRedirectFetch");async function Qot(t,e=!1,r=!1){let n=t.request,o=null,s=null,c=null,l=null,u=!1;n.window==="no-window"&&n.redirect==="error"?(o=t,s=n):(s=hor(n),o={...t},o.request=s);let d=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",p=s.body?s.body.length:null,m=null;if(s.body==null&&["POST","PUT"].includes(s.method)&&(m="0"),p!=null&&(m=are(`${p}`)),m!=null&&s.headersList.append("content-length",m,!0),p!=null&&s.keepalive,s.referrer instanceof URL&&s.headersList.append("referer",are(s.referrer.href),!0),xor(s),Tor(s),s.headersList.contains("user-agent",!0)||s.headersList.append("user-agent",isr),s.cache==="default"&&(s.headersList.contains("if-modified-since",!0)||s.headersList.contains("if-none-match",!0)||s.headersList.contains("if-unmodified-since",!0)||s.headersList.contains("if-match",!0)||s.headersList.contains("if-range",!0))&&(s.cache="no-store"),s.cache==="no-cache"&&!s.preventNoCacheCacheControlHeaderModification&&!s.headersList.contains("cache-control",!0)&&s.headersList.append("cache-control","max-age=0",!0),(s.cache==="no-store"||s.cache==="reload")&&(s.headersList.contains("pragma",!0)||s.headersList.append("pragma","no-cache",!0),s.headersList.contains("cache-control",!0)||s.headersList.append("cache-control","no-cache",!0)),s.headersList.contains("range",!0)&&s.headersList.append("accept-encoding","identity",!0),s.headersList.contains("accept-encoding",!0)||(Mor(p1(s))?s.headersList.append("accept-encoding","br, gzip, deflate",!0):s.headersList.append("accept-encoding","gzip, deflate",!0)),s.headersList.delete("host",!0),l==null&&(s.cache="no-store"),s.cache!=="no-store"&&s.cache,c==null){if(s.cache==="only-if-cached")return hs("only if cached");let h=await lsr(o,d,r);!Hor.has(s.method)&&h.status>=200&&h.status<=399,u&&h.status,c==null&&(c=h)}if(c.urlList=[...s.urlList],s.headersList.contains("range",!0)&&(c.rangeRequested=!0),c.requestIncludesCredentials=d,c.status===407)return n.window==="no-window"?hs():vk(t)?ore(t):hs("proxy authentication required");if(c.status===421&&!r&&(n.body==null||n.body.source!=null)){if(vk(t))return ore(t);t.controller.connection.destroy(),c=await Qot(t,e,!0)}return c}a(Qot,"httpNetworkOrCacheFetch");async function lsr(t,e=!1,r=!1){xk(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(A,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(A??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,o=null,s=t.timingInfo;null==null&&(n.cache="no-store");let l=r?"yes":"no";n.mode;let u=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let A=a(async function*(b){vk(t)||(yield b,t.processRequestBodyChunkLength?.(b.byteLength))},"processBodyChunk"),y=a(()=>{vk(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),v=a(b=>{vk(t)||(b.name==="AbortError"?t.controller.abort():t.controller.terminate(b))},"processBodyError");u=async function*(){try{for await(let b of n.body.stream)yield*A(b);y()}catch(b){v(b)}}()}try{let{body:A,status:y,statusText:v,headersList:b,socket:I}=await g({body:u});if(I)o=sre({status:y,statusText:v,headersList:b,socket:I});else{let S=A[Symbol.asyncIterator]();t.controller.next=()=>S.next(),o=sre({status:y,statusText:v,headersList:b})}}catch(A){return A.name==="AbortError"?(t.controller.connection.destroy(),ore(t,A)):hs(A)}let d=a(async()=>{await t.controller.resume()},"pullAlgorithm"),p=a(A=>{vk(t)||t.controller.abort(A)},"cancelAlgorithm"),m=new ReadableStream({async start(A){t.controller.controller=A},async pull(A){await d(A)},async cancel(A){await p(A)},type:"bytes"});o.body={stream:m,source:null,length:null},t.controller.onAborted=h,t.controller.on("terminated",h),t.controller.resume=async()=>{for(;;){let A,y;try{let{done:b,value:I}=await t.controller.next();if(_ot(t))break;A=b?void 0:I}catch(b){t.controller.ended&&!s.encodedBodySize?A=void 0:(A=b,y=!0)}if(A===void 0){Bor(t.controller.controller),asr(t,o);return}if(s.decodedBodySize+=A?.byteLength??0,y){t.controller.terminate(A);return}let v=new Uint8Array(A);if(v.byteLength&&t.controller.controller.enqueue(v),Yor(m)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function h(A){_ot(t)?(o.aborted=!0,cre(m)&&t.controller.controller.error(t.controller.serializedAbortReason)):cre(m)&&t.controller.controller.error(new TypeError("terminated",{cause:Por(A)?A:void 0})),t.controller.connection.destroy()}return a(h,"onAborted"),o;function g({body:A}){let y=p1(n),v=t.controller.dispatcher;return new Promise((b,I)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:v.isMockActive?n.body&&(n.body.source||n.body.stream):A,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(S){let{connection:k}=t.controller;s.finalConnectionTimingInfo=Lor(void 0,s.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?S(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",S),this.abort=k.abort=S),s.finalNetworkRequestStartTime=PQ(t.crossOriginIsolatedCapability)},onResponseStarted(){s.finalNetworkResponseStartTime=PQ(t.crossOriginIsolatedCapability)},onHeaders(S,k,N,F){if(S<200)return;let O=[],Y="",z=new wot;for(let J=0;J<k.length;J+=2)z.append(Rot(k[J]),k[J+1].toString("latin1"),!0);let V=z.get("content-encoding",!0);V&&(O=V.toLowerCase().split(",").map(J=>J.trim())),Y=z.get("location",!0),this.body=new Gor({read:N});let U=[],H=Y&&n.redirect==="follow"&&Dot.has(S);if(O.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!Bot.includes(S)&&!H)for(let J=O.length-1;J>=0;--J){let G=O[J];if(G==="x-gzip"||G==="gzip")U.push(gw.createGunzip({flush:gw.constants.Z_SYNC_FLUSH,finishFlush:gw.constants.Z_SYNC_FLUSH}));else if(G==="deflate")U.push(Qor({flush:gw.constants.Z_SYNC_FLUSH,finishFlush:gw.constants.Z_SYNC_FLUSH}));else if(G==="br")U.push(gw.createBrotliDecompress({flush:gw.constants.BROTLI_OPERATION_FLUSH,finishFlush:gw.constants.BROTLI_OPERATION_FLUSH}));else{U.length=0;break}}let ee=this.onError.bind(this);return b({status:S,statusText:F,headersList:z,body:U.length?Vor(this.body,...U,J=>{J&&this.onError(J)}).on("error",ee):this.body.on("error",ee)}),!0},onData(S){if(t.controller.dump)return;let k=S;return s.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(S){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(S),t.controller.terminate(S),I(S)},onUpgrade(S,k,N){if(S!==101)return;let F=new wot;for(let O=0;O<k.length;O+=2)F.append(Rot(k[O]),k[O+1].toString("latin1"),!0);return b({status:S,statusText:rsr[S],headersList:F,socket:N}),!0}}))}a(g,"dispatch")}a(lsr,"httpNetworkFetch");Uot.exports={fetch:ssr,Fetch:lre,fetching:Lot,finalizeAndReportTiming:Not}});var STe=$((Thi,qot)=>{"use strict";f();qot.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var $ot=$((_hi,Hot)=>{"use strict";f();var{webidl:im}=sd(),ure=Symbol("ProgressEvent state"),RTe=class t extends Event{static{a(this,"ProgressEvent")}constructor(e,r={}){e=im.converters.DOMString(e,"ProgressEvent constructor","type"),r=im.converters.ProgressEventInit(r??{}),super(e,r),this[ure]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return im.brandCheck(this,t),this[ure].lengthComputable}get loaded(){return im.brandCheck(this,t),this[ure].loaded}get total(){return im.brandCheck(this,t),this[ure].total}};im.converters.ProgressEventInit=im.dictionaryConverter([{key:"lengthComputable",converter:im.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"loaded",converter:im.converters["unsigned long long"],defaultValue:a(()=>0,"defaultValue")},{key:"total",converter:im.converters["unsigned long long"],defaultValue:a(()=>0,"defaultValue")},{key:"bubbles",converter:im.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"cancelable",converter:im.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"composed",converter:im.converters.boolean,defaultValue:a(()=>!1,"defaultValue")}]);Hot.exports={ProgressEvent:RTe}});var jot=$((khi,Wot)=>{"use strict";f();function usr(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}a(usr,"getEncoding");Wot.exports={getEncoding:usr}});var Zot=$((Bhi,Xot)=>{"use strict";f();var{kState:NN,kError:kTe,kResult:Got,kAborted:BQ,kLastProgressEventFired:PTe}=STe(),{ProgressEvent:dsr}=$ot(),{getEncoding:Vot}=jot(),{serializeAMimeType:fsr,parseMIMEType:zot}=Fp(),{types:psr}=require("node:util"),{StringDecoder:Kot}=require("string_decoder"),{btoa:Yot}=require("node:buffer"),msr={enumerable:!0,writable:!1,configurable:!1};function hsr(t,e,r,n){if(t[NN]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[NN]="loading",t[Got]=null,t[kTe]=null;let s=e.stream().getReader(),c=[],l=s.read(),u=!0;(async()=>{for(;!t[BQ];)try{let{done:d,value:p}=await l;if(u&&!t[BQ]&&queueMicrotask(()=>{Aw("loadstart",t)}),u=!1,!d&&psr.isUint8Array(p))c.push(p),(t[PTe]===void 0||Date.now()-t[PTe]>=50)&&!t[BQ]&&(t[PTe]=Date.now(),queueMicrotask(()=>{Aw("progress",t)})),l=s.read();else if(d){queueMicrotask(()=>{t[NN]="done";try{let m=gsr(c,r,e.type,n);if(t[BQ])return;t[Got]=m,Aw("load",t)}catch(m){t[kTe]=m,Aw("error",t)}t[NN]!=="loading"&&Aw("loadend",t)});break}}catch(d){if(t[BQ])return;queueMicrotask(()=>{t[NN]="done",t[kTe]=d,Aw("error",t),t[NN]!=="loading"&&Aw("loadend",t)});break}})()}a(hsr,"readOperation");function Aw(t,e){let r=new dsr(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}a(Aw,"fireAProgressEvent");function gsr(t,e,r,n){switch(e){case"DataURL":{let o="data:",s=zot(r||"application/octet-stream");s!=="failure"&&(o+=fsr(s)),o+=";base64,";let c=new Kot("latin1");for(let l of t)o+=Yot(c.write(l));return o+=Yot(c.end()),o}case"Text":{let o="failure";if(n&&(o=Vot(n)),o==="failure"&&r){let s=zot(r);s!=="failure"&&(o=Vot(s.parameters.get("charset")))}return o==="failure"&&(o="UTF-8"),Asr(t,o)}case"ArrayBuffer":return Jot(t).buffer;case"BinaryString":{let o="",s=new Kot("latin1");for(let c of t)o+=s.write(c);return o+=s.end(),o}}}a(gsr,"packageData");function Asr(t,e){let r=Jot(t),n=ysr(r),o=0;n!==null&&(e=n,o=n==="UTF-8"?3:2);let s=r.slice(o);return new TextDecoder(e).decode(s)}a(Asr,"decode");function ysr(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}a(ysr,"BOMSniffing");function Jot(t){let e=t.reduce((n,o)=>n+o.byteLength,0),r=0;return t.reduce((n,o)=>(n.set(o,r),r+=o.byteLength,n),new Uint8Array(e))}a(Jot,"combineByteSequences");Xot.exports={staticPropertyDescriptors:msr,readOperation:hsr,fireAProgressEvent:Aw}});var nst=$((Lhi,rst)=>{"use strict";f();var{staticPropertyDescriptors:MN,readOperation:dre,fireAProgressEvent:est}=Zot(),{kState:Ek,kError:tst,kResult:fre,kEvents:Zo,kAborted:Csr}=STe(),{webidl:Ts}=sd(),{kEnumerableProperty:Up}=Wi(),XA=class t extends EventTarget{static{a(this,"FileReader")}constructor(){super(),this[Ek]="empty",this[fre]=null,this[tst]=null,this[Zo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){Ts.brandCheck(this,t),Ts.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=Ts.converters.Blob(e,{strict:!1}),dre(this,e,"ArrayBuffer")}readAsBinaryString(e){Ts.brandCheck(this,t),Ts.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=Ts.converters.Blob(e,{strict:!1}),dre(this,e,"BinaryString")}readAsText(e,r=void 0){Ts.brandCheck(this,t),Ts.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=Ts.converters.Blob(e,{strict:!1}),r!==void 0&&(r=Ts.converters.DOMString(r,"FileReader.readAsText","encoding")),dre(this,e,"Text",r)}readAsDataURL(e){Ts.brandCheck(this,t),Ts.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=Ts.converters.Blob(e,{strict:!1}),dre(this,e,"DataURL")}abort(){if(this[Ek]==="empty"||this[Ek]==="done"){this[fre]=null;return}this[Ek]==="loading"&&(this[Ek]="done",this[fre]=null),this[Csr]=!0,est("abort",this),this[Ek]!=="loading"&&est("loadend",this)}get readyState(){switch(Ts.brandCheck(this,t),this[Ek]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return Ts.brandCheck(this,t),this[fre]}get error(){return Ts.brandCheck(this,t),this[tst]}get onloadend(){return Ts.brandCheck(this,t),this[Zo].loadend}set onloadend(e){Ts.brandCheck(this,t),this[Zo].loadend&&this.removeEventListener("loadend",this[Zo].loadend),typeof e=="function"?(this[Zo].loadend=e,this.addEventListener("loadend",e)):this[Zo].loadend=null}get onerror(){return Ts.brandCheck(this,t),this[Zo].error}set onerror(e){Ts.brandCheck(this,t),this[Zo].error&&this.removeEventListener("error",this[Zo].error),typeof e=="function"?(this[Zo].error=e,this.addEventListener("error",e)):this[Zo].error=null}get onloadstart(){return Ts.brandCheck(this,t),this[Zo].loadstart}set onloadstart(e){Ts.brandCheck(this,t),this[Zo].loadstart&&this.removeEventListener("loadstart",this[Zo].loadstart),typeof e=="function"?(this[Zo].loadstart=e,this.addEventListener("loadstart",e)):this[Zo].loadstart=null}get onprogress(){return Ts.brandCheck(this,t),this[Zo].progress}set onprogress(e){Ts.brandCheck(this,t),this[Zo].progress&&this.removeEventListener("progress",this[Zo].progress),typeof e=="function"?(this[Zo].progress=e,this.addEventListener("progress",e)):this[Zo].progress=null}get onload(){return Ts.brandCheck(this,t),this[Zo].load}set onload(e){Ts.brandCheck(this,t),this[Zo].load&&this.removeEventListener("load",this[Zo].load),typeof e=="function"?(this[Zo].load=e,this.addEventListener("load",e)):this[Zo].load=null}get onabort(){return Ts.brandCheck(this,t),this[Zo].abort}set onabort(e){Ts.brandCheck(this,t),this[Zo].abort&&this.removeEventListener("abort",this[Zo].abort),typeof e=="function"?(this[Zo].abort=e,this.addEventListener("abort",e)):this[Zo].abort=null}};XA.EMPTY=XA.prototype.EMPTY=0;XA.LOADING=XA.prototype.LOADING=1;XA.DONE=XA.prototype.DONE=2;Object.defineProperties(XA.prototype,{EMPTY:MN,LOADING:MN,DONE:MN,readAsArrayBuffer:Up,readAsBinaryString:Up,readAsText:Up,readAsDataURL:Up,abort:Up,readyState:Up,result:Up,error:Up,onloadstart:Up,onprogress:Up,onload:Up,onabort:Up,onerror:Up,onloadend:Up,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(XA,{EMPTY:MN,LOADING:MN,DONE:MN});rst.exports={FileReader:XA}});var pre=$((Qhi,ist)=>{"use strict";f();ist.exports={kConstruct:Qa().kConstruct}});var ast=$((qhi,sst)=>{"use strict";f();var vsr=require("node:assert"),{URLSerializer:ost}=Fp(),{isValidHeaderName:xsr}=X0();function Esr(t,e,r=!1){let n=ost(t,r),o=ost(e,r);return n===o}a(Esr,"urlEquals");function bsr(t){vsr(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),xsr(r)&&e.push(r);return e}a(bsr,"getFieldValues");sst.exports={urlEquals:Esr,getFieldValues:bsr}});var ust=$((Whi,lst)=>{"use strict";f();var{kConstruct:Isr}=pre(),{urlEquals:Tsr,getFieldValues:DTe}=ast(),{kEnumerableProperty:bk,isDisturbed:wsr}=Wi(),{webidl:yn}=sd(),{Response:_sr,cloneResponse:Ssr,fromInnerResponse:Rsr}=kQ(),{Request:Xx,fromInnerRequest:ksr}=BN(),{kState:ZA}=iw(),{fetching:Psr}=DQ(),{urlIsHttpHttpsScheme:mre,createDeferredPromise:LN,readAllBytes:Dsr}=X0(),BTe=require("node:assert"),hre=class t{static{a(this,"Cache")}#e;constructor(){arguments[0]!==Isr&&yn.illegalConstructor(),yn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){yn.brandCheck(this,t);let n="Cache.match";yn.argumentLengthCheck(arguments,1,n),e=yn.converters.RequestInfo(e,n,"request"),r=yn.converters.CacheQueryOptions(r,n,"options");let o=this.#r(e,r,1);if(o.length!==0)return o[0]}async matchAll(e=void 0,r={}){yn.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=yn.converters.RequestInfo(e,n,"request")),r=yn.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){yn.brandCheck(this,t);let r="Cache.add";yn.argumentLengthCheck(arguments,1,r),e=yn.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){yn.brandCheck(this,t);let r="Cache.addAll";yn.argumentLengthCheck(arguments,1,r);let n=[],o=[];for(let h of e){if(h===void 0)throw yn.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(h=yn.converters.RequestInfo(h),typeof h=="string")continue;let g=h[ZA];if(!mre(g.url)||g.method!=="GET")throw yn.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let s=[];for(let h of e){let g=new Xx(h)[ZA];if(!mre(g.url))throw yn.errors.exception({header:r,message:"Expected http/s scheme."});g.initiator="fetch",g.destination="subresource",o.push(g);let A=LN();s.push(Psr({request:g,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)A.reject(yn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=DTe(y.headersList.get("vary"));for(let b of v)if(b==="*"){A.reject(yn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let I of s)I.abort();return}}},processResponseEndOfBody(y){if(y.aborted){A.reject(new DOMException("aborted","AbortError"));return}A.resolve(y)}})),n.push(A.promise)}let l=await Promise.all(n),u=[],d=0;for(let h of l){let g={type:"put",request:o[d],response:h};u.push(g),d++}let p=LN(),m=null;try{this.#t(u)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve(void 0):p.reject(m)}),p.promise}async put(e,r){yn.brandCheck(this,t);let n="Cache.put";yn.argumentLengthCheck(arguments,2,n),e=yn.converters.RequestInfo(e,n,"request"),r=yn.converters.Response(r,n,"response");let o=null;if(e instanceof Xx?o=e[ZA]:o=new Xx(e)[ZA],!mre(o.url)||o.method!=="GET")throw yn.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let s=r[ZA];if(s.status===206)throw yn.errors.exception({header:n,message:"Got 206 status"});if(s.headersList.contains("vary")){let g=DTe(s.headersList.get("vary"));for(let A of g)if(A==="*")throw yn.errors.exception({header:n,message:"Got * vary field value"})}if(s.body&&(wsr(s.body.stream)||s.body.stream.locked))throw yn.errors.exception({header:n,message:"Response body is locked or disturbed"});let c=Ssr(s),l=LN();if(s.body!=null){let A=s.body.stream.getReader();Dsr(A).then(l.resolve,l.reject)}else l.resolve(void 0);let u=[],d={type:"put",request:o,response:c};u.push(d);let p=await l.promise;c.body!=null&&(c.body.source=p);let m=LN(),h=null;try{this.#t(u)}catch(g){h=g}return queueMicrotask(()=>{h===null?m.resolve():m.reject(h)}),m.promise}async delete(e,r={}){yn.brandCheck(this,t);let n="Cache.delete";yn.argumentLengthCheck(arguments,1,n),e=yn.converters.RequestInfo(e,n,"request"),r=yn.converters.CacheQueryOptions(r,n,"options");let o=null;if(e instanceof Xx){if(o=e[ZA],o.method!=="GET"&&!r.ignoreMethod)return!1}else BTe(typeof e=="string"),o=new Xx(e)[ZA];let s=[],c={type:"delete",request:o,options:r};s.push(c);let l=LN(),u=null,d;try{d=this.#t(s)}catch(p){u=p}return queueMicrotask(()=>{u===null?l.resolve(!!d?.length):l.reject(u)}),l.promise}async keys(e=void 0,r={}){yn.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=yn.converters.RequestInfo(e,n,"request")),r=yn.converters.CacheQueryOptions(r,n,"options");let o=null;if(e!==void 0)if(e instanceof Xx){if(o=e[ZA],o.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(o=new Xx(e)[ZA]);let s=LN(),c=[];if(e===void 0)for(let l of this.#e)c.push(l[0]);else{let l=this.#i(o,r);for(let u of l)c.push(u[0])}return queueMicrotask(()=>{let l=[];for(let u of c){let d=ksr(u,new AbortController().signal,"immutable");l.push(d)}s.resolve(Object.freeze(l))}),s.promise}#t(e){let r=this.#e,n=[...r],o=[],s=[];try{for(let c of e){if(c.type!=="delete"&&c.type!=="put")throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(c.type==="delete"&&c.response!=null)throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(c.request,c.options,o).length)throw new DOMException("???","InvalidStateError");let l;if(c.type==="delete"){if(l=this.#i(c.request,c.options),l.length===0)return[];for(let u of l){let d=r.indexOf(u);BTe(d!==-1),r.splice(d,1)}}else if(c.type==="put"){if(c.response==null)throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let u=c.request;if(!mre(u.url))throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(u.method!=="GET")throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(c.options!=null)throw yn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});l=this.#i(c.request);for(let d of l){let p=r.indexOf(d);BTe(p!==-1),r.splice(p,1)}r.push([c.request,c.response]),o.push([c.request,c.response])}s.push([c.request,c.response])}return s}catch(c){throw this.#e.length=0,this.#e=n,c}}#i(e,r,n){let o=[],s=n??this.#e;for(let c of s){let[l,u]=c;this.#n(e,l,u,r)&&o.push(c)}return o}#n(e,r,n=null,o){let s=new URL(e.url),c=new URL(r.url);if(o?.ignoreSearch&&(c.search="",s.search=""),!Tsr(s,c,!0))return!1;if(n==null||o?.ignoreVary||!n.headersList.contains("vary"))return!0;let l=DTe(n.headersList.get("vary"));for(let u of l){if(u==="*")return!1;let d=r.headersList.get(u),p=e.headersList.get(u);if(d!==p)return!1}return!0}#r(e,r,n=1/0){let o=null;if(e!==void 0)if(e instanceof Xx){if(o=e[ZA],o.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(o=new Xx(e)[ZA]);let s=[];if(e===void 0)for(let l of this.#e)s.push(l[1]);else{let l=this.#i(o,r);for(let u of l)s.push(u[1])}let c=[];for(let l of s){let u=Rsr(l,"immutable");if(c.push(u.clone()),c.length>=n)break}return Object.freeze(c)}};Object.defineProperties(hre.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:bk,matchAll:bk,add:bk,addAll:bk,put:bk,delete:bk,keys:bk});var cst=[{key:"ignoreSearch",converter:yn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:yn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"ignoreVary",converter:yn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")}];yn.converters.CacheQueryOptions=yn.dictionaryConverter(cst);yn.converters.MultiCacheQueryOptions=yn.dictionaryConverter([...cst,{key:"cacheName",converter:yn.converters.DOMString}]);yn.converters.Response=yn.interfaceConverter(_sr);yn.converters["sequence<RequestInfo>"]=yn.sequenceConverter(yn.converters.RequestInfo);lst.exports={Cache:hre}});var fst=$((Vhi,dst)=>{"use strict";f();var{kConstruct:NQ}=pre(),{Cache:gre}=ust(),{webidl:zd}=sd(),{kEnumerableProperty:MQ}=Wi(),Are=class t{static{a(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==NQ&&zd.illegalConstructor(),zd.util.markAsUncloneable(this)}async match(e,r={}){if(zd.brandCheck(this,t),zd.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=zd.converters.RequestInfo(e),r=zd.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new gre(NQ,n).match(e,r)}}else for(let n of this.#e.values()){let s=await new gre(NQ,n).match(e,r);if(s!==void 0)return s}}async has(e){zd.brandCheck(this,t);let r="CacheStorage.has";return zd.argumentLengthCheck(arguments,1,r),e=zd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){zd.brandCheck(this,t);let r="CacheStorage.open";if(zd.argumentLengthCheck(arguments,1,r),e=zd.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let o=this.#e.get(e);return new gre(NQ,o)}let n=[];return this.#e.set(e,n),new gre(NQ,n)}async delete(e){zd.brandCheck(this,t);let r="CacheStorage.delete";return zd.argumentLengthCheck(arguments,1,r),e=zd.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return zd.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(Are.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:MQ,has:MQ,open:MQ,delete:MQ,keys:MQ});dst.exports={CacheStorage:Are}});var mst=$((Yhi,pst)=>{"use strict";f();pst.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var NTe=$((Xhi,Cst)=>{"use strict";f();function Bsr(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}a(Bsr,"isCTLExcludingHtab");function hst(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}a(hst,"validateCookieName");function gst(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}a(gst,"validateCookieValue");function Ast(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}a(Ast,"validateCookiePath");function Nsr(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}a(Nsr,"validateCookieDomain");var Msr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Lsr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yre=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function yst(t){return typeof t=="number"&&(t=new Date(t)),`${Msr[t.getUTCDay()]}, ${yre[t.getUTCDate()]} ${Lsr[t.getUTCMonth()]} ${t.getUTCFullYear()} ${yre[t.getUTCHours()]}:${yre[t.getUTCMinutes()]}:${yre[t.getUTCSeconds()]} GMT`}a(yst,"toIMFDate");function Fsr(t){if(t<0)throw new Error("Invalid cookie max-age")}a(Fsr,"validateCookieMaxAge");function Osr(t){if(t.name.length===0)return null;hst(t.name),gst(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(Fsr(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(Nsr(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(Ast(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${yst(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...o]=r.split("=");e.push(`${n.trim()}=${o.join("=")}`)}return e.join("; ")}a(Osr,"stringify");Cst.exports={isCTLExcludingHtab:Bsr,validateCookieName:hst,validateCookiePath:Ast,validateCookieValue:gst,toIMFDate:yst,stringify:Osr}});var xst=$((tgi,vst)=>{"use strict";f();var{maxNameValuePairSize:Qsr,maxAttributeValueSize:Usr}=mst(),{isCTLExcludingHtab:qsr}=NTe(),{collectASequenceOfCodePointsFast:Cre}=Fp(),Hsr=require("node:assert");function $sr(t){if(qsr(t))return null;let e="",r="",n="",o="";if(t.includes(";")){let s={position:0};e=Cre(";",t,s),r=t.slice(s.position)}else e=t;if(!e.includes("="))o=e;else{let s={position:0};n=Cre("=",e,s),o=e.slice(s.position+1)}return n=n.trim(),o=o.trim(),n.length+o.length>Qsr?null:{name:n,value:o,...FN(r)}}a($sr,"parseSetCookie");function FN(t,e={}){if(t.length===0)return e;Hsr(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=Cre(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",o="";if(r.includes("=")){let c={position:0};n=Cre("=",r,c),o=r.slice(c.position+1)}else n=r;if(n=n.trim(),o=o.trim(),o.length>Usr)return FN(t,e);let s=n.toLowerCase();if(s==="expires"){let c=new Date(o);e.expires=c}else if(s==="max-age"){let c=o.charCodeAt(0);if((c<48||c>57)&&o[0]!=="-"||!/^\d+$/.test(o))return FN(t,e);let l=Number(o);e.maxAge=l}else if(s==="domain"){let c=o;c[0]==="."&&(c=c.slice(1)),c=c.toLowerCase(),e.domain=c}else if(s==="path"){let c="";o.length===0||o[0]!=="/"?c="/":c=o,e.path=c}else if(s==="secure")e.secure=!0;else if(s==="httponly")e.httpOnly=!0;else if(s==="samesite"){let c="Default",l=o.toLowerCase();l.includes("none")&&(c="None"),l.includes("strict")&&(c="Strict"),l.includes("lax")&&(c="Lax"),e.sameSite=c}else e.unparsed??=[],e.unparsed.push(`${n}=${o}`);return FN(t,e)}a(FN,"parseUnparsedAttributes");vst.exports={parseSetCookie:$sr,parseUnparsedAttributes:FN}});var Ist=$((igi,bst)=>{"use strict";f();var{parseSetCookie:Wsr}=xst(),{stringify:jsr}=NTe(),{webidl:ho}=sd(),{Headers:vre}=yk();function Gsr(t){ho.argumentLengthCheck(arguments,1,"getCookies"),ho.brandCheck(t,vre,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[o,...s]=n.split("=");r[o.trim()]=s.join("=")}return r}a(Gsr,"getCookies");function Vsr(t,e,r){ho.brandCheck(t,vre,{strict:!1});let n="deleteCookie";ho.argumentLengthCheck(arguments,2,n),e=ho.converters.DOMString(e,n,"name"),r=ho.converters.DeleteCookieAttributes(r),Est(t,{name:e,value:"",expires:new Date(0),...r})}a(Vsr,"deleteCookie");function zsr(t){ho.argumentLengthCheck(arguments,1,"getSetCookies"),ho.brandCheck(t,vre,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>Wsr(r)):[]}a(zsr,"getSetCookies");function Est(t,e){ho.argumentLengthCheck(arguments,2,"setCookie"),ho.brandCheck(t,vre,{strict:!1}),e=ho.converters.Cookie(e);let r=jsr(e);r&&t.append("Set-Cookie",r)}a(Est,"setCookie");ho.converters.DeleteCookieAttributes=ho.dictionaryConverter([{converter:ho.nullableConverter(ho.converters.DOMString),key:"path",defaultValue:a(()=>null,"defaultValue")},{converter:ho.nullableConverter(ho.converters.DOMString),key:"domain",defaultValue:a(()=>null,"defaultValue")}]);ho.converters.Cookie=ho.dictionaryConverter([{converter:ho.converters.DOMString,key:"name"},{converter:ho.converters.DOMString,key:"value"},{converter:ho.nullableConverter(t=>typeof t=="number"?ho.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:a(()=>null,"defaultValue")},{converter:ho.nullableConverter(ho.converters["long long"]),key:"maxAge",defaultValue:a(()=>null,"defaultValue")},{converter:ho.nullableConverter(ho.converters.DOMString),key:"domain",defaultValue:a(()=>null,"defaultValue")},{converter:ho.nullableConverter(ho.converters.DOMString),key:"path",defaultValue:a(()=>null,"defaultValue")},{converter:ho.nullableConverter(ho.converters.boolean),key:"secure",defaultValue:a(()=>null,"defaultValue")},{converter:ho.nullableConverter(ho.converters.boolean),key:"httpOnly",defaultValue:a(()=>null,"defaultValue")},{converter:ho.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:ho.sequenceConverter(ho.converters.DOMString),key:"unparsed",defaultValue:a(()=>new Array(0),"defaultValue")}]);bst.exports={getCookies:Gsr,deleteCookie:Vsr,getSetCookies:zsr,setCookie:Est}});var QN=$((agi,wst)=>{"use strict";f();var{webidl:hn}=sd(),{kEnumerableProperty:qp}=Wi(),{kConstruct:Tst}=Qa(),{MessagePort:Ksr}=require("node:worker_threads"),ON=class t extends Event{static{a(this,"MessageEvent")}#e;constructor(e,r={}){if(e===Tst){super(arguments[1],arguments[2]),hn.util.markAsUncloneable(this);return}let n="MessageEvent constructor";hn.argumentLengthCheck(arguments,1,n),e=hn.converters.DOMString(e,n,"type"),r=hn.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,hn.util.markAsUncloneable(this)}get data(){return hn.brandCheck(this,t),this.#e.data}get origin(){return hn.brandCheck(this,t),this.#e.origin}get lastEventId(){return hn.brandCheck(this,t),this.#e.lastEventId}get source(){return hn.brandCheck(this,t),this.#e.source}get ports(){return hn.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,o=null,s="",c="",l=null,u=[]){return hn.brandCheck(this,t),hn.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:o,origin:s,lastEventId:c,source:l,ports:u})}static createFastMessageEvent(e,r){let n=new t(Tst,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:Ysr}=ON;delete ON.createFastMessageEvent;var xre=class t extends Event{static{a(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";hn.argumentLengthCheck(arguments,1,n),e=hn.converters.DOMString(e,n,"type"),r=hn.converters.CloseEventInit(r),super(e,r),this.#e=r,hn.util.markAsUncloneable(this)}get wasClean(){return hn.brandCheck(this,t),this.#e.wasClean}get code(){return hn.brandCheck(this,t),this.#e.code}get reason(){return hn.brandCheck(this,t),this.#e.reason}},Ere=class t extends Event{static{a(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";hn.argumentLengthCheck(arguments,1,n),super(e,r),hn.util.markAsUncloneable(this),e=hn.converters.DOMString(e,n,"type"),r=hn.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return hn.brandCheck(this,t),this.#e.message}get filename(){return hn.brandCheck(this,t),this.#e.filename}get lineno(){return hn.brandCheck(this,t),this.#e.lineno}get colno(){return hn.brandCheck(this,t),this.#e.colno}get error(){return hn.brandCheck(this,t),this.#e.error}};Object.defineProperties(ON.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:qp,origin:qp,lastEventId:qp,source:qp,ports:qp,initMessageEvent:qp});Object.defineProperties(xre.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:qp,code:qp,wasClean:qp});Object.defineProperties(Ere.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:qp,filename:qp,lineno:qp,colno:qp,error:qp});hn.converters.MessagePort=hn.interfaceConverter(Ksr);hn.converters["sequence<MessagePort>"]=hn.sequenceConverter(hn.converters.MessagePort);var MTe=[{key:"bubbles",converter:hn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"cancelable",converter:hn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"composed",converter:hn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")}];hn.converters.MessageEventInit=hn.dictionaryConverter([...MTe,{key:"data",converter:hn.converters.any,defaultValue:a(()=>null,"defaultValue")},{key:"origin",converter:hn.converters.USVString,defaultValue:a(()=>"","defaultValue")},{key:"lastEventId",converter:hn.converters.DOMString,defaultValue:a(()=>"","defaultValue")},{key:"source",converter:hn.nullableConverter(hn.converters.MessagePort),defaultValue:a(()=>null,"defaultValue")},{key:"ports",converter:hn.converters["sequence<MessagePort>"],defaultValue:a(()=>new Array(0),"defaultValue")}]);hn.converters.CloseEventInit=hn.dictionaryConverter([...MTe,{key:"wasClean",converter:hn.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"code",converter:hn.converters["unsigned short"],defaultValue:a(()=>0,"defaultValue")},{key:"reason",converter:hn.converters.USVString,defaultValue:a(()=>"","defaultValue")}]);hn.converters.ErrorEventInit=hn.dictionaryConverter([...MTe,{key:"message",converter:hn.converters.DOMString,defaultValue:a(()=>"","defaultValue")},{key:"filename",converter:hn.converters.USVString,defaultValue:a(()=>"","defaultValue")},{key:"lineno",converter:hn.converters["unsigned long"],defaultValue:a(()=>0,"defaultValue")},{key:"colno",converter:hn.converters["unsigned long"],defaultValue:a(()=>0,"defaultValue")},{key:"error",converter:hn.converters.any}]);wst.exports={MessageEvent:ON,CloseEvent:xre,ErrorEvent:Ere,createFastMessageEvent:Ysr}});var Ik=$((ugi,_st)=>{"use strict";f();var Jsr="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",Xsr={enumerable:!0,writable:!1,configurable:!1},Zsr={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},ear={NOT_SENT:0,PROCESSING:1,SENT:2},tar={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},rar=2**16-1,nar={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},iar=Buffer.allocUnsafe(0),oar={string:1,typedArray:2,arrayBuffer:3,blob:4};_st.exports={uid:Jsr,sentCloseFrameState:ear,staticPropertyDescriptors:Xsr,states:Zsr,opcodes:tar,maxUnsigned16Bit:rar,parserStates:nar,emptyBuffer:iar,sendHints:oar}});var LQ=$((fgi,Sst)=>{"use strict";f();Sst.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var QQ=$((mgi,Fst)=>{"use strict";f();var{kReadyState:FQ,kController:sar,kResponse:aar,kBinaryType:car,kWebSocketURL:lar}=LQ(),{states:OQ,opcodes:yw}=Ik(),{ErrorEvent:uar,createFastMessageEvent:dar}=QN(),{isUtf8:far}=require("node:buffer"),{collectASequenceOfCodePointsFast:par,removeHTTPWhitespace:Rst}=Fp();function mar(t){return t[FQ]===OQ.CONNECTING}a(mar,"isConnecting");function har(t){return t[FQ]===OQ.OPEN}a(har,"isEstablished");function gar(t){return t[FQ]===OQ.CLOSING}a(gar,"isClosing");function Aar(t){return t[FQ]===OQ.CLOSED}a(Aar,"isClosed");function LTe(t,e,r=(o,s)=>new Event(o,s),n={}){let o=r(t,n);e.dispatchEvent(o)}a(LTe,"fireEvent");function yar(t,e,r){if(t[FQ]!==OQ.OPEN)return;let n;if(e===yw.TEXT)try{n=Lst(r)}catch{Pst(t,"Received invalid UTF-8 in text frame.");return}else e===yw.BINARY&&(t[car]==="blob"?n=new Blob([r]):n=Car(r));LTe("message",t,dar,{origin:t[lar].origin,data:n})}a(yar,"websocketMessageReceived");function Car(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}a(Car,"toArrayBuffer");function xar(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}a(xar,"isValidSubprotocol");function Ear(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}a(Ear,"isValidStatusCode");function Pst(t,e){let{[sar]:r,[aar]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&LTe("error",t,(o,s)=>new uar(o,s),{error:new Error(e),message:e})}a(Pst,"failWebsocketConnection");function Dst(t){return t===yw.CLOSE||t===yw.PING||t===yw.PONG}a(Dst,"isControlFrame");function Bst(t){return t===yw.CONTINUATION}a(Bst,"isContinuationFrame");function Nst(t){return t===yw.TEXT||t===yw.BINARY}a(Nst,"isTextBinaryFrame");function bar(t){return Nst(t)||Bst(t)||Dst(t)}a(bar,"isValidOpcode");function Iar(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=par(";",t,e),[o,s=""]=n.split("=");r.set(Rst(o,!0,!1),Rst(s,!1,!0)),e.position++}return r}a(Iar,"parseExtensions");function Tar(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}a(Tar,"isValidClientWindowBits");var Mst=typeof process.versions.icu=="string",kst=Mst?new TextDecoder("utf-8",{fatal:!0}):void 0,Lst=Mst?kst.decode.bind(kst):function(t){if(far(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};Fst.exports={isConnecting:mar,isEstablished:har,isClosing:gar,isClosed:Aar,fireEvent:LTe,isValidSubprotocol:xar,isValidStatusCode:Ear,failWebsocketConnection:Pst,websocketMessageReceived:yar,utf8Decode:Lst,isControlFrame:Dst,isContinuationFrame:Bst,isTextBinaryFrame:Nst,isValidOpcode:bar,parseExtensions:Iar,isValidClientWindowBits:Tar}});var Ire=$((Agi,Ost)=>{"use strict";f();var{maxUnsigned16Bit:war}=Ik(),bre=16386,FTe,UQ=null,UN=bre;try{FTe=require("node:crypto")}catch{FTe={randomFillSync:a(function(e,r,n){for(let o=0;o<e.length;++o)e[o]=Math.random()*255|0;return e},"randomFillSync")}}function _ar(){return UN===bre&&(UN=0,FTe.randomFillSync(UQ??=Buffer.allocUnsafe(bre),0,bre)),[UQ[UN++],UQ[UN++],UQ[UN++],UQ[UN++]]}a(_ar,"generateMask");var OTe=class{static{a(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=_ar(),o=r?.byteLength??0,s=o,c=6;o>war?(c+=8,s=127):o>125&&(c+=2,s=126);let l=Buffer.allocUnsafe(o+c);l[0]=l[1]=0,l[0]|=128,l[0]=(l[0]&240)+e;l[c-4]=n[0],l[c-3]=n[1],l[c-2]=n[2],l[c-1]=n[3],l[1]=s,s===126?l.writeUInt16BE(o,2):s===127&&(l[2]=l[3]=0,l.writeUIntBE(o,4,6)),l[1]|=128;for(let u=0;u<o;++u)l[c+u]=r[u]^n[u&3];return l}};Ost.exports={WebsocketFrameSend:OTe}});var UTe=$((vgi,jst)=>{"use strict";f();var{uid:Sar,states:qQ,sentCloseFrameState:Tre,emptyBuffer:Rar,opcodes:kar}=Ik(),{kReadyState:HQ,kSentClose:wre,kByteParser:Ust,kReceivedClose:Qst,kResponse:qst}=LQ(),{fireEvent:Par,failWebsocketConnection:Cw,isClosing:Dar,isClosed:Bar,isEstablished:Nar,parseExtensions:Mar}=QQ(),{channels:qN}=eN(),{CloseEvent:Lar}=QN(),{makeRequest:Far}=BN(),{fetching:Oar}=DQ(),{Headers:Qar,getHeadersList:Uar}=yk(),{getDecodeSplit:qar}=X0(),{WebsocketFrameSend:Har}=Ire(),QTe;try{QTe=require("node:crypto")}catch{}function $ar(t,e,r,n,o,s){let c=t;c.protocol=t.protocol==="ws:"?"http:":"https:";let l=Far({urlList:[c],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(s.headers){let m=Uar(new Qar(s.headers));l.headersList=m}let u=QTe.randomBytes(16).toString("base64");l.headersList.append("sec-websocket-key",u),l.headersList.append("sec-websocket-version","13");for(let m of e)l.headersList.append("sec-websocket-protocol",m);return l.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),Oar({request:l,useParallelQueue:!0,dispatcher:s.dispatcher,processResponse(m){if(m.type==="error"||m.status!==101){Cw(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!m.headersList.get("Sec-WebSocket-Protocol")){Cw(n,"Server did not respond with sent protocols.");return}if(m.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Cw(n,'Server did not set Upgrade header to "websocket".');return}if(m.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Cw(n,'Server did not set Connection header to "upgrade".');return}let h=m.headersList.get("Sec-WebSocket-Accept"),g=QTe.createHash("sha1").update(u+Sar).digest("base64");if(h!==g){Cw(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let A=m.headersList.get("Sec-WebSocket-Extensions"),y;if(A!==null&&(y=Mar(A),!y.has("permessage-deflate"))){Cw(n,"Sec-WebSocket-Extensions header does not match.");return}let v=m.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!qar("sec-websocket-protocol",l.headersList).includes(v)){Cw(n,"Protocol was not set in the opening handshake.");return}m.socket.on("data",Hst),m.socket.on("close",$st),m.socket.on("error",Wst),qN.open.hasSubscribers&&qN.open.publish({address:m.socket.address(),protocol:v,extensions:A}),o(m,y)}})}a($ar,"establishWebSocketConnection");function War(t,e,r,n){if(!(Dar(t)||Bar(t)))if(!Nar(t))Cw(t,"Connection was closed before it was established."),t[HQ]=qQ.CLOSING;else if(t[wre]===Tre.NOT_SENT){t[wre]=Tre.PROCESSING;let o=new Har;e!==void 0&&r===void 0?(o.frameData=Buffer.allocUnsafe(2),o.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(o.frameData=Buffer.allocUnsafe(2+n),o.frameData.writeUInt16BE(e,0),o.frameData.write(r,2,"utf-8")):o.frameData=Rar,t[qst].socket.write(o.createFrame(kar.CLOSE)),t[wre]=Tre.SENT,t[HQ]=qQ.CLOSING}else t[HQ]=qQ.CLOSING}a(War,"closeWebSocketConnection");function Hst(t){this.ws[Ust].write(t)||this.pause()}a(Hst,"onSocketData");function $st(){let{ws:t}=this,{[qst]:e}=t;e.socket.off("data",Hst),e.socket.off("close",$st),e.socket.off("error",Wst);let r=t[wre]===Tre.SENT&&t[Qst],n=1005,o="",s=t[Ust].closingInfo;s&&!s.error?(n=s.code??1005,o=s.reason):t[Qst]||(n=1006),t[HQ]=qQ.CLOSED,Par("close",t,(c,l)=>new Lar(c,l),{wasClean:r,code:n,reason:o}),qN.close.hasSubscribers&&qN.close.publish({websocket:t,code:n,reason:o})}a($st,"onSocketClose");function Wst(t){let{ws:e}=this;e[HQ]=qQ.CLOSING,qN.socketError.hasSubscribers&&qN.socketError.publish(t),this.destroy()}a(Wst,"onSocketError");jst.exports={establishWebSocketConnection:$ar,closeWebSocketConnection:War}});var Vst=$((bgi,Gst)=>{"use strict";f();var{createInflateRaw:jar,Z_DEFAULT_WINDOWBITS:Gar}=require("node:zlib"),{isValidClientWindowBits:Var}=QQ(),zar=Buffer.from([0,0,255,255]),_re=Symbol("kBuffer"),Sre=Symbol("kLength"),qTe=class{static{a(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let o=Gar;if(this.#t.serverMaxWindowBits){if(!Var(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}o=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=jar({windowBits:o}),this.#e[_re]=[],this.#e[Sre]=0,this.#e.on("data",s=>{this.#e[_re].push(s),this.#e[Sre]+=s.length}),this.#e.on("error",s=>{this.#e=null,n(s)})}this.#e.write(e),r&&this.#e.write(zar),this.#e.flush(()=>{let o=Buffer.concat(this.#e[_re],this.#e[Sre]);this.#e[_re].length=0,this.#e[Sre]=0,n(null,o)})}};Gst.exports={PerMessageDeflate:qTe}});var iat=$((wgi,nat)=>{"use strict";f();var{Writable:Kar}=require("node:stream"),Yar=require("node:assert"),{parserStates:Hp,opcodes:HN,states:Jar,emptyBuffer:zst,sentCloseFrameState:Kst}=Ik(),{kReadyState:Xar,kSentClose:Yst,kResponse:Jst,kReceivedClose:Xst}=LQ(),{channels:Rre}=eN(),{isValidStatusCode:Zar,isValidOpcode:ecr,failWebsocketConnection:Gh,websocketMessageReceived:Zst,utf8Decode:tcr,isControlFrame:eat,isTextBinaryFrame:HTe,isContinuationFrame:rcr}=QQ(),{WebsocketFrameSend:tat}=Ire(),{closeWebSocketConnection:rat}=UTe(),{PerMessageDeflate:ncr}=Vst(),$Te=class extends Kar{static{a(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=Hp.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new ncr(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===Hp.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,o=r[0]&15,s=(r[1]&128)===128,c=!n&&o!==HN.CONTINUATION,l=r[1]&127,u=r[0]&64,d=r[0]&32,p=r[0]&16;if(!ecr(o))return Gh(this.ws,"Invalid opcode received"),e();if(s)return Gh(this.ws,"Frame cannot be masked"),e();if(u!==0&&!this.#s.has("permessage-deflate")){Gh(this.ws,"Expected RSV1 to be clear.");return}if(d!==0||p!==0){Gh(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(c&&!HTe(o)){Gh(this.ws,"Invalid frame type was fragmented.");return}if(HTe(o)&&this.#o.length>0){Gh(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&c){Gh(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((l>125||c)&&eat(o)){Gh(this.ws,"Control frame either too large or fragmented");return}if(rcr(o)&&this.#o.length===0&&!this.#r.compressed){Gh(this.ws,"Unexpected continuation frame");return}l<=125?(this.#r.payloadLength=l,this.#n=Hp.READ_DATA):l===126?this.#n=Hp.PAYLOADLENGTH_16:l===127&&(this.#n=Hp.PAYLOADLENGTH_64),HTe(o)&&(this.#r.binaryType=o,this.#r.compressed=u!==0),this.#r.opcode=o,this.#r.masked=s,this.#r.fin=n,this.#r.fragmented=c}else if(this.#n===Hp.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=Hp.READ_DATA}else if(this.#n===Hp.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){Gh(this.ws,"Received payload length > 2^31 bytes.");return}let o=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+o,this.#n=Hp.READ_DATA}else if(this.#n===Hp.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(eat(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=Hp.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,o)=>{if(n){rat(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(o),!this.#r.fin){this.#n=Hp.INFO,this.#i=!0,this.run(e);return}Zst(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=Hp.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);Zst(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=Hp.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return zst;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let o=this.#e[0],{length:s}=o;if(s+n===e){r.set(this.#e.shift(),n);break}else if(s+n>e){r.set(o.subarray(0,e-n),n),this.#e[0]=o.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=o.length}return this.#t-=e,r}parseCloseBody(e){Yar(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!Zar(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=tcr(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===HN.CLOSE){if(n===1)return Gh(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:o,reason:s}=this.#r.closeInfo;return rat(this.ws,o,s,s.length),Gh(this.ws,s),!1}if(this.ws[Yst]!==Kst.SENT){let o=zst;this.#r.closeInfo.code&&(o=Buffer.allocUnsafe(2),o.writeUInt16BE(this.#r.closeInfo.code,0));let s=new tat(o);this.ws[Jst].socket.write(s.createFrame(HN.CLOSE),c=>{c||(this.ws[Yst]=Kst.SENT)})}return this.ws[Xar]=Jar.CLOSING,this.ws[Xst]=!0,!1}else if(r===HN.PING){if(!this.ws[Xst]){let o=new tat(e);this.ws[Jst].socket.write(o.createFrame(HN.PONG)),Rre.ping.hasSubscribers&&Rre.ping.publish({payload:e})}}else r===HN.PONG&&Rre.pong.hasSubscribers&&Rre.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};nat.exports={ByteParser:$Te}});var lat=$((Rgi,cat)=>{"use strict";f();var{WebsocketFrameSend:icr}=Ire(),{opcodes:oat,sendHints:$N}=Ik(),ocr=tIe(),sat=Buffer[Symbol.species],WTe=class{static{a(this,"SendQueue")}#e=new ocr;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==$N.blob){let s=aat(e,n);if(!this.#t)this.#i.write(s,r);else{let c={promise:null,callback:r,frame:s};this.#e.push(c)}return}let o={promise:e.arrayBuffer().then(s=>{o.promise=null,o.frame=aat(s,n)}),callback:r,frame:null};this.#e.push(o),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function aat(t,e){return new icr(scr(t,e)).createFrame(e===$N.string?oat.TEXT:oat.BINARY)}a(aat,"createFrame");function scr(t,e){switch(e){case $N.string:return Buffer.from(t);case $N.arrayBuffer:case $N.blob:return new sat(t);case $N.typedArray:return new sat(t.buffer,t.byteOffset,t.byteLength)}}a(scr,"toBuffer");cat.exports={SendQueue:WTe}});var yat=$((Dgi,Aat)=>{"use strict";f();var{webidl:ti}=sd(),{URLSerializer:acr}=Fp(),{environmentSettingsObject:uat}=X0(),{staticPropertyDescriptors:vw,states:$Q,sentCloseFrameState:ccr,sendHints:kre}=Ik(),{kWebSocketURL:dat,kReadyState:jTe,kController:lcr,kBinaryType:Pre,kResponse:fat,kSentClose:ucr,kByteParser:dcr}=LQ(),{isConnecting:fcr,isEstablished:pcr,isClosing:mcr,isValidSubprotocol:hcr,fireEvent:pat}=QQ(),{establishWebSocketConnection:gcr,closeWebSocketConnection:mat}=UTe(),{ByteParser:Acr}=iat(),{kEnumerableProperty:Vh,isBlobLike:hat}=Wi(),{getGlobalDispatcher:ycr}=jte(),{types:gat}=require("node:util"),{ErrorEvent:Ccr,CloseEvent:vcr}=QN(),{SendQueue:xcr}=lat(),om=class t extends EventTarget{static{a(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),ti.util.markAsUncloneable(this);let n="WebSocket constructor";ti.argumentLengthCheck(arguments,1,n);let o=ti.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=ti.converters.USVString(e,n,"url"),r=o.protocols;let s=uat.settingsObject.baseUrl,c;try{c=new URL(e,s)}catch(u){throw new DOMException(u,"SyntaxError")}if(c.protocol==="http:"?c.protocol="ws:":c.protocol==="https:"&&(c.protocol="wss:"),c.protocol!=="ws:"&&c.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${c.protocol}`,"SyntaxError");if(c.hash||c.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(u=>u.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(u=>hcr(u)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[dat]=new URL(c.href);let l=uat.settingsObject;this[lcr]=gcr(c,r,l,this,(u,d)=>this.#o(u,d),o),this[jTe]=t.CONNECTING,this[ucr]=ccr.NOT_SENT,this[Pre]="blob"}close(e=void 0,r=void 0){ti.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=ti.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=ti.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let o=0;if(r!==void 0&&(o=Buffer.byteLength(r),o>123))throw new DOMException(`Reason must be less than 123 bytes; received ${o}`,"SyntaxError");mat(this,e,r,o)}send(e){ti.brandCheck(this,t);let r="WebSocket.send";if(ti.argumentLengthCheck(arguments,1,r),e=ti.converters.WebSocketSendData(e,r,"data"),fcr(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!pcr(this)||mcr(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},kre.string)}else gat.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},kre.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},kre.typedArray)):hat(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},kre.blob))}get readyState(){return ti.brandCheck(this,t),this[jTe]}get bufferedAmount(){return ti.brandCheck(this,t),this.#t}get url(){return ti.brandCheck(this,t),acr(this[dat])}get extensions(){return ti.brandCheck(this,t),this.#n}get protocol(){return ti.brandCheck(this,t),this.#i}get onopen(){return ti.brandCheck(this,t),this.#e.open}set onopen(e){ti.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return ti.brandCheck(this,t),this.#e.error}set onerror(e){ti.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return ti.brandCheck(this,t),this.#e.close}set onclose(e){ti.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return ti.brandCheck(this,t),this.#e.message}set onmessage(e){ti.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return ti.brandCheck(this,t),this[Pre]}set binaryType(e){ti.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[Pre]="blob":this[Pre]=e}#o(e,r){this[fat]=e;let n=new Acr(this,r);n.on("drain",Ecr),n.on("error",bcr.bind(this)),e.socket.ws=this,this[dcr]=n,this.#r=new xcr(e.socket),this[jTe]=$Q.OPEN;let o=e.headersList.get("sec-websocket-extensions");o!==null&&(this.#n=o);let s=e.headersList.get("sec-websocket-protocol");s!==null&&(this.#i=s),pat("open",this)}};om.CONNECTING=om.prototype.CONNECTING=$Q.CONNECTING;om.OPEN=om.prototype.OPEN=$Q.OPEN;om.CLOSING=om.prototype.CLOSING=$Q.CLOSING;om.CLOSED=om.prototype.CLOSED=$Q.CLOSED;Object.defineProperties(om.prototype,{CONNECTING:vw,OPEN:vw,CLOSING:vw,CLOSED:vw,url:Vh,readyState:Vh,bufferedAmount:Vh,onopen:Vh,onerror:Vh,onclose:Vh,close:Vh,onmessage:Vh,binaryType:Vh,send:Vh,extensions:Vh,protocol:Vh,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(om,{CONNECTING:vw,OPEN:vw,CLOSING:vw,CLOSED:vw});ti.converters["sequence<DOMString>"]=ti.sequenceConverter(ti.converters.DOMString);ti.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return ti.util.Type(t)==="Object"&&Symbol.iterator in t?ti.converters["sequence<DOMString>"](t):ti.converters.DOMString(t,e,r)};ti.converters.WebSocketInit=ti.dictionaryConverter([{key:"protocols",converter:ti.converters["DOMString or sequence<DOMString>"],defaultValue:a(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:ti.converters.any,defaultValue:a(()=>ycr(),"defaultValue")},{key:"headers",converter:ti.nullableConverter(ti.converters.HeadersInit)}]);ti.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return ti.util.Type(t)==="Object"&&!(Symbol.iterator in t)?ti.converters.WebSocketInit(t):{protocols:ti.converters["DOMString or sequence<DOMString>"](t)}};ti.converters.WebSocketSendData=function(t){if(ti.util.Type(t)==="Object"){if(hat(t))return ti.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||gat.isArrayBuffer(t))return ti.converters.BufferSource(t)}return ti.converters.USVString(t)};function Ecr(){this.ws[fat].socket.resume()}a(Ecr,"onParserDrain");function bcr(t){let e,r;t instanceof vcr?(e=t.reason,r=t.code):e=t.message,pat("error",this,()=>new Ccr("error",{error:t,message:e})),mat(this,r)}a(bcr,"onParserError");Aat.exports={WebSocket:om}});var GTe=$((Mgi,Cat)=>{"use strict";f();function Icr(t){return t.indexOf("\0")===-1}a(Icr,"isValidLastEventId");function Tcr(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}a(Tcr,"isASCIINumber");function wcr(t){return new Promise(e=>{setTimeout(e,t).unref()})}a(wcr,"delay");Cat.exports={isValidLastEventId:Icr,isASCIINumber:Tcr,delay:wcr}});var bat=$((Ogi,Eat)=>{"use strict";f();var{Transform:_cr}=require("node:stream"),{isASCIINumber:vat,isValidLastEventId:xat}=GTe(),Zx=[239,187,191],VTe=10,Dre=13,Scr=58,Rcr=32,zTe=class extends _cr{static{a(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===Zx[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===Zx[0]&&this.buffer[1]===Zx[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===Zx[0]&&this.buffer[1]===Zx[1]&&this.buffer[2]===Zx[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===Zx[0]&&this.buffer[1]===Zx[1]&&this.buffer[2]===Zx[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===VTe){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===VTe||this.buffer[this.pos]===Dre){this.buffer[this.pos]===Dre&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===VTe||this.buffer[this.pos]===Dre){this.buffer[this.pos]===Dre&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(Scr);if(n===0)return;let o="",s="";if(n!==-1){o=e.subarray(0,n).toString("utf8");let c=n+1;e[c]===Rcr&&++c,s=e.subarray(c).toString("utf8")}else o=e.toString("utf8"),s="";switch(o){case"data":r[o]===void 0?r[o]=s:r[o]+=`
${s}`;break;case"retry":vat(s)&&(r[o]=s);break;case"id":xat(s)&&(r[o]=s);break;case"event":s.length>0&&(r[o]=s);break}}processEvent(e){e.retry&&vat(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&xat(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};Eat.exports={EventSourceStream:zTe}});var Pat=$((qgi,kat)=>{"use strict";f();var{pipeline:kcr}=require("node:stream"),{fetching:Pcr}=DQ(),{makeRequest:Dcr}=BN(),{webidl:eE}=sd(),{EventSourceStream:Bcr}=bat(),{parseMIMEType:Ncr}=Fp(),{createFastMessageEvent:Mcr}=QN(),{isNetworkError:Iat}=kQ(),{delay:Lcr}=GTe(),{kEnumerableProperty:Tk}=Wi(),{environmentSettingsObject:Tat}=X0(),wat=!1,_at=3e3,WQ=0,Sat=1,jQ=2,Fcr="anonymous",Ocr="use-credentials",WN=class t extends EventTarget{static{a(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=WQ;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),eE.util.markAsUncloneable(this);let n="EventSource constructor";eE.argumentLengthCheck(arguments,1,n),wat||(wat=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=eE.converters.USVString(e,n,"url"),r=eE.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:_at};let o=Tat,s;try{s=new URL(e,o.settingsObject.baseUrl),this.#a.origin=s.origin}catch(u){throw new DOMException(u,"SyntaxError")}this.#t=s.href;let c=Fcr;r.withCredentials&&(c=Ocr,this.#i=!0);let l={redirect:"follow",keepalive:!0,mode:"cors",credentials:c==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};l.client=Tat.settingsObject,l.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],l.cache="no-store",l.initiator="other",l.urlList=[new URL(this.#t)],this.#r=Dcr(l),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===jQ)return;this.#n=WQ;let e={request:this.#r,dispatcher:this.#s},r=a(n=>{Iat(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(Iat(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let o=n.headersList.get("content-type",!0),s=o!==null?Ncr(o):"failure",c=s!=="failure"&&s.essence==="text/event-stream";if(n.status!==200||c===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=Sat,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let l=new Bcr({eventSourceSettings:this.#a,push:a(u=>{this.dispatchEvent(Mcr(u.type,u.options))},"push")});kcr(n.body.stream,l,u=>{u?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=Pcr(e)}async#l(){this.#n!==jQ&&(this.#n=WQ,this.dispatchEvent(new Event("error")),await Lcr(this.#a.reconnectionTime),this.#n===WQ&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){eE.brandCheck(this,t),this.#n!==jQ&&(this.#n=jQ,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},Rat={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:WQ,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:Sat,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:jQ,writable:!1}};Object.defineProperties(WN,Rat);Object.defineProperties(WN.prototype,Rat);Object.defineProperties(WN.prototype,{close:Tk,onerror:Tk,onmessage:Tk,onopen:Tk,readyState:Tk,url:Tk,withCredentials:Tk});eE.converters.EventSourceInitDict=eE.dictionaryConverter([{key:"withCredentials",converter:eE.converters.boolean,defaultValue:a(()=>!1,"defaultValue")},{key:"dispatcher",converter:eE.converters.any}]);kat.exports={EventSource:WN,defaultReconnectionTime:_at}});var Mat=$((Wgi,Wn)=>{"use strict";f();var Qcr=hQ(),Dat=V7(),Ucr=vN(),qcr=Qrt(),Hcr=xN(),$cr=CIe(),Wcr=rnt(),jcr=cnt(),Bat=Xo(),Nre=Wi(),{InvalidArgumentError:Bre}=Bat,jN=znt(),Gcr=K7(),Vcr=eTe(),zcr=Rit(),Kcr=nTe(),Ycr=qIe(),Jcr=Mte(),{getGlobalDispatcher:Nat,setGlobalDispatcher:Xcr}=jte(),Zcr=Gte(),elr=bte(),tlr=Ite();Object.assign(Dat.prototype,jN);Wn.exports.Dispatcher=Dat;Wn.exports.Client=Qcr;Wn.exports.Pool=Ucr;Wn.exports.BalancedPool=qcr;Wn.exports.Agent=Hcr;Wn.exports.ProxyAgent=$cr;Wn.exports.EnvHttpProxyAgent=Wcr;Wn.exports.RetryAgent=jcr;Wn.exports.RetryHandler=Jcr;Wn.exports.DecoratorHandler=Zcr;Wn.exports.RedirectHandler=elr;Wn.exports.createRedirectInterceptor=tlr;Wn.exports.interceptors={redirect:Lit(),retry:Oit(),dump:Uit(),dns:$it()};Wn.exports.buildConnector=Gcr;Wn.exports.errors=Bat;Wn.exports.util={parseHeaders:Nre.parseHeaders,headerNameToString:Nre.headerNameToString};function GQ(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new Bre("invalid url");if(r!=null&&typeof r!="object")throw new Bre("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new Bre("invalid opts.path");let c=r.path;r.path.startsWith("/")||(c=`/${c}`),e=new URL(Nre.parseOrigin(e).origin+c)}else r||(r=typeof e=="object"?e:{}),e=Nre.parseURL(e);let{agent:o,dispatcher:s=Nat()}=r;if(o)throw new Bre("unsupported opts.agent. Did you mean opts.client?");return t.call(s,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}a(GQ,"makeDispatcher");Wn.exports.setGlobalDispatcher=Xcr;Wn.exports.getGlobalDispatcher=Nat;var rlr=DQ().fetch;Wn.exports.fetch=a(async function(e,r=void 0){try{return await rlr(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Wn.exports.Headers=yk().Headers;Wn.exports.Response=kQ().Response;Wn.exports.Request=BN().Request;Wn.exports.FormData=rQ().FormData;Wn.exports.File=globalThis.File??require("node:buffer").File;Wn.exports.FileReader=nst().FileReader;var{setGlobalOrigin:nlr,getGlobalOrigin:ilr}=vbe();Wn.exports.setGlobalOrigin=nlr;Wn.exports.getGlobalOrigin=ilr;var{CacheStorage:olr}=fst(),{kConstruct:slr}=pre();Wn.exports.caches=new olr(slr);var{deleteCookie:alr,getCookies:clr,getSetCookies:llr,setCookie:ulr}=Ist();Wn.exports.deleteCookie=alr;Wn.exports.getCookies=clr;Wn.exports.getSetCookies=llr;Wn.exports.setCookie=ulr;var{parseMIMEType:dlr,serializeAMimeType:flr}=Fp();Wn.exports.parseMIMEType=dlr;Wn.exports.serializeAMimeType=flr;var{CloseEvent:plr,ErrorEvent:mlr,MessageEvent:hlr}=QN();Wn.exports.WebSocket=yat().WebSocket;Wn.exports.CloseEvent=plr;Wn.exports.ErrorEvent=mlr;Wn.exports.MessageEvent=hlr;Wn.exports.request=GQ(jN.request);Wn.exports.stream=GQ(jN.stream);Wn.exports.pipeline=GQ(jN.pipeline);Wn.exports.connect=GQ(jN.connect);Wn.exports.upgrade=GQ(jN.upgrade);Wn.exports.MockClient=Vcr;Wn.exports.MockPool=Kcr;Wn.exports.MockAgent=zcr;Wn.exports.mockErrors=Ycr;var{EventSource:glr}=Pat();Wn.exports.EventSource=glr});var ki=$((Vgi,Lat)=>{f();Lat.exports={options:{usePureJavaScript:!1}}});var Qat=$((Kgi,Oat)=>{f();var KTe={};Oat.exports=KTe;var Fat={};KTe.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=Alr(t,e);else{var o=0,s=e.length,c=e.charAt(0),l=[0];for(o=0;o<t.length;++o){for(var u=0,d=t[o];u<l.length;++u)d+=l[u]<<8,l[u]=d%s,d=d/s|0;for(;d>0;)l.push(d%s),d=d/s|0}for(o=0;t[o]===0&&o<t.length-1;++o)n+=c;for(o=l.length-1;o>=0;--o)n+=e[l[o]]}if(r){var p=new RegExp(".{1,"+r+"}","g");n=n.match(p).join(`\r
`)}return n};KTe.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Fat[e];if(!r){r=Fat[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var o=e.length,s=e.charAt(0),c=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var u=0,d=l;u<c.length;++u)d+=c[u]*o,c[u]=d&255,d>>=8;for(;d>0;)c.push(d&255),d>>=8}for(var p=0;t[p]===s&&p<t.length-1;++p)c.push(0);return typeof Buffer<"u"?Buffer.from(c.reverse()):new Uint8Array(c.reverse())};function Alr(t,e){var r=0,n=e.length,o=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var c=0,l=t.at(r);c<s.length;++c)l+=s[c]<<8,s[c]=l%n,l=l/n|0;for(;l>0;)s.push(l%n),l=l/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=o;for(r=s.length-1;r>=0;--r)u+=e[s[r]];return u}a(Alr,"_encodeWithByteBuffer")});var Wo=$((Xgi,$at)=>{f();var Uat=ki(),qat=Qat(),Le=$at.exports=Uat.util=Uat.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Le.nextTick=process.nextTick,typeof setImmediate=="function"?Le.setImmediate=setImmediate:Le.setImmediate=Le.nextTick;return}if(typeof setImmediate=="function"){Le.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Le.nextTick=function(l){return setImmediate(l)};return}if(Le.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var d=e.slice();e.length=0,d.forEach(function(p){p()})}};var c=l;a(l,"handler");var t="forge.setImmediate",e=[];Le.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,o=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(d){d()})}).observe(o,{attributes:!0});var s=Le.setImmediate;Le.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),s(u)):(e.push(u),e.length===1&&o.setAttribute("a",n=!n))}}Le.nextTick=Le.setImmediate})();Le.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Le.globalScope=function(){return Le.isNodejs?global:typeof self>"u"?window:self}();Le.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Le.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Le.isArrayBufferView=function(t){return t&&Le.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function VQ(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}a(VQ,"_checkBitsParam");Le.ByteBuffer=YTe;function YTe(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Le.isArrayBuffer(t)||Le.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof YTe||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}a(YTe,"ByteStringBuffer");Le.ByteStringBuffer=YTe;var ylr=4096;Le.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>ylr&&(this.data.substr(0,1),this._constructedStringLength=0)};Le.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Le.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Le.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Le.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Le.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Le.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Le.encodeUtf8(t))};Le.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Le.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Le.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Le.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Le.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Le.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Le.ByteStringBuffer.prototype.putInt=function(t,e){VQ(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Le.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Le.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Le.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Le.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Le.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Le.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Le.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Le.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Le.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Le.ByteStringBuffer.prototype.getInt=function(t){VQ(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Le.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Le.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Le.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Le.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Le.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Le.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Le.ByteStringBuffer.prototype.copy=function(){var t=Le.createBuffer(this.data);return t.read=this.read,t};Le.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Le.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Le.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Le.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Le.ByteStringBuffer.prototype.toString=function(){return Le.decodeUtf8(this.bytes())};function Clr(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Le.isArrayBuffer(t),n=Le.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}a(Clr,"DataBuffer");Le.DataBuffer=Clr;Le.DataBuffer.prototype.length=function(){return this.write-this.read};Le.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Le.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Le.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Le.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Le.DataBuffer.prototype.putBytes=function(t,e){if(Le.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var o=new Uint8Array(this.data.buffer,this.write);return o.set(r),this.write+=n,this}if(Le.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Le.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Le.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var o=new Uint8Array(t.data.byteLength,this.write);return o.set(r),this.write+=r.byteLength,this}if(t instanceof Le.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=Le.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=Le.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=Le.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=Le.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=Le.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Le.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Le.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Le.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Le.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Le.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Le.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Le.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Le.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Le.DataBuffer.prototype.putInt=function(t,e){VQ(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Le.DataBuffer.prototype.putSignedInt=function(t,e){return VQ(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Le.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Le.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Le.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Le.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Le.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Le.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Le.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Le.DataBuffer.prototype.getInt=function(t){VQ(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Le.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Le.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Le.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Le.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Le.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Le.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Le.DataBuffer.prototype.copy=function(){return new Le.DataBuffer(this)};Le.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Le.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Le.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Le.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Le.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Le.binary.raw.encode(e);if(t==="hex")return Le.binary.hex.encode(e);if(t==="base64")return Le.binary.base64.encode(e);if(t==="utf8")return Le.text.utf8.decode(e);if(t==="utf16")return Le.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Le.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Le.encodeUtf8(t)),new Le.ByteBuffer(t)};Le.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Le.xorBytes=function(t,e,r){for(var n="",o="",s="",c=0,l=0;r>0;--r,++c)o=t.charCodeAt(c)^e.charCodeAt(c),l>=10&&(n+=s,s="",l=0),s+=String.fromCharCode(o),++l;return n+=s,n};Le.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Le.bytesToHex=function(t){return Le.createBuffer(t).toHex()};Le.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var xw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ew=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Hat="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Le.encode64=function(t,e){for(var r="",n="",o,s,c,l=0;l<t.length;)o=t.charCodeAt(l++),s=t.charCodeAt(l++),c=t.charCodeAt(l++),r+=xw.charAt(o>>2),r+=xw.charAt((o&3)<<4|s>>4),isNaN(s)?r+="==":(r+=xw.charAt((s&15)<<2|c>>6),r+=isNaN(c)?"=":xw.charAt(c&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Le.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,o,s,c=0;c<t.length;)r=Ew[t.charCodeAt(c++)-43],n=Ew[t.charCodeAt(c++)-43],o=Ew[t.charCodeAt(c++)-43],s=Ew[t.charCodeAt(c++)-43],e+=String.fromCharCode(r<<2|n>>4),o!==64&&(e+=String.fromCharCode((n&15)<<4|o>>2),s!==64&&(e+=String.fromCharCode((o&3)<<6|s)));return e};Le.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Le.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Le.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:qat.encode,decode:qat.decode}};Le.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Le.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var o=r,s=0;s<t.length;++s)n[o++]=t.charCodeAt(s);return e?o-r:n};Le.binary.hex.encode=Le.bytesToHex;Le.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var o=0,s=r;for(t.length&1&&(o=1,n[s++]=parseInt(t[0],16));o<t.length;o+=2)n[s++]=parseInt(t.substr(o,2),16);return e?s-r:n};Le.binary.base64.encode=function(t,e){for(var r="",n="",o,s,c,l=0;l<t.byteLength;)o=t[l++],s=t[l++],c=t[l++],r+=xw.charAt(o>>2),r+=xw.charAt((o&3)<<4|s>>4),isNaN(s)?r+="==":(r+=xw.charAt((s&15)<<2|c>>6),r+=isNaN(c)?"=":xw.charAt(c&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Le.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var o,s,c,l,u=0,d=r;u<t.length;)o=Ew[t.charCodeAt(u++)-43],s=Ew[t.charCodeAt(u++)-43],c=Ew[t.charCodeAt(u++)-43],l=Ew[t.charCodeAt(u++)-43],n[d++]=o<<2|s>>4,c!==64&&(n[d++]=(s&15)<<4|c>>2,l!==64&&(n[d++]=(c&3)<<6|l));return e?d-r:n.subarray(0,d)};Le.binary.base58.encode=function(t,e){return Le.binary.baseN.encode(t,Hat,e)};Le.binary.base58.decode=function(t,e){return Le.binary.baseN.decode(t,Hat,e)};Le.text={utf8:{},utf16:{}};Le.text.utf8.encode=function(t,e,r){t=Le.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var o=r,s=0;s<t.length;++s)n[o++]=t.charCodeAt(s);return e?o-r:n};Le.text.utf8.decode=function(t){return Le.decodeUtf8(String.fromCharCode.apply(null,t))};Le.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var o=new Uint16Array(n.buffer);r=r||0;for(var s=r,c=r,l=0;l<t.length;++l)o[c++]=t.charCodeAt(l),s+=2;return e?s-r:n};Le.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Le.deflate=function(t,e,r){if(e=Le.decode64(t.deflate(Le.encode64(e)).rval),r){var n=2,o=e.charCodeAt(1);o&32&&(n=6),e=e.substring(n,e.length-4)}return e};Le.inflate=function(t,e,r){var n=t.inflate(Le.encode64(e)).rval;return n===null?null:Le.decode64(n)};var JTe=a(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Le.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var o=new Error(n.error.message);throw o.id=n.error.id,o.name=n.error.name,o}},"_setStorageObject"),XTe=a(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Le.decode64(r))),r},"_getStorageObject"),vlr=a(function(t,e,r,n){var o=XTe(t,e);o===null&&(o={}),o[r]=n,JTe(t,e,o)},"_setItem"),xlr=a(function(t,e,r){var n=XTe(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),Elr=a(function(t,e,r){var n=XTe(t,e);if(n!==null&&r in n){delete n[r];var o=!0;for(var s in n){o=!1;break}o&&(n=null),JTe(t,e,n)}},"_removeItem"),blr=a(function(t,e){JTe(t,e,null)},"_clearItems"),Mre=a(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var o,s=!1,c=null;for(var l in r){o=r[l];try{if(o==="flash"||o==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),s=o==="flash"}(o==="web"||o==="both")&&(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(u){c=u}if(s)break}if(!s)throw c;return n},"_callStorageFunction");Le.setItem=function(t,e,r,n,o){Mre(vlr,arguments,o)};Le.getItem=function(t,e,r,n){return Mre(xlr,arguments,n)};Le.removeItem=function(t,e,r,n){Mre(Elr,arguments,n)};Le.clearItems=function(t,e,r){Mre(blr,arguments,r)};Le.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Le.format=function(t){for(var e=/%./g,r,n,o=0,s=[],c=0;r=e.exec(t);){n=t.substring(c,e.lastIndex-2),n.length>0&&s.push(n),c=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":o<arguments.length?s.push(arguments[o+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+l+"?>")}}return s.push(t.substring(c)),s.join("")};Le.formatNumber=function(t,e,r,n){var o=t,s=isNaN(e=Math.abs(e))?2:e,c=r===void 0?",":r,l=n===void 0?".":n,u=o<0?"-":"",d=parseInt(o=Math.abs(+o||0).toFixed(s),10)+"",p=d.length>3?d.length%3:0;return u+(p?d.substr(0,p)+l:"")+d.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+l)+(s?c+Math.abs(o-d).toFixed(s).slice(2):"")};Le.formatSize=function(t){return t>=1073741824?t=Le.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Le.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Le.formatNumber(t/1024,0)+" KiB":t=Le.formatNumber(t,0)+" bytes",t};Le.bytesFromIP=function(t){return t.indexOf(".")!==-1?Le.bytesFromIPv4(t):t.indexOf(":")!==-1?Le.bytesFromIPv6(t):null};Le.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Le.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Le.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(c){return c.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Le.createBuffer(),o=0;o<8;++o){if(!t[o]||t[o].length===0){n.fillWithByte(0,r),r=0;continue}var s=Le.hexToBytes(t[o]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};Le.bytesToIP=function(t){return t.length===4?Le.bytesToIPv4(t):t.length===16?Le.bytesToIPv6(t):null};Le.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Le.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,o=0;o<t.length;o+=2){for(var s=Le.bytesToHex(t[o]+t[o+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var c=r[r.length-1],l=e.length;!c||l!==c.end+1?r.push({start:l,end:l}):(c.end=l,c.end-c.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};Le.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Le&&!t.update)return e(null,Le.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Le.cores=navigator.hardwareConcurrency,e(null,Le.cores);if(typeof Worker>"u")return Le.cores=1,e(null,Le.cores);if(typeof Blob>"u")return Le.cores=2,e(null,Le.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(c){for(var l=Date.now(),u=l+4;Date.now()<u;);self.postMessage({st:l,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(c,l,u){if(l===0){var d=Math.floor(c.reduce(function(p,m){return p+m},0)/c.length);return Le.cores=Math.max(1,d),URL.revokeObjectURL(r),e(null,Le.cores)}o(u,function(p,m){c.push(s(u,m)),n(c,l-1,u)})}a(n,"sample");function o(c,l){for(var u=[],d=[],p=0;p<c;++p){var m=new Worker(r);m.addEventListener("message",function(h){if(d.push(h.data),d.length===c){for(var g=0;g<c;++g)u[g].terminate();l(null,d)}}),u.push(m)}for(var p=0;p<c;++p)u[p].postMessage(p)}a(o,"map");function s(c,l){for(var u=[],d=0;d<c;++d)for(var p=l[d],m=u[d]=[],h=0;h<c;++h)if(d!==h){var g=l[h];(p.st>g.st&&p.st<g.et||g.st>p.st&&g.st<p.et)&&m.push(h)}return u.reduce(function(A,y){return Math.max(A,y.length)},0)}a(s,"reduce")}});var Lre=$((tAi,Wat)=>{f();var vu=ki();Wo();Wat.exports=vu.cipher=vu.cipher||{};vu.cipher.algorithms=vu.cipher.algorithms||{};vu.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=vu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new vu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};vu.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=vu.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new vu.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};vu.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),vu.cipher.algorithms[t]=e};vu.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in vu.cipher.algorithms?vu.cipher.algorithms[t]:null};var ZTe=vu.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};ZTe.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=vu.util.createBuffer(),this.output=t.output||vu.util.createBuffer(),this.mode.start(e)};ZTe.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};ZTe.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var twe=$((nAi,jat)=>{f();var xu=ki();Wo();xu.cipher=xu.cipher||{};var Xi=jat.exports=xu.cipher.modes=xu.cipher.modes||{};Xi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Xi.ecb.prototype.start=function(t){};Xi.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Xi.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Xi.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Xi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Xi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Xi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=Fre(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Xi.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Xi.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Xi.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Xi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Xi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=xu.util.createBuffer(),this._partialBytes=0};Xi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Fre(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Xi.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32()^this._outBlock[o],e.putInt32(this._inBlock[o]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(s>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Xi.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32(),e.putInt32(this._inBlock[o]^this._outBlock[o]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(s>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Xi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=xu.util.createBuffer(),this._partialBytes=0};Xi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Fre(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Xi.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(s>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Xi.ofb.prototype.decrypt=Xi.ofb.prototype.encrypt;Xi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=xu.util.createBuffer(),this._partialBytes=0};Xi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Fre(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Xi.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Ore(this._inBlock)};Xi.ctr.prototype.decrypt=Xi.ctr.prototype.encrypt;Xi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=xu.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Xi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=xu.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=xu.util.createBuffer(t.additionalData):r=xu.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=xu.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(ewe(n*8)))}this._inBlock=this._j0.slice(0),Ore(this._inBlock),this._partialBytes=0,r=xu.util.createBuffer(r),this._aDataLength=ewe(r.length()*8);var o=r.length()%this.blockSize;for(o&&r.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Xi.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(s<=0||r){if(r){var c=n%this.blockSize;this._cipherLength+=c,this._partialOutput.truncate(this.blockSize-c)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Ore(this._inBlock)};Xi.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Ore(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Xi.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=xu.util.createBuffer();var n=this._aDataLength.concat(ewe(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var o=[];this.cipher.encrypt(this._j0,o);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^o[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Xi.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),o=0;o<128;++o){var s=t[o/32|0]&1<<31-o%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Xi.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Xi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,o=t[n]>>>(7-r%8)*4&15,s=this._m[r][o];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};Xi.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Xi.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,o=16*r,s=new Array(o),c=0;c<o;++c){var l=[0,0,0,0],u=c/n|0,d=(n-1-c%n)*e;l[u]=1<<e-1<<d,s[c]=this.generateSubHashTable(this.multiply(l,t),e)}return s};Xi.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,o=new Array(r);o[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(o[2*s],o[s]=[]),s>>=1;for(s=2;s<n;){for(var c=1;c<s;++c){var l=o[s],u=o[c];o[s+c]=[l[0]^u[0],l[1]^u[1],l[2]^u[2],l[3]^u[3]]}s*=2}for(o[0]=[0,0,0,0],s=n+1;s<r;++s){var d=o[s^n];o[s]=[t[0]^d[0],t[1]^d[1],t[2]^d[2],t[3]^d[3]]}return o};function Fre(t,e){if(typeof t=="string"&&(t=xu.util.createBuffer(t)),xu.util.isArray(t)&&t.length>4){var r=t;t=xu.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!xu.util.isArray(t)){for(var o=[],s=e/4,n=0;n<s;++n)o.push(t.getInt32());t=o}return t}a(Fre,"transformIV");function Ore(t){t[t.length-1]=t[t.length-1]+1&4294967295}a(Ore,"inc32");function ewe(t){return[t/4294967296|0,t&4294967295]}a(ewe,"from64To32")});var bw=$((sAi,Kat)=>{f();var Gs=ki();Lre();twe();Wo();Kat.exports=Gs.aes=Gs.aes||{};Gs.aes.startEncrypting=function(t,e,r,n){var o=Qre({key:t,output:r,decrypt:!1,mode:n});return o.start(e),o};Gs.aes.createEncryptionCipher=function(t,e){return Qre({key:t,output:null,decrypt:!1,mode:e})};Gs.aes.startDecrypting=function(t,e,r,n){var o=Qre({key:t,output:r,decrypt:!0,mode:n});return o.start(e),o};Gs.aes.createDecryptionCipher=function(t,e){return Qre({key:t,output:null,decrypt:!0,mode:e})};Gs.aes.Algorithm=function(t,e){iwe||Vat();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:a(function(n,o){return nwe(r._w,n,o,!1)},"encrypt"),decrypt:a(function(n,o){return nwe(r._w,n,o,!0)},"decrypt")}}),r._init=!1};Gs.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Gs.util.createBuffer(e);else if(Gs.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Gs.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Gs.util.isArray(e)){r=e,e=[];var o=r.length();if(o===16||o===24||o===32){o=o>>>2;for(var n=0;n<o;++n)e.push(r.getInt32())}}if(!Gs.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,c=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=zat(e,t.decrypt&&!c),this._init=!0}};Gs.aes._expandKey=function(t,e){return iwe||Vat(),zat(t,e)};Gs.aes._updateBlock=nwe;VN("AES-ECB",Gs.cipher.modes.ecb);VN("AES-CBC",Gs.cipher.modes.cbc);VN("AES-CFB",Gs.cipher.modes.cfb);VN("AES-OFB",Gs.cipher.modes.ofb);VN("AES-CTR",Gs.cipher.modes.ctr);VN("AES-GCM",Gs.cipher.modes.gcm);function VN(t,e){var r=a(function(){return new Gs.aes.Algorithm(t,e)},"factory");Gs.cipher.registerAlgorithm(t,r)}a(VN,"registerAlgorithm");var iwe=!1,GN=4,Of,rwe,Gat,wk,ey;function Vat(){iwe=!0,Gat=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Of=new Array(256),rwe=new Array(256),wk=new Array(4),ey=new Array(4);for(var e=0;e<4;++e)wk[e]=new Array(256),ey[e]=new Array(256);for(var r=0,n=0,o,s,c,l,u,d,p,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,Of[r]=l,rwe[l]=r,u=t[l],o=t[r],s=t[o],c=t[s],d=u<<24^l<<16^l<<8^(l^u),p=(o^s^c)<<24^(r^c)<<16^(r^s^c)<<8^(r^o^c);for(var m=0;m<4;++m)wk[m][r]=d,ey[m][l]=p,d=d<<24|d>>>8,p=p<<24|p>>>8;r===0?r=n=1:(r=o^t[t[t[o^c]]],n^=t[t[n]])}}a(Vat,"initialize");function zat(t,e){for(var r=t.slice(0),n,o=1,s=r.length,c=s+6+1,l=GN*c,u=s;u<l;++u)n=r[u-1],u%s===0?(n=Of[n>>>16&255]<<24^Of[n>>>8&255]<<16^Of[n&255]<<8^Of[n>>>24]^Gat[o]<<24,o++):s>6&&u%s===4&&(n=Of[n>>>24]<<24^Of[n>>>16&255]<<16^Of[n>>>8&255]<<8^Of[n&255]),r[u]=r[u-s]^n;if(e){var d,p=ey[0],m=ey[1],h=ey[2],g=ey[3],A=r.slice(0);l=r.length;for(var u=0,y=l-GN;u<l;u+=GN,y-=GN)if(u===0||u===l-GN)A[u]=r[y],A[u+1]=r[y+3],A[u+2]=r[y+2],A[u+3]=r[y+1];else for(var v=0;v<GN;++v)d=r[y+v],A[u+(3&-v)]=p[Of[d>>>24]]^m[Of[d>>>16&255]]^h[Of[d>>>8&255]]^g[Of[d&255]];r=A}return r}a(zat,"_expandKey");function nwe(t,e,r,n){var o=t.length/4-1,s,c,l,u,d;n?(s=ey[0],c=ey[1],l=ey[2],u=ey[3],d=rwe):(s=wk[0],c=wk[1],l=wk[2],u=wk[3],d=Of);var p,m,h,g,A,y,v;p=e[0]^t[0],m=e[n?3:1]^t[1],h=e[2]^t[2],g=e[n?1:3]^t[3];for(var b=3,I=1;I<o;++I)A=s[p>>>24]^c[m>>>16&255]^l[h>>>8&255]^u[g&255]^t[++b],y=s[m>>>24]^c[h>>>16&255]^l[g>>>8&255]^u[p&255]^t[++b],v=s[h>>>24]^c[g>>>16&255]^l[p>>>8&255]^u[m&255]^t[++b],g=s[g>>>24]^c[p>>>16&255]^l[m>>>8&255]^u[h&255]^t[++b],p=A,m=y,h=v;r[0]=d[p>>>24]<<24^d[m>>>16&255]<<16^d[h>>>8&255]<<8^d[g&255]^t[++b],r[n?3:1]=d[m>>>24]<<24^d[h>>>16&255]<<16^d[g>>>8&255]<<8^d[p&255]^t[++b],r[2]=d[h>>>24]<<24^d[g>>>16&255]<<16^d[p>>>8&255]<<8^d[m&255]^t[++b],r[n?1:3]=d[g>>>24]<<24^d[p>>>16&255]<<16^d[m>>>8&255]<<8^d[h&255]^t[++b]}a(nwe,"_updateBlock");function Qre(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Gs.cipher.createDecipher(r,t.key):n=Gs.cipher.createCipher(r,t.key);var o=n.start;return n.start=function(s,c){var l=null;c instanceof Gs.util.ByteBuffer&&(l=c,c={}),c=c||{},c.output=l,c.iv=s,o.call(n,c)},n}a(Qre,"_createCipher")});var Iw=$((lAi,Yat)=>{f();var zQ=ki();zQ.pki=zQ.pki||{};var owe=Yat.exports=zQ.pki.oids=zQ.oids=zQ.oids||{};function Ft(t,e){owe[t]=e,owe[e]=t}a(Ft,"_IN");function os(t,e){owe[t]=e}a(os,"_I_");Ft("1.2.840.113549.1.1.1","rsaEncryption");Ft("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ft("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ft("1.2.840.113549.1.1.7","RSAES-OAEP");Ft("1.2.840.113549.1.1.8","mgf1");Ft("1.2.840.113549.1.1.9","pSpecified");Ft("1.2.840.113549.1.1.10","RSASSA-PSS");Ft("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ft("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ft("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ft("1.3.101.112","EdDSA25519");Ft("1.2.840.10040.4.3","dsa-with-sha1");Ft("1.3.14.3.2.7","desCBC");Ft("1.3.14.3.2.26","sha1");Ft("1.3.14.3.2.29","sha1WithRSASignature");Ft("2.16.840.1.101.3.4.2.1","sha256");Ft("2.16.840.1.101.3.4.2.2","sha384");Ft("2.16.840.1.101.3.4.2.3","sha512");Ft("2.16.840.1.101.3.4.2.4","sha224");Ft("2.16.840.1.101.3.4.2.5","sha512-224");Ft("2.16.840.1.101.3.4.2.6","sha512-256");Ft("1.2.840.113549.2.2","md2");Ft("1.2.840.113549.2.5","md5");Ft("1.2.840.113549.1.7.1","data");Ft("1.2.840.113549.1.7.2","signedData");Ft("1.2.840.113549.1.7.3","envelopedData");Ft("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ft("1.2.840.113549.1.7.5","digestedData");Ft("1.2.840.113549.1.7.6","encryptedData");Ft("1.2.840.113549.1.9.1","emailAddress");Ft("1.2.840.113549.1.9.2","unstructuredName");Ft("1.2.840.113549.1.9.3","contentType");Ft("1.2.840.113549.1.9.4","messageDigest");Ft("1.2.840.113549.1.9.5","signingTime");Ft("1.2.840.113549.1.9.6","counterSignature");Ft("1.2.840.113549.1.9.7","challengePassword");Ft("1.2.840.113549.1.9.8","unstructuredAddress");Ft("1.2.840.113549.1.9.14","extensionRequest");Ft("1.2.840.113549.1.9.20","friendlyName");Ft("1.2.840.113549.1.9.21","localKeyId");Ft("1.2.840.113549.1.9.22.1","x509Certificate");Ft("1.2.840.113549.1.12.10.1.1","keyBag");Ft("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ft("1.2.840.113549.1.12.10.1.3","certBag");Ft("1.2.840.113549.1.12.10.1.4","crlBag");Ft("1.2.840.113549.1.12.10.1.5","secretBag");Ft("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ft("1.2.840.113549.1.5.13","pkcs5PBES2");Ft("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ft("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ft("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ft("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ft("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ft("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ft("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ft("1.2.840.113549.2.7","hmacWithSHA1");Ft("1.2.840.113549.2.8","hmacWithSHA224");Ft("1.2.840.113549.2.9","hmacWithSHA256");Ft("1.2.840.113549.2.10","hmacWithSHA384");Ft("1.2.840.113549.2.11","hmacWithSHA512");Ft("1.2.840.113549.3.7","des-EDE3-CBC");Ft("2.16.840.1.101.3.4.1.2","aes128-CBC");Ft("2.16.840.1.101.3.4.1.22","aes192-CBC");Ft("2.16.840.1.101.3.4.1.42","aes256-CBC");Ft("2.5.4.3","commonName");Ft("2.5.4.4","surname");Ft("2.5.4.5","serialNumber");Ft("2.5.4.6","countryName");Ft("2.5.4.7","localityName");Ft("2.5.4.8","stateOrProvinceName");Ft("2.5.4.9","streetAddress");Ft("2.5.4.10","organizationName");Ft("2.5.4.11","organizationalUnitName");Ft("2.5.4.12","title");Ft("2.5.4.13","description");Ft("2.5.4.15","businessCategory");Ft("2.5.4.17","postalCode");Ft("2.5.4.42","givenName");Ft("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ft("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ft("2.16.840.1.113730.1.1","nsCertType");Ft("2.16.840.1.113730.1.13","nsComment");os("2.5.29.1","authorityKeyIdentifier");os("2.5.29.2","keyAttributes");os("2.5.29.3","certificatePolicies");os("2.5.29.4","keyUsageRestriction");os("2.5.29.5","policyMapping");os("2.5.29.6","subtreesConstraint");os("2.5.29.7","subjectAltName");os("2.5.29.8","issuerAltName");os("2.5.29.9","subjectDirectoryAttributes");os("2.5.29.10","basicConstraints");os("2.5.29.11","nameConstraints");os("2.5.29.12","policyConstraints");os("2.5.29.13","basicConstraints");Ft("2.5.29.14","subjectKeyIdentifier");Ft("2.5.29.15","keyUsage");os("2.5.29.16","privateKeyUsagePeriod");Ft("2.5.29.17","subjectAltName");Ft("2.5.29.18","issuerAltName");Ft("2.5.29.19","basicConstraints");os("2.5.29.20","cRLNumber");os("2.5.29.21","cRLReason");os("2.5.29.22","expirationDate");os("2.5.29.23","instructionCode");os("2.5.29.24","invalidityDate");os("2.5.29.25","cRLDistributionPoints");os("2.5.29.26","issuingDistributionPoint");os("2.5.29.27","deltaCRLIndicator");os("2.5.29.28","issuingDistributionPoint");os("2.5.29.29","certificateIssuer");os("2.5.29.30","nameConstraints");Ft("2.5.29.31","cRLDistributionPoints");Ft("2.5.29.32","certificatePolicies");os("2.5.29.33","policyMappings");os("2.5.29.34","policyConstraints");Ft("2.5.29.35","authorityKeyIdentifier");os("2.5.29.36","policyConstraints");Ft("2.5.29.37","extKeyUsage");os("2.5.29.46","freshestCRL");os("2.5.29.54","inhibitAnyPolicy");Ft("1.3.6.1.4.1.11129.2.4.2","timestampList");Ft("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ft("1.3.6.1.5.5.7.3.1","serverAuth");Ft("1.3.6.1.5.5.7.3.2","clientAuth");Ft("1.3.6.1.5.5.7.3.3","codeSigning");Ft("1.3.6.1.5.5.7.3.4","emailProtection");Ft("1.3.6.1.5.5.7.3.8","timeStamping")});var ty=$((fAi,Xat)=>{f();var pa=ki();Wo();Iw();var yr=Xat.exports=pa.asn1=pa.asn1||{};yr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};yr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};yr.create=function(t,e,r,n,o){if(pa.util.isArray(n)){for(var s=[],c=0;c<n.length;++c)n[c]!==void 0&&s.push(n[c]);n=s}var l={tagClass:t,type:e,constructed:r,composed:r||pa.util.isArray(n),value:n};return o&&"bitStringContents"in o&&(l.bitStringContents=o.bitStringContents,l.original=yr.copy(l)),l};yr.copy=function(t,e){var r;if(pa.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(yr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:yr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};yr.equals=function(t,e,r){if(pa.util.isArray(t)){if(!pa.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!yr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var o=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&yr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(o=o&&t.bitStringContents===e.bitStringContents),o};yr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function KQ(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}a(KQ,"_checkBufferLength");var Ilr=a(function(t,e){var r=t.getByte();if(e--,r!==128){var n,o=r&128;if(!o)n=r;else{var s=r&127;KQ(t,e,s),n=t.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");yr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=pa.util.createBuffer(t));var r=t.length(),n=Ure(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=r,o.remaining=t.length(),o}return n};function Ure(t,e,r,n){var o;KQ(t,e,2);var s=t.getByte();e--;var c=s&192,l=s&31;o=t.length();var u=Ilr(t,e);if(e-=o-t.length(),u!==void 0&&u>e){if(n.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=t.length(),d.remaining=e,d.requested=u,d}u=e}var p,m,h=(s&32)===32;if(h)if(p=[],u===void 0)for(;;){if(KQ(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}o=t.length(),p.push(Ure(t,e,r+1,n)),e-=o-t.length()}else for(;u>0;)o=t.length(),p.push(Ure(t,u,r+1,n)),e-=o-t.length(),u-=o-t.length();if(p===void 0&&c===yr.Class.UNIVERSAL&&l===yr.Type.BITSTRING&&(m=t.bytes(u)),p===void 0&&n.decodeBitStrings&&c===yr.Class.UNIVERSAL&&l===yr.Type.BITSTRING&&u>1){var g=t.read,A=e,y=0;if(l===yr.Type.BITSTRING&&(KQ(t,e,1),y=t.getByte(),e--),y===0)try{o=t.length();var v={strict:!0,decodeBitStrings:!0},b=Ure(t,e,r+1,v),I=o-t.length();e-=I,l==yr.Type.BITSTRING&&I++;var S=b.tagClass;I===u&&(S===yr.Class.UNIVERSAL||S===yr.Class.CONTEXT_SPECIFIC)&&(p=[b])}catch{}p===void 0&&(t.read=g,e=A)}if(p===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(l===yr.Type.BMPSTRING)for(p="";u>0;u-=2)KQ(t,e,2),p+=String.fromCharCode(t.getInt16()),e-=2;else p=t.getBytes(u),e-=u}var k=m===void 0?null:{bitStringContents:m};return yr.create(c,l,h,p,k)}a(Ure,"_fromDer");yr.toDer=function(t){var e=pa.util.createBuffer(),r=t.tagClass|t.type,n=pa.util.createBuffer(),o=!1;if("bitStringContents"in t&&(o=!0,t.original&&(o=yr.equals(t,t.original))),o)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&n.putBuffer(yr.toDer(t.value[s]))}else if(t.type===yr.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===yr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var c=n.length(),l="";do l+=String.fromCharCode(c&255),c=c>>>8;while(c>0);e.putByte(l.length|128);for(var s=l.length-1;s>=0;--s)e.putByte(l.charCodeAt(s))}return e.putBuffer(n),e};yr.oidToDer=function(t){var e=t.split("."),r=pa.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,o,s,c,l=2;l<e.length;++l){n=!0,o=[],s=parseInt(e[l],10);do c=s&127,s=s>>>7,n||(c|=128),o.push(c),n=!1;while(s>0);for(var u=o.length-1;u>=0;--u)r.putByte(o[u])}return r};yr.derToOid=function(t){var e;typeof t=="string"&&(t=pa.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};yr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,o=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),c=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var u=t.charAt(10),d=10;u!=="+"&&u!=="-"&&(l=parseInt(t.substr(10,2),10),d+=2)}if(e.setUTCFullYear(r,n,o),e.setUTCHours(s,c,l,0),d&&(u=t.charAt(d),u==="+"||u==="-")){var p=parseInt(t.substr(d+1,2),10),m=parseInt(t.substr(d+4,2),10),h=p*60+m;h*=6e4,u==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};yr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),c=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),u=0,d=0,p=!1;t.charAt(t.length-1)==="Z"&&(p=!0);var m=t.length-5,h=t.charAt(m);if(h==="+"||h==="-"){var g=parseInt(t.substr(m+1,2),10),A=parseInt(t.substr(m+4,2),10);d=g*60+A,d*=6e4,h==="+"&&(d*=-1),p=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),p?(e.setUTCFullYear(r,n,o),e.setUTCHours(s,c,l,u),e.setTime(+e+d)):(e.setFullYear(r,n,o),e.setHours(s,c,l,u)),e};yr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};yr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};yr.integerToDer=function(t){var e=pa.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};yr.derToInteger=function(t){typeof t=="string"&&(t=pa.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};yr.validate=function(t,e,r,n){var o=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(o=!0,e.value&&pa.util.isArray(e.value))for(var s=0,c=0;o&&c<e.value.length;++c)o=e.value[c].optional||!1,t.value[s]&&(o=yr.validate(t.value[s],e.value[c],r,n),o?++s:e.value[c].optional&&(o=!0)),!o&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(o&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return o};var Jat=/[^\\u0000-\\u00ff]/;yr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var o="",s=0;s<e*r;++s)o+=" ";switch(n+=o+"Tag: ",t.tagClass){case yr.Class.UNIVERSAL:n+="Universal:";break;case yr.Class.APPLICATION:n+="Application:";break;case yr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case yr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===yr.Class.UNIVERSAL)switch(n+=t.type,t.type){case yr.Type.NONE:n+=" (None)";break;case yr.Type.BOOLEAN:n+=" (Boolean)";break;case yr.Type.INTEGER:n+=" (Integer)";break;case yr.Type.BITSTRING:n+=" (Bit string)";break;case yr.Type.OCTETSTRING:n+=" (Octet string)";break;case yr.Type.NULL:n+=" (Null)";break;case yr.Type.OID:n+=" (Object Identifier)";break;case yr.Type.ODESC:n+=" (Object Descriptor)";break;case yr.Type.EXTERNAL:n+=" (External or Instance of)";break;case yr.Type.REAL:n+=" (Real)";break;case yr.Type.ENUMERATED:n+=" (Enumerated)";break;case yr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case yr.Type.UTF8:n+=" (UTF8)";break;case yr.Type.ROID:n+=" (Relative Object Identifier)";break;case yr.Type.SEQUENCE:n+=" (Sequence)";break;case yr.Type.SET:n+=" (Set)";break;case yr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case yr.Type.IA5String:n+=" (IA5String (ASCII))";break;case yr.Type.UTCTIME:n+=" (UTC time)";break;case yr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case yr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=o+"Constructed: "+t.constructed+`
`,t.composed){for(var c=0,l="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(c+=1,l+=yr.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(l+=","));n+=o+"Sub values: "+c+l}else{if(n+=o+"Value: ",t.type===yr.Type.OID){var u=yr.derToOid(t.value);n+=u,pa.pki&&pa.pki.oids&&u in pa.pki.oids&&(n+=" ("+pa.pki.oids[u]+") ")}if(t.type===yr.Type.INTEGER)try{n+=yr.derToInteger(t.value)}catch{n+="0x"+pa.util.bytesToHex(t.value)}else if(t.type===yr.Type.BITSTRING){if(t.value.length>1?n+="0x"+pa.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var d=t.value.charCodeAt(0);d==1?n+=" (1 unused bit shown)":d>1&&(n+=" ("+d+" unused bits shown)")}}else if(t.type===yr.Type.OCTETSTRING)Jat.test(t.value)||(n+="("+t.value+") "),n+="0x"+pa.util.bytesToHex(t.value);else if(t.type===yr.Type.UTF8)try{n+=pa.util.decodeUtf8(t.value)}catch(p){if(p.message==="URI malformed")n+="0x"+pa.util.bytesToHex(t.value)+" (malformed UTF8)";else throw p}else t.type===yr.Type.PRINTABLESTRING||t.type===yr.Type.IA5String?n+=t.value:Jat.test(t.value)?n+="0x"+pa.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var m1=$((hAi,Zat)=>{f();var qre=ki();Zat.exports=qre.md=qre.md||{};qre.md.algorithms=qre.md.algorithms||{}});var zN=$((AAi,ect)=>{f();var tE=ki();m1();Wo();var Tlr=ect.exports=tE.hmac=tE.hmac||{};Tlr.create=function(){var t=null,e=null,r=null,n=null,o={};return o.start=function(s,c){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in tE.md.algorithms)e=tE.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(c===null)c=t;else{if(typeof c=="string")c=tE.util.createBuffer(c);else if(tE.util.isArray(c)){var l=c;c=tE.util.createBuffer();for(var u=0;u<l.length;++u)c.putByte(l[u])}var d=c.length();d>e.blockLength&&(e.start(),e.update(c.bytes()),c=e.digest()),r=tE.util.createBuffer(),n=tE.util.createBuffer(),d=c.length();for(var u=0;u<d;++u){var l=c.at(u);r.putByte(54^l),n.putByte(92^l)}if(d<e.blockLength)for(var l=e.blockLength-d,u=0;u<l;++u)r.putByte(54),n.putByte(92);t=c,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},o.update=function(s){e.update(s)},o.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(n),e.update(s),e.digest()},o.digest=o.getMac,o}});var $re=$((CAi,ict)=>{f();var h1=ki();m1();Wo();var rct=ict.exports=h1.md5=h1.md5||{};h1.md.md5=h1.md.algorithms.md5=rct;rct.create=function(){nct||wlr();var t=null,e=h1.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var o=n.messageLengthSize/4,s=0;s<o;++s)n.fullMessageLength.push(0);return e=h1.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(o,s){s==="utf8"&&(o=h1.util.encodeUtf8(o));var c=o.length;n.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=c[1],c[1]=c[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,c[0]=c[1]/4294967296>>>0;return e.putBytes(o),tct(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var o=h1.util.createBuffer();o.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,c=s&n.blockLength-1;o.putBytes(swe.substr(0,n.blockLength-c));for(var l,u=0,d=n.fullMessageLength.length-1;d>=0;--d)l=n.fullMessageLength[d]*8+u,u=l/4294967296>>>0,o.putInt32Le(l>>>0);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};tct(p,r,o);var m=h1.util.createBuffer();return m.putInt32Le(p.h0),m.putInt32Le(p.h1),m.putInt32Le(p.h2),m.putInt32Le(p.h3),m},n};var swe=null,Hre=null,YQ=null,KN=null,nct=!1;function wlr(){swe="\x80",swe+=h1.util.fillString("\0",64),Hre=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],YQ=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],KN=new Array(64);for(var t=0;t<64;++t)KN[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);nct=!0}a(wlr,"_init");function tct(t,e,r){for(var n,o,s,c,l,u,d,p,m=r.length();m>=64;){for(o=t.h0,s=t.h1,c=t.h2,l=t.h3,p=0;p<16;++p)e[p]=r.getInt32Le(),u=l^s&(c^l),n=o+u+KN[p]+e[p],d=YQ[p],o=l,l=c,c=s,s+=n<<d|n>>>32-d;for(;p<32;++p)u=c^l&(s^c),n=o+u+KN[p]+e[Hre[p]],d=YQ[p],o=l,l=c,c=s,s+=n<<d|n>>>32-d;for(;p<48;++p)u=s^c^l,n=o+u+KN[p]+e[Hre[p]],d=YQ[p],o=l,l=c,c=s,s+=n<<d|n>>>32-d;for(;p<64;++p)u=c^(s|~l),n=o+u+KN[p]+e[Hre[p]],d=YQ[p],o=l,l=c,c=s,s+=n<<d|n>>>32-d;t.h0=t.h0+o|0,t.h1=t.h1+s|0,t.h2=t.h2+c|0,t.h3=t.h3+l|0,m-=64}}a(tct,"_update")});var _k=$((EAi,sct)=>{f();var jre=ki();Wo();var oct=sct.exports=jre.pem=jre.pem||{};oct.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Wre(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Wre(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Wre(n)),t.headers)for(var o=0;o<t.headers.length;++o)r+=Wre(t.headers[o]);return t.procType&&(r+=`\r
`),r+=jre.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};oct.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/,s;s=r.exec(t),!!s;){var c=s[1];c==="NEW CERTIFICATE REQUEST"&&(c="CERTIFICATE REQUEST");var l={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:jre.util.decode64(s[3])};if(e.push(l),!!s[2]){for(var u=s[2].split(o),d=0;s&&d<u.length;){for(var p=u[d].replace(/\s+$/,""),m=d+1;m<u.length;++m){var h=u[m];if(!/\s/.test(h[0]))break;p+=h,d=m}if(s=p.match(n),s){for(var g={name:s[1],values:[]},A=s[2].split(","),y=0;y<A.length;++y)g.values.push(_lr(A[y]));if(l.procType)if(!l.contentDomain&&g.name==="Content-Domain")l.contentDomain=A[0]||"";else if(!l.dekInfo&&g.name==="DEK-Info"){if(g.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:A[0],parameters:A[1]||null}}else l.headers.push(g);else{if(g.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(g.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:A[0],type:A[1]}}}++d}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Wre(t){for(var e=t.name+": ",r=[],n=a(function(u,d){return" "+d},"insertSpace"),o=0;o<t.values.length;++o)r.push(t.values[o].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var s=0,c=-1,o=0;o<e.length;++o,++s)if(s>65&&c!==-1){var l=e[c];l===","?(++c,e=e.substr(0,c)+`\r
 `+e.substr(c)):e=e.substr(0,c)+`\r
`+l+e.substr(c+1),s=o-c-1,c=-1,++o}else(e[o]===" "||e[o]==="	"||e[o]===",")&&(c=o);return e}a(Wre,"foldHeader");function _lr(t){return t.replace(/^\s+/,"")}a(_lr,"ltrim")});var JQ=$((TAi,cct)=>{f();var Ua=ki();Lre();twe();Wo();cct.exports=Ua.des=Ua.des||{};Ua.des.startEncrypting=function(t,e,r,n){var o=Gre({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return o.start(e),o};Ua.des.createEncryptionCipher=function(t,e){return Gre({key:t,output:null,decrypt:!1,mode:e})};Ua.des.startDecrypting=function(t,e,r,n){var o=Gre({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return o.start(e),o};Ua.des.createDecryptionCipher=function(t,e){return Gre({key:t,output:null,decrypt:!0,mode:e})};Ua.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:a(function(n,o){return act(r._keys,n,o,!1)},"encrypt"),decrypt:a(function(n,o){return act(r._keys,n,o,!0)},"decrypt")}}),r._init=!1};Ua.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ua.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Llr(e),this._init=!0}};g1("DES-ECB",Ua.cipher.modes.ecb);g1("DES-CBC",Ua.cipher.modes.cbc);g1("DES-CFB",Ua.cipher.modes.cfb);g1("DES-OFB",Ua.cipher.modes.ofb);g1("DES-CTR",Ua.cipher.modes.ctr);g1("3DES-ECB",Ua.cipher.modes.ecb);g1("3DES-CBC",Ua.cipher.modes.cbc);g1("3DES-CFB",Ua.cipher.modes.cfb);g1("3DES-OFB",Ua.cipher.modes.ofb);g1("3DES-CTR",Ua.cipher.modes.ctr);function g1(t,e){var r=a(function(){return new Ua.des.Algorithm(t,e)},"factory");Ua.cipher.registerAlgorithm(t,r)}a(g1,"registerAlgorithm");var Slr=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Rlr=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],klr=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Plr=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Dlr=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Blr=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Nlr=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Mlr=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Llr(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],c=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],d=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],p=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],m=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],A=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],I=0,S,k=0;k<y;k++){var N=t.getInt32(),F=t.getInt32();S=(N>>>4^F)&252645135,F^=S,N^=S<<4,S=(F>>>-16^N)&65535,N^=S,F^=S<<-16,S=(N>>>2^F)&858993459,F^=S,N^=S<<2,S=(F>>>-16^N)&65535,N^=S,F^=S<<-16,S=(N>>>1^F)&1431655765,F^=S,N^=S<<1,S=(F>>>8^N)&16711935,N^=S,F^=S<<8,S=(N>>>1^F)&1431655765,F^=S,N^=S<<1,S=N<<8|F>>>20&240,N=F<<24|F<<8&16711680|F>>>8&65280|F>>>24&240,F=S;for(var O=0;O<b.length;++O){b[O]?(N=N<<2|N>>>26,F=F<<2|F>>>26):(N=N<<1|N>>>27,F=F<<1|F>>>27),N&=-15,F&=-15;var Y=e[N>>>28]|r[N>>>24&15]|n[N>>>20&15]|o[N>>>16&15]|s[N>>>12&15]|c[N>>>8&15]|l[N>>>4&15],z=u[F>>>28]|d[F>>>24&15]|p[F>>>20&15]|m[F>>>16&15]|h[F>>>12&15]|g[F>>>8&15]|A[F>>>4&15];S=(z>>>16^Y)&65535,v[I++]=Y^S,v[I++]=z^S<<16}}return v}a(Llr,"_createKeys");function act(t,e,r,n){var o=t.length===32?3:9,s;o===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var c,l=e[0],u=e[1];c=(l>>>4^u)&252645135,u^=c,l^=c<<4,c=(l>>>16^u)&65535,u^=c,l^=c<<16,c=(u>>>2^l)&858993459,l^=c,u^=c<<2,c=(u>>>8^l)&16711935,l^=c,u^=c<<8,c=(l>>>1^u)&1431655765,u^=c,l^=c<<1,l=l<<1|l>>>31,u=u<<1|u>>>31;for(var d=0;d<o;d+=3){for(var p=s[d+1],m=s[d+2],h=s[d];h!=p;h+=m){var g=u^t[h],A=(u>>>4|u<<28)^t[h+1];c=l,l=u,u=c^(Rlr[g>>>24&63]|Plr[g>>>16&63]|Blr[g>>>8&63]|Mlr[g&63]|Slr[A>>>24&63]|klr[A>>>16&63]|Dlr[A>>>8&63]|Nlr[A&63])}c=l,l=u,u=c}l=l>>>1|l<<31,u=u>>>1|u<<31,c=(l>>>1^u)&1431655765,u^=c,l^=c<<1,c=(u>>>8^l)&16711935,l^=c,u^=c<<8,c=(u>>>2^l)&858993459,l^=c,u^=c<<2,c=(l>>>16^u)&65535,u^=c,l^=c<<16,c=(l>>>4^u)&252645135,u^=c,l^=c<<4,r[0]=l,r[1]=u}a(act,"_updateBlock");function Gre(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Ua.cipher.createDecipher(r,t.key):n=Ua.cipher.createCipher(r,t.key);var o=n.start;return n.start=function(s,c){var l=null;c instanceof Ua.util.ByteBuffer&&(l=c,c={}),c=c||{},c.output=l,c.iv=s,o.call(n,c)},n}a(Gre,"_createCipher")});var Vre=$((SAi,lct)=>{f();var Qf=ki();zN();m1();Wo();var Flr=Qf.pkcs5=Qf.pkcs5||{},rE;Qf.util.isNodejs&&!Qf.options.usePureJavaScript&&(rE=require("crypto"));lct.exports=Qf.pbkdf2=Flr.pbkdf2=function(t,e,r,n,o,s){if(typeof o=="function"&&(s=o,o=null),Qf.util.isNodejs&&!Qf.options.usePureJavaScript&&rE.pbkdf2&&(o===null||typeof o!="object")&&(rE.pbkdf2Sync.length>4||!o||o==="sha1"))return typeof o!="string"&&(o="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?rE.pbkdf2Sync.length===4?rE.pbkdf2(t,e,r,n,function(S,k){if(S)return s(S);s(null,k.toString("binary"))}):rE.pbkdf2(t,e,r,n,o,function(S,k){if(S)return s(S);s(null,k.toString("binary"))}):rE.pbkdf2Sync.length===4?rE.pbkdf2Sync(t,e,r,n).toString("binary"):rE.pbkdf2Sync(t,e,r,n,o).toString("binary");if((typeof o>"u"||o===null)&&(o="sha1"),typeof o=="string"){if(!(o in Qf.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=Qf.md[o].create()}var c=o.digestLength;if(n>4294967295*c){var l=new Error("Derived key is too long.");if(s)return s(l);throw l}var u=Math.ceil(n/c),d=n-(u-1)*c,p=Qf.hmac.create();p.start(o,t);var m="",h,g,A;if(!s){for(var y=1;y<=u;++y){p.start(null,null),p.update(e),p.update(Qf.util.int32ToBytes(y)),h=A=p.digest().getBytes();for(var v=2;v<=r;++v)p.start(null,null),p.update(A),g=p.digest().getBytes(),h=Qf.util.xorBytes(h,g,c),A=g;m+=y<u?h:h.substr(0,d)}return m}var y=1,v;function b(){if(y>u)return s(null,m);p.start(null,null),p.update(e),p.update(Qf.util.int32ToBytes(y)),h=A=p.digest().getBytes(),v=2,I()}a(b,"outer");function I(){if(v<=r)return p.start(null,null),p.update(A),g=p.digest().getBytes(),h=Qf.util.xorBytes(h,g,c),A=g,++v,Qf.util.setImmediate(I);m+=y<u?h:h.substr(0,d),++y,b()}a(I,"inner"),b()}});var cwe=$((PAi,mct)=>{f();var A1=ki();m1();Wo();var dct=mct.exports=A1.sha256=A1.sha256||{};A1.md.sha256=A1.md.algorithms.sha256=dct;dct.create=function(){fct||Olr();var t=null,e=A1.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var o=n.messageLengthSize/4,s=0;s<o;++s)n.fullMessageLength.push(0);return e=A1.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(o,s){s==="utf8"&&(o=A1.util.encodeUtf8(o));var c=o.length;n.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=c[1],c[1]=c[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,c[0]=c[1]/4294967296>>>0;return e.putBytes(o),uct(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var o=A1.util.createBuffer();o.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,c=s&n.blockLength-1;o.putBytes(awe.substr(0,n.blockLength-c));for(var l,u,d=n.fullMessageLength[0]*8,p=0;p<n.fullMessageLength.length-1;++p)l=n.fullMessageLength[p+1]*8,u=l/4294967296>>>0,d+=u,o.putInt32(d>>>0),d=l>>>0;o.putInt32(d);var m={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};uct(m,r,o);var h=A1.util.createBuffer();return h.putInt32(m.h0),h.putInt32(m.h1),h.putInt32(m.h2),h.putInt32(m.h3),h.putInt32(m.h4),h.putInt32(m.h5),h.putInt32(m.h6),h.putInt32(m.h7),h},n};var awe=null,fct=!1,pct=null;function Olr(){awe="\x80",awe+=A1.util.fillString("\0",64),pct=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],fct=!0}a(Olr,"_init");function uct(t,e,r){for(var n,o,s,c,l,u,d,p,m,h,g,A,y,v,b,I=r.length();I>=64;){for(d=0;d<16;++d)e[d]=r.getInt32();for(;d<64;++d)n=e[d-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,o=e[d-15],o=(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,e[d]=n+e[d-7]+o+e[d-16]|0;for(p=t.h0,m=t.h1,h=t.h2,g=t.h3,A=t.h4,y=t.h5,v=t.h6,b=t.h7,d=0;d<64;++d)c=(A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7),l=v^A&(y^v),s=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),u=p&m|h&(p^m),n=b+c+l+pct[d]+e[d],o=s+u,b=v,v=y,y=A,A=g+n>>>0,g=h,h=m,m=p,p=n+o>>>0;t.h0=t.h0+p|0,t.h1=t.h1+m|0,t.h2=t.h2+h|0,t.h3=t.h3+g|0,t.h4=t.h4+A|0,t.h5=t.h5+y|0,t.h6=t.h6+v|0,t.h7=t.h7+b|0,I-=64}}a(uct,"_update")});var lwe=$((NAi,hct)=>{f();var y1=ki();Wo();var zre=null;y1.util.isNodejs&&!y1.options.usePureJavaScript&&!process.versions["node-webkit"]&&(zre=require("crypto"));var Qlr=hct.exports=y1.prng=y1.prng||{};Qlr.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),o=0;o<32;++o)n[o]=r.create();e.pools=n,e.pool=0,e.generate=function(d,p){if(!p)return e.generateSync(d);var m=e.plugin.cipher,h=e.plugin.increment,g=e.plugin.formatKey,A=e.plugin.formatSeed,y=y1.util.createBuffer();e.key=null,v();function v(b){if(b)return p(b);if(y.length()>=d)return p(null,y.getBytes(d));if(e.generated>1048575&&(e.key=null),e.key===null)return y1.util.nextTick(function(){s(v)});var I=m(e.key,e.seed);e.generated+=I.length,y.putBytes(I),e.key=g(m(e.key,h(e.seed))),e.seed=A(m(e.key,e.seed)),y1.util.setImmediate(v)}a(v,"generate")},e.generateSync=function(d){var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed;e.key=null;for(var A=y1.util.createBuffer();A.length()<d;){e.generated>1048575&&(e.key=null),e.key===null&&c();var y=p(e.key,e.seed);e.generated+=y.length,A.putBytes(y),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed))}return A.getBytes(d)};function s(d){if(e.pools[0].messageLength>=32)return l(),d();var p=32-e.pools[0].messageLength<<5;e.seedFile(p,function(m,h){if(m)return d(m);e.collect(h),l(),d()})}a(s,"_reseed");function c(){if(e.pools[0].messageLength>=32)return l();var d=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(d)),l()}a(c,"_reseedSync");function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var d=e.plugin.md.create();d.update(e.keyBytes);for(var p=1,m=0;m<32;++m)e.reseeds%p===0&&(d.update(e.pools[m].digest().getBytes()),e.pools[m].start()),p=p<<1;e.keyBytes=d.digest().getBytes(),d.start(),d.update(e.keyBytes);var h=d.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}a(l,"_seed");function u(d){var p=null,m=y1.util.globalScope,h=m.crypto||m.msCrypto;h&&h.getRandomValues&&(p=a(function(N){return h.getRandomValues(N)},"getRandomValues"));var g=y1.util.createBuffer();if(p)for(;g.length()<d;){var A=Math.max(1,Math.min(d-g.length(),65536)/4),y=new Uint32Array(Math.floor(A));try{p(y);for(var v=0;v<y.length;++v)g.putInt32(y[v])}catch(N){if(!(typeof QuotaExceededError<"u"&&N instanceof QuotaExceededError))throw N}}if(g.length()<d)for(var b,I,S,k=Math.floor(Math.random()*65536);g.length()<d;){I=16807*(k&65535),b=16807*(k>>16),I+=(b&32767)<<16,I+=b>>15,I=(I&2147483647)+(I>>31),k=I&4294967295;for(var v=0;v<3;++v)S=k>>>(v<<3),S^=Math.floor(Math.random()*256),g.putByte(S&255)}return g.getBytes(d)}return a(u,"defaultSeedFile"),zre?(e.seedFile=function(d,p){zre.randomBytes(d,function(m,h){if(m)return p(m);p(null,h.toString())})},e.seedFileSync=function(d){return zre.randomBytes(d).toString()}):(e.seedFile=function(d,p){try{p(null,u(d))}catch(m){p(m)}},e.seedFileSync=u),e.collect=function(d){for(var p=d.length,m=0;m<p;++m)e.pools[e.pool].update(d.substr(m,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(d,p){for(var m="",h=0;h<p;h+=8)m+=String.fromCharCode(d>>h&255);e.collect(m)},e.registerWorker=function(d){if(d===self)e.seedFile=function(m,h){function g(A){var y=A.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",g),h(y.forge.prng.err,y.forge.prng.bytes))}a(g,"listener"),self.addEventListener("message",g),self.postMessage({forge:{prng:{needed:m}}})};else{var p=a(function(m){var h=m.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(g,A){d.postMessage({forge:{prng:{err:g,bytes:A}}})})},"listener");d.addEventListener("message",p)}},e}});var zh=$((FAi,uwe)=>{f();var Eu=ki();bw();cwe();lwe();Wo();(function(){if(Eu.random&&Eu.random.getBytes){uwe.exports=Eu.random;return}(function(t){var e={},r=new Array(4),n=Eu.util.createBuffer();e.formatKey=function(m){var h=Eu.util.createBuffer(m);return m=new Array(4),m[0]=h.getInt32(),m[1]=h.getInt32(),m[2]=h.getInt32(),m[3]=h.getInt32(),Eu.aes._expandKey(m,!1)},e.formatSeed=function(m){var h=Eu.util.createBuffer(m);return m=new Array(4),m[0]=h.getInt32(),m[1]=h.getInt32(),m[2]=h.getInt32(),m[3]=h.getInt32(),m},e.cipher=function(m,h){return Eu.aes._updateBlock(m,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(m){return++m[3],m},e.md=Eu.md.sha256;function o(){var m=Eu.prng.create(e);return m.getBytes=function(h,g){return m.generate(h,g)},m.getBytesSync=function(h){return m.generate(h)},m}a(o,"spawnPrng");var s=o(),c=null,l=Eu.util.globalScope,u=l.crypto||l.msCrypto;if(u&&u.getRandomValues&&(c=a(function(m){return u.getRandomValues(m)},"getRandomValues")),Eu.options.usePureJavaScript||!Eu.util.isNodejs&&!c){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var d="";for(var p in navigator)try{typeof navigator[p]=="string"&&(d+=navigator[p])}catch{}s.collect(d),d=null}t&&(t().mousemove(function(m){s.collectInt(m.clientX,16),s.collectInt(m.clientY,16)}),t().keypress(function(m){s.collectInt(m.charCode,8)}))}if(!Eu.random)Eu.random=s;else for(var p in s)Eu.random[p]=s[p];Eu.random.createInstance=o,uwe.exports=Eu.random})(typeof jQuery<"u"?jQuery:null)})()});var fwe=$((UAi,yct)=>{f();var $p=ki();Wo();var dwe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],gct=[1,2,3,5],Ulr=a(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),qlr=a(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");yct.exports=$p.rc2=$p.rc2||{};$p.rc2.expandKey=function(t,e){typeof t=="string"&&(t=$p.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),o=e,s=Math.ceil(o/8),c=255>>(o&7),l;for(l=n;l<128;l++)r.putByte(dwe[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-s,dwe[r.at(128-s)&c]),l=127-s;l>=0;l--)r.setAt(l,dwe[r.at(l+1)^r.at(l+s)]);return r};var Act=a(function(t,e,r){var n=!1,o=null,s=null,c=null,l,u,d,p,m=[];for(t=$p.rc2.expandKey(t,e),d=0;d<64;d++)m.push(t.getInt16Le());r?(l=a(function(A){for(d=0;d<4;d++)A[d]+=m[p]+(A[(d+3)%4]&A[(d+2)%4])+(~A[(d+3)%4]&A[(d+1)%4]),A[d]=Ulr(A[d],gct[d]),p++},"mixRound"),u=a(function(A){for(d=0;d<4;d++)A[d]+=m[A[(d+3)%4]&63]},"mashRound")):(l=a(function(A){for(d=3;d>=0;d--)A[d]=qlr(A[d],gct[d]),A[d]-=m[p]+(A[(d+3)%4]&A[(d+2)%4])+(~A[(d+3)%4]&A[(d+1)%4]),p--},"mixRound"),u=a(function(A){for(d=3;d>=0;d--)A[d]-=m[A[(d+3)%4]&63]},"mashRound"));var h=a(function(A){var y=[];for(d=0;d<4;d++){var v=o.getInt16Le();c!==null&&(r?v^=c.getInt16Le():c.putInt16Le(v)),y.push(v&65535)}p=r?0:63;for(var b=0;b<A.length;b++)for(var I=0;I<A[b][0];I++)A[b][1](y);for(d=0;d<4;d++)c!==null&&(r?c.putInt16Le(y[d]):y[d]^=c.getInt16Le()),s.putInt16Le(y[d])},"runPlan"),g=null;return g={start:a(function(A,y){A&&typeof A=="string"&&(A=$p.util.createBuffer(A)),n=!1,o=$p.util.createBuffer(),s=y||new $p.util.createBuffer,c=A,g.output=s},"start"),update:a(function(A){for(n||o.putBuffer(A);o.length()>=8;)h([[5,l],[1,u],[6,l],[1,u],[5,l]])},"update"),finish:a(function(A){var y=!0;if(r)if(A)y=A(8,o,!r);else{var v=o.length()===8?8:8-o.length();o.fillWithByte(v,v)}if(y&&(n=!0,g.update()),!r&&(y=o.length()===0,y))if(A)y=A(8,s,!r);else{var b=s.length(),I=s.at(b-1);I>b?y=!1:s.truncate(I)}return y},"finish")},g},"createCipher");$p.rc2.startEncrypting=function(t,e,r){var n=$p.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};$p.rc2.createEncryptionCipher=function(t,e){return Act(t,e,!0)};$p.rc2.startDecrypting=function(t,e,r){var n=$p.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};$p.rc2.createDecryptionCipher=function(t,e){return Act(t,e,!1)}});var ZQ=$(($Ai,wct)=>{f();var pwe=ki();wct.exports=pwe.jsbn=pwe.jsbn||{};var nE,Hlr=0xdeadbeefcafe,Cct=(Hlr&16777215)==15715070;function Pt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}a(Pt,"BigInteger");pwe.jsbn.BigInteger=Pt;function jo(){return new Pt(null)}a(jo,"nbi");function $lr(t,e,r,n,o,s){for(;--s>=0;){var c=e*this.data[t++]+r.data[n]+o;o=Math.floor(c/67108864),r.data[n++]=c&67108863}return o}a($lr,"am1");function Wlr(t,e,r,n,o,s){for(var c=e&32767,l=e>>15;--s>=0;){var u=this.data[t]&32767,d=this.data[t++]>>15,p=l*u+d*c;u=c*u+((p&32767)<<15)+r.data[n]+(o&1073741823),o=(u>>>30)+(p>>>15)+l*d+(o>>>30),r.data[n++]=u&1073741823}return o}a(Wlr,"am2");function vct(t,e,r,n,o,s){for(var c=e&16383,l=e>>14;--s>=0;){var u=this.data[t]&16383,d=this.data[t++]>>14,p=l*u+d*c;u=c*u+((p&16383)<<14)+r.data[n]+o,o=(u>>28)+(p>>14)+l*d,r.data[n++]=u&268435455}return o}a(vct,"am3");typeof navigator>"u"?(Pt.prototype.am=vct,nE=28):Cct&&navigator.appName=="Microsoft Internet Explorer"?(Pt.prototype.am=Wlr,nE=30):Cct&&navigator.appName!="Netscape"?(Pt.prototype.am=$lr,nE=26):(Pt.prototype.am=vct,nE=28);Pt.prototype.DB=nE;Pt.prototype.DM=(1<<nE)-1;Pt.prototype.DV=1<<nE;var mwe=52;Pt.prototype.FV=Math.pow(2,mwe);Pt.prototype.F1=mwe-nE;Pt.prototype.F2=2*nE-mwe;var jlr="0123456789abcdefghijklmnopqrstuvwxyz",Kre=new Array,YN,Kh;YN=48;for(Kh=0;Kh<=9;++Kh)Kre[YN++]=Kh;YN=97;for(Kh=10;Kh<36;++Kh)Kre[YN++]=Kh;YN=65;for(Kh=10;Kh<36;++Kh)Kre[YN++]=Kh;function xct(t){return jlr.charAt(t)}a(xct,"int2char");function Ect(t,e){var r=Kre[t.charCodeAt(e)];return r??-1}a(Ect,"intAt");function Glr(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}a(Glr,"bnpCopyTo");function Vlr(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}a(Vlr,"bnpFromInt");function Tw(t){var e=jo();return e.fromInt(t),e}a(Tw,"nbv");function zlr(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,o=!1,s=0;--n>=0;){var c=r==8?t[n]&255:Ect(t,n);if(c<0){t.charAt(n)=="-"&&(o=!0);continue}o=!1,s==0?this.data[this.t++]=c:s+r>this.DB?(this.data[this.t-1]|=(c&(1<<this.DB-s)-1)<<s,this.data[this.t++]=c>>this.DB-s):this.data[this.t-1]|=c<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&Pt.ZERO.subTo(this,this)}a(zlr,"bnpFromString");function Klr(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}a(Klr,"bnpClamp");function Ylr(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,o=!1,s="",c=this.t,l=this.DB-c*this.DB%e;if(c-- >0)for(l<this.DB&&(n=this.data[c]>>l)>0&&(o=!0,s=xct(n));c>=0;)l<e?(n=(this.data[c]&(1<<l)-1)<<e-l,n|=this.data[--c]>>(l+=this.DB-e)):(n=this.data[c]>>(l-=e)&r,l<=0&&(l+=this.DB,--c)),n>0&&(o=!0),o&&(s+=xct(n));return o?s:"0"}a(Ylr,"bnToString");function Jlr(){var t=jo();return Pt.ZERO.subTo(this,t),t}a(Jlr,"bnNegate");function Xlr(){return this.s<0?this.negate():this}a(Xlr,"bnAbs");function Zlr(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}a(Zlr,"bnCompareTo");function Yre(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}a(Yre,"nbits");function eur(){return this.t<=0?0:this.DB*(this.t-1)+Yre(this.data[this.t-1]^this.s&this.DM)}a(eur,"bnBitLength");function tur(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}a(tur,"bnpDLShiftTo");function rur(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}a(rur,"bnpDRShiftTo");function nur(t,e){var r=t%this.DB,n=this.DB-r,o=(1<<n)-1,s=Math.floor(t/this.DB),c=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+s+1]=this.data[l]>>n|c,c=(this.data[l]&o)<<r;for(l=s-1;l>=0;--l)e.data[l]=0;e.data[s]=c,e.t=this.t+s+1,e.s=this.s,e.clamp()}a(nur,"bnpLShiftTo");function iur(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,o=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var c=r+1;c<this.t;++c)e.data[c-r-1]|=(this.data[c]&s)<<o,e.data[c-r]=this.data[c]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<o),e.t=this.t-r,e.clamp()}a(iur,"bnpRShiftTo");function our(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}a(our,"bnpSubTo");function sur(t,e){var r=this.abs(),n=t.abs(),o=r.t;for(e.t=o+n.t;--o>=0;)e.data[o]=0;for(o=0;o<n.t;++o)e.data[o+r.t]=r.am(0,n.data[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Pt.ZERO.subTo(e,e)}a(sur,"bnpMultiplyTo");function aur(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}a(aur,"bnpSquareTo");function cur(t,e,r){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=jo());var s=jo(),c=this.s,l=t.s,u=this.DB-Yre(n.data[n.t-1]);u>0?(n.lShiftTo(u,s),o.lShiftTo(u,r)):(n.copyTo(s),o.copyTo(r));var d=s.t,p=s.data[d-1];if(p!=0){var m=p*(1<<this.F1)+(d>1?s.data[d-2]>>this.F2:0),h=this.FV/m,g=(1<<this.F1)/m,A=1<<this.F2,y=r.t,v=y-d,b=e??jo();for(s.dlShiftTo(v,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),Pt.ONE.dlShiftTo(d,b),b.subTo(s,s);s.t<d;)s.data[s.t++]=0;for(;--v>=0;){var I=r.data[--y]==p?this.DM:Math.floor(r.data[y]*h+(r.data[y-1]+A)*g);if((r.data[y]+=s.am(0,I,r,v,0,d))<I)for(s.dlShiftTo(v,b),r.subTo(b,r);r.data[y]<--I;)r.subTo(b,r)}e!=null&&(r.drShiftTo(d,e),c!=l&&Pt.ZERO.subTo(e,e)),r.t=d,r.clamp(),u>0&&r.rShiftTo(u,r),c<0&&Pt.ZERO.subTo(r,r)}}}a(cur,"bnpDivRemTo");function lur(t){var e=jo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Pt.ZERO)>0&&t.subTo(e,e),e}a(lur,"bnMod");function Sk(t){this.m=t}a(Sk,"Classic");function uur(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}a(uur,"cConvert");function dur(t){return t}a(dur,"cRevert");function fur(t){t.divRemTo(this.m,null,t)}a(fur,"cReduce");function pur(t,e,r){t.multiplyTo(e,r),this.reduce(r)}a(pur,"cMulTo");function mur(t,e){t.squareTo(e),this.reduce(e)}a(mur,"cSqrTo");Sk.prototype.convert=uur;Sk.prototype.revert=dur;Sk.prototype.reduce=fur;Sk.prototype.mulTo=pur;Sk.prototype.sqrTo=mur;function hur(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}a(hur,"bnpInvDigit");function Rk(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}a(Rk,"Montgomery");function gur(t){var e=jo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Pt.ZERO)>0&&this.m.subTo(e,e),e}a(gur,"montConvert");function Aur(t){var e=jo();return t.copyTo(e),this.reduce(e),e}a(Aur,"montRevert");function yur(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}a(yur,"montReduce");function Cur(t,e){t.squareTo(e),this.reduce(e)}a(Cur,"montSqrTo");function vur(t,e,r){t.multiplyTo(e,r),this.reduce(r)}a(vur,"montMulTo");Rk.prototype.convert=gur;Rk.prototype.revert=Aur;Rk.prototype.reduce=yur;Rk.prototype.mulTo=vur;Rk.prototype.sqrTo=Cur;function xur(){return(this.t>0?this.data[0]&1:this.s)==0}a(xur,"bnpIsEven");function Eur(t,e){if(t>4294967295||t<1)return Pt.ONE;var r=jo(),n=jo(),o=e.convert(this),s=Yre(t)-1;for(o.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,o,r);else{var c=r;r=n,n=c}return e.revert(r)}a(Eur,"bnpExp");function bur(t,e){var r;return t<256||e.isEven()?r=new Sk(e):r=new Rk(e),this.exp(t,r)}a(bur,"bnModPowInt");Pt.prototype.copyTo=Glr;Pt.prototype.fromInt=Vlr;Pt.prototype.fromString=zlr;Pt.prototype.clamp=Klr;Pt.prototype.dlShiftTo=tur;Pt.prototype.drShiftTo=rur;Pt.prototype.lShiftTo=nur;Pt.prototype.rShiftTo=iur;Pt.prototype.subTo=our;Pt.prototype.multiplyTo=sur;Pt.prototype.squareTo=aur;Pt.prototype.divRemTo=cur;Pt.prototype.invDigit=hur;Pt.prototype.isEven=xur;Pt.prototype.exp=Eur;Pt.prototype.toString=Ylr;Pt.prototype.negate=Jlr;Pt.prototype.abs=Xlr;Pt.prototype.compareTo=Zlr;Pt.prototype.bitLength=eur;Pt.prototype.mod=lur;Pt.prototype.modPowInt=bur;Pt.ZERO=Tw(0);Pt.ONE=Tw(1);function Iur(){var t=jo();return this.copyTo(t),t}a(Iur,"bnClone");function Tur(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}a(Tur,"bnIntValue");function wur(){return this.t==0?this.s:this.data[0]<<24>>24}a(wur,"bnByteValue");function _ur(){return this.t==0?this.s:this.data[0]<<16>>16}a(_ur,"bnShortValue");function Sur(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}a(Sur,"bnpChunkSize");function Rur(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}a(Rur,"bnSigNum");function kur(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Tw(r),o=jo(),s=jo(),c="";for(this.divRemTo(n,o,s);o.signum()>0;)c=(r+s.intValue()).toString(t).substr(1)+c,o.divRemTo(n,o,s);return s.intValue().toString(t)+c}a(kur,"bnpToRadix");function Pur(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),o=!1,s=0,c=0,l=0;l<t.length;++l){var u=Ect(t,l);if(u<0){t.charAt(l)=="-"&&this.signum()==0&&(o=!0);continue}c=e*c+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(c,0),s=0,c=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(c,0)),o&&Pt.ZERO.subTo(this,this)}a(Pur,"bnpFromRadix");function Dur(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Pt.ONE.shiftLeft(t-1),hwe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Pt.ONE.shiftLeft(t-1),this);else{var n=new Array,o=t&7;n.length=(t>>3)+1,e.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}}a(Dur,"bnpFromNumber");function Bur(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,o=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[o++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),o==0&&(this.s&128)!=(n&128)&&++o,(o>0||n!=this.s)&&(e[o++]=n);return e}a(Bur,"bnToByteArray");function Nur(t){return this.compareTo(t)==0}a(Nur,"bnEquals");function Mur(t){return this.compareTo(t)<0?this:t}a(Mur,"bnMin");function Lur(t){return this.compareTo(t)>0?this:t}a(Lur,"bnMax");function Fur(t,e,r){var n,o,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(o=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],o);r.t=this.t}else{for(o=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(o,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}a(Fur,"bnpBitwiseTo");function Our(t,e){return t&e}a(Our,"op_and");function Qur(t){var e=jo();return this.bitwiseTo(t,Our,e),e}a(Qur,"bnAnd");function hwe(t,e){return t|e}a(hwe,"op_or");function Uur(t){var e=jo();return this.bitwiseTo(t,hwe,e),e}a(Uur,"bnOr");function bct(t,e){return t^e}a(bct,"op_xor");function qur(t){var e=jo();return this.bitwiseTo(t,bct,e),e}a(qur,"bnXor");function Ict(t,e){return t&~e}a(Ict,"op_andnot");function Hur(t){var e=jo();return this.bitwiseTo(t,Ict,e),e}a(Hur,"bnAndNot");function $ur(){for(var t=jo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}a($ur,"bnNot");function Wur(t){var e=jo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}a(Wur,"bnShiftLeft");function jur(t){var e=jo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}a(jur,"bnShiftRight");function Gur(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}a(Gur,"lbit");function Vur(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Gur(this.data[t]);return this.s<0?this.t*this.DB:-1}a(Vur,"bnGetLowestSetBit");function zur(t){for(var e=0;t!=0;)t&=t-1,++e;return e}a(zur,"cbit");function Kur(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=zur(this.data[r]^e);return t}a(Kur,"bnBitCount");function Yur(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}a(Yur,"bnTestBit");function Jur(t,e){var r=Pt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}a(Jur,"bnpChangeBit");function Xur(t){return this.changeBit(t,hwe)}a(Xur,"bnSetBit");function Zur(t){return this.changeBit(t,Ict)}a(Zur,"bnClearBit");function edr(t){return this.changeBit(t,bct)}a(edr,"bnFlipBit");function tdr(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}a(tdr,"bnpAddTo");function rdr(t){var e=jo();return this.addTo(t,e),e}a(rdr,"bnAdd");function ndr(t){var e=jo();return this.subTo(t,e),e}a(ndr,"bnSubtract");function idr(t){var e=jo();return this.multiplyTo(t,e),e}a(idr,"bnMultiply");function odr(t){var e=jo();return this.divRemTo(t,e,null),e}a(odr,"bnDivide");function sdr(t){var e=jo();return this.divRemTo(t,null,e),e}a(sdr,"bnRemainder");function adr(t){var e=jo(),r=jo();return this.divRemTo(t,e,r),new Array(e,r)}a(adr,"bnDivideAndRemainder");function cdr(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}a(cdr,"bnpDMultiply");function ldr(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}a(ldr,"bnpDAddOffset");function XQ(){}a(XQ,"NullExp");function Tct(t){return t}a(Tct,"nNop");function udr(t,e,r){t.multiplyTo(e,r)}a(udr,"nMulTo");function ddr(t,e){t.squareTo(e)}a(ddr,"nSqrTo");XQ.prototype.convert=Tct;XQ.prototype.revert=Tct;XQ.prototype.mulTo=udr;XQ.prototype.sqrTo=ddr;function fdr(t){return this.exp(t,new XQ)}a(fdr,"bnPow");function pdr(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var o;for(o=r.t-this.t;n<o;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(o=Math.min(t.t,e);n<o;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}a(pdr,"bnpMultiplyLowerTo");function mdr(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}a(mdr,"bnpMultiplyUpperTo");function JN(t){this.r2=jo(),this.q3=jo(),Pt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}a(JN,"Barrett");function hdr(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=jo();return t.copyTo(e),this.reduce(e),e}a(hdr,"barrettConvert");function gdr(t){return t}a(gdr,"barrettRevert");function Adr(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}a(Adr,"barrettReduce");function ydr(t,e){t.squareTo(e),this.reduce(e)}a(ydr,"barrettSqrTo");function Cdr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}a(Cdr,"barrettMulTo");JN.prototype.convert=hdr;JN.prototype.revert=gdr;JN.prototype.reduce=Adr;JN.prototype.mulTo=Cdr;JN.prototype.sqrTo=ydr;function vdr(t,e){var r=t.bitLength(),n,o=Tw(1),s;if(r<=0)return o;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Sk(e):e.isEven()?s=new JN(e):s=new Rk(e);var c=new Array,l=3,u=n-1,d=(1<<n)-1;if(c[1]=s.convert(this),n>1){var p=jo();for(s.sqrTo(c[1],p);l<=d;)c[l]=jo(),s.mulTo(p,c[l-2],c[l]),l+=2}var m=t.t-1,h,g=!0,A=jo(),y;for(r=Yre(t.data[m])-1;m>=0;){for(r>=u?h=t.data[m]>>r-u&d:(h=(t.data[m]&(1<<r+1)-1)<<u-r,m>0&&(h|=t.data[m-1]>>this.DB+r-u)),l=n;(h&1)==0;)h>>=1,--l;if((r-=l)<0&&(r+=this.DB,--m),g)c[h].copyTo(o),g=!1;else{for(;l>1;)s.sqrTo(o,A),s.sqrTo(A,o),l-=2;l>0?s.sqrTo(o,A):(y=o,o=A,A=y),s.mulTo(A,c[h],o)}for(;m>=0&&(t.data[m]&1<<r)==0;)s.sqrTo(o,A),y=o,o=A,A=y,--r<0&&(r=this.DB-1,--m)}return s.revert(o)}a(vdr,"bnModPow");function xdr(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var o=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(o<s&&(s=o),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}a(xdr,"bnGCD");function Edr(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}a(Edr,"bnpModInt");function bdr(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Pt.ZERO;for(var r=t.clone(),n=this.clone(),o=Tw(1),s=Tw(0),c=Tw(0),l=Tw(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!o.isEven()||!s.isEven())&&(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!c.isEven()||!l.isEven())&&(c.addTo(this,c),l.subTo(t,l)),c.rShiftTo(1,c)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&o.subTo(c,o),s.subTo(l,s)):(n.subTo(r,n),e&&c.subTo(o,c),l.subTo(s,l))}if(n.compareTo(Pt.ONE)!=0)return Pt.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}a(bdr,"bnModInverse");var ry=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Idr=(1<<26)/ry[ry.length-1];function Tdr(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=ry[ry.length-1]){for(e=0;e<ry.length;++e)if(r.data[0]==ry[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<ry.length;){for(var n=ry[e],o=e+1;o<ry.length&&n<Idr;)n*=ry[o++];for(n=r.modInt(n);e<o;)if(n%ry[e++]==0)return!1}return r.millerRabin(t)}a(Tdr,"bnIsProbablePrime");function wdr(t){var e=this.subtract(Pt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),o=_dr(),s,c=0;c<t;++c){do s=new Pt(this.bitLength(),o);while(s.compareTo(Pt.ONE)<=0||s.compareTo(e)>=0);var l=s.modPow(n,this);if(l.compareTo(Pt.ONE)!=0&&l.compareTo(e)!=0){for(var u=1;u++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(Pt.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}a(wdr,"bnpMillerRabin");function _dr(){return{nextBytes:a(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}a(_dr,"bnGetPrng");Pt.prototype.chunkSize=Sur;Pt.prototype.toRadix=kur;Pt.prototype.fromRadix=Pur;Pt.prototype.fromNumber=Dur;Pt.prototype.bitwiseTo=Fur;Pt.prototype.changeBit=Jur;Pt.prototype.addTo=tdr;Pt.prototype.dMultiply=cdr;Pt.prototype.dAddOffset=ldr;Pt.prototype.multiplyLowerTo=pdr;Pt.prototype.multiplyUpperTo=mdr;Pt.prototype.modInt=Edr;Pt.prototype.millerRabin=wdr;Pt.prototype.clone=Iur;Pt.prototype.intValue=Tur;Pt.prototype.byteValue=wur;Pt.prototype.shortValue=_ur;Pt.prototype.signum=Rur;Pt.prototype.toByteArray=Bur;Pt.prototype.equals=Nur;Pt.prototype.min=Mur;Pt.prototype.max=Lur;Pt.prototype.and=Qur;Pt.prototype.or=Uur;Pt.prototype.xor=qur;Pt.prototype.andNot=Hur;Pt.prototype.not=$ur;Pt.prototype.shiftLeft=Wur;Pt.prototype.shiftRight=jur;Pt.prototype.getLowestSetBit=Vur;Pt.prototype.bitCount=Kur;Pt.prototype.testBit=Yur;Pt.prototype.setBit=Xur;Pt.prototype.clearBit=Zur;Pt.prototype.flipBit=edr;Pt.prototype.add=rdr;Pt.prototype.subtract=ndr;Pt.prototype.multiply=idr;Pt.prototype.divide=odr;Pt.prototype.remainder=sdr;Pt.prototype.divideAndRemainder=adr;Pt.prototype.modPow=vdr;Pt.prototype.modInverse=bdr;Pt.prototype.pow=fdr;Pt.prototype.gcd=xdr;Pt.prototype.isProbablePrime=Tdr});var XN=$((GAi,kct)=>{f();var C1=ki();m1();Wo();var Sct=kct.exports=C1.sha1=C1.sha1||{};C1.md.sha1=C1.md.algorithms.sha1=Sct;Sct.create=function(){Rct||Sdr();var t=null,e=C1.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var o=n.messageLengthSize/4,s=0;s<o;++s)n.fullMessageLength.push(0);return e=C1.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(o,s){s==="utf8"&&(o=C1.util.encodeUtf8(o));var c=o.length;n.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=c[1],c[1]=c[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,c[0]=c[1]/4294967296>>>0;return e.putBytes(o),_ct(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var o=C1.util.createBuffer();o.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,c=s&n.blockLength-1;o.putBytes(gwe.substr(0,n.blockLength-c));for(var l,u,d=n.fullMessageLength[0]*8,p=0;p<n.fullMessageLength.length-1;++p)l=n.fullMessageLength[p+1]*8,u=l/4294967296>>>0,d+=u,o.putInt32(d>>>0),d=l>>>0;o.putInt32(d);var m={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};_ct(m,r,o);var h=C1.util.createBuffer();return h.putInt32(m.h0),h.putInt32(m.h1),h.putInt32(m.h2),h.putInt32(m.h3),h.putInt32(m.h4),h},n};var gwe=null,Rct=!1;function Sdr(){gwe="\x80",gwe+=C1.util.fillString("\0",64),Rct=!0}a(Sdr,"_init");function _ct(t,e,r){for(var n,o,s,c,l,u,d,p,m=r.length();m>=64;){for(o=t.h0,s=t.h1,c=t.h2,l=t.h3,u=t.h4,p=0;p<16;++p)n=r.getInt32(),e[p]=n,d=l^s&(c^l),n=(o<<5|o>>>27)+d+u+1518500249+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<20;++p)n=e[p-3]^e[p-8]^e[p-14]^e[p-16],n=n<<1|n>>>31,e[p]=n,d=l^s&(c^l),n=(o<<5|o>>>27)+d+u+1518500249+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<32;++p)n=e[p-3]^e[p-8]^e[p-14]^e[p-16],n=n<<1|n>>>31,e[p]=n,d=s^c^l,n=(o<<5|o>>>27)+d+u+1859775393+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<40;++p)n=e[p-6]^e[p-16]^e[p-28]^e[p-32],n=n<<2|n>>>30,e[p]=n,d=s^c^l,n=(o<<5|o>>>27)+d+u+1859775393+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<60;++p)n=e[p-6]^e[p-16]^e[p-28]^e[p-32],n=n<<2|n>>>30,e[p]=n,d=s&c|l&(s^c),n=(o<<5|o>>>27)+d+u+2400959708+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;for(;p<80;++p)n=e[p-6]^e[p-16]^e[p-28]^e[p-32],n=n<<2|n>>>30,e[p]=n,d=s^c^l,n=(o<<5|o>>>27)+d+u+3395469782+n,u=l,l=c,c=(s<<30|s>>>2)>>>0,s=o,o=n;t.h0=t.h0+o|0,t.h1=t.h1+s|0,t.h2=t.h2+c|0,t.h3=t.h3+l|0,t.h4=t.h4+u|0,m-=64}}a(_ct,"_update")});var Awe=$((KAi,Dct)=>{f();var v1=ki();Wo();zh();XN();var Pct=Dct.exports=v1.pkcs1=v1.pkcs1||{};Pct.encode_rsa_oaep=function(t,e,r){var n,o,s,c;typeof r=="string"?(n=r,o=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,o=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),s?s.start():s=v1.md.sha1.create(),c||(c=s);var l=Math.ceil(t.n.bitLength()/8),u=l-2*s.digestLength-2;if(e.length>u){var d=new Error("RSAES-OAEP input message length is too long.");throw d.length=e.length,d.maxLength=u,d}n||(n=""),s.update(n,"raw");for(var p=s.digest(),m="",h=u-e.length,g=0;g<h;g++)m+="\0";var A=p.getBytes()+m+""+e;if(!o)o=v1.random.getBytes(s.digestLength);else if(o.length!==s.digestLength){var d=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw d.seedLength=o.length,d.digestLength=s.digestLength,d}var y=Jre(o,l-s.digestLength-1,c),v=v1.util.xorBytes(A,y,A.length),b=Jre(v,s.digestLength,c),I=v1.util.xorBytes(o,b,o.length);return"\0"+I+v};Pct.decode_rsa_oaep=function(t,e,r){var n,o,s;typeof r=="string"?(n=r,o=arguments[3]||void 0):r&&(n=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var c=Math.ceil(t.n.bitLength()/8);if(e.length!==c){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=e.length,v.expectedLength=c,v}if(o===void 0?o=v1.md.sha1.create():o.start(),s||(s=o),c<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),o.update(n,"raw");for(var l=o.digest().getBytes(),u=e.charAt(0),d=e.substring(1,o.digestLength+1),p=e.substring(1+o.digestLength),m=Jre(p,o.digestLength,s),h=v1.util.xorBytes(d,m,d.length),g=Jre(h,c-o.digestLength-1,s),A=v1.util.xorBytes(p,g,p.length),y=A.substring(0,o.digestLength),v=u!=="\0",b=0;b<o.digestLength;++b)v|=l.charAt(b)!==y.charAt(b);for(var I=1,S=o.digestLength,k=o.digestLength;k<A.length;k++){var N=A.charCodeAt(k),F=N&1^1,O=I?65534:0;v|=N&O,I=I&F,S+=I}if(v||A.charCodeAt(S)!==1)throw new Error("Invalid RSAES-OAEP padding.");return A.substring(S+1)};function Jre(t,e,r){r||(r=v1.md.sha1.create());for(var n="",o=Math.ceil(e/r.digestLength),s=0;s<o;++s){var c=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+c),n+=r.digest().getBytes()}return n.substring(0,e)}a(Jre,"rsa_mgf1")});var Cwe=$((XAi,ywe)=>{f();var ww=ki();Wo();ZQ();zh();(function(){if(ww.prime){ywe.exports=ww.prime;return}var t=ywe.exports=ww.prime=ww.prime||{},e=ww.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var o=a(function(m,h){return m|h},"op_or");t.generateProbablePrime=function(m,h,g){typeof h=="function"&&(g=h,h={}),h=h||{};var A=h.algorithm||"PRIMEINC";typeof A=="string"&&(A={name:A}),A.options=A.options||{};var y=h.prng||ww.random,v={nextBytes:a(function(b){for(var I=y.getBytesSync(b.length),S=0;S<b.length;++S)b[S]=I.charCodeAt(S)},"nextBytes")};if(A.name==="PRIMEINC")return s(m,v,A.options,g);throw new Error("Invalid prime generation algorithm: "+A.name)};function s(m,h,g,A){return"workers"in g?u(m,h,g,A):c(m,h,g,A)}a(s,"primeincFindPrime");function c(m,h,g,A){var y=d(m,h),v=0,b=p(y.bitLength());"millerRabinTests"in g&&(b=g.millerRabinTests);var I=10;"maxBlockTime"in g&&(I=g.maxBlockTime),l(y,m,h,v,b,I,A)}a(c,"primeincFindPrimeWithoutWorkers");function l(m,h,g,A,y,v,b){var I=+new Date;do{if(m.bitLength()>h&&(m=d(h,g)),m.isProbablePrime(y))return b(null,m);m.dAddOffset(r[A++%8],0)}while(v<0||+new Date-I<v);ww.util.setImmediate(function(){l(m,h,g,A,y,v,b)})}a(l,"_primeinc");function u(m,h,g,A){if(typeof Worker>"u")return c(m,h,g,A);var y=d(m,h),v=g.workers,b=g.workLoad||100,I=b*30/8,S=g.workerScript||"forge/prime.worker.js";if(v===-1)return ww.util.estimateCores(function(N,F){N&&(F=2),v=F-1,k()});k();function k(){v=Math.max(1,v);for(var N=[],F=0;F<v;++F)N[F]=new Worker(S);for(var O=v,F=0;F<v;++F)N[F].addEventListener("message",z);var Y=!1;function z(V){if(!Y){--O;var U=V.data;if(U.found){for(var H=0;H<N.length;++H)N[H].terminate();return Y=!0,A(null,new e(U.prime,16))}y.bitLength()>m&&(y=d(m,h));var ee=y.toString(16);V.target.postMessage({hex:ee,workLoad:b}),y.dAddOffset(I,0)}}a(z,"workerMessage")}a(k,"generate")}a(u,"primeincFindPrimeWithWorkers");function d(m,h){var g=new e(m,h),A=m-1;return g.testBit(A)||g.bitwiseTo(e.ONE.shiftLeft(A),o,g),g.dAddOffset(31-g.mod(n).byteValue(),0),g}a(d,"generateRandom");function p(m){return m<=100?27:m<=150?18:m<=200?15:m<=250?12:m<=300?9:m<=350?8:m<=400?7:m<=500?6:m<=600?5:m<=800?4:m<=1250?3:2}a(p,"getMillerRabinTests")})()});var eU=$((tyi,Qct)=>{f();var Cn=ki();ty();ZQ();Iw();Awe();Cwe();zh();Wo();typeof Bo>"u"&&(Bo=Cn.jsbn.BigInteger);var Bo,vwe=Cn.util.isNodejs?require("crypto"):null,Ke=Cn.asn1,Yh=Cn.util;Cn.pki=Cn.pki||{};Qct.exports=Cn.pki.rsa=Cn.rsa=Cn.rsa||{};var Ci=Cn.pki,Rdr=[6,4,2,4,2,4,6,2],kdr={name:"PrivateKeyInfo",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Pdr={name:"RSAPrivateKey",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Ddr={name:"RSAPublicKey",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Bdr=Cn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Ndr={name:"DigestInfo",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:Ke.Class.UNIVERSAL,type:Ke.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Mdr=a(function(t){var e;if(t.algorithm in Ci.oids)e=Ci.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=Ke.oidToDer(e).getBytes(),o=Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[]),s=Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[]);s.value.push(Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OID,!1,n)),s.value.push(Ke.create(Ke.Class.UNIVERSAL,Ke.Type.NULL,!1,""));var c=Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OCTETSTRING,!1,t.digest().getBytes());return o.value.push(s),o.value.push(c),Ke.toDer(o).getBytes()},"emsaPkcs1v15encode"),Fct=a(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Bo.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Bo.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Bo(Cn.util.bytesToHex(Cn.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Bo.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var o=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);o.compareTo(s)<0;)o=o.add(e.p);var c=o.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return c=c.multiply(n.modInverse(e.n)).mod(e.n),c},"_modPow");Ci.rsa.encrypt=function(t,e,r){var n=r,o,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,o=Oct(t,e,r)):(o=Cn.util.createBuffer(),o.putBytes(t));for(var c=new Bo(o.toHex(),16),l=Fct(c,e,n),u=l.toString(16),d=Cn.util.createBuffer(),p=s-Math.ceil(u.length/2);p>0;)d.putByte(0),--p;return d.putBytes(Cn.util.hexToBytes(u)),d.getBytes()};Ci.rsa.decrypt=function(t,e,r,n){var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=o,s}var c=new Bo(Cn.util.createBuffer(t).toHex(),16);if(c.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=Fct(c,e,r),u=l.toString(16),d=Cn.util.createBuffer(),p=o-Math.ceil(u.length/2);p>0;)d.putByte(0),--p;return d.putBytes(Cn.util.hexToBytes(u)),n!==!1?Xre(d.getBytes(),e,r):d.getBytes()};Ci.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||Cn.random,o={nextBytes:a(function(l){for(var u=n.getBytesSync(l.length),d=0;d<l.length;++d)l[d]=u.charCodeAt(d)},"nextBytes")},s=r.algorithm||"PRIMEINC",c;if(s==="PRIMEINC")c={algorithm:s,state:0,bits:t,rng:o,eInt:e||65537,e:new Bo(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},c.e.fromInt(c.eInt);else throw new Error("Invalid key generation algorithm: "+s);return c};Ci.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Bo(null);r.fromInt(30);for(var n=0,o=a(function(m,h){return m|h},"op_or"),s=+new Date,c,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,d=u-1;t.pqState===0?(t.num=new Bo(u,t.rng),t.num.testBit(d)||t.num.bitwiseTo(Bo.ONE.shiftLeft(d),o,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(Fdr(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(Rdr[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Bo.ONE).gcd(t.e).compareTo(Bo.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Bo.ONE),t.q1=t.q.subtract(Bo.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Bo.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var p=t.e.modInverse(t.phi);t.keys={privateKey:Ci.rsa.setPrivateKey(t.n,t.e,p,t.p,t.q,p.mod(t.p1),p.mod(t.q1),t.q.modInverse(t.p)),publicKey:Ci.rsa.setPublicKey(t.n,t.e)}}c=+new Date,l+=c-s,s=c}return t.keys!==null};Ci.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!Cn.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Bct("generateKeyPair"))return vwe.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,u,d){if(l)return n(l);n(null,{privateKey:Ci.privateKeyFromPem(d),publicKey:Ci.publicKeyFromPem(u)})});if(Nct("generateKey")&&Nct("exportKey"))return Yh.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Lct(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return Yh.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var u=Ci.privateKeyFromAsn1(Ke.fromDer(Cn.util.createBuffer(l)));n(null,{privateKey:u,publicKey:Ci.setRsaPublicKey(u.n,u.e)})}});if(Mct("generateKey")&&Mct("exportKey")){var o=Yh.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Lct(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);o.oncomplete=function(l){var u=l.target.result,d=Yh.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);d.oncomplete=function(p){var m=p.target.result,h=Ci.privateKeyFromAsn1(Ke.fromDer(Cn.util.createBuffer(m)));n(null,{privateKey:h,publicKey:Ci.setRsaPublicKey(h.n,h.e)})},d.onerror=function(p){n(p)}},o.onerror=function(l){n(l)};return}}else if(Bct("generateKeyPairSync")){var s=vwe.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Ci.privateKeyFromPem(s.privateKey),publicKey:Ci.publicKeyFromPem(s.publicKey)}}}var c=Ci.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Ci.rsa.stepKeyPairGenerationState(c,0),c.keys;Ldr(c,r,n)};Ci.setRsaPublicKey=Ci.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,o,s){if(typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSAES-PKCS1-V1_5"),o==="RSAES-PKCS1-V1_5")o={encode:a(function(l,u,d){return Oct(l,u,2).getBytes()},"encode")};else if(o==="RSA-OAEP"||o==="RSAES-OAEP")o={encode:a(function(l,u){return Cn.pkcs1.encode_rsa_oaep(u,l,s)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(o)!==-1)o={encode:a(function(l){return l},"encode")};else if(typeof o=="string")throw new Error('Unsupported encryption scheme: "'+o+'".');var c=o.encode(n,r,!0);return Ci.rsa.encrypt(c,r,!0)},r.verify=function(n,o,s,c){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),c===void 0&&(c={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in c||(c._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:a(function(u,d){d=Xre(d,r,!0);var p=Ke.fromDer(d,{parseAllBytes:c._parseAllDigestBytes}),m={},h=[];if(!Ke.validate(p,Ndr,m,h)){var g=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw g.errors=h,g}var A=Ke.derToOid(m.algorithmIdentifier);if(!(A===Cn.oids.md2||A===Cn.oids.md5||A===Cn.oids.sha1||A===Cn.oids.sha224||A===Cn.oids.sha256||A===Cn.oids.sha384||A===Cn.oids.sha512||A===Cn.oids["sha512-224"]||A===Cn.oids["sha512-256"])){var g=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw g.oid=A,g}if((A===Cn.oids.md2||A===Cn.oids.md5)&&!("parameters"in m))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===m.digest},"verify")}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:a(function(u,d){return d=Xre(d,r,!0),u===d},"verify")});var l=Ci.rsa.decrypt(o,r,!0,!1);return s.verify(n,l,r.n.bitLength())},r};Ci.setRsaPrivateKey=Ci.rsa.setPrivateKey=function(t,e,r,n,o,s,c,l){var u={n:t,e,d:r,p:n,q:o,dP:s,dQ:c,qInv:l};return u.decrypt=function(d,p,m){typeof p=="string"?p=p.toUpperCase():p===void 0&&(p="RSAES-PKCS1-V1_5");var h=Ci.rsa.decrypt(d,u,!1,!1);if(p==="RSAES-PKCS1-V1_5")p={decode:Xre};else if(p==="RSA-OAEP"||p==="RSAES-OAEP")p={decode:a(function(g,A){return Cn.pkcs1.decode_rsa_oaep(A,g,m)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(p)!==-1)p={decode:a(function(g){return g},"decode")};else throw new Error('Unsupported encryption scheme: "'+p+'".');return p.decode(h,u,!1)},u.sign=function(d,p){var m=!1;typeof p=="string"&&(p=p.toUpperCase()),p===void 0||p==="RSASSA-PKCS1-V1_5"?(p={encode:Mdr},m=1):(p==="NONE"||p==="NULL"||p===null)&&(p={encode:a(function(){return d},"encode")},m=1);var h=p.encode(d,u.n.bitLength());return Ci.rsa.encrypt(h,u,m)},u};Ci.wrapRsaPrivateKey=function(t){return Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,Ke.integerToDer(0).getBytes()),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OID,!1,Ke.oidToDer(Ci.oids.rsaEncryption).getBytes()),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.NULL,!1,"")]),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OCTETSTRING,!1,Ke.toDer(t).getBytes())])};Ci.privateKeyFromAsn1=function(t){var e={},r=[];if(Ke.validate(t,kdr,e,r)&&(t=Ke.fromDer(Cn.util.createBuffer(e.privateKey))),e={},r=[],!Ke.validate(t,Pdr,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var o,s,c,l,u,d,p,m;return o=Cn.util.createBuffer(e.privateKeyModulus).toHex(),s=Cn.util.createBuffer(e.privateKeyPublicExponent).toHex(),c=Cn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=Cn.util.createBuffer(e.privateKeyPrime1).toHex(),u=Cn.util.createBuffer(e.privateKeyPrime2).toHex(),d=Cn.util.createBuffer(e.privateKeyExponent1).toHex(),p=Cn.util.createBuffer(e.privateKeyExponent2).toHex(),m=Cn.util.createBuffer(e.privateKeyCoefficient).toHex(),Ci.setRsaPrivateKey(new Bo(o,16),new Bo(s,16),new Bo(c,16),new Bo(l,16),new Bo(u,16),new Bo(d,16),new Bo(p,16),new Bo(m,16))};Ci.privateKeyToAsn1=Ci.privateKeyToRSAPrivateKey=function(t){return Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,Ke.integerToDer(0).getBytes()),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.n)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.e)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.d)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.p)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.q)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.dP)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.dQ)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.qInv))])};Ci.publicKeyFromAsn1=function(t){var e={},r=[];if(Ke.validate(t,Bdr,e,r)){var n=Ke.derToOid(e.publicKeyOid);if(n!==Ci.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=n,o}t=e.rsaPublicKey}if(r=[],!Ke.validate(t,Ddr,e,r)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=r,o}var s=Cn.util.createBuffer(e.publicKeyModulus).toHex(),c=Cn.util.createBuffer(e.publicKeyExponent).toHex();return Ci.setRsaPublicKey(new Bo(s,16),new Bo(c,16))};Ci.publicKeyToAsn1=Ci.publicKeyToSubjectPublicKeyInfo=function(t){return Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.OID,!1,Ke.oidToDer(Ci.oids.rsaEncryption).getBytes()),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.NULL,!1,"")]),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.BITSTRING,!1,[Ci.publicKeyToRSAPublicKey(t)])])};Ci.publicKeyToRSAPublicKey=function(t){return Ke.create(Ke.Class.UNIVERSAL,Ke.Type.SEQUENCE,!0,[Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.n)),Ke.create(Ke.Class.UNIVERSAL,Ke.Type.INTEGER,!1,x1(t.e))])};function Oct(t,e,r){var n=Cn.util.createBuffer(),o=Math.ceil(e.n.bitLength()/8);if(t.length>o-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=o-11,s}n.putByte(0),n.putByte(r);var c=o-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var u=0;u<c;++u)n.putByte(l)}else for(;c>0;){for(var d=0,p=Cn.random.getBytes(c),u=0;u<c;++u)l=p.charCodeAt(u),l===0?++d:n.putByte(l);c=d}return n.putByte(0),n.putBytes(t),n}a(Oct,"_encodePkcs1_v1_5");function Xre(t,e,r,n){var o=Math.ceil(e.n.bitLength()/8),s=Cn.util.createBuffer(t),c=s.getByte(),l=s.getByte();if(c!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var u=0;if(l===0){u=o-3-n;for(var d=0;d<u;++d)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(u=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++u}else if(l===2)for(u=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++u}var p=s.getByte();if(p!==0||u!==o-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}a(Xre,"_decodePkcs1_v1_5");function Ldr(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),o();function o(){s(t.pBits,function(l,u){if(l)return r(l);if(t.p=u,t.q!==null)return c(l,t.q);s(t.qBits,c)})}a(o,"generate");function s(l,u){Cn.prime.generateProbablePrime(l,n,u)}a(s,"getPrime");function c(l,u){if(l)return r(l);if(t.q=u,t.p.compareTo(t.q)<0){var d=t.p;t.p=t.q,t.q=d}if(t.p.subtract(Bo.ONE).gcd(t.e).compareTo(Bo.ONE)!==0){t.p=null,o();return}if(t.q.subtract(Bo.ONE).gcd(t.e).compareTo(Bo.ONE)!==0){t.q=null,s(t.qBits,c);return}if(t.p1=t.p.subtract(Bo.ONE),t.q1=t.q.subtract(Bo.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Bo.ONE)!==0){t.p=t.q=null,o();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,c);return}var p=t.e.modInverse(t.phi);t.keys={privateKey:Ci.rsa.setPrivateKey(t.n,t.e,p,t.p,t.q,p.mod(t.p1),p.mod(t.q1),t.q.modInverse(t.p)),publicKey:Ci.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}a(c,"finish")}a(Ldr,"_generateKeyPair");function x1(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=Cn.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}a(x1,"_bnToBytes");function Fdr(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}a(Fdr,"_getMillerRabinTests");function Bct(t){return Cn.util.isNodejs&&typeof vwe[t]=="function"}a(Bct,"_detectNodeCrypto");function Nct(t){return typeof Yh.globalScope<"u"&&typeof Yh.globalScope.crypto=="object"&&typeof Yh.globalScope.crypto.subtle=="object"&&typeof Yh.globalScope.crypto.subtle[t]=="function"}a(Nct,"_detectSubtleCrypto");function Mct(t){return typeof Yh.globalScope<"u"&&typeof Yh.globalScope.msCrypto=="object"&&typeof Yh.globalScope.msCrypto.subtle=="object"&&typeof Yh.globalScope.msCrypto.subtle[t]=="function"}a(Mct,"_detectSubtleMsCrypto");function Lct(t){for(var e=Cn.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}a(Lct,"_intToUint8Array")});var xwe=$((iyi,Wct)=>{f();var Tr=ki();bw();ty();JQ();m1();Iw();Vre();_k();zh();fwe();eU();Wo();typeof Uct>"u"&&(Uct=Tr.jsbn.BigInteger);var Uct,gt=Tr.asn1,Ti=Tr.pki=Tr.pki||{};Wct.exports=Ti.pbe=Tr.pbe=Tr.pbe||{};var kk=Ti.oids,Odr={name:"EncryptedPrivateKeyInfo",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Qdr={name:"PBES2Algorithms",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:gt.Class.UNIVERSAL,type:gt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:gt.Class.UNIVERSAL,type:gt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Udr={name:"pkcs-12PbeParams",tagClass:gt.Class.UNIVERSAL,type:gt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:gt.Class.UNIVERSAL,type:gt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:gt.Class.UNIVERSAL,type:gt.Type.INTEGER,constructed:!1,capture:"iterations"}]};Ti.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Tr.random.getBytesSync(r.saltSize),o=r.count,s=gt.integerToDer(o),c,l,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var d,p,m;switch(r.algorithm){case"aes128":c=16,d=16,p=kk["aes128-CBC"],m=Tr.aes.createEncryptionCipher;break;case"aes192":c=24,d=16,p=kk["aes192-CBC"],m=Tr.aes.createEncryptionCipher;break;case"aes256":c=32,d=16,p=kk["aes256-CBC"],m=Tr.aes.createEncryptionCipher;break;case"des":c=8,d=8,p=kk.desCBC,m=Tr.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),A=$ct(g),y=Tr.pkcs5.pbkdf2(e,n,o,c,A),v=Tr.random.getBytesSync(d),b=m(y);b.start(v),b.update(gt.toDer(t)),b.finish(),u=b.output.getBytes();var I=qdr(n,s,c,g);l=gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(kk.pkcs5PBES2).getBytes()),gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(kk.pkcs5PBKDF2).getBytes()),I]),gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(p).getBytes()),gt.create(gt.Class.UNIVERSAL,gt.Type.OCTETSTRING,!1,v)])])])}else if(r.algorithm==="3des"){c=24;var S=new Tr.util.ByteBuffer(n),y=Ti.pbe.generatePkcs12Key(e,S,1,o,c),v=Ti.pbe.generatePkcs12Key(e,S,2,o,c),b=Tr.des.createEncryptionCipher(y);b.start(v),b.update(gt.toDer(t)),b.finish(),u=b.output.getBytes(),l=gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(kk["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OCTETSTRING,!1,n),gt.create(gt.Class.UNIVERSAL,gt.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var k=gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[l,gt.create(gt.Class.UNIVERSAL,gt.Type.OCTETSTRING,!1,u)]);return k};Ti.decryptPrivateKeyInfo=function(t,e){var r=null,n={},o=[];if(!gt.validate(t,Odr,n,o)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=o,s}var c=gt.derToOid(n.encryptionOid),l=Ti.pbe.getCipher(c,n.encryptionParams,e),u=Tr.util.createBuffer(n.encryptedData);return l.update(u),l.finish()&&(r=gt.fromDer(l.output)),r};Ti.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:gt.toDer(t).getBytes()};return Tr.pem.encode(r,{maxline:e})};Ti.encryptedPrivateKeyFromPem=function(t){var e=Tr.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return gt.fromDer(e.body)};Ti.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=Ti.wrapRsaPrivateKey(Ti.privateKeyToAsn1(t));return n=Ti.encryptPrivateKeyInfo(n,e,r),Ti.encryptedPrivateKeyToPem(n)}var o,s,c,l;switch(r.algorithm){case"aes128":o="AES-128-CBC",c=16,s=Tr.random.getBytesSync(16),l=Tr.aes.createEncryptionCipher;break;case"aes192":o="AES-192-CBC",c=24,s=Tr.random.getBytesSync(16),l=Tr.aes.createEncryptionCipher;break;case"aes256":o="AES-256-CBC",c=32,s=Tr.random.getBytesSync(16),l=Tr.aes.createEncryptionCipher;break;case"3des":o="DES-EDE3-CBC",c=24,s=Tr.random.getBytesSync(8),l=Tr.des.createEncryptionCipher;break;case"des":o="DES-CBC",c=8,s=Tr.random.getBytesSync(8),l=Tr.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var d=Tr.pbe.opensslDeriveBytes(e,s.substr(0,8),c),p=l(d);p.start(s),p.update(gt.toDer(Ti.privateKeyToAsn1(t))),p.finish();var m={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:o,parameters:Tr.util.bytesToHex(s).toUpperCase()},body:p.output.getBytes()};return Tr.pem.encode(m)};Ti.decryptRsaPrivateKey=function(t,e){var r=null,n=Tr.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var o=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw o.headerType=o,o}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,c;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,c=Tr.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,c=Tr.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,c=Tr.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,c=Tr.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,c=Tr.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,c=a(function(m){return Tr.rc2.createDecryptionCipher(m,40)},"cipherFn");break;case"RC2-64-CBC":s=8,c=a(function(m){return Tr.rc2.createDecryptionCipher(m,64)},"cipherFn");break;case"RC2-128-CBC":s=16,c=a(function(m){return Tr.rc2.createDecryptionCipher(m,128)},"cipherFn");break;default:var o=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw o.algorithm=n.dekInfo.algorithm,o}var l=Tr.util.hexToBytes(n.dekInfo.parameters),u=Tr.pbe.opensslDeriveBytes(e,l.substr(0,8),s),d=c(u);if(d.start(l),d.update(Tr.util.createBuffer(n.body)),d.finish())r=d.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Ti.decryptPrivateKeyInfo(gt.fromDer(r),e):r=gt.fromDer(r),r!==null&&(r=Ti.privateKeyFromAsn1(r)),r};Ti.pbe.generatePkcs12Key=function(t,e,r,n,o,s){var c,l;if(typeof s>"u"||s===null){if(!("sha1"in Tr.md))throw new Error('"sha1" hash algorithm unavailable.');s=Tr.md.sha1.create()}var u=s.digestLength,d=s.blockLength,p=new Tr.util.ByteBuffer,m=new Tr.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)m.putInt16(t.charCodeAt(l));m.putInt16(0)}var h=m.length(),g=e.length(),A=new Tr.util.ByteBuffer;A.fillWithByte(r,d);var y=d*Math.ceil(g/d),v=new Tr.util.ByteBuffer;for(l=0;l<y;l++)v.putByte(e.at(l%g));var b=d*Math.ceil(h/d),I=new Tr.util.ByteBuffer;for(l=0;l<b;l++)I.putByte(m.at(l%h));var S=v;S.putBuffer(I);for(var k=Math.ceil(o/u),N=1;N<=k;N++){var F=new Tr.util.ByteBuffer;F.putBytes(A.bytes()),F.putBytes(S.bytes());for(var O=0;O<n;O++)s.start(),s.update(F.getBytes()),F=s.digest();var Y=new Tr.util.ByteBuffer;for(l=0;l<d;l++)Y.putByte(F.at(l%u));var z=Math.ceil(g/d)+Math.ceil(h/d),V=new Tr.util.ByteBuffer;for(c=0;c<z;c++){var U=new Tr.util.ByteBuffer(S.getBytes(d)),H=511;for(l=Y.length()-1;l>=0;l--)H=H>>8,H+=Y.at(l)+U.at(l),U.setAt(l,H&255);V.putBuffer(U)}S=V,p.putBuffer(F)}return p.truncate(p.length()-o),p};Ti.pbe.getCipher=function(t,e,r){switch(t){case Ti.oids.pkcs5PBES2:return Ti.pbe.getCipherForPBES2(t,e,r);case Ti.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Ti.oids["pbewithSHAAnd40BitRC2-CBC"]:return Ti.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Ti.pbe.getCipherForPBES2=function(t,e,r){var n={},o=[];if(!gt.validate(e,Qdr,n,o)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=o,s}if(t=gt.derToOid(n.kdfOid),t!==Ti.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=gt.derToOid(n.encOid),t!==Ti.oids["aes128-CBC"]&&t!==Ti.oids["aes192-CBC"]&&t!==Ti.oids["aes256-CBC"]&&t!==Ti.oids["des-EDE3-CBC"]&&t!==Ti.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var c=n.kdfSalt,l=Tr.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var u,d;switch(Ti.oids[t]){case"aes128-CBC":u=16,d=Tr.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,d=Tr.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,d=Tr.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,d=Tr.des.createDecryptionCipher;break;case"desCBC":u=8,d=Tr.des.createDecryptionCipher;break}var p=Hct(n.prfOid),m=Tr.pkcs5.pbkdf2(r,c,l,u,p),h=n.encIv,g=d(m);return g.start(h),g};Ti.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},o=[];if(!gt.validate(e,Udr,n,o)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=o,s}var c=Tr.util.createBuffer(n.salt),l=Tr.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var u,d,p;switch(t){case Ti.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,d=8,p=Tr.des.startDecrypting;break;case Ti.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,d=8,p=a(function(y,v){var b=Tr.rc2.createDecryptionCipher(y,40);return b.start(v,null),b},"cipherFn");break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var m=Hct(n.prfOid),h=Ti.pbe.generatePkcs12Key(r,c,1,l,u,m);m.start();var g=Ti.pbe.generatePkcs12Key(r,c,2,l,d,m);return p(h,g)};Ti.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in Tr.md))throw new Error('"md5" hash algorithm unavailable.');n=Tr.md.md5.create()}e===null&&(e="");for(var o=[qct(n,t+e)],s=16,c=1;s<r;++c,s+=16)o.push(qct(n,o[c-1]+t+e));return o.join("").substr(0,r)};function qct(t,e){return t.start().update(e).digest().getBytes()}a(qct,"hash");function Hct(t){var e;if(!t)e="hmacWithSHA1";else if(e=Ti.oids[gt.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return $ct(e)}a(Hct,"prfOidToMessageDigest");function $ct(t){var e=Tr.md;switch(t){case"hmacWithSHA224":e=Tr.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}a($ct,"prfAlgorithmToMessageDigest");function qdr(t,e,r,n){var o=gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OCTETSTRING,!1,t),gt.create(gt.Class.UNIVERSAL,gt.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&o.value.push(gt.create(gt.Class.UNIVERSAL,gt.Type.INTEGER,!1,Tr.util.hexToBytes(r.toString(16))),gt.create(gt.Class.UNIVERSAL,gt.Type.SEQUENCE,!0,[gt.create(gt.Class.UNIVERSAL,gt.Type.OID,!1,gt.oidToDer(Ti.oids[n]).getBytes()),gt.create(gt.Class.UNIVERSAL,gt.Type.NULL,!1,"")])),o}a(qdr,"createPbkdf2Params")});var Ewe=$((ayi,Vct)=>{f();var ZN=ki();ty();Wo();var vr=ZN.asn1,e8=Vct.exports=ZN.pkcs7asn1=ZN.pkcs7asn1||{};ZN.pkcs7=ZN.pkcs7||{};ZN.pkcs7.asn1=e8;var jct={name:"ContentInfo",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:vr.Class.UNIVERSAL,type:vr.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:vr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};e8.contentInfoValidator=jct;var Gct={name:"EncryptedContentInfo",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:vr.Class.UNIVERSAL,type:vr.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:vr.Class.UNIVERSAL,type:vr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:vr.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:vr.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};e8.envelopedDataValidator={name:"EnvelopedData",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:vr.Class.UNIVERSAL,type:vr.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Gct)};e8.encryptedDataValidator={name:"EncryptedData",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:vr.Class.UNIVERSAL,type:vr.Type.INTEGER,constructed:!1,capture:"version"}].concat(Gct)};var Hdr={name:"SignerInfo",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:vr.Class.UNIVERSAL,type:vr.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:vr.Class.UNIVERSAL,type:vr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:vr.Class.UNIVERSAL,type:vr.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:vr.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:vr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:vr.Class.UNIVERSAL,type:vr.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:vr.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};e8.signedDataValidator={name:"SignedData",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:vr.Class.UNIVERSAL,type:vr.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},jct,{name:"SignedData.Certificates",tagClass:vr.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:vr.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SET,capture:"signerInfos",optional:!0,value:[Hdr]}]};e8.recipientInfoValidator={name:"RecipientInfo",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:vr.Class.UNIVERSAL,type:vr.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:vr.Class.UNIVERSAL,type:vr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:vr.Class.UNIVERSAL,type:vr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:vr.Class.UNIVERSAL,type:vr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:vr.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:vr.Class.UNIVERSAL,type:vr.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var bwe=$((lyi,zct)=>{f();var Pk=ki();Wo();Pk.mgf=Pk.mgf||{};var $dr=zct.exports=Pk.mgf.mgf1=Pk.mgf1=Pk.mgf1||{};$dr.create=function(t){var e={generate:a(function(r,n){for(var o=new Pk.util.ByteBuffer,s=Math.ceil(n/t.digestLength),c=0;c<s;c++){var l=new Pk.util.ByteBuffer;l.putInt32(c),t.start(),t.update(r+l.getBytes()),o.putBuffer(t.digest())}return o.truncate(o.length()-n),o.getBytes()},"generate")};return e}});var Yct=$((fyi,Kct)=>{f();var Zre=ki();bwe();Kct.exports=Zre.mgf=Zre.mgf||{};Zre.mgf.mgf1=Zre.mgf1});var ene=$((myi,Jct)=>{f();var Dk=ki();zh();Wo();var Wdr=Jct.exports=Dk.pss=Dk.pss||{};Wdr.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,o=t.salt||null;typeof o=="string"&&(o=Dk.util.createBuffer(o));var s;if("saltLength"in t)s=t.saltLength;else if(o!==null)s=o.length();else throw new Error("Salt length not specified or specific salt not given.");if(o!==null&&o.length()!==s)throw new Error("Given salt length does not match length of given salt.");var c=t.prng||Dk.random,l={};return l.encode=function(u,d){var p,m=d-1,h=Math.ceil(m/8),g=u.digest().getBytes();if(h<n+s+2)throw new Error("Message is too long to encrypt.");var A;o===null?A=c.getBytesSync(s):A=o.bytes();var y=new Dk.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(g),y.putBytes(A),e.start(),e.update(y.getBytes());var v=e.digest().getBytes(),b=new Dk.util.ByteBuffer;b.fillWithByte(0,h-s-n-2),b.putByte(1),b.putBytes(A);var I=b.getBytes(),S=h-n-1,k=r.generate(v,S),N="";for(p=0;p<S;p++)N+=String.fromCharCode(I.charCodeAt(p)^k.charCodeAt(p));var F=65280>>8*h-m&255;return N=String.fromCharCode(N.charCodeAt(0)&~F)+N.substr(1),N+v+"\xBC"},l.verify=function(u,d,p){var m,h=p-1,g=Math.ceil(h/8);if(d=d.substr(-g),g<n+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(d.charCodeAt(g-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var A=g-n-1,y=d.substr(0,A),v=d.substr(A,n),b=65280>>8*g-h&255;if((y.charCodeAt(0)&b)!==0)throw new Error("Bits beyond keysize not zero as expected.");var I=r.generate(v,A),S="";for(m=0;m<A;m++)S+=String.fromCharCode(y.charCodeAt(m)^I.charCodeAt(m));S=String.fromCharCode(S.charCodeAt(0)&~b)+S.substr(1);var k=g-n-s-2;for(m=0;m<k;m++)if(S.charCodeAt(m)!==0)throw new Error("Leftmost octets not zero as expected");if(S.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var N=S.substr(-s),F=new Dk.util.ByteBuffer;F.fillWithByte(0,8),F.putBytes(u),F.putBytes(N),e.start(),e.update(F.getBytes());var O=e.digest().getBytes();return v===O},l}});var nne=$((gyi,rlt)=>{f();var vn=ki();bw();ty();JQ();m1();Yct();Iw();_k();ene();eU();Wo();var oe=vn.asn1,Zt=rlt.exports=vn.pki=vn.pki||{},No=Zt.oids,Cc={};Cc.CN=No.commonName;Cc.commonName="CN";Cc.C=No.countryName;Cc.countryName="C";Cc.L=No.localityName;Cc.localityName="L";Cc.ST=No.stateOrProvinceName;Cc.stateOrProvinceName="ST";Cc.O=No.organizationName;Cc.organizationName="O";Cc.OU=No.organizationalUnitName;Cc.organizationalUnitName="OU";Cc.E=No.emailAddress;Cc.emailAddress="E";var Zct=vn.pki.rsa.publicKeyValidator,jdr={name:"Certificate",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:oe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:oe.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:oe.Class.UNIVERSAL,type:oe.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:oe.Class.UNIVERSAL,type:oe.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:oe.Class.UNIVERSAL,type:oe.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:oe.Class.UNIVERSAL,type:oe.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Zct,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:oe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:oe.Class.UNIVERSAL,type:oe.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:oe.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:oe.Class.UNIVERSAL,type:oe.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:oe.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:oe.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:oe.Class.UNIVERSAL,type:oe.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Gdr={name:"rsapss",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:oe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:oe.Class.UNIVERSAL,type:oe.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:oe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:oe.Class.UNIVERSAL,type:oe.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:oe.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:oe.Class.UNIVERSAL,type:oe.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:oe.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:oe.Class.UNIVERSAL,type:oe.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Vdr={name:"CertificationRequestInfo",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:oe.Class.UNIVERSAL,type:oe.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Zct,{name:"CertificationRequestInfo.attributes",tagClass:oe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SET,constructed:!0}]}]}]},zdr={name:"CertificationRequest",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Vdr,{name:"CertificationRequest.signatureAlgorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:oe.Class.UNIVERSAL,type:oe.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:oe.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:oe.Class.UNIVERSAL,type:oe.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Zt.RDNAttributesAsArray=function(t,e){for(var r=[],n,o,s,c=0;c<t.value.length;++c){n=t.value[c];for(var l=0;l<n.value.length;++l)s={},o=n.value[l],s.type=oe.derToOid(o.value[0].value),s.value=o.value[1].value,s.valueTagClass=o.value[1].type,s.type in No&&(s.name=No[s.type],s.name in Cc&&(s.shortName=Cc[s.name])),e&&(e.update(s.type),e.update(s.value)),r.push(s)}return r};Zt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],o=oe.derToOid(n.value[0].value),s=n.value[1].value,c=0;c<s.length;++c){var l={};if(l.type=o,l.value=s[c].value,l.valueTagClass=s[c].type,l.type in No&&(l.name=No[l.type],l.name in Cc&&(l.shortName=Cc[l.name])),l.type===No.extensionRequest){l.extensions=[];for(var u=0;u<l.value.length;++u)l.extensions.push(Zt.certificateExtensionFromAsn1(l.value[u]))}e.push(l)}return e};function _w(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,o=0;r===null&&o<t.attributes.length;++o)n=t.attributes[o],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}a(_w,"_getAttribute");var tne=a(function(t,e,r){var n={};if(t!==No["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:No.sha1},mgf:{algorithmOid:No.mgf1,hash:{algorithmOid:No.sha1}},saltLength:20});var o={},s=[];if(!oe.validate(e,Gdr,o,s)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=s,c}return o.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=oe.derToOid(o.hashOid)),o.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=oe.derToOid(o.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=oe.derToOid(o.maskGenHashOid)),o.saltLength!==void 0&&(n.saltLength=o.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),rne=a(function(t){switch(No[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return vn.md.sha1.create();case"md5WithRSAEncryption":return vn.md.md5.create();case"sha256WithRSAEncryption":return vn.md.sha256.create();case"sha384WithRSAEncryption":return vn.md.sha384.create();case"sha512WithRSAEncryption":return vn.md.sha512.create();case"RSASSA-PSS":return vn.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),elt=a(function(t){var e=t.certificate,r;switch(e.signatureOid){case No.sha1WithRSAEncryption:case No.sha1WithRSASignature:break;case No["RSASSA-PSS"]:var n,o;if(n=No[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||vn.md[n]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=e.signatureParameters.mgf.hash.algorithmOid,s.name=n,s}if(o=No[e.signatureParameters.mgf.algorithmOid],o===void 0||vn.mgf[o]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=e.signatureParameters.mgf.algorithmOid,s.name=o,s}if(o=vn.mgf[o].create(vn.md[n].create()),n=No[e.signatureParameters.hash.algorithmOid],n===void 0||vn.md[n]===void 0){var s=new Error("Unsupported RSASSA-PSS hash function.");throw s.oid=e.signatureParameters.hash.algorithmOid,s.name=n,s}r=vn.pss.create(vn.md[n].create(),o,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");Zt.certificateFromPem=function(t,e,r){var n=vn.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var o=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw o.headerType=n.type,o}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=oe.fromDer(n.body,r);return Zt.certificateFromAsn1(s,e)};Zt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:oe.toDer(Zt.certificateToAsn1(t)).getBytes()};return vn.pem.encode(r,{maxline:e})};Zt.publicKeyFromPem=function(t){var e=vn.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=oe.fromDer(e.body);return Zt.publicKeyFromAsn1(n)};Zt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:oe.toDer(Zt.publicKeyToAsn1(t)).getBytes()};return vn.pem.encode(r,{maxline:e})};Zt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:oe.toDer(Zt.publicKeyToRSAPublicKey(t)).getBytes()};return vn.pem.encode(r,{maxline:e})};Zt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||vn.md.sha1.create(),n=e.type||"RSAPublicKey",o;switch(n){case"RSAPublicKey":o=oe.toDer(Zt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":o=oe.toDer(Zt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(o);var s=r.digest();if(e.encoding==="hex"){var c=s.toHex();return e.delimiter?c.match(/.{2}/g).join(e.delimiter):c}else{if(e.encoding==="binary")return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return s};Zt.certificationRequestFromPem=function(t,e,r){var n=vn.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var o=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw o.headerType=n.type,o}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=oe.fromDer(n.body,r);return Zt.certificationRequestFromAsn1(s,e)};Zt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:oe.toDer(Zt.certificationRequestToAsn1(t)).getBytes()};return vn.pem.encode(r,{maxline:e})};Zt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return _w(t.issuer,e)},t.issuer.addField=function(e){Jh([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return _w(t.subject,e)},t.subject.addField=function(e){Jh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Jh(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Jh(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)tlt(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,o=0;r===null&&o<t.extensions.length;++o)n=t.extensions[o],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||vn.md.sha1.create();var n=No[t.md.algorithm+"WithRSAEncryption"];if(!n){var o=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw o.algorithm=t.md.algorithm,o}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Zt.getTBSCertificate(t);var s=oe.toDer(t.tbsCertificate);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,o=t.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=o.attributes,s.actualIssuer=n.attributes,s}var c=e.md;if(c===null){c=rne({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Zt.getTBSCertificate(e),u=oe.toDer(l);c.update(u.getBytes())}return c!==null&&(r=elt({certificate:t,md:c,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,o=e.subject;if(n.hash&&o.hash)r=n.hash===o.hash;else if(n.attributes.length===o.attributes.length){r=!0;for(var s,c,l=0;r&&l<n.attributes.length;++l)s=n.attributes[l],c=o.attributes[l],(s.type!==c.type||s.value!==c.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Zt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=No.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var o=t.generateSubjectKeyIdentifier().getBytes();return vn.util.hexToBytes(n.subjectKeyIdentifier)===o}}return!1},t};Zt.certificateFromAsn1=function(t,e){var r={},n=[];if(!oe.validate(t,jdr,r,n)){var o=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw o.errors=n,o}var s=oe.derToOid(r.publicKeyOid);if(s!==Zt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=Zt.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=vn.util.createBuffer(r.certSerialNumber);c.serialNumber=l.toHex(),c.signatureOid=vn.asn1.derToOid(r.certSignatureOid),c.signatureParameters=tne(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=vn.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=tne(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(oe.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(oe.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(oe.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(oe.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=u[0],c.validity.notAfter=u[1],c.tbsCertificate=r.tbsCertificate,e){c.md=rne({signatureOid:c.signatureOid,type:"certificate"});var d=oe.toDer(c.tbsCertificate);c.md.update(d.getBytes())}var p=vn.md.sha1.create(),m=oe.toDer(r.certIssuer);p.update(m.getBytes()),c.issuer.getField=function(A){return _w(c.issuer,A)},c.issuer.addField=function(A){Jh([A]),c.issuer.attributes.push(A)},c.issuer.attributes=Zt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=p.digest().toHex();var h=vn.md.sha1.create(),g=oe.toDer(r.certSubject);return h.update(g.getBytes()),c.subject.getField=function(A){return _w(c.subject,A)},c.subject.addField=function(A){Jh([A]),c.subject.attributes.push(A)},c.subject.attributes=Zt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=h.digest().toHex(),r.certExtensions?c.extensions=Zt.certificateExtensionsFromAsn1(r.certExtensions):c.extensions=[],c.publicKey=Zt.publicKeyFromAsn1(r.subjectPublicKeyInfo),c};Zt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],o=0;o<n.value.length;++o)e.push(Zt.certificateExtensionFromAsn1(n.value[o]));return e};Zt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=oe.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===oe.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in No){if(e.name=No[e.id],e.name==="keyUsage"){var r=oe.fromDer(e.value),n=0,o=0;r.value.length>1&&(n=r.value.charCodeAt(1),o=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(o&128)===128}else if(e.name==="basicConstraints"){var r=oe.fromDer(e.value);r.value.length>0&&r.value[0].type===oe.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var s=null;r.value.length>0&&r.value[0].type===oe.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(e.pathLenConstraint=oe.derToInteger(s))}else if(e.name==="extKeyUsage")for(var r=oe.fromDer(e.value),c=0;c<r.value.length;++c){var l=oe.derToOid(r.value[c].value);l in No?e[No[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=oe.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var u,r=oe.fromDer(e.value),d=0;d<r.value.length;++d){u=r.value[d];var p={type:u.type,value:u.value};switch(e.altNames.push(p),u.type){case 1:case 2:case 6:break;case 7:p.ip=vn.util.bytesToIP(u.value);break;case 8:p.oid=oe.derToOid(u.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=oe.fromDer(e.value);e.subjectKeyIdentifier=vn.util.bytesToHex(r.value)}}return e};Zt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!oe.validate(t,zdr,r,n)){var o=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw o.errors=n,o}var s=oe.derToOid(r.publicKeyOid);if(s!==Zt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=Zt.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=vn.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=tne(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=vn.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=tne(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,e){c.md=rne({signatureOid:c.signatureOid,type:"certification request"});var l=oe.toDer(c.certificationRequestInfo);c.md.update(l.getBytes())}var u=vn.md.sha1.create();return c.subject.getField=function(d){return _w(c.subject,d)},c.subject.addField=function(d){Jh([d]),c.subject.attributes.push(d)},c.subject.attributes=Zt.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),c.subject.hash=u.digest().toHex(),c.publicKey=Zt.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(d){return _w(c,d)},c.addAttribute=function(d){Jh([d]),c.attributes.push(d)},c.attributes=Zt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c};Zt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return _w(t.subject,e)},t.subject.addField=function(e){Jh([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return _w(t,e)},t.addAttribute=function(e){Jh([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Jh(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Jh(e),t.attributes=e},t.sign=function(e,r){t.md=r||vn.md.sha1.create();var n=No[t.md.algorithm+"WithRSAEncryption"];if(!n){var o=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw o.algorithm=t.md.algorithm,o}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Zt.getCertificationRequestInfo(t);var s=oe.toDer(t.certificationRequestInfo);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=rne({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Zt.getCertificationRequestInfo(t),o=oe.toDer(n);r.update(o.getBytes())}return r!==null&&(e=elt({certificate:t,md:r,signature:t.signature})),e},t};function t8(t){for(var e=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]),r,n,o=t.attributes,s=0;s<o.length;++s){r=o[s];var c=r.value,l=oe.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===oe.Type.UTF8&&(c=vn.util.encodeUtf8(c))),n=oe.create(oe.Class.UNIVERSAL,oe.Type.SET,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(r.type).getBytes()),oe.create(oe.Class.UNIVERSAL,l,!1,c)])]),e.value.push(n)}return e}a(t8,"_dnToAsn1");function Jh(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Zt.oids?e.name=Zt.oids[e.type]:e.shortName&&e.shortName in Cc&&(e.name=Zt.oids[Cc[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Zt.oids)e.type=Zt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in Cc&&(e.shortName=Cc[e.name]),e.type===No.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=oe.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var o=0;o<e.extensions.length;++o)e.value.push(Zt.certificateExtensionToAsn1(tlt(e.extensions[o])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}a(Jh,"_fillMissingFields");function tlt(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Zt.oids&&(t.name=Zt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Zt.oids)t.id=Zt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,o=0,s=0;t.digitalSignature&&(o|=128,n=7),t.nonRepudiation&&(o|=64,n=6),t.keyEncipherment&&(o|=32,n=5),t.dataEncipherment&&(o|=16,n=4),t.keyAgreement&&(o|=8,n=3),t.keyCertSign&&(o|=4,n=2),t.cRLSign&&(o|=2,n=1),t.encipherOnly&&(o|=1,n=0),t.decipherOnly&&(s|=128,n=7);var c=String.fromCharCode(n);s!==0?c+=String.fromCharCode(o)+String.fromCharCode(s):o!==0&&(c+=String.fromCharCode(o)),t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,c)}else if(t.name==="basicConstraints")t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,oe.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var u in t)t[u]===!0&&(u in No?l.push(oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(No[u]).getBytes())):u.indexOf(".")!==-1&&l.push(oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(u).getBytes())))}else if(t.name==="nsCertType"){var n=0,o=0;t.client&&(o|=128,n=7),t.server&&(o|=64,n=6),t.email&&(o|=32,n=5),t.objsign&&(o|=16,n=4),t.reserved&&(o|=8,n=3),t.sslCA&&(o|=4,n=2),t.emailCA&&(o|=2,n=1),t.objCA&&(o|=1,n=0);var c=String.fromCharCode(n);o!==0&&(c+=String.fromCharCode(o)),t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,c)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);for(var d,p=0;p<t.altNames.length;++p){d=t.altNames[p];var c=d.value;if(d.type===7&&d.ip){if(c=vn.util.bytesFromIP(d.ip),c===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else d.type===8&&(d.oid?c=oe.oidToDer(oe.oidToDer(d.oid)):c=oe.oidToDer(c));t.value.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,d.type,!1,c))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var m=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=m.toHex(),t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,m.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var h=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(oe.create(oe.Class.CONTEXT_SPECIFIC,0,!1,h))}if(t.authorityCertIssuer){var g=[oe.create(oe.Class.CONTEXT_SPECIFIC,4,!0,[t8(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(oe.create(oe.Class.CONTEXT_SPECIFIC,1,!0,g))}if(t.serialNumber){var A=vn.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(oe.create(oe.Class.CONTEXT_SPECIFIC,2,!1,A))}}else if(t.name==="cRLDistributionPoints"){t.value=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);for(var l=t.value.value,y=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]),v=oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[]),d,p=0;p<t.altNames.length;++p){d=t.altNames[p];var c=d.value;if(d.type===7&&d.ip){if(c=vn.util.bytesFromIP(d.ip),c===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else d.type===8&&(d.oid?c=oe.oidToDer(oe.oidToDer(d.oid)):c=oe.oidToDer(c));v.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,d.type,!1,c))}y.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(y)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}a(tlt,"_fillMissingExtensionFields");function Iwe(t,e){switch(t){case No["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(e.hash.algorithmOid).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(oe.create(oe.Class.CONTEXT_SPECIFIC,1,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(e.mgf.algorithmOid).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(e.mgf.hash.algorithmOid).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(oe.create(oe.Class.CONTEXT_SPECIFIC,2,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,oe.integerToDer(e.saltLength).getBytes())])),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,r);default:return oe.create(oe.Class.UNIVERSAL,oe.Type.NULL,!1,"")}}a(Iwe,"_signatureParametersToAsn1");function Kdr(t){var e=oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var o=r[n],s=o.value,c=oe.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===oe.Type.UTF8&&(s=vn.util.encodeUtf8(s));var l=!1;"valueConstructed"in o&&(l=o.valueConstructed);var u=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(o.type).getBytes()),oe.create(oe.Class.UNIVERSAL,oe.Type.SET,!0,[oe.create(oe.Class.UNIVERSAL,c,l,s)])]);e.value.push(u)}return e}a(Kdr,"_CRIAttributesToAsn1");var Ydr=new Date("1950-01-01T00:00:00Z"),Jdr=new Date("2050-01-01T00:00:00Z");function Xct(t){return t>=Ydr&&t<Jdr?oe.create(oe.Class.UNIVERSAL,oe.Type.UTCTIME,!1,oe.dateToUtcTime(t)):oe.create(oe.Class.UNIVERSAL,oe.Type.GENERALIZEDTIME,!1,oe.dateToGeneralizedTime(t))}a(Xct,"_dateToAsn1");Zt.getTBSCertificate=function(t){var e=Xct(t.validity.notBefore),r=Xct(t.validity.notAfter),n=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.CONTEXT_SPECIFIC,0,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,oe.integerToDer(t.version).getBytes())]),oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,vn.util.hexToBytes(t.serialNumber)),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(t.siginfo.algorithmOid).getBytes()),Iwe(t.siginfo.algorithmOid,t.siginfo.parameters)]),t8(t.issuer),oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[e,r]),t8(t.subject),Zt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,1,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(oe.create(oe.Class.CONTEXT_SPECIFIC,2,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Zt.certificateExtensionsToAsn1(t.extensions)),n};Zt.getCertificationRequestInfo=function(t){var e=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.INTEGER,!1,oe.integerToDer(t.version).getBytes()),t8(t.subject),Zt.publicKeyToAsn1(t.publicKey),Kdr(t)]);return e};Zt.distinguishedNameToAsn1=function(t){return t8(t)};Zt.certificateToAsn1=function(t){var e=t.tbsCertificate||Zt.getTBSCertificate(t);return oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[e,oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(t.signatureOid).getBytes()),Iwe(t.signatureOid,t.signatureParameters)]),oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,"\0"+t.signature)])};Zt.certificateExtensionsToAsn1=function(t){var e=oe.create(oe.Class.CONTEXT_SPECIFIC,3,!0,[]),r=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Zt.certificateExtensionToAsn1(t[n]));return e};Zt.certificateExtensionToAsn1=function(t){var e=oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[]);e.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(t.id).getBytes())),t.critical&&e.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=oe.toDer(r).getBytes()),e.value.push(oe.create(oe.Class.UNIVERSAL,oe.Type.OCTETSTRING,!1,r)),e};Zt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Zt.getCertificationRequestInfo(t);return oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[e,oe.create(oe.Class.UNIVERSAL,oe.Type.SEQUENCE,!0,[oe.create(oe.Class.UNIVERSAL,oe.Type.OID,!1,oe.oidToDer(t.signatureOid).getBytes()),Iwe(t.signatureOid,t.signatureParameters)]),oe.create(oe.Class.UNIVERSAL,oe.Type.BITSTRING,!1,"\0"+t.signature)])};Zt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(c){var l=r(c.issuer);return l},e.addCertificate=function(c){if(typeof c=="string"&&(c=vn.pki.certificateFromPem(c)),n(c.subject),!e.hasCertificate(c))if(c.subject.hash in e.certs){var l=e.certs[c.subject.hash];vn.util.isArray(l)||(l=[l]),l.push(c),e.certs[c.subject.hash]=l}else e.certs[c.subject.hash]=c},e.hasCertificate=function(c){typeof c=="string"&&(c=vn.pki.certificateFromPem(c));var l=r(c.subject);if(!l)return!1;vn.util.isArray(l)||(l=[l]);for(var u=oe.toDer(Zt.certificateToAsn1(c)).getBytes(),d=0;d<l.length;++d){var p=oe.toDer(Zt.certificateToAsn1(l[d])).getBytes();if(u===p)return!0}return!1},e.listAllCertificates=function(){var c=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var u=e.certs[l];if(!vn.util.isArray(u))c.push(u);else for(var d=0;d<u.length;++d)c.push(u[d])}return c},e.removeCertificate=function(c){var l;if(typeof c=="string"&&(c=vn.pki.certificateFromPem(c)),n(c.subject),!e.hasCertificate(c))return null;var u=r(c.subject);if(!vn.util.isArray(u))return l=e.certs[c.subject.hash],delete e.certs[c.subject.hash],l;for(var d=oe.toDer(Zt.certificateToAsn1(c)).getBytes(),p=0;p<u.length;++p){var m=oe.toDer(Zt.certificateToAsn1(u[p])).getBytes();d===m&&(l=u[p],u.splice(p,1))}return u.length===0&&delete e.certs[c.subject.hash],l};function r(c){return n(c),e.certs[c.hash]||null}a(r,"getBySubject");function n(c){if(!c.hash){var l=vn.md.sha1.create();c.attributes=Zt.RDNAttributesAsArray(t8(c),l),c.hash=l.digest().toHex()}}if(a(n,"ensureSubjectHasHash"),t)for(var o=0;o<t.length;++o){var s=t[o];e.addCertificate(s)}return e};Zt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Zt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),o=r.validityCheckDate;typeof o>"u"&&(o=new Date);var s=!0,c=null,l=0;do{var u=e.shift(),d=null,p=!1;if(o&&(o<u.validity.notBefore||o>u.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:Zt.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:o}),c===null){if(d=e[0]||t.getIssuer(u),d===null&&u.isIssuer(u)&&(p=!0,d=u),d){var m=d;vn.util.isArray(m)||(m=[m]);for(var h=!1;!h&&m.length>0;){d=m.shift();try{h=d.verify(u)}catch{}}h||(c={message:"Certificate signature is invalid.",error:Zt.certificateError.bad_certificate})}c===null&&(!d||p)&&!t.hasCertificate(u)&&(c={message:"Certificate is not trusted.",error:Zt.certificateError.unknown_ca})}if(c===null&&d&&!u.isIssuer(d)&&(c={message:"Certificate issuer is invalid.",error:Zt.certificateError.bad_certificate}),c===null)for(var g={keyUsage:!0,basicConstraints:!0},A=0;c===null&&A<u.extensions.length;++A){var y=u.extensions[A];y.critical&&!(y.name in g)&&(c={message:"Certificate has an unsupported critical extension.",error:Zt.certificateError.unsupported_certificate})}if(c===null&&(!s||e.length===0&&(!d||p))){var v=u.getExtension("basicConstraints"),b=u.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||v===null)&&(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Zt.certificateError.bad_certificate}),c===null&&v!==null&&!v.cA&&(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Zt.certificateError.bad_certificate}),c===null&&b!==null&&"pathLenConstraint"in v){var I=l-1;I>v.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:Zt.certificateError.bad_certificate})}}var S=c===null?!0:c.error,k=r.verify?r.verify(S,l,n):S;if(k===!0)c=null;else throw S===!0&&(c={message:"The application rejected the certificate.",error:Zt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!vn.util.isArray(k)?(k.message&&(c.message=k.message),k.error&&(c.error=k.error)):typeof k=="string"&&(c.error=k)),c;s=!1,++l}while(e.length>0);return!0}});var wwe=$((Cyi,ilt)=>{f();var Vs=ki();ty();zN();Iw();Ewe();xwe();zh();eU();XN();Wo();nne();var Se=Vs.asn1,Zi=Vs.pki,rU=ilt.exports=Vs.pkcs12=Vs.pkcs12||{},nlt={name:"ContentInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Xdr={name:"PFX",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"},nlt,{name:"PFX.macData",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Se.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Zdr={name:"SafeBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},efr={name:"Attribute",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,capture:"values"}]},tfr={name:"CertBag",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Se.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Se.Class.UNIVERSAL,type:Se.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function tU(t,e,r,n){for(var o=[],s=0;s<t.length;s++)for(var c=0;c<t[s].safeBags.length;c++){var l=t[s].safeBags[c];if(!(n!==void 0&&l.type!==n)){if(e===null){o.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&o.push(l)}}return o}a(tU,"_getBagsByAttribute");rU.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},o=[];if(!Se.validate(t,Xdr,n,o)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var c={version:n.version.charCodeAt(0),safeContents:[],getBags:a(function(v){var b={},I;return"localKeyId"in v?I=v.localKeyId:"localKeyIdHex"in v&&(I=Vs.util.hexToBytes(v.localKeyIdHex)),I===void 0&&!("friendlyName"in v)&&"bagType"in v&&(b[v.bagType]=tU(c.safeContents,null,null,v.bagType)),I!==void 0&&(b.localKeyId=tU(c.safeContents,"localKeyId",I,v.bagType)),"friendlyName"in v&&(b.friendlyName=tU(c.safeContents,"friendlyName",v.friendlyName,v.bagType)),b},"getBags"),getBagsByFriendlyName:a(function(v,b){return tU(c.safeContents,"friendlyName",v,b)},"getBagsByFriendlyName"),getBagsByLocalKeyId:a(function(v,b){return tU(c.safeContents,"localKeyId",v,b)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=n.version.charCodeAt(0),s}if(Se.derToOid(n.contentType)!==Zi.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=Se.derToOid(n.contentType),s}var l=n.content.value[0];if(l.tagClass!==Se.Class.UNIVERSAL||l.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=Twe(l),n.mac){var u=null,d=0,p=Se.derToOid(n.macAlgorithm);switch(p){case Zi.oids.sha1:u=Vs.md.sha1.create(),d=20;break;case Zi.oids.sha256:u=Vs.md.sha256.create(),d=32;break;case Zi.oids.sha384:u=Vs.md.sha384.create(),d=48;break;case Zi.oids.sha512:u=Vs.md.sha512.create(),d=64;break;case Zi.oids.md5:u=Vs.md.md5.create(),d=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+p);var m=new Vs.util.ByteBuffer(n.macSalt),h="macIterations"in n?parseInt(Vs.util.bytesToHex(n.macIterations),16):1,g=rU.generateKey(r,m,3,h,d,u),A=Vs.hmac.create();A.start(u,g),A.update(l.value);var y=A.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return rfr(c,l.value,e,r),c};function Twe(t){if(t.composed||t.constructed){for(var e=Vs.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}a(Twe,"_decodePkcs7Data");function rfr(t,e,r,n){if(e=Se.fromDer(e,r),e.tagClass!==Se.Class.UNIVERSAL||e.type!==Se.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var o=0;o<e.value.length;o++){var s=e.value[o],c={},l=[];if(!Se.validate(s,nlt,c,l)){var u=new Error("Cannot read ContentInfo.");throw u.errors=l,u}var d={encrypted:!1},p=null,m=c.content.value[0];switch(Se.derToOid(c.contentType)){case Zi.oids.data:if(m.tagClass!==Se.Class.UNIVERSAL||m.type!==Se.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");p=Twe(m).value;break;case Zi.oids.encryptedData:p=nfr(m,n),d.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=Se.derToOid(c.contentType),u}d.safeBags=ifr(p,r,n),t.safeContents.push(d)}}a(rfr,"_decodeAuthenticatedSafe");function nfr(t,e){var r={},n=[];if(!Se.validate(t,Vs.pkcs7.asn1.encryptedDataValidator,r,n)){var o=new Error("Cannot read EncryptedContentInfo.");throw o.errors=n,o}var s=Se.derToOid(r.contentType);if(s!==Zi.oids.data){var o=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw o.oid=s,o}s=Se.derToOid(r.encAlgorithm);var c=Zi.pbe.getCipher(s,r.encParameter,e),l=Twe(r.encryptedContentAsn1),u=Vs.util.createBuffer(l.value);if(c.update(u),!c.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return c.output.getBytes()}a(nfr,"_decryptSafeContents");function ifr(t,e,r){if(!e&&t.length===0)return[];if(t=Se.fromDer(t,e),t.tagClass!==Se.Class.UNIVERSAL||t.type!==Se.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],o=0;o<t.value.length;o++){var s=t.value[o],c={},l=[];if(!Se.validate(s,Zdr,c,l)){var u=new Error("Cannot read SafeBag.");throw u.errors=l,u}var d={type:Se.derToOid(c.bagId),attributes:ofr(c.bagAttributes)};n.push(d);var p,m,h=c.bagValue.value[0];switch(d.type){case Zi.oids.pkcs8ShroudedKeyBag:if(h=Zi.decryptPrivateKeyInfo(h,r),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Zi.oids.keyBag:try{d.key=Zi.privateKeyFromAsn1(h)}catch{d.key=null,d.asn1=h}continue;case Zi.oids.certBag:p=tfr,m=a(function(){if(Se.derToOid(c.certId)!==Zi.oids.x509Certificate){var A=new Error("Unsupported certificate type, only X.509 supported.");throw A.oid=Se.derToOid(c.certId),A}var y=Se.fromDer(c.cert,e);try{d.cert=Zi.certificateFromAsn1(y,!0)}catch{d.cert=null,d.asn1=y}},"decoder");break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=d.type,u}if(p!==void 0&&!Se.validate(h,p,c,l)){var u=new Error("Cannot read PKCS#12 "+p.name);throw u.errors=l,u}m()}return n}a(ifr,"_decodeSafeContents");function ofr(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},o=[];if(!Se.validate(t[r],efr,n,o)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=o,s}var c=Se.derToOid(n.oid);if(Zi.oids[c]!==void 0){e[Zi.oids[c]]=[];for(var l=0;l<n.values.length;++l)e[Zi.oids[c]].push(n.values[l].value)}}return e}a(ofr,"_decodeBagAttributes");rU.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var o=n.localKeyId,s;if(o!==null)o=Vs.util.hexToBytes(o);else if(n.generateLocalKeyId)if(e){var c=Vs.util.isArray(e)?e[0]:e;typeof c=="string"&&(c=Zi.certificateFromPem(c));var l=Vs.md.sha1.create();l.update(Se.toDer(Zi.certificateToAsn1(c)).getBytes()),o=l.digest().getBytes()}else o=Vs.random.getBytes(20);var u=[];o!==null&&u.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.localKeyId).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,o)])])),"friendlyName"in n&&u.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.friendlyName).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(s=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,u));var d=[],p=[];e!==null&&(Vs.util.isArray(e)?p=e:p=[e]);for(var m=[],h=0;h<p.length;++h){e=p[h],typeof e=="string"&&(e=Zi.certificateFromPem(e));var g=h===0?s:void 0,A=Zi.certificateToAsn1(e),y=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.certBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.x509Certificate).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(A).getBytes())])])]),g]);m.push(y)}if(m.length>0){var v=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,m),b=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(v).getBytes())])]);d.push(b)}var I=null;if(t!==null){var S=Zi.wrapRsaPrivateKey(Zi.privateKeyToAsn1(t));r===null?I=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.keyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[S]),s]):I=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.pkcs8ShroudedKeyBag).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Zi.encryptPrivateKeyInfo(S,r,n)]),s]);var k=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[I]),N=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(k).getBytes())])]);d.push(N)}var F=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,d),O;if(n.useMac){var l=Vs.md.sha1.create(),Y=new Vs.util.ByteBuffer(Vs.random.getBytes(n.saltSize)),z=n.count,t=rU.generateKey(r,Y,3,z,20),V=Vs.hmac.create();V.start(l,t),V.update(Se.toDer(F).getBytes());var U=V.getMac();O=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.sha1).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,U.getBytes())]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Y.getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(z).getBytes())])}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(3).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Zi.oids.data).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,Se.toDer(F).getBytes())])]),O])};rU.generateKey=Vs.pbe.generatePkcs12Key});var Swe=$((Eyi,olt)=>{f();var Sw=ki();ty();Iw();xwe();_k();Vre();wwe();ene();eU();Wo();nne();var _we=Sw.asn1,r8=olt.exports=Sw.pki=Sw.pki||{};r8.pemToDer=function(t){var e=Sw.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Sw.util.createBuffer(e.body)};r8.privateKeyFromPem=function(t){var e=Sw.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=_we.fromDer(e.body);return r8.privateKeyFromAsn1(n)};r8.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:_we.toDer(r8.privateKeyToAsn1(t)).getBytes()};return Sw.pem.encode(r,{maxline:e})};r8.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:_we.toDer(t).getBytes()};return Sw.pem.encode(r,{maxline:e})}});var Nwe=$((Iyi,plt)=>{f();var Dt=ki();ty();zN();$re();_k();Swe();zh();XN();Wo();var ane=a(function(t,e,r,n){var o=Dt.util.createBuffer(),s=t.length>>1,c=s+(t.length&1),l=t.substr(0,c),u=t.substr(s,c),d=Dt.util.createBuffer(),p=Dt.hmac.create();r=e+r;var m=Math.ceil(n/16),h=Math.ceil(n/20);p.start("MD5",l);var g=Dt.util.createBuffer();d.putBytes(r);for(var A=0;A<m;++A)p.start(null,null),p.update(d.getBytes()),d.putBuffer(p.digest()),p.start(null,null),p.update(d.bytes()+r),g.putBuffer(p.digest());p.start("SHA1",u);var y=Dt.util.createBuffer();d.clear(),d.putBytes(r);for(var A=0;A<h;++A)p.start(null,null),p.update(d.getBytes()),d.putBuffer(p.digest()),p.start(null,null),p.update(d.bytes()+r),y.putBuffer(p.digest());return o.putBytes(Dt.util.xorBytes(g.getBytes(),y.getBytes(),n)),o},"prf_TLS1"),sfr=a(function(t,e,r){var n=Dt.hmac.create();n.start("SHA1",t);var o=Dt.util.createBuffer();return o.putInt32(e[0]),o.putInt32(e[1]),o.putByte(r.type),o.putByte(r.version.major),o.putByte(r.version.minor),o.putInt16(r.length),o.putBytes(r.fragment.bytes()),n.update(o.getBytes()),n.digest().getBytes()},"hmac_sha1"),afr=a(function(t,e,r){var n=!1;try{var o=t.deflate(e.fragment.getBytes());e.fragment=Dt.util.createBuffer(o),e.length=o.length,n=!0}catch{}return n},"deflate"),cfr=a(function(t,e,r){var n=!1;try{var o=t.inflate(e.fragment.getBytes());e.fragment=Dt.util.createBuffer(o),e.length=o.length,n=!0}catch{}return n},"inflate"),sm=a(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return Dt.util.createBuffer(t.getBytes(r))},"readVector"),Xh=a(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),ae={};ae.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};ae.SupportedVersions=[ae.Versions.TLS_1_1,ae.Versions.TLS_1_0];ae.Version=ae.SupportedVersions[0];ae.MaxFragment=15360;ae.ConnectionEnd={server:0,client:1};ae.PRFAlgorithm={tls_prf_sha256:0};ae.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};ae.CipherType={stream:0,block:1,aead:2};ae.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};ae.CompressionMethod={none:0,deflate:1};ae.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};ae.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};ae.Alert={};ae.Alert.Level={warning:1,fatal:2};ae.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};ae.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};ae.CipherSuites={};ae.getCipherSuite=function(t){var e=null;for(var r in ae.CipherSuites){var n=ae.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};ae.handleUnexpected=function(t,e){var r=!t.open&&t.entity===ae.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.unexpected_message}})};ae.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(ae.queue(t,ae.createAlert(t,{level:ae.Alert.Level.warning,description:ae.Alert.Description.no_renegotiation})),ae.flush(t)),t.process()};ae.parseHelloMessage=function(t,e,r){var n=null,o=t.entity===ae.ConnectionEnd.client;if(r<38)t.error(t,{message:o?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});else{var s=e.fragment,c=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:Dt.util.createBuffer(s.getBytes(32)),session_id:sm(s,1),extensions:[]},o?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=sm(s,2),n.compression_methods=sm(s,1)),c=r-(c-s.length()),c>0){for(var l=sm(s,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:sm(l,2)});if(!o)for(var u=0;u<n.extensions.length;++u){var d=n.extensions[u];if(d.type[0]===0&&d.type[1]===0)for(var p=sm(d.data,2);p.length()>0;){var m=p.getByte();if(m!==0)break;t.session.extensions.server_name.serverNameList.push(sm(p,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.protocol_version}});if(o)t.session.cipherSuite=ae.getCipherSuite(n.cipher_suite);else for(var h=Dt.util.createBuffer(n.cipher_suites.bytes());h.length()>0&&(t.session.cipherSuite=ae.getCipherSuite(h.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.handshake_failure},cipherSuite:Dt.util.bytesToHex(n.cipher_suite)});o?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=ae.CompressionMethod.none}return n};ae.createSecurityParameters=function(t,e){var r=t.entity===ae.ConnectionEnd.client,n=e.random.bytes(),o=r?t.session.sp.client_random:n,s=r?n:ae.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:ae.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:o,server_random:s}};ae.handleServerHello=function(t,e,r){var n=ae.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.protocol_version}});t.session.version=t.version;var o=n.session_id.bytes();o.length>0&&o===t.session.id?(t.expect=clt,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=ufr,t.session.resuming=!1,ae.createSecurityParameters(t,n)),t.session.id=o,t.process()}};ae.handleClientHello=function(t,e,r){var n=ae.parseHelloMessage(t,e,r);if(!t.fail){var o=n.session_id.bytes(),s=null;if(t.sessionCache&&(s=t.sessionCache.getSession(o),s===null?o="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,o="")),o.length===0&&(o=Dt.random.getBytes(32)),t.session.id=o,t.session.clientHelloVersion=n.version,t.session.sp={},s)t.version=t.session.version=s.version,t.session.sp=s.sp;else{for(var c,l=1;l<ae.SupportedVersions.length&&(c=ae.SupportedVersions[l],!(c.minor<=n.version.minor));++l);t.version={major:c.major,minor:c.minor},t.session.version=t.version}s!==null?(t.expect=Dwe,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?Afr:Pwe,t.session.resuming=!1,ae.createSecurityParameters(t,n)),t.open=!0,ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createServerHello(t)})),t.session.resuming?(ae.queue(t,ae.createRecord(t,{type:ae.ContentType.change_cipher_spec,data:ae.createChangeCipherSpec()})),t.state.pending=ae.createConnectionState(t),t.state.current.write=t.state.pending.write,ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createFinished(t)}))):(ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createCertificate(t)})),t.fail||(ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createServerKeyExchange(t)})),t.verifyClient!==!1&&ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createCertificateRequest(t)})),ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createServerHelloDone(t)})))),ae.flush(t),t.process()}};ae.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});var n=e.fragment,o={certificate_list:sm(n,3)},s,c,l=[];try{for(;o.certificate_list.length()>0;)s=sm(o.certificate_list,3),c=Dt.asn1.fromDer(s),s=Dt.pki.certificateFromAsn1(c,!0),l.push(s)}catch(d){return t.error(t,{message:"Could not parse certificate list.",cause:d,send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.bad_certificate}})}var u=t.entity===ae.ConnectionEnd.client;(u||t.verifyClient===!0)&&l.length===0?t.error(t,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}}):l.length===0?t.expect=u?slt:Pwe:(u?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],ae.verifyCertificateChain(t,l)&&(t.expect=u?slt:Pwe)),t.process()};ae.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.unsupported_certificate}});t.expect=dfr,t.process()};ae.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.unsupported_certificate}});var n=e.fragment,o={enc_pre_master_secret:sm(n,2).getBytes()},s=null;if(t.getPrivateKey)try{s=t.getPrivateKey(t,t.session.serverCertificate),s=Dt.pki.privateKeyFromPem(s)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}})}if(s===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}});try{var c=t.session.sp;c.pre_master_secret=s.decrypt(o.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==c.pre_master_secret.charCodeAt(0)||l.minor!==c.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{c.pre_master_secret=Dt.random.getBytes(48)}t.expect=Dwe,t.session.clientCertificate!==null&&(t.expect=yfr),t.process()};ae.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});var n=e.fragment,o={certificate_types:sm(n,1),certificate_authorities:sm(n,2)};t.session.certificateRequest=o,t.expect=ffr,t.process()};ae.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var o=n.bytes();n.read+=4;var s={signature:sm(n,2).getBytes()},c=Dt.util.createBuffer();c.putBuffer(t.session.md5.digest()),c.putBuffer(t.session.sha1.digest()),c=c.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(c,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(o),t.session.sha1.update(o)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.handshake_failure}})}t.expect=Dwe,t.process()};ae.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.insufficient_security}},o=0,s=t.verify(t,n.alert.description,o,[]);if(s!==!0)return(s||s===0)&&(typeof s=="object"&&!Dt.util.isArray(s)?(s.message&&(n.message=s.message),s.alert&&(n.alert.description=s.alert)):typeof s=="number"&&(n.alert.description=s)),t.error(t,n)}t.session.certificateRequest!==null&&(e=ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createCertificate(t)}),ae.queue(t,e)),e=ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createClientKeyExchange(t)}),ae.queue(t,e),t.expect=hfr;var c=a(function(l,u){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&ae.queue(l,ae.createRecord(l,{type:ae.ContentType.handshake,data:ae.createCertificateVerify(l,u)})),ae.queue(l,ae.createRecord(l,{type:ae.ContentType.change_cipher_spec,data:ae.createChangeCipherSpec()})),l.state.pending=ae.createConnectionState(l),l.state.current.write=l.state.pending.write,ae.queue(l,ae.createRecord(l,{type:ae.ContentType.handshake,data:ae.createFinished(l)})),l.expect=clt,ae.flush(l),l.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return c(t,null);ae.getClientSignature(t,c)};ae.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.illegal_parameter}});var r=t.entity===ae.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=ae.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?pfr:Cfr,t.process()};ae.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var o=n.bytes();n.read+=4;var s=e.fragment.getBytes();n=Dt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var c=t.entity===ae.ConnectionEnd.client,l=c?"server finished":"client finished",u=t.session.sp,d=12,p=ane;if(n=p(u.master_secret,l,n.getBytes(),d),n.getBytes()!==s)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.decrypt_error}});t.session.md5.update(o),t.session.sha1.update(o),(t.session.resuming&&c||!t.session.resuming&&!c)&&(ae.queue(t,ae.createRecord(t,{type:ae.ContentType.change_cipher_spec,data:ae.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,ae.queue(t,ae.createRecord(t,{type:ae.ContentType.handshake,data:ae.createFinished(t)}))),t.expect=c?mfr:vfr,t.handshaking=!1,++t.handshakes,t.peerCertificate=c?t.session.serverCertificate:t.session.clientCertificate,ae.flush(t),t.isConnected=!0,t.connected(t),t.process()};ae.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},o;switch(n.description){case ae.Alert.Description.close_notify:o="Connection closed.";break;case ae.Alert.Description.unexpected_message:o="Unexpected message.";break;case ae.Alert.Description.bad_record_mac:o="Bad record MAC.";break;case ae.Alert.Description.decryption_failed:o="Decryption failed.";break;case ae.Alert.Description.record_overflow:o="Record overflow.";break;case ae.Alert.Description.decompression_failure:o="Decompression failed.";break;case ae.Alert.Description.handshake_failure:o="Handshake failure.";break;case ae.Alert.Description.bad_certificate:o="Bad certificate.";break;case ae.Alert.Description.unsupported_certificate:o="Unsupported certificate.";break;case ae.Alert.Description.certificate_revoked:o="Certificate revoked.";break;case ae.Alert.Description.certificate_expired:o="Certificate expired.";break;case ae.Alert.Description.certificate_unknown:o="Certificate unknown.";break;case ae.Alert.Description.illegal_parameter:o="Illegal parameter.";break;case ae.Alert.Description.unknown_ca:o="Unknown certificate authority.";break;case ae.Alert.Description.access_denied:o="Access denied.";break;case ae.Alert.Description.decode_error:o="Decode error.";break;case ae.Alert.Description.decrypt_error:o="Decrypt error.";break;case ae.Alert.Description.export_restriction:o="Export restriction.";break;case ae.Alert.Description.protocol_version:o="Unsupported protocol version.";break;case ae.Alert.Description.insufficient_security:o="Insufficient security.";break;case ae.Alert.Description.internal_error:o="Internal error.";break;case ae.Alert.Description.user_canceled:o="User canceled.";break;case ae.Alert.Description.no_renegotiation:o="Renegotiation not supported.";break;default:o="Unknown error.";break}if(n.description===ae.Alert.Description.close_notify)return t.close();t.error(t,{message:o,send:!1,origin:t.entity===ae.ConnectionEnd.client?"server":"client",alert:n}),t.process()};ae.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),o=r.getInt24();if(o>r.length())return t.fragmented=e,e.fragment=Dt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var s=r.bytes(o+4);r.read+=4,n in sne[t.entity][t.expect]?(t.entity===ae.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:Dt.md.md5.create(),sha1:Dt.md.sha1.create()}),n!==ae.HandshakeType.hello_request&&n!==ae.HandshakeType.certificate_verify&&n!==ae.HandshakeType.finished&&(t.session.md5.update(s),t.session.sha1.update(s)),sne[t.entity][t.expect][n](t,e,o)):ae.handleUnexpected(t,e)};ae.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};ae.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),o=r.getInt16(),s=r.getBytes(o);if(n===ae.HeartbeatMessageType.heartbeat_request){if(t.handshaking||o>s.length)return t.process();ae.queue(t,ae.createRecord(t,{type:ae.ContentType.heartbeat,data:ae.createHeartbeat(ae.HeartbeatMessageType.heartbeat_response,s)})),ae.flush(t)}else if(n===ae.HeartbeatMessageType.heartbeat_response){if(s!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,Dt.util.createBuffer(s))}t.process()};var lfr=0,ufr=1,slt=2,dfr=3,ffr=4,clt=5,pfr=6,mfr=7,hfr=8,gfr=0,Afr=1,Pwe=2,yfr=3,Dwe=4,Cfr=5,vfr=6,se=ae.handleUnexpected,llt=ae.handleChangeCipherSpec,ad=ae.handleAlert,Uf=ae.handleHandshake,ult=ae.handleApplicationData,cd=ae.handleHeartbeat,Bwe=[];Bwe[ae.ConnectionEnd.client]=[[se,ad,Uf,se,cd],[se,ad,Uf,se,cd],[se,ad,Uf,se,cd],[se,ad,Uf,se,cd],[se,ad,Uf,se,cd],[llt,ad,se,se,cd],[se,ad,Uf,se,cd],[se,ad,Uf,ult,cd],[se,ad,Uf,se,cd]];Bwe[ae.ConnectionEnd.server]=[[se,ad,Uf,se,cd],[se,ad,Uf,se,cd],[se,ad,Uf,se,cd],[se,ad,Uf,se,cd],[llt,ad,se,se,cd],[se,ad,Uf,se,cd],[se,ad,Uf,ult,cd],[se,ad,Uf,se,cd]];var Rw=ae.handleHelloRequest,xfr=ae.handleServerHello,dlt=ae.handleCertificate,alt=ae.handleServerKeyExchange,Rwe=ae.handleCertificateRequest,ine=ae.handleServerHelloDone,flt=ae.handleFinished,sne=[];sne[ae.ConnectionEnd.client]=[[se,se,xfr,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[Rw,se,se,se,se,se,se,se,se,se,se,dlt,alt,Rwe,ine,se,se,se,se,se,se],[Rw,se,se,se,se,se,se,se,se,se,se,se,alt,Rwe,ine,se,se,se,se,se,se],[Rw,se,se,se,se,se,se,se,se,se,se,se,se,Rwe,ine,se,se,se,se,se,se],[Rw,se,se,se,se,se,se,se,se,se,se,se,se,se,ine,se,se,se,se,se,se],[Rw,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[Rw,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,flt],[Rw,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[Rw,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se]];var Efr=ae.handleClientHello,bfr=ae.handleClientKeyExchange,Ifr=ae.handleCertificateVerify;sne[ae.ConnectionEnd.server]=[[se,Efr,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,dlt,se,se,se,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,bfr,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,Ifr,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,flt],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se]];ae.generateKeys=function(t,e){var r=ane,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var o=2*e.mac_key_length+2*e.enc_key_length,s=t.version.major===ae.Versions.TLS_1_0.major&&t.version.minor===ae.Versions.TLS_1_0.minor;s&&(o+=2*e.fixed_iv_length);var c=r(e.master_secret,"key expansion",n,o),l={client_write_MAC_key:c.getBytes(e.mac_key_length),server_write_MAC_key:c.getBytes(e.mac_key_length),client_write_key:c.getBytes(e.enc_key_length),server_write_key:c.getBytes(e.enc_key_length)};return s&&(l.client_write_IV=c.getBytes(e.fixed_iv_length),l.server_write_IV=c.getBytes(e.fixed_iv_length)),l};ae.createConnectionState=function(t){var e=t.entity===ae.ConnectionEnd.client,r=a(function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:a(function(c){return!0},"cipherFunction"),compressionState:null,compressFunction:a(function(c){return!0},"compressFunction"),updateSequenceNumber:a(function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1]},"updateSequenceNumber")};return s},"createMode"),n={read:r(),write:r()};if(n.read.update=function(s,c){return n.read.cipherFunction(c,n.read)?n.read.compressFunction(s,c,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,c){return n.write.compressFunction(s,c,n.write)?n.write.cipherFunction(c,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}}),!s.fail},t.session){var o=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(o),o.keys=ae.generateKeys(t,o),n.read.macKey=e?o.keys.server_write_MAC_key:o.keys.client_write_MAC_key,n.write.macKey=e?o.keys.client_write_MAC_key:o.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,o),o.compression_algorithm){case ae.CompressionMethod.none:break;case ae.CompressionMethod.deflate:n.read.compressFunction=cfr,n.write.compressFunction=afr;break;default:throw new Error("Unsupported compression algorithm.")}}return n};ae.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=Dt.util.createBuffer();return r.putInt32(e),r.putBytes(Dt.random.getBytes(28)),r};ae.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};ae.createAlert=function(t,e){var r=Dt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),ae.createRecord(t,{type:ae.ContentType.alert,data:r})};ae.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=Dt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var o=e.length(),s=Dt.util.createBuffer();s.putByte(ae.CompressionMethod.none);var c=s.length(),l=Dt.util.createBuffer();if(t.virtualHost){var u=Dt.util.createBuffer();u.putByte(0),u.putByte(0);var d=Dt.util.createBuffer();d.putByte(0),Xh(d,2,Dt.util.createBuffer(t.virtualHost));var p=Dt.util.createBuffer();Xh(p,2,d),Xh(u,2,p),l.putBuffer(u)}var m=l.length();m>0&&(m+=2);var h=t.session.id,g=h.length+1+2+4+28+2+o+1+c+m,A=Dt.util.createBuffer();return A.putByte(ae.HandshakeType.client_hello),A.putInt24(g),A.putByte(t.version.major),A.putByte(t.version.minor),A.putBytes(t.session.sp.client_random),Xh(A,1,Dt.util.createBuffer(h)),Xh(A,2,e),Xh(A,1,s),m>0&&Xh(A,2,l),A};ae.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=Dt.util.createBuffer();return n.putByte(ae.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),Xh(n,1,Dt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};ae.createCertificate=function(t){var e=t.entity===ae.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var o=Dt.util.createBuffer();if(r!==null)try{Dt.util.isArray(r)||(r=[r]);for(var s=null,c=0;c<r.length;++c){var l=Dt.pem.decode(r[c])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=l.type,u}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var d=Dt.util.createBuffer(l.body);s===null&&(s=Dt.asn1.fromDer(d.bytes(),!1));var p=Dt.util.createBuffer();Xh(p,3,d),o.putBuffer(p)}r=Dt.pki.certificateFromAsn1(s),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(g){return t.error(t,{message:"Could not send certificate list.",cause:g,send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.bad_certificate}})}var m=3+o.length(),h=Dt.util.createBuffer();return h.putByte(ae.HandshakeType.certificate),h.putInt24(m),Xh(h,3,o),h};ae.createClientKeyExchange=function(t){var e=Dt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(Dt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var o=e.length+2,s=Dt.util.createBuffer();return s.putByte(ae.HandshakeType.client_key_exchange),s.putInt24(o),s.putInt16(e.length),s.putBytes(e),s};ae.createServerKeyExchange=function(t){var e=0,r=Dt.util.createBuffer();return e>0&&(r.putByte(ae.HandshakeType.server_key_exchange),r.putInt24(e)),r};ae.getClientSignature=function(t,e){var r=Dt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,o,s){var c=null;if(n.getPrivateKey)try{c=n.getPrivateKey(n,n.session.clientCertificate),c=Dt.pki.privateKeyFromPem(c)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}})}c===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.internal_error}}):o=c.sign(o,null),s(n,o)},t.getSignature(t,r,e)};ae.createCertificateVerify=function(t,e){var r=e.length+2,n=Dt.util.createBuffer();return n.putByte(ae.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};ae.createCertificateRequest=function(t){var e=Dt.util.createBuffer();e.putByte(1);var r=Dt.util.createBuffer();for(var n in t.caStore.certs){var o=t.caStore.certs[n],s=Dt.pki.distinguishedNameToAsn1(o.subject),c=Dt.asn1.toDer(s);r.putInt16(c.length()),r.putBuffer(c)}var l=1+e.length()+2+r.length(),u=Dt.util.createBuffer();return u.putByte(ae.HandshakeType.certificate_request),u.putInt24(l),Xh(u,1,e),Xh(u,2,r),u};ae.createServerHelloDone=function(t){var e=Dt.util.createBuffer();return e.putByte(ae.HandshakeType.server_hello_done),e.putInt24(0),e};ae.createChangeCipherSpec=function(){var t=Dt.util.createBuffer();return t.putByte(1),t};ae.createFinished=function(t){var e=Dt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===ae.ConnectionEnd.client,n=t.session.sp,o=12,s=ane,c=r?"client finished":"server finished";e=s(n.master_secret,c,e.getBytes(),o);var l=Dt.util.createBuffer();return l.putByte(ae.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};ae.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=Dt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var o=n.length(),s=Math.max(16,o-r-3);return n.putBytes(Dt.random.getBytes(s)),n};ae.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===ae.ContentType.handshake||e.type===ae.ContentType.alert||e.type===ae.ContentType.change_cipher_spec))){if(e.type===ae.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=ae.MaxFragment)n=[e];else{n=[];for(var o=e.fragment.bytes();o.length>ae.MaxFragment;)n.push(ae.createRecord(t,{type:e.type,data:Dt.util.createBuffer(o.slice(0,ae.MaxFragment))})),o=o.slice(ae.MaxFragment);o.length>0&&n.push(ae.createRecord(t,{type:e.type,data:Dt.util.createBuffer(o)}))}for(var s=0;s<n.length&&!t.fail;++s){var c=n[s],l=t.state.current.write;l.update(t,c)&&t.records.push(c)}}};ae.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var kwe=a(function(t){switch(t){case!0:return!0;case Dt.pki.certificateError.bad_certificate:return ae.Alert.Description.bad_certificate;case Dt.pki.certificateError.unsupported_certificate:return ae.Alert.Description.unsupported_certificate;case Dt.pki.certificateError.certificate_revoked:return ae.Alert.Description.certificate_revoked;case Dt.pki.certificateError.certificate_expired:return ae.Alert.Description.certificate_expired;case Dt.pki.certificateError.certificate_unknown:return ae.Alert.Description.certificate_unknown;case Dt.pki.certificateError.unknown_ca:return ae.Alert.Description.unknown_ca;default:return ae.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),Tfr=a(function(t){switch(t){case!0:return!0;case ae.Alert.Description.bad_certificate:return Dt.pki.certificateError.bad_certificate;case ae.Alert.Description.unsupported_certificate:return Dt.pki.certificateError.unsupported_certificate;case ae.Alert.Description.certificate_revoked:return Dt.pki.certificateError.certificate_revoked;case ae.Alert.Description.certificate_expired:return Dt.pki.certificateError.certificate_expired;case ae.Alert.Description.certificate_unknown:return Dt.pki.certificateError.certificate_unknown;case ae.Alert.Description.unknown_ca:return Dt.pki.certificateError.unknown_ca;default:return Dt.pki.certificateError.bad_certificate}},"_alertDescToCertError");ae.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(s,c,l){var u=kwe(s),d=t.verify(t,s,c,l);if(d!==!0){if(typeof d=="object"&&!Dt.util.isArray(d)){var p=new Error("The application rejected the certificate.");throw p.send=!0,p.alert={level:ae.Alert.Level.fatal,description:ae.Alert.Description.bad_certificate},d.message&&(p.message=d.message),d.alert&&(p.alert.description=d.alert),p}d!==s&&(d=Tfr(d))}return d},Dt.pki.verifyCertificateChain(t.caStore,e,r)}catch(s){var o=s;(typeof o!="object"||Dt.util.isArray(o))&&(o={send:!0,alert:{level:ae.Alert.Level.fatal,description:kwe(s)}}),"send"in o||(o.send=!0),"alert"in o||(o.alert={level:ae.Alert.Level.fatal,description:kwe(o.error)}),t.error(t,o)}return!t.fail};ae.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(o){var s=null,c=null;if(o?c=Dt.util.bytesToHex(o):r.order.length>0&&(c=r.order[0]),c!==null&&c in r.cache){s=r.cache[c],delete r.cache[c];for(var l in r.order)if(r.order[l]===c){r.order.splice(l,1);break}}return s},r.setSession=function(o,s){if(r.order.length===r.capacity){var c=r.order.shift();delete r.cache[c]}var c=Dt.util.bytesToHex(o);r.order.push(c),r.cache[c]=s}}return r};ae.createConnection=function(t){var e=null;t.caStore?Dt.util.isArray(t.caStore)?e=Dt.pki.createCaStore(t.caStore):e=t.caStore:e=Dt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in ae.CipherSuites)r.push(ae.CipherSuites[n])}var o=t.server?ae.ConnectionEnd.server:ae.ConnectionEnd.client,s=t.sessionCache?ae.createSessionCache(t.sessionCache):null,c={version:{major:ae.Version.major,minor:ae.Version.minor},entity:o,sessionId:t.sessionId,caStore:e,sessionCache:s,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(p,m,h,g){return m},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:Dt.util.createBuffer(),tlsData:Dt.util.createBuffer(),data:Dt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:a(function(p,m){m.origin=m.origin||(p.entity===ae.ConnectionEnd.client?"client":"server"),m.send&&(ae.queue(p,ae.createAlert(p,m.alert)),ae.flush(p));var h=m.fatal!==!1;h&&(p.fail=!0),t.error(p,m),h&&p.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};c.reset=function(p){c.version={major:ae.Version.major,minor:ae.Version.minor},c.record=null,c.session=null,c.peerCertificate=null,c.state={pending:null,current:null},c.expect=c.entity===ae.ConnectionEnd.client?lfr:gfr,c.fragmented=null,c.records=[],c.open=!1,c.handshakes=0,c.handshaking=!1,c.isConnected=!1,c.fail=!(p||typeof p>"u"),c.input.clear(),c.tlsData.clear(),c.data.clear(),c.state.current=ae.createConnectionState(c)},c.reset();var l=a(function(p,m){var h=m.type-ae.ContentType.change_cipher_spec,g=Bwe[p.entity][p.expect];h in g?g[h](p,m):ae.handleUnexpected(p,m)},"_update"),u=a(function(p){var m=0,h=p.input,g=h.length();if(g<5)m=5-g;else{p.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:Dt.util.createBuffer(),ready:!1};var A=p.record.version.major===p.version.major;A&&p.session&&p.session.version&&(A=p.record.version.minor===p.version.minor),A||p.error(p,{message:"Incompatible TLS version.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.protocol_version}})}return m},"_readRecordHeader"),d=a(function(p){var m=0,h=p.input,g=h.length();if(g<p.record.length)m=p.record.length-g;else{p.record.fragment.putBytes(h.getBytes(p.record.length)),h.compact();var A=p.state.current.read;A.update(p,p.record)&&(p.fragmented!==null&&(p.fragmented.type===p.record.type?(p.fragmented.fragment.putBuffer(p.record.fragment),p.record=p.fragmented):p.error(p,{message:"Invalid fragmented record.",send:!0,alert:{level:ae.Alert.Level.fatal,description:ae.Alert.Description.unexpected_message}})),p.record.ready=!0)}return m},"_readRecord");return c.handshake=function(p){if(c.entity!==ae.ConnectionEnd.client)c.error(c,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(c.handshaking)c.error(c,{message:"Handshake already in progress.",fatal:!1});else{c.fail&&!c.open&&c.handshakes===0&&(c.fail=!1),c.handshaking=!0,p=p||"";var m=null;p.length>0&&(c.sessionCache&&(m=c.sessionCache.getSession(p)),m===null&&(p="")),p.length===0&&c.sessionCache&&(m=c.sessionCache.getSession(),m!==null&&(p=m.id)),c.session={id:p,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:Dt.md.md5.create(),sha1:Dt.md.sha1.create()},m&&(c.version=m.version,c.session.sp=m.sp),c.session.sp.client_random=ae.createRandom().getBytes(),c.open=!0,ae.queue(c,ae.createRecord(c,{type:ae.ContentType.handshake,data:ae.createClientHello(c)})),ae.flush(c)}},c.process=function(p){var m=0;return p&&c.input.putBytes(p),c.fail||(c.record!==null&&c.record.ready&&c.record.fragment.isEmpty()&&(c.record=null),c.record===null&&(m=u(c)),!c.fail&&c.record!==null&&!c.record.ready&&(m=d(c)),!c.fail&&c.record!==null&&c.record.ready&&l(c,c.record)),m},c.prepare=function(p){return ae.queue(c,ae.createRecord(c,{type:ae.ContentType.application_data,data:Dt.util.createBuffer(p)})),ae.flush(c)},c.prepareHeartbeatRequest=function(p,m){return p instanceof Dt.util.ByteBuffer&&(p=p.bytes()),typeof m>"u"&&(m=p.length),c.expectedHeartbeatPayload=p,ae.queue(c,ae.createRecord(c,{type:ae.ContentType.heartbeat,data:ae.createHeartbeat(ae.HeartbeatMessageType.heartbeat_request,p,m)})),ae.flush(c)},c.close=function(p){if(!c.fail&&c.sessionCache&&c.session){var m={id:c.session.id,version:c.session.version,sp:c.session.sp};m.sp.keys=null,c.sessionCache.setSession(m.id,m)}c.open&&(c.open=!1,c.input.clear(),(c.isConnected||c.handshaking)&&(c.isConnected=c.handshaking=!1,ae.queue(c,ae.createAlert(c,{level:ae.Alert.Level.warning,description:ae.Alert.Description.close_notify})),ae.flush(c)),c.closed(c)),c.reset(p)},c};plt.exports=Dt.tls=Dt.tls||{};for(one in ae)typeof ae[one]!="function"&&(Dt.tls[one]=ae[one]);var one;Dt.tls.prf_tls1=ane;Dt.tls.hmac_sha1=sfr;Dt.tls.createSessionCache=ae.createSessionCache;Dt.tls.createConnection=ae.createConnection});var glt=$((_yi,hlt)=>{f();var kw=ki();bw();Nwe();var Zh=hlt.exports=kw.tls;Zh.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:a(function(t){t.bulk_cipher_algorithm=Zh.BulkCipherAlgorithm.aes,t.cipher_type=Zh.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Zh.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:mlt};Zh.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:a(function(t){t.bulk_cipher_algorithm=Zh.BulkCipherAlgorithm.aes,t.cipher_type=Zh.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Zh.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:mlt};function mlt(t,e,r){var n=e.entity===kw.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:kw.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:kw.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=Rfr,t.write.cipherFunction=wfr,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Zh.hmac_sha1}a(mlt,"initConnectionState");function wfr(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var o;t.version.minor===Zh.Versions.TLS_1_0.minor?o=e.cipherState.init?null:e.cipherState.iv:o=kw.random.getBytesSync(16),e.cipherState.init=!0;var s=e.cipherState.cipher;return s.start({iv:o}),t.version.minor>=Zh.Versions.TLS_1_1.minor&&s.output.putBytes(o),s.update(t.fragment),s.finish(_fr)&&(t.fragment=s.output,t.length=t.fragment.length(),r=!0),r}a(wfr,"encrypt_aes_cbc_sha1");function _fr(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}a(_fr,"encrypt_aes_cbc_sha1_padding");function Sfr(t,e,r){var n=!0;if(r){for(var o=e.length(),s=e.last(),c=o-1-s;c<o-1;++c)n=n&&e.at(c)==s;n&&e.truncate(s+1)}return n}a(Sfr,"decrypt_aes_cbc_sha1_padding");function Rfr(t,e){var r=!1,n;t.version.minor===Zh.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var o=e.cipherState.cipher;o.start({iv:n}),o.update(t.fragment),r=o.finish(Sfr);var s=e.macLength,c=kw.random.getBytesSync(s),l=o.output.length();l>=s?(t.fragment=o.output.getBytes(l-s),c=o.output.getBytes(s)):t.fragment=o.output.getBytes(),t.fragment=kw.util.createBuffer(t.fragment),t.length=t.fragment.length();var u=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=kfr(e.macKey,c,u)&&r,r}a(Rfr,"decrypt_aes_cbc_sha1");function kfr(t,e,r){var n=kw.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}a(kfr,"compareMacs")});var Fwe=$((kyi,vlt)=>{f();var ma=ki();m1();Wo();var nU=vlt.exports=ma.sha512=ma.sha512||{};ma.md.sha512=ma.md.algorithms.sha512=nU;var ylt=ma.sha384=ma.sha512.sha384=ma.sha512.sha384||{};ylt.create=function(){return nU.create("SHA-384")};ma.md.sha384=ma.md.algorithms.sha384=ylt;ma.sha512.sha256=ma.sha512.sha256||{create:a(function(){return nU.create("SHA-512/256")},"create")};ma.md["sha512/256"]=ma.md.algorithms["sha512/256"]=ma.sha512.sha256;ma.sha512.sha224=ma.sha512.sha224||{create:a(function(){return nU.create("SHA-512/224")},"create")};ma.md["sha512/224"]=ma.md.algorithms["sha512/224"]=ma.sha512.sha224;nU.create=function(t){if(Clt||Pfr(),typeof t>"u"&&(t="SHA-512"),!(t in Bk))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Bk[t],r=null,n=ma.util.createBuffer(),o=new Array(80),s=0;s<80;++s)o[s]=new Array(2);var c=64;switch(t){case"SHA-384":c=48;break;case"SHA-512/256":c=32;break;case"SHA-512/224":c=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:c,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var u=l.messageLengthSize/4,d=0;d<u;++d)l.fullMessageLength.push(0);n=ma.util.createBuffer(),r=new Array(e.length);for(var d=0;d<e.length;++d)r[d]=e[d].slice(0);return l},l.start(),l.update=function(u,d){d==="utf8"&&(u=ma.util.encodeUtf8(u));var p=u.length;l.messageLength+=p,p=[p/4294967296>>>0,p>>>0];for(var m=l.fullMessageLength.length-1;m>=0;--m)l.fullMessageLength[m]+=p[1],p[1]=p[0]+(l.fullMessageLength[m]/4294967296>>>0),l.fullMessageLength[m]=l.fullMessageLength[m]>>>0,p[0]=p[1]/4294967296>>>0;return n.putBytes(u),Alt(r,o,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var u=ma.util.createBuffer();u.putBytes(n.bytes());var d=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,p=d&l.blockLength-1;u.putBytes(Mwe.substr(0,l.blockLength-p));for(var m,h,g=l.fullMessageLength[0]*8,A=0;A<l.fullMessageLength.length-1;++A)m=l.fullMessageLength[A+1]*8,h=m/4294967296>>>0,g+=h,u.putInt32(g>>>0),g=m>>>0;u.putInt32(g);for(var y=new Array(r.length),A=0;A<r.length;++A)y[A]=r[A].slice(0);Alt(y,o,u);var v=ma.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var A=0;A<b;++A)v.putInt32(y[A][0]),(A!==b-1||t!=="SHA-512/224")&&v.putInt32(y[A][1]);return v},l};var Mwe=null,Clt=!1,Lwe=null,Bk=null;function Pfr(){Mwe="\x80",Mwe+=ma.util.fillString("\0",128),Lwe=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Bk={},Bk["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Bk["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Bk["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Bk["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Clt=!0}a(Pfr,"_init");function Alt(t,e,r){for(var n,o,s,c,l,u,d,p,m,h,g,A,y,v,b,I,S,k,N,F,O,Y,z,V,U,H,ee,J,G,j,Z,ie,ne,re,fe,ye=r.length();ye>=128;){for(G=0;G<16;++G)e[G][0]=r.getInt32()>>>0,e[G][1]=r.getInt32()>>>0;for(;G<80;++G)ie=e[G-2],j=ie[0],Z=ie[1],n=((j>>>19|Z<<13)^(Z>>>29|j<<3)^j>>>6)>>>0,o=((j<<13|Z>>>19)^(Z<<3|j>>>29)^(j<<26|Z>>>6))>>>0,re=e[G-15],j=re[0],Z=re[1],s=((j>>>1|Z<<31)^(j>>>8|Z<<24)^j>>>7)>>>0,c=((j<<31|Z>>>1)^(j<<24|Z>>>8)^(j<<25|Z>>>7))>>>0,ne=e[G-7],fe=e[G-16],Z=o+ne[1]+c+fe[1],e[G][0]=n+ne[0]+s+fe[0]+(Z/4294967296>>>0)>>>0,e[G][1]=Z>>>0;for(y=t[0][0],v=t[0][1],b=t[1][0],I=t[1][1],S=t[2][0],k=t[2][1],N=t[3][0],F=t[3][1],O=t[4][0],Y=t[4][1],z=t[5][0],V=t[5][1],U=t[6][0],H=t[6][1],ee=t[7][0],J=t[7][1],G=0;G<80;++G)d=((O>>>14|Y<<18)^(O>>>18|Y<<14)^(Y>>>9|O<<23))>>>0,p=((O<<18|Y>>>14)^(O<<14|Y>>>18)^(Y<<23|O>>>9))>>>0,m=(U^O&(z^U))>>>0,h=(H^Y&(V^H))>>>0,l=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,u=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,g=(y&b|S&(y^b))>>>0,A=(v&I|k&(v^I))>>>0,Z=J+p+h+Lwe[G][1]+e[G][1],n=ee+d+m+Lwe[G][0]+e[G][0]+(Z/4294967296>>>0)>>>0,o=Z>>>0,Z=u+A,s=l+g+(Z/4294967296>>>0)>>>0,c=Z>>>0,ee=U,J=H,U=z,H=V,z=O,V=Y,Z=F+o,O=N+n+(Z/4294967296>>>0)>>>0,Y=Z>>>0,N=S,F=k,S=b,k=I,b=y,I=v,Z=o+c,y=n+s+(Z/4294967296>>>0)>>>0,v=Z>>>0;Z=t[0][1]+v,t[0][0]=t[0][0]+y+(Z/4294967296>>>0)>>>0,t[0][1]=Z>>>0,Z=t[1][1]+I,t[1][0]=t[1][0]+b+(Z/4294967296>>>0)>>>0,t[1][1]=Z>>>0,Z=t[2][1]+k,t[2][0]=t[2][0]+S+(Z/4294967296>>>0)>>>0,t[2][1]=Z>>>0,Z=t[3][1]+F,t[3][0]=t[3][0]+N+(Z/4294967296>>>0)>>>0,t[3][1]=Z>>>0,Z=t[4][1]+Y,t[4][0]=t[4][0]+O+(Z/4294967296>>>0)>>>0,t[4][1]=Z>>>0,Z=t[5][1]+V,t[5][0]=t[5][0]+z+(Z/4294967296>>>0)>>>0,t[5][1]=Z>>>0,Z=t[6][1]+H,t[6][0]=t[6][0]+U+(Z/4294967296>>>0)>>>0,t[6][1]=Z>>>0,Z=t[7][1]+J,t[7][0]=t[7][0]+ee+(Z/4294967296>>>0)>>>0,t[7][1]=Z>>>0,ye-=128}}a(Alt,"_update")});var xlt=$(Owe=>{f();var Dfr=ki();ty();var bu=Dfr.asn1;Owe.privateKeyValidator={name:"PrivateKeyInfo",tagClass:bu.Class.UNIVERSAL,type:bu.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:bu.Class.UNIVERSAL,type:bu.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:bu.Class.UNIVERSAL,type:bu.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:bu.Class.UNIVERSAL,type:bu.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:bu.Class.UNIVERSAL,type:bu.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Owe.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:bu.Class.UNIVERSAL,type:bu.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:bu.Class.UNIVERSAL,type:bu.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:bu.Class.UNIVERSAL,type:bu.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:bu.Class.UNIVERSAL,type:bu.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Nlt=$((Myi,Blt)=>{f();var ld=ki();ZQ();zh();Fwe();Wo();var _lt=xlt(),Bfr=_lt.publicKeyValidator,Nfr=_lt.privateKeyValidator;typeof Elt>"u"&&(Elt=ld.jsbn.BigInteger);var Elt,qwe=ld.util.ByteBuffer,Wp=typeof Buffer>"u"?Uint8Array:Buffer;ld.pki=ld.pki||{};Blt.exports=ld.pki.ed25519=ld.ed25519=ld.ed25519||{};var eo=ld.ed25519;eo.constants={};eo.constants.PUBLIC_KEY_BYTE_LENGTH=32;eo.constants.PRIVATE_KEY_BYTE_LENGTH=64;eo.constants.SEED_BYTE_LENGTH=32;eo.constants.SIGN_BYTE_LENGTH=64;eo.constants.HASH_BYTE_LENGTH=64;eo.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=ld.random.getBytesSync(eo.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==eo.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+eo.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=iE({message:e,encoding:"binary"});for(var r=new Wp(eo.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Wp(eo.constants.PRIVATE_KEY_BYTE_LENGTH),o=0;o<32;++o)n[o]=e[o];return Ofr(r,n),{publicKey:r,privateKey:n}};eo.privateKeyFromAsn1=function(t){var e={},r=[],n=ld.asn1.validate(t,Nfr,e,r);if(!n){var o=new Error("Invalid Key.");throw o.errors=r,o}var s=ld.asn1.derToOid(e.privateKeyOid),c=ld.oids.EdDSA25519;if(s!==c)throw new Error('Invalid OID "'+s+'"; OID must be "'+c+'".');var l=e.privateKey,u=iE({message:ld.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:u}};eo.publicKeyFromAsn1=function(t){var e={},r=[],n=ld.asn1.validate(t,Bfr,e,r);if(!n){var o=new Error("Invalid Key.");throw o.errors=r,o}var s=ld.asn1.derToOid(e.publicKeyOid),c=ld.oids.EdDSA25519;if(s!==c)throw new Error('Invalid OID "'+s+'"; OID must be "'+c+'".');var l=e.ed25519PublicKey;if(l.length!==eo.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return iE({message:l,encoding:"binary"})};eo.publicKeyFromPrivateKey=function(t){t=t||{};var e=iE({message:t.privateKey,encoding:"binary"});if(e.length!==eo.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+eo.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Wp(eo.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};eo.sign=function(t){t=t||{};var e=iE(t),r=iE({message:t.privateKey,encoding:"binary"});if(r.length===eo.constants.SEED_BYTE_LENGTH){var n=eo.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==eo.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+eo.constants.SEED_BYTE_LENGTH+" or "+eo.constants.PRIVATE_KEY_BYTE_LENGTH);var o=new Wp(eo.constants.SIGN_BYTE_LENGTH+e.length);Qfr(o,e,e.length,r);for(var s=new Wp(eo.constants.SIGN_BYTE_LENGTH),c=0;c<s.length;++c)s[c]=o[c];return s};eo.verify=function(t){t=t||{};var e=iE(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=iE({message:t.signature,encoding:"binary"});if(r.length!==eo.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+eo.constants.SIGN_BYTE_LENGTH);var n=iE({message:t.publicKey,encoding:"binary"});if(n.length!==eo.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+eo.constants.PUBLIC_KEY_BYTE_LENGTH);var o=new Wp(eo.constants.SIGN_BYTE_LENGTH+e.length),s=new Wp(eo.constants.SIGN_BYTE_LENGTH+e.length),c;for(c=0;c<eo.constants.SIGN_BYTE_LENGTH;++c)o[c]=r[c];for(c=0;c<e.length;++c)o[c+eo.constants.SIGN_BYTE_LENGTH]=e[c];return Ufr(s,o,o.length,n)>=0};function iE(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Wp)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new qwe(e,r)}else if(!(e instanceof qwe))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Wp(e.length()),o=0;o<n.length;++o)n[o]=e.at(o);return n}a(iE,"messageToNativeBuffer");var Hwe=Fn(),cne=Fn([1]),Mfr=Fn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Lfr=Fn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),blt=Fn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Ilt=Fn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Qwe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Ffr=Fn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function iU(t,e){var r=ld.md.sha512.create(),n=new qwe(t);r.update(n.getBytes(e),"binary");var o=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(o,"binary");for(var s=new Wp(eo.constants.HASH_BYTE_LENGTH),c=0;c<64;++c)s[c]=o.charCodeAt(c);return s}a(iU,"sha512");function Ofr(t,e){var r=[Fn(),Fn(),Fn(),Fn()],n,o=iU(e,32);for(o[0]&=248,o[31]&=127,o[31]|=64,Gwe(r,o),jwe(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}a(Ofr,"crypto_sign_keypair");function Qfr(t,e,r,n){var o,s,c=new Float64Array(64),l=[Fn(),Fn(),Fn(),Fn()],u=iU(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var d=r+64;for(o=0;o<r;++o)t[64+o]=e[o];for(o=0;o<32;++o)t[32+o]=u[32+o];var p=iU(t.subarray(32),r+32);for($we(p),Gwe(l,p),jwe(t,l),o=32;o<64;++o)t[o]=n[o];var m=iU(t,r+64);for($we(m),o=32;o<64;++o)c[o]=0;for(o=0;o<32;++o)c[o]=p[o];for(o=0;o<32;++o)for(s=0;s<32;s++)c[o+s]+=m[o]*u[s];return Slt(t.subarray(32),c),d}a(Qfr,"crypto_sign");function Ufr(t,e,r,n){var o,s,c=new Wp(32),l=[Fn(),Fn(),Fn(),Fn()],u=[Fn(),Fn(),Fn(),Fn()];if(s=-1,r<64||qfr(u,n))return-1;for(o=0;o<r;++o)t[o]=e[o];for(o=0;o<32;++o)t[o+32]=n[o];var d=iU(t,r);if($we(d),Plt(l,u,d),Gwe(u,e.subarray(32)),Wwe(l,u),jwe(c,l),r-=64,Rlt(e,0,c,0)){for(o=0;o<r;++o)t[o]=0;return-1}for(o=0;o<r;++o)t[o]=e[o+64];return s=r,s}a(Ufr,"crypto_sign_open");function Slt(t,e){var r,n,o,s;for(n=63;n>=32;--n){for(r=0,o=n-32,s=n-12;o<s;++o)e[o]+=r-16*e[n]*Qwe[o-(n-32)],r=e[o]+128>>8,e[o]-=r*256;e[o]+=r,e[n]=0}for(r=0,o=0;o<32;++o)e[o]+=r-(e[31]>>4)*Qwe[o],r=e[o]>>8,e[o]&=255;for(o=0;o<32;++o)e[o]-=r*Qwe[o];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}a(Slt,"modL");function $we(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;Slt(t,e)}a($we,"reduce");function Wwe(t,e){var r=Fn(),n=Fn(),o=Fn(),s=Fn(),c=Fn(),l=Fn(),u=Fn(),d=Fn(),p=Fn();i8(r,t[1],t[0]),i8(p,e[1],e[0]),Ds(r,r,p),n8(n,t[0],t[1]),n8(p,e[0],e[1]),Ds(n,n,p),Ds(o,t[3],e[3]),Ds(o,o,Lfr),Ds(s,t[2],e[2]),n8(s,s,s),i8(c,n,r),i8(l,s,o),n8(u,s,o),n8(d,n,r),Ds(t[0],c,l),Ds(t[1],d,u),Ds(t[2],u,l),Ds(t[3],c,d)}a(Wwe,"add");function Tlt(t,e,r){for(var n=0;n<4;++n)Dlt(t[n],e[n],r)}a(Tlt,"cswap");function jwe(t,e){var r=Fn(),n=Fn(),o=Fn();jfr(o,e[2]),Ds(r,e[0],o),Ds(n,e[1],o),lne(t,n),t[31]^=klt(r)<<7}a(jwe,"pack");function lne(t,e){var r,n,o,s=Fn(),c=Fn();for(r=0;r<16;++r)c[r]=e[r];for(Uwe(c),Uwe(c),Uwe(c),n=0;n<2;++n){for(s[0]=c[0]-65517,r=1;r<15;++r)s[r]=c[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=c[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,Dlt(c,s,1-o)}for(r=0;r<16;r++)t[2*r]=c[r]&255,t[2*r+1]=c[r]>>8}a(lne,"pack25519");function qfr(t,e){var r=Fn(),n=Fn(),o=Fn(),s=Fn(),c=Fn(),l=Fn(),u=Fn();return Pw(t[2],cne),Hfr(t[1],e),Nk(o,t[1]),Ds(s,o,Mfr),i8(o,o,t[2]),n8(s,t[2],s),Nk(c,s),Nk(l,c),Ds(u,l,c),Ds(r,u,o),Ds(r,r,s),$fr(r,r),Ds(r,r,o),Ds(r,r,s),Ds(r,r,s),Ds(t[0],r,s),Nk(n,t[0]),Ds(n,n,s),wlt(n,o)&&Ds(t[0],t[0],Ffr),Nk(n,t[0]),Ds(n,n,s),wlt(n,o)?-1:(klt(t[0])===e[31]>>7&&i8(t[0],Hwe,t[0]),Ds(t[3],t[0],t[1]),0)}a(qfr,"unpackneg");function Hfr(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}a(Hfr,"unpack25519");function $fr(t,e){var r=Fn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)Nk(r,r),n!==1&&Ds(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}a($fr,"pow2523");function wlt(t,e){var r=new Wp(32),n=new Wp(32);return lne(r,t),lne(n,e),Rlt(r,0,n,0)}a(wlt,"neq25519");function Rlt(t,e,r,n){return Wfr(t,e,r,n,32)}a(Rlt,"crypto_verify_32");function Wfr(t,e,r,n,o){var s,c=0;for(s=0;s<o;++s)c|=t[e+s]^r[n+s];return(1&c-1>>>8)-1}a(Wfr,"vn");function klt(t){var e=new Wp(32);return lne(e,t),e[0]&1}a(klt,"par25519");function Plt(t,e,r){var n,o;for(Pw(t[0],Hwe),Pw(t[1],cne),Pw(t[2],cne),Pw(t[3],Hwe),o=255;o>=0;--o)n=r[o/8|0]>>(o&7)&1,Tlt(t,e,n),Wwe(e,t),Wwe(t,t),Tlt(t,e,n)}a(Plt,"scalarmult");function Gwe(t,e){var r=[Fn(),Fn(),Fn(),Fn()];Pw(r[0],blt),Pw(r[1],Ilt),Pw(r[2],cne),Ds(r[3],blt,Ilt),Plt(t,r,e)}a(Gwe,"scalarbase");function Pw(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}a(Pw,"set25519");function jfr(t,e){var r=Fn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)Nk(r,r),n!==2&&n!==4&&Ds(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}a(jfr,"inv25519");function Uwe(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}a(Uwe,"car25519");function Dlt(t,e,r){for(var n,o=~(r-1),s=0;s<16;++s)n=o&(t[s]^e[s]),t[s]^=n,e[s]^=n}a(Dlt,"sel25519");function Fn(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}a(Fn,"gf");function n8(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}a(n8,"A");function i8(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}a(i8,"Z");function Nk(t,e){Ds(t,e,e)}a(Nk,"S");function Ds(t,e,r){var n,o,s=0,c=0,l=0,u=0,d=0,p=0,m=0,h=0,g=0,A=0,y=0,v=0,b=0,I=0,S=0,k=0,N=0,F=0,O=0,Y=0,z=0,V=0,U=0,H=0,ee=0,J=0,G=0,j=0,Z=0,ie=0,ne=0,re=r[0],fe=r[1],ye=r[2],Qe=r[3],we=r[4],Xe=r[5],Oe=r[6],ut=r[7],Rt=r[8],Et=r[9],At=r[10],de=r[11],qe=r[12],Ce=r[13],We=r[14],ce=r[15];n=e[0],s+=n*re,c+=n*fe,l+=n*ye,u+=n*Qe,d+=n*we,p+=n*Xe,m+=n*Oe,h+=n*ut,g+=n*Rt,A+=n*Et,y+=n*At,v+=n*de,b+=n*qe,I+=n*Ce,S+=n*We,k+=n*ce,n=e[1],c+=n*re,l+=n*fe,u+=n*ye,d+=n*Qe,p+=n*we,m+=n*Xe,h+=n*Oe,g+=n*ut,A+=n*Rt,y+=n*Et,v+=n*At,b+=n*de,I+=n*qe,S+=n*Ce,k+=n*We,N+=n*ce,n=e[2],l+=n*re,u+=n*fe,d+=n*ye,p+=n*Qe,m+=n*we,h+=n*Xe,g+=n*Oe,A+=n*ut,y+=n*Rt,v+=n*Et,b+=n*At,I+=n*de,S+=n*qe,k+=n*Ce,N+=n*We,F+=n*ce,n=e[3],u+=n*re,d+=n*fe,p+=n*ye,m+=n*Qe,h+=n*we,g+=n*Xe,A+=n*Oe,y+=n*ut,v+=n*Rt,b+=n*Et,I+=n*At,S+=n*de,k+=n*qe,N+=n*Ce,F+=n*We,O+=n*ce,n=e[4],d+=n*re,p+=n*fe,m+=n*ye,h+=n*Qe,g+=n*we,A+=n*Xe,y+=n*Oe,v+=n*ut,b+=n*Rt,I+=n*Et,S+=n*At,k+=n*de,N+=n*qe,F+=n*Ce,O+=n*We,Y+=n*ce,n=e[5],p+=n*re,m+=n*fe,h+=n*ye,g+=n*Qe,A+=n*we,y+=n*Xe,v+=n*Oe,b+=n*ut,I+=n*Rt,S+=n*Et,k+=n*At,N+=n*de,F+=n*qe,O+=n*Ce,Y+=n*We,z+=n*ce,n=e[6],m+=n*re,h+=n*fe,g+=n*ye,A+=n*Qe,y+=n*we,v+=n*Xe,b+=n*Oe,I+=n*ut,S+=n*Rt,k+=n*Et,N+=n*At,F+=n*de,O+=n*qe,Y+=n*Ce,z+=n*We,V+=n*ce,n=e[7],h+=n*re,g+=n*fe,A+=n*ye,y+=n*Qe,v+=n*we,b+=n*Xe,I+=n*Oe,S+=n*ut,k+=n*Rt,N+=n*Et,F+=n*At,O+=n*de,Y+=n*qe,z+=n*Ce,V+=n*We,U+=n*ce,n=e[8],g+=n*re,A+=n*fe,y+=n*ye,v+=n*Qe,b+=n*we,I+=n*Xe,S+=n*Oe,k+=n*ut,N+=n*Rt,F+=n*Et,O+=n*At,Y+=n*de,z+=n*qe,V+=n*Ce,U+=n*We,H+=n*ce,n=e[9],A+=n*re,y+=n*fe,v+=n*ye,b+=n*Qe,I+=n*we,S+=n*Xe,k+=n*Oe,N+=n*ut,F+=n*Rt,O+=n*Et,Y+=n*At,z+=n*de,V+=n*qe,U+=n*Ce,H+=n*We,ee+=n*ce,n=e[10],y+=n*re,v+=n*fe,b+=n*ye,I+=n*Qe,S+=n*we,k+=n*Xe,N+=n*Oe,F+=n*ut,O+=n*Rt,Y+=n*Et,z+=n*At,V+=n*de,U+=n*qe,H+=n*Ce,ee+=n*We,J+=n*ce,n=e[11],v+=n*re,b+=n*fe,I+=n*ye,S+=n*Qe,k+=n*we,N+=n*Xe,F+=n*Oe,O+=n*ut,Y+=n*Rt,z+=n*Et,V+=n*At,U+=n*de,H+=n*qe,ee+=n*Ce,J+=n*We,G+=n*ce,n=e[12],b+=n*re,I+=n*fe,S+=n*ye,k+=n*Qe,N+=n*we,F+=n*Xe,O+=n*Oe,Y+=n*ut,z+=n*Rt,V+=n*Et,U+=n*At,H+=n*de,ee+=n*qe,J+=n*Ce,G+=n*We,j+=n*ce,n=e[13],I+=n*re,S+=n*fe,k+=n*ye,N+=n*Qe,F+=n*we,O+=n*Xe,Y+=n*Oe,z+=n*ut,V+=n*Rt,U+=n*Et,H+=n*At,ee+=n*de,J+=n*qe,G+=n*Ce,j+=n*We,Z+=n*ce,n=e[14],S+=n*re,k+=n*fe,N+=n*ye,F+=n*Qe,O+=n*we,Y+=n*Xe,z+=n*Oe,V+=n*ut,U+=n*Rt,H+=n*Et,ee+=n*At,J+=n*de,G+=n*qe,j+=n*Ce,Z+=n*We,ie+=n*ce,n=e[15],k+=n*re,N+=n*fe,F+=n*ye,O+=n*Qe,Y+=n*we,z+=n*Xe,V+=n*Oe,U+=n*ut,H+=n*Rt,ee+=n*Et,J+=n*At,G+=n*de,j+=n*qe,Z+=n*Ce,ie+=n*We,ne+=n*ce,s+=38*N,c+=38*F,l+=38*O,u+=38*Y,d+=38*z,p+=38*V,m+=38*U,h+=38*H,g+=38*ee,A+=38*J,y+=38*G,v+=38*j,b+=38*Z,I+=38*ie,S+=38*ne,o=1,n=s+o+65535,o=Math.floor(n/65536),s=n-o*65536,n=c+o+65535,o=Math.floor(n/65536),c=n-o*65536,n=l+o+65535,o=Math.floor(n/65536),l=n-o*65536,n=u+o+65535,o=Math.floor(n/65536),u=n-o*65536,n=d+o+65535,o=Math.floor(n/65536),d=n-o*65536,n=p+o+65535,o=Math.floor(n/65536),p=n-o*65536,n=m+o+65535,o=Math.floor(n/65536),m=n-o*65536,n=h+o+65535,o=Math.floor(n/65536),h=n-o*65536,n=g+o+65535,o=Math.floor(n/65536),g=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=y+o+65535,o=Math.floor(n/65536),y=n-o*65536,n=v+o+65535,o=Math.floor(n/65536),v=n-o*65536,n=b+o+65535,o=Math.floor(n/65536),b=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=S+o+65535,o=Math.floor(n/65536),S=n-o*65536,n=k+o+65535,o=Math.floor(n/65536),k=n-o*65536,s+=o-1+37*(o-1),o=1,n=s+o+65535,o=Math.floor(n/65536),s=n-o*65536,n=c+o+65535,o=Math.floor(n/65536),c=n-o*65536,n=l+o+65535,o=Math.floor(n/65536),l=n-o*65536,n=u+o+65535,o=Math.floor(n/65536),u=n-o*65536,n=d+o+65535,o=Math.floor(n/65536),d=n-o*65536,n=p+o+65535,o=Math.floor(n/65536),p=n-o*65536,n=m+o+65535,o=Math.floor(n/65536),m=n-o*65536,n=h+o+65535,o=Math.floor(n/65536),h=n-o*65536,n=g+o+65535,o=Math.floor(n/65536),g=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=y+o+65535,o=Math.floor(n/65536),y=n-o*65536,n=v+o+65535,o=Math.floor(n/65536),v=n-o*65536,n=b+o+65535,o=Math.floor(n/65536),b=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=S+o+65535,o=Math.floor(n/65536),S=n-o*65536,n=k+o+65535,o=Math.floor(n/65536),k=n-o*65536,s+=o-1+37*(o-1),t[0]=s,t[1]=c,t[2]=l,t[3]=u,t[4]=d,t[5]=p,t[6]=m,t[7]=h,t[8]=g,t[9]=A,t[10]=y,t[11]=v,t[12]=b,t[13]=I,t[14]=S,t[15]=k}a(Ds,"M")});var Olt=$((Oyi,Flt)=>{f();var am=ki();Wo();zh();ZQ();Flt.exports=am.kem=am.kem||{};var Mlt=am.jsbn.BigInteger;am.kem.rsa={};am.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||am.random,n={};return n.encrypt=function(o,s){var c=Math.ceil(o.n.bitLength()/8),l;do l=new Mlt(am.util.bytesToHex(r.getBytesSync(c)),16).mod(o.n);while(l.compareTo(Mlt.ONE)<=0);l=am.util.hexToBytes(l.toString(16));var u=c-l.length;u>0&&(l=am.util.fillString("\0",u)+l);var d=o.encrypt(l,"NONE"),p=t.generate(l,s);return{encapsulation:d,key:p}},n.decrypt=function(o,s,c){var l=o.decrypt(s,"NONE");return t.generate(l,c)},n};am.kem.kdf1=function(t,e){Llt(this,t,0,e||t.digestLength)};am.kem.kdf2=function(t,e){Llt(this,t,1,e||t.digestLength)};function Llt(t,e,r,n){t.generate=function(o,s){for(var c=new am.util.ByteBuffer,l=Math.ceil(s/n)+r,u=new am.util.ByteBuffer,d=r;d<l;++d){u.putInt32(d),e.start(),e.update(o+u.getBytes());var p=e.digest();c.putBytes(p.getBytes(n))}return c.truncate(c.length()-s),c.getBytes()}}a(Llt,"_createKDF")});var Hlt=$((qyi,qlt)=>{f();var go=ki();Wo();qlt.exports=go.log=go.log||{};go.log.levels=["none","error","warning","info","debug","verbose","max"];var une={},Kwe=[],sU=null;go.log.LEVEL_LOCKED=2;go.log.NO_LEVEL_CHECK=4;go.log.INTERPOLATE=8;for(E1=0;E1<go.log.levels.length;++E1)Vwe=go.log.levels[E1],une[Vwe]={index:E1,name:Vwe.toUpperCase()};var Vwe,E1;go.log.logMessage=function(t){for(var e=une[t.level].index,r=0;r<Kwe.length;++r){var n=Kwe[r];if(n.flags&go.log.NO_LEVEL_CHECK)n.f(t);else{var o=une[n.level].index;e<=o&&n.f(n,t)}}};go.log.prepareStandard=function(t){"standard"in t||(t.standard=une[t.level].name+" ["+t.category+"] "+t.message)};go.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=go.util.format.apply(this,e)}};go.log.prepareStandardFull=function(t){"standardFull"in t||(go.log.prepareStandard(t),t.standardFull=t.standard)};for(zwe=["error","warning","info","debug","verbose"],E1=0;E1<zwe.length;++E1)(function(e){go.log[e]=function(r,n){var o=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:e,category:r,message:n,arguments:o};go.log.logMessage(s)}})(zwe[E1]);var zwe,E1;go.log.makeLogger=function(t){var e={flags:0,f:t};return go.log.setLevel(e,"none"),e};go.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&go.log.LEVEL_LOCKED))for(var n=0;n<go.log.levels.length;++n){var o=go.log.levels[n];if(e==o){t.level=e,r=!0;break}}return r};go.log.lock=function(t,e){typeof e>"u"||e?t.flags|=go.log.LEVEL_LOCKED:t.flags&=~go.log.LEVEL_LOCKED};go.log.addLogger=function(t){Kwe.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Qlt={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},aU=a(function(t,e){go.log.prepareStandard(e);var r=Qlt[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),o8=go.log.makeLogger(aU)):(aU=a(function(e,r){go.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),o8=go.log.makeLogger(aU)),go.log.setLevel(o8,"debug"),go.log.addLogger(o8),sU=o8):console={log:a(function(){},"log")};var o8,Qlt,aU;sU!==null&&typeof window<"u"&&window.location&&(oU=new URL(window.location.href).searchParams,oU.has("console.level")&&go.log.setLevel(sU,oU.get("console.level").slice(-1)[0]),oU.has("console.lock")&&(Ult=oU.get("console.lock").slice(-1)[0],Ult=="true"&&go.log.lock(sU)));var oU,Ult;go.log.consoleLogger=sU});var Wlt=$((Wyi,$lt)=>{f();$lt.exports=m1();$re();XN();cwe();Fwe()});var Vlt=$((Gyi,Glt)=>{f();var ur=ki();bw();ty();JQ();Iw();_k();Ewe();zh();Wo();nne();var Be=ur.asn1,qf=Glt.exports=ur.pkcs7=ur.pkcs7||{};qf.messageFromPem=function(t){var e=ur.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=Be.fromDer(e.body);return qf.messageFromAsn1(n)};qf.messageToPem=function(t,e){var r={type:"PKCS7",body:Be.toDer(t.toAsn1()).getBytes()};return ur.pem.encode(r,{maxline:e})};qf.messageFromAsn1=function(t){var e={},r=[];if(!Be.validate(t,qf.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var o=Be.derToOid(e.contentType),s;switch(o){case ur.pki.oids.envelopedData:s=qf.createEnvelopedData();break;case ur.pki.oids.encryptedData:s=qf.createEncryptedData();break;case ur.pki.oids.signedData:s=qf.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+o+" is not (yet) supported.")}return s.fromAsn1(e.content.value[0]),s};qf.createSignedData=function(){var t=null;return t={type:ur.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:a(function(n){if(Jwe(t,n,qf.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var o=t.rawCapture.certificates.value,s=0;s<o.length;++s)t.certificates.push(ur.pki.certificateFromAsn1(o[s]))},"fromAsn1"),toAsn1:a(function(){t.contentInfo||t.sign();for(var n=[],o=0;o<t.certificates.length;++o)n.push(ur.pki.certificateToAsn1(t.certificates[o]));var s=[],c=Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,Be.integerToDer(t.version).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&c.value[0].value.push(Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&c.value[0].value.push(Be.create(Be.Class.CONTEXT_SPECIFIC,1,!0,s)),c.value[0].value.push(Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,t.signerInfos)),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.type).getBytes()),c])},"toAsn1"),addSigner:a(function(n){var o=n.issuer,s=n.serialNumber;if(n.certificate){var c=n.certificate;typeof c=="string"&&(c=ur.pki.certificateFromPem(c)),o=c.issuer.attributes,s=c.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=ur.pki.privateKeyFromPem(l));var u=n.digestAlgorithm||ur.pki.oids.sha1;switch(u){case ur.pki.oids.sha1:case ur.pki.oids.sha256:case ur.pki.oids.sha384:case ur.pki.oids.sha512:case ur.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var d=n.authenticatedAttributes||[];if(d.length>0){for(var p=!1,m=!1,h=0;h<d.length;++h){var g=d[h];if(!p&&g.type===ur.pki.oids.contentType){if(p=!0,m)break;continue}if(!m&&g.type===ur.pki.oids.messageDigest){if(m=!0,p)break;continue}}if(!p||!m)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:o,serialNumber:s,digestAlgorithm:u,signatureAlgorithm:ur.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:d,unauthenticatedAttributes:[]})},"addSigner"),sign:a(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(ur.pki.oids.data).getBytes())]),"content"in t)){var o;t.content instanceof ur.util.ByteBuffer?o=t.content.bytes():typeof t.content=="string"&&(o=ur.util.encodeUtf8(t.content)),n.detached?t.detachedContent=Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,o):t.contentInfo.value.push(Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,o)]))}if(t.signers.length!==0){var s=e();r(s)}},"sign"),verify:a(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:a(function(n){typeof n=="string"&&(n=ur.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:a(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},o=0;o<t.signers.length;++o){var s=t.signers[o],c=s.digestAlgorithm;c in n||(n[c]=ur.md[ur.pki.oids[c]].create()),s.authenticatedAttributes.length===0?s.md=n[c]:s.md=ur.md[ur.pki.oids[c]].create()}t.digestAlgorithmIdentifiers=[];for(var c in n)t.digestAlgorithmIdentifiers.push(Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(c).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.NULL,!1,"")]));return n}a(e,"addDigestAlgorithmIds");function r(n){var o;if(t.detachedContent?o=t.detachedContent:(o=t.contentInfo.value[1],o=o.value[0]),!o)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=Be.derToOid(t.contentInfo.value[0].value),c=Be.toDer(o);c.getByte(),Be.getBerValueLength(c),c=c.getBytes();for(var l in n)n[l].start().update(c);for(var u=new Date,d=0;d<t.signers.length;++d){var p=t.signers[d];if(p.authenticatedAttributes.length===0){if(s!==ur.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var m=Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,[]),h=0;h<p.authenticatedAttributes.length;++h){var g=p.authenticatedAttributes[h];g.type===ur.pki.oids.messageDigest?g.value=n[p.digestAlgorithm].digest():g.type===ur.pki.oids.signingTime&&(g.value||(g.value=u)),m.value.push(Ywe(g)),p.authenticatedAttributesAsn1.value.push(Ywe(g))}c=Be.toDer(m).getBytes(),p.md.start().update(c)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=Jfr(t.signers)}a(r,"addSignerInfos")};qf.createEncryptedData=function(){var t=null;return t={type:ur.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:ur.pki.oids["aes256-CBC"]},fromAsn1:a(function(e){Jwe(t,e,qf.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:a(function(e){e!==void 0&&(t.encryptedContent.key=e),jlt(t)},"decrypt")},t};qf.createEnvelopedData=function(){var t=null;return t={type:ur.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:ur.pki.oids["aes256-CBC"]},fromAsn1:a(function(e){var r=Jwe(t,e,qf.asn1.envelopedDataValidator);t.recipients=zfr(r.recipientInfos.value)},"fromAsn1"),toAsn1:a(function(){return Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.type).getBytes()),Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,Be.integerToDer(t.version).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,Kfr(t.recipients)),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,Xfr(t.encryptedContent))])])])},"toAsn1"),findRecipient:a(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var o=t.recipients[n],s=o.issuer;if(o.serialNumber===e.serialNumber&&s.length===r.length){for(var c=!0,l=0;l<r.length;++l)if(s[l].type!==r[l].type||s[l].value!==r[l].value){c=!1;break}if(c)return o}}return null},"findRecipient"),decrypt:a(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case ur.pki.oids.rsaEncryption:case ur.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=ur.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}jlt(t)},"decrypt"),addRecipient:a(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:ur.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:a(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,o,s;switch(r){case ur.pki.oids["aes128-CBC"]:n=16,o=16,s=ur.aes.createEncryptionCipher;break;case ur.pki.oids["aes192-CBC"]:n=24,o=16,s=ur.aes.createEncryptionCipher;break;case ur.pki.oids["aes256-CBC"]:n=32,o=16,s=ur.aes.createEncryptionCipher;break;case ur.pki.oids["des-EDE3-CBC"]:n=24,o=8,s=ur.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=ur.util.createBuffer(ur.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=ur.util.createBuffer(ur.random.getBytes(o));var c=s(e);if(c.start(t.encryptedContent.parameter.copy()),c.update(t.content),!c.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=c.output}for(var l=0;l<t.recipients.length;++l){var u=t.recipients[l];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case ur.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}},"encrypt")},t};function Gfr(t){var e={},r=[];if(!Be.validate(t,qf.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:ur.pki.RDNAttributesAsArray(e.issuer),serialNumber:ur.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Be.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}a(Gfr,"_recipientFromAsn1");function Vfr(t){return Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,Be.integerToDer(t.version).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[ur.pki.distinguishedNameToAsn1({attributes:t.issuer}),Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,ur.util.hexToBytes(t.serialNumber))]),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.encryptedContent.algorithm).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.NULL,!1,"")]),Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.encryptedContent.content)])}a(Vfr,"_recipientToAsn1");function zfr(t){for(var e=[],r=0;r<t.length;++r)e.push(Gfr(t[r]));return e}a(zfr,"_recipientsFromAsn1");function Kfr(t){for(var e=[],r=0;r<t.length;++r)e.push(Vfr(t[r]));return e}a(Kfr,"_recipientsToAsn1");function Yfr(t){var e=Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,Be.integerToDer(t.version).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[ur.pki.distinguishedNameToAsn1({attributes:t.issuer}),Be.create(Be.Class.UNIVERSAL,Be.Type.INTEGER,!1,ur.util.hexToBytes(t.serialNumber))]),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.digestAlgorithm).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.signatureAlgorithm).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.NULL,!1,"")])),e.value.push(Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=Be.create(Be.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var o=t.unauthenticatedAttributes[n];r.values.push(Ywe(o))}e.value.push(r)}return e}a(Yfr,"_signerToAsn1");function Jfr(t){for(var e=[],r=0;r<t.length;++r)e.push(Yfr(t[r]));return e}a(Jfr,"_signersToAsn1");function Ywe(t){var e;if(t.type===ur.pki.oids.contentType)e=Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.value).getBytes());else if(t.type===ur.pki.oids.messageDigest)e=Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===ur.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),o=t.value;if(typeof o=="string"){var s=Date.parse(o);isNaN(s)?o.length===13?o=Be.utcTimeToDate(o):o=Be.generalizedTimeToDate(o):o=new Date(s)}o>=r&&o<n?e=Be.create(Be.Class.UNIVERSAL,Be.Type.UTCTIME,!1,Be.dateToUtcTime(o)):e=Be.create(Be.Class.UNIVERSAL,Be.Type.GENERALIZEDTIME,!1,Be.dateToGeneralizedTime(o))}return Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.type).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SET,!0,[e])])}a(Ywe,"_attributeToAsn1");function Xfr(t){return[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(ur.pki.oids.data).getBytes()),Be.create(Be.Class.UNIVERSAL,Be.Type.SEQUENCE,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OID,!1,Be.oidToDer(t.algorithm).getBytes()),t.parameter?Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Be.create(Be.Class.CONTEXT_SPECIFIC,0,!0,[Be.create(Be.Class.UNIVERSAL,Be.Type.OCTETSTRING,!1,t.content.getBytes())])]}a(Xfr,"_encryptedContentToAsn1");function Jwe(t,e,r){var n={},o=[];if(!Be.validate(e,r,n,o)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var c=Be.derToOid(n.contentType);if(c!==ur.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(ur.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==Be.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[u].value}else l=n.encryptedContent;t.encryptedContent={algorithm:Be.derToOid(n.encAlgorithm),parameter:ur.util.createBuffer(n.encParameter.value),content:ur.util.createBuffer(l)}}if(n.content){var l="";if(ur.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==Be.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[u].value}else l=n.content;t.content=ur.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}a(Jwe,"_fromAsn1");function jlt(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case ur.pki.oids["aes128-CBC"]:case ur.pki.oids["aes192-CBC"]:case ur.pki.oids["aes256-CBC"]:e=ur.aes.createDecryptionCipher(t.encryptedContent.key);break;case ur.pki.oids.desCBC:case ur.pki.oids["des-EDE3-CBC"]:e=ur.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}a(jlt,"_decryptContent")});var Klt=$((Kyi,zlt)=>{f();var gl=ki();bw();zN();$re();XN();Wo();var fne=zlt.exports=gl.ssh=gl.ssh||{};fne.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",o=e===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+o+`\r
`,s+="Comment: "+r+`\r
`;var c=gl.util.createBuffer();s8(c,n),b1(c,t.e),b1(c,t.n);var l=gl.util.encode64(c.bytes(),64),u=Math.floor(l.length/66)+1;s+="Public-Lines: "+u+`\r
`,s+=l;var d=gl.util.createBuffer();b1(d,t.d),b1(d,t.p),b1(d,t.q),b1(d,t.qInv);var p;if(!e)p=gl.util.encode64(d.bytes(),64);else{var m=d.length()+16-1;m-=m%16;var h=dne(d.bytes());h.truncate(h.length()-m+d.length()),d.putBuffer(h);var g=gl.util.createBuffer();g.putBuffer(dne("\0\0\0\0",e)),g.putBuffer(dne("\0\0\0",e));var A=gl.aes.createEncryptionCipher(g.truncate(8),"CBC");A.start(gl.util.createBuffer().fillWithByte(0,16)),A.update(d.copy()),A.finish();var y=A.output;y.truncate(16),p=gl.util.encode64(y.bytes(),64)}u=Math.floor(p.length/66)+1,s+=`\r
Private-Lines: `+u+`\r
`,s+=p;var v=dne("putty-private-key-file-mac-key",e),b=gl.util.createBuffer();s8(b,n),s8(b,o),s8(b,r),b.putInt32(c.length()),b.putBuffer(c),b.putInt32(d.length()),b.putBuffer(d);var I=gl.hmac.create();return I.start("sha1",v),I.update(b.bytes()),s+=`\r
Private-MAC: `+I.digest().toHex()+`\r
`,s};fne.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=gl.util.createBuffer();return s8(n,r),b1(n,t.e),b1(n,t.n),r+" "+gl.util.encode64(n.bytes())+" "+e};fne.privateKeyToOpenSSH=function(t,e){return e?gl.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):gl.pki.privateKeyToPem(t)};fne.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||gl.md.md5.create(),n="ssh-rsa",o=gl.util.createBuffer();s8(o,n),b1(o,t.e),b1(o,t.n),r.start(),r.update(o.getBytes());var s=r.digest();if(e.encoding==="hex"){var c=s.toHex();return e.delimiter?c.match(/.{2}/g).join(e.delimiter):c}else{if(e.encoding==="binary")return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return s};function b1(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=gl.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}a(b1,"_addBigIntegerToBuffer");function s8(t,e){t.putInt32(e.length),t.putString(e)}a(s8,"_addStringToBuffer");function dne(){for(var t=gl.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}a(dne,"_sha1")});var Jlt=$((Xyi,Ylt)=>{f();Ylt.exports=ki();bw();glt();ty();Lre();JQ();Nlt();zN();Olt();Hlt();Wlt();bwe();Vre();_k();Awe();wwe();Vlt();Swe();Cwe();lwe();ene();zh();fwe();Klt();Nwe();Wo()});var eut=$(Mk=>{"use strict";f();Object.defineProperty(Mk,"__esModule",{value:!0});Mk.convert=Mk.Format=void 0;var cU=Jlt(),Dw;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(Dw=Mk.Format||(Mk.Format={}));function Xlt(t){var e=cU.pki.pemToDer(t),r=cU.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,o=n[0],s=o.tagClass===r.Class.CONTEXT_SPECIFIC&&o.type===0&&o.constructed,c=n.slice(s);return{serial:c[0],issuer:c[2],valid:c[3],subject:c[4]}}a(Xlt,"myASN");function Zfr(t){var e=Xlt(t),r=e.subject.value.map(function(o){return o.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(o){return o.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}a(Zfr,"txtFormat");function Zlt(t,e){switch(e){case Dw.der:return cU.pki.pemToDer(t);case Dw.pem:return t;case Dw.txt:return Zfr(t);case Dw.asn1:return Xlt(t);case Dw.fingerprint:var r=cU.md.sha1.create(),n=Zlt(t,Dw.der);return r.update(n.getBytes()),r.digest().toHex();case Dw.x509:return cU.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}a(Zlt,"convert");Mk.convert=Zlt});var aut=$(jp=>{"use strict";f();var Bw=jp&&jp.__assign||function(){return Bw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Bw.apply(this,arguments)},pne=jp&&jp.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(jp,"__esModule",{value:!0});jp.convert=jp.Format=jp.addToGlobalAgent=jp.get=void 0;var Xwe=require("https"),epr=require("tls"),tut=require("child_process"),rut=Mat(),oE=eut();Object.defineProperty(jp,"Format",{enumerable:!0,get:a(function(){return oE.Format},"get")});Object.defineProperty(jp,"convert",{enumerable:!0,get:a(function(){return oE.convert},"get")});var nut=process.platform==="darwin",iut=Xwe.globalAgent,hne={keychain:"all",unique:!0,excludeBundled:!0,format:oE.Format.pem};function sut(t){if(t===void 0&&(t=hne),!nut)return[];t=Bw(Bw({},hne),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var o="/System/Library/Keychains/SystemRootCertificates.keychain",s=(0,tut.spawnSync)("/usr/bin/security",r.concat(o)).stdout.toString().split(e).map(function(d){return d.trim()});n=pne(pne([],n,!0),s,!0)}if(t.keychain==="all"||t.keychain==="current"){var c=(0,tut.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(d){return d.trim()});n=pne(pne([],n,!0),c,!0)}if(t.unique||t.excludeBundled){var l=n.map(function(d){return(0,oE.convert)(d,oE.Format.fingerprint)}),u=t.excludeBundled?epr.rootCertificates.map(function(d){return(0,oE.convert)(d,oE.Format.fingerprint)}):[];n=n.filter(function(d,p){var m=l[p];return!(t.unique&&p!==l.indexOf(m)||t.excludeBundled&&u.includes(m))})}return n.map(function(d){return(0,oE.convert)(d,t.format)})}a(sut,"get");jp.get=sut;var mne=iut.options.ca,tpr=a(function(t){if(t===void 0&&(t=hne),!!nut){var e;Array.isArray(mne)?e=Array.from(mne):e=typeof mne<"u"?[mne]:[],sut(Bw(Bw(Bw({},hne),t),{format:oE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),iut.options.ca=e,Xwe.Agent=function(r){var n=a(function(o){var s=typeof o<"u"?Bw({},o):{};return typeof s.ca>"u"&&(s.ca=e),r.call(this,s)},"newAgent");return n.prototype=r.prototype,n}(Xwe.Agent),(0,rut.setGlobalDispatcher)(new rut.Agent({connect:{ca:e}}))}},"addToGlobalAgent");jp.addToGlobalAgent=tpr});var cut=$((sCi,Zwe)=>{f();function rpr(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=process.arch==="arm64"?"crypt32-arm64.node":"crypt32.node",o=r(e(__dirname,n)),s=[],c=new o.Crypt32;try{let l;for(;l=c.next();){let u=new t(l);s.push(u.toString())}}finally{c.done()}return Array.from(new Set(s))}a(rpr,"all");process.platform!=="win32"?Zwe.exports.all=()=>[]:Zwe.exports.all=rpr});var gut=$((pCi,hut)=>{"use strict";f();function mut(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let o=typeof t;if(n.type&&o!==n.type){if(n.required===!1&&e.slice(r).some(s=>s.type===o))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}a(mut,"validateParameter");function ipr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}a(ipr,"hasOwnProperty");function opr(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let s=0,c=0;s<e.length;++s,++c){let l=e[s],u=r[c];ipr(l,"default")&&u==null&&(u=l.default),l.type==="object"&&l.default!=null&&(u=Object.assign({},l.default,u)),l.name==="options"&&(typeof u=="function"||u==null)&&(u={}),mut(u,e,s)?n.push(u):c--}if(typeof arguments[arguments.length-1]!="function")return new Promise((s,c)=>{n.push((l,u)=>{if(l)return c(l);s(u)}),t.apply(this,n)});t.apply(this,n)}}a(opr,"defineOperation");hut.exports={defineOperation:opr,validateParameter:mut}});var c_e=$((gCi,Cut)=>{"use strict";f();var l8=d1e()("kerberos"),c8=l8.KerberosClient,Aut=l8.KerberosServer,Nw=gut().defineOperation,spr=1,apr=2,cpr=4,lpr=8,upr=16,dpr=32,fpr=64,ppr=128,mpr=256,yut=0,hpr=9,gpr=6;c8.prototype.step=Nw(c8.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);c8.prototype.wrap=Nw(c8.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);c8.prototype.unwrap=Nw(c8.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);Aut.prototype.step=Nw(Aut.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var Apr=Nw(l8.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),ypr=Nw(l8.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),Cpr=Nw(l8.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:yut}},{name:"callback",type:"function",required:!1}]),vpr=Nw(l8.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);Cut.exports={initializeClient:Cpr,initializeServer:vpr,principalDetails:ypr,checkPassword:Apr,GSS_C_DELEG_FLAG:spr,GSS_C_MUTUAL_FLAG:apr,GSS_C_REPLAY_FLAG:cpr,GSS_C_SEQUENCE_FLAG:lpr,GSS_C_CONF_FLAG:upr,GSS_C_INTEG_FLAG:dpr,GSS_C_ANON_FLAG:fpr,GSS_C_PROT_READY_FLAG:ppr,GSS_C_TRANS_FLAG:mpr,GSS_C_NO_OID:yut,GSS_MECH_OID_KRB5:hpr,GSS_MECH_OID_SPNEGO:gpr}});var vut=$((yCi,xpr)=>{xpr.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var Eut=$((CCi,xut)=>{"use strict";f();var Epr=require("dns"),bpr=c_e(),l_e=class{static{a(this,"MongoAuthProcess")}constructor(e,r,n,o){o=o||{},this.host=e,this.port=r,this.serviceName=n||o.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof o.gssapiCanonicalizeHostName=="boolean"?o.gssapiCanonicalizeHostName:!1,this._transition=Ipr(this),this.retries=10}init(e,r,n){let o=this;this.username=e,this.password=r;function s(c,l,u){if(!c)return u();Epr.resolveCname(l,(d,p)=>{if(d)return u(d);Array.isArray(p)&&p.length>0&&(o.host=p[0]),u()})}a(s,"performGssapiCanonicalizeHostName"),s(this.canonicalizeHostName,this.host,c=>{if(c)return n(c);let l={};r!=null&&Object.assign(l,{user:e,password:r});let u=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;bpr.initializeClient(u,l,(d,p)=>{if(d)return n(d,null);o.client=p,n(null,p)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function Ipr(t){return(e,r)=>{t.client.step("",(n,o)=>{if(n)return r(n);t._transition=Tpr(t),r(null,o)})}}a(Ipr,"firstTransition");function Tpr(t){return(e,r)=>{t.client.step(e,(n,o)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=wpr(t),r(null,o||"")})}}a(Tpr,"secondTransition");function wpr(t){return(e,r)=>{t.client.unwrap(e,(n,o)=>{if(n)return r(n,!1);t.client.wrap(o,{user:t.username},(s,c)=>{if(s)return r(s,!1);t._transition=_pr(t),r(null,c)})})}}a(wpr,"thirdTransition");function _pr(t){return(e,r)=>{t._transition=null,r(null,!0)}}a(_pr,"fourthTransition");xut.exports={MongoAuthProcess:l_e}});var Iut=$((ECi,lU)=>{"use strict";f();var but=c_e();lU.exports=but;lU.exports.Kerberos=but;lU.exports.version=vut().version;lU.exports.processes={MongoAuthProcess:Eut().MongoAuthProcess}});var Fdt=$(H_e=>{"use strict";f();Object.defineProperty(H_e,"__esModule",{value:!0});H_e.assertNever=dmr;function dmr(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}a(dmr,"assertNever")});var BU=$(AE=>{"use strict";f();Object.defineProperty(AE,"__esModule",{value:!0});AE.ChatCompletionContentPartOpaque=AE.ChatCompletionContentPartKind=AE.ChatRole=void 0;var fmr=Fdt(),yie;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(yie||(AE.ChatRole=yie={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,fmr.assertNever)(r,`unknown chat role ${r}}`)}}a(e,"display"),t.display=e})(yie||(AE.ChatRole=yie={}));var Odt;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(Odt||(AE.ChatCompletionContentPartKind=Odt={}));var Qdt;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}a(e,"usableIn"),t.usableIn=e})(Qdt||(AE.ChatCompletionContentPartOpaque=Qdt={}))});var $_e=$(N1=>{"use strict";f();Object.defineProperty(N1,"__esModule",{value:!0});N1.BaseTokensPerName=N1.BaseTokensPerMessage=N1.BaseTokensPerCompletion=N1.ChatRole=void 0;var Udt;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Udt||(N1.ChatRole=Udt={}));N1.BaseTokensPerCompletion=3;N1.BaseTokensPerMessage=3;N1.BaseTokensPerName=1});var Hdt=$(vie=>{"use strict";f();Object.defineProperty(vie,"__esModule",{value:!0});vie.toOpenAiChatMessage=qdt;vie.toOpenAIChatMessages=hmr;var yE=BU(),Cie=$_e(),pmr=Gw();function W_e(t){return t.filter(e=>e.type===yE.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}a(W_e,"onlyStringContent");function mmr(t){let e=t.map(r=>{if(r.type===yE.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===yE.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===yE.ChatCompletionContentPartKind.Opaque&&yE.ChatCompletionContentPartOpaque.usableIn(r,pmr.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}a(mmr,"stringAndImageContent");function qdt(t){switch(t.role){case yE.ChatRole.System:return{role:Cie.ChatRole.System,content:W_e(t.content),name:t.name};case yE.ChatRole.User:return{role:Cie.ChatRole.User,content:mmr(t.content),name:t.name};case yE.ChatRole.Assistant:return{role:Cie.ChatRole.Assistant,content:W_e(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case yE.ChatRole.Tool:return{role:Cie.ChatRole.Tool,content:W_e(t.content),tool_call_id:t.toolCallId};default:return}}a(qdt,"toOpenAiChatMessage");function hmr(t){return t.map(qdt).filter(e=>!!e)}a(hmr,"toOpenAIChatMessages")});var Wdt=$(bie=>{"use strict";f();Object.defineProperty(bie,"__esModule",{value:!0});bie.toVsCodeChatMessage=$dt;bie.toVsCodeChatMessages=gmr;var Eie=BU();function xie(t){return t.filter(e=>e.type===Eie.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}a(xie,"onlyStringContent");var Vw;function $dt(t){switch(Vw??=require("vscode"),t.role){case Eie.ChatRole.Assistant:let e=Vw.LanguageModelChatMessage.Assistant(xie(t.content),t.name);return t.toolCalls&&(e.content=[new Vw.LanguageModelTextPart(xie(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new Vw.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case Eie.ChatRole.User:return Vw.LanguageModelChatMessage.User(xie(t.content),t.name);case Eie.ChatRole.Tool:{let r=Vw.LanguageModelChatMessage.User("");return r.content=[new Vw.LanguageModelToolResultPart(t.toolCallId,[new Vw.LanguageModelTextPart(xie(t.content))])],r}default:return}}a($dt,"toVsCodeChatMessage");function gmr(t){return t.map($dt).filter(e=>!!e)}a(gmr,"toVsCodeChatMessages")});var Gw=$(ly=>{"use strict";f();Object.defineProperty(ly,"__esModule",{value:!0});ly.OutputMode=ly.Raw=ly.OpenAI=void 0;ly.toMode=j_e;ly.toVSCode=Amr;ly.toOpenAI=ymr;var jdt=Hdt(),Gdt=Wdt();ly.OpenAI=$_e();ly.Raw=BU();var Vk;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(Vk||(ly.OutputMode=Vk={}));function j_e(t,e){switch(t){case Vk.Raw:return e;case Vk.VSCode:return e instanceof Array?(0,Gdt.toVsCodeChatMessages)(e):(0,Gdt.toVsCodeChatMessage)(e);case Vk.OpenAI:return e instanceof Array?(0,jdt.toOpenAIChatMessages)(e):(0,jdt.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}a(j_e,"toMode");function Amr(t){return j_e(Vk.VSCode,t)}a(Amr,"toVSCode");function ymr(t){return j_e(Vk.OpenAI,t)}a(ymr,"toOpenAI")});var G_e=$(NU=>{"use strict";f();Object.defineProperty(NU,"__esModule",{value:!0});NU.jsonRetainedProps=void 0;NU.forEachNode=Vdt;NU.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function Vdt(t,e){if(e(t),t.type===1)for(let r of t.children)Vdt(r,e)}a(Vdt,"forEachNode")});var zdt=$(V_e=>{"use strict";f();Object.defineProperty(V_e,"__esModule",{value:!0});V_e.once=Cmr;function Cmr(t){let e,r=!1,n=a((...o)=>(r||(e=t(...o),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}a(Cmr,"once")});var J_e=$(Zd=>{"use strict";f();Object.defineProperty(Zd,"__esModule",{value:!0});Zd.BudgetExceededError=Zd.MaterializedChatMessageImage=Zd.MaterializedChatMessageBreakpoint=Zd.MaterializedChatMessageOpaque=Zd.MaterializedChatMessage=Zd.MaterializedChatMessageTextChunk=Zd.GenericMaterializedContainer=void 0;var T8=zdt(),dm=Gw(),CE=class t{static{a(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,o,s,c,l){if(this.parent=e,this.id=r,this.name=n,this.priority=o,this.metadata=c,this.flags=l,this.children=s(this),l&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[u,d]=this.children;d.isEmpty?this.children=[u]:this.children=[d]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let o=Kw(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=o})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let o=await n.upperBoundTokenCount(e);r+=o})),r}replaceNode(e,r){return nft(e,this.children,r)}allMetadata(){return rft(this)}findById(e){return Y_e(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)vmr(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof dy&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof dy||n instanceof t){let o=await n.baseMessageTokenCount(e);r+=o}})),r}removeLowestPriorityChild(){let e=[];return K_e(this,e),e}};Zd.GenericMaterializedContainer=CE;var MU=class{static{a(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,o=[],s){this.parent=e,this.text=r,this.priority=n,this.metadata=o,this.lineBreakBefore=s}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,T8.once)(async e=>await e.tokenLength({type:dm.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};Zd.MaterializedChatMessageTextChunk=MU;var dy=class{static{a(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,o,s,c,l,u,d){this.parent=e,this.id=r,this.role=n,this.name=o,this.toolCalls=s,this.toolCallId=c,this.priority=l,this.metadata=u,this.children=d(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=nft(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return K_e(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return Y_e(e,this)}_tokenCount=(0,T8.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,dm.toMode)(e.mode,r))});_upperBound=(0,T8.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let o=await n.upperBoundTokenCount(e);r+=o})),r});baseMessageTokenCount=(0,T8.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===dm.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===dm.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,dm.toMode)(e.mode,r))});_text=(0,T8.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of eft(this)){if(r instanceof zk||r instanceof zw){e.push(r);continue}if(r instanceof uy){e.at(-1)instanceof uy?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let o=e[e.length-1];typeof o=="string"&&o&&!o.endsWith(`
`)&&(e[e.length-1]=o+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:dm.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof zk)return{type:dm.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:ift(r.src),detail:r.detail}};if(r instanceof zw)return r.value;if(r instanceof uy)return r.part;throw new Error("Unexpected element type")});if(this.role===dm.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===dm.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===dm.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===dm.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};Zd.MaterializedChatMessage=dy;var zw=class{static{a(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&dm.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};Zd.MaterializedChatMessageOpaque=zw;var uy=class{static{a(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};Zd.MaterializedChatMessageBreakpoint=uy;var zk=class{static{a(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,o,s=[],c,l){this.parent=e,this.id=r,this.src=n,this.priority=o,this.metadata=s,this.lineBreakBefore=c,this.detail=l}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,T8.once)(async e=>e.tokenLength({type:dm.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:ift(this.src),detail:this.detail}}));isEmpty=!1};Zd.MaterializedChatMessageImage=zk;function Kw(t){return t instanceof CE||t instanceof dy}a(Kw,"isContainerType");function Zdt(t){return t instanceof MU||t instanceof zk||t instanceof zw||t instanceof uy}a(Zdt,"isContentType");function vmr(t){if(!Kw(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}a(vmr,"assertContainerOrChatMessage");function*eft(t,e=!1){for(let r of t.children)r instanceof MU?(yield{content:r,isTextSibling:e},e=!0):r instanceof zk||r instanceof zw||r instanceof uy?yield{content:r,isTextSibling:!1}:r instanceof zw?yield{content:r,isTextSibling:!0}:(r&&(yield*eft(r,e)),e=!1)}a(eft,"contentChunks");function xmr(t,e){let r;function n(o,s){if(Zdt(o))(!r||o.priority<r.node.priority)&&(r={chain:s.slice(),node:o});else{s.push(o);for(let c of o.children)n(c,s);s.pop()}}if(a(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");LU(r.node,e)}a(xmr,"removeLowestPriorityLegacy");var Kdt=new WeakMap;function tft(t){let e=Kdt.get(t);if(e!==void 0)return e;let r=!1;return t instanceof uy?r=!0:t instanceof dy?r=t.children.some(n=>n instanceof uy):t instanceof CE&&(r=t.children.some(tft)),Kdt.set(t,r),r}a(tft,"hasCachePoint");function Emr(t){if(t instanceof dy)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof dy)return!1;return!0}a(Emr,"shouldLookForCachePointInNode");function K_e(t,e){let r;if(t instanceof CE&&t.has(1)){xmr(t,e);return}let n=Emr(t),o=t.children.map((s,c)=>({chain:[t],index:c}));for(let s=0;s<o.length;s++){let{chain:c,index:l}=o[s],u=c[c.length-1].children[l];if(!(n&&tft(u)&&(r=void 0,u instanceof uy))){if(u instanceof CE&&u.has(4)){let d=[...c,u];o.splice(s+1,0,...u.children.map((p,m)=>({chain:d,index:m})))}else if(!r||u.priority<r.value.priority)r={chain:c,index:l,value:u};else if(u.priority===r.value.priority){r.lowestNested??=Ydt(r.value);let d=Ydt(u);d<r.lowestNested&&(r={chain:c,index:l,value:u,lowestNested:d})}}}if(!r)throw new Iie(t);Zdt(r.value)||r.value instanceof CE&&r.value.has(2)||Kw(r.value)&&!r.value.children.length?LU(r.value,e):K_e(r.value,e)}a(K_e,"removeLowestPriorityChild");var Iie=class extends Error{static{a(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(o=>o instanceof dy?o.role:o.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};Zd.BudgetExceededError=Iie;function Ydt(t){if(!Kw(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}a(Ydt,"getLowestPriorityAmongChildren");function*rft(t){yield*t.metadata;for(let e of t.children)Kw(e)?yield*rft(e):yield*e.metadata}a(rft,"allMetadata");function nft(t,e,r){for(let n=0;n<e.length;n++){let o=e[n];if(Kw(o)){if(o.id===t){let c=e[n];return r.parent=o.parent,e[n]=r,c}let s=o.replaceNode(t,r);if(s)return s}}}a(nft,"replaceNode");function*Jdt(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,Kw(r)&&e.push(...r.children)}}a(Jdt,"forEachNode");function bmr(t){let e=t;for(;e.parent;)e=e.parent;return e}a(bmr,"getRoot");function Xdt(t){return t instanceof CE&&t.keepWithId!==void 0}a(Xdt,"isKeepWith");var z_e=new Set;function Imr(t,e){let r=new Set;for(let n of Jdt(t))Xdt(n)&&!z_e.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)z_e.add(n);try{let n=bmr(t);for(let o of Jdt(n))Xdt(o)&&r.has(o.keepWithId)?LU(o,e):o instanceof dy&&o.toolCalls&&(o.toolCalls=Tmr(o.toolCalls,s=>!(s.keepWith&&r.has(s.keepWith.id))),o.isEmpty&&LU(o,e))}finally{for(let n of r)z_e.delete(n)}}a(Imr,"removeOtherKeepWiths");function Y_e(t,e){if(e.id===t)return e;for(let r of e.children)if(Kw(r)){let n=Y_e(t,r);if(n)return n}}a(Y_e,"findNodeById");function LU(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),Imr(t,e),r.isEmpty?LU(r,e):r.onChunksChange())}a(LU,"removeNode");function ift(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}a(ift,"getEncodedBase64");function Tmr(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let o=r+1;o<t.length;o++)e(t[o])&&n.push(t[o]);return n}return t}a(Tmr,"filterIfDifferent")});var sft=$(()=>{"use strict";f();function wmr(t,e,...r){return{ctor:t,props:e,children:r.flat()}}a(wmr,"_vscpp");function oft(){throw new Error("This should not be invoked!")}a(oft,"_vscppf");oft.isFragment=!0;globalThis.vscpp=wmr;globalThis.vscppf=oft});var Z_e=$(Tie=>{"use strict";f();Object.defineProperty(Tie,"__esModule",{value:!0});Tie.PromptElement=void 0;sft();var X_e=class{static{a(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};Tie.PromptElement=X_e});var lSe=$(Ao=>{"use strict";f();Object.defineProperty(Ao,"__esModule",{value:!0});Ao.LogicalWrapper=Ao.IfEmpty=Ao.AbstractKeepWith=Ao.TokenLimit=Ao.Expandable=Ao.Chunk=Ao.LegacyPrioritization=Ao.ToolResult=Ao.PrioritizedList=Ao.Image=Ao.TextChunk=Ao.ToolMessage=Ao.AssistantMessage=Ao.UserMessage=Ao.SystemMessage=Ao.BaseChatMessage=void 0;Ao.isChatMessagePromptElement=_mr;Ao.useKeepWith=Pmr;var OU=xa(),sg=Z_e();function _mr(t){return t instanceof wie||t instanceof _ie||t instanceof Sie}a(_mr,"isChatMessagePromptElement");var Kk=class extends sg.PromptElement{static{a(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};Ao.BaseChatMessage=Kk;var wie=class extends Kk{static{a(this,"SystemMessage")}constructor(e){e.role=OU.Raw.ChatRole.System,super(e)}};Ao.SystemMessage=wie;var _ie=class extends Kk{static{a(this,"UserMessage")}constructor(e){e.role=OU.Raw.ChatRole.User,super(e)}};Ao.UserMessage=_ie;var Sie=class extends Kk{static{a(this,"AssistantMessage")}constructor(e){e.role=OU.Raw.ChatRole.Assistant,super(e)}};Ao.AssistantMessage=Sie;var Smr=/\s+/g,eSe=class extends Kk{static{a(this,"ToolMessage")}constructor(e){e.role=OU.Raw.ChatRole.Tool,super(e)}};Ao.ToolMessage=eSe;var Rie=class extends sg.PromptElement{static{a(this,"TextChunk")}async prepare(e,r,n){let o=this.props.breakOnWhitespace?Smr:this.props.breakOn;if(!o)return vscpp(vscppf,null,this.props.children);let s="",c=[];for(let u of this.props.children||[])if(u&&typeof u=="object"){if(typeof u.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");u.ctor==="br"?s+=`
`:c.push(u)}else u!=null&&(s+=u);let l=await Rmr(e,o,s,n);return vscpp(vscppf,null,c,l)}render(e){return e}};Ao.TextChunk=Rie;async function Rmr(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let o="",s=-1;for(;s<r.length;){let c;typeof e=="string"?c=r.indexOf(e,s===-1?0:s+e.length):c=e.exec(r)?.index??-1,c===-1&&(c=r.length);let l=o+r.slice(Math.max(0,s),c);if(await t.countTokens({type:OU.Raw.ChatCompletionContentPartKind.Text,text:l},n)>t.tokenBudget)return o;o=l,s=c}return o}a(Rmr,"getTextContentBelowBudget");var tSe=class extends sg.PromptElement{static{a(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};Ao.Image=tSe;var rSe=class extends sg.PromptElement{static{a(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((o,s)=>{if(!o)return;let c=n?r-s:r-e.length+s;return typeof o!="object"?vscpp(Rie,{priority:c},o):(o.props??={},o.props.priority=c,o)}))}};Ao.PrioritizedList=rSe;var nSe=class extends sg.PromptElement{static{a(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};Ao.ToolResult=nSe;var iSe=class extends sg.PromptElement{static{a(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};Ao.LegacyPrioritization=iSe;var oSe=class extends sg.PromptElement{static{a(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};Ao.Chunk=oSe;var sSe=class extends sg.PromptElement{static{a(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};Ao.Expandable=sSe;var aSe=class extends sg.PromptElement{static{a(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};Ao.TokenLimit=aSe;var kie=class extends sg.PromptElement{static{a(this,"AbstractKeepWith")}};Ao.AbstractKeepWith=kie;var kmr=0;function Pmr(){let t=kmr++;return class extends kie{static{a(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}a(Pmr,"useKeepWith");var cSe=class extends sg.PromptElement{static{a(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(FU,null,this.props.alt),vscpp(FU,{flexGrow:1},this.props.children))}};Ao.IfEmpty=cSe;var FU=class extends sg.PromptElement{static{a(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};Ao.LogicalWrapper=FU});var cft=$(QU=>{"use strict";f();Object.defineProperty(QU,"__esModule",{value:!0});QU.localize=Dmr;QU.localize2=Bmr;QU.getConfiguredDefaultLocale=Nmr;function aft(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,o){let s=o[0];return typeof e[s]<"u"?e[s]:n}),r}a(aft,"_format");function Dmr(t,e,...r){return aft(e,r)}a(Dmr,"localize");function Bmr(t,e,...r){let n=aft(e,r);return{original:n,value:n}}a(Bmr,"localize2");function Nmr(t){}a(Nmr,"getConfiguredDefaultLocale")});var pSe=$(Vt=>{"use strict";f();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.isAndroid=Vt.isEdge=Vt.isSafari=Vt.isFirefox=Vt.isChrome=Vt.OS=Vt.setTimeout0=Vt.setTimeout0IsFaster=Vt.translationsConfigFile=Vt.platformLocale=Vt.locale=Vt.Language=Vt.language=Vt.userAgent=Vt.platform=Vt.isCI=Vt.isMobile=Vt.isIOS=Vt.webWorkerOrigin=Vt.isWebWorker=Vt.isWeb=Vt.isElectron=Vt.isNative=Vt.isLinuxSnap=Vt.isLinux=Vt.isMacintosh=Vt.isWindows=Vt.LANGUAGE_DEFAULT=void 0;Vt.PlatformToString=Lmr;Vt.isLittleEndian=Fmr;Vt.isBigSurOrNewer=Omr;var lft=cft();Vt.LANGUAGE_DEFAULT="en";var HU=!1,$U=!1,qU=!1,pft=!1,mft=!1,dSe=!1,hft=!1,fSe=!1,gft=!1,Aft=!1,UU,Pie=Vt.LANGUAGE_DEFAULT,uSe=Vt.LANGUAGE_DEFAULT,yft,vE,xE=globalThis,fm;typeof xE.vscode<"u"&&typeof xE.vscode.process<"u"?fm=xE.vscode.process:typeof process<"u"&&(fm=process);var Cft=typeof fm?.versions?.electron=="string",Mmr=Cft&&fm?.type==="renderer";if(typeof fm=="object"){HU=fm.platform==="win32",$U=fm.platform==="darwin",qU=fm.platform==="linux",pft=qU&&!!fm.env.SNAP&&!!fm.env.SNAP_REVISION,hft=Cft,gft=!!fm.env.CI||!!fm.env.BUILD_ARTIFACTSTAGINGDIRECTORY,UU=Vt.LANGUAGE_DEFAULT,Pie=Vt.LANGUAGE_DEFAULT;let t=fm.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];UU=e.locale,uSe=e.osLocale,Pie=r||Vt.LANGUAGE_DEFAULT,yft=e._translationsConfigFile}catch{}mft=!0}else typeof navigator=="object"&&!Mmr?(vE=navigator.userAgent,HU=vE.indexOf("Windows")>=0,$U=vE.indexOf("Macintosh")>=0,fSe=(vE.indexOf("Macintosh")>=0||vE.indexOf("iPad")>=0||vE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,qU=vE.indexOf("Linux")>=0,Aft=vE?.indexOf("Mobi")>=0,dSe=!0,UU=lft.getConfiguredDefaultLocale(lft.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Vt.LANGUAGE_DEFAULT,Pie=UU,uSe=navigator.language):console.error("Unable to resolve platform.");function Lmr(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}a(Lmr,"PlatformToString");var Die=0;$U?Die=1:HU?Die=3:qU&&(Die=2);Vt.isWindows=HU;Vt.isMacintosh=$U;Vt.isLinux=qU;Vt.isLinuxSnap=pft;Vt.isNative=mft;Vt.isElectron=hft;Vt.isWeb=dSe;Vt.isWebWorker=dSe&&typeof xE.importScripts=="function";Vt.webWorkerOrigin=Vt.isWebWorker?xE.origin:void 0;Vt.isIOS=fSe;Vt.isMobile=Aft;Vt.isCI=gft;Vt.platform=Die;Vt.userAgent=vE;Vt.language=Pie;var uft;(function(t){function e(){return Vt.language}a(e,"value"),t.value=e;function r(){return Vt.language.length===2?Vt.language==="en":Vt.language.length>=3?Vt.language[0]==="e"&&Vt.language[1]==="n"&&Vt.language[2]==="-":!1}a(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return Vt.language==="en"}a(n,"isDefault"),t.isDefault=n})(uft||(Vt.Language=uft={}));Vt.locale=UU;Vt.platformLocale=uSe;Vt.translationsConfigFile=yft;Vt.setTimeout0IsFaster=typeof xE.postMessage=="function"&&!xE.importScripts;Vt.setTimeout0=(()=>{if(Vt.setTimeout0IsFaster){let t=[];xE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,o=t.length;n<o;n++){let s=t[n];if(s.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),s.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),xE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Vt.OS=$U||fSe?2:HU?1:3;var dft=!0,fft=!1;function Fmr(){if(!fft){fft=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,dft=new Uint16Array(t.buffer)[0]===513}return dft}a(Fmr,"isLittleEndian");Vt.isChrome=!!(Vt.userAgent&&Vt.userAgent.indexOf("Chrome")>=0);Vt.isFirefox=!!(Vt.userAgent&&Vt.userAgent.indexOf("Firefox")>=0);Vt.isSafari=!!(!Vt.isChrome&&Vt.userAgent&&Vt.userAgent.indexOf("Safari")>=0);Vt.isEdge=!!(Vt.userAgent&&Vt.userAgent.indexOf("Edg/")>=0);Vt.isAndroid=!!(Vt.userAgent&&Vt.userAgent.indexOf("Android")>=0);function Omr(t){return parseFloat(t)>=20}a(Omr,"isBigSurOrNewer")});var xft=$(M1=>{"use strict";f();Object.defineProperty(M1,"__esModule",{value:!0});M1.arch=M1.platform=M1.env=M1.cwd=void 0;var vft=pSe(),Yk,mSe=globalThis.vscode;if(typeof mSe<"u"&&typeof mSe.process<"u"){let t=mSe.process;Yk={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?Yk={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Yk={get platform(){return vft.isWindows?"win32":vft.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};M1.cwd=Yk.cwd;M1.env=Yk.env;M1.platform=Yk.platform;M1.arch=Yk.arch});var bft=$(Er=>{"use strict";f();Object.defineProperty(Er,"__esModule",{value:!0});Er.delimiter=Er.sep=Er.toNamespacedPath=Er.parse=Er.format=Er.extname=Er.basename=Er.dirname=Er.relative=Er.resolve=Er.join=Er.isAbsolute=Er.normalize=Er.posix=Er.win32=void 0;var w8=xft(),Qmr=65,Umr=97,qmr=90,Hmr=122,Xw=46,Tu=47,Kp=92,Yw=58,$mr=63,Bie=class extends Error{static{a(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let o;typeof r=="string"&&r.indexOf("not ")===0?(o="must not be",r=r.replace(/^not /,"")):o="must be";let s=e.indexOf(".")!==-1?"property":"argument",c=`The "${e}" ${s} ${o} of type ${r}`;c+=`. Received type ${typeof n}`,super(c),this.code="ERR_INVALID_ARG_TYPE"}};function Wmr(t,e){if(t===null||typeof t!="object")throw new Bie(e,"Object",t)}a(Wmr,"validateObject");function Ec(t,e){if(typeof t!="string")throw new Bie(e,"string",t)}a(Ec,"validateString");var Yp=w8.platform==="win32";function _i(t){return t===Tu||t===Kp}a(_i,"isPathSeparator");function hSe(t){return t===Tu}a(hSe,"isPosixPathSeparator");function Jw(t){return t>=Qmr&&t<=qmr||t>=Umr&&t<=Hmr}a(Jw,"isWindowsDeviceRoot");function Nie(t,e,r,n){let o="",s=0,c=-1,l=0,u=0;for(let d=0;d<=t.length;++d){if(d<t.length)u=t.charCodeAt(d);else{if(n(u))break;u=Tu}if(n(u)){if(!(c===d-1||l===1))if(l===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==Xw||o.charCodeAt(o.length-2)!==Xw){if(o.length>2){let p=o.lastIndexOf(r);p===-1?(o="",s=0):(o=o.slice(0,p),s=o.length-1-o.lastIndexOf(r)),c=d,l=0;continue}else if(o.length!==0){o="",s=0,c=d,l=0;continue}}e&&(o+=o.length>0?`${r}..`:"..",s=2)}else o.length>0?o+=`${r}${t.slice(c+1,d)}`:o=t.slice(c+1,d),s=d-c-1;c=d,l=0}else u===Xw&&l!==-1?++l:l=-1}return o}a(Nie,"normalizeString");function Eft(t,e){Wmr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}a(Eft,"_format");Er.win32={resolve(...t){let e="",r="",n=!1;for(let o=t.length-1;o>=-1;o--){let s;if(o>=0){if(s=t[o],Ec(s,"path"),s.length===0)continue}else e.length===0?s=w8.cwd():(s=w8.env[`=${e}`]||w8.cwd(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===Kp)&&(s=`${e}\\`));let c=s.length,l=0,u="",d=!1,p=s.charCodeAt(0);if(c===1)_i(p)&&(l=1,d=!0);else if(_i(p))if(d=!0,_i(s.charCodeAt(1))){let m=2,h=m;for(;m<c&&!_i(s.charCodeAt(m));)m++;if(m<c&&m!==h){let g=s.slice(h,m);for(h=m;m<c&&_i(s.charCodeAt(m));)m++;if(m<c&&m!==h){for(h=m;m<c&&!_i(s.charCodeAt(m));)m++;(m===c||m!==h)&&(u=`\\\\${g}\\${s.slice(h,m)}`,l=m)}}}else l=1;else Jw(p)&&s.charCodeAt(1)===Yw&&(u=s.slice(0,2),l=2,c>2&&_i(s.charCodeAt(2))&&(d=!0,l=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(n){if(e.length>0)break}else if(r=`${s.slice(l)}\\${r}`,n=d,d&&e.length>0)break}return r=Nie(r,!n,"\\",_i),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Ec(t,"path");let e=t.length;if(e===0)return".";let r=0,n,o=!1,s=t.charCodeAt(0);if(e===1)return hSe(s)?"\\":t;if(_i(s))if(o=!0,_i(t.charCodeAt(1))){let l=2,u=l;for(;l<e&&!_i(t.charCodeAt(l));)l++;if(l<e&&l!==u){let d=t.slice(u,l);for(u=l;l<e&&_i(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&!_i(t.charCodeAt(l));)l++;if(l===e)return`\\\\${d}\\${t.slice(u)}\\`;l!==u&&(n=`\\\\${d}\\${t.slice(u,l)}`,r=l)}}}else r=1;else Jw(s)&&t.charCodeAt(1)===Yw&&(n=t.slice(0,2),r=2,e>2&&_i(t.charCodeAt(2))&&(o=!0,r=3));let c=r<e?Nie(t.slice(r),!o,"\\",_i):"";return c.length===0&&!o&&(c="."),c.length>0&&_i(t.charCodeAt(e-1))&&(c+="\\"),n===void 0?o?`\\${c}`:c:o?`${n}\\${c}`:`${n}${c}`},isAbsolute(t){Ec(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return _i(r)||e>2&&Jw(r)&&t.charCodeAt(1)===Yw&&_i(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let s=0;s<t.length;++s){let c=t[s];Ec(c,"path"),c.length>0&&(e===void 0?e=r=c:e+=`\\${c}`)}if(e===void 0)return".";let n=!0,o=0;if(typeof r=="string"&&_i(r.charCodeAt(0))){++o;let s=r.length;s>1&&_i(r.charCodeAt(1))&&(++o,s>2&&(_i(r.charCodeAt(2))?++o:n=!1))}if(n){for(;o<e.length&&_i(e.charCodeAt(o));)o++;o>=2&&(e=`\\${e.slice(o)}`)}return Er.win32.normalize(e)},relative(t,e){if(Ec(t,"from"),Ec(e,"to"),t===e)return"";let r=Er.win32.resolve(t),n=Er.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let o=0;for(;o<t.length&&t.charCodeAt(o)===Kp;)o++;let s=t.length;for(;s-1>o&&t.charCodeAt(s-1)===Kp;)s--;let c=s-o,l=0;for(;l<e.length&&e.charCodeAt(l)===Kp;)l++;let u=e.length;for(;u-1>l&&e.charCodeAt(u-1)===Kp;)u--;let d=u-l,p=c<d?c:d,m=-1,h=0;for(;h<p;h++){let A=t.charCodeAt(o+h);if(A!==e.charCodeAt(l+h))break;A===Kp&&(m=h)}if(h!==p){if(m===-1)return n}else{if(d>p){if(e.charCodeAt(l+h)===Kp)return n.slice(l+h+1);if(h===2)return n.slice(l+h)}c>p&&(t.charCodeAt(o+h)===Kp?m=h:h===2&&(m=3)),m===-1&&(m=0)}let g="";for(h=o+m+1;h<=s;++h)(h===s||t.charCodeAt(h)===Kp)&&(g+=g.length===0?"..":"\\..");return l+=m,g.length>0?`${g}${n.slice(l,u)}`:(n.charCodeAt(l)===Kp&&++l,n.slice(l,u))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=Er.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Kp){if(e.charCodeAt(1)===Kp){let r=e.charCodeAt(2);if(r!==$mr&&r!==Xw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Jw(e.charCodeAt(0))&&e.charCodeAt(1)===Yw&&e.charCodeAt(2)===Kp)return`\\\\?\\${e}`;return t},dirname(t){Ec(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,o=t.charCodeAt(0);if(e===1)return _i(o)?t:".";if(_i(o)){if(r=n=1,_i(t.charCodeAt(1))){let l=2,u=l;for(;l<e&&!_i(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&_i(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&!_i(t.charCodeAt(l));)l++;if(l===e)return t;l!==u&&(r=n=l+1)}}}}else Jw(o)&&t.charCodeAt(1)===Yw&&(r=e>2&&_i(t.charCodeAt(2))?3:2,n=r);let s=-1,c=!0;for(let l=e-1;l>=n;--l)if(_i(t.charCodeAt(l))){if(!c){s=l;break}}else c=!1;if(s===-1){if(r===-1)return".";s=r}return t.slice(0,s)},basename(t,e){e!==void 0&&Ec(e,"ext"),Ec(t,"path");let r=0,n=-1,o=!0,s;if(t.length>=2&&Jw(t.charCodeAt(0))&&t.charCodeAt(1)===Yw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let c=e.length-1,l=-1;for(s=t.length-1;s>=r;--s){let u=t.charCodeAt(s);if(_i(u)){if(!o){r=s+1;break}}else l===-1&&(o=!1,l=s+1),c>=0&&(u===e.charCodeAt(c)?--c===-1&&(n=s):(c=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=r;--s)if(_i(t.charCodeAt(s))){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){Ec(t,"path");let e=0,r=-1,n=0,o=-1,s=!0,c=0;t.length>=2&&t.charCodeAt(1)===Yw&&Jw(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let u=t.charCodeAt(l);if(_i(u)){if(!s){n=l+1;break}continue}o===-1&&(s=!1,o=l+1),u===Xw?r===-1?r=l:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||o===-1||c===0||c===1&&r===o-1&&r===n+1?"":t.slice(r,o)},format:Eft.bind(null,"\\"),parse(t){Ec(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,o=t.charCodeAt(0);if(r===1)return _i(o)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(_i(o)){if(n=1,_i(t.charCodeAt(1))){let m=2,h=m;for(;m<r&&!_i(t.charCodeAt(m));)m++;if(m<r&&m!==h){for(h=m;m<r&&_i(t.charCodeAt(m));)m++;if(m<r&&m!==h){for(h=m;m<r&&!_i(t.charCodeAt(m));)m++;m===r?n=m:m!==h&&(n=m+1)}}}}else if(Jw(o)&&t.charCodeAt(1)===Yw){if(r<=2)return e.root=e.dir=t,e;if(n=2,_i(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let s=-1,c=n,l=-1,u=!0,d=t.length-1,p=0;for(;d>=n;--d){if(o=t.charCodeAt(d),_i(o)){if(!u){c=d+1;break}continue}l===-1&&(u=!1,l=d+1),o===Xw?s===-1?s=d:p!==1&&(p=1):s!==-1&&(p=-1)}return l!==-1&&(s===-1||p===0||p===1&&s===l-1&&s===c+1?e.base=e.name=t.slice(c,l):(e.name=t.slice(c,s),e.base=t.slice(c,l),e.ext=t.slice(s,l))),c>0&&c!==n?e.dir=t.slice(0,c-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var jmr=(()=>{if(Yp){let t=/\\/g;return()=>{let e=w8.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>w8.cwd()})();Er.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let o=n>=0?t[n]:jmr();Ec(o,"path"),o.length!==0&&(e=`${o}/${e}`,r=o.charCodeAt(0)===Tu)}return e=Nie(e,!r,"/",hSe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Ec(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Tu,r=t.charCodeAt(t.length-1)===Tu;return t=Nie(t,!e,"/",hSe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Ec(t,"path"),t.length>0&&t.charCodeAt(0)===Tu},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Ec(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Er.posix.normalize(e)},relative(t,e){if(Ec(t,"from"),Ec(e,"to"),t===e||(t=Er.posix.resolve(t),e=Er.posix.resolve(e),t===e))return"";let r=1,n=t.length,o=n-r,s=1,c=e.length-s,l=o<c?o:c,u=-1,d=0;for(;d<l;d++){let m=t.charCodeAt(r+d);if(m!==e.charCodeAt(s+d))break;m===Tu&&(u=d)}if(d===l)if(c>l){if(e.charCodeAt(s+d)===Tu)return e.slice(s+d+1);if(d===0)return e.slice(s+d)}else o>l&&(t.charCodeAt(r+d)===Tu?u=d:d===0&&(u=0));let p="";for(d=r+u+1;d<=n;++d)(d===n||t.charCodeAt(d)===Tu)&&(p+=p.length===0?"..":"/..");return`${p}${e.slice(s+u)}`},toNamespacedPath(t){return t},dirname(t){if(Ec(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Tu,r=-1,n=!0;for(let o=t.length-1;o>=1;--o)if(t.charCodeAt(o)===Tu){if(!n){r=o;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Ec(e,"ext"),Ec(t,"path");let r=0,n=-1,o=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let c=e.length-1,l=-1;for(s=t.length-1;s>=0;--s){let u=t.charCodeAt(s);if(u===Tu){if(!o){r=s+1;break}}else l===-1&&(o=!1,l=s+1),c>=0&&(u===e.charCodeAt(c)?--c===-1&&(n=s):(c=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===Tu){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){Ec(t,"path");let e=-1,r=0,n=-1,o=!0,s=0;for(let c=t.length-1;c>=0;--c){let l=t.charCodeAt(c);if(l===Tu){if(!o){r=c+1;break}continue}n===-1&&(o=!1,n=c+1),l===Xw?e===-1?e=c:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Eft.bind(null,"/"),parse(t){Ec(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Tu,n;r?(e.root="/",n=1):n=0;let o=-1,s=0,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){let p=t.charCodeAt(u);if(p===Tu){if(!l){s=u+1;break}continue}c===-1&&(l=!1,c=u+1),p===Xw?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}if(c!==-1){let p=s===0&&r?1:s;o===-1||d===0||d===1&&o===c-1&&o===s+1?e.base=e.name=t.slice(p,c):(e.name=t.slice(p,o),e.base=t.slice(p,c),e.ext=t.slice(o,c))}return s>0?e.dir=t.slice(0,s-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Er.posix.win32=Er.win32.win32=Er.win32;Er.posix.posix=Er.win32.posix=Er.posix;Er.normalize=Yp?Er.win32.normalize:Er.posix.normalize;Er.isAbsolute=Yp?Er.win32.isAbsolute:Er.posix.isAbsolute;Er.join=Yp?Er.win32.join:Er.posix.join;Er.resolve=Yp?Er.win32.resolve:Er.posix.resolve;Er.relative=Yp?Er.win32.relative:Er.posix.relative;Er.dirname=Yp?Er.win32.dirname:Er.posix.dirname;Er.basename=Yp?Er.win32.basename:Er.posix.basename;Er.extname=Yp?Er.win32.extname:Er.posix.extname;Er.format=Yp?Er.win32.format:Er.posix.format;Er.parse=Yp?Er.win32.parse:Er.posix.parse;Er.toNamespacedPath=Yp?Er.win32.toNamespacedPath:Er.posix.toNamespacedPath;Er.sep=Yp?Er.win32.sep:Er.posix.sep;Er.delimiter=Yp?Er.win32.delimiter:Er.posix.delimiter});var kft=$(_8=>{"use strict";f();Object.defineProperty(_8,"__esModule",{value:!0});_8.URI=void 0;_8.isUriComponents=Zmr;_8.uriToFsPath=Oie;var Ift=bft(),Lie=pSe(),Gmr=/^\w[\w\d+.-]*$/,Vmr=/^\//,zmr=/^\/\//;function Kmr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Gmr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Vmr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(zmr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}a(Kmr,"_validateUri");function Ymr(t,e){return!t&&!e?"file":t}a(Ymr,"_schemeFix");function Jmr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==fy&&(e=fy+e):e=fy;break}return e}a(Jmr,"_referenceResolution");var Ns="",fy="/",Xmr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Fie=class t{static{a(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,o,s,c=!1){typeof e=="object"?(this.scheme=e.scheme||Ns,this.authority=e.authority||Ns,this.path=e.path||Ns,this.query=e.query||Ns,this.fragment=e.fragment||Ns):(this.scheme=Ymr(e,c),this.authority=r||Ns,this.path=Jmr(this.scheme,n||Ns),this.query=o||Ns,this.fragment=s||Ns,Kmr(this,c))}get fsPath(){return Oie(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:o,query:s,fragment:c}=e;return r===void 0?r=this.scheme:r===null&&(r=Ns),n===void 0?n=this.authority:n===null&&(n=Ns),o===void 0?o=this.path:o===null&&(o=Ns),s===void 0?s=this.query:s===null&&(s=Ns),c===void 0?c=this.fragment:c===null&&(c=Ns),r===this.scheme&&n===this.authority&&o===this.path&&s===this.query&&c===this.fragment?this:new Zw(r,n,o,s,c)}static parse(e,r=!1){let n=Xmr.exec(e);return n?new Zw(n[2]||Ns,Mie(n[4]||Ns),Mie(n[5]||Ns),Mie(n[7]||Ns),Mie(n[9]||Ns),r):new Zw(Ns,Ns,Ns,Ns,Ns)}static file(e){let r=Ns;if(Lie.isWindows&&(e=e.replace(/\\/g,fy)),e[0]===fy&&e[1]===fy){let n=e.indexOf(fy,2);n===-1?(r=e.substring(2),e=fy):(r=e.substring(2,n),e=e.substring(n)||fy)}return new Zw("file",r,e,Ns,Ns)}static from(e,r){return new Zw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Lie.isWindows&&e.scheme==="file"?n=t.file(Ift.win32.join(Oie(e,!0),...r)).path:n=Ift.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return gSe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Zw(e);return r._formatted=e.external??null,r._fsPath=e._sep===_ft?e.fsPath??null:null,r}}else return e}};_8.URI=Fie;function Zmr(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}a(Zmr,"isUriComponents");var _ft=Lie.isWindows?1:void 0,Zw=class extends Fie{static{a(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=Oie(this,!1)),this._fsPath}toString(e=!1){return e?gSe(this,!0):(this._formatted||(this._formatted=gSe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=_ft),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Sft={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Tft(t,e,r){let n,o=-1;for(let s=0;s<t.length;s++){let c=t.charCodeAt(s);if(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c===45||c===46||c===95||c===126||e&&c===47||r&&c===91||r&&c===93||r&&c===58)o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n!==void 0&&(n+=t.charAt(s));else{n===void 0&&(n=t.substr(0,s));let l=Sft[c];l!==void 0?(o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n+=l):o===-1&&(o=s)}}return o!==-1&&(n+=encodeURIComponent(t.substring(o))),n!==void 0?n:t}a(Tft,"encodeURIComponentFast");function ehr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Sft[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}a(ehr,"encodeURIComponentMinimal");function Oie(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Lie.isWindows&&(r=r.replace(/\//g,"\\")),r}a(Oie,"uriToFsPath");function gSe(t,e){let r=e?ehr:Tft,n="",{scheme:o,authority:s,path:c,query:l,fragment:u}=t;if(o&&(n+=o,n+=":"),(s||o==="file")&&(n+=fy,n+=fy),s){let d=s.indexOf("@");if(d!==-1){let p=s.substr(0,d);s=s.substr(d+1),d=p.lastIndexOf(":"),d===-1?n+=r(p,!1,!1):(n+=r(p.substr(0,d),!1,!1),n+=":",n+=r(p.substr(d+1),!1,!0)),n+="@"}s=s.toLowerCase(),d=s.lastIndexOf(":"),d===-1?n+=r(s,!1,!0):(n+=r(s.substr(0,d),!1,!0),n+=s.substr(d))}if(c){if(c.length>=3&&c.charCodeAt(0)===47&&c.charCodeAt(2)===58){let d=c.charCodeAt(1);d>=65&&d<=90&&(c=`/${String.fromCharCode(d+32)}:${c.substr(3)}`)}else if(c.length>=2&&c.charCodeAt(1)===58){let d=c.charCodeAt(0);d>=65&&d<=90&&(c=`${String.fromCharCode(d+32)}:${c.substr(2)}`)}n+=r(c,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),u&&(n+="#",n+=e?u:Tft(u,!1,!1)),n}a(gSe,"_asFormatted");function Rft(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+Rft(t.substr(3)):t}}a(Rft,"decodeURIComponentGraceful");var wft=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Mie(t){return t.match(wft)?t.replace(wft,e=>Rft(e)):t}a(Mie,"percentDecode")});var CSe=$(e_=>{"use strict";f();Object.defineProperty(e_,"__esModule",{value:!0});e_.PromptReference=e_.ChatResponseReferencePartStatusKind=e_.PromptMetadata=void 0;var WU=kft(),ASe=class{static{a(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};e_.PromptMetadata=ASe;var Pft;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(Pft||(e_.ChatResponseReferencePartStatusKind=Pft={}));var ySe=class t{static{a(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=a(n=>"scheme"in n?WU.URI.from(n):{uri:WU.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?WU.URI.from(e.iconPath):"light"in e.iconPath?{light:WU.URI.from(e.iconPath.light),dark:WU.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};e_.PromptReference=ySe});var SSe=$(R8=>{"use strict";f();Object.defineProperty(R8,"__esModule",{value:!0});R8.PromptRenderer=R8.MetadataMap=void 0;var thr=G_e(),jU=J_e(),S8=Gw(),Vc=lSe(),_Se=CSe(),Dft;(function(t){t.empty={get:a(()=>{},"get"),getAll:a(()=>[],"getAll")}})(Dft||(R8.MetadataMap=Dft={}));var xSe=class{static{a(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new Uie(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,o){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=o}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,o){let s=new Map;for(let[u,d]of r.entries()){if(Array.isArray(d.children)&&(d.props=d.props??{},d.props.children=d.children),!d.ctor){let A=Lft(d.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${A}`)}let p=this.createElement(d),m;p instanceof Vc.TokenLimit&&(m=d.props.max,this._tokenLimits.push({limit:m,id:d.node.id})),d.node.setObj(p);let h=d.props.flexGrow??1/0,g=s.get(h);g||(g=[],s.set(h,g)),g.push({element:d,promptElementInstance:p,tokenLimit:m})}if(s.size===0)return;let c=[...s.entries()].sort(([u],[d])=>d-u).map(([u,d])=>d),l=a(u=>{let d=0;for(let p=u+1;p<c.length;p++)for(let{element:m}of c[p]){if(!m.props.flexReserve)continue;let h=typeof m.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(m.props.flexReserve.slice(1))):m.props.flexReserve;d+=h}return e.consume(d),d},"setReserved");for(let[u,d]of c.entries()){let p=l(u),m=0;for(let{element:v}of d)m+=v.props.flexBasis??1;let h=0,g=d.map(v=>{if(v.tokenLimit===void 0)return!1;let b=v.element.props.flexBasis??1,I=b/m;return Math.floor(e.remainingTokenBudget*I)<v.tokenLimit?!1:(m-=b,h+=v.tokenLimit,!0)}),A=d.map((v,b)=>{let I=(v.element.props.flexBasis??1)/m;return{tokenBudget:g[b]?v.tokenLimit:Math.floor((e.remainingTokenBudget-h)*I),endpoint:e.endpoint,countTokens:a((S,k)=>this._tokenizer.tokenLength(typeof S=="string"?{type:S8.Raw.ChatCompletionContentPartKind.Text,text:S}:S,k),"countTokens")}});e.consume(-p),this.tracer?.addRenderEpoch?.({inNode:d[0].element.node.parent?.id,flexValue:d[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:p,elements:d.map((v,b)=>({id:v.element.node.id,tokenBudget:A[b].tokenBudget}))}),await Promise.all(d.map(async({element:v,promptElementInstance:b},I)=>{let S=await Nft(v,()=>b.prepare?.(A[I],n,o));v.node.setState(S)}));let y=await Promise.all(d.map(async({element:v,promptElementInstance:b},I)=>{let S=A[I];return await Nft(v,()=>b.render(v.node.getState(),S,n,o))}));for(let[v,{element:b,promptElementInstance:I}]of d.entries()){let S=A[v],k=y[v];if(!k)continue;let N=await this._processPromptRenderPiece(new Jk(S.tokenBudget,this._endpoint),b,I,k,n,o);I instanceof Vc.Expandable&&this._growables.push({initialConsume:N,elem:b.node}),e.consume(N)}}}async _processPromptRenderPiece(e,r,n,o,s,c){let l=Mft(o),u=new Jk(e.tokenBudget,this._endpoint),{tokensConsumed:d}=await rhr(this._tokenizer,r,n,l);return u.consume(d),await this._handlePromptChildren(r,l,u,s,c),u.consumed}async renderElementJSON(e){return await this._processPromptPieces(new Jk(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,S8.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new Jk(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:o,removed:s}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:s,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:a(h=>this._getFinalElementTree(h,void 0).then(g=>({...g,budget:h})),"renderTree")});let c=[...n.toChatMessages()],l=await n.tokenCount(this._tokenizer),u=[...n.allMetadata()],d=new Set,p=u.map(h=>{if(!(h instanceof L1))return;let g=h.reference,A="variableName"in g.anchor;if(A&&!d.has(g.anchor.variableName))return d.add(g.anchor.variableName),g;if(!A)return g}).filter(qie),m=o.map(h=>{if(!(h instanceof L1)||u.includes(h))return;let g=h.reference,A="variableName"in g.anchor;if(A&&!d.has(g.anchor.variableName))return d.add(g.anchor.variableName),g;if(!A)return g}).filter(qie);return{metadata:{get:a(h=>u.find(g=>g instanceof h),"get"),getAll:a(h=>u.filter(g=>g instanceof h),"getAll")},messages:c,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:p,omittedReferences:m}}async _getFinalElementTree(e,r){let n=this._root.materialize(),o=[...n.allMetadata()],s=[{limit:e,id:this._root.id},...this._tokenLimits],c=0;for(let l=s.length-1;l>=0;l--){let u=s[l];if(u.limit>e)continue;let d=n.findById(u.id);if(!d)continue;let p=await d.tokenCount(this._tokenizer);if(p<u.limit&&!await this._grow(d,p,u.limit,r))continue;let m=await d.tokenCount(this._tokenizer);for(;m>u.limit;){let h=await d.baseMessageTokenCount(this._tokenizer);do for(let g of d.removeLowestPriorityChild()){c++;let A=g.upperBoundTokenCount(this._tokenizer);m-=typeof A=="number"?A:await A}while(m-h>u.limit);m=await d.tokenCount(this._tokenizer)}}return{container:n,allMetadata:o,removed:c}}async _grow(e,r,n,o){if(!this._growables.length)return!1;for(let s of this._growables){if(!e.findById(s.elem.id))continue;let c=s.elem.getObj();if(!(c instanceof Vc.Expandable))throw new Error("unreachable: expected growable");let l=new Uie(null,0,s.elem.id),u=new Jk(n-r+s.initialConsume,this._endpoint),d=await this._processPromptRenderPiece(u,{node:l,ctor:this._ctor,props:{},children:[],path:[this._ctor]},c,await c.render(void 0,{tokenBudget:u.tokenBudget,endpoint:this._endpoint,countTokens:a((h,g)=>this._tokenizer.tokenLength(typeof h=="string"?{type:S8.Raw.ChatCompletionContentPartKind.Text,text:h}:h,g),"countTokens")}),void 0,o),p=l.materialize();if(!e.replaceNode(s.elem.id,p))throw new Error("unreachable: could not find old element to replace");if(r-=s.initialConsume,r+=d,r>=n)break}return!0}_handlePromptChildren(e,r,n,o,s){if(e.ctor===Vc.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let c=[];for(let l of r){if(l.kind==="literal"){e.node.appendStringChild(l.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(l.kind==="intrinsic"){this._handleIntrinsic(e.node,l.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...l.props},Qie(l.children));continue}let u=e.node.createChild();c.push({node:u,ctor:l.ctor,props:l.props,children:l.children,path:[...e.path,l.ctor]})}return this._processPromptPieces(n,c,o,s)}_handleIntrinsic(e,r,n,o,s){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,o);case"br":return this._handleIntrinsicLineBreak(e,n,o,n.priority,s);case"usedContext":return this._handleIntrinsicUsedContext(e,n,o);case"references":return this._handleIntrinsicReferences(e,n,o);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,o);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,o,s)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,o){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,o)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,o,s){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(o??Number.MAX_SAFE_INTEGER,s)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let o of n.elements())this.tracer.includeInEpoch({id:o.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let o of r.value)e.addMetadata(new L1(o))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,o){let s=[],c=[];for(let l of o){if(l.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(l.kind==="literal"&&s.push(l.value),l.kind==="intrinsic")if(l.name==="br")s.push(`
`);else if(l.name==="references")for(let u of l.props.value)c.push(new L1(u));else this._handleIntrinsic(e,l.name,l.props,Qie(l.children),r.childIndex)}e.appendStringChild(s.join(""),n?.priority??Number.MAX_SAFE_INTEGER,c,r.childIndex,!0)}};R8.PromptRenderer=xSe;async function rhr(t,e,r,n){let o=0;if((0,Vc.isChatMessagePromptElement)(r)){let s={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};o+=await t.countMessageTokens((0,S8.toMode)(t.mode,s))}for(let s of n)s.kind==="literal"&&(o+=await t.tokenLength({type:S8.Raw.ChatCompletionContentPartKind.Text,text:s.value}));return{tokensConsumed:o}}a(rhr,"computeTokensConsumedByLiterals");function Mft(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new ISe(String(t))):nhr(t)?Qie(t.children,e):ihr(t)?Qie(t,e):typeof t.ctor=="string"?e.push(new ESe(t.ctor,t.props,t.children)):e.push(new bSe(t.ctor,t.props,t.children)),e)}a(Mft,"flattenAndReduce");function Qie(t,e=[]){for(let r of t)Mft(r,e);return e}a(Qie,"flattenAndReduceArr");var ESe=class{static{a(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},bSe=class{static{a(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},ISe=class{static{a(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},Jk=class{static{a(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},Uie=class t{static{a(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let o=new t(null,e);switch(o._metadata=r.references?.map(s=>new L1(_Se.PromptReference.fromJSON(s)))??[],o._children=r.children.map((s,c)=>{switch(s.type){case 1:return t.fromJSON(c,s,n);case 2:return GU.fromJSON(o,c,s);default:}}).filter(qie),r.ctor){case 1:o._objFlags=r.flags??0,o._obj=new Vc.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let s=n.get(r.keepWithId);s||(s=(0,Vc.useKeepWith)(),n.set(r.keepWithId,s)),o._obj=new s(r.props||{})}else o._obj=new Vc.LogicalWrapper(r.props||{});o._objFlags=r.flags??0;break}case 3:o._obj=new Vc.Image(r.props);break;default:}return o}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof Vc.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Vc.Chunk&&(this._objFlags|=2),this._obj instanceof Vc.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,o=this._children.length,s=!1){this._children.push(new GU(this,o,e,r,n,s))}appendLineBreak(e,r=this._children.length){this._children.push(new GU(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(qie),props:{},references:this._metadata.filter(r=>r instanceof L1).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=vSe(this._obj.props,thr.jsonRetainedProps)),this._obj instanceof Vc.BaseChatMessage)e.ctor=1,Object.assign(e.props,vSe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Vc.Image)return{...e,ctor:3,props:{...e.props,...vSe(this._obj.props,["src","detail"])}};this._obj instanceof Vc.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof Vc.Image)return new jU.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Vc.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new jU.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Vc.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Vc.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new jU.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(o=>o.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof Vc.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof Vc.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new TSe({type:S8.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},TSe=class{static{a(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new jU.MaterializedChatMessageBreakpoint(e,this.part)}},GU=class t{static{a(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(o=>new L1(_Se.PromptReference.fromJSON(o))),n.lineBreakBefore)}kind=2;constructor(e,r,n,o,s,c=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=o,this.metadata=s,this.lineBreakBefore=c}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new jU.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof L1).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function nhr(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}a(nhr,"isFragmentCtor");function qie(t){return t!==void 0}a(qie,"isDefined");var wSe=class extends _Se.PromptMetadata{static{a(this,"InternalMetadata")}},L1=class extends wSe{static{a(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function ihr(t){return!!t&&typeof t[Symbol.iterator]=="function"}a(ihr,"isIterable");function vSe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}a(vSe,"pickProps");function Lft(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}a(Lft,"atPath");var Bft=new WeakSet;async function Nft(t,e){try{return await e()}catch(r){throw r instanceof Error&&!Bft.has(r)&&r.constructor.name!=="CancellationError"&&(Bft.add(r),r.message+=` (at tsx element ${Lft(t.path)})`),r}}a(Nft,"annotateError")});var Fft=$(Hie=>{"use strict";f();Object.defineProperty(Hie,"__esModule",{value:!0});Hie.VSCodeTokenizer=void 0;var RSe=Gw(),kSe=class{static{a(this,"VSCodeTokenizer")}countTokens;mode=RSe.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==RSe.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===RSe.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};Hie.VSCodeTokenizer=kSe});var Oft=$(k8=>{"use strict";f();Object.defineProperty(k8,"__esModule",{value:!0});k8.tracerCss=k8.tracerSrc=void 0;k8.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';k8.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var $ft=$(Wie=>{"use strict";f();Object.defineProperty(Wie,"__esModule",{value:!0});Wie.HTMLTracer=void 0;var Qft=Oft(),Xk=J_e(),ohr=Gw(),PSe=class{static{a(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return DSe.create({epochs:this.epochs,traceData:qft(this.traceData)})}serveRouter(e){return new $ie({baseAddress:e,epochs:this.epochs,traceData:qft(this.traceData)})}};Wie.HTMLTracer=PSe;var $ie=class{static{a(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,o=r,s=new URL(n.url||"/","http://localhost"),c=`/${this.serverToken}`;switch(s.pathname){case c:case`${c}/`:this.onRoot(s,n,o);break;case`${c}/regen`:this.onRegen(s,n,o);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${Qft.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Uft(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${Qft.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:o}=this.opts,s=Number(e.searchParams.get("n")||o.budget),c=await o.renderTree(s),l=await Uft(o.tokenizer,c),u=JSON.stringify(l);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(u)),n.end(u)}onRoot(e,r,n){this.getHTML().then(o=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(o)),n.end(o)})}},DSe=class t extends $ie{static{a(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((c,l)=>{try{s.route(c,l)||(l.statusCode=404,l.end("Not Found"))}catch(u){l.statusCode=500,l.end(String(u))}}),o=await new Promise((c,l)=>{n.listen(0,"127.0.0.1",()=>c(n.address().port)).on("error",l)}),s=new t({...e,baseAddress:`http://127.0.0.1:${o}`},n);return s}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Uft(t,e){return{container:await Hft(t,e.container,!1),removed:e.removed,budget:e.budget}}a(Uft,"serializeRenderData");async function Hft(t,e,r){let n={metadata:e.metadata.map(ahr),priority:e.priority};if(e instanceof Xk.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof Xk.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof Xk.MaterializedChatMessageOpaque||e instanceof Xk.MaterializedChatMessageBreakpoint)return;{let o={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(s=>Hft(t,s,r||e instanceof Xk.MaterializedChatMessage)))).filter(s=>!!s),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof Xk.GenericMaterializedContainer)return{...o,type:0};if(e instanceof Xk.MaterializedChatMessage){let s=e.text.filter(c=>typeof c=="string").join("").trim();return{...o,type:1,role:ohr.Raw.ChatRole.display(e.role),text:s}}}shr(e)}a(Hft,"serializeMaterialized");function shr(t){throw new Error("unreachable")}a(shr,"assertNever");function ahr(t){return{name:t.constructor.name,value:JSON.stringify(t)}}a(ahr,"serializeMetadata");var qft=a(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var jft=$(Wft=>{"use strict";f();Object.defineProperty(Wft,"__esModule",{value:!0})});var Vft=$(Gft=>{"use strict";f();Object.defineProperty(Gft,"__esModule",{value:!0})});var Kft=$(zft=>{"use strict";f();Object.defineProperty(zft,"__esModule",{value:!0})});var xa=$(Ea=>{"use strict";f();var chr=Ea&&Ea.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:a(function(){return e[r]},"get")}),Object.defineProperty(t,n,o)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Zk=Ea&&Ea.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&chr(e,t,r)};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.contentType=Ea.PromptRenderer=Ea.MetadataMap=Ea.PromptElement=Ea.JSONTree=void 0;Ea.renderPrompt=dhr;Ea.renderElementJSON=fhr;var BSe=Gw(),Yft=SSe(),lhr=Fft();Zk($ft(),Ea);Ea.JSONTree=G_e();Zk(Gw(),Ea);Zk(lSe(),Ea);Zk(CSe(),Ea);Zk(jft(),Ea);Zk(Vft(),Ea);Zk(Kft(),Ea);var uhr=Z_e();Object.defineProperty(Ea,"PromptElement",{enumerable:!0,get:a(function(){return uhr.PromptElement},"get")});var Jft=SSe();Object.defineProperty(Ea,"MetadataMap",{enumerable:!0,get:a(function(){return Jft.MetadataMap},"get")});Object.defineProperty(Ea,"PromptRenderer",{enumerable:!0,get:a(function(){return Jft.PromptRenderer},"get")});async function dhr(t,e,r,n,o,s,c=BSe.OutputMode.VSCode){let l="countTokens"in n?new lhr.VSCodeTokenizer((m,h)=>n.countTokens(m,h),c):n,u=new Yft.PromptRenderer(r,t,e,l),d=await u.render(o,s),p=u.getUsedContext();return{...d,usedContext:p}}a(dhr,"renderPrompt");Ea.contentType="application/vnd.codechat.prompt+json.1";function fhr(t,e,r,n){return new Yft.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:BSe.OutputMode.Raw,countMessageTokens(s){throw new Error("Tools may only return text, not messages.")},tokenLength(s,c){return s.type===BSe.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(s.text,c)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}a(fhr,"renderElementJSON")});var Am=$(Fq=>{"use strict";f();Object.defineProperty(Fq,"__esModule",{value:!0});Fq.dedent=void 0;function Smt(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var o=n.reduce(function(l,u){var d=u.match(/\n([\t ]+|(?!\s).)/g);return d?l.concat(d.map(function(p){var m,h;return(h=(m=p.match(/[\t ]/g))===null||m===void 0?void 0:m.length)!==null&&h!==void 0?h:0})):l},[]);if(o.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,o)+"}","g");n=n.map(function(l){return l.replace(s,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var c=n[0];return e.forEach(function(l,u){var d=c.match(/(?:^|\n)( *)$/),p=d?d[1]:"",m=l;typeof l=="string"&&l.includes(`
`)&&(m=String(l).split(`
`).map(function(h,g){return g===0?h:""+p+h}).join(`
`)),c+=m+n[u+1]}),c}a(Smt,"dedent");Fq.dedent=Smt;Fq.default=Smt});var Mmt=$(wRe=>{"use strict";f();Object.defineProperty(wRe,"__esModule",{value:!0});wRe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var qmt=$(SRe=>{"use strict";f();Object.defineProperty(SRe,"__esModule",{value:!0});var Lmt=require("worker_threads"),XAr=require("v8"),ZAr=require("os"),Fmt=Mmt(),Ose="ready",Omt="spawning",eyr="busy",Qse="off",Qmt=ZAr.cpus().length,Umt=process.version.replace("v","").split("."),tyr=parseInt(Umt[0]),ryr=parseInt(Umt[1]),_Re=class{static{a(this,"WorkerPool")}constructor(){this.maxWorkers=Qmt,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new Lmt.Worker(Fmt.workerFile,{eval:!0});e.status=Omt,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=Ose,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=Qse,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:u})=>u===Qse).forEach(u=>this.resurrect(u)),this.taskQueue.length===0)return;let e;for(let u=0;u<this.workers.length;u++)if(this.workers[u].status===Ose){e=this.workers[u];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=eyr;let{worker:n}=e,{handler:o,config:s,resolve:c,reject:l}=r;try{let u="";for(let h in s.ctx){if(!s.ctx.hasOwnProperty(h))continue;let g;switch(typeof s.ctx[h]){case"string":g=`'${s.ctx[h]}'`;break;case"object":g=JSON.stringify(s.ctx[h]);break;default:g=s.ctx[h]}u+=`let ${h} = ${g}
`}let d=XAr.serialize(s.data),p=JSON.stringify(d),m=`
      async function __executor__() {
        const v8 = require('v8')
        ${u}
        const dataParsed = JSON.parse('${p}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${o.toString()})(dataDeserialized)
      }
      `;n.once("message",h=>{if(this.free(n),typeof h.error>"u"||h.error===null)return c(h.data);let g=new Error(h.error.message);g.stack=h.error.stack,l(g)}),n.once("error",h=>{e.status=Qse,l(h),this.tick()}),n.postMessage(m)}catch(u){this.free(n),l(u)}}enqueue({handler:e,config:r,resolve:n,reject:o}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:o}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=Ose,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:Qmt,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let o=0,s=0;for(let c=0;c<this.maxWorkers;c++){let l=new Lmt.Worker(Fmt.workerFile,{eval:!0});this.workers.push({status:Omt,worker:l}),l.once("online",(u=>()=>{process.nextTick(()=>{this.workers[u].status=Ose,this.workers[u].worker.removeAllListeners(),o++,o>0&&o+s===this.maxWorkers&&r()})})(c)),l.once("error",(u=>d=>{this.workers[u].status=Qse,this.workers[u].worker.removeAllListeners(),s++,s===this.maxWorkers&&n(d)})(c))}})}async teardown(){if(tyr>=12&&ryr>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let o=0;o<this.workers.length;o++)this.workers[o].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};SRe.default=new _Re});var Use=$(EP=>{"use strict";f();var nyr=EP&&EP.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(EP,"__esModule",{value:!0});var qq=nyr(qmt()),iyr=`job needs a function.
Try with:
> job(() => {...}, config)`,oyr=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function syr(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(iyr));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(oyr));qq.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}a(syr,"job");EP.job=syr;EP.stop=qq.default.teardown.bind(qq.default);EP.start=qq.default.setup.bind(qq.default)});var Xmt=$(bP=>{"use strict";f();var K1=bP&&bP.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},DRe=bP&&bP.__classPrivateFieldSet||function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},ME,x_;Object.defineProperty(bP,"__esModule",{value:!0});var BRe=class{static{a(this,"AwaitLock")}constructor(){ME.set(this,!1),x_.set(this,new Set)}get acquired(){return K1(this,ME,"f")}acquireAsync({timeout:e}={}){if(!K1(this,ME,"f"))return DRe(this,ME,!0,"f"),Promise.resolve();if(e==null)return new Promise(o=>{K1(this,x_,"f").add(o)});let r,n;return Promise.race([new Promise(o=>{r=a(()=>{clearTimeout(n),o()},"resolver"),K1(this,x_,"f").add(r)}),new Promise((o,s)=>{n=setTimeout(()=>{K1(this,x_,"f").delete(r),s(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return K1(this,ME,"f")?!1:(DRe(this,ME,!0,"f"),!0)}release(){if(!K1(this,ME,"f"))throw new Error("Cannot release an unacquired lock");if(K1(this,x_,"f").size>0){let[e]=K1(this,x_,"f");K1(this,x_,"f").delete(e),e()}else DRe(this,ME,!1,"f")}};bP.default=BRe;ME=new WeakMap,x_=new WeakMap});var vPe=$((bIo,Uyt)=>{f();var pH=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,xIr=typeof AbortController=="function",Hce=xIr?AbortController:class{static{a(this,"AbortController")}constructor(){this.signal=new Fyt}abort(){this.signal.dispatchEvent("abort")}},EIr=typeof AbortSignal=="function",bIr=typeof Hce.AbortSignal=="function",Fyt=EIr?AbortSignal:bIr?Hce.AbortController:class{static{a(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},yPe=new Set,hPe=a((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;$ce(r)&&CPe(r,`${t} option`,`options.${e}`,qM)},"deprecatedOption"),gPe=a((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if($ce(r)){let{prototype:n}=qM,{get:o}=Object.getOwnPropertyDescriptor(n,t);CPe(r,`${t} method`,`cache.${e}()`,o)}},"deprecatedMethod"),IIr=a((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if($ce(r)){let{prototype:n}=qM,{get:o}=Object.getOwnPropertyDescriptor(n,t);CPe(r,`${t} property`,`cache.${e}`,o)}},"deprecatedProperty"),Oyt=a((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),$ce=a(t=>!yPe.has(t),"shouldWarn"),CPe=a((t,e,r,n)=>{yPe.add(t);let o=`The ${e} is deprecated. Please use ${r} instead.`;Oyt(o,"DeprecationWarning",t,n)},"warn"),FP=a(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),Qyt=a(t=>FP(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?UM:null:null,"getUintArray"),UM=class extends Array{static{a(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},APe=class{static{a(this,"Stack")}constructor(e){if(e===0)return[];let r=Qyt(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},qM=class t{static{a(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:o=1,ttlAutopurge:s,updateAgeOnGet:c,updateAgeOnHas:l,allowStale:u,dispose:d,disposeAfter:p,noDisposeOnSet:m,noUpdateTTL:h,maxSize:g=0,sizeCalculation:A,fetchMethod:y,fetchContext:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:I}=e,{length:S,maxAge:k,stale:N}=e instanceof t?{}:e;if(r!==0&&!FP(r))throw new TypeError("max option must be a nonnegative integer");let F=r?Qyt(r):Array;if(!F)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=g,this.sizeCalculation=A||S,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=v,!this.fetchMethod&&v!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new F(r),this.prev=new F(r),this.head=0,this.tail=0,this.free=new APe(r),this.initialFill=1,this.size=0,typeof d=="function"&&(this.dispose=d),typeof p=="function"?(this.disposeAfter=p,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!m,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!b,this.maxSize!==0){if(!FP(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!u||!!N,this.noDeleteOnStaleGet=!!I,this.updateAgeOnGet=!!c,this.updateAgeOnHas=!!l,this.ttlResolution=FP(o)||o===0?o:1,this.ttlAutopurge=!!s,this.ttl=n||k||0,this.ttl){if(!FP(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let O="LRU_CACHE_UNBOUNDED";$ce(O)&&(yPe.add(O),Oyt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,t))}N&&hPe("stale","allowStale"),k&&hPe("maxAge","ttl"),S&&hPe("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new UM(this.max),this.starts=new UM(this.max),this.setItemTTL=(n,o,s=pH.now())=>{if(this.starts[n]=o!==0?s:0,this.ttls[n]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},o+1);c.unref&&c.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?pH.now():0};let e=0,r=a(()=>{let n=pH.now();if(this.ttlResolution>0){e=n;let o=setTimeout(()=>e=0,this.ttlResolution);o.unref&&o.unref()}return n},"getNow");this.getRemainingTTL=n=>{let o=this.keyMap.get(n);return o===void 0?0:this.ttls[o]===0||this.starts[o]===0?1/0:this.starts[o]+this.ttls[o]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new UM(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,o)=>{if(!FP(n))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(n=o(r,e),!FP(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,o){if(n||o)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return gPe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],o=this.valList[r],c={value:this.isBackgroundFetch(o)?o.__staleWhileFetching:o};if(this.ttls){c.ttl=this.ttls[r];let l=pH.now()-this.starts[r];c.start=Math.floor(Date.now()-l)}this.sizes&&(c.size=this.sizes[r]),e.unshift([n,c])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let o=Date.now()-n.start;n.start=pH.now()-o}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL}={}){if(c=this.requireSize(e,r,c,l),this.maxSize&&c>this.maxSize)return this;let d=this.size===0?void 0:this.keyMap.get(e);if(d===void 0)d=this.newIndex(),this.keyList[d]=e,this.valList[d]=r,this.keyMap.set(e,d),this.next[this.tail]=d,this.prev[d]=this.tail,this.tail=d,this.size++,this.addItemSize(d,c),u=!1;else{let p=this.valList[d];r!==p&&(this.isBackgroundFetch(p)?p.__abortController.abort():s||(this.dispose(p,e,"set"),this.disposeAfter&&this.disposed.push([p,e,"set"])),this.removeItemSize(d),this.valList[d]=r,this.addItemSize(d,c)),this.moveToTail(d)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),u||this.setItemTTL(d,n,o),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],o=this.valList[r];return this.isBackgroundFetch(o)?o.__abortController.abort():(this.dispose(o,n,"evict"),this.disposeAfter&&this.disposed.push([o,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let o=this.valList[n];return this.isBackgroundFetch(o)?o.__staleWhileFetching:o}}backgroundFetch(e,r,n,o){let s=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(s))return s;let c=new Hce,l={signal:c.signal,options:n,context:o},u=a(h=>(c.signal.aborted||this.set(e,h,l.options),h),"cb"),d=a(h=>{if(this.valList[r]===m&&(!n.noDeleteOnFetchRejection||m.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=m.__staleWhileFetching),m.__returned===m)throw h},"eb"),p=a(h=>h(this.fetchMethod(e,s,l)),"pcall"),m=new Promise(p).then(u,d);return m.__abortController=c,m.__staleWhileFetching=s,m.__returned=null,r===void 0?(this.set(e,m,l.options),r=this.keyMap.get(e)):this.valList[r]=m,m}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:l=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,fetchContext:m=this.fetchContext,forceRefresh:h=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o});let g={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:c,size:l,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:p},A=this.keyMap.get(e);if(A===void 0){let y=this.backgroundFetch(e,A,g,m);return y.__returned=y}else{let y=this.valList[A];if(this.isBackgroundFetch(y))return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!h&&!this.isStale(A))return this.moveToTail(A),n&&this.updateItemAge(A),y;let v=this.backgroundFetch(e,A,g,m);return r&&v.__staleWhileFetching!==void 0?v.__staleWhileFetching:v.__returned=v}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet}={}){let s=this.keyMap.get(e);if(s!==void 0){let c=this.valList[s],l=this.isBackgroundFetch(c);return this.isStale(s)?l?r?c.__staleWhileFetching:void 0:(o||this.delete(e),r?c:void 0):l?void 0:(this.moveToTail(s),n&&this.updateItemAge(s),c)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return gPe("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let o=this.valList[n];this.isBackgroundFetch(o)?o.__abortController.abort():(this.dispose(o,e,"delete"),this.disposeAfter&&this.disposed.push([o,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return gPe("reset","clear"),this.clear}get length(){return IIr("length","size"),this.size}static get AbortController(){return Hce}static get AbortSignal(){return Fyt}};Uyt.exports=qM});var bPe=$((wIo,qyt)=>{"use strict";f();var mH=class extends Error{static{a(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},xPe=class extends mH{static{a(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},EPe=class extends mH{static{a(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};qyt.exports={FetchBaseError:mH,FetchError:xPe,AbortError:EPe}});var HE=$((RIo,$yt)=>{"use strict";f();var{constants:{MAX_LENGTH:TIr}}=require("buffer"),{pipeline:Wce,PassThrough:wIr}=require("stream"),{promisify:_Ir}=require("util"),{createGunzip:SIr,createInflate:RIr,createBrotliDecompress:kIr,constants:{Z_SYNC_FLUSH:Hyt}}=require("zlib"),PIr=MC()("helix-fetch:utils"),DIr=_Ir(Wce),BIr=a((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),NIr=a((t,e,r,n)=>{if(!BIr(t,e))return r;let o=a(s=>{s&&(PIr(`encountered error while decoding stream: ${s}`),n(s))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return Wce(r,SIr({flush:Hyt,finishFlush:Hyt}),o);case"deflate":case"x-deflate":return Wce(r,RIr(),o);case"br":return Wce(r,kIr(),o);default:return r}},"decodeStream"),MIr=a(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),jce=a((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?LIr(t,e):FIr(t,e);default:return 0}},"calcSize"),LIr=a((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:jce(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),FIr=a((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let o in t)n.push(o);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(o=>{if(r+=jce(o,e),typeof t[o]=="object"&&t[o]!==null){if(e.has(t[o]))return;e.add(t[o])}r+=jce(t[o],e)}),r},"calcObjectSize"),OIr=a(t=>jce(t,new WeakSet),"sizeof"),QIr=a(async t=>{let e=new wIr,r=0,n=[];return e.on("data",o=>{if(r+o.length>TIr)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(o),r+=o.length}),await DIr(t,e),Buffer.concat(n,r)},"streamToBuffer");$yt.exports={decodeStream:NIr,isPlainObject:MIr,sizeof:OIr,streamToBuffer:QIr}});var Vce=$((DIo,Vyt)=>{"use strict";f();var{PassThrough:Wyt,Readable:$E}=require("stream"),{types:{isAnyArrayBuffer:Gyt}}=require("util"),{FetchError:UIr,FetchBaseError:qIr}=bPe(),{streamToBuffer:HIr}=HE(),$Ir=Buffer.alloc(0),Ag=Symbol("Body internals"),WIr=a(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),jyt=a(async t=>{if(t[Ag].disturbed)throw new TypeError("Already read");if(t[Ag].error)throw new TypeError(`Stream had error: ${t[Ag].error.message}`);t[Ag].disturbed=!0;let{stream:e}=t[Ag];return e===null?$Ir:HIr(e)},"consume"),Gce=class{static{a(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=$E.from(e.toString()):e instanceof $E?r=e:Buffer.isBuffer(e)?r=$E.from(e):Gyt(e)?r=$E.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=$E.from(e):r=$E.from(String(e)),this[Ag]={stream:r,disturbed:!1,error:null},e instanceof $E&&r.on("error",n=>{let o=n instanceof qIr?n:new UIr(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Ag].error=o})}get body(){return this[Ag].stream}get bodyUsed(){return this[Ag].disturbed}async buffer(){return jyt(this)}async arrayBuffer(){return WIr(await this.buffer())}async text(){return(await jyt(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(Gce.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var jIr=a(t=>{if(t[Ag].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Ag],r=e;if(e instanceof $E){r=new Wyt;let n=new Wyt;e.pipe(r),e.pipe(n),t[Ag].stream=n}return r},"cloneStream"),GIr=a(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||Gyt(t)||t instanceof $E?null:"text/plain; charset=utf-8","guessContentType");Vyt.exports={Body:Gce,cloneStream:jIr,guessContentType:GIr}});var HM=$((MIo,Jyt)=>{"use strict";f();var{validateHeaderName:zyt,validateHeaderValue:Kyt}=require("http"),{isPlainObject:VIr}=HE(),WE=Symbol("Headers internals"),hH=a(t=>{let e=typeof t!="string"?String(t):t;if(typeof zyt=="function")zyt(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),Yyt=a((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof Kyt=="function")Kyt(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),zce=class t{static{a(this,"Headers")}constructor(e={}){if(this[WE]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(VIr(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[WE].map.set(hH(e),Yyt(r,e))}has(e){return this[WE].map.has(hH(e))}get(e){let r=this[WE].map.get(hH(e));return r===void 0?null:r}append(e,r){let n=hH(e),o=Yyt(r,e),s=this[WE].map.get(n);this[WE].map.set(n,s?`${s}, ${o}`:o)}delete(e){this[WE].map.delete(hH(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[WE].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[WE].map)}};Object.defineProperties(zce.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));Jyt.exports={Headers:zce}});var IPe=$((OIo,Xyt)=>{"use strict";f();var{EventEmitter:zIr}=require("events"),Sy=Symbol("AbortSignal internals"),$M=class{static{a(this,"AbortSignal")}constructor(){this[Sy]={eventEmitter:new zIr,onabort:null,aborted:!1}}get aborted(){return this[Sy].aborted}get onabort(){return this[Sy].onabort}set onabort(e){this[Sy].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[Sy].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[Sy].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[Sy][n]=="function"&&this[n](r),this[Sy].eventEmitter.emit(e,r)}fire(){this[Sy].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties($M.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Yce=class extends $M{static{a(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[Sy].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[Sy].timerId)}};Object.defineProperties(Yce.prototype,{clear:{enumerable:!0}});var Kce=Symbol("AbortController internals"),Jce=class{static{a(this,"AbortController")}constructor(){this[Kce]={signal:new $M}}get signal(){return this[Kce].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Kce].signal.aborted||this[Kce].signal.fire()}};Object.defineProperties(Jce.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});Xyt.exports={AbortController:Jce,AbortSignal:$M,TimeoutSignal:Yce}});var gH=$((qIo,tCt)=>{"use strict";f();var{randomBytes:KIr}=require("crypto"),{Readable:YIr}=require("stream"),wPe=a(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),JIr=a(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),Zyt=a(t=>`--${t}--\r
\r
`,"getFooter"),eCt=a((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,wPe(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*XIr(t,e){for(let[r,n]of t)yield eCt(e,r,n),wPe(n)?yield*n.stream():yield n,yield`\r
`;yield Zyt(e)}a(XIr,"formDataIterator");var ZIr=a((t,e)=>{let r=0;for(let[n,o]of t)r+=Buffer.byteLength(eCt(e,n,o)),r+=wPe(o)?o.size:Buffer.byteLength(String(o)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(Zyt(e)),r},"getFormDataLength"),TPe=class{static{a(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=KIr(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=ZIr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return YIr.from(XIr(this.fd,this.boundary))}};tCt.exports={isFormData:JIr,FormDataSerializer:TPe}});var nCt=$((jIo,rCt)=>{"use strict";f();var{AbortSignal:WIo}=IPe(),{Body:eTr,cloneStream:tTr,guessContentType:rTr}=Vce(),{Headers:nTr}=HM(),{isPlainObject:iTr}=HE(),{isFormData:oTr,FormDataSerializer:sTr}=gH(),aTr=20,N_=Symbol("Request internals"),Xce=class t extends eTr{static{a(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,o=n?new URL(n.url):new URL(e),s=r.method||n&&n.method||"GET";if(s=s.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(s))throw new TypeError("Request with GET/HEAD method cannot have body");let c=r.body||(n&&n.body?tTr(n):null),l=new nTr(r.headers||n&&n.headers||{});if(oTr(c)&&!l.has("content-type")){let m=new sTr(c);c=m.stream(),l.set("content-type",m.contentType()),!l.has("transfer-encoding")&&!l.has("content-length")&&l.set("content-length",m.length())}if(!l.has("content-type"))if(iTr(c))c=JSON.stringify(c),l.set("content-type","application/json");else{let m=rTr(c);m&&l.set("content-type",m)}super(c);let u=n?n.signal:null;"signal"in r&&(u=r.signal);let d=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(d))throw new TypeError(`'${d}' is not a valid redirect option`);let p=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(p))throw new TypeError(`'${p}' is not a valid cache option`);this[N_]={init:{...r},method:s,redirect:d,cache:p,headers:l,parsedURL:o,signal:u},r.follow===void 0?!n||n.follow===void 0?this.follow=aTr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[N_].method}get url(){return this[N_].parsedURL.toString()}get headers(){return this[N_].headers}get redirect(){return this[N_].redirect}get cache(){return this[N_].cache}get signal(){return this[N_].signal}clone(){return new t(this)}get init(){return this[N_].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Xce.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});rCt.exports={Request:Xce}});var _Pe=$((zIo,iCt)=>{"use strict";f();var{Body:cTr,cloneStream:lTr,guessContentType:uTr}=Vce(),{Headers:dTr}=HM(),{isPlainObject:fTr}=HE(),{isFormData:pTr,FormDataSerializer:mTr}=gH(),Ry=Symbol("Response internals"),Zce=class t extends cTr{static{a(this,"Response")}constructor(e=null,r={}){let n=new dTr(r.headers),o=e;if(pTr(o)&&!n.has("content-type")){let s=new mTr(o);o=s.stream(),n.set("content-type",s.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",s.length())}if(o!==null&&!n.has("content-type"))if(fTr(o))o=JSON.stringify(o),n.set("content-type","application/json");else{let s=uTr(o);s&&n.set("content-type",s)}super(o),this[Ry]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[Ry].url||""}get status(){return this[Ry].status}get statusText(){return this[Ry].statusText}get ok(){return this[Ry].status>=200&&this[Ry].status<300}get redirected(){return this[Ry].counter>0}get headers(){return this[Ry].headers}get httpVersion(){return this[Ry].httpVersion}get decoded(){return this[Ry].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(lTr(this),{...this[Ry]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Zce.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});iCt.exports={Response:Zce}});var sCt=$((XIo,oCt)=>{"use strict";f();var hTr=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),gTr=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),ATr=new Set([500,502,503,504]),yTr={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},CTr={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function OP(t){let e=parseInt(t,10);return isFinite(e)?e:0}a(OP,"toNumberOrZero");function vTr(t){return t?ATr.has(t.status):!0}a(vTr,"isErrorResponse");function SPe(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[o,s]=n.split(/=/,2);e[o.trim()]=s===void 0?!0:s.trim().replace(/^"|"$/g,"")}return e}a(SPe,"parseCacheControl");function xTr(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}a(xTr,"formatCacheControl");oCt.exports=class{static{a(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:o,immutableMinTimeToLive:s,ignoreCargoCult:c,_fromObject:l}={}){if(l){this._fromObject(l);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=o!==void 0?o:.1,this._immutableMinTtl=s!==void 0?s:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=SPe(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=SPe(e.headers["cache-control"]),c&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":xTr(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&gTr.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||hTr.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=SPe(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)yTr[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let o of n)delete r[o]}if(r.warning){let n=r.warning.split(/,/).filter(o=>!/^\s*1[0-9][0-9]/.test(o));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return OP(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return OP(this._rescc["s-maxage"])}if(this._rescc["max-age"])return OP(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+OP(this._rescc["stale-if-error"]),n=e+OP(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+OP(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+OP(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let o=r["if-none-match"].split(/,/).filter(s=>!/^\s*W\//.test(s));o.length?r["if-none-match"]=o.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&vTr(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let o={};for(let c in this._resHeaders)o[c]=c in r.headers&&!CTr[c]?r.headers[c]:this._resHeaders[c];let s=Object.assign({},r,{status:this._status,method:this._method,headers:o});return{policy:new this.constructor(e,s,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var uCt=$((tTo,lCt)=>{"use strict";f();var ETr=sCt(),{Headers:bTr}=HM(),aCt=a(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),cCt=a(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),RPe=class{static{a(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new ETr(aCt(e),cCt(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(aCt(e))}responseHeaders(e){return new bTr(this.policy.responseHeaders(cCt(e)))}timeToLive(){return this.policy.timeToLive()}};lCt.exports=RPe});var pCt=$((iTo,fCt)=>{"use strict";f();var{Readable:ITr}=require("stream"),{Headers:dCt}=HM(),{Response:TTr}=_Pe(),M_=Symbol("CacheableResponse internals"),wTr=a(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),kPe=class t extends TTr{static{a(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new dCt(r.headers);this[M_]={headers:n,bufferedBody:e}}get headers(){return this[M_].headers}set headers(e){if(e instanceof dCt)this[M_].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return ITr.from(this[M_].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[M_].bufferedBody}async arrayBuffer(){return wTr(this[M_].bufferedBody)}async text(){return this[M_].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:o,httpVersion:s,decoded:c,counter:l}=this;return new t(this[M_].bufferedBody,{url:e,status:r,statusText:n,headers:o,httpVersion:s,decoded:c,counter:l})}get[Symbol.toStringTag](){return this.constructor.name}},_Tr=a(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:o,headers:s,httpVersion:c,decoded:l,counter:u}=t;return new kPe(e,{url:r,status:n,statusText:o,headers:s,httpVersion:c,decoded:l,counter:u})},"cacheableResponse");fCt.exports={cacheableResponse:_Tr}});var ele=$((aTo,mCt)=>{"use strict";f();var PPe=class extends Error{static{a(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};mCt.exports={RequestAbortedError:PPe}});var CCt=$((uTo,yCt)=>{"use strict";f();var gCt=require("http"),ACt=require("https"),{Readable:STr}=require("stream"),jE=MC()("helix-fetch:h1"),{RequestAbortedError:hCt}=ele(),{decodeStream:RTr}=HE(),kTr=a((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:o}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof o=="boolean"?(r.httpsAgent=new ACt.Agent(typeof o=="boolean"?{...n||{},rejectUnauthorized:o}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new gCt.Agent(n),r.httpAgent):void 0},"getAgent"),PTr=a(t=>{t.h1={}},"setupContext"),DTr=a(async({h1:t})=>{t.httpAgent&&(jE("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(jE("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),BTr=a((t,e,r)=>{let{statusCode:n,statusMessage:o,httpVersion:s,httpVersionMajor:c,httpVersionMinor:l,headers:u}=t,d=e?RTr(n,u,t,r):t;return{statusCode:n,statusText:o,httpVersion:s,httpVersionMajor:c,httpVersionMinor:l,headers:u,readable:d,decoded:!!(e&&d!==t)}},"createResponse"),NTr=a(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?ACt:gCt,o=kTr(t,e.protocol),s={...r,agent:o},{socket:c,body:l}=s;return c&&(delete s.socket,c.assigned||(c.assigned=!0,o?s.agent=new Proxy(o,{get:a((u,d)=>d==="createConnection"&&!c.inUse?(p,m)=>{jE(`agent reusing socket #${c.id} (${c.servername})`),c.inUse=!0,m(null,c)}:u[d],"get")}):s.createConnection=(u,d)=>{jE(`reusing socket #${c.id} (${c.servername})`),c.inUse=!0,d(null,c)})),new Promise((u,d)=>{jE(`${s.method} ${e.href}`);let p,{signal:m}=s,h=a(()=>{m.removeEventListener("abort",h),c&&!c.inUse&&(jE(`discarding redundant socket used for ALPN: #${c.id} ${c.servername}`),c.destroy()),d(new hCt),p&&p.abort()},"onAbortSignal");if(m){if(m.aborted){d(new hCt);return}m.addEventListener("abort",h)}p=n(e,s),p.once("response",g=>{m&&m.removeEventListener("abort",h),c&&!c.inUse&&(jE(`discarding redundant socket used for ALPN: #${c.id} ${c.servername}`),c.destroy()),u(BTr(g,s.decode,d))}),p.once("error",g=>{m&&m.removeEventListener("abort",h),c&&!c.inUse&&(jE(`discarding redundant socket used for ALPN: #${c.id} ${c.servername}`),c.destroy()),p.aborted||(jE(`${s.method} ${e.href} failed with: ${g.message}`),p.abort(),d(g))}),l instanceof STr?l.pipe(p):(l&&p.write(l),p.end())})},"h1Request");yCt.exports={request:NTr,setupContext:PTr,resetContext:DTr}});var bCt=$((pTo,ECt)=>{"use strict";f();var{connect:MTr,constants:LTr}=require("http2"),{Readable:FTr}=require("stream"),ba=MC()("helix-fetch:h2"),{RequestAbortedError:vCt}=ele(),{decodeStream:OTr}=HE(),{NGHTTP2_CANCEL:AH}=LTr,QTr=300*1e3,UTr=5e3,qTr=a(t=>{t.h2={sessionCache:{}}},"setupContext"),HTr=a(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),ba(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),xCt=a((t,e,r,n=()=>{})=>{let o={...t},s=o[":status"];delete o[":status"];let c=r?OTr(s,t,e,n):e;return{statusCode:s,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:o,readable:c,decoded:!!(r&&c!==e)}},"createResponse"),$Tr=a((t,e,r,n,o,s)=>{let{options:{h2:{pushPromiseHandler:c,pushHandler:l,pushedStreamIdleTimeout:u=UTr}}}=t,d=o[":path"],p=`${e}${d}`;ba(`received PUSH_PROMISE: ${p}, stream #${n.id}, headers: ${JSON.stringify(o)}, flags: ${s}`),c&&c(p,o,a(()=>{n.close(AH)},"rejectPush")),n.on("push",(m,h)=>{ba(`received push headers for ${e}${d}, stream #${n.id}, headers: ${JSON.stringify(m)}, flags: ${h}`),n.setTimeout(u,()=>{ba(`closing pushed stream #${n.id} after ${u} ms of inactivity`),n.close(AH)}),l&&l(p,o,xCt(m,n,r))}),n.on("aborted",()=>{ba(`pushed stream #${n.id} aborted`)}),n.on("error",m=>{ba(`pushed stream #${n.id} encountered error: ${m}`)}),n.on("frameError",(m,h,g)=>{ba(`pushed stream #${n.id} encountered frameError: type: ${m}, code: ${h}, id: ${g}`)})},"handlePush"),WTr=a(async(t,e,r)=>{let{origin:n,pathname:o,search:s,hash:c}=e,l=`${o}${s}${c}`,{options:{h2:u={}},h2:{sessionCache:d}}=t,{idleSessionTimeout:p=QTr,pushPromiseHandler:m,pushHandler:h}=u,g={...r},{method:A,headers:y,socket:v,body:b,decode:I}=g;return v&&delete g.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((S,k)=>{let N=d[n];if(!N||N.closed||N.destroyed){let V=!(t.options.rejectUnauthorized===!1||u.rejectUnauthorized===!1),U={...u,rejectUnauthorized:V};v&&!v.inUse&&(U.createConnection=()=>(ba(`reusing socket #${v.id} (${v.servername})`),v.inUse=!0,v)),N=MTr(n,{...U,settings:{enablePush:!!(m||h)}}),N.setMaxListeners(1e3),N.setTimeout(p,()=>{ba(`closing session ${n} after ${p} ms of inactivity`),N.close()}),N.once("connect",()=>{ba(`session ${n} established`),ba(`caching session ${n}`),d[n]=N}),N.on("localSettings",ee=>{ba(`session ${n} localSettings: ${JSON.stringify(ee)}`)}),N.on("remoteSettings",ee=>{ba(`session ${n} remoteSettings: ${JSON.stringify(ee)}`)}),N.once("close",()=>{ba(`session ${n} closed`),d[n]===N&&(ba(`discarding cached session ${n}`),delete d[n])}),N.once("error",ee=>{ba(`session ${n} encountered error: ${ee}`),d[n]===N&&(ba(`discarding cached session ${n}`),delete d[n])}),N.on("frameError",(ee,J,G)=>{ba(`session ${n} encountered frameError: type: ${ee}, code: ${J}, id: ${G}`)}),N.once("goaway",(ee,J,G)=>{ba(`session ${n} received GOAWAY frame: errorCode: ${ee}, lastStreamID: ${J}, opaqueData: ${G?G.toString():void 0}`)}),N.on("stream",(ee,J,G)=>{$Tr(t,n,I,ee,J,G)})}else v&&v.id!==N.socket.id&&!v.inUse&&(ba(`discarding redundant socket used for ALPN: #${v.id} ${v.servername}`),v.destroy());ba(`${A} ${e.host}${l}`);let F,{signal:O}=g,Y=a(()=>{O.removeEventListener("abort",Y),k(new vCt),F&&F.close(AH)},"onAbortSignal");if(O){if(O.aborted){k(new vCt);return}O.addEventListener("abort",Y)}let z=a(V=>{ba(`session ${n} encountered error during ${g.method} ${e.href}: ${V}`),k(V)},"onSessionError");N.once("error",z),F=N.request({":method":A,":path":l,...y}),F.once("response",V=>{N.off("error",z),O&&O.removeEventListener("abort",Y),S(xCt(V,F,g.decode,k))}),F.once("error",V=>{N.off("error",z),O&&O.removeEventListener("abort",Y),F.rstCode!==AH&&(ba(`${g.method} ${e.href} failed with: ${V.message}`),F.close(AH),k(V))}),F.once("frameError",(V,U,H)=>{N.off("error",z),ba(`encountered frameError during ${g.method} ${e.href}: type: ${V}, code: ${U}, id: ${H}`)}),F.on("push",(V,U)=>{ba(`received 'push' event: headers: ${JSON.stringify(V)}, flags: ${U}`)}),b instanceof FTr?b.pipe(F):(b&&F.write(b),F.end())})},"request");ECt.exports={request:WTr,setupContext:qTr,resetContext:HTr}});var TCt=$((gTo,ICt)=>{"use strict";f();var{EventEmitter:jTr}=require("events"),GTr=a(()=>{let t={},e=new jTr;return e.setMaxListeners(0),{acquire:a(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let o=a(s=>{t[r]||(t[r]=!0,e.removeListener(r,o),n(s))},"tryAcquire");e.on(r,o)}),"acquire"),release:a((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");ICt.exports=GTr});var wCt=$((CTo,VTr)=>{VTr.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var PCt=$((vTo,kCt)=>{"use strict";f();var{Readable:zTr}=require("stream"),KTr=require("tls"),{types:{isAnyArrayBuffer:YTr}}=require("util"),JTr=vPe(),DPe=MC()("helix-fetch:core"),{RequestAbortedError:tle}=ele(),BPe=CCt(),rle=bCt(),XTr=TCt(),{isPlainObject:ZTr}=HE(),{isFormData:ewr,FormDataSerializer:twr}=gH(),{version:rwr}=wCt(),NPe="h2",MPe="h2c",LPe="http/1.0",QP="http/1.1",nwr=100,iwr=3600*1e3,owr=[NPe,QP,LPe],swr=`helix-fetch/${rwr}`,awr={method:"GET",compress:!0,decode:!0},_Ct=0,SCt=XTr(),RCt=a((t,e)=>new Promise((r,n)=>{let{signal:o}=e,s,c=a(()=>{o.removeEventListener("abort",c);let d=new tle;n(d),s&&s.destroy(d)},"onAbortSignal");if(o){if(o.aborted){n(new tle);return}o.addEventListener("abort",c)}let l=+t.port||443,u=a(d=>{o&&o.removeEventListener("abort",c),d instanceof tle||(DPe(`connecting to ${t.hostname}:${l} failed with: ${d.message}`),n(d))},"onError");s=KTr.connect(l,t.hostname,e),s.once("secureConnect",()=>{o&&o.removeEventListener("abort",c),s.off("error",u),_Ct+=1,s.id=_Ct,s.secureConnecting=!1,DPe(`established TLS connection: #${s.id} (${s.servername})`),r(s)}),s.once("error",u)}),"connectTLS"),cwr=a(async(t,e)=>{let r=await SCt.acquire(t.origin);try{return r||(r=await RCt(t,e)),r}finally{SCt.release(t.origin,r)}},"connect"),lwr=a(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,o=t.alpnCache.get(n);if(o)return{protocol:o};switch(e.protocol){case"http:":return o=QP,t.alpnCache.set(n,o),{protocol:o};case"http2:":return o=MPe,t.alpnCache.set(n,o),{protocol:o};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:s,h1:c={},h2:l={}}}=t,u=!(s===!1||c.rejectUnauthorized===!1||l.rejectUnauthorized===!1),d={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:u};t.options.ca&&(d.ca=t.options.ca);let p=await cwr(e,d);return o=p.alpnProtocol,o||(o=QP),t.alpnCache.set(n,o),{protocol:o,socket:p}},"determineProtocol"),uwr=a(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),dwr=a(async(t,e,r,n)=>{let o=e.protocol==="https:",s;e.port?s=e.port:o?s=443:s=80;let c={...r,host:e.host,hostname:e.hostname,port:s},l=await t(c);if(o){let d={...c,ALPNProtocols:n};d.socket=l,d.servername=c.host;let p=await RCt(e,d);return{protocol:p.alpnProtocol||QP,socket:p}}return{protocol:l.alpnProtocol||QP,socket:l}},"getProtocolAndSocketFromFactory"),fwr=a(async(t,e,r)=>{let n=new URL(e),o={...awr,...r||{}};typeof o.method=="string"&&(o.method=o.method.toUpperCase()),o.headers=uwr(o.headers||{}),o.headers.host===void 0&&(o.headers.host=n.host),t.userAgent&&o.headers["user-agent"]===void 0&&(o.headers["user-agent"]=t.userAgent);let s;if(o.body instanceof URLSearchParams)s="application/x-www-form-urlencoded; charset=utf-8",o.body=o.body.toString();else if(ewr(o.body)){let d=new twr(o.body);s=d.contentType(),o.body=d.stream(),o.headers["transfer-encoding"]===void 0&&o.headers["content-length"]===void 0&&(o.headers["content-length"]=String(d.length()))}else typeof o.body=="string"||o.body instanceof String?s="text/plain; charset=utf-8":ZTr(o.body)?(o.body=JSON.stringify(o.body),s="application/json"):YTr(o.body)&&(o.body=Buffer.from(o.body));o.headers["content-type"]===void 0&&s!==void 0&&(o.headers["content-type"]=s),o.body!=null&&(o.body instanceof zTr||(!(typeof o.body=="string"||o.body instanceof String)&&!Buffer.isBuffer(o.body)&&(o.body=String(o.body)),o.headers["transfer-encoding"]===void 0&&o.headers["content-length"]===void 0&&(o.headers["content-length"]=String(Buffer.isBuffer(o.body)?o.body.length:Buffer.byteLength(o.body,"utf-8"))))),o.headers.accept===void 0&&(o.headers.accept="*/*"),o.body==null&&["POST","PUT"].includes(o.method)&&(o.headers["content-length"]="0"),o.compress&&o.headers["accept-encoding"]===void 0&&(o.headers["accept-encoding"]="gzip,deflate,br");let{signal:c}=o,{protocol:l,socket:u=null}=t.socketFactory?await dwr(t.socketFactory,n,o,t.alpnProtocols):await lwr(t,n,c);switch(DPe(`${n.host} -> ${l}`),l){case NPe:try{return await rle.request(t,n,u?{...o,socket:u}:o)}catch(d){let{code:p,message:m}=d;throw p==="ERR_HTTP2_ERROR"&&m==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),d}case MPe:return rle.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),u?{...o,socket:u}:o);case LPe:case QP:return BPe.request(t,n,u?{...o,socket:u}:o);default:throw new TypeError(`unsupported protocol: ${l}`)}},"request"),pwr=a(async t=>(t.alpnCache.clear(),Promise.all([BPe.resetContext(t),rle.resetContext(t)])),"resetContext"),mwr=a(t=>{let{options:{alpnProtocols:e=owr,alpnCacheTTL:r=iwr,alpnCacheSize:n=nwr,userAgent:o=swr,socketFactory:s}}=t;t.alpnProtocols=e,t.alpnCache=new JTr({max:n,ttl:r}),t.userAgent=o,t.socketFactory=s,BPe.setupContext(t),rle.setupContext(t)},"setupContext");kCt.exports={request:fwr,setupContext:mwr,resetContext:pwr,RequestAbortedError:tle,ALPN_HTTP2:NPe,ALPN_HTTP2C:MPe,ALPN_HTTP1_1:QP,ALPN_HTTP1_0:LPe}});var BCt=$((bTo,DCt)=>{"use strict";f();var hwr=MC()("helix-fetch:core"),{request:gwr,setupContext:Awr,resetContext:ywr,RequestAbortedError:Cwr,ALPN_HTTP2:vwr,ALPN_HTTP2C:xwr,ALPN_HTTP1_1:Ewr,ALPN_HTTP1_0:bwr}=PCt(),FPe=class t{static{a(this,"RequestContext")}constructor(e){this.options={...e||{}},Awr(this)}api(){return{request:a(async(e,r)=>this.request(e,r),"request"),context:a((e={})=>new t(e).api(),"context"),setCA:a(e=>this.setCA(e),"setCA"),reset:a(async()=>this.reset(),"reset"),RequestAbortedError:Cwr,ALPN_HTTP2:vwr,ALPN_HTTP2C:xwr,ALPN_HTTP1_1:Ewr,ALPN_HTTP1_0:bwr}}async request(e,r){return gwr(this,e,r)}setCA(e){this.options.ca=e}async reset(){return hwr("resetting context"),ywr(this)}};DCt.exports=new FPe().api()});var OCt=$((wTo,FCt)=>{"use strict";f();var{EventEmitter:Iwr}=require("events"),{Readable:yH}=require("stream"),OPe=MC()("helix-fetch"),Twr=vPe(),{Body:wwr}=Vce(),{Headers:HPe}=HM(),{Request:UP}=nCt(),{Response:UPe}=_Pe(),{FetchBaseError:_wr,FetchError:CH,AbortError:nle}=bPe(),{AbortController:Swr,AbortSignal:Rwr,TimeoutSignal:kwr}=IPe(),Pwr=uCt(),{cacheableResponse:Dwr}=pCt(),{sizeof:Bwr}=HE(),{isFormData:Nwr}=gH(),{context:Mwr,RequestAbortedError:Lwr}=BCt(),NCt=["GET","HEAD"],Fwr=500,Owr=100*1024*1024,QPe="push",MCt=a(async(t,e,r)=>{let{request:n}=t.context,o=e instanceof UP&&typeof r>"u"?e:new UP(e,r),{method:s,body:c,signal:l,compress:u,decode:d,follow:p,redirect:m,init:{body:h}}=o,g;if(l&&l.aborted){let N=new nle("The operation was aborted.");throw o.init.body instanceof yH&&o.init.body.destroy(N),N}try{g=await n(o.url,{...r,method:s,headers:o.headers.plain(),body:h&&!(h instanceof yH)&&!Nwr(h)?h:c,compress:u,decode:d,follow:p,redirect:m,signal:l})}catch(N){throw h instanceof yH&&h.destroy(N),N instanceof TypeError?N:N instanceof Lwr?new nle("The operation was aborted."):new CH(N.message,"system",N)}let A=a(()=>{l.removeEventListener("abort",A);let N=new nle("The operation was aborted.");o.init.body instanceof yH&&o.init.body.destroy(N),g.readable.emit("error",N)},"abortHandler");l&&l.addEventListener("abort",A);let{statusCode:y,statusText:v,httpVersion:b,headers:I,readable:S,decoded:k}=g;if([301,302,303,307,308].includes(y)){let{location:N}=I,F=N==null?null:new URL(N,o.url);switch(o.redirect){case"manual":break;case"error":throw l&&l.removeEventListener("abort",A),new CH(`uri requested responds with a redirect, redirect mode is set to 'error': ${o.url}`,"no-redirect");case"follow":{if(F===null)break;if(o.counter>=o.follow)throw l&&l.removeEventListener("abort",A),new CH(`maximum redirect reached at: ${o.url}`,"max-redirect");let O={headers:new HPe(o.headers),follow:o.follow,compress:o.compress,decode:o.decode,counter:o.counter+1,method:o.method,body:o.body,signal:o.signal};if(y!==303&&o.body&&o.init.body instanceof yH)throw l&&l.removeEventListener("abort",A),new CH("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&o.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length")),l&&l.removeEventListener("abort",A),MCt(t,new UP(F,O))}default:}}return l&&(S.once("end",()=>{l.removeEventListener("abort",A)}),S.once("error",()=>{l.removeEventListener("abort",A)})),new UPe(S,{url:o.url,status:y,statusText:v,headers:I,httpVersion:b,decoded:k,counter:o.counter})},"fetch"),LCt=a(async(t,e,r)=>{if(t.options.maxCacheSize===0||!NCt.includes(e.method))return r;let n=new Pwr(e,r,{shared:!1});if(n.storable()){let o=await Dwr(r);return t.cache.set(e.url,{policy:n,response:o},n.timeToLive()),o}else return r},"cacheResponse"),Qwr=a(async(t,e,r)=>{let n=new UP(e,r);if(t.options.maxCacheSize!==0&&NCt.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:c,response:l}=t.cache.get(n.url)||{};if(c&&c.satisfiesWithoutRevalidation(n)){l.headers=new HPe(c.responseHeaders(l));let u=l.clone();return u.fromCache=!0,u}}let s=await MCt(t,n);return n.cache!=="no-store"?LCt(t,n,s):s},"cachingFetch"),Uwr=a((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,o])=>{Array.isArray(o)?o.forEach(s=>r.searchParams.append(n,s)):r.searchParams.append(n,o)}),r.href},"createUrl"),qwr=a(t=>new kwr(t),"timeoutSignal"),qPe=class t{static{a(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:Owr,o=Fwr;n===0&&(n=1,o=1);let s=a(({response:l},u)=>Bwr(l),"sizeCalculation");this.cache=new Twr({max:o,maxSize:n,sizeCalculation:s}),this.eventEmitter=new Iwr,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:c}=this.options.h2;c&&(this.options.h2.pushPromiseHandler=(l,u,d)=>{let p={...u};Object.keys(p).filter(m=>m.startsWith(":")).forEach(m=>delete p[m]),this.pushPromiseHandler(l,p,d)},this.options.h2.pushHandler=(l,u,d)=>{let p={...u};Object.keys(p).filter(b=>b.startsWith(":")).forEach(b=>delete p[b]);let{statusCode:m,statusText:h,httpVersion:g,headers:A,readable:y,decoded:v}=d;this.pushHandler(l,p,new UPe(y,{url:l,status:m,statusText:h,headers:A,httpVersion:g,decoded:v}))}),this.context=Mwr(this.options)}api(){return{fetch:a(async(e,r)=>this.fetch(e,r),"fetch"),Body:wwr,Headers:HPe,Request:UP,Response:UPe,AbortController:Swr,AbortSignal:Rwr,FetchBaseError:_wr,FetchError:CH,AbortError:nle,context:a((e={})=>new t(e).api(),"context"),setCA:a(e=>this.setCA(e),"setCA"),noCache:a((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:a((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:a((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:a((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:a((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:a(async()=>this.context.reset(),"reset"),onPush:a(e=>this.onPush(e),"onPush"),offPush:a(e=>this.offPush(e),"offPush"),createUrl:Uwr,timeoutSignal:qwr,clearCache:a(()=>this.clearCache(),"clearCache"),cacheStats:a(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return Qwr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(QPe,e)}offPush(e){return this.eventEmitter.off(QPe,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){OPe(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let o=new UP(e,{headers:r}),{policy:s}=this.cache.get(e)||{};s&&s.satisfiesWithoutRevalidation(o)&&(OPe(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){OPe(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let o=await LCt(this,new UP(e,{headers:r}),n);this.eventEmitter.emit(QPe,e,o)}};FCt.exports=new qPe().api()});var UCt=$((RTo,QCt)=>{"use strict";f();QCt.exports=OCt()});var zvt=$((aue,Vvt)=>{f();(function(t,e){typeof aue=="object"&&typeof Vvt<"u"?e(aue):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(aue,function(t){"use strict";function e(){for(var Q=arguments.length,B=Array(Q),te=0;te<Q;te++)B[te]=arguments[te];if(B.length>1){B[0]=B[0].slice(0,-1);for(var Ae=B.length-1,Re=1;Re<Ae;++Re)B[Re]=B[Re].slice(1,-1);return B[Ae]=B[Ae].slice(1),B.join("")}else return B[0]}a(e,"merge");function r(Q){return"(?:"+Q+")"}a(r,"subexp");function n(Q){return Q===void 0?"undefined":Q===null?"null":Object.prototype.toString.call(Q).split(" ").pop().split("]").shift().toLowerCase()}a(n,"typeOf");function o(Q){return Q.toUpperCase()}a(o,"toUpperCase");function s(Q){return Q!=null?Q instanceof Array?Q:typeof Q.length!="number"||Q.split||Q.setInterval||Q.call?[Q]:Array.prototype.slice.call(Q):[]}a(s,"toArray");function c(Q,B){var te=Q;if(B)for(var Ae in B)te[Ae]=B[Ae];return te}a(c,"assign");function l(Q){var B="[A-Za-z]",te="[\\x0D]",Ae="[0-9]",Re="[\\x22]",dt=e(Ae,"[A-Fa-f]"),St="[\\x0A]",Yt="[\\x20]",tr=r(r("%[EFef]"+dt+"%"+dt+dt+"%"+dt+dt)+"|"+r("%[89A-Fa-f]"+dt+"%"+dt+dt)+"|"+r("%"+dt+dt)),Jt="[\\:\\/\\?\\#\\[\\]\\@]",It="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",xr=e(Jt,It),fi=Q?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",io=Q?"[\\uE000-\\uF8FF]":"[]",_n=e(B,Ae,"[\\-\\.\\_\\~]",fi),Co=r(B+e(B,Ae,"[\\+\\-\\.]")+"*"),Ei=r(r(tr+"|"+e(_n,It,"[\\:]"))+"*"),es=r(r("25[0-5]")+"|"+r("2[0-4]"+Ae)+"|"+r("1"+Ae+Ae)+"|"+r("[1-9]"+Ae)+"|"+Ae),Ia=r(r("25[0-5]")+"|"+r("2[0-4]"+Ae)+"|"+r("1"+Ae+Ae)+"|"+r("0?[1-9]"+Ae)+"|0?0?"+Ae),Tc=r(Ia+"\\."+Ia+"\\."+Ia+"\\."+Ia),Fo=r(dt+"{1,4}"),Ks=r(r(Fo+"\\:"+Fo)+"|"+Tc),Cd=r(r(Fo+"\\:")+"{6}"+Ks),wc=r("\\:\\:"+r(Fo+"\\:")+"{5}"+Ks),Sg=r(r(Fo)+"?\\:\\:"+r(Fo+"\\:")+"{4}"+Ks),_l=r(r(r(Fo+"\\:")+"{0,1}"+Fo)+"?\\:\\:"+r(Fo+"\\:")+"{3}"+Ks),Rg=r(r(r(Fo+"\\:")+"{0,2}"+Fo)+"?\\:\\:"+r(Fo+"\\:")+"{2}"+Ks),kg=r(r(r(Fo+"\\:")+"{0,3}"+Fo)+"?\\:\\:"+Fo+"\\:"+Ks),ZE=r(r(r(Fo+"\\:")+"{0,4}"+Fo)+"?\\:\\:"+Ks),$a=r(r(r(Fo+"\\:")+"{0,5}"+Fo)+"?\\:\\:"+Fo),Bu=r(r(r(Fo+"\\:")+"{0,6}"+Fo)+"?\\:\\:"),Nu=r([Cd,wc,Sg,_l,Rg,kg,ZE,$a,Bu].join("|")),vd=r(r(_n+"|"+tr)+"+"),Pg=r(Nu+"\\%25"+vd),Vl=r(Nu+r("\\%25|\\%(?!"+dt+"{2})")+vd),eb=r("[vV]"+dt+"+\\."+e(_n,It,"[\\:]")+"+"),uv=r("\\["+r(Vl+"|"+Nu+"|"+eb)+"\\]"),tb=r(r(tr+"|"+e(_n,It))+"*"),zf=r(uv+"|"+Tc+"(?!"+tb+")|"+tb),Kf=r(Ae+"*"),Jr=r(r(Ei+"@")+"?"+zf+r("\\:"+Kf)+"?"),_c=r(tr+"|"+e(_n,It,"[\\:\\@]")),Dg=r(_c+"*"),Bg=r(_c+"+"),mL=r(r(tr+"|"+e(_n,It,"[\\@]"))+"+"),zc=r(r("\\/"+Dg)+"*"),Dy=r("\\/"+r(Bg+zc)+"?"),dv=r(mL+zc),bm=r(Bg+zc),By="(?!"+_c+")",rb=r(zc+"|"+Dy+"|"+dv+"|"+bm+"|"+By),ws=r(r(_c+"|"+e("[\\/\\?]",io))+"*"),xd=r(r(_c+"|[\\/\\?]")+"*"),Ny=r(r("\\/\\/"+Jr+zc)+"|"+Dy+"|"+bm+"|"+By),h5=r(Co+"\\:"+Ny+r("\\?"+ws)+"?"+r("\\#"+xd)+"?"),hL=r(r("\\/\\/"+Jr+zc)+"|"+Dy+"|"+dv+"|"+By),oo=r(hL+r("\\?"+ws)+"?"+r("\\#"+xd)+"?"),My=r(h5+"|"+oo),Ng=r(Co+"\\:"+Ny+r("\\?"+ws)+"?"),g5="^("+Co+")\\:"+r(r("\\/\\/("+r("("+Ei+")@")+"?("+zf+")"+r("\\:("+Kf+")")+"?)")+"?("+zc+"|"+Dy+"|"+bm+"|"+By+")")+r("\\?("+ws+")")+"?"+r("\\#("+xd+")")+"?$",nb="^(){0}"+r(r("\\/\\/("+r("("+Ei+")@")+"?("+zf+")"+r("\\:("+Kf+")")+"?)")+"?("+zc+"|"+Dy+"|"+dv+"|"+By+")")+r("\\?("+ws+")")+"?"+r("\\#("+xd+")")+"?$",Ed="^("+Co+")\\:"+r(r("\\/\\/("+r("("+Ei+")@")+"?("+zf+")"+r("\\:("+Kf+")")+"?)")+"?("+zc+"|"+Dy+"|"+bm+"|"+By+")")+r("\\?("+ws+")")+"?$",gL="^"+r("\\#("+xd+")")+"?$",AL="^"+r("("+Ei+")@")+"?("+zf+")"+r("\\:("+Kf+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",B,Ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",_n,It),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",_n,It),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",_n,It),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",_n,It),"g"),NOT_QUERY:new RegExp(e("[^\\%]",_n,It,"[\\:\\@\\/\\?]",io),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",_n,It,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",_n,It),"g"),UNRESERVED:new RegExp(_n,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",_n,xr),"g"),PCT_ENCODED:new RegExp(tr,"g"),IPV4ADDRESS:new RegExp("^("+Tc+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Nu+")"+r(r("\\%25|\\%(?!"+dt+"{2})")+"("+vd+")")+"?\\]?$")}}a(l,"buildExps");var u=l(!1),d=l(!0),p=function(){function Q(B,te){var Ae=[],Re=!0,dt=!1,St=void 0;try{for(var Yt=B[Symbol.iterator](),tr;!(Re=(tr=Yt.next()).done)&&(Ae.push(tr.value),!(te&&Ae.length===te));Re=!0);}catch(Jt){dt=!0,St=Jt}finally{try{!Re&&Yt.return&&Yt.return()}finally{if(dt)throw St}}return Ae}return a(Q,"sliceIterator"),function(B,te){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return Q(B,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=a(function(Q){if(Array.isArray(Q)){for(var B=0,te=Array(Q.length);B<Q.length;B++)te[B]=Q[B];return te}else return Array.from(Q)},"toConsumableArray"),h=2147483647,g=36,A=1,y=26,v=38,b=700,I=72,S=128,k="-",N=/^xn--/,F=/[^\0-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,Y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=g-A,V=Math.floor,U=String.fromCharCode;function H(Q){throw new RangeError(Y[Q])}a(H,"error$1");function ee(Q,B){for(var te=[],Ae=Q.length;Ae--;)te[Ae]=B(Q[Ae]);return te}a(ee,"map");function J(Q,B){var te=Q.split("@"),Ae="";te.length>1&&(Ae=te[0]+"@",Q=te[1]),Q=Q.replace(O,".");var Re=Q.split("."),dt=ee(Re,B).join(".");return Ae+dt}a(J,"mapDomain");function G(Q){for(var B=[],te=0,Ae=Q.length;te<Ae;){var Re=Q.charCodeAt(te++);if(Re>=55296&&Re<=56319&&te<Ae){var dt=Q.charCodeAt(te++);(dt&64512)==56320?B.push(((Re&1023)<<10)+(dt&1023)+65536):(B.push(Re),te--)}else B.push(Re)}return B}a(G,"ucs2decode");var j=a(function(B){return String.fromCodePoint.apply(String,m(B))},"ucs2encode"),Z=a(function(B){return B-48<10?B-22:B-65<26?B-65:B-97<26?B-97:g},"basicToDigit"),ie=a(function(B,te){return B+22+75*(B<26)-((te!=0)<<5)},"digitToBasic"),ne=a(function(B,te,Ae){var Re=0;for(B=Ae?V(B/b):B>>1,B+=V(B/te);B>z*y>>1;Re+=g)B=V(B/z);return V(Re+(z+1)*B/(B+v))},"adapt"),re=a(function(B){var te=[],Ae=B.length,Re=0,dt=S,St=I,Yt=B.lastIndexOf(k);Yt<0&&(Yt=0);for(var tr=0;tr<Yt;++tr)B.charCodeAt(tr)>=128&&H("not-basic"),te.push(B.charCodeAt(tr));for(var Jt=Yt>0?Yt+1:0;Jt<Ae;){for(var It=Re,xr=1,fi=g;;fi+=g){Jt>=Ae&&H("invalid-input");var io=Z(B.charCodeAt(Jt++));(io>=g||io>V((h-Re)/xr))&&H("overflow"),Re+=io*xr;var _n=fi<=St?A:fi>=St+y?y:fi-St;if(io<_n)break;var Co=g-_n;xr>V(h/Co)&&H("overflow"),xr*=Co}var Ei=te.length+1;St=ne(Re-It,Ei,It==0),V(Re/Ei)>h-dt&&H("overflow"),dt+=V(Re/Ei),Re%=Ei,te.splice(Re++,0,dt)}return String.fromCodePoint.apply(String,te)},"decode"),fe=a(function(B){var te=[];B=G(B);var Ae=B.length,Re=S,dt=0,St=I,Yt=!0,tr=!1,Jt=void 0;try{for(var It=B[Symbol.iterator](),xr;!(Yt=(xr=It.next()).done);Yt=!0){var fi=xr.value;fi<128&&te.push(U(fi))}}catch(Vl){tr=!0,Jt=Vl}finally{try{!Yt&&It.return&&It.return()}finally{if(tr)throw Jt}}var io=te.length,_n=io;for(io&&te.push(k);_n<Ae;){var Co=h,Ei=!0,es=!1,Ia=void 0;try{for(var Tc=B[Symbol.iterator](),Fo;!(Ei=(Fo=Tc.next()).done);Ei=!0){var Ks=Fo.value;Ks>=Re&&Ks<Co&&(Co=Ks)}}catch(Vl){es=!0,Ia=Vl}finally{try{!Ei&&Tc.return&&Tc.return()}finally{if(es)throw Ia}}var Cd=_n+1;Co-Re>V((h-dt)/Cd)&&H("overflow"),dt+=(Co-Re)*Cd,Re=Co;var wc=!0,Sg=!1,_l=void 0;try{for(var Rg=B[Symbol.iterator](),kg;!(wc=(kg=Rg.next()).done);wc=!0){var ZE=kg.value;if(ZE<Re&&++dt>h&&H("overflow"),ZE==Re){for(var $a=dt,Bu=g;;Bu+=g){var Nu=Bu<=St?A:Bu>=St+y?y:Bu-St;if($a<Nu)break;var vd=$a-Nu,Pg=g-Nu;te.push(U(ie(Nu+vd%Pg,0))),$a=V(vd/Pg)}te.push(U(ie($a,0))),St=ne(dt,Cd,_n==io),dt=0,++_n}}}catch(Vl){Sg=!0,_l=Vl}finally{try{!wc&&Rg.return&&Rg.return()}finally{if(Sg)throw _l}}++dt,++Re}return te.join("")},"encode"),ye=a(function(B){return J(B,function(te){return N.test(te)?re(te.slice(4).toLowerCase()):te})},"toUnicode"),Qe=a(function(B){return J(B,function(te){return F.test(te)?"xn--"+fe(te):te})},"toASCII"),we={version:"2.1.0",ucs2:{decode:G,encode:j},decode:re,encode:fe,toASCII:Qe,toUnicode:ye},Xe={};function Oe(Q){var B=Q.charCodeAt(0),te=void 0;return B<16?te="%0"+B.toString(16).toUpperCase():B<128?te="%"+B.toString(16).toUpperCase():B<2048?te="%"+(B>>6|192).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase():te="%"+(B>>12|224).toString(16).toUpperCase()+"%"+(B>>6&63|128).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase(),te}a(Oe,"pctEncChar");function ut(Q){for(var B="",te=0,Ae=Q.length;te<Ae;){var Re=parseInt(Q.substr(te+1,2),16);if(Re<128)B+=String.fromCharCode(Re),te+=3;else if(Re>=194&&Re<224){if(Ae-te>=6){var dt=parseInt(Q.substr(te+4,2),16);B+=String.fromCharCode((Re&31)<<6|dt&63)}else B+=Q.substr(te,6);te+=6}else if(Re>=224){if(Ae-te>=9){var St=parseInt(Q.substr(te+4,2),16),Yt=parseInt(Q.substr(te+7,2),16);B+=String.fromCharCode((Re&15)<<12|(St&63)<<6|Yt&63)}else B+=Q.substr(te,9);te+=9}else B+=Q.substr(te,3),te+=3}return B}a(ut,"pctDecChars");function Rt(Q,B){function te(Ae){var Re=ut(Ae);return Re.match(B.UNRESERVED)?Re:Ae}return a(te,"decodeUnreserved"),Q.scheme&&(Q.scheme=String(Q.scheme).replace(B.PCT_ENCODED,te).toLowerCase().replace(B.NOT_SCHEME,"")),Q.userinfo!==void 0&&(Q.userinfo=String(Q.userinfo).replace(B.PCT_ENCODED,te).replace(B.NOT_USERINFO,Oe).replace(B.PCT_ENCODED,o)),Q.host!==void 0&&(Q.host=String(Q.host).replace(B.PCT_ENCODED,te).toLowerCase().replace(B.NOT_HOST,Oe).replace(B.PCT_ENCODED,o)),Q.path!==void 0&&(Q.path=String(Q.path).replace(B.PCT_ENCODED,te).replace(Q.scheme?B.NOT_PATH:B.NOT_PATH_NOSCHEME,Oe).replace(B.PCT_ENCODED,o)),Q.query!==void 0&&(Q.query=String(Q.query).replace(B.PCT_ENCODED,te).replace(B.NOT_QUERY,Oe).replace(B.PCT_ENCODED,o)),Q.fragment!==void 0&&(Q.fragment=String(Q.fragment).replace(B.PCT_ENCODED,te).replace(B.NOT_FRAGMENT,Oe).replace(B.PCT_ENCODED,o)),Q}a(Rt,"_normalizeComponentEncoding");function Et(Q){return Q.replace(/^0*(.*)/,"$1")||"0"}a(Et,"_stripLeadingZeros");function At(Q,B){var te=Q.match(B.IPV4ADDRESS)||[],Ae=p(te,2),Re=Ae[1];return Re?Re.split(".").map(Et).join("."):Q}a(At,"_normalizeIPv4");function de(Q,B){var te=Q.match(B.IPV6ADDRESS)||[],Ae=p(te,3),Re=Ae[1],dt=Ae[2];if(Re){for(var St=Re.toLowerCase().split("::").reverse(),Yt=p(St,2),tr=Yt[0],Jt=Yt[1],It=Jt?Jt.split(":").map(Et):[],xr=tr.split(":").map(Et),fi=B.IPV4ADDRESS.test(xr[xr.length-1]),io=fi?7:8,_n=xr.length-io,Co=Array(io),Ei=0;Ei<io;++Ei)Co[Ei]=It[Ei]||xr[_n+Ei]||"";fi&&(Co[io-1]=At(Co[io-1],B));var es=Co.reduce(function(Cd,wc,Sg){if(!wc||wc==="0"){var _l=Cd[Cd.length-1];_l&&_l.index+_l.length===Sg?_l.length++:Cd.push({index:Sg,length:1})}return Cd},[]),Ia=es.sort(function(Cd,wc){return wc.length-Cd.length})[0],Tc=void 0;if(Ia&&Ia.length>1){var Fo=Co.slice(0,Ia.index),Ks=Co.slice(Ia.index+Ia.length);Tc=Fo.join(":")+"::"+Ks.join(":")}else Tc=Co.join(":");return dt&&(Tc+="%"+dt),Tc}else return Q}a(de,"_normalizeIPv6");var qe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ce="".match(/(){0}/)[1]===void 0;function We(Q){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te={},Ae=B.iri!==!1?d:u;B.reference==="suffix"&&(Q=(B.scheme?B.scheme+":":"")+"//"+Q);var Re=Q.match(qe);if(Re){Ce?(te.scheme=Re[1],te.userinfo=Re[3],te.host=Re[4],te.port=parseInt(Re[5],10),te.path=Re[6]||"",te.query=Re[7],te.fragment=Re[8],isNaN(te.port)&&(te.port=Re[5])):(te.scheme=Re[1]||void 0,te.userinfo=Q.indexOf("@")!==-1?Re[3]:void 0,te.host=Q.indexOf("//")!==-1?Re[4]:void 0,te.port=parseInt(Re[5],10),te.path=Re[6]||"",te.query=Q.indexOf("?")!==-1?Re[7]:void 0,te.fragment=Q.indexOf("#")!==-1?Re[8]:void 0,isNaN(te.port)&&(te.port=Q.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Re[4]:void 0)),te.host&&(te.host=de(At(te.host,Ae),Ae)),te.scheme===void 0&&te.userinfo===void 0&&te.host===void 0&&te.port===void 0&&!te.path&&te.query===void 0?te.reference="same-document":te.scheme===void 0?te.reference="relative":te.fragment===void 0?te.reference="absolute":te.reference="uri",B.reference&&B.reference!=="suffix"&&B.reference!==te.reference&&(te.error=te.error||"URI is not a "+B.reference+" reference.");var dt=Xe[(B.scheme||te.scheme||"").toLowerCase()];if(!B.unicodeSupport&&(!dt||!dt.unicodeSupport)){if(te.host&&(B.domainHost||dt&&dt.domainHost))try{te.host=we.toASCII(te.host.replace(Ae.PCT_ENCODED,ut).toLowerCase())}catch(St){te.error=te.error||"Host's domain name can not be converted to ASCII via punycode: "+St}Rt(te,u)}else Rt(te,Ae);dt&&dt.parse&&dt.parse(te,B)}else te.error=te.error||"URI can not be parsed.";return te}a(We,"parse");function ce(Q,B){var te=B.iri!==!1?d:u,Ae=[];return Q.userinfo!==void 0&&(Ae.push(Q.userinfo),Ae.push("@")),Q.host!==void 0&&Ae.push(de(At(String(Q.host),te),te).replace(te.IPV6ADDRESS,function(Re,dt,St){return"["+dt+(St?"%25"+St:"")+"]"})),(typeof Q.port=="number"||typeof Q.port=="string")&&(Ae.push(":"),Ae.push(String(Q.port))),Ae.length?Ae.join(""):void 0}a(ce,"_recomposeAuthority");var ue=/^\.\.?\//,He=/^\/\.(\/|$)/,Me=/^\/\.\.(\/|$)/,be=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(Q){for(var B=[];Q.length;)if(Q.match(ue))Q=Q.replace(ue,"");else if(Q.match(He))Q=Q.replace(He,"/");else if(Q.match(Me))Q=Q.replace(Me,"/"),B.pop();else if(Q==="."||Q==="..")Q="";else{var te=Q.match(be);if(te){var Ae=te[0];Q=Q.slice(Ae.length),B.push(Ae)}else throw new Error("Unexpected dot segment condition")}return B.join("")}a(Ge,"removeDotSegments");function rt(Q){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=B.iri?d:u,Ae=[],Re=Xe[(B.scheme||Q.scheme||"").toLowerCase()];if(Re&&Re.serialize&&Re.serialize(Q,B),Q.host&&!te.IPV6ADDRESS.test(Q.host)){if(B.domainHost||Re&&Re.domainHost)try{Q.host=B.iri?we.toUnicode(Q.host):we.toASCII(Q.host.replace(te.PCT_ENCODED,ut).toLowerCase())}catch(Yt){Q.error=Q.error||"Host's domain name can not be converted to "+(B.iri?"Unicode":"ASCII")+" via punycode: "+Yt}}Rt(Q,te),B.reference!=="suffix"&&Q.scheme&&(Ae.push(Q.scheme),Ae.push(":"));var dt=ce(Q,B);if(dt!==void 0&&(B.reference!=="suffix"&&Ae.push("//"),Ae.push(dt),Q.path&&Q.path.charAt(0)!=="/"&&Ae.push("/")),Q.path!==void 0){var St=Q.path;!B.absolutePath&&(!Re||!Re.absolutePath)&&(St=Ge(St)),dt===void 0&&(St=St.replace(/^\/\//,"/%2F")),Ae.push(St)}return Q.query!==void 0&&(Ae.push("?"),Ae.push(Q.query)),Q.fragment!==void 0&&(Ae.push("#"),Ae.push(Q.fragment)),Ae.join("")}a(rt,"serialize");function ht(Q,B){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=arguments[3],Re={};return Ae||(Q=We(rt(Q,te),te),B=We(rt(B,te),te)),te=te||{},!te.tolerant&&B.scheme?(Re.scheme=B.scheme,Re.userinfo=B.userinfo,Re.host=B.host,Re.port=B.port,Re.path=Ge(B.path||""),Re.query=B.query):(B.userinfo!==void 0||B.host!==void 0||B.port!==void 0?(Re.userinfo=B.userinfo,Re.host=B.host,Re.port=B.port,Re.path=Ge(B.path||""),Re.query=B.query):(B.path?(B.path.charAt(0)==="/"?Re.path=Ge(B.path):((Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)&&!Q.path?Re.path="/"+B.path:Q.path?Re.path=Q.path.slice(0,Q.path.lastIndexOf("/")+1)+B.path:Re.path=B.path,Re.path=Ge(Re.path)),Re.query=B.query):(Re.path=Q.path,B.query!==void 0?Re.query=B.query:Re.query=Q.query),Re.userinfo=Q.userinfo,Re.host=Q.host,Re.port=Q.port),Re.scheme=Q.scheme),Re.fragment=B.fragment,Re}a(ht,"resolveComponents");function Ot(Q,B,te){var Ae=c({scheme:"null"},te);return rt(ht(We(Q,Ae),We(B,Ae),Ae,!0),Ae)}a(Ot,"resolve");function Xt(Q,B){return typeof Q=="string"?Q=rt(We(Q,B),B):n(Q)==="object"&&(Q=We(rt(Q,B),B)),Q}a(Xt,"normalize");function Ut(Q,B,te){return typeof Q=="string"?Q=rt(We(Q,te),te):n(Q)==="object"&&(Q=rt(Q,te)),typeof B=="string"?B=rt(We(B,te),te):n(B)==="object"&&(B=rt(B,te)),Q===B}a(Ut,"equal");function Kr(Q,B){return Q&&Q.toString().replace(!B||!B.iri?u.ESCAPE:d.ESCAPE,Oe)}a(Kr,"escapeComponent");function Mr(Q,B){return Q&&Q.toString().replace(!B||!B.iri?u.PCT_ENCODED:d.PCT_ENCODED,ut)}a(Mr,"unescapeComponent");var fn={scheme:"http",domainHost:!0,parse:a(function(B,te){return B.host||(B.error=B.error||"HTTP URIs must have a host."),B},"parse"),serialize:a(function(B,te){var Ae=String(B.scheme).toLowerCase()==="https";return(B.port===(Ae?443:80)||B.port==="")&&(B.port=void 0),B.path||(B.path="/"),B},"serialize")},xe={scheme:"https",domainHost:fn.domainHost,parse:fn.parse,serialize:fn.serialize};function Ve(Q){return typeof Q.secure=="boolean"?Q.secure:String(Q.scheme).toLowerCase()==="wss"}a(Ve,"isSecure");var mt={scheme:"ws",domainHost:!0,parse:a(function(B,te){var Ae=B;return Ae.secure=Ve(Ae),Ae.resourceName=(Ae.path||"/")+(Ae.query?"?"+Ae.query:""),Ae.path=void 0,Ae.query=void 0,Ae},"parse"),serialize:a(function(B,te){if((B.port===(Ve(B)?443:80)||B.port==="")&&(B.port=void 0),typeof B.secure=="boolean"&&(B.scheme=B.secure?"wss":"ws",B.secure=void 0),B.resourceName){var Ae=B.resourceName.split("?"),Re=p(Ae,2),dt=Re[0],St=Re[1];B.path=dt&&dt!=="/"?dt:void 0,B.query=St,B.resourceName=void 0}return B.fragment=void 0,B},"serialize")},wt={scheme:"wss",domainHost:mt.domainHost,parse:mt.parse,serialize:mt.serialize},sr={},er=!0,wr="[A-Za-z0-9\\-\\.\\_\\~"+(er?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",pr="[0-9A-Fa-f]",nr=r(r("%[EFef]"+pr+"%"+pr+pr+"%"+pr+pr)+"|"+r("%[89A-Fa-f]"+pr+"%"+pr+pr)+"|"+r("%"+pr+pr)),dr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ir="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Lr=e(ir,'[\\"\\\\]'),Yr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",cn=new RegExp(wr,"g"),xn=new RegExp(nr,"g"),oi=new RegExp(e("[^]",dr,"[\\.]",'[\\"]',Lr),"g"),kn=new RegExp(e("[^]",wr,Yr),"g"),ri=kn;function ln(Q){var B=ut(Q);return B.match(cn)?B:Q}a(ln,"decodeUnreserved");var Xn={scheme:"mailto",parse:a(function(B,te){var Ae=B,Re=Ae.to=Ae.path?Ae.path.split(","):[];if(Ae.path=void 0,Ae.query){for(var dt=!1,St={},Yt=Ae.query.split("&"),tr=0,Jt=Yt.length;tr<Jt;++tr){var It=Yt[tr].split("=");switch(It[0]){case"to":for(var xr=It[1].split(","),fi=0,io=xr.length;fi<io;++fi)Re.push(xr[fi]);break;case"subject":Ae.subject=Mr(It[1],te);break;case"body":Ae.body=Mr(It[1],te);break;default:dt=!0,St[Mr(It[0],te)]=Mr(It[1],te);break}}dt&&(Ae.headers=St)}Ae.query=void 0;for(var _n=0,Co=Re.length;_n<Co;++_n){var Ei=Re[_n].split("@");if(Ei[0]=Mr(Ei[0]),te.unicodeSupport)Ei[1]=Mr(Ei[1],te).toLowerCase();else try{Ei[1]=we.toASCII(Mr(Ei[1],te).toLowerCase())}catch(es){Ae.error=Ae.error||"Email address's domain name can not be converted to ASCII via punycode: "+es}Re[_n]=Ei.join("@")}return Ae},"parse$$1"),serialize:a(function(B,te){var Ae=B,Re=s(B.to);if(Re){for(var dt=0,St=Re.length;dt<St;++dt){var Yt=String(Re[dt]),tr=Yt.lastIndexOf("@"),Jt=Yt.slice(0,tr).replace(xn,ln).replace(xn,o).replace(oi,Oe),It=Yt.slice(tr+1);try{It=te.iri?we.toUnicode(It):we.toASCII(Mr(It,te).toLowerCase())}catch(_n){Ae.error=Ae.error||"Email address's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+_n}Re[dt]=Jt+"@"+It}Ae.path=Re.join(",")}var xr=B.headers=B.headers||{};B.subject&&(xr.subject=B.subject),B.body&&(xr.body=B.body);var fi=[];for(var io in xr)xr[io]!==sr[io]&&fi.push(io.replace(xn,ln).replace(xn,o).replace(kn,Oe)+"="+xr[io].replace(xn,ln).replace(xn,o).replace(ri,Oe));return fi.length&&(Ae.query=fi.join("&")),Ae},"serialize$$1")},De=/^([^\:]+)\:(.*)/,X={scheme:"urn",parse:a(function(B,te){var Ae=B.path&&B.path.match(De),Re=B;if(Ae){var dt=te.scheme||Re.scheme||"urn",St=Ae[1].toLowerCase(),Yt=Ae[2],tr=dt+":"+(te.nid||St),Jt=Xe[tr];Re.nid=St,Re.nss=Yt,Re.path=void 0,Jt&&(Re=Jt.parse(Re,te))}else Re.error=Re.error||"URN can not be parsed.";return Re},"parse$$1"),serialize:a(function(B,te){var Ae=te.scheme||B.scheme||"urn",Re=B.nid,dt=Ae+":"+(te.nid||Re),St=Xe[dt];St&&(B=St.serialize(B,te));var Yt=B,tr=B.nss;return Yt.path=(Re||te.nid)+":"+tr,Yt},"serialize$$1")},ve=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Te={scheme:"urn:uuid",parse:a(function(B,te){var Ae=B;return Ae.uuid=Ae.nss,Ae.nss=void 0,!te.tolerant&&(!Ae.uuid||!Ae.uuid.match(ve))&&(Ae.error=Ae.error||"UUID is not valid."),Ae},"parse"),serialize:a(function(B,te){var Ae=B;return Ae.nss=(B.uuid||"").toLowerCase(),Ae},"serialize")};Xe[fn.scheme]=fn,Xe[xe.scheme]=xe,Xe[mt.scheme]=mt,Xe[wt.scheme]=wt,Xe[Xn.scheme]=Xn,Xe[X.scheme]=X,Xe[Te.scheme]=Te,t.SCHEMES=Xe,t.pctEncChar=Oe,t.pctDecChars=ut,t.parse=We,t.removeDotSegments=Ge,t.serialize=rt,t.resolveComponents=ht,t.resolve=Ot,t.normalize=Xt,t.equal=Ut,t.escapeComponent=Kr,t.unescapeComponent=Mr,Object.defineProperty(t,"__esModule",{value:!0})})});var cue=$((aLo,Kvt)=>{"use strict";f();Kvt.exports=a(function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,o,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!t(e[o],r[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[o]))return!1;for(o=n;o--!==0;){var c=s[o];if(!t(e[c],r[c]))return!1}return!0}return e!==e&&r!==r},"equal")});var Jvt=$((uLo,Yvt)=>{"use strict";f();Yvt.exports=a(function(e){for(var r=0,n=e.length,o=0,s;o<n;)r++,s=e.charCodeAt(o++),s>=55296&&s<=56319&&o<n&&(s=e.charCodeAt(o),(s&64512)==56320&&o++);return r},"ucs2length")});var c5=$((pLo,ext)=>{"use strict";f();ext.exports={copy:zRr,checkDataType:G5e,checkDataTypes:KRr,coerceToTypes:YRr,toHash:z5e,getProperty:K5e,escapeQuotes:Y5e,equal:cue(),ucs2length:Jvt(),varOccurences:ZRr,varReplace:ekr,schemaHasRules:tkr,schemaHasRulesExcept:rkr,schemaUnknownRules:nkr,toQuotedString:V5e,getPathExpr:ikr,getPath:okr,getData:ckr,unescapeFragment:lkr,unescapeJsonPointer:X5e,escapeFragment:ukr,escapeJsonPointer:J5e};function zRr(t,e){e=e||{};for(var r in t)e[r]=t[r];return e}a(zRr,"copy");function G5e(t,e,r,n){var o=n?" !== ":" === ",s=n?" || ":" && ",c=n?"!":"",l=n?"":"!";switch(t){case"null":return e+o+"null";case"array":return c+"Array.isArray("+e+")";case"object":return"("+c+e+s+"typeof "+e+o+'"object"'+s+l+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+o+'"number"'+s+l+"("+e+" % 1)"+s+e+o+e+(r?s+c+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+o+'"'+t+'"'+(r?s+c+"isFinite("+e+")":"")+")";default:return"typeof "+e+o+'"'+t+'"'}}a(G5e,"checkDataType");function KRr(t,e,r){switch(t.length){case 1:return G5e(t[0],e,r,!0);default:var n="",o=z5e(t);o.array&&o.object&&(n=o.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer;for(var s in o)n+=(n?" && ":"")+G5e(s,e,r,!0);return n}}a(KRr,"checkDataTypes");var Xvt=z5e(["string","number","integer","boolean","null"]);function YRr(t,e){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++){var o=e[n];(Xvt[o]||t==="array"&&o==="array")&&(r[r.length]=o)}if(r.length)return r}else{if(Xvt[e])return[e];if(t==="array"&&e==="array")return["array"]}}a(YRr,"coerceToTypes");function z5e(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!0;return e}a(z5e,"toHash");var JRr=/^[a-z$_][a-z$_0-9]*$/i,XRr=/'|\\/g;function K5e(t){return typeof t=="number"?"["+t+"]":JRr.test(t)?"."+t:"['"+Y5e(t)+"']"}a(K5e,"getProperty");function Y5e(t){return t.replace(XRr,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}a(Y5e,"escapeQuotes");function ZRr(t,e){e+="[^0-9]";var r=t.match(new RegExp(e,"g"));return r?r.length:0}a(ZRr,"varOccurences");function ekr(t,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),r+"$1")}a(ekr,"varReplace");function tkr(t,e){if(typeof t=="boolean")return!t;for(var r in t)if(e[r])return!0}a(tkr,"schemaHasRules");function rkr(t,e,r){if(typeof t=="boolean")return!t&&r!="not";for(var n in t)if(n!=r&&e[n])return!0}a(rkr,"schemaHasRulesExcept");function nkr(t,e){if(typeof t!="boolean"){for(var r in t)if(!e[r])return r}}a(nkr,"schemaUnknownRules");function V5e(t){return"'"+Y5e(t)+"'"}a(V5e,"toQuotedString");function ikr(t,e,r,n){var o=r?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Zvt(t,o)}a(ikr,"getPathExpr");function okr(t,e,r){var n=V5e(r?"/"+J5e(e):K5e(e));return Zvt(t,n)}a(okr,"getPath");var skr=/^\/(?:[^~]|~0|~1)*$/,akr=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ckr(t,e,r){var n,o,s,c;if(t==="")return"rootData";if(t[0]=="/"){if(!skr.test(t))throw new Error("Invalid JSON-pointer: "+t);o=t,s="rootData"}else{if(c=t.match(akr),!c)throw new Error("Invalid JSON-pointer: "+t);if(n=+c[1],o=c[2],o=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return r[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(s="data"+(e-n||""),!o)return s}for(var l=s,u=o.split("/"),d=0;d<u.length;d++){var p=u[d];p&&(s+=K5e(X5e(p)),l+=" && "+s)}return l}a(ckr,"getData");function Zvt(t,e){return t=='""'?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}a(Zvt,"joinPaths");function lkr(t){return X5e(decodeURIComponent(t))}a(lkr,"unescapeFragment");function ukr(t){return encodeURIComponent(J5e(t))}a(ukr,"escapeFragment");function J5e(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}a(J5e,"escapeJsonPointer");function X5e(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}a(X5e,"unescapeJsonPointer")});var Z5e=$((gLo,txt)=>{"use strict";f();var dkr=c5();txt.exports=fkr;function fkr(t){dkr.copy(t,this)}a(fkr,"SchemaObject")});var nxt=$((CLo,rxt)=>{"use strict";f();var q_=rxt.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},o=r.post||function(){};lue(e,n,o,t,"",t)};q_.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};q_.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};q_.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};q_.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function lue(t,e,r,n,o,s,c,l,u,d){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,o,s,c,l,u,d);for(var p in n){var m=n[p];if(Array.isArray(m)){if(p in q_.arrayKeywords)for(var h=0;h<m.length;h++)lue(t,e,r,m[h],o+"/"+p+"/"+h,s,o,p,n,h)}else if(p in q_.propsKeywords){if(m&&typeof m=="object")for(var g in m)lue(t,e,r,m[g],o+"/"+p+"/"+pkr(g),s,o,p,n,g)}else(p in q_.keywords||t.allKeys&&!(p in q_.skipKeywords))&&lue(t,e,r,m,o+"/"+p,s,o,p,n)}r(n,o,s,c,l,u,d)}}a(lue,"_traverse");function pkr(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}a(pkr,"escapeJsonPtr")});var hue=$((ELo,axt)=>{"use strict";f();var UH=zvt(),ixt=cue(),pue=c5(),uue=Z5e(),mkr=nxt();axt.exports=$_;$_.normalizeId=H_;$_.fullPath=due;$_.url=fue;$_.ids=Ckr;$_.inlineRef=e4e;$_.schema=mue;function $_(t,e,r){var n=this._refs[r];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return $_.call(this,t,e,n);if(n=n||this._schemas[r],n instanceof uue)return e4e(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var o=mue.call(this,e,r),s,c,l;return o&&(s=o.schema,e=o.root,l=o.baseId),s instanceof uue?c=s.validate||t.call(this,s.schema,e,void 0,l):s!==void 0&&(c=e4e(s,this._opts.inlineRefs)?s:t.call(this,s,e,void 0,l)),c}a($_,"resolve");function mue(t,e){var r=UH.parse(e),n=sxt(r),o=due(this._getId(t.schema));if(Object.keys(t.schema).length===0||n!==o){var s=H_(n),c=this._refs[s];if(typeof c=="string")return hkr.call(this,t,c,r);if(c instanceof uue)c.validate||this._compile(c),t=c;else if(c=this._schemas[s],c instanceof uue){if(c.validate||this._compile(c),s==H_(e))return{schema:c,root:t,baseId:o};t=c}else return;if(!t.schema)return;o=due(this._getId(t.schema))}return oxt.call(this,r,o,t.schema,t)}a(mue,"resolveSchema");function hkr(t,e,r){var n=mue.call(this,t,e);if(n){var o=n.schema,s=n.baseId;t=n.root;var c=this._getId(o);return c&&(s=fue(s,c)),oxt.call(this,r,s,o,t)}}a(hkr,"resolveRecursive");var gkr=pue.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function oxt(t,e,r,n){if(t.fragment=t.fragment||"",t.fragment.slice(0,1)=="/"){for(var o=t.fragment.split("/"),s=1;s<o.length;s++){var c=o[s];if(c){if(c=pue.unescapeFragment(c),r=r[c],r===void 0)break;var l;if(!gkr[c]&&(l=this._getId(r),l&&(e=fue(e,l)),r.$ref)){var u=fue(e,r.$ref),d=mue.call(this,n,u);d&&(r=d.schema,n=d.root,e=d.baseId)}}}if(r!==void 0&&r!==n.schema)return{schema:r,root:n,baseId:e}}}a(oxt,"getJsonPointer");var Akr=pue.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function e4e(t,e){if(e===!1)return!1;if(e===void 0||e===!0)return t4e(t);if(e)return r4e(t)<=e}a(e4e,"inlineRef");function t4e(t){var e;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(e=t[r],typeof e=="object"&&!t4e(e))return!1}else for(var n in t)if(n=="$ref"||(e=t[n],typeof e=="object"&&!t4e(e)))return!1;return!0}a(t4e,"checkNoRef");function r4e(t){var e=0,r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r=t[n],typeof r=="object"&&(e+=r4e(r)),e==1/0)return 1/0}else for(var o in t){if(o=="$ref")return 1/0;if(Akr[o])e++;else if(r=t[o],typeof r=="object"&&(e+=r4e(r)+1),e==1/0)return 1/0}return e}a(r4e,"countKeys");function due(t,e){e!==!1&&(t=H_(t));var r=UH.parse(t);return sxt(r)}a(due,"getFullPath");function sxt(t){return UH.serialize(t).split("#")[0]+"#"}a(sxt,"_getFullPath");var ykr=/#\/?$/;function H_(t){return t?t.replace(ykr,""):""}a(H_,"normalizeId");function fue(t,e){return e=H_(e),UH.resolve(t,e)}a(fue,"resolveUrl");function Ckr(t){var e=H_(this._getId(t)),r={"":e},n={"":due(e,!1)},o={},s=this;return mkr(t,{allKeys:!0},function(c,l,u,d,p,m,h){if(l!==""){var g=s._getId(c),A=r[d],y=n[d]+"/"+p;if(h!==void 0&&(y+="/"+(typeof h=="number"?h:pue.escapeFragment(h))),typeof g=="string"){g=A=H_(A?UH.resolve(A,g):g);var v=s._refs[g];if(typeof v=="string"&&(v=s._refs[v]),v&&v.schema){if(!ixt(c,v.schema))throw new Error('id "'+g+'" resolves to more than one schema')}else if(g!=H_(y))if(g[0]=="#"){if(o[g]&&!ixt(c,o[g]))throw new Error('id "'+g+'" resolves to more than one schema');o[g]=c}else s._refs[g]=y}r[l]=A,n[l]=y}}),o}a(Ckr,"resolveIds")});var gue=$((TLo,lxt)=>{"use strict";f();var n4e=hue();lxt.exports={Validation:cxt(vkr),MissingRef:cxt(i4e)};function vkr(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}a(vkr,"ValidationError");i4e.message=function(t,e){return"can't resolve reference "+e+" from id "+t};function i4e(t,e,r){this.message=r||i4e.message(t,e),this.missingRef=n4e.url(t,e),this.missingSchema=n4e.normalizeId(n4e.fullPath(this.missingRef))}a(i4e,"MissingRefError");function cxt(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}a(cxt,"errorSubclass")});var o4e=$((SLo,uxt)=>{"use strict";f();uxt.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(c){return function(l,u){var d={key:l,value:c[l]},p={key:u,value:c[u]};return s(d,p)}}}(e.cmp),o=[];return a(function s(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var l,u;if(Array.isArray(c)){for(u="[",l=0;l<c.length;l++)l&&(u+=","),u+=s(c[l])||"null";return u+"]"}if(c===null)return"null";if(o.indexOf(c)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var d=o.push(c)-1,p=Object.keys(c).sort(n&&n(c));for(u="",l=0;l<p.length;l++){var m=p[l],h=s(c[m]);h&&(u&&(u+=","),u+=JSON.stringify(m)+":"+h)}return o.splice(d,1),"{"+u+"}"}},"stringify")(t)}});var s4e=$((PLo,dxt)=>{"use strict";f();dxt.exports=a(function(e,r,n){var o="",s=e.schema.$async===!0,c=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),l=e.self._getId(e.schema);if(e.opts.strictKeywords){var u=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(u){var d="unknown keyword: "+u;if(e.opts.strictKeywords==="log")e.logger.warn(d);else throw new Error(d)}}if(e.isTop&&(o+=" var validate = ",s&&(e.async=!0,o+="async "),o+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",l&&(e.opts.sourceCode||e.opts.processCode)&&(o+=" "+("/*# sourceURL="+l+" */")+" ")),typeof e.schema=="boolean"||!(c||e.schema.$ref)){var r="false schema",p=e.level,m=e.dataLevel,h=e.schema[r],g=e.schemaPath+e.util.getProperty(r),A=e.errSchemaPath+"/"+r,N=!e.opts.allErrors,Y,y="data"+(m||""),k="valid"+p;if(e.schema===!1){e.isTop?N=!0:o+=" var "+k+" = false; ";var v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(Y||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(A)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'boolean schema is false' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&N?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?o+=" return data; ":o+=" validate.errors = null; return true; ":o+=" var "+k+" = true; ";return e.isTop&&(o+=" }; return validate; "),o}if(e.isTop){var I=e.isTop,p=e.level=0,m=e.dataLevel=0,y="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var S="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}o+=" var vErrors = null; ",o+=" var errors = 0;     ",o+=" if (rootData === undefined) rootData = data; "}else{var p=e.level,m=e.dataLevel,y="data"+(m||"");if(l&&(e.baseId=e.resolve.url(e.baseId,l)),s&&!e.async)throw new Error("async schema in sync schema");o+=" var errs_"+p+" = errors;"}var k="valid"+p,N=!e.opts.allErrors,F="",O="",Y,z=e.schema.type,V=Array.isArray(z);if(z&&e.opts.nullable&&e.schema.nullable===!0&&(V?z.indexOf("null")==-1&&(z=z.concat("null")):z!="null"&&(z=[z,"null"],V=!0)),V&&z.length==1&&(z=z[0],V=!1),e.schema.$ref&&c){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(c=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(o+=" "+e.RULES.all.$comment.code(e,"$comment")),z){if(e.opts.coerceTypes)var U=e.util.coerceToTypes(e.opts.coerceTypes,z);var H=e.RULES.types[z];if(U||V||H===!0||H&&!be(H)){var g=e.schemaPath+".type",A=e.errSchemaPath+"/type",g=e.schemaPath+".type",A=e.errSchemaPath+"/type",ee=V?"checkDataTypes":"checkDataType";if(o+=" if ("+e.util[ee](z,y,e.opts.strictNumbers,!0)+") { ",U){var J="dataType"+p,G="coerced"+p;o+=" var "+J+" = typeof "+y+"; var "+G+" = undefined; ",e.opts.coerceTypes=="array"&&(o+=" if ("+J+" == 'object' && Array.isArray("+y+") && "+y+".length == 1) { "+y+" = "+y+"[0]; "+J+" = typeof "+y+"; if ("+e.util.checkDataType(e.schema.type,y,e.opts.strictNumbers)+") "+G+" = "+y+"; } "),o+=" if ("+G+" !== undefined) ; ";var j=U;if(j)for(var Z,ie=-1,ne=j.length-1;ie<ne;)Z=j[ie+=1],Z=="string"?o+=" else if ("+J+" == 'number' || "+J+" == 'boolean') "+G+" = '' + "+y+"; else if ("+y+" === null) "+G+" = ''; ":Z=="number"||Z=="integer"?(o+=" else if ("+J+" == 'boolean' || "+y+" === null || ("+J+" == 'string' && "+y+" && "+y+" == +"+y+" ",Z=="integer"&&(o+=" && !("+y+" % 1)"),o+=")) "+G+" = +"+y+"; "):Z=="boolean"?o+=" else if ("+y+" === 'false' || "+y+" === 0 || "+y+" === null) "+G+" = false; else if ("+y+" === 'true' || "+y+" === 1) "+G+" = true; ":Z=="null"?o+=" else if ("+y+" === '' || "+y+" === 0 || "+y+" === false) "+G+" = null; ":e.opts.coerceTypes=="array"&&Z=="array"&&(o+=" else if ("+J+" == 'string' || "+J+" == 'number' || "+J+" == 'boolean' || "+y+" == null) "+G+" = ["+y+"]; ");o+=" else {   ";var v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(A)+" , params: { type: '",V?o+=""+z.join(","):o+=""+z,o+="' } ",e.opts.messages!==!1&&(o+=" , message: 'should be ",V?o+=""+z.join(","):o+=""+z,o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&N?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } if ("+G+" !== undefined) {  ";var re=m?"data"+(m-1||""):"parentData",fe=m?e.dataPathArr[m]:"parentDataProperty";o+=" "+y+" = "+G+"; ",m||(o+="if ("+re+" !== undefined)"),o+=" "+re+"["+fe+"] = "+G+"; } "}else{var v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(A)+" , params: { type: '",V?o+=""+z.join(","):o+=""+z,o+="' } ",e.opts.messages!==!1&&(o+=" , message: 'should be ",V?o+=""+z.join(","):o+=""+z,o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&N?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}o+=" } "}}if(e.schema.$ref&&!c)o+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",N&&(o+=" } if (errors === ",I?o+="0":o+="errs_"+p,o+=") { ",O+="}");else{var ye=e.RULES;if(ye){for(var H,Qe=-1,we=ye.length-1;Qe<we;)if(H=ye[Qe+=1],be(H)){if(H.type&&(o+=" if ("+e.util.checkDataType(H.type,y,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(H.type=="object"&&e.schema.properties){var h=e.schema.properties,Xe=Object.keys(h),Oe=Xe;if(Oe)for(var ut,Rt=-1,Et=Oe.length-1;Rt<Et;){ut=Oe[Rt+=1];var At=h[ut];if(At.default!==void 0){var de=y+e.util.getProperty(ut);if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+de;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else o+=" if ("+de+" === undefined ",e.opts.useDefaults=="empty"&&(o+=" || "+de+" === null || "+de+" === '' "),o+=" ) "+de+" = ",e.opts.useDefaults=="shared"?o+=" "+e.useDefault(At.default)+" ":o+=" "+JSON.stringify(At.default)+" ",o+="; "}}}else if(H.type=="array"&&Array.isArray(e.schema.items)){var qe=e.schema.items;if(qe){for(var At,ie=-1,Ce=qe.length-1;ie<Ce;)if(At=qe[ie+=1],At.default!==void 0){var de=y+"["+ie+"]";if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+de;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else o+=" if ("+de+" === undefined ",e.opts.useDefaults=="empty"&&(o+=" || "+de+" === null || "+de+" === '' "),o+=" ) "+de+" = ",e.opts.useDefaults=="shared"?o+=" "+e.useDefault(At.default)+" ":o+=" "+JSON.stringify(At.default)+" ",o+="; "}}}}var We=H.rules;if(We){for(var ce,ue=-1,He=We.length-1;ue<He;)if(ce=We[ue+=1],Ge(ce)){var Me=ce.code(e,ce.keyword,H.type);Me&&(o+=" "+Me+" ",N&&(F+="}"))}}if(N&&(o+=" "+F+" ",F=""),H.type&&(o+=" } ",z&&z===H.type&&!U)){o+=" else { ";var g=e.schemaPath+".type",A=e.errSchemaPath+"/type",v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(A)+" , params: { type: '",V?o+=""+z.join(","):o+=""+z,o+="' } ",e.opts.messages!==!1&&(o+=" , message: 'should be ",V?o+=""+z.join(","):o+=""+z,o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&N?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } "}N&&(o+=" if (errors === ",I?o+="0":o+="errs_"+p,o+=") { ",O+="}")}}}N&&(o+=" "+O+" "),I?(s?(o+=" if (errors === 0) return data;           ",o+=" else throw new ValidationError(vErrors); "):(o+=" validate.errors = vErrors; ",o+=" return errors === 0;       "),o+=" }; return validate;"):o+=" var "+k+" = errors === errs_"+p+";";function be(ht){for(var Ot=ht.rules,Xt=0;Xt<Ot.length;Xt++)if(Ge(Ot[Xt]))return!0}a(be,"$shouldUseGroup");function Ge(ht){return e.schema[ht.keyword]!==void 0||ht.implements&&rt(ht)}a(Ge,"$shouldUseRule");function rt(ht){for(var Ot=ht.implements,Xt=0;Xt<Ot.length;Xt++)if(e.schema[Ot[Xt]]!==void 0)return!0}return a(rt,"$ruleImplementsSomeKeyword"),o},"generate_validate")});var gxt=$((NLo,hxt)=>{"use strict";f();var Aue=hue(),Cue=c5(),pxt=gue(),xkr=o4e(),fxt=s4e(),Ekr=Cue.ucs2length,bkr=cue(),Ikr=pxt.Validation;hxt.exports=a4e;function a4e(t,e,r,n){var o=this,s=this._opts,c=[void 0],l={},u=[],d={},p=[],m={},h=[];e=e||{schema:t,refVal:c,refs:l};var g=Tkr.call(this,t,e,n),A=this._compilations[g.index];if(g.compiling)return A.callValidate=S;var y=this._formats,v=this.RULES;try{var b=k(t,e,r,n);A.validate=b;var I=A.callValidate;return I&&(I.schema=b.schema,I.errors=null,I.refs=b.refs,I.refVal=b.refVal,I.root=b.root,I.$async=b.$async,s.sourceCode&&(I.source=b.source)),b}finally{wkr.call(this,t,e,n)}function S(){var ee=A.validate,J=ee.apply(this,arguments);return S.errors=ee.errors,J}a(S,"callValidate");function k(ee,J,G,j){var Z=!J||J&&J.schema==ee;if(J.schema!=e.schema)return a4e.call(o,ee,J,G,j);var ie=ee.$async===!0,ne=fxt({isTop:!0,schema:ee,isRoot:Z,baseId:j,root:J,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:pxt.MissingRef,RULES:v,validate:fxt,util:Cue,resolve:Aue,resolveRef:N,usePattern:V,useDefault:U,useCustomRule:H,opts:s,formats:y,logger:o.logger,self:o});ne=yue(c,Rkr)+yue(u,_kr)+yue(p,Skr)+yue(h,kkr)+ne,s.processCode&&(ne=s.processCode(ne,ee));var re;try{var fe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ne);re=fe(o,v,y,e,c,p,h,bkr,Ekr,Ikr),c[0]=re}catch(ye){throw o.logger.error("Error compiling schema, function code:",ne),ye}return re.schema=ee,re.errors=null,re.refs=l,re.refVal=c,re.root=Z?re:J,ie&&(re.$async=!0),s.sourceCode===!0&&(re.source={code:ne,patterns:u,defaults:p}),re}a(k,"localCompile");function N(ee,J,G){J=Aue.url(ee,J);var j=l[J],Z,ie;if(j!==void 0)return Z=c[j],ie="refVal["+j+"]",z(Z,ie);if(!G&&e.refs){var ne=e.refs[J];if(ne!==void 0)return Z=e.refVal[ne],ie=F(J,Z),z(Z,ie)}ie=F(J);var re=Aue.call(o,k,e,J);if(re===void 0){var fe=r&&r[J];fe&&(re=Aue.inlineRef(fe,s.inlineRefs)?fe:a4e.call(o,fe,e,r,ee))}if(re===void 0)O(J);else return Y(J,re),z(re,ie)}a(N,"resolveRef");function F(ee,J){var G=c.length;return c[G]=J,l[ee]=G,"refVal"+G}a(F,"addLocalRef");function O(ee){delete l[ee]}a(O,"removeLocalRef");function Y(ee,J){var G=l[ee];c[G]=J}a(Y,"replaceLocalRef");function z(ee,J){return typeof ee=="object"||typeof ee=="boolean"?{code:J,schema:ee,inline:!0}:{code:J,$async:ee&&!!ee.$async}}a(z,"resolvedRef");function V(ee){var J=d[ee];return J===void 0&&(J=d[ee]=u.length,u[J]=ee),"pattern"+J}a(V,"usePattern");function U(ee){switch(typeof ee){case"boolean":case"number":return""+ee;case"string":return Cue.toQuotedString(ee);case"object":if(ee===null)return"null";var J=xkr(ee),G=m[J];return G===void 0&&(G=m[J]=p.length,p[G]=ee),"default"+G}}a(U,"useDefault");function H(ee,J,G,j){if(o._opts.validateSchema!==!1){var Z=ee.definition.dependencies;if(Z&&!Z.every(function(Oe){return Object.prototype.hasOwnProperty.call(G,Oe)}))throw new Error("parent schema must have all required keywords: "+Z.join(","));var ie=ee.definition.validateSchema;if(ie){var ne=ie(J);if(!ne){var re="keyword schema is invalid: "+o.errorsText(ie.errors);if(o._opts.validateSchema=="log")o.logger.error(re);else throw new Error(re)}}}var fe=ee.definition.compile,ye=ee.definition.inline,Qe=ee.definition.macro,we;if(fe)we=fe.call(o,J,G,j);else if(Qe)we=Qe.call(o,J,G,j),s.validateSchema!==!1&&o.validateSchema(we,!0);else if(ye)we=ye.call(o,j,ee.keyword,J,G);else if(we=ee.definition.validate,!we)return;if(we===void 0)throw new Error('custom keyword "'+ee.keyword+'"failed to compile');var Xe=h.length;return h[Xe]=we,{code:"customRule"+Xe,validate:we}}a(H,"useCustomRule")}a(a4e,"compile");function Tkr(t,e,r){var n=mxt.call(this,t,e,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:r},{index:n,compiling:!1})}a(Tkr,"checkCompiling");function wkr(t,e,r){var n=mxt.call(this,t,e,r);n>=0&&this._compilations.splice(n,1)}a(wkr,"endCompiling");function mxt(t,e,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==t&&o.root==e&&o.baseId==r)return n}return-1}a(mxt,"compIndex");function _kr(t,e){return"var pattern"+t+" = new RegExp("+Cue.toQuotedString(e[t])+");"}a(_kr,"patternCode");function Skr(t){return"var default"+t+" = defaults["+t+"];"}a(Skr,"defaultCode");function Rkr(t,e){return e[t]===void 0?"":"var refVal"+t+" = refVal["+t+"];"}a(Rkr,"refValCode");function kkr(t){return"var customRule"+t+" = customRules["+t+"];"}a(kkr,"customRuleCode");function yue(t,e){if(!t.length)return"";for(var r="",n=0;n<t.length;n++)r+=e(n,t);return r}a(yue,"vars")});var yxt=$((FLo,Axt)=>{"use strict";f();var vue=Axt.exports=a(function(){this._cache={}},"Cache");vue.prototype.put=a(function(e,r){this._cache[e]=r},"Cache_put");vue.prototype.get=a(function(e){return this._cache[e]},"Cache_get");vue.prototype.del=a(function(e){delete this._cache[e]},"Cache_del");vue.prototype.clear=a(function(){this._cache={}},"Cache_clear")});var kxt=$((ULo,Rxt)=>{"use strict";f();var Pkr=c5(),Dkr=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Bkr=[0,31,28,31,30,31,30,31,31,30,31,30,31],Nkr=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Cxt=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Mkr=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Lkr=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,vxt=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,xxt=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Ext=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,bxt=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Ixt=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Txt=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;Rxt.exports=xue;function xue(t){return t=t=="full"?"full":"fast",Pkr.copy(xue[t])}a(xue,"formats");xue.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":vxt,url:xxt,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Cxt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Sxt,uuid:Ext,"json-pointer":bxt,"json-pointer-uri-fragment":Ixt,"relative-json-pointer":Txt};xue.full={date:wxt,time:_xt,"date-time":Qkr,uri:qkr,"uri-reference":Lkr,"uri-template":vxt,url:xxt,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Cxt,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Sxt,uuid:Ext,"json-pointer":bxt,"json-pointer-uri-fragment":Ixt,"relative-json-pointer":Txt};function Fkr(t){return t%4===0&&(t%100!==0||t%400===0)}a(Fkr,"isLeapYear");function wxt(t){var e=t.match(Dkr);if(!e)return!1;var r=+e[1],n=+e[2],o=+e[3];return n>=1&&n<=12&&o>=1&&o<=(n==2&&Fkr(r)?29:Bkr[n])}a(wxt,"date");function _xt(t,e){var r=t.match(Nkr);if(!r)return!1;var n=r[1],o=r[2],s=r[3],c=r[5];return(n<=23&&o<=59&&s<=59||n==23&&o==59&&s==60)&&(!e||c)}a(_xt,"time");var Okr=/t|\s/i;function Qkr(t){var e=t.split(Okr);return e.length==2&&wxt(e[0])&&_xt(e[1],!0)}a(Qkr,"date_time");var Ukr=/\/|:/;function qkr(t){return Ukr.test(t)&&Mkr.test(t)}a(qkr,"uri");var Hkr=/[^\\]\\Z/;function Sxt(t){if(Hkr.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}a(Sxt,"regex")});var Dxt=$(($Lo,Pxt)=>{"use strict";f();Pxt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(c||""),m="valid"+s,h,g;if(l=="#"||l=="#/")e.isRoot?(h=e.async,g="validate"):(h=e.root.schema.$async===!0,g="root.refVal[0]");else{var A=e.resolveRef(e.baseId,l,e.isRoot);if(A===void 0){var y=e.MissingRefError.message(e.baseId,l);if(e.opts.missingRefs=="fail"){e.logger.error(y);var v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",e.opts.messages!==!1&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ";var b=o;o=v.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(o+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(y),d&&(o+=" if (true) { ");else throw new e.MissingRefError(e.baseId,l,y)}else if(A.inline){var I=e.util.copy(e);I.level++;var S="valid"+I.level;I.schema=A.schema,I.schemaPath="",I.errSchemaPath=l;var k=e.validate(I).replace(/validate\.schema/g,A.code);o+=" "+k+" ",d&&(o+=" if ("+S+") { ")}else h=A.$async===!0||e.async&&A.$async!==!1,g=A.code}if(g){var v=v||[];v.push(o),o="",e.opts.passContext?o+=" "+g+".call(this, ":o+=" "+g+"( ",o+=" "+p+", (dataPath || '')",e.errorPath!='""'&&(o+=" + "+e.errorPath);var N=c?"data"+(c-1||""):"parentData",F=c?e.dataPathArr[c]:"parentDataProperty";o+=" , "+N+" , "+F+", rootData)  ";var O=o;if(o=v.pop(),h){if(!e.async)throw new Error("async schema referenced by sync schema");d&&(o+=" var "+m+"; "),o+=" try { await "+O+"; ",d&&(o+=" "+m+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(o+=" "+m+" = false; "),o+=" } ",d&&(o+=" if ("+m+") { ")}else o+=" if (!"+O+") { if (vErrors === null) vErrors = "+g+".errors; else vErrors = vErrors.concat("+g+".errors); errors = vErrors.length; } ",d&&(o+=" else { ")}return o},"generate_ref")});var Nxt=$((GLo,Bxt)=>{"use strict";f();Bxt.exports=a(function(e,r,n){var o=" ",s=e.schema[r],c=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level,h=d.baseId,g=!0,A=s;if(A)for(var y,v=-1,b=A.length-1;v<b;)y=A[v+=1],(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all))&&(g=!1,d.schema=y,d.schemaPath=c+"["+v+"]",d.errSchemaPath=l+"/"+v,o+="  "+e.validate(d)+" ",d.baseId=h,u&&(o+=" if ("+m+") { ",p+="}"));return u&&(g?o+=" if (true) { ":o+=" "+p.slice(0,-1)+" "),o},"generate_allOf")});var Lxt=$((KLo,Mxt)=>{"use strict";f();Mxt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e),y="";A.level++;var v="valid"+A.level,b=l.every(function(Y){return e.opts.strictKeywords?typeof Y=="object"&&Object.keys(Y).length>0||Y===!1:e.util.schemaHasRules(Y,e.RULES.all)});if(b){var I=A.baseId;o+=" var "+g+" = errors; var "+h+" = false;  ";var S=e.compositeRule;e.compositeRule=A.compositeRule=!0;var k=l;if(k)for(var N,F=-1,O=k.length-1;F<O;)N=k[F+=1],A.schema=N,A.schemaPath=u+"["+F+"]",A.errSchemaPath=d+"/"+F,o+="  "+e.validate(A)+" ",A.baseId=I,o+=" "+h+" = "+h+" || "+v+"; if (!"+h+") { ",y+="}";e.compositeRule=A.compositeRule=S,o+=" "+y+" if (!"+h+") {   var err =   ",e.createErrors!==!1?(o+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+=" } else {  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; } ",e.opts.allErrors&&(o+=" } ")}else p&&(o+=" if (true) { ");return o},"generate_anyOf")});var Oxt=$((XLo,Fxt)=>{"use strict";f();Fxt.exports=a(function(e,r,n){var o=" ",s=e.schema[r],c=e.errSchemaPath+"/"+r,l=!e.opts.allErrors,u=e.util.toQuotedString(s);return e.opts.$comment===!0?o+=" console.log("+u+");":typeof e.opts.$comment=="function"&&(o+=" self._opts.$comment("+u+", "+e.util.toQuotedString(c)+", validate.root.schema);"),o},"generate_comment")});var Uxt=$((tFo,Qxt)=>{"use strict";f();Qxt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g=e.opts.$data&&l&&l.$data,A;g?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",A="schema"+s):A=l,g||(o+=" var schema"+s+" = validate.schema"+u+";"),o+="var "+h+" = equal("+m+", schema"+s+"); if (!"+h+") {   ";var y=y||[];y.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(o+=" , message: 'should be equal to constant' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var v=o;return o=y.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" }",p&&(o+=" else { "),o},"generate_const")});var Hxt=$((iFo,qxt)=>{"use strict";f();qxt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e),y="";A.level++;var v="valid"+A.level,b="i"+s,I=A.dataLevel=e.dataLevel+1,S="data"+I,k=e.baseId,N=e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all);if(o+="var "+g+" = errors;var "+h+";",N){var F=e.compositeRule;e.compositeRule=A.compositeRule=!0,A.schema=l,A.schemaPath=u,A.errSchemaPath=d,o+=" var "+v+" = false; for (var "+b+" = 0; "+b+" < "+m+".length; "+b+"++) { ",A.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0);var O=m+"["+b+"]";A.dataPathArr[I]=b;var Y=e.validate(A);A.baseId=k,e.util.varOccurences(Y,S)<2?o+=" "+e.util.varReplace(Y,S,O)+" ":o+=" var "+S+" = "+O+"; "+Y+" ",o+=" if ("+v+") break; }  ",e.compositeRule=A.compositeRule=F,o+=" "+y+" if (!"+v+") {"}else o+=" if ("+m+".length == 0) {";var z=z||[];z.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'should contain a valid item' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var V=o;return o=z.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+V+"]); ":o+=" validate.errors = ["+V+"]; return false; ":o+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { ",N&&(o+="  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; } "),e.opts.allErrors&&(o+=" } "),o},"generate_contains")});var Wxt=$((aFo,$xt)=>{"use strict";f();$xt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="errs__"+s,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,v={},b={},I=e.opts.ownProperties;for(F in l)if(F!="__proto__"){var S=l[F],k=Array.isArray(S)?b:v;k[F]=S}o+="var "+h+" = errors;";var N=e.errorPath;o+="var missing"+s+";";for(var F in b)if(k=b[F],k.length){if(o+=" if ( "+m+e.util.getProperty(F)+" !== undefined ",I&&(o+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),p){o+=" && ( ";var O=k;if(O)for(var Y,z=-1,V=O.length-1;z<V;){Y=O[z+=1],z&&(o+=" || ");var U=e.util.getProperty(Y),H=m+U;o+=" ( ( "+H+" === undefined ",I&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(Y)+"') "),o+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?Y:U)+") ) "}o+=")) {  ";var ee="missing"+s,J="' + "+ee+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(N,ee,!0):N+" + "+ee);var G=G||[];G.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(F)+"', missingProperty: '"+J+"', depsCount: "+k.length+", deps: '"+e.util.escapeQuotes(k.length==1?k[0]:k.join(", "))+"' } ",e.opts.messages!==!1&&(o+=" , message: 'should have ",k.length==1?o+="property "+e.util.escapeQuotes(k[0]):o+="properties "+e.util.escapeQuotes(k.join(", ")),o+=" when property "+e.util.escapeQuotes(F)+" is present' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var j=o;o=G.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+j+"]); ":o+=" validate.errors = ["+j+"]; return false; ":o+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{o+=" ) { ";var Z=k;if(Z)for(var Y,ie=-1,ne=Z.length-1;ie<ne;){Y=Z[ie+=1];var U=e.util.getProperty(Y),J=e.util.escapeQuotes(Y),H=m+U;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(N,Y,e.opts.jsonPointers)),o+=" if ( "+H+" === undefined ",I&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(Y)+"') "),o+=") {  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(F)+"', missingProperty: '"+J+"', depsCount: "+k.length+", deps: '"+e.util.escapeQuotes(k.length==1?k[0]:k.join(", "))+"' } ",e.opts.messages!==!1&&(o+=" , message: 'should have ",k.length==1?o+="property "+e.util.escapeQuotes(k[0]):o+="properties "+e.util.escapeQuotes(k.join(", ")),o+=" when property "+e.util.escapeQuotes(F)+" is present' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}o+=" }   ",p&&(A+="}",o+=" else { ")}e.errorPath=N;var re=g.baseId;for(var F in v){var S=v[F];(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all))&&(o+=" "+y+" = true; if ( "+m+e.util.getProperty(F)+" !== undefined ",I&&(o+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),o+=") { ",g.schema=S,g.schemaPath=u+e.util.getProperty(F),g.errSchemaPath=d+"/"+e.util.escapeFragment(F),o+="  "+e.validate(g)+" ",g.baseId=re,o+=" }  ",p&&(o+=" if ("+y+") { ",A+="}"))}return p&&(o+="   "+A+" if ("+h+" == errors) {"),o},"generate_dependencies")});var Gxt=$((uFo,jxt)=>{"use strict";f();jxt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g=e.opts.$data&&l&&l.$data,A;g?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",A="schema"+s):A=l;var y="i"+s,v="schema"+s;g||(o+=" var "+v+" = validate.schema"+u+";"),o+="var "+h+";",g&&(o+=" if (schema"+s+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+s+")) "+h+" = false; else {"),o+=""+h+" = false;for (var "+y+"=0; "+y+"<"+v+".length; "+y+"++) if (equal("+m+", "+v+"["+y+"])) { "+h+" = true; break; }",g&&(o+="  }  "),o+=" if (!"+h+") {   ";var b=b||[];b.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(o+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var I=o;return o=b.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+I+"]); ":o+=" validate.errors = ["+I+"]; return false; ":o+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" }",p&&(o+=" else { "),o},"generate_enum")});var zxt=$((pFo,Vxt)=>{"use strict";f();Vxt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||"");if(e.opts.format===!1)return p&&(o+=" if (true) { "),o;var h=e.opts.$data&&l&&l.$data,g;h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l;var A=e.opts.unknownFormats,y=Array.isArray(A);if(h){var v="format"+s,b="isObject"+s,I="formatType"+s;o+=" var "+v+" = formats["+g+"]; var "+b+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+I+" = "+b+" && "+v+".type || 'string'; if ("+b+") { ",e.async&&(o+=" var async"+s+" = "+v+".async; "),o+=" "+v+" = "+v+".validate; } if (  ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'string') || "),o+=" (",A!="ignore"&&(o+=" ("+g+" && !"+v+" ",y&&(o+=" && self._opts.unknownFormats.indexOf("+g+") == -1 "),o+=") || "),o+=" ("+v+" && "+I+" == '"+n+"' && !(typeof "+v+" == 'function' ? ",e.async?o+=" (async"+s+" ? await "+v+"("+m+") : "+v+"("+m+")) ":o+=" "+v+"("+m+") ",o+=" : "+v+".test("+m+"))))) {"}else{var v=e.formats[l];if(!v){if(A=="ignore")return e.logger.warn('unknown format "'+l+'" ignored in schema at path "'+e.errSchemaPath+'"'),p&&(o+=" if (true) { "),o;if(y&&A.indexOf(l)>=0)return p&&(o+=" if (true) { "),o;throw new Error('unknown format "'+l+'" is used in schema at path "'+e.errSchemaPath+'"')}var b=typeof v=="object"&&!(v instanceof RegExp)&&v.validate,I=b&&v.type||"string";if(b){var S=v.async===!0;v=v.validate}if(I!=n)return p&&(o+=" if (true) { "),o;if(S){if(!e.async)throw new Error("async format in sync schema");var k="formats"+e.util.getProperty(l)+".validate";o+=" if (!(await "+k+"("+m+"))) { "}else{o+=" if (! ";var k="formats"+e.util.getProperty(l);b&&(k+=".validate"),typeof v=="function"?o+=" "+k+"("+m+") ":o+=" "+k+".test("+m+") ",o+=") { "}}var N=N||[];N.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { format:  ",h?o+=""+g:o+=""+e.util.toQuotedString(l),o+="  } ",e.opts.messages!==!1&&(o+=` , message: 'should match format "`,h?o+="' + "+g+" + '":o+=""+e.util.escapeQuotes(l),o+=`"' `),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+e.util.toQuotedString(l),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var F=o;return o=N.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+F+"]); ":o+=" validate.errors = ["+F+"]; return false; ":o+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { "),o},"generate_format")});var Yxt=$((gFo,Kxt)=>{"use strict";f();Kxt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e);A.level++;var y="valid"+A.level,v=e.schema.then,b=e.schema.else,I=v!==void 0&&(e.opts.strictKeywords?typeof v=="object"&&Object.keys(v).length>0||v===!1:e.util.schemaHasRules(v,e.RULES.all)),S=b!==void 0&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all)),k=A.baseId;if(I||S){var N;A.createErrors=!1,A.schema=l,A.schemaPath=u,A.errSchemaPath=d,o+=" var "+g+" = errors; var "+h+" = true;  ";var F=e.compositeRule;e.compositeRule=A.compositeRule=!0,o+="  "+e.validate(A)+" ",A.baseId=k,A.createErrors=!0,o+="  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; }  ",e.compositeRule=A.compositeRule=F,I?(o+=" if ("+y+") {  ",A.schema=e.schema.then,A.schemaPath=e.schemaPath+".then",A.errSchemaPath=e.errSchemaPath+"/then",o+="  "+e.validate(A)+" ",A.baseId=k,o+=" "+h+" = "+y+"; ",I&&S?(N="ifClause"+s,o+=" var "+N+" = 'then'; "):N="'then'",o+=" } ",S&&(o+=" else { ")):o+=" if (!"+y+") { ",S&&(A.schema=e.schema.else,A.schemaPath=e.schemaPath+".else",A.errSchemaPath=e.errSchemaPath+"/else",o+="  "+e.validate(A)+" ",A.baseId=k,o+=" "+h+" = "+y+"; ",I&&S?(N="ifClause"+s,o+=" var "+N+" = 'else'; "):N="'else'",o+=" } "),o+=" if (!"+h+") {   var err =   ",e.createErrors!==!1?(o+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { failingKeyword: "+N+" } ",e.opts.messages!==!1&&(o+=` , message: 'should match "' + `+N+` + '" schema' `),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+=" }   ",p&&(o+=" else { ")}else p&&(o+=" if (true) { ");return o},"generate_if")});var Xxt=$((CFo,Jxt)=>{"use strict";f();Jxt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e),y="";A.level++;var v="valid"+A.level,b="i"+s,I=A.dataLevel=e.dataLevel+1,S="data"+I,k=e.baseId;if(o+="var "+g+" = errors;var "+h+";",Array.isArray(l)){var N=e.schema.additionalItems;if(N===!1){o+=" "+h+" = "+m+".length <= "+l.length+"; ";var F=d;d=e.errSchemaPath+"/additionalItems",o+="  if (!"+h+") {   ";var O=O||[];O.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+l.length+" } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT have more than "+l.length+" items' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var Y=o;o=O.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+Y+"]); ":o+=" validate.errors = ["+Y+"]; return false; ":o+=" var err = "+Y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",d=F,p&&(y+="}",o+=" else { ")}var z=l;if(z){for(var V,U=-1,H=z.length-1;U<H;)if(V=z[U+=1],e.opts.strictKeywords?typeof V=="object"&&Object.keys(V).length>0||V===!1:e.util.schemaHasRules(V,e.RULES.all)){o+=" "+v+" = true; if ("+m+".length > "+U+") { ";var ee=m+"["+U+"]";A.schema=V,A.schemaPath=u+"["+U+"]",A.errSchemaPath=d+"/"+U,A.errorPath=e.util.getPathExpr(e.errorPath,U,e.opts.jsonPointers,!0),A.dataPathArr[I]=U;var J=e.validate(A);A.baseId=k,e.util.varOccurences(J,S)<2?o+=" "+e.util.varReplace(J,S,ee)+" ":o+=" var "+S+" = "+ee+"; "+J+" ",o+=" }  ",p&&(o+=" if ("+v+") { ",y+="}")}}if(typeof N=="object"&&(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))){A.schema=N,A.schemaPath=e.schemaPath+".additionalItems",A.errSchemaPath=e.errSchemaPath+"/additionalItems",o+=" "+v+" = true; if ("+m+".length > "+l.length+") {  for (var "+b+" = "+l.length+"; "+b+" < "+m+".length; "+b+"++) { ",A.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0);var ee=m+"["+b+"]";A.dataPathArr[I]=b;var J=e.validate(A);A.baseId=k,e.util.varOccurences(J,S)<2?o+=" "+e.util.varReplace(J,S,ee)+" ":o+=" var "+S+" = "+ee+"; "+J+" ",p&&(o+=" if (!"+v+") break; "),o+=" } }  ",p&&(o+=" if ("+v+") { ",y+="}")}}else if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){A.schema=l,A.schemaPath=u,A.errSchemaPath=d,o+="  for (var "+b+" = 0; "+b+" < "+m+".length; "+b+"++) { ",A.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0);var ee=m+"["+b+"]";A.dataPathArr[I]=b;var J=e.validate(A);A.baseId=k,e.util.varOccurences(J,S)<2?o+=" "+e.util.varReplace(J,S,ee)+" ":o+=" var "+S+" = "+ee+"; "+J+" ",p&&(o+=" if (!"+v+") break; "),o+=" }"}return p&&(o+=" "+y+" if ("+g+" == errors) {"),o},"generate_items")});var c4e=$((EFo,Zxt)=>{"use strict";f();Zxt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,k,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l;var A=r=="maximum",y=A?"exclusiveMaximum":"exclusiveMinimum",v=e.schema[y],b=e.opts.$data&&v&&v.$data,I=A?"<":">",S=A?">":"<",k=void 0;if(!(h||typeof l=="number"||l===void 0))throw new Error(r+" must be number");if(!(b||v===void 0||typeof v=="number"||typeof v=="boolean"))throw new Error(y+" must be number or boolean");if(b){var N=e.util.getData(v.$data,c,e.dataPathArr),F="exclusive"+s,O="exclType"+s,Y="exclIsNumber"+s,z="op"+s,V="' + "+z+" + '";o+=" var schemaExcl"+s+" = "+N+"; ",N="schemaExcl"+s,o+=" var "+F+"; var "+O+" = typeof "+N+"; if ("+O+" != 'boolean' && "+O+" != 'undefined' && "+O+" != 'number') { ";var k=y,U=U||[];U.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(k||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: '"+y+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var H=o;o=U.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+H+"]); ":o+=" validate.errors = ["+H+"]; return false; ":o+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" "+O+" == 'number' ? ( ("+F+" = "+g+" === undefined || "+N+" "+I+"= "+g+") ? "+m+" "+S+"= "+N+" : "+m+" "+S+" "+g+" ) : ( ("+F+" = "+N+" === true) ? "+m+" "+S+"= "+g+" : "+m+" "+S+" "+g+" ) || "+m+" !== "+m+") { var op"+s+" = "+F+" ? '"+I+"' : '"+I+"='; ",l===void 0&&(k=y,d=e.errSchemaPath+"/"+y,g=N,h=b)}else{var Y=typeof v=="number",V=I;if(Y&&h){var z="'"+V+"'";o+=" if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" ( "+g+" === undefined || "+v+" "+I+"= "+g+" ? "+m+" "+S+"= "+v+" : "+m+" "+S+" "+g+" ) || "+m+" !== "+m+") { "}else{Y&&l===void 0?(F=!0,k=y,d=e.errSchemaPath+"/"+y,g=v,S+="="):(Y&&(g=Math[A?"min":"max"](v,l)),v===(Y?g:!0)?(F=!0,k=y,d=e.errSchemaPath+"/"+y,S+="="):(F=!1,V+="="));var z="'"+V+"'";o+=" if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" "+m+" "+S+" "+g+" || "+m+" !== "+m+") { "}}k=k||r;var U=U||[];U.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(k||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { comparison: "+z+", limit: "+g+", exclusive: "+F+" } ",e.opts.messages!==!1&&(o+=" , message: 'should be "+V+" ",h?o+="' + "+g:o+=""+g+"'"),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var H=o;return o=U.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+H+"]); ":o+=" validate.errors = ["+H+"]; return false; ":o+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { "),o},"generate__limit")});var l4e=$((TFo,eEt)=>{"use strict";f();eEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,y,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;if(h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l,!(h||typeof l=="number"))throw new Error(r+" must be number");var A=r=="maxItems"?">":"<";o+="if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" "+m+".length "+A+" "+g+") { ";var y=r,v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(y||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+g+" } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT have ",r=="maxItems"?o+="more":o+="fewer",o+=" than ",h?o+="' + "+g+" + '":o+=""+l,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var b=o;return o=v.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate__limitItems")});var u4e=$((SFo,tEt)=>{"use strict";f();tEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,y,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;if(h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l,!(h||typeof l=="number"))throw new Error(r+" must be number");var A=r=="maxLength"?">":"<";o+="if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),e.opts.unicode===!1?o+=" "+m+".length ":o+=" ucs2length("+m+") ",o+=" "+A+" "+g+") { ";var y=r,v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(y||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+g+" } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT be ",r=="maxLength"?o+="longer":o+="shorter",o+=" than ",h?o+="' + "+g+" + '":o+=""+l,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var b=o;return o=v.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate__limitLength")});var d4e=$((PFo,rEt)=>{"use strict";f();rEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,y,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;if(h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l,!(h||typeof l=="number"))throw new Error(r+" must be number");var A=r=="maxProperties"?">":"<";o+="if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),o+=" Object.keys("+m+").length "+A+" "+g+") { ";var y=r,v=v||[];v.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(y||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+g+" } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT have ",r=="maxProperties"?o+="more":o+="fewer",o+=" than ",h?o+="' + "+g+" + '":o+=""+l,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var b=o;return o=v.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate__limitProperties")});var iEt=$((NFo,nEt)=>{"use strict";f();nEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;if(h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l,!(h||typeof l=="number"))throw new Error(r+" must be number");o+="var division"+s+";if (",h&&(o+=" "+g+" !== undefined && ( typeof "+g+" != 'number' || "),o+=" (division"+s+" = "+m+" / "+g+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+s+" !== parseInt(division"+s+") ",o+=" ) ",h&&(o+="  )  "),o+=" ) {   ";var A=A||[];A.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { multipleOf: "+g+" } ",e.opts.messages!==!1&&(o+=" , message: 'should be multiple of ",h?o+="' + "+g:o+=""+g+"'"),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var y=o;return o=A.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+y+"]); ":o+=" validate.errors = ["+y+"]; return false; ":o+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate_multipleOf")});var sEt=$((FFo,oEt)=>{"use strict";f();oEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="errs__"+s,g=e.util.copy(e);g.level++;var A="valid"+g.level;if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){g.schema=l,g.schemaPath=u,g.errSchemaPath=d,o+=" var "+h+" = errors;  ";var y=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.createErrors=!1;var v;g.opts.allErrors&&(v=g.opts.allErrors,g.opts.allErrors=!1),o+=" "+e.validate(g)+" ",g.createErrors=!0,v&&(g.opts.allErrors=v),e.compositeRule=g.compositeRule=y,o+=" if ("+A+") {   ";var b=b||[];b.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'should NOT be valid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var I=o;o=b.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+I+"]); ":o+=" validate.errors = ["+I+"]; return false; ":o+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(o+=" } ")}else o+="  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(o+=" , message: 'should NOT be valid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(o+=" if (false) { ");return o},"generate_not")});var cEt=$((UFo,aEt)=>{"use strict";f();aEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g="errs__"+s,A=e.util.copy(e),y="";A.level++;var v="valid"+A.level,b=A.baseId,I="prevValid"+s,S="passingSchemas"+s;o+="var "+g+" = errors , "+I+" = false , "+h+" = false , "+S+" = null; ";var k=e.compositeRule;e.compositeRule=A.compositeRule=!0;var N=l;if(N)for(var F,O=-1,Y=N.length-1;O<Y;)F=N[O+=1],(e.opts.strictKeywords?typeof F=="object"&&Object.keys(F).length>0||F===!1:e.util.schemaHasRules(F,e.RULES.all))?(A.schema=F,A.schemaPath=u+"["+O+"]",A.errSchemaPath=d+"/"+O,o+="  "+e.validate(A)+" ",A.baseId=b):o+=" var "+v+" = true; ",O&&(o+=" if ("+v+" && "+I+") { "+h+" = false; "+S+" = ["+S+", "+O+"]; } else { ",y+="}"),o+=" if ("+v+") { "+h+" = "+I+" = true; "+S+" = "+O+"; }";return e.compositeRule=A.compositeRule=k,o+=""+y+"if (!"+h+") {   var err =   ",e.createErrors!==!1?(o+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { passingSchemas: "+S+" } ",e.opts.messages!==!1&&(o+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),o+="} else {  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; }",e.opts.allErrors&&(o+=" } "),o},"generate_oneOf")});var uEt=$(($Fo,lEt)=>{"use strict";f();lEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h=e.opts.$data&&l&&l.$data,g;h?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",g="schema"+s):g=l;var A=h?"(new RegExp("+g+"))":e.usePattern(l);o+="if ( ",h&&(o+=" ("+g+" !== undefined && typeof "+g+" != 'string') || "),o+=" !"+A+".test("+m+") ) {   ";var y=y||[];y.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { pattern:  ",h?o+=""+g:o+=""+e.util.toQuotedString(l),o+="  } ",e.opts.messages!==!1&&(o+=` , message: 'should match pattern "`,h?o+="' + "+g+" + '":o+=""+e.util.escapeQuotes(l),o+=`"' `),e.opts.verbose&&(o+=" , schema:  ",h?o+="validate.schema"+u:o+=""+e.util.toQuotedString(l),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var v=o;return o=y.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o},"generate_pattern")});var fEt=$((GFo,dEt)=>{"use strict";f();dEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="errs__"+s,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,v="key"+s,b="idx"+s,I=g.dataLevel=e.dataLevel+1,S="data"+I,k="dataProperties"+s,N=Object.keys(l||{}).filter(ie),F=e.schema.patternProperties||{},O=Object.keys(F).filter(ie),Y=e.schema.additionalProperties,z=N.length||O.length,V=Y===!1,U=typeof Y=="object"&&Object.keys(Y).length,H=e.opts.removeAdditional,ee=V||U||H,J=e.opts.ownProperties,G=e.baseId,j=e.schema.required;if(j&&!(e.opts.$data&&j.$data)&&j.length<e.opts.loopRequired)var Z=e.util.toHash(j);function ie(Mr){return Mr!=="__proto__"}if(a(ie,"notProto"),o+="var "+h+" = errors;var "+y+" = true;",J&&(o+=" var "+k+" = undefined;"),ee){if(J?o+=" "+k+" = "+k+" || Object.keys("+m+"); for (var "+b+"=0; "+b+"<"+k+".length; "+b+"++) { var "+v+" = "+k+"["+b+"]; ":o+=" for (var "+v+" in "+m+") { ",z){if(o+=" var isAdditional"+s+" = !(false ",N.length)if(N.length>8)o+=" || validate.schema"+u+".hasOwnProperty("+v+") ";else{var ne=N;if(ne)for(var re,fe=-1,ye=ne.length-1;fe<ye;)re=ne[fe+=1],o+=" || "+v+" == "+e.util.toQuotedString(re)+" "}if(O.length){var Qe=O;if(Qe)for(var we,Xe=-1,Oe=Qe.length-1;Xe<Oe;)we=Qe[Xe+=1],o+=" || "+e.usePattern(we)+".test("+v+") "}o+=" ); if (isAdditional"+s+") { "}if(H=="all")o+=" delete "+m+"["+v+"]; ";else{var ut=e.errorPath,Rt="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),V)if(H)o+=" delete "+m+"["+v+"]; ";else{o+=" "+y+" = false; ";var Et=d;d=e.errSchemaPath+"/additionalProperties";var At=At||[];At.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { additionalProperty: '"+Rt+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is an invalid additional property":o+="should NOT have additional properties",o+="' "),e.opts.verbose&&(o+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var de=o;o=At.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+de+"]); ":o+=" validate.errors = ["+de+"]; return false; ":o+=" var err = "+de+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=Et,p&&(o+=" break; ")}else if(U)if(H=="failing"){o+=" var "+h+" = errors;  ";var qe=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.schema=Y,g.schemaPath=e.schemaPath+".additionalProperties",g.errSchemaPath=e.errSchemaPath+"/additionalProperties",g.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var Ce=m+"["+v+"]";g.dataPathArr[I]=v;var We=e.validate(g);g.baseId=G,e.util.varOccurences(We,S)<2?o+=" "+e.util.varReplace(We,S,Ce)+" ":o+=" var "+S+" = "+Ce+"; "+We+" ",o+=" if (!"+y+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+v+"]; }  ",e.compositeRule=g.compositeRule=qe}else{g.schema=Y,g.schemaPath=e.schemaPath+".additionalProperties",g.errSchemaPath=e.errSchemaPath+"/additionalProperties",g.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var Ce=m+"["+v+"]";g.dataPathArr[I]=v;var We=e.validate(g);g.baseId=G,e.util.varOccurences(We,S)<2?o+=" "+e.util.varReplace(We,S,Ce)+" ":o+=" var "+S+" = "+Ce+"; "+We+" ",p&&(o+=" if (!"+y+") break; ")}e.errorPath=ut}z&&(o+=" } "),o+=" }  ",p&&(o+=" if ("+y+") { ",A+="}")}var ce=e.opts.useDefaults&&!e.compositeRule;if(N.length){var ue=N;if(ue)for(var re,He=-1,Me=ue.length-1;He<Me;){re=ue[He+=1];var be=l[re];if(e.opts.strictKeywords?typeof be=="object"&&Object.keys(be).length>0||be===!1:e.util.schemaHasRules(be,e.RULES.all)){var Ge=e.util.getProperty(re),Ce=m+Ge,rt=ce&&be.default!==void 0;g.schema=be,g.schemaPath=u+Ge,g.errSchemaPath=d+"/"+e.util.escapeFragment(re),g.errorPath=e.util.getPath(e.errorPath,re,e.opts.jsonPointers),g.dataPathArr[I]=e.util.toQuotedString(re);var We=e.validate(g);if(g.baseId=G,e.util.varOccurences(We,S)<2){We=e.util.varReplace(We,S,Ce);var ht=Ce}else{var ht=S;o+=" var "+S+" = "+Ce+"; "}if(rt)o+=" "+We+" ";else{if(Z&&Z[re]){o+=" if ( "+ht+" === undefined ",J&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(re)+"') "),o+=") { "+y+" = false; ";var ut=e.errorPath,Et=d,Ot=e.util.escapeQuotes(re);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(ut,re,e.opts.jsonPointers)),d=e.errSchemaPath+"/required";var At=At||[];At.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+Ot+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+Ot+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var de=o;o=At.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+de+"]); ":o+=" validate.errors = ["+de+"]; return false; ":o+=" var err = "+de+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=Et,e.errorPath=ut,o+=" } else { "}else p?(o+=" if ( "+ht+" === undefined ",J&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(re)+"') "),o+=") { "+y+" = true; } else { "):(o+=" if ("+ht+" !== undefined ",J&&(o+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(re)+"') "),o+=" ) { ");o+=" "+We+" } "}}p&&(o+=" if ("+y+") { ",A+="}")}}if(O.length){var Xt=O;if(Xt)for(var we,Ut=-1,Kr=Xt.length-1;Ut<Kr;){we=Xt[Ut+=1];var be=F[we];if(e.opts.strictKeywords?typeof be=="object"&&Object.keys(be).length>0||be===!1:e.util.schemaHasRules(be,e.RULES.all)){g.schema=be,g.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(we),g.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(we),J?o+=" "+k+" = "+k+" || Object.keys("+m+"); for (var "+b+"=0; "+b+"<"+k+".length; "+b+"++) { var "+v+" = "+k+"["+b+"]; ":o+=" for (var "+v+" in "+m+") { ",o+=" if ("+e.usePattern(we)+".test("+v+")) { ",g.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var Ce=m+"["+v+"]";g.dataPathArr[I]=v;var We=e.validate(g);g.baseId=G,e.util.varOccurences(We,S)<2?o+=" "+e.util.varReplace(We,S,Ce)+" ":o+=" var "+S+" = "+Ce+"; "+We+" ",p&&(o+=" if (!"+y+") break; "),o+=" } ",p&&(o+=" else "+y+" = true; "),o+=" }  ",p&&(o+=" if ("+y+") { ",A+="}")}}}return p&&(o+=" "+A+" if ("+h+" == errors) {"),o},"generate_properties")});var mEt=$((KFo,pEt)=>{"use strict";f();pEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="errs__"+s,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level;if(o+="var "+h+" = errors;",e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){g.schema=l,g.schemaPath=u,g.errSchemaPath=d;var v="key"+s,b="idx"+s,I="i"+s,S="' + "+v+" + '",k=g.dataLevel=e.dataLevel+1,N="data"+k,F="dataProperties"+s,O=e.opts.ownProperties,Y=e.baseId;O&&(o+=" var "+F+" = undefined; "),O?o+=" "+F+" = "+F+" || Object.keys("+m+"); for (var "+b+"=0; "+b+"<"+F+".length; "+b+"++) { var "+v+" = "+F+"["+b+"]; ":o+=" for (var "+v+" in "+m+") { ",o+=" var startErrs"+s+" = errors; ";var z=v,V=e.compositeRule;e.compositeRule=g.compositeRule=!0;var U=e.validate(g);g.baseId=Y,e.util.varOccurences(U,N)<2?o+=" "+e.util.varReplace(U,N,z)+" ":o+=" var "+N+" = "+z+"; "+U+" ",e.compositeRule=g.compositeRule=V,o+=" if (!"+y+") { for (var "+I+"=startErrs"+s+"; "+I+"<errors; "+I+"++) { vErrors["+I+"].propertyName = "+v+"; }   var err =   ",e.createErrors!==!1?(o+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { propertyName: '"+S+"' } ",e.opts.messages!==!1&&(o+=" , message: 'property name \\'"+S+"\\' is invalid' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; "),p&&(o+=" break; "),o+=" } }"}return p&&(o+=" "+A+" if ("+h+" == errors) {"),o},"generate_propertyNames")});var gEt=$((XFo,hEt)=>{"use strict";f();hEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g=e.opts.$data&&l&&l.$data,A;g?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",A="schema"+s):A=l;var y="schema"+s;if(!g)if(l.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var v=[],b=l;if(b)for(var I,S=-1,k=b.length-1;S<k;){I=b[S+=1];var N=e.schema.properties[I];N&&(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))||(v[v.length]=I)}}else var v=l;if(g||v.length){var F=e.errorPath,O=g||v.length>=e.opts.loopRequired,Y=e.opts.ownProperties;if(p)if(o+=" var missing"+s+"; ",O){g||(o+=" var "+y+" = validate.schema"+u+"; ");var z="i"+s,V="schema"+s+"["+z+"]",U="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(F,V,e.opts.jsonPointers)),o+=" var "+h+" = true; ",g&&(o+=" if (schema"+s+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+s+")) "+h+" = false; else {"),o+=" for (var "+z+" = 0; "+z+" < "+y+".length; "+z+"++) { "+h+" = "+m+"["+y+"["+z+"]] !== undefined ",Y&&(o+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+y+"["+z+"]) "),o+="; if (!"+h+") break; } ",g&&(o+="  }  "),o+="  if (!"+h+") {   ";var H=H||[];H.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var ee=o;o=H.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+ee+"]); ":o+=" validate.errors = ["+ee+"]; return false; ":o+=" var err = "+ee+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { "}else{o+=" if ( ";var J=v;if(J)for(var G,z=-1,j=J.length-1;z<j;){G=J[z+=1],z&&(o+=" || ");var Z=e.util.getProperty(G),ie=m+Z;o+=" ( ( "+ie+" === undefined ",Y&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(G)+"') "),o+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?G:Z)+") ) "}o+=") {  ";var V="missing"+s,U="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(F,V,!0):F+" + "+V);var H=H||[];H.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var ee=o;o=H.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+ee+"]); ":o+=" validate.errors = ["+ee+"]; return false; ":o+=" var err = "+ee+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { "}else if(O){g||(o+=" var "+y+" = validate.schema"+u+"; ");var z="i"+s,V="schema"+s+"["+z+"]",U="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(F,V,e.opts.jsonPointers)),g&&(o+=" if ("+y+" && !Array.isArray("+y+")) {  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+y+" !== undefined) { "),o+=" for (var "+z+" = 0; "+z+" < "+y+".length; "+z+"++) { if ("+m+"["+y+"["+z+"]] === undefined ",Y&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+y+"["+z+"]) "),o+=") {  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",g&&(o+="  }  ")}else{var ne=v;if(ne)for(var G,re=-1,fe=ne.length-1;re<fe;){G=ne[re+=1];var Z=e.util.getProperty(G),U=e.util.escapeQuotes(G),ie=m+Z;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(F,G,e.opts.jsonPointers)),o+=" if ( "+ie+" === undefined ",Y&&(o+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(G)+"') "),o+=") {  var err =   ",e.createErrors!==!1?(o+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+U+"' } ",e.opts.messages!==!1&&(o+=" , message: '",e.opts._errorDataPathProperty?o+="is a required property":o+="should have required property \\'"+U+"\\'",o+="' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=F}else p&&(o+=" if (true) {");return o},"generate_required")});var yEt=$((t6o,AEt)=>{"use strict";f();AEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(c||""),h="valid"+s,g=e.opts.$data&&l&&l.$data,A;if(g?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",A="schema"+s):A=l,(l||g)&&e.opts.uniqueItems!==!1){g&&(o+=" var "+h+"; if ("+A+" === false || "+A+" === undefined) "+h+" = true; else if (typeof "+A+" != 'boolean') "+h+" = false; else { "),o+=" var i = "+m+".length , "+h+" = true , j; if (i > 1) { ";var y=e.schema.items&&e.schema.items.type,v=Array.isArray(y);if(!y||y=="object"||y=="array"||v&&(y.indexOf("object")>=0||y.indexOf("array")>=0))o+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+h+" = false; break outer; } } } ";else{o+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var b="checkDataType"+(v?"s":"");o+=" if ("+e.util[b](y,"item",e.opts.strictNumbers,!0)+") continue; ",v&&(o+=` if (typeof item == 'string') item = '"' + item; `),o+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}o+=" } ",g&&(o+="  }  "),o+=" if (!"+h+") {   ";var I=I||[];I.push(o),o="",e.createErrors!==!1?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",g?o+="validate.schema"+u:o+=""+l,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var S=o;o=I.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+S+"]); ":o+=" validate.errors = ["+S+"]; return false; ":o+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { ")}else p&&(o+=" if (true) { ");return o},"generate_uniqueItems")});var vEt=$((i6o,CEt)=>{"use strict";f();CEt.exports={$ref:Dxt(),allOf:Nxt(),anyOf:Lxt(),$comment:Oxt(),const:Uxt(),contains:Hxt(),dependencies:Wxt(),enum:Gxt(),format:zxt(),if:Yxt(),items:Xxt(),maximum:c4e(),minimum:c4e(),maxItems:l4e(),minItems:l4e(),maxLength:u4e(),minLength:u4e(),maxProperties:d4e(),minProperties:d4e(),multipleOf:iEt(),not:sEt(),oneOf:cEt(),pattern:uEt(),properties:fEt(),propertyNames:mEt(),required:gEt(),uniqueItems:yEt(),validate:s4e()}});var bEt=$((s6o,EEt)=>{"use strict";f();var xEt=vEt(),f4e=c5().toHash;EEt.exports=a(function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],o=["number","integer","string","array","object","boolean","null"];return e.all=f4e(r),e.types=f4e(o),e.forEach(function(s){s.rules=s.rules.map(function(c){var l;if(typeof c=="object"){var u=Object.keys(c)[0];l=c[u],c=u,l.forEach(function(p){r.push(p),e.all[p]=!0})}r.push(c);var d=e.all[c]={keyword:c,code:xEt[c],implements:l};return d}),e.all.$comment={keyword:"$comment",code:xEt.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=f4e(r.concat(n)),e.custom={},e},"rules")});var wEt=$((l6o,TEt)=>{"use strict";f();var IEt=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];TEt.exports=function(t,e){for(var r=0;r<e.length;r++){t=JSON.parse(JSON.stringify(t));var n=e[r].split("/"),o=t,s;for(s=1;s<n.length;s++)o=o[n[s]];for(s=0;s<IEt.length;s++){var c=IEt[s],l=o[c];l&&(o[c]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}});var REt=$((d6o,SEt)=>{"use strict";f();var $kr=gue().MissingRef;SEt.exports=_Et;function _Et(t,e,r){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var o=s(t).then(function(){var l=n._addSchema(t,void 0,e);return l.validate||c(l)});return r&&o.then(function(l){r(null,l)},r),o;function s(l){var u=l.$schema;return u&&!n.getSchema(u)?_Et.call(n,{$ref:u},!0):Promise.resolve()}a(s,"loadMetaSchemaOf");function c(l){try{return n._compile(l)}catch(d){if(d instanceof $kr)return u(d);throw d}function u(d){var p=d.missingSchema;if(g(p))throw new Error("Schema "+p+" is loaded but "+d.missingRef+" cannot be resolved");var m=n._loadingSchemas[p];return m||(m=n._loadingSchemas[p]=n._opts.loadSchema(p),m.then(h,h)),m.then(function(A){if(!g(p))return s(A).then(function(){g(p)||n.addSchema(A,p,void 0,e)})}).then(function(){return c(l)});function h(){delete n._loadingSchemas[p]}a(h,"removePromise");function g(A){return n._refs[A]||n._schemas[A]}a(g,"added")}a(u,"loadMissingSchema")}a(c,"_compileAsync")}a(_Et,"compileAsync")});var PEt=$((m6o,kEt)=>{"use strict";f();kEt.exports=a(function(e,r,n){var o=" ",s=e.level,c=e.dataLevel,l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m,h="data"+(c||""),g="valid"+s,A="errs__"+s,y=e.opts.$data&&l&&l.$data,v;y?(o+=" var schema"+s+" = "+e.util.getData(l.$data,c,e.dataPathArr)+"; ",v="schema"+s):v=l;var b=this,I="definition"+s,S=b.definition,k="",N,F,O,Y,z;if(y&&S.$data){z="keywordValidate"+s;var V=S.validateSchema;o+=" var "+I+" = RULES.custom['"+r+"'].definition; var "+z+" = "+I+".validate;"}else{if(Y=e.useCustomRule(b,l,e.schema,e),!Y)return;v="validate.schema"+u,z=Y.code,N=S.compile,F=S.inline,O=S.macro}var U=z+".errors",H="i"+s,ee="ruleErr"+s,J=S.async;if(J&&!e.async)throw new Error("async keyword in sync schema");if(F||O||(o+=""+U+" = null;"),o+="var "+A+" = errors;var "+g+";",y&&S.$data&&(k+="}",o+=" if ("+v+" === undefined) { "+g+" = true; } else { ",V&&(k+="}",o+=" "+g+" = "+I+".validateSchema("+v+"); if ("+g+") { ")),F)S.statements?o+=" "+Y.validate+" ":o+=" "+g+" = "+Y.validate+"; ";else if(O){var G=e.util.copy(e),k="";G.level++;var j="valid"+G.level;G.schema=Y.validate,G.schemaPath="";var Z=e.compositeRule;e.compositeRule=G.compositeRule=!0;var ie=e.validate(G).replace(/validate\.schema/g,z);e.compositeRule=G.compositeRule=Z,o+=" "+ie}else{var ne=ne||[];ne.push(o),o="",o+="  "+z+".call( ",e.opts.passContext?o+="this":o+="self",N||S.schema===!1?o+=" , "+h+" ":o+=" , "+v+" , "+h+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",e.errorPath!='""'&&(o+=" + "+e.errorPath);var re=c?"data"+(c-1||""):"parentData",fe=c?e.dataPathArr[c]:"parentDataProperty";o+=" , "+re+" , "+fe+" , rootData )  ";var ye=o;o=ne.pop(),S.errors===!1?(o+=" "+g+" = ",J&&(o+="await "),o+=""+ye+"; "):J?(U="customErrors"+s,o+=" var "+U+" = null; try { "+g+" = await "+ye+"; } catch (e) { "+g+" = false; if (e instanceof ValidationError) "+U+" = e.errors; else throw e; } "):o+=" "+U+" = null; "+g+" = "+ye+"; "}if(S.modifying&&(o+=" if ("+re+") "+h+" = "+re+"["+fe+"];"),o+=""+k,S.valid)p&&(o+=" if (true) { ");else{o+=" if ( ",S.valid===void 0?(o+=" !",O?o+=""+j:o+=""+g):o+=" "+!S.valid+" ",o+=") { ",m=b.keyword;var ne=ne||[];ne.push(o),o="";var ne=ne||[];ne.push(o),o="",e.createErrors!==!1?(o+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+b.keyword+"' } ",e.opts.messages!==!1&&(o+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var Qe=o;o=ne.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+Qe+"]); ":o+=" validate.errors = ["+Qe+"]; return false; ":o+=" var err = "+Qe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var we=o;o=ne.pop(),F?S.errors?S.errors!="full"&&(o+="  for (var "+H+"="+A+"; "+H+"<errors; "+H+"++) { var "+ee+" = vErrors["+H+"]; if ("+ee+".dataPath === undefined) "+ee+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+ee+".schemaPath === undefined) { "+ee+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(o+=" "+ee+".schema = "+v+"; "+ee+".data = "+h+"; "),o+=" } "):S.errors===!1?o+=" "+we+" ":(o+=" if ("+A+" == errors) { "+we+" } else {  for (var "+H+"="+A+"; "+H+"<errors; "+H+"++) { var "+ee+" = vErrors["+H+"]; if ("+ee+".dataPath === undefined) "+ee+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+ee+".schemaPath === undefined) { "+ee+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(o+=" "+ee+".schema = "+v+"; "+ee+".data = "+h+"; "),o+=" } } "):O?(o+="   var err =   ",e.createErrors!==!1?(o+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+b.keyword+"' } ",e.opts.messages!==!1&&(o+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):S.errors===!1?o+=" "+we+" ":(o+=" if (Array.isArray("+U+")) { if (vErrors === null) vErrors = "+U+"; else vErrors = vErrors.concat("+U+"); errors = vErrors.length;  for (var "+H+"="+A+"; "+H+"<errors; "+H+"++) { var "+ee+" = vErrors["+H+"]; if ("+ee+".dataPath === undefined) "+ee+".dataPath = (dataPath || '') + "+e.errorPath+";  "+ee+'.schemaPath = "'+d+'";  ',e.opts.verbose&&(o+=" "+ee+".schema = "+v+"; "+ee+".data = "+h+"; "),o+=" } } else { "+we+" } "),o+=" } ",p&&(o+=" else { ")}return o},"generate_custom")});var p4e=$((A6o,Wkr)=>{Wkr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var NEt=$((y6o,BEt)=>{"use strict";f();var DEt=p4e();BEt.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:DEt.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:DEt.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var LEt=$((v6o,MEt)=>{"use strict";f();var jkr=/^[a-z_$][a-z0-9_$-]*$/i,Gkr=PEt(),Vkr=NEt();MEt.exports={add:zkr,get:Kkr,remove:Ykr,validate:m4e};function zkr(t,e){var r=this.RULES;if(r.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!jkr.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var o=0;o<n.length;o++)c(t,n[o],e);else c(t,n,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}r.keywords[t]=r.all[t]=!0;function c(l,u,d){for(var p,m=0;m<r.length;m++){var h=r[m];if(h.type==u){p=h;break}}p||(p={type:u,rules:[]},r.push(p));var g={keyword:l,definition:d,custom:!0,code:Gkr,implements:d.implements};p.rules.push(g),r.custom[l]=g}return a(c,"_addRule"),this}a(zkr,"addKeyword");function Kkr(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1}a(Kkr,"getKeyword");function Ykr(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var r=0;r<e.length;r++)for(var n=e[r].rules,o=0;o<n.length;o++)if(n[o].keyword==t){n.splice(o,1);break}return this}a(Ykr,"removeKeyword");function m4e(t,e){m4e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(Vkr,!0);if(r(t))return!0;if(m4e.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}a(m4e,"validateKeyword")});var FEt=$((b6o,Jkr)=>{Jkr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var VEt=$((I6o,GEt)=>{"use strict";f();var QEt=gxt(),l5=hue(),Xkr=yxt(),UEt=Z5e(),Zkr=o4e(),ePr=kxt(),tPr=bEt(),qEt=wEt(),HEt=c5();GEt.exports=Ic;Ic.prototype.validate=nPr;Ic.prototype.compile=iPr;Ic.prototype.addSchema=oPr;Ic.prototype.addMetaSchema=sPr;Ic.prototype.validateSchema=aPr;Ic.prototype.getSchema=lPr;Ic.prototype.removeSchema=dPr;Ic.prototype.addFormat=CPr;Ic.prototype.errorsText=yPr;Ic.prototype._addSchema=fPr;Ic.prototype._compile=pPr;Ic.prototype.compileAsync=REt();var Iue=LEt();Ic.prototype.addKeyword=Iue.add;Ic.prototype.getKeyword=Iue.get;Ic.prototype.removeKeyword=Iue.remove;Ic.prototype.validateKeyword=Iue.validate;var $Et=gue();Ic.ValidationError=$Et.Validation;Ic.MissingRefError=$Et.MissingRef;Ic.$dataMetaSchema=qEt;var bue="http://json-schema.org/draft-07/schema",OEt=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],rPr=["/properties"];function Ic(t){if(!(this instanceof Ic))return new Ic(t);t=this._opts=HEt.copy(t)||{},TPr(this),this._schemas={},this._refs={},this._fragments={},this._formats=ePr(t.format),this._cache=t.cache||new Xkr,this._loadingSchemas={},this._compilations=[],this.RULES=tPr(),this._getId=mPr(t),t.loopRequired=t.loopRequired||1/0,t.errorDataPath=="property"&&(t._errorDataPathProperty=!0),t.serialize===void 0&&(t.serialize=Zkr),this._metaOpts=IPr(this),t.formats&&EPr(this),t.keywords&&bPr(this),vPr(this),typeof t.meta=="object"&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),xPr(this)}a(Ic,"Ajv");function nPr(t,e){var r;if(typeof t=="string"){if(r=this.getSchema(t),!r)throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);r=n.validate||this._compile(n)}var o=r(e);return r.$async!==!0&&(this.errors=r.errors),o}a(nPr,"validate");function iPr(t,e){var r=this._addSchema(t,void 0,e);return r.validate||this._compile(r)}a(iPr,"compile");function oPr(t,e,r,n){if(Array.isArray(t)){for(var o=0;o<t.length;o++)this.addSchema(t[o],void 0,r,n);return this}var s=this._getId(t);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=l5.normalizeId(e||s),jEt(this,e),this._schemas[e]=this._addSchema(t,r,n,!0),this}a(oPr,"addSchema");function sPr(t,e,r){return this.addSchema(t,e,r,!0),this}a(sPr,"addMetaSchema");function aPr(t,e){var r=t.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||cPr(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,t);if(!n&&e){var o="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(o);else throw new Error(o)}return n}a(aPr,"validateSchema");function cPr(t){var e=t._opts.meta;return t._opts.defaultMeta=typeof e=="object"?t._getId(e)||e:t.getSchema(bue)?bue:void 0,t._opts.defaultMeta}a(cPr,"defaultMeta");function lPr(t){var e=WEt(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return uPr(this,t)}}a(lPr,"getSchema");function uPr(t,e){var r=l5.schema.call(t,{schema:{}},e);if(r){var n=r.schema,o=r.root,s=r.baseId,c=QEt.call(t,n,o,void 0,s);return t._fragments[e]=new UEt({ref:e,fragment:!0,schema:n,root:o,baseId:s,validate:c}),c}}a(uPr,"_getSchemaFragment");function WEt(t,e){return e=l5.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}a(WEt,"_getSchemaObj");function dPr(t){if(t instanceof RegExp)return Eue(this,this._schemas,t),Eue(this,this._refs,t),this;switch(typeof t){case"undefined":return Eue(this,this._schemas),Eue(this,this._refs),this._cache.clear(),this;case"string":var e=WEt(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var r=this._opts.serialize,n=r?r(t):t;this._cache.del(n);var o=this._getId(t);o&&(o=l5.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this}a(dPr,"removeSchema");function Eue(t,e,r){for(var n in e){var o=e[n];!o.meta&&(!r||r.test(n))&&(t._cache.del(o.cacheKey),delete e[n])}}a(Eue,"_removeAllSchemas");function fPr(t,e,r,n){if(typeof t!="object"&&typeof t!="boolean")throw new Error("schema should be object or boolean");var o=this._opts.serialize,s=o?o(t):t,c=this._cache.get(s);if(c)return c;n=n||this._opts.addUsedSchema!==!1;var l=l5.normalizeId(this._getId(t));l&&n&&jEt(this,l);var u=this._opts.validateSchema!==!1&&!e,d;u&&!(d=l&&l==l5.normalizeId(t.$schema))&&this.validateSchema(t,!0);var p=l5.ids.call(this,t),m=new UEt({id:l,schema:t,localRefs:p,cacheKey:s,meta:r});return l[0]!="#"&&n&&(this._refs[l]=m),this._cache.put(s,m),u&&d&&this.validateSchema(t,!0),m}a(fPr,"_addSchema");function pPr(t,e){if(t.compiling)return t.validate=o,o.schema=t.schema,o.errors=null,o.root=e||o,t.schema.$async===!0&&(o.$async=!0),o;t.compiling=!0;var r;t.meta&&(r=this._opts,this._opts=this._metaOpts);var n;try{n=QEt.call(this,t.schema,e,t.localRefs)}catch(s){throw delete t.validate,s}finally{t.compiling=!1,t.meta&&(this._opts=r)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function o(){var s=t.validate,c=s.apply(this,arguments);return o.errors=s.errors,c}a(o,"callValidate")}a(pPr,"_compile");function mPr(t){switch(t.schemaId){case"auto":return APr;case"id":return hPr;default:return gPr}}a(mPr,"chooseGetId");function hPr(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}a(hPr,"_getId");function gPr(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}a(gPr,"_get$Id");function APr(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}a(APr,"_get$IdOrId");function yPr(t,e){if(t=t||this.errors,!t)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,o="",s=0;s<t.length;s++){var c=t[s];c&&(o+=n+c.dataPath+" "+c.message+r)}return o.slice(0,-r.length)}a(yPr,"errorsText");function CPr(t,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[t]=e,this}a(CPr,"addFormat");function vPr(t){var e;if(t._opts.$data&&(e=FEt(),t.addMetaSchema(e,e.$id,!0)),t._opts.meta!==!1){var r=p4e();t._opts.$data&&(r=qEt(r,rPr)),t.addMetaSchema(r,bue,!0),t._refs["http://json-schema.org/schema"]=bue}}a(vPr,"addDefaultMetaSchema");function xPr(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var r in e)t.addSchema(e[r],r)}a(xPr,"addInitialSchemas");function EPr(t){for(var e in t._opts.formats){var r=t._opts.formats[e];t.addFormat(e,r)}}a(EPr,"addInitialFormats");function bPr(t){for(var e in t._opts.keywords){var r=t._opts.keywords[e];t.addKeyword(e,r)}}a(bPr,"addInitialKeywords");function jEt(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}a(jEt,"checkUnique");function IPr(t){for(var e=HEt.copy(t._opts),r=0;r<OEt.length;r++)delete e[OEt[r]];return e}a(IPr,"getMetaSchemaOptions");function TPr(t){var e=t._opts.logger;if(e===!1)t.logger={log:h4e,warn:h4e,error:h4e};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}a(TPr,"setLogger");function h4e(){}a(h4e,"noop")});var pbt=$((G9o,fbt)=>{f();fbt.exports=dbt;dbt.sync=XPr;var lbt=require("fs");function JPr(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&t.substr(-o.length).toLowerCase()===o)return!0}return!1}a(JPr,"checkPathExt");function ubt(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:JPr(e,r)}a(ubt,"checkStat");function dbt(t,e,r){lbt.stat(t,function(n,o){r(n,n?!1:ubt(o,t,e))})}a(dbt,"isexe");function XPr(t,e){return ubt(lbt.statSync(t),t,e)}a(XPr,"sync")});var ybt=$((K9o,Abt)=>{f();Abt.exports=hbt;hbt.sync=ZPr;var mbt=require("fs");function hbt(t,e,r){mbt.stat(t,function(n,o){r(n,n?!1:gbt(o,e))})}a(hbt,"isexe");function ZPr(t,e){return gbt(mbt.statSync(t),e)}a(ZPr,"sync");function gbt(t,e){return t.isFile()&&e5r(t,e)}a(gbt,"checkStat");function e5r(t,e){var r=t.mode,n=t.uid,o=t.gid,s=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),c=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),u=parseInt("010",8),d=parseInt("001",8),p=l|u,m=r&d||r&u&&o===c||r&l&&n===s||r&p&&s===0;return m}a(e5r,"checkMode")});var vbt=$((Z9o,Cbt)=>{f();var X9o=require("fs"),Nue;process.platform==="win32"||global.TESTING_WINDOWS?Nue=pbt():Nue=ybt();Cbt.exports=N4e;N4e.sync=t5r;function N4e(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){N4e(t,e||{},function(s,c){s?o(s):n(c)})})}Nue(t,e||{},function(n,o){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,o=!1),r(n,o)})}a(N4e,"isexe");function t5r(t,e){try{return Nue.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}a(t5r,"sync")});var _bt=$((rOo,wbt)=>{f();var uL=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",xbt=require("path"),r5r=uL?";":":",Ebt=vbt(),bbt=a(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),Ibt=a((t,e)=>{let r=e.colon||r5r,n=t.match(/\//)||uL&&t.match(/\\/)?[""]:[...uL?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],o=uL?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=uL?o.split(r):[""];return uL&&t.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:n,pathExt:s,pathExtExe:o}},"getPathInfo"),Tbt=a((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:o,pathExtExe:s}=Ibt(t,e),c=[],l=a(d=>new Promise((p,m)=>{if(d===n.length)return e.all&&c.length?p(c):m(bbt(t));let h=n[d],g=/^".*"$/.test(h)?h.slice(1,-1):h,A=xbt.join(g,t),y=!g&&/^\.[\\\/]/.test(t)?t.slice(0,2)+A:A;p(u(y,d,0))}),"step"),u=a((d,p,m)=>new Promise((h,g)=>{if(m===o.length)return h(l(p+1));let A=o[m];Ebt(d+A,{pathExt:s},(y,v)=>{if(!y&&v)if(e.all)c.push(d+A);else return h(d+A);return h(u(d,p,m+1))})}),"subStep");return r?l(0).then(d=>r(null,d),r):l(0)},"which"),n5r=a((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=Ibt(t,e),s=[];for(let c=0;c<r.length;c++){let l=r[c],u=/^".*"$/.test(l)?l.slice(1,-1):l,d=xbt.join(u,t),p=!u&&/^\.[\\\/]/.test(t)?t.slice(0,2)+d:d;for(let m=0;m<n.length;m++){let h=p+n[m];try{if(Ebt.sync(h,{pathExt:o}))if(e.all)s.push(h);else return h}catch{}}}if(e.all&&s.length)return s;if(e.nothrow)return null;throw bbt(t)},"whichSync");wbt.exports=Tbt;Tbt.sync=n5r});var Rbt=$((oOo,M4e)=>{"use strict";f();var Sbt=a((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");M4e.exports=Sbt;M4e.exports.default=Sbt});var Bbt=$((cOo,Dbt)=>{"use strict";f();var kbt=require("path"),i5r=_bt(),o5r=Rbt();function Pbt(t,e){let r=t.options.env||process.env,n=process.cwd(),o=t.options.cwd!=null,s=o&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(t.options.cwd)}catch{}let c;try{c=i5r.sync(t.command,{path:r[o5r({env:r})],pathExt:e?kbt.delimiter:void 0})}catch{}finally{s&&process.chdir(n)}return c&&(c=kbt.resolve(o?t.options.cwd:"",c)),c}a(Pbt,"resolveCommandAttempt");function s5r(t){return Pbt(t)||Pbt(t,!0)}a(s5r,"resolveCommand");Dbt.exports=s5r});var Nbt=$((dOo,F4e)=>{"use strict";f();var L4e=/([()\][%!^"`<>&|;, *?])/g;function a5r(t){return t=t.replace(L4e,"^$1"),t}a(a5r,"escapeCommand");function c5r(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(L4e,"^$1"),e&&(t=t.replace(L4e,"^$1")),t}a(c5r,"escapeArgument");F4e.exports.command=a5r;F4e.exports.argument=c5r});var Lbt=$((mOo,Mbt)=>{"use strict";f();Mbt.exports=/^#!(.*)/});var Obt=$((gOo,Fbt)=>{"use strict";f();var l5r=Lbt();Fbt.exports=(t="")=>{let e=t.match(l5r);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var Ubt=$((yOo,Qbt)=>{"use strict";f();var O4e=require("fs"),u5r=Obt();function d5r(t){let r=Buffer.alloc(150),n;try{n=O4e.openSync(t,"r"),O4e.readSync(n,r,0,150,0),O4e.closeSync(n)}catch{}return u5r(r.toString())}a(d5r,"readShebang");Qbt.exports=d5r});var Wbt=$((xOo,$bt)=>{"use strict";f();var f5r=require("path"),qbt=Bbt(),Hbt=Nbt(),p5r=Ubt(),m5r=process.platform==="win32",h5r=/\.(?:com|exe)$/i,g5r=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function A5r(t){t.file=qbt(t);let e=t.file&&p5r(t.file);return e?(t.args.unshift(t.file),t.command=e,qbt(t)):t.file}a(A5r,"detectShebang");function y5r(t){if(!m5r)return t;let e=A5r(t),r=!h5r.test(e);if(t.options.forceShell||r){let n=g5r.test(e);t.command=f5r.normalize(t.command),t.command=Hbt.command(t.command),t.args=t.args.map(s=>Hbt.argument(s,n));let o=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${o}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}a(y5r,"parseNonShell");function C5r(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:y5r(n)}a(C5r,"parse");$bt.exports=C5r});var Vbt=$((IOo,Gbt)=>{"use strict";f();var Q4e=process.platform==="win32";function U4e(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}a(U4e,"notFoundError");function v5r(t,e){if(!Q4e)return;let r=t.emit;t.emit=function(n,o){if(n==="exit"){let s=jbt(o,e);if(s)return r.call(t,"error",s)}return r.apply(t,arguments)}}a(v5r,"hookChildProcess");function jbt(t,e){return Q4e&&t===1&&!e.file?U4e(e.original,"spawn"):null}a(jbt,"verifyENOENT");function x5r(t,e){return Q4e&&t===1&&!e.file?U4e(e.original,"spawnSync"):null}a(x5r,"verifyENOENTSync");Gbt.exports={hookChildProcess:v5r,verifyENOENT:jbt,verifyENOENTSync:x5r,notFoundError:U4e}});var Ybt=$((_Oo,dL)=>{"use strict";f();var zbt=require("child_process"),q4e=Wbt(),H4e=Vbt();function Kbt(t,e,r){let n=q4e(t,e,r),o=zbt.spawn(n.command,n.args,n.options);return H4e.hookChildProcess(o,n),o}a(Kbt,"spawn");function E5r(t,e,r){let n=q4e(t,e,r),o=zbt.spawnSync(n.command,n.args,n.options);return o.error=o.error||H4e.verifyENOENTSync(o.status,n),o}a(E5r,"spawnSync");dL.exports=Kbt;dL.exports.spawn=Kbt;dL.exports.sync=E5r;dL.exports._parse=q4e;dL.exports._enoent=H4e});var Q5r={};Sa(Q5r,{getTokenizer:()=>Oi,getTokenizerAsync:()=>$We,main:()=>gIt});module.exports=UTt(Q5r);f();f();BBe().install();f();f();f();var HS=(o=>(o[o.DEBUG=4]="DEBUG",o[o.INFO=3]="INFO",o[o.WARN=2]="WARN",o[o.ERROR=1]="ERROR",o))(HS||{}),el=class{static{a(this,"LogTarget")}},cC=class{static{a(this,"TelemetryLogSender")}},ft=class{constructor(e){this.category=e}static{a(this,"Logger")}log(e,r,...n){e.get(el).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(cC).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let o=n;n.startsWith(".")&&(o=n.substring(1),n=`${this.category}${n}`),e.get(cC).sendException(e,r,n);let s=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${o}:`,s)}},pn=new ft("default");f();f();f();var qF="github.copilot",NBe="github-enterprise";f();f();f();f();var jW=class{constructor(e){this.userInfo=e}static{a(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function tpe(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}a(tpe,"findKnownOrg");function MBe(t){let e=t.organization_list??[];return tpe(e)??""}a(MBe,"getUserKind");f();f();var HF=class extends Error{static{a(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function Sd(t){return!t||typeof t!="object"?!1:t instanceof HF||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}a(Sd,"isAbortError");var F4=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{a(this,"JsonParseError")}},lC=class extends Error{static{a(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},Twt=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function $F(t,e=!0){return t instanceof Error?e&&"cause"in t&&$F(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof F4||t instanceof lC||t?.message?.startsWith("net::")||Twt.has(t.code??""):!1}a($F,"isNetworkError");var yI=class{constructor(e,r,n,o,s){this.status=e;this.statusText=r;this.headers=n;this.getText=o;this.getBody=s;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{a(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new F4(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let o=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(o&&parseInt(o[2],10)==e.length||n.message==="Unexpected end of JSON input"){let s=new TextEncoder().encode(e).length,c=this.headers.get("content-length");throw c===null?new F4(`Response body truncated: actualLength=${s}`,"Truncated"):new F4(`Response body truncated: actualLength=${s}, headerLength=${c}`,"Truncated")}}throw n}}body(){return this.getBody()}};f();function GW(){return typeof process>"u"}a(GW,"isWeb");function Lv(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}a(Lv,"isMsBenchModeEnabled");function LBe(){return typeof process<"u"&&process.env.SIMULATOR_MODE==="true"}a(LBe,"isSimulatorModeEnabled");var rpe=class extends lC{static{a(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Um(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...GW()?{}:m0(t),...n.headers}};let o=await t.get(Qr).fetch(new URL(r,e.apiUrl).href,n);if(o.status>=500)throw new lC(o);if(!o.headers.get("x-github-request-id"))throw new rpe(o);return o}a(Um,"apiFetch");f();f();f();var W3e=Ne(xI());var Sr=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{a(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},$S=class extends Sr{constructor(r,n=120*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{a(this,"LRUExpirationCacheMap")}has(r){let n=!1,o=this.expiration.get(r);return o!==void 0&&(o>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,o=this.defaultTtl){if(o<=0)throw new Error("TTL must be greater than 0");let s=super.set(r,n);return this.expiration.set(r,performance.now()+o),s}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},Pj=class extends Sr{static{a(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}dispose(){this.clear()}};var sc=class{constructor(){this.recentNotifications=new Sr(100)}static{a(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showWarningMessage(r,...n)}async showInformationMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showInformationMessage(r,...n)}};f();var qm=class t{constructor(e){this.flags=e}static{a(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:G3e(r,n),verboseLogging:_wt(r,n),testMode:e,simulation:wwt(n)})}};function Xg(t){return t.get(qm).flags.testMode}a(Xg,"isRunningInTest");function O4(t){return Xg(t)}a(O4,"shouldFailForDebugPurposes");function jF(t){return t.get(qm).flags.debug}a(jF,"isDebugEnabled");function j3e(t){return t.get(qm).flags.verboseLogging}a(j3e,"isVerboseLoggingEnabled");function G3e(t,e){return t.includes("--debug")||ope(e,"DEBUG")}a(G3e,"determineDebugFlag");function wwt(t){return ope(t,"SIMULATION")}a(wwt,"determineSimulationFlag");function Dj(t){return t.get(qm).flags.simulation}a(Dj,"isRunningInSimulation");function _wt(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||ope(e,"VERBOSE")||G3e(t,e)}a(_wt,"determineVerboseLoggingEnabled");function ope(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}a(ope,"determineEnvFlagEnabled");f();var K3e=require("os"),Bj=require("path");f();var V3e;(()=>{"use strict";var t={975:U=>{function H(G){if(typeof G!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(G))}a(H,"e");function ee(G,j){for(var Z,ie="",ne=0,re=-1,fe=0,ye=0;ye<=G.length;++ye){if(ye<G.length)Z=G.charCodeAt(ye);else{if(Z===47)break;Z=47}if(Z===47){if(!(re===ye-1||fe===1))if(re!==ye-1&&fe===2){if(ie.length<2||ne!==2||ie.charCodeAt(ie.length-1)!==46||ie.charCodeAt(ie.length-2)!==46){if(ie.length>2){var Qe=ie.lastIndexOf("/");if(Qe!==ie.length-1){Qe===-1?(ie="",ne=0):ne=(ie=ie.slice(0,Qe)).length-1-ie.lastIndexOf("/"),re=ye,fe=0;continue}}else if(ie.length===2||ie.length===1){ie="",ne=0,re=ye,fe=0;continue}}j&&(ie.length>0?ie+="/..":ie="..",ne=2)}else ie.length>0?ie+="/"+G.slice(re+1,ye):ie=G.slice(re+1,ye),ne=ye-re-1;re=ye,fe=0}else Z===46&&fe!==-1?++fe:fe=-1}return ie}a(ee,"r");var J={resolve:a(function(){for(var G,j="",Z=!1,ie=arguments.length-1;ie>=-1&&!Z;ie--){var ne;ie>=0?ne=arguments[ie]:(G===void 0&&(G=process.cwd()),ne=G),H(ne),ne.length!==0&&(j=ne+"/"+j,Z=ne.charCodeAt(0)===47)}return j=ee(j,!Z),Z?j.length>0?"/"+j:"/":j.length>0?j:"."},"resolve"),normalize:a(function(G){if(H(G),G.length===0)return".";var j=G.charCodeAt(0)===47,Z=G.charCodeAt(G.length-1)===47;return(G=ee(G,!j)).length!==0||j||(G="."),G.length>0&&Z&&(G+="/"),j?"/"+G:G},"normalize"),isAbsolute:a(function(G){return H(G),G.length>0&&G.charCodeAt(0)===47},"isAbsolute"),join:a(function(){if(arguments.length===0)return".";for(var G,j=0;j<arguments.length;++j){var Z=arguments[j];H(Z),Z.length>0&&(G===void 0?G=Z:G+="/"+Z)}return G===void 0?".":J.normalize(G)},"join"),relative:a(function(G,j){if(H(G),H(j),G===j||(G=J.resolve(G))===(j=J.resolve(j)))return"";for(var Z=1;Z<G.length&&G.charCodeAt(Z)===47;++Z);for(var ie=G.length,ne=ie-Z,re=1;re<j.length&&j.charCodeAt(re)===47;++re);for(var fe=j.length-re,ye=ne<fe?ne:fe,Qe=-1,we=0;we<=ye;++we){if(we===ye){if(fe>ye){if(j.charCodeAt(re+we)===47)return j.slice(re+we+1);if(we===0)return j.slice(re+we)}else ne>ye&&(G.charCodeAt(Z+we)===47?Qe=we:we===0&&(Qe=0));break}var Xe=G.charCodeAt(Z+we);if(Xe!==j.charCodeAt(re+we))break;Xe===47&&(Qe=we)}var Oe="";for(we=Z+Qe+1;we<=ie;++we)we!==ie&&G.charCodeAt(we)!==47||(Oe.length===0?Oe+="..":Oe+="/..");return Oe.length>0?Oe+j.slice(re+Qe):(re+=Qe,j.charCodeAt(re)===47&&++re,j.slice(re))},"relative"),_makeLong:a(function(G){return G},"_makeLong"),dirname:a(function(G){if(H(G),G.length===0)return".";for(var j=G.charCodeAt(0),Z=j===47,ie=-1,ne=!0,re=G.length-1;re>=1;--re)if((j=G.charCodeAt(re))===47){if(!ne){ie=re;break}}else ne=!1;return ie===-1?Z?"/":".":Z&&ie===1?"//":G.slice(0,ie)},"dirname"),basename:a(function(G,j){if(j!==void 0&&typeof j!="string")throw new TypeError('"ext" argument must be a string');H(G);var Z,ie=0,ne=-1,re=!0;if(j!==void 0&&j.length>0&&j.length<=G.length){if(j.length===G.length&&j===G)return"";var fe=j.length-1,ye=-1;for(Z=G.length-1;Z>=0;--Z){var Qe=G.charCodeAt(Z);if(Qe===47){if(!re){ie=Z+1;break}}else ye===-1&&(re=!1,ye=Z+1),fe>=0&&(Qe===j.charCodeAt(fe)?--fe==-1&&(ne=Z):(fe=-1,ne=ye))}return ie===ne?ne=ye:ne===-1&&(ne=G.length),G.slice(ie,ne)}for(Z=G.length-1;Z>=0;--Z)if(G.charCodeAt(Z)===47){if(!re){ie=Z+1;break}}else ne===-1&&(re=!1,ne=Z+1);return ne===-1?"":G.slice(ie,ne)},"basename"),extname:a(function(G){H(G);for(var j=-1,Z=0,ie=-1,ne=!0,re=0,fe=G.length-1;fe>=0;--fe){var ye=G.charCodeAt(fe);if(ye!==47)ie===-1&&(ne=!1,ie=fe+1),ye===46?j===-1?j=fe:re!==1&&(re=1):j!==-1&&(re=-1);else if(!ne){Z=fe+1;break}}return j===-1||ie===-1||re===0||re===1&&j===ie-1&&j===Z+1?"":G.slice(j,ie)},"extname"),format:a(function(G){if(G===null||typeof G!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof G);return function(j,Z){var ie=Z.dir||Z.root,ne=Z.base||(Z.name||"")+(Z.ext||"");return ie?ie===Z.root?ie+ne:ie+"/"+ne:ne}(0,G)},"format"),parse:a(function(G){H(G);var j={root:"",dir:"",base:"",ext:"",name:""};if(G.length===0)return j;var Z,ie=G.charCodeAt(0),ne=ie===47;ne?(j.root="/",Z=1):Z=0;for(var re=-1,fe=0,ye=-1,Qe=!0,we=G.length-1,Xe=0;we>=Z;--we)if((ie=G.charCodeAt(we))!==47)ye===-1&&(Qe=!1,ye=we+1),ie===46?re===-1?re=we:Xe!==1&&(Xe=1):re!==-1&&(Xe=-1);else if(!Qe){fe=we+1;break}return re===-1||ye===-1||Xe===0||Xe===1&&re===ye-1&&re===fe+1?ye!==-1&&(j.base=j.name=fe===0&&ne?G.slice(1,ye):G.slice(fe,ye)):(fe===0&&ne?(j.name=G.slice(1,re),j.base=G.slice(1,ye)):(j.name=G.slice(fe,re),j.base=G.slice(fe,ye)),j.ext=G.slice(re,ye)),fe>0?j.dir=G.slice(0,fe-1):ne&&(j.dir="/"),j},"parse"),sep:"/",delimiter:":",win32:null,posix:null};J.posix=J,U.exports=J}},e={};function r(U){var H=e[U];if(H!==void 0)return H.exports;var ee=e[U]={exports:{}};return t[U](ee,ee.exports,r),ee.exports}a(r,"r"),r.d=(U,H)=>{for(var ee in H)r.o(H,ee)&&!r.o(U,ee)&&Object.defineProperty(U,ee,{enumerable:!0,get:H[ee]})},r.o=(U,H)=>Object.prototype.hasOwnProperty.call(U,H),r.r=U=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})};var n={};let o;r.r(n),r.d(n,{URI:a(()=>h,"URI"),Utils:a(()=>V,"Utils")}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let s=/^\w[\w\d+.-]*$/,c=/^\//,l=/^\/\//;function u(U,H){if(!U.scheme&&H)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${U.authority}", path: "${U.path}", query: "${U.query}", fragment: "${U.fragment}"}`);if(U.scheme&&!s.test(U.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(U.path){if(U.authority){if(!c.test(U.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(U.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}a(u,"a");let d="",p="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{static{a(this,"l")}static isUri(H){return H instanceof h||!!H&&typeof H.authority=="string"&&typeof H.fragment=="string"&&typeof H.path=="string"&&typeof H.query=="string"&&typeof H.scheme=="string"&&typeof H.fsPath=="string"&&typeof H.with=="function"&&typeof H.toString=="function"}scheme;authority;path;query;fragment;constructor(H,ee,J,G,j,Z=!1){typeof H=="object"?(this.scheme=H.scheme||d,this.authority=H.authority||d,this.path=H.path||d,this.query=H.query||d,this.fragment=H.fragment||d):(this.scheme=function(ie,ne){return ie||ne?ie:"file"}(H,Z),this.authority=ee||d,this.path=function(ie,ne){switch(ie){case"https":case"http":case"file":ne?ne[0]!==p&&(ne=p+ne):ne=p}return ne}(this.scheme,J||d),this.query=G||d,this.fragment=j||d,u(this,Z))}get fsPath(){return I(this,!1)}with(H){if(!H)return this;let{scheme:ee,authority:J,path:G,query:j,fragment:Z}=H;return ee===void 0?ee=this.scheme:ee===null&&(ee=d),J===void 0?J=this.authority:J===null&&(J=d),G===void 0?G=this.path:G===null&&(G=d),j===void 0?j=this.query:j===null&&(j=d),Z===void 0?Z=this.fragment:Z===null&&(Z=d),ee===this.scheme&&J===this.authority&&G===this.path&&j===this.query&&Z===this.fragment?this:new A(ee,J,G,j,Z)}static parse(H,ee=!1){let J=m.exec(H);return J?new A(J[2]||d,F(J[4]||d),F(J[5]||d),F(J[7]||d),F(J[9]||d),ee):new A(d,d,d,d,d)}static file(H){let ee=d;if(o&&(H=H.replace(/\\/g,p)),H[0]===p&&H[1]===p){let J=H.indexOf(p,2);J===-1?(ee=H.substring(2),H=p):(ee=H.substring(2,J),H=H.substring(J)||p)}return new A("file",ee,H,d,d)}static from(H){let ee=new A(H.scheme,H.authority,H.path,H.query,H.fragment);return u(ee,!0),ee}toString(H=!1){return S(this,H)}toJSON(){return this}static revive(H){if(H){if(H instanceof h)return H;{let ee=new A(H);return ee._formatted=H.external,ee._fsPath=H._sep===g?H.fsPath:null,ee}}return H}}let g=o?1:void 0;class A extends h{static{a(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=I(this,!1)),this._fsPath}toString(H=!1){return H?S(this,!0):(this._formatted||(this._formatted=S(this,!1)),this._formatted)}toJSON(){let H={$mid:1};return this._fsPath&&(H.fsPath=this._fsPath,H._sep=g),this._formatted&&(H.external=this._formatted),this.path&&(H.path=this.path),this.scheme&&(H.scheme=this.scheme),this.authority&&(H.authority=this.authority),this.query&&(H.query=this.query),this.fragment&&(H.fragment=this.fragment),H}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(U,H,ee){let J,G=-1;for(let j=0;j<U.length;j++){let Z=U.charCodeAt(j);if(Z>=97&&Z<=122||Z>=65&&Z<=90||Z>=48&&Z<=57||Z===45||Z===46||Z===95||Z===126||H&&Z===47||ee&&Z===91||ee&&Z===93||ee&&Z===58)G!==-1&&(J+=encodeURIComponent(U.substring(G,j)),G=-1),J!==void 0&&(J+=U.charAt(j));else{J===void 0&&(J=U.substr(0,j));let ie=y[Z];ie!==void 0?(G!==-1&&(J+=encodeURIComponent(U.substring(G,j)),G=-1),J+=ie):G===-1&&(G=j)}}return G!==-1&&(J+=encodeURIComponent(U.substring(G))),J!==void 0?J:U}a(v,"m");function b(U){let H;for(let ee=0;ee<U.length;ee++){let J=U.charCodeAt(ee);J===35||J===63?(H===void 0&&(H=U.substr(0,ee)),H+=y[J]):H!==void 0&&(H+=U[ee])}return H!==void 0?H:U}a(b,"y");function I(U,H){let ee;return ee=U.authority&&U.path.length>1&&U.scheme==="file"?`//${U.authority}${U.path}`:U.path.charCodeAt(0)===47&&(U.path.charCodeAt(1)>=65&&U.path.charCodeAt(1)<=90||U.path.charCodeAt(1)>=97&&U.path.charCodeAt(1)<=122)&&U.path.charCodeAt(2)===58?H?U.path.substr(1):U.path[1].toLowerCase()+U.path.substr(2):U.path,o&&(ee=ee.replace(/\//g,"\\")),ee}a(I,"v");function S(U,H){let ee=H?b:v,J="",{scheme:G,authority:j,path:Z,query:ie,fragment:ne}=U;if(G&&(J+=G,J+=":"),(j||G==="file")&&(J+=p,J+=p),j){let re=j.indexOf("@");if(re!==-1){let fe=j.substr(0,re);j=j.substr(re+1),re=fe.lastIndexOf(":"),re===-1?J+=ee(fe,!1,!1):(J+=ee(fe.substr(0,re),!1,!1),J+=":",J+=ee(fe.substr(re+1),!1,!0)),J+="@"}j=j.toLowerCase(),re=j.lastIndexOf(":"),re===-1?J+=ee(j,!1,!0):(J+=ee(j.substr(0,re),!1,!0),J+=j.substr(re))}if(Z){if(Z.length>=3&&Z.charCodeAt(0)===47&&Z.charCodeAt(2)===58){let re=Z.charCodeAt(1);re>=65&&re<=90&&(Z=`/${String.fromCharCode(re+32)}:${Z.substr(3)}`)}else if(Z.length>=2&&Z.charCodeAt(1)===58){let re=Z.charCodeAt(0);re>=65&&re<=90&&(Z=`${String.fromCharCode(re+32)}:${Z.substr(2)}`)}J+=ee(Z,!0,!1)}return ie&&(J+="?",J+=ee(ie,!1,!1)),ne&&(J+="#",J+=H?ne:v(ne,!1,!1)),J}a(S,"b");function k(U){try{return decodeURIComponent(U)}catch{return U.length>3?U.substr(0,3)+k(U.substr(3)):U}}a(k,"C");let N=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function F(U){return U.match(N)?U.replace(N,H=>k(H)):U}a(F,"w");var O=r(975);let Y=O.posix||O,z="/";var V;(function(U){U.joinPath=function(H,...ee){return H.with({path:Y.join(H.path,...ee)})},U.resolvePath=function(H,...ee){let J=H.path,G=!1;J[0]!==z&&(J=z+J,G=!0);let j=Y.resolve(J,...ee);return G&&j[0]===z&&!H.authority&&(j=j.substring(1)),H.with({path:j})},U.dirname=function(H){if(H.path.length===0||H.path===z)return H;let ee=Y.dirname(H.path);return ee.length===1&&ee.charCodeAt(0)===46&&(ee=""),H.with({path:ee})},U.basename=function(H){return Y.basename(H.path)},U.extname=function(H){return Y.extname(H.path)}})(V||(V={})),V3e=n})();var{URI:EI,Utils:GF}=V3e;function Y3e(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+Y3e(t.substring(3)):t}}a(Y3e,"decodeURIComponentGraceful");var z3e=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function spe(t){return t.match(z3e)?t.replace(z3e,e=>Y3e(e)):t}a(spe,"percentDecode");function Dl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return EI.file(t).toString()}a(Dl,"makeFsUri");function WS(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?EI.parse(e[1]+e[2],!0):EI.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}a(WS,"parseUri");function Nj(t){return WS(t),t}a(Nj,"validateUri");function Bl(t){try{return WS(t).toString()}catch{return t}}a(Bl,"normalizeUri");var J3e=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function ac(t){let e=WS(t);if(!J3e.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,K3e.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,Bj.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}a(ac,"fsPath");function rs(t){try{return ac(t)}catch{return}}a(rs,"getFsPath");function X3e(t){let e=rs(t);if(e)return EI.file(e).toString()}a(X3e,"getFsUri");function jS(t,...e){let r,n=rs(t);return n?r=Dl((0,Bj.resolve)(n,...e)):r=GF.resolvePath(WS(t),...e.map(o=>Z3e(o))).toString(),typeof t=="string"?r:{uri:r}}a(jS,"resolveFilePath");function Ki(t,...e){let r=GF.joinPath(WS(t),...e.map(Z3e)).toString();return typeof t=="string"?r:{uri:r}}a(Ki,"joinPath");function Z3e(t){return Swt(t)?t.replaceAll("\\","/"):t}a(Z3e,"pathToURIPath");function Swt(t){return/^[^/\\]*\\/.test(t)}a(Swt,"isWinPath");function Di(t){return spe((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}a(Di,"basename");function Rd(t){let e=GF.dirname(WS(t)),r;return J3e.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}a(Rd,"dirname");function eNe(t){return GF.extname(WS(t))}a(eNe,"extname");var mf=class{static{a(this,"NetworkConfiguration")}};function Mj(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!cpe(t)&&r.protocol==="http:")return r.href}catch{}}a(Mj,"ensurePermittedUrl");var GS={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function ape(t,e,r){if(r&&Xg(t)){for(let n of r){let o=Bi(t,n);if(o)return o}return}for(let n of e){let o=Bi(t,n);if(o)return o}}a(ape,"urlConfigOverride");function Rwt(t,e){switch(e){case"api":return ape(t,[qt.DebugOverrideCapiUrl,qt.DebugOverrideCapiUrlLegacy],[qt.DebugTestOverrideCapiUrl,qt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return ape(t,[qt.DebugOverrideProxyUrl,qt.DebugOverrideProxyUrlLegacy],[qt.DebugTestOverrideProxyUrl,qt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!cpe(t))return ape(t,[qt.DebugSnippyOverrideUrl])}}a(Rwt,"getEndpointOverrideUrl");function Hm(t,e,r,...n){let o=Rwt(t,r)??e.endpoints[r];return Ki(o,...n)}a(Hm,"getEndpointUrl");function Q4(t){return Lj(t)?.endpoints??GS}a(Q4,"getLastKnownEndpoints");function tNe(t,e){if(e&&!Mj(t,e)){t.get(sc).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(mf).setConfiguredUrls(t,{serverUrl:e})}a(tNe,"updateServerUrl");f();f();var ka=class extends Error{static{a(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};f();f();f();var Zg=class{static{a(this,"InlineCompletionsUnification")}},kwt={codeUnification:!1,modelUnification:!1,expAssignments:[]},U4=class extends Zg{constructor(){super(...arguments);this.inlineCompletionsUnificationState=kwt;this.onDidChangeState=a(()=>({dispose:a(()=>{},"dispose")}),"onDidChangeState")}static{a(this,"NullInlineCompletionsUnification")}};var $m=class t{static{a(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return Fj(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e,r){let o=e.get(Zg).inlineCompletionsUnificationState.expAssignments.filter(c=>!this.assignmentContext.includes(c)),s=[this.assignmentContext,...o].filter(Boolean).join(";");r.properties["VSCode.ABExp.Features"]=this.features,r.properties["abexp.assignmentcontext"]=s}};f();var op="X-Copilot-RelatedPluginVersion-",q4=(ne=>(ne.Market="X-MSEdge-Market",ne.CorpNet="X-FD-Corpnet",ne.Build="X-VSCode-Build",ne.ApplicationVersion="X-VSCode-AppVersion",ne.TargetPopulation="X-VSCode-TargetPopulation",ne.ClientId="X-MSEdge-ClientId",ne.ExtensionName="X-VSCode-ExtensionName",ne.ExtensionVersion="X-VSCode-ExtensionVersion",ne.ExtensionRelease="X-VSCode-ExtensionRelease",ne.CompletionsInChatExtensionVersion="X-VSCode-CompletionsInChatExtensionVersion",ne.Language="X-VSCode-Language",ne.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",ne.CopilotEngine="X-Copilot-Engine",ne.CopilotOverrideEngine="X-Copilot-OverrideEngine",ne.CopilotRepository="X-Copilot-Repository",ne.CopilotFileType="X-Copilot-FileType",ne.CopilotUserKind="X-Copilot-UserKind",ne.CopilotDogfood="X-Copilot-Dogfood",ne.CopilotCustomModel="X-Copilot-CustomModel",ne.CopilotOrgs="X-Copilot-Orgs",ne.CopilotCustomModelNames="X-Copilot-CustomModelNames",ne.CopilotTrackingId="X-Copilot-CopilotTrackingId",ne.CopilotClientVersion="X-Copilot-ClientVersion",ne.CopilotRelatedPluginVersionCppTools=op+"msvscodecpptools",ne.CopilotRelatedPluginVersionCMakeTools=op+"msvscodecmaketools",ne.CopilotRelatedPluginVersionMakefileTools=op+"msvscodemakefiletools",ne.CopilotRelatedPluginVersionCSharpDevKit=op+"msdotnettoolscsdevkit",ne.CopilotRelatedPluginVersionPython=op+"mspythonpython",ne.CopilotRelatedPluginVersionPylance=op+"mspythonvscodepylance",ne.CopilotRelatedPluginVersionJavaPack=op+"vscjavavscodejavapack",ne.CopilotRelatedPluginVersionTypescript=op+"vscodetypescriptlanguagefeatures",ne.CopilotRelatedPluginVersionTypescriptNext=op+"msvscodevscodetypescriptnext",ne.CopilotRelatedPluginVersionCSharp=op+"msdotnettoolscsharp",ne.CopilotRelatedPluginVersionGithubCopilotChat=op+"githubcopilotchat",ne.CopilotRelatedPluginVersionGithubCopilot=op+"githubcopilot",ne))(q4||{});var Pwt={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},VS=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{a(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let o=Pwt[r];o!==void 0&&(e.properties[o]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};f();f();f();function Pa(t,e){let r=eu(t,e,"event.CopilotToken");return t.get(cr).onDidChangeTokenResult(n=>{n.copilotToken&&r(n.copilotToken)})}a(Pa,"onCopilotToken");function lpe(t){let e=t.getTokenValue("tid"),r=t.organization_list,n=t.enterprise_list,o=t.getTokenValue("sku");if(!e)return;let s={copilot_trackingId:e};return r&&(s.organizations_list=r.toString()),n&&(s.enterprise_list=n.toString()),o&&(s.sku=o),s}a(lpe,"propertiesFromCopilotToken");var qu=class{constructor(e){this.#e={};this.optedIn=!1;this.ftFlag="";Pa(e,r=>this.updateFromToken(r))}static{a(this,"TelemetryUserConfig")}#e;getProperties(){return this.#e}get trackingId(){return this.#e.copilot_trackingId}updateFromToken(e){let r=lpe(e);r&&(this.#e=r,this.optedIn=e.getTokenValue("rt")==="1",this.ftFlag=e.getTokenValue("ft")??"")}};var Oj=Ne(xI()),Qj=Ne(require("os"));var Dwt=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function Bwt(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let o=n.match(Dwt),s={filename:"",function:""};o&&(s.function=o[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??s.function,s.filename=(o[4]?.trim()??s.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),o[5]&&o[5]!==":0"&&(s.lineno=o[5].slice(1)),o[6]&&o[5]!==":0"&&(s.colno=o[6].slice(1)),s.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(s.filename)),e.stacktrace.push(s)}}return e}a(Bwt,"buildExceptionDetail");function upe(t,e){let r=t.get(un),n=r.getEditorInfo(),o=t.get(qu),s={"#editor":n.devName??n.name,"#editor_version":uC({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":uC(r.getEditorPluginInfo()),"#session_id":t.get(Fs).sessionId,"#machine_id":t.get(Fs).machineId,"#architecture":Qj.arch(),"#os_platform":Qj.platform(),...e};return o.trackingId&&(s.user=o.trackingId,s["#tracking_id"]=o.trackingId),s}a(upe,"buildContext");function nNe(t,e){let r=t.get(wo),n=t.get(un).getEditorInfo(),o=typeof process<"u"?process.versions.node:"web",s={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:upe(t,{"#node_version":o}),sensitive_context:{}},c=[];s.exception_detail=[];let l=0,u=e;for(;u instanceof Error&&l<10;){let p=Bwt(u);s.exception_detail.unshift(p),c.unshift([u,p]),l+=1,u=u.cause}let d=[];for(let[p,m]of c)if(m.stacktrace&&m.stacktrace.length>0){d.push(`${m.type}: ${p.code??""}`);let h=[...m.stacktrace].reverse();for(let g of h)if(g.filename?.startsWith("/github-copilot/"))return s;for(let g of h)if(g.in_app){d.push(`${g.filename?.replace(/^\.\//,"")}:${g.lineno}:${g.colno}`);break}d.push(`${h[0].filename?.replace(/^\.\//,"")}`)}else return s;return s.exception_detail.length>0&&(s.rollup_id=(0,Oj.SHA256)(Oj.enc.Utf16.parse(d.join(`
`))).toString()),s}a(nNe,"buildPayload");f();var VF=class{static{a(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,o){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();var dC=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Sr}static{a(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};f();var tl=class{constructor(){this.promises=new Set}static{a(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var aNe=require("os"),cNe=Ne(require("path"));function zF(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}a(zF,"redactPaths");var Nwt=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),Mwt=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function fpe(t){if(Nwt.has(t))return t;for(let e of Mwt)if(e.test(t))return t;return zF(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}a(fpe,"redactMessage");function qj(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(qj,"escapeForRegExp");var Lwt=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+qj((0,aNe.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function dpe(t){return t.replace(Lwt,"~")}a(dpe,"redactHomeDir");var lNe="[\\\\/]?([^:)]*)(?=:\\d)",oNe=new RegExp(qj(cNe.sep),"g"),sNe=new RegExp(qj(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+lNe,"gi");function ppe(t,e,r=!1,n=[]){let o=new Error(e(t));o.name=t.name,typeof t.syscall=="string"&&(o.syscall=t.syscall),typeof t.code=="string"&&(o.code=t.code),typeof t.errno=="number"&&(o.errno=t.errno),o.stack=void 0;let s=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),c;for(let l of[t.toString(),`${t.name}: ${t.message}`])if(s?.startsWith(l+`
`)){c=s.slice(l.length+1).split(/\n/);break}if(c){o.stack=o.toString();for(let l of c)if(sNe.test(l))o.stack+=`
${zF(l.replace(sNe,(u,d)=>"./"+d.replace(oNe,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(l))o.stack+=`
${zF(l)}`;else{let u=!1;for(let{prefix:d,path:p}of n){let m=new RegExp(qj(p.replace(/[\\/]$/,""))+lNe,"gi");if(m.test(l)){o.stack+=`
${zF(l.replace(m,(h,g)=>d+g.replace(oNe,"/")))}`,u=!0;break}}if(u)continue;r?o.stack+=`
${dpe(l)}`:o.stack+=`
    at [redacted]:0:0`}}else r&&s&&(o.stack=dpe(s));return t.cause instanceof Error&&(o.cause=ppe(t.cause,e,r,n)),o}a(ppe,"cloneError");function uNe(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}a(uNe,"errorMessageWithoutPath");function dNe(t,e){return ppe(t,a(function(n){return dpe(uNe(n))},"prepareMessage"),!0,e)}a(dNe,"prepareErrorForRestrictedTelemetry");function fNe(t,e,r=!1){return ppe(t,a(function(o){if(r)return fpe(uNe(o));let s="[redacted]";return typeof o.code=="string"&&(s=o.code+" "+s),typeof o.syscall=="string"?s=zF(o.syscall)+" "+s:"erroredSysCall"in o&&typeof o.erroredSysCall=="string"&&(s=o.erroredSysCall+" "+s),s},"prepareMessage"),!1,e)}a(fNe,"redactError");f();f();var kd={};Sa(kd,{HasPropertyKey:()=>Hj,IsArray:()=>Bc,IsAsyncIterator:()=>mpe,IsBigInt:()=>KF,IsBoolean:()=>Ov,IsDate:()=>zS,IsFunction:()=>hpe,IsIterator:()=>gpe,IsNull:()=>Ape,IsNumber:()=>h0,IsObject:()=>cs,IsRegExp:()=>YF,IsString:()=>Ss,IsSymbol:()=>ype,IsUint8Array:()=>Qv,IsUndefined:()=>Nc});f();function Hj(t,e){return e in t}a(Hj,"HasPropertyKey");function mpe(t){return cs(t)&&!Bc(t)&&!Qv(t)&&Symbol.asyncIterator in t}a(mpe,"IsAsyncIterator");function Bc(t){return Array.isArray(t)}a(Bc,"IsArray");function KF(t){return typeof t=="bigint"}a(KF,"IsBigInt");function Ov(t){return typeof t=="boolean"}a(Ov,"IsBoolean");function zS(t){return t instanceof globalThis.Date}a(zS,"IsDate");function hpe(t){return typeof t=="function"}a(hpe,"IsFunction");function gpe(t){return cs(t)&&!Bc(t)&&!Qv(t)&&Symbol.iterator in t}a(gpe,"IsIterator");function Ape(t){return t===null}a(Ape,"IsNull");function h0(t){return typeof t=="number"}a(h0,"IsNumber");function cs(t){return typeof t=="object"&&t!==null}a(cs,"IsObject");function YF(t){return t instanceof globalThis.RegExp}a(YF,"IsRegExp");function Ss(t){return typeof t=="string"}a(Ss,"IsString");function ype(t){return typeof t=="symbol"}a(ype,"IsSymbol");function Qv(t){return t instanceof globalThis.Uint8Array}a(Qv,"IsUint8Array");function Nc(t){return t===void 0}a(Nc,"IsUndefined");function Fwt(t){return t.map(e=>$j(e))}a(Fwt,"ArrayType");function Owt(t){return new Date(t.getTime())}a(Owt,"DateType");function Qwt(t){return new Uint8Array(t)}a(Qwt,"Uint8ArrayType");function Uwt(t){return new RegExp(t.source,t.flags)}a(Uwt,"RegExpType");function qwt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=$j(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=$j(t[r]);return e}a(qwt,"ObjectType");function $j(t){return Bc(t)?Fwt(t):zS(t)?Owt(t):Qv(t)?Qwt(t):YF(t)?Uwt(t):cs(t)?qwt(t):t}a($j,"Visit");function Zs(t){return $j(t)}a(Zs,"Clone");function H4(t,e){return e===void 0?Zs(t):Zs({...e,...t})}a(H4,"CloneType");f();f();f();function Wj(t){return Ri(t)&&globalThis.Symbol.asyncIterator in t}a(Wj,"IsAsyncIterator");function jj(t){return Ri(t)&&globalThis.Symbol.iterator in t}a(jj,"IsIterator");function Cpe(t){return Ri(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}a(Cpe,"IsStandardObject");function Gj(t){return t instanceof globalThis.Promise}a(Gj,"IsPromise");function hf(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}a(hf,"IsDate");function pNe(t){return t instanceof globalThis.Map}a(pNe,"IsMap");function mNe(t){return t instanceof globalThis.Set}a(mNe,"IsSet");function Wm(t){return globalThis.ArrayBuffer.isView(t)}a(Wm,"IsTypedArray");function $4(t){return t instanceof globalThis.Uint8Array}a($4,"IsUint8Array");function Dn(t,e){return e in t}a(Dn,"HasPropertyKey");function Ri(t){return t!==null&&typeof t=="object"}a(Ri,"IsObject");function Bn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}a(Bn,"IsArray");function ea(t){return t===void 0}a(ea,"IsUndefined");function Uv(t){return t===null}a(Uv,"IsNull");function fC(t){return typeof t=="boolean"}a(fC,"IsBoolean");function dn(t){return typeof t=="number"}a(dn,"IsNumber");function Vj(t){return globalThis.Number.isInteger(t)}a(Vj,"IsInteger");function Hu(t){return typeof t=="bigint"}a(Hu,"IsBigInt");function vo(t){return typeof t=="string"}a(vo,"IsString");function bI(t){return typeof t=="function"}a(bI,"IsFunction");function qv(t){return typeof t=="symbol"}a(qv,"IsSymbol");function g0(t){return Hu(t)||fC(t)||Uv(t)||dn(t)||vo(t)||qv(t)||ea(t)}a(g0,"IsValueType");var Os;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(c,l){return t.ExactOptionalPropertyTypes?l in c:c[l]!==void 0}a(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(c){let l=Ri(c);return t.AllowArrayObject?l:l&&!Bn(c)}a(r,"IsObjectLike"),t.IsObjectLike=r;function n(c){return r(c)&&!(c instanceof Date)&&!(c instanceof Uint8Array)}a(n,"IsRecordLike"),t.IsRecordLike=n;function o(c){return t.AllowNaN?dn(c):Number.isFinite(c)}a(o,"IsNumberLike"),t.IsNumberLike=o;function s(c){let l=ea(c);return t.AllowNullVoid?l||c===null:l}a(s,"IsVoidLike"),t.IsVoidLike=s})(Os||(Os={}));f();function Hwt(t){return globalThis.Object.freeze(t).map(e=>JF(e))}a(Hwt,"ImmutableArray");function $wt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=JF(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=JF(t[r]);return globalThis.Object.freeze(e)}a($wt,"ImmutableObject");function JF(t){return Bc(t)?Hwt(t):zS(t)?t:Qv(t)?t:YF(t)?t:cs(t)?$wt(t):t}a(JF,"Immutable");function ct(t,e){let r=e!==void 0?{...e,...t}:t;switch(Os.InstanceMode){case"freeze":return JF(r);case"clone":return Zs(r);default:return r}}a(ct,"CreateType");f();var Nn=class extends Error{static{a(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var Da=Symbol.for("TypeBox.Transform"),eA=Symbol.for("TypeBox.Readonly"),$u=Symbol.for("TypeBox.Optional"),jm=Symbol.for("TypeBox.Hint"),st=Symbol.for("TypeBox.Kind");function W4(t){return cs(t)&&t[eA]==="Readonly"}a(W4,"IsReadonly");function sp(t){return cs(t)&&t[$u]==="Optional"}a(sp,"IsOptional");function vpe(t){return co(t,"Any")}a(vpe,"IsAny");function xpe(t){return co(t,"Argument")}a(xpe,"IsArgument");function tA(t){return co(t,"Array")}a(tA,"IsArray");function KS(t){return co(t,"AsyncIterator")}a(KS,"IsAsyncIterator");function YS(t){return co(t,"BigInt")}a(YS,"IsBigInt");function Hv(t){return co(t,"Boolean")}a(Hv,"IsBoolean");function rA(t){return co(t,"Computed")}a(rA,"IsComputed");function nA(t){return co(t,"Constructor")}a(nA,"IsConstructor");function Wwt(t){return co(t,"Date")}a(Wwt,"IsDate");function iA(t){return co(t,"Function")}a(iA,"IsFunction");function oA(t){return co(t,"Integer")}a(oA,"IsInteger");function za(t){return co(t,"Intersect")}a(za,"IsIntersect");function JS(t){return co(t,"Iterator")}a(JS,"IsIterator");function co(t,e){return cs(t)&&st in t&&t[st]===e}a(co,"IsKindOf");function zj(t){return Ov(t)||h0(t)||Ss(t)}a(zj,"IsLiteralValue");function A0(t){return co(t,"Literal")}a(A0,"IsLiteral");function y0(t){return co(t,"MappedKey")}a(y0,"IsMappedKey");function ta(t){return co(t,"MappedResult")}a(ta,"IsMappedResult");function II(t){return co(t,"Never")}a(II,"IsNever");function jwt(t){return co(t,"Not")}a(jwt,"IsNot");function XF(t){return co(t,"Null")}a(XF,"IsNull");function sA(t){return co(t,"Number")}a(sA,"IsNumber");function Mc(t){return co(t,"Object")}a(Mc,"IsObject");function XS(t){return co(t,"Promise")}a(XS,"IsPromise");function ZS(t){return co(t,"Record")}a(ZS,"IsRecord");function cc(t){return co(t,"Ref")}a(cc,"IsRef");function Epe(t){return co(t,"RegExp")}a(Epe,"IsRegExp");function $v(t){return co(t,"String")}a($v,"IsString");function ZF(t){return co(t,"Symbol")}a(ZF,"IsSymbol");function C0(t){return co(t,"TemplateLiteral")}a(C0,"IsTemplateLiteral");function Gwt(t){return co(t,"This")}a(Gwt,"IsThis");function Uo(t){return cs(t)&&Da in t}a(Uo,"IsTransform");function v0(t){return co(t,"Tuple")}a(v0,"IsTuple");function Wv(t){return co(t,"Undefined")}a(Wv,"IsUndefined");function xo(t){return co(t,"Union")}a(xo,"IsUnion");function Vwt(t){return co(t,"Uint8Array")}a(Vwt,"IsUint8Array");function zwt(t){return co(t,"Unknown")}a(zwt,"IsUnknown");function Kwt(t){return co(t,"Unsafe")}a(Kwt,"IsUnsafe");function Ywt(t){return co(t,"Void")}a(Ywt,"IsVoid");function TI(t){return cs(t)&&st in t&&Ss(t[st])}a(TI,"IsKind");function Ba(t){return vpe(t)||xpe(t)||tA(t)||Hv(t)||YS(t)||KS(t)||rA(t)||nA(t)||Wwt(t)||iA(t)||oA(t)||za(t)||JS(t)||A0(t)||y0(t)||ta(t)||II(t)||jwt(t)||XF(t)||sA(t)||Mc(t)||XS(t)||ZS(t)||cc(t)||Epe(t)||$v(t)||ZF(t)||C0(t)||Gwt(t)||v0(t)||Wv(t)||xo(t)||Vwt(t)||zwt(t)||Kwt(t)||Ywt(t)||TI(t)}a(Ba,"IsSchema");var Fe={};Sa(Fe,{IsAny:()=>yNe,IsArgument:()=>CNe,IsArray:()=>vNe,IsAsyncIterator:()=>xNe,IsBigInt:()=>ENe,IsBoolean:()=>bNe,IsComputed:()=>INe,IsConstructor:()=>TNe,IsDate:()=>wNe,IsFunction:()=>_Ne,IsImport:()=>r_t,IsInteger:()=>SNe,IsIntersect:()=>RNe,IsIterator:()=>kNe,IsKind:()=>r8e,IsKindOf:()=>$i,IsLiteral:()=>t6,IsLiteralBoolean:()=>n_t,IsLiteralNumber:()=>DNe,IsLiteralString:()=>PNe,IsLiteralValue:()=>BNe,IsMappedKey:()=>NNe,IsMappedResult:()=>MNe,IsNever:()=>LNe,IsNot:()=>FNe,IsNull:()=>ONe,IsNumber:()=>QNe,IsObject:()=>UNe,IsOptional:()=>t_t,IsPromise:()=>qNe,IsProperties:()=>Kj,IsReadonly:()=>e_t,IsRecord:()=>HNe,IsRecursive:()=>i_t,IsRef:()=>$Ne,IsRegExp:()=>WNe,IsSchema:()=>ra,IsString:()=>jNe,IsSymbol:()=>GNe,IsTemplateLiteral:()=>VNe,IsThis:()=>zNe,IsTransform:()=>KNe,IsTuple:()=>YNe,IsUint8Array:()=>XNe,IsUndefined:()=>JNe,IsUnion:()=>wpe,IsUnionLiteral:()=>o_t,IsUnknown:()=>ZNe,IsUnsafe:()=>e8e,IsVoid:()=>t8e,TypeGuardUnknownTypeError:()=>bpe});f();var bpe=class extends Nn{static{a(this,"TypeGuardUnknownTypeError")}},Jwt=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function hNe(t){try{return new RegExp(t),!0}catch{return!1}}a(hNe,"IsPattern");function Ipe(t){if(!Ss(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}a(Ipe,"IsControlCharacterFree");function gNe(t){return Tpe(t)||ra(t)}a(gNe,"IsAdditionalProperties");function e6(t){return Nc(t)||KF(t)}a(e6,"IsOptionalBigInt");function Rs(t){return Nc(t)||h0(t)}a(Rs,"IsOptionalNumber");function Tpe(t){return Nc(t)||Ov(t)}a(Tpe,"IsOptionalBoolean");function ls(t){return Nc(t)||Ss(t)}a(ls,"IsOptionalString");function Xwt(t){return Nc(t)||Ss(t)&&Ipe(t)&&hNe(t)}a(Xwt,"IsOptionalPattern");function Zwt(t){return Nc(t)||Ss(t)&&Ipe(t)}a(Zwt,"IsOptionalFormat");function ANe(t){return Nc(t)||ra(t)}a(ANe,"IsOptionalSchema");function e_t(t){return cs(t)&&t[eA]==="Readonly"}a(e_t,"IsReadonly");function t_t(t){return cs(t)&&t[$u]==="Optional"}a(t_t,"IsOptional");function yNe(t){return $i(t,"Any")&&ls(t.$id)}a(yNe,"IsAny");function CNe(t){return $i(t,"Argument")&&h0(t.index)}a(CNe,"IsArgument");function vNe(t){return $i(t,"Array")&&t.type==="array"&&ls(t.$id)&&ra(t.items)&&Rs(t.minItems)&&Rs(t.maxItems)&&Tpe(t.uniqueItems)&&ANe(t.contains)&&Rs(t.minContains)&&Rs(t.maxContains)}a(vNe,"IsArray");function xNe(t){return $i(t,"AsyncIterator")&&t.type==="AsyncIterator"&&ls(t.$id)&&ra(t.items)}a(xNe,"IsAsyncIterator");function ENe(t){return $i(t,"BigInt")&&t.type==="bigint"&&ls(t.$id)&&e6(t.exclusiveMaximum)&&e6(t.exclusiveMinimum)&&e6(t.maximum)&&e6(t.minimum)&&e6(t.multipleOf)}a(ENe,"IsBigInt");function bNe(t){return $i(t,"Boolean")&&t.type==="boolean"&&ls(t.$id)}a(bNe,"IsBoolean");function INe(t){return $i(t,"Computed")&&Ss(t.target)&&Bc(t.parameters)&&t.parameters.every(e=>ra(e))}a(INe,"IsComputed");function TNe(t){return $i(t,"Constructor")&&t.type==="Constructor"&&ls(t.$id)&&Bc(t.parameters)&&t.parameters.every(e=>ra(e))&&ra(t.returns)}a(TNe,"IsConstructor");function wNe(t){return $i(t,"Date")&&t.type==="Date"&&ls(t.$id)&&Rs(t.exclusiveMaximumTimestamp)&&Rs(t.exclusiveMinimumTimestamp)&&Rs(t.maximumTimestamp)&&Rs(t.minimumTimestamp)&&Rs(t.multipleOfTimestamp)}a(wNe,"IsDate");function _Ne(t){return $i(t,"Function")&&t.type==="Function"&&ls(t.$id)&&Bc(t.parameters)&&t.parameters.every(e=>ra(e))&&ra(t.returns)}a(_Ne,"IsFunction");function r_t(t){return $i(t,"Import")&&Hj(t,"$defs")&&cs(t.$defs)&&Kj(t.$defs)&&Hj(t,"$ref")&&Ss(t.$ref)&&t.$ref in t.$defs}a(r_t,"IsImport");function SNe(t){return $i(t,"Integer")&&t.type==="integer"&&ls(t.$id)&&Rs(t.exclusiveMaximum)&&Rs(t.exclusiveMinimum)&&Rs(t.maximum)&&Rs(t.minimum)&&Rs(t.multipleOf)}a(SNe,"IsInteger");function Kj(t){return cs(t)&&Object.entries(t).every(([e,r])=>Ipe(e)&&ra(r))}a(Kj,"IsProperties");function RNe(t){return $i(t,"Intersect")&&!(Ss(t.type)&&t.type!=="object")&&Bc(t.allOf)&&t.allOf.every(e=>ra(e)&&!KNe(e))&&ls(t.type)&&(Tpe(t.unevaluatedProperties)||ANe(t.unevaluatedProperties))&&ls(t.$id)}a(RNe,"IsIntersect");function kNe(t){return $i(t,"Iterator")&&t.type==="Iterator"&&ls(t.$id)&&ra(t.items)}a(kNe,"IsIterator");function $i(t,e){return cs(t)&&st in t&&t[st]===e}a($i,"IsKindOf");function PNe(t){return t6(t)&&Ss(t.const)}a(PNe,"IsLiteralString");function DNe(t){return t6(t)&&h0(t.const)}a(DNe,"IsLiteralNumber");function n_t(t){return t6(t)&&Ov(t.const)}a(n_t,"IsLiteralBoolean");function t6(t){return $i(t,"Literal")&&ls(t.$id)&&BNe(t.const)}a(t6,"IsLiteral");function BNe(t){return Ov(t)||h0(t)||Ss(t)}a(BNe,"IsLiteralValue");function NNe(t){return $i(t,"MappedKey")&&Bc(t.keys)&&t.keys.every(e=>h0(e)||Ss(e))}a(NNe,"IsMappedKey");function MNe(t){return $i(t,"MappedResult")&&Kj(t.properties)}a(MNe,"IsMappedResult");function LNe(t){return $i(t,"Never")&&cs(t.not)&&Object.getOwnPropertyNames(t.not).length===0}a(LNe,"IsNever");function FNe(t){return $i(t,"Not")&&ra(t.not)}a(FNe,"IsNot");function ONe(t){return $i(t,"Null")&&t.type==="null"&&ls(t.$id)}a(ONe,"IsNull");function QNe(t){return $i(t,"Number")&&t.type==="number"&&ls(t.$id)&&Rs(t.exclusiveMaximum)&&Rs(t.exclusiveMinimum)&&Rs(t.maximum)&&Rs(t.minimum)&&Rs(t.multipleOf)}a(QNe,"IsNumber");function UNe(t){return $i(t,"Object")&&t.type==="object"&&ls(t.$id)&&Kj(t.properties)&&gNe(t.additionalProperties)&&Rs(t.minProperties)&&Rs(t.maxProperties)}a(UNe,"IsObject");function qNe(t){return $i(t,"Promise")&&t.type==="Promise"&&ls(t.$id)&&ra(t.item)}a(qNe,"IsPromise");function HNe(t){return $i(t,"Record")&&t.type==="object"&&ls(t.$id)&&gNe(t.additionalProperties)&&cs(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&hNe(r[0])&&cs(e.patternProperties)&&ra(e.patternProperties[r[0]])})(t)}a(HNe,"IsRecord");function i_t(t){return cs(t)&&jm in t&&t[jm]==="Recursive"}a(i_t,"IsRecursive");function $Ne(t){return $i(t,"Ref")&&ls(t.$id)&&Ss(t.$ref)}a($Ne,"IsRef");function WNe(t){return $i(t,"RegExp")&&ls(t.$id)&&Ss(t.source)&&Ss(t.flags)&&Rs(t.maxLength)&&Rs(t.minLength)}a(WNe,"IsRegExp");function jNe(t){return $i(t,"String")&&t.type==="string"&&ls(t.$id)&&Rs(t.minLength)&&Rs(t.maxLength)&&Xwt(t.pattern)&&Zwt(t.format)}a(jNe,"IsString");function GNe(t){return $i(t,"Symbol")&&t.type==="symbol"&&ls(t.$id)}a(GNe,"IsSymbol");function VNe(t){return $i(t,"TemplateLiteral")&&t.type==="string"&&Ss(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}a(VNe,"IsTemplateLiteral");function zNe(t){return $i(t,"This")&&ls(t.$id)&&Ss(t.$ref)}a(zNe,"IsThis");function KNe(t){return cs(t)&&Da in t}a(KNe,"IsTransform");function YNe(t){return $i(t,"Tuple")&&t.type==="array"&&ls(t.$id)&&h0(t.minItems)&&h0(t.maxItems)&&t.minItems===t.maxItems&&(Nc(t.items)&&Nc(t.additionalItems)&&t.minItems===0||Bc(t.items)&&t.items.every(e=>ra(e)))}a(YNe,"IsTuple");function JNe(t){return $i(t,"Undefined")&&t.type==="undefined"&&ls(t.$id)}a(JNe,"IsUndefined");function o_t(t){return wpe(t)&&t.anyOf.every(e=>PNe(e)||DNe(e))}a(o_t,"IsUnionLiteral");function wpe(t){return $i(t,"Union")&&ls(t.$id)&&cs(t)&&Bc(t.anyOf)&&t.anyOf.every(e=>ra(e))}a(wpe,"IsUnion");function XNe(t){return $i(t,"Uint8Array")&&t.type==="Uint8Array"&&ls(t.$id)&&Rs(t.minByteLength)&&Rs(t.maxByteLength)}a(XNe,"IsUint8Array");function ZNe(t){return $i(t,"Unknown")&&ls(t.$id)}a(ZNe,"IsUnknown");function e8e(t){return $i(t,"Unsafe")}a(e8e,"IsUnsafe");function t8e(t){return $i(t,"Void")&&t.type==="void"&&ls(t.$id)}a(t8e,"IsVoid");function r8e(t){return cs(t)&&st in t&&Ss(t[st])&&!Jwt.includes(t[st])}a(r8e,"IsKind");function ra(t){return cs(t)&&(yNe(t)||CNe(t)||vNe(t)||bNe(t)||ENe(t)||xNe(t)||INe(t)||TNe(t)||wNe(t)||_Ne(t)||SNe(t)||RNe(t)||kNe(t)||t6(t)||NNe(t)||MNe(t)||LNe(t)||FNe(t)||ONe(t)||QNe(t)||UNe(t)||qNe(t)||HNe(t)||$Ne(t)||WNe(t)||jNe(t)||GNe(t)||VNe(t)||zNe(t)||YNe(t)||JNe(t)||wpe(t)||XNe(t)||ZNe(t)||e8e(t)||t8e(t)||r8e(t))}a(ra,"IsSchema");f();var _pe="(true|false)",r6="(0|[1-9][0-9]*)",Spe="(.*)",s_t="(?!.*)",mNr=`^${_pe}$`,pC=`^${r6}$`,mC=`^${Spe}$`,n8e=`^${s_t}$`;f();var aA={};Sa(aA,{Clear:()=>c_t,Delete:()=>l_t,Entries:()=>a_t,Get:()=>f_t,Has:()=>u_t,Set:()=>d_t});f();var j4=new Map;function a_t(){return new Map(j4)}a(a_t,"Entries");function c_t(){return j4.clear()}a(c_t,"Clear");function l_t(t){return j4.delete(t)}a(l_t,"Delete");function u_t(t){return j4.has(t)}a(u_t,"Has");function d_t(t,e){j4.set(t,e)}a(d_t,"Set");function f_t(t){return j4.get(t)}a(f_t,"Get");var gf={};Sa(gf,{Clear:()=>m_t,Delete:()=>h_t,Entries:()=>p_t,Get:()=>y_t,Has:()=>g_t,Set:()=>A_t});f();var G4=new Map;function p_t(){return new Map(G4)}a(p_t,"Entries");function m_t(){return G4.clear()}a(m_t,"Clear");function h_t(t){return G4.delete(t)}a(h_t,"Delete");function g_t(t){return G4.has(t)}a(g_t,"Has");function A_t(t,e){G4.set(t,e)}a(A_t,"Set");function y_t(t){return G4.get(t)}a(y_t,"Get");f();function i8e(t,e){return t.includes(e)}a(i8e,"SetIncludes");function o8e(t){return[...new Set(t)]}a(o8e,"SetDistinct");function C_t(t,e){return t.filter(r=>e.includes(r))}a(C_t,"SetIntersect");function v_t(t,e){return t.reduce((r,n)=>C_t(r,n),e)}a(v_t,"SetIntersectManyResolve");function s8e(t){return t.length===1?t[0]:t.length>1?v_t(t.slice(1),t[0]):[]}a(s8e,"SetIntersectMany");function a8e(t){let e=[];for(let r of t)e.push(...r);return e}a(a8e,"SetUnionMany");f();function wI(t){return ct({[st]:"Any"},t)}a(wI,"Any");f();function V4(t,e){return ct({[st]:"Array",type:"array",items:t},e)}a(V4,"Array");f();function c8e(t){return ct({[st]:"Argument",index:t})}a(c8e,"Argument");f();function z4(t,e){return ct({[st]:"AsyncIterator",type:"AsyncIterator",items:t},e)}a(z4,"AsyncIterator");f();f();function Qs(t,e,r){return ct({[st]:"Computed",target:t,parameters:e},r)}a(Qs,"Computed");f();f();function x_t(t,e){let{[e]:r,...n}=t;return n}a(x_t,"DiscardKey");function Ka(t,e){return e.reduce((r,n)=>x_t(r,n),t)}a(Ka,"Discard");f();function bi(t){return ct({[st]:"Never",not:{}},t)}a(bi,"Never");f();f();function _o(t){return ct({[st]:"MappedResult",properties:t})}a(_o,"MappedResult");f();f();function K4(t,e,r){return ct({[st]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}a(K4,"Constructor");f();function hC(t,e,r){return ct({[st]:"Function",type:"Function",parameters:t,returns:e},r)}a(hC,"Function");f();f();f();f();function n6(t,e){return ct({[st]:"Union",anyOf:t},e)}a(n6,"UnionCreate");function E_t(t){return t.some(e=>sp(e))}a(E_t,"IsUnionOptional");function l8e(t){return t.map(e=>sp(e)?b_t(e):e)}a(l8e,"RemoveOptionalFromRest");function b_t(t){return Ka(t,[$u])}a(b_t,"RemoveOptionalFromType");function I_t(t,e){return E_t(t)?Pd(n6(l8e(t),e)):n6(l8e(t),e)}a(I_t,"ResolveUnion");function gC(t,e){return t.length===1?ct(t[0],e):t.length===0?bi(e):I_t(t,e)}a(gC,"UnionEvaluated");f();function qo(t,e){return t.length===0?bi(e):t.length===1?ct(t[0],e):n6(t,e)}a(qo,"Union");f();f();f();var Yj=class extends Nn{static{a(this,"TemplateLiteralParserError")}};function T_t(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}a(T_t,"Unescape");function Rpe(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}a(Rpe,"IsNonEscaped");function Gv(t,e){return Rpe(t,e,"(")}a(Gv,"IsOpenParen");function i6(t,e){return Rpe(t,e,")")}a(i6,"IsCloseParen");function u8e(t,e){return Rpe(t,e,"|")}a(u8e,"IsSeparator");function w_t(t){if(!(Gv(t,0)&&i6(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(Gv(t,r)&&(e+=1),i6(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}a(w_t,"IsGroup");function __t(t){return t.slice(1,t.length-1)}a(__t,"InGroup");function S_t(t){let e=0;for(let r=0;r<t.length;r++)if(Gv(t,r)&&(e+=1),i6(t,r)&&(e-=1),u8e(t,r)&&e===0)return!0;return!1}a(S_t,"IsPrecedenceOr");function R_t(t){for(let e=0;e<t.length;e++)if(Gv(t,e))return!0;return!1}a(R_t,"IsPrecedenceAnd");function k_t(t){let[e,r]=[0,0],n=[];for(let s=0;s<t.length;s++)if(Gv(t,s)&&(e+=1),i6(t,s)&&(e-=1),u8e(t,s)&&e===0){let c=t.slice(r,s);c.length>0&&n.push(Y4(c)),r=s+1}let o=t.slice(r);return o.length>0&&n.push(Y4(o)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}a(k_t,"Or");function P_t(t){function e(o,s){if(!Gv(o,s))throw new Yj("TemplateLiteralParser: Index must point to open parens");let c=0;for(let l=s;l<o.length;l++)if(Gv(o,l)&&(c+=1),i6(o,l)&&(c-=1),c===0)return[s,l];throw new Yj("TemplateLiteralParser: Unclosed group parens in expression")}a(e,"Group");function r(o,s){for(let c=s;c<o.length;c++)if(Gv(o,c))return[s,c];return[s,o.length]}a(r,"Range");let n=[];for(let o=0;o<t.length;o++)if(Gv(t,o)){let[s,c]=e(t,o),l=t.slice(s,c+1);n.push(Y4(l)),o=c}else{let[s,c]=r(t,o),l=t.slice(s,c);l.length>0&&n.push(Y4(l)),o=c-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}a(P_t,"And");function Y4(t){return w_t(t)?Y4(__t(t)):S_t(t)?k_t(t):R_t(t)?P_t(t):{type:"const",const:T_t(t)}}a(Y4,"TemplateLiteralParse");function J4(t){return Y4(t.slice(1,t.length-1))}a(J4,"TemplateLiteralParseExact");var kpe=class extends Nn{static{a(this,"TemplateLiteralFiniteError")}};function D_t(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}a(D_t,"IsNumberExpression");function B_t(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}a(B_t,"IsBooleanExpression");function N_t(t){return t.type==="const"&&t.const===".*"}a(N_t,"IsStringExpression");function e2(t){return D_t(t)||N_t(t)?!1:B_t(t)?!0:t.type==="and"?t.expr.every(e=>e2(e)):t.type==="or"?t.expr.every(e=>e2(e)):t.type==="const"?!0:(()=>{throw new kpe("Unknown expression type")})()}a(e2,"IsTemplateLiteralExpressionFinite");function Jj(t){let e=J4(t.pattern);return e2(e)}a(Jj,"IsTemplateLiteralFinite");f();var Ppe=class extends Nn{static{a(this,"TemplateLiteralGenerateError")}};function*d8e(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of d8e(t.slice(1)))yield`${e}${r}`}a(d8e,"GenerateReduce");function*M_t(t){return yield*d8e(t.expr.map(e=>[...o6(e)]))}a(M_t,"GenerateAnd");function*L_t(t){for(let e of t.expr)yield*o6(e)}a(L_t,"GenerateOr");function*F_t(t){return yield t.const}a(F_t,"GenerateConst");function*o6(t){return t.type==="and"?yield*M_t(t):t.type==="or"?yield*L_t(t):t.type==="const"?yield*F_t(t):(()=>{throw new Ppe("Unknown expression")})()}a(o6,"TemplateLiteralExpressionGenerate");function X4(t){let e=J4(t.pattern);return e2(e)?[...o6(e)]:[]}a(X4,"TemplateLiteralGenerate");f();f();function lo(t,e){return ct({[st]:"Literal",const:t,type:typeof t},e)}a(lo,"Literal");f();function Xj(t){return ct({[st]:"Boolean",type:"boolean"},t)}a(Xj,"Boolean");f();function Z4(t){return ct({[st]:"BigInt",type:"bigint"},t)}a(Z4,"BigInt");f();function Gm(t){return ct({[st]:"Number",type:"number"},t)}a(Gm,"Number");f();function Af(t){return ct({[st]:"String",type:"string"},t)}a(Af,"String");function*O_t(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield Xj():e==="number"?yield Gm():e==="bigint"?yield Z4():e==="string"?yield Af():yield(()=>{let r=e.split("|").map(n=>lo(n.trim()));return r.length===0?bi():r.length===1?r[0]:gC(r)})()}a(O_t,"FromUnion");function*Q_t(t){if(t[1]!=="{"){let e=lo("$"),r=Dpe(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=O_t(t.slice(2,e)),n=Dpe(t.slice(e+1));return yield*[...r,...n]}yield lo(t)}a(Q_t,"FromTerminal");function*Dpe(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=lo(t.slice(0,e)),n=Q_t(t.slice(e));return yield*[r,...n]}yield lo(t)}a(Dpe,"FromSyntax");function f8e(t){return[...Dpe(t)]}a(f8e,"TemplateLiteralSyntax");f();var Bpe=class extends Nn{static{a(this,"TemplateLiteralPatternError")}};function U_t(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}a(U_t,"Escape");function p8e(t,e){return C0(t)?t.pattern.slice(1,t.pattern.length-1):xo(t)?`(${t.anyOf.map(r=>p8e(r,e)).join("|")})`:sA(t)?`${e}${r6}`:oA(t)?`${e}${r6}`:YS(t)?`${e}${r6}`:$v(t)?`${e}${Spe}`:A0(t)?`${e}${U_t(t.const.toString())}`:Hv(t)?`${e}${_pe}`:(()=>{throw new Bpe(`Unexpected Kind '${t[st]}'`)})()}a(p8e,"Visit");function Npe(t){return`^${t.map(e=>p8e(e,"")).join("")}$`}a(Npe,"TemplateLiteralPattern");f();function t2(t){let r=X4(t).map(n=>lo(n));return gC(r)}a(t2,"TemplateLiteralToUnion");f();function Zj(t,e){let r=Ss(t)?Npe(f8e(t)):Npe(t);return ct({[st]:"TemplateLiteral",type:"string",pattern:r},e)}a(Zj,"TemplateLiteral");function q_t(t){return X4(t).map(r=>r.toString())}a(q_t,"FromTemplateLiteral");function H_t(t){let e=[];for(let r of t)e.push(...ap(r));return e}a(H_t,"FromUnion");function $_t(t){return[t.toString()]}a($_t,"FromLiteral");function ap(t){return[...new Set(C0(t)?q_t(t):xo(t)?H_t(t.anyOf):A0(t)?$_t(t.const):sA(t)?["[number]"]:oA(t)?["[number]"]:[])]}a(ap,"IndexPropertyKeys");f();function W_t(t,e,r){let n={};for(let o of Object.getOwnPropertyNames(e))n[o]=_I(t,ap(e[o]),r);return n}a(W_t,"FromProperties");function j_t(t,e,r){return W_t(t,e.properties,r)}a(j_t,"FromMappedResult");function m8e(t,e,r){let n=j_t(t,e,r);return _o(n)}a(m8e,"IndexFromMappedResult");function g8e(t,e){return t.map(r=>A8e(r,e))}a(g8e,"FromRest");function G_t(t){return t.filter(e=>!II(e))}a(G_t,"FromIntersectRest");function V_t(t,e){return eG(G_t(g8e(t,e)))}a(V_t,"FromIntersect");function z_t(t){return t.some(e=>II(e))?[]:t}a(z_t,"FromUnionRest");function K_t(t,e){return gC(z_t(g8e(t,e)))}a(K_t,"FromUnion");function Y_t(t,e){return e in t?t[e]:e==="[number]"?gC(t):bi()}a(Y_t,"FromTuple");function J_t(t,e){return e==="[number]"?t:bi()}a(J_t,"FromArray");function X_t(t,e){return e in t?t[e]:bi()}a(X_t,"FromProperty");function A8e(t,e){return za(t)?V_t(t.allOf,e):xo(t)?K_t(t.anyOf,e):v0(t)?Y_t(t.items??[],e):tA(t)?J_t(t.items,e):Mc(t)?X_t(t.properties,e):bi()}a(A8e,"IndexFromPropertyKey");function s6(t,e){return e.map(r=>A8e(t,r))}a(s6,"IndexFromPropertyKeys");function h8e(t,e){return gC(s6(t,e))}a(h8e,"FromSchema");function _I(t,e,r){if(cc(t)||cc(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Ba(t)||!Ba(e))throw new Nn(n);return Qs("Index",[t,e])}return ta(e)?m8e(t,e,r):y0(e)?y8e(t,e,r):ct(Ba(e)?h8e(t,ap(e)):h8e(t,e),r)}a(_I,"Index");function Z_t(t,e,r){return{[e]:_I(t,[e],Zs(r))}}a(Z_t,"MappedIndexPropertyKey");function eSt(t,e,r){return e.reduce((n,o)=>({...n,...Z_t(t,o,r)}),{})}a(eSt,"MappedIndexPropertyKeys");function tSt(t,e,r){return eSt(t,e.keys,r)}a(tSt,"MappedIndexProperties");function y8e(t,e,r){let n=tSt(t,e,r);return _o(n)}a(y8e,"IndexFromMappedKey");f();function eD(t,e){return ct({[st]:"Iterator",type:"Iterator",items:t},e)}a(eD,"Iterator");f();function rSt(t){let e=[];for(let r in t)sp(t[r])||e.push(r);return e}a(rSt,"RequiredKeys");function nSt(t,e){let r=rSt(t),n=r.length>0?{[st]:"Object",type:"object",properties:t,required:r}:{[st]:"Object",type:"object",properties:t};return ct(n,e)}a(nSt,"_Object");var Ho=nSt;f();function tG(t,e){return ct({[st]:"Promise",type:"Promise",item:t},e)}a(tG,"Promise");f();f();function iSt(t){return ct(Ka(t,[eA]))}a(iSt,"RemoveReadonly");function oSt(t){return ct({...t,[eA]:"Readonly"})}a(oSt,"AddReadonly");function sSt(t,e){return e===!1?iSt(t):oSt(t)}a(sSt,"ReadonlyWithFlag");function cp(t,e){let r=e??!0;return ta(t)?C8e(t,r):sSt(t,r)}a(cp,"Readonly");function aSt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=cp(t[n],e);return r}a(aSt,"FromProperties");function cSt(t,e){return aSt(t.properties,e)}a(cSt,"FromMappedResult");function C8e(t,e){let r=cSt(t,e);return _o(r)}a(C8e,"ReadonlyFromMappedResult");f();function Vm(t,e){return ct(t.length>0?{[st]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[st]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}a(Vm,"Tuple");function v8e(t,e){return t in e?zm(t,e[t]):_o(e)}a(v8e,"FromMappedResult");function lSt(t){return{[t]:lo(t)}}a(lSt,"MappedKeyToKnownMappedResultProperties");function uSt(t){let e={};for(let r of t)e[r]=lo(r);return e}a(uSt,"MappedKeyToUnknownMappedResultProperties");function dSt(t,e){return i8e(e,t)?lSt(t):uSt(e)}a(dSt,"MappedKeyToMappedResultProperties");function fSt(t,e){let r=dSt(t,e);return v8e(t,r)}a(fSt,"FromMappedKey");function a6(t,e){return e.map(r=>zm(t,r))}a(a6,"FromRest");function pSt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=zm(t,e[n]);return r}a(pSt,"FromProperties");function zm(t,e){let r={...e};return sp(e)?Pd(zm(t,Ka(e,[$u]))):W4(e)?cp(zm(t,Ka(e,[eA]))):ta(e)?v8e(t,e.properties):y0(e)?fSt(t,e.keys):nA(e)?K4(a6(t,e.parameters),zm(t,e.returns),r):iA(e)?hC(a6(t,e.parameters),zm(t,e.returns),r):KS(e)?z4(zm(t,e.items),r):JS(e)?eD(zm(t,e.items),r):za(e)?Dd(a6(t,e.allOf),r):xo(e)?qo(a6(t,e.anyOf),r):v0(e)?Vm(a6(t,e.items??[]),r):Mc(e)?Ho(pSt(t,e.properties),r):tA(e)?V4(zm(t,e.items),r):XS(e)?tG(zm(t,e.item),r):e}a(zm,"FromSchemaType");function mSt(t,e){let r={};for(let n of t)r[n]=zm(n,e);return r}a(mSt,"MappedFunctionReturnType");function x8e(t,e,r){let n=Ba(t)?ap(t):t,o=e({[st]:"MappedKey",keys:n}),s=mSt(n,o);return Ho(s,r)}a(x8e,"Mapped");f();function hSt(t){return ct(Ka(t,[$u]))}a(hSt,"RemoveOptional");function gSt(t){return ct({...t,[$u]:"Optional"})}a(gSt,"AddOptional");function ASt(t,e){return e===!1?hSt(t):gSt(t)}a(ASt,"OptionalWithFlag");function Pd(t,e){let r=e??!0;return ta(t)?E8e(t,r):ASt(t,r)}a(Pd,"Optional");function ySt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Pd(t[n],e);return r}a(ySt,"FromProperties");function CSt(t,e){return ySt(t.properties,e)}a(CSt,"FromMappedResult");function E8e(t,e){let r=CSt(t,e);return _o(r)}a(E8e,"OptionalFromMappedResult");f();function c6(t,e={}){let r=t.every(o=>Mc(o)),n=Ba(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return ct(e.unevaluatedProperties===!1||Ba(e.unevaluatedProperties)||r?{...n,[st]:"Intersect",type:"object",allOf:t}:{...n,[st]:"Intersect",allOf:t},e)}a(c6,"IntersectCreate");function vSt(t){return t.every(e=>sp(e))}a(vSt,"IsIntersectOptional");function xSt(t){return Ka(t,[$u])}a(xSt,"RemoveOptionalFromType");function b8e(t){return t.map(e=>sp(e)?xSt(e):e)}a(b8e,"RemoveOptionalFromRest");function ESt(t,e){return vSt(t)?Pd(c6(b8e(t),e)):c6(b8e(t),e)}a(ESt,"ResolveIntersect");function eG(t,e={}){if(t.length===1)return ct(t[0],e);if(t.length===0)return bi(e);if(t.some(r=>Uo(r)))throw new Error("Cannot intersect transform types");return ESt(t,e)}a(eG,"IntersectEvaluated");f();function Dd(t,e){if(t.length===1)return ct(t[0],e);if(t.length===0)return bi(e);if(t.some(r=>Uo(r)))throw new Error("Cannot intersect transform types");return c6(t,e)}a(Dd,"Intersect");f();function Km(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new Nn("Ref: $ref must be a string");return ct({[st]:"Ref",$ref:e},r)}a(Km,"Ref");function bSt(t,e){return Qs("Awaited",[Qs(t,e)])}a(bSt,"FromComputed");function ISt(t){return Qs("Awaited",[Km(t)])}a(ISt,"FromRef");function TSt(t){return Dd(I8e(t))}a(TSt,"FromIntersect");function wSt(t){return qo(I8e(t))}a(wSt,"FromUnion");function _St(t){return tD(t)}a(_St,"FromPromise");function I8e(t){return t.map(e=>tD(e))}a(I8e,"FromRest");function tD(t,e){return ct(rA(t)?bSt(t.target,t.parameters):za(t)?TSt(t.allOf):xo(t)?wSt(t.anyOf):XS(t)?_St(t.item):cc(t)?ISt(t.$ref):t,e)}a(tD,"Awaited");f();f();f();f();function T8e(t){let e=[];for(let r of t)e.push(lp(r));return e}a(T8e,"FromRest");function SSt(t){let e=T8e(t);return a8e(e)}a(SSt,"FromIntersect");function RSt(t){let e=T8e(t);return s8e(e)}a(RSt,"FromUnion");function kSt(t){return t.map((e,r)=>r.toString())}a(kSt,"FromTuple");function PSt(t){return["[number]"]}a(PSt,"FromArray");function DSt(t){return globalThis.Object.getOwnPropertyNames(t)}a(DSt,"FromProperties");function BSt(t){return Mpe?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}a(BSt,"FromPatternProperties");function lp(t){return za(t)?SSt(t.allOf):xo(t)?RSt(t.anyOf):v0(t)?kSt(t.items??[]):tA(t)?PSt(t.items):Mc(t)?DSt(t.properties):ZS(t)?BSt(t.patternProperties):[]}a(lp,"KeyOfPropertyKeys");var Mpe=!1;function Vv(t){Mpe=!0;let e=lp(t);return Mpe=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}a(Vv,"KeyOfPattern");function NSt(t,e){return Qs("KeyOf",[Qs(t,e)])}a(NSt,"FromComputed");function MSt(t){return Qs("KeyOf",[Km(t)])}a(MSt,"FromRef");function LSt(t,e){let r=lp(t),n=FSt(r),o=gC(n);return ct(o,e)}a(LSt,"KeyOfFromType");function FSt(t){return t.map(e=>e==="[number]"?Gm():lo(e))}a(FSt,"KeyOfPropertyKeysToRest");function rD(t,e){return rA(t)?NSt(t.target,t.parameters):cc(t)?MSt(t.$ref):ta(t)?w8e(t,e):LSt(t,e)}a(rD,"KeyOf");function OSt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=rD(t[n],Zs(e));return r}a(OSt,"FromProperties");function QSt(t,e){return OSt(t.properties,e)}a(QSt,"FromMappedResult");function w8e(t,e){let r=QSt(t,e);return _o(r)}a(w8e,"KeyOfFromMappedResult");f();function rG(t){let e=lp(t),r=s6(t,e);return e.map((n,o)=>[e[o],r[o]])}a(rG,"KeyOfPropertyEntries");function USt(t){let e=[];for(let r of t)e.push(...lp(r));return o8e(e)}a(USt,"CompositeKeys");function qSt(t){return t.filter(e=>!II(e))}a(qSt,"FilterNever");function HSt(t,e){let r=[];for(let n of t)r.push(...s6(n,[e]));return qSt(r)}a(HSt,"CompositeProperty");function $St(t,e){let r={};for(let n of e)r[n]=eG(HSt(t,n));return r}a($St,"CompositeProperties");function _8e(t,e){let r=USt(t),n=$St(t,r);return Ho(n,e)}a(_8e,"Composite");f();f();function nG(t){return ct({[st]:"Date",type:"Date"},t)}a(nG,"Date");f();function iG(t){return ct({[st]:"Null",type:"null"},t)}a(iG,"Null");f();function oG(t){return ct({[st]:"Symbol",type:"symbol"},t)}a(oG,"Symbol");f();function sG(t){return ct({[st]:"Undefined",type:"undefined"},t)}a(sG,"Undefined");f();function aG(t){return ct({[st]:"Uint8Array",type:"Uint8Array"},t)}a(aG,"Uint8Array");f();function cA(t){return ct({[st]:"Unknown"},t)}a(cA,"Unknown");function WSt(t){return t.map(e=>Lpe(e,!1))}a(WSt,"FromArray");function jSt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=cp(Lpe(t[r],!1));return e}a(jSt,"FromProperties");function cG(t,e){return e===!0?t:cp(t)}a(cG,"ConditionalReadonly");function Lpe(t,e){return mpe(t)?cG(wI(),e):gpe(t)?cG(wI(),e):Bc(t)?cp(Vm(WSt(t))):Qv(t)?aG():zS(t)?nG():cs(t)?cG(Ho(jSt(t)),e):hpe(t)?cG(hC([],cA()),e):Nc(t)?sG():Ape(t)?iG():ype(t)?oG():KF(t)?Z4():h0(t)?lo(t):Ov(t)?lo(t):Ss(t)?lo(t):Ho({})}a(Lpe,"FromValue");function S8e(t,e){return ct(Lpe(t,!0),e)}a(S8e,"Const");f();function R8e(t,e){return nA(t)?Vm(t.parameters,e):bi(e)}a(R8e,"ConstructorParameters");f();function k8e(t,e){if(Nc(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(s=>isNaN(s)).map(s=>t[s]),o=[...new Set(r)].map(s=>lo(s));return qo(o,{...e,[jm]:"Enum"})}a(k8e,"Enum");f();f();f();var Ope=class extends Nn{static{a(this,"ExtendsResolverError")}},lt;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(lt||(lt={}));function Ym(t){return t===lt.False?t:lt.True}a(Ym,"IntoBooleanResult");function nD(t){throw new Ope(t)}a(nD,"Throw");function rl(t){return Fe.IsNever(t)||Fe.IsIntersect(t)||Fe.IsUnion(t)||Fe.IsUnknown(t)||Fe.IsAny(t)}a(rl,"IsStructuralRight");function nl(t,e){return Fe.IsNever(e)?F8e(t,e):Fe.IsIntersect(e)?lG(t,e):Fe.IsUnion(e)?Hpe(t,e):Fe.IsUnknown(e)?q8e(t,e):Fe.IsAny(e)?qpe(t,e):nD("StructuralRight")}a(nl,"StructuralRight");function qpe(t,e){return lt.True}a(qpe,"FromAnyRight");function GSt(t,e){return Fe.IsIntersect(e)?lG(t,e):Fe.IsUnion(e)&&e.anyOf.some(r=>Fe.IsAny(r)||Fe.IsUnknown(r))?lt.True:Fe.IsUnion(e)?lt.Union:Fe.IsUnknown(e)||Fe.IsAny(e)?lt.True:lt.Union}a(GSt,"FromAny");function VSt(t,e){return Fe.IsUnknown(t)?lt.False:Fe.IsAny(t)?lt.Union:Fe.IsNever(t)?lt.True:lt.False}a(VSt,"FromArrayRight");function zSt(t,e){return Fe.IsObject(e)&&uG(e)?lt.True:rl(e)?nl(t,e):Fe.IsArray(e)?Ym(us(t.items,e.items)):lt.False}a(zSt,"FromArray");function KSt(t,e){return rl(e)?nl(t,e):Fe.IsAsyncIterator(e)?Ym(us(t.items,e.items)):lt.False}a(KSt,"FromAsyncIterator");function YSt(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsBigInt(e)?lt.True:lt.False}a(YSt,"FromBigInt");function M8e(t,e){return Fe.IsLiteralBoolean(t)||Fe.IsBoolean(t)?lt.True:lt.False}a(M8e,"FromBooleanRight");function JSt(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsBoolean(e)?lt.True:lt.False}a(JSt,"FromBoolean");function XSt(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsConstructor(e)?t.parameters.length>e.parameters.length?lt.False:t.parameters.every((r,n)=>Ym(us(e.parameters[n],r))===lt.True)?Ym(us(t.returns,e.returns)):lt.False:lt.False}a(XSt,"FromConstructor");function ZSt(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsDate(e)?lt.True:lt.False}a(ZSt,"FromDate");function e2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsFunction(e)?t.parameters.length>e.parameters.length?lt.False:t.parameters.every((r,n)=>Ym(us(e.parameters[n],r))===lt.True)?Ym(us(t.returns,e.returns)):lt.False:lt.False}a(e2t,"FromFunction");function L8e(t,e){return Fe.IsLiteral(t)&&kd.IsNumber(t.const)||Fe.IsNumber(t)||Fe.IsInteger(t)?lt.True:lt.False}a(L8e,"FromIntegerRight");function t2t(t,e){return Fe.IsInteger(e)||Fe.IsNumber(e)?lt.True:rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):lt.False}a(t2t,"FromInteger");function lG(t,e){return e.allOf.every(r=>us(t,r)===lt.True)?lt.True:lt.False}a(lG,"FromIntersectRight");function r2t(t,e){return t.allOf.some(r=>us(r,e)===lt.True)?lt.True:lt.False}a(r2t,"FromIntersect");function n2t(t,e){return rl(e)?nl(t,e):Fe.IsIterator(e)?Ym(us(t.items,e.items)):lt.False}a(n2t,"FromIterator");function i2t(t,e){return Fe.IsLiteral(e)&&e.const===t.const?lt.True:rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsString(e)?U8e(t,e):Fe.IsNumber(e)?O8e(t,e):Fe.IsInteger(e)?L8e(t,e):Fe.IsBoolean(e)?M8e(t,e):lt.False}a(i2t,"FromLiteral");function F8e(t,e){return lt.False}a(F8e,"FromNeverRight");function o2t(t,e){return lt.True}a(o2t,"FromNever");function P8e(t){let[e,r]=[t,0];for(;Fe.IsNot(e);)e=e.not,r+=1;return r%2===0?e:cA()}a(P8e,"UnwrapTNot");function s2t(t,e){return Fe.IsNot(t)?us(P8e(t),e):Fe.IsNot(e)?us(t,P8e(e)):nD("Invalid fallthrough for Not")}a(s2t,"FromNot");function a2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsNull(e)?lt.True:lt.False}a(a2t,"FromNull");function O8e(t,e){return Fe.IsLiteralNumber(t)||Fe.IsNumber(t)||Fe.IsInteger(t)?lt.True:lt.False}a(O8e,"FromNumberRight");function c2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsInteger(e)||Fe.IsNumber(e)?lt.True:lt.False}a(c2t,"FromNumber");function up(t,e){return Object.getOwnPropertyNames(t.properties).length===e}a(up,"IsObjectPropertyCount");function D8e(t){return uG(t)}a(D8e,"IsObjectStringLike");function B8e(t){return up(t,0)||up(t,1)&&"description"in t.properties&&Fe.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Fe.IsString(t.properties.description.anyOf[0])&&Fe.IsUndefined(t.properties.description.anyOf[1])||Fe.IsString(t.properties.description.anyOf[1])&&Fe.IsUndefined(t.properties.description.anyOf[0]))}a(B8e,"IsObjectSymbolLike");function Fpe(t){return up(t,0)}a(Fpe,"IsObjectNumberLike");function N8e(t){return up(t,0)}a(N8e,"IsObjectBooleanLike");function l2t(t){return up(t,0)}a(l2t,"IsObjectBigIntLike");function u2t(t){return up(t,0)}a(u2t,"IsObjectDateLike");function d2t(t){return uG(t)}a(d2t,"IsObjectUint8ArrayLike");function f2t(t){let e=Gm();return up(t,0)||up(t,1)&&"length"in t.properties&&Ym(us(t.properties.length,e))===lt.True}a(f2t,"IsObjectFunctionLike");function p2t(t){return up(t,0)}a(p2t,"IsObjectConstructorLike");function uG(t){let e=Gm();return up(t,0)||up(t,1)&&"length"in t.properties&&Ym(us(t.properties.length,e))===lt.True}a(uG,"IsObjectArrayLike");function m2t(t){let e=hC([wI()],wI());return up(t,0)||up(t,1)&&"then"in t.properties&&Ym(us(t.properties.then,e))===lt.True}a(m2t,"IsObjectPromiseLike");function Q8e(t,e){return us(t,e)===lt.False||Fe.IsOptional(t)&&!Fe.IsOptional(e)?lt.False:lt.True}a(Q8e,"Property");function Bd(t,e){return Fe.IsUnknown(t)?lt.False:Fe.IsAny(t)?lt.Union:Fe.IsNever(t)||Fe.IsLiteralString(t)&&D8e(e)||Fe.IsLiteralNumber(t)&&Fpe(e)||Fe.IsLiteralBoolean(t)&&N8e(e)||Fe.IsSymbol(t)&&B8e(e)||Fe.IsBigInt(t)&&l2t(e)||Fe.IsString(t)&&D8e(e)||Fe.IsSymbol(t)&&B8e(e)||Fe.IsNumber(t)&&Fpe(e)||Fe.IsInteger(t)&&Fpe(e)||Fe.IsBoolean(t)&&N8e(e)||Fe.IsUint8Array(t)&&d2t(e)||Fe.IsDate(t)&&u2t(e)||Fe.IsConstructor(t)&&p2t(e)||Fe.IsFunction(t)&&f2t(e)?lt.True:Fe.IsRecord(t)&&Fe.IsString(Qpe(t))?e[jm]==="Record"?lt.True:lt.False:Fe.IsRecord(t)&&Fe.IsNumber(Qpe(t))?up(e,0)?lt.True:lt.False:lt.False}a(Bd,"FromObjectRight");function h2t(t,e){return rl(e)?nl(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Fe.IsOptional(e.properties[r]))return lt.False;if(Fe.IsOptional(e.properties[r]))return lt.True;if(Q8e(t.properties[r],e.properties[r])===lt.False)return lt.False}return lt.True})():lt.False}a(h2t,"FromObject");function g2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)&&m2t(e)?lt.True:Fe.IsPromise(e)?Ym(us(t.item,e.item)):lt.False}a(g2t,"FromPromise");function Qpe(t){return pC in t.patternProperties?Gm():mC in t.patternProperties?Af():nD("Unknown record key pattern")}a(Qpe,"RecordKey");function Upe(t){return pC in t.patternProperties?t.patternProperties[pC]:mC in t.patternProperties?t.patternProperties[mC]:nD("Unable to get record value schema")}a(Upe,"RecordValue");function Jm(t,e){let[r,n]=[Qpe(e),Upe(e)];return Fe.IsLiteralString(t)&&Fe.IsNumber(r)&&Ym(us(t,n))===lt.True?lt.True:Fe.IsUint8Array(t)&&Fe.IsNumber(r)||Fe.IsString(t)&&Fe.IsNumber(r)||Fe.IsArray(t)&&Fe.IsNumber(r)?us(t,n):Fe.IsObject(t)?(()=>{for(let o of Object.getOwnPropertyNames(t.properties))if(Q8e(n,t.properties[o])===lt.False)return lt.False;return lt.True})():lt.False}a(Jm,"FromRecordRight");function A2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?us(Upe(t),Upe(e)):lt.False}a(A2t,"FromRecord");function y2t(t,e){let r=Fe.IsRegExp(t)?Af():t,n=Fe.IsRegExp(e)?Af():e;return us(r,n)}a(y2t,"FromRegExp");function U8e(t,e){return Fe.IsLiteral(t)&&kd.IsString(t.const)||Fe.IsString(t)?lt.True:lt.False}a(U8e,"FromStringRight");function C2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsString(e)?lt.True:lt.False}a(C2t,"FromString");function v2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsSymbol(e)?lt.True:lt.False}a(v2t,"FromSymbol");function x2t(t,e){return Fe.IsTemplateLiteral(t)?us(t2(t),e):Fe.IsTemplateLiteral(e)?us(t,t2(e)):nD("Invalid fallthrough for TemplateLiteral")}a(x2t,"FromTemplateLiteral");function E2t(t,e){return Fe.IsArray(e)&&t.items!==void 0&&t.items.every(r=>us(r,e.items)===lt.True)}a(E2t,"IsArrayOfTuple");function b2t(t,e){return Fe.IsNever(t)?lt.True:Fe.IsUnknown(t)?lt.False:Fe.IsAny(t)?lt.Union:lt.False}a(b2t,"FromTupleRight");function I2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)&&uG(e)||Fe.IsArray(e)&&E2t(t,e)?lt.True:Fe.IsTuple(e)?kd.IsUndefined(t.items)&&!kd.IsUndefined(e.items)||!kd.IsUndefined(t.items)&&kd.IsUndefined(e.items)?lt.False:kd.IsUndefined(t.items)&&!kd.IsUndefined(e.items)||t.items.every((r,n)=>us(r,e.items[n])===lt.True)?lt.True:lt.False:lt.False}a(I2t,"FromTuple");function T2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsUint8Array(e)?lt.True:lt.False}a(T2t,"FromUint8Array");function w2t(t,e){return rl(e)?nl(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsRecord(e)?Jm(t,e):Fe.IsVoid(e)?R2t(t,e):Fe.IsUndefined(e)?lt.True:lt.False}a(w2t,"FromUndefined");function Hpe(t,e){return e.anyOf.some(r=>us(t,r)===lt.True)?lt.True:lt.False}a(Hpe,"FromUnionRight");function _2t(t,e){return t.anyOf.every(r=>us(r,e)===lt.True)?lt.True:lt.False}a(_2t,"FromUnion");function q8e(t,e){return lt.True}a(q8e,"FromUnknownRight");function S2t(t,e){return Fe.IsNever(e)?F8e(t,e):Fe.IsIntersect(e)?lG(t,e):Fe.IsUnion(e)?Hpe(t,e):Fe.IsAny(e)?qpe(t,e):Fe.IsString(e)?U8e(t,e):Fe.IsNumber(e)?O8e(t,e):Fe.IsInteger(e)?L8e(t,e):Fe.IsBoolean(e)?M8e(t,e):Fe.IsArray(e)?VSt(t,e):Fe.IsTuple(e)?b2t(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsUnknown(e)?lt.True:lt.False}a(S2t,"FromUnknown");function R2t(t,e){return Fe.IsUndefined(t)||Fe.IsUndefined(t)?lt.True:lt.False}a(R2t,"FromVoidRight");function k2t(t,e){return Fe.IsIntersect(e)?lG(t,e):Fe.IsUnion(e)?Hpe(t,e):Fe.IsUnknown(e)?q8e(t,e):Fe.IsAny(e)?qpe(t,e):Fe.IsObject(e)?Bd(t,e):Fe.IsVoid(e)?lt.True:lt.False}a(k2t,"FromVoid");function us(t,e){return Fe.IsTemplateLiteral(t)||Fe.IsTemplateLiteral(e)?x2t(t,e):Fe.IsRegExp(t)||Fe.IsRegExp(e)?y2t(t,e):Fe.IsNot(t)||Fe.IsNot(e)?s2t(t,e):Fe.IsAny(t)?GSt(t,e):Fe.IsArray(t)?zSt(t,e):Fe.IsBigInt(t)?YSt(t,e):Fe.IsBoolean(t)?JSt(t,e):Fe.IsAsyncIterator(t)?KSt(t,e):Fe.IsConstructor(t)?XSt(t,e):Fe.IsDate(t)?ZSt(t,e):Fe.IsFunction(t)?e2t(t,e):Fe.IsInteger(t)?t2t(t,e):Fe.IsIntersect(t)?r2t(t,e):Fe.IsIterator(t)?n2t(t,e):Fe.IsLiteral(t)?i2t(t,e):Fe.IsNever(t)?o2t(t,e):Fe.IsNull(t)?a2t(t,e):Fe.IsNumber(t)?c2t(t,e):Fe.IsObject(t)?h2t(t,e):Fe.IsRecord(t)?A2t(t,e):Fe.IsString(t)?C2t(t,e):Fe.IsSymbol(t)?v2t(t,e):Fe.IsTuple(t)?I2t(t,e):Fe.IsPromise(t)?g2t(t,e):Fe.IsUint8Array(t)?T2t(t,e):Fe.IsUndefined(t)?w2t(t,e):Fe.IsUnion(t)?_2t(t,e):Fe.IsUnknown(t)?S2t(t,e):Fe.IsVoid(t)?k2t(t,e):nD(`Unknown left type operand '${t[st]}'`)}a(us,"Visit");function SI(t,e){return us(t,e)}a(SI,"ExtendsCheck");f();f();f();function P2t(t,e,r,n,o){let s={};for(let c of globalThis.Object.getOwnPropertyNames(t))s[c]=iD(t[c],e,r,n,Zs(o));return s}a(P2t,"FromProperties");function D2t(t,e,r,n,o){return P2t(t.properties,e,r,n,o)}a(D2t,"FromMappedResult");function H8e(t,e,r,n,o){let s=D2t(t,e,r,n,o);return _o(s)}a(H8e,"ExtendsFromMappedResult");function B2t(t,e,r,n){let o=SI(t,e);return o===lt.Union?qo([r,n]):o===lt.True?r:n}a(B2t,"ExtendsResolve");function iD(t,e,r,n,o){return ta(t)?H8e(t,e,r,n,o):y0(t)?ct($8e(t,e,r,n,o)):ct(B2t(t,e,r,n),o)}a(iD,"Extends");function N2t(t,e,r,n,o){return{[t]:iD(lo(t),e,r,n,Zs(o))}}a(N2t,"FromPropertyKey");function M2t(t,e,r,n,o){return t.reduce((s,c)=>({...s,...N2t(c,e,r,n,o)}),{})}a(M2t,"FromPropertyKeys");function L2t(t,e,r,n,o){return M2t(t.keys,e,r,n,o)}a(L2t,"FromMappedKey");function $8e(t,e,r,n,o){let s=L2t(t,e,r,n,o);return _o(s)}a($8e,"ExtendsFromMappedKey");f();function F2t(t){return t.allOf.every(e=>zv(e))}a(F2t,"Intersect");function O2t(t){return t.anyOf.some(e=>zv(e))}a(O2t,"Union");function Q2t(t){return!zv(t.not)}a(Q2t,"Not");function zv(t){return t[st]==="Intersect"?F2t(t):t[st]==="Union"?O2t(t):t[st]==="Not"?Q2t(t):t[st]==="Undefined"}a(zv,"ExtendsUndefinedCheck");f();function W8e(t,e){return oD(t2(t),e)}a(W8e,"ExcludeFromTemplateLiteral");function U2t(t,e){let r=t.filter(n=>SI(n,e)===lt.False);return r.length===1?r[0]:qo(r)}a(U2t,"ExcludeRest");function oD(t,e,r={}){return C0(t)?ct(W8e(t,e),r):ta(t)?ct(j8e(t,e),r):ct(xo(t)?U2t(t.anyOf,e):SI(t,e)!==lt.False?bi():t,r)}a(oD,"Exclude");function q2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=oD(t[n],e);return r}a(q2t,"FromProperties");function H2t(t,e){return q2t(t.properties,e)}a(H2t,"FromMappedResult");function j8e(t,e){let r=H2t(t,e);return _o(r)}a(j8e,"ExcludeFromMappedResult");f();f();f();function G8e(t,e){return sD(t2(t),e)}a(G8e,"ExtractFromTemplateLiteral");function $2t(t,e){let r=t.filter(n=>SI(n,e)!==lt.False);return r.length===1?r[0]:qo(r)}a($2t,"ExtractRest");function sD(t,e,r){return C0(t)?ct(G8e(t,e),r):ta(t)?ct(V8e(t,e),r):ct(xo(t)?$2t(t.anyOf,e):SI(t,e)!==lt.False?t:bi(),r)}a(sD,"Extract");function W2t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=sD(t[n],e);return r}a(W2t,"FromProperties");function j2t(t,e){return W2t(t.properties,e)}a(j2t,"FromMappedResult");function V8e(t,e){let r=j2t(t,e);return _o(r)}a(V8e,"ExtractFromMappedResult");f();function z8e(t,e){return nA(t)?ct(t.returns,e):bi(e)}a(z8e,"InstanceType");f();f();function dG(t){return cp(Pd(t))}a(dG,"ReadonlyOptional");f();function r2(t,e,r){return ct({[st]:"Record",type:"object",patternProperties:{[t]:e}},r)}a(r2,"RecordCreateFromPattern");function $pe(t,e,r){let n={};for(let o of t)n[o]=e;return Ho(n,{...r,[jm]:"Record"})}a($pe,"RecordCreateFromKeys");function G2t(t,e,r){return Jj(t)?$pe(ap(t),e,r):r2(t.pattern,e,r)}a(G2t,"FromTemplateLiteralKey");function V2t(t,e,r){return $pe(ap(qo(t)),e,r)}a(V2t,"FromUnionKey");function z2t(t,e,r){return $pe([t.toString()],e,r)}a(z2t,"FromLiteralKey");function K2t(t,e,r){return r2(t.source,e,r)}a(K2t,"FromRegExpKey");function Y2t(t,e,r){let n=Nc(t.pattern)?mC:t.pattern;return r2(n,e,r)}a(Y2t,"FromStringKey");function J2t(t,e,r){return r2(mC,e,r)}a(J2t,"FromAnyKey");function X2t(t,e,r){return r2(n8e,e,r)}a(X2t,"FromNeverKey");function Z2t(t,e,r){return Ho({true:e,false:e},r)}a(Z2t,"FromBooleanKey");function eRt(t,e,r){return r2(pC,e,r)}a(eRt,"FromIntegerKey");function tRt(t,e,r){return r2(pC,e,r)}a(tRt,"FromNumberKey");function fG(t,e,r={}){return xo(t)?V2t(t.anyOf,e,r):C0(t)?G2t(t,e,r):A0(t)?z2t(t.const,e,r):Hv(t)?Z2t(t,e,r):oA(t)?eRt(t,e,r):sA(t)?tRt(t,e,r):Epe(t)?K2t(t,e,r):$v(t)?Y2t(t,e,r):vpe(t)?J2t(t,e,r):II(t)?X2t(t,e,r):bi(r)}a(fG,"Record");function pG(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}a(pG,"RecordPattern");function K8e(t){let e=pG(t);return e===mC?Af():e===pC?Gm():Af({pattern:e})}a(K8e,"RecordKey");function mG(t){return t.patternProperties[pG(t)]}a(mG,"RecordValue");function rRt(t,e){return e.parameters=l6(t,e.parameters),e.returns=lA(t,e.returns),e}a(rRt,"FromConstructor");function nRt(t,e){return e.parameters=l6(t,e.parameters),e.returns=lA(t,e.returns),e}a(nRt,"FromFunction");function iRt(t,e){return e.allOf=l6(t,e.allOf),e}a(iRt,"FromIntersect");function oRt(t,e){return e.anyOf=l6(t,e.anyOf),e}a(oRt,"FromUnion");function sRt(t,e){return Nc(e.items)||(e.items=l6(t,e.items)),e}a(sRt,"FromTuple");function aRt(t,e){return e.items=lA(t,e.items),e}a(aRt,"FromArray");function cRt(t,e){return e.items=lA(t,e.items),e}a(cRt,"FromAsyncIterator");function lRt(t,e){return e.items=lA(t,e.items),e}a(lRt,"FromIterator");function uRt(t,e){return e.item=lA(t,e.item),e}a(uRt,"FromPromise");function dRt(t,e){let r=hRt(t,e.properties);return{...e,...Ho(r)}}a(dRt,"FromObject");function fRt(t,e){let r=lA(t,K8e(e)),n=lA(t,mG(e)),o=fG(r,n);return{...e,...o}}a(fRt,"FromRecord");function pRt(t,e){return e.index in t?t[e.index]:cA()}a(pRt,"FromArgument");function mRt(t,e){let r=W4(e),n=sp(e),o=lA(t,e);return r&&n?dG(o):r&&!n?cp(o):!r&&n?Pd(o):o}a(mRt,"FromProperty");function hRt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:mRt(t,e[n])}),{})}a(hRt,"FromProperties");function l6(t,e){return e.map(r=>lA(t,r))}a(l6,"FromTypes");function lA(t,e){return nA(e)?rRt(t,e):iA(e)?nRt(t,e):za(e)?iRt(t,e):xo(e)?oRt(t,e):v0(e)?sRt(t,e):tA(e)?aRt(t,e):KS(e)?cRt(t,e):JS(e)?lRt(t,e):XS(e)?uRt(t,e):Mc(e)?dRt(t,e):ZS(e)?fRt(t,e):xpe(e)?pRt(t,e):e}a(lA,"FromType");function Y8e(t,e){return lA(e,H4(t))}a(Y8e,"Instantiate");f();function J8e(t){return ct({[st]:"Integer",type:"integer"},t)}a(J8e,"Integer");f();f();f();function gRt(t,e,r){return{[t]:uA(lo(t),e,Zs(r))}}a(gRt,"MappedIntrinsicPropertyKey");function ARt(t,e,r){return t.reduce((o,s)=>({...o,...gRt(s,e,r)}),{})}a(ARt,"MappedIntrinsicPropertyKeys");function yRt(t,e,r){return ARt(t.keys,e,r)}a(yRt,"MappedIntrinsicProperties");function X8e(t,e,r){let n=yRt(t,e,r);return _o(n)}a(X8e,"IntrinsicFromMappedKey");function CRt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}a(CRt,"ApplyUncapitalize");function vRt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}a(vRt,"ApplyCapitalize");function xRt(t){return t.toUpperCase()}a(xRt,"ApplyUppercase");function ERt(t){return t.toLowerCase()}a(ERt,"ApplyLowercase");function bRt(t,e,r){let n=J4(t.pattern);if(!e2(n))return{...t,pattern:Z8e(t.pattern,e)};let c=[...o6(n)].map(d=>lo(d)),l=eMe(c,e),u=qo(l);return Zj([u],r)}a(bRt,"FromTemplateLiteral");function Z8e(t,e){return typeof t=="string"?e==="Uncapitalize"?CRt(t):e==="Capitalize"?vRt(t):e==="Uppercase"?xRt(t):e==="Lowercase"?ERt(t):t:t.toString()}a(Z8e,"FromLiteralValue");function eMe(t,e){return t.map(r=>uA(r,e))}a(eMe,"FromRest");function uA(t,e,r={}){return y0(t)?X8e(t,e,r):C0(t)?bRt(t,e,r):xo(t)?qo(eMe(t.anyOf,e),r):A0(t)?lo(Z8e(t.const,e),r):ct(t,r)}a(uA,"Intrinsic");function tMe(t,e={}){return uA(t,"Capitalize",e)}a(tMe,"Capitalize");f();function rMe(t,e={}){return uA(t,"Lowercase",e)}a(rMe,"Lowercase");f();function nMe(t,e={}){return uA(t,"Uncapitalize",e)}a(nMe,"Uncapitalize");f();function iMe(t,e={}){return uA(t,"Uppercase",e)}a(iMe,"Uppercase");f();f();f();f();f();function IRt(t,e,r){let n={};for(let o of globalThis.Object.getOwnPropertyNames(t))n[o]=RI(t[o],e,Zs(r));return n}a(IRt,"FromProperties");function TRt(t,e,r){return IRt(t.properties,e,r)}a(TRt,"FromMappedResult");function oMe(t,e,r){let n=TRt(t,e,r);return _o(n)}a(oMe,"OmitFromMappedResult");function wRt(t,e){return t.map(r=>Wpe(r,e))}a(wRt,"FromIntersect");function _Rt(t,e){return t.map(r=>Wpe(r,e))}a(_Rt,"FromUnion");function SRt(t,e){let{[e]:r,...n}=t;return n}a(SRt,"FromProperty");function RRt(t,e){return e.reduce((r,n)=>SRt(r,n),t)}a(RRt,"FromProperties");function kRt(t,e){let r=Ka(t,[Da,"$id","required","properties"]),n=RRt(t.properties,e);return Ho(n,r)}a(kRt,"FromObject");function PRt(t){let e=t.reduce((r,n)=>zj(n)?[...r,lo(n)]:r,[]);return qo(e)}a(PRt,"UnionFromPropertyKeys");function Wpe(t,e){return za(t)?Dd(wRt(t.allOf,e)):xo(t)?qo(_Rt(t.anyOf,e)):Mc(t)?kRt(t,e):Ho({})}a(Wpe,"OmitResolve");function RI(t,e,r){let n=Bc(e)?PRt(e):e,o=Ba(e)?ap(e):e,s=cc(t),c=cc(e);return ta(t)?oMe(t,o,r):y0(e)?sMe(t,e,r):s&&c?Qs("Omit",[t,n],r):!s&&c?Qs("Omit",[t,n],r):s&&!c?Qs("Omit",[t,n],r):ct({...Wpe(t,o),...r})}a(RI,"Omit");function DRt(t,e,r){return{[e]:RI(t,[e],Zs(r))}}a(DRt,"FromPropertyKey");function BRt(t,e,r){return e.reduce((n,o)=>({...n,...DRt(t,o,r)}),{})}a(BRt,"FromPropertyKeys");function NRt(t,e,r){return BRt(t,e.keys,r)}a(NRt,"FromMappedKey");function sMe(t,e,r){let n=NRt(t,e,r);return _o(n)}a(sMe,"OmitFromMappedKey");f();f();f();function MRt(t,e,r){let n={};for(let o of globalThis.Object.getOwnPropertyNames(t))n[o]=kI(t[o],e,Zs(r));return n}a(MRt,"FromProperties");function LRt(t,e,r){return MRt(t.properties,e,r)}a(LRt,"FromMappedResult");function aMe(t,e,r){let n=LRt(t,e,r);return _o(n)}a(aMe,"PickFromMappedResult");function FRt(t,e){return t.map(r=>jpe(r,e))}a(FRt,"FromIntersect");function ORt(t,e){return t.map(r=>jpe(r,e))}a(ORt,"FromUnion");function QRt(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}a(QRt,"FromProperties");function URt(t,e){let r=Ka(t,[Da,"$id","required","properties"]),n=QRt(t.properties,e);return Ho(n,r)}a(URt,"FromObject");function qRt(t){let e=t.reduce((r,n)=>zj(n)?[...r,lo(n)]:r,[]);return qo(e)}a(qRt,"UnionFromPropertyKeys");function jpe(t,e){return za(t)?Dd(FRt(t.allOf,e)):xo(t)?qo(ORt(t.anyOf,e)):Mc(t)?URt(t,e):Ho({})}a(jpe,"PickResolve");function kI(t,e,r){let n=Bc(e)?qRt(e):e,o=Ba(e)?ap(e):e,s=cc(t),c=cc(e);return ta(t)?aMe(t,o,r):y0(e)?cMe(t,e,r):s&&c?Qs("Pick",[t,n],r):!s&&c?Qs("Pick",[t,n],r):s&&!c?Qs("Pick",[t,n],r):ct({...jpe(t,o),...r})}a(kI,"Pick");function HRt(t,e,r){return{[e]:kI(t,[e],Zs(r))}}a(HRt,"FromPropertyKey");function $Rt(t,e,r){return e.reduce((n,o)=>({...n,...HRt(t,o,r)}),{})}a($Rt,"FromPropertyKeys");function WRt(t,e,r){return $Rt(t,e.keys,r)}a(WRt,"FromMappedKey");function cMe(t,e,r){let n=WRt(t,e,r);return _o(n)}a(cMe,"PickFromMappedKey");f();f();function jRt(t,e){return Qs("Partial",[Qs(t,e)])}a(jRt,"FromComputed");function GRt(t){return Qs("Partial",[Km(t)])}a(GRt,"FromRef");function VRt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Pd(t[r]);return e}a(VRt,"FromProperties");function zRt(t){let e=Ka(t,[Da,"$id","required","properties"]),r=VRt(t.properties);return Ho(r,e)}a(zRt,"FromObject");function lMe(t){return t.map(e=>uMe(e))}a(lMe,"FromRest");function uMe(t){return rA(t)?jRt(t.target,t.parameters):cc(t)?GRt(t.$ref):za(t)?Dd(lMe(t.allOf)):xo(t)?qo(lMe(t.anyOf)):Mc(t)?zRt(t):YS(t)||Hv(t)||oA(t)||A0(t)||XF(t)||sA(t)||$v(t)||ZF(t)||Wv(t)?t:Ho({})}a(uMe,"PartialResolve");function aD(t,e){return ta(t)?dMe(t,e):ct({...uMe(t),...e})}a(aD,"Partial");function KRt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=aD(t[n],Zs(e));return r}a(KRt,"FromProperties");function YRt(t,e){return KRt(t.properties,e)}a(YRt,"FromMappedResult");function dMe(t,e){let r=YRt(t,e);return _o(r)}a(dMe,"PartialFromMappedResult");f();f();function JRt(t,e){return Qs("Required",[Qs(t,e)])}a(JRt,"FromComputed");function XRt(t){return Qs("Required",[Km(t)])}a(XRt,"FromRef");function ZRt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Ka(t[r],[$u]);return e}a(ZRt,"FromProperties");function ekt(t){let e=Ka(t,[Da,"$id","required","properties"]),r=ZRt(t.properties);return Ho(r,e)}a(ekt,"FromObject");function fMe(t){return t.map(e=>pMe(e))}a(fMe,"FromRest");function pMe(t){return rA(t)?JRt(t.target,t.parameters):cc(t)?XRt(t.$ref):za(t)?Dd(fMe(t.allOf)):xo(t)?qo(fMe(t.anyOf)):Mc(t)?ekt(t):YS(t)||Hv(t)||oA(t)||A0(t)||XF(t)||sA(t)||$v(t)||ZF(t)||Wv(t)?t:Ho({})}a(pMe,"RequiredResolve");function cD(t,e){return ta(t)?mMe(t,e):ct({...pMe(t),...e})}a(cD,"Required");function tkt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=cD(t[n],e);return r}a(tkt,"FromProperties");function rkt(t,e){return tkt(t.properties,e)}a(rkt,"FromMappedResult");function mMe(t,e){let r=rkt(t,e);return _o(r)}a(mMe,"RequiredFromMappedResult");function nkt(t,e){return e.map(r=>cc(r)?Gpe(t,r.$ref):x0(t,r))}a(nkt,"DereferenceParameters");function Gpe(t,e){return e in t?cc(t[e])?Gpe(t,t[e].$ref):x0(t,t[e]):bi()}a(Gpe,"Dereference");function ikt(t){return tD(t[0])}a(ikt,"FromAwaited");function okt(t){return _I(t[0],t[1])}a(okt,"FromIndex");function skt(t){return rD(t[0])}a(skt,"FromKeyOf");function akt(t){return aD(t[0])}a(akt,"FromPartial");function ckt(t){return RI(t[0],t[1])}a(ckt,"FromOmit");function lkt(t){return kI(t[0],t[1])}a(lkt,"FromPick");function ukt(t){return cD(t[0])}a(ukt,"FromRequired");function dkt(t,e,r){let n=nkt(t,r);return e==="Awaited"?ikt(n):e==="Index"?okt(n):e==="KeyOf"?skt(n):e==="Partial"?akt(n):e==="Omit"?ckt(n):e==="Pick"?lkt(n):e==="Required"?ukt(n):bi()}a(dkt,"FromComputed");function fkt(t,e){return V4(x0(t,e))}a(fkt,"FromArray");function pkt(t,e){return z4(x0(t,e))}a(pkt,"FromAsyncIterator");function mkt(t,e,r){return K4(u6(t,e),x0(t,r))}a(mkt,"FromConstructor");function hkt(t,e,r){return hC(u6(t,e),x0(t,r))}a(hkt,"FromFunction");function gkt(t,e){return Dd(u6(t,e))}a(gkt,"FromIntersect");function Akt(t,e){return eD(x0(t,e))}a(Akt,"FromIterator");function ykt(t,e){return Ho(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:x0(t,e[n])}),{}))}a(ykt,"FromObject");function Ckt(t,e){let[r,n]=[x0(t,mG(e)),pG(e)],o=H4(e);return o.patternProperties[n]=r,o}a(Ckt,"FromRecord");function vkt(t,e){return cc(e)?{...Gpe(t,e.$ref),[Da]:e[Da]}:e}a(vkt,"FromTransform");function xkt(t,e){return Vm(u6(t,e))}a(xkt,"FromTuple");function Ekt(t,e){return qo(u6(t,e))}a(Ekt,"FromUnion");function u6(t,e){return e.map(r=>x0(t,r))}a(u6,"FromTypes");function x0(t,e){return sp(e)?ct(x0(t,Ka(e,[$u])),e):W4(e)?ct(x0(t,Ka(e,[eA])),e):Uo(e)?ct(vkt(t,e),e):tA(e)?ct(fkt(t,e.items),e):KS(e)?ct(pkt(t,e.items),e):rA(e)?ct(dkt(t,e.target,e.parameters)):nA(e)?ct(mkt(t,e.parameters,e.returns),e):iA(e)?ct(hkt(t,e.parameters,e.returns),e):za(e)?ct(gkt(t,e.allOf),e):JS(e)?ct(Akt(t,e.items),e):Mc(e)?ct(ykt(t,e.properties),e):ZS(e)?ct(Ckt(t,e)):v0(e)?ct(xkt(t,e.items||[]),e):xo(e)?ct(Ekt(t,e.anyOf),e):e}a(x0,"FromType");function bkt(t,e){return e in t?x0(t,t[e]):bi()}a(bkt,"ComputeType");function hMe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:bkt(t,r)}),{})}a(hMe,"ComputeModuleProperties");var Vpe=class{static{a(this,"TModule")}constructor(e){let r=hMe(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:ct(this.$defs[e],r)};return ct({[st]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function gMe(t){return new Vpe(t)}a(gMe,"Module");f();function AMe(t,e){return ct({[st]:"Not",not:t},e)}a(AMe,"Not");f();function yMe(t,e){return iA(t)?Vm(t.parameters,e):bi()}a(yMe,"Parameters");f();var Ikt=0;function CMe(t,e={}){Nc(e.$id)&&(e.$id=`T${Ikt++}`);let r=H4(t({[st]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,ct({[jm]:"Recursive",...r},e)}a(CMe,"Recursive");f();function vMe(t,e){let r=Ss(t)?new globalThis.RegExp(t):t;return ct({[st]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}a(vMe,"RegExp");f();function Tkt(t){return za(t)?t.allOf:xo(t)?t.anyOf:v0(t)?t.items??[]:[]}a(Tkt,"RestResolve");function xMe(t){return Tkt(t)}a(xMe,"Rest");f();function EMe(t,e){return iA(t)?ct(t.returns,e):bi(e)}a(EMe,"ReturnType");f();var zpe=class{static{a(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new Kpe(this.schema,e)}},Kpe=class{static{a(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let s={Encode:a(c=>r[Da].Encode(e(c)),"Encode"),Decode:a(c=>this.decode(r[Da].Decode(c)),"Decode")};return{...r,[Da]:s}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[Da]:n}}Encode(e){return Uo(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function bMe(t){return new zpe(t)}a(bMe,"Transform");f();function IMe(t={}){return ct({[st]:t[st]??"Unsafe"},t)}a(IMe,"Unsafe");f();function TMe(t){return ct({[st]:"Void",type:"void"},t)}a(TMe,"Void");f();var Ype={};Sa(Ype,{Any:()=>wI,Argument:()=>c8e,Array:()=>V4,AsyncIterator:()=>z4,Awaited:()=>tD,BigInt:()=>Z4,Boolean:()=>Xj,Capitalize:()=>tMe,Composite:()=>_8e,Const:()=>S8e,Constructor:()=>K4,ConstructorParameters:()=>R8e,Date:()=>nG,Enum:()=>k8e,Exclude:()=>oD,Extends:()=>iD,Extract:()=>sD,Function:()=>hC,Index:()=>_I,InstanceType:()=>z8e,Instantiate:()=>Y8e,Integer:()=>J8e,Intersect:()=>Dd,Iterator:()=>eD,KeyOf:()=>rD,Literal:()=>lo,Lowercase:()=>rMe,Mapped:()=>x8e,Module:()=>gMe,Never:()=>bi,Not:()=>AMe,Null:()=>iG,Number:()=>Gm,Object:()=>Ho,Omit:()=>RI,Optional:()=>Pd,Parameters:()=>yMe,Partial:()=>aD,Pick:()=>kI,Promise:()=>tG,Readonly:()=>cp,ReadonlyOptional:()=>dG,Record:()=>fG,Recursive:()=>CMe,Ref:()=>Km,RegExp:()=>vMe,Required:()=>cD,Rest:()=>xMe,ReturnType:()=>EMe,String:()=>Af,Symbol:()=>oG,TemplateLiteral:()=>Zj,Transform:()=>bMe,Tuple:()=>Vm,Uint8Array:()=>aG,Uncapitalize:()=>nMe,Undefined:()=>sG,Union:()=>qo,Unknown:()=>cA,Unsafe:()=>IMe,Uppercase:()=>iMe,Void:()=>TMe});f();var E=Ype;f();f();function wkt(t){switch(t.errorType){case it.ArrayContains:return"Expected array to contain at least one matching value";case it.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case it.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case it.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case it.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case it.ArrayUniqueItems:return"Expected array elements to be unique";case it.Array:return"Expected array";case it.AsyncIterator:return"Expected AsyncIterator";case it.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case it.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case it.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case it.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case it.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case it.BigInt:return"Expected bigint";case it.Boolean:return"Expected boolean";case it.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case it.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case it.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case it.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case it.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case it.Date:return"Expected Date";case it.Function:return"Expected function";case it.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case it.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case it.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case it.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case it.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case it.Integer:return"Expected integer";case it.IntersectUnevaluatedProperties:return"Unexpected property";case it.Intersect:return"Expected all values to match";case it.Iterator:return"Expected Iterator";case it.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case it.Never:return"Never";case it.Not:return"Value should not match";case it.Null:return"Expected null";case it.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case it.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case it.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case it.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case it.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case it.Number:return"Expected number";case it.Object:return"Expected object";case it.ObjectAdditionalProperties:return"Unexpected property";case it.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case it.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case it.ObjectRequiredProperty:return"Expected required property";case it.Promise:return"Expected Promise";case it.RegExp:return"Expected string to match regular expression";case it.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case it.StringFormat:return`Expected string to match '${t.schema.format}' format`;case it.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case it.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case it.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case it.String:return"Expected string";case it.Symbol:return"Expected symbol";case it.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case it.Tuple:return"Expected tuple";case it.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case it.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case it.Uint8Array:return"Expected Uint8Array";case it.Undefined:return"Expected undefined";case it.Union:return"Expected union value";case it.Void:return"Expected void";case it.Kind:return`Expected kind '${t.schema[st]}'`;default:return"Unknown error type"}}a(wkt,"DefaultErrorFunction");var _kt=wkt;function wMe(){return _kt}a(wMe,"GetErrorFunction");f();var Jpe=class extends Nn{static{a(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function Skt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new Jpe(t);return So(r,e)}a(Skt,"Resolve");function tu(t,e){return!vo(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}a(tu,"Pushref");function So(t,e){return t[st]==="This"||t[st]==="Ref"?Skt(t,e):t}a(So,"Deref");f();var Xpe=class extends Nn{static{a(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},E0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(E0||(E0={}));var lD=BigInt("14695981039346656037"),[Rkt,kkt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],Pkt=Array.from({length:256}).map((t,e)=>BigInt(e)),_Me=new Float64Array(1),SMe=new DataView(_Me.buffer),RMe=new Uint8Array(_Me.buffer);function*Dkt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}a(Dkt,"NumberToBytes");function Bkt(t){Nd(E0.Array);for(let e of t)uD(e)}a(Bkt,"ArrayType");function Nkt(t){Nd(E0.Boolean),Nd(t?1:0)}a(Nkt,"BooleanType");function Mkt(t){Nd(E0.BigInt),SMe.setBigInt64(0,t);for(let e of RMe)Nd(e)}a(Mkt,"BigIntType");function Lkt(t){Nd(E0.Date),uD(t.getTime())}a(Lkt,"DateType");function Fkt(t){Nd(E0.Null)}a(Fkt,"NullType");function Okt(t){Nd(E0.Number),SMe.setFloat64(0,t);for(let e of RMe)Nd(e)}a(Okt,"NumberType");function Qkt(t){Nd(E0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())uD(e),uD(t[e])}a(Qkt,"ObjectType");function Ukt(t){Nd(E0.String);for(let e=0;e<t.length;e++)for(let r of Dkt(t.charCodeAt(e)))Nd(r)}a(Ukt,"StringType");function qkt(t){Nd(E0.Symbol),uD(t.description)}a(qkt,"SymbolType");function Hkt(t){Nd(E0.Uint8Array);for(let e=0;e<t.length;e++)Nd(t[e])}a(Hkt,"Uint8ArrayType");function $kt(t){return Nd(E0.Undefined)}a($kt,"UndefinedType");function uD(t){if(Bn(t))return Bkt(t);if(fC(t))return Nkt(t);if(Hu(t))return Mkt(t);if(hf(t))return Lkt(t);if(Uv(t))return Fkt(t);if(dn(t))return Okt(t);if(Ri(t))return Qkt(t);if(vo(t))return Ukt(t);if(qv(t))return qkt(t);if($4(t))return Hkt(t);if(ea(t))return $kt(t);throw new Xpe(t)}a(uD,"Visit");function Nd(t){lD=lD^Pkt[t],lD=lD*Rkt%kkt}a(Nd,"FNV1A64");function PI(t){return lD=BigInt("14695981039346656037"),uD(t),lD}a(PI,"Hash");f();var Zpe=class extends Nn{static{a(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function Wkt(t){return t[st]==="Any"||t[st]==="Unknown"}a(Wkt,"IsAnyOrUnknown");function Yi(t){return t!==void 0}a(Yi,"IsDefined");function jkt(t,e,r){return!0}a(jkt,"FromAny");function Gkt(t,e,r){return!0}a(Gkt,"FromArgument");function Vkt(t,e,r){if(!Bn(r)||Yi(t.minItems)&&!(r.length>=t.minItems)||Yi(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(s=>ru(t.items,e,s))||t.uniqueItems===!0&&!function(){let s=new Set;for(let c of r){let l=PI(c);if(s.has(l))return!1;s.add(l)}return!0}())return!1;if(!(Yi(t.contains)||dn(t.minContains)||dn(t.maxContains)))return!0;let n=Yi(t.contains)?t.contains:bi(),o=r.reduce((s,c)=>ru(n,e,c)?s+1:s,0);return!(o===0||dn(t.minContains)&&o<t.minContains||dn(t.maxContains)&&o>t.maxContains)}a(Vkt,"FromArray");function zkt(t,e,r){return Wj(r)}a(zkt,"FromAsyncIterator");function Kkt(t,e,r){return!(!Hu(r)||Yi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Yi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Yi(t.maximum)&&!(r<=t.maximum)||Yi(t.minimum)&&!(r>=t.minimum)||Yi(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}a(Kkt,"FromBigInt");function Ykt(t,e,r){return fC(r)}a(Ykt,"FromBoolean");function Jkt(t,e,r){return ru(t.returns,e,r.prototype)}a(Jkt,"FromConstructor");function Xkt(t,e,r){return!(!hf(r)||Yi(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Yi(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Yi(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Yi(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Yi(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}a(Xkt,"FromDate");function Zkt(t,e,r){return bI(r)}a(Zkt,"FromFunction");function ePt(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return ru(o,[...e,...n],r)}a(ePt,"FromImport");function tPt(t,e,r){return!(!Vj(r)||Yi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Yi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Yi(t.maximum)&&!(r<=t.maximum)||Yi(t.minimum)&&!(r>=t.minimum)||Yi(t.multipleOf)&&r%t.multipleOf!==0)}a(tPt,"FromInteger");function rPt(t,e,r){let n=t.allOf.every(o=>ru(o,e,r));if(t.unevaluatedProperties===!1){let o=new RegExp(Vv(t)),s=Object.getOwnPropertyNames(r).every(c=>o.test(c));return n&&s}else if(Ba(t.unevaluatedProperties)){let o=new RegExp(Vv(t)),s=Object.getOwnPropertyNames(r).every(c=>o.test(c)||ru(t.unevaluatedProperties,e,r[c]));return n&&s}else return n}a(rPt,"FromIntersect");function nPt(t,e,r){return jj(r)}a(nPt,"FromIterator");function iPt(t,e,r){return r===t.const}a(iPt,"FromLiteral");function oPt(t,e,r){return!1}a(oPt,"FromNever");function sPt(t,e,r){return!ru(t.not,e,r)}a(sPt,"FromNot");function aPt(t,e,r){return Uv(r)}a(aPt,"FromNull");function cPt(t,e,r){return!(!Os.IsNumberLike(r)||Yi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Yi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Yi(t.minimum)&&!(r>=t.minimum)||Yi(t.maximum)&&!(r<=t.maximum)||Yi(t.multipleOf)&&r%t.multipleOf!==0)}a(cPt,"FromNumber");function lPt(t,e,r){if(!Os.IsObjectLike(r)||Yi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Yi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let o of n){let s=t.properties[o];if(t.required&&t.required.includes(o)){if(!ru(s,e,r[o])||(zv(s)||Wkt(s))&&!(o in r))return!1}else if(Os.IsExactOptionalProperty(r,o)&&!ru(s,e,r[o]))return!1}if(t.additionalProperties===!1){let o=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&o.length===n.length?!0:o.every(s=>n.includes(s))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(s=>n.includes(s)||ru(t.additionalProperties,e,r[s])):!0}a(lPt,"FromObject");function uPt(t,e,r){return Gj(r)}a(uPt,"FromPromise");function dPt(t,e,r){if(!Os.IsRecordLike(r)||Yi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Yi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,o]=Object.entries(t.patternProperties)[0],s=new RegExp(n),c=Object.entries(r).every(([d,p])=>s.test(d)?ru(o,e,p):!0),l=typeof t.additionalProperties=="object"?Object.entries(r).every(([d,p])=>s.test(d)?!0:ru(t.additionalProperties,e,p)):!0,u=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(d=>s.test(d)):!0;return c&&l&&u}a(dPt,"FromRecord");function fPt(t,e,r){return ru(So(t,e),e,r)}a(fPt,"FromRef");function pPt(t,e,r){let n=new RegExp(t.source,t.flags);return Yi(t.minLength)&&!(r.length>=t.minLength)||Yi(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}a(pPt,"FromRegExp");function mPt(t,e,r){return!vo(r)||Yi(t.minLength)&&!(r.length>=t.minLength)||Yi(t.maxLength)&&!(r.length<=t.maxLength)||Yi(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Yi(t.format)?aA.Has(t.format)?aA.Get(t.format)(r):!1:!0}a(mPt,"FromString");function hPt(t,e,r){return qv(r)}a(hPt,"FromSymbol");function gPt(t,e,r){return vo(r)&&new RegExp(t.pattern).test(r)}a(gPt,"FromTemplateLiteral");function APt(t,e,r){return ru(So(t,e),e,r)}a(APt,"FromThis");function yPt(t,e,r){if(!Bn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!ru(t.items[n],e,r[n]))return!1;return!0}a(yPt,"FromTuple");function CPt(t,e,r){return ea(r)}a(CPt,"FromUndefined");function vPt(t,e,r){return t.anyOf.some(n=>ru(n,e,r))}a(vPt,"FromUnion");function xPt(t,e,r){return!(!$4(r)||Yi(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Yi(t.minByteLength)&&!(r.length>=t.minByteLength))}a(xPt,"FromUint8Array");function EPt(t,e,r){return!0}a(EPt,"FromUnknown");function bPt(t,e,r){return Os.IsVoidLike(r)}a(bPt,"FromVoid");function IPt(t,e,r){return gf.Has(t[st])?gf.Get(t[st])(t,r):!1}a(IPt,"FromKind");function ru(t,e,r){let n=Yi(t.$id)?tu(t,e):e,o=t;switch(o[st]){case"Any":return jkt(o,n,r);case"Argument":return Gkt(o,n,r);case"Array":return Vkt(o,n,r);case"AsyncIterator":return zkt(o,n,r);case"BigInt":return Kkt(o,n,r);case"Boolean":return Ykt(o,n,r);case"Constructor":return Jkt(o,n,r);case"Date":return Xkt(o,n,r);case"Function":return Zkt(o,n,r);case"Import":return ePt(o,n,r);case"Integer":return tPt(o,n,r);case"Intersect":return rPt(o,n,r);case"Iterator":return nPt(o,n,r);case"Literal":return iPt(o,n,r);case"Never":return oPt(o,n,r);case"Not":return sPt(o,n,r);case"Null":return aPt(o,n,r);case"Number":return cPt(o,n,r);case"Object":return lPt(o,n,r);case"Promise":return uPt(o,n,r);case"Record":return dPt(o,n,r);case"Ref":return fPt(o,n,r);case"RegExp":return pPt(o,n,r);case"String":return mPt(o,n,r);case"Symbol":return hPt(o,n,r);case"TemplateLiteral":return gPt(o,n,r);case"This":return APt(o,n,r);case"Tuple":return yPt(o,n,r);case"Undefined":return CPt(o,n,r);case"Union":return vPt(o,n,r);case"Uint8Array":return xPt(o,n,r);case"Unknown":return EPt(o,n,r);case"Void":return bPt(o,n,r);default:if(!gf.Has(o[st]))throw new Zpe(o);return IPt(o,n,r)}}a(ru,"Visit");function Ni(...t){return t.length===3?ru(t[0],t[1],t[2]):ru(t[0],[],t[1])}a(Ni,"Check");var it;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(it||(it={}));var e0e=class extends Nn{static{a(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function Kv(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}a(Kv,"EscapeKey");function Ji(t){return t!==void 0}a(Ji,"IsDefined");var DI=class{static{a(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function hr(t,e,r,n,o=[]){return{type:t,schema:e,path:r,value:n,message:wMe()({errorType:t,path:r,schema:e,value:n,errors:o}),errors:o}}a(hr,"Create");function*TPt(t,e,r,n){}a(TPt,"FromAny");function*wPt(t,e,r,n){}a(wPt,"FromArgument");function*_Pt(t,e,r,n){if(!Bn(n))return yield hr(it.Array,t,r,n);Ji(t.minItems)&&!(n.length>=t.minItems)&&(yield hr(it.ArrayMinItems,t,r,n)),Ji(t.maxItems)&&!(n.length<=t.maxItems)&&(yield hr(it.ArrayMaxItems,t,r,n));for(let c=0;c<n.length;c++)yield*nu(t.items,e,`${r}/${c}`,n[c]);if(t.uniqueItems===!0&&!function(){let c=new Set;for(let l of n){let u=PI(l);if(c.has(u))return!1;c.add(u)}return!0}()&&(yield hr(it.ArrayUniqueItems,t,r,n)),!(Ji(t.contains)||Ji(t.minContains)||Ji(t.maxContains)))return;let o=Ji(t.contains)?t.contains:bi(),s=n.reduce((c,l,u)=>nu(o,e,`${r}${u}`,l).next().done===!0?c+1:c,0);s===0&&(yield hr(it.ArrayContains,t,r,n)),dn(t.minContains)&&s<t.minContains&&(yield hr(it.ArrayMinContains,t,r,n)),dn(t.maxContains)&&s>t.maxContains&&(yield hr(it.ArrayMaxContains,t,r,n))}a(_Pt,"FromArray");function*SPt(t,e,r,n){Wj(n)||(yield hr(it.AsyncIterator,t,r,n))}a(SPt,"FromAsyncIterator");function*RPt(t,e,r,n){if(!Hu(n))return yield hr(it.BigInt,t,r,n);Ji(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield hr(it.BigIntExclusiveMaximum,t,r,n)),Ji(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield hr(it.BigIntExclusiveMinimum,t,r,n)),Ji(t.maximum)&&!(n<=t.maximum)&&(yield hr(it.BigIntMaximum,t,r,n)),Ji(t.minimum)&&!(n>=t.minimum)&&(yield hr(it.BigIntMinimum,t,r,n)),Ji(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield hr(it.BigIntMultipleOf,t,r,n))}a(RPt,"FromBigInt");function*kPt(t,e,r,n){fC(n)||(yield hr(it.Boolean,t,r,n))}a(kPt,"FromBoolean");function*PPt(t,e,r,n){yield*nu(t.returns,e,r,n.prototype)}a(PPt,"FromConstructor");function*DPt(t,e,r,n){if(!hf(n))return yield hr(it.Date,t,r,n);Ji(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield hr(it.DateExclusiveMaximumTimestamp,t,r,n)),Ji(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield hr(it.DateExclusiveMinimumTimestamp,t,r,n)),Ji(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield hr(it.DateMaximumTimestamp,t,r,n)),Ji(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield hr(it.DateMinimumTimestamp,t,r,n)),Ji(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield hr(it.DateMultipleOfTimestamp,t,r,n))}a(DPt,"FromDate");function*BPt(t,e,r,n){bI(n)||(yield hr(it.Function,t,r,n))}a(BPt,"FromFunction");function*NPt(t,e,r,n){let o=globalThis.Object.values(t.$defs),s=t.$defs[t.$ref];yield*nu(s,[...e,...o],r,n)}a(NPt,"FromImport");function*MPt(t,e,r,n){if(!Vj(n))return yield hr(it.Integer,t,r,n);Ji(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield hr(it.IntegerExclusiveMaximum,t,r,n)),Ji(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield hr(it.IntegerExclusiveMinimum,t,r,n)),Ji(t.maximum)&&!(n<=t.maximum)&&(yield hr(it.IntegerMaximum,t,r,n)),Ji(t.minimum)&&!(n>=t.minimum)&&(yield hr(it.IntegerMinimum,t,r,n)),Ji(t.multipleOf)&&n%t.multipleOf!==0&&(yield hr(it.IntegerMultipleOf,t,r,n))}a(MPt,"FromInteger");function*LPt(t,e,r,n){let o=!1;for(let s of t.allOf)for(let c of nu(s,e,r,n))o=!0,yield c;if(o)return yield hr(it.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let s=new RegExp(Vv(t));for(let c of Object.getOwnPropertyNames(n))s.test(c)||(yield hr(it.IntersectUnevaluatedProperties,t,`${r}/${c}`,n))}if(typeof t.unevaluatedProperties=="object"){let s=new RegExp(Vv(t));for(let c of Object.getOwnPropertyNames(n))if(!s.test(c)){let l=nu(t.unevaluatedProperties,e,`${r}/${c}`,n[c]).next();l.done||(yield l.value)}}}a(LPt,"FromIntersect");function*FPt(t,e,r,n){jj(n)||(yield hr(it.Iterator,t,r,n))}a(FPt,"FromIterator");function*OPt(t,e,r,n){n!==t.const&&(yield hr(it.Literal,t,r,n))}a(OPt,"FromLiteral");function*QPt(t,e,r,n){yield hr(it.Never,t,r,n)}a(QPt,"FromNever");function*UPt(t,e,r,n){nu(t.not,e,r,n).next().done===!0&&(yield hr(it.Not,t,r,n))}a(UPt,"FromNot");function*qPt(t,e,r,n){Uv(n)||(yield hr(it.Null,t,r,n))}a(qPt,"FromNull");function*HPt(t,e,r,n){if(!Os.IsNumberLike(n))return yield hr(it.Number,t,r,n);Ji(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield hr(it.NumberExclusiveMaximum,t,r,n)),Ji(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield hr(it.NumberExclusiveMinimum,t,r,n)),Ji(t.maximum)&&!(n<=t.maximum)&&(yield hr(it.NumberMaximum,t,r,n)),Ji(t.minimum)&&!(n>=t.minimum)&&(yield hr(it.NumberMinimum,t,r,n)),Ji(t.multipleOf)&&n%t.multipleOf!==0&&(yield hr(it.NumberMultipleOf,t,r,n))}a(HPt,"FromNumber");function*$Pt(t,e,r,n){if(!Os.IsObjectLike(n))return yield hr(it.Object,t,r,n);Ji(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield hr(it.ObjectMinProperties,t,r,n)),Ji(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield hr(it.ObjectMaxProperties,t,r,n));let o=Array.isArray(t.required)?t.required:[],s=Object.getOwnPropertyNames(t.properties),c=Object.getOwnPropertyNames(n);for(let l of o)c.includes(l)||(yield hr(it.ObjectRequiredProperty,t.properties[l],`${r}/${Kv(l)}`,void 0));if(t.additionalProperties===!1)for(let l of c)s.includes(l)||(yield hr(it.ObjectAdditionalProperties,t,`${r}/${Kv(l)}`,n[l]));if(typeof t.additionalProperties=="object")for(let l of c)s.includes(l)||(yield*nu(t.additionalProperties,e,`${r}/${Kv(l)}`,n[l]));for(let l of s){let u=t.properties[l];t.required&&t.required.includes(l)?(yield*nu(u,e,`${r}/${Kv(l)}`,n[l]),zv(t)&&!(l in n)&&(yield hr(it.ObjectRequiredProperty,u,`${r}/${Kv(l)}`,void 0))):Os.IsExactOptionalProperty(n,l)&&(yield*nu(u,e,`${r}/${Kv(l)}`,n[l]))}}a($Pt,"FromObject");function*WPt(t,e,r,n){Gj(n)||(yield hr(it.Promise,t,r,n))}a(WPt,"FromPromise");function*jPt(t,e,r,n){if(!Os.IsRecordLike(n))return yield hr(it.Object,t,r,n);Ji(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield hr(it.ObjectMinProperties,t,r,n)),Ji(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield hr(it.ObjectMaxProperties,t,r,n));let[o,s]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let[l,u]of Object.entries(n))c.test(l)&&(yield*nu(s,e,`${r}/${Kv(l)}`,u));if(typeof t.additionalProperties=="object")for(let[l,u]of Object.entries(n))c.test(l)||(yield*nu(t.additionalProperties,e,`${r}/${Kv(l)}`,u));if(t.additionalProperties===!1){for(let[l,u]of Object.entries(n))if(!c.test(l))return yield hr(it.ObjectAdditionalProperties,t,`${r}/${Kv(l)}`,u)}}a(jPt,"FromRecord");function*GPt(t,e,r,n){yield*nu(So(t,e),e,r,n)}a(GPt,"FromRef");function*VPt(t,e,r,n){if(!vo(n))return yield hr(it.String,t,r,n);if(Ji(t.minLength)&&!(n.length>=t.minLength)&&(yield hr(it.StringMinLength,t,r,n)),Ji(t.maxLength)&&!(n.length<=t.maxLength)&&(yield hr(it.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield hr(it.RegExp,t,r,n)}a(VPt,"FromRegExp");function*zPt(t,e,r,n){if(!vo(n))return yield hr(it.String,t,r,n);Ji(t.minLength)&&!(n.length>=t.minLength)&&(yield hr(it.StringMinLength,t,r,n)),Ji(t.maxLength)&&!(n.length<=t.maxLength)&&(yield hr(it.StringMaxLength,t,r,n)),vo(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield hr(it.StringPattern,t,r,n))),vo(t.format)&&(aA.Has(t.format)?aA.Get(t.format)(n)||(yield hr(it.StringFormat,t,r,n)):yield hr(it.StringFormatUnknown,t,r,n))}a(zPt,"FromString");function*KPt(t,e,r,n){qv(n)||(yield hr(it.Symbol,t,r,n))}a(KPt,"FromSymbol");function*YPt(t,e,r,n){if(!vo(n))return yield hr(it.String,t,r,n);new RegExp(t.pattern).test(n)||(yield hr(it.StringPattern,t,r,n))}a(YPt,"FromTemplateLiteral");function*JPt(t,e,r,n){yield*nu(So(t,e),e,r,n)}a(JPt,"FromThis");function*XPt(t,e,r,n){if(!Bn(n))return yield hr(it.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield hr(it.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield hr(it.TupleLength,t,r,n);if(t.items)for(let o=0;o<t.items.length;o++)yield*nu(t.items[o],e,`${r}/${o}`,n[o])}a(XPt,"FromTuple");function*ZPt(t,e,r,n){ea(n)||(yield hr(it.Undefined,t,r,n))}a(ZPt,"FromUndefined");function*e5t(t,e,r,n){if(Ni(t,e,n))return;let o=t.anyOf.map(s=>new DI(nu(s,e,r,n)));yield hr(it.Union,t,r,n,o)}a(e5t,"FromUnion");function*t5t(t,e,r,n){if(!$4(n))return yield hr(it.Uint8Array,t,r,n);Ji(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield hr(it.Uint8ArrayMaxByteLength,t,r,n)),Ji(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield hr(it.Uint8ArrayMinByteLength,t,r,n))}a(t5t,"FromUint8Array");function*r5t(t,e,r,n){}a(r5t,"FromUnknown");function*n5t(t,e,r,n){Os.IsVoidLike(n)||(yield hr(it.Void,t,r,n))}a(n5t,"FromVoid");function*i5t(t,e,r,n){gf.Get(t[st])(t,n)||(yield hr(it.Kind,t,r,n))}a(i5t,"FromKind");function*nu(t,e,r,n){let o=Ji(t.$id)?[...e,t]:e,s=t;switch(s[st]){case"Any":return yield*TPt(s,o,r,n);case"Argument":return yield*wPt(s,o,r,n);case"Array":return yield*_Pt(s,o,r,n);case"AsyncIterator":return yield*SPt(s,o,r,n);case"BigInt":return yield*RPt(s,o,r,n);case"Boolean":return yield*kPt(s,o,r,n);case"Constructor":return yield*PPt(s,o,r,n);case"Date":return yield*DPt(s,o,r,n);case"Function":return yield*BPt(s,o,r,n);case"Import":return yield*NPt(s,o,r,n);case"Integer":return yield*MPt(s,o,r,n);case"Intersect":return yield*LPt(s,o,r,n);case"Iterator":return yield*FPt(s,o,r,n);case"Literal":return yield*OPt(s,o,r,n);case"Never":return yield*QPt(s,o,r,n);case"Not":return yield*UPt(s,o,r,n);case"Null":return yield*qPt(s,o,r,n);case"Number":return yield*HPt(s,o,r,n);case"Object":return yield*$Pt(s,o,r,n);case"Promise":return yield*WPt(s,o,r,n);case"Record":return yield*jPt(s,o,r,n);case"Ref":return yield*GPt(s,o,r,n);case"RegExp":return yield*VPt(s,o,r,n);case"String":return yield*zPt(s,o,r,n);case"Symbol":return yield*KPt(s,o,r,n);case"TemplateLiteral":return yield*YPt(s,o,r,n);case"This":return yield*JPt(s,o,r,n);case"Tuple":return yield*XPt(s,o,r,n);case"Undefined":return yield*ZPt(s,o,r,n);case"Union":return yield*e5t(s,o,r,n);case"Uint8Array":return yield*t5t(s,o,r,n);case"Unknown":return yield*r5t(s,o,r,n);case"Void":return yield*n5t(s,o,r,n);default:if(!gf.Has(s[st]))throw new e0e(t);return yield*i5t(s,o,r,n)}}a(nu,"Visit");function AC(...t){let e=t.length===3?nu(t[0],t[1],"",t[2]):nu(t[0],[],"",t[1]);return new DI(e)}a(AC,"Errors");f();f();var dD=class extends Nn{static{a(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},t0e=class extends Nn{static{a(this,"TransformDecodeError")}constructor(e,r,n,o){super(o instanceof Error?o.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=o}};function Na(t,e,r){try{return Uo(t)?t[Da].Decode(r):r}catch(n){throw new t0e(t,e,r,n)}}a(Na,"Default");function o5t(t,e,r,n){return Bn(n)?Na(t,r,n.map((o,s)=>dA(t.items,e,`${r}/${s}`,o))):Na(t,r,n)}a(o5t,"FromArray");function s5t(t,e,r,n){if(!Ri(n)||g0(n))return Na(t,r,n);let o=rG(t),s=o.map(p=>p[0]),c={...n};for(let[p,m]of o)p in c&&(c[p]=dA(m,e,`${r}/${p}`,c[p]));if(!Uo(t.unevaluatedProperties))return Na(t,r,c);let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,d={...c};for(let p of l)s.includes(p)||(d[p]=Na(u,`${r}/${p}`,d[p]));return Na(t,r,d)}a(s5t,"FromIntersect");function a5t(t,e,r,n){let o=globalThis.Object.values(t.$defs),s=t.$defs[t.$ref],c=dA(s,[...e,...o],r,n);return Na(t,r,c)}a(a5t,"FromImport");function c5t(t,e,r,n){return Na(t,r,dA(t.not,e,r,n))}a(c5t,"FromNot");function l5t(t,e,r,n){if(!Ri(n))return Na(t,r,n);let o=lp(t),s={...n};for(let d of o)Dn(s,d)&&(ea(s[d])&&(!Wv(t.properties[d])||Os.IsExactOptionalProperty(s,d))||(s[d]=dA(t.properties[d],e,`${r}/${d}`,s[d])));if(!Ba(t.additionalProperties))return Na(t,r,s);let c=Object.getOwnPropertyNames(s),l=t.additionalProperties,u={...s};for(let d of c)o.includes(d)||(u[d]=Na(l,`${r}/${d}`,u[d]));return Na(t,r,u)}a(l5t,"FromObject");function u5t(t,e,r,n){if(!Ri(n))return Na(t,r,n);let o=Object.getOwnPropertyNames(t.patternProperties)[0],s=new RegExp(o),c={...n};for(let p of Object.getOwnPropertyNames(n))s.test(p)&&(c[p]=dA(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!Ba(t.additionalProperties))return Na(t,r,c);let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,d={...c};for(let p of l)s.test(p)||(d[p]=Na(u,`${r}/${p}`,d[p]));return Na(t,r,d)}a(u5t,"FromRecord");function d5t(t,e,r,n){let o=So(t,e);return Na(t,r,dA(o,e,r,n))}a(d5t,"FromRef");function f5t(t,e,r,n){let o=So(t,e);return Na(t,r,dA(o,e,r,n))}a(f5t,"FromThis");function p5t(t,e,r,n){return Bn(n)&&Bn(t.items)?Na(t,r,t.items.map((o,s)=>dA(o,e,`${r}/${s}`,n[s]))):Na(t,r,n)}a(p5t,"FromTuple");function m5t(t,e,r,n){for(let o of t.anyOf){if(!Ni(o,e,n))continue;let s=dA(o,e,r,n);return Na(t,r,s)}return Na(t,r,n)}a(m5t,"FromUnion");function dA(t,e,r,n){let o=tu(t,e),s=t;switch(t[st]){case"Array":return o5t(s,o,r,n);case"Import":return a5t(s,o,r,n);case"Intersect":return s5t(s,o,r,n);case"Not":return c5t(s,o,r,n);case"Object":return l5t(s,o,r,n);case"Record":return u5t(s,o,r,n);case"Ref":return d5t(s,o,r,n);case"Symbol":return Na(s,r,n);case"This":return f5t(s,o,r,n);case"Tuple":return p5t(s,o,r,n);case"Union":return m5t(s,o,r,n);default:return Na(s,r,n)}}a(dA,"Visit");function fD(t,e,r){return dA(t,e,"",r)}a(fD,"TransformDecode");f();var pD=class extends Nn{static{a(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},r0e=class extends Nn{static{a(this,"TransformEncodeError")}constructor(e,r,n,o){super(`${o instanceof Error?o.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=o}};function Wu(t,e,r){try{return Uo(t)?t[Da].Encode(r):r}catch(n){throw new r0e(t,e,r,n)}}a(Wu,"Default");function h5t(t,e,r,n){let o=Wu(t,r,n);return Bn(o)?o.map((s,c)=>fA(t.items,e,`${r}/${c}`,s)):o}a(h5t,"FromArray");function g5t(t,e,r,n){let o=globalThis.Object.values(t.$defs),s=t.$defs[t.$ref],c=Wu(t,r,n);return fA(s,[...e,...o],r,c)}a(g5t,"FromImport");function A5t(t,e,r,n){let o=Wu(t,r,n);if(!Ri(n)||g0(n))return o;let s=rG(t),c=s.map(m=>m[0]),l={...o};for(let[m,h]of s)m in l&&(l[m]=fA(h,e,`${r}/${m}`,l[m]));if(!Uo(t.unevaluatedProperties))return l;let u=Object.getOwnPropertyNames(l),d=t.unevaluatedProperties,p={...l};for(let m of u)c.includes(m)||(p[m]=Wu(d,`${r}/${m}`,p[m]));return p}a(A5t,"FromIntersect");function y5t(t,e,r,n){return Wu(t.not,r,Wu(t,r,n))}a(y5t,"FromNot");function C5t(t,e,r,n){let o=Wu(t,r,n);if(!Ri(o))return o;let s=lp(t),c={...o};for(let p of s)Dn(c,p)&&(ea(c[p])&&(!Wv(t.properties[p])||Os.IsExactOptionalProperty(c,p))||(c[p]=fA(t.properties[p],e,`${r}/${p}`,c[p])));if(!Ba(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,d={...c};for(let p of l)s.includes(p)||(d[p]=Wu(u,`${r}/${p}`,d[p]));return d}a(C5t,"FromObject");function v5t(t,e,r,n){let o=Wu(t,r,n);if(!Ri(n))return o;let s=Object.getOwnPropertyNames(t.patternProperties)[0],c=new RegExp(s),l={...o};for(let m of Object.getOwnPropertyNames(n))c.test(m)&&(l[m]=fA(t.patternProperties[s],e,`${r}/${m}`,l[m]));if(!Ba(t.additionalProperties))return l;let u=Object.getOwnPropertyNames(l),d=t.additionalProperties,p={...l};for(let m of u)c.test(m)||(p[m]=Wu(d,`${r}/${m}`,p[m]));return p}a(v5t,"FromRecord");function x5t(t,e,r,n){let o=So(t,e),s=fA(o,e,r,n);return Wu(t,r,s)}a(x5t,"FromRef");function E5t(t,e,r,n){let o=So(t,e),s=fA(o,e,r,n);return Wu(t,r,s)}a(E5t,"FromThis");function b5t(t,e,r,n){let o=Wu(t,r,n);return Bn(t.items)?t.items.map((s,c)=>fA(s,e,`${r}/${c}`,o[c])):[]}a(b5t,"FromTuple");function I5t(t,e,r,n){for(let o of t.anyOf){if(!Ni(o,e,n))continue;let s=fA(o,e,r,n);return Wu(t,r,s)}for(let o of t.anyOf){let s=fA(o,e,r,n);if(Ni(t,e,s))return Wu(t,r,s)}return Wu(t,r,n)}a(I5t,"FromUnion");function fA(t,e,r,n){let o=tu(t,e),s=t;switch(t[st]){case"Array":return h5t(s,o,r,n);case"Import":return g5t(s,o,r,n);case"Intersect":return A5t(s,o,r,n);case"Not":return y5t(s,o,r,n);case"Object":return C5t(s,o,r,n);case"Record":return v5t(s,o,r,n);case"Ref":return x5t(s,o,r,n);case"This":return E5t(s,o,r,n);case"Tuple":return b5t(s,o,r,n);case"Union":return I5t(s,o,r,n);default:return Wu(s,r,n)}}a(fA,"Visit");function mD(t,e,r){return fA(t,e,"",r)}a(mD,"TransformEncode");f();function T5t(t,e){return Uo(t)||Nl(t.items,e)}a(T5t,"FromArray");function w5t(t,e){return Uo(t)||Nl(t.items,e)}a(w5t,"FromAsyncIterator");function _5t(t,e){return Uo(t)||Nl(t.returns,e)||t.parameters.some(r=>Nl(r,e))}a(_5t,"FromConstructor");function S5t(t,e){return Uo(t)||Nl(t.returns,e)||t.parameters.some(r=>Nl(r,e))}a(S5t,"FromFunction");function R5t(t,e){return Uo(t)||Uo(t.unevaluatedProperties)||t.allOf.some(r=>Nl(r,e))}a(R5t,"FromIntersect");function k5t(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((o,s)=>[...o,t.$defs[s]],[]),n=t.$defs[t.$ref];return Uo(t)||Nl(n,[...r,...e])}a(k5t,"FromImport");function P5t(t,e){return Uo(t)||Nl(t.items,e)}a(P5t,"FromIterator");function D5t(t,e){return Uo(t)||Nl(t.not,e)}a(D5t,"FromNot");function B5t(t,e){return Uo(t)||Object.values(t.properties).some(r=>Nl(r,e))||Ba(t.additionalProperties)&&Nl(t.additionalProperties,e)}a(B5t,"FromObject");function N5t(t,e){return Uo(t)||Nl(t.item,e)}a(N5t,"FromPromise");function M5t(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return Uo(t)||Nl(n,e)||Ba(t.additionalProperties)&&Uo(t.additionalProperties)}a(M5t,"FromRecord");function L5t(t,e){return Uo(t)?!0:Nl(So(t,e),e)}a(L5t,"FromRef");function F5t(t,e){return Uo(t)?!0:Nl(So(t,e),e)}a(F5t,"FromThis");function O5t(t,e){return Uo(t)||!ea(t.items)&&t.items.some(r=>Nl(r,e))}a(O5t,"FromTuple");function Q5t(t,e){return Uo(t)||t.anyOf.some(r=>Nl(r,e))}a(Q5t,"FromUnion");function Nl(t,e){let r=tu(t,e),n=t;if(t.$id&&n0e.has(t.$id))return!1;switch(t.$id&&n0e.add(t.$id),t[st]){case"Array":return T5t(n,r);case"AsyncIterator":return w5t(n,r);case"Constructor":return _5t(n,r);case"Function":return S5t(n,r);case"Import":return k5t(n,r);case"Intersect":return R5t(n,r);case"Iterator":return P5t(n,r);case"Not":return D5t(n,r);case"Object":return B5t(n,r);case"Promise":return N5t(n,r);case"Record":return M5t(n,r);case"Ref":return L5t(n,r);case"This":return F5t(n,r);case"Tuple":return O5t(n,r);case"Union":return Q5t(n,r);default:return Uo(t)}}a(Nl,"Visit");var n0e=new Set;function Yv(t,e){return n0e.clear(),Nl(t,e)}a(Yv,"HasTransform");var i0e=class{static{a(this,"TypeCheck")}constructor(e,r,n,o){this.schema=e,this.references=r,this.checkFunc=n,this.code=o,this.hasTransform=Yv(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return AC(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new dD(this.schema,e,this.Errors(e).First());return this.hasTransform?fD(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?mD(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new pD(this.schema,e,this.Errors(e).First());return r}},Jv;(function(t){function e(s){return s===36}a(e,"DollarSign"),t.DollarSign=e;function r(s){return s===95}a(r,"IsUnderscore"),t.IsUnderscore=r;function n(s){return s>=65&&s<=90||s>=97&&s<=122}a(n,"IsAlpha"),t.IsAlpha=n;function o(s){return s>=48&&s<=57}a(o,"IsNumeric"),t.IsNumeric=o})(Jv||(Jv={}));var hG;(function(t){function e(s){return s.length===0?!1:Jv.IsNumeric(s.charCodeAt(0))}a(e,"IsFirstCharacterNumeric");function r(s){if(e(s))return!1;for(let c=0;c<s.length;c++){let l=s.charCodeAt(c);if(!(Jv.IsAlpha(l)||Jv.IsNumeric(l)||Jv.DollarSign(l)||Jv.IsUnderscore(l)))return!1}return!0}a(r,"IsAccessor");function n(s){return s.replace(/'/g,"\\'")}a(n,"EscapeHyphen");function o(s,c){return r(c)?`${s}.${c}`:`${s}['${n(c)}']`}a(o,"Encode"),t.Encode=o})(hG||(hG={}));var o0e;(function(t){function e(r){let n=[];for(let o=0;o<r.length;o++){let s=r.charCodeAt(o);Jv.IsNumeric(s)||Jv.IsAlpha(s)?n.push(r.charAt(o)):n.push(`_${s}_`)}return n.join("").replace(/__/g,"_")}a(e,"Encode"),t.Encode=e})(o0e||(o0e={}));var s0e;(function(t){function e(r){return r.replace(/'/g,"\\'")}a(e,"Escape"),t.Escape=e})(s0e||(s0e={}));var a0e=class extends Nn{static{a(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},gG=class extends Nn{static{a(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},n2;(function(t){function e(c,l,u){return Os.ExactOptionalPropertyTypes?`('${l}' in ${c} ? ${u} : true)`:`(${hG.Encode(c,l)} !== undefined ? ${u} : true)`}a(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(c){return Os.AllowArrayObject?`(typeof ${c} === 'object' && ${c} !== null)`:`(typeof ${c} === 'object' && ${c} !== null && !Array.isArray(${c}))`}a(r,"IsObjectLike"),t.IsObjectLike=r;function n(c){return Os.AllowArrayObject?`(typeof ${c} === 'object' && ${c} !== null && !(${c} instanceof Date) && !(${c} instanceof Uint8Array))`:`(typeof ${c} === 'object' && ${c} !== null && !Array.isArray(${c}) && !(${c} instanceof Date) && !(${c} instanceof Uint8Array))`}a(n,"IsRecordLike"),t.IsRecordLike=n;function o(c){return Os.AllowNaN?`typeof ${c} === 'number'`:`Number.isFinite(${c})`}a(o,"IsNumberLike"),t.IsNumberLike=o;function s(c){return Os.AllowNullVoid?`(${c} === undefined || ${c} === null)`:`${c} === undefined`}a(s,"IsVoidLike"),t.IsVoidLike=s})(n2||(n2={}));var na;(function(t){function e(de){return de[st]==="Any"||de[st]==="Unknown"}a(e,"IsAnyOrUnknown");function*r(de,qe,Ce){yield"true"}a(r,"FromAny");function*n(de,qe,Ce){yield"true"}a(n,"FromArgument");function*o(de,qe,Ce){yield`Array.isArray(${Ce})`;let[We,ce]=[Oe("value","any"),Oe("acc","number")];dn(de.maxItems)&&(yield`${Ce}.length <= ${de.maxItems}`),dn(de.minItems)&&(yield`${Ce}.length >= ${de.minItems}`);let ue=ye(de.items,qe,"value");if(yield`${Ce}.every((${We}) => ${ue})`,ra(de.contains)||dn(de.minContains)||dn(de.maxContains)){let He=ra(de.contains)?de.contains:bi(),Me=ye(He,qe,"value"),be=dn(de.minContains)?[`(count >= ${de.minContains})`]:[],Ge=dn(de.maxContains)?[`(count <= ${de.maxContains})`]:[],rt=`const count = value.reduce((${ce}, ${We}) => ${Me} ? acc + 1 : acc, 0)`,ht=["(count > 0)",...be,...Ge].join(" && ");yield`((${We}) => { ${rt}; return ${ht}})(${Ce})`}de.uniqueItems===!0&&(yield`((${We}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${Ce})`)}a(o,"FromArray");function*s(de,qe,Ce){yield`(typeof value === 'object' && Symbol.asyncIterator in ${Ce})`}a(s,"FromAsyncIterator");function*c(de,qe,Ce){yield`(typeof ${Ce} === 'bigint')`,Hu(de.exclusiveMaximum)&&(yield`${Ce} < BigInt(${de.exclusiveMaximum})`),Hu(de.exclusiveMinimum)&&(yield`${Ce} > BigInt(${de.exclusiveMinimum})`),Hu(de.maximum)&&(yield`${Ce} <= BigInt(${de.maximum})`),Hu(de.minimum)&&(yield`${Ce} >= BigInt(${de.minimum})`),Hu(de.multipleOf)&&(yield`(${Ce} % BigInt(${de.multipleOf})) === 0`)}a(c,"FromBigInt");function*l(de,qe,Ce){yield`(typeof ${Ce} === 'boolean')`}a(l,"FromBoolean");function*u(de,qe,Ce){yield*re(de.returns,qe,`${Ce}.prototype`)}a(u,"FromConstructor");function*d(de,qe,Ce){yield`(${Ce} instanceof Date) && Number.isFinite(${Ce}.getTime())`,dn(de.exclusiveMaximumTimestamp)&&(yield`${Ce}.getTime() < ${de.exclusiveMaximumTimestamp}`),dn(de.exclusiveMinimumTimestamp)&&(yield`${Ce}.getTime() > ${de.exclusiveMinimumTimestamp}`),dn(de.maximumTimestamp)&&(yield`${Ce}.getTime() <= ${de.maximumTimestamp}`),dn(de.minimumTimestamp)&&(yield`${Ce}.getTime() >= ${de.minimumTimestamp}`),dn(de.multipleOfTimestamp)&&(yield`(${Ce}.getTime() % ${de.multipleOfTimestamp}) === 0`)}a(d,"FromDate");function*p(de,qe,Ce){yield`(typeof ${Ce} === 'function')`}a(p,"FromFunction");function*m(de,qe,Ce){let We=globalThis.Object.getOwnPropertyNames(de.$defs).reduce((ce,ue)=>[...ce,de.$defs[ue]],[]);yield*re(Km(de.$ref),[...qe,...We],Ce)}a(m,"FromImport");function*h(de,qe,Ce){yield`Number.isInteger(${Ce})`,dn(de.exclusiveMaximum)&&(yield`${Ce} < ${de.exclusiveMaximum}`),dn(de.exclusiveMinimum)&&(yield`${Ce} > ${de.exclusiveMinimum}`),dn(de.maximum)&&(yield`${Ce} <= ${de.maximum}`),dn(de.minimum)&&(yield`${Ce} >= ${de.minimum}`),dn(de.multipleOf)&&(yield`(${Ce} % ${de.multipleOf}) === 0`)}a(h,"FromInteger");function*g(de,qe,Ce){let We=de.allOf.map(ce=>ye(ce,qe,Ce)).join(" && ");if(de.unevaluatedProperties===!1){let ce=we(`${new RegExp(Vv(de))};`),ue=`Object.getOwnPropertyNames(${Ce}).every(key => ${ce}.test(key))`;yield`(${We} && ${ue})`}else if(ra(de.unevaluatedProperties)){let ce=we(`${new RegExp(Vv(de))};`),ue=`Object.getOwnPropertyNames(${Ce}).every(key => ${ce}.test(key) || ${ye(de.unevaluatedProperties,qe,`${Ce}[key]`)})`;yield`(${We} && ${ue})`}else yield`(${We})`}a(g,"FromIntersect");function*A(de,qe,Ce){yield`(typeof value === 'object' && Symbol.iterator in ${Ce})`}a(A,"FromIterator");function*y(de,qe,Ce){typeof de.const=="number"||typeof de.const=="boolean"?yield`(${Ce} === ${de.const})`:yield`(${Ce} === '${s0e.Escape(de.const)}')`}a(y,"FromLiteral");function*v(de,qe,Ce){yield"false"}a(v,"FromNever");function*b(de,qe,Ce){yield`(!${ye(de.not,qe,Ce)})`}a(b,"FromNot");function*I(de,qe,Ce){yield`(${Ce} === null)`}a(I,"FromNull");function*S(de,qe,Ce){yield n2.IsNumberLike(Ce),dn(de.exclusiveMaximum)&&(yield`${Ce} < ${de.exclusiveMaximum}`),dn(de.exclusiveMinimum)&&(yield`${Ce} > ${de.exclusiveMinimum}`),dn(de.maximum)&&(yield`${Ce} <= ${de.maximum}`),dn(de.minimum)&&(yield`${Ce} >= ${de.minimum}`),dn(de.multipleOf)&&(yield`(${Ce} % ${de.multipleOf}) === 0`)}a(S,"FromNumber");function*k(de,qe,Ce){yield n2.IsObjectLike(Ce),dn(de.minProperties)&&(yield`Object.getOwnPropertyNames(${Ce}).length >= ${de.minProperties}`),dn(de.maxProperties)&&(yield`Object.getOwnPropertyNames(${Ce}).length <= ${de.maxProperties}`);let We=Object.getOwnPropertyNames(de.properties);for(let ce of We){let ue=hG.Encode(Ce,ce),He=de.properties[ce];if(de.required&&de.required.includes(ce))yield*re(He,qe,ue),(zv(He)||e(He))&&(yield`('${ce}' in ${Ce})`);else{let Me=ye(He,qe,ue);yield n2.IsExactOptionalProperty(Ce,ce,Me)}}if(de.additionalProperties===!1)if(de.required&&de.required.length===We.length)yield`Object.getOwnPropertyNames(${Ce}).length === ${We.length}`;else{let ce=`[${We.map(ue=>`'${ue}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${Ce}).every(key => ${ce}.includes(key))`}if(typeof de.additionalProperties=="object"){let ce=ye(de.additionalProperties,qe,`${Ce}[key]`),ue=`[${We.map(He=>`'${He}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${Ce}).every(key => ${ue}.includes(key) || ${ce}))`}}a(k,"FromObject");function*N(de,qe,Ce){yield`${Ce} instanceof Promise`}a(N,"FromPromise");function*F(de,qe,Ce){yield n2.IsRecordLike(Ce),dn(de.minProperties)&&(yield`Object.getOwnPropertyNames(${Ce}).length >= ${de.minProperties}`),dn(de.maxProperties)&&(yield`Object.getOwnPropertyNames(${Ce}).length <= ${de.maxProperties}`);let[We,ce]=Object.entries(de.patternProperties)[0],ue=we(`${new RegExp(We)}`),He=ye(ce,qe,"value"),Me=ra(de.additionalProperties)?ye(de.additionalProperties,qe,Ce):de.additionalProperties===!1?"false":"true",be=`(${ue}.test(key) ? ${He} : ${Me})`;yield`(Object.entries(${Ce}).every(([key, value]) => ${be}))`}a(F,"FromRecord");function*O(de,qe,Ce){let We=So(de,qe);if(fe.functions.has(de.$ref))return yield`${Qe(de.$ref)}(${Ce})`;yield*re(We,qe,Ce)}a(O,"FromRef");function*Y(de,qe,Ce){let We=we(`${new RegExp(de.source,de.flags)};`);yield`(typeof ${Ce} === 'string')`,dn(de.maxLength)&&(yield`${Ce}.length <= ${de.maxLength}`),dn(de.minLength)&&(yield`${Ce}.length >= ${de.minLength}`),yield`${We}.test(${Ce})`}a(Y,"FromRegExp");function*z(de,qe,Ce){yield`(typeof ${Ce} === 'string')`,dn(de.maxLength)&&(yield`${Ce}.length <= ${de.maxLength}`),dn(de.minLength)&&(yield`${Ce}.length >= ${de.minLength}`),de.pattern!==void 0&&(yield`${we(`${new RegExp(de.pattern)};`)}.test(${Ce})`),de.format!==void 0&&(yield`format('${de.format}', ${Ce})`)}a(z,"FromString");function*V(de,qe,Ce){yield`(typeof ${Ce} === 'symbol')`}a(V,"FromSymbol");function*U(de,qe,Ce){yield`(typeof ${Ce} === 'string')`,yield`${we(`${new RegExp(de.pattern)};`)}.test(${Ce})`}a(U,"FromTemplateLiteral");function*H(de,qe,Ce){yield`${Qe(de.$ref)}(${Ce})`}a(H,"FromThis");function*ee(de,qe,Ce){if(yield`Array.isArray(${Ce})`,de.items===void 0)return yield`${Ce}.length === 0`;yield`(${Ce}.length === ${de.maxItems})`;for(let We=0;We<de.items.length;We++)yield`${ye(de.items[We],qe,`${Ce}[${We}]`)}`}a(ee,"FromTuple");function*J(de,qe,Ce){yield`${Ce} === undefined`}a(J,"FromUndefined");function*G(de,qe,Ce){yield`(${de.anyOf.map(ce=>ye(ce,qe,Ce)).join(" || ")})`}a(G,"FromUnion");function*j(de,qe,Ce){yield`${Ce} instanceof Uint8Array`,dn(de.maxByteLength)&&(yield`(${Ce}.length <= ${de.maxByteLength})`),dn(de.minByteLength)&&(yield`(${Ce}.length >= ${de.minByteLength})`)}a(j,"FromUint8Array");function*Z(de,qe,Ce){yield"true"}a(Z,"FromUnknown");function*ie(de,qe,Ce){yield n2.IsVoidLike(Ce)}a(ie,"FromVoid");function*ne(de,qe,Ce){let We=fe.instances.size;fe.instances.set(We,de),yield`kind('${de[st]}', ${We}, ${Ce})`}a(ne,"FromKind");function*re(de,qe,Ce,We=!0){let ce=vo(de.$id)?[...qe,de]:qe,ue=de;if(We&&vo(de.$id)){let He=Qe(de.$id);if(fe.functions.has(He))return yield`${He}(${Ce})`;{fe.functions.set(He,"<deferred>");let Me=Xe(He,de,qe,"value",!1);return fe.functions.set(He,Me),yield`${He}(${Ce})`}}switch(ue[st]){case"Any":return yield*r(ue,ce,Ce);case"Argument":return yield*n(ue,ce,Ce);case"Array":return yield*o(ue,ce,Ce);case"AsyncIterator":return yield*s(ue,ce,Ce);case"BigInt":return yield*c(ue,ce,Ce);case"Boolean":return yield*l(ue,ce,Ce);case"Constructor":return yield*u(ue,ce,Ce);case"Date":return yield*d(ue,ce,Ce);case"Function":return yield*p(ue,ce,Ce);case"Import":return yield*m(ue,ce,Ce);case"Integer":return yield*h(ue,ce,Ce);case"Intersect":return yield*g(ue,ce,Ce);case"Iterator":return yield*A(ue,ce,Ce);case"Literal":return yield*y(ue,ce,Ce);case"Never":return yield*v(ue,ce,Ce);case"Not":return yield*b(ue,ce,Ce);case"Null":return yield*I(ue,ce,Ce);case"Number":return yield*S(ue,ce,Ce);case"Object":return yield*k(ue,ce,Ce);case"Promise":return yield*N(ue,ce,Ce);case"Record":return yield*F(ue,ce,Ce);case"Ref":return yield*O(ue,ce,Ce);case"RegExp":return yield*Y(ue,ce,Ce);case"String":return yield*z(ue,ce,Ce);case"Symbol":return yield*V(ue,ce,Ce);case"TemplateLiteral":return yield*U(ue,ce,Ce);case"This":return yield*H(ue,ce,Ce);case"Tuple":return yield*ee(ue,ce,Ce);case"Undefined":return yield*J(ue,ce,Ce);case"Union":return yield*G(ue,ce,Ce);case"Uint8Array":return yield*j(ue,ce,Ce);case"Unknown":return yield*Z(ue,ce,Ce);case"Void":return yield*ie(ue,ce,Ce);default:if(!gf.Has(ue[st]))throw new a0e(de);return yield*ne(ue,ce,Ce)}}a(re,"Visit");let fe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function ye(de,qe,Ce,We=!0){return`(${[...re(de,qe,Ce,We)].join(" && ")})`}a(ye,"CreateExpression");function Qe(de){return`check_${o0e.Encode(de)}`}a(Qe,"CreateFunctionName");function we(de){let qe=`local_${fe.variables.size}`;return fe.variables.set(qe,`const ${qe} = ${de}`),qe}a(we,"CreateVariable");function Xe(de,qe,Ce,We,ce=!0){let[ue,He]=[`
`,rt=>"".padStart(rt," ")],Me=Oe("value","any"),be=ut("boolean"),Ge=[...re(qe,Ce,We,ce)].map(rt=>`${He(4)}${rt}`).join(` &&${ue}`);return`function ${de}(${Me})${be} {${ue}${He(2)}return (${ue}${Ge}${ue}${He(2)})
}`}a(Xe,"CreateFunction");function Oe(de,qe){let Ce=fe.language==="typescript"?`: ${qe}`:"";return`${de}${Ce}`}a(Oe,"CreateParameter");function ut(de){return fe.language==="typescript"?`: ${de}`:""}a(ut,"CreateReturns");function Rt(de,qe,Ce){let We=Xe("check",de,qe,"value"),ce=Oe("value","any"),ue=ut("boolean"),He=[...fe.functions.values()],Me=[...fe.variables.values()],be=vo(de.$id)?`return function check(${ce})${ue} {
  return ${Qe(de.$id)}(value)
}`:`return ${We}`;return[...Me,...He,be].join(`
`)}a(Rt,"Build");function Et(...de){let qe={language:"javascript"},[Ce,We,ce]=de.length===2&&Bn(de[1])?[de[0],de[1],qe]:de.length===2&&!Bn(de[1])?[de[0],[],de[1]]:de.length===3?[de[0],de[1],de[2]]:de.length===1?[de[0],[],qe]:[null,[],qe];if(fe.language=ce.language,fe.variables.clear(),fe.functions.clear(),fe.instances.clear(),!ra(Ce))throw new gG(Ce);for(let ue of We)if(!ra(ue))throw new gG(ue);return Rt(Ce,We,ce)}a(Et,"Code"),t.Code=Et;function At(de,qe=[]){let Ce=Et(de,qe,{language:"javascript"}),We=globalThis.Function("kind","format","hash",Ce),ce=new Map(fe.instances);function ue(Ge,rt,ht){if(!gf.Has(Ge)||!ce.has(rt))return!1;let Ot=gf.Get(Ge),Xt=ce.get(rt);return Ot(Xt,ht)}a(ue,"typeRegistryFunction");function He(Ge,rt){return aA.Has(Ge)?aA.Get(Ge)(rt):!1}a(He,"formatRegistryFunction");function Me(Ge){return PI(Ge)}a(Me,"hashFunction");let be=We(ue,He,Me);return new i0e(de,qe,be,Ce)}a(At,"Compile"),t.Compile=At})(na||(na={}));var oV=Ne(xI());f();f();var ju=[];for(let t=0;t<256;++t)ju.push((t+256).toString(16).slice(1));function kMe(t,e=0){return(ju[t[e+0]]+ju[t[e+1]]+ju[t[e+2]]+ju[t[e+3]]+"-"+ju[t[e+4]]+ju[t[e+5]]+"-"+ju[t[e+6]]+ju[t[e+7]]+"-"+ju[t[e+8]]+ju[t[e+9]]+"-"+ju[t[e+10]]+ju[t[e+11]]+ju[t[e+12]]+ju[t[e+13]]+ju[t[e+14]]+ju[t[e+15]]).toLowerCase()}a(kMe,"unsafeStringify");f();var PMe=require("crypto");var yG=new Uint8Array(256),AG=yG.length;function c0e(){return AG>yG.length-16&&((0,PMe.randomFillSync)(yG),AG=0),yG.slice(AG,AG+=16)}a(c0e,"rng");f();f();var DMe=require("crypto"),l0e={randomUUID:DMe.randomUUID};function U5t(t,e,r){if(l0e.randomUUID&&!e&&!t)return l0e.randomUUID();t=t||{};let n=t.random??t.rng?.()??c0e();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)e[r+o]=n[o];return e}return kMe(n)}a(U5t,"v4");var Ir=U5t;var sV=Ne(Ai());function ND(t){return t===1}a(ND,"isRestricted");var W4t=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],v6=8192,j4t=21;var Vu=class{static{a(this,"TelemetryReporters")}getReporter(e,r=0){return ND(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(LD(e))return this.reporterRestricted;if(O4(e))return new VF}getFTReporter(e){if(c9e(e))return this.reporterFT;if(O4(e))return new VF}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},G4t=E.Object({},{additionalProperties:E.String()}),V4t=E.Object({meanLogProb:E.Optional(E.Number()),meanAlternativeLogProb:E.Optional(E.Number())},{additionalProperties:E.Number()}),z4t=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function K4t(t){return z4t.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}a(K4t,"isOomError");function Y4t(t){return $F(t)?"network":K4t(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}a(Y4t,"getErrorType");var zr=class t{static{a(this,"TelemetryData")}static{this.validateTelemetryProperties=na.Compile(G4t)}static{this.validateTelemetryMeasurements=na.Compile(V4t)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},La())}extendedBy(e,r){let n={...this.properties,...e},o={...this.measurements,...r},s=new t(n,o,this.issuedTime);return s.displayedTime=this.displayedTime,s}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=La())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Lt).getFallbackExpAndFilters();n.addToTelemetry(e,this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=uC(e.get(un).getEditorInfo()),this.properties.editor_plugin_version=uC(e.get(un).getEditorPluginInfo());let r=e.get(Fs);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${l2(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(un);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=uC(n.getEditorInfo());let o=e.get(Qr);this.properties.fetcher=o.name;let s=e.get(Lc).getHttpSettings();this.properties.proxy_enabled=s.proxy?"true":"false",this.properties.proxy_auth=s.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=s.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=s.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=p9e(e);r["copilot.build"]=m9e(e),r["copilot.buildType"]=EC(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(ND(e))return r;let n={};for(let o in r)t.keysToRemoveFromStandardTelemetryHack.includes(o)||(n[o]=r[o]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let o=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[o]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let o=e[n],s=o?.length??0;if(s>v6){let c=0,l=0;for(;s>0&&l<j4t;){l+=1;let u=n;l>1&&(u=n+"_"+(l<10?"0":"")+l);let d=c+v6;s<v6&&(d=c+s),r[u]=o.slice(c,d),s-=v6,c+=v6}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=Z4t(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let o=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:o}:(n.problem="both",n.error+=`; ${o}`)}if(n===void 0)return!0;if(O4(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return hA(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),ND(r)&&hA(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,o){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(o),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,l9e(e))}},xC=class t extends zr{static{a(this,"TelemetryWithExp")}constructor(e,r,n,o){super(e,r,n),this.filtersAndExp=o}extendedBy(e,r){let n={...this.properties,...e},o={...this.measurements,...r},s=new t(n,o,this.issuedTime,this.filtersAndExp);return s.displayedTime=this.displayedTime,s}extendWithExpTelemetry(e){return this.filtersAndExp.exp.addToTelemetry(e,this),this.filtersAndExp.filters.addToTelemetry(this),Promise.resolve()}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new VS({}),exp:$m.createEmptyConfig()})}};function x6(t,e,r,n){t.get(Vu).getReporter(t,e)?.sendTelemetryEvent(r,zr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}a(x6,"sendTelemetryEvent");function J4t(t,e,r,n){t.get(Vu).getReporter(t,e)?.sendTelemetryErrorEvent(r,zr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}a(J4t,"sendTelemetryErrorEvent");function X4t(t,e,r,n){t.get(Vu).getFTReporter(t)?.sendTelemetryEvent(r,zr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}a(X4t,"sendFTTelemetryEvent");function MD(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}a(MD,"telemetrizePromptLength");function La(){return performance.now()}a(La,"now");function Z4t(t){return Math.floor(t/1e3)}a(Z4t,"nowSeconds");function LD(t){return t.get(qu).optedIn}a(LD,"shouldSendRestricted");function c9e(t){return t.get(qu).ftFlag!==""}a(c9e,"shouldSendFinetuningTelemetry");function Nt(t,e,r,n){return t.get(tl).register(eDt(t,e,La(),r?.extendedBy(),n))}a(Nt,"telemetry");async function eDt(t,e,r,n,o=0){let s=n||zr.createAndMarkAsIssued({},{});await s.makeReadyForSending(t,o??!1,"IncludeExp",r),(!ND(o)||LD(t))&&x6(t,o,e,s),ND(o)&&W4t.includes(e)&&c9e(t)&&X4t(t,o,e,s)}a(eDt,"_telemetry");function Fj(t,e){return t.get(tl).register(tDt(t,e,La()))}a(Fj,"telemetryExpProblem");async function tDt(t,e,r){let n="expProblem",o=zr.createAndMarkAsIssued(e,{});await o.makeReadyForSending(t,0,"SkipExp",r),x6(t,0,n,o)}a(tDt,"_telemetryExpProblem");function Ome(t,e,r,n){let o={...r,...l9e(t)};x6(t,0,e,{properties:o,measurements:n})}a(Ome,"telemetryRaw");function l9e(t){let e=t.get(un),r={unique_id:Ir(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:uC(e.getEditorInfo())};return{...t.get(qu).getProperties(),...r}}a(l9e,"createRequiredProperties");var Fme=class extends Error{static{a(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,oV.SHA256)(oV.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Ja(t,e,r,n,o){return t.get(tl).register(u9e(t,e,La(),r,{...n},o))}a(Ja,"telemetryException");async function u9e(t,e,r,n,o,s){let c;if(e instanceof Error){if(c=e,c.name==="Canceled"&&c.message==="Canceled"||c.name==="CodeExpectedError"||Sd(c)||c instanceof ka||c instanceof sV.ConnectionError||c instanceof sV.ResponseError)return}else{if(c=new Fme(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(c.stack?.startsWith(`${c}
`)){let y=c.stack.slice(`${c}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),c.stack=`${c}
${y.join(`
`)}`}}let l=t.get(un).getEditorInfo(),u;l.root&&(u=[{prefix:`${l.name}:`,path:l.root}]);let d=LD(t),p=fNe(c,u,d),m=Y4t(c),h=m==="exception",g=zr.createAndMarkAsIssued({origin:n??"",type:c.name,code:`${c.code??""}`,reason:p.stack||p.toString(),message:p.message,...o});if(await g.makeReadyForSending(t,0,"IncludeExp",r),s?.exception_detail)for(let y of s.exception_detail)y.value&&(d?y.value=fpe(y.value):y.value="[redacted]");if(s??=nNe(t,p),s.context={...s.context,"copilot_event.unique_id":g.properties.unique_id,"#restricted_telemetry":d?"true":"false"},n&&(s.context["#origin"]=n,s.transaction=n),s.rollup_id!=="auto"&&(g.properties.errno=s.rollup_id),s.created_at=new Date(g.issuedTime).toISOString(),d){let y=dNe(c,u),v=zr.createAndMarkAsIssued({origin:n??"",type:c.name,code:`${c.code??""}`,reason:y.stack||y.toString(),message:y.message,...o});s.rollup_id!=="auto"&&(v.properties.errno=s.rollup_id),await v.makeReadyForSending(t,1,"IncludeExp",r),v.properties.unique_id=g.properties.unique_id,g.properties.restricted_unique_id=v.properties.unique_id,x6(t,1,`error.${m}`,v)}let A=s.rollup_id==="auto"?c.stack??"":s.rollup_id;h&&!t.get(dC).isThrottled(A)&&(g.properties.failbot_payload=JSON.stringify(s)),x6(t,0,`error.${m}`,g)}a(u9e,"_telemetryException");function eu(t,e,r,n){let o=a(async(...s)=>{try{await e(...s)}catch(c){await u9e(t,c,La(),r,n)}},"wrapped");return(...s)=>t.get(tl).register(o(...s))}a(eu,"telemetryCatch");function hA(t,e,r,n){return t.get(tl).register(rDt(t,e,La(),r?.extendedBy(),n))}a(hA,"telemetryError");async function rDt(t,e,r,n,o=0){if(ND(o)&&!LD(t))return;let s=n||zr.createAndMarkAsIssued({},{});await s.makeReadyForSending(t,o,"IncludeExp",r),J4t(t,o,e,s)}a(rDt,"_telemetryError");function d9e(t,e,r,n,o){let s=zr.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:o.toString()});if(r.logprobs)for(let[c,l]of Object.entries(r.logprobs))s.properties["logprobs_"+c]=JSON.stringify(l)??"unset";return s.extendWithRequestId(n),Nt(t,"engine.completion",s,1)}a(d9e,"logEngineCompletion");function f9e(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let s=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};s.context=e.context,n["request.option.extra"]=JSON.stringify(s)}let o=r.extendedBy(n);return Nt(t,"engine.prompt",o,1)}a(f9e,"logEnginePrompt");f();var zu=class{static{a(this,"UrlOpener")}};var T0=new ft("auth"),cV=60;function w0(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}a(w0,"fillGitHubUrls");function h9e(){return Math.floor(Date.now()/1e3)}a(h9e,"nowSeconds");async function Qme(t,e,r){let n=zr.createAndMarkAsIssued({},{});Nt(t,"auth.new_login");let o={"X-GitHub-Api-Version":"2024-12-15"};r?.hasKnownOrg&&(o["X-GitHub-Staff-Request"]="1");let s=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token",c=await Um(t,e,s,{timeout:12e4,headers:o}),l=await c.json(),u=l.user_notification;if(g9e(t,u,e),c.status===401){let g="Failed to get copilot token due to 401 status. Please sign out and try again.";return T0.info(t,g),hA(t,"auth.unknown_401",n),{failureKind:"HTTP401",message:g}}if(!c.ok||!l.token){T0.info(t,`Invalid copilot token: missing token: ${c.status} ${c.statusText}`),hA(t,"auth.invalid_token",n.extendedBy({status:c.status.toString(),status_text:c.statusText}));let g=l.error_details;return g?.notification_id!=="not_signed_up"&&g9e(t,g,e),{failureKind:"NotAuthorized",message:g?.message??"Could not retrieve token",canSignUpForLimited:l.can_signup_for_limited??!1}}let d=h9e()+l.refresh_in+cV,p=await Ume(t,e),m;p.ok&&(m=await p.json());let h=new u2(l,m,d);return Nt(t,"auth.new_token",n.extendedBy({...lpe(h)},{adjusted_expires_at:h.expiresAt,expires_at:l.expires_at,current_time:h9e()})),{copilotToken:h}}a(Qme,"authFromGitHubSession");var ou=class{static{a(this,"CopilotTokenFetcher")}},aV=class extends ou{static{a(this,"NetworkCopilotTokenFetcher")}async fetchTokenResult(e,r,n){return await Qme(e,r,n)}};async function Ume(t,e){let r={"X-GitHub-Api-Version":"2025-05-01"},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";return await Um(t,e,n,{timeout:12e4,headers:r})}a(Ume,"fetchCopilotUserInfo");function g9e(t,e,r){e&&t.get(sc).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let o=n?.title===e.title,s=o||n?.title==="Dismiss";if(o){let c=t.get(un).getEditorPluginInfo(),l=e.url.replace("{EDITOR}",encodeURIComponent(c.name+"_"+c.version));await t.get(zu).open(l)}e.notification_id&&s&&await nDt(t,e.notification_id,r)}).catch(n=>{T0.exception(t,n,"copilotToken.notification")})}a(g9e,"notifyUser");async function nDt(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",o=await Um(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!o||!o.ok)&&T0.error(t,`Failed to send notification result to GitHub: ${o?.status} ${o?.statusText}`)}a(nDt,"sendNotificationResultToGitHub");var u2=class{constructor(e,r,n){this.envelope=e;this.expiresAt=n;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new jW(r)}static{a(this,"CopilotToken")}get endpoints(){return{...GS,...this.envelope.endpoints??{}}}needsRefresh(){return(this.expiresAt-cV)*1e3<Date.now()}isExpired(){return this.expiresAt*1e3<Date.now()}get hasKnownOrg(){return tpe(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,o=(e??"").split(":")[0].split(";");for(let s of o){let[c,l]=s.split("=");r.set(c,l)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}get isCopilotCodeReviewEnabled(){return this.getTokenValue("ccr")==="1"}};f();f();var E6="apps",qme="hosts",gA=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{a(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,o=await this.persistenceManager.read(E6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!o?(n=_0,o=await this.persistenceManager.read(E6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(su).findAppIdToAuthenticate(),o){let s={...o,oauth_token:o.access_token||o.oauth_token,user:o.login||o.user,githubAppId:n,authAuthority:r};if(s.oauth_token&&s.user)return s}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(qme,e);if(r)return{...r,githubAppId:_0}}async saveAuthRecord(e){await this.persistenceManager.update(E6,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===_0&&await this.persistenceManager.delete(qme,r),await this.persistenceManager.delete(E6,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(E6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:_0})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(qme)}authRecordKey(e,r){let n=r.githubAppId??e.get(su).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};f();f();f();var x9e=Ne(y9e()),E9e=Ne(v9e()),S0=Ne(require("os"));var FD=class{constructor(e,r,n,o,s=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=s;this.onCopilotToken=a(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:a((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let o={method:"POST",headers:n,body:e.data};this.ctx.get(Qr).fetch(e.urlString,o).then(s=>s.text().then(c=>{r(s.status,Object.fromEntries(s.headers),c)})).catch(s=>{pn.debug(this.ctx,"Error sending telemetry",s),r(0,{})})},"sendPOST")};this.client=new E9e.ApplicationInsights({instrumentationKey:o,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[x9e.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=iDt(e),this.commonProperties=oDt(e),this.#e=Pa(e,this.onCopilotToken)}static{a(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let o=this.qualifyEventName(e);this.client.track({name:o,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:o,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function iDt(t){let e={},r=t.get(Fs);e["ai.session.id"]=r.sessionId;let n=t.get(qu);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${S0.type()} ${S0.release()}`,e["ai.device.osArchitecture"]=S0.arch(),e["ai.device.osPlatform"]=S0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(wo).getVersion(),e}a(iDt,"getTags");function oDt(t){let e={};e.common_os=S0.platform(),e.common_platformversion=S0.release(),e.common_arch=S0.arch(),e.common_cpu=Array.from(new Set(S0.cpus().map(n=>n.model))).join();let r=t.get(Fs);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}a(oDt,"getCommonProperties");var sDt="7d7048df-6dd0-4048-bb23-b716c1461f8f",aDt="3fdd7f28-937a-48c8-9a21-ba337db23bd1",cDt="f0000000-0000-0000-0000-000000000000";function b9e(t){return new URL(t).hostname==="github.com"?GS.telemetry:t.replace("://","://copilot-telemetry-service.")}a(b9e,"getEndpointForServerUrl");var Od=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=b9e(this.serverUrl);this.shuttingDown=new Set;Pa(e,n=>this.updateServiceEndpoints(n.endpoints))}static{a(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let o=r.get(Vu);o.setReporter(new FD(r,this.namespace,n,sDt)),o.setRestrictedReporter(new FD(r,this.namespace,n,aDt)),o.setFTReporter(new FD(r,this.namespace,n,cDt,!0))}}setCustomReporters(e,r){this.shutdownWithoutWaiting();let n=this.ctx.get(Vu);n.setReporter(e),n.setRestrictedReporter(r)}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(Vu).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=b9e(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};async function lDt(t,e){let r="copilot_internal/subscribe_limited_user";try{return(await(await Um(t,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":"2025-05-01"},body:JSON.stringify({restricted_telemetry:t.get(Od).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json()).subscribed}catch(n){return T0.exception(t,n,"signUpLimited failed"),!1}}a(lDt,"apiFetchSignUpLimited");async function $me(t,e,r){let n=await t.get(cr).getTokenResult();switch(n.failureKind){case void 0:return"OK";case"HTTP401":case"NotSignedIn":return"NotSignedIn";case"NotAuthorized":return r&&n.canSignUpForLimited&&await lDt(t,e)?$me(t,e,!1):"NotAuthorized";case"Exception":throw n.exception}}a($me,"getTokenWithSignUpLimited");var Mi=class{constructor(e,r){this.ctx=e;this.env=r}static{a(this,"AuthManager")}hasTransientSession(){return this.transientSession!==void 0}get _copilotTokenManager(){return this.ctx.get(cr)}getConfiguredUrls(){return this.ctx.get(mf).getConfiguredUrls()}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await $me(this.ctx,n,e?.freshSignIn??!1),user:n.login})}async getSession(){await this.ctx.get(Lc).requireReady();let e=Wme(this.env)??await this.transientSession;if(!(e&&e.accessToken===void 0))return e?{...e,...w0(e)}:await this.getPersistedSession()}setTransientSession(e){this.transientSession=e&&Promise.resolve(e),this._copilotTokenManager.resetToken()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}},dV=class extends Mi{static{a(this,"PersistentAuthManager")}get authPersistence(){return this.ctx.get(gA)}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&EC(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}};function Wme(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{...w0({apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL}),login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{...w0({apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL}),login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{...w0({apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL}),login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}a(Wme,"getSessionFromEnv");f();var uDt=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],I9e="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",T9e="https://gh.io/copilot-network-errors",hp=class{constructor(){this.notifiedErrorCodes=[]}static{a(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&uDt.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new ft("certificates").error(e,`${I9e} Please visit ${T9e} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(sc).showWarningMessage(I9e,n).then(o=>{if(o?.title===n.title)return e.get(zu).open(T9e)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();var $o=class{static{a(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},fV=class extends $o{static{a(this,"NoOpStatusReporter")}didChange(){}};f();var w9e=Ne(Ai());var vs=class extends w9e.Emitter{static{a(this,"Emitter")}get event(){return super.event}};var jme=class extends ka{constructor(r){super("message"in r?r.message:`${r.failureKind}`);this.result=r}static{a(this,"TokenResultError")}},cr=class{constructor(e,r=!1){this.ctx=e;this.primed=r;this.lastToken=void 0;this.activeToken=void 0;this.tokenPromise=void 0;this.tokenPrimingError=void 0;this.didChangeTokenResult=new vs;this.onDidChangeTokenResult=this.didChangeTokenResult.event;this.didResetToken=new vs;this.onDidResetToken=this.didResetToken.event}static{a(this,"CopilotTokenManager")}async getGitHubSession(){return await this.ctx.get(Mi).getSession()}primeToken(){if(this.tokenPrimingError)return Promise.reject(this.tokenPrimingError);this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}async fetchTokenResult(e){return await this.ctx.get(ou).fetchTokenResult(this.ctx,e,this.lastToken)}setToken(e){this.activeToken=this.lastToken=e}async getTokenResult(){if(!this.primed){let e=new Error("Token requested before initialization");if(_9e(this.ctx))throw this.tokenPrimingError=e,e;T0.exception(this.ctx,e,".getToken")}if(!this.tokenPromise&&(!this.activeToken||this.activeToken?.needsRefresh())){let r=this.getGitHubSession().then(async n=>n?await this.fetchTokenResult(n):{failureKind:"NotSignedIn"}).catch(n=>{if(!(n instanceof Error))throw n;return{failureKind:"Exception",message:String(n),exception:n}}).then(n=>(this.tokenPromise!==r||(this.tokenPromise=void 0,this.handleTokenResult(n)),n));this.tokenPromise=r}return this.activeToken&&!this.activeToken.isExpired()?{copilotToken:this.activeToken}:await this.tokenPromise}handleTokenResult(e){let r=this.ctx.get($o);switch(e.failureKind){case"NotSignedIn":r.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":r.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":r.setError(e.message);break;case"Exception":r.setWarning(e.message),this.ctx.get(hp).notifyUser(this.ctx,e.exception);break;case void 0:r.forceNormal(),this.setToken(e.copilotToken)}this.didChangeTokenResult.fire(e)}async getToken(){let e=await this.getTokenResult();if(e.copilotToken)return e.copilotToken;throw e.exception?e.exception:new jme(e)}resetToken(e){e!==void 0?(Nt(this.ctx,"auth.reset_token_"+e),T0.debug(this.ctx,`Resetting copilot token on HTTP error ${e}`)):T0.debug(this.ctx,"Resetting copilot token"),!(!this.activeToken&&!this.tokenPromise)&&(this.activeToken=void 0,this.tokenPromise=void 0,this.didResetToken.fire())}getLastToken(){return this.lastToken}};function Lj(t){return t.get(cr).getLastToken()}a(Lj,"getLastCopilotToken");f();var bC=class{static{a(this,"Clock")}now(){return new Date}};f();var AA=class{static{a(this,"ExpConfigMaker")}},b6=class extends AA{constructor(r={}){super();this.defaultFilters=r}static{a(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,o){let s=r.get(Qr),c=Object.keys(o).length===0?this.defaultFilters:o,l=new URL("telemetry",n.telemetry).href,u;try{u=await s.fetch(l,{method:"GET",headers:c,timeout:5e3})}catch(h){return $m.createFallbackConfig(r,`Error fetching ExP config: ${String(h)}`)}if(!u.ok)return $m.createFallbackConfig(r,`ExP responded with ${u.status}`);let d;try{d=await u.json()}catch(h){if(h instanceof SyntaxError)return Ja(r,h,"fetchExperiments"),$m.createFallbackConfig(r,"ExP responded with invalid JSON");throw h}let p=d.Configs.find(h=>h.Id==="vscode")??{Id:"vscode",Parameters:{}},m=Object.entries(p.Parameters).map(([h,g])=>h+(g?"":"cf"));return new $m(p.Parameters,d.AssignmentContext,m.join(";"))}},pV=class extends AA{static{a(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve($m.createEmptyConfig())}};f();f();var mV=class{constructor(e){this.prefix=e}static{a(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},Gme=class extends mV{static{a(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},S9e=a(t=>new Gme(t),"DEFAULT_GRANULARITY"),hV=class extends mV{constructor(r,n=.5,o=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=o}static{a(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],o=this.getUpcomingTimePeriodBucketStrings(r),s=this.getUpcomingByCallBucketStrings();for(let c of o)for(let l of s)n.push(this.prefix+c+l);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var R9e="X-Copilot-ClientTimeBucket",gV=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=S9e(e)}static{a(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let o=new hV(this.prefix);isNaN(r)||o.setByCallBuckets(r),isNaN(n)||o.setTimePeriod(n*3600*1e3),this.specs.set(e,o)}}extendFilters(e){let r=this.selectGranularity(e),[n,o]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(R9e,n),otherFilterSettingsToPrefetch:o.map(s=>e.withChange(R9e,s))}}};f();f();f();f();var Vme=new Map;async function dDt(t){if(Vme.has(t))return Vme.get(t);let e=await crypto.subtle.importKey("raw",new TextEncoder().encode(t),{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return Vme.set(t,e),e}a(dDt,"getCachedHmacKey");async function fDt(t){if(t)try{let e=await dDt(t),r=Math.floor(Date.now()/1e3).toString(),n=new TextEncoder().encode(r),o=await crypto.subtle.sign("HMAC",e,n),c=Array.from(new Uint8Array(o)).map(l=>l.toString(16).padStart(2,"0")).join("");return`${r}.${c}`}catch{return}}a(fDt,"createRequestHMAC");async function k9e(t){let e=await fDt(t);return e?{"Request-Hmac":e,"Copilot-Integration-Id":"jetbrains-chat-dev"}:{}}a(k9e,"createMsBenchHmacHeaders");f();f();f();f();var yV="4.11.0",d2="04b07795-8ddb-461a-bbee-02f9e1bf7b46",P9e="common",AV;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(AV||(AV={}));var I6=AV.AzurePublicCloud,D9e="login.microsoftonline.com",B9e=["*"],N9e="cae",M9e="nocae",L9e="msal.cache";var zme;var F9e,CV,Kme;function O9e(){return CV!==void 0&&Kme!==void 0}a(O9e,"hasVSCodePlugin");function pDt(t){let e={cache:{},broker:{...t.brokerOptions,isEnabled:t.brokerOptions?.enabled??!1,enableMsaPassthrough:t.brokerOptions?.legacyEnableMsaPassthrough??!1}};if(t.tokenCachePersistenceOptions?.enabled){if(zme===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let r=t.tokenCachePersistenceOptions.name||L9e;e.cache.cachePlugin=zme({name:`${r}.${M9e}`,...t.tokenCachePersistenceOptions}),e.cache.cachePluginCae=zme({name:`${r}.${N9e}`,...t.tokenCachePersistenceOptions})}if(t.brokerOptions?.enabled)if(t.isVSCodeCredential){if(Kme===void 0)throw new Error(["Visual Studio Code Credential was requested, but no plugin was configured or no authentication record was found.","You must install the identity-vscode plugin package (`npm install --save @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=Kme.broker}else{if(F9e===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(brokerPlugin)` before using `enableBroker`."].join(" "));e.broker.nativeBrokerPlugin=F9e.broker}return e}a(pDt,"generatePluginConfiguration");var Q9e={generatePluginConfiguration:pDt};f();f();f();function mDt(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}a(mDt,"isErrorResponse");var q9e="CredentialUnavailableError",$r=class extends Error{static{a(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=q9e}},vV="AuthenticationError",HI=class extends Error{static{a(this,"AuthenticationError")}statusCode;errorResponse;constructor(e,r,n){let o={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(mDt(r))o=U9e(r);else if(typeof r=="string")try{let s=JSON.parse(r);o=U9e(s)}catch{e===400?o={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:o={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else o={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${o.error} Status code: ${e}
More details:
${o.errorDescription},`,n),this.statusCode=e,this.errorResponse=o,this.name=vV}},H9e="AggregateAuthenticationError",T6=class extends Error{static{a(this,"AggregateAuthenticationError")}errors;constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=H9e}};function U9e(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}a(U9e,"convertOAuthErrorResponseToErrorResponse");var eh=class extends Error{static{a(this,"AuthenticationRequiredError")}scopes;getTokenOptions;constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};f();f();f();f();var $9e=require("node:os"),W9e=Ne(require("node:util"),1),j9e=Ne(require("node:process"),1);function G9e(t,...e){j9e.stderr.write(`${W9e.default.format(t,...e)}${$9e.EOL}`)}a(G9e,"log");var V9e=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,z9e,Yme=[],Jme=[],xV=[];V9e&&Xme(V9e);var K9e=Object.assign(t=>Y9e(t),{enable:Xme,enabled:Zme,disable:hDt,log:G9e});function Xme(t){z9e=t,Yme=[],Jme=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?Jme.push(new RegExp(`^${n.substr(1)}$`)):Yme.push(new RegExp(`^${n}$`));for(let n of xV)n.enabled=Zme(n.namespace)}a(Xme,"enable");function Zme(t){if(t.endsWith("*"))return!0;for(let e of Jme)if(e.test(t))return!1;for(let e of Yme)if(e.test(t))return!0;return!1}a(Zme,"enabled");function hDt(){let t=z9e||"";return Xme(""),t}a(hDt,"disable");function Y9e(t){let e=Object.assign(r,{enabled:Zme(t),destroy:gDt,log:K9e.log,namespace:t,extend:ADt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return a(r,"debug"),xV.push(e),e}a(Y9e,"createDebugger");function gDt(){let t=xV.indexOf(this);return t>=0?(xV.splice(t,1),!0):!1}a(gDt,"destroy");function ADt(t){let e=Y9e(`${this.namespace}:${t}`);return e.log=this.log,e}a(ADt,"extend");var OD=K9e;var X9e=new Set,EV=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,IV,ehe=OD("azure");ehe.log=(...t)=>{OD.log(...t)};var the=["verbose","info","warning","error"];EV&&(tOe(EV)?yDt(EV):console.error(`AZURE_LOG_LEVEL set to unknown log level '${EV}'; logging is not enabled. Acceptable values: ${the.join(", ")}.`));function yDt(t){if(t&&!tOe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${the.join(",")}`);IV=t;let e=[];for(let r of X9e)eOe(r)&&e.push(r.namespace);OD.enable(e.join(","))}a(yDt,"setLogLevel");function TV(){return IV}a(TV,"getLogLevel");var J9e={verbose:400,info:300,warning:200,error:100};function $I(t){let e=ehe.extend(t);return Z9e(ehe,e),{error:bV(e,"error"),warning:bV(e,"warning"),info:bV(e,"info"),verbose:bV(e,"verbose")}}a($I,"createClientLogger");function Z9e(t,e){e.log=(...r)=>{t.log(...r)}}a(Z9e,"patchLogMethod");function bV(t,e){let r=Object.assign(t.extend(e),{level:e});if(Z9e(t,r),eOe(r)){let n=OD.disable();OD.enable(n+","+r.namespace)}return X9e.add(r),r}a(bV,"createLogger");function eOe(t){return!!(IV&&J9e[t.level]<=J9e[IV])}a(eOe,"shouldEnable");function tOe(t){return the.includes(t)}a(tOe,"isAzureLogLevel");var R0=$I("identity");function wV(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}a(wV,"processEnvVars");function Ml(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}a(Ml,"formatSuccess");function bo(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}a(bo,"formatError");function rOe(t,e,r=R0){let n=e?`${e.fullTitle} ${t}`:t;function o(u){r.info(`${n} =>`,u)}a(o,"info");function s(u){r.warning(`${n} =>`,u)}a(s,"warning");function c(u){r.verbose(`${n} =>`,u)}a(c,"verbose");function l(u){r.error(`${n} =>`,u)}return a(l,"error"),{title:t,fullTitle:n,info:o,warning:s,verbose:c,error:l}}a(rOe,"credentialLoggerInstance");function ii(t,e=R0){let r=rOe(t,void 0,e);return{...r,parent:e,getToken:rOe("=> getToken()",r,e)}}a(ii,"credentialLogger");f();f();f();f();var QD={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function nOe(t={}){let e=new rhe(t.parentContext);return t.span&&(e=e.setValue(QD.span,t.span)),t.namespace&&(e=e.setValue(QD.namespace,t.namespace)),e}a(nOe,"createTracingContext");var rhe=class t{static{a(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};f();var oOe=Ne(iOe(),1),SV=oOe.state;function CDt(){return{end:a(()=>{},"end"),isRecording:a(()=>!1,"isRecording"),recordException:a(()=>{},"recordException"),setAttribute:a(()=>{},"setAttribute"),setStatus:a(()=>{},"setStatus"),addEvent:a(()=>{},"addEvent")}}a(CDt,"createDefaultTracingSpan");function vDt(){return{createRequestHeaders:a(()=>({}),"createRequestHeaders"),parseTraceparentHeader:a(()=>{},"parseTraceparentHeader"),startSpan:a((t,e)=>({span:CDt(),tracingContext:nOe({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}a(vDt,"createDefaultInstrumenter");function w6(){return SV.instrumenterImplementation||(SV.instrumenterImplementation=vDt()),SV.instrumenterImplementation}a(w6,"getInstrumenter");f();function _6(t){let{namespace:e,packageName:r,packageVersion:n}=t;function o(d,p,m){var h;let g=w6().startSpan(d,Object.assign(Object.assign({},m),{packageName:r,packageVersion:n,tracingContext:(h=p?.tracingOptions)===null||h===void 0?void 0:h.tracingContext})),A=g.tracingContext,y=g.span;A.getValue(QD.namespace)||(A=A.setValue(QD.namespace,e)),y.setAttribute("az.namespace",A.getValue(QD.namespace));let v=Object.assign({},p,{tracingOptions:Object.assign(Object.assign({},p?.tracingOptions),{tracingContext:A})});return{span:y,updatedOptions:v}}a(o,"startSpan");async function s(d,p,m,h){let{span:g,updatedOptions:A}=o(d,p,h);try{let y=await c(A.tracingOptions.tracingContext,()=>Promise.resolve(m(A,g)));return g.setStatus({status:"success"}),y}catch(y){throw g.setStatus({status:"error",error:y}),y}finally{g.end()}}a(s,"withSpan");function c(d,p,...m){return w6().withContext(d,p,...m)}a(c,"withContext");function l(d){return w6().parseTraceparentHeader(d)}a(l,"parseTraceparentHeader");function u(d){return w6().createRequestHeaders(d)}return a(u,"createRequestHeaders"),{startSpan:o,withSpan:s,withContext:c,parseTraceparentHeader:l,createRequestHeaders:u}}a(_6,"createTracingClient");var ns=_6({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:yV});var nhe=ii("ChainedTokenCredential"),S6=class{static{a(this,"ChainedTokenCredential")}_sources=[];constructor(...e){this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,o,s=[];return ns.withSpan("ChainedTokenCredential.getToken",r,async c=>{for(let l=0;l<this._sources.length&&n===null;l++)try{n=await this._sources[l].getToken(e,c),o=this._sources[l]}catch(u){if(u.name==="CredentialUnavailableError"||u.name==="AuthenticationRequiredError")s.push(u);else throw nhe.getToken.info(bo(e,u)),u}if(!n&&s.length>0){let l=new T6(s,"ChainedTokenCredential authentication failed.");throw nhe.getToken.info(bo(e,l)),l}if(nhe.getToken.info(`Result for ${o.constructor.name}: ${Ml(e)}`),n===null)throw new $r("Failed to retrieve a valid token");return{token:n,successfulCredential:o}})}};f();f();f();f();var M0={};Sa(M0,{AuthError:()=>ci,AuthErrorCodes:()=>$D,AuthErrorMessage:()=>ohe,AzureCloudInstance:()=>ox,ClientApplication:()=>uT,ClientAssertion:()=>px,ClientAuthError:()=>JI,ClientAuthErrorCodes:()=>xs,ClientAuthErrorMessage:()=>ahe,ClientConfigurationError:()=>KD,ClientConfigurationErrorCodes:()=>zD,ClientConfigurationErrorMessage:()=>fhe,ClientCredentialClient:()=>dT,ConfidentialClientApplication:()=>yB,CryptoProvider:()=>kC,DeviceCodeClient:()=>hB,DistributedCachePlugin:()=>nK,InteractionRequiredAuthError:()=>D0,InteractionRequiredAuthErrorCodes:()=>XV,InteractionRequiredAuthErrorMessage:()=>yge,LogLevel:()=>Xa,Logger:()=>k0,ManagedIdentityApplication:()=>CB,ManagedIdentitySourceNames:()=>ei,OnBehalfOfClient:()=>AB,PromptValue:()=>jI,ProtocolMode:()=>Qd,PublicClientApplication:()=>gB,ResponseMode:()=>IC,ServerError:()=>xf,TokenCache:()=>nB,TokenCacheContext:()=>B0,UsernamePasswordClient:()=>mB,internals:()=>Cge,version:()=>xA});f();var Cge={};Sa(Cge,{Deserializer:()=>dx,Serializer:()=>WI});f();f();var WI=class{static{a(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,realm:o.realm,local_account_id:o.localAccountId,username:o.username,authority_type:o.authorityType,name:o.name,client_info:o.clientInfo,last_modification_time:o.lastModificationTime,last_modification_app:o.lastModificationApp,tenantProfiles:o.tenantProfiles?.map(s=>JSON.stringify(s))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,credential_type:o.credentialType,client_id:o.clientId,secret:o.secret,realm:o.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,credential_type:o.credentialType,client_id:o.clientId,secret:o.secret,realm:o.realm,target:o.target,cached_at:o.cachedAt,expires_on:o.expiresOn,extended_expires_on:o.extendedExpiresOn,refresh_on:o.refreshOn,key_id:o.keyId,token_type:o.tokenType,requestedClaims:o.requestedClaims,requestedClaimsHash:o.requestedClaimsHash,userAssertionHash:o.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={home_account_id:o.homeAccountId,environment:o.environment,credential_type:o.credentialType,client_id:o.clientId,secret:o.secret,family_id:o.familyId,target:o.target,realm:o.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let o=e[n];r[n]={client_id:o.clientId,environment:o.environment,family_id:o.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};f();f();f();f();f();f();f();f();f();var nt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},ai={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},gp=[nt.OPENID_SCOPE,nt.PROFILE_SCOPE,nt.OFFLINE_ACCESS_SCOPE],ihe=[...gp,nt.EMAIL_SCOPE],qs={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var Ap={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},f2={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},jI={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},RV={PLAIN:"plain",S256:"S256"},UD={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var IC={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},yp={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},p2={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},uc={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Ro={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var R6="appmetadata",sOe="client_info",ex="1",qD={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},yf={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Ll={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},uo={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},TC={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},k6={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},P6={username:"username",password:"password"},m2={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},kV={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ks={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var HD=300,Ku={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var $D={};Sa($D,{postRequestFailed:()=>B6,unexpectedError:()=>D6});f();var D6="unexpected_error",B6="post_request_failed";var PV={[D6]:"Unexpected error in authentication.",[B6]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},ohe={unexpectedError:{code:D6,desc:PV[D6]},postRequestFailed:{code:B6,desc:PV[B6]}},ci=class t extends Error{static{a(this,"AuthError")}constructor(e,r,n){let o=r?`${e}: ${r}`:e;super(o),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||nt.EMPTY_STRING,this.errorMessage=r||nt.EMPTY_STRING,this.subError=n||nt.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function she(t,e){return new ci(t,e?`${PV[t]} ${e}`:PV[t])}a(she,"createAuthError");var xs={};Sa(xs,{authTimeNotFound:()=>tx,authorizationCodeMissingFromServerResponse:()=>R2,bindingKeyNotRemoved:()=>W6,cannotAppendScopeSet:()=>w2,cannotRemoveEmptyScope:()=>T2,clientInfoDecodingError:()=>GI,clientInfoEmptyError:()=>h2,deviceCodeExpired:()=>F6,deviceCodePollingCancelled:()=>L6,deviceCodeUnknownError:()=>O6,emptyInputScopeSet:()=>KI,endSessionEndpointNotSupported:()=>k2,endpointResolutionError:()=>Cf,hashNotDeserialized:()=>C2,invalidAssertion:()=>q6,invalidCacheEnvironment:()=>nx,invalidCacheRecord:()=>_2,invalidClientCredential:()=>H6,invalidState:()=>yA,keyIdMissing:()=>P2,maxAgeTranspired:()=>E2,methodNotImplemented:()=>Li,missingTenantIdError:()=>V6,multipleMatchingAccounts:()=>M6,multipleMatchingAppMetadata:()=>b2,multipleMatchingTokens:()=>N6,nestedAppAuthBridgeDisabled:()=>z6,networkError:()=>A2,noAccountFound:()=>Q6,noAccountInSilentRequest:()=>rx,noCryptoObject:()=>YI,noNetworkConnectivity:()=>j6,nonceMismatch:()=>x2,nullOrEmptyToken:()=>g2,openIdConfigError:()=>y2,requestCannotBeMade:()=>I2,stateMismatch:()=>v2,stateNotFound:()=>zI,tokenClaimsCnfRequiredForSignedJwt:()=>S2,tokenParsingError:()=>VI,tokenRefreshRequired:()=>ix,unexpectedCredentialType:()=>U6,userCanceled:()=>G6,userTimeoutReached:()=>$6});f();var GI="client_info_decoding_error",h2="client_info_empty_error",VI="token_parsing_error",g2="null_or_empty_token",Cf="endpoints_resolution_error",A2="network_error",y2="openid_config_error",C2="hash_not_deserialized",yA="invalid_state",v2="state_mismatch",zI="state_not_found",x2="nonce_mismatch",tx="auth_time_not_found",E2="max_age_transpired",N6="multiple_matching_tokens",M6="multiple_matching_accounts",b2="multiple_matching_appMetadata",I2="request_cannot_be_made",T2="cannot_remove_empty_scope",w2="cannot_append_scopeset",KI="empty_input_scopeset",L6="device_code_polling_cancelled",F6="device_code_expired",O6="device_code_unknown_error",rx="no_account_in_silent_request",_2="invalid_cache_record",nx="invalid_cache_environment",Q6="no_account_found",YI="no_crypto_object",U6="unexpected_credential_type",q6="invalid_assertion",H6="invalid_client_credential",ix="token_refresh_required",$6="user_timeout_reached",S2="token_claims_cnf_required_for_signedjwt",R2="authorization_code_missing_from_server_response",W6="binding_key_not_removed",k2="end_session_endpoint_not_supported",P2="key_id_missing",j6="no_network_connectivity",G6="user_canceled",V6="missing_tenant_id_error",Li="method_not_implemented",z6="nested_app_auth_bridge_disabled";var li={[GI]:"The client info could not be parsed/decoded correctly",[h2]:"The client info was empty",[VI]:"Token cannot be parsed",[g2]:"The token is null or empty",[Cf]:"Endpoints cannot be resolved",[A2]:"Network request failed",[y2]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[C2]:"The hash parameters could not be deserialized",[yA]:"State was not the expected format",[v2]:"State mismatch error",[zI]:"State not found",[x2]:"Nonce mismatch error",[tx]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[E2]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[N6]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[M6]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[b2]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[I2]:"Token request cannot be made without authorization code or refresh token.",[T2]:"Cannot remove null or empty scope from ScopeSet",[w2]:"Cannot append ScopeSet",[KI]:"Empty input ScopeSet cannot be processed",[L6]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[F6]:"Device code is expired.",[O6]:"Device code stopped polling for unknown reasons.",[rx]:"Please pass an account object, silent flow is not supported without account information",[_2]:"Cache record object was null or undefined.",[nx]:"Invalid environment when attempting to create cache entry",[Q6]:"No account found in cache for given key.",[YI]:"No crypto object detected.",[U6]:"Unexpected credential type.",[q6]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[H6]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ix]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[$6]:"User defined timeout for device code polling reached",[S2]:"Cannot generate a POP jwt if the token_claims are not populated",[R2]:"Server response does not contain an authorization code to proceed",[W6]:"Could not remove the credential's binding key from storage.",[k2]:"The provided authority does not support logout",[P2]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[j6]:"No network connectivity. Check your internet connection.",[G6]:"User cancelled the flow.",[V6]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Li]:"This method has not been implemented",[z6]:"The nested app auth bridge is disabled"},ahe={clientInfoDecodingError:{code:GI,desc:li[GI]},clientInfoEmptyError:{code:h2,desc:li[h2]},tokenParsingError:{code:VI,desc:li[VI]},nullOrEmptyToken:{code:g2,desc:li[g2]},endpointResolutionError:{code:Cf,desc:li[Cf]},networkError:{code:A2,desc:li[A2]},unableToGetOpenidConfigError:{code:y2,desc:li[y2]},hashNotDeserialized:{code:C2,desc:li[C2]},invalidStateError:{code:yA,desc:li[yA]},stateMismatchError:{code:v2,desc:li[v2]},stateNotFoundError:{code:zI,desc:li[zI]},nonceMismatchError:{code:x2,desc:li[x2]},authTimeNotFoundError:{code:tx,desc:li[tx]},maxAgeTranspired:{code:E2,desc:li[E2]},multipleMatchingTokens:{code:N6,desc:li[N6]},multipleMatchingAccounts:{code:M6,desc:li[M6]},multipleMatchingAppMetadata:{code:b2,desc:li[b2]},tokenRequestCannotBeMade:{code:I2,desc:li[I2]},removeEmptyScopeError:{code:T2,desc:li[T2]},appendScopeSetError:{code:w2,desc:li[w2]},emptyInputScopeSetError:{code:KI,desc:li[KI]},DeviceCodePollingCancelled:{code:L6,desc:li[L6]},DeviceCodeExpired:{code:F6,desc:li[F6]},DeviceCodeUnknownError:{code:O6,desc:li[O6]},NoAccountInSilentRequest:{code:rx,desc:li[rx]},invalidCacheRecord:{code:_2,desc:li[_2]},invalidCacheEnvironment:{code:nx,desc:li[nx]},noAccountFound:{code:Q6,desc:li[Q6]},noCryptoObj:{code:YI,desc:li[YI]},unexpectedCredentialType:{code:U6,desc:li[U6]},invalidAssertion:{code:q6,desc:li[q6]},invalidClientCredential:{code:H6,desc:li[H6]},tokenRefreshRequired:{code:ix,desc:li[ix]},userTimeoutReached:{code:$6,desc:li[$6]},tokenClaimsRequired:{code:S2,desc:li[S2]},noAuthorizationCodeFromServer:{code:R2,desc:li[R2]},bindingKeyNotRemovedError:{code:W6,desc:li[W6]},logoutNotSupported:{code:k2,desc:li[k2]},keyIdMissing:{code:P2,desc:li[P2]},noNetworkConnectivity:{code:j6,desc:li[j6]},userCanceledError:{code:G6,desc:li[G6]},missingTenantIdError:{code:V6,desc:li[V6]},nestedAppAuthBridgeDisabled:{code:z6,desc:li[z6]}},JI=class t extends ci{static{a(this,"ClientAuthError")}constructor(e,r){super(e,r?`${li[e]}: ${r}`:li[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function xt(t,e){return new JI(t,e)}a(xt,"createClientAuthError");var WD={createNewGuid:a(()=>{throw xt(Li)},"createNewGuid"),base64Decode:a(()=>{throw xt(Li)},"base64Decode"),base64Encode:a(()=>{throw xt(Li)},"base64Encode"),base64UrlEncode:a(()=>{throw xt(Li)},"base64UrlEncode"),encodeKid:a(()=>{throw xt(Li)},"encodeKid"),async getPublicKeyThumbprint(){throw xt(Li)},async removeTokenBindingKey(){throw xt(Li)},async clearKeystore(){throw xt(Li)},async signJwt(){throw xt(Li)},async hashString(){throw xt(Li)}};f();var Xa;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Xa||(Xa={}));var k0=class t{static{a(this,"Logger")}constructor(e,r,n){this.level=Xa.Info;let o=a(()=>{},"defaultLoggerCallback"),s=e||t.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||o,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:Xa.Info,this.correlationId=s.correlationId||nt.EMPTY_STRING,this.packageName=r||nt.EMPTY_STRING,this.packageVersion=n||nt.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:a(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Xa.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let s=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Xa[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,s,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Xa.Error,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Xa.Error,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Xa.Warning,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Xa.Warning,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Xa.Info,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Xa.Info,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Xa.Verbose,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Xa.Verbose,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Xa.Trace,containsPii:!1,correlationId:r||nt.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Xa.Trace,containsPii:!0,correlationId:r||nt.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};f();var DV="@azure/msal-common",jD="15.8.1";f();var ox={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};f();var Fl={};Sa(Fl,{createAccessTokenEntity:()=>uhe,createIdTokenEntity:()=>lhe,createRefreshTokenEntity:()=>dhe,generateAppMetadataKey:()=>BDt,generateAuthorityMetadataExpiresAt:()=>MV,generateCredentialKey:()=>J6,isAccessTokenEntity:()=>bDt,isAppMetadataEntity:()=>NDt,isAuthorityMetadataEntity:()=>MDt,isAuthorityMetadataExpired:()=>LV,isCredentialEntity:()=>NV,isIdTokenEntity:()=>IDt,isRefreshTokenEntity:()=>TDt,isServerTelemetryEntity:()=>PDt,isThrottlingEntity:()=>DDt,updateAuthorityEndpointMetadata:()=>VD,updateCloudDiscoveryMetadata:()=>X6});f();var BV={};Sa(BV,{checkMaxAge:()=>K6,extractTokenClaims:()=>sx,getJWSPayload:()=>aOe});f();function sx(t,e){let r=aOe(t);try{let n=e(r);return JSON.parse(n)}catch{throw xt(VI)}}a(sx,"extractTokenClaims");function aOe(t){if(!t)throw xt(g2);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw xt(VI);return r[2]}a(aOe,"getJWSPayload");function K6(t,e){if(e===0||Date.now()-3e5>t+e)throw xt(E2)}a(K6,"checkMaxAge");var oa={};Sa(oa,{delay:()=>EDt,isTokenExpired:()=>GD,nowSeconds:()=>P0,toDateFromSeconds:()=>Y6,toSecondsFromDate:()=>xDt,wasClockTurnedBack:()=>che});f();function P0(){return Math.round(new Date().getTime()/1e3)}a(P0,"nowSeconds");function xDt(t){return t.getTime()/1e3}a(xDt,"toSecondsFromDate");function Y6(t){return t?new Date(Number(t)*1e3):new Date}a(Y6,"toDateFromSeconds");function GD(t,e){let r=Number(t)||0;return P0()+e>r}a(GD,"isTokenExpired");function che(t){return Number(t)>P0()}a(che,"wasClockTurnedBack");function EDt(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}a(EDt,"delay");function J6(t){return[wDt(t),_Dt(t),SDt(t),RDt(t),kDt(t)].join(uc.CACHE_KEY_SEPARATOR).toLowerCase()}a(J6,"generateCredentialKey");function lhe(t,e,r,n,o){return{credentialType:Ro.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:o}}a(lhe,"createIdTokenEntity");function uhe(t,e,r,n,o,s,c,l,u,d,p,m,h,g,A){let y={homeAccountId:t,credentialType:Ro.ACCESS_TOKEN,secret:r,cachedAt:P0().toString(),expiresOn:c.toString(),extendedExpiresOn:l.toString(),environment:e,clientId:n,realm:o,target:s,tokenType:p||uo.BEARER};if(m&&(y.userAssertionHash=m),d&&(y.refreshOn=d.toString()),g&&(y.requestedClaims=g,y.requestedClaimsHash=A),y.tokenType?.toLowerCase()!==uo.BEARER.toLowerCase())switch(y.credentialType=Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case uo.POP:let v=sx(r,u);if(!v?.cnf?.kid)throw xt(S2);y.keyId=v.cnf.kid;break;case uo.SSH:y.keyId=h}return y}a(uhe,"createAccessTokenEntity");function dhe(t,e,r,n,o,s,c){let l={credentialType:Ro.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return s&&(l.userAssertionHash=s),o&&(l.familyId=o),c&&(l.expiresOn=c.toString()),l}a(dhe,"createRefreshTokenEntity");function NV(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}a(NV,"isCredentialEntity");function bDt(t){return t?NV(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Ro.ACCESS_TOKEN||t.credentialType===Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}a(bDt,"isAccessTokenEntity");function IDt(t){return t?NV(t)&&t.hasOwnProperty("realm")&&t.credentialType===Ro.ID_TOKEN:!1}a(IDt,"isIdTokenEntity");function TDt(t){return t?NV(t)&&t.credentialType===Ro.REFRESH_TOKEN:!1}a(TDt,"isRefreshTokenEntity");function wDt(t){return[t.homeAccountId,t.environment].join(uc.CACHE_KEY_SEPARATOR).toLowerCase()}a(wDt,"generateAccountId");function _Dt(t){let e=t.credentialType===Ro.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(uc.CACHE_KEY_SEPARATOR).toLowerCase()}a(_Dt,"generateCredentialId");function SDt(t){return(t.target||"").toLowerCase()}a(SDt,"generateTarget");function RDt(t){return(t.requestedClaimsHash||"").toLowerCase()}a(RDt,"generateClaimsHash");function kDt(t){return t.tokenType&&t.tokenType.toLowerCase()!==uo.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}a(kDt,"generateScheme");function PDt(t,e){let r=t.indexOf(Ll.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}a(PDt,"isServerTelemetryEntity");function DDt(t,e){let r=!1;t&&(r=t.indexOf(TC.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}a(DDt,"isThrottlingEntity");function BDt({environment:t,clientId:e}){return[R6,t,e].join(uc.CACHE_KEY_SEPARATOR).toLowerCase()}a(BDt,"generateAppMetadataKey");function NDt(t,e){return e?t.indexOf(R6)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}a(NDt,"isAppMetadataEntity");function MDt(t,e){return e?t.indexOf(qD.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}a(MDt,"isAuthorityMetadataEntity");function MV(){return P0()+qD.REFRESH_TIME_SECONDS}a(MV,"generateAuthorityMetadataExpiresAt");function VD(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}a(VD,"updateAuthorityEndpointMetadata");function X6(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}a(X6,"updateCloudDiscoveryMetadata");function LV(t){return t.expiresAt<=P0()}a(LV,"isAuthorityMetadataExpired");f();f();var zD={};Sa(zD,{authorityMismatch:()=>s9,authorityUriInsecure:()=>B2,cannotAllowPlatformBroker:()=>o9,cannotSetOIDCOptions:()=>i9,claimsRequestParsingError:()=>Z6,emptyInputScopesError:()=>M2,invalidAuthenticationHeader:()=>n9,invalidAuthorityMetadata:()=>Q2,invalidClaims:()=>XI,invalidCloudDiscoveryMetadata:()=>ZI,invalidCodeChallengeMethod:()=>e9,logoutRequestEmpty:()=>F2,missingNonceAuthenticationHeader:()=>r9,missingSshJwk:()=>ax,missingSshKid:()=>t9,pkceParamsMissing:()=>O2,redirectUriEmpty:()=>D2,tokenRequestEmpty:()=>L2,untrustedAuthority:()=>U2,urlEmptyError:()=>N2,urlParseError:()=>wC});f();var D2="redirect_uri_empty",Z6="claims_request_parsing_error",B2="authority_uri_insecure",wC="url_parse_error",N2="empty_url_error",M2="empty_input_scopes_error",XI="invalid_claims",L2="token_request_empty",F2="logout_request_empty",e9="invalid_code_challenge_method",O2="pkce_params_missing",ZI="invalid_cloud_discovery_metadata",Q2="invalid_authority_metadata",U2="untrusted_authority",ax="missing_ssh_jwk",t9="missing_ssh_kid",r9="missing_nonce_authentication_header",n9="invalid_authentication_header",i9="cannot_set_OIDCOptions",o9="cannot_allow_platform_broker",s9="authority_mismatch";var dc={[D2]:"A redirect URI is required for all calls, and none has been set.",[Z6]:"Could not parse the given claims request object.",[B2]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[wC]:"URL could not be parsed into appropriate segments.",[N2]:"URL was empty or null.",[M2]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[XI]:"Given claims parameter must be a stringified JSON object.",[L2]:"Token request was empty and not found in cache.",[F2]:"The logout request was null or undefined.",[e9]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[O2]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[ZI]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Q2]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[U2]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[ax]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[t9]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[r9]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[n9]:"Invalid authentication header provided",[i9]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[o9]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[s9]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},fhe={redirectUriNotSet:{code:D2,desc:dc[D2]},claimsRequestParsingError:{code:Z6,desc:dc[Z6]},authorityUriInsecure:{code:B2,desc:dc[B2]},urlParseError:{code:wC,desc:dc[wC]},urlEmptyError:{code:N2,desc:dc[N2]},emptyScopesError:{code:M2,desc:dc[M2]},invalidClaimsRequest:{code:XI,desc:dc[XI]},tokenRequestEmptyError:{code:L2,desc:dc[L2]},logoutRequestEmptyError:{code:F2,desc:dc[F2]},invalidCodeChallengeMethod:{code:e9,desc:dc[e9]},invalidCodeChallengeParams:{code:O2,desc:dc[O2]},invalidCloudDiscoveryMetadata:{code:ZI,desc:dc[ZI]},invalidAuthorityMetadata:{code:Q2,desc:dc[Q2]},untrustedAuthority:{code:U2,desc:dc[U2]},missingSshJwk:{code:ax,desc:dc[ax]},missingSshKid:{code:t9,desc:dc[t9]},missingNonceAuthenticationHeader:{code:r9,desc:dc[r9]},invalidAuthenticationHeader:{code:n9,desc:dc[n9]},cannotSetOIDCOptions:{code:i9,desc:dc[i9]},cannotAllowPlatformBroker:{code:o9,desc:dc[o9]},authorityMismatch:{code:s9,desc:dc[s9]}},KD=class t extends ci{static{a(this,"ClientConfigurationError")}constructor(e){super(e,dc[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function Es(t){return new KD(t)}a(Es,"createClientConfigurationError");f();var Fa=class{static{a(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),o=a(s=>decodeURIComponent(s.replace(/\+/g," ")),"decode");return n.forEach(s=>{if(s.trim()){let[c,l]=s.split(/=(.+)/g,2);c&&l&&(r[o(c)]=o(l))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var ol=class t{static{a(this,"ScopeSet")}constructor(e){let r=e?Fa.trimArrayEntries([...e]):[],n=r?Fa.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw Es(M2);this.scopes=new Set,n.forEach(o=>this.scopes.add(o))}static fromString(e){let n=(e||nt.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(nt.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return ihe.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw xt(w2)}}removeScope(e){if(!e)throw xt(T2);this.scopes.delete(e.trim())}removeOIDCScopes(){ihe.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw xt(KI);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw xt(KI);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),o=this.getScopeCount();return r.size<o+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):nt.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};f();f();function YD(t,e){if(!t)throw xt(h2);try{let r=e(t);return JSON.parse(r)}catch{throw xt(GI)}}a(YD,"buildClientInfo");function _C(t){if(!t)throw xt(GI);let e=t.split(uc.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?nt.EMPTY_STRING:e[1]}}a(_C,"buildClientInfoFromHomeAccountId");f();function cOe(t,e){return!!t&&!!e&&t===e.split(".")[1]}a(cOe,"tenantIdMatchesHomeTenant");function a9(t,e,r,n){if(n){let{oid:o,sub:s,tid:c,name:l,tfp:u,acr:d}=n,p=c||u||d||"";return{tenantId:p,localAccountId:o||s||"",name:l,isHomeTenant:cOe(p,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:cOe(r,t)}}a(a9,"buildTenantProfile");function FV(t,e,r,n){let o=t;if(e){let{isHomeTenant:s,...c}=e;o={...t,...c}}if(r){let{isHomeTenant:s,...c}=a9(t.homeAccountId,t.localAccountId,t.tenantId,r);return o={...o,...c,idTokenClaims:r,idToken:n},o}return o}a(FV,"updateAccountTenantProfileData");f();var th={Default:0,Adfs:1,Dsts:2,Ciam:3};f();function OV(t){return t&&(t.tid||t.tfp||t.acr)||null}a(OV,"getTenantIdFromIdTokenClaims");f();var Qd={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var Yu=class t{static{a(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(uc.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(uc.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let o=new t;r.authorityType===th.Adfs?o.authorityType=p2.ADFS_ACCOUNT_TYPE:r.protocolMode===Qd.OIDC?o.authorityType=p2.GENERIC_ACCOUNT_TYPE:o.authorityType=p2.MSSTS_ACCOUNT_TYPE;let s;e.clientInfo&&n&&(s=YD(e.clientInfo,n)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let c=e.environment||r&&r.getPreferredCache();if(!c)throw xt(nx);o.environment=c,o.realm=s?.utid||OV(e.idTokenClaims)||"",o.localAccountId=s?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let l=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,u=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=l||u||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let d=a9(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[d]}return o}static createFromAccountInfo(e,r,n){let o=new t;return o.authorityType=e.authorityType||p2.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=r,o.msGraphHost=n,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,r,n,o,s){if(!(r===th.Adfs||r===th.Dsts)){if(e)try{let c=YD(e,o.base64Decode);if(c.uid&&c.utid)return`${c.uid}.${c.utid}`}catch{}n.warning("No client info in response")}return s?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let o=!0;if(n){let s=e.idTokenClaims||{},c=r.idTokenClaims||{};o=s.iat===c.iat&&s.nonce===c.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&o}};f();f();var Ju={};Sa(Ju,{getDeserializedResponse:()=>phe,mapToQueryString:()=>SC,stripLeadingHashOrQuery:()=>lOe});f();function lOe(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}a(lOe,"stripLeadingHashOrQuery");function phe(t){if(!t||t.indexOf("=")<0)return null;try{let e=lOe(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw xt(C2)}return null}a(phe,"getDeserializedResponse");function SC(t,e=!0,r){let n=new Array;return t.forEach((o,s)=>{!e&&r&&s in r?n.push(`${s}=${o}`):n.push(`${s}=${encodeURIComponent(o)}`)}),n.join("&")}a(SC,"mapToQueryString");var Fi=class t{static{a(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Es(N2);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return Fa.endsWith(r,"?")?r=r.slice(0,-1):Fa.endsWith(r,"?/")&&(r=r.slice(0,-2)),Fa.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Es(wC)}if(!e.HostNameAndPort||!e.PathSegments)throw Es(wC);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Es(B2)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===Ap.COMMON||n[0]===Ap.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw Es(wC);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},o=n.AbsolutePath.split("/");return o=o.filter(s=>s&&s.length>0),n.PathSegments=o,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw Es(wC);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===nt.FORWARD_SLASH){let o=new t(r).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!phe(e)}};var dOe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},mhe=dOe.endpointMetadata,hhe=dOe.instanceDiscoveryMetadata,ghe=new Set;hhe.metadata.forEach(t=>{t.aliases.forEach(e=>{ghe.add(e)})});function fOe(t,e){let r,n=t.canonicalAuthority;if(n){let o=new Fi(n).getUrlComponents().HostNameAndPort;r=uOe(o,t.cloudDiscoveryMetadata?.metadata,yf.CONFIG,e)||uOe(o,hhe.metadata,yf.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}a(fOe,"getAliasesFromStaticSources");function uOe(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let o=c9(e,t);if(o)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),o.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}a(uOe,"getAliasesFromMetadata");function pOe(t){return c9(hhe.metadata,t)}a(pOe,"getCloudDiscoveryMetadataFromHardcodedValues");function c9(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}a(c9,"getCloudDiscoveryMetadataFromNetworkResponse");f();f();var Ahe="cache_quota_exceeded",QV="cache_error_unknown";var yhe={[Ahe]:"Exceeded cache storage capacity.",[QV]:"Unexpected error occurred when using cache storage."},l9=class t extends ci{static{a(this,"CacheError")}constructor(e,r){let n=r||(yhe[e]?yhe[e]:yhe[QV]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function mOe(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new l9(Ahe):new l9(t.name,t.message):new l9(QV)}a(mOe,"createCacheError");var eT=class{static{a(this,"CacheManager")}constructor(e,r,n,o,s){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(DV,jD),this.staticAuthorityOptions=s,this.performanceClient=o}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(s=>s.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,o,s){let c=null,l;if(s&&!this.tenantProfileMatchesFilter(n,s))return null;let u=this.getIdToken(e,o,r,n.tenantId);return u&&(l=sx(u.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(l,s))?null:(c=FV(e,n,l,u?.secret),c)}getTenantProfilesFromAccountEntity(e,r,n,o){let s=e.getAccountInfo(),c=s.tenantProfiles||new Map,l=this.getTokenKeys();if(n){let d=c.get(n);if(d)c=new Map([[n,d]]);else return[]}let u=[];return c.forEach(d=>{let p=this.getTenantedAccountInfoByFilter(s,l,d,r,o);p&&u.push(p)}),u}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw xt(_2);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof ci?o:mOe(o)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),s=ol.fromString(e.target);o.accessToken.forEach(c=>{if(!this.accessTokenKeyMatchesFilter(c,n,!1))return;let l=this.getAccessTokenCredential(c,r);l&&this.credentialMatchesFilter(l,n)&&ol.fromString(l.target).intersectingScopeSets(s)&&this.removeAccessToken(c,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),o=[];return n.forEach(s=>{if(!this.isAccountKey(s,e.homeAccountId))return;let c=this.getAccount(s,r);if(!c||e.homeAccountId&&!this.matchHomeAccountId(c,e.homeAccountId)||e.username&&!this.matchUsername(c.username,e.username)||e.environment&&!this.matchEnvironment(c,e.environment)||e.realm&&!this.matchRealm(c,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(c,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(c,e.authorityType))return;let l={localAccountId:e?.localAccountId,name:e?.name},u=c.tenantProfiles?.filter(d=>this.tenantProfileMatchesFilter(d,l));u&&u.length===0||o.push(c)}),o}isAccountKey(e,r,n){return!(e.split(uc.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(uc.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(Ro.ID_TOKEN.toLowerCase())===-1&&r.indexOf(Ro.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(Ro.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(Ro.REFRESH_TOKEN.toLowerCase())>-1){let n=`${Ro.REFRESH_TOKEN}${uc.CACHE_KEY_SEPARATOR}${this.clientId}${uc.CACHE_KEY_SEPARATOR}`,o=`${Ro.REFRESH_TOKEN}${uc.CACHE_KEY_SEPARATOR}${ex}${uc.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(o.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===uo.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(o=>{if(!this.isAppMetadata(o))return;let s=this.getAppMetadata(o);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(n[o]=s))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let s=this.getAuthorityMetadata(o);s&&s.aliases.indexOf(e)!==-1&&(n=s)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),o=e.generateAccountId();n.idToken.forEach(s=>{s.indexOf(o)===0&&this.removeIdToken(s,r)}),n.accessToken.forEach(s=>{s.indexOf(o)===0&&this.removeAccessToken(s,r)}),n.refreshToken.forEach(s=>{s.indexOf(o)===0&&this.removeRefreshToken(s,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==uo.POP)return;let o=n.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${o}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=Yu.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,o,s){this.commonLogger.trace("CacheManager - getIdToken called");let c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ro.ID_TOKEN,clientId:this.clientId,realm:o},l=this.getIdTokensByFilter(c,r,n),u=l.size;if(u<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(u>1){let d=l;if(!o){let p=new Map;l.forEach((h,g)=>{h.realm===e.tenantId&&p.set(g,h)});let m=p.size;if(m<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),l.values().next().value;if(m===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),p.values().next().value;d=p}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),d.forEach((p,m)=>{this.removeIdToken(m,r)}),s&&r&&s.addFields({multiMatchedID:l.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),l.values().next().value}getIdTokensByFilter(e,r,n){let o=n&&n.idToken||this.getTokenKeys().idToken,s=new Map;return o.forEach(c=>{if(!this.idTokenKeyMatchesFilter(c,{clientId:this.clientId,...e}))return;let l=this.getIdTokenCredential(c,r);l&&this.credentialMatchesFilter(l,e)&&s.set(c,l)}),s}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,o){let s=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",s);let c=ol.createSearchScopes(r.scopes),l=r.authenticationScheme||uo.BEARER,u=l&&l.toLowerCase()!==uo.BEARER.toLowerCase()?Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ro.ACCESS_TOKEN,d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:o||e.tenantId,target:c,tokenType:l,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},p=n&&n.accessToken||this.getTokenKeys().accessToken,m=[];p.forEach(g=>{if(this.accessTokenKeyMatchesFilter(g,d,!0)){let A=this.getAccessTokenCredential(g,s);A&&this.credentialMatchesFilter(A,d)&&m.push(A)}});let h=m.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",s),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",s),m.forEach(g=>{this.removeAccessToken(J6(g),s)}),this.performanceClient.addFields({multiMatchedAT:m.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",s),m[0])}accessTokenKeyMatchesFilter(e,r,n){let o=e.toLowerCase();if(r.clientId&&o.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&o.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&o.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&o.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let s=r.target.asArray();for(let c=0;c<s.length;c++){if(n&&!o.includes(s[c].toLowerCase()))return!1;if(!n&&o.includes(s[c].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),o=[];return n.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;let c=this.getAccessTokenCredential(s,r);c&&this.credentialMatchesFilter(c,e)&&o.push(c)}),o}getRefreshToken(e,r,n,o,s){this.commonLogger.trace("CacheManager - getRefreshToken called");let c=r?ex:void 0,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ro.REFRESH_TOKEN,clientId:this.clientId,familyId:c},u=o&&o.refreshToken||this.getTokenKeys().refreshToken,d=[];u.forEach(m=>{if(this.refreshTokenKeyMatchesFilter(m,l)){let h=this.getRefreshTokenCredential(m,n);h&&this.credentialMatchesFilter(h,l)&&d.push(h)}});let p=d.length;return p<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(p>1&&s&&n&&s.addFields({multiMatchedRT:p},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),d[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),o=Object.keys(n).map(c=>n[c]),s=o.length;if(s<1)return null;if(s>1)throw xt(b2);return o[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===ex)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let o=fOe(this.staticAuthorityOptions,this.commonLogger);if(o.includes(r)&&o.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==Ro.ACCESS_TOKEN&&e.credentialType!==Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:ol.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(R6)!==-1}isAuthorityMetadata(e){return e.indexOf(qD.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${qD.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},u9=class extends eT{static{a(this,"DefaultStorageClass")}async setAccount(){throw xt(Li)}getAccount(){throw xt(Li)}async setIdTokenCredential(){throw xt(Li)}getIdTokenCredential(){throw xt(Li)}async setAccessTokenCredential(){throw xt(Li)}getAccessTokenCredential(){throw xt(Li)}async setRefreshTokenCredential(){throw xt(Li)}getRefreshTokenCredential(){throw xt(Li)}setAppMetadata(){throw xt(Li)}getAppMetadata(){throw xt(Li)}setServerTelemetry(){throw xt(Li)}getServerTelemetry(){throw xt(Li)}setAuthorityMetadata(){throw xt(Li)}getAuthorityMetadata(){throw xt(Li)}getAuthorityMetadataKeys(){throw xt(Li)}setThrottlingCache(){throw xt(Li)}getThrottlingCache(){throw xt(Li)}removeItem(){throw xt(Li)}getKeys(){throw xt(Li)}getAccountKeys(){throw xt(Li)}getTokenKeys(){throw xt(Li)}};f();f();var Je={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},Den=new Map([[Je.AcquireTokenByCode,"ATByCode"],[Je.AcquireTokenByRefreshToken,"ATByRT"],[Je.AcquireTokenSilent,"ATS"],[Je.AcquireTokenSilentAsync,"ATSAsync"],[Je.AcquireTokenPopup,"ATPopup"],[Je.AcquireTokenRedirect,"ATRedirect"],[Je.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Je.CryptoOptsSignJwt,"CryptoSignJwt"],[Je.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Je.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Je.SilentRefreshClientAcquireToken,"SltRClientAT"],[Je.SsoSilent,"SsoSlt"],[Je.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Je.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Je.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Je.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Je.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Je.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Je.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Je.BrokerHandhshake,"BrokerHandshake"],[Je.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Je.AcquireTokenByBroker,"ATByBroker"],[Je.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Je.RefreshTokenClientAcquireToken,"RTClientAT"],[Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Je.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Je.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Je.AcquireTokenFromCache,"ATFromCache"],[Je.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Je.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Je.AcquireTokenBySilentIframe,"ATBySltIframe"],[Je.InitializeBaseRequest,"InitBaseReq"],[Je.InitializeSilentRequest,"InitSltReq"],[Je.InitializeClientApplication,"InitClientApplication"],[Je.InitializeCache,"InitCache"],[Je.ImportExistingCache,"importCache"],[Je.SetUserData,"setUserData"],[Je.LocalStorageUpdated,"localStorageUpdated"],[Je.SilentIframeClientTokenHelper,"SIClientTHelper"],[Je.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Je.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Je.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Je.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Je.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Je.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Je.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Je.GetAuthCodeUrl,"GetAuthCodeUrl"],[Je.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Je.HandleCodeResponse,"HandleCodeResp"],[Je.HandleResponseEar,"HandleRespEar"],[Je.HandleResponseCode,"HandleRespCode"],[Je.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Je.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Je.AuthClientAcquireToken,"AuthClientAT"],[Je.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Je.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Je.PopTokenGenerateCnf,"PopTGenCnf"],[Je.PopTokenGenerateKid,"PopTGenKid"],[Je.HandleServerTokenResponse,"HandleServerTRes"],[Je.DeserializeResponse,"DeserializeRes"],[Je.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Je.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Je.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Je.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Je.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Je.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Je.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Je.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Je.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Je.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Je.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Je.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Je.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Je.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Je.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Je.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Je.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Je.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Je.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Je.NativeGenerateAuthResult,"NtvGenAuthRes"],[Je.RemoveHiddenIframe,"RemoveHiddenIframe"],[Je.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Je.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Je.GeneratePkceCodes,"GenPkceCodes"],[Je.GenerateCodeVerifier,"GenCodeVerifier"],[Je.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Je.Sha256Digest,"Sha256Digest"],[Je.GetRandomValues,"GetRandomValues"],[Je.GenerateHKDF,"genHKDF"],[Je.GenerateBaseKey,"genBaseKey"],[Je.Base64Decode,"b64Decode"],[Je.UrlEncodeArr,"urlEncArr"],[Je.Encrypt,"encrypt"],[Je.Decrypt,"decrypt"],[Je.GenerateEarKey,"genEarKey"],[Je.DecryptEarResponse,"decryptEarResp"]]),hOe={NotStarted:0,InProgress:1,Completed:2};var UV=class{static{a(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},q2=class{static{a(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:a(()=>null,"end"),discard:a(()=>{},"discard"),add:a(()=>{},"add"),increment:a(()=>{},"increment"),event:{eventId:this.generateId(),status:hOe.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new UV}}startPerformanceMeasurement(){return new UV}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var LDt={tokenRenewalOffsetSeconds:HD,preventCorsPreflight:!1},FDt={loggerCallback:a(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Xa.Info,correlationId:nt.EMPTY_STRING},ODt={claimsBasedCachingEnabled:!1},QDt={async sendGetRequestAsync(){throw xt(Li)},async sendPostRequestAsync(){throw xt(Li)}},UDt={sku:nt.SKU,version:jD,cpu:nt.EMPTY_STRING,os:nt.EMPTY_STRING},qDt={clientSecret:nt.EMPTY_STRING,clientAssertion:void 0},HDt={azureCloudInstance:ox.None,tenant:`${nt.DEFAULT_COMMON_TENANT}`},$Dt={application:{appName:"",appVersion:""}};function gOe({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:o,networkInterface:s,cryptoInterface:c,clientCredentials:l,libraryInfo:u,telemetry:d,serverTelemetryManager:p,persistencePlugin:m,serializableCache:h}){let g={...FDt,...r};return{authOptions:WDt(t),systemOptions:{...LDt,...e},loggerOptions:g,cacheOptions:{...ODt,...n},storageInterface:o||new u9(t.clientId,WD,new k0(g),new q2),networkInterface:s||QDt,cryptoInterface:c||WD,clientCredentials:l||qDt,libraryInfo:{...UDt,...u},telemetry:{...$Dt,...d},serverTelemetryManager:p||null,persistencePlugin:m||null,serializableCache:h||null}}a(gOe,"buildClientConfiguration");function WDt(t){return{clientCapabilities:[],azureCloudOptions:HDt,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}a(WDt,"buildAuthOptions");function qV(t){return t.authOptions.authority.options.protocolMode===Qd.OIDC}a(qV,"isOidcProtocolMode");f();var vf={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var gr={};Sa(gr,{addApplicationTelemetry:()=>p9,addAuthorizationCode:()=>lge,addBrokerParameters:()=>ux,addCcsOid:()=>cx,addCcsUpn:()=>tT,addClaims:()=>V2,addClientAssertion:()=>g9,addClientAssertionType:()=>A9,addClientCapabilitiesToClaims:()=>AOe,addClientId:()=>j2,addClientInfo:()=>K2,addClientSecret:()=>h9,addCodeChallengeParams:()=>oBt,addCodeVerifier:()=>dge,addCorrelationId:()=>z2,addDeviceCode:()=>sBt,addDomainHint:()=>sge,addEARParameters:()=>dBt,addExtraQueryParameters:()=>lx,addGrantType:()=>y9,addIdTokenHint:()=>oge,addInstanceAware:()=>C9,addLibraryInfo:()=>f9,addLoginHint:()=>XD,addLogoutHint:()=>fge,addNativeBroker:()=>iBt,addNonce:()=>cge,addOboAssertion:()=>aBt,addPassword:()=>uBt,addPopToken:()=>v9,addPostLogoutRedirectUri:()=>ige,addPrompt:()=>age,addRedirectUri:()=>G2,addRefreshToken:()=>uge,addRequestTokenUse:()=>cBt,addResponseMode:()=>nge,addResponseType:()=>nBt,addScopes:()=>W2,addServerTelemetry:()=>E9,addSid:()=>VV,addSshJwk:()=>x9,addState:()=>m9,addThrottling:()=>b9,addUsername:()=>lBt,instrumentBrokerParams:()=>$2});f();var H2={};Sa(H2,{ACCESS_TOKEN:()=>VDt,BROKER_CLIENT_ID:()=>d9,BROKER_REDIRECT_URI:()=>GV,CCS_HEADER:()=>tBt,CLAIMS:()=>Ehe,CLIENT_ASSERTION:()=>Ghe,CLIENT_ASSERTION_TYPE:()=>Vhe,CLIENT_ID:()=>RC,CLIENT_INFO:()=>XDt,CLIENT_REQUEST_ID:()=>Dhe,CLIENT_SECRET:()=>jhe,CODE:()=>She,CODE_CHALLENGE:()=>Rhe,CODE_CHALLENGE_METHOD:()=>khe,CODE_VERIFIER:()=>Phe,DEVICE_CODE:()=>Whe,DOMAIN_HINT:()=>ege,EAR_JWE_CRYPTO:()=>rge,EAR_JWK:()=>tge,ERROR:()=>jDt,ERROR_DESCRIPTION:()=>GDt,EXPIRES_IN:()=>KDt,FOCI:()=>eBt,GRANT_TYPE:()=>xhe,ID_TOKEN:()=>zDt,ID_TOKEN_HINT:()=>$he,INSTANCE_AWARE:()=>JD,LOGIN_HINT:()=>Zhe,LOGOUT_HINT:()=>Jhe,NATIVE_BROKER:()=>Yhe,NONCE:()=>whe,OBO_ASSERTION:()=>zhe,ON_BEHALF_OF:()=>ZDt,POST_LOGOUT_URI:()=>Hhe,PROMPT:()=>_he,REDIRECT_URI:()=>HV,REFRESH_TOKEN:()=>Ihe,REFRESH_TOKEN_EXPIRES_IN:()=>YDt,REQUESTED_TOKEN_USE:()=>Khe,REQ_CNF:()=>WV,RESPONSE_MODE:()=>vhe,RESPONSE_TYPE:()=>Che,RETURN_SPA_CODE:()=>jV,SCOPE:()=>bhe,SESSION_STATE:()=>JDt,SID:()=>Xhe,STATE:()=>The,TOKEN_TYPE:()=>$V,X_APP_NAME:()=>Uhe,X_APP_VER:()=>qhe,X_CLIENT_CPU:()=>Lhe,X_CLIENT_CURR_TELEM:()=>Fhe,X_CLIENT_EXTRA_SKU:()=>rBt,X_CLIENT_LAST_TELEM:()=>Ohe,X_CLIENT_OS:()=>Mhe,X_CLIENT_SKU:()=>Bhe,X_CLIENT_VER:()=>Nhe,X_MS_LIB_CAPABILITY:()=>Qhe});f();var RC="client_id",HV="redirect_uri",Che="response_type",vhe="response_mode",xhe="grant_type",Ehe="claims",bhe="scope",jDt="error",GDt="error_description",VDt="access_token",zDt="id_token",Ihe="refresh_token",KDt="expires_in",YDt="refresh_token_expires_in",The="state",whe="nonce",_he="prompt",JDt="session_state",XDt="client_info",She="code",Rhe="code_challenge",khe="code_challenge_method",Phe="code_verifier",Dhe="client-request-id",Bhe="x-client-SKU",Nhe="x-client-VER",Mhe="x-client-OS",Lhe="x-client-CPU",Fhe="x-client-current-telemetry",Ohe="x-client-last-telemetry",Qhe="x-ms-lib-capability",Uhe="x-app-name",qhe="x-app-ver",Hhe="post_logout_redirect_uri",$he="id_token_hint",Whe="device_code",jhe="client_secret",Ghe="client_assertion",Vhe="client_assertion_type",$V="token_type",WV="req_cnf",zhe="assertion",Khe="requested_token_use",ZDt="on_behalf_of",eBt="foci",tBt="X-AnchorMailbox",jV="return_spa_code",Yhe="nativebroker",Jhe="logout_hint",Xhe="sid",Zhe="login_hint",ege="domain_hint",rBt="x-client-xtra-sku",d9="brk_client_id",GV="brk_redirect_uri",JD="instance_aware",tge="ear_jwk",rge="ear_jwe_crypto";function $2(t,e,r){if(!e)return;let n=t.get(RC);n&&t.has(d9)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(HV)},e)}a($2,"instrumentBrokerParams");function nBt(t,e){t.set(Che,e)}a(nBt,"addResponseType");function nge(t,e){t.set(vhe,e||IC.QUERY)}a(nge,"addResponseMode");function iBt(t){t.set(Yhe,"1")}a(iBt,"addNativeBroker");function W2(t,e,r=!0,n=gp){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let o=r?[...e||[],...n]:e||[],s=new ol(o);t.set(bhe,s.printScopes())}a(W2,"addScopes");function j2(t,e){t.set(RC,e)}a(j2,"addClientId");function G2(t,e){t.set(HV,e)}a(G2,"addRedirectUri");function ige(t,e){t.set(Hhe,e)}a(ige,"addPostLogoutRedirectUri");function oge(t,e){t.set($he,e)}a(oge,"addIdTokenHint");function sge(t,e){t.set(ege,e)}a(sge,"addDomainHint");function XD(t,e){t.set(Zhe,e)}a(XD,"addLoginHint");function tT(t,e){t.set(qs.CCS_HEADER,`UPN:${e}`)}a(tT,"addCcsUpn");function cx(t,e){t.set(qs.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}a(cx,"addCcsOid");function VV(t,e){t.set("sid",e)}a(VV,"addSid");function V2(t,e,r){let n=AOe(e,r);try{JSON.parse(n)}catch{throw Es(XI)}t.set(Ehe,n)}a(V2,"addClaims");function z2(t,e){t.set(Dhe,e)}a(z2,"addCorrelationId");function f9(t,e){t.set(Bhe,e.sku),t.set(Nhe,e.version),e.os&&t.set(Mhe,e.os),e.cpu&&t.set(Lhe,e.cpu)}a(f9,"addLibraryInfo");function p9(t,e){e?.appName&&t.set(Uhe,e.appName),e?.appVersion&&t.set(qhe,e.appVersion)}a(p9,"addApplicationTelemetry");function age(t,e){t.set(_he,e)}a(age,"addPrompt");function m9(t,e){e&&t.set(The,e)}a(m9,"addState");function cge(t,e){t.set(whe,e)}a(cge,"addNonce");function oBt(t,e,r){if(e&&r)t.set(Rhe,e),t.set(khe,r);else throw Es(O2)}a(oBt,"addCodeChallengeParams");function lge(t,e){t.set(She,e)}a(lge,"addAuthorizationCode");function sBt(t,e){t.set(Whe,e)}a(sBt,"addDeviceCode");function uge(t,e){t.set(Ihe,e)}a(uge,"addRefreshToken");function dge(t,e){t.set(Phe,e)}a(dge,"addCodeVerifier");function h9(t,e){t.set(jhe,e)}a(h9,"addClientSecret");function g9(t,e){e&&t.set(Ghe,e)}a(g9,"addClientAssertion");function A9(t,e){e&&t.set(Vhe,e)}a(A9,"addClientAssertionType");function aBt(t,e){t.set(zhe,e)}a(aBt,"addOboAssertion");function cBt(t,e){t.set(Khe,e)}a(cBt,"addRequestTokenUse");function y9(t,e){t.set(xhe,e)}a(y9,"addGrantType");function K2(t){t.set(sOe,"1")}a(K2,"addClientInfo");function C9(t){t.has(JD)||t.set(JD,"true")}a(C9,"addInstanceAware");function lx(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}a(lx,"addExtraQueryParameters");function AOe(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw Es(XI)}return e&&e.length>0&&(r.hasOwnProperty(f2.ACCESS_TOKEN)||(r[f2.ACCESS_TOKEN]={}),r[f2.ACCESS_TOKEN][f2.XMS_CC]={values:e}),JSON.stringify(r)}a(AOe,"addClientCapabilitiesToClaims");function lBt(t,e){t.set(P6.username,e)}a(lBt,"addUsername");function uBt(t,e){t.set(P6.password,e)}a(uBt,"addPassword");function v9(t,e){e&&(t.set($V,uo.POP),t.set(WV,e))}a(v9,"addPopToken");function x9(t,e){e&&(t.set($V,uo.SSH),t.set(WV,e))}a(x9,"addSshJwk");function E9(t,e){t.set(Fhe,e.generateCurrentRequestHeaderValue()),t.set(Ohe,e.generateLastRequestHeaderValue())}a(E9,"addServerTelemetry");function b9(t){t.set(Qhe,TC.X_MS_LIB_CAPABILITY_VALUE)}a(b9,"addThrottling");function fge(t,e){t.set(Jhe,e)}a(fge,"addLogoutHint");function ux(t,e,r){t.has(d9)||t.set(d9,e),t.has(GV)||t.set(GV,r)}a(ux,"addBrokerParameters");function dBt(t,e){t.set(tge,encodeURIComponent(e)),t.set(rge,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}a(dBt,"addEARParameters");var KV={};Sa(KV,{createDiscoveredInstance:()=>mge});f();f();f();function yOe(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}a(yOe,"isOpenIdConfigResponse");f();function COe(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}a(COe,"isCloudInstanceDiscoveryResponse");f();function vOe(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}a(vOe,"isCloudInstanceDiscoveryErrorResponse");f();f();var xOe=a((t,e,r,n,o)=>(...s)=>{r.trace(`Executing function ${e}`);let c=n?.startMeasurement(e,o);if(o){let l=e+"CallCount";n?.incrementFields({[l]:1},o)}try{let l=t(...s);return c?.end({success:!0}),r.trace(`Returning result from ${e}`),l}catch(l){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(l))}catch{r.trace("Unable to print error message.")}throw c?.end({success:!1},l),l}},"invoke"),fo=a((t,e,r,n,o)=>(...s)=>{r.trace(`Executing function ${e}`);let c=n?.startMeasurement(e,o);if(o){let l=e+"CallCount";n?.incrementFields({[l]:1},o)}return n?.setPreQueueTime(e,o),t(...s).then(l=>(r.trace(`Returning result from ${e}`),c?.end({success:!0}),l)).catch(l=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(l))}catch{r.trace("Unable to print error message.")}throw c?.end({success:!1},l),l})},"invokeAsync");var I9=class t{static{a(this,"RegionDiscovery")}constructor(e,r,n,o){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=o}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Je.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=m2.ENVIRONMENT_VARIABLE;else{let o=t.IMDS_OPTIONS;try{let s=await fo(this.getRegionFromIMDS.bind(this),Je.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(nt.IMDS_VERSION,o);if(s.status===ai.SUCCESS&&(n=s.body,r.region_source=m2.IMDS),s.status===ai.BAD_REQUEST){let c=await fo(this.getCurrentVersion.bind(this),Je.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(o);if(!c)return r.region_source=m2.FAILED_AUTO_DETECTION,null;let l=await fo(this.getRegionFromIMDS.bind(this),Je.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(c,o);l.status===ai.SUCCESS&&(n=l.body,r.region_source=m2.IMDS)}}catch{return r.region_source=m2.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=m2.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Je.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${nt.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,nt.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Je.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${nt.IMDS_ENDPOINT}?format=json`,e);return r.status===ai.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};I9.IMDS_OPTIONS={headers:{Metadata:"true"}};var CA=class t{static{a(this,"Authority")}constructor(e,r,n,o,s,c,l,u){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=l,this.correlationId=c,this.managedIdentity=u||!1,this.regionDiscovery=new I9(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(nt.CIAM_AUTH_URL))return th.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case nt.ADFS:return th.Adfs;case nt.DSTS:return th.Dsts}return th.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Fi(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw xt(Cf)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw xt(Cf)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw xt(Cf)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw xt(k2);return this.replacePath(this.metadata.end_session_endpoint)}else throw xt(Cf)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw xt(Cf)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw xt(Cf)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===th.Default&&this.protocolMode!==Qd.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,o=new Fi(this.metadata.canonical_authority).getUrlComponents(),s=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((l,u)=>{let d=s[u];if(u===0&&this.canReplaceTenant(o)){let p=new Fi(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];d!==p&&(this.logger.verbose(`Replacing tenant domain name ${d} with id ${p}`),d=p)}l!==d&&(r=r.replace(`/${d}/`,`/${l}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===th.Adfs||this.protocolMode===Qd.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Je.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await fo(this.updateCloudDiscoveryMetadata.bind(this),Je.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await fo(this.updateEndpointMetadata.bind(this),Je.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:MV(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==yf.CACHE&&n?.source!==yf.CACHE&&(e.expiresAt=MV(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Je.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===yf.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let o=await fo(this.updateMetadataWithRegionalInformation.bind(this),Je.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);VD(e,o,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await fo(this.getEndpointMetadataFromNetwork.bind(this),Je.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await fo(this.updateMetadataWithRegionalInformation.bind(this),Je.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),VD(e,n,!0),yf.NETWORK;throw xt(y2,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),VD(e,r,!1),{source:yf.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return VD(e,o,!1),{source:yf.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=LV(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:yf.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Fi(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Es(Q2)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Je.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return yOe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in mhe?mhe[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Je.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==nt.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=kV.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await fo(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Je.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=kV.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=kV.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Je.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await fo(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Je.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return X6(e,n,!0),yf.NETWORK;throw Es(U2)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||nt.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||nt.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||nt.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),X6(e,r,!1),yf.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=pOe(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),X6(e,o,!1),yf.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=LV(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),yf.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===th.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=c9(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Es(ZI)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Je.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${nt.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let o=await this.networkInterface.sendGetRequestAsync(e,r),s,c;if(COe(o.body))s=o.body,c=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(vOe(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),s=o.body,s.error===nt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),c=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=c9(c,this.hostnameAndPort)}catch(o){if(o instanceof ci)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let s=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&Fi.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==ox.None){let o=r.tenant?r.tenant:nt.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${o}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return nt.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw xt(Cf)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return ghe.has(e)}static isPublicCloudAuthority(e){return nt.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let o=new Fi(e);o.validateAsUri();let s=o.getUrlComponents(),c=`${r}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(c=`${r}.${nt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let l=Fi.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:c}).urlString;return n?`${l}?${n}`:l}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,o=new Fi(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(nt.CIAM_AUTH_URL)){let s=o.HostNameAndPort.split(".")[0];r=`${r}${s}${nt.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};CA.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ap.COMMON,Ap.CONSUMERS,Ap.ORGANIZATIONS]);function EOe(t){let n=new Fi(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Ap.COMMON:case Ap.ORGANIZATIONS:case Ap.CONSUMERS:return;default:return n}}a(EOe,"getTenantFromAuthorityString");function zV(t){return t.endsWith(nt.FORWARD_SLASH)?t:`${t}${nt.FORWARD_SLASH}`}a(zV,"formatAuthorityUri");function pge(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw Es(ZI)}return{canonicalAuthority:t.authority?zV(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}a(pge,"buildStaticAuthorityOptions");async function mge(t,e,r,n,o,s,c){c?.addQueueMeasurement(Je.AuthorityFactoryCreateDiscoveredInstance,s);let l=CA.transformCIAMAuthority(zV(t)),u=new CA(l,e,r,n,o,s,c);try{return await fo(u.resolveEndpointsAsync.bind(u),Je.AuthorityResolveEndpointsAsync,o,c,s)(),u}catch{throw xt(Cf)}}a(mge,"createDiscoveredInstance");f();f();var xf=class t extends ci{static{a(this,"ServerError")}constructor(e,r,n,o,s){super(e,r,n),this.name="ServerError",this.errorNo=o,this.status=s,Object.setPrototypeOf(this,t.prototype)}};f();function ZD(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}a(ZD,"getRequestThumbprint");var T9=class t{static{a(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${TC.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let o=t.generateThrottlingStorageKey(r),s=e.getThrottlingCache(o);if(s){if(s.throttleTime<Date.now()){e.removeItem(o,n);return}throw new xf(s.errorCodes?.join(" ")||nt.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,r,n,o){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let s={throttleTime:t.calculateThrottleTime(parseInt(n.headers[qs.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),s,o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(qs.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||TC.DEFAULT_THROTTLE_TIME_SECONDS),n+TC.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,o){let s=ZD(r,n,o),c=this.generateThrottlingStorageKey(s);e.removeItem(c,n.correlationId)}};f();var YV=class t extends ci{static{a(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var Xu=class{static{a(this,"BaseClient")}constructor(e,r){this.config=gOe(e),this.logger=new k0(this.config.loggerOptions,DV,jD),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[qs.CONTENT_TYPE]=nt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case vf.HOME_ACCOUNT_ID:try{let n=_C(e.credential);r[qs.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case vf.UPN:r[qs.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,o,s,c){c&&this.performanceClient?.addQueueMeasurement(c,s);let l=await this.sendPostRequest(o,e,{body:r,headers:n},s);return this.config.serverTelemetryManager&&l.status<500&&l.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),l}async sendPostRequest(e,r,n,o){T9.preProcess(this.cacheManager,e,o);let s;try{s=await fo(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Je.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(r,n);let c=s.headers||{};this.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:c[qs.X_MS_HTTP_VERSION]||"",requestId:c[qs.X_MS_REQUEST_ID]||""},o)}catch(c){if(c instanceof YV){let l=c.responseHeaders;throw l&&this.performanceClient?.addFields({httpVerToken:l[qs.X_MS_HTTP_VERSION]||"",requestId:l[qs.X_MS_REQUEST_ID]||"",contentTypeHeader:l[qs.CONTENT_TYPE]||void 0,contentLengthHeader:l[qs.CONTENT_LENGTH]||void 0,httpStatus:c.httpStatus},o),c.error}throw c instanceof ci?c:xt(A2)}return T9.postProcess(this.cacheManager,e,s,o),s}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Je.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,o=await mge(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=o}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&ux(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&lx(r,e.tokenQueryParameters),z2(r,e.correlationId),$2(r,e.correlationId,this.performanceClient),SC(r)}};f();f();var XV={};Sa(XV,{badToken:()=>nT,consentRequired:()=>gge,interactionRequired:()=>hge,loginRequired:()=>Age,nativeAccountUnavailable:()=>w9,noTokensFound:()=>rT,refreshTokenExpired:()=>_9,uxNotAllowed:()=>JV});f();var rT="no_tokens_found",w9="native_account_unavailable",_9="refresh_token_expired",JV="ux_not_allowed",hge="interaction_required",gge="consent_required",Age="login_required",nT="bad_token";var bOe=[hge,gge,Age,nT,JV],fBt=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],ZV={[rT]:"No refresh token found in the cache. Please sign-in.",[w9]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[_9]:"Refresh token has expired.",[nT]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[JV]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},yge={noTokensFoundError:{code:rT,desc:ZV[rT]},native_account_unavailable:{code:w9,desc:ZV[w9]},bad_token:{code:nT,desc:ZV[nT]}},D0=class t extends ci{static{a(this,"InteractionRequiredAuthError")}constructor(e,r,n,o,s,c,l,u){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=o||nt.EMPTY_STRING,this.traceId=s||nt.EMPTY_STRING,this.correlationId=c||nt.EMPTY_STRING,this.claims=l||nt.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=u}};function ez(t,e,r){let n=!!t&&bOe.indexOf(t)>-1,o=!!r&&fBt.indexOf(r)>-1,s=!!e&&bOe.some(c=>e.indexOf(c)>-1);return n||s||o}a(ez,"isInteractionRequiredError");function tz(t){return new D0(t,ZV[t])}a(tz,"createInteractionRequiredAuthError");f();var rz=class t{static{a(this,"ProtocolUtils")}static setRequestState(e,r,n){let o=t.generateLibraryState(e,n);return r?`${o}${nt.RESOURCE_DELIM}${r}`:o}static generateLibraryState(e,r){if(!e)throw xt(YI);let n={id:e.createNewGuid()};r&&(n.meta=r);let o=JSON.stringify(n);return e.base64Encode(o)}static parseRequestState(e,r){if(!e)throw xt(YI);if(!r)throw xt(yA);try{let n=r.split(nt.RESOURCE_DELIM),o=n[0],s=n.length>1?n.slice(1).join(nt.RESOURCE_DELIM):nt.EMPTY_STRING,c=e.base64Decode(o),l=JSON.parse(c);return{userRequestState:s||nt.EMPTY_STRING,libraryState:l}}catch{throw xt(yA)}}};f();var pBt={SW:"sw"},iT=class{static{a(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Je.PopTokenGenerateCnf,e.correlationId);let n=await fo(this.generateKid.bind(this),Je.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:o}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Je.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:pBt.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,o){let{resourceRequestMethod:s,resourceRequestUri:c,shrClaims:l,shrNonce:u,shrOptions:d}=n,m=(c?new Fi(c):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:P0(),m:s?.toUpperCase(),u:m?.HostNameAndPort,nonce:u||this.cryptoUtils.createNewGuid(),p:m?.AbsolutePath,q:m?.QueryString?[[],m.QueryString]:void 0,client_claims:l||void 0,...o},r,d,n.correlationId)}};f();var B0=class{static{a(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var Fc=class t{static{a(this,"ResponseHandler")}constructor(e,r,n,o,s,c,l){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=o,this.serializableCache=s,this.persistencePlugin=c,this.performanceClient=l}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||nt.NOT_AVAILABLE} - Timestamp: ${e.timestamp||nt.NOT_AVAILABLE} - Description: ${e.error_description||nt.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||nt.NOT_AVAILABLE} - Trace ID: ${e.trace_id||nt.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,s=new xf(e.error,n,e.suberror,o,e.status);if(r&&e.status&&e.status>=ai.SERVER_ERROR_RANGE_START&&e.status<=ai.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(r&&e.status&&e.status>=ai.CLIENT_ERROR_RANGE_START&&e.status<=ai.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw ez(e.error,e.error_description,e.suberror)?new D0(e.error,e.error_description,e.suberror,e.timestamp||nt.EMPTY_STRING,e.trace_id||nt.EMPTY_STRING,e.correlation_id||nt.EMPTY_STRING,e.claims||nt.EMPTY_STRING,o):s}}async handleServerTokenResponse(e,r,n,o,s,c,l,u,d){this.performanceClient?.addQueueMeasurement(Je.HandleServerTokenResponse,e.correlation_id);let p;if(e.id_token){if(p=sx(e.id_token||nt.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&p.nonce!==s.nonce)throw xt(x2);if(o.maxAge||o.maxAge===0){let A=p.auth_time;if(!A)throw xt(tx);K6(A,o.maxAge)}}this.homeAccountIdentifier=Yu.generateHomeAccountId(e.client_info||nt.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,p);let m;s&&s.state&&(m=rz.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||o.sshKid||void 0;let h=this.generateCacheRecord(e,r,n,o,p,c,s),g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new B0(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(g)),l&&!u&&h.account){let A=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(A,o.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,h,!1,o,p,m,void 0,d)}await this.cacheStorage.saveCacheRecord(h,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(g))}return t.generateAuthenticationResult(this.cryptoObj,r,h,!1,o,p,m,e,d)}generateCacheRecord(e,r,n,o,s,c,l){let u=r.getPreferredCache();if(!u)throw xt(nx);let d=OV(s),p,m;e.id_token&&s&&(p=lhe(this.homeAccountIdentifier,u,e.id_token,this.clientId,d||""),m=IOe(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,s,e.client_info,u,d,l,void 0,this.logger));let h=null;if(e.access_token){let y=e.scope?ol.fromString(e.scope):new ol(o.scopes||[]),v=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,b=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,I=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,S=n+v,k=S+b,N=I&&I>0?n+I:void 0;h=uhe(this.homeAccountIdentifier,u,e.access_token,this.clientId,d||r.tenant||"",y.printScopes(),S,k,this.cryptoObj.base64Decode,N,e.token_type,c,e.key_id,o.claims,o.requestedClaimsHash)}let g=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){let v=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=n+v}g=dhe(this.homeAccountIdentifier,u,e.refresh_token,this.clientId,e.foci,c,y)}let A=null;return e.foci&&(A={clientId:this.clientId,environment:u,familyId:e.foci}),{account:m,idToken:p,accessToken:h,refreshToken:g,appMetadata:A}}static async generateAuthenticationResult(e,r,n,o,s,c,l,u,d){let p=nt.EMPTY_STRING,m=[],h=null,g,A,y=nt.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===uo.POP&&!s.popKid){let S=new iT(e),{secret:k,keyId:N}=n.accessToken;if(!N)throw xt(P2);p=await S.signPopToken(k,N,s)}else p=n.accessToken.secret;m=ol.fromString(n.accessToken.target).asArray(),h=Y6(n.accessToken.expiresOn),g=Y6(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(A=Y6(n.accessToken.refreshOn))}n.appMetadata&&(y=n.appMetadata.familyId===ex?ex:"");let v=c?.oid||c?.sub||"",b=c?.tid||"";u?.spa_accountid&&n.account&&(n.account.nativeAccountId=u?.spa_accountid);let I=n.account?FV(n.account.getAccountInfo(),void 0,c,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:v,tenantId:b,scopes:m,account:I,idToken:n?.idToken?.secret||"",idTokenClaims:c||{},accessToken:p,fromCache:o,expiresOn:h,extExpiresOn:g,refreshOn:A,correlationId:s.correlationId,requestId:d||nt.EMPTY_STRING,familyId:y,tokenType:n.accessToken?.tokenType||nt.EMPTY_STRING,state:l?l.userRequestState:nt.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||nt.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||nt.EMPTY_STRING,code:u?.spa_code,fromNativeBroker:!1}}};function IOe(t,e,r,n,o,s,c,l,u,d,p,m){m?.verbose("setCachedAccount called");let g=t.getAccountKeys().find(I=>I.startsWith(r)),A=null;g&&(A=t.getAccount(g,o));let y=A||Yu.createAccount({homeAccountId:r,idTokenClaims:s,clientInfo:c,environment:l,cloudGraphHostName:d?.cloud_graph_host_name,msGraphHost:d?.msgraph_host,nativeAccountId:p},e,n),v=y.tenantProfiles||[],b=u||y.realm;if(b&&!v.find(I=>I.tenantId===b)){let I=a9(r,y.localAccountId,b,s);v.push(I)}return y.tenantProfiles=v,y}a(IOe,"buildAccountToCache");f();async function Ef(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}a(Ef,"getClientAssertion");var S9=class extends Xu{static{a(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Je.AuthClientAcquireToken,e.correlationId),!e.code)throw xt(I2);let n=P0(),o=await fo(this.executeTokenRequest.bind(this),Je.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=o.headers?.[qs.X_MS_REQUEST_ID],c=new Fc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return c.validateTokenResponse(o.body),fo(c.handleServerTokenResponse.bind(c),Je.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,n,e,r,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw Es(F2);let r=this.createLogoutUrlQueryString(e);return Fi.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Je.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),o=Fi.appendQueryString(e.tokenEndpoint,n),s=await fo(this.createTokenRequestBody.bind(this),Je.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),c;if(r.clientInfo)try{let d=YD(r.clientInfo,this.cryptoUtils.base64Decode);c={credential:`${d.uid}${uc.CLIENT_INFO_SEPARATOR}${d.utid}`,type:vf.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}let l=this.createTokenRequestHeaders(c||r.ccsCredential),u=ZD(this.config.authOptions.clientId,r);return fo(this.executePostToTokenEndpoint.bind(this),Je.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(o,s,l,u,r.correlationId,Je.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Je.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(j2(r,e.embeddedClientId||e.tokenBodyParameters?.[RC]||this.config.authOptions.clientId),this.includeRedirectUri)G2(r,e.redirectUri);else if(!e.redirectUri)throw Es(D2);if(W2(r,e.scopes,!0,this.oidcDefaultScopes),lge(r,e.code),f9(r,this.config.libraryInfo),p9(r,this.config.telemetry.application),b9(r),this.serverTelemetryManager&&!qV(this.config)&&E9(r,this.serverTelemetryManager),e.codeVerifier&&dge(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&h9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;g9(r,await Ef(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),A9(r,o.assertionType)}if(y9(r,yp.AUTHORIZATION_CODE_GRANT),K2(r),e.authenticationScheme===uo.POP){let o=new iT(this.cryptoUtils,this.performanceClient),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await fo(o.generateCnf.bind(o),Je.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,v9(r,s)}else if(e.authenticationScheme===uo.SSH)if(e.sshJwk)x9(r,e.sshJwk);else throw Es(ax);(!Fa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&V2(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let o=YD(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${o.uid}${uc.CLIENT_INFO_SEPARATOR}${o.utid}`,type:vf.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case vf.HOME_ACCOUNT_ID:try{let o=_C(n.credential);cx(r,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case vf.UPN:tT(r,n.credential);break}return e.embeddedClientId&&ux(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&lx(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[jV])&&lx(r,{[jV]:"1"}),$2(r,e.correlationId,this.performanceClient),SC(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&ige(r,e.postLogoutRedirectUri),e.correlationId&&z2(r,e.correlationId),e.idTokenHint&&oge(r,e.idTokenHint),e.state&&m9(r,e.state),e.logoutHint&&fge(r,e.logoutHint),e.extraQueryParameters&&lx(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&C9(r),SC(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};f();var mBt=300,Y2=class extends Xu{static{a(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientAcquireToken,e.correlationId);let r=P0(),n=await fo(this.executeTokenRequest.bind(this),Je.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=n.headers?.[qs.X_MS_REQUEST_ID],s=new Fc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(n.body),fo(s.handleServerTokenResponse.bind(s),Je.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){if(!e)throw Es(L2);if(this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw xt(rx);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await fo(this.acquireTokenWithCachedRefreshToken.bind(this),Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let o=n instanceof D0&&n.errorCode===rT,s=n instanceof xf&&n.errorCode===k6.INVALID_GRANT_ERROR&&n.subError===k6.CLIENT_MISMATCH_ERROR;if(o||s)return fo(this.acquireTokenWithCachedRefreshToken.bind(this),Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return fo(this.acquireTokenWithCachedRefreshToken.bind(this),Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=xOe(this.cacheManager.getRefreshToken.bind(this.cacheManager),Je.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw tz(rT);if(n.expiresOn&&GD(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||mBt))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),tz(_9);let o={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||uo.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:vf.HOME_ACCOUNT_ID}};try{return await fo(this.acquireToken.bind(this),Je.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(s){if(s instanceof D0&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),s.subError===nT)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let c=J6(n);this.cacheManager.removeRefreshToken(c,e.correlationId)}throw s}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),o=Fi.appendQueryString(r.tokenEndpoint,n),s=await fo(this.createTokenRequestBody.bind(this),Je.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),c=this.createTokenRequestHeaders(e.ccsCredential),l=ZD(this.config.authOptions.clientId,e);return fo(this.executePostToTokenEndpoint.bind(this),Je.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,s,c,l,e.correlationId,Je.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Je.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(j2(r,e.embeddedClientId||e.tokenBodyParameters?.[RC]||this.config.authOptions.clientId),e.redirectUri&&G2(r,e.redirectUri),W2(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),y9(r,yp.REFRESH_TOKEN_GRANT),K2(r),f9(r,this.config.libraryInfo),p9(r,this.config.telemetry.application),b9(r),this.serverTelemetryManager&&!qV(this.config)&&E9(r,this.serverTelemetryManager),uge(r,e.refreshToken),this.config.clientCredentials.clientSecret&&h9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;g9(r,await Ef(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),A9(r,n.assertionType)}if(e.authenticationScheme===uo.POP){let n=new iT(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await fo(n.generateCnf.bind(n),Je.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,v9(r,o)}else if(e.authenticationScheme===uo.SSH)if(e.sshJwk)x9(r,e.sshJwk);else throw Es(ax);if((!Fa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&V2(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case vf.HOME_ACCOUNT_ID:try{let n=_C(e.ccsCredential.credential);cx(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case vf.UPN:tT(r,e.ccsCredential.credential);break}return e.embeddedClientId&&ux(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&lx(r,e.tokenBodyParameters),$2(r,e.correlationId,this.performanceClient),SC(r)}};f();var R9=class extends Xu{static{a(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Je.SilentFlowClientAcquireCachedToken,e.correlationId);let r=ks.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Fa.isEmptyObj(e.claims))throw this.setCacheOutcome(ks.FORCE_REFRESH_OR_CLAIMS,e.correlationId),xt(ix);if(!e.account)throw xt(rx);let n=e.account.tenantId||EOe(e.authority),o=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,o,n);if(s){if(che(s.cachedAt)||GD(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ks.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),xt(ix);s.refreshOn&&GD(s.refreshOn,0)&&(r=ks.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ks.NO_CACHED_ACCESS_TOKEN,e.correlationId),xt(ix);let c=e.authority||this.authority.getPreferredCache(),l={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(c)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await fo(this.generateResultFromCacheRecord.bind(this),Je.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(l,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==ks.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Je.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=sx(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let o=n?.auth_time;if(!o)throw xt(tx);K6(o,r.maxAge)}return Fc.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var k9={};Sa(k9,{getAuthorizationCodePayload:()=>ABt,getAuthorizeUrl:()=>gBt,getStandardAuthorizeRequestParameters:()=>hBt,validateAuthorizationResponse:()=>TOe});f();function hBt(t,e,r,n){let o=e.correlationId,s=new Map;j2(s,e.embeddedClientId||e.extraQueryParameters?.[RC]||t.clientId);let c=[...e.scopes||[],...e.extraScopesToConsent||[]];if(W2(s,c,!0,t.authority.options.OIDCOptions?.defaultScopes),G2(s,e.redirectUri),z2(s,o),nge(s,e.responseMode),K2(s),e.prompt&&(age(s,e.prompt),n?.addFields({prompt:e.prompt},o)),e.domainHint&&(sge(s,e.domainHint),n?.addFields({domainHintFromRequest:!0},o)),e.prompt!==jI.SELECT_ACCOUNT)if(e.sid&&e.prompt===jI.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),VV(s,e.sid),n?.addFields({sidFromRequest:!0},o);else if(e.account){let l=CBt(e.account),u=vBt(e.account);if(u&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),u=null),u){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),XD(s,u),n?.addFields({loginHintFromClaim:!0},o);try{let d=_C(e.account.homeAccountId);cx(s,d)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(l&&e.prompt===jI.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),VV(s,l),n?.addFields({sidFromClaim:!0},o);try{let d=_C(e.account.homeAccountId);cx(s,d)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),XD(s,e.loginHint),tT(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),XD(s,e.account.username),n?.addFields({loginHintFromUpn:!0},o);try{let d=_C(e.account.homeAccountId);cx(s,d)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),XD(s,e.loginHint),tT(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},o));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&cge(s,e.nonce),e.state&&m9(s,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&V2(s,e.claims,t.clientCapabilities),e.embeddedClientId&&ux(s,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(JD))&&C9(s),s}a(hBt,"getStandardAuthorizeRequestParameters");function gBt(t,e,r,n){let o=SC(e,r,n);return Fi.appendQueryString(t.authorizationEndpoint,o)}a(gBt,"getAuthorizeUrl");function ABt(t,e){if(TOe(t,e),!t.code)throw xt(R2);return t}a(ABt,"getAuthorizationCodePayload");function TOe(t,e){if(!t.state||!e)throw t.state?xt(zI,"Cached State"):xt(zI,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw xt(yA,t.state)}try{n=decodeURIComponent(e)}catch{throw xt(yA,t.state)}if(r!==n)throw xt(v2);if(t.error||t.error_description||t.suberror){let o=yBt(t);throw ez(t.error,t.error_description,t.suberror)?new D0(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",o):new xf(t.error||"",t.error_description,t.suberror,o)}}a(TOe,"validateAuthorizationResponse");function yBt(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}a(yBt,"parseServerErrorNo");function CBt(t){return t.idTokenClaims?.sid||null}a(CBt,"extractAccountSid");function vBt(t){return t.idTokenClaims?.login_hint||null}a(vBt,"extractLoginHint");f();var wOe=",",_Oe="|";function xBt(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:o,extensionVersion:s}=t,c=new Map([[0,[r,n]],[2,[o,s]]]),l=[];if(e?.length){if(l=e.split(wOe),l.length<4)return e}else l=Array.from({length:4},()=>_Oe);return c.forEach((u,d)=>{u.length===2&&u[0]?.length&&u[1]?.length&&EBt({skuArr:l,index:d,skuName:u[0],skuVersion:u[1]})}),l.join(wOe)}a(xBt,"makeExtraSkuString");function EBt(t){let{skuArr:e,index:r,skuName:n,skuVersion:o}=t;r>=e.length||(e[r]=[n,o].join(_Oe))}a(EBt,"setSku");var J2=class t{static{a(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=ks.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||nt.EMPTY_STRING,this.wrapperVer=e.wrapperVer||nt.EMPTY_STRING,this.telemetryCacheKey=Ll.CACHE_KEY+uc.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Ll.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let o=r.join(Ll.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),c=[e,s].join(Ll.VALUE_SEPARATOR);return[Ll.SCHEMA_VERSION,c,o].join(Ll.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(Ll.VALUE_SEPARATOR),o=e.errors.slice(0,r).join(Ll.VALUE_SEPARATOR),s=e.errors.length,c=r<s?Ll.OVERFLOW_TRUE:Ll.OVERFLOW_FALSE,l=[s,c].join(Ll.VALUE_SEPARATOR);return[Ll.SCHEMA_VERSION,e.cacheHits,n,o,l].join(Ll.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=Ll.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ci?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(Ll.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let o={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,o=0,s=e.errors.length;for(r=0;r<s;r++){let c=e.failedRequests[2*r]||nt.EMPTY_STRING,l=e.failedRequests[2*r+1]||nt.EMPTY_STRING,u=e.errors[r]||nt.EMPTY_STRING;if(o+=c.toString().length+l.toString().length+u.length+3,o<Ll.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||nt.EMPTY_STRING),e.push(this.regionSource||nt.EMPTY_STRING),e.push(this.regionOutcome||nt.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return xBt(e)}};var dx=class{static{a(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],s={homeAccountId:o.home_account_id,environment:o.environment,realm:o.realm,localAccountId:o.local_account_id,username:o.username,authorityType:o.authority_type,name:o.name,clientInfo:o.client_info,lastModificationTime:o.last_modification_time,lastModificationApp:o.last_modification_app,tenantProfiles:o.tenantProfiles?.map(l=>JSON.parse(l))},c=new Yu;eT.toObject(c,s),r[n]=c}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],s={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,realm:o.realm};r[n]=s}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],s={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,realm:o.realm,target:o.target,cachedAt:o.cached_at,expiresOn:o.expires_on,extendedExpiresOn:o.extended_expires_on,refreshOn:o.refresh_on,keyId:o.key_id,tokenType:o.token_type,requestedClaims:o.requestedClaims,requestedClaimsHash:o.requestedClaimsHash,userAssertionHash:o.userAssertionHash};r[n]=s}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n],s={homeAccountId:o.home_account_id,environment:o.environment,credentialType:o.credential_type,clientId:o.client_id,secret:o.secret,familyId:o.family_id,target:o.target,realm:o.realm};r[n]=s}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let o=e[n];r[n]={clientId:o.client_id,environment:o.environment,familyId:o.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};f();f();var SOe="system_assigned_managed_identity",SBt="managed_identity",vge=`https://login.microsoftonline.com/${SBt}/`,Cp={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},sl={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},$n={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},ei={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},Za={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},sa={GET:"get",POST:"post"},nz={SUCCESS_RANGE_START:ai.SUCCESS_RANGE_START,SUCCESS_RANGE_END:ai.SUCCESS_RANGE_END,SERVER_ERROR:ai.SERVER_ERROR},ROe="REGION_NAME",kOe="MSAL_FORCE_REGION",POe=32,DOe={SHA256:"sha256"},iz={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},Ol={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},fx={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},rh={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},oz={INTERVAL_MS:100,TIMEOUT_MS:5e3},BOe=4096;f();f();f();f();var eB=class{static{a(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var sz=Ne(require("http"),1),xge=Ne(require("https"),1);var tB=class{static{a(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?NOe(e,this.proxyUrl,sa.GET,r,this.customAgentOptions,n):MOe(e,sa.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?NOe(e,this.proxyUrl,sa.POST,r,this.customAgentOptions):MOe(e,sa.POST,r,this.customAgentOptions)}},NOe=a((t,e,r,n,o,s)=>{let c=new URL(t),l=new URL(e),u=n?.headers||{},d={host:l.hostname,port:l.port,method:"CONNECT",path:c.hostname,headers:u};o&&Object.keys(o).length&&(d.agent=new sz.default.Agent(o));let p="";if(r===sa.POST){let h=n?.body||"";p=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${h.length}\r
\r
${h}`}else s&&(d.timeout=s);let m=`${r.toUpperCase()} ${c.href} HTTP/1.1\r
Host: ${c.host}\r
Connection: close\r
`+p+`\r
`;return new Promise((h,g)=>{let A=sz.default.request(d);s&&A.on("timeout",()=>{A.destroy(),g(new Error("Request time out"))}),A.end(),A.on("connect",(y,v)=>{let b=y?.statusCode||nz.SERVER_ERROR;(b<nz.SUCCESS_RANGE_START||b>nz.SUCCESS_RANGE_END)&&(A.destroy(),v.destroy(),g(new Error(`Error connecting to proxy. Http status code: ${y.statusCode}. Http status message: ${y?.statusMessage||"Unknown"}`))),v.write(m);let I=[];v.on("data",S=>{I.push(S)}),v.on("end",()=>{let k=Buffer.concat([...I]).toString().split(`\r
`),N=parseInt(k[0].split(" ")[1]),F=k[0].split(" ").slice(2).join(" "),O=k[k.length-1],Y=k.slice(1,k.length-2),z=new Map;Y.forEach(ee=>{let J=ee.split(new RegExp(/:\s(.*)/s)),G=J[0],j=J[1];try{let Z=JSON.parse(j);Z&&typeof Z=="object"&&(j=Z)}catch{}z.set(G,j)});let U=Object.fromEntries(z),H=eB.getNetworkResponse(U,LOe(N,F,U,O),N);(N<ai.SUCCESS_RANGE_START||N>ai.SUCCESS_RANGE_END)&&H.body.error!==Ol.AUTHORIZATION_PENDING&&A.destroy(),h(H)}),v.on("error",S=>{A.destroy(),v.destroy(),g(new Error(S.toString()))})}),A.on("error",y=>{A.destroy(),g(new Error(y.toString()))})})},"networkRequestViaProxy"),MOe=a((t,e,r,n,o)=>{let s=e===sa.POST,c=r?.body||"",l=new URL(t),u=r?.headers||{},d={method:e,headers:u,...eB.urlToHttpOptions(l)};return n&&Object.keys(n).length&&(d.agent=new xge.default.Agent(n)),s?d.headers={...d.headers,"Content-Length":c.length}:o&&(d.timeout=o),new Promise((p,m)=>{let h;d.protocol==="http:"?h=sz.default.request(d):h=xge.default.request(d),s&&h.write(c),o&&h.on("timeout",()=>{h.destroy(),m(new Error("Request time out"))}),h.end(),h.on("response",g=>{let A=g.headers,y=g.statusCode,v=g.statusMessage,b=[];g.on("data",I=>{b.push(I)}),g.on("end",()=>{let I=Buffer.concat([...b]).toString(),S=A,k=eB.getNetworkResponse(S,LOe(y,v,S,I),y);(y<ai.SUCCESS_RANGE_START||y>ai.SUCCESS_RANGE_END)&&k.body.error!==Ol.AUTHORIZATION_PENDING&&h.destroy(),p(k)})}),h.on("error",g=>{h.destroy(),m(new Error(g.toString()))})})},"networkRequestViaHttps"),LOe=a((t,e,r,n)=>{let o;try{o=JSON.parse(n)}catch{let c,l;t>=ai.CLIENT_ERROR_RANGE_START&&t<=ai.CLIENT_ERROR_RANGE_END?(c="client_error",l="A client"):t>=ai.SERVER_ERROR_RANGE_START&&t<=ai.SERVER_ERROR_RANGE_END?(c="server_error",l="A server"):(c="unknown_error",l="An unknown"),o={error:c,error_description:`${l} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return o},"parseBody");f();f();f();var az="invalid_file_extension",cz="invalid_file_path",oT="invalid_managed_identity_id_type",lz="invalid_secret",FOe="missing_client_id",OOe="network_unavailable",uz="platform_not_supported",dz="unable_to_create_azure_arc",fz="unable_to_create_cloud_shell",pz="unable_to_create_source",P9="unable_to_read_secret_file",QOe="user_assigned_not_available_at_runtime",mz="www_authenticate_header_missing",hz="www_authenticate_header_unsupported_format",X2={[$n.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[$n.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[$n.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[$n.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var RBt={[az]:"The file path in the WWW-Authenticate header does not contain a .key file.",[cz]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[oT]:"More than one ManagedIdentityIdType was provided.",[lz]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[uz]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[FOe]:"A ManagedIdentityId id was not provided.",[X2.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${$n.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[X2.IDENTITY_ENDPOINT]:`The Managed Identity's '${$n.IDENTITY_ENDPOINT}' environment variable is malformed.`,[X2.IMDS_ENDPOINT]:`The Managed Identity's '${$n.IMDS_ENDPOINT}' environment variable is malformed.`,[X2.MSI_ENDPOINT]:`The Managed Identity's '${$n.MSI_ENDPOINT}' environment variable is malformed.`,[OOe]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[dz]:"Azure Arc Managed Identities can only be system assigned.",[fz]:"Cloud Shell Managed Identities can only be system assigned.",[pz]:"Unable to create a Managed Identity source based on environment variables.",[P9]:"Unable to read the secret file.",[QOe]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[mz]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[hz]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},Ege=class t extends ci{static{a(this,"ManagedIdentityError")}constructor(e){super(e,RBt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function Oc(t){return new Ege(t)}a(Oc,"createManagedIdentityError");var gz=class{static{a(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,o=e?.userAssignedObjectId;if(r){if(n||o)throw Oc(oT);this.id=r,this.idType=Za.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||o)throw Oc(oT);this.id=n,this.idType=Za.USER_ASSIGNED_RESOURCE_ID}else if(o){if(r||n)throw Oc(oT);this.id=o,this.idType=Za.USER_ASSIGNED_OBJECT_ID}else this.id=SOe,this.idType=Za.SYSTEM_ASSIGNED}};f();var au={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},vp=class t extends ci{static{a(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(au.invalidLoopbackAddressType.code,`${au.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(au.unableToLoadRedirectUri.code,`${au.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(au.noAuthCodeInResponse.code,`${au.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(au.noLoopbackServerExists.code,`${au.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(au.loopbackServerAlreadyExists.code,`${au.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(au.loopbackServerTimeout.code,`${au.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(au.stateNotFoundError.code,au.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(au.thumbprintMissing.code,au.thumbprintMissing.desc)}};var kBt={clientId:nt.EMPTY_STRING,authority:nt.DEFAULT_AUTHORITY,clientSecret:nt.EMPTY_STRING,clientAssertion:nt.EMPTY_STRING,clientCertificate:{thumbprint:nt.EMPTY_STRING,thumbprintSha256:nt.EMPTY_STRING,privateKey:nt.EMPTY_STRING,x5c:nt.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:nt.EMPTY_STRING,authorityMetadata:nt.EMPTY_STRING,clientCapabilities:[],protocolMode:Qd.AAD,azureCloudOptions:{azureCloudInstance:ox.None,tenant:nt.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},PBt={claimsBasedCachingEnabled:!1},bge={loggerCallback:a(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Xa.Info},DBt={loggerOptions:bge,networkClient:new tB,proxyUrl:nt.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},BBt={application:{appName:nt.EMPTY_STRING,appVersion:nt.EMPTY_STRING}};function UOe({auth:t,broker:e,cache:r,system:n,telemetry:o}){let s={...DBt,networkClient:new tB(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||bge,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw vp.createStateNotFoundError();return{auth:{...kBt,...t},broker:{...e},cache:{...PBt,...r},system:{...s,...n},telemetry:{...BBt,...o}}}a(UOe,"buildAppConfiguration");function qOe({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new gz(e),o=r?.loggerOptions||bge,s;return r?.networkClient?s=r.networkClient:s=new tB(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:o,networkClient:s},disableInternalRetries:r?.disableInternalRetries||!1}}a(qOe,"buildManagedIdentityConfiguration");f();f();f();f();var HOe=Ne(require("crypto"));var yz=new Uint8Array(256),Az=yz.length;function Ige(){return Az>yz.length-16&&(HOe.default.randomFillSync(yz),Az=0),yz.slice(Az,Az+=16)}a(Ige,"rng");f();f();f();var $Oe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function NBt(t){return typeof t=="string"&&$Oe.test(t)}a(NBt,"validate");var WOe=NBt;var Zu=[];for(let t=0;t<256;++t)Zu.push((t+256).toString(16).substr(1));function MBt(t,e=0){let r=(Zu[t[e+0]]+Zu[t[e+1]]+Zu[t[e+2]]+Zu[t[e+3]]+"-"+Zu[t[e+4]]+Zu[t[e+5]]+"-"+Zu[t[e+6]]+Zu[t[e+7]]+"-"+Zu[t[e+8]]+Zu[t[e+9]]+"-"+Zu[t[e+10]]+Zu[t[e+11]]+Zu[t[e+12]]+Zu[t[e+13]]+Zu[t[e+14]]+Zu[t[e+15]]).toLowerCase();if(!WOe(r))throw TypeError("Stringified UUID is invalid");return r}a(MBt,"stringify");var jOe=MBt;f();function LBt(t,e,r){t=t||{};let n=t.random||(t.rng||Ige)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return jOe(n)}a(LBt,"v4");var Tge=LBt;var rB=class{static{a(this,"GuidGenerator")}generateGuid(){return Tge()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};f();var N0=class t{static{a(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(Ku.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,nt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,Ku.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};f();f();var GOe=Ne(require("crypto"),1);var sT=class{static{a(this,"HashUtils")}sha256(e){return GOe.default.createHash(DOe.SHA256).update(e).digest()}};var VOe=Ne(require("crypto"),1);var Cz=class{static{a(this,"PkceGenerator")}constructor(){this.hashUtils=new sT}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%iz.CV_CHARSET.length;for(;e.length<=POe;){let o=VOe.default.randomBytes(1)[0];if(o>=r)continue;let s=o%iz.CV_CHARSET.length;e.push(iz.CV_CHARSET[s])}let n=e.join(nt.EMPTY_STRING);return N0.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return N0.base64EncodeUrl(this.hashUtils.sha256(e).toString(Ku.BASE64),Ku.BASE64)}};var kC=class{static{a(this,"CryptoProvider")}constructor(){this.pkceGenerator=new Cz,this.guidGenerator=new rB,this.hashUtils=new sT}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return N0.base64Encode(e)}base64Decode(e){return N0.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return N0.base64EncodeUrl(this.hashUtils.sha256(e).toString(Ku.BASE64),Ku.BASE64)}};f();f();var aT=class extends eT{static{a(this,"NodeStorage")}constructor(e,r,n,o){super(r,n,e,new q2,o),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let o=e[n];if(typeof o=="object")if(o instanceof Yu)r.accounts[n]=o;else if(Fl.isIdTokenEntity(o))r.idTokens[n]=o;else if(Fl.isAccessTokenEntity(o))r.accessTokens[n]=o;else if(Fl.isRefreshTokenEntity(o))r.refreshTokens[n]=o;else if(Fl.isAppMetadataEntity(n,o))r.appMetadata[n]=o;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new Yu,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return Fl.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=Fl.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return Fl.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=Fl.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return Fl.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=Fl.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return Fl.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=Fl.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&Fl.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&Fl.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&Fl.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return dx.deserializeAllCache(dx.deserializeJSONBlob(e))}static generateJsonCache(e){return WI.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=Fl.generateCredentialKey(r);if(e!==n){let o=this.getItem(e);if(o)return this.removeItem(e),this.setItem(n,o),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};f();var D9={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},nB=class{static{a(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=WI.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=dx.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=aT.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new kC().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new B0(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new B0(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(Yu.generateAccountCacheKey(e),r||new rB().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new B0(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let o=r[n];if(!e.hasOwnProperty(n))o!==null&&(e[n]=o);else{let s=o!==null,c=typeof o=="object",l=!Array.isArray(o),u=typeof e[n]<"u"&&e[n]!==null;s&&c&&l&&u?this.mergeUpdates(e[n],o):e[n]=o}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,o=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,s=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,c=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,l=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:o,RefreshToken:s,IdToken:c,AppMetadata:l}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(o=>{(!r||!r.hasOwnProperty(o))&&delete n[o]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...D9.Account,...e.Account},IdToken:{...D9.IdToken,...e.IdToken},AccessToken:{...D9.AccessToken,...e.AccessToken},RefreshToken:{...D9.RefreshToken,...e.RefreshToken},AppMetadata:{...D9.AppMetadata,...e.AppMetadata}}}};f();var bqe=Ne(Eqe(),1);var px=class t{static{a(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let o=new t;return o.privateKey=r,o.thumbprint=e,o.useSha256=!1,n&&(o.publicCertificate=this.parseCertificate(n)),o}static fromCertificateWithSha256Thumbprint(e,r,n){let o=new t;return o.privateKey=r,o.thumbprint=e,o.useSha256=!0,n&&(o.publicCertificate=this.parseCertificate(n)),o}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw xt(xs.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let o=oa.nowSeconds();this.expirationTime=o+600;let c={alg:this.useSha256?rh.PSS_256:rh.RSA_256},l=this.useSha256?rh.X5T_256:rh.X5T;Object.assign(c,{[l]:N0.base64EncodeUrl(this.thumbprint,Ku.HEX)}),this.publicCertificate&&Object.assign(c,{[rh.X5C]:this.publicCertificate});let u={[rh.AUDIENCE]:this.jwtAudience,[rh.EXPIRATION_TIME]:this.expirationTime,[rh.ISSUER]:this.issuer,[rh.SUBJECT]:this.issuer,[rh.NOT_BEFORE]:o,[rh.JWT_ID]:e.createNewGuid()};return this.jwt=bqe.default.sign(u,this.privateKey,{header:c}),this.jwt}isExpired(){return this.expirationTime<oa.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],o;for(;(o=r.exec(e))!==null;)n.push(o[1].replace(/\r*\n/g,nt.EMPTY_STRING));return n}};f();var Kz="@azure/msal-node",xA="3.6.3";f();var mB=class extends Xu{static{a(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=oa.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),o=new Fc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),o.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),o=Fi.appendQueryString(e.tokenEndpoint,n),s=await this.createTokenRequestBody(r),c=this.createTokenRequestHeaders({credential:r.username,type:vf.UPN}),l={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(o,s,c,l,r.correlationId)}async createTokenRequestBody(e){let r=new Map;gr.addClientId(r,this.config.authOptions.clientId),gr.addUsername(r,e.username),gr.addPassword(r,e.password),gr.addScopes(r,e.scopes),gr.addResponseType(r,UD.IDTOKEN_TOKEN),gr.addGrantType(r,yp.RESOURCE_OWNER_PASSWORD_GRANT),gr.addClientInfo(r),gr.addLibraryInfo(r,this.config.libraryInfo),gr.addApplicationTelemetry(r,this.config.telemetry.application),gr.addThrottling(r),this.serverTelemetryManager&&gr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();gr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&gr.addClientSecret(r,this.config.clientCredentials.clientSecret);let o=this.config.clientCredentials.clientAssertion;return o&&(gr.addClientAssertion(r,await Ef(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),gr.addClientAssertionType(r,o.assertionType)),(!Fa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&gr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&gr.addCcsUpn(r,e.username),Ju.mapToQueryString(r)}};f();function Iqe(t,e,r,n){let o=k9.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return gr.addLibraryInfo(o,{sku:Ol.MSAL_SKU,version:xA,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==Qd.OIDC&&gr.addApplicationTelemetry(o,t.telemetry.application),gr.addResponseType(o,UD.CODE),r.codeChallenge&&r.codeChallengeMethod&&gr.addCodeChallengeParams(o,r.codeChallenge,r.codeChallengeMethod),gr.addExtraQueryParameters(o,r.extraQueryParameters||{}),k9.getAuthorizeUrl(e,o,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}a(Iqe,"getAuthCodeRequestUrl");var uT=class{static{a(this,"ClientApplication")}constructor(e){this.config=UOe(e),this.cryptoProvider=new kC,this.logger=new k0(this.config.system.loggerOptions,Kz,xA),this.storage=new aT(this.logger,this.config.auth.clientId,this.cryptoProvider,pge(this.config.auth)),this.tokenCache=new nB(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||IC.QUERY,authenticationScheme:uo.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return Iqe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:uo.BEARER},o=this.initializeServerTelemetryManager(fx.acquireTokenByCode,n.correlationId);try{let s=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),c=await this.buildOauthClientConfiguration(s,n.correlationId,n.redirectUri,o),l=new S9(c);return this.logger.verbose("Auth code client created",n.correlationId),await l.acquireToken(n,r)}catch(s){throw s instanceof ci&&s.setCorrelationId(n.correlationId),o.cacheFailedRequest(s),s}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:uo.BEARER},n=this.initializeServerTelemetryManager(fx.acquireTokenByRefreshToken,r.correlationId);try{let o=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(o,r.correlationId,r.redirectUri||"",n),c=new Y2(s);return this.logger.verbose("Refresh token client created",r.correlationId),await c.acquireToken(r)}catch(o){throw o instanceof ci&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(fx.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let o=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(o,r.correlationId,r.redirectUri||"",n),c=new R9(s);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,c,s)}catch(l){if(l instanceof JI&&l.errorCode===xs.tokenRefreshRequired)return new Y2(s).acquireTokenByRefreshToken(r);throw l}}catch(o){throw o instanceof ci&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}async acquireCachedTokenSilent(e,r,n){let[o,s]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...gp]});if(s===ks.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let c=new Y2(n);try{await c.acquireTokenByRefreshToken(e)}catch{}}return o}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(fx.acquireTokenByUsernamePassword,r.correlationId);try{let o=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(o,r.correlationId,"",n),c=new mB(s);return this.logger.verbose("Username password client created",r.correlationId),await c.acquireToken(r)}catch(o){throw o instanceof ci&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw vp.createStateNotFoundError();if(e!==r)throw xt(xs.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,o){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),o?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:o,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:Ol.MSAL_SKU,version:xA,cpu:process.arch||nt.EMPTY_STRING,os:process.platform||nt.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=px.fromAssertion(await Ef(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Ol.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===uo.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=uo.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!Fa.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...gp],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let o={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new J2(o,this.storage)}async createAuthority(e,r,n,o){this.logger.verbose("createAuthority called",r);let s=CA.generateAuthority(e,o||this.config.auth.azureCloudOptions),c={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return KV.createDiscoveredInstance(s,this.config.system.networkClient,this.storage,c,this.logger,r)}clearCache(){this.storage.clear()}};f();var Tqe=Ne(require("http"),1);var Yz=class{static{a(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw vp.createLoopbackServerAlreadyExistsError();return new Promise((n,o)=>{this.server=Tqe.default.createServer((s,c)=>{let l=s.url;if(l){if(l===nt.FORWARD_SLASH){c.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{c.end(r||"Error occurred loading redirectUrl"),o(vp.createUnableToLoadRedirectUrlError());return}let u=this.getRedirectUri(),d=new URL(l,u),p=Ju.getDeserializedResponse(d.search)||{};p.code&&(c.writeHead(ai.REDIRECT,{location:u}),c.end()),p.error&&c.end(r||`Error occurred: ${p.error}`),n(p)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw vp.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),vp.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${Ol.HTTP_PROTOCOL}${Ol.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};f();var hB=class extends Xu{static{a(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=oa.nowSeconds(),o=await this.acquireTokenWithDeviceCode(e,r),s=new Fc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(o),s.handleServerTokenResponse(o,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=Fi.appendQueryString(this.authority.deviceCodeEndpoint,r),o=this.createQueryString(e),s=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,o,s,c,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&gr.addExtraQueryParameters(r,e.extraQueryParameters),Ju.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,o,s){let{body:{user_code:c,device_code:l,verification_uri:u,expires_in:d,interval:p,message:m}}=await this.sendPostRequest(o,e,{body:r,headers:n},s);return{userCode:c,deviceCode:l,verificationUri:u,expiresIn:d,interval:p,message:m}}createQueryString(e){let r=new Map;return gr.addScopes(r,e.scopes),gr.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&gr.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&gr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Ju.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),xt(xs.deviceCodePollingCancelled);if(r&&r<e&&oa.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),xt(xs.userTimeoutReached);if(oa.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),xt(xs.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),o=Fi.appendQueryString(this.authority.tokenEndpoint,n),s=this.createTokenRequestBody(e,r),c=this.createTokenRequestHeaders(),l=e.timeout?oa.nowSeconds()+e.timeout:void 0,u=oa.nowSeconds()+r.expiresIn,d=r.interval*1e3;for(;this.continuePolling(u,l,e.cancel);){let p={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},m=await this.executePostToTokenEndpoint(o,s,c,p,e.correlationId);if(m.body&&m.body.error)if(m.body.error===nt.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await oa.delay(d);else throw this.logger.info("Unexpected error in polling from the server"),she($D.postRequestFailed,m.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),m.body}throw this.logger.error("Polling stopped for unknown reasons."),xt(xs.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;gr.addScopes(n,e.scopes),gr.addClientId(n,this.config.authOptions.clientId),gr.addGrantType(n,yp.DEVICE_CODE_GRANT),gr.addDeviceCode(n,r.deviceCode);let o=e.correlationId||this.config.cryptoInterface.createNewGuid();return gr.addCorrelationId(n,o),gr.addClientInfo(n),gr.addLibraryInfo(n,this.config.libraryInfo),gr.addApplicationTelemetry(n,this.config.telemetry.application),gr.addThrottling(n),this.serverTelemetryManager&&gr.addServerTelemetry(n,this.serverTelemetryManager),(!Fa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&gr.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),Ju.mapToQueryString(n)}};var gB=class extends uT{static{a(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=J2.makeExtraSkuString({libraryName:Ol.MSAL_SKU,libraryVersion:xA})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(fx.acquireTokenByDeviceCode,r.correlationId);try{let o=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(o,r.correlationId,"",n),c=new hB(s);return this.logger.verbose("Device code client created",r.correlationId),await c.acquireToken(r)}catch(o){throw o instanceof ci&&o.setCorrelationId(r.correlationId),n.cacheFailedRequest(o),o}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:o,errorTemplate:s,windowHandle:c,loopbackClient:l,...u}=e;if(this.nativeBrokerPlugin){let A={...u,clientId:this.config.auth.clientId,scopes:e.scopes||gp,redirectUri:`${Ol.HTTP_PROTOCOL}${Ol.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...u.extraQueryParameters,...u.tokenQueryParameters,[H2.X_CLIENT_EXTRA_SKU]:this.skus},accountId:u.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(A,c)}let{verifier:d,challenge:p}=await this.cryptoProvider.generatePkceCodes(),m=l||new Yz,h={},g=null;try{let A=m.listenForAuthCode(o,s).then(k=>{h=k}).catch(k=>{g=k}),y=await this.waitForRedirectUri(m),v={...u,correlationId:r,scopes:e.scopes||gp,redirectUri:y,responseMode:IC.QUERY,codeChallenge:p,codeChallengeMethod:RV.S256},b=await this.getAuthCodeUrl(v);if(await n(b),await A,g)throw g;if(h.error)throw new xf(h.error,h.error_description,h.suberror);if(!h.code)throw vp.createNoAuthCodeInResponseError();let I=h.client_info,S={code:h.code,codeVerifier:d,clientInfo:I||nt.EMPTY_STRING,...v};return await this.acquireTokenByCode(S)}finally{m.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||gp,redirectUri:`${Ol.HTTP_PROTOCOL}${Ol.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[H2.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let o=0,s=setInterval(()=>{if(oz.TIMEOUT_MS/oz.INTERVAL_MS<o){clearInterval(s),n(vp.createLoopbackServerTimeoutError());return}try{let c=e.getRedirectUri();clearInterval(s),r(c);return}catch(c){if(c instanceof ci&&c.errorCode===au.noLoopbackServerExists.code){o++;return}clearInterval(s),n(c);return}},oz.INTERVAL_MS)})}};f();f();var dT=class extends Xu{static{a(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===ks.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,o,s,c){let l=r,u=r,d=ks.NOT_APPLICABLE,p;l.serializableCache&&l.persistencePlugin&&(p=new B0(l.serializableCache,!1),await l.persistencePlugin.beforeCacheAccess(p));let m=this.readAccessTokenFromCache(o,u.managedIdentityId?.id||l.authOptions.clientId,new ol(e.scopes||[]),s,e.correlationId);return l.serializableCache&&l.persistencePlugin&&p&&await l.persistencePlugin.afterCacheAccess(p),m?oa.isTokenExpired(m.expiresOn,l.systemOptions?.tokenRenewalOffsetSeconds||HD)?(c?.setCacheOutcome(ks.CACHED_ACCESS_TOKEN_EXPIRED),[null,ks.CACHED_ACCESS_TOKEN_EXPIRED]):(m.refreshOn&&oa.isTokenExpired(m.refreshOn.toString(),0)&&(d=ks.PROACTIVELY_REFRESHED,c?.setCacheOutcome(ks.PROACTIVELY_REFRESHED)),[await Fc.generateAuthenticationResult(n,o,{account:null,idToken:null,accessToken:m,refreshToken:null,appMetadata:null},!0,e),d]):(c?.setCacheOutcome(ks.NO_CACHED_ACCESS_TOKEN),[null,ks.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,o,s){let c={homeAccountId:nt.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Ro.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:ol.createSearchScopes(n.asArray())},l=o.getAccessTokensByFilter(c,s);if(l.length<1)return null;if(l.length>1)throw xt(xs.multipleMatchingTokens);return l[0]}async executeTokenRequest(e,r,n){let o,s;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let u={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};s=oa.nowSeconds();let d=await this.appTokenProvider(u);o={access_token:d.accessToken,expires_in:d.expiresInSeconds,refresh_in:d.refreshInSeconds,token_type:uo.BEARER}}else{let u=this.createTokenQueryParameters(e),d=Fi.appendQueryString(r.tokenEndpoint,u),p=await this.createTokenRequestBody(e),m=this.createTokenRequestHeaders(),h={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),s=oa.nowSeconds();let g=await this.executePostToTokenEndpoint(d,p,m,h,e.correlationId);o=g.body,o.status=g.status}let c=new Fc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return c.validateTokenResponse(o,n),await c.handleServerTokenResponse(o,this.authority,s,e)}async createTokenRequestBody(e){let r=new Map;gr.addClientId(r,this.config.authOptions.clientId),gr.addScopes(r,e.scopes,!1),gr.addGrantType(r,yp.CLIENT_CREDENTIALS_GRANT),gr.addLibraryInfo(r,this.config.libraryInfo),gr.addApplicationTelemetry(r,this.config.telemetry.application),gr.addThrottling(r),this.serverTelemetryManager&&gr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();gr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&gr.addClientSecret(r,this.config.clientCredentials.clientSecret);let o=e.clientAssertion||this.config.clientCredentials.clientAssertion;return o&&(gr.addClientAssertion(r,await Ef(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),gr.addClientAssertionType(r,o.assertionType)),(!Fa.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&gr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Ju.mapToQueryString(r)}};f();var AB=class extends Xu{static{a(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new ol(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(oa.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(ks.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),xt(xs.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(ks.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),xt(xs.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),o,s=null;if(n){o=BV.extractTokenClaims(n.secret,N0.base64Decode);let c=o.oid||o.sub,l={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:nt.EMPTY_STRING,localAccountId:c||nt.EMPTY_STRING};s=this.cacheManager.readAccountFromCache(l,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),Fc.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,o)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Ro.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},o=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(o).length<1?null:Object.values(o)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||uo.BEARER,s={credentialType:n&&n.toLowerCase()!==uo.BEARER.toLowerCase()?Ro.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ro.ACCESS_TOKEN,clientId:e,target:ol.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},c=this.cacheManager.getAccessTokensByFilter(s,r.correlationId),l=c.length;if(l<1)return null;if(l>1)throw xt(xs.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let o=this.createTokenQueryParameters(e),s=Fi.appendQueryString(r.tokenEndpoint,o),c=await this.createTokenRequestBody(e),l=this.createTokenRequestHeaders(),u={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},d=oa.nowSeconds(),p=await this.executePostToTokenEndpoint(s,c,l,u,e.correlationId),m=new Fc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return m.validateTokenResponse(p.body),await m.handleServerTokenResponse(p.body,this.authority,d,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;gr.addClientId(r,this.config.authOptions.clientId),gr.addScopes(r,e.scopes),gr.addGrantType(r,yp.JWT_BEARER),gr.addClientInfo(r),gr.addLibraryInfo(r,this.config.libraryInfo),gr.addApplicationTelemetry(r,this.config.telemetry.application),gr.addThrottling(r),this.serverTelemetryManager&&gr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();gr.addCorrelationId(r,n),gr.addRequestTokenUse(r,H2.ON_BEHALF_OF),gr.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&gr.addClientSecret(r,this.config.clientCredentials.clientSecret);let o=this.config.clientCredentials.clientAssertion;return o&&(gr.addClientAssertion(r,await Ef(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),gr.addClientAssertionType(r,o.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&gr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Ju.mapToQueryString(r)}};var yB=class extends uT{static{a(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,o=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&o||r&&o)throw xt(xs.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(o)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?px.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):px.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw xt(xs.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await Ef(e.clientAssertion,this.config.auth.clientId),assertionType:Ol.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),o={...n,scopes:n.scopes.filter(h=>!gp.includes(h))},s={...e,...o,clientAssertion:r},l=new Fi(s.authority).getUrlComponents().PathSegments[0];if(Object.values(Ap).includes(l))throw xt(xs.missingTenantIdError);let u=process.env[kOe],d;s.azureRegion!=="DisableMsalForceRegion"&&(!s.azureRegion&&u?d=u:d=s.azureRegion);let p={azureRegion:d,environmentRegion:process.env[ROe]},m=this.initializeServerTelemetryManager(fx.acquireTokenByClientCredential,s.correlationId,s.skipCache);try{let h=await this.createAuthority(s.authority,s.correlationId,p,e.azureCloudOptions),g=await this.buildOauthClientConfiguration(h,s.correlationId,"",m),A=new dT(g,this.appTokenProvider);return this.logger.verbose("Client credential client created",s.correlationId),await A.acquireToken(s)}catch(h){throw h instanceof ci&&h.setCorrelationId(s.correlationId),m.cacheFailedRequest(h),h}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),s=new AB(o);return this.logger.verbose("On behalf of client created",r.correlationId),await s.acquireToken(r)}catch(n){throw n instanceof ci&&n.setCorrelationId(r.correlationId),n}}};f();f();f();f();f();function wqe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}a(wqe,"isIso8601");f();var Jz=class{static{a(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===sa.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let o=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let s=0;for(;await this.retryPolicy.pauseForRetry(o.status,s,this.logger,o.headers[qs.RETRY_AFTER]);)o=await this.sendNetworkRequestAsyncHelper(e,r,n),s++;return o}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(sa.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(sa.POST,e,r)}};var rR={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},Tf=class{static{a(this,"BaseManagedIdentitySource")}constructor(e,r,n,o,s){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=o,this.disableInternalRetries=s}async getServerTokenResponseAsync(e,r,n,o){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(wqe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-oa.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,o){let s=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),s.queryParameters[sl.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let g=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${g}`),s.queryParameters[sl.XMS_CC]=g}let c=s.headers;c[qs.CONTENT_TYPE]=nt.URL_FORM_CONTENT_TYPE;let l={headers:c};Object.keys(s.bodyParameters).length&&(l.body=s.computeParametersBodyString());let u=this.disableInternalRetries?this.networkClient:new Jz(this.networkClient,s.retryPolicy,this.logger),d=oa.nowSeconds(),p;try{s.httpMethod===sa.POST?p=await u.sendPostRequestAsync(s.computeUri(),l):p=await u.sendGetRequestAsync(s.computeUri(),l)}catch(g){throw g instanceof ci?g:xt(xs.networkError)}let m=new Fc(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),h=await this.getServerTokenResponseAsync(p,u,s,l);return m.validateTokenResponse(h,o),m.handleServerTokenResponse(h,n,d,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case Za.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?rR.MANAGED_IDENTITY_CLIENT_ID_2017:rR.MANAGED_IDENTITY_CLIENT_ID;case Za.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?rR.MANAGED_IDENTITY_RESOURCE_ID_IMDS:rR.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case Za.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),rR.MANAGED_IDENTITY_OBJECT_ID;default:throw Oc(oT)}}};Tf.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new Fi(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),Oc(X2[t])}};f();f();f();var Xz=class{static{a(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var qFt=3,HFt=1e3,$Ft=[ai.NOT_FOUND,ai.REQUEST_TIMEOUT,ai.TOO_MANY_REQUESTS,ai.SERVER_ERROR,ai.SERVICE_UNAVAILABLE,ai.GATEWAY_TIMEOUT],Zz=class t{static{a(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new Xz}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return HFt}async pauseForRetry(e,r,n,o){if($Ft.includes(e)&&r<qFt){let s=this.linearRetryStrategy.calculateDelay(o,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${s}ms (retry attempt: ${r+1})`),await new Promise(c=>setTimeout(c,s)),!0}return!1}};var Ep=class{static{a(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new Zz}computeUri(){let e=new Map;this.queryParameters&&gr.addExtraQueryParameters(e,this.queryParameters);let r=Ju.mapToQueryString(e);return Fi.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&gr.addExtraQueryParameters(e,this.bodyParameters),Ju.mapToQueryString(e)}};var WFt="2019-08-01",W9=class t extends Tf{static{a(this,"AppService")}constructor(e,r,n,o,s,c,l){super(e,r,n,o,s),this.identityEndpoint=c,this.identityHeader=l}static getEnvironmentVariables(){let e=process.env[$n.IDENTITY_ENDPOINT],r=process.env[$n.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,o,s){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${ei.APP_SERVICE} managed identity is unavailable because one or both of the '${$n.IDENTITY_HEADER}' and '${$n.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let u=t.getValidatedEnvVariableUrlString($n.IDENTITY_ENDPOINT,c,ei.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${ei.APP_SERVICE} managed identity. Endpoint URI: ${u}. Creating ${ei.APP_SERVICE} managed identity.`),new t(e,r,n,o,s,c,l)}createRequest(e,r){let n=new Ep(sa.GET,this.identityEndpoint);return n.headers[Cp.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[sl.API_VERSION]=WFt,n.queryParameters[sl.RESOURCE]=e,r.idType!==Za.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};f();var mx=require("fs"),kqe=Ne(require("path"),1);var jFt="2019-11-01",_qe="http://127.0.0.1:40342/metadata/identity/oauth2/token",Sqe="N/A: himds executable exists",Rqe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},GFt={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},j9=class t extends Tf{static{a(this,"AzureArc")}constructor(e,r,n,o,s,c){super(e,r,n,o,s),this.identityEndpoint=c}static getEnvironmentVariables(){let e=process.env[$n.IDENTITY_ENDPOINT],r=process.env[$n.IMDS_ENDPOINT];if(!e||!r){let n=GFt[process.platform];try{(0,mx.accessSync)(n,mx.constants.F_OK|mx.constants.R_OK),e=_qe,r=Sqe}catch{}}return[e,r]}static tryCreate(e,r,n,o,s,c){let[l,u]=t.getEnvironmentVariables();if(!l||!u)return e.info(`[Managed Identity] ${ei.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${$n.IDENTITY_ENDPOINT}' and '${$n.IMDS_ENDPOINT}' are not defined. ${ei.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(u===Sqe)e.info(`[Managed Identity] ${ei.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${ei.AZURE_ARC} endpoint: ${_qe}. Creating ${ei.AZURE_ARC} managed identity.`);else{let d=t.getValidatedEnvVariableUrlString($n.IDENTITY_ENDPOINT,l,ei.AZURE_ARC,e);d.endsWith("/")&&d.slice(0,-1),t.getValidatedEnvVariableUrlString($n.IMDS_ENDPOINT,u,ei.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${ei.AZURE_ARC} managed identity. Endpoint URI: ${d}. Creating ${ei.AZURE_ARC} managed identity.`)}if(c.idType!==Za.SYSTEM_ASSIGNED)throw Oc(dz);return new t(e,r,n,o,s,l)}createRequest(e){let r=new Ep(sa.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[Cp.METADATA_HEADER_NAME]="true",r.queryParameters[sl.API_VERSION]=jFt,r.queryParameters[sl.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,o){let s;if(e.status===ai.UNAUTHORIZED){let c=e.headers["www-authenticate"];if(!c)throw Oc(mz);if(!c.includes("Basic realm="))throw Oc(hz);let l=c.split("Basic realm=")[1];if(!Rqe.hasOwnProperty(process.platform))throw Oc(uz);let u=Rqe[process.platform],d=kqe.default.basename(l);if(!d.endsWith(".key"))throw Oc(az);if(u+d!==l)throw Oc(cz);let p;try{p=await(0,mx.statSync)(l).size}catch{throw Oc(P9)}if(p>BOe)throw Oc(lz);let m;try{m=(0,mx.readFileSync)(l,Ku.UTF8)}catch{throw Oc(P9)}let h=`Basic ${m}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[Cp.AUTHORIZATION_HEADER_NAME]=h;try{s=await r.sendGetRequestAsync(n.computeUri(),o)}catch(g){throw g instanceof ci?g:xt(xs.networkError)}}return this.getServerTokenResponse(s||e)}};f();var G9=class t extends Tf{static{a(this,"CloudShell")}constructor(e,r,n,o,s,c){super(e,r,n,o,s),this.msiEndpoint=c}static getEnvironmentVariables(){return[process.env[$n.MSI_ENDPOINT]]}static tryCreate(e,r,n,o,s,c){let[l]=t.getEnvironmentVariables();if(!l)return e.info(`[Managed Identity] ${ei.CLOUD_SHELL} managed identity is unavailable because the '${$n.MSI_ENDPOINT} environment variable is not defined.`),null;let u=t.getValidatedEnvVariableUrlString($n.MSI_ENDPOINT,l,ei.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${ei.CLOUD_SHELL} managed identity. Endpoint URI: ${u}. Creating ${ei.CLOUD_SHELL} managed identity.`),c.idType!==Za.SYSTEM_ASSIGNED)throw Oc(fz);return new t(e,r,n,o,s,l)}createRequest(e){let r=new Ep(sa.POST,this.msiEndpoint);return r.headers[Cp.METADATA_HEADER_NAME]="true",r.bodyParameters[sl.RESOURCE]=e,r}};f();f();f();var eK=class{static{a(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var VFt=[ai.NOT_FOUND,ai.REQUEST_TIMEOUT,ai.GONE,ai.TOO_MANY_REQUESTS],zFt=3,KFt=7,YFt=1e3,JFt=4e3,XFt=2e3,ZFt=10*1e3,tK=class t{static{a(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new eK(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return YFt}static get MAX_EXPONENTIAL_BACKOFF_MS(){return JFt}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return XFt}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return ZFt}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===ai.GONE?KFt:zFt),(VFt.includes(e)||e>=ai.SERVER_ERROR_RANGE_START&&e<=ai.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let o=e===ai.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(s=>setTimeout(s,o)),!0}return!1}};var Pqe="/metadata/identity/oauth2/token",e6t=`http://169.254.169.254${Pqe}`,t6t="2018-02-01",rK=class t extends Tf{static{a(this,"Imds")}constructor(e,r,n,o,s,c){super(e,r,n,o,s),this.identityEndpoint=c}static tryCreate(e,r,n,o,s){let c;return process.env[$n.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${$n.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${ei.IMDS} returned endpoint: ${process.env[$n.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),c=t.getValidatedEnvVariableUrlString($n.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[$n.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${Pqe}`,ei.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${$n.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${ei.IMDS}, using the default endpoint.`),c=e6t),new t(e,r,n,o,s,c)}createRequest(e,r){let n=new Ep(sa.GET,this.identityEndpoint);return n.headers[Cp.METADATA_HEADER_NAME]="true",n.queryParameters[sl.API_VERSION]=t6t,n.queryParameters[sl.RESOURCE]=e,r.idType!==Za.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new tK,n}};f();var r6t="2019-07-01-preview",V9=class t extends Tf{static{a(this,"ServiceFabric")}constructor(e,r,n,o,s,c,l){super(e,r,n,o,s),this.identityEndpoint=c,this.identityHeader=l}static getEnvironmentVariables(){let e=process.env[$n.IDENTITY_ENDPOINT],r=process.env[$n.IDENTITY_HEADER],n=process.env[$n.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,o,s,c){let[l,u,d]=t.getEnvironmentVariables();if(!l||!u||!d)return e.info(`[Managed Identity] ${ei.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${$n.IDENTITY_HEADER}', '${$n.IDENTITY_ENDPOINT}' or '${$n.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let p=t.getValidatedEnvVariableUrlString($n.IDENTITY_ENDPOINT,l,ei.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${ei.SERVICE_FABRIC} managed identity. Endpoint URI: ${p}. Creating ${ei.SERVICE_FABRIC} managed identity.`),c.idType!==Za.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${ei.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,o,s,l,u)}createRequest(e,r){let n=new Ep(sa.GET,this.identityEndpoint);return n.headers[Cp.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[sl.API_VERSION]=r6t,n.queryParameters[sl.RESOURCE]=e,r.idType!==Za.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};f();var n6t="2017-09-01",i6t=`Only client id is supported for user-assigned managed identity in ${ei.MACHINE_LEARNING}.`,z9=class t extends Tf{static{a(this,"MachineLearning")}constructor(e,r,n,o,s,c,l){super(e,r,n,o,s),this.msiEndpoint=c,this.secret=l}static getEnvironmentVariables(){let e=process.env[$n.MSI_ENDPOINT],r=process.env[$n.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,o,s){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${ei.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${$n.MSI_ENDPOINT}' and '${$n.MSI_SECRET}' environment variables are not defined.`),null;let u=t.getValidatedEnvVariableUrlString($n.MSI_ENDPOINT,c,ei.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${ei.MACHINE_LEARNING} managed identity. Endpoint URI: ${u}. Creating ${ei.MACHINE_LEARNING} managed identity.`),new t(e,r,n,o,s,c,l)}createRequest(e,r){let n=new Ep(sa.GET,this.msiEndpoint);if(n.headers[Cp.METADATA_HEADER_NAME]="true",n.headers[Cp.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[sl.API_VERSION]=n6t,n.queryParameters[sl.RESOURCE]=e,r.idType===Za.SYSTEM_ASSIGNED)n.queryParameters[rR.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[$n.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===Za.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(i6t);return n}};var K9=class t{static{a(this,"ManagedIdentityClient")}constructor(e,r,n,o,s){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=o,this.disableInternalRetries=s}async sendManagedIdentityTokenRequest(e,r,n,o){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,o)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(V9.getEnvironmentVariables())?ei.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(W9.getEnvironmentVariables())?ei.APP_SERVICE:this.allEnvironmentVariablesAreDefined(z9.getEnvironmentVariables())?ei.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(G9.getEnvironmentVariables())?ei.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(j9.getEnvironmentVariables())?ei.AZURE_ARC:ei.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,o,s,c){let l=V9.tryCreate(e,r,n,o,s,c)||W9.tryCreate(e,r,n,o,s)||z9.tryCreate(e,r,n,o,s)||G9.tryCreate(e,r,n,o,s,c)||j9.tryCreate(e,r,n,o,s,c)||rK.tryCreate(e,r,n,o,s);if(!l)throw Oc(pz);return l}};var o6t=[ei.SERVICE_FABRIC],CB=class t{static{a(this,"ManagedIdentityApplication")}constructor(e){this.config=qOe(e||{}),this.logger=new k0(this.config.system.loggerOptions,Kz,xA);let r={canonicalAuthority:nt.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new aT(this.logger,this.config.managedIdentityId.id,WD,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new kC;let n={protocolMode:Qd.AAD,knownAuthorities:[vge],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new CA(vge,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new dT({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new K9(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new sT}async acquireToken(e){if(!e.resource)throw Es(zD.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,o]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let s=this.managedIdentityClient.getManagedIdentitySource();if(n&&o6t.includes(s)){let c=this.hashUtils.sha256(n.accessToken).toString(Ku.HEX);r.revokedTokenSha256Hash=c}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(o===ks.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,o){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,o)}getManagedIdentitySource(){return K9.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};f();var nK=class{static{a(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(s=>Yu.isAccountEntity(s)),o;if(n.length>0){let s=n[0];o=await this.partitionManager.extractKey(s)}else o=await this.partitionManager.getKey();await this.client.set(o,e.tokenCache.serialize())}}};f();f();f();f();f();function Y9(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}a(Y9,"getRandomIntegerInclusive");function J9(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+Y9(0,n/2)}}a(J9,"calculateRetryDelay");f();function vB(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}a(vB,"isObject");f();function nR(t){if(vB(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}a(nR,"isError");f();f();var Dqe=require("node:crypto");var mAe,s6t=typeof((mAe=globalThis?.crypto)===null||mAe===void 0?void 0:mAe.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):Dqe.randomUUID;function xB(){return s6t()}a(xB,"randomUUID");f();var hAe,gAe,AAe,yAe,Bqe=typeof window<"u"&&typeof window.document<"u",Nqe=typeof self=="object"&&typeof self?.importScripts=="function"&&(((hAe=self.constructor)===null||hAe===void 0?void 0:hAe.name)==="DedicatedWorkerGlobalScope"||((gAe=self.constructor)===null||gAe===void 0?void 0:gAe.name)==="ServiceWorkerGlobalScope"||((AAe=self.constructor)===null||AAe===void 0?void 0:AAe.name)==="SharedWorkerGlobalScope"),Mqe=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",Lqe=typeof Bun<"u"&&typeof Bun.version<"u",fT=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((yAe=globalThis.process.versions)===null||yAe===void 0)&&yAe.node);var Fqe=typeof navigator<"u"&&navigator?.product==="ReactNative";f();function bp(t,e){return Buffer.from(t,e)}a(bp,"stringToUint8Array");f();var CAe="REDACTED",a6t=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],c6t=["api-version"],EA=class{static{a(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=a6t.concat(e),r=c6t.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,o)=>{if(o instanceof Error)return Object.assign(Object.assign({},o),{name:o.name,message:o.message});if(n==="headers")return this.sanitizeHeaders(o);if(n==="url")return this.sanitizeUrl(o);if(n==="query")return this.sanitizeQuery(o);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(o)||vB(o)){if(r.has(o))return"[Circular]";r.add(o)}return o},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,CAe);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=CAe;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=CAe;return r}};f();f();f();f();var iR=class extends Error{static{a(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function xAe(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:o}=e??{};return new Promise((s,c)=>{function l(){c(new iR(o??"The operation was aborted."))}a(l,"rejectOnAbort");function u(){n?.removeEventListener("abort",d)}a(u,"removeListeners");function d(){r?.(),u(),l()}if(a(d,"onAbort"),n?.aborted)return l();try{t(p=>{u(),s(p)},p=>{u(),c(p)})}catch(p){c(p)}n?.addEventListener("abort",d)})}a(xAe,"createAbortablePromise");f();var p6t="The delay was aborted.";function EAe(t,e){let r,{abortSignal:n,abortErrorMsg:o}=e??{};return xAe(s=>{r=setTimeout(s,t)},{cleanupBeforeAbort:a(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:o??p6t})}a(EAe,"delay");f();function EB(t){if(nR(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}a(EB,"getErrorMessage");f();function Oqe(t,e){return J9(t,e)}a(Oqe,"calculateRetryDelay");function iK(t){return nR(t)}a(iK,"isError");var oK=fT,bB=fT;f();var X9=ii("IdentityUtils"),Qqe="1.0";function oR(t,e,r){let n=a(o=>(X9.getToken.info(o),new eh({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:o})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}a(oR,"ensureValidMsalToken");function bAe(t){let e=t?.authorityHost;return!e&&bB&&(e=process.env.AZURE_AUTHORITY_HOST),e??I6}a(bAe,"getAuthorityHost");function IAe(t,e){return e||(e=I6),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}a(IAe,"getAuthority");function Uqe(t,e,r){return t==="adfs"&&e||r?[e]:[]}a(Uqe,"getKnownAuthorities");var sK=a((t,e=oK?"Node":"Browser")=>(r,n,o)=>{if(!o)switch(r){case M0.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case M0.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case M0.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case M0.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function aK(t){switch(t){case"error":return M0.LogLevel.Error;case"info":return M0.LogLevel.Info;case"verbose":return M0.LogLevel.Verbose;case"warning":return M0.LogLevel.Warning;default:return M0.LogLevel.Info}}a(aK,"getMSALLogLevel");function sR(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return X9.info(bo(t,e.message)),new $r(e.message);case"device_code_polling_cancelled":return new iR("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":X9.info(bo(t,`Authentication returned errorCode ${n.errorCode}`));break;default:X9.info(bo(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(X9.info(bo(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new eh({scopes:t,getTokenOptions:r,message:e.message})}a(sR,"handleMsalError");function qqe(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}a(qqe,"publicToMsal");function Hqe(t,e){return{authority:e.environment??D9e,homeAccountId:e.homeAccountId,tenantId:e.tenantId||P9e,username:e.username,clientId:t,version:Qqe}}a(Hqe,"msalToPublic");function TAe(t){let e=JSON.parse(t);if(e.version&&e.version!==Qqe)throw Error("Unsupported AuthenticationRecord version");return e}a(TAe,"deserializeAuthenticationRecord");f();f();f();f();f();f();function h6t(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}a(h6t,"isPrimitiveBody");function g6t(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}a(g6t,"handleNullableResponseAndWrappableBody");function wAe(t,e){var r,n;let o=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},o),{body:t.parsedBody});let s=e&&e.bodyMapper,c=!!s?.nullable,l=s?.type.name;if(l==="Stream")return Object.assign(Object.assign({},o),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let u=l==="Composite"&&s.type.modelProperties||{},d=Object.keys(u).some(p=>u[p].serializedName==="");if(l==="Sequence"||d){let p=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let m of Object.keys(u))u[m].serializedName&&(p[m]=(n=t.parsedBody)===null||n===void 0?void 0:n[m]);if(o)for(let m of Object.keys(o))p[m]=o[m];return c&&!t.parsedBody&&!o&&Object.getOwnPropertyNames(u).length===0?null:p}return g6t({body:t.parsedBody,headers:o,hasNullableType:c,shouldWrapBody:h6t(t.parsedBody,l)})}a(wAe,"flattenResponse");var BC={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};f();f();f();f();f();var NC=class extends Error{static{a(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};f();f();f();var $qe=require("node:os"),Wqe=Ne(require("node:util"),1),jqe=Ne(require("node:process"),1);function Gqe(t,...e){jqe.stderr.write(`${Wqe.default.format(t,...e)}${$qe.EOL}`)}a(Gqe,"log");var Vqe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,zqe,_Ae=[],SAe=[],lK=[];Vqe&&RAe(Vqe);var Kqe=Object.assign(t=>Yqe(t),{enable:RAe,enabled:kAe,disable:A6t,log:Gqe});function RAe(t){zqe=t,_Ae=[],SAe=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?SAe.push(new RegExp(`^${n.substr(1)}$`)):_Ae.push(new RegExp(`^${n}$`));for(let n of lK)n.enabled=kAe(n.namespace)}a(RAe,"enable");function kAe(t){if(t.endsWith("*"))return!0;for(let e of SAe)if(e.test(t))return!1;for(let e of _Ae)if(e.test(t))return!0;return!1}a(kAe,"enabled");function A6t(){let t=zqe||"";return RAe(""),t}a(A6t,"disable");function Yqe(t){let e=Object.assign(r,{enabled:kAe(t),destroy:y6t,log:Kqe.log,namespace:t,extend:C6t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return a(r,"debug"),lK.push(e),e}a(Yqe,"createDebugger");function y6t(){let t=lK.indexOf(this);return t>=0?(lK.splice(t,1),!0):!1}a(y6t,"destroy");function C6t(t){let e=Yqe(`${this.namespace}:${t}`);return e.log=this.log,e}a(C6t,"extend");var IB=Kqe;var PAe=["verbose","info","warning","error"],Jqe={verbose:400,info:300,warning:200,error:100};function Xqe(t,e){e.log=(...r)=>{t.log(...r)}}a(Xqe,"patchLogMethod");function Zqe(t){return PAe.includes(t)}a(Zqe,"isTypeSpecRuntimeLogLevel");function v6t(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,o=IB(t.namespace);o.log=(...p)=>{IB.log(...p)};function s(p){if(p&&!Zqe(p))throw new Error(`Unknown log level '${p}'. Acceptable values: ${PAe.join(",")}`);n=p;let m=[];for(let h of e)c(h)&&m.push(h.namespace);IB.enable(m.join(","))}a(s,"contextSetLogLevel"),r&&(Zqe(r)?s(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${PAe.join(", ")}.`));function c(p){return!!(n&&Jqe[p.level]<=Jqe[n])}a(c,"shouldEnable");function l(p,m){let h=Object.assign(p.extend(m),{level:m});if(Xqe(p,h),c(h)){let g=IB.disable();IB.enable(g+","+h.namespace)}return e.add(h),h}a(l,"createLogger");function u(){return n}a(u,"contextGetLogLevel");function d(p){let m=o.extend(p);return Xqe(o,m),{error:l(m,"error"),warning:l(m,"warning"),info:l(m,"info"),verbose:l(m,"verbose")}}return a(d,"contextCreateClientLogger"),{setLogLevel:s,getLogLevel:u,createClientLogger:d,logger:o}}a(v6t,"createLoggerContext");var eHe=v6t({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),x6t=eHe.logger;function eO(t){return eHe.createClientLogger(t)}a(eO,"createClientLogger");f();function uK(t){return t.toLowerCase()}a(uK,"normalizeName");function*E6t(t){for(let e of t.values())yield[e.name,e.value]}a(E6t,"headerIterator");var DAe=class{static{a(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(uK(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(uK(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(uK(e))}delete(e){this._headersMap.delete(uK(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,o]of this._headersMap)r[n]=o.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return E6t(this._headersMap)}};function L0(t){return new DAe(t)}a(L0,"createHttpHeaders");f();f();f();var BAe=class{static{a(this,"PipelineRequestImpl")}constructor(e){var r,n,o,s,c,l,u;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:L0(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(o=e.timeout)!==null&&o!==void 0?o:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(s=e.disableKeepAlive)!==null&&s!==void 0?s:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(c=e.withCredentials)!==null&&c!==void 0?c:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||xB(),this.allowInsecureConnection=(l=e.allowInsecureConnection)!==null&&l!==void 0?l:!1,this.enableBrowserStreams=(u=e.enableBrowserStreams)!==null&&u!==void 0?u:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function dK(t){return new BAe(t)}a(dK,"createPipelineRequest");f();var tHe=new Set(["Deserialize","Serialize","Retry","Sign"]),NAe=class t{static{a(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!tHe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!tHe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((s,c)=>l=>c.sendRequest(l,s),s=>e.sendRequest(s))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(A){return{name:A,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}a(n,"createPhase");let o=n("Serialize"),s=n("None"),c=n("Deserialize"),l=n("Retry"),u=n("Sign"),d=[o,s,c,l,u];function p(A){return A==="Retry"?l:A==="Serialize"?o:A==="Deserialize"?c:A==="Sign"?u:s}a(p,"getPhase");for(let A of this._policies){let y=A.policy,v=A.options,b=y.name;if(r.has(b))throw new Error("Duplicate policy names not allowed in pipeline");let I={policy:y,dependsOn:new Set,dependants:new Set};v.afterPhase&&(I.afterPhase=p(v.afterPhase),I.afterPhase.hasAfterPolicies=!0),r.set(b,I),p(v.phase).policies.add(I)}for(let A of this._policies){let{policy:y,options:v}=A,b=y.name,I=r.get(b);if(!I)throw new Error(`Missing node for policy ${b}`);if(v.afterPolicies)for(let S of v.afterPolicies){let k=r.get(S);k&&(I.dependsOn.add(k),k.dependants.add(I))}if(v.beforePolicies)for(let S of v.beforePolicies){let k=r.get(S);k&&(k.dependsOn.add(I),I.dependants.add(k))}}function m(A){A.hasRun=!0;for(let y of A.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let v of y.dependants)v.dependsOn.delete(y);r.delete(y.policy.name),A.policies.delete(y)}}a(m,"walkPhase");function h(){for(let A of d){if(m(A),A.policies.size>0&&A!==s){s.hasRun||m(s);return}A.hasAfterPolicies&&m(s)}}a(h,"walkPhases");let g=0;for(;r.size>0;){g++;let A=e.length;if(h(),e.length<=A&&g>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function fK(){return NAe.create()}a(fK,"createEmptyPipeline");f();f();var rHe=require("node:util"),nHe=rHe.inspect.custom;var b6t=new EA,ed=class t extends Error{static{a(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,nHe,{value:a(()=>`RestError: ${this.message} 
 ${b6t.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};ed.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";ed.PARSE_ERROR="PARSE_ERROR";function pK(t){return t instanceof ed?!0:nR(t)&&t.name==="RestError"}a(pK,"isRestError");f();f();var TB=Ne(require("node:http"),1),wB=Ne(require("node:https"),1),hK=Ne(require("node:zlib"),1),oHe=require("node:stream");f();var sh=eO("ts-http-runtime");var I6t={};function tO(t){return t&&typeof t.pipe=="function"}a(tO,"isReadableStream");function iHe(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=a(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}a(iHe,"isStreamComplete");function sHe(t){return t&&typeof t.byteLength=="number"}a(sHe,"isArrayBuffer");var mK=class extends oHe.Transform{static{a(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(o){n(o)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},MAe=class{static{a(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,o;let s=new AbortController,c;if(e.abortSignal){if(e.abortSignal.aborted)throw new NC("The operation was aborted. Request has already been canceled.");c=a(h=>{h.type==="abort"&&s.abort()},"abortListener"),e.abortSignal.addEventListener("abort",c)}let l;e.timeout>0&&(l=setTimeout(()=>{let h=new EA;sh.info(`request to '${h.sanitizeUrl(e.url)}' timed out. canceling...`),s.abort()},e.timeout));let u=e.headers.get("Accept-Encoding"),d=u?.includes("gzip")||u?.includes("deflate"),p=typeof e.body=="function"?e.body():e.body;if(p&&!e.headers.has("Content-Length")){let h=S6t(p);h!==null&&e.headers.set("Content-Length",h)}let m;try{if(p&&e.onUploadProgress){let b=e.onUploadProgress,I=new mK(b);I.on("error",S=>{sh.error("Error in upload progress",S)}),tO(p)?p.pipe(I):I.end(p),p=I}let h=await this.makeRequest(e,s,p);l!==void 0&&clearTimeout(l);let g=T6t(h),y={status:(r=h.statusCode)!==null&&r!==void 0?r:0,headers:g,request:e};if(e.method==="HEAD")return h.resume(),y;m=d?w6t(h,g):h;let v=e.onDownloadProgress;if(v){let b=new mK(v);b.on("error",I=>{sh.error("Error in download progress",I)}),m.pipe(b),m=b}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((o=e.streamResponseStatusCodes)===null||o===void 0)&&o.has(y.status)?y.readableStreamBody=m:y.bodyAsText=await _6t(m),y}finally{if(e.abortSignal&&c){let h=Promise.resolve();tO(p)&&(h=iHe(p));let g=Promise.resolve();tO(m)&&(g=iHe(m)),Promise.all([h,g]).then(()=>{var A;c&&((A=e.abortSignal)===null||A===void 0||A.removeEventListener("abort",c))}).catch(A=>{sh.warning("Error when cleaning up abortListener on httpRequest",A)})}}}makeRequest(e,r,n){var o;let s=new URL(e.url),c=s.protocol!=="https:";if(c&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let l=(o=e.agent)!==null&&o!==void 0?o:this.getOrCreateAgent(e,c),u=Object.assign({agent:l,hostname:s.hostname,path:`${s.pathname}${s.search}`,port:s.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((d,p)=>{let m=c?TB.request(u,d):wB.request(u,d);m.once("error",h=>{var g;p(new ed(h.message,{code:(g=h.code)!==null&&g!==void 0?g:ed.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let h=new NC("The operation was aborted. Rejecting from abort signal callback while making request.");m.destroy(h),p(h)}),n&&tO(n)?n.pipe(m):n?typeof n=="string"||Buffer.isBuffer(n)?m.end(n):sHe(n)?m.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(sh.error("Unrecognized body type",n),p(new ed("Unrecognized body type"))):m.end()})}getOrCreateAgent(e,r){var n;let o=e.disableKeepAlive;if(r)return o?TB.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new TB.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(o&&!e.tlsSettings)return wB.globalAgent;let s=(n=e.tlsSettings)!==null&&n!==void 0?n:I6t,c=this.cachedHttpsAgents.get(s);return c&&c.options.keepAlive===!o||(sh.info("No cached TLS Agent exist, creating a new Agent"),c=new wB.Agent(Object.assign({keepAlive:!o},s)),this.cachedHttpsAgents.set(s,c)),c}}};function T6t(t){let e=L0();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}a(T6t,"getResponseHeaders");function w6t(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=hK.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=hK.createInflate();return t.pipe(n),n}return t}a(w6t,"getDecodedResponseStream");function _6t(t){return new Promise((e,r)=>{let n=[];t.on("data",o=>{Buffer.isBuffer(o)?n.push(o):n.push(Buffer.from(o))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",o=>{o&&o?.name==="AbortError"?r(o):r(new ed(`Error reading response as text: ${o.message}`,{code:ed.PARSE_ERROR}))})})}a(_6t,"streamToText");function S6t(t){return t?Buffer.isBuffer(t)?t.length:tO(t)?null:sHe(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}a(S6t,"getBodyLength");function aHe(){return new MAe}a(aHe,"createNodeHttpClient");function gK(){return aHe()}a(gK,"createDefaultHttpClient");f();f();f();f();var LAe="logPolicy";function AK(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:sh.info,n=new EA({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:LAe,async sendRequest(o,s){if(!r.enabled)return s(o);r(`Request: ${n.sanitize(o)}`);let c=await s(o);return r(`Response status code: ${c.status}`),r(`Headers: ${n.sanitize(c.headers)}`),c}}}a(AK,"logPolicy");f();var FAe="redirectPolicy",cHe=["GET","HEAD"];function yK(t={}){let{maxRetries:e=20}=t;return{name:FAe,async sendRequest(r,n){let o=await n(r);return lHe(n,o,e)}}}a(yK,"redirectPolicy");async function lHe(t,e,r,n=0){let{request:o,status:s,headers:c}=e,l=c.get("location");if(l&&(s===300||s===301&&cHe.includes(o.method)||s===302&&cHe.includes(o.method)||s===303&&o.method==="POST"||s===307)&&n<r){let u=new URL(l,o.url);o.url=u.toString(),s===303&&(o.method="GET",o.headers.delete("Content-Length"),delete o.body),o.headers.delete("Authorization");let d=await t(o);return lHe(t,d,r,n+1)}return e}a(lHe,"handleRedirect");f();f();f();function uHe(){return"User-Agent"}a(uHe,"getHeaderName");f();function dHe(){return uHe()}a(dHe,"getUserAgentHeaderName");var IAn=dHe();f();var OAe="decompressResponsePolicy";function CK(){return{name:OAe,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}a(CK,"decompressResponsePolicy");f();f();f();f();var R6t="The operation was aborted.";function fHe(t,e,r){return new Promise((n,o)=>{let s,c,l=a(()=>o(new NC(r?.abortErrorMsg?r?.abortErrorMsg:R6t)),"rejectOnAbort"),u=a(()=>{r?.abortSignal&&c&&r.abortSignal.removeEventListener("abort",c)},"removeListeners");if(c=a(()=>(s&&clearTimeout(s),u(),l()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return l();s=setTimeout(()=>{u(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",c)})}a(fHe,"delay");function pHe(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}a(pHe,"parseHeaderValueAsNumber");var QAe="Retry-After",k6t=["retry-after-ms","x-ms-retry-after-ms",QAe];function mHe(t){if(t&&[429,503].includes(t.status))try{for(let o of k6t){let s=pHe(t,o);if(s===0||s)return s*(o===QAe?1e3:1)}let e=t.headers.get(QAe);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}a(mHe,"getRetryAfterInMs");function hHe(t){return Number.isFinite(mHe(t))}a(hHe,"isThrottlingRetryResponse");function UAe(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=mHe(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}a(UAe,"throttlingRetryStrategy");var P6t=1e3,D6t=1e3*64;function vK(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:P6t,o=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:D6t;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:c,responseError:l}){let u=N6t(l),d=u&&t.ignoreSystemErrors,p=B6t(c),m=p&&t.ignoreHttpStatusCodes;return c&&(hHe(c)||!p)||m||d?{skipStrategy:!0}:l&&!u&&!p?{errorToThrow:l}:J9(s,{retryDelayInMs:n,maxRetryDelayInMs:o})}}}a(vK,"exponentialRetryStrategy");function B6t(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}a(B6t,"isExponentialRetryResponse");function N6t(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}a(N6t,"isSystemError");f();var M6t=eO("ts-http-runtime retryPolicy"),L6t="retryPolicy";function pT(t,e={maxRetries:3}){let r=e.logger||M6t;return{name:L6t,async sendRequest(n,o){var s,c;let l,u,d=-1;e:for(;;){d+=1,l=void 0,u=void 0;try{r.info(`Retry ${d}: Attempting to send request`,n.requestId),l=await o(n),r.info(`Retry ${d}: Received a response from request`,n.requestId)}catch(p){if(r.error(`Retry ${d}: Received an error from request`,n.requestId),u=p,!p||u.name!=="RestError")throw p;l=u.response}if(!((s=n.abortSignal)===null||s===void 0)&&s.aborted)throw r.error(`Retry ${d}: Request aborted.`),new NC;if(d>=((c=e.maxRetries)!==null&&c!==void 0?c:3)){if(r.info(`Retry ${d}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),u)throw u;if(l)return l;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${d}: Processing ${t.length} retry strategies.`);t:for(let p of t){let m=p.logger||r;m.info(`Retry ${d}: Processing retry strategy ${p.name}.`);let h=p.retry({retryCount:d,response:l,responseError:u});if(h.skipStrategy){m.info(`Retry ${d}: Skipped.`);continue t}let{errorToThrow:g,retryAfterInMs:A,redirectTo:y}=h;if(g)throw m.error(`Retry ${d}: Retry strategy ${p.name} throws error:`,g),g;if(A||A===0){m.info(`Retry ${d}: Retry strategy ${p.name} retries after ${A}`),await fHe(A,void 0,{abortSignal:n.abortSignal});continue e}if(y){m.info(`Retry ${d}: Retry strategy ${p.name} redirects to ${y}`),n.url=y;continue e}}if(u)throw r.info("None of the retry strategies could work with the received error. Throwing it."),u;if(l)return r.info("None of the retry strategies could work with the received response. Returning it."),l}}}}a(pT,"retryPolicy");var qAe="defaultRetryPolicy";function xK(t={}){var e;return{name:qAe,sendRequest:pT([UAe(),vK(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}a(xK,"defaultRetryPolicy");f();var HAe="formDataPolicy";function F6t(t){var e;let r={};for(let[n,o]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(o);return r}a(F6t,"formDataToFormDataMap");function EK(){return{name:HAe,async sendRequest(t,e){if(fT&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=F6t(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=O6t(t.formData):await Q6t(t.formData,t),t.formData=void 0}return e(t)}}}a(EK,"formDataPolicy");function O6t(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let o of n)e.append(r,o.toString());else e.append(r,n.toString());return e.toString()}a(O6t,"wwwFormUrlEncode");async function Q6t(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[o,s]of Object.entries(t))for(let c of Array.isArray(s)?s:[s])if(typeof c=="string")n.push({headers:L0({"Content-Disposition":`form-data; name="${o}"`}),body:bp(c,"utf-8")});else{if(c==null||typeof c!="object")throw new Error(`Unexpected value for key ${o}: ${c}. Value should be serialized to string first.`);{let l=c.name||"blob",u=L0();u.set("Content-Disposition",`form-data; name="${o}"; filename="${l}"`),u.set("Content-Type",c.type||"application/octet-stream"),n.push({headers:u,body:c})}}e.multipartBody={parts:n}}a(Q6t,"prepareFormData");f();var $He=Ne(LHe(),1),WHe=Ne(QHe(),1);var B9t="HTTPS_PROXY",N9t="HTTP_PROXY",M9t="ALL_PROXY",L9t="NO_PROXY",YAe="proxyPolicy",UHe=[],jHe=!1,F9t=new Map;function RK(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}a(RK,"getEnvironmentValue");function O9t(){if(!process)return;let t=RK(B9t),e=RK(M9t),r=RK(N9t);return t||e||r}a(O9t,"loadEnvironmentProxyValue");function Q9t(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let o=!1;for(let s of e)s[0]==="."?(n.endsWith(s)||n.length===s.length-1&&n===s.slice(1))&&(o=!0):n===s&&(o=!0);return r?.set(n,o),o}a(Q9t,"isBypassed");function U9t(){let t=RK(L9t);return jHe=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}a(U9t,"loadNoProxy");function q9t(){let t=O9t();return t?new URL(t):void 0}a(q9t,"getDefaultProxySettingsInternal");function qHe(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}a(qHe,"getUrlFromProxySettings");function HHe(t,e,r){if(t.agent)return;let o=new URL(t.url).protocol!=="https:";t.tlsSettings&&sh.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let s=t.headers.toJSON();o?(e.httpProxyAgent||(e.httpProxyAgent=new WHe.HttpProxyAgent(r,{headers:s})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new $He.HttpsProxyAgent(r,{headers:s})),t.agent=e.httpsProxyAgent)}a(HHe,"setProxyAgentOnRequest");function kK(t,e){jHe||UHe.push(...U9t());let r=t?qHe(t):q9t(),n={};return{name:YAe,async sendRequest(o,s){var c;return!o.proxySettings&&r&&!Q9t(o.url,(c=e?.customNoProxyList)!==null&&c!==void 0?c:UHe,e?.customNoProxyList?void 0:F9t)?HHe(o,n,r):o.proxySettings&&HHe(o,n,qHe(o.proxySettings)),s(o)}}}a(kK,"proxyPolicy");f();var JAe="agentPolicy";function PK(t){return{name:JAe,sendRequest:a(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}a(PK,"agentPolicy");f();var XAe="tlsPolicy";function DK(t){return{name:XAe,sendRequest:a(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}a(DK,"tlsPolicy");f();f();function BK(t){return typeof t.stream=="function"}a(BK,"isBlob");f();f();function GHe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:a(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}a(GHe,"__values");function FC(t){return this instanceof FC?(this.v=t,this):new FC(t)}a(FC,"__await");function ZAe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(g){return function(A){return Promise.resolve(A).then(g,m)}}function l(g,A){n[g]&&(o[g]=function(y){return new Promise(function(v,b){s.push([g,y,v,b])>1||u(g,y)})},A&&(o[g]=A(o[g])))}function u(g,A){try{d(n[g](A))}catch(y){h(s[0][3],y)}}function d(g){g.value instanceof FC?Promise.resolve(g.value.v).then(p,m):h(s[0][2],g)}function p(g){u("next",g)}function m(g){u("throw",g)}function h(g,A){g(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}a(ZAe,"__asyncGenerator");function VHe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof GHe=="function"?GHe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(l,u){c=t[s](c),o(l,u,c.done,c.value)})}}function o(s,c,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},c)}}a(VHe,"__asyncValues");var NK=require("stream");function zHe(){return ZAe(this,arguments,a(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield FC(e.read());if(r)return yield FC(void 0);yield yield FC(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}a(zHe,"streamAsyncIterator");function H9t(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=zHe.bind(t)),t.values||(t.values=zHe.bind(t))}a(H9t,"makeAsyncIterable");function KHe(t){return t instanceof ReadableStream?(H9t(t),NK.Readable.fromWeb(t)):t}a(KHe,"ensureNodeStream");function $9t(t){return t instanceof Uint8Array?NK.Readable.from(Buffer.from(t)):BK(t)?KHe(t.stream()):KHe(t)}a($9t,"toStream");async function YHe(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map($9t);return NK.Readable.from(function(){return ZAe(this,arguments,function*(){var r,n,o,s;for(let d of e)try{for(var c=!0,l=(n=void 0,VHe(d)),u;u=yield FC(l.next()),r=u.done,!r;c=!0)s=u.value,c=!1,yield yield FC(s)}catch(p){n={error:p}}finally{try{!c&&!r&&(o=l.return)&&(yield FC(o.call(l)))}finally{if(n)throw n.error}}})}())}}a(YHe,"concat");function W9t(){return`----AzSDKFormBoundary${xB()}`}a(W9t,"generateBoundary");function j9t(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}a(j9t,"encodeHeaders");function G9t(t){return t instanceof Uint8Array?t.byteLength:BK(t)?t.size===-1?void 0:t.size:void 0}a(G9t,"getLength");function V9t(t){let e=0;for(let r of t){let n=G9t(r);if(n===void 0)return;e+=n}return e}a(V9t,"getTotalLength");async function z9t(t,e,r){let n=[bp(`--${r}`,"utf-8"),...e.flatMap(s=>[bp(`\r
`,"utf-8"),bp(j9t(s.headers),"utf-8"),bp(`\r
`,"utf-8"),s.body,bp(`\r
--${r}`,"utf-8")]),bp(`--\r
\r
`,"utf-8")],o=V9t(n);o&&t.headers.set("Content-Length",o),t.body=await YHe(n)}a(z9t,"buildRequestBody");var nO="multipartPolicy",K9t=70,Y9t=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function J9t(t){if(t.length>K9t)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!Y9t.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}a(J9t,"assertValidBoundary");function MK(){return{name:nO,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,o=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",s=o.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!s)throw new Error(`Got multipart request body, but content-type header was not multipart: ${o}`);let[,c,l]=s;if(l&&n&&l!==n)throw new Error(`Multipart boundary was specified as ${l} in the header, but got ${n} in the request body`);return n??(n=l),n?J9t(n):n=W9t(),t.headers.set("Content-Type",`${c}; boundary=${n}`),await z9t(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}a(MK,"multipartPolicy");f();f();f();f();f();f();f();f();f();f();f();f();function LK(){return fK()}a(LK,"createEmptyPipeline");f();f();f();var OC=$I("core-rest-pipeline");f();f();f();f();function tye(t={}){return AK(Object.assign({logger:OC.info},t))}a(tye,"logPolicy");f();function rye(t={}){return yK(t)}a(rye,"redirectPolicy");f();f();f();var RB=Ne(require("node:os"),1),FK=Ne(require("node:process"),1);function JHe(){return"User-Agent"}a(JHe,"getHeaderName");async function XHe(t){if(FK&&FK.versions){let e=FK.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${RB.arch()}-${RB.type()}-${RB.release()})`)}a(XHe,"setPlatformSpecificData");f();var OK="1.22.0";function sOt(t){let e=[];for(let[r,n]of t){let o=n?`${r}/${n}`:r;e.push(o)}return e.join(" ")}a(sOt,"getUserAgentString");function ZHe(){return JHe()}a(ZHe,"getUserAgentHeaderName");async function QK(t){let e=new Map;e.set("core-rest-pipeline",OK),await XHe(e);let r=sOt(e);return t?`${t} ${r}`:r}a(QK,"getUserAgentValue");var e$e=ZHe(),t$e="userAgentPolicy";function nye(t={}){let e=QK(t.userAgentPrefix);return{name:t$e,async sendRequest(r,n){return r.headers.has(e$e)||r.headers.set(e$e,await e),n(r)}}}a(nye,"userAgentPolicy");f();f();var r$e=Symbol("rawContent");function iye(t){return typeof t[r$e]=="function"}a(iye,"hasRawContent");function n$e(t){return iye(t)?t[r$e]():t}a(n$e,"getRawContent");var UK=nO;function oye(){let t=MK();return{name:UK,sendRequest:a(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)iye(n.body)&&(n.body=n$e(n.body));return t.sendRequest(e,r)},"sendRequest")}}a(oye,"multipartPolicy");f();function sye(){return CK()}a(sye,"decompressResponsePolicy");f();function aye(t={}){return xK(t)}a(aye,"defaultRetryPolicy");f();function cye(){return EK()}a(cye,"formDataPolicy");f();function lye(t,e){return kK(t,e)}a(lye,"proxyPolicy");f();var i$e="setClientRequestIdPolicy";function uye(t="x-ms-client-request-id"){return{name:i$e,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}a(uye,"setClientRequestIdPolicy");f();function dye(t){return PK(t)}a(dye,"agentPolicy");f();function fye(t){return DK(t)}a(fye,"tlsPolicy");f();f();var kB=ed;function iO(t){return pK(t)}a(iO,"isRestError");var o$e="tracingPolicy";function pye(t={}){let e=QK(t.userAgentPrefix),r=new EA({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=aOt();return{name:o$e,async sendRequest(o,s){var c;if(!n)return s(o);let l=await e,u={"http.url":r.sanitizeUrl(o.url),"http.method":o.method,"http.user_agent":l,requestId:o.requestId};l&&(u["http.user_agent"]=l);let{span:d,tracingContext:p}=(c=cOt(n,o,u))!==null&&c!==void 0?c:{};if(!d||!p)return s(o);try{let m=await n.withContext(p,s,o);return uOt(d,m),m}catch(m){throw lOt(d,m),m}}}}a(pye,"tracingPolicy");function aOt(){try{return _6({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:OK})}catch(t){OC.warning(`Error when creating the TracingClient: ${EB(t)}`);return}}a(aOt,"tryCreateTracingClient");function cOt(t,e,r){try{let{span:n,updatedOptions:o}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let s=t.createRequestHeaders(o.tracingOptions.tracingContext);for(let[c,l]of Object.entries(s))e.headers.set(c,l);return{span:n,tracingContext:o.tracingOptions.tracingContext}}catch(n){OC.warning(`Skipping creating a tracing span due to an error: ${EB(n)}`);return}}a(cOt,"tryCreateSpan");function lOt(t,e){try{t.setStatus({status:"error",error:iK(e)?e:void 0}),iO(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){OC.warning(`Skipping tracing span processing due to an error: ${EB(r)}`)}}a(lOt,"tryProcessError");function uOt(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){OC.warning(`Skipping tracing span processing due to an error: ${EB(r)}`)}}a(uOt,"tryProcessResponse");f();f();function qK(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",o),r=!1)}a(n,"cleanup");function o(){e.abort(t.reason),n()}return a(o,"listener"),t.addEventListener("abort",o),{abortSignal:e.signal,cleanup:n}}a(qK,"wrapAbortSignalLike");var dOt="wrapAbortSignalLikePolicy";function s$e(){return{name:dOt,sendRequest:a(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=qK(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}a(s$e,"wrapAbortSignalLikePolicy");function mye(t){var e;let r=LK();return bB&&(t.agent&&r.addPolicy(dye(t.agent)),t.tlsOptions&&r.addPolicy(fye(t.tlsOptions)),r.addPolicy(lye(t.proxyOptions)),r.addPolicy(sye())),r.addPolicy(s$e()),r.addPolicy(cye(),{beforePolicies:[UK]}),r.addPolicy(nye(t.userAgentOptions)),r.addPolicy(uye((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(oye(),{afterPhase:"Deserialize"}),r.addPolicy(aye(t.retryOptions),{phase:"Retry"}),r.addPolicy(pye(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),bB&&r.addPolicy(rye(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(tye(t.loggingOptions),{afterPhase:"Sign"}),r}a(mye,"createPipelineFromOptions");f();function hye(){let t=gK();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?qK(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}a(hye,"createDefaultHttpClient");f();function hT(t){return L0(t)}a(hT,"createHttpHeaders");f();function bA(t){return dK(t)}a(bA,"createPipelineRequest");f();f();f();f();var pOt=$I("core-rest-pipeline retryPolicy");function gye(t,e={maxRetries:3}){return pT(t,Object.assign({logger:pOt},e))}a(gye,"retryPolicy");f();f();var mOt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function hOt(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let s=await t();if(s===null)throw new Error("Failed to refresh access token.");return s}}a(n,"tryGetAccessToken");let o=await n();for(;o===null;)await EAe(e),o=await n();return o}a(hOt,"beginRefresh");function Aye(t,e){let r=null,n=null,o,s=Object.assign(Object.assign({},mOt),e),c={get isRefreshing(){return r!==null},get shouldRefresh(){var u;return c.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((u=n?.expiresOnTimestamp)!==null&&u!==void 0?u:0)-s.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-s.forcedRefreshWindowInMs<Date.now()}};function l(u,d){var p;return c.isRefreshing||(r=hOt(a(()=>t.getToken(u,d),"tryGetAccessToken"),s.retryIntervalInMs,(p=n?.expiresOnTimestamp)!==null&&p!==void 0?p:Date.now()).then(h=>(r=null,n=h,o=d.tenantId,n)).catch(h=>{throw r=null,n=null,o=void 0,h})),r}return a(l,"refresh"),async(u,d)=>{let p=!!d.claims,m=o!==d.tenantId;return p&&(n=null),m||p||c.mustRefresh?l(u,d):(c.shouldRefresh&&l(u,d),n)}}a(Aye,"createTokenCycler");var u$e="bearerTokenAuthenticationPolicy";async function HK(t,e){try{return[await e(t),void 0]}catch(r){if(iO(r)&&r.response)return[r.response,r];throw r}}a(HK,"trySendRequest");async function gOt(t){let{scopes:e,getAccessToken:r,request:n}=t,o={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},s=await r(e,o);s&&t.request.headers.set("Authorization",`Bearer ${s.token}`)}a(gOt,"defaultAuthorizeRequest");function a$e(t){return t.status===401&&t.headers.has("WWW-Authenticate")}a(a$e,"isChallengeResponse");async function c$e(t,e){var r;let{scopes:n}=t,o=await t.getAccessToken(n,{enableCae:!0,claims:e});return o?(t.request.headers.set("Authorization",`${(r=o.tokenType)!==null&&r!==void 0?r:"Bearer"} ${o.token}`),!0):!1}a(c$e,"authorizeRequestOnCaeChallenge");function $K(t){var e,r,n;let{credential:o,scopes:s,challengeCallbacks:c}=t,l=t.logger||OC,u={authorizeRequest:(r=(e=c?.authorizeRequest)===null||e===void 0?void 0:e.bind(c))!==null&&r!==void 0?r:gOt,authorizeRequestOnChallenge:(n=c?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(c)},d=o?Aye(o):()=>Promise.resolve(null);return{name:u$e,async sendRequest(p,m){if(!p.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await u.authorizeRequest({scopes:Array.isArray(s)?s:[s],request:p,getAccessToken:d,logger:l});let h,g,A;if([h,g]=await HK(p,m),a$e(h)){let y=l$e(h.headers.get("WWW-Authenticate"));if(y){let v;try{v=atob(y)}catch{return l.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),h}A=await c$e({scopes:Array.isArray(s)?s:[s],response:h,request:p,getAccessToken:d,logger:l},v),A&&([h,g]=await HK(p,m))}else if(u.authorizeRequestOnChallenge&&(A=await u.authorizeRequestOnChallenge({scopes:Array.isArray(s)?s:[s],request:p,response:h,getAccessToken:d,logger:l}),A&&([h,g]=await HK(p,m)),a$e(h)&&(y=l$e(h.headers.get("WWW-Authenticate")),y))){let v;try{v=atob(y)}catch{return l.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),h}A=await c$e({scopes:Array.isArray(s)?s:[s],response:h,request:p,getAccessToken:d,logger:l},v),A&&([h,g]=await HK(p,m))}}if(g)throw g;return h}}}a($K,"bearerTokenAuthenticationPolicy");function AOt(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],o;for(;(o=e.exec(t))!==null;){let s=o[1],c=o[2],l={},u;for(;(u=r.exec(c))!==null;)l[u[1]]=u[2];n.push({scheme:s,params:l})}return n}a(AOt,"parseChallenges");function l$e(t){var e;return t?(e=AOt(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}a(l$e,"getCaeChallengeClaims");f();f();f();f();f();f();var f$e=Ne(d$e(),1),yye=f$e.state;function gT(t,e,r){let n=e.parameterPath,o=e.mapper,s;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(o.isConstant)s=o.defaultValue;else{let c=p$e(t,n);!c.propertyFound&&r&&(c=p$e(r,n));let l=!1;c.propertyFound||(l=o.required||n[0]==="options"&&n.length===2),s=l?o.defaultValue:c.propertyValue}}else{o.required&&(s={});for(let c in n){let l=o.type.modelProperties[c],u=n[c],d=gT(t,{parameterPath:u,mapper:l},r);d!==void 0&&(s||(s={}),s[c]=d)}}return s}a(gT,"getOperationArgumentValueFromParameter");function p$e(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let o=e[n];if(t&&o in t)t=t[o];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}a(p$e,"getPropertyFromParameterPath");var m$e=Symbol.for("@azure/core-client original request");function yOt(t){return m$e in t}a(yOt,"hasOriginalRequest");function hx(t){if(yOt(t))return hx(t[m$e]);let e=yye.operationRequestMap.get(t);return e||(e={},yye.operationRequestMap.set(t,e)),e}a(hx,"getOperationRequestInfo");var COt=["application/json","text/json"],vOt=["application/xml","application/atom+xml"],h$e="deserializationPolicy";function Cye(t={}){var e,r,n,o,s,c,l;let u=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:COt,d=(o=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&o!==void 0?o:vOt,p=t.parseXML,m=t.serializerOptions,h={xml:{rootName:(s=m?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(c=m?.xml.includeRoot)!==null&&c!==void 0?c:!1,xmlCharKey:(l=m?.xml.xmlCharKey)!==null&&l!==void 0?l:"_"}};return{name:h$e,async sendRequest(g,A){let y=await A(g);return bOt(u,d,y,h,p)}}}a(Cye,"deserializationPolicy");function xOt(t){let e,r=t.request,n=hx(r),o=n?.operationSpec;return o&&(n?.operationResponseGetter?e=n?.operationResponseGetter(o,t):e=o.responses[t.status]),e}a(xOt,"getOperationResponseMap");function EOt(t){let e=t.request,r=hx(e),n=r?.shouldDeserialize,o;return n===void 0?o=!0:typeof n=="boolean"?o=n:o=n(t),o}a(EOt,"shouldDeserializeResponse");async function bOt(t,e,r,n,o){let s=await wOt(t,e,r,n,o);if(!EOt(s))return s;let c=hx(s.request),l=c?.operationSpec;if(!l||!l.responses)return s;let u=xOt(s),{error:d,shouldReturnResponse:p}=TOt(s,l,u,n);if(d)throw d;if(p)return s;if(u){if(u.bodyMapper){let m=s.parsedBody;l.isXML&&u.bodyMapper.type.name===BC.Sequence&&(m=typeof m=="object"?m[u.bodyMapper.xmlElementName]:[]);try{s.parsedBody=l.serializer.deserialize(u.bodyMapper,m,"operationRes.parsedBody",n)}catch(h){throw new kB(`Error ${h} occurred in deserializing the responseBody - ${s.bodyAsText}`,{statusCode:s.status,request:s.request,response:s})}}else l.httpMethod==="HEAD"&&(s.parsedBody=r.status>=200&&r.status<300);u.headersMapper&&(s.parsedHeaders=l.serializer.deserialize(u.headersMapper,s.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return s}a(bOt,"deserializeResponseBody");function IOt(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}a(IOt,"isOperationSpecEmpty");function TOt(t,e,r,n){var o;let s=200<=t.status&&t.status<300;if(IOt(e)?s:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let l=r??e.responses.default,u=!((o=t.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,d=new kB(u,{statusCode:t.status,request:t.request,response:t});if(!l)throw d;let p=l.bodyMapper,m=l.headersMapper;try{if(t.parsedBody){let h=t.parsedBody,g;if(p){let y=h;if(e.isXML&&p.type.name===BC.Sequence){y=[];let v=p.xmlElementName;typeof h=="object"&&v&&(y=h[v])}g=e.serializer.deserialize(p,y,"error.response.parsedBody",n)}let A=h.error||g||h;d.code=A.code,A.message&&(d.message=A.message),p&&(d.response.parsedBody=g)}t.headers&&m&&(d.response.parsedHeaders=e.serializer.deserialize(m,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(h){d.message=`Error "${h.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:d,shouldReturnResponse:!1}}a(TOt,"handleErrorResponse");async function wOt(t,e,r,n,o){var s;if(!(!((s=r.request.streamResponseStatusCodes)===null||s===void 0)&&s.has(r.status))&&r.bodyAsText){let c=r.bodyAsText,l=r.headers.get("Content-Type")||"",u=l?l.split(";").map(d=>d.toLowerCase()):[];try{if(u.length===0||u.some(d=>t.indexOf(d)!==-1))return r.parsedBody=JSON.parse(c),r;if(u.some(d=>e.indexOf(d)!==-1)){if(!o)throw new Error("Parsing XML not supported.");let d=await o(c,n.xml);return r.parsedBody=d,r}}catch(d){let p=`Error "${d}" occurred while parsing the response body - ${r.bodyAsText}.`,m=d.code||kB.PARSE_ERROR;throw new kB(p,{code:m,statusCode:r.status,request:r.request,response:r})}}return r}a(wOt,"parse");f();f();function g$e(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===BC.Stream&&e.add(Number(r))}return e}a(g$e,"getStreamingResponseStatusCodes");function QC(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}a(QC,"getPathStringFromParameter");var A$e="serializationPolicy";function vye(t={}){let e=t.stringifyXML;return{name:A$e,async sendRequest(r,n){let o=hx(r),s=o?.operationSpec,c=o?.operationArguments;return s&&c&&(_Ot(r,c,s),SOt(r,c,s,e)),n(r)}}}a(vye,"serializationPolicy");function _Ot(t,e,r){var n,o;if(r.headerParameters)for(let c of r.headerParameters){let l=gT(e,c);if(l!=null||c.mapper.required){l=r.serializer.serialize(c.mapper,l,QC(c));let u=c.mapper.headerCollectionPrefix;if(u)for(let d of Object.keys(l))t.headers.set(u+d,l[d]);else t.headers.set(c.mapper.serializedName||QC(c),l)}}let s=(o=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||o===void 0?void 0:o.customHeaders;if(s)for(let c of Object.keys(s))t.headers.set(c,s[c])}a(_Ot,"serializeHeaders");function SOt(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var o,s,c,l,u;let d=(o=e.options)===null||o===void 0?void 0:o.serializerOptions,p={xml:{rootName:(s=d?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(c=d?.xml.includeRoot)!==null&&c!==void 0?c:!1,xmlCharKey:(l=d?.xml.xmlCharKey)!==null&&l!==void 0?l:"_"}},m=p.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=gT(e,r.requestBody);let h=r.requestBody.mapper,{required:g,serializedName:A,xmlName:y,xmlElementName:v,xmlNamespace:b,xmlNamespacePrefix:I,nullable:S}=h,k=h.type.name;try{if(t.body!==void 0&&t.body!==null||S&&t.body===null||g){let N=QC(r.requestBody);t.body=r.serializer.serialize(h,t.body,N,p);let F=k===BC.Stream;if(r.isXML){let O=I?`xmlns:${I}`:"xmlns",Y=ROt(b,O,k,t.body,p);k===BC.Sequence?t.body=n(kOt(Y,v||y||A,O,b),{rootName:y||A,xmlCharKey:m}):F||(t.body=n(Y,{rootName:y||A,xmlCharKey:m}))}else{if(k===BC.String&&(!((u=r.contentType)===null||u===void 0)&&u.match("text/plain")||r.mediaType==="text"))return;F||(t.body=JSON.stringify(t.body))}}}catch(N){throw new Error(`Error "${N.message}" occurred in serializing the payload - ${JSON.stringify(A,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let h of r.formDataParameters){let g=gT(e,h);if(g!=null){let A=h.mapper.serializedName||QC(h);t.formData[A]=r.serializer.serialize(h.mapper,g,QC(h),p)}}}}a(SOt,"serializeRequestBody");function ROt(t,e,r,n,o){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let s={};return s[o.xml.xmlCharKey]=n,s["$"]={[e]:t},s}return n}a(ROt,"getXmlValueWithNamespace");function kOt(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let o={[e]:t};return o["$"]={[r]:n},o}a(kOt,"prepareXMLRootList");function xye(t={}){let e=mye(t??{});return t.credentialOptions&&e.addPolicy($K({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(vye(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(Cye(t.deserializationOptions),{phase:"Deserialize"}),e}a(xye,"createClientPipeline");f();var Eye;function y$e(){return Eye||(Eye=hye()),Eye}a(y$e,"getCachedDefaultHttpClient");f();var POt={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function v$e(t,e,r,n){let o=DOt(e,r,n),s=!1,c=C$e(t,o);if(e.path){let d=C$e(e.path,o);e.path==="/{nextLink}"&&d.startsWith("/")&&(d=d.substring(1)),BOt(d)?(c=d,s=!0):c=NOt(c,d)}let{queryParams:l,sequenceParams:u}=MOt(e,r,n);return c=FOt(c,l,u,s),c}a(v$e,"getRequestUrl");function C$e(t,e){let r=t;for(let[n,o]of e)r=r.split(n).join(o);return r}a(C$e,"replaceAll");function DOt(t,e,r){var n;let o=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let s of t.urlParameters){let c=gT(e,s,r),l=QC(s);c=t.serializer.serialize(s.mapper,c,l),s.skipEncoding||(c=encodeURIComponent(c)),o.set(`{${s.mapper.serializedName||l}}`,c)}return o}a(DOt,"calculateUrlReplacements");function BOt(t){return t.includes("://")}a(BOt,"isAbsoluteUrl");function NOt(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let o=e.indexOf("?");if(o!==-1){let s=e.substring(0,o),c=e.substring(o+1);n=n+s,c&&(r.search=r.search?`${r.search}&${c}`:c)}else n=n+e;return r.pathname=n,r.toString()}a(NOt,"appendPath");function MOt(t,e,r){var n;let o=new Map,s=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let c of t.queryParameters){c.mapper.type.name==="Sequence"&&c.mapper.serializedName&&s.add(c.mapper.serializedName);let l=gT(e,c,r);if(l!=null||c.mapper.required){l=t.serializer.serialize(c.mapper,l,QC(c));let u=c.collectionFormat?POt[c.collectionFormat]:"";if(Array.isArray(l)&&(l=l.map(d=>d??"")),c.collectionFormat==="Multi"&&l.length===0)continue;Array.isArray(l)&&(c.collectionFormat==="SSV"||c.collectionFormat==="TSV")&&(l=l.join(u)),c.skipEncoding||(Array.isArray(l)?l=l.map(d=>encodeURIComponent(d)):l=encodeURIComponent(l)),Array.isArray(l)&&(c.collectionFormat==="CSV"||c.collectionFormat==="Pipes")&&(l=l.join(u)),o.set(c.mapper.serializedName||QC(c),l)}}return{queryParams:o,sequenceParams:s}}a(MOt,"calculateQueryParameters");function LOt(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[o,s]=n.split("=",2),c=e.get(o);c?Array.isArray(c)?c.push(s):e.set(o,[c,s]):e.set(o,s)}return e}a(LOt,"simpleParseQueryParams");function FOt(t,e,r,n=!1){if(e.size===0)return t;let o=new URL(t),s=LOt(o.search);for(let[l,u]of e){let d=s.get(l);if(Array.isArray(d))if(Array.isArray(u)){d.push(...u);let p=new Set(d);s.set(l,Array.from(p))}else d.push(u);else d?(Array.isArray(u)?u.unshift(d):r.has(l)&&s.set(l,[d,u]),n||s.set(l,u)):s.set(l,u)}let c=[];for(let[l,u]of s)if(typeof u=="string")c.push(`${l}=${u}`);else if(Array.isArray(u))for(let d of u)c.push(`${l}=${d}`);else c.push(`${l}=${u}`);return o.search=c.length?`?${c.join("&")}`:"",o.toString()}a(FOt,"appendQueryParams");f();var bye=$I("core-client");var oO=class{static{a(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&bye.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||y$e(),this.pipeline=e.pipeline||OOt(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:o,position:s}of e.additionalPolicies){let c=s==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(o,{afterPhase:c})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let o=v$e(n,r,e,this),s=bA({url:o});s.method=r.httpMethod;let c=hx(s);c.operationSpec=r,c.operationArguments=e;let l=r.contentType||this._requestContentType;l&&r.requestBody&&s.headers.set("Content-Type",l);let u=e.options;if(u){let d=u.requestOptions;d&&(d.timeout&&(s.timeout=d.timeout),d.onUploadProgress&&(s.onUploadProgress=d.onUploadProgress),d.onDownloadProgress&&(s.onDownloadProgress=d.onDownloadProgress),d.shouldDeserialize!==void 0&&(c.shouldDeserialize=d.shouldDeserialize),d.allowInsecureConnection&&(s.allowInsecureConnection=!0)),u.abortSignal&&(s.abortSignal=u.abortSignal),u.tracingOptions&&(s.tracingOptions=u.tracingOptions)}this._allowInsecureConnection&&(s.allowInsecureConnection=!0),s.streamResponseStatusCodes===void 0&&(s.streamResponseStatusCodes=g$e(r));try{let d=await this.sendRequest(s),p=wAe(d,r.responses[d.status]);return u?.onResponse&&u.onResponse(d,p),p}catch(d){if(typeof d=="object"&&d?.response){let p=d.response,m=wAe(p,r.responses[d.statusCode]||r.responses.default);d.details=m,u?.onResponse&&u.onResponse(p,m,d)}throw d}}};function OOt(t){let e=QOt(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return xye(Object.assign(Object.assign({},t),{credentialOptions:r}))}a(OOt,"createDefaultPipeline");function QOt(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}a(QOt,"getCredentialScopes");f();f();f();function x$e(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}a(x$e,"getIdentityTokenEndpointSuffix");f();var E$e="/.default",b$e="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function sO(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(E$e)?e.substr(0,e.lastIndexOf(E$e)):e}a(sO,"mapScopesToResource");function I$e(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}a(I$e,"parseExpirationTimestamp");function T$e(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}a(T$e,"parseRefreshTimestamp");var aO="noCorrelationId";function UOt(t){let e=t?.authorityHost;return oK&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??I6}a(UOt,"getIdentityClientAuthorityHost");var AT=class extends oO{static{a(this,"IdentityClient")}authorityHost;allowLoggingAccountIdentifiers;abortControllers;allowInsecureConnection=!1;tokenCredentialOptions;constructor(e){let r=`azsdk-js-identity/${yV}`,n=e?.userAgentOptions?.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${r}`:`${r}`,o=UOt(e);if(!o.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3},...e,userAgentOptions:{userAgentPrefix:n},baseUri:o}),this.authorityHost=o,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=e?.loggingOptions?.allowLoggingAccountIdentifiers,this.tokenCredentialOptions={...e},e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){R0.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let o={accessToken:{token:n.access_token,expiresOnTimestamp:I$e(n),refreshAfterTimestamp:T$e(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return R0.info(`IdentityClient: [${e.url}] token acquired, expires on ${o.accessToken.expiresOnTimestamp}`),o}else{let n=new HI(r.status,r.bodyAsText);throw R0.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,o,s,c={}){if(o===void 0)return null;R0.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let l={grant_type:"refresh_token",client_id:r,refresh_token:o,scope:n};s!==void 0&&(l.client_secret=s);let u=new URLSearchParams(l);return ns.withSpan("IdentityClient.refreshAccessToken",c,async d=>{try{let p=x$e(e),m=bA({url:`${this.authorityHost}/${e}/${p}`,method:"POST",body:u.toString(),abortSignal:c.abortSignal,headers:hT({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:d.tracingOptions}),h=await this.sendTokenRequest(m);return R0.info(`IdentityClient: refreshed token for client ID: ${r}`),h}catch(p){if(p.name===vV&&p.errorResponse.error==="interaction_required")return R0.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw R0.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${p}`),p}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let o=r.signal.onabort;return r.signal.onabort=(...s)=>{this.abortControllers.set(e,void 0),o&&o.apply(r.signal,s)},r.signal}abortRequests(e){let r=e||aO,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(aO)||[]];if(n.length){for(let o of n)o.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){let r=e?.body?.split("&").map(n=>n.split("=")).find(([n])=>n==="client-request-id");return r&&r.length&&r[1]||aO}async sendGetRequestAsync(e,r){let n=bA({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:hT(r?.headers),abortSignal:this.generateAbortSignal(aO)}),o=await this.sendRequest(n);return this.logIdentifiers(o),{body:o.bodyAsText?JSON.parse(o.bodyAsText):void 0,headers:o.headers.toJSON(),status:o.status}}async sendPostRequestAsync(e,r){let n=bA({url:e,method:"POST",body:r?.body,headers:hT(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),o=await this.sendRequest(n);return this.logIdentifiers(o),{body:o.bodyAsText?JSON.parse(o.bodyAsText):void 0,headers:o.headers.toJSON(),status:o.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let o=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!o)return;let s=o.split(".")[1],{appid:c,upn:l,tid:u,oid:d}=JSON.parse(Buffer.from(s,"base64").toString("utf8"));R0.info(`[Authenticated account] Client ID: ${c}. Tenant ID: ${u}. User Principal Name: ${l||r}. Object ID (user): ${d}`)}catch(n){R0.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};f();var Iye;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(Iye||(Iye={}));function jK(t){let e=t;return e===void 0&&globalThis.process?.env?.AZURE_REGIONAL_AUTHORITY_NAME!==void 0&&(e=process.env.AZURE_REGIONAL_AUTHORITY_NAME),e===Iye.AutoDiscoverRegion?"AUTO_DISCOVER":e}a(jK,"calculateRegionalAuthority");f();f();function qOt(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}a(qOt,"createConfigurationErrorMessage");function ec(t,e,r=[],n){let o;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?o=t:o=e?.tenantId??t,t&&o!==t&&!r.includes("*")&&!r.some(s=>s.localeCompare(o)===0)){let s=qOt(o);throw n?.info(s),new $r(s)}return o}a(ec,"processMultiTenantRequest");function lu(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(bo("",r)),r}}a(lu,"checkTenantId");function PB(t,e,r){return e?(lu(t,e),e):(r||(r=d2),r!==d2?"common":"organizations")}a(PB,"resolveTenantId");function fc(t){return!t||t.length===0?[]:t.includes("*")?B9e:t}a(fc,"resolveAdditionallyAllowedTenantIds");var wf=ii("MsalClient");function n7t(t,e,r={}){let n=PB(r.logger??wf,e,t),o=IAe(n,bAe(r)),s=new AT({...r.tokenCredentialOptions,authorityHost:o,loggingOptions:r.loggingOptions});return{auth:{clientId:t,authority:o,knownAuthorities:Uqe(n,o,r.disableInstanceDiscovery)},system:{networkClient:s,loggerOptions:{loggerCallback:sK(r.logger??wf),logLevel:aK(TV()),piiLoggingEnabled:r.loggingOptions?.enableUnsafeSupportLogging}}}}a(n7t,"generateMsalConfiguration");function qd(t,e,r={}){let n={msalConfig:n7t(t,e,r),cachedAccount:r.authenticationRecord?qqe(r.authenticationRecord):null,pluginConfiguration:Q9e.generatePluginConfiguration(r),logger:r.logger??wf},o=new Map;async function s(O={}){let Y=O.enableCae?"CAE":"default",z=o.get(Y);if(z)return n.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),z;n.logger.getToken.info(`Creating new PublicClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let V=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,z=new gB({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await V}}),o.set(Y,z),z}a(s,"getPublicApp");let c=new Map;async function l(O={}){let Y=O.enableCae?"CAE":"default",z=c.get(Y);if(z)return n.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),z;n.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${O.enableCae?"enabled":"disabled"}.`);let V=O.enableCae?n.pluginConfiguration.cache.cachePluginCae:n.pluginConfiguration.cache.cachePlugin;return n.msalConfig.auth.clientCapabilities=O.enableCae?["cp1"]:void 0,z=new yB({...n.msalConfig,broker:{nativeBrokerPlugin:n.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await V}}),c.set(Y,z),z}a(l,"getConfidentialApp");async function u(O,Y,z={}){if(n.cachedAccount===null)throw n.logger.getToken.info("No cached account found in local state."),new eh({scopes:Y});z.claims&&(n.cachedClaims=z.claims);let V={account:n.cachedAccount,scopes:Y,claims:n.cachedClaims};n.pluginConfiguration.broker.isEnabled&&(V.tokenQueryParameters||={},n.pluginConfiguration.broker.enableMsaPassthrough&&(V.tokenQueryParameters.msal_request_type="consumer_passthrough")),z.proofOfPossessionOptions&&(V.shrNonce=z.proofOfPossessionOptions.nonce,V.authenticationScheme="pop",V.resourceRequestMethod=z.proofOfPossessionOptions.resourceRequestMethod,V.resourceRequestUri=z.proofOfPossessionOptions.resourceRequestUrl),n.logger.getToken.info("Attempting to acquire token silently");try{return await O.acquireTokenSilent(V)}catch(U){throw sR(Y,U,z)}}a(u,"getTokenSilent");function d(O){return O?.tenantId?IAe(O.tenantId,bAe(r)):n.msalConfig.auth.authority}a(d,"calculateRequestAuthority");async function p(O,Y,z,V){let U=null;try{U=await u(O,Y,z)}catch(H){if(H.name!=="AuthenticationRequiredError")throw H;if(z.disableAutomaticAuthentication)throw new eh({scopes:Y,getTokenOptions:z,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(U===null)try{U=await V()}catch(H){throw sR(Y,H,z)}return oR(Y,U,z),n.cachedAccount=U?.account??null,n.logger.getToken.info(Ml(Y)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}a(p,"withSilentAuthentication");async function m(O,Y,z={}){n.logger.getToken.info("Attempting to acquire token using client secret"),n.msalConfig.auth.clientSecret=Y;let V=await l(z);try{let U=await V.acquireTokenByClientCredential({scopes:O,authority:d(z),azureRegion:jK(),claims:z?.claims});return oR(O,U,z),n.logger.getToken.info(Ml(O)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}catch(U){throw sR(O,U,z)}}a(m,"getTokenByClientSecret");async function h(O,Y,z={}){n.logger.getToken.info("Attempting to acquire token using client assertion"),n.msalConfig.auth.clientAssertion=Y;let V=await l(z);try{let U=await V.acquireTokenByClientCredential({scopes:O,authority:d(z),azureRegion:jK(),claims:z?.claims,clientAssertion:Y});return oR(O,U,z),n.logger.getToken.info(Ml(O)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}catch(U){throw sR(O,U,z)}}a(h,"getTokenByClientAssertion");async function g(O,Y,z={}){n.logger.getToken.info("Attempting to acquire token using client certificate"),n.msalConfig.auth.clientCertificate=Y;let V=await l(z);try{let U=await V.acquireTokenByClientCredential({scopes:O,authority:d(z),azureRegion:jK(),claims:z?.claims});return oR(O,U,z),n.logger.getToken.info(Ml(O)),{token:U.accessToken,expiresOnTimestamp:U.expiresOn.getTime(),refreshAfterTimestamp:U.refreshOn?.getTime(),tokenType:U.tokenType}}catch(U){throw sR(O,U,z)}}a(g,"getTokenByClientCertificate");async function A(O,Y,z={}){n.logger.getToken.info("Attempting to acquire token using device code");let V=await s(z);return p(V,O,z,()=>{let U={scopes:O,cancel:z?.abortSignal?.aborted??!1,deviceCodeCallback:Y,authority:d(z),claims:z?.claims},H=V.acquireTokenByDeviceCode(U);return z.abortSignal&&z.abortSignal.addEventListener("abort",()=>{U.cancel=!0}),H})}a(A,"getTokenByDeviceCode");async function y(O,Y,z,V={}){n.logger.getToken.info("Attempting to acquire token using username and password");let U=await s(V);return p(U,O,V,()=>{let H={scopes:O,username:Y,password:z,authority:d(V),claims:V?.claims};return U.acquireTokenByUsernamePassword(H)})}a(y,"getTokenByUsernamePassword");function v(){if(n.cachedAccount)return Hqe(t,n.cachedAccount)}a(v,"getActiveAccount");async function b(O,Y,z,V,U={}){n.logger.getToken.info("Attempting to acquire token using authorization code");let H;return V?(n.msalConfig.auth.clientSecret=V,H=await l(U)):H=await s(U),p(H,O,U,()=>H.acquireTokenByCode({scopes:O,redirectUri:Y,code:z,authority:d(U),claims:U?.claims}))}a(b,"getTokenByAuthorizationCode");async function I(O,Y,z,V={}){wf.getToken.info("Attempting to acquire token on behalf of another user"),typeof z=="string"?(wf.getToken.info("Using client secret for on behalf of flow"),n.msalConfig.auth.clientSecret=z):typeof z=="function"?(wf.getToken.info("Using client assertion callback for on behalf of flow"),n.msalConfig.auth.clientAssertion=z):(wf.getToken.info("Using client certificate for on behalf of flow"),n.msalConfig.auth.clientCertificate=z);let U=await l(V);try{let H=await U.acquireTokenOnBehalfOf({scopes:O,authority:d(V),claims:V.claims,oboAssertion:Y});return oR(O,H,V),wf.getToken.info(Ml(O)),{token:H.accessToken,expiresOnTimestamp:H.expiresOn.getTime(),refreshAfterTimestamp:H.refreshOn?.getTime(),tokenType:H.tokenType}}catch(H){throw sR(O,H,V)}}a(I,"getTokenOnBehalfOf");function S(O,Y){return{openBrowser:a(async z=>{await(await Promise.resolve().then(()=>(YK(),eWe))).default(z,{newInstance:!0})},"openBrowser"),scopes:O,authority:d(Y),claims:Y?.claims,loginHint:Y?.loginHint,errorTemplate:Y?.browserCustomizationOptions?.errorMessage,successTemplate:Y?.browserCustomizationOptions?.successMessage,prompt:Y?.loginHint?"login":"select_account"}}a(S,"createBaseInteractiveRequest");async function k(O,Y,z={}){wf.verbose("Authentication will resume through the broker");let V=await s(z),U=S(O,z);n.pluginConfiguration.broker.parentWindowHandle?U.windowHandle=Buffer.from(n.pluginConfiguration.broker.parentWindowHandle):wf.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),n.pluginConfiguration.broker.enableMsaPassthrough&&((U.tokenQueryParameters??={}).msal_request_type="consumer_passthrough"),Y?(U.prompt="none",wf.verbose("Attempting broker authentication using the default broker account")):wf.verbose("Attempting broker authentication without the default broker account"),z.proofOfPossessionOptions&&(U.shrNonce=z.proofOfPossessionOptions.nonce,U.authenticationScheme="pop",U.resourceRequestMethod=z.proofOfPossessionOptions.resourceRequestMethod,U.resourceRequestUri=z.proofOfPossessionOptions.resourceRequestUrl);try{return await V.acquireTokenInteractive(U)}catch(H){if(wf.verbose(`Failed to authenticate through the broker: ${H.message}`),z.disableAutomaticAuthentication)throw new eh({scopes:O,getTokenOptions:z,message:"Cannot silently authenticate with default broker account."});if(Y)return k(O,!1,z);throw H}}a(k,"getBrokeredTokenInternal");async function N(O,Y,z={}){wf.getToken.info(`Attempting to acquire token using brokered authentication with useDefaultBrokerAccount: ${Y}`);let V=await k(O,Y,z);return oR(O,V,z),n.cachedAccount=V?.account??null,n.logger.getToken.info(Ml(O)),{token:V.accessToken,expiresOnTimestamp:V.expiresOn.getTime(),refreshAfterTimestamp:V.refreshOn?.getTime(),tokenType:V.tokenType}}a(N,"getBrokeredToken");async function F(O,Y={}){wf.getToken.info("Attempting to acquire token interactively");let z=await s(Y);return p(z,O,Y,async()=>{let V=S(O,Y);return n.pluginConfiguration.broker.isEnabled?k(O,n.pluginConfiguration.broker.useDefaultBrokerAccount??!1,Y):(Y.proofOfPossessionOptions&&(V.shrNonce=Y.proofOfPossessionOptions.nonce,V.authenticationScheme="pop",V.resourceRequestMethod=Y.proofOfPossessionOptions.resourceRequestMethod,V.resourceRequestUri=Y.proofOfPossessionOptions.resourceRequestUrl),z.acquireTokenInteractive(V))})}return a(F,"getTokenByInteractiveRequest"),{getActiveAccount:v,getBrokeredToken:N,getTokenByClientSecret:m,getTokenByClientAssertion:h,getTokenByClientCertificate:g,getTokenByDeviceCode:A,getTokenByUsernamePassword:y,getTokenByAuthorizationCode:b,getTokenOnBehalfOf:I,getTokenByInteractiveRequest:F}}a(qd,"createMsalClient");var fO=require("node:crypto");var rWe=require("node:fs/promises");var dO="ClientCertificateCredential",tWe=ii(dO),pO=class{static{a(this,"ClientCertificateCredential")}tenantId;additionallyAllowedTenantIds;certificateConfiguration;sendCertificateChain;msalClient;constructor(e,r,n,o={}){if(!e||!r)throw new Error(`${dO}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=fc(o?.additionallyAllowedTenants),this.sendCertificateChain=o.sendCertificateChain,this.certificateConfiguration={...typeof n=="string"?{certificatePath:n}:n};let s=this.certificateConfiguration.certificate,c=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(s||c))throw new Error(`${dO}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(s&&c)throw new Error(`${dO}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=qd(r,e,{...o,logger:tWe,tokenCredentialOptions:o})}async getToken(e,r={}){return ns.withSpan(`${dO}.getToken`,r,async n=>{n.tenantId=ec(this.tenantId,n,this.additionallyAllowedTenantIds,tWe);let o=Array.isArray(e)?e:[e],s=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(o,s,n)})}async buildClientCertificate(){let e=await i7t(this.certificateConfiguration,this.sendCertificateChain??!1),r;return this.certificateConfiguration.certificatePassword!==void 0?r=(0,fO.createPrivateKey)({key:e.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():r=e.certificateContents,{thumbprint:e.thumbprint,thumbprintSha256:e.thumbprintSha256,privateKey:r,x5c:e.x5c}}};async function i7t(t,e){let r=t.certificate,n=t.certificatePath,o=r||await(0,rWe.readFile)(n,"utf8"),s=e?o:void 0,c=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,l=[],u;do u=c.exec(o),u&&l.push(u[3]);while(u);if(l.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let d=(0,fO.createHash)("sha1").update(Buffer.from(l[0],"base64")).digest("hex").toUpperCase(),p=(0,fO.createHash)("sha256").update(Buffer.from(l[0],"base64")).digest("hex").toUpperCase();return{certificateContents:o,thumbprintSha256:p,thumbprint:d,x5c:s}}a(i7t,"parseCertificate");f();f();function uh(t){return Array.isArray(t)?t:[t]}a(uh,"ensureScopes");function NB(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(bo(t,r)),r}}a(NB,"ensureValidScopeForDevTimeCreds");function JK(t){return t.replace(/\/.default$/,"")}a(JK,"getScopeResource");var nWe=ii("ClientSecretCredential"),mO=class{static{a(this,"ClientSecretCredential")}tenantId;additionallyAllowedTenantIds;msalClient;clientSecret;constructor(e,r,n,o={}){if(!e)throw new $r("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new $r("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new $r("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=fc(o?.additionallyAllowedTenants),this.msalClient=qd(r,e,{...o,logger:nWe,tokenCredentialOptions:o})}async getToken(e,r={}){return ns.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=ec(this.tenantId,n,this.additionallyAllowedTenantIds,nWe);let o=uh(e);return this.msalClient.getTokenByClientSecret(o,this.clientSecret,n)})}};f();var o7t=ii("UsernamePasswordCredential"),hO=class{static{a(this,"UsernamePasswordCredential")}tenantId;additionallyAllowedTenantIds;msalClient;username;password;constructor(e,r,n,o,s={}){if(!e)throw new $r("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new $r("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new $r("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!o)throw new $r("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=fc(s?.additionallyAllowedTenants),this.username=n,this.password=o,this.msalClient=qd(r,this.tenantId,{...s,tokenCredentialOptions:s??{}})}async getToken(e,r={}){return ns.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=ec(this.tenantId,n,this.additionallyAllowedTenantIds,o7t);let o=uh(e);return this.msalClient.getTokenByUsernamePassword(o,this.username,this.password,n)})}};var s7t=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function a7t(){return(process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS??"").split(";")}a(a7t,"getAdditionallyAllowedTenants");var XK="EnvironmentCredential",gx=ii(XK);function c7t(){let t=(process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN??"").toLowerCase(),e=t==="true"||t==="1";return gx.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${e}`),e}a(c7t,"getSendCertificateChain");var gO=class{static{a(this,"EnvironmentCredential")}_credential=void 0;constructor(e){let r=wV(s7t).assigned.join(", ");gx.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,o=process.env.AZURE_CLIENT_ID,s=process.env.AZURE_CLIENT_SECRET,c=a7t(),l=c7t(),u={...e,additionallyAllowedTenantIds:c,sendCertificateChain:l};if(n&&lu(gx,n),n&&o&&s){gx.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${o} and clientSecret: [REDACTED]`),this._credential=new mO(n,o,s,u);return}let d=process.env.AZURE_CLIENT_CERTIFICATE_PATH,p=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&o&&d){gx.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${o} and certificatePath: ${d}`),this._credential=new pO(n,o,{certificatePath:d,certificatePassword:p},u);return}let m=process.env.AZURE_USERNAME,h=process.env.AZURE_PASSWORD;n&&o&&m&&h&&(gx.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${o} and username: ${m}`),gx.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new hO(n,o,m,h,u))}async getToken(e,r={}){return ns.withSpan(`${XK}.getToken`,r,async n=>{if(this._credential)try{let o=await this._credential.getToken(e,n);return gx.getToken.info(Ml(e)),o}catch(o){let s=new HI(400,{error:`${XK} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:o.message.toString().split("More details:").join("")});throw gx.getToken.info(bo(e,s)),s}throw new $r(`${XK} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};f();f();var l7t=1e3*64,u7t=3e3;function iWe(t){return gye([{name:"imdsRetryPolicy",retry:a(({retryCount:e,response:r})=>{if(r?.status!==404&&r?.status!==410)return{skipStrategy:!0};let n=r?.status===410?Math.max(u7t,t.startDelayInMs):t.startDelayInMs;return Oqe(e,{retryDelayInMs:n,maxRetryDelayInMs:l7t})},"retry")}],{maxRetries:t.maxRetries})}a(iWe,"imdsRetryPolicy");f();var Ax="ManagedIdentityCredential - IMDS",cR=ii(Ax),d7t="http://169.254.169.254",f7t="/metadata/identity/oauth2/token";function p7t(t){if(!sO(t))throw new Error(`${Ax}: Multiple scopes are not supported.`);let r=new URL(f7t,process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST??d7t),n={Accept:"application/json"};return{url:`${r}`,method:"GET",headers:hT(n)}}a(p7t,"prepareInvalidRequestOptions");var oWe={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,o=sO(e);if(!o)return cR.info(`${Ax}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let s=p7t(o);return ns.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async c=>{s.tracingOptions=c.tracingOptions;let l=bA(s);l.timeout=c.requestOptions?.timeout||1e3,l.allowInsecureConnection=!0;let u;try{cR.info(`${Ax}: Pinging the Azure IMDS endpoint`),u=await r.sendRequest(l)}catch(d){return iK(d)&&cR.verbose(`${Ax}: Caught error ${d.name}: ${d.message}`),cR.info(`${Ax}: The Azure IMDS endpoint is unavailable`),!1}return u.status===403&&u.bodyAsText?.includes("unreachable")?(cR.info(`${Ax}: The Azure IMDS endpoint is unavailable`),cR.info(`${Ax}: ${u.bodyAsText}`),!1):(cR.info(`${Ax}: The Azure IMDS endpoint is available`),!0)})}};f();f();f();var sWe=ii("ClientAssertionCredential"),MB=class{static{a(this,"ClientAssertionCredential")}msalClient;tenantId;additionallyAllowedTenantIds;getAssertion;options;constructor(e,r,n,o={}){if(!e)throw new $r("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new $r("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new $r("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=fc(o?.additionallyAllowedTenants),this.options=o,this.getAssertion=n,this.msalClient=qd(r,e,{...o,logger:sWe,tokenCredentialOptions:this.options})}async getToken(e,r={}){return ns.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=ec(this.tenantId,n,this.additionallyAllowedTenantIds,sWe);let o=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(o,this.getAssertion,n)})}};var aWe=require("node:fs/promises");var lR="WorkloadIdentityCredential",m7t=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],AO=ii(lR),yx=class{static{a(this,"WorkloadIdentityCredential")}client;azureFederatedTokenFileContent=void 0;cacheDate=void 0;federatedTokenFilePath;constructor(e){let r=wV(m7t).assigned.join(", ");AO.info(`Found the following environment variables: ${r}`);let n=e??{},o=n.tenantId||process.env.AZURE_TENANT_ID,s=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,o&&lu(AO,o),!s)throw new $r(`${lR}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!o)throw new $r(`${lR}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new $r(`${lR}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);AO.info(`Invoking ClientAssertionCredential with tenant ID: ${o}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new MB(o,s,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${lR}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw AO.info(n),new $r(n)}return AO.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new $r(`${lR}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,aWe.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new $r(`${lR}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var cWe="ManagedIdentityCredential - Token Exchange",h7t=ii(cWe),Wye={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||h7t.info(`${cWe}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,o={};return new yx({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE,...o,disableInstanceDiscovery:!0}).getToken(r,e)}};var Q0=ii("ManagedIdentityCredential"),xT=class{static{a(this,"ManagedIdentityCredential")}managedIdentityApp;identityClient;clientId;resourceId;objectId;msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};isAvailableIdentityClient;constructor(e,r){let n;typeof e=="string"?(this.clientId=e,n=r??{}):(this.clientId=e?.clientId,n=e??{}),this.resourceId=n?.resourceId,this.objectId=n?.objectId;let o=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(c=>c.value);if(o.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);n.allowInsecureConnection=!0,n.retryOptions?.maxRetries!==void 0&&(this.msiRetryConfig.maxRetries=n.retryOptions.maxRetries),this.identityClient=new AT({...n,additionalPolicies:[{policy:iWe(this.msiRetryConfig),position:"perCall"}]}),this.managedIdentityApp=new CB({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:aK(TV()),piiLoggingEnabled:n.loggingOptions?.enableUnsafeSupportLogging,loggerCallback:sK(Q0)}}}),this.isAvailableIdentityClient=new AT({...n,retryOptions:{maxRetries:0}});let s=this.managedIdentityApp.getManagedIdentitySource();if(s==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw Q0.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new $r("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(s==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw Q0.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new $r(`ManagedIdentityCredential: ${b$e}`);if(Q0.info(`Using ${s} managed identity.`),o.length===1){let{key:c,value:l}=o[0];Q0.info(`${s} with ${c}: ${l}`)}}async getToken(e,r={}){Q0.getToken.info("Using the MSAL provider for Managed Identity.");let n=sO(e);if(!n)throw new $r(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return ns.withSpan("ManagedIdentityCredential.getToken",r,async()=>{try{let o=await Wye.isAvailable(this.clientId),s=this.managedIdentityApp.getManagedIdentitySource(),c=s==="DefaultToImds"||s==="Imds";if(Q0.getToken.info(`MSAL Identity source: ${s}`),o){Q0.getToken.info("Using the token exchange managed identity.");let u=await Wye.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(u===null)throw new $r("Attempted to use the token exchange managed identity, but received a null response.");return u}else if(c&&(Q0.getToken.info("Using the IMDS endpoint to probe for availability."),!await oWe.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new $r("Attempted to use the IMDS endpoint, but it is not available.");Q0.getToken.info("Calling into MSAL for managed identity token.");let l=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,l,r),Q0.getToken.info(Ml(e)),{expiresOnTimestamp:l.expiresOn.getTime(),token:l.accessToken,refreshAfterTimestamp:l.refreshOn?.getTime(),tokenType:"Bearer"}}catch(o){throw Q0.getToken.error(bo(e,o)),o.name==="AuthenticationRequiredError"?o:g7t(o)?new $r(`ManagedIdentityCredential: Network unreachable. Message: ${o.message}`,{cause:o}):new $r(`ManagedIdentityCredential: Authentication failed. Message ${o.message}`,{cause:o})}})}ensureValidMsalToken(e,r,n){let o=a(s=>(Q0.getToken.info(s),new eh({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:s})),"createError");if(!r)throw o("No response.");if(!r.expiresOn)throw o('Response had no "expiresOn" property.');if(!r.accessToken)throw o('Response had no "accessToken" property.')}};function g7t(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}a(g7t,"isNetworkError");f();var lWe=Ne(require("child_process"),1);var Cx=ii("AzureDeveloperCliCredential"),uWe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(Cx.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((o,s)=>{try{let l=["azd",...["auth","token","--output","json",...t.reduce((u,d)=>u.concat("--scope",d),[]),...n]].join(" ");lWe.default.exec(l,{cwd:uWe.getSafeWorkingDir(),timeout:r},(u,d,p)=>{o({stdout:d,stderr:p,error:u})})}catch(c){s(c)}})}},yO=class{static{a(this,"AzureDeveloperCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(lu(Cx,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=fc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=ec(this.tenantId,r,this.additionallyAllowedTenantIds);n&&lu(Cx,n);let o;return typeof e=="string"?o=[e]:o=e,Cx.getToken.info(`Using the scopes ${e}`),ns.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{o.forEach(u=>{NB(u,Cx)});let s=await uWe.getAzdAccessToken(o,n,this.timeout),c=s.stderr?.match("not logged in, run `azd login` to login")||s.stderr?.match("not logged in, run `azd auth login` to login");if(s.stderr?.match("azd:(.*)not found")||s.stderr?.startsWith("'azd' is not recognized")||s.error&&s.error.code==="ENOENT"){let u=new $r("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw Cx.getToken.info(bo(e,u)),u}if(c){let u=new $r("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw Cx.getToken.info(bo(e,u)),u}try{let u=JSON.parse(s.stdout);return Cx.getToken.info(Ml(e)),{token:u.token,expiresOnTimestamp:new Date(u.expiresOn).getTime(),tokenType:"Bearer"}}catch(u){throw s.stderr?new $r(s.stderr):u}}catch(s){let c=s.name==="CredentialUnavailableError"?s:new $r(s.message||"Unknown error while trying to retrieve the access token");throw Cx.getToken.info(bo(e,c)),c}})}};f();var dWe=Ne(require("child_process"),1);f();function jye(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(bo("",r)),r}}a(jye,"checkSubscription");var dh=ii("AzureCliCredential"),fWe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(dh.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let o=[],s=[];return e&&(o=["--tenant",e]),r&&(s=["--subscription",`"${r}"`]),new Promise((c,l)=>{try{let d=["az",...["account","get-access-token","--output","json","--resource",t,...o,...s]].join(" ");dWe.default.exec(d,{cwd:fWe.getSafeWorkingDir(),timeout:n},(p,m,h)=>{c({stdout:m,stderr:h,error:p})})}catch(u){l(u)}})}},CO=class{static{a(this,"AzureCliCredential")}tenantId;additionallyAllowedTenantIds;timeout;subscription;constructor(e){e?.tenantId&&(lu(dh,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(jye(dh,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=fc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=ec(this.tenantId,r,this.additionallyAllowedTenantIds);n&&lu(dh,n),this.subscription&&jye(dh,this.subscription);let o=typeof e=="string"?e:e[0];return dh.getToken.info(`Using the scope ${o}`),ns.withSpan(`${this.constructor.name}.getToken`,r,async()=>{try{NB(o,dh);let s=JK(o),c=await fWe.getAzureCliAccessToken(s,n,this.subscription,this.timeout),l=c.stderr?.match("(.*)az login --scope(.*)"),u=c.stderr?.match("(.*)az login(.*)")&&!l;if(c.stderr?.match("az:(.*)not found")||c.stderr?.startsWith("'az' is not recognized")){let p=new $r("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw dh.getToken.info(bo(e,p)),p}if(u){let p=new $r("Please run 'az login' from a command prompt to authenticate before using this credential.");throw dh.getToken.info(bo(e,p)),p}try{let p=c.stdout,m=this.parseRawResponse(p);return dh.getToken.info(Ml(e)),m}catch(p){throw c.stderr?new $r(c.stderr):p}}catch(s){let c=s.name==="CredentialUnavailableError"?s:new $r(s.message||"Unknown error while trying to retrieve the access token");throw dh.getToken.info(bo(e,c)),c}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,o=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(o))return dh.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:o,tokenType:"Bearer"};if(o=new Date(r.expiresOn).getTime(),isNaN(o))throw new $r(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:o,tokenType:"Bearer"}}};f();f();var pWe=Ne(require("node:child_process"),1),mWe={execFile(t,e,r){return new Promise((n,o)=>{let s=[...e],c=[t,...s].join(" ");pWe.default.exec(c,r,(l,u,d)=>{Buffer.isBuffer(u)&&(u=u.toString("utf8")),Buffer.isBuffer(d)&&(d=d.toString("utf8")),d||l?o(d?new Error(d):l):n(u)})})}};var vx=ii("AzurePowerShellCredential"),gWe=process.platform==="win32";function AWe(t){return gWe?`${t}.exe`:t}a(AWe,"formatCommand");async function hWe(t,e){let r=[];for(let n of t){let[o,...s]=n,c=await mWe.execFile(o,s,{encoding:"utf8",timeout:e});r.push(c)}return r}a(hWe,"runCommands");var yWe={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},Gye={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},A7t=a(t=>t.message.match(`(.*)${yWe.login}(.*)`),"isLoginError"),y7t=a(t=>t.message.match(yWe.installed),"isNotInstalledError"),Vye=[AWe("pwsh")];gWe&&Vye.push(AWe("powershell"));var vO=class{static{a(this,"AzurePowerShellCredential")}tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(lu(vx,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=fc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let o of[...Vye]){try{await hWe([[o,"/?"]],n)}catch{Vye.shift();continue}let c=(await hWe([[o,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return C7t(c)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return ns.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=ec(this.tenantId,r,this.additionallyAllowedTenantIds),o=typeof e=="string"?e:e[0];n&&lu(vx,n);try{NB(o,vx),vx.getToken.info(`Using the scope ${o}`);let s=JK(o),c=await this.getAzurePowerShellAccessToken(s,n,this.timeout);return vx.getToken.info(Ml(e)),{token:c.Token,expiresOnTimestamp:new Date(c.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(s){if(y7t(s)){let l=new $r(Gye.installed);throw vx.getToken.info(bo(o,l)),l}else if(A7t(s)){let l=new $r(Gye.login);throw vx.getToken.info(bo(o,l)),l}let c=new $r(`${s}. ${Gye.troubleshoot}`);throw vx.getToken.info(bo(o,c)),c}})}};async function C7t(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let o of r)try{let s=JSON.parse(o);if(s?.Token)return n=n.replace(o,""),n&&vx.getToken.warning(n),s}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}a(C7t,"parseJsonToken");f();var CWe=require("node:fs/promises");var v7t="common",x7t="aebc6443-996d-45c2-90f0-388ff96faa56",zye=ii("VisualStudioCodeCredential"),E7t={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function b7t(t){let e=E7t[t];if(e)throw new $r(e)}a(b7t,"checkUnsupportedTenant");var xO=class{static{a(this,"VisualStudioCodeCredential")}tenantId;additionallyAllowedTenantIds;msalClient;options;constructor(e){this.options=e||{},e&&e.tenantId?(lu(zye,e.tenantId),this.tenantId=e.tenantId):this.tenantId=v7t,this.additionallyAllowedTenantIds=fc(e?.additionallyAllowedTenants),b7t(this.tenantId)}async prepare(e){let r=ec(this.tenantId,this.options,this.additionallyAllowedTenantIds,zye)||this.tenantId;if(!O9e()||!CV)throw new $r("Visual Studio Code Authentication is not available. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");let n=await this.loadAuthRecord(CV,e);this.msalClient=qd(x7t,r,{...this.options,isVSCodeCredential:!0,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0},authenticationRecord:n})}preparePromise;prepareOnce(e){return this.preparePromise||(this.preparePromise=this.prepare(e)),this.preparePromise}async getToken(e,r){let n=uh(e);if(await this.prepareOnce(n),!this.msalClient)throw new $r("Visual Studio Code Authentication failed to initialize. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");return this.msalClient.getTokenByInteractiveRequest(n,r||{})}async loadAuthRecord(e,r){try{let n=await(0,CWe.readFile)(e,{encoding:"utf8"});return TAe(n)}catch(n){throw zye.getToken.info(bo(r,n)),new $r("Cannot load authentication record in Visual Studio Code. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.")}}};f();var ZK=ii("BrokerCredential"),eY=class{static{a(this,"BrokerCredential")}brokerMsalClient;brokerTenantId;brokerAdditionallyAllowedTenantIds;constructor(e){this.brokerTenantId=PB(ZK,e.tenantId),this.brokerAdditionallyAllowedTenantIds=fc(e?.additionallyAllowedTenants);let r={...e,tokenCredentialOptions:e,logger:ZK,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0}};this.brokerMsalClient=qd(d2,this.brokerTenantId,r)}async getToken(e,r={}){return ns.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=ec(this.brokerTenantId,n,this.brokerAdditionallyAllowedTenantIds,ZK);let o=uh(e);try{return this.brokerMsalClient.getBrokeredToken(o,!0,{...n,disableAutomaticAuthentication:!0})}catch(s){throw ZK.getToken.info(bo(o,s)),new $r("Failed to acquire token using broker authentication",{cause:s})}})}};function vWe(t={}){return new eY(t)}a(vWe,"createDefaultBrokerCredential");function Kye(t={}){return new xO(t)}a(Kye,"createDefaultVisualStudioCodeCredential");function Yye(t={}){t.retryOptions??={maxRetries:5,retryDelayInMs:800};let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=t?.managedIdentityResourceId,o=process.env.AZURE_FEDERATED_TOKEN_FILE,s=t?.tenantId??process.env.AZURE_TENANT_ID;if(n){let c={...t,resourceId:n};return new xT(c)}if(o&&r){let c={...t,tenantId:s};return new xT(r,c)}if(e){let c={...t,clientId:e};return new xT(c)}return new xT(t)}a(Yye,"createDefaultManagedIdentityCredential");function Jye(t){let e=t?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=t?.workloadIdentityClientId??e,n=process.env.AZURE_FEDERATED_TOKEN_FILE,o=t?.tenantId??process.env.AZURE_TENANT_ID;if(n&&r){let s={...t,tenantId:o,clientId:r,tokenFilePath:n};return new yx(s)}if(o){let s={...t,tenantId:o};return new yx(s)}return new yx(t)}a(Jye,"createDefaultWorkloadIdentityCredential");function Xye(t={}){return new yO(t)}a(Xye,"createDefaultAzureDeveloperCliCredential");function Zye(t={}){return new CO(t)}a(Zye,"createDefaultAzureCliCredential");function eCe(t={}){return new vO(t)}a(eCe,"createDefaultAzurePowershellCredential");function tCe(t={}){return new gO(t)}a(tCe,"createDefaultEnvironmentCredential");var rCe=ii("DefaultAzureCredential"),nCe=class{static{a(this,"UnavailableDefaultCredential")}credentialUnavailableErrorMessage;credentialName;constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return rCe.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},LB=class extends S6{static{a(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[Kye,Zye,eCe,Xye,vWe],o=[tCe,Jye,Yye],s=[],c="EnvironmentCredential, WorkloadIdentityCredential, ManagedIdentityCredential, VisualStudioCodeCredential, AzureCliCredential, AzurePowerShellCredential, AzureDeveloperCliCredential";if(r)switch(r){case"dev":s=n;break;case"prod":s=o;break;case"environmentcredential":s=[tCe];break;case"workloadidentitycredential":s=[Jye];break;case"managedidentitycredential":s=[Yye];break;case"visualstudiocodecredential":s=[Kye];break;case"azureclicredential":s=[Zye];break;case"azurepowershellcredential":s=[eCe];break;case"azuredeveloperclicredential":s=[Xye];break;default:{let u=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev' or any of these credentials - ${c}.`;throw rCe.warning(u),new Error(u)}}else s=[...o,...n];let l=s.map(u=>{try{return u(e)}catch(d){return rCe.warning(`Skipped ${u.name} because of an error creating the credential: ${d}`),new nCe(u.name,d.message)}});super(...l)}};f();var YRn=ii("InteractiveBrowserCredential");f();var skn=ii("DeviceCodeCredential");f();var I7t="AzurePipelinesCredential",gkn=ii(I7t);f();var wkn=ii("AuthorizationCodeCredential");f();var T7t="OnBehalfOfCredential",Lkn=ii(T7t);f();var bO=new ft("capiFetchUtilities");function w7t(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}a(w7t,"getIntegrationId");function fh(t){let e={...m0(t),"X-GitHub-Api-Version":OB},r=w7t(t.get(un));return r&&(e["Copilot-Integration-Id"]=r),e}a(fh,"getCapiHeaders");function iCe(t,e){return bO.debug(t,"Using CES proxy mode for msbench"),{...e,"ces-proxy-target":GS.api,"Copilot-Integration-Id":"autodev-test"}}a(iCe,"addMsBenchCesProxyHeaders");async function oCe(t,e){bO.debug(t,"Using HMAC authentication mode for msbench");let r=await k9e(process.env.HMAC_SECRET);return{...e,...r}}a(oCe,"addMsBenchHmacHeaders");function xWe(){return Lv()&&!!process.env.HMAC_SECRET}a(xWe,"isMsBenchHmacModeEnabled");function EO(){return Lv()&&!process.env.HMAC_SECRET}a(EO,"isMsBenchCesProxyModeEnabled");async function FB(t,e){return process.env.HMAC_SECRET?await oCe(t,e):iCe(t,e)}a(FB,"addMsBenchHeaders");function tY(t,e,...r){if(EO()){bO.debug(t,"Using CES proxy endpoint for URL generation");let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return Hm(t,e,"api",...r)}a(tY,"getCapiUrl");async function uR(t,e,r){r??=await t.get(cr).getToken();let n=tY(t,r,e),o=r.token;EO()&&(bO.debug(t,"Using CES proxy authentication token for fetchCapiUrl"),o=await bWe());let s={Authorization:`Bearer ${o}`,...fh(t)},c=xWe()?await oCe(t,s):EO()?iCe(t,s):s;return await t.get(Qr).fetch(new URL(n).href,{method:"GET",headers:c})}a(uR,"fetchCapiUrl");async function EWe(t,e,r){let n=await t.get(cr).getToken(),o=tY(t,n,e),s=n.token;EO()&&(bO.debug(t,"Using CES proxy authentication token for postCapiUrl"),s=await bWe());let c={Authorization:`Bearer ${s}`,...fh(t)},l=xWe()?await oCe(t,c):EO()?iCe(t,c):c;return await t.get(Qr).fetch(new URL(o).href,{method:"POST",headers:l,body:r})}a(EWe,"postCapiUrl");async function bWe(){let e=await new LB().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}a(bWe,"getMsBenchToken");f();var IWe=600*1e3,Wr={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",Gpt5:"gpt-5",CopilotBase:"copilot-base",BYOK:"byok",Unknown:"unknown"},iY=new Set([Wr.O1Ga,Wr.O3Mini,Wr.O1Mini,Wr.Gemini20Pro,Wr.Gemini20Flash]);function ph(t){switch(t){case"edits":case"user":case"inline":return[Wr.Gpt4o,Wr.Gpt4turbo,Wr.Gpt4,Wr.O1Mini,Wr.O1Ga,Wr.Claude35Sonnet,Wr.O3Mini,Wr.Gemini20Flash,Wr.Claude37Sonnet,Wr.Claude37SonnetThought,Wr.Gpt45,Wr.Gpt41,Wr.CopilotBase];case"meta":case"suggestions":case"synonyms":return[Wr.Gpt4oMini,Wr.Gpt4o,Wr.Gpt35turbo,Wr.Gpt41,Wr.CopilotBase];case"gitCommit":return[Wr.Gpt4oMini,Wr.Gpt4o,Wr.Gpt4,Wr.Gpt41,Wr.CopilotBase];case"codeReview":return[Wr.Gpt4,Wr.Gpt4o,Wr.Gpt41,Wr.CopilotBase];case"nesStubs":return[Wr.Gpt4oMini,Wr.Gpt4o,Wr.Gpt41,Wr.CopilotBase]}}a(ph,"getSupportedModelFamiliesForPrompt");var oY={textEmbedding3Small:"text-embedding-3-small"},_7t=E.Object({type:E.Union([E.Literal("chat"),E.Literal("embeddings"),E.Literal("completion")]),tokenizer:E.String(),family:E.String(),object:E.String(),supports:E.Optional(E.Object({tool_calls:E.Optional(E.Boolean()),parallel_tool_calls:E.Optional(E.Boolean()),streaming:E.Optional(E.Boolean()),vision:E.Optional(E.Boolean())})),limits:E.Optional(E.Object({max_inputs:E.Optional(E.Number()),max_prompt_tokens:E.Optional(E.Number()),max_output_tokens:E.Optional(E.Number()),max_context_window_tokens:E.Optional(E.Number())}))}),S7t=E.Object({id:E.String(),name:E.String(),version:E.String(),model_picker_enabled:E.Boolean(),is_chat_default:E.Optional(E.Boolean()),is_chat_fallback:E.Optional(E.Boolean()),capabilities:_7t,billing:E.Optional(E.Object({is_premium:E.Optional(E.Boolean()),multiplier:E.Optional(E.Number())})),object:E.String(),preview:E.Optional(E.Boolean()),isExperimental:E.Optional(E.Boolean()),policy:E.Optional(E.Object({state:E.String(),terms:E.String()}))}),TWe=E.Object({data:E.Array(S7t)}),rd=class{static{a(this,"ModelMetadataProvider")}},rY=class extends rd{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;this.allowTokenRefresh=a(()=>{this._lastFetchTime=0},"allowTokenRefresh");r.get(cr).onDidResetToken(this.allowTokenRefresh)}static{a(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await uR(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){pn.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw pn.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new lC(r)}await this.processModels(r)}async fetchModel(r){let n=await uR(this.ctx,`/models/${r}`);if(!n.ok){pn.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await EWe(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){pn.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>IWe}},nY=class extends rd{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{a(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Lt),n=await r.fetchTokenAndUpdateExPValuesAndAssignments(),o=r.ideChatExpModelIds(n),s=[];if(o){let c=o?.split(",");for(let l of c){let u=await this.fetchModel(l.trim());u!==void 0&&(u.isExperimental=!0,s.push(u))}}return s.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[s,c]=n;if(Date.now()-c<IWe)return s}let o=await this.delegate.fetchModel(r);if(o)return this._exp_models_cache.set(r,[o,Date.now()]),o}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function wWe(t){let e=Bi(t,qt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}a(wWe,"getUserSelectedModelConfiguration");f();f();f();var QB=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{a(this,"CopilotPromptLoadFailure")}};f();var _We=Ne(require("node:fs/promises")),sY=Ne(require("node:path"));async function aY(t){return await _We.readFile(sCe(t))}a(aY,"readFile");function sCe(t){return sY.default.resolve(sY.default.extname(__filename)!==".ts"?__dirname:sY.default.resolve(__dirname,"../../dist"),t)}a(sCe,"locateFile");var UB=Ne(qWe());var pY=new Map;function Oi(t="o200k_base"){let e=pY.get(t);return e!==void 0||(e=pY.get("o200k_base"),e!==void 0)?e:new bT}a(Oi,"getTokenizer");async function $We(t="o200k_base"){return await dR,Oi(t)}a($We,"getTokenizerAsync");async function W7t(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await aY(t),r=new Map,n=[];for(let o=0;o<e.length;o++){if(e[o]!==255||n.length===0){n.push(e[o]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}a(W7t,"parseTikTokenNoIndex");var ACe=class t{constructor(e){this._tokenizer=e}static{a(this,"TTokenizer")}static async create(e){try{let r=(0,UB.createTokenizer)(await W7t(`resources/${e}.tiktoken.noindex`),(0,UB.getSpecialTokensByEncoder)(e),(0,UB.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new QB("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,o=1,s=Math.min(e.length,r*n),c=e.slice(-s),l=this.tokenize(c);for(;l.length<r+2&&s<e.length;)s=Math.min(e.length,s+r*o),c=e.slice(-s),l=this.tokenize(c);return l.length<r?{text:e,tokens:l}:(l=l.slice(-r),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,o=1,s=Math.min(e.length,r*n),c=e.slice(0,s),l=this.tokenize(c);for(;l.length<r+2&&s<e.length;)s=Math.min(e.length,s+r*o),c=e.slice(0,s),l=this.tokenize(c);return l.length<r?{text:e,tokens:l}:(l=l.slice(0,r),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let o=n.indexOf(`
`);return n.substring(o+1)}},yCe=class{constructor(){this.hash=a(e=>{let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);r=(r<<5)-r+o,r&=r&65535}return r},"hash")}static{a(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let o=n.indexOf(`
`);return n.substring(o+1)}},j7t={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},gCe=4,bT=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{a(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let o=0;o<r.length;o++)n=n*Math.pow(10,gCe)+r.charCodeAt(o);return n})}detokenize(e){return e.map(r=>{let n=[],o=r.toString();for(;o.length>0;){let s=o.slice(-gCe),c=String.fromCharCode(parseInt(s));n.unshift(c),o=o.slice(0,-gCe)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?j7t[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(o,s)=>s)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(o,s)=>s)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let o=n.indexOf(`
`);return n.substring(o+1)}};async function HWe(t){try{let e=await ACe.create(t);pY.set(t,e)}catch{}}a(HWe,"setTokenizer");var dR=(async()=>{pY.set("mock",new yCe),await Promise.all([HWe("cl100k_base"),HWe("o200k_base")])})();f();f();var G7t=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},jWe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},CCe,mY,GWe,vCe=class extends Nn{static{a(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),CCe.add(this),mY.set(this,void 0),G7t(this,mY,e,"f"),this.error=r}Errors(){return new DI(jWe(this,CCe,"m",GWe).call(this))}};mY=new WeakMap,CCe=new WeakSet,GWe=a(function*(){this.error&&(yield this.error),yield*jWe(this,mY,"f")},"_AssertError_Iterator");function WWe(t,e,r){if(!Ni(t,e,r))throw new vCe(AC(t,e,r))}a(WWe,"AssertValue");function hY(...t){return t.length===3?WWe(t[0],t[1],t[2]):WWe(t[0],[],t[1])}a(hY,"Assert");f();f();f();function V7t(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=ko(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=ko(t[r]);return e}a(V7t,"FromObject");function z7t(t){return t.map(e=>ko(e))}a(z7t,"FromArray");function K7t(t){return t.slice()}a(K7t,"FromTypedArray");function Y7t(t){return new Map(ko([...t.entries()]))}a(Y7t,"FromMap");function J7t(t){return new Set(ko([...t.entries()]))}a(J7t,"FromSet");function X7t(t){return new Date(t.toISOString())}a(X7t,"FromDate");function ko(t){if(Bn(t))return z7t(t);if(hf(t))return X7t(t);if(Wm(t))return K7t(t);if(pNe(t))return Y7t(t);if(mNe(t))return J7t(t);if(Ri(t))return V7t(t);if(g0(t))return t;throw new Error("ValueClone: Unable to clone value")}a(ko,"Clone");var U0=class extends Nn{static{a(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function Po(t){return bI(t)?t():ko(t)}a(Po,"FromDefault");function Z7t(t,e){return Dn(t,"default")?Po(t.default):{}}a(Z7t,"FromAny");function eQt(t,e){return{}}a(eQt,"FromArgument");function tQt(t,e){if(t.uniqueItems===!0&&!Dn(t,"default"))throw new U0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!Dn(t,"default"))throw new U0(t,"Array with the contains constraint requires a default value");return"default"in t?Po(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>Tp(t.items,e)):[]}a(tQt,"FromArray");function rQt(t,e){return Dn(t,"default")?Po(t.default):async function*(){}()}a(rQt,"FromAsyncIterator");function nQt(t,e){return Dn(t,"default")?Po(t.default):BigInt(0)}a(nQt,"FromBigInt");function iQt(t,e){return Dn(t,"default")?Po(t.default):!1}a(iQt,"FromBoolean");function oQt(t,e){if(Dn(t,"default"))return Po(t.default);{let r=Tp(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,o]of Object.entries(r)){let s=this;s[n]=o}}}:class{}}}a(oQt,"FromConstructor");function sQt(t,e){return Dn(t,"default")?Po(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}a(sQt,"FromDate");function aQt(t,e){return Dn(t,"default")?Po(t.default):()=>Tp(t.returns,e)}a(aQt,"FromFunction");function cQt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return Tp(n,[...e,...r])}a(cQt,"FromImport");function lQt(t,e){return Dn(t,"default")?Po(t.default):t.minimum!==void 0?t.minimum:0}a(lQt,"FromInteger");function uQt(t,e){if(Dn(t,"default"))return Po(t.default);{let r=t.allOf.reduce((n,o)=>{let s=Tp(o,e);return typeof s=="object"?{...n,...s}:s},{});if(!Ni(t,e,r))throw new U0(t,"Intersect produced invalid value. Consider using a default value.");return r}}a(uQt,"FromIntersect");function dQt(t,e){return Dn(t,"default")?Po(t.default):function*(){}()}a(dQt,"FromIterator");function fQt(t,e){return Dn(t,"default")?Po(t.default):t.const}a(fQt,"FromLiteral");function pQt(t,e){if(Dn(t,"default"))return Po(t.default);throw new U0(t,"Never types cannot be created. Consider using a default value.")}a(pQt,"FromNever");function mQt(t,e){if(Dn(t,"default"))return Po(t.default);throw new U0(t,"Not types must have a default value")}a(mQt,"FromNot");function hQt(t,e){return Dn(t,"default")?Po(t.default):null}a(hQt,"FromNull");function gQt(t,e){return Dn(t,"default")?Po(t.default):t.minimum!==void 0?t.minimum:0}a(gQt,"FromNumber");function AQt(t,e){if(Dn(t,"default"))return Po(t.default);{let r=new Set(t.required),n={};for(let[o,s]of Object.entries(t.properties))r.has(o)&&(n[o]=Tp(s,e));return n}}a(AQt,"FromObject");function yQt(t,e){return Dn(t,"default")?Po(t.default):Promise.resolve(Tp(t.item,e))}a(yQt,"FromPromise");function CQt(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(Dn(t,"default"))return Po(t.default);if(r===mC||r===pC)return{};{let o=r.slice(1,r.length-1).split("|"),s={};for(let c of o)s[c]=Tp(n,e);return s}}a(CQt,"FromRecord");function vQt(t,e){return Dn(t,"default")?Po(t.default):Tp(So(t,e),e)}a(vQt,"FromRef");function xQt(t,e){if(Dn(t,"default"))return Po(t.default);throw new U0(t,"RegExp types cannot be created. Consider using a default value.")}a(xQt,"FromRegExp");function EQt(t,e){if(t.pattern!==void 0){if(Dn(t,"default"))return Po(t.default);throw new U0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(Dn(t,"default"))return Po(t.default);throw new U0(t,"String types with formats must specify a default value")}else return Dn(t,"default")?Po(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}a(EQt,"FromString");function bQt(t,e){return Dn(t,"default")?Po(t.default):"value"in t?Symbol.for(t.value):Symbol()}a(bQt,"FromSymbol");function IQt(t,e){if(Dn(t,"default"))return Po(t.default);if(!Jj(t))throw new U0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return X4(t)[0]}a(IQt,"FromTemplateLiteral");function TQt(t,e){if(VWe++>BQt)throw new U0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return Dn(t,"default")?Po(t.default):Tp(So(t,e),e)}a(TQt,"FromThis");function wQt(t,e){return Dn(t,"default")?Po(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>Tp(t.items[n],e))}a(wQt,"FromTuple");function _Qt(t,e){if(Dn(t,"default"))return Po(t.default)}a(_Qt,"FromUndefined");function SQt(t,e){if(Dn(t,"default"))return Po(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return Tp(t.anyOf[0],e)}a(SQt,"FromUnion");function RQt(t,e){return Dn(t,"default")?Po(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}a(RQt,"FromUint8Array");function kQt(t,e){return Dn(t,"default")?Po(t.default):{}}a(kQt,"FromUnknown");function PQt(t,e){if(Dn(t,"default"))return Po(t.default)}a(PQt,"FromVoid");function DQt(t,e){if(Dn(t,"default"))return Po(t.default);throw new Error("User defined types must specify a default value")}a(DQt,"FromKind");function Tp(t,e){let r=tu(t,e),n=t;switch(n[st]){case"Any":return Z7t(n,r);case"Argument":return eQt(n,r);case"Array":return tQt(n,r);case"AsyncIterator":return rQt(n,r);case"BigInt":return nQt(n,r);case"Boolean":return iQt(n,r);case"Constructor":return oQt(n,r);case"Date":return sQt(n,r);case"Function":return aQt(n,r);case"Import":return cQt(n,r);case"Integer":return lQt(n,r);case"Intersect":return uQt(n,r);case"Iterator":return dQt(n,r);case"Literal":return fQt(n,r);case"Never":return pQt(n,r);case"Not":return mQt(n,r);case"Null":return hQt(n,r);case"Number":return gQt(n,r);case"Object":return AQt(n,r);case"Promise":return yQt(n,r);case"Record":return CQt(n,r);case"Ref":return vQt(n,r);case"RegExp":return xQt(n,r);case"String":return EQt(n,r);case"Symbol":return bQt(n,r);case"TemplateLiteral":return IQt(n,r);case"This":return TQt(n,r);case"Tuple":return wQt(n,r);case"Undefined":return _Qt(n,r);case"Union":return SQt(n,r);case"Uint8Array":return RQt(n,r);case"Unknown":return kQt(n,r);case"Void":return PQt(n,r);default:if(!gf.Has(n[st]))throw new U0(n,"Unknown type");return DQt(n,r)}}a(Tp,"Visit");var BQt=512,VWe=0;function mh(...t){return VWe=0,t.length===2?Tp(t[0],t[1]):Tp(t[0],[])}a(mh,"Create");var gY=class extends Nn{static{a(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function NQt(t,e,r){if(t[st]==="Object"&&typeof r=="object"&&!Uv(r)){let n=t,o=Object.getOwnPropertyNames(r),s=Object.entries(n.properties),[c,l]=[1/s.length,s.length];return s.reduce((u,[d,p])=>{let m=p[st]==="Literal"&&p.const===r[d]?l:0,h=Ni(p,e,r[d])?c:0,g=o.includes(d)?c:0;return u+(m+h+g)},0)}else return Ni(t,e,r)?1:0}a(NQt,"ScoreUnion");function MQt(t,e,r){let n=t.anyOf.map(c=>So(c,e)),[o,s]=[n[0],0];for(let c of n){let l=NQt(c,e,r);l>s&&(o=c,s=l)}return o}a(MQt,"SelectUnion");function LQt(t,e,r){if("default"in t)return typeof r=="function"?t.default:ko(t.default);{let n=MQt(t,e,r);return TO(n,e,r)}}a(LQt,"CastUnion");function FQt(t,e,r){return Ni(t,e,r)?ko(r):mh(t,e)}a(FQt,"DefaultClone");function OQt(t,e,r){return Ni(t,e,r)?r:mh(t,e)}a(OQt,"Default");function QQt(t,e,r){if(Ni(t,e,r))return ko(r);let n=Bn(r)?ko(r):mh(t,e),o=dn(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,c=(dn(t.maxItems)&&o.length>t.maxItems?o.slice(0,t.maxItems):o).map(u=>IA(t.items,e,u));if(t.uniqueItems!==!0)return c;let l=[...new Set(c)];if(!Ni(t,e,l))throw new gY(t,"Array cast produced invalid data due to uniqueItems constraint");return l}a(QQt,"FromArray");function UQt(t,e,r){if(Ni(t,e,r))return mh(t,e);let n=new Set(t.returns.required||[]),o=a(function(){},"result");for(let[s,c]of Object.entries(t.returns.properties))!n.has(s)&&r.prototype[s]===void 0||(o.prototype[s]=IA(c,e,r.prototype[s]));return o}a(UQt,"FromConstructor");function qQt(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return IA(o,[...e,...n],r)}a(qQt,"FromImport");function HQt(t,e,r){let n=mh(t,e),o=Ri(n)&&Ri(r)?{...n,...r}:r;return Ni(t,e,o)?o:mh(t,e)}a(HQt,"FromIntersect");function $Qt(t,e,r){throw new gY(t,"Never types cannot be cast")}a($Qt,"FromNever");function WQt(t,e,r){if(Ni(t,e,r))return r;if(r===null||typeof r!="object")return mh(t,e);let n=new Set(t.required||[]),o={};for(let[s,c]of Object.entries(t.properties))!n.has(s)&&r[s]===void 0||(o[s]=IA(c,e,r[s]));if(typeof t.additionalProperties=="object"){let s=Object.getOwnPropertyNames(t.properties);for(let c of Object.getOwnPropertyNames(r))s.includes(c)||(o[c]=IA(t.additionalProperties,e,r[c]))}return o}a(WQt,"FromObject");function jQt(t,e,r){if(Ni(t,e,r))return ko(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return mh(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[n],s={};for(let[c,l]of Object.entries(r))s[c]=IA(o,e,l);return s}a(jQt,"FromRecord");function GQt(t,e,r){return IA(So(t,e),e,r)}a(GQt,"FromRef");function VQt(t,e,r){return IA(So(t,e),e,r)}a(VQt,"FromThis");function zQt(t,e,r){return Ni(t,e,r)?ko(r):Bn(r)?t.items===void 0?[]:t.items.map((n,o)=>IA(n,e,r[o])):mh(t,e)}a(zQt,"FromTuple");function KQt(t,e,r){return Ni(t,e,r)?ko(r):LQt(t,e,r)}a(KQt,"FromUnion");function IA(t,e,r){let n=vo(t.$id)?tu(t,e):e,o=t;switch(t[st]){case"Array":return QQt(o,n,r);case"Constructor":return UQt(o,n,r);case"Import":return qQt(o,n,r);case"Intersect":return HQt(o,n,r);case"Never":return $Qt(o,n,r);case"Object":return WQt(o,n,r);case"Record":return jQt(o,n,r);case"Ref":return GQt(o,n,r);case"This":return VQt(o,n,r);case"Tuple":return zQt(o,n,r);case"Union":return KQt(o,n,r);case"Date":case"Symbol":case"Uint8Array":return FQt(t,e,r);default:return OQt(o,n,r)}}a(IA,"Visit");function TO(...t){return t.length===3?IA(t[0],t[1],t[2]):IA(t[0],[],t[1])}a(TO,"Cast");f();function YQt(t){return TI(t)&&t[st]!=="Unsafe"}a(YQt,"IsCheckable");function JQt(t,e,r){return Bn(r)?r.map(n=>wp(t.items,e,n)):r}a(JQt,"FromArray");function XQt(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return wp(o,[...e,...n],r)}a(XQt,"FromImport");function ZQt(t,e,r){let n=t.unevaluatedProperties,s=t.allOf.map(l=>wp(l,e,ko(r))).reduce((l,u)=>Ri(u)?{...l,...u}:u,{});if(!Ri(r)||!Ri(s)||!TI(n))return s;let c=lp(t);for(let l of Object.getOwnPropertyNames(r))c.includes(l)||Ni(n,e,r[l])&&(s[l]=wp(n,e,r[l]));return s}a(ZQt,"FromIntersect");function eUt(t,e,r){if(!Ri(r)||Bn(r))return r;let n=t.additionalProperties;for(let o of Object.getOwnPropertyNames(r)){if(Dn(t.properties,o)){r[o]=wp(t.properties[o],e,r[o]);continue}if(TI(n)&&Ni(n,e,r[o])){r[o]=wp(n,e,r[o]);continue}delete r[o]}return r}a(eUt,"FromObject");function tUt(t,e,r){if(!Ri(r))return r;let n=t.additionalProperties,o=Object.getOwnPropertyNames(r),[s,c]=Object.entries(t.patternProperties)[0],l=new RegExp(s);for(let u of o){if(l.test(u)){r[u]=wp(c,e,r[u]);continue}if(TI(n)&&Ni(n,e,r[u])){r[u]=wp(n,e,r[u]);continue}delete r[u]}return r}a(tUt,"FromRecord");function rUt(t,e,r){return wp(So(t,e),e,r)}a(rUt,"FromRef");function nUt(t,e,r){return wp(So(t,e),e,r)}a(nUt,"FromThis");function iUt(t,e,r){if(!Bn(r))return r;if(ea(t.items))return[];let n=Math.min(r.length,t.items.length);for(let o=0;o<n;o++)r[o]=wp(t.items[o],e,r[o]);return r.length>n?r.slice(0,n):r}a(iUt,"FromTuple");function oUt(t,e,r){for(let n of t.anyOf)if(YQt(n)&&Ni(n,e,r))return wp(n,e,r);return r}a(oUt,"FromUnion");function wp(t,e,r){let n=vo(t.$id)?tu(t,e):e,o=t;switch(o[st]){case"Array":return JQt(o,n,r);case"Import":return XQt(o,n,r);case"Intersect":return ZQt(o,n,r);case"Object":return eUt(o,n,r);case"Record":return tUt(o,n,r);case"Ref":return rUt(o,n,r);case"This":return nUt(o,n,r);case"Tuple":return iUt(o,n,r);case"Union":return oUt(o,n,r);default:return r}}a(wp,"Visit");function AY(...t){return t.length===3?wp(t[0],t[1],t[2]):wp(t[0],[],t[1])}a(AY,"Clean");f();function yY(t){return vo(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}a(yY,"IsStringNumeric");function sUt(t){return Hu(t)||fC(t)||dn(t)}a(sUt,"IsValueToString");function wO(t){return t===!0||dn(t)&&t===1||Hu(t)&&t===BigInt("1")||vo(t)&&(t.toLowerCase()==="true"||t==="1")}a(wO,"IsValueTrue");function _O(t){return t===!1||dn(t)&&(t===0||Object.is(t,-0))||Hu(t)&&t===BigInt("0")||vo(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}a(_O,"IsValueFalse");function aUt(t){return vo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}a(aUt,"IsTimeStringWithTimeZone");function cUt(t){return vo(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}a(cUt,"IsTimeStringWithoutTimeZone");function lUt(t){return vo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}a(lUt,"IsDateTimeStringWithTimeZone");function uUt(t){return vo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}a(uUt,"IsDateTimeStringWithoutTimeZone");function dUt(t){return vo(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}a(dUt,"IsDateString");function fUt(t,e){let r=KWe(t);return r===e?r:t}a(fUt,"TryConvertLiteralString");function pUt(t,e){let r=YWe(t);return r===e?r:t}a(pUt,"TryConvertLiteralNumber");function mUt(t,e){let r=zWe(t);return r===e?r:t}a(mUt,"TryConvertLiteralBoolean");function hUt(t,e){return vo(t.const)?fUt(e,t.const):dn(t.const)?pUt(e,t.const):fC(t.const)?mUt(e,t.const):e}a(hUt,"TryConvertLiteral");function zWe(t){return wO(t)?!0:_O(t)?!1:t}a(zWe,"TryConvertBoolean");function gUt(t){let e=a(r=>r.split(".")[0],"truncateInteger");return yY(t)?BigInt(e(t)):dn(t)?BigInt(Math.trunc(t)):_O(t)?BigInt(0):wO(t)?BigInt(1):t}a(gUt,"TryConvertBigInt");function KWe(t){return qv(t)&&t.description!==void 0?t.description.toString():sUt(t)?t.toString():t}a(KWe,"TryConvertString");function YWe(t){return yY(t)?parseFloat(t):wO(t)?1:_O(t)?0:t}a(YWe,"TryConvertNumber");function AUt(t){return yY(t)?parseInt(t):dn(t)?Math.trunc(t):wO(t)?1:_O(t)?0:t}a(AUt,"TryConvertInteger");function yUt(t){return vo(t)&&t.toLowerCase()==="null"?null:t}a(yUt,"TryConvertNull");function CUt(t){return vo(t)&&t==="undefined"?void 0:t}a(CUt,"TryConvertUndefined");function vUt(t){return hf(t)?t:dn(t)?new Date(t):wO(t)?new Date(1):_O(t)?new Date(0):yY(t)?new Date(parseInt(t)):cUt(t)?new Date(`1970-01-01T${t}.000Z`):aUt(t)?new Date(`1970-01-01T${t}`):uUt(t)?new Date(`${t}.000Z`):lUt(t)?new Date(t):dUt(t)?new Date(`${t}T00:00:00.000Z`):t}a(vUt,"TryConvertDate");function xUt(t,e,r){return(Bn(r)?r:[r]).map(o=>TA(t.items,e,o))}a(xUt,"FromArray");function EUt(t,e,r){return gUt(r)}a(EUt,"FromBigInt");function bUt(t,e,r){return zWe(r)}a(bUt,"FromBoolean");function IUt(t,e,r){return vUt(r)}a(IUt,"FromDate");function TUt(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return TA(o,[...e,...n],r)}a(TUt,"FromImport");function wUt(t,e,r){return AUt(r)}a(wUt,"FromInteger");function _Ut(t,e,r){return t.allOf.reduce((n,o)=>TA(o,e,n),r)}a(_Ut,"FromIntersect");function SUt(t,e,r){return hUt(t,r)}a(SUt,"FromLiteral");function RUt(t,e,r){return yUt(r)}a(RUt,"FromNull");function kUt(t,e,r){return YWe(r)}a(kUt,"FromNumber");function PUt(t,e,r){if(!Ri(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))Dn(r,n)&&(r[n]=TA(t.properties[n],e,r[n]));return r}a(PUt,"FromObject");function DUt(t,e,r){if(!Ri(r))return r;let o=Object.getOwnPropertyNames(t.patternProperties)[0],s=t.patternProperties[o];for(let[c,l]of Object.entries(r))r[c]=TA(s,e,l);return r}a(DUt,"FromRecord");function BUt(t,e,r){return TA(So(t,e),e,r)}a(BUt,"FromRef");function NUt(t,e,r){return KWe(r)}a(NUt,"FromString");function MUt(t,e,r){return vo(r)||dn(r)?Symbol(r):r}a(MUt,"FromSymbol");function LUt(t,e,r){return TA(So(t,e),e,r)}a(LUt,"FromThis");function FUt(t,e,r){return Bn(r)&&!ea(t.items)?r.map((o,s)=>s<t.items.length?TA(t.items[s],e,o):o):r}a(FUt,"FromTuple");function OUt(t,e,r){return CUt(r)}a(OUt,"FromUndefined");function QUt(t,e,r){for(let n of t.anyOf){let o=TA(n,e,ko(r));if(Ni(n,e,o))return o}return r}a(QUt,"FromUnion");function TA(t,e,r){let n=tu(t,e),o=t;switch(t[st]){case"Array":return xUt(o,n,r);case"BigInt":return EUt(o,n,r);case"Boolean":return bUt(o,n,r);case"Date":return IUt(o,n,r);case"Import":return TUt(o,n,r);case"Integer":return wUt(o,n,r);case"Intersect":return _Ut(o,n,r);case"Literal":return SUt(o,n,r);case"Null":return RUt(o,n,r);case"Number":return kUt(o,n,r);case"Object":return PUt(o,n,r);case"Record":return DUt(o,n,r);case"Ref":return BUt(o,n,r);case"String":return NUt(o,n,r);case"Symbol":return MUt(o,n,r);case"This":return LUt(o,n,r);case"Tuple":return FUt(o,n,r);case"Undefined":return OUt(o,n,r);case"Union":return QUt(o,n,r);default:return r}}a(TA,"Visit");function CY(...t){return t.length===3?TA(t[0],t[1],t[2]):TA(t[0],[],t[1])}a(CY,"Convert");f();function JWe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!Ni(e,r,n))throw new dD(e,n,AC(e,r,n).First());return Yv(e,r)?fD(e,r,n):n}a(JWe,"Decode");f();function xx(t,e){let r=Dn(t,"default")?t.default:void 0,n=bI(r)?r():ko(r);return ea(e)?n:Ri(e)&&Ri(n)?Object.assign(n,e):e}a(xx,"ValueOrDefault");function xCe(t){return TI(t)&&"default"in t}a(xCe,"HasDefaultProperty");function UUt(t,e,r){if(Bn(r)){for(let o=0;o<r.length;o++)r[o]=Sf(t.items,e,r[o]);return r}let n=xx(t,r);if(!Bn(n))return n;for(let o=0;o<n.length;o++)n[o]=Sf(t.items,e,n[o]);return n}a(UUt,"FromArray");function qUt(t,e,r){return hf(r)?r:xx(t,r)}a(qUt,"FromDate");function HUt(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return Sf(o,[...e,...n],r)}a(HUt,"FromImport");function $Ut(t,e,r){let n=xx(t,r);return t.allOf.reduce((o,s)=>{let c=Sf(s,e,n);return Ri(c)?{...o,...c}:c},{})}a($Ut,"FromIntersect");function WUt(t,e,r){let n=xx(t,r);if(!Ri(n))return n;let o=Object.getOwnPropertyNames(t.properties);for(let s of o){let c=Sf(t.properties[s],e,n[s]);ea(c)||(n[s]=Sf(t.properties[s],e,n[s]))}if(!xCe(t.additionalProperties))return n;for(let s of Object.getOwnPropertyNames(n))o.includes(s)||(n[s]=Sf(t.additionalProperties,e,n[s]));return n}a(WUt,"FromObject");function jUt(t,e,r){let n=xx(t,r);if(!Ri(n))return n;let o=t.additionalProperties,[s,c]=Object.entries(t.patternProperties)[0],l=new RegExp(s);for(let u of Object.getOwnPropertyNames(n))l.test(u)&&xCe(c)&&(n[u]=Sf(c,e,n[u]));if(!xCe(o))return n;for(let u of Object.getOwnPropertyNames(n))l.test(u)||(n[u]=Sf(o,e,n[u]));return n}a(jUt,"FromRecord");function GUt(t,e,r){return Sf(So(t,e),e,xx(t,r))}a(GUt,"FromRef");function VUt(t,e,r){return Sf(So(t,e),e,r)}a(VUt,"FromThis");function zUt(t,e,r){let n=xx(t,r);if(!Bn(n)||ea(t.items))return n;let[o,s]=[t.items,Math.max(t.items.length,n.length)];for(let c=0;c<s;c++)c<o.length&&(n[c]=Sf(o[c],e,n[c]));return n}a(zUt,"FromTuple");function KUt(t,e,r){let n=xx(t,r);for(let o of t.anyOf){let s=Sf(o,e,ko(n));if(Ni(o,e,s))return s}return n}a(KUt,"FromUnion");function Sf(t,e,r){let n=tu(t,e),o=t;switch(o[st]){case"Array":return UUt(o,n,r);case"Date":return qUt(o,n,r);case"Import":return HUt(o,n,r);case"Intersect":return $Ut(o,n,r);case"Object":return WUt(o,n,r);case"Record":return jUt(o,n,r);case"Ref":return GUt(o,n,r);case"This":return VUt(o,n,r);case"Tuple":return zUt(o,n,r);case"Union":return KUt(o,n,r);default:return xx(o,r)}}a(Sf,"Visit");function vY(...t){return t.length===3?Sf(t[0],t[1],t[2]):Sf(t[0],[],t[1])}a(vY,"Default");f();f();var wA={};Sa(wA,{Delete:()=>JUt,Format:()=>SO,Get:()=>ZUt,Has:()=>XUt,Set:()=>YUt,ValuePointerRootDeleteError:()=>EY,ValuePointerRootSetError:()=>xY});f();var xY=class extends Nn{static{a(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},EY=class extends Nn{static{a(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function XWe(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}a(XWe,"Escape");function*SO(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield XWe(t.slice(e,r))),e=n+1):r=n;yield XWe(t.slice(e))}a(SO,"Format");function YUt(t,e,r){if(e==="")throw new xY(t,e,r);let[n,o,s]=[null,t,""];for(let c of SO(e))o[c]===void 0&&(o[c]={}),n=o,o=o[c],s=c;n[s]=r}a(YUt,"Set");function JUt(t,e){if(e==="")throw new EY(t,e);let[r,n,o]=[null,t,""];for(let s of SO(e)){if(n[s]===void 0||n[s]===null)return;r=n,n=n[s],o=s}if(Array.isArray(r)){let s=parseInt(o);r.splice(s,1)}else delete r[o]}a(JUt,"Delete");function XUt(t,e){if(e==="")return!0;let[r,n,o]=[null,t,""];for(let s of SO(e)){if(n[s]===void 0)return!1;r=n,n=n[s],o=s}return Object.getOwnPropertyNames(r).includes(o)}a(XUt,"Has");function ZUt(t,e){if(e==="")return t;let r=t;for(let n of SO(e)){if(r[n]===void 0)return;r=r[n]}return r}a(ZUt,"Get");f();function eqt(t,e){if(!Ri(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(o=>fR(t[o],e[o]))}a(eqt,"ObjectType");function tqt(t,e){return hf(e)&&t.getTime()===e.getTime()}a(tqt,"DateType");function rqt(t,e){return!Bn(e)||t.length!==e.length?!1:t.every((r,n)=>fR(r,e[n]))}a(rqt,"ArrayType");function nqt(t,e){return!Wm(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>fR(r,e[n]))}a(nqt,"TypedArrayType");function iqt(t,e){return t===e}a(iqt,"ValueType");function fR(t,e){if(hf(t))return tqt(t,e);if(Wm(t))return nqt(t,e);if(Bn(t))return rqt(t,e);if(Ri(t))return eqt(t,e);if(g0(t))return iqt(t,e);throw new Error("ValueEquals: Unable to compare value")}a(fR,"Equal");var oqt=Ho({type:lo("insert"),path:Af(),value:cA()}),sqt=Ho({type:lo("update"),path:Af(),value:cA()}),aqt=Ho({type:lo("delete"),path:Af()}),eje=qo([oqt,sqt,aqt]),bY=class extends Nn{static{a(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function IY(t,e){return{type:"update",path:t,value:e}}a(IY,"CreateUpdate");function tje(t,e){return{type:"insert",path:t,value:e}}a(tje,"CreateInsert");function rje(t){return{type:"delete",path:t}}a(rje,"CreateDelete");function ZWe(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new bY(t,"Cannot diff objects with symbols")}a(ZWe,"AssertDiffable");function*cqt(t,e,r){if(ZWe(e),ZWe(r),!Cpe(r))return yield IY(t,r);let n=globalThis.Object.getOwnPropertyNames(e),o=globalThis.Object.getOwnPropertyNames(r);for(let s of o)Dn(e,s)||(yield tje(`${t}/${s}`,r[s]));for(let s of n)Dn(r,s)&&(fR(e,r)||(yield*TY(`${t}/${s}`,e[s],r[s])));for(let s of n)Dn(r,s)||(yield rje(`${t}/${s}`))}a(cqt,"ObjectType");function*lqt(t,e,r){if(!Bn(r))return yield IY(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*TY(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield tje(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield rje(`${t}/${n}`))}a(lqt,"ArrayType");function*uqt(t,e,r){if(!Wm(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield IY(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*TY(`${t}/${n}`,e[n],r[n])}a(uqt,"TypedArrayType");function*dqt(t,e,r){e!==r&&(yield IY(t,r))}a(dqt,"ValueType");function*TY(t,e,r){if(Cpe(e))return yield*cqt(t,e,r);if(Bn(e))return yield*lqt(t,e,r);if(Wm(e))return yield*uqt(t,e,r);if(g0(e))return yield*dqt(t,e,r);throw new bY(e,"Unable to diff value")}a(TY,"Visit");function nje(t,e){return[...TY("",t,e)]}a(nje,"Diff");function fqt(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}a(fqt,"IsRootUpdate");function pqt(t){return t.length===0}a(pqt,"IsIdentity");function ije(t,e){if(fqt(e))return ko(e[0].value);if(pqt(e))return ko(t);let r=ko(t);for(let n of e)switch(n.type){case"insert":{wA.Set(r,n.path,n.value);break}case"update":{wA.Set(r,n.path,n.value);break}case"delete":{wA.Delete(r,n.path);break}}return r}a(ije,"Patch");f();function oje(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],o=Yv(e,r)?mD(e,r,n):n;if(!Ni(e,r,o))throw new pD(e,o,AC(e,r,o).First());return o}a(oje,"Encode");f();function wY(t){return Ri(t)&&!Bn(t)}a(wY,"IsStandardObject");var _Y=class extends Nn{static{a(this,"ValueMutateError")}constructor(e){super(e)}};function mqt(t,e,r,n){if(!wY(r))wA.Set(t,e,ko(n));else{let o=Object.getOwnPropertyNames(r),s=Object.getOwnPropertyNames(n);for(let c of o)s.includes(c)||delete r[c];for(let c of s)o.includes(c)||(r[c]=null);for(let c of s)ECe(t,`${e}/${c}`,r[c],n[c])}}a(mqt,"ObjectType");function hqt(t,e,r,n){if(!Bn(r))wA.Set(t,e,ko(n));else{for(let o=0;o<n.length;o++)ECe(t,`${e}/${o}`,r[o],n[o]);r.splice(n.length)}}a(hqt,"ArrayType");function gqt(t,e,r,n){if(Wm(r)&&r.length===n.length)for(let o=0;o<r.length;o++)r[o]=n[o];else wA.Set(t,e,ko(n))}a(gqt,"TypedArrayType");function Aqt(t,e,r,n){r!==n&&wA.Set(t,e,n)}a(Aqt,"ValueType");function ECe(t,e,r,n){if(Bn(n))return hqt(t,e,r,n);if(Wm(n))return gqt(t,e,r,n);if(wY(n))return mqt(t,e,r,n);if(g0(n))return Aqt(t,e,r,n)}a(ECe,"Visit");function sje(t){return Wm(t)||g0(t)}a(sje,"IsNonMutableValue");function yqt(t,e){return wY(t)&&Bn(e)||Bn(t)&&wY(e)}a(yqt,"IsMismatchedValue");function aje(t,e){if(sje(t)||sje(e))throw new _Y("Only object and array types can be mutated at the root level");if(yqt(t,e))throw new _Y("Cannot assign due type mismatch of assignable values");ECe(t,"",t,e)}a(aje,"Mutate");f();var SY=class extends Nn{static{a(this,"ParseError")}constructor(e){super(e)}},bCe;(function(t){let e=new Map([["Assert",(s,c,l)=>(hY(s,c,l),l)],["Cast",(s,c,l)=>TO(s,c,l)],["Clean",(s,c,l)=>AY(s,c,l)],["Clone",(s,c,l)=>ko(l)],["Convert",(s,c,l)=>CY(s,c,l)],["Decode",(s,c,l)=>Yv(s,c)?fD(s,c,l):l],["Default",(s,c,l)=>vY(s,c,l)],["Encode",(s,c,l)=>Yv(s,c)?mD(s,c,l):l]]);function r(s){e.delete(s)}a(r,"Delete"),t.Delete=r;function n(s,c){e.set(s,c)}a(n,"Set"),t.Set=n;function o(s){return e.get(s)}a(o,"Get"),t.Get=o})(bCe||(bCe={}));var cje=["Clone","Clean","Default","Convert","Assert","Decode"];function Cqt(t,e,r,n){return t.reduce((o,s)=>{let c=bCe.Get(s);if(ea(c))throw new SY(`Unable to find Parse operation '${s}'`);return c(e,r,o)},n)}a(Cqt,"ParseValue");function lje(...t){let[e,r,n,o]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?Bn(t[0])?[t[0],t[1],[],t[2]]:[cje,t[0],t[1],t[2]]:t.length===2?[cje,t[0],[],t[1]]:(()=>{throw new SY("Invalid Arguments")})();return Cqt(e,r,n,o)}a(lje,"Parse");f();var HC={};Sa(HC,{Assert:()=>hY,Cast:()=>TO,Check:()=>Ni,Clean:()=>AY,Clone:()=>ko,Convert:()=>CY,Create:()=>mh,Decode:()=>JWe,Default:()=>vY,Diff:()=>nje,Edit:()=>eje,Encode:()=>oje,Equal:()=>fR,Errors:()=>AC,Hash:()=>PI,Mutate:()=>aje,Parse:()=>lje,Patch:()=>ije,ValueErrorIterator:()=>DI});f();var vqt="gpt-4o-copilot",hh=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&Pa(this._ctx,n=>this.refreshAvailableModels(n))}static{a(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return vqt}parseModelsResponse(e){try{return HC.Parse(TWe,e)}catch(r){pn.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch(e)}async fetch(e){let r=await uR(this._ctx,"/models",e);return r.ok?this.parseModelsResponse(await r.json())?.data??[]:(pn.error(this._ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(o=>o.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=wWe(this._ctx);if(n){let l=this.getGenericCompletionModels().map(u=>u.modelId);l.includes(n)||(l.length>0&&pn.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${l.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let o=Bi(this._ctx,qt.DebugOverrideEngine)||Bi(this._ctx,qt.DebugOverrideEngineLegacy);if(o)return new IT(o,"override");let s=e?this._ctx.get(Lt).customEngine(e):"",c=e?this._ctx.get(Lt).customEngineTargetEngine(e):void 0;return n?s&&c&&n===c?new IT(s,"exp"):new IT(n,"modelpicker"):s?new IT(s,"exp"):this.customModels.length>0?new IT(this.customModels[0],"custommodel"):new IT(r,"default")}},IT=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{a(this,"ModelRequestInfo")}get headers(){return{}}};function TT(t,e=void 0){let r=t.get(hh),n=r.getCurrentModelRequestInfo(e),o=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:o}}a(TT,"getEngineRequestInfo");f();f();var Qi=class{static{a(this,"FileSystem")}};var _je=Ne(wje());function Sje(t){return t!==void 0&&t!==0}a(Sje,"isRepoInfo");function Rje(t){if(t===void 0||t===0)return"";let e=Ex(t);if(e==="github/github")return e;let r=Gqt(t)?.toLowerCase();return r!==void 0?r:""}a(Rje,"getDogFood");function Ex(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}a(Ex,"tryGetGitHubNWO");function Gqt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}a(Gqt,"tryGetADONWO");function wT(t,e){let r=Rd(e);return Vqt(t,r)}a(wT,"extractRepoInfoInBackground");var Vqt=Jqt(zqt,1e4);async function zqt(t,e){let r=X3e(e);if(!r)return;let n=await Kqt(t,r);if(!n)return;let o=t.get(Qi),s=Ki(n,".git","config"),c;try{c=await o.readFileString(s)}catch{return}let l=Yqt(c)??"",u=_Ce(l),d={uri:n};return u===void 0?{baseFolder:d,url:l,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:d,url:l,...u}}a(zqt,"extractRepoInfo");function _Ce(t){let e;try{if(e=(0,_je.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}a(_Ce,"parseRepoUrl");async function Kqt(t,e){let r=e+"_add_to_make_longer",n=t.get(Qi);for(;e!=="file:///"&&e.length<r.length;){let o=Ki(e,".git","config"),s=!1;try{await n.stat(o),s=!0}catch{s=!1}if(s)return e;r=e,e=Rd(e)}}a(Kqt,"getRepoBaseUri");function Yqt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,o=/^\s*\[/,s,c,l=!1;for(let u of t.split(`
`))if(l&&s!==void 0){if(s+=u,u.endsWith("\\"))s=s.substring(0,s.length-1);else if(l=!1,c==="origin")return s}else{let d=u.match(e)??u.match(r);if(d)c=d[1];else if(u.match(o))c=void 0;else{if(s&&c!=="origin")continue;{let p=u.match(n);if(p){if(s=p[1],s.endsWith("\\"))s=s.substring(0,s.length-1),l=!0;else if(c==="origin")return s}}}}return s}a(Yqt,"getRepoUrlFromConfigText");var wCe=class{static{a(this,"CompletedComputation")}constructor(e){this.result=e}};function Jqt(t,e){let r=new Sr(e),n=new Set;return(o,...s)=>{let c=JSON.stringify(s),l=r.get(c);if(l)return l.result;if(n.has(c))return 0;let u=t(o,...s);return n.add(c),u.then(d=>{r.set(c,new wCe(d)),n.delete(c)}),0}}a(Jqt,"computeInBackgroundAndMemoize");f();var RO=500,kje=8192-RO,Pje=4,RY=10,Dje=1e3*5,kY={prefix:35,suffix:15,stableContext:35,volatileContext:15},Xqt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function kO(t){return t=t.toLowerCase(),Xqt[t]??t}a(kO,"normalizeLanguageId");var SCe=class{constructor(e){this.ctx=e;this.cache=new Sr(200)}static{a(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),o=this.cache.get(n);return o||(o=new RCe(()=>this.ctx.get(AA).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,o)),o.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},RCe=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{a(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function eHt(t){return"uri"in t}a(eHt,"isCompletionsFiltersInfo");var Lt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new SCe(this.ctx)}static{a(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r,n=zr.createAndMarkAsIssued()){if(n instanceof xC)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let o=r&&eHt(r)?wT(this.ctx,r.uri):void 0,s=Ex(o)??"",c=Rje(o)??"",l=r?.languageId??"",u=TT(this.ctx).modelId,d=MBe(e),p=e.getTokenValue("ft")??"",m=e.getTokenValue("ol")??"",h=e.getTokenValue("cml")??"",g=e.getTokenValue("tid")??"",A=e.endpoints,y={"X-Copilot-Repository":s,"X-Copilot-FileType":l,"X-Copilot-UserKind":d,"X-Copilot-Dogfood":c,"X-Copilot-Engine":u,"X-Copilot-CustomModel":p,"X-Copilot-Orgs":m,"X-Copilot-CustomModelNames":h,"X-Copilot-CopilotTrackingId":g},v=this.getGranularityDirectory(),b=this.makeFilterSettings(y),I=v.extendFilters(b),S=await this.getExpConfig(I.newFilterSettings,A);v.update(b,+(S.variables.copilotbycallbuckets??NaN),+(S.variables.copilottimeperiodsizeinh??NaN));let k=v.extendFilters(b),N=k.newFilterSettings,F=await this.getExpConfig(N,A),O=new Promise(Y=>setTimeout(Y,t.upcomingDynamicFilterCheckDelayMs));for(let Y of k.otherFilterSettingsToPrefetch)O=O.then(async()=>{await new Promise(z=>setTimeout(z,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(Y,A)});return this.prepareForUpcomingFilters(N,A),new xC(n.properties,n.measurements,n.issuedTime,{filters:N,exp:F})}async fetchTokenAndUpdateExPValuesAndAssignments(e,r){let n=await this.ctx.get(cr).getToken();return await this.updateExPValuesAndAssignments(n,e,r)}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Fs).machineId;this.granularityDirectory=new gV(e,this.ctx.get(bC))}return this.granularityDirectory}makeFilterSettings(e){return new VS({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return $m.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,o]of Object.entries(this.upcomingDynamicFilters))await new Promise(s=>setTimeout(s,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,o()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new VS({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=Q4(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??kY.suffix}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??RY}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??kje+RO}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}workspaceContextCacheTime(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcachetime??Dje}stableContextPercent(e){return e.filtersAndExp.exp.variables.copilotstablecontextpercent??kY.stableContext}volatileContextPercent(e){return e.filtersAndExp.exp.variables.copilotvolatilecontextpercent??kY.volatileContext}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!0}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??9}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}maxMultilineTokens(e){return e.filtersAndExp.exp.variables.copilotmaxmultilinetokens??200}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??200}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};f();f();f();var PY=Ne(Bje());var PCe={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c-sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function q0(t){return t in PCe&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}a(q0,"isSupportedLanguageId");function DY(t){if(!(t in PCe))throw new Error(`Unrecognized language: ${t}`);return PCe[t]}a(DY,"languageIdToWasmLanguage");var kCe=new Map;async function tHt(t){let e;try{e=await aY(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new QB(`Could not load tree-sitter-${t}.wasm`,r):r}return PY.default.Language.load(e)}a(tHt,"loadWasmLanguage");function rHt(t){let e=DY(t);if(!kCe.has(e)){let r=tHt(e);kCe.set(e,r)}return kCe.get(e)}a(rHt,"getLanguage");var DCe=class extends Error{static{a(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function _T(t,e){return(await BCe(t,e))[0]}a(_T,"parseTreeSitter");async function BCe(t,e){await PY.default.init({locateFile:a(s=>sCe(s),"locateFile")});let r;try{r=new PY.default}catch(s){throw s&&typeof s=="object"&&"message"in s&&typeof s.message=="string"&&s.message.includes("table index is out of bounds")?new DCe(`Could not init Parse for language <${t}>`,s):s}let n=await rHt(t);r.setLanguage(n);let o=r.parse(e);return r.delete(),[o,n.version]}a(BCe,"parseTreeSitterIncludingVersion");function Nje(t){switch(DY(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c-sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}a(Nje,"getBlockCloseToken");function nHt(t,e){let r=[];for(let n of t){if(!n[1]){let o=e.tree.getLanguage();n[1]=o.query(n[0])}r.push(...n[1].matches(e))}return r}a(nHt,"innerQuery");var iHt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function Mje(t){return nHt([iHt],t).length==1}a(Mje,"queryPythonIsDocstring");var WC=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{a(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(o=>{n.push(o.dump(`${r}+- `,o.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let o=this.parent.dumpPath(e,r,!0),s=o.length-o.lastIndexOf(`
`)-1-r.length,c=" ".repeat(s),l=n?`
${r}${c}+- `:"";return o+this.description+l}else{let o=n?`
${r}+- `:"";return e+this.description+o}}},uu=class{constructor(e,r,n,o){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=o;this.statements=[]}static{a(this,"StatementTree")}static isSupported(e){return qB.languageIds.has(e)||HB.languageIds.has(e)||PO.languageIds.has(e)||$B.languageIds.has(e)||DO.languageIds.has(e)||BO.languageIds.has(e)||NO.languageIds.has(e)||MO.languageIds.has(e)||LO.languageIds.has(e)}static isTrimmedByDefault(e){return qB.languageIds.has(e)||HB.languageIds.has(e)||$B.languageIds.has(e)}static create(e,r,n,o){if(qB.languageIds.has(e))return new qB(e,r,n,o);if(HB.languageIds.has(e))return new HB(e,r,n,o);if(PO.languageIds.has(e))return new PO(e,r,n,o);if($B.languageIds.has(e))return new $B(e,r,n,o);if(NO.languageIds.has(e))return new NO(e,r,n,o);if(DO.languageIds.has(e))return new DO(e,r,n,o);if(BO.languageIds.has(e))return new BO(e,r,n,o);if(MO.languageIds.has(e))return new MO(e,r,n,o);if(LO.languageIds.has(e))return new LO(e,r,n,o);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,{startPosition:this.offsetToPosition(this.startOffset),endPosition:this.offsetToPosition(this.endOffset)}).forEach(o=>{let s=this.createNode(o.node);for(;e.length>0&&!e[0].containsStatement(s);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(s):this.addStatement(s),e.unshift(s)}),e.forEach(o=>o.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await _T(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,o=r[r.length-1].length;return{row:n,column:o}}dump(e=""){let r=[];return this.statements.forEach((n,o)=>{let s=`[${o}]`,c=" ".repeat(s.length);r.push(n.dump(`${e} ${s} `,`${e} ${c} `))}),r.join(`
`)}},BY=class t extends WC{static{a(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("alternative")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},qB=class extends uu{static{a(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx"])}createNode(e){return new BY(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (field_definition)
        ] @statement`}},HB=class extends uu{static{a(this,"TSStatementTree")}static{this.languageIds=new Set(["typescript","typescriptreact"])}createNode(e){return new BY(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},NCe=class t extends WC{static{a(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},PO=class extends uu{static{a(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new NCe(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},MCe=class t extends WC{static{a(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},$B=class extends uu{static{a(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new MCe(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},LCe=class t extends WC{static{a(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},DO=class extends uu{static{a(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new LCe(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},FCe=class t extends WC{static{a(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},BO=class extends uu{static{a(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new FCe(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},OCe=class t extends WC{static{a(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},NO=class extends uu{static{a(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new OCe(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},QCe=class t extends WC{static{a(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},MO=class extends uu{static{a(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new QCe(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},UCe=class t extends WC{static{a(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},LO=class extends uu{static{a(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new UCe(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};var jC=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{a(this,"BlockTrimmer")}static isSupported(e){return uu.isSupported(e)}static isTrimmedByDefault(e){return uu.isTrimmedByDefault(e)}async withParsedStatementTree(e){var n=[];try{let r=Pfe(n,uu.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(o){var s=o,c=!0}finally{Dfe(n,s,c)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var NY=class extends jC{constructor(r,n,o,s=3,c=7){super(r,n,o);this.lineLimit=s;this.lookAhead=c;let l=[...this.completion.matchAll(/\n/g)],u=this.lineLimit+this.lookAhead;l.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=l[this.lineLimit-1].index),l.length>=u&&u>0&&(this.lookAheadOffset=l[u-1].index)}static{a(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(r=>{let n=r.statementAt(this.stmtStartPos()),o=this.getContainingBlockOffset(n);return o=this.trimAtFirstBlankLine(o),n&&(o=this.trimAtStatementChange(n,o)),this.limitOffset&&this.lookAheadOffset&&(o===void 0||o>this.lookAheadOffset)?this.limitOffset:o})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let o=n.shift();if(this.completion.substring(0,o.index).trim()!=="")return o.index}return r}trimAtStatementChange(r,n){let o=this.prefix.length,s=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>o&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<s?this.asCompletionOffset(r.node.endIndex):n;let c=r,l=r.nextSibling;for(;l&&l.node.endIndex<=s&&!this.hasNonStatementContentAfter(c)&&!this.isCompoundStatement(l);)c=l,l=l.nextSibling;return l&&c.node.endIndex>o&&c.node.endIndex<s?this.asCompletionOffset(c.node.endIndex):n}};async function Lje(t,e){var l=[];try{let r=t.getText();let n=t.offsetAt(e);let o=Pfe(l,uu.create(t.detectedLanguageId,r,0,r.length));await o.build();let s=o.statementAt(n);if(!s)return"non-block";if(!s.isCompoundStatementType&&s.children.length===0)return s.parent&&!s.nextSibling&&s.node.endPosition.row<=e.line?"block-end":s.parent?"mid-block":"non-block";if(s.children.length===0)return"empty-block";let c=s.children[s.children.length-1];if(n<c.node.startIndex)return"mid-block";return"block-end"}catch(u){var d=u,p=!0}finally{Dfe(l,d,p)}}a(Lje,"getBlockPositionType");f();function oHt(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}a(oHt,"getProxyFromEnvironment");function sHt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}a(sHt,"getRejectUnauthorizedFromEnvironment");var Fje=E.Object({proxy:E.Optional(E.String()),proxyStrictSSL:E.Optional(E.Boolean()),proxyAuthorization:E.Optional(E.String()),proxyKerberosServicePrincipal:E.Optional(E.String())});function Oje(t){let e=oHt(t),r=FO({proxy:e,proxyStrictSSL:sHt(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}a(Oje,"getHttpSettingsFromEnvironment");function FO(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:o,pathname:s,search:c,hash:l}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${s}${c}${l}`,proxyAuthorization:t.proxyAuthorization||aHt(n,o)}}catch{return{...t,proxy:""}}}a(FO,"normalizeHttpSettings");function aHt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}a(aHt,"getAuth");var qCe={};Sa(qCe,{activationEvents:()=>_Ht,badges:()=>wHt,browser:()=>SHt,bugs:()=>yHt,build:()=>fHt,buildType:()=>pHt,categories:()=>IHt,contributes:()=>HCe,default:()=>MHt,dependencies:()=>BHt,description:()=>uHt,devDependencies:()=>DHt,displayName:()=>lHt,enabledApiProposals:()=>kHt,engines:()=>bHt,extensionPack:()=>EHt,homepage:()=>gHt,icon:()=>vHt,keywords:()=>THt,license:()=>AHt,main:()=>RHt,name:()=>cHt,overrides:()=>NHt,preview:()=>hHt,pricing:()=>xHt,publisher:()=>mHt,qna:()=>CHt,scripts:()=>PHt,version:()=>dHt});var cHt="copilot",lHt="GitHub Copilot",uHt="Your AI pair programmer",dHt="1.368.0",fHt="1779",pHt="prod",mHt="GitHub",hHt=!1,gHt="https://github.com/features/copilot?editor=vscode",AHt="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",yHt={url:"https://github.com/microsoft/vscode/issues"},CHt="https://github.com/github-community/community/discussions/categories/copilot",vHt="assets/Copilot-App-Icon.png",xHt="Trial",EHt=["GitHub.copilot-chat","GitHub.copilot"],bHt={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},IHt=["AI","Chat","Programming Languages","Machine Learning"],THt=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],wHt=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],_Ht=["onStartupFinished"],SHt="./dist/web",RHt="./dist/extension",kHt=["inlineCompletionsAdditions"],HCe={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github-copilot-completions-debugger-view.refresh",title:"Refresh",icon:"$(refresh)"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],viewsContainers:{activitybar:[{id:"github-copilot-completions-debugger-panel",title:"Debugger",icon:"$(bug)",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator"}]},views:{"github-copilot-completions-debugger-panel":[{id:"github-copilot-completions-debugger-view",name:"Debugger",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator",icon:"$(bug)"}]},menus:{"view/title":[{command:"github-copilot-completions-debugger-view.refresh",when:"view == github-copilot-completions-debugger-view",group:"navigation"}]}},PHt={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/deviceFlow.ts --save-as-test-token",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},DHt={"@azure/identity":"^4.11.0","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.17.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^8.0.0","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.16.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.6.0","@yao-pkg/pkg":"^6.6.0",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^17.0.1",electron:"^28.1.4",esbuild:"^0.25.8","esbuild-plugin-copy":"^2.1.1",eslint:"^9.32.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",glob:"^11.0.3",globals:"^16.3.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.2.0",proxy:"^2.1.1","simple-git":"^3.28.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.9.2","typescript-eslint":"^8.39.1","vscode-dts":"^0.3.3","@vscode/tree-sitter-wasm":"0.0.5-php.2"},BHt={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@anthropic-ai/sdk":"^0.56.0","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.9","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.17.0","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.39","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^8.0.2",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.3",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.2.0","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.23.0","windows-ca-certs":"^0.2.2",yargs:"^17.7.2"},NHt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},MHt={name:cHt,displayName:lHt,description:uHt,version:dHt,build:fHt,buildType:pHt,publisher:mHt,preview:hHt,homepage:gHt,license:AHt,bugs:yHt,qna:CHt,icon:vHt,pricing:xHt,extensionPack:EHt,engines:bHt,categories:IHt,keywords:THt,badges:wHt,activationEvents:_Ht,browser:SHt,main:RHt,enabledApiProposals:kHt,contributes:HCe,scripts:PHt,devDependencies:DHt,dependencies:BHt,overrides:NHt};var qt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",ToolConfirmAutoApprove:"agent.toolConfirmAutoApprove",MaxToolCallingLoop:"agent.maxToolCallingLoop",CompletionsDelay:"completionsDelay",CompletionsDebounce:"completionsDebounce",IsSamplingEnabled:"agent.isSamplingEnabled",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",ShowWorkspaceContextDebugger:"internal.showWorkspaceContextDebugger",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function Qje(t){return["server","parsingandserver"].includes(t)}a(Qje,"shouldDoServerTrimming");var _A=class{static{a(this,"BlockModeConfig")}},jB=class extends _A{static{a(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let o=e.get(Lt).overrideBlockMode(n);if(o)return $Ce(o,r);let s=e.get(Lt).enableProgressiveReveal(n);return(Bi(e,qt.AlwaysRequestMultiline)??s)||jC.isTrimmedByDefault(r)?$Ce("moremultiline",r):r=="ruby"?"parsing":q0(r)?"parsingandserver":"server"}};function LHt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}a(LHt,"blockModeRequiresTreeSitter");function $Ce(t,e){return t==="moremultiline"&&uu.isSupported(e)?t:LHt(t)&&!q0(e)?"server":t}a($Ce,"toApplicableBlockMode");var Lc=class{static{a(this,"ConfigProvider")}requireReady(){return Promise.resolve()}},GB=class extends Lc{constructor(){super(...arguments);this.onDidChangeCopilotSettings=a(()=>({dispose:a(()=>{},"dispose")}),"onDidChangeCopilotSettings");this.onDidChangeHttpSettings=this.onDidChangeCopilotSettings}static{a(this,"DefaultsOnlyConfigProvider")}getConfig(r){return OHt(r)}getOptionalConfig(r){return QHt(r)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}},pR=class extends Lc{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.copilotEmitter=new vs;this.onDidChangeCopilotSettings=this.copilotEmitter.event;this.didChangeHttpSettingsEmitter=new vs;this.onDidChangeHttpSettings=this.didChangeHttpSettingsEmitter.event;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{a(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){this.setCopilotSettings({[r]:n})}setCopilotSettings(r){for(let[n,o]of Object.entries(r))o!==void 0?this.overrides.set(n,o):this.overrides.delete(n);this.copilotEmitter.fire(this)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=FO(r);this.httpSettings=n,this.didChangeHttpSettingsEmitter.fire(this.getHttpSettings())}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[qt.ShowEditorCompletions,qt.EnableAutoCompletions,qt.DelayCompletions,qt.FilterCompletions]){let o=this.overrides.get(n);o!==void 0&&(r[n]=JSON.stringify(o))}return r}};function FHt(t){return t?.type==="object"&&"properties"in t}a(FHt,"isContributesObject");function Uje(t,e){let r=t,n=[];for(let o of e.split(".")){let s=[...n,o].join(".");r&&typeof r=="object"&&s in r?(r=r[s],n.length=0):n.push(o)}if(!(r===void 0||n.length>0))return r}a(Uje,"getConfigKeyRecursively");function OHt(t){if(WB.has(t))return WB.get(t);throw new Error(`Missing config default value: ${qF}.${t}`)}a(OHt,"getConfigDefaultForKey");function QHt(t){return WB.get(t)}a(QHt,"getOptionalConfigDefaultForKey");var WB=new Map([[qt.DebugOverrideCppHeadersEnableSwitch,!1],[qt.RelatedFilesVSCodeCSharp,!1],[qt.RelatedFilesVSCodeTypeScript,!1],[qt.RelatedFilesVSCode,!1],[qt.IncludeNeighboringFiles,!1],[qt.ExcludeRelatedFiles,!1],[qt.ContextProviders,[]],[qt.DebugUseEditorFetcher,null],[qt.DebugUseElectronFetcher,null],[qt.DebugOverrideLogLevels,{}],[qt.DebugSnippyOverrideUrl,""],[qt.FetchStrategy,"auto"],[qt.ToolConfirmAutoApprove,!1],[qt.MaxToolCallingLoop,25],[qt.UseSubsetMatching,null],[qt.ContextProviderTimeBudget,void 0],[qt.DebugOverrideCapiUrl,""],[qt.DebugTestOverrideCapiUrl,""],[qt.DebugOverrideProxyUrl,""],[qt.DebugTestOverrideProxyUrl,""],[qt.DebugOverrideEngine,""],[qt.AlwaysRequestMultiline,void 0],[qt.ModelAlwaysTerminatesSingleline,void 0],[qt.TrimCompletionsAggressively,void 0],[qt.CompletionsDebounce,void 0],[qt.NESXTab,void 0],[qt.UseWorkspaceContextCoordinator,void 0],[qt.ShowWorkspaceContextDebugger,!1],[qt.CompletionsDelay,void 0],[qt.UseSplitContextPrompt,void 0],[qt.UseCompletionsComparisonPanel,!1],[qt.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[qt.ComparisonPanelRandomizedMode,!1],[qt.IsSamplingEnabled,!1],[qt.ShowEditorCompletions,void 0],[qt.EnableAutoCompletions,void 0],[qt.DelayCompletions,void 0],[qt.FilterCompletions,void 0]]);for(let t of Object.values(qt)){let e=HCe.configuration[0],r=[],n=`${qF}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let o=e.properties[r.join(".")];if(FHt(o))r.length=0,e=o;else if(n.length==0&&o?.default!==void 0){if(WB.has(t))throw new Error(`Duplicate config default value ${qF}.${t}`);WB.set(t,o.default)}}if(!WB.has(t))throw new Error(`Missing config default value ${qF}.${t}`)}function Bi(t,e){return t.get(Lc).getConfig(e)}a(Bi,"getConfig");function p9e(t){return t.get(Lc).dumpForTelemetry()}a(p9e,"dumpForTelemetry");var wo=class{constructor(){this.packageJson=qCe}static{a(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function cpe(t){return t.get(wo).isProduction()}a(cpe,"isProduction");function _9e(t){return t.get(wo).getBuildType()==="dev"}a(_9e,"isDevBuild");function EC(t){return t.get(wo).getBuildType()}a(EC,"getBuildType");function m9e(t){return t.get(wo).getBuild()}a(m9e,"getBuild");function l2(t){return t.get(wo).getVersion()}a(l2,"getVersion");var Fs=class{constructor(e,r,n="none",o="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=o}static{a(this,"EditorSession")}};function uC({name:t,version:e}){return`${t}/${e}`}a(uC,"formatNameAndVersion");var un=class{static{a(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}getEditorPluginSpecificFilters(){return[]}},OB="2025-05-01";function m0(t){let e=t.get(un);return{"Editor-Version":uC(e.getEditorInfo()),"Editor-Plugin-Version":uC(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":l2(t)}}a(m0,"editorVersionHeaders");var _0="Iv1.b507a08c87ecfe98",qje="350ee525b5da0e4a54c6e8e043edc1b99cc02f19",su=class{static{a(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??_0}};var Qr=class{static{a(this,"Fetcher")}getImplementation(){return this}};function bx(t,e,r,n,o,s,c,l,u,d){let p={...l,Authorization:`Bearer ${r}`,...m0(t)};d===void 0&&(p["Openai-Organization"]="github-copilot",p["X-Request-Id"]=o,p["VScode-SessionId"]=t.get(Fs).sessionId,p["VScode-MachineId"]=t.get(Fs).machineId,p["X-GitHub-Api-Version"]=OB),n&&(p["OpenAI-Intent"]=n);let m={method:"POST",headers:p,json:s,timeout:u},h=t.get(Qr);if(c){let A=new AbortController;c.onCancellationRequested(()=>{Nt(t,"networking.cancelRequest",zr.createAndMarkAsIssued({headerRequestId:o})),A.abort()}),m.signal=A.signal}return h.fetch(e,m).catch(A=>{if(UHt(A))return Nt(t,"networking.disconnectAll"),h.disconnectAll().then(()=>h.fetch(e,m));throw A})}a(bx,"postRequest");function UHt(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}a(UHt,"isInterruptedNetworkError");var qHt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function HHt(t){return qHt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}a(HHt,"isOomError");function Ix(t,e,r,n=pn){if(!Sd(e)){if(e instanceof Error){let o=e;HHt(o)?t.get($o).setWarning("Out of memory"):o.code==="EMFILE"||o.code==="ENFILE"?t.get($o).setWarning("Too many open files"):o.code==="CopilotPromptLoadFailure"?t.get($o).setWarning("Corrupted Copilot installation"):`${o.code}`.startsWith("CopilotPromptWorkerExit")?t.get($o).setWarning("Worker unexpectedly exited"):o.syscall==="uv_cwd"&&o.code==="ENOENT"&&t.get($o).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}a(Ix,"handleException");function Hje(t){process.addListener("uncaughtException",r=>{Ix(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,Ix(t,r,"unhandledRejection")}finally{e=!1}})}a(Hje,"registerDefaultHandlers");async function $je(t){try{await dR}catch(e){Ix(t,e,"initializeTokenizers")}}a($je,"waitForTokenizers");f();var ST=require("fs"),Wje=require("os"),jje=Ne(require("path")),VB=require("process");var mi=class{static{a(this,"PersistenceManager")}},WCe=class extends mi{constructor(r){super();this.directory=r}static{a(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,o){await ST.promises.mkdir(this.directory,{recursive:!0,mode:448});let s=`${this.directory}/${r}.json`,c;try{c=await OO.acquire(s);let l=await this.readJsonObject(r);l[n]=o,await ST.promises.writeFile(s,JSON.stringify(l)+`
`,{encoding:"utf8"})}finally{c&&await c()}}async delete(r,n){let o=`${this.directory}/${r}.json`,s;try{s=await OO.acquire(o);let c=await this.readJsonObject(r);delete c[n];let l=JSON.stringify(c)+`
`;l===`{}
`?await ST.promises.rm(o):await ST.promises.writeFile(o,l,{encoding:"utf8"})}catch{}finally{s&&await s()}}async deleteSetting(r){let n=`${this.directory}/${r}.json`,o;try{o=await OO.acquire(n),await ST.promises.rm(n)}catch{}finally{o&&await o()}}async listSettings(){try{return(await ST.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let o=await ST.promises.readFile(n,{encoding:"utf8"});return JSON.parse(o)}catch{return{}}}},OO=class{static{a(this,"LockManager")}static{this.locks=new Map}static{this.DEFAULT_TIMEOUT_MS=1e4}static async acquire(e){await this.getLock(e);let r,n=new Promise(o=>{r=o});return this.locks.set(e,n),()=>Promise.resolve().then(()=>{r&&(r(),r=void 0,this.locks.get(e)===n&&this.locks.delete(e))})}static async getLock(e){let r=Date.now();for(;Date.now()-r<this.DEFAULT_TIMEOUT_MS;){let n=this.locks.get(e);if(!n)return;let o=this.DEFAULT_TIMEOUT_MS-(Date.now()-r);if(o<=0)return;let s=new Promise((c,l)=>{setTimeout(()=>{l(new Error("timeout"))},o)});try{await Promise.race([n,s])}catch{return}}}};function jCe(){return VB.env.XDG_CONFIG_HOME&&jje.isAbsolute(VB.env.XDG_CONFIG_HOME)?VB.env.XDG_CONFIG_HOME+"/github-copilot":(0,Wje.platform)()==="win32"?VB.env.USERPROFILE+"\\AppData\\Local\\github-copilot":VB.env.HOME+"/.config/github-copilot"}a(jCe,"getXdgConfigPath");function Gje(){return new WCe(jCe())}a(Gje,"makeXdgPersistenceManager");f();f();f();var Tx={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var Vje=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],zje={".php":[".blade"]},mR=Object.keys(Tx).flatMap(t=>Tx[t].extensions);var GCe=Ne(require("node:path"));var KB=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{a(this,"Language")}},QO=class{static{a(this,"LanguageDetection")}},VCe=new Map,zB=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(Tx)){for(let n of e)VCe.set(n,[...VCe.get(n)??[],t]);for(let n of r??[])zB.set(n,[...zB.get(n)??[],t])}var zCe=class extends QO{static{a(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Di(e.uri),n=GCe.extname(r).toLowerCase(),o=this.extensionWithoutTemplateLanguage(r,n),s=this.detectLanguageId(r,o),c=this.computeFullyQualifiedExtension(n,o);return s?new KB(s.languageId,s.isGuess,c):new KB(e.languageId,!0,c)}extensionWithoutTemplateLanguage(e,r){if(Vje.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),o=GCe.extname(n).toLowerCase();if(o.length>0&&mR.includes(o)&&this.isExtensionValidForTemplateLanguage(r,o))return o}return r}isExtensionValidForTemplateLanguage(e,r){let n=zje[e];return!n||n.includes(r)}detectLanguageId(e,r){if(zB.has(e))return{languageId:zB.get(e)[0],isGuess:!1};let n=VCe.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),zB.has(e))return{languageId:zB.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},KCe=class extends QO{constructor(r){super();this.delegate=r}static{a(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),o=n.languageId;return o==="c"||o==="cpp"?new KB("cpp",n.isGuess,n.fileExtension):n}},YCe=class extends QO{constructor(r){super();this.delegate=r}static{a(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new KB(r.languageId,!0,""):this.delegate.detectLanguage(r)}},$Ht=new KCe(new YCe(new zCe));function RT({uri:t,languageId:e}){let r=$Ht.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}a(RT,"detectLanguage");f();f();f();f();function wx(t){if(t.isCancellationRequested)throw new MY}a(wx,"throwIfCancellationRequested");function FY(t){return t instanceof MY?!0:t instanceof Error&&t.name===JCe&&t.message===JCe}a(FY,"isCancellationError");var MY=class extends Error{static{a(this,"CancellationError")}constructor(){super(JCe),this.name=this.message}},JCe="Canceled",LY=class{constructor(){this.items=[]}static{a(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function hR(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}a(hR,"isTypeDefinition");var $s=class t{static{a(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],o=this.start;for(o=Yje(e,e.length,o),Kje(n,r);o<this.end;)e[o]!=="\r"&&e[o]!==`
`?n.push(e[o++]):e[o]==="\r"&&o<e.length&&e[o+1]!==`
`||e[o]===`
`?(n.push(`
`),o=Yje(e,e.length,++o),Kje(n,r)):o++;return n.join("")}};function Kje(t,e){for(let r=0;r<e;r++)t.push(" ")}a(Kje,"appendIndent");function Yje(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}a(Yje,"consumeIndent");var gh=class{constructor(e,r,n,o,s,c,l,u,d){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=o;this.nameRange=s;this.bodyRange=c;this.extentRange=l;this.kind=u;this.refKind=d;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{a(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},ll=class t{constructor(){this.queriesCache=new Map}static{a(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await _T(this.languageId,e),o=n.getLanguage(),c=this.getOrCreateQuery(o,r).matches(n.rootNode);return{tree:n,matches:c}}async executeQuery(e,r,n){let o;try{o=await this.findMatches(r,n);let s=new LY,c=[];for(let l of o.matches){let u=this.createSymbolRange(s,e,r,l.captures);u&&c.push(u)}return c}catch{return[]}finally{o?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,o){let s=0,c=0,l=0,u=0,d=0,p=0,m=0,h=0,g=null,A=null;for(let b=0;b<o.length;b++){let I=o[b].name;I==="name"?(d=o[b].node.startIndex,p=o[b].node.endIndex):I==="reference"?(d=o[b].node.startIndex,p=o[b].node.endIndex,l=o[b].node.startIndex,u=o[b].node.endIndex,g=I):I==="body"?(m=o[b].node.startIndex,h=o[b].node.endIndex):I==="comment"?(s=s===0?o[b].node.startIndex:Math.min(s,o[b].node.startIndex),c=Math.max(c,o[b].node.endIndex)):I==="receiver"?A=$s.fromBounds(o[b].node.startIndex,o[b].node.endIndex).getText(n):(l=o[b].node.startIndex,u=o[b].node.endIndex,g=I)}g==="definition.module.filescoped"&&(h=n.length,u=h);let y=$s.fromBounds(l,u),v=l>0||u>0||d>0||p>0?new gh(r,"","",$s.fromBounds(s,c),$s.fromBounds(d,p),$s.fromBounds(m,h),y,t.kindFromString(g),0):null;if(v){t.updateScopesForSymbol(e,v);let b=v.nameRange.getText(n),I=this.createNameFromScopes(n,e.toArray());return I=A?`${A}.${I}`:I,new gh(r,I,b.substring(b.lastIndexOf(".")+1),v.commentRange,v.nameRange,v.bodyRange,v.extentRange,v.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var OY=class extends ll{static{a(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,WHt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},QY=class extends ll{static{a(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,GHt)}async extractLocalReferences(e,r,n){let o=await this.executeQuery(e,r,VHt),s=o.filter(u=>u.kind!==9),c=o.filter(u=>u.kind===9&&u.extentRange.containsRange(n)),l=[];for(let u of c)l.push(...s.filter(d=>u.extentRange.containsRange(d.extentRange)));return l}},UY=class extends ll{static{a(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,jHt),o=new Set;try{n.matches.forEach(s=>{let c,l,u;for(let d of s.captures)d.name==="import.name"?c=d:d.name==="alias"?l=d:d.name==="import"&&(u=d);if(c&&u){let d=this.cleanQuotedString(c.node.text),p=c.node.startIndex+1,m=c.node.endIndex-1,h=l?new $s(l.node.startIndex,l.node.endIndex-l.node.startIndex):new $s(p,m-p),g=new $s(u.node.startIndex,u.node.endIndex-u.node.startIndex),A=$s.empty,y=$s.empty,v=d.substring(d.lastIndexOf("/")+1);o.add(new gh(e,d,v,A,h,y,g,17,0))}})}finally{n.tree.delete()}return o.size>0?[...o]:[]}},WHt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,jHt=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,GHt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,VHt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var HY=class extends ll{static{a(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,zHt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},$Y=class extends ll{static{a(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,YHt)}async extractLocalReferences(e,r,n){let o=await this.executeQuery(e,r,JHt),s=o.filter(u=>u.kind!==9),c=o.filter(u=>u.kind===9&&u.extentRange.containsRange(n)),l=[];for(let u of c)l.push(...s.filter(d=>u.extentRange.containsRange(d.extentRange)));return l}},WY=class extends ll{static{a(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,KHt)).filter(o=>o.kind===0)}},zHt=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,KHt=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,YHt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,JHt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var XHt=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),jY=class extends ll{static{a(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,ZHt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},GY=class extends ll{static{a(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,e$t)).filter(o=>!XHt.has(o.unqualifiedName))}};var ZHt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,e$t=`
(call_expression function: (_) @name) @reference
`;f();var t$t=new Set(["int","str","float","bool","list","dict","tuple","set"]),VY=class extends ll{static{a(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,r$t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},zY=class extends ll{static{a(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,n$t)).filter(o=>!t$t.has(o.unqualifiedName))}async extractLocalReferences(e,r,n){let o=await this.executeQuery(e,r,o$t),s=o.filter(u=>u.kind!==9),c=o.filter(u=>u.kind===9&&u.extentRange.containsRange(n)),l=[];for(let u of c)l.push(...s.filter(d=>u.extentRange.containsRange(d.extentRange)));return l}},KY=class extends ll{static{a(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,i$t),o=new Set;try{n.matches.forEach(s=>{let c,l,u,d;for(let p of s.captures)p.name==="import.name"?c=p:p.name==="import.module"?u=p:p.name==="alias"?l=p:p.name==="import"&&(d=p);if(u&&d){let p=c||u,m=l?new $s(l.node.startIndex,l.node.endIndex-l.node.startIndex):new $s(p.node.startIndex,d.node.endIndex-p.node.endIndex),h=new $s(d.node.startIndex,d.node.endIndex-d.node.startIndex),g=$s.empty,A=$s.empty,y=p.node.text,v=y.split(".").pop()||y,b;c?b=`${u.node.text}.${c.node.text}`:b=u.node.text,o.add(new gh(e,b,v,g,m,A,h,17,0))}})}finally{n.tree.delete()}return o.size>0?[...o]:[]}},r$t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,n$t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,i$t=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,o$t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var s$t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),YB=class extends ll{static{a(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,a$t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},JB=class extends ll{static{a(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,c$t)).filter(o=>!s$t.has(o.unqualifiedName))}extractLocalReferences(){return Promise.reject(new Error("Method not implemented."))}};var a$t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,c$t=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var l$t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),YY=class extends YB{static{a(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,u$t),super.extractSymbols(e,r)]).then(([n,o])=>[...n,...o])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},JY=class extends JB{static{a(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,o]=await Promise.all([this.executeQuery(e,r,d$t),super.extractReferences(e,r)]);return[...n.filter(s=>!l$t.has(s.unqualifiedName)),...o]}},u$t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,d$t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var UO=[{symbolExtractor:new HY,referenceExtractor:new $Y,importExtractor:new WY,languageId:"java"},{symbolExtractor:new OY,referenceExtractor:new QY,importExtractor:new UY,languageId:"go"},{symbolExtractor:new VY,referenceExtractor:new zY,importExtractor:new KY,languageId:"python"},{symbolExtractor:new YB,referenceExtractor:new JB,languageId:"typescript"},{symbolExtractor:new YY,referenceExtractor:new JY,languageId:"typescriptreact"},{symbolExtractor:new jY,referenceExtractor:new GY,languageId:"javascript"}];function Jje(t){let e=RT({uri:t});if(e&&UO.some(r=>e===r.languageId))return e}a(Jje,"getSupportedLanguageIdForMultiLanguageProvider");var Xje=new Map(UO.map(t=>[t.languageId,t.referenceExtractor])),XY=new Map(UO.map(t=>[t.languageId,t.symbolExtractor])),Zje=new Map(UO.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),XCe=UO.map(t=>Tx[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();f();function ZCe(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}a(ZCe,"virtualNode");function eGe(t,e,r,n,o){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:o}}a(eGe,"lineNode");function e1e(t){return{type:"blank",lineNumber:t,subs:[]}}a(e1e,"blankNode");function ZY(t){return{type:"top",indentation:-1,subs:t??[]}}a(ZY,"topNode");function nd(t){return t.type==="blank"}a(nd,"isBlank");function gR(t){return t.type==="line"}a(gR,"isLine");function AR(t){return t.type==="virtual"}a(AR,"isVirtual");f();function tGe(t,e){return Hd(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}a(tGe,"clearLabelsIf");function yR(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>yR(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>yR(r,e)),label:t.label?e(t.label):void 0}}}a(yR,"mapLabels");function Hd(t,e,r){function n(o){r==="topDown"&&e(o),o.subs.forEach(s=>{n(s)}),r==="bottomUp"&&e(o)}a(n,"_visit"),n(t)}a(Hd,"visitTree");function t1e(t,e,r,n){let o=e;function s(c){o=r(c,o)}return a(s,"visitor"),Hd(t,s,n),o}a(t1e,"foldTree");function eJ(t,e,r){let n=a(s=>{if(r!==void 0&&r(s))return s;{let c=s.subs.map(n).filter(l=>l!==void 0);return s.subs=c,e(s)}},"rebuild"),o=n(t);return o!==void 0?o:ZY()}a(eJ,"rebuildTree");f();function p$t(t){let e=t.split(`
`),r=e.map(d=>d.match(/^\s*/)[0].length),n=e.map(d=>d.trimLeft());function o(d){let[p,m]=s(d+1,r[d]);return[eGe(r[d],d,n[d],p),m]}a(o,"parseNode");function s(d,p){let m,h=[],g=d,A;for(;g<n.length&&(n[g]===""||r[g]>p);)if(n[g]==="")A===void 0&&(A=g),g+=1;else{if(A!==void 0){for(let y=A;y<g;y++)h.push(e1e(y));A=void 0}[m,g]=o(g),h.push(m)}return A!==void 0&&(g=A),[h,g]}a(s,"parseSubs");let[c,l]=s(0,-1),u=l;for(;u<n.length&&n[u]==="";)c.push(e1e(u)),u+=1;if(u<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${u} out of ${n.length}`);return ZY(c)}a(p$t,"parseRaw");function qO(t,e){function r(n){if(gR(n)){let o=e.find(s=>s.matches(n.sourceLine));o&&(n.label=o.label)}}a(r,"visitor"),Hd(t,r,"bottomUp")}a(qO,"labelLines");function tJ(t){function e(r){if(AR(r)&&r.label===void 0){let n=r.subs.filter(o=>!nd(o));n.length===1&&(r.label=n[0].label)}}a(e,"visitor"),Hd(t,e,"bottomUp")}a(tJ,"labelVirtualInherited");function HO(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=a(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}a(HO,"buildLabelRules");function r1e(t){let r=eJ(t,a(function(n){if(n.subs.length===0||n.subs.findIndex(c=>c.label==="closer"||c.label==="opener")===-1)return n;let o=[],s;for(let c=0;c<n.subs.length;c++){let l=n.subs[c],u=n.subs[c-1];if(l.label==="opener"&&u!==void 0&&gR(u))u.subs.push(l),l.subs.forEach(d=>u.subs.push(d)),l.subs=[];else if(l.label==="closer"&&s!==void 0&&(gR(l)||AR(l))&&l.indentation>=s.indentation){let d=o.length-1;for(;d>0&&nd(o[d]);)d-=1;if(s.subs.push(...o.splice(d+1)),l.subs.length>0){let p=s.subs.findIndex(A=>A.label!=="newVirtual"),m=s.subs.slice(0,p),h=s.subs.slice(p),g=h.length>0?[ZCe(l.indentation,h,"newVirtual")]:[];s.subs=[...m,...g,l]}else s.subs.push(l)}else o.push(l),nd(l)||(s=l)}return n.subs=o,n},"rebuilder"));return tGe(t,n=>n==="newVirtual"),r}a(r1e,"combineClosersAndOpeners");function rGe(t,e=nd,r){return eJ(t,a(function(o){if(o.subs.length<=1)return o;let s=[],c=[],l,u=!1;function d(p=!1){if(l!==void 0&&(s.length>0||!p)){let m=ZCe(l,c,r);s.push(m)}else c.forEach(m=>s.push(m))}a(d,"flushBlockIntoNewSubs");for(let p=0;p<o.subs.length;p++){let m=o.subs[p],h=e(m);!h&&u&&(d(),c=[]),u=h,c.push(m),nd(m)||(l=l??m.indentation)}return d(!0),o.subs=s,o},"rebuilder"))}a(rGe,"groupBlocks");function CR(t){return eJ(t,a(function(r){return AR(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&AR(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}a(CR,"flattenVirtual");var m$t={opener:/^[[({]/,closer:/^[\])}]/},h$t=HO(m$t),nGe={};function n1e(t,e){nGe[t]=e}a(n1e,"registerLanguageSpecificParser");function vR(t,e){let r=p$t(t),n=nGe[e??""];return n?n(r):(qO(r,h$t),r1e(r))}a(vR,"parseTree");var g$t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},A$t=HO(g$t);function iGe(t){let e=t;return qO(e,A$t),e=r1e(e),e=CR(e),tJ(e),Hd(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!nd(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}a(iGe,"processJava");f();var y$t={heading:/^# /,subheading:/^## /,subsubheading:/### /},C$t=HO(y$t);function oGe(t){let e=t;if(qO(e,C$t),nd(e))return e;function r(s){if(s.label==="heading")return 1;if(s.label==="subheading")return 2;if(s.label==="subsubheading")return 3}a(r,"headingLevel");let n=[e],o=[...e.subs];e.subs=[];for(let s of o){let c=r(s);if(c===void 0||nd(s))n[n.length-1].subs.push(s);else{for(;n.length<c;)n.push(n[n.length-1]);for(n[c-1].subs.push(s),n[c]=s;n.length>c+1;)n.pop()}}return e=rGe(e),e=CR(e),tJ(e),e}a(oGe,"processMarkdown");f();function sGe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}a(sGe,"deparseLine");n1e("markdown",oGe);n1e("java",iGe);var v$t={worthUp:.9,worthSibling:.88,worthDown:.8};function i1e(t,e,r=Oi(),n=v$t){let o=yR(t,s=>s?1:void 0);return Hd(o,s=>{if(nd(s))return;let c=s.subs.reduce((l,u)=>Math.max(l,u.label??0),0);s.label=Math.max(s.label??0,c*n.worthUp)},"bottomUp"),Hd(o,s=>{if(nd(s))return;let c=s.subs.map(d=>d.label??0),l=[...c];for(let d=0;d<c.length;d++)c[d]!==0&&(l=l.map((p,m)=>Math.max(p,Math.pow(n.worthSibling,Math.abs(d-m))*c[d])));let u=s.label;u!==void 0&&(l=l.map(d=>Math.max(d,n.worthDown*u))),s.subs.forEach((d,p)=>d.label=l[p])},"topDown"),x$t(o,e,r)}a(i1e,"fromTreeWithFocussedLines");function x$t(t,e,r=Oi()){let n=t1e(t,[],(o,s)=>((o.type==="line"||o.type==="blank")&&s.push(o.type==="line"?[sGe(o).trimEnd(),o.label??0]:["",o.label??0]),s),"topDown");return new Ht(n,e,r)}a(x$t,"fromTreeWithValuedLines");function H0(t,e=!0,r=!0,n,o=Oi()){let s=typeof t=="string"?vR(t):vR(t.source,t.languageId);CR(s);let c=yR(s,l=>e&&l!=="closer");return Hd(c,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&Hd(c,l=>{if(l.label){let u=!1;for(let d of[...l.subs].reverse())d.label&&!u?u=!0:d.label=!1}else for(let u of l.subs)u.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),r&&Hd(c,l=>{l.label||=(gR(l)||nd(l))&&l.lineNumber==0},"topDown"),i1e(c,n,o)}a(H0,"elidableTextForSourceCode");f();var $O=class t{constructor(e,r,n,o="strict",s){this.text=e;this._value=r;this._cost=n;this.metadata=s;this.markedForRemoval=!1;if(e.includes(`
`)&&o!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&o!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&o!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(o=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{a(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>Oi().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Ht=class t{constructor(e,r,n=Oi()){this.metadata=r;this.tokenizer=n;this.lines=[];let o=[];for(let s of e){let c=Array.isArray(s)?s[1]:1,l=Array.isArray(s)?s[0]:s;typeof l=="string"?l.split(`
`).forEach(u=>o.push(new $O(u,c,n.tokenLength(u+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(u=>o.push(u.copy().adjustValue(c))):"source"in l&&"languageId"in l&&H0(l).lines.forEach(u=>o.push(u.copy().adjustValue(c)))}this.lines=o}static{a(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>Oi().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,o="removeLeastDesirable",s=this.tokenizer,c="topToBottom"){if(s.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:l,totalCost:u,priorityQueue:d}=b$t(this.lines,o);if(u<=e)return o1e(l);I$t(d,c);let p=u;for(;p>e&&d.length>0;){let h=d.shift().originalIndex,g=l[h];if(g.markedForRemoval)continue;let A=n?T$t(l,h):"",y=aGe(A,r,s,g);l[h]=y,p-=g.cost,p+=y.cost;let v=h+1;if(v<l.length){let I=l[v];rJ(I,r)&&(p-=I.cost,I.markedForRemoval=!0)}let b=h-1;if(b>=0){let I=l[b];rJ(I,r)&&(p-=I.cost,I.markedForRemoval=!0)}}if(p>e)return o1e([aGe("",r,s)]);let m=l.filter(h=>!h.markedForRemoval);for(let h=m.length-1;h>0;h--)rJ(m[h],r)&&rJ(m[h-1],r)&&m.splice(h,1);return o1e(m)}};function E$t(t){return t?.text.match(/^\s*/)?.[0]??""}a(E$t,"getIndentation");function rJ(t,e){return t?.text.trim()===e.trim()}a(rJ,"isEllipsis");function o1e(t){return{getText:a(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:a(()=>t,"getLines")}}a(o1e,"produceElidedText");function b$t(t,e){let r=0,n=[];return{lines:t.map((s,c)=>{let l=s.copy();return e==="removeLeastBangForBuck"&&l.adjustValue(1/l.cost),r+=l.cost,n.push({originalIndex:c,value:l.value}),l}),totalCost:r,priorityQueue:n}}a(b$t,"initializeElisionContext");function I$t(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}a(I$t,"sortPriorityQueue");function T$t(t,e){let r="";for(let n=e;n>=0;n--){let o=t[n];if(!o.markedForRemoval&&o.text.trim()!==""){r=E$t(o);break}}return r}a(T$t,"getClosestIndentation");function aGe(t,e,r,n){let o=t+e;return new $O(o,1/0,r.tokenLength(o+`
`),"loose",n?.metadata)}a(aGe,"getNewEllipsis");f();var cGe=require("fs");async function lGe(t,e,r,n,o){let s=new Map,c=0;for(let m of t){let h=m.node.fileName.toLowerCase(),g=s.get(h);g?g.symbols.push(m):s.set(h,{symbols:[m],topRank:c}),c++}if(s.delete(r.toLowerCase()),s.size===0)return[];let l=e,u=e/Math.min(4,s.size),d=[],p=Array.from(s.keys());p.sort((m,h)=>{let g=s.get(m).topRank,A=s.get(h).topRank;return g-A});for(let m of p){let h=s.get(m).symbols;if(h.length===0)continue;let g=h[0].node.fileName,A=h.reduce((y,v)=>y+v.node.extentRange.length,0);for(let y of h){if(l<=5)return d;wx(o);let v=y.node.extentRange.length/A,b=Math.min(l,v*u),I=(await w$t([y])).elide(b).getText();l-=n.tokenLength(I),d.push({uri:g,value:I})}}return d}a(lGe,"symbolRangesToCodeSnippets");async function w$t(t){if(t.length===0)return new Ht([]);let e=t[0].node.fileName,r=[],n="";try{let o=rs(e);o&&(n=(await cGe.promises.readFile(o)).toString())}catch{}for(let o of t)uGe(o,n).forEach(s=>r.push(s));return new Ht(r)}a(w$t,"sameFileSymbolRangeToElidableText");function uGe(t,e){let n=[],o=t.node,s=e.substring(s1e(e,o.commentRange.start),o.commentRange.end);n.push([a1e(s),1-3e-4]);let c=s1e(e,o.bodyRange.start),l=s1e(e,o.extentRange.start),u=o.bodyRange.length===0?e.substring(l,o.extentRange.end):e.substring(o.commentRange.length===0?l:o.commentRange.end,c);if(hR(o.kind)&&(u="BEGIN "+u.trimStart()),n.push([a1e(u),1-1e-4]),t.children.length>0)for(let d of t.children)n.push(...uGe(d,e));else{let d=1-(hR(t.node.kind)?3e-4:4e-4),p=e.substring(c,o.bodyRange.end);n.push([a1e(p),d])}return hR(o.kind)&&n.push(["END "+u.substring(6),1-1e-4]),n.filter(d=>d[0].length>0)}a(uGe,"prepareForElidableText");function s1e(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}a(s1e,"shiftLeftToNearestLineEndingOrAlphanumeric");function a1e(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}a(a1e,"trimLineEndingsAndTrailingWhitespace");var c1e=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{a(this,"ContextRetrievalStrategy")}},kT=class extends c1e{static{a(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,o){super(e,r),this.caseSensitive=n,this.typesOnly=o}async getContextAtPositionAsync(e,r,n,o,s,c){let l=this.referenceExtractors.get(o);if(!l)return[];wx(c);let u=await l.extractReferences(e,r);wx(c);let d=Array.from(u);d.sort((g,A)=>this.compareSymbolRangesByProximityToCaret(g,A,n));let p=[],m=new Set,h=await this.findDefinitionsViaUnqualifiedNames(d,s,c);this.typesOnly&&(h=h.filter(g=>hR(g.kind)));for(let g of h)m.has(JSON.stringify(g))||(m.add(JSON.stringify(g)),p.push(await this.makeSymbolRangeNodeFromDefinition(g,c)));return p}async findDefinitionsViaUnqualifiedNames(e,r,n){let o=Array.from(new Set(e.map(m=>m.unqualifiedName))),s=!this.caseSensitive,c=await this.index.findPotentialDefinitionsAsync(o,s,n),l=a(m=>s?m.toLowerCase():m,"lowercaseIfCaseInsensitive"),u=a(m=>l(m.unqualifiedName),"getSymbolKey"),d=new Map;for(let m of c){let h=u(m),g=d.get(h)??[];d.set(h,[...g,m])}let p=[];for(let m of o){let h=d.get(l(m));if(!(!h||h.length>r.mlcpMaxSymbolMatches)){if(p.length+h.length>r.mlcpMaxContextItems){p.push(...h.slice(0,r.mlcpMaxContextItems-p.length));break}p.push(...h)}}return p}async makeSymbolRangeNodeFromDefinition(e,r){if(wx(r),hR(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),o=await Promise.all(n.map(s=>this.makeSymbolRangeNodeFromDefinition(s,r)));return{node:e,children:o}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let o=e.extentRange.end<=n,s=r.extentRange.end<=n;if(o&&!s)return-1;if(!o&&s)return 1;let c=Math.abs(e.extentRange.start-n),l=Math.abs(r.extentRange.start-n);return c-l}},nJ=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new kT(e,r,!0,!0)),this.strategies.set("java",new kT(e,r,!0,!0)),this.strategies.set("python",new kT(e,r,!0,!1)),this.strategies.set("typescript",new kT(e,r,!0,!0)),this.strategies.set("typescriptreact",new kT(e,r,!0,!0)),this.strategies.set("javascript",new kT(e,r,!0,!1))}static{a(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,o,s,c,l){let u=await this.getContextAtPositionAsync(e,r,n,o,s,l);wx(l);let d=Oi();return lGe(u,c,e,d,l)}async getContextAtPositionAsync(e,r,n,o,s,c){return this.strategies.has(o)?this.strategies.get(o).getContextAtPositionAsync(e,r,n,o,s,c):[]}};f();f();f();f();var xR={Id:"id"},$0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},po={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var iJ=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new l1e(xR.Id)}static{a(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},WO=class t extends iJ{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${$0.FilePath}');`]);this.fields=[new VO($0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new _p($0.LastWriteTimeUtc,{notNull:!0})]}static{a(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},jO=class t extends iJ{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${po.DocumentId}', '${po.ExtentStart}', '${po.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${po.UnqualifiedName}');`],`FOREIGN KEY(${po.DocumentId}) REFERENCES Document(${xR.Id}) ON DELETE CASCADE`);this.fields=[new _p(po.DocumentId),new VO(po.FullyQualifiedName,{notNull:!0}),new VO(po.UnqualifiedName,{notNull:!0}),new _p(po.CommentStart,{notNull:!0}),new _p(po.CommentLength,{notNull:!0}),new _p(po.NameStart,{notNull:!0}),new _p(po.NameLength,{notNull:!0}),new _p(po.BodyStart,{notNull:!0}),new _p(po.BodyLength,{notNull:!0}),new _p(po.ExtentStart,{notNull:!0}),new _p(po.ExtentLength,{notNull:!0}),new _p(po.SymbolKind,{notNull:!0}),new _p(po.RefKind,{notNull:!0})]}static{a(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},GO=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{a(this,"SQLField")}},VO=class extends GO{static{a(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,o=this.unique?"UNIQUE":void 0,s=[e,r,n,o].filter(c=>c).join(" ");return`'${this.name}' VARCHAR(500) ${s}`}},_p=class extends GO{static{a(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},l1e=class extends GO{static{a(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var oJ=class{static{a(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=a(o=>new Promise((s,c)=>{e.run(o,l=>{l?c(l):s()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let o of n)await r(o)}async insert(e,r){let n=await this.init;n&&await new Promise((o,s)=>{let c=this.queryGenerator.insertQuery(r,e.length);n.run(c,e.map(l=>Object.values(l)).flat(),function(l){l?s(l):o(this)})})}async getAllRows(){let e=await this.init;return e?Ah(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return Ah(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${xR.Id} = ?`,[e])}},_x=class t extends oJ{static{a(this,"DocumentTable")}static{this.tableName=WO.tableName}createQueryGenerator(){return new WO}async updateTimestamp(e,r){let n=await this.init;n&&await Ah(n,`UPDATE ${t.tableName} SET ${$0.LastWriteTimeUtc} = ? WHERE ${$0.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await Ah(r,`DELETE FROM ${t.tableName} WHERE ${$0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?Ah(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${$0.FilePath} = ?`,[e]):[]}},ul=class t extends oJ{static{a(this,"SymbolTable")}static{this.tableName=jO.tableName}createQueryGenerator(){return new jO}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return Ah(r,`DELETE FROM ${t.tableName} WHERE ${po.DocumentId} = ?`,[e])}};async function Ah(t,e,r){return new Promise((n,o)=>t.all(e,r,(s,c)=>{s&&o(s),n(c)}))}a(Ah,"runPromisifiedDBQuery");var cJ=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${_x.tableName} ON ${ul.tableName}.${po.DocumentId} = ${_x.tableName}.${xR.Id}`;this.db=this.initDb(e),this.documentTable=new _x(this.db),this.symbolTable=new ul(this.db)}static{a(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Ne(EGe()))}catch(o){console.error("Error loading sqlite3 module:",o);return}let n;try{n=await new Promise((o,s)=>{let c=new r.default.Database(e,l=>{l?s(l):o(c)})})}catch(o){console.error("Error initializing database:",o);return}return await Ah(n,"pragma journal_mode=wal",[]),await Ah(n,"pragma synchronous=normal",[]),await Ah(n,"pragma optimize=0x10002",[]),await Ah(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(o=>o?n(o):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${ul.tableName}`,this.innerJoinStatement,`WHERE ${po.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${po.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),o=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${ul.tableName}`,this.innerJoinStatement,`WHERE ${po.UnqualifiedName} ${o}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${ul.tableName}`,this.innerJoinStatement,`WHERE ${po.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${ul.tableName}`,this.innerJoinStatement,`WHERE ${_x.tableName}.${$0.FilePath} = ? AND ${ul.tableName}.${po.ExtentStart} <= ? AND (${ul.tableName}.${po.ExtentStart} + ${ul.tableName}.${po.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${ul.tableName}`,this.innerJoinStatement,`WHERE ${_x.tableName}.${$0.FilePath} = ? AND ${ul.tableName}.${po.ExtentStart} >= ? AND (${ul.tableName}.${po.ExtentStart} + ${ul.tableName}.${po.ExtentLength}) <= ?`,`ORDER BY ${ul.tableName}.${po.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${ul.tableName}`,this.innerJoinStatement,`WHERE ${_x.tableName}.${$0.FilePath} = ? AND ${ul.tableName}.${po.FullyQualifiedName} LIKE ?`,`ORDER BY ${ul.tableName}.${po.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,Ah(n,e,r)):[]}};var lJ=class{static{a(this,"SQLStorageReaderWriter")}constructor(e){this.database=new cJ(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let o=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(o.id),n.length>0&&await this.database.insertSymbols(n.map(s=>({documentId:o.id,fullyQualifiedName:s.fullyQualifiedName,unqualifiedName:s.unqualifiedName,commentStart:s.commentRange.start,commentLength:s.commentRange.length,nameStart:s.nameRange.start,nameLength:s.nameRange.length,bodyStart:s.bodyRange.start,bodyLength:s.bodyRange.length,extentStart:s.extentRange.start,extentLength:s.extentRange.length,symbolKind:s.kind,refKind:s.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return e3(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let o=[],c=0;for(;c<e.length;){let l=e.slice(c,c+500);c+=500;let u=await this.database.querySymbolsUsingUnqualifiedNames(l,r);o.push(...u),wx(n)}return e3(o)}async getDefinitionsAsync(e){return e3(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return e3(n)}async findSymbolsContainedByRangeAsync(e,r,n){return e3(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return e3(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let o=await this.database.getDocument(e);if(!o)throw Error("Unable to insert document");return o[0]}};function e3(t){return t.map(e=>new gh(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new $s(e.commentStart,e.commentLength),new $s(e.nameStart,e.nameLength),new $s(e.bodyStart,e.bodyLength),new $s(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}a(e3,"symbolsToSymbolRanges");var dJ=Ne(require("fs/promises"));var uJ=class{static{a(this,"Index")}constructor(e,r,n,o){this.storage=new lJ(e),this.symbolExtractors=r,this.importExtractors=n,this.params=o}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=rs(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let o;try{o=await dJ.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let s=o.mtimeMs,c=await this.storage.getDocumentAsync(e);if(c&&c.lastWriteTimeUtc>=s)return;let l=this.symbolExtractors.get(r);if(!l)return;let u=(await dJ.readFile(n)).toString(),d=await l.extractSymbols(e,u),p=d;if(this.params?.mlcpEnableImports){let m=this.importExtractors.get(r);if(m){let h=await m.extractSymbols(e,u);p=[...d,...h]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,s,p)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};f();function h1e(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>B$t(r))}a(h1e,"isIndexWorkerData");var KO=class{static{a(this,"IndexNotification")}constructor(e){this.operation=e}},PT=class extends KO{constructor(r,n){super(n);this.id=r;this.id=r}static{a(this,"IndexRequest")}},fJ=class extends KO{constructor(r){super($d.Cancel);this.messageIdToCancel=r}static{a(this,"CancellationNotification")}},$d={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},pJ=class extends PT{constructor(r,n,o){super(r,$d.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=o}static{a(this,"CreateIndexRequest")}},mJ=class extends PT{constructor(r,n){super(r,$d.RemoveIndex);this.baseWorkspaceFolderUri=n}static{a(this,"RemoveIndexRequest")}},hJ=class extends PT{constructor(r,n,o){super(r,$d.AddOrInvalidated);this.fileUri=n;this.languageId=o}static{a(this,"AddOrInvalidatedRequest")}},gJ=class extends PT{constructor(r,n){super(r,$d.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{a(this,"GetAllDocumentsRequest")}},AJ=class extends PT{constructor(r,n,o,s,c,l){super(r,$d.GetContext);this.fileUri=n;this.code=o;this.offset=s;this.languageId=c;this.params=l}static{a(this,"GetContextRequest")}},yJ=class extends PT{static{a(this,"ExitRequest")}constructor(e){super(e,$d.Exit)}},SA=class extends KO{constructor(r,n,o){super($d.Response);this.id=r;this.error=n;this.data=o;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{a(this,"ResponseMessage")}};function B$t(t){return"databaseFilePath"in t&&"rootPath"in t}a(B$t,"isIndexableWorkspaceFolder");var bGe=Ne(Ai()),DT=require("worker_threads");var CJ=class{static{a(this,"IndexInfo")}constructor(e,r){this.index=new uJ(e,XY,Zje,r),this.contextRetreival=new nJ(this.index.reader,Xje)}},g1e=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let o of r){let s=ac(o.rootPath);this.indices.set(s,new CJ(o.databaseFilePath,n))}this.port=e,this.port.on("message",o=>void this.dispatchMessage(o,this.indices,this.cancellationTokens))}static{a(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let o=new bGe.CancellationTokenSource;n.set(e.id,o);let s;switch(e.operation){case $d.AddOrInvalidated:s=await t.dispatchAddOrInvalidate(e,r,o.token);break;case $d.GetContext:s=await t.dispatchGetContext(e,r,o.token);break;case $d.Cancel:n.get(e.id)?.cancel(),s=new SA(e.id,void 0,void 0);break;case $d.Exit:s=await this.dispatchExit(e,r,o.token);break;case $d.CreateIndex:s=t.dispatchCreateIndex(e,r,o.token);break;case $d.RemoveIndex:s=await t.dispatchRemoveIndex(e,r,o.token);break;case $d.GetAllDocumentsInWorkspace:s=await t.GetAllDocumentsInWorkspaceRequest(e,r,o.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}s&&this.port?.postMessage(s),n.get(e.id)?.dispose(),n.delete(e.id)}catch(o){if(!(o instanceof Error))throw o;this.port?.postMessage(new SA(e.id,o,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let o=ac(e.baseWorkspaceFolderUri),s,c;return r.has(o)?c=await r.get(o).index.getDocumentFilePaths():s=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new SA(e.id,s,c)}static async dispatchAddOrInvalidate(e,r,n){let o=ac(e.fileUri),s=t.getIndexInfo(o,r)?.index,c;return s?await s.indexFile(e.fileUri,e.languageId):c=new Error(`Index not found for ${e.fileUri}`),new SA(e.id,c,void 0)}static async dispatchGetContext(e,r,n){let o=ac(e.fileUri),s=t.getIndexInfo(o,r)?.contextRetreival,c,l;return s?l=await s.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):c=new Error(`ContextRetrieval not found for ${e.fileUri}`),new SA(e.id,c,l)}async dispatchExit(e,r,n){for(let o of r.values())await o.index.dispose();r.clear(),this.port?.postMessage(new SA(e.id,void 0,void 0)),this.port?.close()}static dispatchCreateIndex(e,r,n){let o=ac(e.baseWorkspaceFolderUri);return r.has(o)||r.set(o,new CJ(e.databaseFilePath)),new SA(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let o=ac(e.baseWorkspaceFolderUri);if(r.has(o)){let s=r.get(o);s&&await s.index.dispose(),r.delete(o)}return new SA(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,o]of r)if(e.startsWith(n))return o}};function IGe(){return h1e(DT.workerData)}a(IGe,"isIndexWorker");function TGe(){let t=DT.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!h1e(DT.workerData))throw new Error("Worker data must provide a valid database path.");let e=DT.workerData.cwd;process.cwd=()=>e,new g1e(t,DT.workerData.indexWorkspaceRoots,DT.workerData.params)}a(TGe,"runIndexWorker");f();var YO=Ne(require("util"));function wGe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...o){if(EC(t)==="dev")return t.get(el).logIt(t,n,"console",...o)}return a(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...o)=>{n||(o.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",YO.format(...o)))},e.dir=(n,o)=>r(4,YO.inspect(n,o)),e.log=e.debug.bind(e),e.trace=(...n)=>{let o=new Error(YO.format(...n));o.name="Trace",e.log(o)},e}a(wGe,"createConsole");var XE=Ne(require("fs/promises")),mIt=Ne(require("os")),a$=Ne(require("path")),_g=Ne(kA()),hIt=require("worker_threads");f();f();var nX=require("assert");f();f();var GWt={right:JWt,center:XWt},VWt=0,YJ=1,zWt=2,JJ=3,H1e=class{static{a(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(o=>o.split("	")),n=0;return r.forEach(o=>{o.length>1&&W0.stringWidth(o[0])>n&&(n=Math.min(Math.floor(this.width*.5),W0.stringWidth(o[0])))}),r.forEach(o=>{this.div(...o.map((s,c)=>({text:s.trim(),padding:this.measurePadding(s),width:c===0&&o.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=W0.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,o)=>{let s="";n.forEach((c,l)=>{let{width:u}=e[l],d=this.negatePadding(e[l]),p=c;if(d>W0.stringWidth(c)&&(p+=" ".repeat(d-W0.stringWidth(c))),e[l].align&&e[l].align!=="left"&&this.wrap){let h=GWt[e[l].align];p=h(p,d),W0.stringWidth(p)<d&&(p+=" ".repeat((u||0)-W0.stringWidth(p)-1))}let m=e[l].padding||[0,0,0,0];m[JJ]&&(s+=" ".repeat(m[JJ])),s+=vVe(e[l],p,"| "),s+=p,s+=vVe(e[l],p," |"),m[YJ]&&(s+=" ".repeat(m[YJ])),o===0&&r.length>0&&(s=this.renderInline(s,r[r.length-1]))}),r.push({text:s.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),o=n?n[0].length:0,s=r.text,c=W0.stringWidth(s.trimRight());return r.span?this.wrap?o<c?e:(r.hidden=!0,s.trimRight()+" ".repeat(o-c)+e.trimLeft()):(r.hidden=!0,s+e):e}rasterize(e){let r=[],n=this.columnWidths(e),o;return e.forEach((s,c)=>{s.width=n[c],this.wrap?o=W0.wrap(s.text,this.negatePadding(s),{hard:!0}).split(`
`):o=s.text.split(`
`),s.border&&(o.unshift("."+"-".repeat(this.negatePadding(s)+2)+"."),o.push("'"+"-".repeat(this.negatePadding(s)+2)+"'")),s.padding&&(o.unshift(...new Array(s.padding[VWt]||0).fill("")),o.push(...new Array(s.padding[zWt]||0).fill(""))),o.forEach((l,u)=>{r[u]||r.push([]);let d=r[u];for(let p=0;p<c;p++)d[p]===void 0&&d.push("");d.push(l)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[JJ]||0)+(e.padding[YJ]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(c=>c.width||W0.stringWidth(c.text));let r=e.length,n=this.width,o=e.map(c=>{if(c.width)return r--,n-=c.width,c.width}),s=r?Math.floor(n/r):0;return o.map((c,l)=>c===void 0?Math.max(s,KWt(e[l])):c)}};function vVe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}a(vVe,"addBorder");function KWt(t){let e=t.padding||[],r=1+(e[JJ]||0)+(e[YJ]||0);return t.border?r+4:r}a(KWt,"_minWidth");function YWt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}a(YWt,"getWindowWidth");function JWt(t,e){t=t.trim();let r=W0.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}a(JWt,"alignRight");function XWt(t,e){t=t.trim();let r=W0.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}a(XWt,"alignCenter");var W0;function xVe(t,e){return W0=e,new H1e({width:t?.width||YWt(),wrap:t?.wrap})}a(xVe,"cliui");f();var EVe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function $1e(t){return t.replace(EVe,"")}a($1e,"stripAnsi");function bVe(t,e){let[r,n]=t.match(EVe)||["",""];t=$1e(t);let o="";for(let s=0;s<t.length;s++)s!==0&&s%e===0&&(o+=`
`),o+=t.charAt(s);return r&&n&&(o=`${r}${o}${n}`),o}a(bVe,"wrap");function W1e(t){return xVe(t,{stringWidth:a(e=>[...e].length,"stringWidth"),stripAnsi:$1e,wrap:bVe})}a(W1e,"ui");f();var i3=require("path"),XJ=require("fs");function j1e(t,e){let r=(0,i3.resolve)(".",t),n;for((0,XJ.statSync)(r).isDirectory()||(r=(0,i3.dirname)(r));;){if(n=e(r,(0,XJ.readdirSync)(r)),n)return(0,i3.resolve)(r,n);if(r=(0,i3.dirname)(n=r),n===r)break}}a(j1e,"default");var QVe=require("util"),UVe=require("fs"),qVe=require("url");f();var SVe=require("util"),rX=require("path");f();function TR(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,o=t.match(/^-+/);for(let s=o?o[0].length:0;s<t.length;s++){let c=t.charAt(s);n&&(n=!1,c=c.toUpperCase()),s!==0&&(c==="-"||c==="_")?n=!0:c!=="-"&&c!=="_"&&(r+=c)}return r}}a(TR,"camelCase");function ZJ(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let o=0;o<t.length;o++){let s=r.charAt(o),c=t.charAt(o);s!==c&&o>0?n+=`${e}${r.charAt(o)}`:n+=c}return n}a(ZJ,"decamelize");function eX(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}a(eX,"looksLikeNumber");f();f();function IVe(t){if(Array.isArray(t))return t.map(c=>typeof c!="string"?c+"":c);t=t.trim();let e=0,r=null,n=null,o=null,s=[];for(let c=0;c<t.length;c++){if(r=n,n=t.charAt(c),n===" "&&!o){r!==" "&&e++;continue}n===o?o=null:(n==="'"||n==='"')&&!o&&(o=n),s[e]||(s[e]=""),s[e]+=n}return s}a(IVe,"tokenizeArgString");f();var bh;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(bh||(bh={}));var Sx,tX=class{static{a(this,"YargsParser")}constructor(e){Sx=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),o=IVe(e),s=typeof e=="string",c=ZWt(Object.assign(Object.create(null),n.alias)),l=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),u=Object.assign(Object.create(null),n.default),d=n.configObjects||[],p=n.envPrefix,m=l["populate--"],h=m?"--":"_",g=Object.create(null),A=Object.create(null),y=n.__||Sx.format,v={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,I=new RegExp("^--"+l["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(ce){let ue=typeof ce=="object"?ce.key:ce,He=Object.keys(ce).map(function(Me){return{boolean:"bools",string:"strings",number:"numbers"}[Me]}).filter(Boolean).pop();He&&(v[He][ue]=!0),v.arrays[ue]=!0,v.keys.push(ue)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(ce){v.bools[ce]=!0,v.keys.push(ce)}),[].concat(n.string||[]).filter(Boolean).forEach(function(ce){v.strings[ce]=!0,v.keys.push(ce)}),[].concat(n.number||[]).filter(Boolean).forEach(function(ce){v.numbers[ce]=!0,v.keys.push(ce)}),[].concat(n.count||[]).filter(Boolean).forEach(function(ce){v.counts[ce]=!0,v.keys.push(ce)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(ce){v.normalize[ce]=!0,v.keys.push(ce)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([ce,ue])=>{typeof ue=="number"&&(v.nargs[ce]=ue,v.keys.push(ce))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([ce,ue])=>{typeof ue=="function"&&(v.coercions[ce]=ue,v.keys.push(ce))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(ce){v.configs[ce]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([ce,ue])=>{(typeof ue=="boolean"||typeof ue=="function")&&(v.configs[ce]=ue)})),Qe(n.key,c,n.default,v.arrays),Object.keys(u).forEach(function(ce){(v.aliases[ce]||[]).forEach(function(ue){u[ue]=u[ce]})});let S=null;We();let k=[],N=Object.assign(Object.create(null),{_:[]}),F={};for(let ce=0;ce<o.length;ce++){let ue=o[ce],He=ue.replace(/^-{3,}/,"---"),Me,be,Ge,rt,ht,Ot;if(ue!=="--"&&/^-/.test(ue)&&Rt(ue))O(ue);else if(He.match(/^---+(=|$)/)){O(ue);continue}else if(ue.match(/^--.+=/)||!l["short-option-groups"]&&ue.match(/^-.+=/))rt=ue.match(/^--?([^=]+)=([\s\S]*)$/),rt!==null&&Array.isArray(rt)&&rt.length>=3&&(we(rt[1],v.arrays)?ce=z(ce,rt[1],o,rt[2]):we(rt[1],v.nargs)!==!1?ce=Y(ce,rt[1],o,rt[2]):V(rt[1],rt[2],!0));else if(ue.match(I)&&l["boolean-negation"])rt=ue.match(I),rt!==null&&Array.isArray(rt)&&rt.length>=2&&(be=rt[1],V(be,we(be,v.arrays)?[!1]:!1));else if(ue.match(/^--.+/)||!l["short-option-groups"]&&ue.match(/^-[^-]+/))rt=ue.match(/^--?(.+)/),rt!==null&&Array.isArray(rt)&&rt.length>=2&&(be=rt[1],we(be,v.arrays)?ce=z(ce,be,o):we(be,v.nargs)!==!1?ce=Y(ce,be,o):(ht=o[ce+1],ht!==void 0&&(!ht.match(/^-/)||ht.match(b))&&!we(be,v.bools)&&!we(be,v.counts)||/^(true|false)$/.test(ht)?(V(be,ht),ce++):V(be,At(be))));else if(ue.match(/^-.\..+=/))rt=ue.match(/^-([^=]+)=([\s\S]*)$/),rt!==null&&Array.isArray(rt)&&rt.length>=3&&V(rt[1],rt[2]);else if(ue.match(/^-.\..+/)&&!ue.match(b))ht=o[ce+1],rt=ue.match(/^-(.\..+)/),rt!==null&&Array.isArray(rt)&&rt.length>=2&&(be=rt[1],ht!==void 0&&!ht.match(/^-/)&&!we(be,v.bools)&&!we(be,v.counts)?(V(be,ht),ce++):V(be,At(be)));else if(ue.match(/^-[^-]+/)&&!ue.match(b)){Ge=ue.slice(1,-1).split(""),Me=!1;for(let Xt=0;Xt<Ge.length;Xt++){if(ht=ue.slice(Xt+2),Ge[Xt+1]&&Ge[Xt+1]==="="){Ot=ue.slice(Xt+3),be=Ge[Xt],we(be,v.arrays)?ce=z(ce,be,o,Ot):we(be,v.nargs)!==!1?ce=Y(ce,be,o,Ot):V(be,Ot),Me=!0;break}if(ht==="-"){V(Ge[Xt],ht);continue}if(/[A-Za-z]/.test(Ge[Xt])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(ht)&&we(ht,v.bools)===!1){V(Ge[Xt],ht),Me=!0;break}if(Ge[Xt+1]&&Ge[Xt+1].match(/\W/)){V(Ge[Xt],ht),Me=!0;break}else V(Ge[Xt],At(Ge[Xt]))}be=ue.slice(-1)[0],!Me&&be!=="-"&&(we(be,v.arrays)?ce=z(ce,be,o):we(be,v.nargs)!==!1?ce=Y(ce,be,o):(ht=o[ce+1],ht!==void 0&&(!/^(-|--)[^-]/.test(ht)||ht.match(b))&&!we(be,v.bools)&&!we(be,v.counts)||/^(true|false)$/.test(ht)?(V(be,ht),ce++):V(be,At(be))))}else if(ue.match(/^-[0-9]$/)&&ue.match(b)&&we(ue.slice(1),v.bools))be=ue.slice(1),V(be,At(be));else if(ue==="--"){k=o.slice(ce+1);break}else if(l["halt-at-non-option"]){k=o.slice(ce);break}else O(ue)}Z(N,!0),Z(N,!1),J(N),j(),re(N,v.aliases,u,!0),ie(N),l["set-placeholder-key"]&&ne(N),Object.keys(v.counts).forEach(function(ce){fe(N,ce.split("."))||V(ce,0)}),m&&k.length&&(N[h]=[]),k.forEach(function(ce){N[h].push(ce)}),l["camel-case-expansion"]&&l["strip-dashed"]&&Object.keys(N).filter(ce=>ce!=="--"&&ce.includes("-")).forEach(ce=>{delete N[ce]}),l["strip-aliased"]&&[].concat(...Object.keys(c).map(ce=>c[ce])).forEach(ce=>{l["camel-case-expansion"]&&ce.includes("-")&&delete N[ce.split(".").map(ue=>TR(ue)).join(".")],delete N[ce]});function O(ce){let ue=ee("_",ce);(typeof ue=="string"||typeof ue=="number")&&N._.push(ue)}a(O,"pushPositional");function Y(ce,ue,He,Me){let be,Ge=we(ue,v.nargs);if(Ge=typeof Ge!="number"||isNaN(Ge)?1:Ge,Ge===0)return Ce(Me)||(S=Error(y("Argument unexpected for: %s",ue))),V(ue,At(ue)),ce;let rt=Ce(Me)?0:1;if(l["nargs-eats-options"])He.length-(ce+1)+rt<Ge&&(S=Error(y("Not enough arguments following: %s",ue))),rt=Ge;else{for(be=ce+1;be<He.length&&(!He[be].match(/^-[^0-9]/)||He[be].match(b)||Rt(He[be]));be++)rt++;rt<Ge&&(S=Error(y("Not enough arguments following: %s",ue)))}let ht=Math.min(rt,Ge);for(!Ce(Me)&&ht>0&&(V(ue,Me),ht--),be=ce+1;be<ht+ce+1;be++)V(ue,He[be]);return ce+ht}a(Y,"eatNargs");function z(ce,ue,He,Me){let be=[],Ge=Me||He[ce+1],rt=we(ue,v.nargs);if(we(ue,v.bools)&&!/^(true|false)$/.test(Ge))be.push(!0);else if(Ce(Ge)||Ce(Me)&&/^-/.test(Ge)&&!b.test(Ge)&&!Rt(Ge)){if(u[ue]!==void 0){let ht=u[ue];be=Array.isArray(ht)?ht:[ht]}}else{Ce(Me)||be.push(H(ue,Me,!0));for(let ht=ce+1;ht<He.length&&!(!l["greedy-arrays"]&&be.length>0||rt&&typeof rt=="number"&&be.length>=rt||(Ge=He[ht],/^-/.test(Ge)&&!b.test(Ge)&&!Rt(Ge)));ht++)ce=ht,be.push(H(ue,Ge,s))}return typeof rt=="number"&&(rt&&be.length<rt||isNaN(rt)&&be.length===0)&&(S=Error(y("Not enough arguments following: %s",ue))),V(ue,be),ce}a(z,"eatArray");function V(ce,ue,He=s){if(/-/.test(ce)&&l["camel-case-expansion"]){let Ge=ce.split(".").map(function(rt){return TR(rt)}).join(".");U(ce,Ge)}let Me=H(ce,ue,He),be=ce.split(".");ye(N,be,Me),v.aliases[ce]&&v.aliases[ce].forEach(function(Ge){let rt=Ge.split(".");ye(N,rt,Me)}),be.length>1&&l["dot-notation"]&&(v.aliases[be[0]]||[]).forEach(function(Ge){let rt=Ge.split("."),ht=[].concat(be);ht.shift(),rt=rt.concat(ht),(v.aliases[ce]||[]).includes(rt.join("."))||ye(N,rt,Me)}),we(ce,v.normalize)&&!we(ce,v.arrays)&&[ce].concat(v.aliases[ce]||[]).forEach(function(rt){Object.defineProperty(F,rt,{enumerable:!0,get(){return ue},set(ht){ue=typeof ht=="string"?Sx.normalize(ht):ht}})})}a(V,"setArg");function U(ce,ue){v.aliases[ce]&&v.aliases[ce].length||(v.aliases[ce]=[ue],g[ue]=!0),v.aliases[ue]&&v.aliases[ue].length||U(ue,ce)}a(U,"addNewAlias");function H(ce,ue,He){He&&(ue=ejt(ue)),(we(ce,v.bools)||we(ce,v.counts))&&typeof ue=="string"&&(ue=ue==="true");let Me=Array.isArray(ue)?ue.map(function(be){return ee(ce,be)}):ee(ce,ue);return we(ce,v.counts)&&(Ce(Me)||typeof Me=="boolean")&&(Me=G1e()),we(ce,v.normalize)&&we(ce,v.arrays)&&(Array.isArray(ue)?Me=ue.map(be=>Sx.normalize(be)):Me=Sx.normalize(ue)),Me}a(H,"processValue");function ee(ce,ue){return!l["parse-positional-numbers"]&&ce==="_"||!we(ce,v.strings)&&!we(ce,v.bools)&&!Array.isArray(ue)&&(eX(ue)&&l["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${ue}`)))||!Ce(ue)&&we(ce,v.numbers))&&(ue=Number(ue)),ue}a(ee,"maybeCoerceNumber");function J(ce){let ue=Object.create(null);re(ue,v.aliases,u),Object.keys(v.configs).forEach(function(He){let Me=ce[He]||ue[He];if(Me)try{let be=null,Ge=Sx.resolve(Sx.cwd(),Me),rt=v.configs[He];if(typeof rt=="function"){try{be=rt(Ge)}catch(ht){be=ht}if(be instanceof Error){S=be;return}}else be=Sx.require(Ge);G(be)}catch(be){be.name==="PermissionDenied"?S=be:ce[He]&&(S=Error(y("Invalid JSON config file: %s",Me)))}})}a(J,"setConfig");function G(ce,ue){Object.keys(ce).forEach(function(He){let Me=ce[He],be=ue?ue+"."+He:He;typeof Me=="object"&&Me!==null&&!Array.isArray(Me)&&l["dot-notation"]?G(Me,be):(!fe(N,be.split("."))||we(be,v.arrays)&&l["combine-arrays"])&&V(be,Me)})}a(G,"setConfigObject");function j(){typeof d<"u"&&d.forEach(function(ce){G(ce)})}a(j,"setConfigObjects");function Z(ce,ue){if(typeof p>"u")return;let He=typeof p=="string"?p:"",Me=Sx.env();Object.keys(Me).forEach(function(be){if(He===""||be.lastIndexOf(He,0)===0){let Ge=be.split("__").map(function(rt,ht){return ht===0&&(rt=rt.substring(He.length)),TR(rt)});(ue&&v.configs[Ge.join(".")]||!ue)&&!fe(ce,Ge)&&V(Ge.join("."),Me[be])}})}a(Z,"applyEnvVars");function ie(ce){let ue,He=new Set;Object.keys(ce).forEach(function(Me){if(!He.has(Me)&&(ue=we(Me,v.coercions),typeof ue=="function"))try{let be=ee(Me,ue(ce[Me]));[].concat(v.aliases[Me]||[],Me).forEach(Ge=>{He.add(Ge),ce[Ge]=be})}catch(be){S=be}})}a(ie,"applyCoercions");function ne(ce){return v.keys.forEach(ue=>{~ue.indexOf(".")||typeof ce[ue]>"u"&&(ce[ue]=void 0)}),ce}a(ne,"setPlaceholderKeys");function re(ce,ue,He,Me=!1){Object.keys(He).forEach(function(be){fe(ce,be.split("."))||(ye(ce,be.split("."),He[be]),Me&&(A[be]=!0),(ue[be]||[]).forEach(function(Ge){fe(ce,Ge.split("."))||ye(ce,Ge.split("."),He[be])}))})}a(re,"applyDefaultsAndAliases");function fe(ce,ue){let He=ce;l["dot-notation"]||(ue=[ue.join(".")]),ue.slice(0,-1).forEach(function(be){He=He[be]||{}});let Me=ue[ue.length-1];return typeof He!="object"?!1:Me in He}a(fe,"hasKey");function ye(ce,ue,He){let Me=ce;l["dot-notation"]||(ue=[ue.join(".")]),ue.slice(0,-1).forEach(function(Ot){Ot=TVe(Ot),typeof Me=="object"&&Me[Ot]===void 0&&(Me[Ot]={}),typeof Me[Ot]!="object"||Array.isArray(Me[Ot])?(Array.isArray(Me[Ot])?Me[Ot].push({}):Me[Ot]=[Me[Ot],{}],Me=Me[Ot][Me[Ot].length-1]):Me=Me[Ot]});let be=TVe(ue[ue.length-1]),Ge=we(ue.join("."),v.arrays),rt=Array.isArray(He),ht=l["duplicate-arguments-array"];!ht&&we(be,v.nargs)&&(ht=!0,(!Ce(Me[be])&&v.nargs[be]===1||Array.isArray(Me[be])&&Me[be].length===v.nargs[be])&&(Me[be]=void 0)),He===G1e()?Me[be]=G1e(Me[be]):Array.isArray(Me[be])?ht&&Ge&&rt?Me[be]=l["flatten-duplicate-arrays"]?Me[be].concat(He):(Array.isArray(Me[be][0])?Me[be]:[Me[be]]).concat([He]):!ht&&!!Ge==!!rt?Me[be]=He:Me[be]=Me[be].concat([He]):Me[be]===void 0&&Ge?Me[be]=rt?He:[He]:ht&&!(Me[be]===void 0||we(be,v.counts)||we(be,v.bools))?Me[be]=[Me[be],He]:Me[be]=He}a(ye,"setKey");function Qe(...ce){ce.forEach(function(ue){Object.keys(ue||{}).forEach(function(He){v.aliases[He]||(v.aliases[He]=[].concat(c[He]||[]),v.aliases[He].concat(He).forEach(function(Me){if(/-/.test(Me)&&l["camel-case-expansion"]){let be=TR(Me);be!==He&&v.aliases[He].indexOf(be)===-1&&(v.aliases[He].push(be),g[be]=!0)}}),v.aliases[He].concat(He).forEach(function(Me){if(Me.length>1&&/[A-Z]/.test(Me)&&l["camel-case-expansion"]){let be=ZJ(Me,"-");be!==He&&v.aliases[He].indexOf(be)===-1&&(v.aliases[He].push(be),g[be]=!0)}}),v.aliases[He].forEach(function(Me){v.aliases[Me]=[He].concat(v.aliases[He].filter(function(be){return Me!==be}))}))})})}a(Qe,"extendAliases");function we(ce,ue){let He=[].concat(v.aliases[ce]||[],ce),Me=Object.keys(ue),be=He.find(Ge=>Me.includes(Ge));return be?ue[be]:!1}a(we,"checkAllAliases");function Xe(ce){let ue=Object.keys(v);return[].concat(ue.map(Me=>v[Me])).some(function(Me){return Array.isArray(Me)?Me.includes(ce):Me[ce]})}a(Xe,"hasAnyFlag");function Oe(ce,...ue){return[].concat(...ue).some(function(Me){let be=ce.match(Me);return be&&Xe(be[1])})}a(Oe,"hasFlagsMatching");function ut(ce){if(ce.match(b)||!ce.match(/^-[^-]+/))return!1;let ue=!0,He,Me=ce.slice(1).split("");for(let be=0;be<Me.length;be++){if(He=ce.slice(be+2),!Xe(Me[be])){ue=!1;break}if(Me[be+1]&&Me[be+1]==="="||He==="-"||/[A-Za-z]/.test(Me[be])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(He)||Me[be+1]&&Me[be+1].match(/\W/))break}return ue}a(ut,"hasAllShortFlags");function Rt(ce){return l["unknown-options-as-args"]&&Et(ce)}a(Rt,"isUnknownOptionAsArg");function Et(ce){return ce=ce.replace(/^-{3,}/,"--"),ce.match(b)||ut(ce)?!1:!Oe(ce,/^-+([^=]+?)=[\s\S]*$/,I,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}a(Et,"isUnknownOption");function At(ce){return!we(ce,v.bools)&&!we(ce,v.counts)&&`${ce}`in u?u[ce]:de(qe(ce))}a(At,"defaultValue");function de(ce){return{[bh.BOOLEAN]:!0,[bh.STRING]:"",[bh.NUMBER]:void 0,[bh.ARRAY]:[]}[ce]}a(de,"defaultForType");function qe(ce){let ue=bh.BOOLEAN;return we(ce,v.strings)?ue=bh.STRING:we(ce,v.numbers)?ue=bh.NUMBER:we(ce,v.bools)?ue=bh.BOOLEAN:we(ce,v.arrays)&&(ue=bh.ARRAY),ue}a(qe,"guessType");function Ce(ce){return ce===void 0}a(Ce,"isUndefined");function We(){Object.keys(v.counts).find(ce=>we(ce,v.arrays)?(S=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",ce)),!0):we(ce,v.nargs)?(S=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",ce)),!0):!1)}return a(We,"checkConfiguration"),{aliases:Object.assign({},v.aliases),argv:Object.assign(F,N),configuration:l,defaulted:Object.assign({},A),error:S,newAliases:Object.assign({},g)}}};function ZWt(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(o){e.push([].concat(t[o],o))});n;){n=!1;for(let o=0;o<e.length;o++)for(let s=o+1;s<e.length;s++)if(e[o].filter(function(l){return e[s].indexOf(l)!==-1}).length){e[o]=e[o].concat(e[s]),e.splice(s,1),n=!0;break}}return e.forEach(function(o){o=o.filter(function(c,l,u){return u.indexOf(c)===l});let s=o.pop();s!==void 0&&typeof s=="string"&&(r[s]=o)}),r}a(ZWt,"combineAliases");function G1e(t){return t!==void 0?t+1:1}a(G1e,"increment");function TVe(t){return t==="__proto__"?"___proto___":t}a(TVe,"sanitizeKey");function ejt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}a(ejt,"stripQuotes");var RVe=require("fs");var V1e,z1e,K1e,wVe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,_Ve=(z1e=(V1e=process==null?void 0:process.versions)===null||V1e===void 0?void 0:V1e.node)!==null&&z1e!==void 0?z1e:(K1e=process==null?void 0:process.version)===null||K1e===void 0?void 0:K1e.slice(1);if(_Ve&&Number(_Ve.match(/^([^.]+)/)[1])<wVe)throw Error(`yargs parser supports a minimum Node.js version of ${wVe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var tjt=process?process.env:{},kVe=new tX({cwd:process.cwd,env:a(()=>tjt,"env"),format:SVe.format,normalize:rX.normalize,resolve:rX.resolve,require:a(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,RVe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),n7=a(function(e,r){return kVe.parse(e.slice(),r).argv},"Parser");n7.detailed=function(t,e){return kVe.parse(t.slice(),e)};n7.camelCase=TR;n7.decamelize=ZJ;n7.looksLikeNumber=eX;var PVe=n7;var DA=require("path");f();function rjt(){return njt()?0:1}a(rjt,"getProcessArgvBinIndex");function njt(){return ijt()&&!process.defaultApp}a(njt,"isBundledElectronApp");function ijt(){return!!process.versions.electron}a(ijt,"isElectronApp");function DVe(){return process.argv[rjt()]}a(DVe,"getProcessArgvBin");f();var ca=class t extends Error{static{a(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var o3=require("fs"),BVe=require("util"),NVe=require("path");var MVe={fs:{readFileSync:o3.readFileSync,writeFile:o3.writeFile},format:BVe.format,resolve:NVe.resolve,exists:a(t=>{try{return(0,o3.statSync)(t).isFile()}catch{return!1}},"exists")};f();var PA,Y1e=class{static{a(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=a(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),PA.format.apply(PA.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),o=e.shift(),s=a(function(){},"cb");typeof e[e.length-1]=="function"&&(s=e.pop()),this.cache[this.locale]||this._readLocaleFile();let c=o===1?r:n;this.cache[this.locale][r]&&(c=this.cache[this.locale][r][o===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:s})):s();let l=[c];return~c.indexOf("%d")&&l.push(o),PA.format.apply(PA.format,l.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(o,s){let c=r[s+1];n+=o,typeof c<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,o=r.locale,s=r.cb,c=this._resolveLocaleFile(n,o),l=JSON.stringify(this.cache[o],null,2);PA.fs.writeFile(c,l,"utf-8",function(u){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),s(u)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{PA.fs.readFileSync&&(e=JSON.parse(PA.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=PA.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let o=PA.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(o)&&(n=o)}return n}_fileExistsSync(e){return PA.exists(e)}};function LVe(t,e){PA=e;let r=new Y1e(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}a(LVe,"y18n");var ojt=a(t=>LVe(t,MVe),"y18n"),FVe=ojt;var sjt="require is not supported by ESM",OVe="loading a directory of commands is not supported yet for ESM",i7;try{i7=(0,qVe.fileURLToPath)(importMetaUrlShim)}catch{i7=process.cwd()}var ajt=i7.substring(0,i7.lastIndexOf("node_modules")),HVe={assert:{notStrictEqual:nX.notStrictEqual,strictEqual:nX.strictEqual},cliui:W1e,findUp:j1e,getEnv:a(t=>process.env[t],"getEnv"),inspect:QVe.inspect,getCallerFile:a(()=>{throw new ca(OVe)},"getCallerFile"),getProcessArgvBin:DVe,mainFilename:ajt||process.cwd(),Parser:PVe,path:{basename:DA.basename,dirname:DA.dirname,extname:DA.extname,relative:DA.relative,resolve:DA.resolve},process:{argv:a(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:a((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:a(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:UVe.readFileSync,require:a(()=>{throw new ca(sjt)},"require"),requireDirectory:a(()=>{throw new ca(OVe)},"requireDirectory"),stringWidth:a(t=>[...t].length,"stringWidth"),y18n:FVe({directory:(0,DA.resolve)(i7,"../../../locales"),updateFiles:!1})};f();f();f();function kf(t,e,r,n){r.assert.notStrictEqual(t,e,n)}a(kf,"assertNotStrictEqual");function J1e(t,e){e.assert.strictEqual(typeof t,"string")}a(J1e,"assertSingleKey");function s3(t){return Object.keys(t)}a(s3,"objectKeys");f();function la(t){return!!t&&!!t.then&&typeof t.then=="function"}a(la,"isPromise");f();f();f();function LT(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,o=r.shift();if(!o)throw new Error(`No command found in: ${t}`);let s={cmd:o.replace(n,""),demanded:[],optional:[]};return r.forEach((c,l)=>{let u=!1;c=c.replace(/\s/g,""),/\.+[\]>]/.test(c)&&l===r.length-1&&(u=!0),/^\[/.test(c)?s.optional.push({cmd:c.replace(n,"").split("|"),variadic:u}):s.demanded.push({cmd:c.replace(n,"").split("|"),variadic:u})}),s}a(LT,"parseCommand");var cjt=["first","second","third","fourth","fifth","sixth"];function Fr(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[LT(`cmd ${t}`),e,r]}a(n,"parseArgs");try{let o=0,[s,c,l]=n(),u=[].slice.call(c);for(;u.length&&u[u.length-1]===void 0;)u.pop();let d=l||u.length;if(d<s.demanded.length)throw new ca(`Not enough arguments provided. Expected ${s.demanded.length} but received ${u.length}.`);let p=s.demanded.length+s.optional.length;if(d>p)throw new ca(`Too many arguments provided. Expected max ${p} but received ${d}.`);s.demanded.forEach(m=>{let h=u.shift(),g=$Ve(h);m.cmd.filter(y=>y===g||y==="*").length===0&&WVe(g,m.cmd,o),o+=1}),s.optional.forEach(m=>{if(u.length===0)return;let h=u.shift(),g=$Ve(h);m.cmd.filter(y=>y===g||y==="*").length===0&&WVe(g,m.cmd,o),o+=1})}catch(o){console.warn(o.stack)}}a(Fr,"argsert");function $Ve(t){return Array.isArray(t)?"array":t===null?"null":typeof t}a($Ve,"guessType");function WVe(t,e,r){throw new ca(`Invalid ${cjt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}a(WVe,"argumentTypeError");var iX=class{static{a(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,o=!1){if(Fr("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let s=0;s<e.length;s++){if(typeof e[s]!="function")throw Error("middleware must be a function");let c=e[s];c.applyBeforeValidation=r,c.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let s=e;s.applyBeforeValidation=r,s.global=n,s.mutates=o,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(o=>{let s=[...n[r]||[],r];return o.option?!s.includes(o.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function jVe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}a(jVe,"commandMiddlewareFactory");function wR(t,e,r,n){return r.reduce((o,s)=>{if(s.applyBeforeValidation!==n)return o;if(s.mutates){if(s.applied)return o;s.applied=!0}if(la(o))return o.then(c=>Promise.all([c,s(c,e)])).then(([c,l])=>Object.assign(c,l));{let c=s(o,e);return la(c)?c.then(l=>Object.assign(o,l)):Object.assign(o,c)}},t)}a(wR,"applyMiddleware");f();function _R(t,e,r=n=>{throw n}){try{let n=ljt(t)?t():t;return la(n)?n.then(o=>e(o)):e(n)}catch(n){return r(n)}}a(_R,"maybeAsyncResult");function ljt(t){return typeof t=="function"}a(ljt,"isFunction");f();function X1e(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}a(X1e,"whichModule");var a3=/(^\*)|(^\$0)/,Z1e=class{static{a(this,"CommandInstance")}constructor(e,r,n,o){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=o,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,o){o=o||{},typeof o.recurse!="boolean"&&(o.recurse=!1),Array.isArray(o.extensions)||(o.extensions=["js"]);let s=typeof o.visit=="function"?o.visit:c=>c;o.visit=(c,l,u)=>{let d=s(c,l,u);if(d){if(this.requireCache.has(l))return d;this.requireCache.add(l),this.addHandler(d)}return d},this.shim.requireDirectory({require:r,filename:n},e,o)}addHandler(e,r,n,o,s,c){let l=[],u=jVe(s);if(o=o||(()=>{}),Array.isArray(e))if(ujt(e))[e,...l]=e;else for(let d of e)this.addHandler(d);else if(fjt(e)){let d=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(d=[].concat(d).concat(e.aliases)),this.addHandler(d,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(GVe(n)){this.addHandler([e].concat(l),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let d=LT(e);l=l.map(h=>LT(h).cmd);let p=!1,m=[d.cmd].concat(l).filter(h=>a3.test(h)?(p=!0,!1):!0);m.length===0&&p&&m.push("$0"),p&&(d.cmd=m[0],l=m.slice(1),e=e.replace(a3,d.cmd)),l.forEach(h=>{this.aliasMap[h]=d.cmd}),r!==!1&&this.usage.command(e,r,p,l,c),this.handlers[d.cmd]={original:e,description:r,handler:o,builder:n||{},middlewares:u,deprecated:c,demanded:d.demanded,optional:d.optional},p&&(this.defaultCommand=this.handlers[d.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,o,s,c){let l=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,u=r.getInternalMethods().getContext(),d=u.commands.slice(),p=!e;e&&(u.commands.push(e),u.fullCommands.push(l.original));let m=this.applyBuilderUpdateUsageAndParse(p,l,r,n.aliases,d,o,s,c);return la(m)?m.then(h=>this.applyMiddlewareAndGetResult(p,l,h.innerArgv,u,s,h.aliases,r)):this.applyMiddlewareAndGetResult(p,l,m.innerArgv,u,s,m.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,o,s,c,l,u){let d=r.builder,p=n;if(oX(d)){n.getInternalMethods().getUsageInstance().freeze();let m=d(n.getInternalMethods().reset(o),u);if(la(m))return m.then(h=>(p=zVe(h)?h:n,this.parseAndUpdateUsage(e,r,p,s,c,l)))}else djt(d)&&(n.getInternalMethods().getUsageInstance().freeze(),p=n.getInternalMethods().reset(o),Object.keys(r.builder).forEach(m=>{p.option(m,d[m])}));return this.parseAndUpdateUsage(e,r,p,s,c,l)}parseAndUpdateUsage(e,r,n,o,s,c){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(o,r),r.description);let l=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,s,c);return la(l)?l.then(u=>({aliases:n.parsed.aliases,innerArgv:u})):{aliases:n.parsed.aliases,innerArgv:l}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=a3.test(r.original)?r.original.replace(a3,"").trim():r.original,o=e.filter(s=>!a3.test(s));return o.push(n),`$0 ${o.join(" ")}`}handleValidationAndGetResult(e,r,n,o,s,c,l,u){if(!c.getInternalMethods().getHasOutput()){let d=c.getInternalMethods().runValidation(s,u,c.parsed.error,e);n=_R(n,p=>(d(p),p))}if(r.handler&&!c.getInternalMethods().getHasOutput()){c.getInternalMethods().setHasOutput();let d=!!c.getOptions().configuration["populate--"];c.getInternalMethods().postProcess(n,d,!1,!1),n=wR(n,c,l,!1),n=_R(n,p=>{let m=r.handler(p);return la(m)?m.then(()=>p):p}),e||c.getInternalMethods().getUsageInstance().cacheHelpMessage(),la(n)&&!c.getInternalMethods().hasParseCallback()&&n.catch(p=>{try{c.getInternalMethods().getUsageInstance().fail(null,p)}catch{}})}return e||(o.commands.pop(),o.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,o,s,c,l){let u={};if(s)return n;l.getInternalMethods().getHasOutput()||(u=this.populatePositionals(r,n,o,l));let d=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),p=wR(n,l,d,!0);return la(p)?p.then(m=>this.handleValidationAndGetResult(e,r,m,o,c,l,d,u)):this.handleValidationAndGetResult(e,r,p,o,c,l,d,u)}populatePositionals(e,r,n,o){r._=r._.slice(n.commands.length);let s=e.demanded.slice(0),c=e.optional.slice(0),l={};for(this.validation.positionalCount(s.length,r._.length);s.length;){let u=s.shift();this.populatePositional(u,r,l)}for(;c.length;){let u=c.shift();this.populatePositional(u,r,l)}return r._=n.commands.concat(r._.map(u=>""+u)),this.postProcessPositionals(r,l,this.cmdToParseOptions(e.original),o),l}populatePositional(e,r,n){let o=e.cmd[0];e.variadic?n[o]=r._.splice(0).map(String):r._.length&&(n[o]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=LT(e);return n.demanded.forEach(o=>{let[s,...c]=o.cmd;o.variadic&&(r.array.push(s),r.default[s]=[]),r.alias[s]=c,r.demand[s]=!0}),n.optional.forEach(o=>{let[s,...c]=o.cmd;o.variadic&&(r.array.push(s),r.default[s]=[]),r.alias[s]=c}),r}postProcessPositionals(e,r,n,o){let s=Object.assign({},o.getOptions());s.default=Object.assign(n.default,s.default);for(let d of Object.keys(n.alias))s.alias[d]=(s.alias[d]||[]).concat(n.alias[d]);s.array=s.array.concat(n.array),s.config={};let c=[];if(Object.keys(r).forEach(d=>{r[d].map(p=>{s.configuration["unknown-options-as-args"]&&(s.key[d]=!0),c.push(`--${d}`),c.push(p)})}),!c.length)return;let l=Object.assign({},s.configuration,{"populate--":!1}),u=this.shim.Parser.detailed(c,Object.assign({},s,{configuration:l}));if(u.error)o.getInternalMethods().getUsageInstance().fail(u.error.message,u.error);else{let d=Object.keys(r);Object.keys(r).forEach(p=>{d.push(...u.aliases[p])}),Object.keys(u.argv).forEach(p=>{d.includes(p)&&(r[p]||(r[p]=u.argv[p]),!this.isInConfigs(o,p)&&!this.isDefaulted(o,p)&&Object.prototype.hasOwnProperty.call(e,p)&&Object.prototype.hasOwnProperty.call(u.argv,p)&&(Array.isArray(e[p])||Array.isArray(u.argv[p]))?e[p]=[].concat(e[p],u.argv[p]):e[p]=u.argv[p])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(o=>Object.prototype.hasOwnProperty.call(o,r))||n.some(o=>Object.prototype.hasOwnProperty.call(o,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=a3.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(oX(r))return r(e,!0);GVe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=X1e(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let o of[e,r,n]){if(typeof o=="string"||o===!1)return o;kf(o,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();kf(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function VVe(t,e,r,n){return new Z1e(t,e,r,n)}a(VVe,"command");function GVe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}a(GVe,"isCommandBuilderDefinition");function ujt(t){return t.every(e=>typeof e=="string")}a(ujt,"isCommandAndAliases");function oX(t){return typeof t=="function"}a(oX,"isCommandBuilderCallback");function djt(t){return typeof t=="object"}a(djt,"isCommandBuilderOptionDefinitions");function fjt(t){return typeof t=="object"&&!Array.isArray(t)}a(fjt,"isCommandHandlerDefinition");f();f();function FT(t={},e=()=>!0){let r={};return s3(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}a(FT,"objFilter");f();function OT(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}a(OT,"setBlocking");function pjt(t){return typeof t=="boolean"}a(pjt,"isBoolean");function YVe(t,e){let r=e.y18n.__,n={},o=[];n.failFn=a(function(H){o.push(H)},"failFn");let s=null,c=null,l=!0;n.showHelpOnFail=a(function(H=!0,ee){let[J,G]=typeof H=="string"?[!0,H]:[H,ee];return t.getInternalMethods().isGlobalContext()&&(c=G),s=G,l=J,n},"showHelpOnFailFn");let u=!1;n.fail=a(function(H,ee){let J=t.getInternalMethods().getLoggerInstance();if(o.length)for(let G=o.length-1;G>=0;--G){let j=o[G];if(pjt(j)){if(ee)throw ee;if(H)throw Error(H)}else j(H,ee,n)}else{if(t.getExitProcess()&&OT(!0),!u){u=!0,l&&(t.showHelp("error"),J.error()),(H||ee)&&J.error(H||ee);let G=s||c;G&&((H||ee)&&J.error(""),J.error(G))}if(ee=ee||new ca(H),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,ee);throw ee}},"fail");let d=[],p=!1;n.usage=(U,H)=>U===null?(p=!0,d=[],n):(p=!1,d.push([U,H||""]),n),n.getUsage=()=>d,n.getUsageDisabled=()=>p,n.getPositionalGroupName=()=>r("Positionals:");let m=[];n.example=(U,H)=>{m.push([U,H||""])};let h=[];n.command=a(function(H,ee,J,G,j=!1){J&&(h=h.map(Z=>(Z[2]=!1,Z))),h.push([H,ee||"",J,G,j])},"command"),n.getCommands=()=>h;let g={};n.describe=a(function(H,ee){Array.isArray(H)?H.forEach(J=>{n.describe(J,ee)}):typeof H=="object"?Object.keys(H).forEach(J=>{n.describe(J,H[J])}):g[H]=ee},"describe"),n.getDescriptions=()=>g;let A=[];n.epilog=U=>{A.push(U)};let y=!1,v;n.wrap=U=>{y=!0,v=U},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(v=Y(),y=!0),v);let b="__yargsString__:";n.deferY18nLookup=U=>b+U,n.help=a(function(){if(k)return k;S();let H=t.customScriptName?t.$0:e.path.basename(t.$0),ee=t.getDemandedOptions(),J=t.getDemandedCommands(),G=t.getDeprecatedOptions(),j=t.getGroups(),Z=t.getOptions(),ie=[];ie=ie.concat(Object.keys(g)),ie=ie.concat(Object.keys(ee)),ie=ie.concat(Object.keys(J)),ie=ie.concat(Object.keys(Z.default)),ie=ie.filter(F),ie=Object.keys(ie.reduce((Oe,ut)=>(ut!=="_"&&(Oe[ut]=!0),Oe),{}));let ne=n.getWrap(),re=e.cliui({width:ne,wrap:!!ne});if(!p){if(d.length)d.forEach(Oe=>{re.div({text:`${Oe[0].replace(/\$0/g,H)}`}),Oe[1]&&re.div({text:`${Oe[1]}`,padding:[1,0,0,0]})}),re.div();else if(h.length){let Oe=null;J._?Oe=`${H} <${r("command")}>
`:Oe=`${H} [${r("command")}]
`,re.div(`${Oe}`)}}if(h.length>1||h.length===1&&!h[0][2]){re.div(r("Commands:"));let Oe=t.getInternalMethods().getContext(),ut=Oe.commands.length?`${Oe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(h=h.sort((Et,At)=>Et[0].localeCompare(At[0])));let Rt=H?`${H} `:"";h.forEach(Et=>{let At=`${Rt}${ut}${Et[0].replace(/^\$0 ?/,"")}`;re.span({text:At,padding:[0,2,0,2],width:I(h,ne,`${H}${ut}`)+4},{text:Et[1]});let de=[];Et[2]&&de.push(`[${r("default")}]`),Et[3]&&Et[3].length&&de.push(`[${r("aliases:")} ${Et[3].join(", ")}]`),Et[4]&&(typeof Et[4]=="string"?de.push(`[${r("deprecated: %s",Et[4])}]`):de.push(`[${r("deprecated")}]`)),de.length?re.div({text:de.join(" "),padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}let fe=(Object.keys(Z.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ie=ie.filter(Oe=>!t.parsed.newAliases[Oe]&&fe.every(ut=>(Z.alias[ut]||[]).indexOf(Oe)===-1));let ye=r("Options:");j[ye]||(j[ye]=[]),N(ie,Z.alias,j,ye);let Qe=a(Oe=>/^--/.test(sX(Oe)),"isLongSwitch"),we=Object.keys(j).filter(Oe=>j[Oe].length>0).map(Oe=>{let ut=j[Oe].filter(F).map(Rt=>{if(fe.includes(Rt))return Rt;for(let Et=0,At;(At=fe[Et])!==void 0;Et++)if((Z.alias[At]||[]).includes(Rt))return At;return Rt});return{groupName:Oe,normalizedKeys:ut}}).filter(({normalizedKeys:Oe})=>Oe.length>0).map(({groupName:Oe,normalizedKeys:ut})=>{let Rt=ut.reduce((Et,At)=>(Et[At]=[At].concat(Z.alias[At]||[]).map(de=>Oe===n.getPositionalGroupName()?de:(/^[0-9]$/.test(de)?Z.boolean.includes(At)?"-":"--":de.length>1?"--":"-")+de).sort((de,qe)=>Qe(de)===Qe(qe)?0:Qe(de)?1:-1).join(", "),Et),{});return{groupName:Oe,normalizedKeys:ut,switches:Rt}});if(we.filter(({groupName:Oe})=>Oe!==n.getPositionalGroupName()).some(({normalizedKeys:Oe,switches:ut})=>!Oe.every(Rt=>Qe(ut[Rt])))&&we.filter(({groupName:Oe})=>Oe!==n.getPositionalGroupName()).forEach(({normalizedKeys:Oe,switches:ut})=>{Oe.forEach(Rt=>{Qe(ut[Rt])&&(ut[Rt]=mjt(ut[Rt],4))})}),we.forEach(({groupName:Oe,normalizedKeys:ut,switches:Rt})=>{re.div(Oe),ut.forEach(Et=>{let At=Rt[Et],de=g[Et]||"",qe=null;de.includes(b)&&(de=r(de.substring(b.length))),Z.boolean.includes(Et)&&(qe=`[${r("boolean")}]`),Z.count.includes(Et)&&(qe=`[${r("count")}]`),Z.string.includes(Et)&&(qe=`[${r("string")}]`),Z.normalize.includes(Et)&&(qe=`[${r("string")}]`),Z.array.includes(Et)&&(qe=`[${r("array")}]`),Z.number.includes(Et)&&(qe=`[${r("number")}]`);let Ce=a(ue=>typeof ue=="string"?`[${r("deprecated: %s",ue)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),We=[Et in G?Ce(G[Et]):null,qe,Et in ee?`[${r("required")}]`:null,Z.choices&&Z.choices[Et]?`[${r("choices:")} ${n.stringifiedValues(Z.choices[Et])}]`:null,O(Z.default[Et],Z.defaultDescription[Et])].filter(Boolean).join(" ");re.span({text:sX(At),padding:[0,2,0,2+KVe(At)],width:I(Rt,ne)+4},de);let ce=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;We&&!ce?re.div({text:We,padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}),m.length&&(re.div(r("Examples:")),m.forEach(Oe=>{Oe[0]=Oe[0].replace(/\$0/g,H)}),m.forEach(Oe=>{Oe[1]===""?re.div({text:Oe[0],padding:[0,2,0,2]}):re.div({text:Oe[0],padding:[0,2,0,2],width:I(m,ne)+4},{text:Oe[1]})}),re.div()),A.length>0){let Oe=A.map(ut=>ut.replace(/\$0/g,H)).join(`
`);re.div(`${Oe}
`)}return re.toString().replace(/\s*$/,"")},"help");function I(U,H,ee){let J=0;return Array.isArray(U)||(U=Object.values(U).map(G=>[G])),U.forEach(G=>{J=Math.max(e.stringWidth(ee?`${ee} ${sX(G[0])}`:sX(G[0]))+KVe(G[0]),J)}),H&&(J=Math.min(J,parseInt((H*.5).toString(),10))),J}a(I,"maxWidth");function S(){let U=t.getDemandedOptions(),H=t.getOptions();(Object.keys(H.alias)||[]).forEach(ee=>{H.alias[ee].forEach(J=>{g[J]&&n.describe(ee,g[J]),J in U&&t.demandOption(ee,U[J]),H.boolean.includes(J)&&t.boolean(ee),H.count.includes(J)&&t.count(ee),H.string.includes(J)&&t.string(ee),H.normalize.includes(J)&&t.normalize(ee),H.array.includes(J)&&t.array(ee),H.number.includes(J)&&t.number(ee)})})}a(S,"normalizeAliases");let k;n.cacheHelpMessage=function(){k=this.help()},n.clearCachedHelpMessage=function(){k=void 0},n.hasCachedHelpMessage=function(){return!!k};function N(U,H,ee,J){let G=[],j=null;return Object.keys(ee).forEach(Z=>{G=G.concat(ee[Z])}),U.forEach(Z=>{j=[Z].concat(H[Z]),j.some(ie=>G.indexOf(ie)!==-1)||ee[J].push(Z)}),G}a(N,"addUngroupedKeys");function F(U){return t.getOptions().hiddenOptions.indexOf(U)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}a(F,"filterHiddenOptions"),n.showHelp=U=>{let H=t.getInternalMethods().getLoggerInstance();U||(U="error"),(typeof U=="function"?U:H[U])(n.help())},n.functionDescription=U=>["(",U.name?e.Parser.decamelize(U.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=a(function(H,ee){let J="",G=ee||", ",j=[].concat(H);return!H||!j.length||j.forEach(Z=>{J.length&&(J+=G),J+=JSON.stringify(Z)}),J},"stringifiedValues");function O(U,H){let ee=`[${r("default:")} `;if(U===void 0&&!H)return null;if(H)ee+=H;else switch(typeof U){case"string":ee+=`"${U}"`;break;case"object":ee+=JSON.stringify(U);break;default:ee+=U}return`${ee}]`}a(O,"defaultString");function Y(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}a(Y,"windowWidth");let z=null;n.version=U=>{z=U},n.showVersion=U=>{let H=t.getInternalMethods().getLoggerInstance();U||(U="error"),(typeof U=="function"?U:H[U])(z)},n.reset=a(function(H){return s=null,u=!1,d=[],p=!1,A=[],m=[],h=[],g=FT(g,ee=>!H[ee]),n},"reset");let V=[];return n.freeze=a(function(){V.push({failMessage:s,failureOutput:u,usages:d,usageDisabled:p,epilogs:A,examples:m,commands:h,descriptions:g})},"freeze"),n.unfreeze=a(function(H=!1){let ee=V.pop();ee&&(H?(g={...ee.descriptions,...g},h=[...ee.commands,...h],d=[...ee.usages,...d],m=[...ee.examples,...m],A=[...ee.epilogs,...A]):{failMessage:s,failureOutput:u,usages:d,usageDisabled:p,epilogs:A,examples:m,commands:h,descriptions:g}=ee)},"unfreeze"),n}a(YVe,"usage");function eve(t){return typeof t=="object"}a(eve,"isIndentedText");function mjt(t,e){return eve(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}a(mjt,"addIndentation");function KVe(t){return eve(t)?t.indentation:0}a(KVe,"getIndentation");function sX(t){return eve(t)?t.text:t}a(sX,"getText");f();f();var JVe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,XVe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var tve=class{static{a(this,"Completion")}constructor(e,r,n,o){var s,c,l;this.yargs=e,this.usage=r,this.command=n,this.shim=o,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(l=((s=this.shim.getEnv("SHELL"))===null||s===void 0?void 0:s.includes("zsh"))||((c=this.shim.getEnv("ZSH_NAME"))===null||c===void 0?void 0:c.includes("zsh")))!==null&&l!==void 0?l:!1}defaultCompletion(e,r,n,o){let s=this.command.getCommandHandlers();for(let l=0,u=e.length;l<u;++l)if(s[e[l]]&&s[e[l]].builder){let d=s[e[l]].builder;if(oX(d)){this.indexAfterLastReset=l+1;let p=this.yargs.getInternalMethods().reset();return d(p,!0),p.argv}}let c=[];this.commandCompletions(c,e,n),this.optionCompletions(c,e,r,n),this.choicesFromOptionsCompletions(c,e,r,n),this.choicesFromPositionalsCompletions(c,e,r,n),o(null,c)}commandCompletions(e,r,n){let o=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&o[o.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(s=>{let c=LT(s[0]).cmd;if(r.indexOf(c)===-1)if(!this.zshShell)e.push(c);else{let l=s[1]||"";e.push(c.replace(/:/g,"\\:")+":"+l)}})}optionCompletions(e,r,n,o){if((o.match(/^-/)||o===""&&e.length===0)&&!this.previousArgHasChoices(r)){let s=this.yargs.getOptions(),c=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(s.key).forEach(l=>{let u=!!s.configuration["boolean-negation"]&&s.boolean.includes(l);!c.includes(l)&&!s.hiddenOptions.includes(l)&&!this.argsContainKey(r,l,u)&&this.completeOptionKey(l,e,o,u&&!!s.default[l])})}}choicesFromOptionsCompletions(e,r,n,o){if(this.previousArgHasChoices(r)){let s=this.getPreviousArgChoices(r);s&&s.length>0&&e.push(...s.map(c=>c.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,o){if(o===""&&e.length>0&&this.previousArgHasChoices(r))return;let s=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],c=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),l=s[n._.length-c-1];if(!l)return;let u=this.yargs.getOptions().choices[l]||[];for(let d of u)d.startsWith(o)&&e.push(d.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let o=r.replace(/^-+/,""),s=this.yargs.getOptions(),c=[o,...this.yargs.getAliases()[o]||[]],l;for(let u of c)if(Object.prototype.hasOwnProperty.call(s.key,u)&&Array.isArray(s.choices[u])){l=s.choices[u];break}if(l)return l.filter(u=>!n||u.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let o=a(s=>e.indexOf((/^[^0-9]$/.test(s)?"-":"--")+s)!==-1,"argsContains");if(o(r)||n&&o(`no-${r}`))return!0;if(this.aliases){for(let s of this.aliases[r])if(o(s))return!0}return!1}completeOptionKey(e,r,n,o){var s,c,l,u;let d=e;if(this.zshShell){let g=this.usage.getDescriptions(),A=(c=(s=this===null||this===void 0?void 0:this.aliases)===null||s===void 0?void 0:s[e])===null||c===void 0?void 0:c.find(b=>{let I=g[b];return typeof I=="string"&&I.length>0}),y=A?g[A]:void 0,v=(u=(l=g[e])!==null&&l!==void 0?l:y)!==null&&u!==void 0?u:"";d=`${e.replace(/:/g,"\\:")}:${v.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let p=a(g=>/^--/.test(g),"startsByTwoDashes"),m=a(g=>/^[^0-9]$/.test(g),"isShortOption"),h=!p(n)&&m(e)?"-":"--";r.push(h+d),o&&r.push(h+"no-"+d)}customCompletion(e,r,n,o){if(kf(this.customCompletionFunction,null,this.shim),gjt(this.customCompletionFunction)){let s=this.customCompletionFunction(n,r);return la(s)?s.then(c=>{this.shim.process.nextTick(()=>{o(null,c)})}).catch(c=>{this.shim.process.nextTick(()=>{o(c,void 0)})}):o(null,s)}else return Ajt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(s=o)=>this.defaultCompletion(e,r,n,s),s=>{o(null,s)}):this.customCompletionFunction(n,r,s=>{o(null,s)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",o=this.yargs.parse(e,!0),s=this.customCompletionFunction?c=>this.customCompletion(e,c,n,r):c=>this.defaultCompletion(e,c,n,r);return la(o)?o.then(s):s(o)}generateCompletionScript(e,r){let n=this.zshShell?XVe:JVe,o=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,o),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function ZVe(t,e,r,n){return new tve(t,e,r,n)}a(ZVe,"completion");function gjt(t){return t.length<3}a(gjt,"isSyncCompletionFunction");function Ajt(t){return t.length>3}a(Ajt,"isFallbackCompletionFunction");f();f();function eze(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let o;for(o=0;o<=t.length;o++)r[0][o]=o;for(n=1;n<=e.length;n++)for(o=1;o<=t.length;o++)e.charAt(n-1)===t.charAt(o-1)?r[n][o]=r[n-1][o-1]:n>1&&o>1&&e.charAt(n-2)===t.charAt(o-1)&&e.charAt(n-1)===t.charAt(o-2)?r[n][o]=r[n-2][o-2]+1:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[e.length][t.length]}a(eze,"levenshtein");var tze=["$0","--","_"];function rze(t,e,r){let n=r.y18n.__,o=r.y18n.__n,s={};s.nonOptionCount=a(function(m){let h=t.getDemandedCommands(),A=m._.length+(m["--"]?m["--"].length:0)-t.getInternalMethods().getContext().commands.length;h._&&(A<h._.min||A>h._.max)&&(A<h._.min?h._.minMsg!==void 0?e.fail(h._.minMsg?h._.minMsg.replace(/\$0/g,A.toString()).replace(/\$1/,h._.min.toString()):null):e.fail(o("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",A,A.toString(),h._.min.toString())):A>h._.max&&(h._.maxMsg!==void 0?e.fail(h._.maxMsg?h._.maxMsg.replace(/\$0/g,A.toString()).replace(/\$1/,h._.max.toString()):null):e.fail(o("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",A,A.toString(),h._.max.toString()))))},"nonOptionCount"),s.positionalCount=a(function(m,h){h<m&&e.fail(o("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",h,h+"",m+""))},"positionalCount"),s.requiredArguments=a(function(m,h){let g=null;for(let A of Object.keys(h))(!Object.prototype.hasOwnProperty.call(m,A)||typeof m[A]>"u")&&(g=g||{},g[A]=h[A]);if(g){let A=[];for(let v of Object.keys(g)){let b=g[v];b&&A.indexOf(b)<0&&A.push(b)}let y=A.length?`
${A.join(`
`)}`:"";e.fail(o("Missing required argument: %s","Missing required arguments: %s",Object.keys(g).length,Object.keys(g).join(", ")+y))}},"requiredArguments"),s.unknownArguments=a(function(m,h,g,A,y=!0){var v;let b=t.getInternalMethods().getCommandInstance().getCommands(),I=[],S=t.getInternalMethods().getContext();if(Object.keys(m).forEach(k=>{!tze.includes(k)&&!Object.prototype.hasOwnProperty.call(g,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!s.isValidAndSomeAliasIsNotNew(k,h)&&I.push(k)}),y&&(S.commands.length>0||b.length>0||A)&&m._.slice(S.commands.length).forEach(k=>{b.includes(""+k)||I.push(""+k)}),y){let N=((v=t.getDemandedCommands()._)===null||v===void 0?void 0:v.max)||0,F=S.commands.length+N;F<m._.length&&m._.slice(F).forEach(O=>{O=String(O),!S.commands.includes(O)&&!I.includes(O)&&I.push(O)})}I.length&&e.fail(o("Unknown argument: %s","Unknown arguments: %s",I.length,I.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),s.unknownCommands=a(function(m){let h=t.getInternalMethods().getCommandInstance().getCommands(),g=[],A=t.getInternalMethods().getContext();return(A.commands.length>0||h.length>0)&&m._.slice(A.commands.length).forEach(y=>{h.includes(""+y)||g.push(""+y)}),g.length>0?(e.fail(o("Unknown command: %s","Unknown commands: %s",g.length,g.join(", "))),!0):!1},"unknownCommands"),s.isValidAndSomeAliasIsNotNew=a(function(m,h){if(!Object.prototype.hasOwnProperty.call(h,m))return!1;let g=t.parsed.newAliases;return[m,...h[m]].some(A=>!Object.prototype.hasOwnProperty.call(g,A)||!g[m])},"isValidAndSomeAliasIsNotNew"),s.limitedChoices=a(function(m){let h=t.getOptions(),g={};if(!Object.keys(h.choices).length)return;Object.keys(m).forEach(v=>{tze.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(h.choices,v)&&[].concat(m[v]).forEach(b=>{h.choices[v].indexOf(b)===-1&&b!==void 0&&(g[v]=(g[v]||[]).concat(b))})});let A=Object.keys(g);if(!A.length)return;let y=n("Invalid values:");A.forEach(v=>{y+=`
  ${n("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(g[v]),e.stringifiedValues(h.choices[v]))}`}),e.fail(y)},"limitedChoices");let c={};s.implies=a(function(m,h){Fr("<string|object> [array|number|string]",[m,h],arguments.length),typeof m=="object"?Object.keys(m).forEach(g=>{s.implies(g,m[g])}):(t.global(m),c[m]||(c[m]=[]),Array.isArray(h)?h.forEach(g=>s.implies(m,g)):(kf(h,void 0,r),c[m].push(h)))},"implies"),s.getImplied=a(function(){return c},"getImplied");function l(p,m){let h=Number(m);return m=isNaN(h)?m:h,typeof m=="number"?m=p._.length>=m:m.match(/^--no-.+/)?(m=m.match(/^--no-(.+)/)[1],m=!Object.prototype.hasOwnProperty.call(p,m)):m=Object.prototype.hasOwnProperty.call(p,m),m}a(l,"keyExists"),s.implications=a(function(m){let h=[];if(Object.keys(c).forEach(g=>{let A=g;(c[g]||[]).forEach(y=>{let v=A,b=y;v=l(m,v),y=l(m,y),v&&!y&&h.push(` ${A} -> ${b}`)})}),h.length){let g=`${n("Implications failed:")}
`;h.forEach(A=>{g+=A}),e.fail(g)}},"implications");let u={};s.conflicts=a(function(m,h){Fr("<string|object> [array|string]",[m,h],arguments.length),typeof m=="object"?Object.keys(m).forEach(g=>{s.conflicts(g,m[g])}):(t.global(m),u[m]||(u[m]=[]),Array.isArray(h)?h.forEach(g=>s.conflicts(m,g)):u[m].push(h))},"conflicts"),s.getConflicting=()=>u,s.conflicting=a(function(m){Object.keys(m).forEach(h=>{u[h]&&u[h].forEach(g=>{g&&m[h]!==void 0&&m[g]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",h,g))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(u).forEach(h=>{u[h].forEach(g=>{g&&m[r.Parser.camelCase(h)]!==void 0&&m[r.Parser.camelCase(g)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",h,g))})})},"conflictingFn"),s.recommendCommands=a(function(m,h){h=h.sort((v,b)=>b.length-v.length);let A=null,y=1/0;for(let v=0,b;(b=h[v])!==void 0;v++){let I=eze(m,b);I<=3&&I<y&&(y=I,A=b)}A&&e.fail(n("Did you mean %s?",A))},"recommendCommands"),s.reset=a(function(m){return c=FT(c,h=>!m[h]),u=FT(u,h=>!m[h]),s},"reset");let d=[];return s.freeze=a(function(){d.push({implied:c,conflicting:u})},"freeze"),s.unfreeze=a(function(){let m=d.pop();kf(m,void 0,r),{implied:c,conflicting:u}=m},"unfreeze"),s}a(rze,"validation");f();var rve=[],o7;function aX(t,e,r,n){o7=n;let o={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return o;let s=/\.json|\..*rc$/.test(t.extends),c=null;if(s)c=Cjt(e,t.extends);else try{c=require.resolve(t.extends)}catch{return t}yjt(c),rve.push(c),o=s?JSON.parse(o7.readFileSync(c,"utf8")):require(t.extends),delete t.extends,o=aX(o,o7.path.dirname(c),r,o7)}return rve=[],r?nze(o,t):Object.assign({},o,t)}a(aX,"applyExtends");function yjt(t){if(rve.indexOf(t)>-1)throw new ca(`Circular extended configurations: '${t}'.`)}a(yjt,"checkForCircularExtends");function Cjt(t,e){return o7.path.resolve(t,e)}a(Cjt,"getPathToDefaultConfig");function nze(t,e){let r={};function n(o){return o&&typeof o=="object"&&!Array.isArray(o)}a(n,"isObject"),Object.assign(r,t);for(let o of Object.keys(e))n(e[o])&&n(r[o])?r[o]=nze(t[o],e[o]):r[o]=e[o];return r}a(nze,"mergeDeep");var Ur=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},ge=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Uc,SR,s7,Ih,j0,cX,QT,RR,lX,Th,uX,wh,GC,G0,_h,dX,c3,du,sn,fX,pX,V0,kR,l3,PR,UT,mX,Kn,DR,BR,NR,ui,hX,VC,pc;function bze(t){return(e=[],r=t.process.cwd(),n)=>{let o=new pve(e,r,n,t);return Object.defineProperty(o,"argv",{get:a(()=>o.parse(),"get"),enumerable:!0}),o.help(),o.version(),o}}a(bze,"YargsFactory");var ize=Symbol("copyDoubleDash"),oze=Symbol("copyDoubleDash"),nve=Symbol("deleteFromParserHintObject"),sze=Symbol("emitWarning"),aze=Symbol("freeze"),cze=Symbol("getDollarZero"),MR=Symbol("getParserConfiguration"),lze=Symbol("getUsageConfiguration"),ive=Symbol("guessLocale"),uze=Symbol("guessVersion"),dze=Symbol("parsePositionalNumbers"),ove=Symbol("pkgUp"),qT=Symbol("populateParserHintArray"),u3=Symbol("populateParserHintSingleValueDictionary"),sve=Symbol("populateParserHintArrayDictionary"),ave=Symbol("populateParserHintDictionary"),cve=Symbol("sanitizeKey"),lve=Symbol("setKey"),uve=Symbol("unfreeze"),fze=Symbol("validateAsync"),pze=Symbol("getCommandInstance"),mze=Symbol("getContext"),hze=Symbol("getHasOutput"),gze=Symbol("getLoggerInstance"),Aze=Symbol("getParseContext"),yze=Symbol("getUsageInstance"),Cze=Symbol("getValidationInstance"),gX=Symbol("hasParseCallback"),vze=Symbol("isGlobalContext"),LR=Symbol("postProcess"),xze=Symbol("rebase"),dve=Symbol("reset"),a7=Symbol("runYargsParserAndExecuteCommands"),fve=Symbol("runValidation"),Eze=Symbol("setHasOutput"),FR=Symbol("kTrackManuallySetKeys"),pve=class{static{a(this,"YargsInstance")}constructor(e=[],r,n,o){this.customScriptName=!1,this.parsed=!1,Uc.set(this,void 0),SR.set(this,void 0),s7.set(this,{commands:[],fullCommands:[]}),Ih.set(this,null),j0.set(this,null),cX.set(this,"show-hidden"),QT.set(this,null),RR.set(this,!0),lX.set(this,{}),Th.set(this,!0),uX.set(this,[]),wh.set(this,void 0),GC.set(this,{}),G0.set(this,!1),_h.set(this,null),dX.set(this,!0),c3.set(this,void 0),du.set(this,""),sn.set(this,void 0),fX.set(this,void 0),pX.set(this,{}),V0.set(this,null),kR.set(this,null),l3.set(this,{}),PR.set(this,{}),UT.set(this,void 0),mX.set(this,!1),Kn.set(this,void 0),DR.set(this,!1),BR.set(this,!1),NR.set(this,!1),ui.set(this,void 0),hX.set(this,{}),VC.set(this,null),pc.set(this,void 0),Ur(this,Kn,o,"f"),Ur(this,UT,e,"f"),Ur(this,SR,r,"f"),Ur(this,fX,n,"f"),Ur(this,wh,new iX(this),"f"),this.$0=this[cze](),this[dve](),Ur(this,Uc,ge(this,Uc,"f"),"f"),Ur(this,ui,ge(this,ui,"f"),"f"),Ur(this,pc,ge(this,pc,"f"),"f"),Ur(this,sn,ge(this,sn,"f"),"f"),ge(this,sn,"f").showHiddenOpt=ge(this,cX,"f"),Ur(this,c3,this[oze](),"f")}addHelpOpt(e,r){let n="help";return Fr("[string|boolean] [string]",[e,r],arguments.length),ge(this,_h,"f")&&(this[nve](ge(this,_h,"f")),Ur(this,_h,null,"f")),e===!1&&r===void 0?this:(Ur(this,_h,typeof e=="string"?e:n,"f"),this.boolean(ge(this,_h,"f")),this.describe(ge(this,_h,"f"),r||ge(this,ui,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Fr("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:ge(this,cX,"f");return this.boolean(n),this.describe(n,r||ge(this,ui,"f").deferY18nLookup("Show hidden options")),ge(this,sn,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Fr("<object|string|array> [string|array]",[e,r],arguments.length),this[sve](this.alias.bind(this),"alias",e,r),this}array(e){return Fr("<array|string>",[e],arguments.length),this[qT]("array",e),this[FR](e),this}boolean(e){return Fr("<array|string>",[e],arguments.length),this[qT]("boolean",e),this[FR](e),this}check(e,r){return Fr("<function> [boolean]",[e,r],arguments.length),this.middleware((n,o)=>_R(()=>e(n,o.getOptions()),s=>(s?(typeof s=="string"||s instanceof Error)&&ge(this,ui,"f").fail(s.toString(),s):ge(this,ui,"f").fail(ge(this,Kn,"f").y18n.__("Argument check failed: %s",e.toString())),n),s=>(ge(this,ui,"f").fail(s.message?s.message:s.toString(),s),n)),!1,r),this}choices(e,r){return Fr("<object|string|array> [string|array]",[e,r],arguments.length),this[sve](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Fr("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new ca("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new ca("coerce callback must be provided");return ge(this,sn,"f").key[e]=!0,ge(this,wh,"f").addCoerceMiddleware((n,o)=>{let s;return Object.prototype.hasOwnProperty.call(n,e)?_R(()=>(s=o.getAliases(),r(n[e])),l=>{n[e]=l;let u=o.getInternalMethods().getParserConfiguration()["strip-aliased"];if(s[e]&&u!==!0)for(let d of s[e])n[d]=l;return n},l=>{throw new ca(l.message)}):n},e),this}conflicts(e,r){return Fr("<string|object> [string|array]",[e,r],arguments.length),ge(this,pc,"f").conflicts(e,r),this}config(e="config",r,n){return Fr("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=aX(e,ge(this,SR,"f"),this[MR]()["deep-merge-config"]||!1,ge(this,Kn,"f")),ge(this,sn,"f").configObjects=(ge(this,sn,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||ge(this,ui,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(o=>{ge(this,sn,"f").config[o]=n||!0}),this)}completion(e,r,n){return Fr("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Ur(this,j0,e||ge(this,j0,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(ge(this,j0,"f"),r),n&&ge(this,Ih,"f").registerFunction(n),this}command(e,r,n,o,s,c){return Fr("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,o,s,c],arguments.length),ge(this,Uc,"f").addHandler(e,r,n,o,s,c),this}commands(e,r,n,o,s,c){return this.command(e,r,n,o,s,c)}commandDir(e,r){Fr("<string> [object]",[e,r],arguments.length);let n=ge(this,fX,"f")||ge(this,Kn,"f").require;return ge(this,Uc,"f").addDirectory(e,n,ge(this,Kn,"f").getCallerFile(),r),this}count(e){return Fr("<array|string>",[e],arguments.length),this[qT]("count",e),this[FR](e),this}default(e,r,n){return Fr("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(J1e(e,ge(this,Kn,"f")),ge(this,sn,"f").defaultDescription[e]=n),typeof r=="function"&&(J1e(e,ge(this,Kn,"f")),ge(this,sn,"f").defaultDescription[e]||(ge(this,sn,"f").defaultDescription[e]=ge(this,ui,"f").functionDescription(r)),r=r.call()),this[u3](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,o){return Fr("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,o],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),ge(this,sn,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:o},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(o=>{kf(n,!0,ge(this,Kn,"f")),this.demandOption(o,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(kf(n,!0,ge(this,Kn,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(o=>{kf(n,!0,ge(this,Kn,"f")),this.demandOption(o,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Fr("<object|string|array> [string]",[e,r],arguments.length),this[u3](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Fr("<string> [string|boolean]",[e,r],arguments.length),ge(this,sn,"f").deprecatedOptions[e]=r,this}describe(e,r){return Fr("<object|string|array> [string]",[e,r],arguments.length),this[lve](e,!0),ge(this,ui,"f").describe(e,r),this}detectLocale(e){return Fr("<boolean>",[e],arguments.length),Ur(this,RR,e,"f"),this}env(e){return Fr("[string|boolean]",[e],arguments.length),e===!1?delete ge(this,sn,"f").envPrefix:ge(this,sn,"f").envPrefix=e||"",this}epilogue(e){return Fr("<string>",[e],arguments.length),ge(this,ui,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Fr("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):ge(this,ui,"f").example(e,r),this}exit(e,r){Ur(this,G0,!0,"f"),Ur(this,QT,r,"f"),ge(this,Th,"f")&&ge(this,Kn,"f").process.exit(e)}exitProcess(e=!0){return Fr("[boolean]",[e],arguments.length),Ur(this,Th,e,"f"),this}fail(e){if(Fr("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new ca("Invalid first argument. Expected function or boolean 'false'");return ge(this,ui,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Fr("<array> [function]",[e,r],arguments.length),r?ge(this,Ih,"f").getCompletion(e,r):new Promise((n,o)=>{ge(this,Ih,"f").getCompletion(e,(s,c)=>{s?o(s):n(c)})})}getDemandedOptions(){return Fr([],0),ge(this,sn,"f").demandedOptions}getDemandedCommands(){return Fr([],0),ge(this,sn,"f").demandedCommands}getDeprecatedOptions(){return Fr([],0),ge(this,sn,"f").deprecatedOptions}getDetectLocale(){return ge(this,RR,"f")}getExitProcess(){return ge(this,Th,"f")}getGroups(){return Object.assign({},ge(this,GC,"f"),ge(this,PR,"f"))}getHelp(){if(Ur(this,G0,!0,"f"),!ge(this,ui,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[a7](ge(this,UT,"f"),void 0,void 0,0,!0);if(la(r))return r.then(()=>ge(this,ui,"f").help())}let e=ge(this,Uc,"f").runDefaultBuilderOn(this);if(la(e))return e.then(()=>ge(this,ui,"f").help())}return Promise.resolve(ge(this,ui,"f").help())}getOptions(){return ge(this,sn,"f")}getStrict(){return ge(this,DR,"f")}getStrictCommands(){return ge(this,BR,"f")}getStrictOptions(){return ge(this,NR,"f")}global(e,r){return Fr("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?ge(this,sn,"f").local=ge(this,sn,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{ge(this,sn,"f").local.includes(n)||ge(this,sn,"f").local.push(n)}),this}group(e,r){Fr("<string|array> <string>",[e,r],arguments.length);let n=ge(this,PR,"f")[r]||ge(this,GC,"f")[r];ge(this,PR,"f")[r]&&delete ge(this,PR,"f")[r];let o={};return ge(this,GC,"f")[r]=(n||[]).concat(e).filter(s=>o[s]?!1:o[s]=!0),this}hide(e){return Fr("<string>",[e],arguments.length),ge(this,sn,"f").hiddenOptions.push(e),this}implies(e,r){return Fr("<string|object> [number|string|array]",[e,r],arguments.length),ge(this,pc,"f").implies(e,r),this}locale(e){return Fr("[string]",[e],arguments.length),e===void 0?(this[ive](),ge(this,Kn,"f").y18n.getLocale()):(Ur(this,RR,!1,"f"),ge(this,Kn,"f").y18n.setLocale(e),this)}middleware(e,r,n){return ge(this,wh,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Fr("<string|object|array> [number]",[e,r],arguments.length),this[u3](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Fr("<array|string>",[e],arguments.length),this[qT]("normalize",e),this}number(e){return Fr("<array|string>",[e],arguments.length),this[qT]("number",e),this[FR](e),this}option(e,r){if(Fr("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[FR](e),ge(this,VC,"f")&&(e==="version"||r?.alias==="version")&&this[sze](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),ge(this,sn,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let o=r.demand||r.required||r.require;o&&this.demand(e,o),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(ge(this,sn,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let s=r.describe||r.description||r.desc,c=ge(this,ui,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(c,e)||typeof s=="string")&&this.describe(e,s),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Fr("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[aze](),typeof e>"u"&&(e=ge(this,UT,"f")),typeof r=="object"&&(Ur(this,kR,r,"f"),r=n),typeof r=="function"&&(Ur(this,V0,r,"f"),r=!1),r||Ur(this,UT,e,"f"),ge(this,V0,"f")&&Ur(this,Th,!1,"f");let o=this[a7](e,!!r),s=this.parsed;return ge(this,Ih,"f").setParsed(this.parsed),la(o)?o.then(c=>(ge(this,V0,"f")&&ge(this,V0,"f").call(this,ge(this,QT,"f"),c,ge(this,du,"f")),c)).catch(c=>{throw ge(this,V0,"f")&&ge(this,V0,"f")(c,this.parsed.argv,ge(this,du,"f")),c}).finally(()=>{this[uve](),this.parsed=s}):(ge(this,V0,"f")&&ge(this,V0,"f").call(this,ge(this,QT,"f"),o,ge(this,du,"f")),this[uve](),this.parsed=s,o)}parseAsync(e,r,n){let o=this.parse(e,r,n);return la(o)?o:Promise.resolve(o)}parseSync(e,r,n){let o=this.parse(e,r,n);if(la(o))throw new ca(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return o}parserConfiguration(e){return Fr("<object>",[e],arguments.length),Ur(this,pX,e,"f"),this}pkgConf(e,r){Fr("<string> [string]",[e,r],arguments.length);let n=null,o=this[ove](r||ge(this,SR,"f"));return o[e]&&typeof o[e]=="object"&&(n=aX(o[e],r||ge(this,SR,"f"),this[MR]()["deep-merge-config"]||!1,ge(this,Kn,"f")),ge(this,sn,"f").configObjects=(ge(this,sn,"f").configObjects||[]).concat(n)),this}positional(e,r){Fr("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=FT(r,(c,l)=>c==="type"&&!["string","number","boolean"].includes(l)?!1:n.includes(c));let o=ge(this,s7,"f").fullCommands[ge(this,s7,"f").fullCommands.length-1],s=o?ge(this,Uc,"f").cmdToParseOptions(o):{array:[],alias:{},default:{},demand:{}};return s3(s).forEach(c=>{let l=s[c];Array.isArray(l)?l.indexOf(e)!==-1&&(r[c]=!0):l[e]&&!(c in r)&&(r[c]=l[e])}),this.group(e,ge(this,ui,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Fr("[boolean]",[e],arguments.length),Ur(this,mX,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Fr("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&ge(this,sn,"f").narg[e]?this:(this[u3](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Fr("[string] [string]",[e,r],arguments.length),e=e||this.$0,ge(this,c3,"f").log(ge(this,Ih,"f").generateCompletionScript(e,r||ge(this,j0,"f")||"completion")),this}showHelp(e){if(Fr("[string|function]",[e],arguments.length),Ur(this,G0,!0,"f"),!ge(this,ui,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[a7](ge(this,UT,"f"),void 0,void 0,0,!0);if(la(n))return n.then(()=>{ge(this,ui,"f").showHelp(e)}),this}let r=ge(this,Uc,"f").runDefaultBuilderOn(this);if(la(r))return r.then(()=>{ge(this,ui,"f").showHelp(e)}),this}return ge(this,ui,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Fr("[boolean|string] [string]",[e,r],arguments.length),ge(this,ui,"f").showHelpOnFail(e,r),this}showVersion(e){return Fr("[string|function]",[e],arguments.length),ge(this,ui,"f").showVersion(e),this}skipValidation(e){return Fr("<array|string>",[e],arguments.length),this[qT]("skipValidation",e),this}strict(e){return Fr("[boolean]",[e],arguments.length),Ur(this,DR,e!==!1,"f"),this}strictCommands(e){return Fr("[boolean]",[e],arguments.length),Ur(this,BR,e!==!1,"f"),this}strictOptions(e){return Fr("[boolean]",[e],arguments.length),Ur(this,NR,e!==!1,"f"),this}string(e){return Fr("<array|string>",[e],arguments.length),this[qT]("string",e),this[FR](e),this}terminalWidth(){return Fr([],0),ge(this,Kn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Fr("<object>",[e],arguments.length),Ur(this,RR,!1,"f"),ge(this,Kn,"f").y18n.updateLocale(e),this}usage(e,r,n,o){if(Fr("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,o],arguments.length),r!==void 0){if(kf(e,null,ge(this,Kn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,o);throw new ca(".usage() description must start with $0 if being used as alias for .command()")}else return ge(this,ui,"f").usage(e),this}usageConfiguration(e){return Fr("<object>",[e],arguments.length),Ur(this,hX,e,"f"),this}version(e,r,n){let o="version";if(Fr("[boolean|string] [string] [string]",[e,r,n],arguments.length),ge(this,VC,"f")&&(this[nve](ge(this,VC,"f")),ge(this,ui,"f").version(void 0),Ur(this,VC,null,"f")),arguments.length===0)n=this[uze](),e=o;else if(arguments.length===1){if(e===!1)return this;n=e,e=o}else arguments.length===2&&(n=r,r=void 0);return Ur(this,VC,typeof e=="string"?e:o,"f"),r=r||ge(this,ui,"f").deferY18nLookup("Show version number"),ge(this,ui,"f").version(n||void 0),this.boolean(ge(this,VC,"f")),this.describe(ge(this,VC,"f"),r),this}wrap(e){return Fr("<number|null|undefined>",[e],arguments.length),ge(this,ui,"f").wrap(e),this}[(Uc=new WeakMap,SR=new WeakMap,s7=new WeakMap,Ih=new WeakMap,j0=new WeakMap,cX=new WeakMap,QT=new WeakMap,RR=new WeakMap,lX=new WeakMap,Th=new WeakMap,uX=new WeakMap,wh=new WeakMap,GC=new WeakMap,G0=new WeakMap,_h=new WeakMap,dX=new WeakMap,c3=new WeakMap,du=new WeakMap,sn=new WeakMap,fX=new WeakMap,pX=new WeakMap,V0=new WeakMap,kR=new WeakMap,l3=new WeakMap,PR=new WeakMap,UT=new WeakMap,mX=new WeakMap,Kn=new WeakMap,DR=new WeakMap,BR=new WeakMap,NR=new WeakMap,ui=new WeakMap,hX=new WeakMap,VC=new WeakMap,pc=new WeakMap,ize)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[oze](){return{log:a((...e)=>{this[gX]()||console.log(...e),Ur(this,G0,!0,"f"),ge(this,du,"f").length&&Ur(this,du,ge(this,du,"f")+`
`,"f"),Ur(this,du,ge(this,du,"f")+e.join(" "),"f")},"log"),error:a((...e)=>{this[gX]()||console.error(...e),Ur(this,G0,!0,"f"),ge(this,du,"f").length&&Ur(this,du,ge(this,du,"f")+`
`,"f"),Ur(this,du,ge(this,du,"f")+e.join(" "),"f")},"error")}}[nve](e){s3(ge(this,sn,"f")).forEach(r=>{if((o=>o==="configObjects")(r))return;let n=ge(this,sn,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete ge(this,ui,"f").getDescriptions()[e]}[sze](e,r,n){ge(this,lX,"f")[n]||(ge(this,Kn,"f").process.emitWarning(e,r),ge(this,lX,"f")[n]=!0)}[aze](){ge(this,uX,"f").push({options:ge(this,sn,"f"),configObjects:ge(this,sn,"f").configObjects.slice(0),exitProcess:ge(this,Th,"f"),groups:ge(this,GC,"f"),strict:ge(this,DR,"f"),strictCommands:ge(this,BR,"f"),strictOptions:ge(this,NR,"f"),completionCommand:ge(this,j0,"f"),output:ge(this,du,"f"),exitError:ge(this,QT,"f"),hasOutput:ge(this,G0,"f"),parsed:this.parsed,parseFn:ge(this,V0,"f"),parseContext:ge(this,kR,"f")}),ge(this,ui,"f").freeze(),ge(this,pc,"f").freeze(),ge(this,Uc,"f").freeze(),ge(this,wh,"f").freeze()}[cze](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(ge(this,Kn,"f").process.argv()[0])?r=ge(this,Kn,"f").process.argv().slice(1,2):r=ge(this,Kn,"f").process.argv().slice(0,1),e=r.map(n=>{let o=this[xze](ge(this,SR,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&o.length<n.length?o:n}).join(" ").trim(),ge(this,Kn,"f").getEnv("_")&&ge(this,Kn,"f").getProcessArgvBin()===ge(this,Kn,"f").getEnv("_")&&(e=ge(this,Kn,"f").getEnv("_").replace(`${ge(this,Kn,"f").path.dirname(ge(this,Kn,"f").process.execPath())}/`,"")),e}[MR](){return ge(this,pX,"f")}[lze](){return ge(this,hX,"f")}[ive](){if(!ge(this,RR,"f"))return;let e=ge(this,Kn,"f").getEnv("LC_ALL")||ge(this,Kn,"f").getEnv("LC_MESSAGES")||ge(this,Kn,"f").getEnv("LANG")||ge(this,Kn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[uze](){return this[ove]().version||"unknown"}[dze](e){let r=e["--"]?e["--"]:e._;for(let n=0,o;(o=r[n])!==void 0;n++)ge(this,Kn,"f").Parser.looksLikeNumber(o)&&Number.isSafeInteger(Math.floor(parseFloat(`${o}`)))&&(r[n]=Number(o));return e}[ove](e){let r=e||"*";if(ge(this,l3,"f")[r])return ge(this,l3,"f")[r];let n={};try{let o=e||ge(this,Kn,"f").mainFilename;!e&&ge(this,Kn,"f").path.extname(o)&&(o=ge(this,Kn,"f").path.dirname(o));let s=ge(this,Kn,"f").findUp(o,(c,l)=>{if(l.includes("package.json"))return"package.json"});kf(s,void 0,ge(this,Kn,"f")),n=JSON.parse(ge(this,Kn,"f").readFileSync(s,"utf8"))}catch{}return ge(this,l3,"f")[r]=n||{},ge(this,l3,"f")[r]}[qT](e,r){r=[].concat(r),r.forEach(n=>{n=this[cve](n),ge(this,sn,"f")[e].push(n)})}[u3](e,r,n,o){this[ave](e,r,n,o,(s,c,l)=>{ge(this,sn,"f")[s][c]=l})}[sve](e,r,n,o){this[ave](e,r,n,o,(s,c,l)=>{ge(this,sn,"f")[s][c]=(ge(this,sn,"f")[s][c]||[]).concat(l)})}[ave](e,r,n,o,s){if(Array.isArray(n))n.forEach(c=>{e(c,o)});else if((c=>typeof c=="object")(n))for(let c of s3(n))e(c,n[c]);else s(r,this[cve](n),o)}[cve](e){return e==="__proto__"?"___proto___":e}[lve](e,r){return this[u3](this[lve].bind(this),"key",e,r),this}[uve](){var e,r,n,o,s,c,l,u,d,p,m,h;let g=ge(this,uX,"f").pop();kf(g,void 0,ge(this,Kn,"f"));let A;e=this,r=this,n=this,o=this,s=this,c=this,l=this,u=this,d=this,p=this,m=this,h=this,{options:{set value(y){Ur(e,sn,y,"f")}}.value,configObjects:A,exitProcess:{set value(y){Ur(r,Th,y,"f")}}.value,groups:{set value(y){Ur(n,GC,y,"f")}}.value,output:{set value(y){Ur(o,du,y,"f")}}.value,exitError:{set value(y){Ur(s,QT,y,"f")}}.value,hasOutput:{set value(y){Ur(c,G0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){Ur(l,DR,y,"f")}}.value,strictCommands:{set value(y){Ur(u,BR,y,"f")}}.value,strictOptions:{set value(y){Ur(d,NR,y,"f")}}.value,completionCommand:{set value(y){Ur(p,j0,y,"f")}}.value,parseFn:{set value(y){Ur(m,V0,y,"f")}}.value,parseContext:{set value(y){Ur(h,kR,y,"f")}}.value}=g,ge(this,sn,"f").configObjects=A,ge(this,ui,"f").unfreeze(),ge(this,pc,"f").unfreeze(),ge(this,Uc,"f").unfreeze(),ge(this,wh,"f").unfreeze()}[fze](e,r){return _R(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[pze].bind(this),getContext:this[mze].bind(this),getHasOutput:this[hze].bind(this),getLoggerInstance:this[gze].bind(this),getParseContext:this[Aze].bind(this),getParserConfiguration:this[MR].bind(this),getUsageConfiguration:this[lze].bind(this),getUsageInstance:this[yze].bind(this),getValidationInstance:this[Cze].bind(this),hasParseCallback:this[gX].bind(this),isGlobalContext:this[vze].bind(this),postProcess:this[LR].bind(this),reset:this[dve].bind(this),runValidation:this[fve].bind(this),runYargsParserAndExecuteCommands:this[a7].bind(this),setHasOutput:this[Eze].bind(this)}}[pze](){return ge(this,Uc,"f")}[mze](){return ge(this,s7,"f")}[hze](){return ge(this,G0,"f")}[gze](){return ge(this,c3,"f")}[Aze](){return ge(this,kR,"f")||{}}[yze](){return ge(this,ui,"f")}[Cze](){return ge(this,pc,"f")}[gX](){return!!ge(this,V0,"f")}[vze](){return ge(this,dX,"f")}[LR](e,r,n,o){return n||la(e)||(r||(e=this[ize](e)),(this[MR]()["parse-positional-numbers"]||this[MR]()["parse-positional-numbers"]===void 0)&&(e=this[dze](e)),o&&(e=wR(e,this,ge(this,wh,"f").getMiddleware(),!1))),e}[dve](e={}){Ur(this,sn,ge(this,sn,"f")||{},"f");let r={};r.local=ge(this,sn,"f").local||[],r.configObjects=ge(this,sn,"f").configObjects||[];let n={};r.local.forEach(c=>{n[c]=!0,(e[c]||[]).forEach(l=>{n[l]=!0})}),Object.assign(ge(this,PR,"f"),Object.keys(ge(this,GC,"f")).reduce((c,l)=>{let u=ge(this,GC,"f")[l].filter(d=>!(d in n));return u.length>0&&(c[l]=u),c},{})),Ur(this,GC,{},"f");let o=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],s=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return o.forEach(c=>{r[c]=(ge(this,sn,"f")[c]||[]).filter(l=>!n[l])}),s.forEach(c=>{r[c]=FT(ge(this,sn,"f")[c],l=>!n[l])}),r.envPrefix=ge(this,sn,"f").envPrefix,Ur(this,sn,r,"f"),Ur(this,ui,ge(this,ui,"f")?ge(this,ui,"f").reset(n):YVe(this,ge(this,Kn,"f")),"f"),Ur(this,pc,ge(this,pc,"f")?ge(this,pc,"f").reset(n):rze(this,ge(this,ui,"f"),ge(this,Kn,"f")),"f"),Ur(this,Uc,ge(this,Uc,"f")?ge(this,Uc,"f").reset():VVe(ge(this,ui,"f"),ge(this,pc,"f"),ge(this,wh,"f"),ge(this,Kn,"f")),"f"),ge(this,Ih,"f")||Ur(this,Ih,ZVe(this,ge(this,ui,"f"),ge(this,Uc,"f"),ge(this,Kn,"f")),"f"),ge(this,wh,"f").reset(),Ur(this,j0,null,"f"),Ur(this,du,"","f"),Ur(this,QT,null,"f"),Ur(this,G0,!1,"f"),this.parsed=!1,this}[xze](e,r){return ge(this,Kn,"f").path.relative(e,r)}[a7](e,r,n,o=0,s=!1){let c=!!n||s;e=e||ge(this,UT,"f"),ge(this,sn,"f").__=ge(this,Kn,"f").y18n.__,ge(this,sn,"f").configuration=this[MR]();let l=!!ge(this,sn,"f").configuration["populate--"],u=Object.assign({},ge(this,sn,"f").configuration,{"populate--":!0}),d=ge(this,Kn,"f").Parser.detailed(e,Object.assign({},ge(this,sn,"f"),{configuration:{"parse-positional-numbers":!1,...u}})),p=Object.assign(d.argv,ge(this,kR,"f")),m,h=d.aliases,g=!1,A=!1;Object.keys(p).forEach(y=>{y===ge(this,_h,"f")&&p[y]?g=!0:y===ge(this,VC,"f")&&p[y]&&(A=!0)}),p.$0=this.$0,this.parsed=d,o===0&&ge(this,ui,"f").clearCachedHelpMessage();try{if(this[ive](),r)return this[LR](p,l,!!n,!1);ge(this,_h,"f")&&[ge(this,_h,"f")].concat(h[ge(this,_h,"f")]||[]).filter(S=>S.length>1).includes(""+p._[p._.length-1])&&(p._.pop(),g=!0),Ur(this,dX,!1,"f");let y=ge(this,Uc,"f").getCommands(),v=ge(this,Ih,"f").completionKey in p,b=g||v||s;if(p._.length){if(y.length){let I;for(let S=o||0,k;p._[S]!==void 0;S++)if(k=String(p._[S]),y.includes(k)&&k!==ge(this,j0,"f")){let N=ge(this,Uc,"f").runCommand(k,this,d,S+1,s,g||A||s);return this[LR](N,l,!!n,!1)}else if(!I&&k!==ge(this,j0,"f")){I=k;break}!ge(this,Uc,"f").hasDefaultCommand()&&ge(this,mX,"f")&&I&&!b&&ge(this,pc,"f").recommendCommands(I,y)}ge(this,j0,"f")&&p._.includes(ge(this,j0,"f"))&&!v&&(ge(this,Th,"f")&&OT(!0),this.showCompletionScript(),this.exit(0))}if(ge(this,Uc,"f").hasDefaultCommand()&&!b){let I=ge(this,Uc,"f").runCommand(null,this,d,0,s,g||A||s);return this[LR](I,l,!!n,!1)}if(v){ge(this,Th,"f")&&OT(!0),e=[].concat(e);let I=e.slice(e.indexOf(`--${ge(this,Ih,"f").completionKey}`)+1);return ge(this,Ih,"f").getCompletion(I,(S,k)=>{if(S)throw new ca(S.message);(k||[]).forEach(N=>{ge(this,c3,"f").log(N)}),this.exit(0)}),this[LR](p,!l,!!n,!1)}if(ge(this,G0,"f")||(g?(ge(this,Th,"f")&&OT(!0),c=!0,this.showHelp("log"),this.exit(0)):A&&(ge(this,Th,"f")&&OT(!0),c=!0,ge(this,ui,"f").showVersion("log"),this.exit(0))),!c&&ge(this,sn,"f").skipValidation.length>0&&(c=Object.keys(p).some(I=>ge(this,sn,"f").skipValidation.indexOf(I)>=0&&p[I]===!0)),!c){if(d.error)throw new ca(d.error.message);if(!v){let I=this[fve](h,{},d.error);n||(m=wR(p,this,ge(this,wh,"f").getMiddleware(),!0)),m=this[fze](I,m??p),la(m)&&!n&&(m=m.then(()=>wR(p,this,ge(this,wh,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof ca)ge(this,ui,"f").fail(y.message,y);else throw y}return this[LR](m??p,l,!!n,!0)}[fve](e,r,n,o){let s={...this.getDemandedOptions()};return c=>{if(n)throw new ca(n.message);ge(this,pc,"f").nonOptionCount(c),ge(this,pc,"f").requiredArguments(c,s);let l=!1;ge(this,BR,"f")&&(l=ge(this,pc,"f").unknownCommands(c)),ge(this,DR,"f")&&!l?ge(this,pc,"f").unknownArguments(c,e,r,!!o):ge(this,NR,"f")&&ge(this,pc,"f").unknownArguments(c,e,{},!1,!1),ge(this,pc,"f").limitedChoices(c),ge(this,pc,"f").implications(c),ge(this,pc,"f").conflicting(c)}}[Eze](){Ur(this,G0,!0,"f")}[FR](e){if(typeof e=="string")ge(this,sn,"f").key[e]=!0;else for(let r of e)ge(this,sn,"f").key[r]=!0}};function zVe(t){return!!t&&typeof t.getInternalMethods=="function"}a(zVe,"isYargsInstance");var vjt=bze(HVe),Ize=vjt;f();f();f();var Tze={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function wze(t,e,r){let n=zr.createAndMarkAsIssued({authSource:e,authType:r});return Nt(t,Tze.NewGitHubLogin,n)}a(wze,"telemetryNewGitHubLogin");function _ze(t,e){let r=zr.createAndMarkAsIssued({authType:e});return Nt(t,Tze.GitHubLoginSuccess,r)}a(_ze,"telemetryGitHubLoginSuccess");var mve=class extends ka{static{a(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function xjt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...m0(t)},json:{client_id:e},timeout:3e4},o,s=new URL("login/device/code",r).href;try{o=await t.get(Qr).fetch(s,n)}catch(c){throw c instanceof Error&&$F(c)?new ka(`Could not log in with device flow on ${r}: ${c.message}`):c}if(!o.ok)throw new ka(`Could not log in with device flow on ${r}: HTTP ${o.status}`);return await o.json()}a(xjt,"requestDeviceFlowStage1");async function Ejt(t,e,r,{serverUrl:n}){let o={method:"POST",headers:{Accept:"application/json",...m0(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},s=await t.get(Qr).fetch(new URL("login/oauth/access_token",n).href,o),c=await s.json();if(c.access_token||c.error==="authorization_pending"||c.error==="slow_down")return c;throw c.error&&c.error_description?new mve(c):new ka(`Unexpected ${s.status} response from device flow: ${JSON.stringify(c)}`)}a(Ejt,"requestDeviceFlowStage2");async function bjt(t,e){_ze(t,"deviceFlow");let n=await(await Um(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new ka(`Error retrieving user information: ${String(n.errors)}`);return n}a(bjt,"requestUserInfo");var Pf=class{constructor(e){this.ctx=e;this.pendingSignIn=void 0}static{a(this,"GitHubDeviceFlow")}get authManager(){return this.ctx.get(Mi)}get authPersistence(){return this.ctx.get(gA)}async save(e){let r=new URL(e.serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e.accessToken,user:e.login,githubAppId:e.githubAppId,authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n,freshSignIn:n})}async initiate(e,r){let n=e?.githubAppId??this.ctx.get(su).findAppIdToAuthenticate();r??=this.authManager.getConfiguredUrls();try{let o=await this.getTokenUnguarded(n,r),s=o.waitForAuth.then(async c=>(this.ctx.get(su).githubAppId=n,await this.save(c)));return s.catch(()=>{}),this.pendingSignIn={verificationUri:o.verification_uri,status:s},o}catch(o){throw this.ctx.get(hp).notifyUser(this.ctx,o),o}}async abandon(){let{serverUrl:e}=this.authManager.getConfiguredUrls(),r=new URL(e).hostname;await this.authPersistence.deleteAuthRecord({authAuthority:r}),this.authPersistence.purgeLegacyAuthRecords().catch(()=>{});let n=!this.authManager.hasTransientSession();return await this.authManager.checkAndUpdateStatus({forceRefresh:n})}async getTokenUnguarded(e,r){let n=this.ctx;wze(n,"unknown","deviceFlow");let o=await xjt(n,e,r),s=(async()=>{let c=o.expires_in,l=o.interval,u;do{await new Promise(p=>setTimeout(p,1e3*l)),u=await Ejt(n,o.device_code,e,r),c-=l;let d=u.access_token;if(d){let p=await bjt(n,{...r,accessToken:d});return{...r,githubAppId:e,login:p.login,accessToken:d}}l=u.interval??l}while(c>0);throw new ka(`Timed out polling for access token. Last response was ${JSON.stringify(u)}`)})();return{...o,waitForAuth:s}}};f();var Df=class{static{a(this,"CitationManager")}},AX=class extends Df{static{a(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};f();f();f();var Ijt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},bs=class{constructor(){this.capabilities={...Ijt};this.emitter=new vs;this.onDidSetCapabilities=this.emitter.event}static{a(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}this.emitter.fire(this.capabilities)}getCapabilities(){return this.capabilities}};f();f();f();f();function hve(t,e){let r=BA(t,e);return r===-1?void 0:t[r]}a(hve,"findLastMonotonous");function BA(t,e,r=0,n=t.length){let o=r,s=n;for(;o<s;){let c=Math.floor((o+s)/2);e(t[c])?o=c+1:s=c}return o-1}a(BA,"findLastIdxMonotonous");function d3(t,e,r=0,n=t.length){let o=r,s=n;for(;o<s;){let c=Math.floor((o+s)/2);e(t[c])?s=c:o=c+1}return o}a(d3,"findFirstIdxMonotonousOrArrLen");var Sze=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{a(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=BA(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};f();var gve=class{static{a(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?yX.isErrorNoTelemetry(e)?new yX(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},Rze=new gve;function OR(t){Rze.onUnexpectedError(t)}a(OR,"onBugIndicatingError");function f3(t){Tjt(t)||Rze.onUnexpectedError(t)}a(f3,"onUnexpectedError");var Ave="Canceled";function Tjt(t){return t instanceof z0?!0:t instanceof Error&&t.name===Ave&&t.message===Ave}a(Tjt,"isCancellationError");var z0=class extends Error{static{a(this,"CancellationError")}constructor(){super(Ave),this.name=this.message}};function c7(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}a(c7,"illegalArgument");function kze(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}a(kze,"illegalState");var yX=class t extends Error{static{a(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},bn=class t extends Error{static{a(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function p3(t,e,r=(n,o)=>n===o){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,o=t.length;n<o;n++)if(!r(t[n],e[n]))return!1;return!0}a(p3,"equals");function*QR(t,e){let r,n;for(let o of t)n!==void 0&&e(n,o)?r.push(o):(r&&(yield r),r=[o]),n=o;r&&(yield r)}a(QR,"groupAdjacentBy");function Dze(t){return t.filter(e=>!!e)}a(Dze,"coalesce");var Bze;(l=>{function t(u){return u<0}l.isLessThan=t,a(t,"isLessThan");function e(u){return u<=0}l.isLessThanOrEqual=e,a(e,"isLessThanOrEqual");function r(u){return u>0}l.isGreaterThan=r,a(r,"isGreaterThan");function n(u){return u===0}l.isNeitherLessOrGreaterThan=n,a(n,"isNeitherLessOrGreaterThan"),l.greaterThan=1,l.lessThan=-1,l.neitherLessOrGreaterThan=0})(Bze||={});function Sh(t,e){return(r,n)=>e(t(r),t(n))}a(Sh,"compareBy");var Rh=a((t,e)=>t-e,"numberComparator");var CX=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{a(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},Pze=class t{constructor(e){this.iterate=e}static{a(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(o=>((n||Bze.isGreaterThan(e(o,r)))&&(n=!1,r=o),!0)),r}};function l7(t,e){return t.reduce((r,n)=>r+e(n),0)}a(l7,"sumBy");f();function Fze(t,e){let r=Object.create(null);for(let n of t){let o=e(n),s=r[o];s||(s=r[o]=[]),s.push(n)}return r}a(Fze,"groupBy");var Mze,Lze,Nze=class{constructor(e,r){this.toKey=r;this._map=new Map;this[Mze]="SetWithKey";for(let n of e)this.add(n)}static{a(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(Lze=Symbol.iterator,Mze=Symbol.toStringTag,Lze)](){return this.values()}};f();function yve(t,e){let r=this,n=!1,o;return function(){if(n)return o;if(n=!0,e)try{o=t.apply(r,arguments)}finally{e()}else o=t.apply(r,arguments);return o}}a(yve,"createSingleCallFunction");f();var Cve;(S=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}S.is=t,a(t,"is");let e=Object.freeze([]);function r(){return e}S.empty=r,a(r,"empty");function*n(k){yield k}S.single=n,a(n,"single");function o(k){return t(k)?k:n(k)}S.wrap=o,a(o,"wrap");function s(k){return k||e}S.from=s,a(s,"from");function*c(k){for(let N=k.length-1;N>=0;N--)yield k[N]}S.reverse=c,a(c,"reverse");function l(k){return!k||k[Symbol.iterator]().next().done===!0}S.isEmpty=l,a(l,"isEmpty");function u(k){return k[Symbol.iterator]().next().value}S.first=u,a(u,"first");function d(k,N){let F=0;for(let O of k)if(N(O,F++))return!0;return!1}S.some=d,a(d,"some");function p(k,N){for(let F of k)if(N(F))return F}S.find=p,a(p,"find");function*m(k,N){for(let F of k)N(F)&&(yield F)}S.filter=m,a(m,"filter");function*h(k,N){let F=0;for(let O of k)yield N(O,F++)}S.map=h,a(h,"map");function*g(k,N){let F=0;for(let O of k)yield*N(O,F++)}S.flatMap=g,a(g,"flatMap");function*A(...k){for(let N of k)yield*N}S.concat=A,a(A,"concat");function y(k,N,F){let O=F;for(let Y of k)O=N(O,Y);return O}S.reduce=y,a(y,"reduce");function*v(k,N,F=k.length){for(N<-k.length&&(N=0),N<0&&(N+=k.length),F<0?F+=k.length:F>k.length&&(F=k.length);N<F;N++)yield k[N]}S.slice=v,a(v,"slice");function b(k,N=Number.POSITIVE_INFINITY){let F=[];if(N===0)return[F,k];let O=k[Symbol.iterator]();for(let Y=0;Y<N;Y++){let z=O.next();if(z.done)return[F,S.empty()];F.push(z.value)}return[F,{[Symbol.iterator](){return O}}]}S.consume=b,a(b,"consume");async function I(k){let N=[];for await(let F of k)N.push(F);return Promise.resolve(N)}S.asyncToArray=I,a(I,"asyncToArray")})(Cve||={});f();var vve=class{constructor(e,r){this.uri=e;this.value=r}static{a(this,"ResourceMapEntry")}};function _jt(t){return Array.isArray(t)}a(_jt,"isEntries");var Qze,vX=class t{constructor(e,r){this[Qze]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(_jt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,o]of e)this.set(n,o)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{a(this,"ResourceMap")}static{this.defaultToKey=a(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new vve(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,o]of this.map)e(o.value,o.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(Qze=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},Uze,Oze=class{constructor(e,r){this[Uze]="ResourceSet";!e||typeof e=="function"?this._map=new vX(e):(this._map=new vX(r),e.forEach(this.add,this))}static{a(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,o)=>e.call(r,o,o,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(Uze=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var qze,xve=class{constructor(){this[qze]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{a(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let o=this._map.get(e);if(o)o.value=r,n!==0&&this.touch(o,n);else{switch(o={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(o);break;case 1:this.addItemFirst(o);break;case 2:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,o=this._head;for(;o;){if(r?e.bind(r)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return o}values(){let e=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return o}entries(){let e=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return o}[(qze=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},Eve=class extends xve{static{a(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},m3=class extends Eve{static{a(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var xX=class{constructor(){this.map=new Map}static{a(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var Sjt=!1,h3=null;var Hze=class t{constructor(){this.livingDisposables=new Map}static{a(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let o=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,o),o}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let u=new Map,d=[...this.livingDisposables.values()].filter(m=>m.source!==null&&!this.getRootParent(m,u).isSingleton);if(d.length===0)return;let p=new Set(d.map(m=>m.value));if(n=d.filter(m=>!(m.parent&&p.has(m.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function o(u){function d(m,h){for(;m.length>0&&h.some(g=>typeof g=="string"?g===m[0]:m[0].match(g));)m.shift()}a(d,"removePrefix");let p=u.source.split(`
`).map(m=>m.trim().replace("at ","")).filter(m=>m!=="");return d(p,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),p.reverse()}a(o,"getStackTracePath");let s=new xX;for(let u of n){let d=o(u);for(let p=0;p<=d.length;p++)s.add(d.slice(0,p).join(`
`),u)}n.sort(Sh(u=>u.idx,Rh));let c="",l=0;for(let u of n.slice(0,e)){l++;let d=o(u),p=[];for(let m=0;m<d.length;m++){let h=d[m];h=`(shared with ${s.get(d.slice(0,m+1).join(`
`)).size}/${n.length} leaks) at ${h}`;let A=s.get(d.slice(0,m).join(`
`)),y=Fze([...A].map(v=>o(v)[m]),v=>v);delete y[d[m]];for(let[v,b]of Object.entries(y))p.unshift(`    - stacktraces of ${b.length} other leaks continue with ${v}`);p.unshift(h)}c+=`


==================== Leaking disposable ${l}/${n.length}: ${u.value.constructor.name} ====================
${p.join(`
`)}
============================================================

`}return n.length>e&&(c+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:c}}};function Rjt(t){h3=t}a(Rjt,"setDisposableTracker");if(Sjt){let t="__is_disposable_tracked__";Rjt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Ps.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Ps.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function g3(t){return h3?.trackDisposable(t),t}a(g3,"trackDisposable");function A3(t){h3?.markAsDisposed(t)}a(A3,"markAsDisposed");function bve(t,e){h3?.setParent(t,e)}a(bve,"setParentOfDisposable");function kjt(t,e){if(h3)for(let r of t)h3.setParent(r,e)}a(kjt,"setParentOfDisposables");function $ze(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}a($ze,"isDisposable");function EX(t){if(Cve.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}a(EX,"dispose");function Wze(...t){let e=qc(()=>EX(t));return kjt(t,e),e}a(Wze,"combinedDisposable");function qc(t){let e=g3({dispose:yve(()=>{A3(e),t()})});return e}a(qc,"toDisposable");var id=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;g3(this)}static{a(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(A3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{EX(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return bve(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),bve(e,null))}},Ps=class{constructor(){this._store=new id;g3(this),bve(this._store,this)}static{a(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){A3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var kh=class extends Ps{static{a(this,"ChatQuotaService")}constructor(e){super(),this._register(Pa(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),o=parseInt(n.get("ent")||"0",10),s=parseFloat(n.get("ov")||"0.0"),c=n.get("ovPerm")==="true",l=parseFloat(n.get("rem")||"0.0"),u=n.get("rst"),d;u?d=new Date(u):(d=new Date,d.setMonth(d.getMonth()+1));let p=Math.max(0,o*(1-l/100));this._quotaInfo={quota:o,used:p,overageUsed:s,overageEnabled:c,resetDate:d}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();f();f();var jze=Ne(Ai()),Gze=E.Object({accessToken:E.Optional(E.String({minLength:1})),handle:E.Optional(E.String({minLength:1})),login:E.Optional(E.String({minLength:1})),githubAppId:E.Optional(E.String({minLength:1})),apiUrl:E.Optional(E.String({})),serverUrl:E.Optional(E.String({})),tokenEndpoint:E.Optional(E.String({}))}),Ive;(r=>(r.method="github/didChangeAuth",r.type=new jze.ProtocolNotificationType(r.method)))(Ive||={});f();var Vze=Ne(Ai()),Tve;(r=>(r.method="copilot/ipCodeCitation",r.type=new Vze.NotificationType(r.method)))(Tve||={});f();var zze=Ne(Ai()),bX;(r=>(r.method="context/update",r.type=new zze.ProtocolRequestType(r.method)))(bX||={});f();f();var HT="Cancelled";f();var An=Ne(Ai()),u7=E.String(),Rp=E.Object({uri:u7}),UR=E.Intersect([Rp,E.Object({version:E.Optional(E.Integer())})]),eqn=E.Required(UR),fu=E.Object({line:E.Integer({minimum:0}),character:E.Integer({minimum:0})}),Hc=E.Object({start:fu,end:fu}),wve=E.Union([E.Integer(),E.String()]),tqn=E.Object({isCancellationRequested:E.Boolean(),onCancellationRequested:E.Any()});f();var Kze=Ne(Ai()),_ve;(r=>(r.method="textDocument/didFocus",r.type=new Kze.ProtocolNotificationType(r.method)))(_ve||={});f();var Pjt=E.Object({didChangeFeatureFlags:E.Boolean(),fetch:E.Boolean(),ipCodeCitation:E.Boolean(),redirectedTelemetry:E.Boolean(),related:E.Boolean(),token:E.Boolean(),watchedFiles:E.Boolean(),showPanelMessage:E.Boolean()}),Djt=E.Object({name:E.String(),version:E.String(),readableName:E.Optional(E.String())}),Yze=E.Object({name:E.String(),version:E.Optional(E.String()),readableName:E.Optional(E.String())}),Jze=E.Object({editorInfo:E.Optional(Yze),editorPluginInfo:E.Optional(Yze),relatedPluginInfo:E.Optional(E.Array(Djt)),copilotIntegrationId:E.Optional(E.String()),copilotCapabilities:E.Optional(E.Partial(Pjt)),githubAppId:E.Optional(E.String())});f();var d7=Ne(Ai());var IX=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(IX||{}),Bjt=E.Enum(IX),Njt=E.Object({triggerKind:Bjt,selectedCompletionInfo:E.Optional(E.Object({text:E.String(),range:Hc,tooltipSignature:E.Optional(E.String())}))}),Xze=E.Object({textDocument:UR,position:fu,formattingOptions:E.Optional(E.Object({tabSize:E.Optional(E.Union([E.Integer({minimum:1}),E.String()])),insertSpaces:E.Optional(E.Union([E.Boolean(),E.String()]))})),context:Njt,data:E.Optional(E.Unknown())}),Sve;(r=>(r.method="textDocument/inlineCompletion",r.type=new d7.ProtocolRequestType(r.method)))(Sve||={});var Zze=E.Object({command:E.Object({arguments:E.Tuple([E.String({minLength:1})])})}),eKe=E.Object({item:Zze}),Rve;(r=>(r.method="textDocument/didShowCompletion",r.type=new d7.ProtocolNotificationType(r.method)))(Rve||={});var tKe=E.Object({item:Zze,acceptedLength:E.Integer({minimum:1})}),kve;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new d7.ProtocolNotificationType(r.method)))(kve||={});f();var rKe=Ne(Ai()),Pve;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new rKe.ProtocolRequestType(r.method)))(Pve||={});f();var nKe=Ne(Ai()),iKe=E.Object({textDocument:UR,position:fu}),Mjt=E.Object({command:E.Object({arguments:E.Tuple([E.String({minLength:1})])})}),oKe=E.Object({item:Mjt}),Dve;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new nKe.ProtocolNotificationType(r.method)))(Dve||={});f();var TX=Ne(Ai());var sKe=E.Object({textDocument:UR,position:fu,partialResultToken:E.Optional(wve),workDoneToken:E.Optional(wve)}),wX;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new TX.ProtocolRequestType(n.method),n.partialResult=new TX.ProgressType))(wX||={});f();var aKe=Ne(Ai()),Bve;(r=>(r.method="copilot/related",r.type=new aKe.ProtocolRequestType(r.method)))(Bve||={});f();var cKe=Ne(Ai()),Nve;(r=>(r.method="statusNotification",r.type=new cKe.ProtocolNotificationType(r.method)))(Nve||={});var lKe=Ne(require("events"));var _X="CompletionRequested",zC=class{constructor(e){this.ctx=e}static{a(this,"CompletionNotifier")}#e=new lKe.default;notifyRequest(e,r,n,o,s){return this.#e.emit(_X,{completionId:r,completionState:e,telemetryData:n,cancellationToken:o,options:s})}onRequest(e){let r=eu(this.ctx,e,`event.${_X}`);return this.#e.on(_X,r),An.Disposable.create(()=>this.#e.off(_X,r))}};f();var Mve=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name=`UnregisteredContextErrorFor${r.name}`}static{a(this,"UnregisteredContextError")}},y3=class{constructor(){this.instances=new Map}static{a(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new Mve(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};f();f();f();var SX=class t{static{a(this,"FullTextDocument")}constructor(e,r,n,o){this._uri=e,this._languageId=r,this._version=n,this._content=o,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let o=fKe(n.range),s=this.offsetAt(o.start),c=this.offsetAt(o.end);this._content=this._content.substring(0,s)+n.text+this._content.substring(c,this._content.length);let l=Math.max(o.start.line,0),u=Math.max(o.end.line,0),d=this._lineOffsets,p=uKe(n.text,!1,s);if(u-l===p.length)for(let h=0,g=p.length;h<g;h++)d[h+l+1]=p[h];else p.length<1e4?d.splice(l+1,u-l,...p):this._lineOffsets=d=d.slice(0,l+1).concat(p,d.slice(u+1));let m=n.text.length-(c-s);if(m!==0)for(let h=l+1+p.length,g=d.length;h<g;h++)d[h]=d[h]+m}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=uKe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,o=r.length;if(o===0)return{line:0,character:e};for(;n<o;){let c=Math.floor((n+o)/2);r[c]>e?o=c:n=c+1}let s=n-1;return e=this.ensureBeforeEOL(e,r[s]),{line:s,character:e-r[s]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let o=e.line+1<r.length?r[e.line+1]:this._content.length,s=Math.min(n+e.character,o);return this.ensureBeforeEOL(s,n)}ensureBeforeEOL(e,r){for(;e>r&&dKe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},$T;(function(t){function e(o,s,c,l){return new SX(o,s,c,l)}a(e,"create"),t.create=e;function r(o,s,c){if(o instanceof SX)return o.update(s,c),o;throw new Error("TextDocument.update: document must be created by TextDocument.create")}a(r,"update"),t.update=r;function n(o,s){let c=o.getText(),l=Lve(s.map(Ljt),(p,m)=>{let h=p.range.start.line-m.range.start.line;return h===0?p.range.start.character-m.range.start.character:h}),u=0,d=[];for(let p of l){let m=o.offsetAt(p.range.start);if(m<u)throw new Error("Overlapping edit");m>u&&d.push(c.substring(u,m)),p.newText.length&&d.push(p.newText),u=o.offsetAt(p.range.end)}return d.push(c.substr(u)),d.join("")}a(n,"applyEdits"),t.applyEdits=n})($T||($T={}));function Lve(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),o=t.slice(r);Lve(n,e),Lve(o,e);let s=0,c=0,l=0;for(;s<n.length&&c<o.length;)e(n[s],o[c])<=0?t[l++]=n[s++]:t[l++]=o[c++];for(;s<n.length;)t[l++]=n[s++];for(;c<o.length;)t[l++]=o[c++];return t}a(Lve,"mergeSort");function uKe(t,e,r=0){let n=e?[r]:[];for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);dKe(s)&&(s===13&&o+1<t.length&&t.charCodeAt(o+1)===10&&o++,n.push(r+o+1))}return n}a(uKe,"computeLineOffsets");function dKe(t){return t===13||t===10}a(dKe,"isEOL");function fKe(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}a(fKe,"getWellformedRange");function Ljt(t){let e=fKe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}a(Ljt,"getWellformedEdit");f();var pKe;(function(t){function e(r){return typeof r=="string"}a(e,"is"),t.is=e})(pKe||(pKe={}));var Fve;(function(t){function e(r){return typeof r=="string"}a(e,"is"),t.is=e})(Fve||(Fve={}));var mKe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}a(e,"is"),t.is=e})(mKe||(mKe={}));var RX;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}a(e,"is"),t.is=e})(RX||(RX={}));var jd;(function(t){function e(n,o){return n===Number.MAX_VALUE&&(n=RX.MAX_VALUE),o===Number.MAX_VALUE&&(o=RX.MAX_VALUE),{line:n,character:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.uinteger(o.line)&&Ze.uinteger(o.character)}a(r,"is"),t.is=r})(jd||(jd={}));var Ws;(function(t){function e(n,o,s,c){if(Ze.uinteger(n)&&Ze.uinteger(o)&&Ze.uinteger(s)&&Ze.uinteger(c))return{start:jd.create(n,o),end:jd.create(s,c)};if(jd.is(n)&&jd.is(o))return{start:n,end:o};throw new Error(`Range#create called with invalid arguments[${n}, ${o}, ${s}, ${c}]`)}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&jd.is(o.start)&&jd.is(o.end)}a(r,"is"),t.is=r})(Ws||(Ws={}));var kX;(function(t){function e(n,o){return{uri:n,range:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ws.is(o.range)&&(Ze.string(o.uri)||Ze.undefined(o.uri))}a(r,"is"),t.is=r})(kX||(kX={}));var hKe;(function(t){function e(n,o,s,c){return{targetUri:n,targetRange:o,targetSelectionRange:s,originSelectionRange:c}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ws.is(o.targetRange)&&Ze.string(o.targetUri)&&Ws.is(o.targetSelectionRange)&&(Ws.is(o.originSelectionRange)||Ze.undefined(o.originSelectionRange))}a(r,"is"),t.is=r})(hKe||(hKe={}));var Ove;(function(t){function e(n,o,s,c){return{red:n,green:o,blue:s,alpha:c}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.numberRange(o.red,0,1)&&Ze.numberRange(o.green,0,1)&&Ze.numberRange(o.blue,0,1)&&Ze.numberRange(o.alpha,0,1)}a(r,"is"),t.is=r})(Ove||(Ove={}));var gKe;(function(t){function e(n,o){return{range:n,color:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ws.is(o.range)&&Ove.is(o.color)}a(r,"is"),t.is=r})(gKe||(gKe={}));var AKe;(function(t){function e(n,o,s){return{label:n,textEdit:o,additionalTextEdits:s}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.string(o.label)&&(Ze.undefined(o.textEdit)||v3.is(o))&&(Ze.undefined(o.additionalTextEdits)||Ze.typedArray(o.additionalTextEdits,v3.is))}a(r,"is"),t.is=r})(AKe||(AKe={}));var yKe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(yKe||(yKe={}));var CKe;(function(t){function e(n,o,s,c,l,u){let d={startLine:n,endLine:o};return Ze.defined(s)&&(d.startCharacter=s),Ze.defined(c)&&(d.endCharacter=c),Ze.defined(l)&&(d.kind=l),Ze.defined(u)&&(d.collapsedText=u),d}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.uinteger(o.startLine)&&Ze.uinteger(o.startLine)&&(Ze.undefined(o.startCharacter)||Ze.uinteger(o.startCharacter))&&(Ze.undefined(o.endCharacter)||Ze.uinteger(o.endCharacter))&&(Ze.undefined(o.kind)||Ze.string(o.kind))}a(r,"is"),t.is=r})(CKe||(CKe={}));var Qve;(function(t){function e(n,o){return{location:n,message:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&kX.is(o.location)&&Ze.string(o.message)}a(r,"is"),t.is=r})(Qve||(Qve={}));var vKe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(vKe||(vKe={}));var xKe;(function(t){t.Unnecessary=1,t.Deprecated=2})(xKe||(xKe={}));var EKe;(function(t){function e(r){let n=r;return Ze.objectLiteral(n)&&Ze.string(n.href)}a(e,"is"),t.is=e})(EKe||(EKe={}));var PX;(function(t){function e(n,o,s,c,l,u){let d={range:n,message:o};return Ze.defined(s)&&(d.severity=s),Ze.defined(c)&&(d.code=c),Ze.defined(l)&&(d.source=l),Ze.defined(u)&&(d.relatedInformation=u),d}a(e,"create"),t.create=e;function r(n){var o;let s=n;return Ze.defined(s)&&Ws.is(s.range)&&Ze.string(s.message)&&(Ze.number(s.severity)||Ze.undefined(s.severity))&&(Ze.integer(s.code)||Ze.string(s.code)||Ze.undefined(s.code))&&(Ze.undefined(s.codeDescription)||Ze.string((o=s.codeDescription)===null||o===void 0?void 0:o.href))&&(Ze.string(s.source)||Ze.undefined(s.source))&&(Ze.undefined(s.relatedInformation)||Ze.typedArray(s.relatedInformation,Qve.is))}a(r,"is"),t.is=r})(PX||(PX={}));var C3;(function(t){function e(n,o,...s){let c={title:n,command:o};return Ze.defined(s)&&s.length>0&&(c.arguments=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.title)&&Ze.string(o.command)}a(r,"is"),t.is=r})(C3||(C3={}));var v3;(function(t){function e(s,c){return{range:s,newText:c}}a(e,"replace"),t.replace=e;function r(s,c){return{range:{start:s,end:s},newText:c}}a(r,"insert"),t.insert=r;function n(s){return{range:s,newText:""}}a(n,"del"),t.del=n;function o(s){let c=s;return Ze.objectLiteral(c)&&Ze.string(c.newText)&&Ws.is(c.range)}a(o,"is"),t.is=o})(v3||(v3={}));var Uve;(function(t){function e(n,o,s){let c={label:n};return o!==void 0&&(c.needsConfirmation=o),s!==void 0&&(c.description=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ze.string(o.label)&&(Ze.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(Ze.string(o.description)||o.description===void 0)}a(r,"is"),t.is=r})(Uve||(Uve={}));var x3;(function(t){function e(r){let n=r;return Ze.string(n)}a(e,"is"),t.is=e})(x3||(x3={}));var bKe;(function(t){function e(s,c,l){return{range:s,newText:c,annotationId:l}}a(e,"replace"),t.replace=e;function r(s,c,l){return{range:{start:s,end:s},newText:c,annotationId:l}}a(r,"insert"),t.insert=r;function n(s,c){return{range:s,newText:"",annotationId:c}}a(n,"del"),t.del=n;function o(s){let c=s;return v3.is(c)&&(Uve.is(c.annotationId)||x3.is(c.annotationId))}a(o,"is"),t.is=o})(bKe||(bKe={}));var qve;(function(t){function e(n,o){return{textDocument:n,edits:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Gve.is(o.textDocument)&&Array.isArray(o.edits)}a(r,"is"),t.is=r})(qve||(qve={}));var Hve;(function(t){function e(n,o,s){let c={kind:"create",uri:n};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),s!==void 0&&(c.annotationId=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return o&&o.kind==="create"&&Ze.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||Ze.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||Ze.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||x3.is(o.annotationId))}a(r,"is"),t.is=r})(Hve||(Hve={}));var $ve;(function(t){function e(n,o,s,c){let l={kind:"rename",oldUri:n,newUri:o};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(l.options=s),c!==void 0&&(l.annotationId=c),l}a(e,"create"),t.create=e;function r(n){let o=n;return o&&o.kind==="rename"&&Ze.string(o.oldUri)&&Ze.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||Ze.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||Ze.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||x3.is(o.annotationId))}a(r,"is"),t.is=r})($ve||($ve={}));var Wve;(function(t){function e(n,o,s){let c={kind:"delete",uri:n};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(c.options=o),s!==void 0&&(c.annotationId=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return o&&o.kind==="delete"&&Ze.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||Ze.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||Ze.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||x3.is(o.annotationId))}a(r,"is"),t.is=r})(Wve||(Wve={}));var jve;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(o=>Ze.string(o.kind)?Hve.is(o)||$ve.is(o)||Wve.is(o):qve.is(o)))}a(e,"is"),t.is=e})(jve||(jve={}));var IKe;(function(t){function e(n){return{uri:n}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.uri)}a(r,"is"),t.is=r})(IKe||(IKe={}));var TKe;(function(t){function e(n,o){return{uri:n,version:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.uri)&&Ze.integer(o.version)}a(r,"is"),t.is=r})(TKe||(TKe={}));var Gve;(function(t){function e(n,o){return{uri:n,version:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.uri)&&(o.version===null||Ze.integer(o.version))}a(r,"is"),t.is=r})(Gve||(Gve={}));var wKe;(function(t){function e(n,o,s,c){return{uri:n,languageId:o,version:s,text:c}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.string(o.uri)&&Ze.string(o.languageId)&&Ze.integer(o.version)&&Ze.string(o.text)}a(r,"is"),t.is=r})(wKe||(wKe={}));var Vve;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}a(e,"is"),t.is=e})(Vve||(Vve={}));var f7;(function(t){function e(r){let n=r;return Ze.objectLiteral(r)&&Vve.is(n.kind)&&Ze.string(n.value)}a(e,"is"),t.is=e})(f7||(f7={}));var _Ke;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(_Ke||(_Ke={}));var SKe;(function(t){t.PlainText=1,t.Snippet=2})(SKe||(SKe={}));var RKe;(function(t){t.Deprecated=1})(RKe||(RKe={}));var kKe;(function(t){function e(n,o,s){return{newText:n,insert:o,replace:s}}a(e,"create"),t.create=e;function r(n){let o=n;return o&&Ze.string(o.newText)&&Ws.is(o.insert)&&Ws.is(o.replace)}a(r,"is"),t.is=r})(kKe||(kKe={}));var PKe;(function(t){t.asIs=1,t.adjustIndentation=2})(PKe||(PKe={}));var DKe;(function(t){function e(r){let n=r;return n&&(Ze.string(n.detail)||n.detail===void 0)&&(Ze.string(n.description)||n.description===void 0)}a(e,"is"),t.is=e})(DKe||(DKe={}));var BKe;(function(t){function e(r){return{label:r}}a(e,"create"),t.create=e})(BKe||(BKe={}));var NKe;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}a(e,"create"),t.create=e})(NKe||(NKe={}));var DX;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}a(e,"fromPlainText"),t.fromPlainText=e;function r(n){let o=n;return Ze.string(o)||Ze.objectLiteral(o)&&Ze.string(o.language)&&Ze.string(o.value)}a(r,"is"),t.is=r})(DX||(DX={}));var MKe;(function(t){function e(r){let n=r;return!!n&&Ze.objectLiteral(n)&&(f7.is(n.contents)||DX.is(n.contents)||Ze.typedArray(n.contents,DX.is))&&(r.range===void 0||Ws.is(r.range))}a(e,"is"),t.is=e})(MKe||(MKe={}));var LKe;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}a(e,"create"),t.create=e})(LKe||(LKe={}));var FKe;(function(t){function e(r,n,...o){let s={label:r};return Ze.defined(n)&&(s.documentation=n),Ze.defined(o)?s.parameters=o:s.parameters=[],s}a(e,"create"),t.create=e})(FKe||(FKe={}));var OKe;(function(t){t.Text=1,t.Read=2,t.Write=3})(OKe||(OKe={}));var QKe;(function(t){function e(r,n){let o={range:r};return Ze.number(n)&&(o.kind=n),o}a(e,"create"),t.create=e})(QKe||(QKe={}));var UKe;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(UKe||(UKe={}));var qKe;(function(t){t.Deprecated=1})(qKe||(qKe={}));var HKe;(function(t){function e(r,n,o,s,c){let l={name:r,kind:n,location:{uri:s,range:o}};return c&&(l.containerName=c),l}a(e,"create"),t.create=e})(HKe||(HKe={}));var $Ke;(function(t){function e(r,n,o,s){return s!==void 0?{name:r,kind:n,location:{uri:o,range:s}}:{name:r,kind:n,location:{uri:o}}}a(e,"create"),t.create=e})($Ke||($Ke={}));var WKe;(function(t){function e(n,o,s,c,l,u){let d={name:n,detail:o,kind:s,range:c,selectionRange:l};return u!==void 0&&(d.children=u),d}a(e,"create"),t.create=e;function r(n){let o=n;return o&&Ze.string(o.name)&&Ze.number(o.kind)&&Ws.is(o.range)&&Ws.is(o.selectionRange)&&(o.detail===void 0||Ze.string(o.detail))&&(o.deprecated===void 0||Ze.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}a(r,"is"),t.is=r})(WKe||(WKe={}));var jKe;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(jKe||(jKe={}));var BX;(function(t){t.Invoked=1,t.Automatic=2})(BX||(BX={}));var GKe;(function(t){function e(n,o,s){let c={diagnostics:n};return o!=null&&(c.only=o),s!=null&&(c.triggerKind=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.typedArray(o.diagnostics,PX.is)&&(o.only===void 0||Ze.typedArray(o.only,Ze.string))&&(o.triggerKind===void 0||o.triggerKind===BX.Invoked||o.triggerKind===BX.Automatic)}a(r,"is"),t.is=r})(GKe||(GKe={}));var VKe;(function(t){function e(n,o,s){let c={title:n},l=!0;return typeof o=="string"?(l=!1,c.kind=o):C3.is(o)?c.command=o:c.edit=o,l&&s!==void 0&&(c.kind=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return o&&Ze.string(o.title)&&(o.diagnostics===void 0||Ze.typedArray(o.diagnostics,PX.is))&&(o.kind===void 0||Ze.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||C3.is(o.command))&&(o.isPreferred===void 0||Ze.boolean(o.isPreferred))&&(o.edit===void 0||jve.is(o.edit))}a(r,"is"),t.is=r})(VKe||(VKe={}));var zKe;(function(t){function e(n,o){let s={range:n};return Ze.defined(o)&&(s.data=o),s}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ws.is(o.range)&&(Ze.undefined(o.command)||C3.is(o.command))}a(r,"is"),t.is=r})(zKe||(zKe={}));var KKe;(function(t){function e(n,o){return{tabSize:n,insertSpaces:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ze.uinteger(o.tabSize)&&Ze.boolean(o.insertSpaces)}a(r,"is"),t.is=r})(KKe||(KKe={}));var YKe;(function(t){function e(n,o,s){return{range:n,target:o,data:s}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ws.is(o.range)&&(Ze.undefined(o.target)||Ze.string(o.target))}a(r,"is"),t.is=r})(YKe||(YKe={}));var JKe;(function(t){function e(n,o){return{range:n,parent:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&Ws.is(o.range)&&(o.parent===void 0||t.is(o.parent))}a(r,"is"),t.is=r})(JKe||(JKe={}));var XKe;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(XKe||(XKe={}));var ZKe;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(ZKe||(ZKe={}));var eYe;(function(t){function e(r){let n=r;return Ze.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}a(e,"is"),t.is=e})(eYe||(eYe={}));var tYe;(function(t){function e(n,o){return{range:n,text:o}}a(e,"create"),t.create=e;function r(n){let o=n;return o!=null&&Ws.is(o.range)&&Ze.string(o.text)}a(r,"is"),t.is=r})(tYe||(tYe={}));var rYe;(function(t){function e(n,o,s){return{range:n,variableName:o,caseSensitiveLookup:s}}a(e,"create"),t.create=e;function r(n){let o=n;return o!=null&&Ws.is(o.range)&&Ze.boolean(o.caseSensitiveLookup)&&(Ze.string(o.variableName)||o.variableName===void 0)}a(r,"is"),t.is=r})(rYe||(rYe={}));var nYe;(function(t){function e(n,o){return{range:n,expression:o}}a(e,"create"),t.create=e;function r(n){let o=n;return o!=null&&Ws.is(o.range)&&(Ze.string(o.expression)||o.expression===void 0)}a(r,"is"),t.is=r})(nYe||(nYe={}));var iYe;(function(t){function e(n,o){return{frameId:n,stoppedLocation:o}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.defined(o)&&Ws.is(n.stoppedLocation)}a(r,"is"),t.is=r})(iYe||(iYe={}));var zve;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}a(e,"is"),t.is=e})(zve||(zve={}));var Kve;(function(t){function e(n){return{value:n}}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&(o.tooltip===void 0||Ze.string(o.tooltip)||f7.is(o.tooltip))&&(o.location===void 0||kX.is(o.location))&&(o.command===void 0||C3.is(o.command))}a(r,"is"),t.is=r})(Kve||(Kve={}));var oYe;(function(t){function e(n,o,s){let c={position:n,label:o};return s!==void 0&&(c.kind=s),c}a(e,"create"),t.create=e;function r(n){let o=n;return Ze.objectLiteral(o)&&jd.is(o.position)&&(Ze.string(o.label)||Ze.typedArray(o.label,Kve.is))&&(o.kind===void 0||zve.is(o.kind))&&o.textEdits===void 0||Ze.typedArray(o.textEdits,v3.is)&&(o.tooltip===void 0||Ze.string(o.tooltip)||f7.is(o.tooltip))&&(o.paddingLeft===void 0||Ze.boolean(o.paddingLeft))&&(o.paddingRight===void 0||Ze.boolean(o.paddingRight))}a(r,"is"),t.is=r})(oYe||(oYe={}));var sYe;(function(t){function e(r){return{kind:"snippet",value:r}}a(e,"createSnippet"),t.createSnippet=e})(sYe||(sYe={}));var aYe;(function(t){function e(r,n,o,s){return{insertText:r,filterText:n,range:o,command:s}}a(e,"create"),t.create=e})(aYe||(aYe={}));var cYe;(function(t){function e(r){return{items:r}}a(e,"create"),t.create=e})(cYe||(cYe={}));var lYe;(function(t){t.Invoked=0,t.Automatic=1})(lYe||(lYe={}));var uYe;(function(t){function e(r,n){return{range:r,text:n}}a(e,"create"),t.create=e})(uYe||(uYe={}));var dYe;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}a(e,"create"),t.create=e})(dYe||(dYe={}));var fYe;(function(t){function e(r){let n=r;return Ze.objectLiteral(n)&&Fve.is(n.uri)&&Ze.string(n.name)}a(e,"is"),t.is=e})(fYe||(fYe={}));var pYe;(function(t){function e(s,c,l,u){return new Yve(s,c,l,u)}a(e,"create"),t.create=e;function r(s){let c=s;return!!(Ze.defined(c)&&Ze.string(c.uri)&&(Ze.undefined(c.languageId)||Ze.string(c.languageId))&&Ze.uinteger(c.lineCount)&&Ze.func(c.getText)&&Ze.func(c.positionAt)&&Ze.func(c.offsetAt))}a(r,"is"),t.is=r;function n(s,c){let l=s.getText(),u=o(c,(p,m)=>{let h=p.range.start.line-m.range.start.line;return h===0?p.range.start.character-m.range.start.character:h}),d=l.length;for(let p=u.length-1;p>=0;p--){let m=u[p],h=s.offsetAt(m.range.start),g=s.offsetAt(m.range.end);if(g<=d)l=l.substring(0,h)+m.newText+l.substring(g,l.length);else throw new Error("Overlapping edit");d=h}return l}a(n,"applyEdits"),t.applyEdits=n;function o(s,c){if(s.length<=1)return s;let l=s.length/2|0,u=s.slice(0,l),d=s.slice(l);o(u,c),o(d,c);let p=0,m=0,h=0;for(;p<u.length&&m<d.length;)c(u[p],d[m])<=0?s[h++]=u[p++]:s[h++]=d[m++];for(;p<u.length;)s[h++]=u[p++];for(;m<d.length;)s[h++]=d[m++];return s}a(o,"mergeSort")})(pYe||(pYe={}));var Yve=class{static{a(this,"FullTextDocument")}constructor(e,r,n,o){this._uri=e,this._languageId=r,this._version=n,this._content=o,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let o=0;o<r.length;o++){n&&(e.push(o),n=!1);let s=r.charAt(o);n=s==="\r"||s===`
`,s==="\r"&&o+1<r.length&&r.charAt(o+1)===`
`&&o++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,o=r.length;if(o===0)return jd.create(0,e);for(;n<o;){let c=Math.floor((n+o)/2);r[c]>e?o=c:n=c+1}let s=n-1;return jd.create(s,e-r[s])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],o=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,o),n)}get lineCount(){return this.getLineOffsets().length}},Ze;(function(t){let e=Object.prototype.toString;function r(g){return typeof g<"u"}a(r,"defined"),t.defined=r;function n(g){return typeof g>"u"}a(n,"undefined"),t.undefined=n;function o(g){return g===!0||g===!1}a(o,"boolean"),t.boolean=o;function s(g){return e.call(g)==="[object String]"}a(s,"string"),t.string=s;function c(g){return e.call(g)==="[object Number]"}a(c,"number"),t.number=c;function l(g,A,y){return e.call(g)==="[object Number]"&&A<=g&&g<=y}a(l,"numberRange"),t.numberRange=l;function u(g){return e.call(g)==="[object Number]"&&-2147483648<=g&&g<=2147483647}a(u,"integer"),t.integer=u;function d(g){return e.call(g)==="[object Number]"&&0<=g&&g<=2147483647}a(d,"uinteger"),t.uinteger=d;function p(g){return e.call(g)==="[object Function]"}a(p,"func"),t.func=p;function m(g){return g!==null&&typeof g=="object"}a(m,"objectLiteral"),t.objectLiteral=m;function h(g,A){return Array.isArray(g)&&g.every(A)}a(h,"typedArray"),t.typedArray=h})(Ze||(Ze={}));var Is=class{static{a(this,"LocationFactory")}static{this.range=Ws.create.bind(Ws)}static{this.position=jd.create.bind(jd)}},Rx=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{a(this,"CopilotTextDocument")}static withChanges(e,r,n){let o=$T.create(e.clientUri,e.clientLanguageId,n,e.getText());return $T.update(o,r,n),new t(e.uri,o,e.detectedLanguageId)}applyEdits(e){let r=$T.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return $T.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,o,s=RT({uri:e,languageId:r})){return new t(Bl(e),$T.create(e,r,n,o),s)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=Ws.create(r,0,r+1,0),o=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),s=Ws.create(jd.create(r,0),jd.create(r,o.length)),c=o.trim().length===0;return{text:o,range:s,isEmptyOrWhitespace:c}}};f();f();f();f();var p7={isBlocked:!1,reason:"VALID_FILE"},NX={isBlocked:!1,reason:"NO_MATCHING_POLICY"},mYe={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},qR={all:"all",repo:"repo"},WT=new ft("contentExclusion");f();f();var MX=class{static{a(this,"PolicyEvaluator")}};f();f();f();var hYe=new ft("repository"),HR=class t{constructor(){this.data={}}static{a(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),o=`.${r}`.toLowerCase();return Object.keys(this.data).filter(s=>s.startsWith(n)&&s.endsWith(o)).map(s=>s.slice(n.length,-o.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,o])=>(o.forEach(s=>r.add(n,s)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},NA=class{static{a(this,"GitConfigLoader")}},LX=class extends NA{constructor(r){super();this.loaders=r}static{a(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let o of this.loaders){let s=await o.getConfig(r,n);if(s)return s}}};f();var gYe=require("os");var FX=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{a(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return EI.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=EI.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,gYe.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var OX=class{static{a(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(NA).getConfig(e,r);if(!n)return;let o=this.getRemotes(n),s=o.filter(c=>c.url.isGitHub());if(s.length)return s.find(c=>c.name==="origin")?.url??s[0].url;if(o.length)return o.find(c=>c.name==="origin")?.url??o[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new FX(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var Fjt=100,Jve=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{a(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},MA=class t{constructor(e){this.ctx=e;this.remoteResolver=new OX;this.cache=new Sr(Fjt)}static{a(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let s=this.cache.get(e);return this.updateCache(n,s),s}n.push(e.toString());let o=await this.tryGetRepoForFolder(e);if(o)return this.updateCache(n,o),o;r=e,e=Rd(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Jve(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(Qi),o=Ki(r,".git");if((await n.stat(o)).type&1)return await this.getConfigLocationForGitfile(n,r,o);let c=Ki(o,"config");return await n.stat(c),c}catch{return}}static async getConfigLocationForGitfile(e,r,n){let s=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!s)return;let c=jS(r,s[1]),l=Ki(c,"config");if(await this.tryStat(e,l)!==void 0)return l;let u=Ki(c,"config.worktree");if(await this.tryStat(e,u)!==void 0)return u;let d=Ki(c,"commondir");c=jS(c,(await e.readFileString(d)).trimEnd());let p=Ki(c,"config");return await e.stat(p),p}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};f();var $R=a((t,e)=>{if(HC.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...HC.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");f();f();f();var QX=new WeakMap;function UX(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",o=0,s=Object.prototype.toString.call(t);if(s!=="[object RegExp]"&&s!=="[object Date]"&&QX.has(t))return QX.get(t);switch(QX.set(t,"~"+ ++e),s){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";o<r.length;n+=UX(r[o++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();o<r.length;n+=r[o]+UX(t[r[o++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();o<r.length;n+=r[o]+UX(t.get(r[o++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return QX.set(t,n),n}a(UX,"t");function qX(t){return UX(t,0)}a(qX,"r");var Xve=new WeakMap;function AYe(t,e,r=qX(e)){let n,o,s=Xve.get(t);s||(Xve.set(t,s=[[],o=[],n=[]]),queueMicrotask(function(){let d,p=0;function m(h){for(;d=n[p++];d.r(h));}a(m,"o"),Xve.delete(t),t(o).then(function(h){if(h.length!==n.length)return m(new Error("loader value length mismatch"));for(;d=h[p++],p<=h.length;d instanceof Error?n[p-1].r(d):n[p-1].s(d));},m)}));let c=s[0].indexOf(r);if(~c)return s[2][c].p;let l=s[0].push(r)-1,u=s[2][l]={};return s[1][l]=e,u.p=new Promise(function(d,p){u.s=d,u.r=p})}a(AYe,"n");var yYe=new WeakMap;function Ojt(t,e,r,n=qX(r)){if(e||(e=yYe.get(t)),e||yYe.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let o=AYe(t,r,n);return e.set(n,o),o.catch(()=>e.delete(n)),o}a(Ojt,"n");function CYe(t,e){return function(r,n){return Ojt(t,e,r,n)}}a(CYe,"o");f();var UYe=Ne(DYe(),1);f();var g7=a(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var Gjt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},A7=a(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),Vjt=a(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),BYe=a(t=>t.join(""),"rangesToString"),NYe=a((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],o=[],s=r+1,c=!1,l=!1,u=!1,d=!1,p=r,m="";e:for(;s<t.length;){let y=t.charAt(s);if((y==="!"||y==="^")&&s===r+1){d=!0,s++;continue}if(y==="]"&&c&&!u){p=s+1;break}if(c=!0,y==="\\"&&!u){u=!0,s++;continue}if(y==="["&&!u){for(let[v,[b,I,S]]of Object.entries(Gjt))if(t.startsWith(v,s)){if(m)return["$.",!1,t.length-r,!0];s+=v.length,S?o.push(b):n.push(b),l=l||I;continue e}}if(u=!1,m){y>m?n.push(A7(m)+"-"+A7(y)):y===m&&n.push(A7(y)),m="",s++;continue}if(t.startsWith("-]",s+1)){n.push(A7(y+"-")),s+=2;continue}if(t.startsWith("-",s+1)){m=y,s+=2;continue}n.push(A7(y)),s++}if(p<s)return["",!1,0,!1];if(!n.length&&!o.length)return["$.",!1,t.length-r,!0];if(o.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!d){let y=n[0].length===2?n[0].slice(-1):n[0];return[Vjt(y),!1,p-r,!1]}let h="["+(d?"^":"")+BYe(n)+"]",g="["+(d?"":"^")+BYe(o)+"]";return[n.length&&o.length?"("+h+"|"+g+")":n.length?h:g,l,p-r,!0]},"parseClass");f();var jT=a((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var zjt=new Set(["!","?","+","*","@"]),MYe=a(t=>zjt.has(t),"isExtglobType"),Kjt="(?!(?:^|/)\\.\\.?(?:$|/))",HX="(?!\\.)",Yjt=new Set(["[","."]),Jjt=new Set(["..","."]),Xjt=new Set("().*{}+?[]^$\\!"),Zjt=a(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),txe="[^/]",LYe=txe+"*?",FYe=txe+"+?",E3=class t{static{a(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let o=r.#o+1;!n.type&&o<n.#n.length;o++)for(let s of e.#n){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(n.#n[o])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,o){let s=!1,c=!1,l=-1,u=!1;if(r.type===null){let g=n,A="";for(;g<e.length;){let y=e.charAt(g++);if(s||y==="\\"){s=!s,A+=y;continue}if(c){g===l+1?(y==="^"||y==="!")&&(u=!0):y==="]"&&!(g===l+2&&u)&&(c=!1),A+=y;continue}else if(y==="["){c=!0,l=g,u=!1,A+=y;continue}if(!o.noext&&MYe(y)&&e.charAt(g)==="("){r.push(A),A="";let v=new t(y,r);g=t.#u(e,v,g,o),r.push(v);continue}A+=y}return r.push(A),g}let d=n+1,p=new t(null,r),m=[],h="";for(;d<e.length;){let g=e.charAt(d++);if(s||g==="\\"){s=!s,h+=g;continue}if(c){d===l+1?(g==="^"||g==="!")&&(u=!0):g==="]"&&!(d===l+2&&u)&&(c=!1),h+=g;continue}else if(g==="["){c=!0,l=d,u=!1,h+=g;continue}if(MYe(g)&&e.charAt(d)==="("){p.push(h),h="";let A=new t(g,p);p.push(A),d=t.#u(e,A,d,o);continue}if(g==="|"){p.push(h),h="",m.push(p),p=new t(null,r);continue}if(g===")")return h===""&&r.#n.length===0&&(r.#d=!0),p.push(h),h="",r.push(...m,p),d;h+=g}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],d}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,o,s]=this.toRegExpSource();if(!(o||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#c.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let u=this.isStart()&&this.isEnd(),d=this.#n.map(g=>{let[A,y,v,b]=typeof g=="string"?t.#m(g,this.#t,u):g.toRegExpSource(e);return this.#t=this.#t||v,this.#i=this.#i||b,A}).join(""),p="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&Jjt.has(this.#n[0]))){let A=Yjt,y=r&&A.has(d.charAt(0))||d.startsWith("\\.")&&A.has(d.charAt(2))||d.startsWith("\\.\\.")&&A.has(d.charAt(4)),v=!r&&!e&&A.has(d.charAt(0));p=y?Kjt:v?HX:""}let m="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(m="(?:$|\\/)"),[p+d+m,jT(d),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",o=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#f(r);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,jT(this.toString()),!1,!1]}let c=!n||e||r||!HX?"":this.#f(!0);c===s&&(c=""),c&&(s=`(?:${s})(?:${c})*?`);let l="";if(this.type==="!"&&this.#d)l=(this.isStart()&&!r?HX:"")+FYe;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?HX:"")+LYe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&c?")":this.type==="*"&&c?")?":`)${this.type}`;l=o+s+u}return[l,jT(s),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,o,s,c]=r.toRegExpSource(e);return this.#i=this.#i||c,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let o=!1,s="",c=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(o){o=!1,s+=(Xjt.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?s+="\\\\":o=!0;continue}if(u==="["){let[d,p,m,h]=NYe(e,l);if(m){s+=d,c=c||p,l+=m-1,r=r||h;continue}}if(u==="*"){n&&e==="*"?s+=FYe:s+=LYe,r=!0;continue}if(u==="?"){s+=txe,r=!0;continue}s+=Zjt(u)}return[s,jT(e),!!r,c]}};f();var rxe=a((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var $c=a((t,e,r={})=>(g7(e),!r.nocomment&&e.charAt(0)==="#"?!1:new b3(e,r).match(t)),"minimatch"),eGt=/^\*+([^+@!?\*\[\(]*)$/,tGt=a(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),rGt=a(t=>e=>e.endsWith(t),"starDotExtTestDot"),nGt=a(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),iGt=a(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),oGt=/^\*+\.\*+$/,sGt=a(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),aGt=a(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),cGt=/^\.\*+$/,lGt=a(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),uGt=/^\*+$/,dGt=a(t=>t.length!==0&&!t.startsWith("."),"starTest"),fGt=a(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),pGt=/^\?+([^+@!?\*\[\(]*)?$/,mGt=a(([t,e=""])=>{let r=qYe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),hGt=a(([t,e=""])=>{let r=HYe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),gGt=a(([t,e=""])=>{let r=HYe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),AGt=a(([t,e=""])=>{let r=qYe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),qYe=a(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),HYe=a(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),$Ye=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",OYe={win32:{sep:"\\"},posix:{sep:"/"}},yGt=$Ye==="win32"?OYe.win32.sep:OYe.posix.sep;$c.sep=yGt;var Dh=Symbol("globstar **");$c.GLOBSTAR=Dh;var CGt="[^/]",vGt=CGt+"*?",xGt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",EGt="(?:(?!(?:\\/|^)\\.).)*?",bGt=a((t,e={})=>r=>$c(r,t,e),"filter");$c.filter=bGt;var Ph=a((t,e={})=>Object.assign({},t,e),"ext"),IGt=a(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return $c;let e=$c;return Object.assign(a((n,o,s={})=>e(n,o,Ph(t,s)),"m"),{Minimatch:class extends e.Minimatch{static{a(this,"Minimatch")}constructor(o,s={}){super(o,Ph(t,s))}static defaults(o){return e.defaults(Ph(t,o)).Minimatch}},AST:class extends e.AST{static{a(this,"AST")}constructor(o,s,c={}){super(o,s,Ph(t,c))}static fromGlob(o,s={}){return e.AST.fromGlob(o,Ph(t,s))}},unescape:a((n,o={})=>e.unescape(n,Ph(t,o)),"unescape"),escape:a((n,o={})=>e.escape(n,Ph(t,o)),"escape"),filter:a((n,o={})=>e.filter(n,Ph(t,o)),"filter"),defaults:a(n=>e.defaults(Ph(t,n)),"defaults"),makeRe:a((n,o={})=>e.makeRe(n,Ph(t,o)),"makeRe"),braceExpand:a((n,o={})=>e.braceExpand(n,Ph(t,o)),"braceExpand"),match:a((n,o,s={})=>e.match(n,o,Ph(t,s)),"match"),sep:e.sep,GLOBSTAR:Dh})},"defaults");$c.defaults=IGt;var WYe=a((t,e={})=>(g7(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,UYe.default)(t)),"braceExpand");$c.braceExpand=WYe;var TGt=a((t,e={})=>new b3(t,e).makeRe(),"makeRe");$c.makeRe=TGt;var wGt=a((t,e,r={})=>{let n=new b3(e,r);return t=t.filter(o=>n.match(o)),n.options.nonull&&!t.length&&t.push(e),t},"match");$c.match=wGt;var QYe=/[?*]|[+@!]\(.*?\)|\[|\]/,_Gt=a(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),b3=class{static{a(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){g7(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||$Ye,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let o=this.globParts.map((s,c,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=s[0]===""&&s[1]===""&&(s[2]==="?"||!QYe.test(s[2]))&&!QYe.test(s[3]),d=/^[a-z]:/i.test(s[0]);if(u)return[...s.slice(0,4),...s.slice(4).map(p=>this.parse(p))];if(d)return[s[0],...s.slice(1).map(p=>this.parse(p))]}return s.map(u=>this.parse(u))});if(this.debug(this.pattern,o),this.set=o.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let c=this.set[s];c[0]===""&&c[1]===""&&this.globParts[s][2]==="?"&&typeof c[3]=="string"&&/^[a-z]:$/i.test(c[3])&&(c[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let o=0;o<e[n].length;o++)e[n][o]==="**"&&(e[n][o]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let o=n;for(;r[o+1]==="**";)o++;o!==n&&r.splice(n,o-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,o)=>{let s=n[n.length-1];return o==="**"&&s==="**"?n:o===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(n.pop(),n):(n.push(o),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let o=1;o<e.length-1;o++){let s=e[o];o===1&&s===""&&e[0]===""||(s==="."||s==="")&&(r=!0,e.splice(o,1),o--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let o=e[n-1];o&&o!=="."&&o!==".."&&o!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let o=-1;for(;(o=n.indexOf("**",o+1))!==-1;){let c=o;for(;n[c+1]==="**";)c++;c>o&&n.splice(o+1,c-o);let l=n[o+1],u=n[o+2],d=n[o+3];if(l!==".."||!u||u==="."||u===".."||!d||d==="."||d==="..")continue;r=!0,n.splice(o,1);let p=n.slice(0);p[o]="**",e.push(p),o--}if(!this.preserveMultipleSlashes){for(let c=1;c<n.length-1;c++){let l=n[c];c===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(c,1),c--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let s=0;for(;(s=n.indexOf("..",s+1))!==-1;){let c=n[s-1];if(c&&c!=="."&&c!==".."&&c!=="**"){r=!0;let u=s===1&&n[s+1]==="**"?["."]:[];n.splice(s-1,2,...u),n.length===0&&n.push(""),s-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let o=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(o){e[r]=[],e[n]=o;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let o=0,s=0,c=[],l="";for(;o<e.length&&s<r.length;)if(e[o]===r[s])c.push(l==="b"?r[s]:e[o]),o++,s++;else if(n&&e[o]==="**"&&r[s]===e[o+1])c.push(e[o]),o++;else if(n&&r[s]==="**"&&e[o]===r[s+1])c.push(r[s]),s++;else if(e[o]==="*"&&r[s]&&(this.options.dot||!r[s].startsWith("."))&&r[s]!=="**"){if(l==="b")return!1;l="a",c.push(e[o]),o++,s++}else if(r[s]==="*"&&e[o]&&(this.options.dot||!e[o].startsWith("."))&&e[o]!=="**"){if(l==="a")return!1;l="b",c.push(r[s]),o++,s++}else return!1;return e.length===r.length&&c}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let o=0;o<e.length&&e.charAt(o)==="!";o++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let o=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),I=!b&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),S=v?3:y?0:void 0,k=I?3:b?0:void 0;if(typeof S=="number"&&typeof k=="number"){let[N,F]=[e[S],r[k]];N.toLowerCase()===F.toLowerCase()&&(r[k]=N,k>S?r=r.slice(k):S>k&&(e=e.slice(S)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var c=0,l=0,u=e.length,d=r.length;c<u&&l<d;c++,l++){this.debug("matchOne loop");var p=r[l],m=e[c];if(this.debug(r,p,m),p===!1)return!1;if(p===Dh){this.debug("GLOBSTAR",[r,p,m]);var h=c,g=l+1;if(g===d){for(this.debug("** at the end");c<u;c++)if(e[c]==="."||e[c]===".."||!o.dot&&e[c].charAt(0)===".")return!1;return!0}for(;h<u;){var A=e[h];if(this.debug(`
globstar while`,e,h,r,g,A),this.matchOne(e.slice(h),r.slice(g),n))return this.debug("globstar found match!",h,u,A),!0;if(A==="."||A===".."||!o.dot&&A.charAt(0)==="."){this.debug("dot detected!",e,h,r,g);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,h,r,g),h===u))}let y;if(typeof p=="string"?(y=m===p,this.debug("string match",p,m,y)):(y=p.test(m),this.debug("pattern match",p,m,y)),!y)return!1}if(c===u&&l===d)return!0;if(c===u)return n;if(l===d)return c===u-1&&e[c]==="";throw new Error("wtf?")}braceExpand(){return WYe(this.pattern,this.options)}parse(e){g7(e);let r=this.options;if(e==="**")return Dh;if(e==="")return"";let n,o=null;(n=e.match(uGt))?o=r.dot?fGt:dGt:(n=e.match(eGt))?o=(r.nocase?r.dot?iGt:nGt:r.dot?rGt:tGt)(n[1]):(n=e.match(pGt))?o=(r.nocase?r.dot?hGt:mGt:r.dot?gGt:AGt)(n):(n=e.match(oGt))?o=r.dot?aGt:sGt:(n=e.match(cGt))&&(o=lGt);let s=E3.fromGlob(e,this.options).toMMPattern();return o&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:o}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?vGt:r.dot?xGt:EGt,o=new Set(r.nocase?["i"]:[]),s=e.map(u=>{let d=u.map(p=>{if(p instanceof RegExp)for(let m of p.flags.split(""))o.add(m);return typeof p=="string"?_Gt(p):p===Dh?Dh:p._src});return d.forEach((p,m)=>{let h=d[m+1],g=d[m-1];p!==Dh||g===Dh||(g===void 0?h!==void 0&&h!==Dh?d[m+1]="(?:\\/|"+n+"\\/)?"+h:d[m]=n:h===void 0?d[m-1]=g+"(?:\\/|"+n+")?":h!==Dh&&(d[m-1]=g+"(?:\\/|\\/"+n+"\\/)"+h,d[m+1]=Dh))}),d.filter(p=>p!==Dh).join("/")}).join("|"),[c,l]=e.length>1?["(?:",")"]:["",""];s="^"+c+s+l+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...o].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let o=this.slashSplit(e);this.debug(this.pattern,"split",o);let s=this.set;this.debug(this.pattern,"set",s);let c=o[o.length-1];if(!c)for(let l=o.length-2;!c&&l>=0;l--)c=o[l];for(let l=0;l<s.length;l++){let u=s[l],d=o;if(n.matchBase&&u.length===1&&(d=[c]),this.matchOne(d,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return $c.defaults(e).Minimatch}};$c.AST=E3;$c.Minimatch=b3;$c.escape=rxe;$c.unescape=jT;var nxe="contentExclusion",$X=class extends MX{static{a(this,"CopilotContentExclusion")}#e;#t=new Sr(1e4);#i=new Sr(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=jS(e).toString();let n=await this.getGitRepo({uri:e}),o=await this.#n(n?.url??qR.all);if(!o)return NX;let s=n?.baseFolder?.uri??"file://",c=this.evaluateFilePathRules(e,s,o);if(c.isBlocked)return c;let l=this.evaluateTextBasedRules(e,o,r);if(l.isBlocked)return l}catch(n){return WT.exception(this.#e,n,`${nxe}.evaluate`),mYe}return p7}evaluateFilePathRules(e,r,n){let o=e;if(this.#t.has(o))return this.#t.get(o);let s=p7,c,l=spe(e.replace(r,""));e:for(let u of n)for(let d of u.paths)if($c(l,d,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){s=ixe(u,"FILE_BLOCKED_PATH"),c=d;break e}return WT.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:s,baseUri:r,fileName:l,matchingPattern:c}),this.#t.set(o,s),s}evaluateTextBasedRules(e,r,n){let o=r.filter(l=>l.ifAnyMatch),s=r.filter(l=>l.ifNoneMatch);if(!n||o.length===0&&s.length===0)return p7;let c=this.evaluateFileContent(o,s,n);return WT.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:c}),c}evaluateFileContent(e,r,n){for(let o of e)if(o.ifAnyMatch&&o.ifAnyMatch.length>0&&o.ifAnyMatch.map(c=>jYe(c)).some(c=>c.test(n)))return ixe(o,"FILE_BLOCKED_TEXT_BASED");for(let o of r)if(o.ifNoneMatch&&o.ifNoneMatch.length>0&&!o.ifNoneMatch.map(c=>jYe(c)).some(c=>c.test(n)))return ixe(o,"FILE_BLOCKED_TEXT_BASED");return p7}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){Ja(this.#e,e,`${nxe}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=CYe(async e=>{let r=await this.#e.get(cr).getGitHubSession();if(!r)throw new ka("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",o=new URL(n,r.apiUrl),s=e.includes(qR.all);e.filter(d=>d!==qR.all).length>0&&o.searchParams.set("repos",e.filter(d=>d!==qR.all).join(",")),o.searchParams.set("scope",s?qR.all:qR.repo);let l=await Um(this.#e,r,o.href),u=await l.json();if(!l.ok){if(l.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:u.message}),new lC(l)}return this.#s("fetch.success"),$R(PGt,u).map(d=>d.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(MA).getRepo(Rd(e));if(!n||!n?.remote)return;let o=n.remote.getUrlForApi();if(o)return{baseFolder:n.baseFolder,url:o}}#s(e,r,n){Nt(this.#e,`${nxe}.${e}`,zr.createAndMarkAsIssued(r,n))}};function jYe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}a(jYe,"stringToRegex");function ixe(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}a(ixe,"fileBlockedEvaluationResult");var SGt=E.Object({name:E.String(),type:E.String()}),RGt=E.Object({paths:E.Array(E.String()),ifNoneMatch:E.Optional(E.Array(E.String())),ifAnyMatch:E.Optional(E.Array(E.String())),source:SGt}),oxe=E.Array(RGt),kGt=E.Object({rules:oxe,last_updated_at:E.String(),scope:E.String()}),PGt=E.Array(kGt);var fl=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new $X(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=a(async e=>{if(!this.#e)return;if(!e.document){this.updateStatusIcon(!1);return}let r=await this.ctx.get(fr).getTextDocumentValidation(e.document),n=r.status==="invalid",o=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,o)},"onDidChangeActiveTextEditor");let r=eu(this.ctx,this.onDidChangeActiveTextEditor,"Content exclusions focus change");this.ctx.get(fr).onDidFocusTextDocument(r),Pa(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{a(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let o=[],s=a(async(u,d)=>{let p=performance.now(),m=await d.evaluate(e,r),h=performance.now();return o.push({key:u,result:m,elapsedMs:Math.round(h-p)}),m},"track"),l=(await Promise.all([s("contentExclusion.evaluate",this.#t)])).find(u=>u?.isBlocked)??{isBlocked:!1};try{for(let u of o)this.#i(u.key,e,u.result,u.elapsedMs)}catch(u){WT.error(this.ctx,"Error tracking telemetry",u)}return n==="UPDATE"&&this.updateStatusIcon(l.isBlocked,l.message),l}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get($o).setInactive(r??"Copilot is disabled"):this.ctx.get($o).clearInactive())}#i(e,r,n,o){let s=r+e;if(this.evaluateResultCache.get(s)===n.reason)return!1;if(this.evaluateResultCache.set(s,n.reason??"UNKNOWN"),n.reason===NX.reason)return WT.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let l={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},u={contentExclusionEvalMs:o};return Nt(this.ctx,e,zr.createAndMarkAsIssued(l,u)),Nt(this.ctx,e,zr.createAndMarkAsIssued({...l,path:r},u),1),WT.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function kx(t,e,r){let n=await t.get(fl).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}a(kx,"isDocumentValid");var fr=class{constructor(e){this.ctx=e}static{a(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await kx(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=Bl(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return kx(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(Qi).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(Qi).readFileString(e)}getWorkspaceFolder(e){let r=Bl(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(Bl(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=Bl(e.uri);for(let n of this.getWorkspaceFolders()){let o=Bl(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(o))return r.slice(o.length)}return Di(r)}};function ua(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}a(ua,"statusFromTextDocumentResult");var In=class{constructor(e){this.ctx=e}static{a(this,"FileReader")}getRelativePath(e){return this.ctx.get(fr).getRelativePath(e)??Di(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(fr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let s=await this.doReadFile(e),c=await kx(this.ctx,{uri:e},s);return c.status==="valid"?{status:"valid",document:Rx.create(e,"UNKNOWN",-1,s)}:c}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(Qi).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(Qi).stat(e)).size/1024/1024}};f();f();var Bh=class{constructor(){this.resolve=a(()=>{},"resolve");this.reject=a(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{a(this,"Deferred")}};function KC(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}a(KC,"delay");f();var sxe=class{constructor(){this.observers=new Set}static{a(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},WX=class extends sxe{static{a(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var kp=class{constructor(e){this.ctx=e;this.#e=new ft("AsyncCompletionManager");this.requests=new Sr(100);this.mostRecentRequestId=""}static{a(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,o]of this.requests)if(axe(e,r,o))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,o,s){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let c=new WX;return this.requests.set(e,{state:2,cancellationTokenSource:o,headerRequestId:e,prefix:r,prompt:n,subject:c}),s.then(l=>{if(this.requests.delete(e),l.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,l.reason),c.error(l.reason);return}let u={cancellationTokenSource:o,headerRequestId:e,prefix:r,prompt:n,subject:c,choice:l.value[0],result:l,state:0,allChoicesPromise:l.value[1]};this.requests.set(e,u),c.next(u),c.complete()}).catch(l=>{this.#e.error(this.ctx,`[${e}] Request errored with`,l),this.requests.delete(e),c.error(l)})}getFirstMatchingRequestWithTimeout(e,r,n,o,s){let c=this.ctx.get(Lt).asyncCompletionsTimeout(s);return c<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,o)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${c}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,o),new Promise(l=>setTimeout(()=>l(null),c))]).then(l=>{if(l===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return l}))}async getFirstMatchingRequest(e,r,n,o){o||(this.mostRecentRequestId=e);let s=!1,c=new Bh,l=new Map,u=a(p=>()=>{let m=l.get(p);m!==void 0&&(m(),l.delete(p),!s&&l.size===0&&(s=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),c.resolve(void 0)))},"finishRequest"),d=a(p=>{if(axe(r,n,p)){if(p.state===0){let m=r.substring(p.prefix.length),{completionText:h}=p.choice;if(!h.startsWith(m)||h.length<=m.length){u(p.headerRequestId)();return}h=h.substring(m.length),p.choice.telemetryData.measurements.foundOffset=m.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${m.length}: ${JSON.stringify(h)}`),c.resolve([{...p.choice,completionText:h},p.allChoicesPromise]),s=!0}}else this.cancelRequest(e,p),u(p.headerRequestId)()},"next");for(let[p,m]of this.requests)axe(r,n,m)?l.set(p,m.subject.subscribe({next:d,error:u(p),complete:u(p)})):this.cancelRequest(e,m);return c.promise.finally(()=>{for(let p of l.values())p()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function axe(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}a(axe,"isCandidate");f();f();var C7=class{constructor(e){this.maxSize=e;this.root=new y7;this.leafNodes=new Set}static{a(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:o}=this.findClosestNode(e);if(o.length>0){for(let[s,c]of n.children)if(s.startsWith(o)){let l=s.slice(0,o.length),u=new y7;n.removeChild(s),n.addChild(l,u),u.addChild(s.slice(l.length),c),n=u,o=o.slice(l.length);break}if(o.length>0){let s=new y7;n.addChild(o,s),n=s}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,o=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[s,c]of n.children)if(e.startsWith(s)){e=e.slice(s.length),o.unshift({node:c,remainingKey:e}),n=c,r=!0;break}}return{node:n,remainingKey:e,stack:o}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[s,c]=Array.from(e.children)[0];e.removeChild(s),r.removeChild(n),r.addChild(n+s,c);return}if(r.removeChild(n),r.parent===void 0)return;let o=r.parent;if(r.value===void 0&&r.childCount===1){let[s,c]=Array.from(r.children)[0],l=o.edge+s;r.removeChild(s),o.node.removeChild(o.edge),o.node.addChild(l,c)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},y7=class{constructor(){this._children=new Map;this._touched=performance.now()}static{a(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var LA=class{constructor(){this.cache=new C7(100)}static{a(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:o})=>o.content.filter(s=>s.suffix===r&&s.choice.completionText.startsWith(n)&&s.choice.completionText.length>n.length).map(s=>({...s.choice,completionText:s.choice.completionText.slice(n.length),telemetryData:s.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let o=this.cache.findAll(e);if(o.length>0&&o[0].remainingKey===""){let s=o[0].value.content;this.cache.set(e,{content:[...s,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new C7(100)}};f();f();f();f();var Px={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function GYe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.010230295672324606:o=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?o=.03086356292895467:o=.057128750867458604:t[5]>888.5000000000001?o=.07861602941396924:o=.030523262699070908:t[308]>1e-35?o=.048236117667577356:t[8]>370.50000000000006?o=-.05642125069212264:o=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.03640661467213915:o=-.005889820723907028:t[31]>1e-35?o=-.0009007166998276938:t[9]>6.500000000000001?o=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?o=-.1215445089091064:o=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?o=-.061555513040777825:t[4]>60.50000000000001?o=-.07053475504569347:o=-.013733369453963092:o=-.06302097189114152:t[227]>1e-35?o=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?o=-.08466979526809346:t[10]>24.500000000000004?o=-.017092159721119944:t[92]>1e-35?o=.03592901452463749:o=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?o=-.03963116207386097:t[118]>1e-35?o=-.09483996283536394:t[217]>1e-35?o=-.03394542089519989:t[242]>1e-35?o=-.07985899422287938:o=.019706602160656964:t[9]>12.500000000000002?o=.014072998937735146:o=-.021156294523894684;let s;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?s=.009197756540516563:s=.03458896869535166:t[5]>5082.500000000001?s=.08265545468131008:t[131]>1e-35?s=.0740738432473315:s=.045159136632942756:t[8]>319.50000000000006?s=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?s=-.011400839766681709:s=.11149800187510031:s=-.08683250977599462:s=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?s=.040389083779932555:s=-.009887614274108602:t[52]>1e-35?s=.03705353499757327:t[9]>6.500000000000001?s=-.025401260429257562:t[2]>98.50000000000001?s=-.09237673187534504:s=-.04298556869281803:t[222]>1e-35?s=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?s=-.05435318330148897:t[128]>1e-35?s=-.08672907303184191:t[227]>1e-35?s=-.05568304584186561:t[122]>1e-35?s=-.09623059693538563:t[225]>1e-35?s=.07558331642202279:t[82]>1e-35?s=-.07360566227233566:s=-.005646164647395919:t[242]>1e-35?s=-.08203758341228108:t[9]>13.500000000000002?s=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?s=-.011153942154062704:s=.03132858912391067:t[127]>1e-35?s=.021455228822345174:t[23]>1e-35?s=.01959966745346997:s=-.021764790177579325;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?c=.07547602514276922:c=-.08529678832140396:c=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?c=.011143589009415464:c=.0654700456802118:c=.021794712646632755:t[308]>1e-35?c=.04231872551095028:c=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?c=-.03678981254332261:c=.010518160384496255:t[8]>825.5000000000001?c=-.04506534842082387:t[9]>38.50000000000001?c=.01004983052203438:c=-.030580958620701027:t[39]>1e-35?c=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?c=.030426957004611704:c=-.0726407693060581:c=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?c=-.008024349629981291:t[31]>1e-35?c=.01296539930850471:t[308]>1e-35?c=-.012855016509024084:c=-.04564527976851505:c=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?c=-.1012064426380198:c=-.0062808850924854194:c=.030706323726162416:t[9]>13.500000000000002?c=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?c=-.009306613091760644:t[4]>1.5000000000000002?c=.03655523200850989:c=-.02671654212893341:t[127]>1e-35?c=.019261510468604387:c=-.017627818570628936;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?l=.036100405995889276:l=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?l=.03622542297472574:l=.05595579157301536:l=-.02234751038146796:t[8]>319.50000000000006?l=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?l=-.009306153573847916:l=.10058509567064988:l=-.0785668890966017:t[9]>28.500000000000004?l=-.04781977604130416:l=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?l=.02372493254975127:t[148]>1e-35?l=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?l=-.05000852203469597:l=.02922366846119705:t[23]>1e-35?l=-.0026335076988151292:l=-.03073993752935585:t[222]>1e-35?l=-.03867374428185713:t[32]>1e-35?l=-.07220729365053084:t[39]>1e-35?l=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?l=-.04836360271198036:t[8]>4968.500000000001?l=-.10873681915578029:t[149]>1e-35?l=-.11847484033769298:t[122]>1e-35?l=-.08916172460307559:t[82]>1e-35?l=-.06774726602152634:l=-.0033469147714351327:t[126]>1e-35?l=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?l=-.09002547031023511:l=.015475385187009489:t[25]>1e-35?l=-.08175501232759151:l=-.000429679055394914;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?u=.021942996005324917:u=.042349138084484074:t[308]>1e-35?u=.036507270845732874:u=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?u=.00210930790963475:t[31]>1e-35?u=.006825358293027163:t[9]>6.500000000000001?u=-.013772084269062394:t[308]>1e-35?u=-.008307929099892574:t[19]>1e-35?u=-.027706313312904487:u=-.04891108984170914:t[134]>1e-35?u=-.0605730733844732:t[25]>1e-35?u=-.05347926493253117:t[227]>1e-35?u=-.049415829249003666:t[32]>1e-35?u=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?u=-.00016302718260794637:u=-.10247095758122947:t[210]>1e-35?u=-.022149002072787024:t[95]>1e-35?u=.15222631630626304:u=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?u=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?u=-.045352728133789516:t[8]>683.5000000000001?u=.00474372227519902:u=.02635476098707525:t[92]>1e-35?u=.05659380819933452:t[105]>1e-35?u=.07431443210341222:t[186]>1e-35?u=.0915821133384904:u=-.016414750130401053:t[127]>1e-35?u=.011824693641866162:t[23]>1e-35?u=.0228468674288774:t[284]>1e-35?u=.06606936863302432:u=-.02872463273902358;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?d=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?d=.044961338592245194:d=.003659599513761676:t[121]>1e-35?d=-.04057103630479994:d=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?d=-.0003708603406529278:d=.05331312264472391:d=.0006575958601218936:t[8]>319.50000000000006?d=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?d=-.0076053515916517005:d=.09116695486305336:d=-.07137458699162028:d=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?d=-.0308520802187302:d=.013156423968295541:t[115]>1e-35?d=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?d=.12264179915175587:d=-.021905727233873535:t[8]>799.5000000000001?d=-.04181869575935412:d=-.023695901673350575:t[222]>1e-35?d=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?d=-.06892116536821917:t[149]>1e-35?d=-.11194586444154514:t[133]>1e-35?d=-.04269583234000504:t[128]>1e-35?d=-.0644631966969502:t[8]>4968.500000000001?d=-.09650726096330133:d=-.004219129180139438:t[126]>1e-35?d=-.08038306745347751:t[5]>1809.5000000000002?d=.009265335288169993:t[9]>2.5000000000000004?d=.006447645462117438:d=-.021047132609551503;let p;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?p=-.08436540015142402:t[8]>1861.5000000000002?p=-.01621425699342421:p=.01878613821895428:p=.031052879158242532:t[8]>319.50000000000006?p=-.031536619360997865:t[7]>3.5000000000000004?p=-.004510586962343298:p=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?p=.004757490541310808:t[9]>6.500000000000001?p=-.008842393772207996:t[31]>1e-35?p=.0010536183837006993:t[308]>1e-35?p=-.008145882815435419:t[2]>98.50000000000001?p=-.08404937622173021:t[276]>1e-35?p=.0020072791321856663:t[19]>1e-35?p=-.023031820639490178:p=-.04553314326377875:t[8]>2134.5000000000005?p=-.02244583113572251:t[134]>1e-35?p=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?p=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?p=-.00447733056482096:p=-.10191061664873849:p=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?p=-.07570059131536411:t[243]>1e-35?p=-.040983393346598646:t[3]>9.500000000000002?p=.014763759061483812:t[92]>1e-35?p=.05136368898963024:p=-.008162398981149495:t[127]>1e-35?p=.013999119696708346:t[23]>1e-35?t[20]>1e-35?p=.14138985500120907:p=.008668274102844162:t[284]>1e-35?p=.06356484011042893:p=-.024781304572706303;let m;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?m=.014387526569215037:t[8]>2266.5000000000005?m=-.1397298649743087:m=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?m=.0029819092211896296:t[218]>1e-35?m=.08450459375645737:m=.031646488019280654:m=-.03544960151460596:t[9]>9.500000000000002?m=-.026002317735915183:t[7]>1.5000000000000002?m=.005074258810794793:m=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?m=.023269218675640847:t[148]>1e-35?m=.03812942399144545:t[115]>1e-35?m=.10512283476967227:m=-.02607307479736138:t[227]>1e-35?m=-.036576708299046294:t[101]>1e-35?m=.027948683650881864:t[149]>1e-35?m=-.08195628451594297:t[50]>1e-35?m=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?m=-.06860333850762075:t[225]>1e-35?m=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?m=.028599705845427533:m=-.010746719511640914:t[0]>4877.500000000001?m=-.07251187886096228:m=-.021299712241446785:t[118]>1e-35?m=-.11902023760964736:m=15874469526809387e-21:t[8]>267.50000000000006?m=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?m=.09614842415142123:m=.006049073167176467:t[189]>1e-35?m=.05562696451900713:m=-.006257541923837303;let h;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?h=-.10069846585436666:h=-.010577995535809317:t[146]>1e-35?h=-.008877238274428668:t[280]>1e-35?h=.10076055897012692:t[6]>70.50000000000001?h=-.020603523042565547:t[7]>1.5000000000000002?h=.02819095420813202:h=-.1223354167911277:h=-.025073583348334844:t[8]>416.50000000000006?h=.01718560189149466:t[230]>1e-35?h=.12281803224342265:h=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.13070568109867683:t[4]>63.50000000000001?h=-.027221825262496814:h=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?h=-.00605574271293711:h=.04739407327741249:h=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?h=.1252215087035768:h=.003905888677601057:t[52]>1e-35?h=.045466299731038815:t[2]>100.50000000000001?h=-.07815624550168065:t[308]>1e-35?h=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?h=-.03538265083203445:t[18]>1e-35?h=.1591211669800727:h=.015151475408241136:t[8]>557.5000000000001?h=-.04225569725456342:h=-.022455546324243267:t[308]>1e-35?h=.01325441736085826:t[197]>1e-35?h=.03752194600682512:t[225]>1e-35?h=.06583712394533976:h=-.005205289866839043;let g;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?g=.010264022580774884:g=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?g=-.0936747137352166:t[0]>384.50000000000006?g=.019846244507320695:g=-.0751102554077272:g=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?g=.11654906890054273:g=.0346250587613322:t[4]>39.50000000000001?g=-.08568002378645614:t[9]>16.500000000000004?g=-.12010535752923689:g=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?g=-.12056431231412057:t[131]>1e-35?g=.03652965550568472:g=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?g=-.10141481732178981:g=-.003936457893178248:t[31]>1e-35?g=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?g=.12972828769588213:g=-.003137412232297087:t[2]>100.50000000000001?g=-.0730872929087944:t[308]>1e-35?g=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?g=.07934620723812878:g=-.018598568353702116:g=-.030635505446410763:t[128]>1e-35?g=-.06962290453843294:t[84]>1e-35?g=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?g=-.034938657503885584:g=.016339322898966915:t[197]>1e-35?g=.03358907965870046:t[18]>1e-35?g=-.01754013791515288:g=-.0004944586067698557;let A;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?A=.005888790687820524:A=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?A=-.0224319889201976:t[212]>1e-35?A=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?A=.010357273289123324:A=-.029749145161304082:t[218]>1e-35?A=.06449336340743606:A=.018047654539345502:A=-.07350502390293116:A=-.019594829995832414:t[4]>39.50000000000001?A=-.019338083179859314:t[39]>1e-35?A=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?A=-.019197415255018464:A=-.0836562507048181:t[149]>1e-35?A=-.07679624472577429:t[32]>1e-35?A=-.05097506748590604:t[191]>1e-35?A=.04670476485250936:t[30]>1e-35?A=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?A=.03930363008271334:A=-.06029171685615689:A=.016203086182431294:t[4]>7.500000000000001?A=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?A=-.09817668643367765:t[10]>40.50000000000001?A=-.023558078753593125:A=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?A=-.1352063548573715:A=.058203900441270634:A=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?A=-.012552876807800442:A=.05991247777734298:A=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let b;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?b=.022717227245241684:b=-.049700413274686266:b=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?b=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?b=-.12263724050601095:b=.0070743478891288035:t[288]>1e-35?b=-.050439138582109:b=.0255701593657891:b=-.005812703740580558:t[6]>49.50000000000001?b=-.008542694147899113:b=.035147383686665:b=-.0960461939274094:t[32]>1e-35?b=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?b=-.01800870272656664:b=-.07817304234604389:t[30]>1e-35?b=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?b=.08778416018479411:b=-.026563982720830256:b=-.05296139548112329:t[50]>1e-35?b=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?b=-.036572140520852024:t[183]>1e-35?b=-.10766853736801459:b=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?b=.09513215942486053:b=-.03641865277445567:t[10]>59.50000000000001?b=.03177172388687933:t[39]>1e-35?b=-.10234241303898953:t[243]>1e-35?b=-.02966738115984321:t[190]>1e-35?b=-.04312785336449181:t[118]>1e-35?b=-.05808521194081524:b=.006720381600740378;let I;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?I=-.046284053681928526:t[210]>1e-35?I=49778070699847876e-21:t[13]>1e-35?I=.03328070054739309:t[128]>1e-35?I=-.054790214922938896:t[126]>1e-35?I=-.08524792218532945:I=.014414055975542446:t[1]>38.50000000000001?I=-.07287851335872973:I=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?I=-.12459748864088374:I=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?I=.13044981041138526:t[9]>71.50000000000001?I=-.056068402282406865:t[9]>12.500000000000002?I=.038957722962512764:I=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?I=-.0852126122372075:t[225]>1e-35?I=.10082066771689505:t[1]>161.50000000000003?I=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?I=-.010835400874777133:I=.004607419973807752:I=-.016989075258564062:I=.009205417251698097:t[23]>1e-35?t[20]>1e-35?I=.10184317139657878:t[0]>5724.500000000001?I=-.1163666496650542:t[1]>106.50000000000001?I=.1303850608190687:t[129]>1e-35?I=.10745031509534769:I=.006166901738036226:t[31]>1e-35?I=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?I=.005004582564506611:I=-.10481581731668346:t[19]>1e-35?I=-.009850706427306281:I=-.02608226348051303;let S;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?S=-.0024117174588695603:S=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?S=.04575380761203418:S=-.10025595041353463:t[15]>1e-35?S=.17705790384964004:S=.0073813837628615014:S=.07676373681392407:S=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?S=.07078572910026419:t[4]>23.500000000000004?S=.005513918674164821:S=.0206586476926392:t[0]>5269.500000000001?S=.07706773525822633:S=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?S=-.03204783603215824:S=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?S=-.0930246911392012:S=.011173087289703683:t[3]>24.500000000000004?S=.03281421918878597:S=.12449335091369843:t[204]>1e-35?S=.06634531187326123:S=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?S=-.041196758517013515:t[4]>7.500000000000001?S=-2942718111029724e-20:t[4]>6.500000000000001?S=.11953909558532852:S=.03188615019450534:t[122]>1e-35?S=-.0616037324662157:t[101]>1e-35?S=.027230889593349412:t[8]>4968.500000000001?S=-.1113986516540856:t[3]>2.5000000000000004?S=-.002045140426885727:t[129]>1e-35?S=.12641163374304432:S=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let N;t[131]>1e-35?N=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?N=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?N=-.022305242912035072:N=.024792895826340516:N=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?N=.2080083584805785:N=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?N=.060783227455868206:N=-.056904865557409035:N=-.03278952553107572:t[192]>1e-35?N=.13117402617043625:N=.01647119888257836:N=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?N=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?N=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?N=-.11083976837572328:t[146]>1e-35?N=-.03359294484446772:N=-.0042815953591236475:t[190]>1e-35?N=-.09264239592903775:t[10]>1e-35?N=.022282638485105657:N=-.0205994057928458:t[5]>4918.500000000001?N=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?N=.08935072241972036:N=-.03781647876237494:N=.0062655753179671515:t[31]>1e-35?N=.008603500300349887:t[230]>1e-35?N=.03350056932774173:t[23]>1e-35?t[241]>1e-35?N=.10277555508503314:N=.0017901817172993888:t[2]>98.50000000000001?N=-.05920081229672715:N=-.015722173275739208;let F;t[13]>1e-35?t[118]>1e-35?F=.07957905150112207:t[1]>125.50000000000001?F=-.0662620579858685:t[145]>1e-35?F=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?F=-.0009597832580977798:F=-.081474760755753:t[212]>1e-35?F=.03637001492325179:F=.006912305498963309:t[32]>1e-35?F=-.03919900630910754:t[134]>1e-35?F=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?F=.06671440854602108:t[136]>1e-35?F=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?F=.026430947016830915:F=-.04075501264495112:t[9]>93.50000000000001?F=-.04353169430417609:t[50]>1e-35?F=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?F=.068392679163672:t[10]>1.5000000000000002?F=-.0209659792007492:F=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?F=.07254524592323175:F=-.0319087835282534:F=.00037444813327793425:F=-.025138768151370408:t[243]>1e-35?F=-.050010891710502096:t[94]>1e-35?F=-.0817513550778599:t[122]>1e-35?F=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?F=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?F=.1454877641381946:F=.053787998331240316:t[9]>33.50000000000001?F=.08602629796680285:F=-.03895127455803038:F=.008830878042315722;let O;t[131]>1e-35?O=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?O=.07473600489975568:t[0]>93.50000000000001?O=-.021596848506011502:O=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?O=.10264284346448256:O=.031042487183181262:O=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?O=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?O=.006271403149804702:O=-.030013637555715046:t[0]>4449.500000000001?O=-.06556876058654929:O=.06437994816903034:t[32]>1e-35?O=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?O=-.09349726304052086:t[210]>1e-35?O=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?O=-.029188394315052574:O=.017219308333820193:O=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?O=-.04428555753857688:O=.0001456106867817353:t[5]>213.50000000000003?O=.01740292726636365:O=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?O=.03410288911259329:t[121]>1e-35?O=-.06056527462120627:t[8]>2592.5000000000005?O=.12166808844363577:t[191]>1e-35?O=.11669879218998758:O=-.001664858391716235:O=-.01262927450503166:O=-.04506589951879664:t[227]>1e-35?O=-.08548904959752329:O=.02156080776537726;let Y;t[306]>1e-35?t[149]>1e-35?Y=-.1389218965136736:Y=-.032218642644416894:t[13]>1e-35?Y=.006465035217331847:t[50]>1e-35?Y=-.1381687930130022:t[179]>1e-35?Y=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?Y=-.03262719498763048:Y=.023342916702125613:t[191]>1e-35?Y=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?Y=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?Y=-.09989343595668776:Y=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?Y=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?Y=-.09165257825246746:t[9]>32.50000000000001?Y=.02484870392366004:Y=-.008499493096971395:t[8]>24.500000000000004?Y=.02459679192828244:Y=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?Y=.0015644546318714849:Y=-.06579524865022705:Y=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?Y=.03331853632960164:Y=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?Y=-.019091477207111116:Y=.037878468575478504:t[94]>1e-35?Y=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?Y=.16919658785098224:t[243]>1e-35?Y=-.06580584936754524:Y=.01567555159935563:t[129]>1e-35?Y=.06721746994993226:t[10]>32.50000000000001?Y=-.046394462507797975:Y=-.006436180519584767;let z;t[131]>1e-35?z=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?z=.019122095523977856:t[298]>1e-35?z=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?z=-.026094309429557913:t[204]>1e-35?z=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?z=.012643810980689466:z=-.07884161741497837:z=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?z=.04493082949897325:z=.18046359750455776:t[7]>18.500000000000004?z=-.018667348656891496:z=.02584325784698236:z=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?z=.04749240016989375:z=-.0333334578246718:t[5]>3276.5000000000005?z=.11330554740098908:t[7]>94.50000000000001?z=.1296600395033268:z=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?z=-.13787130789142835:t[0]>1847.5000000000002?z=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?z=.028856848462727104:z=-.11197632885851168:z=.08169801342016791:t[1]>22.500000000000004?z=-.021052888644970163:z=.019048604298876753:t[7]>4.500000000000001?z=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?z=.03432638833359197:z=-.0036767863082454973:t[1]>48.50000000000001?z=.03087375270128195:t[2]>3.5000000000000004?z=-.04219917149740248:z=.018818493993207935;let V;t[306]>1e-35?V=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?V=-.09091897542577475:V=.04042943082645558:t[218]>1e-35?V=.056254985867151:V=-.053848117950183044:V=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?V=.021581808008986944:V=-.05639286496176611:V=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?V=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?V=.023885302967553288:V=.1617794086125622:t[212]>1e-35?V=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?V=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?V=.01894935813286188:V=-.06449356357429188:V=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?V=-.034718828212885515:V=.0898976288814321:t[1]>17.500000000000004?V=-.15440137451988326:V=-.03864183216821465:V=.009988507307006308:V=-.08540311947043305:t[50]>1e-35?V=-.13323659732101975:t[134]>1e-35?V=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?V=.08082476177379844:V=-.041665761903645876:t[179]>1e-35?V=-.12405023987936657:t[39]>1e-35?V=-.06247416524997478:t[138]>1e-35?V=-.10724031753676487:V=-.0005423122305122404;let U;t[308]>1e-35?U=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?U=.023223358334607133:U=-.04383410185346742:U=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?U=.023406489302867494:U=-.085521220804058:U=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?U=.028120059780969632:U=-.04211009474298743:t[294]>1e-35?U=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?U=-.0993035220737934:U=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?U=.029770210551187937:U=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?U=.06421359317599738:U=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?U=.024368404612215164:U=-.04045232374803373:t[131]>1e-35?U=.017372701982485795:t[120]>1e-35?U=.08812710275150198:t[18]>1e-35?t[90]>1e-35?U=.18451364351180236:t[7]>33.50000000000001?U=-.03850813130183531:t[195]>1e-35?U=.06966114053446336:t[3]>16.500000000000004?U=-.0012869181693341211:t[0]>4242.500000000001?U=-.054625548611291035:U=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?U=.006302103427145562:U=.13967622319898698:t[121]>1e-35?U=-.038798585213145644:t[5]>4544.500000000001?U=-.08050498033009466:U=-.002986974112681435;let H;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?H=-.03461119351456781:H=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?H=-.12404435523286539:H=-.0034376913880382956:H=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?H=.0037507103585310234:H=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?H=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?H=-.04832024079663151:t[37]>1e-35?H=-.037103393468366934:H=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?H=.032539071163832034:t[5]>1643.5000000000002?H=.036408625378035665:t[0]>1500.5000000000002?H=-.1346358322854993:H=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?H=-.1133991164577881:t[9]>52.50000000000001?H=-.024478640359723122:H=.03673777861098756:H=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?H=.002583438691776944:H=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?H=-.02141222346712401:H=.06392462314316179:t[4]>12.500000000000002?H=.08700122294434816:t[8]>267.50000000000006?H=.056923170082743224:H=-.07716309825583327:t[32]>1e-35?H=-.03961343943752142:H=.002674914122888783:t[1]>42.50000000000001?H=-.05217539654421676:t[145]>1e-35?H=.09553630282946368:H=-.009424791262477729;let ee;t[183]>1e-35?ee=-.05753337139158443:t[308]>1e-35?ee=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?ee=-.10477869875380448:ee=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?ee=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?ee=-.04442302951713574:ee=.00012409888451734224:ee=-.092199119633697:t[225]>1e-35?ee=.13773072450201831:t[0]>2882.5000000000005?ee=.0028540012229920533:t[298]>1e-35?ee=.07134486044361629:ee=.014297412329837425:t[145]>1e-35?ee=.05608385321902638:t[92]>1e-35?ee=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?ee=-.0039957800609801315:ee=.0776927564241081:t[203]>1e-35?ee=-.05502900859432093:t[105]>1e-35?ee=.06062892720841595:ee=-.009574839629252128:t[31]>1e-35?ee=.009488858841144216:t[23]>1e-35?t[20]>1e-35?ee=.08818126313644752:t[8]>161.50000000000003?ee=.014353968957885408:ee=-.022240738532827903:t[210]>1e-35?ee=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?ee=-.043902062079383485:ee=-.014741559220396223:ee=-.00934935734853194:t[6]>32.50000000000001?ee=.1514593126307404:ee=.010771222510801532:t[10]>22.500000000000004?ee=.01412495209334078:ee=-.08576940379502533;let J;t[0]>384.50000000000006?t[84]>1e-35?J=-.06647690967306838:t[2]>101.50000000000001?J=-.024451334501552457:t[306]>1e-35?J=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?J=.0031858381443673127:J=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?J=-.08601340441214533:t[1]>29.500000000000004?J=.10487598629539963:t[8]>597.5000000000001?J=-.0786529133673238:J=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?J=-.04883600353740688:t[126]>1e-35?J=-.03794042763348827:J=-.003358871967539988:t[210]>1e-35?J=.054991356498447566:t[6]>19.500000000000004?J=-.007418396981635549:J=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?J=-.02143003429501711:J=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?J=-.006636355416244082:J=-.06483095743431454:t[4]>21.500000000000004?J=-.028975965946833545:J=.022012264796522657:J=-.06653648243193663:t[5]>4593.500000000001?J=.01753551428088607:t[217]>1e-35?J=-.028864824937700297:t[94]>1e-35?J=-.04885192273020658:t[279]>1e-35?J=.08105715462329498:t[121]>1e-35?J=-.04576676034750651:J=.004795141324949362:t[1]>42.50000000000001?J=-.047446619702809195:t[145]>1e-35?J=.08400495571952321:J=-.00854528836489364;let G;t[294]>1e-35?G=-.042529778074638265:t[266]>1e-35?G=-.1180276669679798:t[134]>1e-35?G=-.026818144353279623:t[183]>1e-35?G=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?G=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?G=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?G=-.03049646619610203:t[1]>50.50000000000001?G=.20634590755061122:G=.06956378103625731:t[0]>3770.5000000000005?G=-.07946414366134913:t[19]>1e-35?G=.17083312065604694:t[2]>21.500000000000004?G=-.02327981978127724:G=.129717297518715:t[145]>1e-35?G=.006891245076133524:G=-.0789123467863741:t[3]>99.50000000000001?G=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?G=.06447639919732716:G=-.05457561977645972:t[306]>1e-35?G=-.029995903305383882:t[191]>1e-35?G=.030596508110850414:t[242]>1e-35?G=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?G=.09518584795377832:G=-.018197744600833596:t[13]>1e-35?G=.006751790086127549:t[148]>1e-35?G=.01904174573618417:t[99]>1e-35?G=.025287735102561926:t[4]>14.500000000000002?G=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?G=-.09467943982430241:t[243]>1e-35?G=-.02521824751996268:G=.005437570718352172:G=-.022476214821960674;let j;t[0]>384.50000000000006?t[84]>1e-35?j=-.06088131453064195:t[147]>1e-35?j=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?j=.04219361472548491:j=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?j=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?j=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?j=-.11431764534511478:j=.013549717238356157:j=-.020987333767091276:t[6]>2.5000000000000004?j=-.02914877855133127:j=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?j=-.10087072787978416:t[37]>1e-35?j=-.030467397753331196:t[229]>1e-35?j=-.1017559811057469:t[4]>20.500000000000004?j=-.00413177742240167:t[20]>1e-35?j=.05213315982685969:j=.0037921635866823133:t[8]>51.50000000000001?j=.07327913092421544:t[6]>49.50000000000001?j=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?j=.02744420891894289:j=.11288946357194463:j=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?j=-.012329314369909049:j=.026816658655600168:j=-.0872405354618811:j=.007872673500247845:t[1]>42.50000000000001?j=-.04309044198258254:t[145]>1e-35?j=.07572529147860785:t[7]>5.500000000000001?j=-.013837187093264945:t[1]>17.500000000000004?j=.04208698439539668:j=-.06284346769019863;let Z;t[294]>1e-35?Z=-.0384794324818203:t[266]>1e-35?Z=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?Z=.07432960094940501:Z=-.035248735855751855:t[134]>1e-35?Z=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?Z=-.01706896375068821:Z=.08212247914968074:t[2]>59.50000000000001?Z=-.09546478958824225:t[6]>53.50000000000001?Z=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Z=.02816463285971267:Z=.15449139016588445:Z=-.10199787406123524:Z=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?Z=-.13924786681478077:Z=-.0072772442570213335:t[39]>1e-35?Z=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?Z=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Z=-.11174465335620831:Z=.00013144040097180107:Z=-.08493919336681105:t[42]>1e-35?Z=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?Z=-.015540659878839153:Z=-.14442609417300142:t[21]>1e-35?Z=-.025251979447574083:Z=.0023698372645272847:t[18]>1e-35?Z=.07269739695712212:t[8]>2592.5000000000005?Z=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?Z=-.01835130329646532:t[9]>45.50000000000001?Z=.02023047454629885:Z=.16469378262221102:Z=-.042975030085836426;let ie;t[8]>2915.5000000000005?t[297]>1e-35?ie=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ie=-.01034964686484714:ie=-.07357437440667927:ie=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ie=-.09476398869062203:t[9]>72.50000000000001?ie=-.0757383854264379:ie=.02806542779508718:ie=-.05147742568418084:ie=.10212721564444344:ie=.0518263760642861:ie=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ie=-.10669213185972036:ie=.027050434286384796:t[302]>1e-35?ie=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ie=.06354599160071946:t[1]>67.50000000000001?ie=.05317447949011187:ie=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ie=-.09369289448773599:t[0]>2215.5000000000005?ie=.04077965380363924:t[0]>807.5000000000001?ie=-.0591771776458298:ie=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ie=-.016323380219241672:ie=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ie=.03720704290087811:ie=-.008730548158766654:t[4]>80.50000000000001?ie=-.05346644687473197:ie=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ie=.019984510398089086:ie=-.03917825025861855:t[9]>170.50000000000003?ie=-.09759719821334525:ie=-.0023586682752856298;let ne;t[183]>1e-35?t[17]>1e-35?ne=.030100940443356424:t[10]>1.5000000000000002?ne=-.10861112216742408:ne=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?ne=-.032062878390325456:ne=-.10808232631806887:t[8]>1641.5000000000002?ne=-.06147013392655731:t[4]>12.500000000000002?ne=.03324767551088266:t[145]>1e-35?ne=.028851633810612017:ne=-.054871239091792784:t[134]>1e-35?ne=-.023813968121342108:t[266]>1e-35?ne=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?ne=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?ne=-.025350325484720576:ne=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?ne=.056817276537534815:ne=-.07674158463557636:ne=-.06335553143454145:t[1]>56.50000000000001?ne=.16390494217299284:ne=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?ne=.041717597065890205:ne=-.10357913492269129:t[10]>29.500000000000004?ne=.1365512866715726:ne=.020600048310575665:ne=.09708785634773187:ne=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?ne=-.03146213719547347:ne=.11784024316238083:ne=-.050940520532045355:ne=-.047988344143075616:t[191]>1e-35?ne=.028764654731460032:ne=.0011911575567860023;let re;t[294]>1e-35?t[10]>50.50000000000001?re=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?re=-.05103908560370243:re=.05002066201169583:re=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?re=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?re=.127983140816313:re=-.05436534163636867:re=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?re=-.009504203657088933:t[8]>819.5000000000001?re=.18689664822602375:re=.03635576744011826:re=-.029862411809998525:t[223]>1e-35?re=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?re=-.09405026597863717:t[0]>4153.500000000001?re=.053577663326799765:re=-.05062127873995668:re=.06512222894425874:t[39]>1e-35?re=-.04985311717827547:t[51]>1e-35?re=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?re=-.02860634573675884:re=.08863753005590103:re=.11158892111063744:t[0]>655.5000000000001?re=-.031005736641654926:re=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?re=-.00843386136334982:re=-.05273594615999777:re=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?re=-.015774115523598486:re=.10147367091236065:re=-.048307000563071016:re=.002118376117677254;let fe;t[8]>1014.5000000000001?t[9]>137.50000000000003?fe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?fe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?fe=.07211107542565391:fe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?fe=-.0751486415451188:t[1]>59.50000000000001?fe=.13459005084554104:fe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?fe=.06715575425741895:fe=-.005895690393702183:t[8]>2915.5000000000005?fe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?fe=-.00029068886245881074:fe=.0613467393188786:t[148]>1e-35?fe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?fe=.003887223773199377:fe=-.08553893131979015:fe=.025654192706396767:fe=-.05651733979610658:fe=-.02039913645229667:t[2]>7.500000000000001?fe=-.1058450646728524:fe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?fe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?fe=.1283258201586378:fe=-.01718135372229775:fe=-.07702452408491414:t[125]>1e-35?fe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?fe=.04273051857848212:fe=-.04533122948101463:t[2]>196.50000000000003?fe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?fe=.0231032972703664:fe=-.04807386814498683:fe=.002729435991332102;let ye;t[179]>1e-35?ye=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?ye=.026484626664041125:t[10]>1.5000000000000002?ye=-.10187000872941615:ye=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ye=.09574540795390041:ye=-.06454986703691233:ye=-.11411849349353141:t[266]>1e-35?ye=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?ye=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?ye=-.04403391373512386:ye=.1132928075412222:t[2]>47.50000000000001?ye=-.09700191391838056:ye=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?ye=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?ye=-.001668912999010927:ye=-.02363511102970245:t[8]>58.50000000000001?ye=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?ye=.0911011436534449:t[1]>28.500000000000004?ye=-.07192390493729035:ye=.06913818091291246:ye=-.012312625373699222:ye=.06784496312307986:ye=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?ye=.0026564453057705273:ye=-.025425772389361445:t[122]>1e-35?ye=-.12046786388602149:t[0]>3183.5000000000005?ye=.01162092842804907:t[91]>1e-35?ye=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?ye=-.0001647792543020228:ye=-.023664538532907665:ye=.01609078206180752;let Qe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Qe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Qe=-.017696526862422682:Qe=.1450050954613223:Qe=-.05406930069823832:Qe=-.08308700260259043:t[120]>1e-35?Qe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Qe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Qe=.038431826961746934:Qe=-.05937462906539856:t[9]>65.50000000000001?Qe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Qe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Qe=-.09579030954062734:Qe=.025064711572811746:Qe=.02579440518821548:Qe=.1044440128091862:Qe=-.058348633139536844:Qe=.07766788227934436:Qe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Qe=.07463684068207214:Qe=.18244269035484484:t[6]>39.50000000000001?Qe=-.06050050067471004:Qe=.05787759066913493:Qe=.010783225857972171:Qe=.1674891243602606:t[4]>9.500000000000002?Qe=-.004814132027475892:Qe=-.14543299413454813:Qe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Qe=-.07634466313617769:Qe=.0287825335169114:Qe=-.06894721943300268:Qe=-.00023988459059521937;let we;t[131]>1e-35?t[1]>93.50000000000001?we=-.05706887458825395:t[2]>1.5000000000000002?we=.011446637886629108:we=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?we=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?we=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?we=.026278724448495064:we=.17053138400480508:t[0]>4463.500000000001?we=-.06482289890096041:we=.03026516489536295:we=-.031785170717683144:we=.1312690622980455:t[13]>1e-35?we=.14336922540461444:we=.03523850945454039:we=-.015407465968975714:t[39]>1e-35?we=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?we=-.0659975068798723:we=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?we=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?we=.057409156184759516:we=.2024322059866388:we=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?we=.010648654146284154:t[308]>1e-35?we=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?we=.12364025998551711:we=-.02247495081065243:t[1]>22.500000000000004?we=-.0726295464624251:we=.03481895086048152:t[0]>4331.500000000001?we=-.04775443357020673:we=.07172377425057568:t[2]>89.50000000000001?we=-.11782645274716962:we=.00010092665257989378;let Xe;t[147]>1e-35?Xe=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Xe=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Xe=-.016101990375700172:t[0]>2579.5000000000005?Xe=-.13045089661551845:Xe=-.02874367814784938:Xe=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Xe=.17084176915326055:Xe=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Xe=.10591712319944074:Xe=-.024082167264285:Xe=.16497698867036126:Xe=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Xe=-.021012910475524206:Xe=-.13058422554298485:t[0]>1102.5000000000002?Xe=.10955864175201457:Xe=-.03566689354348996:t[1]>11.500000000000002?Xe=-.02093884208606101:Xe=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Xe=-.013861861436128482:Xe=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Xe=.10163873449625677:Xe=-.02779270277623805:t[1]>26.500000000000004?Xe=-.08035058228527389:Xe=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Xe=-.007028075523033826:Xe=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Xe=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Xe=-.0032075580718124892:Xe=-.04442829143298883:Xe=-.06597073245775804:Xe=.0015594090939337751;let Oe;t[223]>1e-35?t[8]>668.5000000000001?Oe=-.12803889879260094:Oe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Oe=.08967966612917375:t[1]>39.50000000000001?Oe=-.059791671514498074:Oe=.05648934961902822:t[2]>59.50000000000001?Oe=-.08633234097449628:t[6]>53.50000000000001?Oe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Oe=.025606129643140924:Oe=.13835395886271978:Oe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Oe=-.09975506556937946:t[10]>36.50000000000001?Oe=-.09427724661655643:t[10]>24.500000000000004?Oe=.07329330653410447:Oe=-.02271182965807972:Oe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Oe=-.05082091374050816:Oe=.1687114435254966:t[0]>2314.5000000000005?Oe=-.06422664016383926:Oe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Oe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Oe=-.1274167728754332:Oe=.01308079126447365:t[4]>73.50000000000001?Oe=.13854015371106546:t[4]>48.50000000000001?Oe=-.03684255740123261:t[6]>45.50000000000001?Oe=.10329912215813097:t[10]>77.50000000000001?Oe=-.08630788656925215:Oe=.031022006843800853:t[1]>25.500000000000004?Oe=-.08278381528048026:Oe=.06664374548141594:t[84]>1e-35?Oe=-.05624227409079396:Oe=.00012184182357340415;let ut;t[179]>1e-35?ut=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ut=-.07595415373151816:ut=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ut=.022822510448266862:ut=.17491569312933697:ut=-.058362287133533565:t[2]>2.5000000000000004?ut=-.03633895806364428:ut=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ut=-.07294848747514579:ut=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ut=-.07009535282685533:t[8]>2640.0000000000005?ut=-.051761240111316276:t[131]>1e-35?ut=-.06245774419231631:ut=.03495606662854905:ut=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ut=.0015036626973581122:ut=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ut=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ut=.022343994371919224:ut=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ut=.07724450228328664:t[0]>3853.5000000000005?ut=-.15671707454435677:t[10]>28.500000000000004?ut=-.10179090671841723:ut=.014878216919760927:ut=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ut=.14054154485273487:ut=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ut=-.08632985141410315:ut=.005524157938954954:ut=-.08802502622523681:ut=-.0004649168897260341;let Rt;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?Rt=-.007458687464321174:Rt=-.09444966249102484:t[1]>23.500000000000004?Rt=.08564129697360716:Rt=-.07105002902845851:Rt=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?Rt=-.10326216566705966:t[1]>26.500000000000004?Rt=.0050539832484585365:Rt=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?Rt=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?Rt=.05783632021087773:t[10]>17.500000000000004?Rt=-.06720598671764105:t[1]>47.50000000000001?Rt=.097495825172558:Rt=-.013372242800584872:Rt=-.06463226787713715:t[42]>1e-35?Rt=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?Rt=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?Rt=.11051270080118503:Rt=.027719462817590454:t[8]>597.5000000000001?Rt=-.08441503592016869:Rt=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?Rt=-.12190088985091102:Rt=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?Rt=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?Rt=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?Rt=.016585157185448045:Rt=-.11032043771149425:Rt=.01586986028570486:t[8]>388.50000000000006?Rt=-.10592413013261853:Rt=.04930703248769364:t[13]>1e-35?Rt=.003621937787920821:Rt=-.0013786331198611841;let Et;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?Et=.009769895322846493:Et=-.10620052926943656:t[9]>19.500000000000004?Et=.03781202525403449:t[9]>14.500000000000002?Et=-.11485785321365344:t[9]>6.500000000000001?Et=.07677177833073881:t[0]>4342.500000000001?Et=-.07079285609687631:t[49]>1e-35?Et=.06156814809246001:Et=-.014788509042554625:Et=-.032659201618470655:t[5]>5207.500000000001?Et=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?Et=-.03094160322187924:t[1]>29.500000000000004?Et=.09474646043921069:Et=.023445783928231618:Et=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?Et=-.07164443768784848:t[1]>29.500000000000004?Et=.089473622509272:t[8]>597.5000000000001?Et=-.08155349903101317:Et=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?Et=-.004003900679358653:t[190]>1e-35?Et=-.09236113461485262:t[8]>3198.5000000000005?Et=-.0124130160451179:Et=.018453070064009328:t[15]>1e-35?Et=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?Et=-.0009580759587680961:Et=-.03227283036698222:Et=.01369287669536875:t[1]>50.50000000000001?Et=-.04213060332500437:t[35]>1e-35?Et=-.11508095777767471:t[190]>1e-35?Et=-.08611884672400155:t[297]>1e-35?Et=.05723551879433584:Et=-.004829340082311461;let At;t[183]>1e-35?At=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?At=-.11753465135886734:At=-.007515490299047085:At=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?At=-.12371142493530439:t[1]>36.50000000000001?At=.032189417575190435:At=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?At=-.0784518658439288:t[2]>54.50000000000001?At=.12477882322370665:At=.000313468482399738:At=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?At=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?At=.0353146070135579:At=-.06327619611098285:At=.02813577701641991:At=-.12354390728506215:t[34]>1e-35?At=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?At=-.01245803535276381:At=-.07169472553475001:t[1]>11.500000000000002?At=.12989984824561698:At=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?At=.010390226893521422:t[10]>14.500000000000002?At=.16790888126487719:At=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?At=-.043398307129729134:At=.09963544907820426:t[9]>30.500000000000004?At=-.13540713124984502:t[9]>17.500000000000004?At=.0509435850590757:At=-.04761897852404613:t[4]>78.50000000000001?At=.09197086656470652:At=.0006771050176682337;let de;t[122]>1e-35?t[6]>36.50000000000001?de=.05686884451670743:de=-.05334759543084309:t[266]>1e-35?de=-.08603579519816038:t[157]>1e-35?de=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?de=-.0499592651503952:t[0]>725.5000000000001?de=.11780353905132664:de=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?de=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?de=-.03190157229022304:de=.07985197845805492:de=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?de=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?de=-.027174047777029083:de=.057117284879796476:t[3]>43.50000000000001?de=-.0016147040913107311:de=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?de=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?de=-.01466076988151239:de=.13375695925484857:de=-.04885873081899647:t[0]>5566.500000000001?de=.11086813028591343:t[8]>992.5000000000001?de=-.07622304217072383:de=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?de=.03285858361708423:de=-.12354858211764992:de=.0672788301823281:t[15]>1e-35?de=.08658836986585006:de=-.02741484278509758:t[290]>1e-35?de=-.08161310335133287:t[135]>1e-35?de=-.04824156054814152:de=.0009156904299554183;let qe;t[3]>7.500000000000001?qe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?qe=.03642374718166293:qe=.16379973756366603:qe=-.03946685266127979:t[186]>1e-35?qe=.07618896623420895:t[96]>1e-35?qe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?qe=-.022822371600847505:qe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?qe=.044416424920571296:qe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?qe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?qe=.1061937286809567:t[7]>54.50000000000001?qe=.11487507743121311:t[8]>819.5000000000001?qe=-.07181278009001418:t[10]>25.500000000000004?qe=.13499019430369633:t[1]>31.500000000000004?qe=.09032979489780704:qe=-.12754166393372374:t[9]>37.50000000000001?qe=-.05093963635361407:qe=-.005026651151683848:t[9]>2.5000000000000004?qe=.07619735785573735:qe=.012363301341532136:t[26]>1e-35?qe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?qe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?qe=-.10764172927882483:qe=.01890760098464703:qe=.06573095405846417:t[8]>634.5000000000001?qe=-.00783575973273707:qe=-.050612689680229306:t[1]>22.500000000000004?qe=-.0016842490401359626:qe=.0738227088444087:qe=-.02663970950432175;let Ce;t[31]>1e-35?t[8]>17.500000000000004?Ce=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?Ce=.007191286124908192:Ce=-.09347881647636902:t[10]>1.5000000000000002?Ce=.07938758708008091:Ce=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?Ce=.12321804057595996:Ce=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?Ce=-.04644244754790671:Ce=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?Ce=.0706108609273337:t[2]>40.50000000000001?Ce=-.028046629962303716:Ce=-.06497613993109329:Ce=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?Ce=-.03056331974267756:Ce=-.11886389712497057:Ce=.053364962175658184:t[8]>2233.5000000000005?Ce=-.0448152521157682:Ce=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?Ce=.03818796510453344:Ce=.23673992112982362:Ce=.02858814226507374:t[10]>44.50000000000001?Ce=-.1125863771551199:Ce=.009129996952394916:t[1]>7.500000000000001?Ce=-.004374525302461639:Ce=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?Ce=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?Ce=-.13677189943034931:t[10]>2.5000000000000004?Ce=.039591891437078086:Ce=-.09312596849507347:Ce=-.02423172142089822:Ce=.0009836986075266283;let We;t[189]>1e-35?t[0]>5269.500000000001?We=-.103183298350443:t[2]>51.50000000000001?We=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?We=-.05186168947388339:We=.0496996365539082:t[10]>23.500000000000004?We=.1404445738719:t[93]>1e-35?We=.0027146310074558505:t[5]>3821.5000000000005?We=.002153033152069652:t[4]>2.5000000000000004?We=.007663539551317215:We=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?We=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?We=-.021479467709980358:We=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?We=.021660293256233334:We=-.0927396152303864:We=.0665074081601698:t[0]>1550.5000000000002?We=.08972407105958534:We=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?We=.06761927942466854:We=-.015762168112653286:t[17]>1e-35?We=.10311304131145381:We=-.017672785252336027:We=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?We=-.10638321435298535:We=.0007073011744385905:t[18]>1e-35?We=-.027056185501334325:t[145]>1e-35?We=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?We=.09762140519655171:t[9]>110.50000000000001?We=-.06581942957595835:t[6]>54.50000000000001?We=.04959634035251596:We=.0022616298654554207:We=-.007437620924990854;let ce;t[179]>1e-35?ce=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?ce=.1470294450403005:ce=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?ce=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?ce=.07965955447707423:t[10]>10.500000000000002?ce=-.09236156404262426:ce=.03396273196231458:ce=-.13246465021467432:ce=.07092822261735353:ce=-.08753829085942:ce=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?ce=.004705878789890202:ce=.13775378964952867:ce=-.04770928980587811:t[10]>29.500000000000004?ce=.011221519891071544:t[0]>3853.5000000000005?ce=.06365381191628273:ce=.15506252245336827:t[1]>37.50000000000001?ce=-.07254777021042061:ce=.026514587757252385:t[308]>1e-35?ce=.04115804816617256:t[10]>26.500000000000004?ce=.02077721353011946:t[5]>3548.5000000000005?ce=-.1280907116663952:ce=-.021974774274438:t[306]>1e-35?ce=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?ce=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?ce=-.005710865560475598:t[94]>1e-35?ce=-.06751507982853555:ce=.027250040757588703:t[9]>52.50000000000001?ce=.07060357924595577:ce=-.030297760713011795:ce=-.0006005400085266517;let ue;t[113]>1e-35?ue=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?ue=-.06996356565314456:ue=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?ue=-.08317707559926495:t[21]>1e-35?ue=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?ue=-.010538203005984922:ue=.08454819465349446:t[9]>124.50000000000001?ue=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?ue=-.08542251249346582:t[9]>50.50000000000001?ue=-.023428882537657472:ue=.010042500833979073:ue=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?ue=.03006025206979096:t[9]>108.50000000000001?ue=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?ue=.04222035773042132:ue=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?ue=-.07209095448054853:ue=.028065954981903313:ue=.08714651929917122:ue=-.006678820669279169:t[10]>40.50000000000001?ue=.006982396294941626:ue=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?ue=-.09351114982645548:t[4]>3.5000000000000004?ue=-.004837550129223451:ue=-.08324141237464677:t[303]>1e-35?ue=.10703037493990825:t[9]>156.50000000000003?ue=-.10803018621648303:t[116]>1e-35?ue=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?ue=.10261721665006701:ue=.018994509090668264:ue=.0011244262442038839;let He;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?He=-.08404263465005328:t[0]>3682.5000000000005?He=.041259223920298876:t[1]>29.500000000000004?He=-.09541257493441671:He=.001482192721625409:He=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?He=-.08268996098437432:t[230]>1e-35?He=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?He=-913218977737457e-19:t[4]>10.500000000000002?He=-.056334165674005156:t[127]>1e-35?He=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?He=-.04231200150318989:t[10]>42.50000000000001?He=.10182973257894812:He=.015934763950068445:He=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?He=-.041117068322885315:He=.1167767830037126:He=.13611206992387337:t[10]>41.50000000000001?He=-.07120286010564107:He=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?He=-.07702290997669524:t[198]>1e-35?He=.08776558554437136:He=-.008290740324975692:t[2]>32.50000000000001?He=.07198457624219955:He=.005463113714361629:He=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?He=.03295785445437507:He=.15140250150674536:He=-.035613213948910254:t[186]>1e-35?He=.06849425535860769:t[96]>1e-35?He=.06028225812727254:He=-.007582543288662308;let Me;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Me=.08396556264106572:Me=-.0562516995099192:Me=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Me=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Me=.0052017514017035915:Me=-.11194119432743639:Me=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Me=-.025692451287403446:Me=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Me=-.11892250746801664:t[10]>22.500000000000004?Me=.07548493166973796:Me=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Me=.13750699058082427:t[18]>1e-35?Me=.06535408879552801:Me=-.054118179035040674:Me=.1344282838979622:t[0]>3982.5000000000005?Me=-.10409582202467015:t[19]>1e-35?Me=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Me=.012705935670766466:Me=.14149359442527545:Me=-.047977876173706004:t[20]>1e-35?Me=.057945228080337946:t[0]>3642.5000000000005?Me=-.008726535792122467:Me=-.08424769891378858:t[34]>1e-35?Me=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Me=.01196849566739346:Me=.1614642278429876:Me=-.043022338150701625:t[3]>5.500000000000001?Me=-.03907848255033881:Me=.018280601026175593:Me=.0006654540402589085;let be;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?be=-.01386103677247845:be=.11386694333005128:t[4]>27.500000000000004?be=-.021862617610091336:t[2]>31.500000000000004?be=.0828858469030438:be=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?be=.11303635767048735:be=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?be=-.04238798044549342:be=.022091190130494303:t[5]>5082.500000000001?be=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?be=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?be=-.04291104140431434:t[17]>1e-35?be=.11256797532342613:be=-.017206916368289193:be=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?be=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?be=.03581712466863222:be=.14770264307668884:t[8]>73.50000000000001?be=-.13093289429740068:be=.042461737442702936:t[52]>1e-35?be=.0501831919044939:be=-.010450249720465756:be=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?be=.0005381332165438493:be=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?be=.04849637311285226:be=-.036671377119808564:t[0]>421.50000000000006?be=.00020968499911058945:be=.11636422423182405:be=-.12687837788222575:be=.0012774367867215346;let Ge;t[120]>1e-35?Ge=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Ge=-.042799574885345304:Ge=.07412430171193245:Ge=-.11248270469336048:t[193]>1e-35?Ge=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?Ge=.028911612178122104:Ge=.12326369727728437:t[0]>4091.5000000000005?Ge=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ge=.1159839898100149:Ge=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?Ge=-.0216343737351583:Ge=-.1220272260878369:t[2]>18.500000000000004?Ge=.09152924475072398:t[8]>55.50000000000001?Ge=.039508716651005665:Ge=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?Ge=.06793009902674053:Ge=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?Ge=-.04391068849624096:Ge=.04009967593394672:t[8]>1085.5000000000002?Ge=-.024773826356034825:Ge=-.13919707884246582:Ge=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?Ge=-.11567917501901476:Ge=-.006813640337684114:t[3]>7.500000000000001?Ge=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?Ge=-.001754586408351048:Ge=-.055422422450722056:Ge=-.06090032532532226:t[0]>5269.500000000001?Ge=.11787981735983527:Ge=-.00198119768540783:Ge=.00210412924303036;let rt;t[294]>1e-35?t[10]>50.50000000000001?rt=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?rt=-.06063239096209816:rt=.03317022411417386:rt=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?rt=-.013608609329298802:rt=.09078000157330264:t[99]>1e-35?rt=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?rt=-.07536137260189814:rt=.006253266595455118:t[10]>28.500000000000004?rt=-.006106041147592768:t[9]>156.50000000000003?rt=-.11828932797811101:t[94]>1e-35?rt=-.02566078479505714:t[303]>1e-35?rt=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?rt=-.08401252789168523:t[5]>4244.500000000001?rt=.026372887658499107:t[1]>16.500000000000004?rt=-.027836756345634026:rt=.09205362097909099:rt=.00934612788718244:t[203]>1e-35?rt=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?rt=-.09580979052540028:t[1]>50.50000000000001?rt=-.06402211827281554:rt=.08342858760095972:t[2]>36.50000000000001?rt=.008114897658204584:t[92]>1e-35?rt=.09541587072672864:rt=-.022342147210555434:rt=-.01660492519175128:rt=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?rt=.15846731118501817:rt=.039498507912023195:t[245]>1e-35?rt=.07008718676813333:rt=.0019806389728814727;let ht;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?ht=-.01192072916082109:ht=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?ht=.06874032717466054:t[4]>40.50000000000001?ht=-.07752510020707537:t[1]>76.50000000000001?ht=-.09944032260703917:t[8]>1381.5000000000002?ht=-.054466635810800745:t[1]>32.50000000000001?ht=.05974084520839573:ht=-.0384718740755954:ht=-.11374190719134032:t[0]>2151.5000000000005?ht=-.13703645155803298:ht=.004833344758654556:t[297]>1e-35?t[212]>1e-35?ht=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?ht=.013539805885738608:ht=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?ht=.09941880179344399:ht=-.01608127391210995:ht=.08025226531247417:t[9]>67.50000000000001?ht=.13525448212444113:t[6]>61.50000000000001?ht=-.05511099182158894:t[94]>1e-35?ht=-.06821509831783572:t[128]>1e-35?ht=.11361314817714643:ht=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?ht=-.09954181329804547:t[197]>1e-35?ht=.10102833149755386:t[188]>1e-35?ht=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?ht=-.03781554214742005:ht=.09927933385592314:ht=-.020006000056720083:ht=-.10520473615957895:ht=-.12006990846253787:ht=-.00026111570975317574;let Ot;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ot=-.019188245509744628:Ot=-.13354864350075848:t[0]>2461.5000000000005?Ot=.051885477468354396:Ot=-.0833581968852119:Ot=.08233441701532287:Ot=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ot=.09926337893072812:Ot=-.027753610497327715:t[0]>1972.5000000000002?Ot=-.09780045823152517:Ot=.032380915168504935:Ot=.11502632261226381:t[17]>1e-35?Ot=-.06094965899579662:t[10]>40.50000000000001?Ot=-.07500475582440802:Ot=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ot=-.09584538995220808:Ot=-.00908705814304442:Ot=.03203281520813893:t[10]>49.50000000000001?Ot=-.03146271513986384:t[2]>63.50000000000001?Ot=.13172001315536286:t[224]>1e-35?Ot=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ot=.09521549382082259:Ot=-.04414925613522197:t[0]>1847.5000000000002?Ot=-.09118580379557353:Ot=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ot=.03525144509943896:Ot=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ot=-.04766112322938157:t[2]>10.500000000000002?Ot=.0728516504357201:Ot=-.05049625965272536:Ot=-.10868663055825774:Ot=.0005382613419948969;let Xt;t[147]>1e-35?t[1]>53.50000000000001?Xt=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Xt=-.030504020655417463:Xt=.07102458639110094:Xt=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?Xt=.055304563442710876:t[1]>53.50000000000001?Xt=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?Xt=-.1568835288372895:Xt=-.0279829124400056:Xt=.04493843959601833:Xt=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?Xt=-.054133834303687026:t[9]>48.50000000000001?Xt=.11263810289007213:t[9]>9.500000000000002?Xt=-.02202034562838259:t[4]>45.50000000000001?Xt=-.03410927569045158:Xt=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?Xt=-.029687297407295893:Xt=.10673602850001934:t[4]>42.50000000000001?Xt=.0036275562945108117:Xt=-.0760789221330622:Xt=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Xt=.08274426793676076:Xt=-.07076234425516396:Xt=.13890177606150175:Xt=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?Xt=-.09250637750836187:Xt=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?Xt=-.01897867921812603:Xt=.04890781705365262:Xt=-.11569892307597907:t[2]>106.50000000000001?Xt=.09032697440623969:Xt=.00047935919155035045;let Ut;t[115]>1e-35?Ut=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Ut=-.10131179514695865:t[8]>938.5000000000001?Ut=.10203729808015481:Ut=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Ut=.03574015165562999:Ut=-.07763042506449493:Ut=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Ut=.0665706259130275:Ut=-.06586817559309924:Ut=.11925564412287476:Ut=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Ut=.046017146627455346:Ut=-.08623321630086885:t[8]>1765.5000000000002?Ut=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Ut=.11143827902215087:Ut=-.01817808730473413:Ut=.16980985030210127:Ut=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Ut=.010168994879727824:Ut=-.09099594488792513:t[9]>1.5000000000000002?Ut=.0533459678147928:Ut=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Ut=-.062346959148773695:t[1]>47.50000000000001?Ut=-.0021578343835599316:t[2]>27.500000000000004?Ut=.19567373210166172:Ut=.07851555379116423:t[18]>1e-35?Ut=.03711549097804649:t[8]>359.50000000000006?Ut=.012492346746905587:t[4]>20.500000000000004?Ut=.047511695735697544:Ut=-.07999269063948773:Ut=6802045404471004e-20;let Kr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Kr=.0011484728213539738:Kr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Kr=-.09828874964938798:t[8]>1586.5000000000002?Kr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Kr=.011938269926919522:Kr=.17541983715953954:t[19]>1e-35?Kr=.023002786011088672:Kr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Kr=.06508934844183291:Kr=-.10168553534835639:Kr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Kr=.021140806225203937:Kr=-.1167833342453639:t[2]>33.50000000000001?Kr=.13163585734056618:Kr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Kr=.06314479201263888:Kr=-.09639088327091713:t[10]>29.500000000000004?Kr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Kr=40577156464836036e-21:Kr=.12322387121810757:Kr=-.03697224045046014:t[1]>22.500000000000004?Kr=.016474835887320276:Kr=.16919298733903063:Kr=.07633203630214054:Kr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Kr=.14150493354700563:Kr=-.01831155354975749:t[1]>28.500000000000004?Kr=-.07952557178685365:t[10]>28.500000000000004?Kr=.0665695554984927:Kr=-.053640139319277094:Kr=.0004754840665898665;let Mr;t[76]>1e-35?Mr=-.06814884255939921:t[179]>1e-35?Mr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Mr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Mr=.004193658608848433:Mr=-.1066968975983452:t[8]>302.50000000000006?Mr=.05476730110440451:Mr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Mr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Mr=.013555772109446666:Mr=-.09856116699770784:Mr=.0284329611813383:t[2]>52.50000000000001?Mr=.04008708444763762:t[9]>29.500000000000004?Mr=-.1289599546008197:Mr=-.018566534248335896:t[8]>747.5000000000001?Mr=.02236484980076122:Mr=.1148871655157582:t[8]>3084.0000000000005?Mr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Mr=.03164751204281298:Mr=.11752140436184891:t[9]>42.50000000000001?Mr=-.07180559595410106:t[22]>1e-35?Mr=.09325040416256854:Mr=-.016041122807939914:Mr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Mr=-.010718250133458515:Mr=.09818827994853763:Mr=.010180038981174032:Mr=-.039472162599295535:t[9]>170.50000000000003?Mr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Mr=-.08674788057474031:Mr=.02077653508548371:Mr=-.0003536561382007414;let fn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?fn=.018337297491457794:fn=-.05926206443180149:fn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?fn=.10747078482128616:t[126]>1e-35?fn=-.10550625192391357:t[7]>71.50000000000001?fn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?fn=.1317396472229434:fn=-.025035791351328947:fn=-.0728334305864372:t[8]>963.5000000000001?fn=.023642201723096064:fn=.183010326734258:t[128]>1e-35?fn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?fn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?fn=-.1088876900335281:fn=.02758317023002635:fn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?fn=-.01928020117446408:fn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?fn=.07893723375925096:fn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?fn=-.10301657587280551:fn=.005787463140224318:fn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?fn=-.019296977889522397:fn=-.07274529751752634:t[1]>30.500000000000004?fn=-.050368901143148286:fn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?fn=.0015332402792773946:fn=.09930153676749967:fn=-.06370844564357069:fn=.00042272155209927616;let xe;t[71]>1e-35?t[4]>17.500000000000004?xe=.12586844370423247:xe=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?xe=-.08474891624263797:t[8]>125.50000000000001?xe=.08125086980439704:xe=-.04082085238068532:t[0]>3863.5000000000005?xe=.020481535807469208:xe=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?xe=-.019110200161573936:xe=-.12387719685855114:t[0]>1102.5000000000002?xe=.08376595701957407:xe=-.031821919580524834:t[9]>4.500000000000001?xe=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?xe=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?xe=.1349841206807871:xe=.011864053595560297:t[1]>41.50000000000001?xe=-.08203662486612544:t[2]>18.500000000000004?xe=-.009541865642346947:xe=.08345043168501759:t[2]>10.500000000000002?xe=-.09585031818030947:xe=.019432330487099865:xe=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?xe=.11951517733981365:xe=-.016651014735738538:t[1]>28.500000000000004?xe=-.07410922545030711:t[10]>28.500000000000004?xe=.05886430683844788:xe=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?xe=.04802269879144705:xe=-.026208212831796737:t[4]>45.50000000000001?xe=-.03227476944664786:xe=.05124575625622705:xe=.00020506696916003137;let Ve;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ve=-.03042091758483443:t[10]>14.500000000000002?Ve=.09816619204768777:Ve=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ve=-.02381165060401718:Ve=-.10950361804974783:Ve=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ve=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ve=-.06371052144380579:Ve=.0835500621252692:Ve=-.10408255929333915:t[1]>74.50000000000001?Ve=.13208968122712403:t[1]>64.50000000000001?Ve=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ve=.09922816902423433:Ve=.016366955328796718:Ve=.1592412560903584:t[1]>39.50000000000001?Ve=.05409467990258923:Ve=-.08260633210459611:Ve=-.06307205775247567:t[9]>36.50000000000001?Ve=.040253940015648144:Ve=.14202568969471283:Ve=-.028761848341594044:Ve=.08994073058773508:t[0]>807.5000000000001?Ve=-.043427848826323195:Ve=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ve=-.0758877731600639:t[23]>1e-35?Ve=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ve=.08124700978741987:Ve=.013296063087086852:t[7]>5.500000000000001?Ve=-.01640196088612987:Ve=-.12685498840146067:Ve=-.0004940792382459551;let mt;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?mt=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?mt=.08513773825688947:mt=-.1184664832315282:mt=.05676963535893477:mt=.14263843210340613:mt=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?mt=-.10669720555606924:mt=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?mt=.0664744575868955:mt=-.08469256188890871:mt=-.026746678040592144:t[281]>1e-35?mt=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?mt=.012131807587207655:mt=-.12776015795398743:mt=.04320472481083551:mt=.08390980661550446:t[10]>227.50000000000003?mt=-.09771783809101153:t[10]>130.50000000000003?mt=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?mt=-.07610698254064358:t[8]>902.5000000000001?mt=-.03136381213599649:t[131]>1e-35?mt=.0704821739127936:t[224]>1e-35?mt=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?mt=.10431473040024908:t[8]>841.5000000000001?mt=.07304745320500514:mt=-.038011541882439825:mt=-.01679746695007364:t[0]>3129.5000000000005?mt=.05589952587431965:t[210]>1e-35?mt=.06227198085800842:mt=-.0011341890997947812:t[8]>740.5000000000001?mt=.04817300084412584:mt=-.000577001010789238;let wt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?wt=-.10504730480402079:t[5]>3341.5000000000005?wt=.11087894671081754:wt=-.0406668834674614:wt=.03308382165616109:t[8]>104.50000000000001?wt=-.10431436764549162:wt=.0073928337244891455:t[4]>34.50000000000001?wt=-.10571751512748416:wt=-.006081128814142983:t[13]>1e-35?wt=.1299673566095023:t[4]>60.50000000000001?wt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?wt=.04857126072645073:wt=-.03431365358104773:t[4]>16.500000000000004?wt=.04101865986596709:wt=.16480274980378218:t[10]>26.500000000000004?wt=.03673978504199255:t[10]>9.500000000000002?wt=-.10996402743800027:t[308]>1e-35?wt=.0553693735082498:wt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?wt=.010902983761213922:wt=.1325118659895645:wt=-.064362945508595:t[1]>66.50000000000001?wt=.033416767779331176:wt=-.054080316225040496:t[42]>1e-35?wt=-.07762364337810815:t[10]>1089.5000000000002?wt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?wt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?wt=.0220102041325908:wt=-.06516708740003069:wt=.012833498905748267:t[224]>1e-35?wt=-.007038418272997865:wt=.00037666304316290967;let sr;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?sr=.07554189644995735:sr=-.052089349455904946:sr=-.10148206848169845:t[113]>1e-35?sr=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?sr=.07172653627995676:sr=-.07602959317610998:sr=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?sr=-.0399322883690891:sr=.06523495517476098:sr=-.10358715295743802:t[193]>1e-35?sr=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?sr=.015928764772252406:sr=.1341513061552287:sr=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?sr=-.033592997607280156:sr=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?sr=-.08402551858097379:sr=.017401984506038796:t[1]>25.500000000000004?sr=.13337205393591278:sr=-.01160208350090984:sr=.06708317942315471:t[8]>227.50000000000003?sr=-.08486943882418681:sr=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?sr=-.10496268177586783:sr=-.020921489532370493:sr=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?sr=.11639296062157028:sr=-.004275784356569115:t[32]>1e-35?sr=-.07297384970166025:sr=.006026841626381599:sr=.002034611134960428;let er;t[248]>1e-35?er=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?er=-.06455513326540585:t[1]>29.500000000000004?er=.07718474591552532:t[4]>7.500000000000001?er=.040139336931404826:er=-.09685734690563386:er=.00015327283570347363:t[9]>88.50000000000001?er=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?er=-.04077257804338707:er=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?er=.03778141591008941:er=-.06459919920634845:er=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?er=.14063930759326346:t[0]>179.50000000000003?er=.07287482250668585:t[8]>1180.5000000000002?er=-.14419393112726253:t[10]>28.500000000000004?er=-.07993142770099469:t[17]>1e-35?er=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?er=.05527969663610186:er=-.10824385941441346:t[3]>11.500000000000002?er=.12358502961047915:er=-.017509147119622873:t[0]>74.50000000000001?er=-.014907705458730486:t[8]>95.50000000000001?er=-.02225118168342062:er=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?er=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?er=.04962819555610421:er=-.07213577821855309:er=.09139529824708481:t[19]>1e-35?er=.013439401088345224:er=-.049274647207292056:er=.10531673719686951;let wr;t[40]>1e-35?t[0]>1937.5000000000002?wr=-.06421671152073961:wr=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?wr=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?wr=-.03520420769287065:t[8]>1085.5000000000002?wr=-.019817352506127633:wr=.11444439424520964:wr=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?wr=-.010490117519863269:wr=.08104430117757461:t[121]>1e-35?t[243]>1e-35?wr=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?wr=.06619344145920268:t[0]>4091.5000000000005?wr=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?wr=.10016091391222309:wr=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?wr=-.019511460451434884:wr=-.11643672465055221:t[2]>18.500000000000004?wr=.07848228087333317:t[8]>55.50000000000001?wr=.032583027899956235:wr=-.11209832692153521:t[11]>1e-35?wr=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?wr=-.09996887746328006:t[9]>2.5000000000000004?wr=.02157682011863397:wr=-.05247727848991843:wr=.07409150201483244:t[1]>38.50000000000001?wr=-.11378466075449625:t[224]>1e-35?wr=-.10741749127732923:t[1]>26.500000000000004?wr=.07343136534146562:wr=-.07013573628594773:t[25]>1e-35?wr=-.04626669734164317:wr=.05518333197956482:wr=.00032434010867555516;let pr;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?pr=.026313251010808853:pr=-.08997339150292381:pr=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?pr=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?pr=.0905155504503746:t[8]>1049.5000000000002?pr=-.062312558183394054:t[8]>719.5000000000001?pr=.09583836191410239:t[0]>3719.5000000000005?pr=-.0778097309430818:pr=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?pr=-.12920865648544927:t[0]>2699.5000000000005?pr=-.07086587879041864:pr=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?pr=-.11377786322600797:pr=-.009486325820117998:t[1]>55.50000000000001?pr=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?pr=-.07938291201004219:t[2]>36.50000000000001?pr=.01520046732530246:pr=.13649854049662832:pr=-.07145015938528873:t[8]>407.50000000000006?pr=-.00350257360822279:pr=.11332047082193297:pr=-.10060624458629897:pr=.05429496612497562:t[8]>1446.5000000000002?pr=.006073419197482838:pr=-.08718676350883998:pr=-.11532497988252638:pr=.10766270463068293:t[34]>1e-35?pr=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?pr=-.0004109812623829506:pr=.021601073497455662:pr=-7343540098965853e-20;let nr;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?nr=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?nr=.05995640200798119:t[0]>3443.5000000000005?nr=-.14698883458733583:nr=-.030039164579240187:t[189]>1e-35?nr=-.06086763220538141:t[1]>86.50000000000001?nr=-.05096727866142538:t[4]>64.50000000000001?nr=.11240554253834577:t[4]>45.50000000000001?nr=-.030279760168394117:t[6]>45.50000000000001?nr=.10161088917815142:t[10]>77.50000000000001?nr=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?nr=-.06672020005240323:nr=.08831457502630258:t[8]>2592.5000000000005?nr=-.052617701047376654:t[10]>29.500000000000004?nr=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?nr=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?nr=-.064099222705728:nr=.044332487521538365:t[0]>2882.5000000000005?nr=.031099546885005065:nr=.12938467051623853:t[0]>4221.500000000001?nr=-.0928676413498701:t[9]>30.500000000000004?nr=-.05781824812803708:nr=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?nr=-.06648105454098469:nr=.05985487552383097:nr=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?nr=.05282385499619401:t[1]>66.50000000000001?nr=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?nr=.027885690791379255:nr=-.08407126408362446:nr=.014432924125571093:nr=-9903435845205118e-20;let dr;t[76]>1e-35?dr=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?dr=.013633653464240465:dr=-.10164319411983509:dr=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?dr=.00632864847804078:dr=-.08393000368134668:dr=.07870508617440916:t[284]>1e-35?dr=.1092302727710421:dr=-.0025505047582483234:t[248]>1e-35?dr=.07101822393621864:t[274]>1e-35?dr=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?dr=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?dr=.025081789181021243:dr=-.014813325803582618:t[9]>33.50000000000001?dr=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?dr=.11926990418060353:dr=.01852125513565268:dr=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?dr=-.1178464984373743:t[283]>1e-35?dr=.043370859226927405:t[5]>4320.500000000001?dr=-.01103141226366587:t[8]>1104.5000000000002?dr=-.023053423988095886:dr=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?dr=.000579145585864887:dr=.03389152834202143:t[128]>1e-35?dr=-.14527722052568462:t[210]>1e-35?dr=-.08915971541902741:t[7]>9.500000000000002?dr=-.03307314577076116:t[18]>1e-35?dr=-.05521712302023565:dr=.009315605032770029:dr=.0036332551852289933;let ir;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?ir=-.07583539600416284:t[188]>1e-35?ir=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?ir=-.011038193049597113:ir=.08154028164397753:t[1]>85.50000000000001?ir=.10259361975201933:ir=.011640408330521594:ir=-.00023319159023748508:t[92]>1e-35?ir=.13771692859530546:ir=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?ir=.09967230141007705:t[30]>1e-35?ir=-.08888529037551285:ir=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?ir=.08284665960761373:ir=-.029292565021289504:t[7]>7.500000000000001?ir=-.09945093355204493:ir=-.008381393701708593:t[20]>1e-35?ir=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?ir=.07585582641438211:t[8]>284.50000000000006?ir=-.029387993239886723:ir=.07716738177321587:t[1]>18.500000000000004?ir=.026745348497993746:ir=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?ir=.02337306890530338:ir=-.10390355904767366:ir=.07390521199638532:ir=-.06788247515155237:ir=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?ir=-.06360325615644084:ir=.04342192339836601:ir=-.10598779152030145:ir=.05253384605768211;let Lr;t[3]>7.500000000000001?t[157]>1e-35?Lr=-.07514182877923786:Lr=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Lr=.028692053800951845:Lr=.14081686716133598:Lr=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Lr=.0037139292567243084:Lr=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Lr=.01202688580305612:Lr=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Lr=.043935495082738626:Lr=-.05639305759669704:t[247]>1e-35?Lr=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Lr=.10331836202616368:Lr=.0006926658459781341:t[96]>1e-35?Lr=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Lr=-.0741403257305367:Lr=.022900127535540854:t[7]>3.5000000000000004?Lr=.038110741403836294:Lr=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Lr=-.09552842289807008:t[1]>27.500000000000004?Lr=.012505935885798007:Lr=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Lr=-.1046104767723845:Lr=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Lr=.023466328488582572:Lr=.11730925774586994:Lr=-.04771965631104874:Lr=.17059689880751394:Lr=-.08181850955999449:t[26]>1e-35?Lr=-.12727482696678769:Lr=-.014343123272734182;let Yr;t[147]>1e-35?t[1]>53.50000000000001?Yr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Yr=-.02763546051134888:Yr=.06423344777499343:Yr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Yr=.049825139823021586:t[7]>22.500000000000004?Yr=-.01131680751379858:t[0]>2579.5000000000005?Yr=-.10673674485369694:Yr=-.015387212937189957:Yr=.04347325151148724:t[179]>1e-35?Yr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Yr=.0650355590939066:Yr=-.0473332870892226:Yr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Yr=.11139543329789044:t[126]>1e-35?Yr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Yr=.06370903833231022:t[10]>29.500000000000004?Yr=.03415223859607161:t[10]>3.5000000000000004?Yr=-.07415518117873297:Yr=-.0014119203473324082:Yr=.12617652343819508:t[9]>41.50000000000001?Yr=-.10311145857176976:t[8]>2757.5000000000005?Yr=-.08106484219011428:t[7]>71.50000000000001?Yr=-.09783384432091176:t[1]>88.50000000000001?Yr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Yr=-.008884084501608536:Yr=.061339437777743616:Yr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Yr=.01526664064166223:Yr=.13534828515415498:Yr=-.06985484465894776:Yr=.0005758961943178744;let cn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?cn=-.029152732370514342:cn=.07173628916139178:t[1]>36.50000000000001?cn=-.08859111297255318:cn=.0018030071815630785:cn=.13652461563759322:cn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?cn=-.07145140450454163:t[21]>1e-35?cn=-.07422841663493233:cn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?cn=.11864240653986852:t[3]>33.50000000000001?cn=-.08821209591953476:cn=.05706392280054726:cn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?cn=.01953613016837112:cn=-.059781039130025006:t[148]>1e-35?cn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?cn=.07207826841738371:t[202]>1e-35?cn=.08163917539410503:cn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?cn=-.06858280496900336:cn=-.1781828899516648:cn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?cn=.018232649414147116:cn=-.04419781124222661:cn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?cn=.11452368095776105:cn=-.036496437259924026:cn=-.040445338739465486:cn=.0816572651001145:cn=-.08968914517368663:cn=.0002826343082585516;let xn;t[189]>1e-35?t[0]>5269.500000000001?xn=-.08839493050459957:t[10]>85.50000000000001?xn=.10046908365702462:t[8]>2592.5000000000005?xn=-.09632233975926387:t[8]>2000.5000000000002?xn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?xn=.035504970430426296:t[1]>31.500000000000004?xn=-.1133764813142531:xn=-.01138280942244812:t[8]>1125.5000000000002?xn=.09800530246229806:xn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?xn=.07316772160107896:xn=-.059095014819051765:xn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?xn=-.09150209066166894:t[8]>3084.0000000000005?xn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?xn=-.04449234460408263:xn=.05568837973347338:xn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?xn=.12741077850267066:xn=.007372371864985329:t[2]>39.50000000000001?xn=.02295917234617787:xn=.14966532083907075:t[1]>39.50000000000001?xn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?xn=-.02511861881285652:t[1]>27.500000000000004?xn=.08683660011672288:xn=.02956214835267301:t[9]>15.500000000000002?xn=-.016538805462996232:xn=.04352738094981517:xn=-.05561856645643868:t[9]>170.50000000000003?xn=-.07996752635874248:t[179]>1e-35?xn=-.09065975936933919:xn=-.00042817975060427177;let oi;t[39]>1e-35?t[4]>25.500000000000004?oi=.03443173196222934:oi=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?oi=-.0013415395759330318:oi=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?oi=.002297618040307216:oi=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?oi=-.015297257305397608:oi=.09651828834062742:oi=-.06636003334371929:t[10]>11.500000000000002?oi=.17631616138309397:t[0]>1639.5000000000002?oi=3804386478092585e-20:oi=-.09099296398683193:oi=-.06874415876172972:t[0]>2151.5000000000005?oi=-.1311264883406766:oi=.00809052010141122:t[253]>1e-35?oi=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?oi=.045038497754638605:oi=-.07770167665661752:oi=-.08596294280650517:oi=.08538655727027213:oi=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?oi=.054627956617973275:t[1]>61.50000000000001?oi=-.11994465088415499:t[4]>8.500000000000002?oi=.06676200239406452:oi=-.027503148069376867:t[8]>676.5000000000001?oi=-.10363964928357075:t[4]>8.500000000000002?oi=-.07589816227175682:oi=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?oi=.009093153189012338:oi=-.06119765876605404:oi=.0004668642103528348;let kn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?kn=-.10100794502567233:kn=.08000205636470442:kn=-.11945419826856896:t[113]>1e-35?kn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?kn=.1224302423880318:kn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?kn=.0019277012166729114:t[1]>28.500000000000004?kn=-.054445821715687494:kn=.045645722976713245:t[30]>1e-35?kn=.13402660155331655:kn=.008921176001777645:kn=-.058547426505451076:kn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?kn=-.13526418192218206:kn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?kn=.0007263224246135398:kn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?kn=-.11575657261278308:kn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?kn=-.01995960178292952:kn=.11216586049153021:kn=-.10050961087149474:kn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?kn=.10303451081526649:kn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?kn=-.043799548968209395:kn=-.12451444314954115:t[4]>12.500000000000002?kn=-.03838117361958468:kn=.06504990789767144:t[57]>1e-35?kn=.06890006938293915:kn=.0003914274695562949;let ri;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?ri=.004271749009686975:ri=-.10523878297127605:ri=.04633982158107851:ri=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?ri=-.08655730561951676:t[8]>919.5000000000001?ri=-.0676453705610183:t[7]>18.500000000000004?ri=-.027787974193650575:ri=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?ri=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?ri=-.03473877164537313:t[8]>719.5000000000001?ri=.10471053866934404:ri=.008236107678382981:t[4]>57.50000000000001?ri=.09412219478825269:t[10]>66.50000000000001?ri=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?ri=-.040681323751002293:ri=.06374650297561021:ri=.12884615227401788:t[10]>5.500000000000001?ri=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?ri=-.05474068967150784:ri=.03744700650806603:ri=-.07846396348680855:t[1]>42.50000000000001?ri=.018972315810821302:ri=.10953621007604744:t[5]>4439.500000000001?ri=.010999776705494586:t[1]>40.50000000000001?ri=-.12394200059775967:t[10]>2.5000000000000004?ri=.013528093962849453:ri=-.09222088417048682:ri=-.12662967149701485:ri=.09327296405849603:t[3]>99.50000000000001?ri=-.013581954439986752:ri=.0005526498251862075;let ln;t[187]>1e-35?t[243]>1e-35?ln=-.08392792551692502:t[10]>68.50000000000001?ln=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?ln=-.0825306209711224:ln=.049559996084532945:ln=-.1064938580886302:ln=.03353240732240275:ln=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?ln=.16966001471529374:t[1]>57.50000000000001?ln=-.005772777673676247:ln=.09383677041525058:t[8]>747.5000000000001?ln=.054068175469351235:ln=-.049968216310277036:t[8]>753.5000000000001?ln=-.0679383555784074:t[4]>8.500000000000002?ln=-.059757341189735386:ln=.05701083682780414:ln=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?ln=.05820296128730006:ln=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?ln=.15340611616954566:ln=.04385036188666874:t[0]>4449.500000000001?ln=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?ln=.004840354641006495:ln=.09967827580276283:ln=.11605363537391578:t[9]>19.500000000000004?ln=-.0735831692725717:ln=.019973331823355176:t[306]>1e-35?t[149]>1e-35?ln=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?ln=-.02442182361342386:ln=.10334853004243093:ln=-.030431948680167104:ln=-956078595250818e-19;let Xn;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?Xn=-.040232505718244854:t[0]>3030.5000000000005?Xn=.0634109586813073:Xn=-.04043617034245621:Xn=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?Xn=-.007859096946435131:Xn=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?Xn=.05515771679628051:Xn=-.04214471312668263:Xn=-.09589322222261765:t[193]>1e-35?Xn=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?Xn=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?Xn=-.08152604001147906:t[11]>1e-35?Xn=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?Xn=.13100930780107503:t[10]>25.500000000000004?Xn=.05921074710011526:Xn=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?Xn=.0009447118243153454:Xn=-.09820565036865991:Xn=.057146909749745546:t[0]>2115.5000000000005?Xn=-.12331216726611678:Xn=.007281983677694285:t[2]>56.50000000000001?Xn=.012310154675612615:Xn=-.08873665774670461:t[6]>25.500000000000004?Xn=.134708740821879:t[9]>5.500000000000001?Xn=-.0805901581148979:t[224]>1e-35?Xn=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?Xn=.10842593386554122:t[2]>13.500000000000002?Xn=.06466798320378395:Xn=-.08578130788886655:Xn=-.03590892078300114:Xn=.0003499894043880708;let De;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?De=.10839808814624702:De=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?De=-.007478368069393829:De=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?De=.04035247751736232:t[0]>4255.500000000001?De=-.1310865624507367:t[0]>4004.5000000000005?De=.06647367311982634:De=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?De=-.011618902907510411:De=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?De=.09356028223727986:De=-.03811765057032162:De=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?De=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?De=.1146142460964847:t[1]>62.50000000000001?De=-.09679869865322362:t[9]>71.50000000000001?De=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?De=-.039046426387852974:De=.04558778688367152:De=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?De=.03261697816211156:t[15]>1e-35?De=.02586252542264368:t[2]>14.500000000000002?De=-.016420452667484604:De=-.1011799626006976:De=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?De=.010193588102560583:De=.11748729525930773:De=-.04468162226743652:De=-.028365274393617957:t[71]>1e-35?De=.05115139346588793:De=-.0001510425316936658;let X;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?X=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?X=.020637047900190317:X=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?X=-.04632587527094407:X=.08603684785510396:X=-.05101401015448496:X=.025466432054358498:X=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?X=.020385355430046367:X=.12032592051335252:X=-.012387370292173013:t[2]>23.500000000000004?X=-.12568545484492677:X=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?X=.043528764484784536:X=.14352071657196003:X=-.009332833816977268:X=.11186782227735846:X=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?X=-.05649104643152564:X=.03884200719305747:t[42]>1e-35?X=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?X=-.04103416502526736:X=.04881823954656287:t[4]>15.500000000000002?X=.009342724662897898:t[0]>3969.5000000000005?X=-.025637309961309498:X=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?X=-.08185697075265091:t[0]>2215.5000000000005?X=.030063975892297354:t[0]>807.5000000000001?X=-.03924325550733229:X=.0415330999189793:X=-.00024374664461674863;let ve;t[3]>7.500000000000001?ve=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ve=.025798416259686565:ve=.13251610353146012:ve=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ve=-.11098564237775424:ve=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ve=.15347826616466054:t[3]>4.500000000000001?ve=.10379320730958941:ve=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ve=.03159791088468647:ve=-.10612873364104258:ve=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ve=-.02335760775001469:ve=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ve=-.011164334474672973:ve=-.06594044410501655:t[207]>1e-35?ve=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ve=-.01725821503981916:ve=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ve=-.04226531631656534:ve=-.14409800530171432:ve=-.03245576341206398:t[8]>4214.500000000001?ve=.0895409165534886:t[247]>1e-35?ve=-.06506383629143335:t[118]>1e-35?ve=-.07214270121257443:t[8]>546.5000000000001?ve=-.004385020865473831:ve=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ve=.046278501133958524:ve=-.030835570926968044:t[0]>493.50000000000006?ve=-.12794504651610425:ve=.009415039807550776;let Te;t[304]>1e-35?Te=-.04717777269217453:t[76]>1e-35?Te=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?Te=-.09648224457374217:t[132]>1e-35?Te=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?Te=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?Te=.10838431695638147:t[230]>1e-35?Te=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?Te=.050071316251979:Te=-.006356941111525215:t[6]>8.500000000000002?Te=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?Te=.10217402850540398:Te=-.048840949025349197:Te=-.03668313197909846:t[7]>39.50000000000001?Te=-.0562642841496003:t[10]>2.5000000000000004?Te=.09749777369987417:Te=-.04848223121417616:t[0]>5453.500000000001?Te=.08316648226133942:Te=-.0261979698267618:t[212]>1e-35?Te=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?Te=.04837009746506856:Te=-.09184360565631328:Te=.0032411047845613606:t[0]>4733.500000000001?Te=.0977378556864798:Te=.010776545559325588:Te=-.012483310473120218:Te=-.049284121449103935:Te=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?Te=-.08380361910948711:Te=.07375088778585813:Te=-.1084864186071348:Te=.0007819503469605476;let Q;t[7]>17.500000000000004?t[115]>1e-35?Q=.08741852531696623:t[167]>1e-35?Q=.10078975495600809:Q=-.0018324767784017562:t[290]>1e-35?Q=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?Q=.1379733311640402:Q=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?Q=-.09360083033774169:Q=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?Q=-.015599362579530679:t[0]>4593.500000000001?Q=-.12029549262691491:Q=-.018917032256501397:Q=.04632831686576592:Q=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?Q=-.05894883236412263:Q=.05213944998315824:Q=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?Q=.07577412405680808:Q=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?Q=-.0277076900736147:t[1]>65.50000000000001?Q=-.023587471585763506:Q=.10184896592433082:Q=-.057699270527916825:Q=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?Q=.06566902102799584:t[10]>25.500000000000004?Q=-.07033633753181047:Q=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?Q=-.08108035861059537:Q=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?Q=-.12431182772561139:Q=.01886235886984271:Q=.0025579594894418116;let B;t[8]>2915.5000000000005?t[101]>1e-35?B=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?B=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?B=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?B=.0687641681341721:t[10]>102.50000000000001?B=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?B=-.06762578396473291:t[10]>65.50000000000001?B=-.05226727783610509:t[282]>1e-35?B=.09911438410640917:t[19]>1e-35?B=.06915156336429933:B=-.006565637886508241:B=-.08344300251849307:B=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?B=.19428463865406298:B=.016073883020956765:t[13]>1e-35?B=.06864077097923665:B=-.01388867527034731:t[0]>1847.5000000000002?B=.004655280608161356:t[1]>40.50000000000001?B=.031406054057765996:B=.12798062439212832:B=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?B=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?B=-.0706095614785733:B=.04227164041372561:B=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?B=-.07139533369873902:B=.008952586782921625:B=.06086212582180936:B=-.0816938490403437:B=-.051224901945956025:B=-.10525399124186095:B=.000270924147208224;let te;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?te=.029186512383291244:t[7]>1.5000000000000002?te=-.14984127276725573:t[1]>40.50000000000001?te=.032757060730648144:te=-.07675575422749602:t[6]>8.500000000000002?te=.10599766037117893:te=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?te=-.051394622947855385:te=.03237141302699347:te=.12526173027943244:te=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?te=-.07383912482657777:t[0]>5147.500000000001?te=.07008813937042091:t[10]>38.50000000000001?te=-.06779203808365307:te=-.013782769999524498:te=.0880038869117715:te=-.12846294176070952:t[281]>1e-35?te=-.06810806903850834:t[10]>227.50000000000003?te=-.08937977001661111:t[10]>130.50000000000003?te=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?te=.011036530162093841:te=-.11500797478569702:te=.03702229366129399:te=.07242026683784307:t[189]>1e-35?te=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?te=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?te=-.02608892716555304:te=.09609599320761308:t[9]>105.50000000000001?te=-.06848127135991534:te=.0023675721254089715:t[86]>1e-35?te=-.11049635625500497:te=-.004847764219432233;let Ae;t[125]>1e-35?t[0]>3969.5000000000005?Ae=-.09462233499115416:Ae=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?Ae=-.030700661288166148:Ae=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?Ae=.03149547314036763:Ae=-.08166208257451366:t[0]>5850.500000000001?Ae=-.10228136324773157:t[102]>1e-35?Ae=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?Ae=.01782894842128785:t[13]>1e-35?Ae=.002680190260979968:Ae=.1773965720476949:t[2]>72.50000000000001?Ae=.09090831938627947:t[1]>59.50000000000001?Ae=-.12297206702816128:t[0]>4977.500000000001?Ae=.09899015653118268:Ae=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?Ae=-.0675900954187773:Ae=.012336403425364092:Ae=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?Ae=-.02671721777458802:Ae=-.09242452991958029:t[284]>1e-35?Ae=-.08585691288582491:Ae=.013332890564324447:t[4]>14.500000000000002?Ae=-.005245022074799553:t[23]>1e-35?Ae=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?Ae=-.09289852307936758:t[116]>1e-35?Ae=-.09686573010015055:t[8]>804.5000000000001?Ae=.03812547148215318:Ae=.005162744968176633:t[9]>43.50000000000001?Ae=-.059246106396159376:Ae=.050370113808135275:Ae=.000794041852811028;let Re;t[3]>7.500000000000001?Re=.0004981426543104341:t[9]>114.50000000000001?Re=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?Re=-.019061766497948867:Re=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?Re=-.006044199577160493:Re=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?Re=.11486607015912494:t[9]>16.500000000000004?Re=-.08686820858087294:Re=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?Re=-.022230207980026437:Re=.1056683690528792:Re=-.05859530800943035:Re=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?Re=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?Re=-.05177544573528314:Re=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?Re=.15159657923771555:Re=-.0060542654587671055:t[9]>5.500000000000001?Re=-.042808028205051786:t[1]>48.50000000000001?Re=-.010449538258110742:Re=.10026907521968294:Re=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?Re=-.02272452389409874:Re=-.11202691218244319:t[5]>1809.5000000000002?Re=-.04460413584255906:Re=.08196329474205256:t[10]>69.50000000000001?Re=.10221481166238167:Re=.0004063052701699382:t[243]>1e-35?Re=-.07563941678849846:t[18]>1e-35?Re=.02563513231103432:Re=-.004740081147303786;let dt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?dt=.057446442918106:dt=-.04404018270156349:dt=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?dt=-.05930486238817954:t[1]>29.500000000000004?dt=.06955866121256543:t[8]>597.5000000000001?dt=-.06538593556505168:dt=.06212512595497445:dt=.00021102929959182257:t[9]>90.50000000000001?dt=.0958061289119631:t[102]>1e-35?dt=.07172059675638813:t[1]>47.50000000000001?dt=-.03879798603977766:t[297]>1e-35?dt=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?dt=.003805910996312012:dt=.09304295674749524:t[11]>1e-35?t[18]>1e-35?dt=.11252376801858695:t[288]>1e-35?dt=-.10293901912180432:dt=.014669268837893872:t[1]>42.50000000000001?dt=-.05988274123836837:t[145]>1e-35?dt=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?dt=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?dt=-.03366718308159971:dt=.11936550608549797:t[1]>31.500000000000004?dt=-.07454716789539667:dt=.027859650621164217:t[10]>10.500000000000002?dt=-.11806374092321247:dt=-.03506042229223101:dt=-.0007080765837654515:t[10]>6.500000000000001?dt=-.028077713664996503:t[2]>7.500000000000001?dt=.15803724124216814:dt=.0351381284833169:dt=-.07877953381054767;let St;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?St=.14144941521975005:St=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?St=.10514088112381886:t[7]>18.500000000000004?St=-.10370643555956745:St=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?St=-.0508129468802936:t[224]>1e-35?St=-.037816066368733595:t[10]>43.50000000000001?St=.07793408602607932:St=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?St=.036972453794202324:St=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?St=.09475302525132188:St=-.03580104945898193:St=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?St=-.1282448778804823:St=-.014395808269207212:St=-.008940927190750592:St=-.1459118815453748:t[0]>4897.500000000001?St=-.09733068457286576:t[1]>57.50000000000001?St=.06575271409540207:St=-.019556422817450115:St=-.10623959222984136:t[18]>1e-35?St=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?St=.008125645893104896:St=-.11084368630465868:St=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?St=-.05854904579626861:t[4]>5.500000000000001?St=.02985784951394175:St=-.03247600140149334:St=-.11152899295304973:St=-.00035424577714215764;let Yt;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?Yt=-.06563670567578264:Yt=.067656954313663:Yt=-.10388217548685377:t[8]>2302.5000000000005?Yt=.07190621943790435:t[4]>67.50000000000001?Yt=.060020507643618604:t[4]>38.50000000000001?Yt=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?Yt=-.06568134366461277:t[8]>1075.5000000000002?Yt=-.004768057709758692:Yt=.11785959165999467:Yt=-.05080221682879267:Yt=.14814206127494542:Yt=-.07241946332311736:t[253]>1e-35?Yt=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?Yt=-.02471195342450034:Yt=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?Yt=-.10741850739482771:Yt=.010051635824944:Yt=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?Yt=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?Yt=-.08992396138178163:Yt=.010944365997007212:Yt=.06221307021813793:Yt=.1286024087559141:t[127]>1e-35?Yt=.06568148624531012:t[10]>40.50000000000001?Yt=-.07567979134643352:t[5]>5647.500000000001?Yt=.07594672895572069:Yt=-.018158016446439187:t[6]>55.50000000000001?Yt=.009293422430111872:t[4]>45.50000000000001?Yt=-.017749818406964022:t[2]>46.50000000000001?Yt=.01714136511113982:Yt=-724762291423549e-19;let tr;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?tr=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?tr=.07084726276890757:tr=-.11232323677722932:tr=.04812773089510436:tr=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?tr=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?tr=.0879462816013881:tr=-.002966662093626573:t[306]>1e-35?tr=-.04588085188342676:tr=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?tr=-.006600332774461143:tr=.1272481351557754:tr=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?tr=.011884312066620044:tr=.11678751052403374:t[4]>8.500000000000002?tr=.03627129613273813:tr=-.12132783497902287:tr=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?tr=-.06830131718398992:t[0]>5147.500000000001?tr=.062360406249609306:t[4]>4.500000000000001?tr=-.013162203864592055:tr=-.07153029184927609:tr=.07628618062271557:tr=-.12085065687320373:t[190]>1e-35?tr=-.045816889524231186:t[137]>1e-35?tr=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?tr=.025895337822752502:tr=-.06503949350616421:t[10]>227.50000000000003?tr=-.09989456525790491:t[10]>130.50000000000003?tr=.08616651057030683:tr=.0001234981796706021;let Jt;t[8]>1014.5000000000001?t[9]>137.50000000000003?Jt=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Jt=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Jt=-.141732381961068:Jt=-.0317152307496497:Jt=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Jt=.12191801556691254:Jt=-.0003444689085397977:Jt=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Jt=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Jt=-.05676033995381961:Jt=.10933961076803381:t[4]>26.500000000000004?Jt=-.11667582544549814:t[8]>1765.5000000000002?Jt=.032174455312047705:Jt=-.0755016390126608:t[293]>1e-35?Jt=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Jt=.026571311956824436:t[15]>1e-35?Jt=.06175459479851121:Jt=-.018778084411148754:t[9]>40.50000000000001?Jt=-.09420232889965811:Jt=-.004578248021263184:t[2]>1.5000000000000002?Jt=.005453714644971445:Jt=-.03907138175699279:Jt=-.055296364182154736:t[23]>1e-35?Jt=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Jt=-.09358146510580179:Jt=.060524657996178094:Jt=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Jt=-.12698331085931538:Jt=.006059605604079918:t[2]>196.50000000000003?Jt=-.09451315810804783:Jt=.0011390147031687425;let It;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?It=.05517359070460923:It=-.04758751221404857:It=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?It=.1040436595565776:t[9]>21.500000000000004?It=.04032250517675179:t[107]>1e-35?It=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?It=.1192453009230486:t[1]>51.50000000000001?It=.0443376336292195:It=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?It=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?It=-.08999822408398037:It=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?It=-.061850439226075:It=.08849196353361093:It=.10536348167793089:t[92]>1e-35?It=.04894947712119185:t[9]>16.500000000000004?It=.05900227903883853:t[9]>5.500000000000001?It=-.11946594348916476:It=-.03652096348071964:t[1]>41.50000000000001?It=-.07411603110840567:It=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?It=.08493634342741495:t[11]>1e-35?It=-.10899097825564363:It=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?It=.08356655906359918:t[7]>25.500000000000004?It=-.09475076526194888:t[10]>5.500000000000001?It=-.01999406228763778:It=.06696212545889428:t[6]>20.500000000000004?It=.14713592661393468:It=.0459917279002218:It=.00027445928493734093;let xr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?xr=-.06904501553217077:xr=.05696231672035904:xr=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?xr=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?xr=-.011419256378538392:t[0]>3830.5000000000005?xr=.140315841503076:xr=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?xr=-.04027822909411164:xr=.03176085103667189:xr=.06779515865838849:t[4]>15.500000000000002?xr=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?xr=.06124039747298539:xr=-.04312732764434027:xr=.09161522761808062:xr=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?xr=.11211681010488772:t[13]>1e-35?xr=.06725735814960367:xr=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?xr=.11743605068905603:xr=-.011309033539148687:xr=-.07896094707523052:xr=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?xr=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?xr=.02836295848998302:xr=.12210680366745175:xr=-.058302317470509096:t[5]>4144.500000000001?xr=.06123341960495106:xr=-.03840046906926525:xr=-.05221474543453495:xr=.03988215485860711:xr=-.00033074684693083496;let fi=DGt(e+r+n+o+s+c+l+u+d+p+m+h+g+A+y+v+b+I+S+k+N+F+O+Y+z+V+U+H+ee+J+G+j+Z+ie+ne+re+fe+ye+Qe+we+Xe+Oe+ut+Rt+Et+At+de+qe+Ce+We+ce+ue+He+Me+be+Ge+rt+ht+Ot+Xt+Ut+Kr+Mr+fn+xe+Ve+mt+wt+sr+er+wr+pr+nr+dr+ir+Lr+Yr+cn+xn+oi+kn+ri+ln+Xn+De+X+ve+Te+Q+B+te+Ae+Re+dt+St+Yt+tr+Jt+It+xr);return[1-fi,fi]}a(GYe,"multilineModelPredict");function DGt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}a(DGt,"sigmoid");var BGt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},VYe={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function zYe(t,e,r,n=!0){let o=t.split(`
`);if(n&&(o=o.filter(l=>l.trim().length>0)),Math.abs(e)>o.length||e>=o.length)return!1;e<0&&(e=o.length+e);let s=o[e];return(BGt[r]??[]).some(l=>s.includes(l))}a(zYe,"hasComment");var jX=class{static{a(this,"PromptFeatures")}constructor(e,r){let[n,o]=this.firstAndLast(e),s=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=o.length,this.lastLineRstripLength=o.trimEnd().length,this.lastLineStripLength=o.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=s[1].length,this.rstripLastLineStripLength=s[1].trim().length,this.secondToLastLineHasComment=zYe(e,-2,r),this.rstripSecondToLastLineHasComment=zYe(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,o=r[0],s=r[n-1];return s==""&&n>1&&(s=r[n-2]),[o,s]}},cxe=class{static{a(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new jX(e,n),this.suffixFeatures=new jX(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(VYe).length+1).fill(0);r[VYe[this.language]??0]=1;let n=new Array(Object.keys(Px).length+1).fill(0);n[Px[this.prefixFeatures.lastChar]??0]=1;let o=new Array(Object.keys(Px).length+1).fill(0);o[Px[this.prefixFeatures.rstripLastChar]??0]=1;let s=new Array(Object.keys(Px).length+1).fill(0);s[Px[this.suffixFeatures.firstChar]??0]=1;let c=new Array(Object.keys(Px).length+1).fill(0);return c[Px[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,o,s,c)}};function NGt(t,e){return new cxe(t.prefix,t.suffix,e)}a(NGt,"constructMultilineFeatures");function KYe(t,e){let r=NGt(t,e).constructFeatures();return GYe(r)[1]}a(KYe,"requestMultilineScore");f();f();f();f();async function*Dx(t,e){for await(let r of t)yield e(r)}a(Dx,"asyncIterableMap");async function*YYe(t,e){for await(let r of t)await e(r)&&(yield r)}a(YYe,"asyncIterableFilter");async function*v7(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}a(v7,"asyncIterableMapFilter");async function*JYe(...t){for(let e of t)yield*e}a(JYe,"asyncIterableConcat");f();async function WR(t,e,r,n){let o=zr.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments(n,o)}a(WR,"createTelemetryWithExpWithId");function tc(t,{turn:e,conversation:r}={},n){return WR(t,e?.telemetryId??"",r?.telemetryId??"",n)}a(tc,"createTelemetryWithExpWithTurn");function x7(t,e,r,n,o,s,c,l){let u=t.turns[t.turns.length-1].skills.map(m=>m.skillId).sort(),d={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:u.join(",")},p={promptTokenLen:n,messageCharLen:r};return o&&(d.suggestion=o),s&&(d.suggestionId=s),l.length>0&&(d.skillResolutionsJson=JSON.stringify(MGt(l))),c=c.extendedBy(d,p),c}a(x7,"extendUserMessageTelemetryData");function MGt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}a(MGt,"mapSkillResolutionsForTelemetry");function XYe(t,e,r,n,o,s,c){return n!=null&&(c=c.extendedBy({offTopic:n.toString()})),GX(t,s,e,r,{uiKind:e,headerRequestId:o},{},c).properties.messageId}a(XYe,"createUserMessageTelemetryData");function ZYe(t,e,r,n,o,s,c){let l=FGt(r);return GX(t.ctx,s,e,r,{source:"model",turnIndex:(t.conversation.turns.length-1).toString(),headerRequestId:o,uiKind:e,codeBlockLanguages:JSON.stringify(l),mode:(t.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:t.turn.getResolvedModelId()??"unknown"},{messageCharLen:r.length,numCodeBlocks:l.length,numTokens:n},c).properties.messageId}a(ZYe,"createModelMessageTelemetryData");function eJe(t,e,r,n,o,s,c){GX(t,s,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:o,uiKind:r},{messageCharLen:n.length},c)}a(eJe,"createOffTopicMessageTelemetryData");function tJe(t,e,r,n,o,s,c,l,u){let d=GX(t,l,r,n,{source:"suggestion",suggestion:s,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:c},{promptTokenLen:o,messageCharLen:n.length},u);return LGt(t,r,s,d.properties.messageId,d.properties.conversationId,c,u,l),d.properties.messageId}a(tJe,"createSuggestionMessageTelemetryData");var rJe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function nJe(t,e,r){let n=await tc(t.ctx,t),o=t.conversation.source==="inline"?"conversationInline":"conversationPanel";Bf(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:o},r,"index.codesearch",n)}a(nJe,"telemetryIndexCodesearch");function GX(t,e,r,n,o,s,c){let l=c??zr.createAndMarkAsIssued();if(!("messageId"in o)&&!("messageId"in l.properties)){let h=Ir();o.messageId=h}e&&(o.languageId=e.detectedLanguageId,s.documentLength=e.getText().length,s.documentLineCount=e.lineCount);let u={messageText:n,...o},d=l.extendedBy(o,s),p=l.extendedBy(u),m=pu(r);return Nt(t,`${m}.message`,d),Nt(t,`${m}.messageText`,p,1),d}a(GX,"telemetryMessage");function iJe(t,e,r,n){Bf(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}a(iJe,"createSuggestionShownTelemetryData");function LGt(t,e,r,n,o,s,c,l){Bf(t,l,{suggestion:r,messageId:n,conversationId:o,suggestionId:s,uiKind:e},{},"conversation.suggestionSelected",c)}a(LGt,"createSuggestionSelectedTelemetryData");function Bf(t,e,r,n,o,s){let c=s??zr.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let l=c.extendedBy(r,n);return Nt(t,o,l),l}a(Bf,"telemetryUserAction");function T3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Nt(t,"engine.messages",n,1)}a(T3,"logEngineMessages");function pu(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":case"agentPanel":case"editsPanel":default:return"conversation"}}a(pu,"telemetryPrefixForUiKind");function FGt(t){let e=t.split(`
`),r=[],n;for(let o=0;o<e.length;o++){let s=e[o];if(n)new RegExp(`^\\s*${n.delimiter}\\s*$`).test(s)?(r.push({languageId:n.languageId,totalLines:n.totalLines}),n=void 0):n.totalLines++;else{let c=s.match(/^(\s*)(`{3,}|~{3,})([a-zA-Z0-9_+]*)/);c&&(n={delimiter:c[2],languageId:c[3],totalLines:0})}}return r}a(FGt,"getCodeBlocks");function oJe(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}a(oJe,"uiKindToIntent");function GT(t){return t==="inline"?"conversationInline":"conversationPanel"}a(GT,"conversationSourceToUiKind");function sJe(t,e,r,n,o){let s={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},c={totalTimeMs:n};cJe(t,"round",o.extendedBy(s,c))}a(sJe,"createAgentRoundTelemetryData");function aJe(t,e,r,n,o,s,c,l){let u={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:o.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:c,uiKind:"agentPanel"},d={totalTimeMs:s};cJe(t,"toolCall",l.extendedBy(u,d))}a(aJe,"createToolInvocationTelemetryData");function cJe(t,e,r){return Nt(t,`${pu("agentPanel")}.${e}`,r)}a(cJe,"logAgenticEvent");function OGt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}a(OGt,"truncateContentIfNeeded");function VX(t,e,r,n,o,s,c){let l=`${pu(e)}.${c}`,u=s.extendedBy(r,n);Nt(t,l,u);let d={...r};o.currentFileContent!==void 0&&(d.completionTextJson=OGt(o.currentFileContent));let p=s.extendedBy(d,n);Nt(t,`${l}.restricted`,p,1)}a(VX,"telemetryEditSurvivalTracking");f();f();function FA(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}a(FA,"toString");var K0=new ft("streamChoices"),lxe=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new pxe;this.tool_calls=new dxe;this.function_call=new fxe;this.copilot_references=[];this.yielded=!1}static{a(this,"APIJsonDataStreaming")}append(e){e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0&&this.tool_calls.update(e.delta.tool_calls),e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function QGt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}a(QGt,"splitChunk");var uxe=class{constructor(){this.arguments=[]}static{a(this,"StreamingToolCall")}update(e){e.id&&(this.id=e.id),e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},dxe=class{constructor(){this.toolCalls=[]}static{a(this,"StreamingToolCalls")}update(e){e.forEach(r=>{let n=this.toolCalls.length>0?this.toolCalls[this.toolCalls.length-1]:void 0;(!n||r.id&&n.id!==r.id)&&(n=new uxe,this.toolCalls.push(n)),n.update(r)})}getToolCalls(){return this.toolCalls}},fxe=class{constructor(){this.arguments=[]}static{a(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},pxe=class{constructor(){this.current={}}static{a(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(o=>this.update_namespace(r,o))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],o=n.findIndex(s=>s.id===r.id);o>=0?n[o]=r:n.push(r)}for(e){return this.current[e]??[]}},VT=class t{constructor(e,r,n,o,s,c,l){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=o;this.telemetryData=s;this.dropCompletionReasons=c;this.cancellationToken=l;this.requestId=jR(this.response);this.stats=new mxe;this.solutions={}}static{a(this,"SSEProcessor")}static create(e,r,n,o,s,c){let l=n.body();if(l===null)throw new Error("No response body available");return typeof l.setEncoding=="function"?l.setEncoding("utf8"):l=l.pipeThrough(new TextDecoderStream),new t(e,r,n,l,o,s??[],c)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),K0.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),K0.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,o,s;e:for await(let c of this.body){if(this.maybeCancel("after awaiting body chunk"))return;K0.debug(this.ctx,"chunk",c.toString());let[l,u]=QGt(r+c.toString());r=u;for(let d of l){let p=d.slice(5).trim();if(p=="[DONE]"){yield*this.finishSolutions(n,o,s,e);return}n=null;let m;try{m=JSON.parse(p)}catch{K0.error(this.ctx,"Error parsing JSON stream data",d);continue}if(m.copilot_confirmation&&UGt(m.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:m.copilot_confirmation}),m.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:m.copilot_references}),m.choices===void 0){!m.copilot_references&&!m.copilot_confirmation&&(m.error!==void 0?K0.error(this.ctx,"Error in response:",m.error.message):K0.error(this.ctx,"Unexpected response with no choices or error: "+p)),m.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:m.copilot_errors});continue}if(o===void 0&&m.model&&(o=m.model),s===void 0&&m.usage&&(s=m.usage),this.allSolutionsDone()){r="";break e}for(let h=0;h<m.choices?.length;h++){let g=m.choices[h];K0.debug(this.ctx,"choice",g),this.stats.add(g.index),g.index in this.solutions||(this.solutions[g.index]=new lxe);let A=this.solutions[g.index];if(A==null)continue;A.append(g);let y=this.asSolutionDecision(),v=g.text?.indexOf(`
`)>-1||g.delta?.content?.indexOf(`
`)>-1;if(g.finish_reason||v){let I=A.text.join("");if(y=this.asSolutionDecision(await e(I,{text:I,index:g.index,requestId:this.requestId,annotations:A.copilot_annotations,copilotReferences:A.copilot_references,getAPIJsonData:a(()=>E7(A),"getAPIJsonData"),finished:!!g.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(g.finish_reason&&A.function_call.name!==void 0){n=g.finish_reason;continue}if(g.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let b=g.finish_reason??"client-trimmed";if(Nt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:b,engineName:o??"",engineChoiceSource:TT(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(g.finish_reason)?this.solutions[g.index]=null:A.yielded||(this.stats.markYielded(g.index),yield{solution:A,finishOffset:y.finishOffset,reason:g.finish_reason,requestId:this.requestId,index:g.index,model:o,usage:s},A.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[g.index]=null)}}}for(let[c,l]of Object.entries(this.solutions)){let u=Number(c);if(l!=null&&(Nt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:o??""})),this.stats.markYielded(u),yield{solution:l,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:u,model:o,usage:s},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let c=JSON.parse(r);c.error!==void 0&&K0.error(this.ctx,`Error in response: ${c.error.message}`,c.error)}catch{K0.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,o){for(let[s,c]of Object.entries(this.solutions)){let l=Number(s);if(c==null)continue;let u=c.text.join("");if(await o(u,{text:u,index:l,requestId:this.requestId,annotations:c.copilot_annotations,copilotReferences:c.copilot_references,getAPIJsonData:a(()=>E7(c),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!c.yielded&&(this.stats.markYielded(l),Nt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:c,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:l,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(K0.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function zX(t,e,r){let n=e.solution.text.join(""),o=!1;e.finishOffset!==void 0&&(K0.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),o=!0),K0.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),K0.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let s=E7(e.solution);return KX(t,n,s,e.index,e.requestId,o,r)}a(zX,"prepareSolutionForReturn");function E7(t){let e=t.text.join(""),r=qGt(t),n=HGt(t),o=t.copilot_annotations.current,s={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:o,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return s;let c=t.logprobs.reduce((p,m)=>p.concat(m),[]),l=t.top_logprobs.reduce((p,m)=>p.concat(m),[]),u=t.text_offset.reduce((p,m)=>p.concat(m),[]),d=t.tokens.reduce((p,m)=>p.concat(m),[]);return{...s,logprobs:{token_logprobs:c,top_logprobs:l,text_offset:u,tokens:d}}}a(E7,"convertToAPIJsonData");function UGt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}a(UGt,"isCopilotConfirmation");function lJe(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${FA(n)}. Input: '${t}'`)}}a(lJe,"parseCallArguments");function qGt(t){let e=[],r=t.tool_calls.getToolCalls();for(let n of r)if(n.name){let o=n.arguments.join("").trim(),s=lJe(o,"tool call",n.name);e.push({type:"function",function:{name:n.name,arguments:s},approxNumTokens:n.arguments.length+1,id:n.id})}return e}a(qGt,"extractToolCalls");function HGt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=lJe(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}a(HGt,"extractFunctionCall");var mxe=class{constructor(){this.choices=new Map}static{a(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new hxe,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},hxe=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{a(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function YX(t,e){return t!==null&&typeof t=="object"&&e in t}a(YX,"hasKey");function Nf(t,e){return YX(t,e)?t[e]:void 0}a(Nf,"getKey");var dJe=Ne(Ai());var rc=new ft("fetchCompletions");function jR(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}a(jR,"getRequestId");function w3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}a(w3,"getProcessingTime");function fJe(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}a(fJe,"uiKindToIntent");var Pp=class{static{a(this,"OpenAIFetcher")}};function $Gt(t,e,r,n){return Hm(t,e,"proxy","v1/engines",r,n)}a($Gt,"getProxyEngineUrl");function JX(t,e,r,n){for(let[o,s]of Object.entries(t)){if(r.includes(o))continue;let c=s;if(o==="extra"&&n){let l={...c};for(let u of n)delete l[u];c=l}e.properties[`request.option.${o}`]=JSON.stringify(c)??"undefined"}}a(JX,"sanitizeRequestOptionTelemetry");async function uJe(t,e,r,n,o,s,c,l,u,d,p){let m=t.get($o),h=$Gt(t,c,r,n),g=u.extendedBy({endpoint:n,engineName:r,uiKind:l},MD(e));JX(s,g,["prompt","suffix"],["context"]),g.properties.headerRequestId=o,Nt(t,"request.sent",g);let A=La(),y=fJe(l);return bx(t,h,c.token,y,o,s,d,p).then(v=>{let b=jR(v);g.extendWithRequestId(b);let I=La()-A;return g.measurements.totalTimeMs=I,rc.info(t,`Request ${o} at <${h}> finished with ${v.status} status after ${I}ms`),g.properties.status=String(v.status),rc.debug(t,"request.response properties",g.properties),rc.debug(t,"request.response measurements",g.measurements),rc.debug(t,"prompt:",e),Nt(t,"request.response",g),v}).catch(v=>{if(Sd(v))throw Nt(t,"request.cancel",g),v;m.setWarning(Nf(v,"message")??"");let b=g.extendedBy({error:"Network exception"});Nt(t,"request.shownWarning",b),g.properties.message=String(Nf(v,"name")??""),g.properties.code=String(Nf(v,"code")??""),g.properties.errno=String(Nf(v,"errno")??""),g.properties.type=String(Nf(v,"type")??"");let I=La()-A;throw g.measurements.totalTimeMs=I,rc.info(t,`Request ${o} at <${h}> rejected with ${String(v)} after ${I}ms`),rc.debug(t,"request.error properties",g.properties),rc.debug(t,"request.error measurements",g.measurements),Nt(t,"request.error",g),v}).finally(()=>{f9e(t,e,g)})}a(uJe,"fetchWithInstrumentation");async function WGt(t,e,r,n,o,s,c,l,u,d){let p=u.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:l});JX(s,p,["messages"]),p.properties.headerRequestId=o,Nt(t,"request.sent",p);let m=La(),h=fJe(l),g=fh(t);Lv()&&(g=await FB(t,g));try{let A=await bx(t,n,c.token,h,o,s,d,g),y=jR(A);p.extendWithRequestId(y);let v=La()-m;return p.measurements.totalTimeMs=v,rc.info(t,`Request ${o} at <${n}> finished with ${A.status} status after ${v}ms`),rc.debug(t,"request.response properties",p.properties),rc.debug(t,"request.response measurements",p.measurements),rc.debug(t,"messages:",JSON.stringify(e)),Nt(t,"request.response",p),A}catch(A){if(Sd(A))throw Nt(t,"request.cancel",p),A;let y=p.extendedBy({error:"Network exception"});Nt(t,"request.shownWarning",y),p.properties.message=String(Nf(A,"name")??""),p.properties.code=String(Nf(A,"code")??""),p.properties.errno=String(Nf(A,"errno")??""),p.properties.type=String(Nf(A,"type")??"");let v=La()-m;throw p.measurements.totalTimeMs=v,rc.info(t,`Request ${o} at <${n}> rejected with ${String(A)} after ${v}ms`),rc.debug(t,"request.error properties",p.properties),rc.debug(t,"request.error measurements",p.measurements),Nt(t,"request.error",p),A}finally{T3(t,e,p)}}a(WGt,"fetchChatWithInstrumentation");function gxe(t){return YYe(t,e=>e.completionText.trim().length>0)}a(gxe,"postProcessChoices");var jGt="github.copilot.completions.quotaExceeded",b7=class extends Pp{static{a(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,o,s){if(this.#e)return{type:"canceled",reason:this.#e};let c=e.get($o),l="completions",u=await e.get(cr).getToken(),d=await this.fetchWithParameters(e,l,r,u,n,s);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(s?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(A){rc.exception(e,A,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(l,e,r);return this.handleError(e,c,g,d,u)}let m=VT.create(e,r.count,d,n,[],s).processSSE(o),h=Dx(m,g=>zX(e,g,n));return{type:"success",choices:gxe(h),getProcessingTime:a(()=>w3(d),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,o,s,c,l,u={},d){if(this.#e)return{type:"canceled",reason:this.#e};let p="https://copilot-proxy.githubusercontent.com/chat/completions",m={messages:r,model:l.id,stream:!0,...u},h=n.extendedBy({endpoint:p,model:l.name}),g=e.get($o),A=await e.get(cr).getToken(),y=await WGt(e,r,l.id,p,s,m,A,o,h,d);if(d?.isCancellationRequested){let S=y.body();try{S&&"destroy"in S&&typeof S.destroy=="function"?S.destroy():S instanceof ReadableStream&&S.cancel()}catch(k){rc.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let S=zr.createAndMarkAsIssued({endpoint:p,engineName:l.name,uiKind:o,headerRequestId:s});return this.handleError(e,g,S,y,A)}let b=VT.create(e,1,y,h,[],dJe.CancellationToken.None).processSSE(),I=Dx(b,S=>zX(e,S,n));return{type:"success",choices:gxe(I),getProcessingTime:a(()=>w3(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,o,s){if(this.#e)return{type:"canceled",reason:this.#e};let c=e.get($o),l="speculation",u=await e.get(cr).getToken(),d={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:Ir(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},p=await this.fetchSpeculationWithParameters(e,l,d,u,n,s);if(p==="not-sent")return{type:"canceled",reason:"before fetch request"};if(s?.isCancellationRequested){let A=p.body();try{A&&"destroy"in A&&typeof A.destroy=="function"?A.destroy():A instanceof ReadableStream&&A.cancel()}catch(y){rc.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(p.status!==200){let A=this.createTelemetryData(l,e,d);return this.handleError(e,c,A,p,u)}let h=VT.create(e,1,p,n,[],s).processSSE(o),g=Dx(h,A=>zX(e,A,n));return{type:"success",choices:gxe(g),getProcessingTime:a(()=>w3(p),"getProcessingTime")}}createTelemetryData(e,r,n){return zr.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,o,s,c){let l={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await KC(0),c?.isCancellationRequested?"not-sent":await uJe(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,o,n.uiKind,s,c,n.headers)}async fetchWithParameters(e,r,n,o,s,c){let l=e.get(Lt).disableLogProb(s),u={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:ZX(e),temperature:_3(e,n.count),top_p:XX(e),n:n.count,stop:pJe(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!l)&&(u.logprobs=2);let d=Ex(n.repoInfo);return d!==void 0&&(u.nwo=d),n.postOptions&&Object.assign(u,n.postOptions),n.prompt.context&&(u.extra.context=n.prompt.context),await KC(0),c?.isCancellationRequested?"not-sent":await uJe(e,n.prompt,n.engineModelId,r,n.ourRequestId,u,o,n.uiKind,s,c,n.headers)}async handleError(e,r,n,o,s){let c=await o.text();if(o.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:jGt,title:"Learn More"});let u=Pa(e,d=>{this.#e=void 0,(d.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),u.dispose())});return{type:"failed",reason:this.#e}}if(o.status===466)return r.setError(c),rc.info(e,c),{type:"failed",reason:`client not supported: ${c}`};if(o.clientError&&!o.headers.get("x-github-request-id")){let l=`Last response was a ${o.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;rc.error(e,l),r.setWarning(l),n.properties.error=`Response status was ${o.status} with no x-github-request-id header`}else o.clientError?(rc.warn(e,`Response status was ${o.status}:`,c),r.setWarning(`Last response was a ${o.status} error: ${c}`),n.properties.error=`Response status was ${o.status}: ${c}`):(r.setWarning(`Last response was a ${o.status} error`),n.properties.error=`Response status was ${o.status}`);return n.properties.status=String(o.status),Nt(e,"request.shownWarning",n),o.status===401||o.status===403?(e.get(cr).resetToken(o.status),{type:"failed",reason:`token expired or invalid: ${o.status}`}):o.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",rc.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):o.status===499?(rc.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(rc.error(e,"Unhandled status from server:",o.status,c),{type:"failed",reason:`unhandled status from server: ${o.status} ${c}`})}};function KX(t,e,r,n,o,s,c){return d9e(t,e,r,o,n),{completionText:e,meanLogProb:GGt(t,r),meanAlternativeLogProb:VGt(t,r),choiceIndex:n,requestId:o,blockFinished:s,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:c,copilotAnnotations:r.copilot_annotations,clientCompletionId:Ir(),finishReason:r.finish_reason}}a(KX,"convertToAPIChoice");function GGt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,o=50;for(let s=0;s<e.logprobs.token_logprobs.length-1&&o>0;s++,o--)r+=e.logprobs.token_logprobs[s],n+=1;return n>0?r/n:void 0}catch(r){pn.exception(t,r,"Error calculating mean prob")}}a(GGt,"calculateMeanLogProb");function VGt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,o=50;for(let s=0;s<e.logprobs.token_logprobs.length-1&&o>0;s++,o--){let c={...e.logprobs.top_logprobs[s]};delete c[e.logprobs.tokens[s]],r+=Math.max(...Object.values(c)),n+=1}return n>0?r/n:void 0}catch(r){pn.exception(t,r,"Error calculating mean prob")}}a(VGt,"calculateMeanAlternativeLogProb");function _3(t,e){return Xg(t)||e<=1?0:e<10?.2:e<20?.4:.8}a(_3,"getTemperatureForSamples");var zGt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function pJe(t,e){return zGt[e??""]??[`


`,"\n```"]}a(pJe,"getStops");function XX(t){return 1}a(XX,"getTopP");function ZX(t){return RO}a(ZX,"getMaxSolutionTokens");var Axe=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{a(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},eZ=class{constructor(e,r,n,o,s,c){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=o;this.trimmerLookahead=s;this.cacheFunction=c;this.lineLimit=3;this.completions=new Map}static{a(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,o=this.getCompletion(n,e);if(o.isFirstCompletion&&this.initialSingleLine&&o.firstNewlineOffset>=0){let s={yieldSolution:!0,continueStreaming:!0,finishOffset:o.firstNewlineOffset};return o.trimAt(s.finishOffset),r.finished&&await this.trimAll(r,o),s}return r.finished?await this.trimAll(r,o):await this.trimOnce(r,o)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new Axe(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,o;do n=await this.trim(r),r.isFirstCompletion?(o=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return o!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:o}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new NY(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let o=r.trimAt(n??r.effectiveText.length);if(o.effectiveText.trim()==="")return;let s=KX(this.ctx,o.effectiveText.trimEnd(),e.getAPIJsonData(),o.index,e.requestId,n!==void 0,e.telemetryData);s.copilotAnnotations=this.adjustedAnnotations(s,r,o),s.generatedChoiceIndex=o.trimCount,this.cacheFunction(o.addedToPrefix,s)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let o=n.addedToPrefix.length,c=o+e.completionText.length>=r.text.length,l={};for(let[u,d]of Object.entries(e.copilotAnnotations)){let p=d.filter(m=>m.start_offset-o<e.completionText.length&&m.stop_offset-o>0).map(m=>{let h={...m};return h.start_offset-=o,h.stop_offset-=o,c||(h.stop_offset=Math.min(h.stop_offset,e.completionText.length)),h});p.length>0&&(l[u]=p)}return Object.keys(l).length>0?l:void 0}};f();f();var Nh=class{constructor(){this.cache=new Sr(100)}static{a(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var tZ=new ft("getCompletions");function rZ(t,e,r){t.get(Nh).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=S3(r.resultType),Nt(t,`${e}.shown`,r.telemetry)}a(rZ,"telemetryShown");function mJe(t,e,r){let n=e+".accepted";Nt(t,n,r)}a(mJe,"telemetryAccepted");function hJe(t,e,r){let n=e+".rejected";Nt(t,n,r)}a(hJe,"telemetryRejected");function zT(t,e={}){return{...e,telemetryBlob:t}}a(zT,"mkCanceledResultTelemetry");function mc(t,e){let r={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};t.properties.sku!==void 0&&(r.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(r.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(r.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(r.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(r.clientCompletionId=t.properties.clientCompletionId);let n=t.filtersAndExp.exp.assignmentContext;if(e){let s=e.get(Zg).inlineCompletionsUnificationState.expAssignments.filter(c=>!n.includes(c));n=[n,...s].filter(Boolean).join(";")}return r["abexp.assignmentcontext"]=n,r}a(mc,"mkBasicResultTelemetry");function gJe(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=La()-e.telemetryBlob.issuedTime,n=S3(e.resultType),o=JSON.stringify(e.performanceMetrics),s={...e.telemetryData,reason:n,performanceMetrics:o},{foundOffset:c}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([u,d])=>`
${d.toFixed(2)}	${u}`).join("")??"";return tZ.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${c}${l}`),Ome(t,"ghostText.produced",s,{timeToProduceMs:r,foundOffset:c}),e.value}if(tZ.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Nt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}Ome(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}a(gJe,"handleGhostTextResultTelemetry");function S3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}a(S3,"resultTypeToString");f();f();f();async function KGt(t){if(t.isCancellationRequested)return;let e=new Bh,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}a(KGt,"cancellationTokenToPromise");async function AJe(t,e){if(e){let r=KGt(e);await Promise.race([t,r])}else await t}a(AJe,"raceCancellation");function yxe(t){return Array.isArray(t)}a(yxe,"isArrayOfT");async function yJe(t,e){let r=new Map,n=[];for(let[o,s]of t.entries()){let c=(async()=>{let l=await CJe(s,e);r.set(o,l)})();n.push(c)}return await Promise.allSettled(n.values()),r}a(yJe,"resolveAll");async function CJe(t,e){let r;return t instanceof Promise?r=await YGt(t,e):r=await JGt(t,e),r}a(CJe,"resolve");async function YGt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},o=(async()=>{try{let s=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:yxe(s)?[...s]:[s]}}catch(s){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:s}}})();return await AJe(o,e),n.resolutionTime=performance.now()-r,n}a(YGt,"resolvePromise");async function JGt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},o=(async()=>{try{for await(let s of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(s)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(s){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:s}}})();return await AJe(o,e),n.resolutionTime=performance.now()-r,n}a(JGt,"resolveIterable");f();var XGt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},ZGt="ms-vscode.cpptools",eVt="CppCompletionContextProvider";function vJe(t,e,r,n){(e.includes(eVt)||e.length===1&&e[0]==="*")&&EJe(t,r,n)}a(vJe,"fillInCppVSActiveExperiments");function xJe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(ZGt))&&EJe(t,r,n)}a(xJe,"fillInCppVSCodeActiveExperiments");function EJe(t,e,r){try{let n=XGt,o=t.get(Lt).cppContextProviderParams(r);if(o)try{n=JSON.parse(o)}catch(s){pn.error(t,"Failed to parse cppContextProviderParams",s)}for(let[s,c]of Object.entries(n))e.set(s,c)}catch(n){pn.exception(t,n,"fillInCppActiveExperiments")}}a(EJe,"addActiveExperiments");f();function nZ(t,e,r){try{let n=t.get(Lt).csharpContextProviderParams(r);if(n){let o=JSON.parse(n);for(let[s,c]of Object.entries(o))e.set(s,c)}}catch(n){return pn.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}a(nZ,"fillInCSharpActiveExperiments");f();var KT="fallbackContextProvider",iZ={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function bJe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(KT))&&tVt(t,r,n)}a(bJe,"fillInMultiLanguageActiveExperiments");function tVt(t,e,r){try{let n=rVt(t,r);for(let[o,s]of Object.entries(n))e.set(o,s)}catch(n){pn.exception(t,n,"fillInMultiLanguageActiveExperiments")}}a(tVt,"addActiveExperiments");function rVt(t,e){let r=iZ,n=t.get(Lt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(o){pn.error(t,"Failed to parse multiLanguageContextProviderParams",o)}return r}a(rVt,"getMultiLanguageContextProviderParamsFromExp");function IJe(t){let e={...iZ};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}a(IJe,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var nVt="typescript-ai-context-provider";function TJe(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(nVt)))return!1;try{let o=t.get(Lt).tsContextProviderParams(n);if(o){let s=JSON.parse(o);for(let[c,l]of Object.entries(s))r.set(c,l)}}catch(o){return pn.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",o),!1}return!0}a(TJe,"fillInTsActiveExperiments");f();var wJe=E.Object({importance:E.Optional(E.Integer({minimum:0,maximum:100})),id:E.Optional(E.String()),origin:E.Optional(E.Union([E.Literal("request"),E.Literal("update")]))}),_Je=E.Intersect([E.Object({name:E.String(),value:E.String()}),wJe]),SJe=E.Intersect([E.Object({uri:E.String(),value:E.String(),additionalUris:E.Optional(E.Array(E.String()))}),wJe]),iVt=[_Je,SJe],oVt=E.Union(iVt),sVt=new Map([["Trait",na.Compile(_Je)],["CodeSnippet",na.Compile(SJe)]]),aVt=a(t=>t,"ensureTypesAreEqual");aVt(!0);var cVt=E.Object({contextItems:E.Array(oVt)}),lVt=E.Object({selector:E.Array(E.Union([E.String(),E.Object({language:E.Optional(E.String()),scheme:E.Optional(E.String()),pattern:E.Optional(E.String())})]))}),Cxe=E.Object({id:E.String()}),uVt=E.Intersect([Cxe,lVt]),dVt=E.Intersect([Cxe,cVt]),RJe=E.Object({providers:E.Array(uVt)}),kJe=E.Object({providers:E.Array(Cxe)}),vxe=E.Object({providers:E.Array(dVt),updating:E.Optional(E.Array(E.String()))}),oZ=E.Intersect([Xze,E.Object({contextItems:E.Optional(vxe)})]);function sZ(t,e){return t.map(r=>{let n=r.data.filter(o=>o.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}a(sZ,"filterContextItemsByType");function PJe(t){let e=[],r=0;return t.forEach(n=>{let o=!1;for(let[s,c]of sVt.entries())if(c.Check(n)){e.push({...n,type:s}),o=!0;break}o||r++}),[e,r]}a(PJe,"filterSupportedContextItems");function fVt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}a(fVt,"validateContextItemId");function DJe(t,e){let r=new Set,n=[];for(let o of e){let s=o.id??Ir();if(!fVt(s)){let c=Ir();pn.error(t,`Invalid context item ID ${s}, replacing with ${c}`),s=c}if(r.has(s)){let c=Ir();pn.error(t,`Duplicate context item ID ${s}, replacing with ${c}`),s=c}r.add(s),n.push({...o,id:s})}return n}a(DJe,"addOrValidateContextItemsIDs");f();var pl=class{constructor(e=()=>new xxe){this.createStatistics=e;this.statistics=new Sr(25)}static{a(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let o=r[n];if(o!==e)return this.statistics.peek(o)}}},xxe=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{a(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let o=this._lastResolution.get(r)??"none";if(o==="none"||o==="error"){this._statistics.set(r,{usage:"none",resolution:o});continue}let s=[];for(let[d,p]of n){let m={id:d.id,type:d.type};if(d.origin&&(m.origin=d.origin),p==="content_excluded"){s.push({...m,usage:"none_content_excluded"});continue}let h=e.find(g=>g.source===d);h===void 0?s.push({...m,usage:"error"}):s.push({...m,usage:h.expectedTokens>0&&h.expectedTokens===h.actualTokens?"full":h.actualTokens>0?"partial":"none",expectedTokens:h.expectedTokens,actualTokens:h.actualTokens})}let l=s.reduce((d,p)=>p.usage==="full"?d+1:p.usage==="partial"?d+.5:d,0)/n.length,u=l===1?"full":l===0?"none":"partial";this._statistics.set(r,{resolution:o,usage:u,usageDetails:s})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function aZ(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}a(aZ,"componentStatisticsToPromptMatcher");var BJe=Ne(Ai());var Wc=class{static{a(this,"ContextProviderRegistry")}},YC=class{static{a(this,"DefaultContextProviders")}},k3=class extends YC{constructor(){super();this.ids=[]}static{a(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},Exe=class extends Wc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{a(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,o,s,c,l){if(c?.isCancellationRequested)return pn.debug(this.ctx,"Resolving context providers cancelled"),[];let u=new Map;nZ(this.ctx,u,s);let d=[];if(this._providers.length===0)return d;let p=await this.matchProviders(o,s),m=p.filter(k=>k[1]>0);if(p.filter(k=>k[1]<=0).forEach(([k,N])=>{let F={providerId:k.id,matchScore:N,resolution:"none",resolutionTimeMs:0,data:[]};d.push(F)}),m.length===0)return d;if(c?.isCancellationRequested)return pn.debug(this.ctx,"Resolving context providers cancelled"),[];xJe(this.ctx,m.map(k=>k[0].id),u,s),bJe(this.ctx,m.map(k=>k[0].id),u,s),TJe(this.ctx,m.map(k=>k[0].id),u,s);let g=new BJe.CancellationTokenSource;if(c){let k=c.onCancellationRequested(N=>{g.cancel(),k.dispose()})}let A=jF(this.ctx)&&!Dj(this.ctx)?0:pVt(this.ctx,s),y=A>0?Date.now()+A:Number.MAX_SAFE_INTEGER,v;A>0&&(v=setTimeout(()=>{g.cancel(),g.dispose()},A));let b=new Map,I={completionId:r,opportunityId:n,documentContext:o,activeExperiments:u,timeBudget:A,timeoutEnd:y,data:l};for(let[k]of m){let N=this.ctx.get(pl).getPreviousStatisticsForCompletion(r)?.get(k.id);N&&(I.previousUsageStatistics=N);let F=k.resolver.resolve(I,g.token);b.set(k.id,F)}let S=await yJe(b,g.token);v&&clearTimeout(v);for(let[k,N]of m){let F=S.get(k.id);if(F){if(F.status==="error")FY(F.reason)||pn.error(this.ctx,`Error resolving context from ${k.id}: `,F.reason),d.push({providerId:k.id,matchScore:N,resolution:F.status,resolutionTimeMs:F.resolutionTime,data:[]});else{let O=[...F.value??[]];if((F.status==="none"||F.status==="partial")&&(pn.info(this.ctx,`Context provider ${k.id} exceeded time budget of ${A}ms`),k.resolver.resolveOnTimeout))try{let H=k.resolver.resolveOnTimeout(I);yxe(H)?O.push(...H):H&&O.push(H),O.length>0&&(F.status="partial")}catch(H){pn.error(this.ctx,`Error in fallback logic for context provider ${k.id}: `,H)}let[Y,z]=PJe(O);z&&pn.error(this.ctx,`Dropped ${z} context items from ${k.id} due to invalid schema`);let V=DJe(this.ctx,Y),U={providerId:k.id,matchScore:N,resolution:F.status,resolutionTimeMs:F.resolutionTime,data:V};d.push(U)}this.ctx.get(pl).getStatisticsForCompletion(r).setLastResolution(k.id,F.status)}else pn.error(this.ctx,`Context provider ${k.id} not found in results`)}return d.sort((k,N)=>N.matchScore-k.matchScore)}async matchProviders(r,n){let o=dZ(this.ctx,n),s=o.length===1&&o[0]==="*";return await Promise.all(this._providers.map(async l=>{if(!s&&!o.includes(l.id))return[l,0];let u=await this.match(this.ctx,l.selector,r);return[l,u]}))}},bxe=class extends Wc{constructor(r){super();this.delegate=r;this._cachedContextItems=new Sr(5)}static{a(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,o,s,c,l){let u=this._cachedContextItems.get(r);if(r&&u&&u.length>0)return u;let d=await this.delegate.resolveAllProviders(r,n,o,s,c,l);return d.length>0&&r&&this._cachedContextItems.set(r,d),d}};function cZ(t,e){return new bxe(new Exe(t,e))}a(cZ,"getContextProviderRegistry");function lZ(t,e,r){let n=t.get(pl).getStatisticsForCompletion(e);return r.map(s=>{let{providerId:c,resolution:l,resolutionTimeMs:u,matchScore:d,data:p}=s,m=n.get(c),h=m?.usage??"none";(d<=0||l==="none"||l==="error")&&(h="none");let g={providerId:c,resolution:l,resolutionTimeMs:u,usage:h,usageDetails:m?.usageDetails,matched:d>0,numResolvedItems:p.length},A=m?.usageDetails!==void 0?m?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,y=m?.usageDetails!==void 0?m?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return A!==void 0&&(g.numUsedItems=A),y!==void 0&&(g.numPartiallyUsedItems=y),g})}a(lZ,"telemetrizeContextItems");function uZ(t){return t.matchScore>0&&t.resolution!=="error"}a(uZ,"matchContextItems");function dZ(t,e){let r=Ixe(t,e),n=Bi(t,qt.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let o=t.get(YC).getIds();return Array.from(new Set([...o,...r,...n]))}a(dZ,"getActiveContextProviders");function Ixe(t,e){return jF(t)?["*"]:t.get(Lt).contextProviders(e)}a(Ixe,"getExpContextProviders");function P3(t,e){return dZ(t,e).length>0}a(P3,"useContextProviderAPI");function pVt(t,e){let r=Bi(t,qt.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Lt).contextProviderTimeBudget(e)}a(pVt,"getContextProviderTimeBudget");var Dp=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Sr(25)}static{a(this,"ContextProviderBridge")}schedule(e,r,n,o,s,c){let l=this.ctx.get(Wc),{textDocument:u,originalPosition:d,originalOffset:p,originalVersion:m,editsWithPosition:h}=e,g=l.resolveAllProviders(r,n,{uri:u.uri,languageId:u.detectedLanguageId,version:m,offset:p,position:d,proposedEdits:h.length>0?h:void 0},o,s,c?.data);this.scheduledResolutions.set(r,g)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};f();f();var fZ=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{a(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let o=await _T(this.languageId,e);try{let c=o.rootNode.descendantForIndex(r);for(;c;){let l=this.nodeMatch[c.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(c.type))break;let u=this.nodeTypesWithBlockOrStmtChild.get(c.type);if((u==""?c.namedChildren[0]:c.childForFieldName(u))?.type==l)break}c=c.parent}return c?n(c):void 0}finally{o.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,o=>{let s=o.children.reverse().find(c=>c.type==this.nodeMatch[o.type]);if(s){if(this.languageId=="python"&&s.parent){let c=s.parent.type==":"?s.parent.parent:s.parent,l=c?.nextSibling;for(;l&&l.type=="comment";){let u=l.startPosition.row==s.endPosition.row&&l.startPosition.column>=s.endPosition.column,d=l.startPosition.row>c.endPosition.row&&l.startPosition.column>c.startPosition.column;if(u||d)s=l,l=l.nextSibling;else break}}if(!(s.endIndex>=s.tree.rootNode.endIndex-1&&(s.hasError||s.parent.hasError)))return n(s)}})}async isBlockBodyFinished(e,r,n){let o=(e+r).trimEnd(),s=await this.getNextBlockAtPosition(o,n,c=>c.endIndex);if(s!==void 0&&s<o.length){let c=s-e.length;return c>0?c:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,o=>o.startIndex)}},pZ=class extends fZ{constructor(r,n,o,s,c){super(r,s,c);this.blockEmptyMatch=n;this.lineMatch=o}static{a(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let o=await this.getNextBlockAtPosition(r,n,s=>{s.startIndex<n&&(n=s.startIndex);let c=r.substring(n,s.endIndex).trim();return c==""||c.replace(/\s/g,"")==this.blockEmptyMatch});return o===void 0||o}async isEmptyBlockStart(r,n){return n=MJe(r,n),this.isBlockStart(mVt(r,n))&&this.isBlockBodyEmpty(r,n)}};function mVt(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}a(mVt,"getLineAtOffset");function MJe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}a(MJe,"rewindToNearestNonWs");function NJe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,o=e.substring(n,r);if(/^\s*$/.test(o))return o}a(NJe,"indent");function hVt(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=NJe(t,r),o=NJe(e,r);return n!==void 0&&o!==void 0&&n.startsWith(o)}a(hVt,"outdented");var JC=class extends fZ{constructor(r,n,o,s,c,l,u){super(r,n,o);this.startKeywords=s;this.blockNodeType=c;this.emptyStatementType=l;this.curlyBraceLanguage=u}static{a(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let o=r.text.trim();return this.curlyBraceLanguage&&(o.startsWith("{")&&(o=o.slice(1)),o.endsWith("}")&&(o=o.slice(0,-1)),o=o.trim()),!!(o.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&Mje(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let c=n;c<r.length&&r.charAt(c)!=`
`;c++)if(/\S/.test(r.charAt(c)))return!1;n=MJe(r,n);let[o,s]=await BCe(this.languageId,r);try{let c=o.rootNode.descendantForIndex(n-1);if(c==null||this.curlyBraceLanguage&&c.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&c.parent&&c.parent.type=="object"&&c.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let m=c;for(;m.parent;){if(m.type=="function_signature"||m.type=="method_signature"){let h=c.nextSibling;return h&&m.hasError&&hVt(m,h,r)?!0:!m.children.find(A=>A.type==";")&&m.endIndex<=n}m=m.parent}}let l=null,u=null,d=null,p=c;for(;p!=null;){if(p.type==this.blockNodeType){u=p;break}if(this.nodeMatch[p.type]){d=p;break}if(p.type=="ERROR"){l=p;break}p=p.parent}if(u!=null){if(!u.parent||!this.nodeMatch[u.parent.type])return!1;if(this.languageId=="python"){let m=u.previousSibling;if(m!=null&&m.hasError&&(m.text.startsWith('"""')||m.text.startsWith("'''")))return!0}return this.isBlockEmpty(u,n)}if(l!=null){if(l.previousSibling?.type=="module"||l.previousSibling?.type=="internal_module"||l.previousSibling?.type=="def")return!0;if(this.languageId==="python"&&s>=14&&l.hasError&&(l.text.startsWith('"')||l.text.startsWith("'"))){let A=l.parent?.type;if(A==="function_definition"||A==="class_definition"||A==="module")return!0}let m=[...l.children].reverse(),h=m.find(A=>this.startKeywords.includes(A.type)),g=m.find(A=>A.type==this.blockNodeType);if(h){switch(this.languageId){case"python":{h.type=="try"&&c.type=="identifier"&&c.text.length>4&&(g=m.find(v=>v.hasError)?.children.find(v=>v.type=="block"));let A,y=0;for(let v of l.children){if(v.type==":"&&y==0){A=v;break}v.type=="("&&(y+=1),v.type==")"&&(y-=1)}if(A&&h.endIndex<=A.startIndex&&A.nextSibling){if(h.type=="def"){let v=A.nextSibling;if(v.type=='"'||v.type=="'"||v.type=="ERROR"&&(v.text=='"""'||v.text=="'''"))return!0}return!1}break}case"javascript":{if(h.type==="class")if(s<=13){if(m.find(b=>b.type==="formal_parameters"))return!0}else{let v=l.children;for(let b=0;b<v.length;b++)if(v[b].type==="formal_parameters")return b+1===v.length||v[b+1]?.type==="{"&&b+2===v.length}let A=m.find(v=>v.type=="{");if(A&&A.startIndex>h.endIndex&&A.nextSibling!=null||m.find(v=>v.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}case"typescript":{let A=m.find(v=>v.type=="{");if(A&&A.startIndex>h.endIndex&&A.nextSibling!=null||m.find(v=>v.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}}return g&&g.startIndex>h.endIndex?this.isBlockEmpty(g,n):!0}}if(d!=null){let m=this.nodeMatch[d.type],h=d.children.slice().reverse().find(g=>g.type==m);if(h)return this.isBlockEmpty(h,n);if(this.nodeTypesWithBlockOrStmtChild.has(d.type)){let g=this.nodeTypesWithBlockOrStmtChild.get(d.type),A=g==""?d.children[0]:d.childForFieldName(g);if(A&&A.type!=this.blockNodeType&&A.type!=this.emptyStatementType)return!1}return!0}return!1}finally{o.delete()}}},gVt={python:new JC("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new JC("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_expression:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new JC("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_expression:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new JC("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_expression:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new pZ("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new pZ("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),"c-sharp":new JC("csharp",{},new Map([]),[],"block",null,!0),java:new JC("java",{},new Map([]),[],"block",null,!0),php:new JC("php",{},new Map([]),[],"block",null,!0),cpp:new JC("cpp",{},new Map([]),[],"block",null,!0)};function Txe(t){if(!q0(t))throw new Error(`Language ${t} is not supported`);return gVt[DY(t)]}a(Txe,"getBlockParser");async function LJe(t,e,r){return q0(t)?Txe(t).isEmptyBlockStart(e,r):!1}a(LJe,"isEmptyBlockStart");async function FJe(t,e,r,n){if(q0(t))return Txe(t).isBlockBodyFinished(e,r,n)}a(FJe,"isBlockBodyFinished");async function OJe(t,e,r){if(q0(t))return Txe(t).getNodeStart(e,r)}a(OJe,"getNodeStart");var Tzn=new ft("parseBlock");function I7(t,e,r){let n=e.getText(Is.range(Is.position(0,0),r)),o=e.offsetAt(r),s=e.detectedLanguageId;return c=>FJe(s,n,c,o)}a(I7,"parsingBlockFinished");function hZ(t,e){return LJe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}a(hZ,"isEmptyBlockStartUtil");async function QJe(t,e,r,n){let s=e.getText(Is.range(Is.position(0,0),r))+n,c=await OJe(e.detectedLanguageId,s,e.offsetAt(r));if(c)return e.positionAt(c)}a(QJe,"getNodeStartUtil");var AVt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),yVt=new RegExp(`^(${AVt.join("|")})`);function CVt(t){return yVt.test(t.trimLeft().toLowerCase())}a(CVt,"isContinuationLine");function mZ(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}a(mZ,"indentationOfLine");function gZ(t,e){let r=t.getText(),n=t.offsetAt(e);return wxe(r,n,t.detectedLanguageId)}a(gZ,"contextIndentation");function wxe(t,e,r){let n=t.slice(0,e).split(`
`),o=t.slice(e).split(`
`);function s(p,m,h){let g=m,A,y;for(;A===void 0&&g>=0&&g<p.length;)A=mZ(p[g]),y=g,g+=h;if(r==="python"&&h===-1){g++;let v=p[g].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(g--;g>=0&&!p[g].trim().startsWith('"""');)g--;if(g>=0)for(A=void 0,g--;A===void 0&&g>=0;)A=mZ(p[g]),y=g,g--}}return[A,y]}a(s,"seekNonBlank");let[c,l]=s(n,n.length-1,-1),u=(()=>{if(!(c===void 0||l===void 0))for(let p=l-1;p>=0;p--){let m=mZ(n[p]);if(m!==void 0&&m<c)return m}})(),[d]=s(o,1,1);return{prev:u,current:c??0,next:d}}a(wxe,"contextIndentationFromText");var vVt=!1;function xVt(t,e,r){let n=t.split(`
`),o=r!==void 0,s=r?.split(`
`).pop(),c=0;if(o&&s?.trim()!=""&&n[0].trim()!==""&&c++,!o&&vVt&&n[0].trim()===""&&c++,o||c++,n.length===c)return"continue";let l=Math.max(e.current,e.next??0);for(let u=c;u<n.length;u++){let d=n[u];u==0&&s!==void 0&&(d=s+d);let p=mZ(d);if(p!==void 0&&(p<l||p===l&&!CVt(d)))return n.slice(0,u).join(`
`).length}return"continue"}a(xVt,"completionCutOrContinue");function UJe(t,e){return r=>{let n=xVt(r,t,e);return n==="continue"?void 0:n}}a(UJe,"indentationBlockFinished");f();f();f();f();f();f();var EVt={tokenizerName:"o200k_base"};function bVt(t){return{...EVt,...t}}a(bVt,"cursorContextOptions");function T7(t,e={}){let r=bVt(e),n=Oi(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let o=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(o=o.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(o=n.takeLastLinesTokens(o,r.maxTokenLength)),{context:o,lineCount:o.split(`
`).length,tokenLength:n.tokenLength(o),tokenizerName:r.tokenizerName}}a(T7,"getCursorContext");f();f();var IVt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function qJe(t){let e=IVt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}a(qJe,"announceSnippet");var _xe=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{a(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var Sxe=class{static{a(this,"Tokenizer")}constructor(e){this.stopsForLanguage=SVt.get(e.languageId)??_Vt}tokenize(e){return new Set(TVt(e).filter(r=>!this.stopsForLanguage.has(r)))}},HJe=new _xe(20),D3=class{static{a(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Sxe(e)}get referenceTokens(){return Promise.resolve(this.createReferenceTokens())}createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,o)=>n.score>o.score?1:-1):r=="descending"?e.sort((n,o)=>n.score>o.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let o=e.source.split(`
`),s=this.id()+":"+e.source,c=HJe.get(s)??[],l=c.length==0,u=l?o.map(d=>this.tokenizer.tokenize(d),this.tokenizer):[];for(let[d,[p,m]]of this.getWindowsDelineations(o).entries()){if(l){let A=new Set;u.slice(p,m).forEach(y=>y.forEach(v=>A.add(v),A)),c.push(A)}let h=c[d],g=this.similarityScore(h,await this.referenceTokens);if(n.length&&p>0&&n[n.length-1].endLine>p){n[n.length-1].score<g&&(n[n.length-1].score=g,n[n.length-1].startLine=p,n[n.length-1].endLine=m);continue}n.push({score:g,startLine:p,endLine:m})}return l&&HJe.put(s,c),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),o=await this.retrieveAllSnippets(e,"descending");if(o.length===0)return[];let s=[];for(let c=0;c<o.length&&c<r;c++)if(o[c].score!==0){let l=n.slice(o[c].startLine,o[c].endLine).join(`
`);s.push({snippet:l,semantics:"snippet",provider:"similar-files",...o[c]})}return s}};function TVt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}a(TVt,"splitIntoWords");var wVt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),_Vt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...wVt]),SVt=new Map([]);f();function AZ(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let o=0;o<n-t+1;o++)r.push([o,o+t]);return r}a(AZ,"getBasicWindowDelineations");var yZ=class t extends D3{static{a(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=a(e=>({to:a(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return AZ(this.windowLength,e)}_getCursorContextInfo(e){return T7(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return RVt(e,r)}};function RVt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}a(RVt,"computeScore");f();var CZ=class t extends D3{static{a(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=a(e=>({to:a(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return AZ(this.windowLength,e)}_getCursorContextInfo(e){return T7(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):T7(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return kVt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await _T(this.referenceDoc.languageId,e);let o=n.rootNode.namedDescendantForIndex(r);for(;o&&!(t.isMember(o)||t.isBlock(o));)o=o.parent??void 0;return o}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function kVt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}a(kVt,"computeScore");var PVt=0,DVt=60,BVt=4,NVt=1,MVt=20,LVt=1e4,$Je={snippetLength:DVt,threshold:PVt,maxTopSnippets:BVt,maxCharPerFile:LVt,maxNumberOfFiles:MVt,maxSnippetsPerFile:NVt,useSubsetMatching:!1};var Rxe={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function FVt(t,e){return(e.useSubsetMatching?CZ.FACTORY(e.snippetLength):yZ.FACTORY(e.snippetLength)).to(t)}a(FVt,"getMatcher");async function WJe(t,e,r){let n=FVt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(s=>s.source.length<r.maxCharPerFile&&s.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(s,c)=>(await s).concat((await n.findMatches(c,r.maxSnippetsPerFile)).map(l=>({relativePath:c.relativePath,...l}))),Promise.resolve([]))).filter(s=>s.score&&s.snippet&&s.score>r.threshold).sort((s,c)=>s.score-c.score).slice(-r.maxTopSnippets)}a(WJe,"getSimilarSnippets");function jJe(t,e){return{...Rxe,useSubsetMatching:kxe(t,e)}}a(jJe,"getCppSimilarFilesOptions");function GJe(t){return Rxe.maxTopSnippets}a(GJe,"getCppNumberOfSnippets");var OVt=new Map([["cpp",jJe]]);function vZ(t,e,r){let n=OVt.get(r);return n?n(t,e):{...$Je,useSubsetMatching:kxe(t,e)}}a(vZ,"getSimilarFilesOptions");var QVt=new Map([["cpp",GJe]]);function VJe(t,e){let r=QVt.get(e);return r?r(t):Pje}a(VJe,"getNumberOfSnippets");function kxe(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Bi(t,qt.UseSubsetMatching))??!1}a(kxe,"useSubsetMatching");f();f();f();f();var UVt="content_excluded";async function xZ(t,e,r,n){let o=sZ(r,"CodeSnippet");if(o.length===0)return[];let s=new Set,c=o.flatMap(p=>p.data.map(m=>(s.add(m.uri),m.additionalUris?.forEach(h=>s.add(h)),{providerId:p.providerId,data:m}))),l=t.get(fr),u=new Map;await Promise.all(Array.from(s).map(async p=>{u.set(p,await l.getTextDocumentValidation({uri:p}))}));let d=t.get(pl).getStatisticsForCompletion(e);return c.filter(p=>{let h=[p.data.uri,...p.data.additionalUris??[]].every(g=>u.get(g)?.status==="valid");return h?d.addExpectations(p.providerId,[[p.data,"included"]]):d.addExpectations(p.providerId,[[p.data,UVt]]),h}).map(p=>p.data)}a(xZ,"getCodeSnippetsFromContextItems");function zJe(t,e){let r=t.get(fr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}a(zJe,"addRelativePathToCodeSnippets");f();function hc(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}a(hc,"Text");function YT(t){return t.children}a(YT,"Chunk");f();function en(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let o={...e,children:n};return r&&(o.key=r),{type:t,props:o}}a(en,"functionComponentFunction");function OA(t){return{type:"f",children:t}}a(OA,"fragmentFunction");OA.isFragmentFunction=!0;var EZ=a((t,e)=>{let[r,n]=e.useState(),[o,s]=e.useState();if(e.useData(Bp,d=>{d.codeSnippets!==r&&n(d.codeSnippets),d.document.uri!==o?.uri&&s(d.document)}),!r||r.length===0||!o)return;let c=zJe(t.ctx,r),l=new Map;for(let d of c){let p=d.relativePath??d.snippet.uri,m=l.get(p);m===void 0&&(m=[],l.set(p,m)),m.push(d)}let u=[];for(let[d,p]of l.entries()){let m=p.filter(h=>h.snippet.value.length>0);m.length>0&&u.push({chunkElements:m.map(h=>h.snippet),importance:Math.max(...m.map(h=>h.snippet.importance??0)),uri:d})}if(u.length!==0)return u.sort((d,p)=>p.importance-d.importance),u.reverse(),u.map(d=>{let p=[];return p.push(en(hc,{children:`Compare ${d.chunkElements.length>1?"these snippets":"this snippet"} from ${d.uri}:`})),d.chunkElements.forEach((m,h)=>{p.push(en(hc,{source:m,children:m.value},m.id)),d.chunkElements.length>1&&h<d.chunkElements.length-1&&p.push(en(hc,{children:"---"}))}),en(YT,{children:p})})},"CodeSnippets");f();function Pxe(t){return t.children}a(Pxe,"CompletionsContext");function Dxe(t){return t.children}a(Dxe,"StableCompletionsContext");function Bxe(t){return t.children}a(Bxe,"AdditionalCompletionsContext");function bZ(t){return t.name===Pxe.name||t.name===Dxe.name||t.name===Bxe.name}a(bZ,"isContextNode");f();f();f();function IZ(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let o=0;o<t.length;o++)r[o][n]=Math.min((o==0?n:r[o-1][n])+1,(n==0?o:r[o][n-1])+1,(o==0||n==0?Math.max(o,n):r[o-1][n-1])+(t[o]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}a(IZ,"findEditDistanceScore");var w7=50;function Nxe(t){let e=t*4,r=t*.1;return Math.floor(e+r)}a(Nxe,"approximateMaxCharacters");function _7(t,e){let[r,n]=e.useState(),[o,s]=e.useState(),[c,l]=e.useState(0),[u,d]=e.useState(),[p,m]=e.useState();e.useData(Bp,g=>{let A=g.document;(g.document.uri!==r?.uri||A.getText()!==r?.getText())&&n(A),g.position!==o&&s(g.position),g.suffixMatchThreshold!==u&&d(g.suffixMatchThreshold),g.maxPromptTokens!==c&&l(g.maxPromptTokens),g.tokenizer!==p&&m(g.tokenizer)});let h=Nxe(c);return en(OA,{children:[en(GR,{document:r,position:o,maxCharacters:h}),en(TZ,{document:r,position:o,suffixMatchThreshold:u,maxCharacters:h,tokenizer:p})]})}a(_7,"CurrentFile");function GR(t){if(t.document===void 0||t.position===void 0)return en(hc,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),en(hc,{children:e})}a(GR,"BeforeCursor");function TZ(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return en(hc,{});let o=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});o.length>t.maxCharacters&&(o=o.slice(0,t.maxCharacters));let s=o.replace(/^.*/,"").trimStart();if(s==="")return en(hc,{});if(r===s)return en(hc,{children:r});let c=s;if(r!==""){let l=Oi(t.tokenizer),u=l.takeFirstTokens(s,w7);u.tokens.length>0&&100*IZ(u.tokens,l.takeFirstTokens(r,w7).tokens)?.score<(t.suffixMatchThreshold??RY)*u.tokens.length&&(c=r)}return c!==r&&n(c),en(hc,{children:c})}a(TZ,"AfterCursor");function KJe(t,e){let[r,n]=e.useState(),[o,s]=e.useState(),[c,l]=e.useState(0);e.useData(Bp,d=>{let p=d.document;(d.document.uri!==r?.uri||p.getText()!==r?.getText())&&n(p),d.position!==o&&s(d.position),d.maxPromptTokens!==c&&l(d.maxPromptTokens)});let u=Nxe(c);return en(GR,{document:r,position:o,maxCharacters:u})}a(KJe,"DocumentPrefix");function YJe(t,e){let[r,n]=e.useState(),[o,s]=e.useState(),[c,l]=e.useState(0),[u,d]=e.useState(),[p,m]=e.useState();e.useData(Bp,g=>{let A=g.document;(g.document.uri!==r?.uri||A.getText()!==r?.getText())&&n(A),g.position!==o&&s(g.position),g.suffixMatchThreshold!==u&&d(g.suffixMatchThreshold),g.maxPromptTokens!==c&&l(g.maxPromptTokens),g.tokenizer!==p&&m(g.tokenizer)});let h=Nxe(c);return en(TZ,{document:r,position:o,suffixMatchThreshold:u,maxCharacters:h,tokenizer:p})}a(YJe,"DocumentSuffix");f();var wZ=class{static{a(this,"WishlistElision")}elide(e,r,n,o,s){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[c,l]=this.preparePrefixBlocks(e,s),{elidedSuffix:u,adjustedPrefixTokenLimit:d}=this.elideSuffix(n,o,r,l,s),p=this.elidePrefix(c,d,l,s);return{blocks:[u,...p],cycles:1}}preparePrefixBlocks(e,r){let n=0,o=new Set;return[e.map((c,l)=>{let u=0,p=c.value.split(/([^\n]*\n+)/).filter(h=>h!=="").map(h=>{let g=r.tokenLength(h);return u+=g,n+=g,{line:h,componentPath:c.componentPath,tokens:g}}),m=c.componentPath;if(o.has(m))throw new Error(`Duplicate component path in prefix blocks: ${m}`);return o.add(m),{...c,tokens:u,markedForRemoval:!1,originalIndex:l,lines:p}}),n]}elideSuffix(e,r,n,o,s){let c=e.value;if(c.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};o<n&&(r=r+(n-o),n=o);let l=s.takeFirstTokens(c,r);return{elidedSuffix:{...e,value:c,tokens:s.tokenLength(c),elidedValue:l.text,elidedTokens:l.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-l.tokens.length)}}elidePrefix(e,r,n,o){let s=this.removeLowWeightPrefixBlocks(e,r,n),c=s.filter(p=>!p.markedForRemoval).flatMap(p=>p.lines);if(c.length===0)return[];let[l,u]=this.trimPrefixLinesToFit(c,r,o),d=u;return s.map(p=>{if(p.markedForRemoval)return d+p.tokens<=r&&!p.chunks?(d+=p.tokens,{...p,elidedValue:p.value,elidedTokens:p.tokens}):{...p,elidedValue:"",elidedTokens:0};let m=l.filter(g=>g.componentPath===p.componentPath&&g.line!=="").map(g=>g.line).join(""),h=p.tokens;return m!==p.value&&(h=m!==""?o.tokenLength(m):0),{...p,elidedValue:m,elidedTokens:h}})}removeLowWeightPrefixBlocks(e,r,n){let o=n;e.sort((s,c)=>s.weight-c.weight);for(let s of e){if(o<=r)break;if(s.weight!==1&&!(s.chunks&&s.markedForRemoval))if(s.chunks&&s.chunks.size>0)for(let c of e)!c.markedForRemoval&&c.chunks&&[...s.chunks].every(l=>c.chunks?.has(l))&&(c.markedForRemoval=!0,o-=c.tokens);else s.markedForRemoval=!0,o-=s.tokens}return e.sort((s,c)=>s.originalIndex-c.originalIndex)}trimPrefixLinesToFit(e,r,n){let o=0,s=[];for(let c=e.length-1;c>=0;c--){let l=e[c],u=l.tokens;if(o+u<=r)s.unshift(l),o+=u;else break}if(s.length===0){let c=e[e.length-1];if(c&&c.line.length>0){let u=n.takeLastTokens(c.line,r);return s.push({line:u.text,componentPath:c.componentPath,tokens:u.tokens.length}),[s,u.tokens.length]}let l=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(l)}return[s,o]}};function JJe(t){return t.map(e=>e.elidedValue).join("")}a(JJe,"makePrompt");function XJe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}a(XJe,"makePrefixPrompt");function ZJe(t){if(t.length===0)return[];let e=new Map;for(let o of t)if(o.type==="context"&&o.index!==void 0){e.has(o.index)||e.set(o.index,[]);let s=o.elidedValue.trim();s.length>0&&e.get(o.index).push(s)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let o=0;o<=r;o++){let s=e.get(o);if(s&&s.length>0){let c=s.join(`
`).trim();n.push(c)}else n.push("")}return n}a(ZJe,"makeContextPrompt");f();var B3=class{constructor(e,r=Mxe()){this.snapshot=e;this.transformers=r}static{a(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,o){let s=this.transformers.reduce((l,u)=>u(e,r,l),{...o});if(n(e,r,s))for(let l of e.children??[])this.walkSnapshotNode(l,e,n,s)}};function Mxe(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,o=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:o*r.weight}},(t,e,r)=>{if(t.name===YT.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}a(Mxe,"defaultTransformers");f();var S7={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Lxe={};for(let[t,e]of Object.entries(S7))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)Lxe[r]=t;else Lxe[t]=t;function tXe(t){return Lxe[t]}a(tXe,"mdCodeBlockLangToLanguageId");var qVt={start:"//",end:""},HVt=["php","plaintext"],Fxe={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function rXe(t){return Object.values(Fxe).includes(t.trim())}a(rXe,"isShebangLine");function $Vt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}a($Vt,"hasLanguageMarker");function WVt(t,e){let r=S7[e]?S7[e].lineComment:qVt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}a(WVt,"comment");function XC(t,e){if(t==="")return"";let r=t.endsWith(`
`),o=(r?t.slice(0,-1):t).split(`
`).map(s=>WVt(s,e)).join(`
`);return r?o+`
`:o}a(XC,"commentBlockAsSingles");function _Z(t){let{languageId:e}=t;return HVt.indexOf(e)===-1&&!$Vt(t)?e in Fxe?Fxe[e]:`Language: ${e}`:""}a(_Z,"getLanguageMarker");function SZ(t){return t.relativePath?`Path: ${t.relativePath}`:""}a(SZ,"getPathMarker");function R7(t){return t===""||t.endsWith(`
`)?t:t+`
`}a(R7,"newLineEnded");function nXe(t){return eXe(typeof t=="string"?t:"plaintext")}a(nXe,"getLanguage");function eXe(t){return S7[t]!==void 0?{languageId:t,...S7[t]}:{languageId:t,lineComment:{start:"//",end:""}}}a(eXe,"_getLanguage");var jVt=5,N3=class{constructor(){this.renderId=0;this.formatPrefix=JJe}static{a(this,"CompletionsPromptRenderer")}render(e,r,n){let o=this.renderId++,s=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let c=r.delimiter??"",l=r.tokenizer??"o200k_base",{prefixBlocks:u,suffixBlock:d,componentStatistics:p}=this.processSnapshot(e,c,r.languageId),{prefixTokenLimit:m,suffixTokenLimit:h}=this.getPromptLimits(d,r),g=performance.now(),A=new wZ,{blocks:[y,...v]}=A.elide(u,m,d,h,Oi(l)),b=performance.now(),I=this.formatPrefix(v),S=this.formatContext?this.formatContext(v):void 0,k=y.elidedValue,N=v.reduce((F,O)=>F+O.elidedTokens,0);return p.push(...GVt([...v,y])),{prefix:I,prefixTokens:N,suffix:k,suffixTokens:y.elidedTokens,context:S,status:"ok",metadata:{renderId:o,rendererName:"c",tokenizer:l,elisionTimeMs:b-g,renderTimeMs:performance.now()-s,componentStatistics:p,updateDataTimeMs:p.reduce((F,O)=>F+(O.updateDataTimeMs??0),0)}}}catch(c){return{status:"error",error:c}}}getPromptLimits(e,r){let n=e?.value??"",o=r.promptTokenLimit,s=r.suffixPercent;if(n.length==0||s==0)return{prefixTokenLimit:o,suffixTokenLimit:0};o=n.length>0?o-jVt:o;let c=Math.ceil(o*(s/100));return{prefixTokenLimit:o-c,suffixTokenLimit:c}}processSnapshot(e,r,n){let o=[],s=[],c=[],l=!1;if(new B3(e,Oxe).walkSnapshot((p,m,h)=>{if(p===e||(p.name===_7.name&&(l=!0),p.statistics.updateDataTimeMs&&p.statistics.updateDataTimeMs>0&&c.push({componentPath:p.path,updateDataTimeMs:p.statistics.updateDataTimeMs}),p.value===void 0||p.value===""))return!0;let g=h.chunks;if(h.type==="suffix")s.push({value:k7(p.value),type:"suffix",weight:h.weight,componentPath:p.path,nodeStatistics:p.statistics,chunks:g,source:h.source});else{let A=p.value.endsWith(r)?p.value:p.value+r,y=A;h.type==="prefix"?y=p.value:rXe(p.value)?y=A:y=XC(A,n),o.push({type:h.type==="prefix"?"prefix":"context",value:k7(y),weight:h.weight,componentPath:p.path,nodeStatistics:p.statistics,chunks:g,source:h.source})}return!0}),!l)throw new Error(`Node of type ${_7.name} not found`);if(s.length>1)throw new Error("Only one suffix is allowed");let d=s.length===1?s[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:o,suffixBlock:d,componentStatistics:c}}},Oxe=[...Mxe(),(t,e,r)=>bZ(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===GR.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===TZ.name?{...r,type:"suffix"}:r];function GVt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}a(GVt,"computeComponentStatistics");function k7(t){return t.replace(/\r\n?/g,`
`)}a(k7,"normalizeLineEndings");f();var RZ=a((t,e)=>{let[r,n]=e.useState();if(e.useData(Bp,o=>{o.document.uri!==r?.uri&&n(o.document)}),r){let o=t.ctx.get(fr),s=o.getRelativePath(r),c={uri:r.uri,source:r.getText(),relativePath:s,languageId:r.detectedLanguageId},l=o.findNotebook(r);return c.relativePath&&!l?en(VVt,{docInfo:c}):en(zVt,{docInfo:c})}},"DocumentMarker"),VVt=a(t=>en(hc,{children:SZ(t.docInfo)}),"PathMarker"),zVt=a(t=>en(hc,{children:_Z(t.docInfo)}),"LanguageMarker");f();f();f();f();function P7(t,e="Unreachable"){throw new Error(e)}a(P7,"assertNever");function Ql(t,e="unexpected state"){if(!t)throw new bn(`Assertion Failed: ${e}`)}a(Ql,"assert");function QA(t){if(!t()){debugger;t(),f3(new bn("Assertion Failed"))}}a(QA,"assertFn");function Bx(t,e){let r=0;for(;r<t.length-1;){let n=t[r],o=t[r+1];if(!e(n,o))return!1;r++}return!0}a(Bx,"checkAdjacentItems");f();f();f();f();f();var Nx=a((t,e)=>t===e,"strictEquals");f();f();var da=class t{static{a(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},D7=class{constructor(){this._first=da.Undefined;this._last=da.Undefined;this._size=0}static{a(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===da.Undefined}clear(){let e=this._first;for(;e!==da.Undefined;){let r=e.next;e.prev=da.Undefined,e.next=da.Undefined,e=r}this._first=da.Undefined,this._last=da.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new da(e);if(this._first===da.Undefined)this._first=n,this._last=n;else if(r){let s=this._last;this._last=n,n.prev=s,s.next=n}else{let s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let o=!1;return()=>{o||(o=!0,this._remove(n))}}shift(){if(this._first!==da.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==da.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==da.Undefined&&e.next!==da.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===da.Undefined&&e.next===da.Undefined?(this._first=da.Undefined,this._last=da.Undefined):e.next===da.Undefined?(this._last=this._last.prev,this._last.next=da.Undefined):e.prev===da.Undefined&&(this._first=this._first.next,this._first.prev=da.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==da.Undefined;)yield e.element,e=e.next}};f();var KVt=globalThis.performance&&typeof globalThis.performance.now=="function",M3=class t{static{a(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=KVt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var iXe=!1,YVt=!1,VR;(J=>{J.None=a(()=>Ps.None,"None");function e(G){if(YVt){let{onDidAddListener:j}=G,Z=B7.create(),ie=0;G.onDidAddListener=()=>{++ie===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Z.print()),j?.()}}}a(e,"_addLeakageTraceLogic");function r(G,j){return g(G,()=>{},0,void 0,!0,void 0,j)}J.defer=r,a(r,"defer");function n(G){return(j,Z=null,ie)=>{let ne=!1,re;return re=G(fe=>{if(!ne)return re?re.dispose():ne=!0,j.call(Z,fe)},null,ie),ne&&re.dispose(),re}}J.once=n,a(n,"once");function o(G,j){return J.once(J.filter(G,j))}J.onceIf=o,a(o,"onceIf");function s(G,j,Z){return m((ie,ne=null,re)=>G(fe=>ie.call(ne,j(fe)),null,re),Z)}J.map=s,a(s,"map");function c(G,j,Z){return m((ie,ne=null,re)=>G(fe=>{j(fe),ie.call(ne,fe)},null,re),Z)}J.forEach=c,a(c,"forEach");function l(G,j,Z){return m((ie,ne=null,re)=>G(fe=>j(fe)&&ie.call(ne,fe),null,re),Z)}J.filter=l,a(l,"filter");function u(G){return G}J.signal=u,a(u,"signal");function d(...G){return(j,Z=null,ie)=>{let ne=Wze(...G.map(re=>re(fe=>j.call(Z,fe))));return h(ne,ie)}}J.any=d,a(d,"any");function p(G,j,Z,ie){let ne=Z;return s(G,re=>(ne=j(ne,re),ne),ie)}J.reduce=p,a(p,"reduce");function m(G,j){let Z,ie={onWillAddFirstListener(){Z=G(ne.fire,ne)},onDidRemoveLastListener(){Z?.dispose()}};j||e(ie);let ne=new Y0(ie);return j?.add(ne),ne.event}a(m,"snapshot");function h(G,j){return j instanceof Array?j.push(G):j&&j.add(G),G}a(h,"addAndReturnDisposable");function g(G,j,Z=100,ie=!1,ne=!1,re,fe){let ye,Qe,we,Xe=0,Oe,ut={leakWarningThreshold:re,onWillAddFirstListener(){ye=G(Et=>{Xe++,Qe=j(Qe,Et),ie&&!we&&(Rt.fire(Qe),Qe=void 0),Oe=a(()=>{let At=Qe;Qe=void 0,we=void 0,(!ie||Xe>1)&&Rt.fire(At),Xe=0},"doFire"),typeof Z=="number"?(clearTimeout(we),we=setTimeout(Oe,Z)):we===void 0&&(we=0,queueMicrotask(Oe))})},onWillRemoveListener(){ne&&Xe>0&&Oe?.()},onDidRemoveLastListener(){Oe=void 0,ye.dispose()}};fe||e(ut);let Rt=new Y0(ut);return fe?.add(Rt),Rt.event}J.debounce=g,a(g,"debounce");function A(G,j=0,Z){return J.debounce(G,(ie,ne)=>ie?(ie.push(ne),ie):[ne],j,void 0,!0,void 0,Z)}J.accumulate=A,a(A,"accumulate");function y(G,j=(ie,ne)=>ie===ne,Z){let ie=!0,ne;return l(G,re=>{let fe=ie||!j(re,ne);return ie=!1,ne=re,fe},Z)}J.latch=y,a(y,"latch");function v(G,j,Z){return[J.filter(G,j,Z),J.filter(G,ie=>!j(ie),Z)]}J.split=v,a(v,"split");function b(G,j=!1,Z=[],ie){let ne=Z.slice(),re=G(Qe=>{ne?ne.push(Qe):ye.fire(Qe)});ie&&ie.add(re);let fe=a(()=>{ne?.forEach(Qe=>ye.fire(Qe)),ne=null},"flush"),ye=new Y0({onWillAddFirstListener(){re||(re=G(Qe=>ye.fire(Qe)),ie&&ie.add(re))},onDidAddFirstListener(){ne&&(j?setTimeout(fe):fe())},onDidRemoveLastListener(){re&&re.dispose(),re=null}});return ie&&ie.add(ye),ye.event}J.buffer=b,a(b,"buffer");function I(G,j){return a((ie,ne,re)=>{let fe=j(new k);return G(function(ye){let Qe=fe.evaluate(ye);Qe!==S&&ie.call(ne,Qe)},void 0,re)},"fn")}J.chain=I,a(I,"chain");let S=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{a(this,"ChainableSynthesis")}map(j){return this.steps.push(j),this}forEach(j){return this.steps.push(Z=>(j(Z),Z)),this}filter(j){return this.steps.push(Z=>j(Z)?Z:S),this}reduce(j,Z){let ie=Z;return this.steps.push(ne=>(ie=j(ie,ne),ie)),this}latch(j=(Z,ie)=>Z===ie){let Z=!0,ie;return this.steps.push(ne=>{let re=Z||!j(ne,ie);return Z=!1,ie=ne,re?ne:S}),this}evaluate(j){for(let Z of this.steps)if(j=Z(j),j===S)break;return j}}function N(G,j,Z=ie=>ie){let ie=a((...ye)=>fe.fire(Z(...ye)),"fn"),ne=a(()=>G.on(j,ie),"onFirstListenerAdd"),re=a(()=>G.removeListener(j,ie),"onLastListenerRemove"),fe=new Y0({onWillAddFirstListener:ne,onDidRemoveLastListener:re});return fe.event}J.fromNodeEventEmitter=N,a(N,"fromNodeEventEmitter");function F(G,j,Z=ie=>ie){let ie=a((...ye)=>fe.fire(Z(...ye)),"fn"),ne=a(()=>G.addEventListener(j,ie),"onFirstListenerAdd"),re=a(()=>G.removeEventListener(j,ie),"onLastListenerRemove"),fe=new Y0({onWillAddFirstListener:ne,onDidRemoveLastListener:re});return fe.event}J.fromDOMEventEmitter=F,a(F,"fromDOMEventEmitter");function O(G,j){return new Promise(Z=>n(G)(Z,null,j))}J.toPromise=O,a(O,"toPromise");function Y(G){let j=new Y0;return G.then(Z=>{j.fire(Z)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}J.fromPromise=Y,a(Y,"fromPromise");function z(G,j){return G(Z=>j.fire(Z))}J.forward=z,a(z,"forward");function V(G,j,Z){return j(Z),G(ie=>j(ie))}J.runAndSubscribe=V,a(V,"runAndSubscribe");class U{constructor(j,Z){this._observable=j;this._counter=0;this._hasChanged=!1;let ie={onWillAddFirstListener:a(()=>{j.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:a(()=>{j.removeObserver(this)},"onDidRemoveLastListener")};Z||e(ie),this.emitter=new Y0(ie),Z&&Z.add(this.emitter)}static{a(this,"EmitterObserver")}beginUpdate(j){this._counter++}handlePossibleChange(j){}handleChange(j,Z){this._hasChanged=!0}endUpdate(j){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function H(G,j){return new U(G,j).emitter.event}J.fromObservable=H,a(H,"fromObservable");function ee(G){return(j,Z,ie)=>{let ne=0,re=!1,fe={beginUpdate(){ne++},endUpdate(){ne--,ne===0&&(G.reportChanges(),re&&(re=!1,j.call(Z)))},handlePossibleChange(){},handleChange(){re=!0}};G.addObserver(fe),G.reportChanges();let ye={dispose(){G.removeObserver(fe)}};return ie instanceof id?ie.add(ye):Array.isArray(ie)&&ie.push(ye),ye}}J.fromObservableLight=ee,a(ee,"fromObservableLight")})(VR||={});var Qxe=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{a(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new M3,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},oXe=-1;var Uxe=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{a(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[s,c]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${c}):`;console.warn(l),console.warn(s);let u=new qxe(l,s);this._errorHandler(u)}return()=>{let s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,o]of this._stacks)(!e||r<o)&&(e=[n,o],r=o);return e}},B7=class t{constructor(e){this.value=e}static{a(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},qxe=class extends Error{static{a(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},Hxe=class extends Error{static{a(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},JVt=0,L3=class{constructor(e){this.value=e;this.id=JVt++}static{a(this,"UniqueContainer")}},XVt=2,ZVt=a((t,e)=>{if(t instanceof L3)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),Y0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=oXe>0||this._options?.leakWarningThreshold?new Uxe(e?.onListenerError??f3,this._options?.leakWarningThreshold??oXe):void 0,this._perfMon=this._options?._profName?new Qxe(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{a(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(iXe){let e=this._listeners;queueMicrotask(()=>{ZVt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let u=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(u);let d=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],p=new Hxe(`${u}. HINT: Stack shows most frequent listener (${d[1]}-times)`,d[0]);return(this._options?.onListenerError||f3)(p),Ps.None}if(this._disposed)return Ps.None;r&&(e=e.bind(r));let o=new L3(e),s,c;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(o.stack=B7.create(),s=this._leakageMon.check(o.stack,this._size+1)),iXe&&(o.stack=c??B7.create()),this._listeners?this._listeners instanceof L3?(this._deliveryQueue??=new $xe,this._listeners=[this._listeners,o]):this._listeners.push(o):(this._options?.onWillAddFirstListener?.(this),this._listeners=o,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let l=qc(()=>{s?.(),this._removeListener(o)});return n instanceof id?n.add(l):Array.isArray(n)&&n.push(l),l},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let o=this._deliveryQueue.current===this;if(this._size*XVt<=r.length){let s=0;for(let c=0;c<r.length;c++)r[c]?r[s++]=r[c]:o&&s<this._deliveryQueue.end&&(this._deliveryQueue.end--,s<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=s}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||f3;if(!n){e.value(r);return}try{e.value(r)}catch(o){n(o)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof L3)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var $xe=class{constructor(){this.i=-1;this.end=0}static{a(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};f();var Mf=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{a(this,"DebugNameData")}getDebugName(e){return lXe(e,this)}},sXe=new Map,Wxe=new WeakMap;function lXe(t,e){let r=Wxe.get(t);if(r)return r;let n=ezt(t,e);if(n){let o=sXe.get(n)??0;o++,sXe.set(n,o);let s=o===1?n:`${n}#${o}`;return Wxe.set(t,s),s}}a(lXe,"getDebugName");function ezt(t,e){let r=Wxe.get(t);if(r)return r;let n=e.owner?rzt(e.owner)+".":"",o,s=e.debugNameSource;if(s!==void 0)if(typeof s=="function"){if(o=s(),o!==void 0)return n+o}else return n+s;let c=e.referenceFn;if(c!==void 0&&(o=kZ(c),o!==void 0))return n+o;if(e.owner!==void 0){let l=tzt(e.owner,t);if(l!==void 0)return n+l}}a(ezt,"computeDebugName");function tzt(t,e){for(let r in t)if(t[r]===e)return r}a(tzt,"findKey");var aXe=new Map,cXe=new WeakMap;function rzt(t){let e=cXe.get(t);if(e)return e;let r=nzt(t),n=aXe.get(r)??0;n++,aXe.set(r,n);let o=n===1?r:`${r}#${n}`;return cXe.set(t,o),o}a(rzt,"formatOwner");function nzt(t){let e=t.constructor;return e?e.name:"Object"}a(nzt,"getClassName");function kZ(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}a(kZ,"getFunctionName");f();var zR;function DZ(t){zR?zR instanceof PZ?zR.loggers.push(t):zR=new PZ([zR,t]):zR=t}a(DZ,"addLogger");function Oa(){return zR}a(Oa,"getLogger");var jxe;function uXe(t){jxe=t}a(uXe,"setLogObservableFn");function dXe(t){jxe&&jxe(t)}a(dXe,"logObservable");var PZ=class{constructor(e){this.loggers=e}static{a(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let o of this.loggers)o.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let o of this.loggers)o.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var fXe;function pXe(t){fXe=t}a(pXe,"_setRecomputeInitiallyAndOnChange");var mXe;function hXe(t){mXe=t}a(hXe,"_setKeepObserved");var Gxe;function gXe(t){Gxe=t}a(gXe,"_setDerivedOpts");var BZ=class{static{a(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,o=r===void 0?e:r;return Gxe({owner:n,debugName:a(()=>{let s=kZ(o);if(s!==void 0)return s;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(o.toString());if(l)return`${this.debugName}.${l[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:o},s=>o(this.read(s),s))}flatten(){return Gxe({owner:void 0,debugName:a(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(fXe(this,r)),this}keepObserved(e){return e.add(mXe(this)),this}get debugValue(){return this.get()}},JT=class extends BZ{constructor(){super();this.observers=new Set;Oa()?.handleObservableCreated(this)}static{a(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&Oa()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&Oa()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!Oa();return dXe(this),r||Oa()?.handleObservableCreated(this),this}};function MZ(t,e){let r=new F3(t,e);try{t(r)}finally{r.finish()}}a(MZ,"transaction");function Vxe(t,e,r){t?e(t):MZ(e,r)}a(Vxe,"subtransaction");var F3=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];Oa()?.handleBeginTransaction(this)}static{a(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():kZ(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:o}=e[r];n.endUpdate(o)}this.updatingObservers=null,Oa()?.handleEndTransaction(this)}};function UA(t,e){let r;return typeof t=="string"?r=new Mf(void 0,t,void 0):r=new Mf(t,void 0,void 0),new NZ(r,e,Nx)}a(UA,"observableValue");var NZ=class extends JT{constructor(r,n,o){super();this._debugNameData=r;this._equalityComparator=o;this._value=n,Oa()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{a(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,o){if(o===void 0&&this._equalityComparator(this._value,r))return;let s;n||(n=s=new F3(()=>{},()=>`Setting ${this.debugName}`));try{let c=this._value;this._setValue(r),Oa()?.handleObservableUpdated(this,{oldValue:c,newValue:r,change:o,didChange:!0,hadValue:!0});for(let l of this.observers)n.updateObserver(l,this),l.handleChange(this,o)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};f();f();function KR(t){return new O3(new Mf(void 0,void 0,t),t,void 0,void 0)}a(KR,"autorun");function zxe(t,e){return new O3(new Mf(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}a(zxe,"autorunOpts");function LZ(t,e){return new O3(new Mf(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}a(LZ,"autorunHandleChanges");function Kxe(t,e){let r=new id,n=LZ({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(o,s)=>{r.clear(),e(o,s,r)});return qc(()=>{n.dispose(),r.dispose()})}a(Kxe,"autorunWithStoreHandleChanges");function Yxe(t){let e=new id,r=zxe({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return qc(()=>{r.dispose(),e.dispose()})}a(Yxe,"autorunWithStore");var O3=class{constructor(e,r,n,o){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=o;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Oa()?.handleAutorunCreated(this),this._runIfNeeded(),g3(this)}static{a(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Oa()?.handleAutorunDisposed(this),A3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Oa()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){OR(n)}finally{this._isRunning=!1}}}finally{this.disposed||Oa()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}QA(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){Oa()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:a(o=>o===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){OR(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new bn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=O3)(KR||={});f();function FZ(t,e){return new YR(new Mf(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??Nx)}a(FZ,"derivedOpts");gXe(FZ);var YR=class extends JT{constructor(r,n,o,s,c=void 0,l){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=o;this._handleChange=s;this._handleLastObserverRemoved=c;this._equalityComparator=l;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{a(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Oa()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,o=this.value;this.state=3;let s=!1;this._isComputing=!0;try{let c=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,c)}finally{this._isReaderValid=!1;for(let l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}s=n&&!this._equalityComparator(o,this.value),Oa()?.handleObservableUpdated(this,{oldValue:o,newValue:this.value,change:void 0,didChange:s,hadValue:n})}catch(c){OR(c)}if(this._isComputing=!1,s)for(let c of this.observers)c.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new bn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let o of this.observers)o.handlePossibleChange(this);if(n)for(let o of this.observers)o.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let o of n)o.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let o=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let s of o)s.endUpdate(this)}}QA(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){Oa()?.handleDerivedDependencyChanged(this,r,n);let o=!1;try{o=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:a(c=>c===r,"didChange")},this.changeSummary):!0}catch(c){OR(c)}let s=this.state===3;if(o&&(this.state===1||s)&&(this.state=2,s))for(let c of this.observers)c.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new bn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};f();f();function Jxe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new XT(new Mf(e,void 0,n),r,n,()=>XT.globalTransaction,Nx)}a(Jxe,"observableFromEvent");var XT=class extends JT{constructor(r,n,o,s,c){super();this._debugNameData=r;this.event=n;this._getValue=o;this._getTransaction=s;this._equalityComparator=c;this.hasValue=!1;this.handleEvent=a(r=>{let n=this._getValue(r),o=this.value,s=!this.hasValue||!this._equalityComparator(o,n),c=!1;s&&(this.value=n,this.hasValue&&(c=!0,Vxe(this._getTransaction(),l=>{Oa()?.handleObservableUpdated(this,{oldValue:o,newValue:n,change:void 0,didChange:s,hadValue:this.hasValue});for(let u of this.observers)l.updateObserver(u,this),u.handleChange(this,void 0)},()=>{let l=this.getDebugName();return"Event fired"+(l?`: ${l}`:"")})),this.hasValue=!0),c||Oa()?.handleObservableUpdated(this,{oldValue:o,newValue:n,change:void 0,didChange:s,hadValue:this.hasValue})},"handleEvent")}static{a(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=XT;function e(n,o){let s=!1;XT.globalTransaction===void 0&&(XT.globalTransaction=n,s=!0);try{o()}finally{s&&(XT.globalTransaction=void 0)}}r.batchEventsGlobally=e,a(e,"batchEventsGlobally")})(Jxe||={});function yXe(t){let e=new OZ(!1,void 0);return t.addObserver(e),qc(()=>{t.removeObserver(e)})}a(yXe,"keepObserved");hXe(yXe);function CXe(t,e){let r=new OZ(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),qc(()=>{t.removeObserver(r)})}a(CXe,"recomputeInitiallyAndOnChange");pXe(CXe);var OZ=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{a(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function Mh(t,e,r,n){let o=new QZ(r,n);return FZ({debugReferenceFn:r,owner:t,onLastObserverRemoved:a(()=>{o.dispose(),o=new QZ(r)},"onLastObserverRemoved")},c=>(o.setItems(e.read(c)),o.getItems()))}a(Mh,"mapObservableArrayCached");var QZ=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{a(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let o of e){let s=this._keySelector?this._keySelector(o):o,c=this._cache.get(s);if(c)n.delete(s);else{let l=new id;c={out:this._map(o,l),store:l},this._cache.set(s,c)}r.push(c.out)}for(let o of n)this._cache.get(o).store.dispose(),this._cache.delete(o);this._items=r}getItems(){return this._items}};function Xxe(t,e){let r;return Kxe({createEmptyChangeSummary:a(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:a((n,o)=>{if(n.didChange(t)){let s=n.change;s!==void 0&&o.deltas.push(s),o.didChange=!0}return!0},"handleChange")},(n,o)=>{let s=t.read(n),c=r;o.didChange&&(r=s,e(s,c,o.deltas))})}a(Xxe,"runOnChange");f();f();f();var vXe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),UZ;(n=>{function t(o){return o===n.None||o===n.Cancelled||o instanceof Q3?!0:!o||typeof o!="object"?!1:typeof o.isCancellationRequested=="boolean"&&typeof o.onCancellationRequested=="function"}n.isCancellationToken=t,a(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:VR.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:vXe})})(UZ||={});var Q3=class{constructor(){this._isCancelled=!1;this._emitter=null}static{a(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?vXe:(this._emitter||(this._emitter=new Y0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Mx=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{a(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new Q3),this._token}cancel(){this._token?this._token instanceof Q3&&this._token.cancel():this._token=UZ.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Q3&&this._token.dispose():this._token=UZ.None}};f();var qZ;function xXe(t){qZ||(qZ=new M7,DZ(qZ)),qZ.addFilteredObj(t)}a(xXe,"logObservableToConsole");var M7=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{a(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return izt([U3(azt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[U3(" "),Lh(N7(e.oldValue,70),{color:"red",strikeThrough:!0}),U3(" "),Lh(N7(e.newValue,60),{color:"green"})]:[U3(" (unchanged)")]:[U3(" "),Lh(N7(e.newValue,60),{color:"green"}),U3(" (initial)")]}handleObservableCreated(e){if(e instanceof YR){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let o=[];r.__debugUpdating=o;let s=r.beginUpdate;r.beginUpdate=l=>(o.push(l),s.apply(r,[l]));let c=r.endUpdate;r.endUpdate=l=>{let u=o.indexOf(l);return u===-1&&console.error("endUpdate called without beginUpdate",r.debugName,l.debugName),o.splice(u,1),c.apply(r,[l])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof YR){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([q3("observable value changed"),Lh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return Lh(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([q3("derived recomputed"),Lh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([q3("derived cleared"),Lh(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([q3("observable from event triggered"),Lh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([q3("autorun"),Lh(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([q3("transaction"),Lh(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function izt(t){let e=new Array,r=[],n="";function o(c){if("length"in c)for(let l of c)l&&o(l);else"text"in c?(n+=`%c${c.text}`,e.push(c.style),c.data&&r.push(...c.data)):"data"in c&&r.push(...c.data)}a(o,"process"),o(t);let s=[n,...e];return s.push(...r),s}a(izt,"consoleTextToArgs");function U3(t){return Lh(t,{color:"black"})}a(U3,"normalText");function q3(t){return Lh(czt(`${t}: `,10),{color:"black",bold:!0})}a(q3,"formatKind");function Lh(t,e={color:"black"}){function r(o){return Object.entries(o).reduce((s,[c,l])=>`${s}${c}:${l};`,"")}a(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}a(Lh,"styled");function N7(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?ozt(t,e):szt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}a(N7,"formatValue");function ozt(t,e){let r="[ ",n=!0;for(let o of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${N7(o,e-r.length)}`}return r+=" ]",r}a(ozt,"formatArray");function szt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let o=t.toString();return o.length<=e?o:o.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[o,s]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${o}: ${N7(s,e-r.length)}`}return r+=" }",r}a(szt,"formatObject");function azt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}a(azt,"repeat");function czt(t,e){for(;t.length<e;)t+=" ";return t}a(czt,"padStr");uXe(xXe);var lzt=!1;lzt&&DZ(new M7);f();var JR;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,a(e,"create")})(JR||={});f();f();f();function EXe(t){return t}a(EXe,"identity");var HZ=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=EXe):(this._fn=r,this._computeKey=e.getCacheKey)}static{a(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},Lx=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=EXe):(this._fn=r,this._computeKey=e.getCacheKey)}static{a(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};f();f();var Fh=class{constructor(e){this.executor=e;this._didRun=!1}static{a(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function XR(t){return t<0?0:t>4294967295?4294967295:t|0}a(XR,"toUint32");function $3(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}a($3,"escapeRegExpCharacters");function _Xe(t,e){if(!t||!e)return t;let r=e.length;if(r===0||t.length===0)return t;let n=0;for(;t.indexOf(e,n)===n;)n=n+r;return t.substring(n)}a(_Xe,"ltrim");function Oh(t){return t.split(/\r\n|\r|\n/)}a(Oh,"splitLines");function dzt(t,e,r=0,n=t.length,o=0,s=e.length){for(;r<n&&o<s;r++,o++){let u=t.charCodeAt(r),d=e.charCodeAt(o);if(u<d)return-1;if(u>d)return 1}let c=n-r,l=s-o;return c<l?-1:c>l?1:0}a(dzt,"compareSubstring");function fzt(t,e,r=0,n=t.length,o=0,s=e.length){for(;r<n&&o<s;r++,o++){let u=t.charCodeAt(r),d=e.charCodeAt(o);if(u===d)continue;if(u>=128||d>=128)return dzt(t.toLowerCase(),e.toLowerCase(),r,n,o,s);bXe(u)&&(u-=32),bXe(d)&&(d-=32);let p=u-d;if(p!==0)return p}let c=n-r,l=s-o;return c<l?-1:c>l?1:0}a(fzt,"compareSubstringIgnoreCase");function bXe(t){return t>=97&&t<=122}a(bXe,"isLowerAsciiLetter");function SXe(t,e){let r=e.length;return e.length>t.length?!1:fzt(t,e,0,r)===0}a(SXe,"startsWithIgnoreCase");function ZT(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}a(ZT,"commonPrefixLength");function Fx(t,e){let r=Math.min(t.length,e.length),n,o=t.length-1,s=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(o-n)!==e.charCodeAt(s-n))return n;return r}a(Fx,"commonSuffixLength");var pzt=/^[\t\n\r\x20-\x7E]*$/;function Zxe(t){return pzt.test(t)}a(Zxe,"isBasicASCII");var Wei=String.fromCharCode(65279);var IXe=class t{static{a(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=mzt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,o=1;for(;o<=n;)if(e<r[3*o])o=2*o;else if(e>r[3*o+1])o=2*o+1;else return r[3*o+2];return 0}};function mzt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}a(mzt,"getGraphemeBreakRawData");var TXe=class t{constructor(e){this.confusableDictionary=e}static{a(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Fh(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new HZ({getCacheKey:JSON.stringify},e=>{function r(p){let m=new Map;for(let h=0;h<p.length;h+=2)m.set(p[h],p[h+1]);return m}a(r,"arrayToMap");function n(p,m){let h=new Map(p);for(let[g,A]of m)h.set(g,A);return h}a(n,"mergeMaps");function o(p,m){if(!p)return m;let h=new Map;for(let[g,A]of p)m.has(g)&&h.set(g,A);return h}a(o,"intersectMaps");let s=this.ambiguousCharacterData.value,c=e.filter(p=>!p.startsWith("_")&&p in s);c.length===0&&(c=["_default"]);let l;for(let p of c){let m=r(s[p]);l=o(l,m)}let u=r(s._common),d=n(u,l);return new t(d)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Fh(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},wXe=class t{static{a(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};f();var zt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new bn(`Invalid range: ${this.toString()}`)}static{a(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let o=n;for(;o<r.length&&r[o].start<=e.endExclusive;)o++;if(n===o)r.splice(n,0,e);else{let s=Math.min(e.start,r[n].start),c=Math.max(e.endExclusive,r[o-1].endExclusive);r.splice(n,o-n,new t(s,c))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new bn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new bn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new bn(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};f();var jr=class t{static{a(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,o=r.lineNumber|0;if(n===o){let s=e.column|0,c=r.column|0;return s-c}return n-o}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var or=class t{static{a(this,"Range")}constructor(e,r,n,o){e>n||e===n&&r>o?(this.startLineNumber=n,this.startColumn=o,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=o)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,o,s,c;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,o=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,o=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,o=e.startColumn),r.endLineNumber>e.endLineNumber?(s=r.endLineNumber,c=r.endColumn):r.endLineNumber===e.endLineNumber?(s=r.endLineNumber,c=Math.max(r.endColumn,e.endColumn)):(s=e.endLineNumber,c=e.endColumn),new t(n,o,s,c)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,o=e.startColumn,s=e.endLineNumber,c=e.endColumn,l=r.startLineNumber,u=r.startColumn,d=r.endLineNumber,p=r.endColumn;return n<l?(n=l,o=u):n===l&&(o=Math.max(o,u)),s>d?(s=d,c=p):s===d&&(c=Math.min(c,p)),n>s||n===s&&o>c?null:new t(n,o,s,c)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new jr(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new jr(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let s=e.startLineNumber|0,c=r.startLineNumber|0;if(s===c){let l=e.startColumn|0,u=r.startColumn|0;if(l===u){let d=e.endLineNumber|0,p=r.endLineNumber|0;if(d===p){let m=e.endColumn|0,h=r.endColumn|0;return m-h}return d-p}return l-u}return s-c}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Gr=class t{static{a(this,"LineRange")}static ofLength(e,r){return new t(e,e+r)}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static{this.compareByStart=Sh(e=>e.startLineNumber,Rh)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new $Z(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new $Z(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new bn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let o=1;o<e.length;o++)r=Math.min(r,e[o].startLineNumber),n=Math.max(n,e[o].endLineNumberExclusive);return new t(r,n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new bn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new or(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new or(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new zt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},$Z=class t{constructor(e=[]){this._normalizedRanges=e}static{a(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=d3(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),n=BA(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let o=this._normalizedRanges[r];this._normalizedRanges[r]=o.join(e)}else{let o=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,o)}}contains(e){let r=hve(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=hve(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,o=0,s=null;for(;n<this._normalizedRanges.length||o<e._normalizedRanges.length;){let c=null;if(n<this._normalizedRanges.length&&o<e._normalizedRanges.length){let l=this._normalizedRanges[n],u=e._normalizedRanges[o];l.startLineNumber<u.startLineNumber?(c=l,n++):(c=u,o++)}else n<this._normalizedRanges.length?(c=this._normalizedRanges[n],n++):(c=e._normalizedRanges[o],o++);s===null?s=c:s.endLineNumberExclusive>=c.startLineNumber?s=new Gr(s.startLineNumber,Math.max(s.endLineNumberExclusive,c.endLineNumberExclusive)):(r.push(s),s=c)}return s!==null&&r.push(s),new t(r)}subtractFrom(e){let r=d3(this._normalizedRanges,c=>c.endLineNumberExclusive>=e.startLineNumber),n=BA(this._normalizedRanges,c=>c.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let o=[],s=e.startLineNumber;for(let c=r;c<n;c++){let l=this._normalizedRanges[c];l.startLineNumber>s&&o.push(new Gr(s,l.startLineNumber)),s=l.endLineNumberExclusive}return s<e.endLineNumberExclusive&&o.push(new Gr(s,e.endLineNumberExclusive)),new t(o)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,o=0;for(;n<this._normalizedRanges.length&&o<e._normalizedRanges.length;){let s=this._normalizedRanges[n],c=e._normalizedRanges[o],l=s.intersect(c);l&&!l.isEmpty&&r.push(l),s.endLineNumberExclusive<c.endLineNumberExclusive?n++:o++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var hu=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{a(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let o of e)o===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new or(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new or(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new or(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Gr.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new jr(e.lineNumber,e.column+this.columnCount):new jr(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return or.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var gu=class t{constructor(e){this.value=e}static{a(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new eEe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Oh(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},eEe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{a(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new zt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=BA(this.lineStartOffsetByLineIdx,s=>s<=e),n=r+1,o=e-this.lineStartOffsetByLineIdx[r]+1;return new jr(n,o)}getRange(e){return or.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return hu.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new hu(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var qA=class{static{a(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var WZ=class extends Ps{constructor(r,n,o,s,c,l){super();this.id=r;this.workspaceRoot=l;this.value=UA(this,n),this.selection=UA(this,o),this.languageId=UA(this,s),this._register(qc(c))}static{a(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let o=this.value.get().apply(r);this.value.set(o,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};f();f();function Ox(t,e,r){let n=new Map(Object.entries(e).map(([s,c])=>[c,s])),o=new Map(Object.keys(e).map(s=>[s,void 0]));return LZ({owner:t,createEmptyChangeSummary:a(()=>({}),"createEmptyChangeSummary"),handleChange:a((s,c)=>{let l=n.get(s.changedObservable);return c[l]===void 0&&(c[l]={value:void 0,changes:[]}),c[l].changes.push(s.change),!0},"handleChange")},(s,c)=>{for(let[l,u]of Object.entries(e)){let d=u.read(s);c[l]===void 0&&(c[l]={value:d,changes:[],previous:o.get(l)}),c[l].value=d,c[l].previous=o.get(l)===void 0?void 0:o.get(l),o.set(l,d)}r(c)})}a(Ox,"autorunWithChanges");f();var ZC=class extends Ps{static{a(this,"RecentEditsProvider")}};function hzt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let o=t.startLine-1,s=t.endLine-1;return!!(e&&(Math.abs(o-r)<=n||Math.abs(s-r)<=n))}a(hzt,"editIsTooCloseToCursor");var jZ=a((t,e)=>{let[r,n]=e.useState();return e.useData(Bp,async o=>{if(!o.document)return;let s=t.ctx.get(ZC);if(s.isEnabled())s.start();else return;let c=s.config,l=s.getRecentEdits(),u=new Set,d=t.ctx.get(fr),p=[];for(let h=l.length-1;h>=0&&!(p.length>=c.maxEdits);h--){let g=l[h];if(!await d.getTextDocument({uri:g.file}))continue;let A=!u.has(g.file);if(u.size+(A?1:0)>c.maxFiles)break;let v=g.file===o.document?.uri,b=v?o.position.line:void 0;if(hzt(g,v,b,c.activeDocDistanceLimitFromCursor))continue;let S=s.getEditSummary(g);if(S){u.add(g.file);let k=d.getRelativePath({uri:g.file});p.unshift(R7(`File: ${k}`)+R7(S))}}if(p.length===0){n(void 0);return}let m=R7("These are recently edited files. Do not suggest code that has been deleted.")+p.join("")+R7("End of recent edits");n(m)}),r?en(YT,{children:en(hc,{children:r})}):void 0},"RecentEdits");f();f();f();f();var tEe=new Sr;function RXe(t){return[...t].sort((e,r)=>{let n=tEe.get(e.uri)??0;return(tEe.get(r.uri)??0)-n})}a(RXe,"sortByAccessTimes");var kXe=a(t=>t.get(fr).onDidFocusTextDocument(e=>{e.document&&tEe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var GZ=class{constructor(e){this.docManager=e}static{a(this,"OpenTabFiles")}truncateDocs(e,r,n,o){let s=new Map,c=0;for(let l of e)if(!(c+l.getText().length>ZR.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(l.uri.startsWith("file:")&&r.startsWith("file:")&&l.uri!==r&&VZ(n,l.detectedLanguageId)&&(s.set(l.uri.toString(),{uri:l.uri.toString(),relativePath:this.docManager.getRelativePath(l),source:l.getText()}),c+=l.getText().length),s.size>=o))break;return s}async getNeighborFiles(e,r,n){let o=new Map,s=new Map;return o=this.truncateDocs(RXe(await this.docManager.textDocuments()),e,r,n),s.set("opentabs",Array.from(o.keys()).map(c=>c.toString())),{docs:o,neighborSource:s}}};f();f();function PXe(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(o=>{setTimeout(o,e,r)})])}}a(PXe,"shortCircuit");f();function Azt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}a(Azt,"defaultHash");function rEe(t,e={}){let{hash:r=Azt,cache:n=new Map}=e;return function(...o){let s=r.apply(this,o);if(n.has(s))return n.get(s);let c=t.apply(this,o);return c instanceof Promise&&(c=c.catch(l=>{throw n.delete(s),l})),n.set(s,c),c}}a(rEe,"memoize");var DXe={entries:[],traits:[]},zZ={entries:new Map,traits:[]},nEe=class extends Sr{constructor(r,n=120*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{a(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let o=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),o}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},Ul=new ft("relatedFiles"),yzt=1e3,KZ=class extends Error{static{a(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},ek=class t{constructor(e){this.context=e}static{a(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let o=await this.getRelatedFilesResponse(e,r,n);if(o===void 0)return;let s={entries:new Map,traits:o.traits??[]};for(let c of o.entries){let l=s.entries.get(c.type);l||(l=new Map,s.entries.set(c.type,l));for(let u of c.uris)try{Ul.debug(this.context,`Processing ${u}`);let d=await this.getFileContent(u);if(!d||d.length==0){Ul.debug(this.context,`Skip ${u} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(u,d)){Ul.debug(this.context,`Skip ${u} due content exclusion.`);continue}d=t.dropBOM(d),l.set(u,d)}catch(d){Ul.warn(this.context,d)}}return s}async getFileContent(e){try{return this.context.get(Qi).readFileString(e)}catch(r){Ul.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(fl).evaluate(e,r)).isBlocked}catch(n){Ul.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},Czt=3,BXe=new nEe(yzt);async function NXe(t,e,r,n,o){let s=performance.now(),c;try{c=await o.getRelatedFiles(e,r,n)}catch(u){Ul.exception(t,u,".getRelatedFiles"),c=void 0}c===void 0&&(BXe.bumpRetryCount(e.uri)>=Czt?c=zZ:c=void 0);let l=performance.now()-s;if(Ul.debug(t,c!==void 0?`Fetched ${[...c.entries.values()].map(u=>u.size).reduce((u,d)=>u+d,0)} related files for '${e.uri}' in ${l}ms.`:`Failing fetching files for '${e.uri}' in ${l}ms.`),c===void 0)throw new KZ;return c}a(NXe,"getRelatedFiles");var iEe=rEe(NXe,{cache:BXe,hash:a((t,e,r,n,o)=>`${e.uri}`,"hash")});iEe=PXe(iEe,200,zZ);async function YZ(t,e,r,n,o,s=!1){let c=t.get(ek),l=zZ;try{let u={uri:e.uri,clientLanguageId:e.clientLanguageId,data:o};l=s?await NXe(t,u,r,n,c):await iEe(t,u,r,n,c)}catch(u){l=zZ,u instanceof KZ&&Nt(t,"getRelatedFilesList",r)}return Ul.debug(t,l!=null?`Fetched following traits ${l.traits.map(u=>`{${u.name} : ${u.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),l}a(YZ,"getRelatedFilesAndTraits");function VZ(t,e){return kO(t)===kO(e)}a(VZ,"considerNeighborFile");var ZR=class t{static{a(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,o,s,c,l){let u=e.get(fr);t.instance===void 0&&(t.instance=new GZ(u));let d={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(vzt(e,o))return d;let p=await u.getTextDocument({uri:r});if(!p)return Ul.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),d;let m=u.getWorkspaceFolder(p);if(!m)return Ul.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),d;let h=await YZ(e,p,o,s,c,l);return h.entries.size===0?(Ul.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),d.traits.push(...h.traits),d):(h.entries.forEach((g,A)=>{let y=[];g.forEach((v,b)=>{let I=t.getRelativePath(b,m.uri);if(!I||d.docs.has(b))return;let S={relativePath:I,uri:b,source:v};y.unshift(S),d.docs.set(b,S)}),y.length>0&&d.neighborSource.set(A,y.map(v=>v.uri.toString()))}),d.traits.push(...h.traits),d)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function vzt(t,e){return t.get(Lt).excludeRelatedFiles(e)||Bi(t,qt.ExcludeRelatedFiles)}a(vzt,"isExcludeRelatedFilesActive");function MXe(t,e){return t.get(Lt).includeNeighboringFiles(e)||Bi(t,qt.IncludeNeighboringFiles)}a(MXe,"isIncludeNeighborFilesActive");var JZ=a((t,e)=>{let[r,n]=e.useState(),[o,s]=e.useState([]);e.useData(Bp,async u=>{u.document.uri!==r?.uri&&s([]),n(u.document);let d=ZR.defaultEmptyResult();u.turnOffSimilarFiles||(d=await ZR.getNeighborFilesAndTraits(t.ctx,u.document.uri,u.document.detectedLanguageId,u.telemetryData,u.cancellationToken,u.data));let p=await c(u.telemetryData,u.document,u,d);s(p)});async function c(u,d,p,m){let h=W3(t.ctx,u,d.detectedLanguageId);return(await l(h,u,d,p,m)).filter(A=>A.snippet.length>0).sort((A,y)=>A.score-y.score).map(A=>({...qJe(A),score:A.score}))}a(c,"produceSimilarFiles");async function l(u,d,p,m,h){let g=u.similarFilesOptions||vZ(t.ctx,d,p.detectedLanguageId),y=t.ctx.get(fr).getRelativePath(p),v={uri:p.uri,source:p.getText(),offset:p.offsetAt(m.position),relativePath:y,languageId:p.detectedLanguageId};return await WJe(v,Array.from(h.docs.values()),g)}return a(l,"findSimilarSnippets"),en(OA,{children:[...o.map((u,d)=>en(xzt,{snippet:u}))]})},"SimilarFiles"),xzt=a((t,e)=>en(YT,{children:[en(hc,{children:t.snippet.headline}),en(hc,{children:t.snippet.snippet})]}),"SimilarFile");f();f();var XZ=a((t,e)=>{let[r,n]=e.useState(),[o,s]=e.useState();if(e.useData(Bp,c=>{c.traits!==r&&n(c.traits);let l=kO(c.document.detectedLanguageId);l!==o&&s(l)}),!(!r||r.length===0||!o))return en(OA,{children:[en(hc,{children:`Consider this related information:
`}),...r.map(c=>en(hc,{source:c,children:`${c.name}: ${c.value}`},c.id))]})},"Traits");function LXe(t,e){return Bi(t,qt.UseSplitContextPrompt)??t.get(Lt).enablePromptContextProxyField(e)}a(LXe,"shouldUseSplitContextPrompt");function FXe(t){return en(OA,{children:[en(Dxe,{children:[en(RZ,{ctx:t,weight:.7}),en(XZ,{weight:.6}),en(EZ,{ctx:t,weight:.9}),en(JZ,{ctx:t,weight:.8})]}),en(YJe,{weight:1}),en(Bxe,{children:en(jZ,{ctx:t,weight:.99})}),en(KJe,{weight:1})]})}a(FXe,"splitContextCompletionsPrompt");f();var OXe=0;function Ezt(){OXe=0}a(Ezt,"resetContextIndex");function bzt(){return OXe++}a(bzt,"getNextContextIndex");var ZZ=class extends N3{constructor(){super(...arguments);this.formatPrefix=XJe;this.formatContext=ZJe}static{a(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let o=[],s=[],c=[],l=!1;if(Ezt(),new B3(r,Izt).walkSnapshot((p,m,h)=>{if(p===r||(p.statistics.updateDataTimeMs&&p.statistics.updateDataTimeMs>0&&c.push({componentPath:p.path,updateDataTimeMs:p.statistics.updateDataTimeMs}),p.name===GR.name&&(l=!0),p.value===void 0||p.value===""))return!0;let g=h.chunks,A=h.type;if(A==="suffix")s.push({value:k7(p.value),type:"suffix",weight:h.weight,componentPath:p.path,nodeStatistics:p.statistics,chunks:g,source:h.source});else{let y=A==="prefix",v=y||p.value.endsWith(n)?p.value:p.value+n;o.push({type:y?"prefix":"context",value:k7(v),weight:h.weight,componentPath:p.path,nodeStatistics:p.statistics,chunks:g,source:h.source,index:y?void 0:h.index})}return!0}),!l)throw new Error(`Node of type ${GR.name} not found`);if(s.length>1)throw new Error("Only one suffix is allowed");let d=s.length===1?s[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:o,suffixBlock:d,componentStatistics:c}}},Izt=[...Oxe,(t,e,r)=>bZ(t)?{...r,index:bzt()}:r];f();function eee(t,e,r){let n=sZ(r,"Trait");for(let s of n)Tzt(t,e,s.data,s.providerId);return n.flatMap(s=>s.data).sort((s,c)=>(s.importance??0)-(c.importance??0))}a(eee,"getTraitsFromContextItems");function Tzt(t,e,r,n){let o=t.get(pl).getStatisticsForCompletion(e);r.forEach(s=>{o.addExpectations(n,[[s,"included"]])})}a(Tzt,"setupExpectationsForTraits");var wzt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function tee(t,e,r,n,o,s){if(r.length>0){let c={};c.detectedLanguageId=n,c.languageId=o;for(let u of r){let d=wzt.get(u.name);d&&(c[d]=u.value)}let l=s.extendedBy(c,{});return Nt(e,t,l)}}a(tee,"ReportTraitsTelemetry");f();f();f();var ree=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{a(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let o=typeof e=="function"?e():e;this.states[r]=o}let n=a(o=>{let s=typeof o=="function"?o(this.states[r]):o;this.states[r]=s,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},nee=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{a(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var iee=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{a(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,o){if(!e.children&&!e.lifecycle)return e;let s=e;if(e.lifecycle?.isRemountRequired()){let l=this.collectChildPaths(e);s=this.virtualizeElement(e.component,r,n);let u=this.collectChildPaths(s);this.cleanupState(l,u)}else if(e.children){let l=[];for(let u=0;u<e.children.length;u++){let d=e.children[u];if(d){let p=this.reconcileNode(d,e.path,u,o);p!==void 0&&l.push(p)}}s.children=l}return s}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(_zt(e.type)){let o=e.type(e.props.children),s=r!=="$"?`[${n}]`:"",c=`${r}${s}.${o.type}`,l=o.children.map((u,d)=>this.virtualizeElement(u,c,d));return this.ensureUniqueKeys(l),{name:o.type,path:c,children:l.flat().filter(u=>u!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,o){let s=n.props.key?`["${n.props.key}"]`:`[${r}]`,c=`${e}${s}.${o.name}`,l=new sEe(this.getOrCreateLifecycleData(c)),u=o(n.props,l),m=(Array.isArray(u)?u:[u]).map((h,g)=>this.virtualizeElement(h,c,g)).flat().filter(h=>h!==void 0);return this.ensureUniqueKeys(m),{name:o.name,path:c,props:n.props,children:m,component:n,lifecycle:l}}ensureUniqueKeys(e){let r=new Map;for(let o of e){if(!o)continue;let s=o.props?.key;s&&r.set(s,(r.get(s)||0)+1)}let n=Array.from(r.entries()).filter(([o,s])=>s>1).map(([o])=>o);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new oEe([])),this.lifecycleData.get(e)}createPipe(){return{pump:a(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},oEe=class{static{a(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},sEe=class{constructor(e){this.lifecycleData=e;this.stateHook=new ree(e.state),this.dataHook=new nee(r=>{e._updateTimeMs=r})}static{a(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function _zt(t){return typeof t=="function"&&"isFragmentFunction"in t}a(_zt,"isFragmentFunction");var L7=class{static{a(this,"VirtualPrompt")}constructor(e){this.reconciler=new iee(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let o of e.children??[]){let s=this.snapshotNode(o,r);if(s==="cancelled")return"cancelled";s!==void 0&&n.push(s)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};function Bp(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}a(Bp,"isCompletionRequestData");var aEe={default:{promptFunction:QXe,renderer:N3},splitContext:{promptFunction:FXe,renderer:ZZ}};function QXe(t){return en(OA,{children:[en(Pxe,{children:[en(RZ,{ctx:t,weight:.7}),en(XZ,{weight:.6}),en(EZ,{ctx:t,weight:.9}),en(JZ,{ctx:t,weight:.8}),en(jZ,{ctx:t,weight:.99})]}),en(_7,{weight:1})]})}a(QXe,"defaultCompletionsPrompt");var oee=class{constructor(e,r,n){this.ctx=e;this.promptOrdering=n??"default",this.virtualPrompt=r??new L7(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{a(this,"ComponentsCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:o},s){let{maxPromptLength:c,suffixPercent:l,suffixMatchThreshold:u}=W3(this.ctx,n,r.textDocument.detectedLanguageId),d=await this.failFastPrompt(r.textDocument,r.position,l,s);if(d)return d;let p=o?.separateContext?"splitContext":"default";this.setPromptOrdering(p);let m=performance.now(),{traits:h,codeSnippets:g,turnOffSimilarFiles:A,resolvedContextItems:y}=await this.resolveContext(e,r,n,s,o);if(await this.updateComponentData(r.textDocument,r.position,h,g,n,A,c,s,o,u,o?.tokenizer),s?.isCancellationRequested)return Qx;let v=this.virtualPrompt.snapshot(s),b=v.status;if(b==="cancelled")return Qx;if(b==="error")return this.errorPrompt(v.error);let I=this.renderer.render(v.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:c,suffixPercent:l,languageId:r.textDocument.detectedLanguageId},s);if(I.status==="cancelled")return Qx;if(I.status==="error")return this.errorPrompt(I.error);let[S,k]=ew(I.prefix),N={...I,prefix:S},F;if(P3(this.ctx,n)){let Y=aZ(I.metadata.componentStatistics);this.ctx.get(pl).getStatisticsForCompletion(e).computeMatch(Y),F=lZ(this.ctx,e,y),pn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(F)}'`)}let O=performance.now();return this.resetIfEmpty(I),this.successPrompt(N,O,m,k,F)}async updateComponentData(e,r,n,o,s,c,l,u,d={},p,m){let h=this.createRequestData(e,r,s,u,d,l,n,o,c,p,m);await this.pipe.pump(h)}async resolveContext(e,r,n,o,s={}){let c=[],l,u,d=!1;if(P3(this.ctx,n)){c=await this.ctx.get(Dp).resolution(e);let{textDocument:p}=r,m=c.filter(uZ);Rzt(this.ctx,p.detectedLanguageId,m,n)||(d=!0),l=eee(this.ctx,e,m),tee("contextProvider.traits",this.ctx,l,p.detectedLanguageId,p.detectedLanguageId,n),u=await xZ(this.ctx,e,m,p.detectedLanguageId)}return{traits:l,codeSnippets:u,turnOffSimilarFiles:d,resolvedContextItems:c}}async failFastPrompt(e,r,n,o){if(o?.isCancellationRequested)return Qx;if((await this.ctx.get(fl).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return cee;if((n>0?e.getText().length:e.offsetAt(r))<see)return aee}createRequestData(e,r,n,o,s,c,l,u,d,p,m){return{document:e,position:r,telemetryData:n,cancellationToken:o,data:s.data,traits:l,codeSnippets:u,turnOffSimilarFiles:d,suffixMatchThreshold:p,maxPromptTokens:c,tokenizer:m}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,o,s){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:o,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:s}}errorPrompt(e){return Ja(this.ctx,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),j3}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new L7(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){return(aEe[this.promptOrdering]?.promptFunction??QXe)(this.ctx)}getRenderer(){let e=aEe[this.promptOrdering]??aEe.default;return new e.renderer}};function Rzt(t,e,r,n){let o=["cpp","c"];return MXe(t,n)||o.includes(e)||!r.some(c=>c.data.some(l=>l.type==="CodeSnippet"))}a(Rzt,"similarFilesEnabled");f();f();f();f();f();var lee="[...]",kzt=0,e1=-1;function gc(){return kzt++}a(gc,"getAvailableNodeId");function Pzt(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,o])=>n===0?o:r[n-1]+o).join("")}a(Pzt,"elideChildren");function cEe(t,e=lee){return r=>t.tokenLength(Pzt(r,e))}a(cEe,"getTokenizerCostFunction");f();var G3=class{static{a(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let o=this.heap.length-1;this.siftUp(o)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){for(;e<this.size-1;){let r=e,n=2*e+1,o=n+1;if(n<this.size&&this.heap[n].priority>this.heap[r].priority&&(r=n),o<this.size&&this.heap[o].priority>this.heap[r].priority&&(r=o),r===e)break;let s=this.heap[e];this.heap[e]=this.heap[r],this.heap[r]=s,e=r}}};var Np=class{constructor(e,r,n,o,s=0,c=!1,l=lee,u=!1){this.id=e;this.text=r;this.children=n;this.cost=o;this.weight=s;this.canMerge=c;this.elisionMarker=l;this.requireRenderedChild=u;this.weightFromChild=!1;if(r.length!==n.length+1)throw new Error(`Text fragments length (${r.length}) must be equal to children length (${n.length}) + 1`);this.weight=Math.max(s,0)}static{a(this,"RenderNode")}get value(){return this.weight/Math.max(this.cost,1)}get isRenderedChildRequired(){return this.requireRenderedChild||this.weightFromChild}updateWeights(e){let r=this.recursivelyRectifyWeights(e);for(let{item:n,priority:o}of r.clear())for(let s of n.nodes)s.weight=o*s.cost}recursivelyRectifyWeights(e){let r=this.children.map(c=>c.recursivelyRectifyWeights(e)),n=Math.max(0,e?e(this):this.weight);if(n===0&&r.reduce((c,l)=>c+l.size,0)===0)return this.weight=0,new G3([]);let o=new G3(r.flatMap(c=>c.clear())),s={nodes:[this],totalCost:this.cost,totalWeight:n};for(this.weightFromChild=!1;(o.peek()?.priority??0)>s.totalWeight/s.totalCost;){let{item:c}=o.pop();s.nodes.push(...c.nodes),s.totalCost+=c.totalCost,s.totalWeight+=c.totalWeight,this.weightFromChild=!0}return o.insert(s,s.totalWeight/s.totalCost),o}};function UXe(t,e={}){let{budget:r,mask:n,costFunction:o}=e,s=n??[],c=new Set(Array.isArray(s)?s:[s]);if((r??t.cost)<t.cost||c.has(t.id))return{text:t.elisionMarker,cost:o?o(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map};if(r===void 0){let m=a(v=>c.has(v.id),"elider"),h=[],g=new Map;if(uEe(t,h,m,g),h.length===0)return lEe(t,o);let A=h.join(""),y=o?o(A):[...g.values()].reduce((v,b)=>v+b.cost,0);return{text:A,cost:y,renderedNodes:g}}let l=new Map,u=[],d=new G3([{item:t,priority:t.value}]),p=r;for(;p>0&&d.size>0;){let{item:m}=d.pop();if(!c.has(m.id)&&m.cost<=p){p-=m.cost,l.set(m.id,m),u.push(m);for(let h of m.children)d.insert(h,h.value)}}for(;l.size>0;){let m=[],h=a(v=>!l.has(v.id),"elider"),g=new Map;if(uEe(t,m,h,g),m.length===0)return lEe(t,o);let A=m.join("");if(o===void 0){let v=[...g.values()].reduce((b,I)=>b+I.cost,0);return{text:A,cost:v,renderedNodes:g}}let y=o(A);if(y<=r)return{text:A,cost:y,renderedNodes:g};for(l=g;u.length>0&&y>r;){let v=u.pop();l.has(v.id)&&(y-=v.cost,l.delete(v.id))}if(u.length===0)break}return lEe(t,o)}a(UXe,"render");function lEe(t,e){return{text:t.elisionMarker,cost:e?e(t.elisionMarker):t.elisionMarker.length,renderedNodes:new Map}}a(lEe,"renderEmpty");function uEe(t,e,r,n,o=!1){let s=e.length;if(r(t))return s>=2&&(o||e[s-2]===t.elisionMarker&&e[s-1].trim().length===0)?(e.pop(),!1):(e.push(t.elisionMarker),!1);let c=t.isRenderedChildRequired,l=!0;for(let[u,d]of t.children.entries())e.push(t.text[u]??""),l=uEe(d,e,r,n,d.canMerge&&!l),c&&=!l;if(c){for(;e.length>s;)e.pop();return!1}return e.push(t.text[t.text.length-1]??""),n.set(t.id,t),!0}a(uEe,"recursivelyRender");function F7(t,e,r=lee){let n=t.children.map(c=>F7(c,e,r));r=t.elisionMarker??r;let o=e(t);return new Np(t.id,t.text,n,o,0,t.canMerge,r)}a(F7,"snapshot");var tw=new Np(gc(),[""],[],0);f();function Qh(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}a(Qh,"setDefault");var WXe=2e4,qXe=0,HXe=new Sr;function jXe(t,e,r,n){qXe++;let o=r.promptOpts?.tokenizer??"o200k_base",s=performance.now(),{root:c,mask:l,statistics:u}=t.snapshot(r,n),d=performance.now(),p=new Set(l),m=HXe?.get(c.id),h;if(m&&m.budget>=e&&m.render.cost<=e&&m.tokenizer===o&&p.size===m.mask.size&&[...p].every(I=>m.mask.has(I)))h=m.render;else{let I=Oi(o);h=UXe(c,{budget:e,mask:l,costFunction:a(k=>I.tokenLength(k),"costFunction")}),HXe.set(c.id,{budget:e,mask:p,tokenizer:o,render:h})}let{text:g,cost:A,renderedNodes:y}=h,v=performance.now();for(let[I,S]of u?.entries()??[])S.actualTokens=y.get(I)?.cost??0;let b={renderId:qXe,rendererName:"renderNode",tokenizer:o,elisionTimeMs:v-d,renderTimeMs:d-s,updateDataTimeMs:0,componentStatistics:[{componentPath:t.name,actualTokens:A}]};return{root:c,renderedNodes:y,text:g,cost:A,metadata:b}}a(jXe,"renderWithMetadata");function GXe(t,e){return r=>{let n=r.text.join("")+`
`;return Qh(e,n,()=>t.tokenLength(n)+1)}}a(GXe,"cachedLineCostFunction");function VXe(t,e,r){let o=t.split(`
`).map(p=>({id:gc(),text:[p],children:[],canMerge:!0})),s=[""];o.length>=1&&s.push(...Array(o.length-1).fill(`
`),"");let c={id:gc(),text:s,children:o,canMerge:!0},u=F7(c,a(p=>p.id===c.id?0:e(p),"nodeCostFunction")),d=r?o.length:1;for(let p of u.children)p.weight=d*Math.max(1,p.cost),d+=r?-1:1;return u}a(VXe,"getLinewiseNode");var uee=class{constructor(){this.name="basicPrefix";this.costCache=new Sr(WXe)}static{a(this,"BasicPrefixComponent")}snapshot(e){let{completionState:r,promptOpts:n}=e,o=r.textDocument.getText({start:{line:0,character:0},end:r.position}),s=Oi(n?.tokenizer),c=GXe(s,this.costCache);return{root:VXe(o,c,!1)}}},$Xe={root:tw,text:"",cost:0},dee=class{constructor(e){this.ctx=e;this.name="cachedSuffix";this.cache=new Sr(5);this.costCache=new Sr(WXe)}static{a(this,"CachedSuffixComponent")}snapshot(e){return{root:this.getCachedSuffix(e).root}}estimatedCost(e,r){return this.getCachedSuffix(e).cost}getCachedSuffix(e){let{completionState:r,telemetryData:n,promptOpts:o}=e,c=r.textDocument.getText({start:r.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}}).replace(/^.*/,"").trimStart();if(c==="")return $Xe;let l=this.cache.get(r.textDocument.uri)||$Xe;if(l.text===c)return l;let u=this.ctx.get(Lt).suffixMatchThreshold(n);if(l.text!==""){let g=new bT,A=g.takeFirstTokens(c,w7);if(A.tokens.length>0&&100*IZ(A.tokens,g.takeFirstTokens(l.text,w7).tokens)?.score<u*A.tokens.length)return l}let d=Oi(o?.tokenizer),p=GXe(d,this.costCache),m=VXe(c,p,!0),h=m.children.reduce((g,A)=>g+A.cost+1,0);return{root:m,cost:h,text:c}}},fee=class{constructor(){this.name="traitProvider"}static{a(this,"TraitComponent")}snapshot(e,r){let{promptOpts:n}=e,o=Oi(n?.tokenizer);if(!r||r.traits.length===0)return{root:tw};let s=new Map,c=0,l=[],u=new Map;for(let h of r.traits){let g=gc(),A=`${h.name}: ${h.value}`,y=new Np(g,[A],[],o.tokenLength(A));l.push(y),u.set(g,{componentPath:h.id,source:h,expectedTokens:y.cost}),s.set(g,h.importance??0),c+=h.importance??0}let p=[`Related context:
`,...new Array(l.length).fill(`
`)],m=new Np(gc(),p,l,0,0,!0,"");return m.updateWeights(h=>(s.get(h.id)??0)/(c||1)),{root:m,statistics:u}}},pee=class{constructor(e){this.ctx=e;this.name="contextProvider"}static{a(this,"CodeSnippetComponent")}snapshot(e,r){let{promptOpts:n}=e,o=Oi(n?.tokenizer);if(!r||r.codeSnippets.length===0)return{root:tw};let s=new Map;for(let g of r.codeSnippets){let A=g.uri;Qh(s,A,()=>[]).push(g)}let c=new Map,l=[],u=new Map,d=0,p=this.ctx.get(fr);for(let[g,A]of s.entries()){let y=p.getRelativePath({uri:g})??g,b=[`Compare ${A.length>1?"these snippets":"this snippet"} from ${y}:
`,...new Array(A.length).fill(`
`)],I=[];for(let S of A){let k=gc();u.set(k,S.importance??0);let N=new Np(k,[S.value],[],o.tokenLength(S.value));I.push(N),d+=S.importance??0,c.set(k,{componentPath:S.id,source:S,expectedTokens:N.cost})}l.push(new Np(gc(),b,I,o.tokenLength(b.join("")),0,!0,""))}let m=new Array(l.length+1).fill(""),h=new Np(gc(),m,l,0,0,!0,"");return h.updateWeights(g=>(u.get(g.id)??0)/(d||1)),{root:h,statistics:c}}},mee=class{constructor(e,r){this.name=e;this.components=r}static{a(this,"ConcatenatedContextComponent")}snapshot(e,r){let n=this.components.map(d=>d.snapshot(e,r)),o=n.map(d=>d.root).filter(d=>d.id!==tw.id);if(o.length===0)return{root:tw};let s=["",...Array(o.length-1).fill(`
`),""],c=new Np(gc(),s,o,0,0,!0,"",!0),l=[],u=new Map;for(let d of n){for(let[p,m]of d.statistics?.entries()??[])u.set(p,m);d.mask&&l.push(...d.mask)}return{root:c,mask:l,statistics:u}}};var Dzt=.8,hee=class{constructor(e,r){this.ctx=e;this.components=r;this.renderId=0}static{a(this,"CascadingPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}getComponentAllocation(e){let r=this.ctx.get(Lt).suffixPercent(e),n=this.ctx.get(Lt).stableContextPercent(e),o=this.ctx.get(Lt).volatileContextPercent(e);if(r<0||r>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${r}`);if(n<0||n>100)throw new Error(`stableContextPercent must be between 0 and 100, but was ${n}`);if(o<0||o>100)throw new Error(`volatileContextPercent must be between 0 and 100, but was ${o}`);let s=100-r-n-o;if(s<=1||s>100)throw new Error(`prefixPercent must be between 1 and 100, but was ${s}`);return{prefix:s/100,suffix:r/100,stableContext:n/100,volatileContext:o/100}}async createPromptUnsafe(e,r){this.renderId++;let{completionId:n,completionState:o,telemetryData:s,promptOpts:c}=e,l=await this.failFastPrompt(o.textDocument,r);if(l)return l;let u=performance.now(),d;P3(this.ctx,s)&&(d=await this.resolveContext(n,o,s,r));let p=performance.now()-u,m={},h={renderId:this.renderId,rendererName:"w",tokenizer:c?.tokenizer??"o200k_base",elisionTimeMs:0,renderTimeMs:0,updateDataTimeMs:p,componentStatistics:[]},g=o.textDocument.detectedLanguageId,{maxPromptLength:A}=W3(this.ctx,s,g),y=this.getComponentAllocation(s),v=y.suffix*A,b=this.components.suffix.estimatedCost?.(e,d),I=["stableContext","volatileContext","prefix","suffix"];v>Dzt*(b??0)&&(I=["stableContext","volatileContext","suffix","prefix"]);let S=0;for(let V of I){let U=S+A*y[V],H=jXe(this.components[V],U,e,d);S=U-H.cost,m[V]=H,Bzt(h,H.metadata)}let[k,N]=ew(m.prefix.text),F=performance.now(),O=P3(this.ctx,s)?this.telemetrizeContext(n,h.componentStatistics,d?.resolvedContextItems??[]):[],Y=[m.stableContext.text.trim(),m.volatileContext.text.trim()];return{type:"prompt",prompt:{prefix:c?.separateContext?k:XC(Y.join(`
`),g)+`

`+k,prefixTokens:m.prefix.cost+m.stableContext.cost+m.volatileContext.cost,suffix:m.suffix.text,suffixTokens:m.suffix.cost,context:c?.separateContext?Y:void 0,isFimEnabled:m.suffix.text.length>0},computeTimeMs:F-u,trailingWs:N,neighborSource:new Map,metadata:h,contextProvidersTelemetry:O}}async resolveContext(e,r,n,o){let s=await this.ctx.get(Dp).resolution(e),{textDocument:c}=r,l=s.filter(uZ),u=eee(this.ctx,e,l);tee("contextProvider.traits",this.ctx,u,c.detectedLanguageId,c.detectedLanguageId,n);let d=await xZ(this.ctx,e,l,c.detectedLanguageId);return{traits:u,codeSnippets:d,resolvedContextItems:s}}telemetrizeContext(e,r,n){let o=aZ(r);this.ctx.get(pl).getStatisticsForCompletion(e).computeMatch(o);let s=lZ(this.ctx,e,n);return pn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(s)}'`),s}async failFastPrompt(e,r){if(r?.isCancellationRequested)return Qx;if((await this.ctx.get(fl).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return cee;if(e.getText().length<see)return aee}errorPrompt(e){return Ja(this.ctx,e,"WorkspaceContextPromptFactory"),j3}};function Bzt(t,e){t.elisionTimeMs+=e.elisionTimeMs,t.renderTimeMs+=e.renderTimeMs,t.updateDataTimeMs+=e.updateDataTimeMs,t.componentStatistics.push(...e.componentStatistics)}a(Bzt,"aggregateMetadata");f();f();function Nzt(t){return t.id!==void 0}a(Nzt,"isNodeItem");function Mzt(t){return!("uri"in t)&&!("id"in t)}a(Mzt,"isNullItem");var Lzt={"RecentDocumentProvider.RecentlyOpen":.1,"RecentDocumentProvider.RecentlyFocused":.1,"RecentDocumentProvider.RecentlyEdited":.1,RecentCompletionsRequestProvider:1,"ExtensionActivityProvider.CurrentSelection":5,"ExtensionActivityProvider.PrimarySelection":2,"ExtensionActivityProvider.Selection":.2,"ExtensionActivityProvider.VisibleRange":1,FileDirectoryDocumentProvider:.05,"SymbolContextProvider.Identifiers":.2,"SymbolContextProvider.Text":.2,"IndexingSymbolContextProvider.Text":1,"TreeProximityProvider.Parent":.3,"TreeProximityProvider.Children":.3,"TreeProximityProvider.Siblings":.3,"ExtensionReferenceProvider.References":.2,"ExtensionReferenceProvider.Definitions":1},rw="64f5ff7d-e507-4558-81cf-3bdacc3c5c00",V3=class{static{a(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:o}of e)r.set(n,(r.get(n)??0)+o);this.documents=[...r.entries()].map(([n,o])=>({uri:n,weight:o})).sort((n,o)=>o.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==e1),this.nodeWeights=new Map(e.map(({id:n,weight:o})=>[n,o]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},gee=class{constructor(e,r){this.activeContext=e;this.config=r;this.sourceWeights=Lzt;this.sourceContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new V3([])}static{a(this,"WorkspaceContextCoordinator")}getWeights(e){if(e){let r=this.sourceContext.get(e);return r?new V3(r.items):new V3([])}return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[o,{items:s,updateTime:c}]of this.sourceContext.entries()){let l=this.sourceWeights[o]??0;if(l<=0||s.length===0)continue;let u=.5**(-Math.max(0,(this.prevUpdateTime??c)-c)/n);l*=u,r+=l,this.aggregateWeights(s,e,l,!0)}if(r>0){if(this.weights.nodes.length>0){let o=r*this.config.Laziness,s=this.prevItems;this.aggregateWeights(s,e,o,!0)}for(let[o,s]of e.entries()){let c=this.activeContext.getDocument(o)?.document;if(c===void 0)continue;let l=s.get(e1);if(l!==void 0&&l>0){s.delete(e1);let u=0;for(let d of s.values())u+=d;if(u<=0){let d=c.getAllIds(),p=l/Math.max(d.length,1);for(let m of d)s.set(m,p)}else for(let[d,p]of[...s.entries()])s.set(d,p+l*(p/u))}}this.prevItems=this.truncateAndNormalize(e),this.weights=new V3(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),o=this.addUriAndId(r),s=new Map;this.aggregateWeights(o,s);let c=this.truncateAndNormalize(s);this.sourceContext.set(e,{items:c,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{if(Mzt(r))return{weight:r.weight,uri:rw,id:e1};let n=Nzt(r)?r.id:e1,o=r.uri??this.activeContext.getUri(n)??rw;return o===rw&&(n=e1),{weight:r.weight,uri:o,id:n}})}aggregateWeights(e,r,n=1,o=!1){for(let{uri:s,id:c,weight:l}of e){if(l<=0||isNaN(l))continue;let u=Qh(r,s,()=>new Map),d=e1;(!o||this.activeContext.getUri(c)!==void 0)&&(d=c),u.set(d,(u.get(d)??0)+l*n)}}truncateAndNormalize(e){let r=[],n=new Map,o=0;for(let[u,d]of e.entries()){let p=u!==rw?this.activeContext.normalizeUri(u)??rw:rw;for(let[m,h]of d.entries())u===rw||m===e1?n.set(p,(n.get(p)??0)+h):r.push({uri:p,id:m,weight:h}),o+=h}if(o<=0)return[];n.delete(rw),r.sort((u,d)=>d.weight-u.weight);for(let{uri:u,weight:d}of r.slice(this.config.MaxActiveNodes,r.length))n.set(u,(n.get(u)??0)+d);let s=[...n.entries()].sort((u,d)=>d[1]-u[1]).slice(0,this.config.MaxActiveFiles).map(([u,d])=>({uri:u,id:e1,weight:d}));return r.slice(0,this.config.MaxActiveNodes).concat(s).sort((u,d)=>d.weight-u.weight).map(u=>({...u,weight:u.weight/o}))}};f();f();f();var J0=class{static{a(this,"FileSearch")}};f();f();var Aee=class{constructor(e,r,n,o=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=o}static{a(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*KXe(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,o=this.parts.length-1,s;for(;n<=o;){let l=Math.floor((n+o)/2);if(s=this.parts[l],s.root.startOffset<=e&&s.root.endOffset>=r)break;s.root.endOffset<e?n=l+1:o=l-1}if(s===void 0||o<n)return;n=0,o=s.children.length-1;let c;for(;n<=o;){let l=Math.floor((n+o)/2);if(c=s.children[l],c.startOffset<=e&&c.endOffset>=r)break;c.endOffset<e?n=l+1:o=l-1}if(!(c===void 0||o<n))return c}},Fzt=6,yee=class{constructor(e,r,n,o){this.textDocument=e;this.parser=r;this.minSize=n;this.updateId=gc();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(n,1),this.maxSize=Math.max(o??2*this.minSize,this.minSize+1),this._syntaxRoot=this.parser.parse(e,!0),this._root=this.buildTree()}static{a(this,"ContextDocument")}get uri(){return this.textDocument.uri}get version(){return this.updateId}get document(){return this.textDocument}get rootId(){return this._root.id}get root(){return this._root}get syntaxRoot(){return this._syntaxRoot}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this._root,o=n;for(;o;)n=o,o=n.findChild(e,r??e);return n}update(e){if(this.uri!==e.uri)throw new Error("Can't update ContextDocument using mismatched URI");this.textDocument=e,this._syntaxRoot=this.parser.parse(e,!0),this.recursivelyRemapNodes(this.root,()=>{}),this._root=this.buildTree(),this.updateId=gc()}recursivelyRemapNodes(e,r){let n=!0;for(let d of e.children)n=n&&this.recursivelyRemapNodes(d,r);if(!n)return this.invalidateNode(e),!1;let o=[];for(let{root:d,children:p}of e.parts){let m=r(d);if(m===void 0||m.type!==d.type)return this.invalidateNode(e),!1;o.push({root:m,children:p})}let s=o[0].root.parent,c=e.parts[0].root.parent;if((s&&this.canMergeChildren(s))!==(c&&this.canMergeChildren(c)))return this.invalidateNode(e),!1;let l=zXe(o,this.document);for(let[d,p]of l.entries())if(e.text[d]!==p)return this.invalidateNode(e),!1;let u=new Aee(e.id,o,e.text,e.canMerge);for(let{root:d}of e.parts)this.syntaxToAbstract.delete(d.id);for(let{root:d}of u.parts)this.syntaxToAbstract.set(d.id,u);return this.nodeById.set(e.id,u),!0}invalidateNode(e){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id)}createNode(e,r=!1){e.sort((s,c)=>s.root.startOffset-c.root.startOffset);let n=zXe(e,this.document),o=new Aee(gc(),e,n,r);for(let{root:s}of e)this.syntaxToAbstract.set(s.id,o);return this.nodeById.set(o.id,o),o}buildTree(){let e=this.buildRecursively(this._syntaxRoot);return this.createNode([{root:this._syntaxRoot,children:e}])}buildRecursively(e){if(e.endOffset-e.startOffset<this.minSize)return[];let r=e.children;if(this.canMergeChildren(e)){let o=r.map(c=>this.syntaxToAbstract.get(c.id));for(let c=0;c<r.length;c++)if(o[c]===void 0){if(c>0&&o[c-1]!==void 0){let l=o[c-1];for(let u=c-1;u>=0&&o[u]?.id===l.id;u--)o[u]=void 0;this.invalidateNode(l)}if(c<r.length-1&&o[c+1]!==void 0){let l=o[c+1];for(;c<r.length&&o[c+1]?.id===l.id;)c++,o[c]=void 0;this.invalidateNode(l)}}let s=[];for(let c=0;c<r.length;void 0)if(o[c]!==void 0)for(s.push(o[c]);c<r.length&&o[c+1]?.id===o[c].id;)c++;else{let l=[];for(;c<r.length&&o[c]===void 0;){let u=r[c];l.push({root:u,children:this.buildRecursively(u)}),c++}s.push(...this.mergeChildren(l))}return s}let n=[];for(let o=0;o<r.length;o++){let s=r[o];if(this.syntaxToAbstract.has(s.id)){let u=this.syntaxToAbstract.get(s.id);n.push(u),o+=u.parts.length-1;continue}let c=this.buildRecursively(s),l=s.endOffset-s.startOffset-c.reduce((u,d)=>u+(d.endOffset-d.startOffset),0);this.canBeNode(s)&&l>=this.minSize?n.push(this.createNode([{root:s,children:c}])):n.push(...c)}return n}mergeChildren(e){if(e.length===0)return[];e.sort((h,g)=>h.root.startOffset-g.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,n=[];for(let h of e){let g=h.root.endOffset-h.root.startOffset;for(let A of h.children){let y=A.endOffset-A.startOffset;g-=y,r-=y}n.push(g)}if(r<this.minSize)return e.flatMap(h=>h.children);let o=[0],s=0,c=null,l={line:-1,size:-1},u=e[0].root.startOffset,d=e[0].root.range.start.line;for(let h=0;h<e.length;h++){let g=e[h];if(s+=n[h]+g.root.startOffset-u,s>this.minSize&&s<this.maxSize){let A={line:g.root.range.start.line-d,size:g.root.startOffset-u};(A.line>l.line||A.line==l.line&&A.size>l.size)&&(l=A,c=h)}u=g.root.endOffset,d=g.root.range.end.line,s>=this.maxSize&&(c=c??h,o.push(c+1),h=c,s=0,c=null,l={line:-1,size:-1},u=e[h+1]?.root.startOffset,d=e[h+1]?.root.range.start.line)}o.length==1?o.push(e.length):o[o.length-1]!==e.length&&(o[o.length-1]=e.length);let p=[],m=!1;for(let h=0;h<o.length-1;h++){let g=e.slice(o[h],o[h+1]);p.push(this.createNode(g,m)),m=!0}return p}canMergeChildren(e){return this.parser.labeler.canMergeChildren?.(e)??e.children.length>Fzt}canBeNode(e){return this.parser.labeler.canBeNode?.(e)??!0}};function zXe(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let s of t.flatMap(c=>c.children).sort((c,l)=>c.startOffset-l.startOffset)){let c=e.positionAt(s.startOffset);r.push(e.getText({start:n,end:c})),n=e.positionAt(s.endOffset)}let o=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:o})),r}a(zXe,"buildText");function*KXe(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*KXe(r,e))}a(KXe,"walk");f();f();f();var Cee=class{constructor(e,r,n,o,s,c){this.id=e;this.raw=r;this.children=n;this.source="indentation";this.parent=null;let l={start:{line:o,character:0},end:{line:s,character:c.lineAt(s).text.length}},u=c.getText(l),d=u.search(/\S/);if(d===-1){let h={line:s,character:0};this.startOffset=c.offsetAt(h),this.endOffset=this.startOffset,this.range={start:h,end:h};return}let p=u.search(/\S(?!.*\S)/s),m=c.offsetAt(l.start);this.startOffset=m+d,this.endOffset=m+p+1,this.range={start:c.positionAt(this.startOffset),end:c.positionAt(this.endOffset)}}static{a(this,"IndentationNode")}get type(){return this.raw.type}};function dEe(t,e,r){let n=t.subs.map(u=>({subtree:u,node:dEe(u,e,r)})).filter(u=>u.node!==null).sort((u,d)=>u.node.startOffset-d.node.startOffset),o=[],s=e;for(let u=n.length-1;u>=0;u--){let{subtree:d,node:p}=n[u];if(p.range.end.line>=s){let m=dEe(d,s,r);m!==null&&(o.push(m),s=Math.min(m.range.start.line,s))}else o.push(p),s=Math.min(p.range.start.line,s)}o.sort((u,d)=>u.startOffset-d.startOffset);let c=e,l=0;if(o.length>0&&(c=Math.min(c,o[0].range.start.line),l=Math.max(l,o[o.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(c=Math.min(c,t.lineNumber),l=Math.max(l,t.lineNumber),t.type==="blank"&&c===l))return null;if(l=Math.min(l,e-1),c<=l){let u=new Cee(gc(),t,o,c,l,r);for(let d of o)d.parent=u;return u}return null}a(dEe,"recursivelyBuildNode");function YXe(t){let e=vR(t.getText(),t.detectedLanguageId);return dEe(e,t.lineCount,t)??new Cee(gc(),e,[],0,t.lineCount-1,t)}a(YXe,"parse");var JXe={source:"indentation",parse:YXe,update(t,e){return{root:YXe(e),remapper:a(()=>{},"remapper")}},dispose:a(()=>{},"dispose"),labeler:{isIdentifier:a(t=>!1,"isIdentifier"),isText:a(t=>!0,"isText")}};async function XXe(t){return Promise.resolve(JXe)}a(XXe,"getParser");var Ozt=new ft("WorkspaceContextManager"),vee=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,o])=>o.size>0).map(([n,o])=>n)))}static{a(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,o])=>[...o].map(s=>({uri:n,id:s}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},xee=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{a(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},ZXe=5e3,Eee=class{constructor(e,r){this.ctx=e;this.config=r;this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new Sr(ZXe);this.allowedExtensions=new Set(mR);this.invalidDocumentCache=new $S(ZXe,this.config.InvalidCacheTime),this.cachedDocuments=new Pj(this.config.MaxActiveFiles)}static{a(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(fr).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}setAllowedLanguages(e){this.allowedExtensions=new Set(e.flatMap(r=>Tx[r]?.extensions??[]))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let o=n.document.getNode(e);if(o!==void 0)return{...n,node:o}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){let r,n=this.uriCache.get(e);if(n!==null){if(n!==void 0)r=n;else try{if(Nj(e),r=Bl(e),!(this.ctx.get(fr).getWorkspaceFolder({uri:r})!==void 0)){this.uriCache.set(e,null);return}this.uriCache.set(e,r)}catch{this.uriCache.set(e,null);return}if(!(!this.allowedExtensions.has(eNe(r))||this.invalidDocumentCache.has(r)))return r}}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.parsers.values())e.dispose();this.parsers.clear(),this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let r of e){let n=this.normalizeUri(r);n!==void 0&&(this.targetSet.add(n),this.updateDocument(n))}for(let r of[...this.activeDocuments.keys()])this.targetSet.has(r)||this.deactivateDocument(r)}}popChanges(){let e=new vee(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let r=this.pendingUpdates.get(e);r!==void 0&&await r}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new xee(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new Bh;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&this.isStarted()&&(this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new xee(n,o=>this.disposeDocument(o))))),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let o;try{o=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let c=new Set(r.getAllIds());r.update(n);let l=new Set(r.getAllIds()),u=[...l].filter(p=>!c.has(p)),d=[...c].filter(p=>!l.has(p));return this.recordDocumentChanges(e,{created:u,invalidated:d}),r}let s=new yee(n,o,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:s.getAllIds(),invalidated:[]}),s}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()})}recordDocumentChanges(e,r){let n=Qh(this.createdNodes,e,()=>new Set),o=Qh(this.invalidatedNodes,e,()=>new Set);for(let s of r.created)n.add(s),this.nodeToDoc.set(s,e);for(let s of r.invalidated)n.has(s)?n.delete(s):o.add(s),this.nodeToDoc.delete(s)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await XXe(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e)||this.normalizeUri(e)===void 0)return;let r=this.ctx.get(fr),n=r.getWorkspaceFolder({uri:e}),o=!0;if(n!==void 0){let c=r.getRelativePath({uri:e});c!==void 0&&(await this.ctx.get(J0).findFiles(c,{uri:n.uri},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0})).includes(e)&&(o=!1)}if(o){Ozt.debug(this.ctx,`${e} is excluded from workspace context`),this.invalidDocumentCache.set(e,!0,3600*1e3);return}let s=await this.ctx.get(In).getOrReadTextDocument({uri:e});if(s.status!=="valid"||s.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return s.document}handleDocumentChange(e){let r=e.document.uri;this.isKnownDocument(r)&&this.staleDocuments.add(r)}};var eZe=Ne(require("events"));var Qzt={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10,MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3},HA=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Bh;this.config=Qzt;this.emitter=new eZe.default;this.flushUpdatesPromise=void 0;this.emitter.setMaxListeners(27),this.contextManager=new Eee(e,this.config),this.coordinator=new gee(this.contextManager,this.config),this.tokenEventDisposable=Pa(e,r=>{this.maybeStart(r)})}static{a(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(e){if(this.didStart||this.didDispose)return;let r=Bi(this.ctx,qt.UseWorkspaceContextCoordinator);if(r===void 0&&e){let n=await this.ctx.get(Lt).updateExPValuesAndAssignments(e);r=this.isEnabled(n)}r&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return Bi(this.ctx,qt.UseWorkspaceContextCoordinator)??this.ctx.get(Lt).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.deferredStart.resolve(),this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,r){this.isActive()&&this.coordinator.pushWorkspaceContext(e,r)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),An.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),An.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}setContextLanguages(e){this.contextManager.setAllowedLanguages(e)}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights(),r=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:n})=>n);if(this.contextManager.trySetActiveDocuments(r),this.flushUpdatesPromise=this.contextManager.flushUpdates(),await this.flushUpdatesPromise,this.isActive()){let n=this.config.UpdateInterval,o={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:n};this.emitter.emit(t.UpdateEventName,o),await KC(n)}}}catch(e){Ix(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};function fEe(t,e){let r=eu(t,e,"event.WorkspaceContextUpdate");return t.get(HA).onUpdate(r)}a(fEe,"onWorkspaceContextUpdate");f();var Uzt=2e4,bee=class{constructor(e){this.ctx=e;this.name="workspaceContext";this.documents=new Map;this.root=tw;this.costFunction=cEe(new bT);this.disposables=[];this.costCache=new Sr(Uzt);this.rootWithPathCache=new Sr;this.disposables.push(fEe(e,r=>{(this.nextUpdateTime===void 0||performance.now()>=this.nextUpdateTime)&&setTimeout(()=>{this.update(r.weights,r.context)},0)}))}static{a(this,"WorkspaceContextPromptComponent")}snapshot(e){let{completionState:r,telemetryData:n}=e;this.nextUpdateTime=this.lastUpdateTime!==void 0?this.lastUpdateTime+this.ctx.get(Lt).workspaceContextCacheTime(n):performance.now();let o=Qh(this.rootWithPathCache,r.textDocument.uri,()=>{let c=cEe(Oi(e.promptOpts?.tokenizer));this.costFunction=u=>Qh(this.costCache,u.id,()=>c(u));let l=this.getPathMarker(r);return new Np(gc(),[`${l}
`,""],[this.root],1,0,!0,"")}),s=this.getMask(r.textDocument.uri);return{root:o,mask:s}}getRoot(){return this.root}getMask(e){let r=this.documents.get(e);return r===void 0?[]:[r.id]}getPathMarker(e){let r=e.textDocument,n=this.ctx.get(fr),o=n.getRelativePath(e.textDocument),s={uri:r.uri,source:"",relativePath:o,languageId:r.detectedLanguageId},c=n.findNotebook(r);return s.relativePath&&!c?XC(SZ(s),s.languageId):XC(_Z(s),s.languageId)}update(e,r){this.rootWithPathCache.clear(),this.documents.clear();for(let{uri:n}of e.documents){let o=r.getDocument(n);if(o?.isActive!==!0)continue;let s=this.createAnnotatedDocumentRoot(o.document),c=F7(s,this.costFunction);this.documents.set(n,c),c.updateWeights(u=>e.getNodeWeight(u.id)??0),c.requireRenderedChild=!0;let l=c.children[0];l.requireRenderedChild=l.children.length>0}this.root=this.createRootNode(),this.lastUpdateTime=performance.now()}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return new Np(gc(),e,r,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:gc(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,r){let o=this.ctx.get(fr).getRelativePath({uri:e});return XC(`Related portions of ${o??e}:
`,r)}dispose(){for(let e of this.disposables)e.dispose();this.disposables=[]}};f();f();var Iee=class extends hee{static{a(this,"WorkspaceContextPromptFactory")}constructor(e){let r={stableContext:new bee(e),prefix:new uee,suffix:new dee(e),volatileContext:new mee("volatileContext",[new fee,new pee(e)])};super(e,r)}};var tZe=Ne(Ai());var Ux=class{static{a(this,"CompletionsPromptFactory")}};function Tee(t,e,r){return new pEe(new mEe(new hEe(t,new oee(t,e,r),new Iee(t),Hzt)))}a(Tee,"createCompletionsPromptFactory");var pEe=class extends Ux{constructor(r){super();this.delegate=r}static{a(this,"SequentialCompletionsPromptFactory")}async prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return Qx;try{return await this.delegate.prompt(r,n)}catch{return j3}}},qzt=1200,mEe=class{constructor(e){this.delegate=e}static{a(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(e,r){let n=new tZe.CancellationTokenSource,o=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,o),new Promise(s=>{setTimeout(()=>{n.cancel(),s(rZe)},qzt)})])}},hEe=class{constructor(e,r,n,o){this.ctx=e;this.defaultDelegate=r;this.experimentalDelegate=n;this.fn=o}static{a(this,"ExperimentalCompletionsPromptFactory")}async prompt(e,r){return this.fn(this.ctx,e.telemetryData)?this.experimentalDelegate.prompt(e,r):this.defaultDelegate.prompt(e,r)}};function Hzt(t,e){let r=t.get(HA);return r.isEnabled(e)&&r.isActive()}a(Hzt,"workspaceContextEnabledAndActive");var see=10,aee={type:"contextTooShort"},cee={type:"copilotContentExclusion"},j3={type:"promptError"},Qx={type:"promptCancelled"},rZe={type:"promptTimeout"};function ew(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,o=t.slice(0,t.length-n),s=t.slice(o.length);return[r.length==n?o:t,s]}a(ew,"trimLastLine");function z3(t,e,r,n,o,s={}){let l=t.get(fr).findNotebook(r.textDocument),u=l?.getCellFor(r.textDocument);l&&u&&(r=Wzt(r,l,u)),n.extendWithConfigProperties(t),n.sanitizeKeys();let d=LXe(t,n);return t.get(Ux).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...s,separateContext:d}},o)}a(z3,"extractPrompt");function $zt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:XC(n,e)}a($zt,"addNeighboringCellsToPrompt");function Wzt(t,e,r){let o=e.getCells().filter(l=>l.index<r.index&&VZ(r.document.detectedLanguageId,l.document.detectedLanguageId)),s=o.length>0?o.map(l=>$zt(l,r.document.detectedLanguageId)).join(`

`)+`

`:"",c={line:0,character:0};return t.applyEdits([{newText:s,range:{start:c,end:c}}])}a(Wzt,"applyEditsForNotebook");function W3(t,e,r){let o=t.get(Lt).maxPromptCompletionTokens(e)-ZX(t),s=VJe(e,r),c=vZ(t,e,r),l=t.get(Lt).suffixPercent(e),u=t.get(Lt).suffixMatchThreshold(e);if(l<0||l>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${l}`);if(u<0||u>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${u}`);return{maxPromptLength:o,similarFilesOptions:c,numberOfSnippets:s,suffixPercent:l,suffixMatchThreshold:u}}a(W3,"getPromptOptions");f();f();var nZe=2.98410452738298,iZe=-.838732736843507,oZe=1.50314646255716,sZe=-.237798634012662,wee={python:.314368072478742},aZe={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var jzt={link:a(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:a(t=>Math.log(t/(1-t)),"unlink")};function Gzt(t,e){let r=Math.min(...Array.from(e.keys()).filter(c=>c>=t)),n=Math.max(...Array.from(e.keys()).filter(c=>c<t)),o=e.get(r),s=e.get(n);return s+(o-s)*(t-n)/(r-n)}a(Gzt,"linearInterpolation");var K3=class{static{a(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(o=>o)}contribution(e){return this.coefficient*this.transformation(e)}},gEe=class{constructor(e,r,n){this.link=jzt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let o in n)this.logitsToQuantiles.set(n[o],Number(o))}static{a(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let o of this.coefficients){let s=r[o.name];if(s===void 0)return NaN;n+=o.contribution(s)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return Gzt(n,this.logitsToQuantiles)}},cZe=new gEe(nZe,[new K3("compCharLen",iZe,t=>Math.log(1+t)),new K3("meanLogProb",oZe),new K3("meanAlternativeLogProb",sZe)].concat(Object.entries(wee).map(t=>new K3(t[0],t[1]))),aZe);function lZe(t,e){let r={...e.measurements};return Object.keys(wee).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),cZe.predict(t,r)}a(lZe,"ghostTextScoreConfidence");function uZe(t,e){let r={...e.measurements};return Object.keys(wee).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),cZe.quantile(t,r)}a(uZe,"ghostTextScoreQuantile");f();f();var Vzt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function _ee(t){let e=t.slice();return e.reverse(),dZe(e)||dZe(e.filter(r=>r.trim().length>0))}a(_ee,"isRepetitive");function dZe(t){let e=zzt(t);for(let r of Vzt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}a(dZe,"isRepeatedPattern");function zzt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}a(zzt,"kmp_prefix_function");function Kzt(t,e,r,n){let o="}";try{o=Nje(e.detectedLanguageId)??"}"}catch{}return Yzt({getLineText:a(s=>e.lineAt(s).text,"getLineText"),getLineCount:a(()=>e.lineCount,"getLineCount")},r,n,o)}a(Kzt,"maybeSnipCompletion");function Yzt(t,e,r,n){let o=Jzt(r),s=o.lines;if(s.length===1)return r;for(let c=1;c<s.length;c++){let l=!0,u=0,d=0;for(let p=0;p+c+d<s.length;p++){let m;for(;;){let y=e.line+1+p+u;if(m=y>=t.getLineCount()?void 0:t.getLineText(y),m!==void 0&&m.trim()==="")u++;else break}let h,g;for(;h=c+p+d,g=h>=s.length?void 0:s[h],g!==void 0&&g.trim()==="";)d++;let A=h===s.length-1;if(!g||!(m&&(A?m.startsWith(g)||g.startsWith(m):m===g&&g.trim()===n))){l=!1;break}}if(l)return s.slice(0,c).join(o.newLineCharacter)}return r}a(Yzt,"maybeSnipCompletionImpl");function Jzt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}a(Jzt,"splitByNewLine");function Xzt(t,e,r,n){let o="",s=e.line+1,c=n?r.trim():r;for(;o===""&&s<t.lineCount;){if(o=t.lineAt(s).text,n&&(o=o.trim()),o===c)return!0;s++}return!1}a(Xzt,"matchesNextLine");function O7(t,e,r,n,o,s){if(_ee(n.tokens)){let l=zr.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Nt(t,"repetition.detected",l,1),s.info(t,"Filtered out repetitive solution");return}let c={...n};if(Xzt(e,r,c.completionText,!o)){let l=zr.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Nt(t,"completion.alreadyInDocument",l),Nt(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(c.completionText)}),1),s.info(t,"Filtered out solution matching next line");return}return c.completionText=Kzt(t,e,r,c.completionText),c.completionText?c:void 0}a(O7,"postProcessChoiceInContext");function fZe(t,e,r){let o=t.lineAt(e.line).text.substring(e.character);if(o.length>0){if(r.completionText.indexOf(o)!==-1)return o.length;{let s=-1,c=0;for(let l of o){let u=r.completionText.indexOf(l,s+1);if(u>s)c++,s=u;else break}return c}}return 0}a(fZe,"checkSuffix");var gZe=Ne(xI());var ms=new ft("ghostText");var pZe=20;async function AZe(t,e,r,n,o,s,c){ms.debug(t,`Getting ${s} from network`),r=r.extendedBy();let l=e.isCycling?3:1,u=_3(t,l),d={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:Qje(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},p={n:l,temperature:u,code_annotations:!1},m=Bi(t,qt.ModelAlwaysTerminatesSingleline)??t.get(Lt).modelAlwaysTerminatesSingleline(r),h=e.blockMode==="moremultiline"&&jC.isSupported(e.languageId)&&!m;!e.multiline&&!h?p.stop=[`
`]:e.stop&&(p.stop=e.stop),e.maxTokens!==void 0&&(p.max_tokens=e.maxTokens);let g=Date.now(),A={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(u),n:JSON.stringify(l),stop:JSON.stringify(p.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,A);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:l,uiKind:"ghostText",postOptions:p,headers:e.headers,extra:d},v=await t.get(Pp).fetchAndStreamCompletions(t,y,r,o,n);return v.type==="failed"?{type:"failed",reason:v.reason,telemetryData:mc(r,t)}:v.type==="canceled"?(ms.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:v.reason,telemetryData:zT(r)}):c(g,v.getProcessingTime(),v.choices)}catch(y){if(Sd(y))return{type:"canceled",reason:"network request aborted",telemetryData:zT(r,{cancelledNetworkRequest:!0})};if(ms.exception(t,y,"Error on ghost text request"),t.get(hp).notifyUser(t,y),O4(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:mc(r,t)}}}a(AZe,"genericGetCompletionsFromNetwork");function AEe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}a(AEe,"postProcessChoices");async function eKt(t,e,r,n,o){return AZe(t,e,r,n,o,"completions",async(s,c,l)=>{let d=await l[Symbol.asyncIterator]().next();if(d.done)return ms.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:mc(r,t)};if(n?.isCancellationRequested)return ms.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:zT(r)};let p=d.value;if(p===void 0)return ms.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:mc(r,t)};CZe(t,"performance",p,s,c),ms.debug(t,`Awaited first result, id:  ${p.choiceIndex}`);let m=AEe(p,e);m&&(See(t,e,m),ms.debug(t,`GhostText first completion (index ${m?.choiceIndex}): ${JSON.stringify(m?.completionText)}`));let h=(async()=>{let g=m!==void 0?[m]:[];for await(let A of l){if(A===void 0)continue;ms.debug(t,`GhostText later completion (index ${A?.choiceIndex}): ${JSON.stringify(A.completionText)}`);let y=AEe(A,e,g);y&&(g.push(y),See(t,e,y))}})();return Xg(t)&&await h,m?{type:"success",value:[yEe(m,{forceSingleLine:!1}),h],telemetryData:mc(r,t),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:mc(r,t)}})}a(eKt,"getCompletionsFromNetwork");async function tKt(t,e,r,n,o){return AZe(t,e,r,n,o,"all completions",async(s,c,l)=>{let u=[];for await(let d of l){if(n?.isCancellationRequested)return ms.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:zT(r)};let p=AEe(d,e,u);p&&u.push(p)}if(u.length>0){for(let d of u)See(t,e,d);CZe(t,"cyclingPerformance",u[0],s,c)}return{type:"success",value:[u,Promise.resolve()],telemetryData:mc(r,t),telemetryBlob:r,resultType:3}})}a(tKt,"getAllCompletionsFromNetwork");function yEe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,o=n.match(/^\r?\n/);o?r.completionText=o[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}a(yEe,"makeGhostAPIChoice");function mZe(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}a(mZe,"takeNLines");async function rKt(t,e,r,n,o,s,c,l){let u=t.get(Lt).multilineAfterAcceptLines(l),d=t.get(_A).forLanguage(t,e.textDocument.detectedLanguageId,l);switch(d){case"server":return c?{blockMode:"parsing",requestMultiline:!0,finishedCb:mZe(u),stop:[`

`],maxTokens:pZe*u}:{blockMode:"server",requestMultiline:!0,finishedCb:a(p=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let p;try{p=await dKt(t,d,e.textDocument,e.position,s,c,n)}catch{p={requestMultiline:!1}}if(!c&&p.requestMultiline&&t.get(Lt).singleLineUnlessAccepted(l)&&(p.requestMultiline=!1),p.requestMultiline){let m;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?m=Is.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):m=e.position,{blockMode:d,requestMultiline:!0,...hZe(t,d,e.textDocument,m,p.blockPosition,r,!0,n.prompt,l)}}if(c){let m={blockMode:"parsing",requestMultiline:!0,finishedCb:mZe(u),stop:[`

`],maxTokens:pZe*u};return d==="moremultiline"&&(m.blockMode="moremultiline"),m}return{blockMode:d,requestMultiline:!1,...hZe(t,d,e.textDocument,e.position,p.blockPosition,r,!1,n.prompt,l)}}}}a(rKt,"getGhostTextStrategy");function hZe(t,e,r,n,o,s,c,l,u){if(c&&e==="moremultiline"&&jC.isSupported(r.detectedLanguageId)){let d=o==="empty-block"||o==="block-end"?t.get(Lt).longLookaheadSize(u):t.get(Lt).shortLookaheadSize(u);return{finishedCb:new eZ(t,s,r.detectedLanguageId,!1,d,(m,h)=>{let g={prefix:s+m,prompt:{...l,prefix:l.prefix+m}};See(t,g,h)}).getFinishedCallback(),maxTokens:t.get(Lt).maxMultilineTokens(u)}}return{finishedCb:c?I7(t,r,n):d=>{}}}a(hZe,"buildFinishedCallback");var nKt={isCycling:!1,promptOnly:!1,isSpeculative:!1};function iKt(t,e,r){let n=Bi(t,qt.CompletionsDebounce)??t.get(Lt).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let o=La()-r.issuedTime;return Math.max(0,n-o)}a(iKt,"getRemainingDebounceMs");function Q7(t,e,r){return r?.isCancellationRequested||e!==t.get(Mp).currentRequestId}a(Q7,"inlineCompletionRequestCancelled");async function oKt(t,e,r,n,o,s){let c=n.issuedTime,l=[];function u(v){let b=La();l.push([v,b-c]),c=b}a(u,"recordPerformance"),u("telemetry");let d=t.get(Lt);if(Q7(t,r,o))return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:mc(n,t)};let p=aKt(e.textDocument,e.position);if(p===void 0)return ms.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:mc(n,t)};let m=TT(t,n),h={...nKt,...s,tokenizer:m.tokenizer},g=await z3(t,r,e,n,void 0,h);if(u("prompt"),g.type==="copilotContentExclusion")return ms.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:mc(n,t)};if(g.type==="contextTooShort")return ms.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:mc(n,t)};if(g.type==="promptError")return ms.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:mc(n,t)};if(h.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:g};if(g.type==="promptCancelled")return ms.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:mc(n,t)};if(g.type==="promptTimeout")return ms.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:mc(n,t)};if(g.prompt.prefix.length===0&&g.prompt.suffix.length===0)return ms.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:mc(n,t)};let A=iKt(t,h,n);return A>0&&(ms.debug(t,`Debouncing ghost text request for ${A}ms`),await KC(A),Q7(t,r,o))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:mc(n,t)}:t.get($o).withProgress(async()=>{let[v]=ew(e.textDocument.getText(Is.range(Is.position(0,0),e.position))),b=t.get(Mp).hasAcceptedCurrentCompletion(v,g.prompt.suffix),I=g.prompt,S=await rKt(t,e,v,g,h.isCycling,p,b,n);u("strategy");let k=sKt(t,v,I,S.requestMultiline);u("cache");let N=wT(t,e.textDocument.uri),F={blockMode:S.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:N,engineModelId:m.modelId,ourRequestId:r,prefix:v,prompt:g.prompt,multiline:S.requestMultiline,indentation:gZ(e.textDocument,e.position),isCycling:h.isCycling,headers:m.headers,stop:S.stop,maxTokens:S.maxTokens,afterAccept:b};F.headers={...F.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":h.isSpeculative?"true":"false"};let O=gKt(t,e.textDocument,F,e.position,g,n,m,h);if(k===void 0&&!h.isCycling&&t.get(kp).shouldWaitForAsyncCompletions(v,g.prompt)){let j=await t.get(kp).getFirstMatchingRequestWithTimeout(r,v,g.prompt,h.isSpeculative,O);if(u("asyncWait"),j){let Z=!S.requestMultiline;k=[[yEe(j[0],{forceSingleLine:Z})],4]}if(Q7(t,r,o))return ms.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:mc(O,t)}}let Y=S.blockMode==="moremultiline"&&jC.isSupported(e.textDocument.detectedLanguageId);if(k!==void 0&&(k[0]=k[0].map(j=>O7(t,e.textDocument,e.position,j,Y,ms)).filter(j=>j!==void 0)),k!==void 0&&k[0].length===0)return ms.debug(t,`Found empty inline suggestions locally via ${S3(k[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:mc(O,t)};if(k!==void 0&&k[0].length>0&&(!h.isCycling||k[0].length>1))ms.debug(t,`Found inline suggestions locally via ${S3(k[1])}`);else{if(h.isCycling){let j=await tKt(t,F,O,o,S.finishedCb);if(j.type==="success"){let Z=k?.[0]??[];j.value[0].forEach(ie=>{Z.findIndex(ne=>ne.completionText.trim()===ie.completionText.trim())===-1&&Z.push(ie)}),k=[Z,3]}else if(k===void 0)return j}else{let j=a((re,fe)=>(t.get(kp).updateCompletion(r,re),S.finishedCb(re,fe)),"finishedCb"),Z=new An.CancellationTokenSource,ie=eKt(t,F,O,Z.token,j);t.get(kp).queueCompletionRequest(r,v,g.prompt,Z,ie);let ne=await t.get(kp).getFirstMatchingRequest(r,v,g.prompt,h.isSpeculative);if(ne===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:mc(O,t)};k=[[ne[0]],4]}u("network")}if(k===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:mc(O,t)};let[z,V]=k,U=z.map(j=>O7(t,e.textDocument,e.position,j,Y,ms)).filter(j=>j!==void 0),H=Bi(t,qt.CompletionsDelay)??d.completionsDelay(n),ee=La()-n.issuedTime,J=Math.max(H-ee,0);if(V!==2&&!h.isCycling&&J>0&&(ms.debug(t,`Waiting ${J}ms before returning completion`),await KC(J),Q7(t,r,o)))return ms.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:zT(O)};let G=[];for(let j of U){let Z=hKt(t,e.textDocument,F,j,O),ie=p?fZe(e.textDocument,e.position,j):0,re={completion:fKt(j.choiceIndex,j.completionText,g.trailingWs),telemetry:Z,isMiddleOfTheLine:p,suffixCoverage:ie,copilotAnnotations:j.copilotAnnotations,clientCompletionId:j.clientCompletionId};G.push(re)}return O.properties.clientCompletionId=G[0]?.clientCompletionId,O.measurements.foundOffset=G?.[0]?.telemetry?.measurements?.foundOffset??-1,ms.debug(t,`Produced ${G.length} results from ${S3(V)} at ${O.measurements.foundOffset} offset`),Q7(t,r,o)?{type:"canceled",reason:"after post processing completions",telemetryData:zT(O)}:(h.isSpeculative||t.get(Mp).setGhostText(v,g.prompt.suffix,U,V),u("complete"),{type:"success",value:[G,V],telemetryData:mc(O,t),telemetryBlob:O,resultType:V,performanceMetrics:l})})}a(oKt,"getGhostTextWithoutAbortHandling");async function CEe(t,e,r,n){let o=Ir();t.get(Mp).currentRequestId=o;let s=await mKt(t,e.textDocument,o,n);await dR.catch(()=>{});try{return t.get(Dp).schedule(e,o,n?.opportunityId??"",s,r,n),t.get(zC).notifyRequest(e,o,s,r,n),await oKt(t,e,o,s,r,n)}catch(c){if(Sd(c))return{type:"canceled",reason:"aborted at unknown location",telemetryData:zT(s,{cancelledNetworkRequest:!0})};throw c}}a(CEe,"getGhostText");function sKt(t,e,r,n){let o=t.get(Mp).getCompletionsForUserTyping(e,r.suffix),s=pKt(t,e,r.suffix,n);if(o&&o.length>0){let c=(s??[]).filter(l=>!o.some(u=>u.completionText===l.completionText));return[o.concat(c),2]}if(s&&s.length>0)return[s,1]}a(sKt,"getLocalInlineSuggestion");function aKt(t,e){let r=cKt(e,t),n=lKt(e,t);return r&&!n?void 0:r&&n}a(aKt,"isInlineSuggestion");function cKt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}a(cKt,"isMiddleOfTheLine");function lKt(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}a(lKt,"isValidMiddleOfTheLinePosition");function uKt(t,e){return e.lineAt(t).text.trim().length===0}a(uKt,"isNewLine");var qx=class t{constructor(e=!1){this.requestMultilineOverride=e}static{a(this,"ForceMultiLine")}static{this.default=new t}};async function dKt(t,e,r,n,o,s,c){if(t.get(qx).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Nt(t,"ghostText.longFileMultilineSkip",zr.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&jC.isSupported(r.detectedLanguageId))return s?{requestMultiline:!0,blockPosition:await Lje(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&uKt(n,r))return{requestMultiline:!0};let u=!1;return!o&&q0(r.detectedLanguageId)?u=await hZ(r,n):o&&q0(r.detectedLanguageId)&&(u=await hZ(r,n)||await hZ(r,r.lineAt(n).range.end)),u||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(u=KYe(c.prompt,r.detectedLanguageId)>.5),{requestMultiline:u}}return{requestMultiline:!1}}a(dKt,"shouldRequestMultiline");function See(t,e,r){t.get(LA).append(e.prefix,e.prompt.suffix,r)}a(See,"appendToCache");function fKt(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}a(fKt,"adjustLeadingWhitespace");function pKt(t,e,r,n){let o=t.get(LA).findAll(e,r);return o.length===0?(ms.debug(t,"Found no completions in cache"),[]):(ms.debug(t,`Found ${o.length} completions in cache`),o.map(s=>yEe(s,{forceSingleLine:!n})))}a(pKt,"getCompletionsFromCache");async function mKt(t,e,r,n){let o={headerRequestId:r};n?.opportunityId&&(o.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(o.completionsActive="true"),n?.isSpeculative&&(o.reason="speculative");let s=zr.createAndMarkAsIssued(o);return await t.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},s)}a(mKt,"createTelemetryWithExp");function hKt(t,e,r,n,o){let s=n.requestId,c={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(c.originalChoiceIndex=c.choiceIndex,c.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let l={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(l.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(l.meanAlternativeLogProb=n.meanAlternativeLogProb);let u=n.telemetryData.extendedBy(c,l);return u.issuedTime=o.issuedTime,u.measurements.timeToProduceMs=performance.now()-o.issuedTime,yZe(u,e),u.extendWithRequestId(s),u.measurements.confidence=lZe(t,u),u.measurements.quantile=uZe(t,u),ms.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${u.measurements.confidence} (expected as good or better than about ${u.measurements.quantile} of all suggestions)`),u}a(hKt,"telemetryWithAddData");function gKt(t,e,r,n,o,s,c,l){let u={languageId:e.detectedLanguageId};u.afterAccept=r.afterAccept.toString(),u.isSpeculative=l.isSpeculative.toString();let d=s.extendedBy(u);yZe(d,e);let p=r.repoInfo;d.properties.gitRepoInformation=p===void 0?"unavailable":p===0?"pending":"available",p!==void 0&&p!==0&&(d.properties.gitRepoUrl=p.url,d.properties.gitRepoHost=p.hostname,d.properties.gitRepoOwner=p.owner,d.properties.gitRepoName=p.repo,d.properties.gitRepoPath=p.pathname),d.properties.engineName=c.modelId,d.properties.engineChoiceSource=c.engineChoiceSource,d.properties.isMultiline=JSON.stringify(r.multiline),d.properties.isCycling=JSON.stringify(r.isCycling);let m=e.lineAt(n.line),h=e.getText(Is.range(m.range.start,n)),g=e.getText(Is.range(n,m.range.end)),A=Array.from(o.neighborSource.entries()).map(I=>[I[0],I[1].map(S=>(0,gZe.SHA256)(S).toString())]),y={beforeCursorWhitespace:JSON.stringify(h.trim()===""),afterCursorWhitespace:JSON.stringify(g.trim()===""),neighborSource:JSON.stringify(A),blockMode:r.blockMode},v={...MD(o.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:o.computeTimeMs};o.metadata&&(y.promptMetadata=JSON.stringify(o.metadata)),o.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(o.contextProvidersTelemetry));let b=d.extendedBy(y,v);return Nt(t,"ghostText.issued",b),d}a(gKt,"telemetryIssued");function yZe(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}a(yZe,"addDocumentTelemetry");function CZe(t,e,r,n,o){let s=Date.now()-n,c=s-o,l=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:s,processingTimeMs:o,deltaMs:c,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});l.extendWithRequestId(r.requestId),Nt(t,`ghostText.${e}`,l)}a(CZe,"telemetryPerformance");var Mp=class{constructor(){this.choices=[]}static{a(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,o){o!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&vZe(this.choices[0].completionText,n))return AKt(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let o=n===this.choices?.[0].completionText,s=this.choices?.[0].finishReason;return o&&s==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function AKt(t,e){return t.filter(r=>vZe(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}a(AKt,"adjustChoicesStart");function vZe(t,e){return t.startsWith(e)&&t.length>e.length}a(vZe,"startsWithAndExceeds");f();f();f();var tk=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let o=e.get(fr);this._tracker=o.onDidChangeTextDocument(s=>{if(s.document.uri===r){for(let c of s.contentChanges)if(c.rangeOffset+c.rangeLength<=this.offset){let l=c.text.length-c.rangeLength;this._offset=this._offset+l}}})}static{a(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};f();var vEe=class t{constructor(e,r,n=[],o,s,c){this._textDocument=e;this._position=r;this.originalPosition=o??An.Position.create(r.line,r.character),this.originalVersion=s??e.version,this.originalOffset=c??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{a(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,o=this._position,s=n.offsetAt(o),c=this.editsWithPosition;for(let{range:l,newText:u}of e){let d=n.getText(l),p=n.offsetAt(l.end);if(n=n.applyEdits([{range:l,newText:u}]),s<n.offsetAt(l.start)){let h={range:l,newText:u,positionAfterEdit:An.Position.create(o.line,o.character)};r&&(h.source="selectedCompletionInfo"),c.push(h);continue}s<p&&(s=p),s+=u.length-d.length,o=n.positionAt(s);let m={range:l,newText:u,positionAfterEdit:An.Position.create(o.line,o.character)};r&&(m.source="selectedCompletionInfo"),c.push(m)}return this.updateState(n,o,c)}};function t1(t,e){return new vEe(t,e)}a(t1,"createCompletionState");f();f();f();f();f();f();var xZe="code-referencing";var Lp=new ft(xZe);var yKt=3e3,xEe=2,EZe=256,bZe=Math.log(EZe)/Math.log(xEe)/xEe,$A={connection:"disabled",maxAttempts:bZe,retryAttempts:0,initialWait:!1},Ree,kee=[];function CKt(){if(Ree)return Ree;function t(b){return kee.push(b),()=>{let I=kee.indexOf(b);I!==-1&&kee.splice(I,1)}}a(t,"subscribe");function e(){for(let b of kee)b()}a(e,"afterUpdateConnection");function r(b){$A.connection!==b&&($A.connection=b,e())}a(r,"updateConnection");function n(){return $A.connection==="connected"}a(n,"isConnected");function o(){return $A.connection==="disconnected"}a(o,"isDisconnected");function s(){return $A.connection==="retry"}a(s,"isRetrying");function c(){return $A.connection==="disabled"}a(c,"isDisabled");function l(){r("connected"),m(!1)}a(l,"setConnected");function u(){r("disconnected")}a(u,"setDisconnected");function d(){r("retry")}a(d,"setRetrying");function p(){r("disabled")}a(p,"setDisabled");function m(b){$A.initialWait!==b&&($A.initialWait=b)}a(m,"setInitialWait");function h(b,I=yKt){s()||(d(),m(!0),A(b,I))}a(h,"enableRetry");function g(){return $A.initialWait}a(g,"isInitialWait");async function A(b,I){Lp.info(b,`Attempting to reconnect in ${I}ms.`),await y(I),m(!1);let S=b.get(Qr);function k(N,F){if(N>EZe){Lp.info(F,"Max retry time reached, disabling."),p();return}let O=a(async()=>{$A.retryAttempts=Math.min($A.retryAttempts+1,bZe);try{Lp.info(F,`Pinging service after ${N} second(s)`);let Y=await S.fetch(new URL("_ping",Q4(F)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(Y.status!==200||!Y.ok)k(N**2,F);else{Lp.info(F,"Successfully reconnected."),l();return}}catch{k(N**2,F)}},"tryAgain");setTimeout(()=>void O(),N*1e3)}a(k,"succeedOrRetry"),Lp.info(b,"Attempting to reconnect."),k(xEe,b)}a(A,"attemptToPing");let y=a(b=>new Promise(I=>setTimeout(I,b)),"timeout");function v(b){return{dispose:t(b)}}return a(v,"listen"),Ree={setConnected:l,setDisconnected:u,setRetrying:d,setDisabled:p,enableRetry:h,listen:v,isConnected:n,isDisconnected:o,isRetrying:s,isDisabled:c,isInitialWait:g},Ree}a(CKt,"registerConnectionState");var rk=CKt();f();var Au={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"},U7={[Au.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[Au.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[Au.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function EEe(t){return t===401?Au.Unauthorized:t===400?Au.BadArguments:t===404?Au.NotFound:t===429?Au.RateLimit:t>=500&&t<600?Au.InternalError:t>=600?Au.ConnectionError:Au.Unknown}a(EEe,"getErrorType");function r1(t,e,r={}){return{kind:"failure",reason:EEe(Number(t)),code:Number(t),msg:e,meta:r}}a(r1,"createErrorResponse");f();var vKt=/^[1-6][0-9][0-9]$/,xKt=/([A-Z][a-z]+)/,EKt="code_referencing",q7=class{constructor(e){this.baseKey=e}static{a(this,"CodeQuoteTelemetry")}buildKey(...e){return[EKt,this.baseKey,...e].join(".")}},bEe=class extends q7{static{a(this,"CopilotOutputLogTelemetry")}constructor(){super("github_copilot_log")}handleOpen({context:e}){let r=this.buildKey("open","count"),n=zr.createAndMarkAsIssued();Nt(e,r,n)}handleFocus({context:e}){let r=zr.createAndMarkAsIssued(),n=this.buildKey("focus","count");Nt(e,n,r)}handleWrite({context:e}){let r=zr.createAndMarkAsIssued(),n=this.buildKey("write","count");Nt(e,n,r)}},dui=new bEe,IEe=class extends q7{static{a(this,"MatchNotificationTelemetry")}constructor(){super("match_notification")}handleDoAction({context:e,actor:r}){let n=zr.createAndMarkAsIssued({actor:r}),o=this.buildKey("acknowledge","count");Nt(e,o,n)}handleDismiss({context:e,actor:r}){let n=zr.createAndMarkAsIssued({actor:r}),o=this.buildKey("ignore","count");Nt(e,o,n)}},fui=new IEe,TEe=class extends q7{static{a(this,"SnippyTelemetry")}constructor(){super("snippy")}handleUnexpectedError({context:e,origin:r,reason:n}){let o=zr.createAndMarkAsIssued({origin:r,reason:n});hA(e,this.buildKey("unexpectedError"),o)}handleCompletionMissing({context:e,origin:r,reason:n}){let o=zr.createAndMarkAsIssued({origin:r,reason:n});hA(e,this.buildKey("completionMissing"),o)}handleSnippyNetworkError({context:e,origin:r,reason:n,message:o}){if(!r.match(vKt)){Lp.debug(e,"Invalid status code, not sending telemetry",{origin:r});return}let s=n.split(xKt).filter(l=>!!l).join("_").toLowerCase(),c=zr.createAndMarkAsIssued({message:o});hA(e,this.buildKey(s,r),c)}},Pee=new TEe;var bKt="twirp/github.snippy.v1.SnippyAPI";async function wEe(t,e,r,n){let o;try{o=await t.get(cr).getToken()}catch{return rk.setDisconnected(),r1(401,U7[Au.Unauthorized])}if(Lp.info(t,`Calling ${e}`),rk.isRetrying())return r1(600,"Attempting to reconnect to the public code matching service.");if(rk.isDisconnected())return r1(601,"The public code matching service is offline.");let s;try{s=await t.get(Qr).fetch(Hm(t,o,"origin-tracker",`${bKt}/${e}`),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${o.token}`,...m0(t)},signal:n})}catch{return rk.enableRetry(t),r1(602,"Network error detected. Check your internet connection.")}let c;try{c=await s.json()}catch(A){let y=A.message;throw Pee.handleUnexpectedError({context:t,origin:"snippyNetwork",reason:y}),A}if(s.ok)return{kind:"success",...c};let l={...c,code:Number(s.status)},{code:u,msg:d,meta:p}=l,m=Number(u),h=EEe(m),g=d||"unknown error";switch(h){case Au.Unauthorized:return r1(u,U7[Au.Unauthorized],p);case Au.BadArguments:return r1(u,g,p);case Au.RateLimit:return rk.enableRetry(t,60*1e3),r1(u,U7.RateLimitError,p);case Au.InternalError:return rk.enableRetry(t),r1(u,U7[Au.InternalError],p);default:return r1(u,g,p)}}a(wEe,"call");f();var Dee=E.Object({kind:E.Literal("failure"),reason:E.String(),code:E.Number(),msg:E.String(),meta:E.Optional(E.Any())}),TKt=E.Object({matched_source:E.String(),occurrences:E.String(),capped:E.Boolean(),cursor:E.String(),github_url:E.String()}),IZe=E.Object({source:E.String()}),wKt=E.Object({snippets:E.Array(TKt)}),TZe=E.Union([wKt,Dee]),wZe=E.Object({cursor:E.String()}),_Kt=E.Object({commit_id:E.String(),license:E.String(),nwo:E.String(),path:E.String(),url:E.String()}),SKt=E.Object({has_next_page:E.Boolean(),cursor:E.String()}),RKt=E.Object({count:E.Record(E.String(),E.String())}),kKt=E.Object({file_matches:E.Array(_Kt),page_info:SKt,license_stats:RKt}),_Ze=E.Union([kKt,Dee]);async function SZe(t,e,r){let n=await wEe(t,"Match",{method:"POST",body:$R(IZe,{source:e})},r);return $R(TZe,n)}a(SZe,"Match");async function RZe(t,{cursor:e},r){let n=await wEe(t,"FilesForMatch",{method:"POST",body:$R(wZe,{cursor:e})},r);return $R(_Ze,n)}a(RZe,"FilesForMatch");f();var H7=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),Bee=65;function BKt(t){let e=0,r;H7.lastIndex=0;do if(r=H7.exec(t),r&&(e+=1),e>=Bee)break;while(r);return e}a(BKt,"lexemeLength");function NKt(t,e){let r=0,n;H7.lastIndex=0;do if(n=H7.exec(t),n&&(r+=1,r>=e))return H7.lastIndex;while(n);return t.length}a(NKt,"offsetFirstLexemes");function kZe(t,e){let r=t.split("").reverse().join(""),n=NKt(r,e);return r.length-n}a(kZe,"offsetLastLexemes");function $7(t){return BKt(t)>=Bee}a($7,"hasMinLexemeLength");function LKt(t){return HC.Check(Dee,t)}a(LKt,"isError");async function PZe(t,e){let r=await e();if(LKt(r)){Pee.handleSnippyNetworkError({context:t,origin:String(r.code),reason:r.reason,message:r.msg});return}return r}a(PZe,"snippyRequest");function DZe(t){return"kind"in t&&t.kind==="failure"}a(DZe,"isMatchError");async function BZe(t,e,r,n){let s=await t.get(fr).getTextDocument({uri:e});if(!s){Lp.debug(t,`Expected document matching ${e}, got nothing.`);return}let c=s.getText();if(!$7(c)||!$7(c))return;let l=r;if(!$7(r)){let g=c.slice(0,n),A=kZe(g,Bee);l=c.slice(A,n+r.length)}if(!$7(l))return;let u=await PZe(t,()=>SZe(t,l));if(!u||DZe(u)||!u.snippets.length){Lp.info(t,"No match found");return}Lp.info(t,"Match found");let{snippets:d}=u,p=d.map(async g=>{let A=await PZe(t,()=>RZe(t,{cursor:g.cursor}));if(!A||DZe(A))return;let y=A.file_matches,v=A.license_stats;return{match:g,files:y,licenseStats:v}}),h=(await Promise.all(p)).filter(g=>g!==void 0);if(h.length)for(let g of h){let A=new Set(Object.keys(g.licenseStats?.count??{}));A.has("NOASSERTION")&&(A.delete("NOASSERTION"),A.add("unknown"));let y=Array.from(A).sort(),v=n,b=n+g.match.matched_source.length,I=s.positionAt(v),S=s.positionAt(b);await t.get(Df).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:v,offsetEnd:b,version:s.version,location:{start:I,end:S},matchingText:l,details:y.map(k=>({license:k,url:g.match.github_url}))})}}a(BZe,"fetchCitations");f();function _Ee(t,e,r=(n,o)=>n===o?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),o=new Array(e.length+1).fill(0),s=new Array(t.length+1).fill(0),c=new Array(t.length+1).fill(0),l=e[0];for(let d=0;d<t.length+1;d++)d===0?n[d]=1:n[d]=r(t[d-1],l,d-1,0),o[d]=d>0?d-1:0;for(let d=1;d<e.length;d++){let p=s;s=n,n=p,p=c,c=o,o=p,l=e[d],n[0]=d+1;for(let m=1;m<t.length+1;m++){let h=1+s[m],g=1+n[m-1],A=r(t[m-1],l,m-1,d)+s[m-1];n[m]=Math.min(g,h,A),n[m]===A?o[m]=c[m-1]:n[m]===h?o[m]=c[m]:o[m]=o[m-1]}}let u=0;for(let d=0;d<t.length+1;d++)n[d]<n[u]&&(u=d);return{distance:n[u],startOffset:o[u],endOffset:u}}a(_Ee,"editDistance");function FKt(){return new Map}a(FKt,"emptyLexDictionary");function OKt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}a(OKt,"reverseLexDictionary");function*QKt(t){let e="",r;(l=>(l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other"))(r||={});let n=0;for(let o of t){let s;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(o)?s=0:o===" "?s=1:s=2,s===n&&s!==2?e+=o:(e.length>0&&(yield e),e=o,n=s)}e.length>0&&(yield e)}a(QKt,"lexGeneratorWords");function NZe(t,e,r,n){let o=[],s=0;for(let c of r(t))n(c)&&(e.has(c)||e.set(c,e.size),o.push([e.get(c),s])),s+=c.length;return[o,e]}a(NZe,"lexicalAnalyzer");function MZe(t){return t!==" "}a(MZe,"notSingleSpace");function LZe(t,e,r=QKt){let[n,o]=NZe(t,FKt(),r,MZe),[s,c]=NZe(e,o,r,MZe);if(s.length===0||n.length===0)return{lexDistance:s.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:s.length};let l=OKt(c),u=s.length,d=l[s[0][0]],p=l[s[u-1][0]];function m(y,v,b,I){if(I===0||I===u-1){let S=l[n[b][0]];return I==0&&S.endsWith(d)||I==u-1&&S.startsWith(p)?0:1}else return y===v?0:1}a(m,"compare");let h=_Ee(n.map(y=>y[0]),s.map(y=>y[0]),m),g=n[h.startOffset][1],A=h.endOffset<n.length?n[h.endOffset][1]:t.length;return A>0&&t[A-1]===" "&&--A,{lexDistance:h.distance,startOffset:g,endOffset:A,haystackLexLength:n.length,needleLexLength:s.length}}a(LZe,"lexEditDistance");f();function nk(t){if(t.length===0)return[];let e=[],r=/\r\n|\r|\n/g,n;for(;(n=r.exec(t))!==null;)e.push({start:n.index,end:n.index+n[0].length,newline:n[0]});return e}a(nk,"countLines");function FZe(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}a(FZe,"computeCompletionText");var nw=new ft("postInsertion"),OZe=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],QZe=50,UKt=1500,qKt=.5,HKt=500,SEe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function UZe(t,e,r,n,o){let s=await t.get(In).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(s.status!=="valid")return nw.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let c=s.document,l=c.getText(),u=l.substring(0,n),d=c.positionAt(n),p=await z3(t,r.properties.headerRequestId,t1(c,d),r),m=p.type==="prompt"?p.prompt:{prefix:u,suffix:"",isFimEnabled:!1};if(m.isFimEnabled&&o!==void 0){let h=l.substring(n,o);return m.suffix=l.substring(o),{prompt:m,capturedCode:h,terminationOffset:0}}else{let h=l.substring(n),g=wxe(u,n,c.detectedLanguageId),y=UJe(g,void 0)(h),v=Math.min(l.length,n+(y?y*2:HKt)),b=l.substring(n,v);return{prompt:m,capturedCode:b,terminationOffset:y??-1}}}a(UZe,"captureCode");function Nee(t,e,r,n,o){o.forEach(({completionText:u,completionTelemetryData:d})=>{nw.debug(t,`${e}.rejected choiceIndex: ${d.properties.choiceIndex}`),hJe(t,e,d)});let s=new tk(t,n,r-1),c=new tk(t,n,r),l=a(async u=>{nw.debug(t,`Original offset: ${r}, Tracked offset: ${s.offset}`);let{completionTelemetryData:d}=o[0],{prompt:p,capturedCode:m,terminationOffset:h}=await UZe(t,n,d,s.offset+1,c.offset),g={hypotheticalPromptJson:JSON.stringify({prefix:p.prefix,context:p.context}),hypotheticalPromptSuffixJson:JSON.stringify(p.suffix)},A=d.extendedBy({...g,capturedCodeJson:JSON.stringify(m)},{timeout:u.seconds,insertionOffset:r,trackedOffset:s.offset,terminationOffsetInCapturedCode:h});nw.debug(t,`${e}.capturedAfterRejected choiceIndex: ${d.properties.choiceIndex}`,A),Nt(t,e+".capturedAfterRejected",A,1)},"checkInCode");OZe.filter(u=>u.captureRejection).map(u=>s.push(eu(t,()=>l(u),"postRejectionTasks"),u.seconds*1e3))}a(Nee,"postRejectionTasks");function W7(t,e,r,n,o,s,c,l){let u=s.extendedBy({compType:c.compType},{compCharLen:c.acceptedLength,numLines:c.acceptedLines});nw.debug(t,`${e}.accepted choiceIndex: ${u.properties.choiceIndex}`),mJe(t,e,u);let d=r;r=FZe(r,c);let p=r.trim(),m=new tk(t,o,n),h=new tk(t,o,n+r.length),g=a(async A=>{await GKt(t,e,p,n,o,A,u,m,h)},"stillInCodeCheck");if(SEe.triggerPostInsertionSynchroneously&&Xg(t)){let A=g({seconds:0,captureCode:SEe.captureCode,captureRejection:SEe.captureRejection});t.get(tl).register(A)}else OZe.map(A=>m.push(eu(t,()=>g(A),"postInsertionTasks"),A.seconds*1e3));eu(t,$Kt,"post insertion citation check")(t,o,d,r,n,l)}a(W7,"postInsertionTasks");async function $Kt(t,e,r,n,o,s){if(!s||(s.ip_code_citations?.length??0)<1){if(Lj(t)?.getTokenValue("sn")==="1")return;await BZe(t,e,n,o);return}let c=await t.get(fr).getTextDocument({uri:e});if(c){let l=REe(c.getText(),n,QZe,o);l.stillInCodeHeuristic&&(o=l.foundOffset)}for(let l of s.ip_code_citations){let u=WKt(r.length,n.length,l.start_offset);if(u===void 0){nw.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let d=o+u,p=c?.positionAt(d),m=o+jKt(r.length,n.length,l.stop_offset),h=c?.positionAt(m),g=p&&h?c?.getText({start:p,end:h}):"<unknown>";await t.get(Df).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:d,offsetEnd:m,version:c?.version,location:p&&h?{start:p,end:h}:void 0,matchingText:g,details:l.details.citations})}}a($Kt,"citationCheck");function WKt(t,e,r){if(!(e<t&&r>e))return r}a(WKt,"computeCitationStart");function jKt(t,e,r){return e<t?Math.min(r,e):r}a(jKt,"computeCitationEnd");function REe(t,e,r,n){let o=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),s=LZe(o,e),c=s.lexDistance/s.needleLexLength,{distance:l}=_Ee(o.substring(s.startOffset,s.endOffset),e);return{relativeLexEditDistance:c,charEditDistance:l,completionLexLength:s.needleLexLength,foundOffset:s.startOffset+Math.max(0,n-r),lexEditDistance:s.lexDistance,stillInCodeHeuristic:c<=qKt?1:0}}a(REe,"find");async function GKt(t,e,r,n,o,s,c,l,u){let d=await t.get(In).getOrReadTextDocument({uri:o});if(d.status==="valid"){let m=d.document.getText(),h=REe(m,r,QZe,l.offset);h.stillInCodeHeuristic||(h=REe(m,r,UKt,l.offset)),nw.debug(t,`stillInCode: ${h.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${o}. lexEditDistance fraction was ${h.relativeLexEditDistance}. Char edit distance was ${h.charEditDistance}. Inserted at ${n}, tracked at ${l.offset}, found at ${h.foundOffset}. choiceIndex: ${c.properties.choiceIndex}`);let g=c.extendedBy({},{timeout:s.seconds,insertionOffset:n,trackedOffset:l.offset}).extendedBy({},h);if(Nt(t,e+".stillInCode",g),s.captureCode){let{prompt:A,capturedCode:y,terminationOffset:v}=await UZe(t,o,g,l.offset,u.offset),b={hypotheticalPromptJson:JSON.stringify({prefix:A.prefix,context:A.context}),hypotheticalPromptSuffixJson:JSON.stringify(A.suffix)},I=c.extendedBy({...b,capturedCodeJson:JSON.stringify(y)},{timeout:s.seconds,insertionOffset:n,trackedOffset:l.offset,terminationOffsetInCapturedCode:v});nw.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${c.properties.choiceIndex}`,g),Nt(t,e+".capturedAfterAccepted",I,1)}}}a(GKt,"checkStillInCode");var zKt=new ft("ghostText"),od=class{constructor(){this.#i=[];this.linesAccepted=0}static{a(this,"LastGhostText")}#e;#t;#i;get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[],this.resetPartialAcceptanceState()}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0,this.totalLength=void 0,this.linesLeft=void 0,this.linesAccepted=0}};function KKt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,o;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),o=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,o=r.telemetry);let s={completionText:n,completionTelemetryData:o,offset:r.offset};e.push(s)}}),e}a(KKt,"computeRejectedCompletions");function kEe(t,e){let r=t.get(od);if(!r.position||!r.uri)return;let n=KKt(r);n.length>0&&Nee(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}a(kEe,"rejectLastShown");function qZe(t,e,r,n){let o=t.get(od);return o.position&&o.uri&&!(o.position.line===r.line&&o.position.character===r.character&&o.uri.toString()===e.uri.toString())&&n!==2&&kEe(t,e.offsetAt(o.position)),o.setState(e,r),o.index}a(qZe,"setLastShown");function HZe(t,e){let r=t.get(od);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;zKt.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,rZ(t,"ghostText",e)}}a(HZe,"handleGhostTextShown");function YKt(t,e,r){let n=t.get(od);n.linesLeft===void 0&&(n.linesLeft=nk(e.displayText));let o=nk(e.displayText);n.linesLeft.length>o.length&&(n.linesAccepted+=n.linesLeft.length-o.length,n.lastLineAcceptedLength=n.partiallyAcceptedLength,n.linesLeft=o),n.partiallyAcceptedLength=(n.lastLineAcceptedLength||0)+r}a(YKt,"handleLineAcceptance");function Y3(t,e,r="ghostText"){let n=t.get(od),o;return n.partiallyAcceptedLength?o={compType:"full",acceptedLength:(n.partiallyAcceptedLength||0)+e.displayText.length,acceptedLines:n.linesAccepted+(n.linesLeft?.length??0)}:o={compType:"full",acceptedLength:e.displayText.length,acceptedLines:nk(e.displayText).length},n.resetState(),W7(t,r,e.displayText,e.offset,e.uri,e.telemetry,o,e.copilotAnnotations)}a(Y3,"handleGhostTextPostInsert");function Mee(t,e,r,n=0,o="ghostText",s="line"){let c=t.get(od),l;return s==="cumulative"?(JKt(t,e,r),l={compType:c.totalLength!=null?"full":"partial",acceptedLength:c.totalLength??(c.partiallyAcceptedLength||0),acceptedLines:c.linesAccepted},l.compType==="full"&&c.resetState()):(YKt(t,e,r),l={compType:"partial",acceptedLength:c.partiallyAcceptedLength||0,acceptedLines:c.linesAccepted}),W7(t,o,e.displayText,e.offset,e.uri,e.telemetry,l,e.copilotAnnotations)}a(Mee,"handlePartialGhostTextPostInsert");function JKt(t,e,r){let n=t.get(od);n.partiallyAcceptedLength=(n.partiallyAcceptedLength||0)+r,n.linesAccepted=nk(e.insertText.substring(0,n.partiallyAcceptedLength)).length,n.partiallyAcceptedLength>=e.insertText.length&&(n.totalLength=n.partiallyAcceptedLength)}a(JKt,"handleCumulativeAcceptance");function $Ze(t){let e=new y3;return e.set(Lc,t),e.set(bC,new bC),e.set(wo,new wo),e.set(LA,new LA),e.set(cr,new cr(e)),e.set(Lt,new Lt(e)),e.set(dC,new dC),e.set(qu,new qu(e)),e.set(Vu,new Vu),e.set(hp,new hp),e.set(Pp,new b7),e.set(_A,new jB),e.set(AA,new b6),e.set(tl,new tl),e.set(zC,new zC(e)),e.set(In,new In(e)),e.set(HA,new HA(e)),e.set(Ux,Tee(e)),e.set(od,new od),e.set(Mp,new Mp),e.set(qx,qx.default),e.set(MA,new MA(e)),e.set(hh,new hh(e)),e.set(su,new su),e.set(kp,new kp(e)),e.set(bs,new bs),e.set(kh,new kh(e)),e.set(Nh,new Nh),e}a($Ze,"createCommonContext");f();f();var Lee=class extends Error{static{a(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var J3=class extends Error{static{a(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var xfi=E.Object({prompt:E.String(),speculation:E.String(),languageId:E.String(),stops:E.Array(E.String())}),j7=class{static{a(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let o={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},s=await this.ctx.get(cr).getToken(),c=await this.ctx.get(Lt).updateExPValuesAndAssignments(s),l=await this.ctx.get(Pp).fetchAndStreamSpeculation(this.ctx,o,c,(u,d)=>{},r);switch(l.type){case"success":return l;case"canceled":throw new Lee(l.reason);case"failed":throw new J3(l.reason)}}};f();f();var WZe=Ne(require("node:util"));function jZe(t,...e){return`[${t}] ${XKt(e)}`}a(jZe,"formatLogMessage");function XKt(t){return WZe.default.formatWithOptions({maxStringLength:1/0},...t)}a(XKt,"format");function Fee(t){return j3e(t)}a(Fee,"verboseLogging");var Oee=class extends el{constructor(r){super();this.console=r}static{a(this,"ConsoleLog")}logIt(r,n,o,...s){n==1?this.console.error(`[${o}]`,...s):(n==2||Fee(r))&&this.console.warn(`[${o}]`,...s)}};f();var GZe=require("node:util");var X3=class extends cC{static{a(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){hA(e,"log",zr.createAndMarkAsIssued({context:r,level:HS[1],message:ZKt(...n)}),1)}sendException(e,r,n){Ja(e,r,n)}};function ZKt(...t){return t.map(e=>(0,GZe.inspect)(e)).join(" ")}a(ZKt,"telemetryMessage");f();var lut=Ne(require("crypto")),uut=Ne(require("fs")),gne=Ne(aut()),dut=require("tls"),fut=Ne(cut());var a8=new ft("certificates"),Al=class{static{a(this,"RootCertificateReader")}};function Ane(t,e=process.platform){return new t_e(t,[new r_e,new n_e,npr(t,e)])}a(Ane,"getRootCertificateReader");function npr(t,e){switch(e){case"linux":return new i_e(t);case"darwin":return new o_e(t);case"win32":return new s_e(t);default:return new a_e}}a(npr,"createPlatformReader");var e_e=class extends Al{constructor(r,n){super();this.ctx=r;this.delegate=n}static{a(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return a8.warn(this.ctx,"Failed to read root certificates:",r),[]}}},t_e=class extends Al{constructor(r,n){super();this.ctx=r;this.delegates=n.map(o=>new e_e(r,o))}static{a(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),o=r.filter(s=>{try{let c=new lut.X509Certificate(s),l=Date.parse(c.validTo);return isNaN(l)||l>n}catch(c){return a8.warn(this.ctx,"Failed to parse certificate",s,c),!1}});return r.length!==o.length&&a8.info(this.ctx,`Removed ${r.length-o.length} expired certificates`),o}},r_e=class extends Al{static{a(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return dut.rootCertificates}},n_e=class extends Al{static{a(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await put(e):[]}},i_e=class extends Al{constructor(r){super();this.ctx=r}static{a(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let o=await put(n);a8.debug(this.ctx,`Read ${o.length} certificates from ${n}`),r=r.concat(o)}return r}},o_e=class extends Al{constructor(r){super();this.ctx=r}static{a(this,"MacRootCertificateReader")}getAllRootCAs(){let r=gne.get({excludeBundled:!1,format:gne.Format.pem});return a8.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},s_e=class extends Al{constructor(r){super();this.ctx=r}static{a(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=fut.all();return a8.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},a_e=class extends Al{static{a(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function put(t){let e;try{e=await uut.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(s=>s.length>0),o=new Set(n);return Array.from(o)}a(put,"readCertsFromFile");f();var Tut=Ne(require("http"));var Spr=407,ud=new ft("proxySocketFactory"),I1=class{static{a(this,"ProxySocketFactory")}},Lk=class extends Error{static{a(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function yne(t){return new u_e(t,new d_e(t))}a(yne,"getProxySocketFactory");var u_e=class extends I1{constructor(r,n,o=new uU,s=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=o;this.platform=s;this.successfullyAuthorized=new Sr(20)}static{a(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(ud.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(o){if(o instanceof Lk&&o.code===`ProxyStatusCode${Spr}`){ud.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let s=await this.authorizeAndCreateSocket(r,n);if(s)return ud.debug(this.ctx,"Proxy authorization successful, caching result"),Nt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),s}throw o}}async reauthorize(r,n){let o=await this.authorize(n);o&&(ud.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+o)}async authorizeAndCreateSocket(r,n){let o=await this.authorize(n);if(ud.debug(this.ctx,"Proxy authorization successful, received token"),o)return ud.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+o,await this.delegate.createSocket(r,n)}async authorize(r){ud.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),o=this.computeSpn(r);ud.debug(this.ctx,"Initializing kerberos client using spn",o);let s=await n.initializeClient(o);ud.debug(this.ctx,"Perform client side kerberos step");let c=await s.step("");return ud.debug(this.ctx,"Received kerberos server response"),c}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return ud.debug(this.ctx,"Using configured kerberos spn",n),n;let o=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return ud.debug(this.ctx,"Using default kerberos spn",o),o}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},d_e=class extends I1{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(wo).getVersion()}`}static{a(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let o=this.createConnectRequestOptions(r,n);return new Promise((s,c)=>{ud.debug(this.ctx,"Attempting to establish connection to proxy");let l=Tut.request(o);l.useChunkedEncodingByDefault=!1,l.once("connect",(u,d,p)=>{ud.debug(this.ctx,"Socket Connect returned status code",u.statusCode),l.removeAllListeners(),d.removeAllListeners(),u.statusCode!==200?(d.destroy(),c(new Lk(`tunneling socket could not be established, statusCode=${u.statusCode}`,void 0,`ProxyStatusCode${u.statusCode}`))):p.length>0?(d.destroy(),c(new Lk(`got non-empty response body from proxy, length=${p.length}`,void 0,"ProxyNonEmptyResponseBody"))):(ud.debug(this.ctx,"Successfully established tunneling connection to proxy"),s(d))}),l.once("error",u=>{ud.debug(this.ctx,"Proxy socket connection error",u.message),l.removeAllListeners(),c(new Lk(`tunneling socket could not be established, cause=${u.message}`,u))}),l.on("timeout",()=>{ud.debug(this.ctx,"Proxy socket connection timeout"),c(new Lk(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${o.hostname}:${o.port}`,void 0,"ProxyTimeout"))}),l.end()})}createConnectRequestOptions(r,n){let o=`${r.hostname}:${r.port}`,s={hostname:n.hostname,port:n.port,method:"CONNECT",path:o,agent:!1,headers:{host:o,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(s.localAddress=r.localAddress),this.configureProxyAuthorization(s,r,n.authorization),s}configureProxyAuthorization(r,n,o){r.headers["Proxy-Authorization"]=[],o&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(o).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},uU=class{static{a(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Ne(Iut()))}};f();var Rut=require("node:os");var Rpr=new ft("repository"),Fk="\\\\",kut="(?:[#;].*)",u8=`(?:[^"${Fk}]|${Fk}.)`,kpr="[0-9A-Za-z-]",wut=`[A-Za-z]${kpr}*`,Put=`\\s*${kut}?$`,Dut=`(?:[^"${Fk};#]|${Fk}.)`,Ppr=`(?:"${u8}*"|"${u8}*(?<strCont>${Fk})$)`,Dpr=`(?:${Dut}|${Ppr})+`,Bpr=`(?:(?<cont>${Fk})$)`,But=`(?<value>${Dpr})${Bpr}?${Put}`,_ut=new RegExp(`^${But}`),Npr=new RegExp(`^(?<value>${u8}*(?:(?<strCont>${Fk})$|(?<quote>")))`),Mpr=new RegExp(`^\\s*(?:(?<key>${wut})\\s*=\\s*${But}|(?<soloKey>${wut})${Put})`),Lpr=new RegExp(`(?<value>${Dut}+)|"(?<string>${u8}*)"`,"g"),Sut="[-.0-9A-Za-z]+",Fpr=`\\s+"(?<ext>${u8}*)"`,Opr=`\\s+"(?<extOnly>${u8}*)"`,Qpr=new RegExp(`^\\s*\\[(?:(?<simple>${Sut})${Fpr}|${Opr}|(?<simpleOnly>${Sut}))\\]`),Upr=new RegExp(`^\\s*${kut}$`),f_e=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{a(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(Qpr);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(Mpr);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(Npr),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(_ut),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(_ut),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(Lpr)].map(o=>o.groups?.value?(r=!0,this.unescapeValue(o.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(o.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,o)=>r[o]||o)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){Upr.test(this.line)&&(this.line="")}},Cne=class extends NA{static{a(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await MA.getRepoConfigLocation(e,r);if(!n)return;let o=await this.getParsedConfig(e,n);if(o)return this.mergeConfig(await this.baseConfig(e,n),o)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new HR)}async getParsedConfig(e,r,n=!0){let o=await this.tryLoadConfig(e,r,n);if(!o)return;let s=new f_e(o),c=new HR;return s.parse((l,u)=>c.add(l,u)),c}async tryLoadConfig(e,r,n){try{return await e.get(Qi).readFileString(r)}catch(o){(n||!(o instanceof Error)||o.code!=="ENOENT")&&Rpr.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,o);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),o=Ki(this.xdgConfigUri(),"git","config"),s=Ki(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,o,!1),await this.getParsedConfig(e,s,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Di(r).toLowerCase()!=="config.worktree")return;let n=Rd(r),o=Ki(n,"commondir");try{let s=(await e.get(Qi).readFileString(o)).trimEnd();return Ki(jS(n,s),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?Dl(process.env.XDG_CONFIG_HOME):Ki(this.homeUri(),".config")}homeUri(){return Dl((0,Rut.homedir)())}};f();var Nut=require("child_process");var vne=class extends NA{static{a(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((o,s)=>{(0,Nut.execFile)(r,n,{cwd:e},(c,l)=>{c?s(c):o(l)})})}async tryRunCommand(e,r,n,o){try{return await this.runCommand(r,n,o)}catch(s){hYe.info(e,`Failed to run command '${n}' in ${r}:`,s);return}}async getConfig(e,r){let n=rs(r);if(n===void 0)return;let o=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return o?this.extractConfig(o):void 0}extractConfig(e){let r=new HR;for(let n of e.split("\0").filter(o=>o)){let o=n.split(`
`,1)[0],s=n.slice(o.length+1);r.add(o,s)}return r}extraArgs(){return[]}};function Mut(t){let e=$Ze(t);return qpr(e),e.set(Al,Ane(e)),e.set(I1,yne(e)),e.set(NA,new LX([new vne,new Cne])),e.set(j7,new j7(e)),e}a(Mut,"createProductionContext");function qpr(t){t.set(qm,qm.fromEnvironment(!1)),t.set(cC,new X3),t.set(el,new Oee(console))}a(qpr,"setupRudimentaryLogging");var r1i=new ft("context");f();f();f();var T1="byok",ha=class{constructor(e){this.persistenceManager=e}static{a(this,"BYOKPersistence")}async getAPIKey(e,r){if(r){let o=await this.persistenceManager.read(T1,`${e}-${r}-api-key`);if(o)return o}return await this.persistenceManager.read(T1,`${e}-api-key`)}async storeAPIKey(e,r,n,o){n!==2&&(n===0?await this.persistenceManager.update(T1,`${e}-api-key`,r):n===1&&o&&await this.persistenceManager.update(T1,`${e}-${o}-api-key`,r))}async deleteAPIKey(e,r,n){r!==2&&(r===0?await this.persistenceManager.delete(T1,`${e}-api-key`):r===1&&n&&await this.persistenceManager.delete(T1,`${e}-${n}-api-key`))}async getStoredModelConfigs(e){return await this.persistenceManager.read(T1,`${e}-models-config`)||{}}async getAllModels(){let e=[];for(let r of Object.values(Mo)){let n=await this.getStoredModelConfigs(r);e.push(...Object.keys(n).map(o=>({name:o,provider:r,capabilities:n[o].modelCapabilities})))}return e}async saveModelConfig(e,r,n,o,s){let c=await this.getStoredModelConfigs(e);c[r]=n,await this.persistenceManager.update(T1,`${e}-models-config`,c),o&&s&&await this.storeAPIKey(e,o,s,r)}async removeModelConfig(e,r){let n=await this.getStoredModelConfigs(e),o=n[r];o&&(delete n[r],await this.persistenceManager.update(T1,`${e}-models-config`,n),o.deploymentUrl&&await this.deleteAPIKey(e,1,r))}async removeAllModelConfigs(e){await this.persistenceManager.delete(T1,`${e}-models-config`)}};var Mo={Azure:"Azure",OpenAI:"OpenAI",Gemini:"Gemini",Groq:"Groq",OpenRouter:"OpenRouter",Anthropic:"Anthropic"};function Mw(t){switch(t){case Mo.Azure:return 1;default:return 0}}a(Mw,"getAuthTypeForProvider");function Ene(t){return t===Mo.OpenAI||t===Mo.Gemini||t===Mo.Groq||t===Mo.OpenRouter||t===Mo.Anthropic}a(Ene,"isOpenAICompatible");async function w1(t,e,r){let o=await new ha(t.get(mi)).getStoredModelConfigs(e),s=o?Object.values(o).find(p=>p.isRegistered!==!1):void 0,c=s?.modelCapabilities,l=c?.name||r,u=c?.maxInputTokens||1e5,d=c?.maxOutputTokens||8192;return{modelId:r,uiName:l,modelFamily:Wr.BYOK,providerName:e,deploymentUrl:s?.deploymentUrl,maxRequestTokens:u,maxResponseTokens:d,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!!c?.toolCalling}}a(w1,"resolveModelConfiguration");async function Lut(t,e,r){return await new ha(t.get(mi)).getAPIKey(e,r)}a(Lut,"resolveModelKey");function Fut(t,e){let{protocol:r,hostname:n,pathname:o}=new URL(e);if(o.endsWith("/chat/completions"))return e;if(n.endsWith(".models.ai.azure.com")||n.endsWith(".inference.ml.azure.com"))return`${r}//${n}/v1/chat/completions`;if(n.endsWith(".openai.azure.com"))return`${r}//${n}/openai/deployments/${t}/chat/completions?api-version=2025-01-01-preview`;throw new Error(`Unrecognized Azure deployment URL: ${e}`)}a(Fut,"resolveAzureUrl");f();var dU=new ft("openAICompatibleLMProvider"),p_e={[Mo.OpenAI]:"https://api.openai.com/v1",[Mo.Gemini]:"https://generativelanguage.googleapis.com/v1beta/openai",[Mo.Groq]:"https://api.groq.com/openai/v1",[Mo.OpenRouter]:"https://openrouter.ai/api/v1",[Mo.Anthropic]:"https://api.anthropic.com/v1"},eg=class{constructor(e,r){this._lastFetchTime=0;this.providerName=e,this.ctx=r}static{a(this,"BaseOpenAICompatibleLMProvider")}async getAllModels(){await this.ensureKnownModelsCache();try{let e=this.getFetchModelUrl(),r={"Content-Type":"application/json"},n=await new ha(this.ctx.get(mi)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let o=await fetch(e,{method:"GET",headers:r});if(!o.ok)throw new Error(`Failed to fetch models: ${o.status} ${o.statusText}`);let s=await o.json();if(s.error)throw new Error(`API Error: ${JSON.stringify(s.error)}`);let c=[];for(let l of s.data){let u=this._knownModels?.[l.id];u&&c.push({providerName:this.providerName,modelId:l.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:u})}return c}catch(e){throw dU.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,e),e}}getBaseUrl(){let e=p_e[this.providerName];if(!e)throw new Error(`Unsupported provider: ${this.providerName}`);return e}getFetchModelUrl(){return`${this.getBaseUrl()}/models`}async ensureKnownModelsCache(){let e=Date.now();!this._knownModels&&(this._knownModels=await this.fetchKnownModelList(),this._lastFetchTime=e)}async fetchKnownModelList(){let e=await(await this.ctx.get(Qr).fetch("https://main.vscode-cdn.net/extensions/copilotChat.json",{method:"GET"})).json(),r;return e.version!==1?r={}:r=e.modelInfo[this.providerName]||{},r}};f();var Rr=new ft("chat");f();f();var ga=(s=>(s.System="system",s.User="user",s.Assistant="assistant",s.Function="function",s.Tool="tool",s))(ga||{});function tn(t){return t?(t=cm(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}a(tn,"getTextPart");var Out=a((t,e)=>E.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),Qut=E.Optional(E.Object({agentSlug:E.String(),state:E.Union([E.Literal("accepted"),E.Literal("dismissed")]),confirmation:E.Any()}));function Lw(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}a(Lw,"parseToolCallArguments");function Uut(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}a(Uut,"toOpenAIToolCall");function qut(t,e,r,n,o,s,c,l,u){let d=JSON.parse(JSON.stringify(e));return r.tool_calls&&(d.tool_calls=r.tool_calls),T3(t,[d],l),{message:e,choiceIndex:n,requestId:o,blockFinished:s,finishReason:c,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:l,copilotEditsSessionHeader:u}}a(qut,"convertToChatCompletion");function fU(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}a(fU,"isChatCompletionContentPartArray");function bne(t){return Array.isArray(t)&&t.every(e=>"role"in e)}a(bne,"isChatMessageArray");function cm(t){if(typeof t=="string")return t;if(fU(t))return t;if(bne(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}a(cm,"resolveAsChatMessageContent");function Ok(t,e){return(typeof t=="string"||fU(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}a(Ok,"appendChatMessageContent");function Ine(t,e){if(t){if(typeof t=="string"||fU(t))return[{role:"assistant",content:t}];if(bne(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}a(Ine,"resolveResponseAsChatMessages");f();var m_e=new ft("streamMessages");function Hut(t,e,r,n){let o=e.solution.text.join(""),s=!1;e.finishOffset!==void 0&&(m_e.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),o=o.substring(0,e.finishOffset),s=!0),m_e.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),m_e.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let c=E7(e.solution),l={role:"assistant",content:o};return qut(t,l,c,e.index,e.requestId,s,e.reason??"",r,n)}a(Hut,"prepareChatCompletionForReturn");var tg=new ft("fetchChat"),Tne=class{static{a(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,o,s){let c=await this.fetchWithParameters(e,r.endpoint,r,n,s);if(c==="not-sent")return{type:"canceled",reason:"before fetch request"};if(s?.isCancellationRequested){let u=c.body();try{u.destroy()}catch(d){tg.exception(e,d,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(c.status!==200){let u=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,u,c)}e.get(kh).processQuotaHeaders(c.headers);let l=c.headers.get("copilot-edits-session")||void 0;if(r.postOptions?.stream===!1){let u=await c.text(),d=JSON.parse(u),p=d.choices!=null?d.choices[0].message:{role:"assistant",content:""},m=c.headers.get("X-Request-ID")??Ir(),h={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:p,tokens:tn(p.content).split(" "),requestId:{headerRequestId:m,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0,copilotEditsSessionHeader:l},g=tn(p.content);return await o(g,{text:g,copilotReferences:d.copilot_references}),{type:"success",chatCompletions:async function*(){yield Promise.resolve(h)}(),getProcessingTime:a(()=>w3(c),"getProcessingTime")}}else{let d=VT.create(e,r.count,c,n,[],s).processSSE(o);return{type:"success",chatCompletions:Dx(d,m=>Hut(e,m,n,l)),getProcessingTime:a(()=>w3(c),"getProcessingTime")}}}createTelemetryData(e,r,n){return zr.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,o,s){let c={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:_3(e,n.count),top_p:XX(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},l=Ex(n.repoInfo);return l!==void 0&&(c.nwo=l),n.postOptions&&Object.assign(c,n.postOptions),n.intent&&(c.intent=n.intent,n.intent_model&&(c.intent_model=n.intent_model),n.intent_tokenizer&&(c.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(c.intent_threshold=n.intent_threshold),n.intent_content&&(c.intent_content=n.intent_content)),s?.isCancellationRequested?"not-sent":await Hpr(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,c,n.authToken,n.uiKind,o,n.llmInteraction,n.apiKey,n.modelProviderName,n.copilotEditsSessionHeader,s)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let c=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;tg.error(e,c),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Nt(e,"request.shownWarning",r),n.status===401)try{let c=await n.text(),l=JSON.parse(c);if(l.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:l.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(cr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return tg.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let o=await n.text();if(n.status===466)return tg.info(e,o),{type:"failed",reason:`client not supported: ${o}`,code:n.status};if(n.status===400&&o.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&o.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&o.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:o};let s=await e.get(cr).getToken();if(n.status===402){if(o.includes("free_quota_exceeded")){let u=n.headers.get("retry-after");return{type:"failed",reason:u?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(u).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(o.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(o.includes("quota_exceeded"))switch(s.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:o,code:n.status}:(tg.error(e,"Unhandled status from server:",n.status,o),{type:"failed",reason:`unhandled status from server: ${n.status} ${o}`,code:n.status})}};async function Hpr(t,e,r,n,o,s,c,l,u,d,p,m,h,g,A){let y=n===""&&o===""?r:Ki(r,n,o),v=d.extendedBy({endpoint:o,engineName:n,uiKind:u});JX(c,v,["messages"]),v.properties.headerRequestId=s,Nt(t,"request.sent",v);let b=La(),I=oJe(u),S={...fh(t),...p.toCapiHeaders()};return Lv()&&(S=await FB(t,S)),c.messages?.some(k=>Array.isArray(k.content)?k.content.some(N=>"image_url"in N):!1)&&(S["Copilot-Vision-Request"]="true"),m&&(S["api-key"]=m),g&&(S["copilot-edits-session"]=g),c.messages&&c.messages.forEach(k=>{$pr(k)&&k.tool_calls&&(k.tool_calls=k.tool_calls.map(N=>Uut(N)))}),bx(t,y,l,I,s,c,A,S,void 0,h).then(k=>{let N=jR(k);v.extendWithRequestId(N);let F=La()-b;return v.measurements.totalTimeMs=F,tg.info(t,`Request ${s} at <${y}> finished with ${k.status} status after ${F}ms`),tg.debug(t,"request.response properties",v.properties),tg.debug(t,"request.response measurements",v.measurements),tg.debug(t,"messages:",JSON.stringify(e)),Nt(t,"request.response",v),k}).catch(k=>{if(Sd(k))throw k;let N=v.extendedBy({error:"Network exception"});Nt(t,"request.shownWarning",N),v.properties.message=String(Nf(k,"name")??""),v.properties.code=String(Nf(k,"code")??""),v.properties.errno=String(Nf(k,"errno")??""),v.properties.type=String(Nf(k,"type")??"");let F=La()-b;throw v.measurements.totalTimeMs=F,tg.info(t,`Request ${s} at <${y}> rejected with ${String(k)} after ${F}ms`),tg.debug(t,"request.error properties",v.properties),tg.debug(t,"request.error measurements",v.measurements),Nt(t,"request.error",v),k}).finally(()=>{T3(t,e,v)})}a(Hpr,"fetchWithInstrumentation");function $pr(t){return"tool_calls"in t}a($pr,"isChatMessageWithToolCalls");var Bs=class{constructor(e){this.ctx=e;this.fetcher=new Tne}static{a(this,"ChatMLFetcher")}async fetchResponse(e,r,n,o){let s=Ir(),c={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},l=e.modelConfiguration;l&&(e.prediction?.content||delete c.prediction,e.prediction||e.modelConfiguration?.providerName===void 0&&l.maxResponseTokens!==void 0&&(c.max_tokens=l.maxResponseTokens),c.stream=!!l.stream),e.logitBias&&(c.logit_bias=e.logitBias);let u=await this.ctx.get(cr).getToken(),d,p,m,h;if(e.modelConfiguration?.providerName)if(m=await Lut(this.ctx,e.modelConfiguration?.providerName,e.modelConfiguration.modelId),h=e.modelConfiguration.providerName,e.intentParams=void 0,e.modelConfiguration?.providerName===Mo.Azure)if(e.modelConfiguration.deploymentUrl)d=Fut(e.modelConfiguration.modelId,e.modelConfiguration.deploymentUrl),p="",e.engineName="";else throw new Error(`No deployment URL found for Azure model: ${e.modelConfiguration.modelId}`);else if(Ene(e.modelConfiguration?.providerName))d=p_e[e.modelConfiguration?.providerName],p=e.endpoint??"completions",e.authToken=m;else throw new Error(`Unsupported BYOK provider: ${e.modelConfiguration?.providerName}`);else d=Hm(this.ctx,u,e.copilotApiProvider??"api"),p=e.endpoint??"completions";let g=e.authToken??u.token,A={messages:e.messages,repoInfo:void 0,ourRequestId:s,copilotApiBaseUrl:d,engineName:e.engineName??"chat",endpoint:p,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:c,authToken:g,apiKey:m,modelProviderName:h,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction,copilotEditsSessionHeader:e.copilotEditsSessionHeader};return l&&(A.model=l.modelId),e.tools&&e.tools?.length>0&&(l===void 0||l.toolCalls)&&(A.tools=e.tools,A.tool_choice=e.tool_choice??"auto"),await this.fetch(A,o,r,n)}async fetch(e,r,n,o){try{let s=await this.fetcher.fetchAndStreamChat(this.ctx,e,o.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(s.type){case"success":return await this.processSuccessfulResponse(e,s,e.ourRequestId,o);case"canceled":return this.processCanceledResponse(s,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(s,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:s.authUrl,requestId:e.ourRequestId}}}catch(s){return this.processError(s,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,o){let s=[],c=v7(r.chatCompletions,u=>this.postProcess(u,o));Rr.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let l=0;for await(let u of c)Rr.debug(this.ctx,`Received choice #${l} for request ${e.ourRequestId}: ${JSON.stringify(u,null,2)}`),s.push(u),l++;if(s.length==1){let u=s[0];switch(u.finishReason){case"stop":return{type:"success",value:tn(u.message?.content)??"",toolCalls:u.tool_calls,requestId:n,numTokens:u.numTokens,copilotEditsSessionHeader:u.copilotEditsSessionHeader};case"tool_calls":return{type:"tool_calls",toolCalls:u.tool_calls,requestId:n,copilotEditsSessionHeader:u.copilotEditsSessionHeader};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:tn(u.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(s.length>1){let u=s.filter(d=>d.finishReason=="stop"||d.finishReason=="tool_calls");if(u.length>0)return{type:"successMultiple",value:u.map(d=>tn(d.message.content)),toolCalls:u.map(d=>d.tool_calls).filter(d=>d),requestId:n,copilotEditsSessionHeader:u[0].copilotEditsSessionHeader}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return _ee(e.tokens)?(r.extendWithRequestId(e.requestId),Nt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Rr.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return Sd(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Rr.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};f();var rg=class{constructor(e){this.ctx=e}static{a(this,"AbstractClientToolConfirmationInvoker")}};f();var Fw=class{constructor(e){this.ctx=e}static{a(this,"AbstractClientToolInvoker")}};f();var $ut=new ft("CommandLineAutoApprover"),sE=class{constructor(e){this.ctx=e;this._denyListRules=[];this._allowListRules=[]}static{a(this,"CommandLineAutoApprover")}updateConfiguration(e){let{denyListRules:r,allowListRules:n}=this._mapAutoApproveConfigToRules(e);this._allowListRules=n,this._denyListRules=r}isCommandAutoApproved(e){for(let r of this._denyListRules)if(this._commandMatchesRegex(r.regex,e))return{result:"denied",reason:`Command '${e}' is denied by deny list rule: ${r.sourceText}`};for(let r of this._allowListRules)if(this._commandMatchesRegex(r.regex,e))return{result:"approved",reason:`Command '${e}' is approved by allow list rule: ${r.sourceText}`};return{result:"noMatch",reason:`Command '${e}' has no matching auto approve entries`}}_commandMatchesRegex(e,r){return!!e.test(r)}_mapAutoApproveConfigToRules(e){if(!e||typeof e!="object")return{denyListRules:[],allowListRules:[]};let r=[],n=[];return Object.entries(e).forEach(([o,s])=>{if(typeof s=="boolean"){let c=this._convertAutoApproveEntryToRegex(o);s===!0?n.push({regex:c,sourceText:o}):s===!1&&r.push({regex:c,sourceText:o})}else if(typeof s=="object"&&s!==null){let c=s;if(typeof c.approve=="boolean"){let l=this._convertAutoApproveEntryToRegex(o);c.approve===!0?n.push({regex:l,sourceText:o}):c.approve===!1&&r.push({regex:l,sourceText:o})}}}),$ut.debug(this.ctx,"Update CommandLineAutoApprover denyListRules",r),$ut.debug(this.ctx,"Update CommandLineAutoApprover allowListRules",n),{denyListRules:r,allowListRules:n}}_convertAutoApproveEntryToRegex(e){let r=e.match(/^\/(?<pattern>.+)\/(?<flags>[dgimsuvy]*)$/),n=r?.groups?.pattern;if(n){let s=r.groups?.flags;s&&(s=s.replaceAll("g",""));try{let c=new RegExp(n,s||void 0);return this._regExpLeadsToEndlessLoop(c)?/(?!.*)/:c}catch{return/(?!.*)/}}let o=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&");return new RegExp(`^${o}\\b`)}_regExpLeadsToEndlessLoop(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}};f();var Wpr=".github/copilot-instructions.md",jpr=".github/git-commit-instructions.md",Gpr="global-copilot-instructions",Vpr="global-git-commit-instructions",_1=class{static{a(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:Gpr}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:Vpr}),r}async _collectInstructionsFromFile(e,r,n,o,s,c){try{let l=Ki(r.uri,n),u=(await e.get(Qi).readFileString(l)).trim();if(!u)return;(await kx(e,{uri:l},u)).status==="valid"&&s.push({kind:c,content:[{instruction:u,languageId:o}],reference:l})}catch{}}async readFromWorkspaces(e,r,n={}){let o=[];if(!r.length)return o;let s=r.flatMap(c=>{let l=[];return n.includeCodeGenerationInstructions!==!1&&l.push(this._collectInstructionsFromFile(e,c,Wpr,n.languageId,o,0)),n.includeCommitMessageGenerationInstructions&&l.push(this._collectInstructionsFromFile(e,c,jpr,void 0,o,0)),l});return await Promise.all(s),o}};f();f();f();f();f();f();f();var zpr=Symbol("MicrotaskDelay");function _ne(t){return!!t&&typeof t.then=="function"}a(_ne,"isThenable");function Kpr(t){let e=new Mx,r=t(e.token),n=new Promise((o,s)=>{let c=e.token.onCancellationRequested(()=>{c.dispose(),s(new z0)});Promise.resolve(r).then(l=>{c.dispose(),e.dispose(),o(l)},l=>{c.dispose(),e.dispose(),s(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(o,s){return n.then(o,s)}catch(o){return this.then(void 0,o)}finally(o){return n.finally(o)}}}a(Kpr,"createCancelablePromise");function aE(t,e){return e?new Promise((r,n)=>{let o=setTimeout(()=>{s.dispose(),r()},t),s=e.onCancellationRequested(()=>{clearTimeout(o),s.dispose(),n(new z0)})}):Kpr(r=>aE(t,r))}a(aE,"timeout");var d8=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{a(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new bn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new bn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var pU=class{static{a(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new z0)}},Ypr;(r=>{async function t(n){let o,s=await Promise.all(n.map(c=>c.then(l=>l,l=>{o||(o=l)})));if(typeof o<"u")throw o;return s}r.settled=t,a(t,"settled");function e(n){return new Promise(async(o,s)=>{try{await n(o,s)}catch(c){s(c)}})}r.withAsyncBody=e,a(e,"withAsyncBody")})(Ypr||={});var mU=class t{static{a(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let o of n)r.emitOne(o)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new Y0,queueMicrotask(async()=>{let n={emitOne:a(o=>this.emitOne(o),"emitOne"),emitMany:a(o=>this.emitMany(o),"emitMany"),reject:a(o=>this.reject(o),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(o){this.reject(o)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:a(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await VR.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:a(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let o of e)n.emitOne(r(o))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let o of e)r(o)&&n.emitOne(o)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var wne=class{constructor(e){this._deferred=new pU;this._asyncIterable=new mU(o=>{if(r){o.reject(r);return}return n&&o.emitMany(n),this._errorFn=s=>o.reject(s),this._emitFn=s=>o.emitOne(s),this._deferred.p},e);let r,n;this._emitFn=o=>{n||(n=[]),n.push(o)},this._errorFn=o=>{r||(r=o)}}static{a(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};f();f();f();f();var Sne=!1,Rne=!1,hU=!1,Jpr=!1,Xpr=!1,Wut=!1,Zpr=!1,e0r=!1,t0r=!1,r0r=!1;var cE,lE=globalThis,ng;typeof lE.vscode<"u"&&typeof lE.vscode.process<"u"?ng=lE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(ng=process);var jut=typeof ng?.versions?.electron=="string",n0r=jut&&ng?.type==="renderer";typeof ng=="object"?(Sne=ng.platform==="win32",Rne=ng.platform==="darwin",hU=ng.platform==="linux",Jpr=hU&&!!ng.env.SNAP&&!!ng.env.SNAP_REVISION,Zpr=jut,t0r=!!ng.env.CI||!!ng.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Xpr=!0):typeof navigator=="object"&&!n0r?(cE=navigator.userAgent,Sne=cE.indexOf("Windows")>=0,Rne=cE.indexOf("Macintosh")>=0,e0r=(cE.indexOf("Macintosh")>=0||cE.indexOf("iPad")>=0||cE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,hU=cE.indexOf("Linux")>=0,r0r=cE?.indexOf("Mobi")>=0,Wut=!0):console.error("Unable to resolve platform.");var h_e=0;Rne?h_e=1:Sne?h_e=3:hU&&(h_e=2);var Ow=Sne,Gut=Rne,Vut=hU;var i0r=Wut&&typeof lE.importScripts=="function",Pxi=i0r?lE.origin:void 0;var S1=cE;var o0r=typeof lE.postMessage=="function"&&!lE.importScripts,Dxi=(()=>{if(o0r){let t=[];lE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,o=t.length;n<o;n++){let s=t[n];if(s.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),s.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),lE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var s0r=!!(S1&&S1.indexOf("Chrome")>=0),Bxi=!!(S1&&S1.indexOf("Firefox")>=0),Nxi=!!(!s0r&&S1&&S1.indexOf("Safari")>=0),Mxi=!!(S1&&S1.indexOf("Edg/")>=0),Lxi=!!(S1&&S1.indexOf("Android")>=0);var Qk,g_e=globalThis.vscode;if(typeof g_e<"u"&&typeof g_e.process<"u"){let t=g_e.process;Qk={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Qk={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Qk={get platform(){return Ow?"win32":Gut?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var gU=Qk.cwd,zut=Qk.env,Kut=Qk.platform,Hxi=Qk.arch;var c0r=65,l0r=97,u0r=90,d0r=122,qw=46,Iu=47,Gp=92,Qw=58,f0r=63,kne=class extends Error{static{a(this,"ErrorInvalidArgType")}constructor(e,r,n){let o;typeof r=="string"&&r.indexOf("not ")===0?(o="must not be",r=r.replace(/^not /,"")):o="must be";let s=e.indexOf(".")!==-1?"property":"argument",c=`The "${e}" ${s} ${o} of type ${r}`;c+=`. Received type ${typeof n}`,super(c),this.code="ERR_INVALID_ARG_TYPE"}};function p0r(t,e){if(t===null||typeof t!="object")throw new kne(e,"Object",t)}a(p0r,"validateObject");function vc(t,e){if(typeof t!="string")throw new kne(e,"string",t)}a(vc,"validateString");var Vp=Kut==="win32";function wi(t){return t===Iu||t===Gp}a(wi,"isPathSeparator");function A_e(t){return t===Iu}a(A_e,"isPosixPathSeparator");function Uw(t){return t>=c0r&&t<=u0r||t>=l0r&&t<=d0r}a(Uw,"isWindowsDeviceRoot");function Pne(t,e,r,n){let o="",s=0,c=-1,l=0,u=0;for(let d=0;d<=t.length;++d){if(d<t.length)u=t.charCodeAt(d);else{if(n(u))break;u=Iu}if(n(u)){if(!(c===d-1||l===1))if(l===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==qw||o.charCodeAt(o.length-2)!==qw){if(o.length>2){let p=o.lastIndexOf(r);p===-1?(o="",s=0):(o=o.slice(0,p),s=o.length-1-o.lastIndexOf(r)),c=d,l=0;continue}else if(o.length!==0){o="",s=0,c=d,l=0;continue}}e&&(o+=o.length>0?`${r}..`:"..",s=2)}else o.length>0?o+=`${r}${t.slice(c+1,d)}`:o=t.slice(c+1,d),s=d-c-1;c=d,l=0}else u===qw&&l!==-1?++l:l=-1}return o}a(Pne,"normalizeString");function m0r(t){return t?`${t[0]==="."?"":"."}${t}`:""}a(m0r,"formatExt");function Yut(t,e){p0r(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${m0r(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}a(Yut,"_format");var xc={resolve(...t){let e="",r="",n=!1;for(let o=t.length-1;o>=-1;o--){let s;if(o>=0){if(s=t[o],vc(s,`paths[${o}]`),s.length===0)continue}else e.length===0?s=gU():(s=zut[`=${e}`]||gU(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===Gp)&&(s=`${e}\\`));let c=s.length,l=0,u="",d=!1,p=s.charCodeAt(0);if(c===1)wi(p)&&(l=1,d=!0);else if(wi(p))if(d=!0,wi(s.charCodeAt(1))){let m=2,h=m;for(;m<c&&!wi(s.charCodeAt(m));)m++;if(m<c&&m!==h){let g=s.slice(h,m);for(h=m;m<c&&wi(s.charCodeAt(m));)m++;if(m<c&&m!==h){for(h=m;m<c&&!wi(s.charCodeAt(m));)m++;(m===c||m!==h)&&(u=`\\\\${g}\\${s.slice(h,m)}`,l=m)}}}else l=1;else Uw(p)&&s.charCodeAt(1)===Qw&&(u=s.slice(0,2),l=2,c>2&&wi(s.charCodeAt(2))&&(d=!0,l=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(n){if(e.length>0)break}else if(r=`${s.slice(l)}\\${r}`,n=d,d&&e.length>0)break}return r=Pne(r,!n,"\\",wi),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){vc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,o=!1,s=t.charCodeAt(0);if(e===1)return A_e(s)?"\\":t;if(wi(s))if(o=!0,wi(t.charCodeAt(1))){let l=2,u=l;for(;l<e&&!wi(t.charCodeAt(l));)l++;if(l<e&&l!==u){let d=t.slice(u,l);for(u=l;l<e&&wi(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&!wi(t.charCodeAt(l));)l++;if(l===e)return`\\\\${d}\\${t.slice(u)}\\`;l!==u&&(n=`\\\\${d}\\${t.slice(u,l)}`,r=l)}}}else r=1;else Uw(s)&&t.charCodeAt(1)===Qw&&(n=t.slice(0,2),r=2,e>2&&wi(t.charCodeAt(2))&&(o=!0,r=3));let c=r<e?Pne(t.slice(r),!o,"\\",wi):"";return c.length===0&&!o&&(c="."),c.length>0&&wi(t.charCodeAt(e-1))&&(c+="\\"),n===void 0?o?`\\${c}`:c:o?`${n}\\${c}`:`${n}${c}`},isAbsolute(t){vc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return wi(r)||e>2&&Uw(r)&&t.charCodeAt(1)===Qw&&wi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let s=0;s<t.length;++s){let c=t[s];vc(c,"path"),c.length>0&&(e===void 0?e=r=c:e+=`\\${c}`)}if(e===void 0)return".";let n=!0,o=0;if(typeof r=="string"&&wi(r.charCodeAt(0))){++o;let s=r.length;s>1&&wi(r.charCodeAt(1))&&(++o,s>2&&(wi(r.charCodeAt(2))?++o:n=!1))}if(n){for(;o<e.length&&wi(e.charCodeAt(o));)o++;o>=2&&(e=`\\${e.slice(o)}`)}return xc.normalize(e)},relative(t,e){if(vc(t,"from"),vc(e,"to"),t===e)return"";let r=xc.resolve(t),n=xc.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let o=0;for(;o<t.length&&t.charCodeAt(o)===Gp;)o++;let s=t.length;for(;s-1>o&&t.charCodeAt(s-1)===Gp;)s--;let c=s-o,l=0;for(;l<e.length&&e.charCodeAt(l)===Gp;)l++;let u=e.length;for(;u-1>l&&e.charCodeAt(u-1)===Gp;)u--;let d=u-l,p=c<d?c:d,m=-1,h=0;for(;h<p;h++){let A=t.charCodeAt(o+h);if(A!==e.charCodeAt(l+h))break;A===Gp&&(m=h)}if(h!==p){if(m===-1)return n}else{if(d>p){if(e.charCodeAt(l+h)===Gp)return n.slice(l+h+1);if(h===2)return n.slice(l+h)}c>p&&(t.charCodeAt(o+h)===Gp?m=h:h===2&&(m=3)),m===-1&&(m=0)}let g="";for(h=o+m+1;h<=s;++h)(h===s||t.charCodeAt(h)===Gp)&&(g+=g.length===0?"..":"\\..");return l+=m,g.length>0?`${g}${n.slice(l,u)}`:(n.charCodeAt(l)===Gp&&++l,n.slice(l,u))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=xc.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Gp){if(e.charCodeAt(1)===Gp){let r=e.charCodeAt(2);if(r!==f0r&&r!==qw)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Uw(e.charCodeAt(0))&&e.charCodeAt(1)===Qw&&e.charCodeAt(2)===Gp)return`\\\\?\\${e}`;return t},dirname(t){vc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,o=t.charCodeAt(0);if(e===1)return wi(o)?t:".";if(wi(o)){if(r=n=1,wi(t.charCodeAt(1))){let l=2,u=l;for(;l<e&&!wi(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&wi(t.charCodeAt(l));)l++;if(l<e&&l!==u){for(u=l;l<e&&!wi(t.charCodeAt(l));)l++;if(l===e)return t;l!==u&&(r=n=l+1)}}}}else Uw(o)&&t.charCodeAt(1)===Qw&&(r=e>2&&wi(t.charCodeAt(2))?3:2,n=r);let s=-1,c=!0;for(let l=e-1;l>=n;--l)if(wi(t.charCodeAt(l))){if(!c){s=l;break}}else c=!1;if(s===-1){if(r===-1)return".";s=r}return t.slice(0,s)},basename(t,e){e!==void 0&&vc(e,"suffix"),vc(t,"path");let r=0,n=-1,o=!0,s;if(t.length>=2&&Uw(t.charCodeAt(0))&&t.charCodeAt(1)===Qw&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let c=e.length-1,l=-1;for(s=t.length-1;s>=r;--s){let u=t.charCodeAt(s);if(wi(u)){if(!o){r=s+1;break}}else l===-1&&(o=!1,l=s+1),c>=0&&(u===e.charCodeAt(c)?--c===-1&&(n=s):(c=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=r;--s)if(wi(t.charCodeAt(s))){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){vc(t,"path");let e=0,r=-1,n=0,o=-1,s=!0,c=0;t.length>=2&&t.charCodeAt(1)===Qw&&Uw(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let u=t.charCodeAt(l);if(wi(u)){if(!s){n=l+1;break}continue}o===-1&&(s=!1,o=l+1),u===qw?r===-1?r=l:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||o===-1||c===0||c===1&&r===o-1&&r===n+1?"":t.slice(r,o)},format:Yut.bind(null,"\\"),parse(t){vc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,o=t.charCodeAt(0);if(r===1)return wi(o)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(wi(o)){if(n=1,wi(t.charCodeAt(1))){let m=2,h=m;for(;m<r&&!wi(t.charCodeAt(m));)m++;if(m<r&&m!==h){for(h=m;m<r&&wi(t.charCodeAt(m));)m++;if(m<r&&m!==h){for(h=m;m<r&&!wi(t.charCodeAt(m));)m++;m===r?n=m:m!==h&&(n=m+1)}}}}else if(Uw(o)&&t.charCodeAt(1)===Qw){if(r<=2)return e.root=e.dir=t,e;if(n=2,wi(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let s=-1,c=n,l=-1,u=!0,d=t.length-1,p=0;for(;d>=n;--d){if(o=t.charCodeAt(d),wi(o)){if(!u){c=d+1;break}continue}l===-1&&(u=!1,l=d+1),o===qw?s===-1?s=d:p!==1&&(p=1):s!==-1&&(p=-1)}return l!==-1&&(s===-1||p===0||p===1&&s===l-1&&s===c+1?e.base=e.name=t.slice(c,l):(e.name=t.slice(c,s),e.base=t.slice(c,l),e.ext=t.slice(s,l))),c>0&&c!==n?e.dir=t.slice(0,c-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},h0r=(()=>{if(Vp){let t=/\\/g;return()=>{let e=gU().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>gU()})(),Aa={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let o=n>=0?t[n]:h0r();vc(o,`paths[${n}]`),o.length!==0&&(e=`${o}/${e}`,r=o.charCodeAt(0)===Iu)}return e=Pne(e,!r,"/",A_e),r?`/${e}`:e.length>0?e:"."},normalize(t){if(vc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Iu,r=t.charCodeAt(t.length-1)===Iu;return t=Pne(t,!e,"/",A_e),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return vc(t,"path"),t.length>0&&t.charCodeAt(0)===Iu},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];vc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Aa.normalize(e)},relative(t,e){if(vc(t,"from"),vc(e,"to"),t===e||(t=Aa.resolve(t),e=Aa.resolve(e),t===e))return"";let r=1,n=t.length,o=n-r,s=1,c=e.length-s,l=o<c?o:c,u=-1,d=0;for(;d<l;d++){let m=t.charCodeAt(r+d);if(m!==e.charCodeAt(s+d))break;m===Iu&&(u=d)}if(d===l)if(c>l){if(e.charCodeAt(s+d)===Iu)return e.slice(s+d+1);if(d===0)return e.slice(s+d)}else o>l&&(t.charCodeAt(r+d)===Iu?u=d:d===0&&(u=0));let p="";for(d=r+u+1;d<=n;++d)(d===n||t.charCodeAt(d)===Iu)&&(p+=p.length===0?"..":"/..");return`${p}${e.slice(s+u)}`},toNamespacedPath(t){return t},dirname(t){if(vc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Iu,r=-1,n=!0;for(let o=t.length-1;o>=1;--o)if(t.charCodeAt(o)===Iu){if(!n){r=o;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&vc(e,"ext"),vc(t,"path");let r=0,n=-1,o=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let c=e.length-1,l=-1;for(s=t.length-1;s>=0;--s){let u=t.charCodeAt(s);if(u===Iu){if(!o){r=s+1;break}}else l===-1&&(o=!1,l=s+1),c>=0&&(u===e.charCodeAt(c)?--c===-1&&(n=s):(c=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===Iu){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){vc(t,"path");let e=-1,r=0,n=-1,o=!0,s=0;for(let c=t.length-1;c>=0;--c){let l=t.charCodeAt(c);if(l===Iu){if(!o){r=c+1;break}continue}n===-1&&(o=!1,n=c+1),l===qw?e===-1?e=c:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Yut.bind(null,"/"),parse(t){vc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Iu,n;r?(e.root="/",n=1):n=0;let o=-1,s=0,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){let p=t.charCodeAt(u);if(p===Iu){if(!l){s=u+1;break}continue}c===-1&&(l=!1,c=u+1),p===qw?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}if(c!==-1){let p=s===0&&r?1:s;o===-1||d===0||d===1&&o===c-1&&o===s+1?e.base=e.name=t.slice(p,c):(e.name=t.slice(p,o),e.base=t.slice(p,c),e.ext=t.slice(o,c))}return s>0?e.dir=t.slice(0,s-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Aa.win32=xc.win32=xc;Aa.posix=xc.posix=Aa;var g0r=Vp?xc.normalize:Aa.normalize,A0r=Vp?xc.isAbsolute:Aa.isAbsolute,Dne=Vp?xc.join:Aa.join,Wxi=Vp?xc.resolve:Aa.resolve,jxi=Vp?xc.relative:Aa.relative,Gxi=Vp?xc.dirname:Aa.dirname,Bne=Vp?xc.basename:Aa.basename,Nne=Vp?xc.extname:Aa.extname,Vxi=Vp?xc.format:Aa.format,zxi=Vp?xc.parse:Aa.parse,Kxi=Vp?xc.toNamespacedPath:Aa.toNamespacedPath,Uk=Vp?xc.sep:Aa.sep,Yxi=Vp?xc.delimiter:Aa.delimiter;f();function Xut(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}a(Xut,"isObject");function Mne(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}a(Mne,"assertType");function Zut(t,e,r,n=Uk){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!SXe(t,e))return!1;if(e.length===t.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,t.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}a(Zut,"isEqualOrParent");var Lne="**",edt="/",Fne="[/\\\\]",One="[^/\\\\]",y0r=/\//g;function tdt(t,e){switch(t){case 0:return"";case 1:return`${One}*?`;default:return`(?:${Fne}|${One}+${Fne}${e?`|${Fne}${One}+`:""})*?`}}a(tdt,"starsToRegExp");function AU(t,e){if(!t)return[];let r=[],n=!1,o=!1,s="";for(let c of t){switch(c){case e:if(!n&&!o){r.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":o=!0;break;case"]":o=!1;break}s+=c}return s&&r.push(s),r}a(AU,"splitGlobAware");function odt(t){if(!t)return"";let e="",r=AU(t,edt);if(r.every(n=>n===Lne))e=".*";else{let n=!1;r.forEach((o,s)=>{if(o===Lne){if(n)return;e+=tdt(2,s===r.length-1)}else{let c=!1,l="",u=!1,d="";for(let p of o){if(p!=="}"&&c){l+=p;continue}if(u&&(p!=="]"||!d)){let m;p==="-"?m=p:(p==="^"||p==="!")&&!d?m="^":p===edt?m="":m=$3(p),d+=m;continue}switch(p){case"{":c=!0;continue;case"[":u=!0;continue;case"}":{let h=`(?:${AU(l,",").map(g=>odt(g)).join("|")})`;e+=h,c=!1,l="";break}case"]":{e+="["+d+"]",u=!1,d="";break}case"?":e+=One;continue;case"*":e+=tdt(1);continue;default:e+=$3(p)}}s<r.length-1&&(r[s+1]!==Lne||s+2<r.length)&&(e+=Fne)}n=o===Lne})}return e}a(odt,"parseRegExp");var C0r=/^\*\*\/\*\.[\w\.-]+$/,v0r=/^\*\*\/([\w\.-]+)\/?$/,x0r=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,E0r=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,b0r=/^\*\*((\/[\w\.-]+)+)\/?$/,I0r=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,rdt=new m3(1e4),C_e=a(function(){return!1},"FALSE"),ny=a(function(){return null},"NULL");function sdt(t){return t===C_e||t===ny}a(sdt,"isEmptyPattern");function v_e(t,e){if(!t)return ny;let r;typeof t!="string"?r=t.pattern:r=t,r=r.trim();let n=`${r}_${!!e.trimForExclusions}`,o=rdt.get(n);if(o)return ndt(o,t);let s;return C0r.test(r)?o=T0r(r.substr(4),r):(s=v0r.exec(y_e(r,e)))?o=w0r(s[1],r):(e.trimForExclusions?E0r:x0r).test(r)?o=_0r(r,e):(s=b0r.exec(y_e(r,e)))?o=idt(s[1].substr(1),r,!0):(s=I0r.exec(y_e(r,e)))?o=idt(s[1],r,!1):o=S0r(r),rdt.set(n,o),ndt(o,t)}a(v_e,"parsePattern");function ndt(t,e){if(typeof e=="string")return t;let r=a(function(n,o){return Zut(n,e.base,!Vut)?t(_Xe(n.substr(e.base.length),Uk),o):null},"wrappedPattern");return r.allBasenames=t.allBasenames,r.allPaths=t.allPaths,r.basenames=t.basenames,r.patterns=t.patterns,r}a(ndt,"wrapRelativePattern");function y_e(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}a(y_e,"trimForExclusions");function T0r(t,e){return function(r,n){return typeof r=="string"&&r.endsWith(t)?e:null}}a(T0r,"trivia1");function w0r(t,e){let r=`/${t}`,n=`\\${t}`,o=a(function(c,l){return typeof c!="string"?null:l?l===t?e:null:c===t||c.endsWith(r)||c.endsWith(n)?e:null},"parsedPattern"),s=[t];return o.basenames=s,o.patterns=[e],o.allBasenames=s,o}a(w0r,"trivia2");function _0r(t,e){let r=cdt(t.slice(1,-1).split(",").map(l=>v_e(l,e)).filter(l=>l!==ny),t),n=r.length;if(!n)return ny;if(n===1)return r[0];let o=a(function(l,u){for(let d=0,p=r.length;d<p;d++)if(r[d](l,u))return t;return null},"parsedPattern"),s=r.find(l=>!!l.allBasenames);s&&(o.allBasenames=s.allBasenames);let c=r.reduce((l,u)=>u.allPaths?l.concat(u.allPaths):l,[]);return c.length&&(o.allPaths=c),o}a(_0r,"trivia3");function idt(t,e,r){let n=Uk===Aa.sep,o=n?t:t.replace(y0r,Uk),s=Uk+o,c=Aa.sep+t,l;return r?l=a(function(u,d){return typeof u=="string"&&(u===o||u.endsWith(s)||!n&&(u===t||u.endsWith(c)))?e:null},"parsedPattern"):l=a(function(u,d){return typeof u=="string"&&(u===o||!n&&u===t)?e:null},"parsedPattern"),l.allPaths=[(r?"*/":"./")+t],l}a(idt,"trivia4and5");function S0r(t){try{let e=new RegExp(`^${odt(t)}$`);return function(r){return e.lastIndex=0,typeof r=="string"&&e.test(r)?t:null}}catch{return ny}}a(S0r,"toRegExp");function adt(t,e,r){return!t||typeof e!="string"?!1:x_e(t)(e,void 0,r)}a(adt,"match");function x_e(t,e={}){if(!t)return C_e;if(typeof t=="string"||R0r(t)){let r=v_e(t,e);if(r===ny)return C_e;let n=a(function(o,s){return!!r(o,s)},"resultPattern");return r.allBasenames&&(n.allBasenames=r.allBasenames),r.allPaths&&(n.allPaths=r.allPaths),n}return k0r(t,e)}a(x_e,"parse");function R0r(t){let e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}a(R0r,"isRelativePattern");function k0r(t,e){let r=cdt(Object.getOwnPropertyNames(t).map(l=>P0r(l,t[l],e)).filter(l=>l!==ny)),n=r.length;if(!n)return ny;if(!r.some(l=>!!l.requiresSiblings)){if(n===1)return r[0];let l=a(function(p,m){let h;for(let g=0,A=r.length;g<A;g++){let y=r[g](p,m);if(typeof y=="string")return y;_ne(y)&&(h||(h=[]),h.push(y))}return h?(async()=>{for(let g of h){let A=await g;if(typeof A=="string")return A}return null})():null},"resultExpression"),u=r.find(p=>!!p.allBasenames);u&&(l.allBasenames=u.allBasenames);let d=r.reduce((p,m)=>m.allPaths?p.concat(m.allPaths):p,[]);return d.length&&(l.allPaths=d),l}let o=a(function(l,u,d){let p,m;for(let h=0,g=r.length;h<g;h++){let A=r[h];A.requiresSiblings&&d&&(u||(u=Bne(l)),p||(p=u.substr(0,u.length-Nne(l).length)));let y=A(l,u,p,d);if(typeof y=="string")return y;_ne(y)&&(m||(m=[]),m.push(y))}return m?(async()=>{for(let h of m){let g=await h;if(typeof g=="string")return g}return null})():null},"resultExpression"),s=r.find(l=>!!l.allBasenames);s&&(o.allBasenames=s.allBasenames);let c=r.reduce((l,u)=>u.allPaths?l.concat(u.allPaths):l,[]);return c.length&&(o.allPaths=c),o}a(k0r,"parsedExpression");function P0r(t,e,r){if(e===!1)return ny;let n=v_e(t,r);if(n===ny)return ny;if(typeof e=="boolean")return n;if(e){let o=e.when;if(typeof o=="string"){let s=a((c,l,u,d)=>{if(!d||!n(c,l))return null;let p=o.replace("$(basename)",()=>u),m=d(p);return _ne(m)?m.then(h=>h?t:null):m?t:null},"result");return s.requiresSiblings=!0,s}}return n}a(P0r,"parseExpressionPattern");function cdt(t,e){let r=t.filter(l=>!!l.basenames);if(r.length<2)return t;let n=r.reduce((l,u)=>{let d=u.basenames;return d?l.concat(d):l},[]),o;if(e){o=[];for(let l=0,u=n.length;l<u;l++)o.push(e)}else o=r.reduce((l,u)=>{let d=u.patterns;return d?l.concat(d):l},[]);let s=a(function(l,u){if(typeof l!="string")return null;if(!u){let p;for(p=l.length;p>0;p--){let m=l.charCodeAt(p-1);if(m===47||m===92)break}u=l.substr(p)}let d=n.indexOf(u);return d!==-1?o[d]:null},"aggregate");s.basenames=n,s.patterns=o,s.allBasenames=n;let c=t.filter(l=>!l.basenames);return c.push(s),c}a(cdt,"aggregateBasenameMatches");function ldt(t){let e=t.match(/^---\s*\r?\n([\s\S]*?)\r?\n---\s*\r?\n/);return e?e[1]:null}a(ldt,"extractFrontMatter");function udt(t){let e=ldt(t);if(!e)return{};let r=e.match(/^applyTo:\s*["']?(.*?)["']?\s*$/m),n=e.match(/^description:\s*["']?(.*?)["']?\s*$/m);return{applyTo:r?r[1].trim():void 0,description:n?n[1].trim():void 0}}a(udt,"extractMetadataFromContent");function ddt(t){let e=ldt(t);if(!e)return{};let r=e.match(/^description:\s*["']?(.*?)["']?\s*$/m);return{description:r?r[1].trim():void 0}}a(ddt,"extractPromptMetadataFromContent");function fdt(t){if(!t||t.trim()==="")return{pattern:t,isValid:!1,error:"Pattern cannot be empty"};let e=t.trim();return D0r(e)?{pattern:e,isValid:!0}:{pattern:e,isValid:!1,error:"Invalid glob pattern"}}a(fdt,"validate");function pdt(t,e){let r=AU(e,","),n=a(o=>{if(o=o.trim(),o.length!==0){if(o==="**"||o==="**/*"||o==="*")return{pattern:o};!o.startsWith("/")&&!o.startsWith("**/")&&(o="**/"+o);for(let s of t)if(adt(o,s))return{pattern:o,file:s}}},"patternMatches");for(let o of r){let s=n(o);if(s)return s}}a(pdt,"matches");function D0r(t){try{let e=AU(t,",");if(e.length===0)return!1;for(let r of e){let n=x_e(r);if(sdt(n))return!1}return!0}catch{return!1}}a(D0r,"isValidGlob");f();f();var B0r=".prompt.md",N0r=".instructions.md",M0r=".chatmode.md";function mdt(t){if(t.endsWith(B0r))return"prompt";if(t.endsWith(N0r))return"instructions";if(t.endsWith(M0r))return"mode"}a(mdt,"getPromptFileType");var F0r=".github/instructions",O0r=".github/prompts",qk=class{static{a(this,"PromptFilesLocator")}async listFiles(e,r,n){if(!r.length)return[];let o=r.map(c=>{let l="";return n==="instructions"?l=Ki(c.uri,F0r):n==="prompt"&&(l=Ki(c.uri,O0r)),this.getFilesByUri(e,l,n)});return(await Promise.all(o)).flat()}async getFilesByUri(e,r,n){let o,s=[];try{o=await e.get(Qi).readDirectory(r)}catch{return[]}for(let[c,l]of o)l===1&&mdt(c)===n&&s.push(Ki(r,c));return s}};var iy=class{constructor(){this.logger=new ft("PromptService");this.promptTemplatesCache=null;this.fileLocator=new qk}static{a(this,"PromptService")}async collect(e,r,n){let o=await this.fileLocator.listFiles(e,r,"instructions").then(hdt("instructions")),s=[];for(let c of o)try{let l=await this.parseInstructionFile(e,c.uri);l&&pdt(n,l.applyTo)&&s.push(l)}catch(l){this.logger.warn(e,`Failed to parse instruction file ${c.uri}:`,l)}return s}async collectPromptFiles(e,r){let n=await this.fileLocator.listFiles(e,r,"prompt").then(hdt("prompt")),o=[];for(let s of n)try{let c=await this.parsePromptFile(e,s.uri);c&&o.push(c)}catch(c){this.logger.warn(e,`Failed to parse prompt file ${s.uri}:`,c)}this.promptTemplatesCache?this.promptTemplatesCache.clear():this.promptTemplatesCache=new Map;for(let s of o)this.promptTemplatesCache.set(s.name,s);return o}async parseInstructionFile(e,r){try{let n=await e.get(Qi).readFileString(r),o=udt(n);if(!o.applyTo)return null;let s=fdt(o.applyTo);return s.isValid?{uri:r,applyTo:s.pattern,description:o.description,content:n}:(this.logger.warn(e,`Invalid applyTo pattern in ${r}: ${s.error}`),null)}catch{return null}}async parsePromptFile(e,r){try{let n=await e.get(Qi).readFileString(r),o=ddt(n),c=Di(r).replace(/\.prompt\.md$/,"");return{uri:r,name:c,description:o.description,content:n}}catch{return null}}getPromptTemplates(){return this.promptTemplatesCache?Array.from(this.promptTemplatesCache.values()):[]}getPromptTemplate(e){return this.promptTemplatesCache?.get(e)}};function hdt(t){return e=>e.map(r=>({uri:r,type:t}))}a(hdt,"withType");var oy=class t{static{a(this,"CustomInstruction")}static async getInstructions(e,r,n={},o){try{let s=e.get(_1),c=s.getGlobalInstructions(n),l=await s.readFromWorkspaces(e,r,n),d=await e.get(iy).collect(e,r,o||[]),p=d.map(g=>({content:[{instruction:g.content}],kind:2,reference:g.uri})),m=n;if(!n.customIntroduction&&d.length>0){let A=["Here is a list of instruction files that contain rules for modifying or creating new code.","These files are important for ensuring that the code is modified or created correctly.","Please make sure to follow the rules specified in these files when working with the codebase.","If the file is not already available as attachment, use the `read_file` tool to acquire it.","Make sure to acquire the instructions before making any changes to the code.","| Pattern | File Path | Description |","| ------- | --------- | ----------- |"],y=d.map(v=>{let b=v.applyTo||"*",I=v.uri,S=v.description||"";return`| \`${b}\` | \`${I}\` | ${S} |`});m={...n,customIntroduction:A.concat(y).join(`
`)}}let h=[...c,...l,...p];return this.processInstructions(h,m)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let s of e){let c=this.createInstructionElement(s,r);c&&n.push(c)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>
${n.join(`

`)}
</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let s of e.content)s.languageId?r.languageId&&s.languageId===r.languageId&&n.push(`For ${s.languageId} code: ${s.instruction}`):n.push(s.instruction);if(n.length===0)return;let o=n.join(`
`);return`<attachment filePath="${e.reference}">
${o}
</attachment>`}static async appendToUserMessage(e,r,n="",o={},s){if(!r||r.length===0)return n;let c=await t.getInstructions(e,r,o,s);return c?c+`

`+n:n}};f();var Q0r="X-Initiator",U0r="X-Interaction-ID",q0r="X-Interaction-Type";var Qne=class{static{a(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},E_e=class extends Qne{static{a(this,"User")}static id(){return"user"}},b_e=class extends Qne{static{a(this,"Agent")}static id(){return"agent"}},I_e=class{static{a(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[Q0r]:this.initiator,[U0r]:this.interactionId,[q0r]:this.interactionType.toString()}}},Kd=class t extends I_e{static{a(this,"LlmInteraction")}static user(e,r){return new t(E_e,e,r)}static agent(e,r){return new t(b_e,e,r)}};f();f();var ya=class{static{a(this,"ModelConfigurationProvider")}},Une=class extends ya{constructor(r){super();this.ctx=r}static{a(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let o=[];for(let s of r){let c=await this.getFirstMatchingChatModelConfiguration(s,n);c&&o.push(c)}if(o.length>0){let s=o.find(c=>c.isExperimental);return s||o[0]}throw Rr.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(rd).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(rd).getMetadata(),o=$0r(n,r);if(o.length>0)return o[0]}async getFirstMatchingChatModelConfiguration(r,n){let o=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(o!==void 0)return r===Wr.Gpt35turbo||r===Wr.Gpt4oMini?{modelId:o.id,uiName:o.name,modelFamily:r,maxRequestTokens:w_e(6144,o),maxResponseTokens:T_e(2048,o),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:o.capabilities.tokenizer,isExperimental:o.isExperimental??!1,stream:o.capabilities.supports?.streaming??!1,toolCalls:o.capabilities.supports?.tool_calls??!1}:r===Wr.Gpt4||r===Wr.Gpt4turbo?{modelId:o.id,uiName:o.name,modelFamily:r,maxRequestTokens:w_e(10240,o),maxResponseTokens:T_e(4096,o),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:o.capabilities.tokenizer,isExperimental:o.isExperimental??!1,stream:o.capabilities.supports?.streaming??!1,toolCalls:o.capabilities.supports?.tool_calls??!1}:r===Wr.Gpt4o?{modelId:o.id,uiName:o.name,modelFamily:r,maxRequestTokens:await H0r(this.ctx,o),maxResponseTokens:T_e(4096,o),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:o.capabilities.tokenizer,isExperimental:o.isExperimental??!1,stream:o.capabilities.supports?.streaming??!1,toolCalls:o.capabilities.supports?.tool_calls??!1}:{modelId:o.id,uiName:o.name,modelFamily:r,maxRequestTokens:o.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:o.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:o.capabilities.tokenizer,isExperimental:o.isExperimental??!1,stream:o.capabilities.supports?.streaming??!1,toolCalls:o.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case oY.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function H0r(t,e){let r=t.get(Lt),n=await r.fetchTokenAndUpdateExPValuesAndAssignments(),o=r.ideChatMaxRequestTokens(n);return o===-1&&(o=16384),w_e(o,e)}a(H0r,"getExpRequestTokens");function w_e(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}a(w_e,"getRequestTokens");function T_e(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}a(T_e,"getResponseTokens");function $0r(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}a($0r,"filterModelsByCapabilities");var Go=class{static{a(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,o){if(n)return e.get(ya).getBestChatModelConfig([n]);if(e.get(kh).quotaExhausted&&!(await e.get(cr).getToken()).userInfo?.isFreeUser){let s=await e.get(rd).getFallbackModel();if(s)return e.get(ya).getBestChatModelConfig([s?.id])}return e.get(ya).getBestChatModelConfig(ph(r),o)}static transformMessages(e,r){return r===Wr.O1Ga||r===Wr.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var Hk=class{constructor(){this.lastChanges=[];this.attemptCount=0;this.DEFAULT_TEMPERATURE=.1}static{a(this,"GitCommitGenerateService")}buildSystemMessage(e,r){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return r&&n.push(`
Current git branch name: ${r}`),e&&n.push(`
Respond in the following locale: ${e}`),n.join(`
`)}buildUserMessage(e,r){let n=[];return e.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",e.userCommits.map(o=>`- ${o}`).join(`
`),""),e.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",e.recentCommits.map(o=>`- ${o}`).join(`
`),""),n.push("# CODE CHANGES:",e.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),r&&n.push("<custom-instructions>",r,"</custom-instructions>"),n.join(`
`)}updateAttemptCount(e){if(e.length!==this.lastChanges.length){this.attemptCount=0;return}for(let r=0;r<e.length;r++)if(this.lastChanges[r]!==e[r]){this.attemptCount=0;return}this.attemptCount++}async generateCommitMessage(e,r,n,o){let s=new Bs(e),c=await Go.getModelConfiguration(e,"gitCommit"),l=[{uri:n.workspaceFolder?n.workspaceFolder:Dl(process.cwd())}],u=await oy.getInstructions(e,l,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),d=[{role:"system",content:this.buildSystemMessage(n.userLanguage,o)},{role:"user",content:this.buildUserMessage(n,u)}];this.updateAttemptCount(n.changes);let p=await e.get(cr).getToken(),m=await e.get(Lt).updateExPValuesAndAssignments(p),h=Math.min(this.DEFAULT_TEMPERATURE*(1+this.attemptCount),2),g=await s.fetchResponse({modelConfiguration:c,messages:d,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Kd.user("git-commit",Ir()),temperature:h},r,m);if(this.lastChanges=n.changes,g.type!=="success")return;let A=g.value.match(/```text\n([\s\S]*?)\n```/);return A?A[1].trim():g.value.trim()}};f();var dd=class{constructor(e){this.ctx=e}static{a(this,"EditProgressReporter")}},qne=class extends dd{constructor(){super(...arguments);this.items=[]}static{a(this,"LibTestEditProgressReporter")}reset(){this.items=[]}reportTurn(r,n){return this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n}),Promise.resolve()}};f();f();f();function sy(){return Ir()}a(sy,"uuidV4");f();var Hw=class extends Error{static{a(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var R1=class extends Error{static{a(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var CU="filepath:",yl="...existing code...",__e="copilot-edited-file";f();function f8(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}a(f8,"getFenceForCodeBlock");var lm=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{a(this,"CodeBlock")}renderAsArray(){let e=f8(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${CU} ${ac(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var S_e=class{constructor(e){this.props=e}static{a(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},vU=class{constructor(e){this.props=e;this.shouldTrim=!0}static{a(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let o=tn(n.content);return n.role==="system"?`${r}<SYSTEM>
${o}
</SYSTEM>


`:r+o},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((s,c)=>{if(c.role==="system"){let l=tn(c.content).endsWith(`
`)?tn(c.content):`${tn(c.content)}
`;return`${s}<SYSTEM>
${l}
End your response with </${__e}>.
</SYSTEM>


`}return s+tn(c.content)},"")+`


The resulting document:
<${__e}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${yl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let c=new lm({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...c.renderAsArray())}else r.push("I am in an empty editor.");let o=new S_e({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();o&&r.push(o);let s=new lm({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...s.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};f();var uE=class{constructor(e){this.ctx=e}static{a(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(In).getOrReadTextDocument({uri:e})}};f();f();f();f();f();f();var ig=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new bn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{a(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(Cl.fromJson))}static from(e){let r=e.map(o=>new Cl(zt.ofStartAndLength(o.rangeOffset,o.rangeLength),o.text));return r.reverse(),new t(r)}static single(e,r){return new t([new Cl(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new Cl(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let o of this.edits)r.push(e.substring(n,o.replaceRange.start)),r.push(o.newText),n=o.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return W0r(this,e)}inverse(e){let r=[],n=0;for(let o of this.edits)r.push(new Cl(zt.ofStartAndLength(o.replaceRange.start+n,o.newText.length),e.substring(o.replaceRange.start,o.replaceRange.endExclusive))),n+=o.newText.length-o.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(zt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,o=0,s=0;for(;o<this.edits.length||n<e.edits.length;){let c=e.edits[n],l=this.edits[o];if(l)c?l.replaceRange.intersects(c.replaceRange)?o++:l.replaceRange.start<c.replaceRange.start?(r.push(new Cl(l.replaceRange.delta(s),l.newText)),o++):(n++,s+=c.newText.length-c.replaceRange.length):(r.push(new Cl(l.replaceRange.delta(s),l.newText)),o++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let o=n.removeCommonSuffixPrefix(e);o.isEmpty||r.push(o)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new zt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new zt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let o=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+o)return n.replaceRange.start;r+=o-n.replaceRange.length}else break}return e-r}},Cl=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{a(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(zt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=ZT(r,this.newText),o=Math.min(r.length-n,this.newText.length-n,Fx(r,this.newText)),s=new zt(this.replaceRange.start+n,this.replaceRange.endExclusive-o),c=this.newText.substring(n,this.newText.length-o);return new t(s,c)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function W0r(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],o=0;for(let s of e.edits){for(;;){let d=r[0];if(!d||d.replaceRange.start+o+d.newText.length>=s.replaceRange.start)break;r.shift(),n.push(d),o+=d.newText.length-d.replaceRange.length}let c=o,l,u;for(;;){let d=r[0];if(!d||d.replaceRange.start+o>s.replaceRange.endExclusive)break;l||(l=d),u=d,r.shift(),o+=d.newText.length-d.replaceRange.length}if(!l)n.push(new Cl(s.replaceRange.delta(-o),s.newText));else{let d="",p=s.replaceRange.start-(l.replaceRange.start+c);p>0&&(d=l.newText.slice(0,p));let m=u.replaceRange.endExclusive+o-s.replaceRange.endExclusive;if(m>0){let A=new Cl(zt.ofStartAndLength(u.replaceRange.endExclusive,0),u.newText.slice(-m));r.unshift(A),o-=A.newText.length-A.replaceRange.length}let h=d+s.newText,g=new zt(Math.min(l.replaceRange.start,s.replaceRange.start-c),s.replaceRange.endExclusive-o);n.push(new Cl(g,h))}}for(;;){let s=r.shift();if(!s)break;n.push(s)}return new ig(n).normalize()}a(W0r,"joinEdits");f();f();var gdt=-1;function p8(){return gdt!==-1?gdt:Date.now()}a(p8,"now");function Adt(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}a(Adt,"lineRangeDistance");f();var m8=class t{constructor(e){this.edits=e}static{a(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(o=>new dE(r.getTransformer().getRange(o.range),o.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>qa.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return Ca.create(r)}mapEdits(e){return new t(this.edits.map(e))}},dE=class t{constructor(e,r){this.range=e;this.newText=r}static{a(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new bn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),o=e[e.length-1].range.getEndPosition(),s="";for(let c=0;c<e.length;c++){let l=e[c];if(s+=l.newText,c<e.length-1){let u=e[c+1],d=or.fromPositions(l.range.getEndPosition(),u.range.getStartPosition()),p=r.getValueOfRange(d);s+=p}}return new t(or.fromPositions(n,o),s)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),o=r.getValueOfRange(or.fromPositions(n.getStartPosition(),this.range.getStartPosition())),s=r.getValueOfRange(or.fromPositions(this.range.getEndPosition(),n.getEndPosition())),c=o+this.newText+s;return new t(n,c)}extendToFullLine(e){let r=new or(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return qa.replace(n,this.newText)}};var gs=class t{constructor(e){this.edits=e;Ql(Bx(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{a(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>ay.deserialize(r)))}static fromEdit(e){let r=m8.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,o=[],s=[];for(let c=0;c<n.length;c++){let l=n[c],u=c+1<n.length?n[c+1]:void 0;if(s.push(l),u&&u.range.startLineNumber===l.range.endLineNumber)continue;let d=dE.joinEdits(s,r);s.length=0;let p=ay.fromSingleTextEdit(d,r);o.push(p)}return new t(o)}static createFromUnsorted(e){let r=e.slice();return r.sort(Sh(n=>n.lineRange.startLineNumber,Rh)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let o=n.toSingleEdit(e);r.push(o)}return Ca.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(Gr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Gr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new ay(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(l,u,d,p){let m=d==="unmodified"?" ":d==="deleted"?"-":"+";p===void 0&&(p="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let h=l===-1?"   ":l.toString().padStart(3," "),g=u===-1?"   ":u.toString().padStart(3," ");r.push(`${m} ${h} ${g} ${p}`)}a(n,"pushLine");function o(){r.push("---")}a(o,"pushSeperator");let s=0,c=!0;for(let l of QR(this.edits,(u,d)=>Adt(u.lineRange,d.lineRange)<=5)){c?c=!1:o();let u=l[0].lineRange.startLineNumber-2;for(let d of l){for(let h=Math.max(1,u);h<d.lineRange.startLineNumber;h++)n(h,h+s,"unmodified",e[h-1]);let p=d.lineRange,m=d.newLines;for(let h of p.mapToLineArray(g=>g)){let g=e[h-1];n(h,-1,"deleted",g)}for(let h=0;h<m.length;h++){let g=m[h];n(-1,p.startLineNumber+s+h,"added",g)}u=p.endLineNumberExclusive,s+=d.newLines.length-d.lineRange.length}for(let d=u;d<=Math.min(u+2,e.length);d++)n(d,d+s,"unmodified",e[d-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let o of this.edits){for(;n<o.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let s of o.newLines)r.push(s);n=o.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,o)=>new ay(r[o],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},ay=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{a(this,"SingleLineEdit")}static deserialize(e){return new t(Gr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Oh(e.newText),o=e.range.startLineNumber,s=r.getValueOfRange(or.fromPositions(new jr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=s+n[0];let c=e.range.endLineNumber+1,l=r.getTransformer().getLineLength(e.range.endLineNumber)+1,u=r.getValueOfRange(or.fromPositions(e.range.getEndPosition(),new jr(e.range.endLineNumber,l)));n[n.length-1]=n[n.length-1]+u;let d=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,p=e.range.endColumn===1;return d&&n[0].length===s.length&&(o++,n.shift()),n.length>0&&o<c&&p&&n[n.length-1].length===u.length&&(c--,n.pop()),new t(new Gr(o,c),n)}toLineEdit(){return new gs([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let s=this.lineRange.startLineNumber-1,c=e.getTransformer().getLineLength(s)+1;n=new jr(s,c)}else n=new jr(1,1);let o=r.addToPosition(new jr(1,1));return new dE(or.fromPositions(n,o),"")}else return new dE(new or(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,o,s=this.lineRange.startLineNumber;return s===e.getTransformer().textLength.lineCount+2?(r=s-1,n=e.getTransformer().getLineLength(r)+1,o=this.newLines.map(c=>`
`+c).join("")):(r=s,n=1,o=this.newLines.map(c=>c+`
`).join("")),new dE(or.fromPositions(new jr(r,n)),o)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,o=new or(this.lineRange.startLineNumber,1,r,n),s=this.newLines.join(`
`);return new dE(o,s)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return qa.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,o=0;for(;r<n&&o<this.newLines.length&&this.newLines[o]===e.getLineAt(r);)r++,o++;let s=0;for(;r<n&&s+o<this.newLines.length&&this.newLines[this.newLines.length-1-s]===e.getLineAt(n-1);)n--,s++;return o===0&&s===0?this:new t(new Gr(r,n),this.newLines.slice(o,this.newLines.length-s))}},j0r;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,a(t,"is")})(j0r||={});var k1=class t{constructor(e,r){this.base=e;this.edit=r}static{a(this,"RootedLineEdit")}static fromEdit(e){let r=gs.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new Yd(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=a(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new gs(r))}};var Ca=class t{constructor(e){this.edits=e;Ql(Bx(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{a(this,"Edit")}static deserialize(e){return new t(e.map(r=>qa.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([qa.replace(e,r)])}static insert(e,r){return new t([qa.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>qa.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((c,l)=>" ".repeat(l-c)),o=r.tryRebase(n);if(!o)return;let s=e.tryRebase(o);if(s)return{e1:o,e2:s}}toOffsetEdit(){return new ig(this.edits.map(e=>new Cl(e.range,e.newText)))}compose(e){return G0r(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let o of this.edits)r+=e.substring(n,o.range.start),r+=o.newText,n=o.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let o=r.data?.merge(n.data)??void 0;r=qa.replaceWithData(r.range.join(n.range),r.newText+n.newText,o)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),o=qa.replace(zt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return o.isNeutral()?t.empty:o.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let o=[],s=0;for(let c of this.edits)o.push(qa.replaceWithData(zt.ofStartAndLength(c.range.start+s,c.range.length),c.newText,c.data)),s+=c.newText.length-c.range.length;return new Hne(o)}if(this.edits.length!==e.arrayLength)throw c7(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let o=0;o<this.edits.length;++o){let s=e.mapIndexBack(o),c=n[s];r.push(c);for(let l=s;l<n.length;++l){let u=c.newText.length-c.range.length,d=n[l];n[l]=qa.replaceWithData(zt.ofStartAndLength(d.range.start+u,d.range.length),d.newText,d.data)}}return new Hne(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),o=r.applyInverseToOffset(e.endExclusive);return new zt(n,o)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let o of this.edits)r.push(qa.replace(zt.ofStartAndLength(o.range.start+n,o.newText.length),e(o.range.start,o.range.endExclusive))),n+=o.newText.length-o.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,o=0,s=0;for(;o<this.edits.length||n<e.edits.length;){let c=e.edits[n],l=this.edits[o];if(l)if(!c)r.push(qa.replace(l.range.delta(s),l.newText)),o++;else{if(l.range.intersectsOrTouches(c.range))return;l.range.start<c.range.start?(r.push(qa.replace(l.range.delta(s),l.newText)),o++):(n++,s+=c.newText.length-c.range.length)}else break}return new t(r)}};function G0r(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],o=0;for(let s of e.edits){for(;;){let d=r[0];if(!d||d.range.start+o+d.newText.length>=s.range.start)break;r.shift(),n.push(d),o+=d.newText.length-d.range.length}let c=o,l,u;for(;;){let d=r[0];if(!d||d.range.start+o>s.range.endExclusive)break;l||(l=d),u=d,r.shift(),o+=d.newText.length-d.range.length}if(!l)n.push(qa.replaceWithData(s.range.delta(-o),s.newText,s.data));else{let d=s.range.start-c-l.range.start;d>0&&n.push(qa.replaceWithData(zt.emptyAt(l.range.start),l.newText.slice(0,d),l.data));let p=u.range.endExclusive+o-s.range.endExclusive;if(p>0){let h=qa.replaceWithData(zt.emptyAt(u.range.endExclusive),u.newText.slice(-p),u.data);r.unshift(h),o-=h.newText.length-h.range.length}let m=new zt(Math.min(l.range.start,s.range.start-c),s.range.endExclusive-o);n.push(qa.replaceWithData(m,s.newText,s.data))}}for(;;){let s=r.shift();if(!s)break;n.push(s)}return Ca.create(n).normalize()}a(G0r,"joinEdits");var qa=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{a(this,"SingleEdit")}static deserialize(e){return new t(new zt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new zt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new zt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return Ca.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=V0r(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=z0r(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function V0r(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}a(V0r,"commonPrefixLength");function z0r(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}a(z0r,"commonSuffixLength");var Yd=class t{constructor(e,r){this.base=e;this.edit=r}static{a(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return QA(()=>null.base.equals(this.base.apply(e))),QA(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return k1.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},Hne=class t{constructor(e){this.edits=e}static{a(this,"SingleEdits")}static{this.empty=new t([])}compose(){return Ca.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new P1(this.edits.map(e=>e.toEdit()))}},P1=class t{constructor(e){this.edits=e}static{a(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return Ca.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let o of this.edits){let s=Ca.trySwap(r,o);if(!s)return;n.push(s.e1),r=s.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>Ca.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let o of this.edits){let s=gs.fromEdit(new Yd(r,o));n.push(s.humanReadablePatch(r.getLines())),r=r.apply(o)}return n.join(`
---
`)}};f();f();f();var $k=0;function $ne(t){return t===0}a($ne,"lengthIsZero");var um=2**26;function h8(t,e){return t*um+e}a(h8,"toLength");function fE(t){let e=t,r=Math.floor(e/um),n=e-r*um;return new hu(r,n)}a(fE,"lengthToObj");function xU(t,e){let r=t+e;return e>=um&&(r=r-t%um),r}a(xU,"lengthAdd");function ydt(t,e){return t.reduce((r,n)=>xU(r,e(n)),$k)}a(ydt,"sumLengths");function R_e(t,e){return t===e}a(R_e,"lengthEquals");function EU(t,e){let r=t,n=e;if(n-r<=0)return $k;let s=Math.floor(r/um),c=Math.floor(n/um),l=n-c*um;if(s===c){let u=r-s*um;return h8(0,l-u)}else return h8(c-s,l)}a(EU,"lengthDiffNonNegative");function Cdt(t,e){let r=t,n=Math.floor(r/um),o=r-n*um,s=e,c=Math.floor(s/um),l=s-c*um;return new or(n+1,o+1,c+1,l+1)}a(Cdt,"lengthsToRange");f();var g8=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{a(this,"TextEditInfo")}toString(){return`[${fE(this.startOffset)}...${fE(this.endOffset)}) -> ${fE(this.newLength)}`}};function xdt(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new CX(vdt(t)),n=vdt(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let o=r.dequeue();function s(d){if(d===void 0){let m=r.takeWhile(h=>!0)||[];return o&&m.unshift(o),m}let p=[];for(;o&&!$ne(d);){let[m,h]=o.splitAt(d);p.push(m),d=EU(m.lengthAfter,d),o=h??r.dequeue()}return $ne(d)||p.push(new bU(!1,d,d)),p}a(s,"nextS0ToS1MapWithS1LengthOf");let c=[];function l(d,p,m){if(c.length>0&&R_e(c[c.length-1].endOffset,d)){let h=c[c.length-1];c[c.length-1]=new g8(h.startOffset,p,xU(h.newLength,m))}else c.push({startOffset:d,endOffset:p,newLength:m})}a(l,"pushEdit");let u=$k;for(let d of n){let p=s(d.lengthBefore);if(d.modified){let m=ydt(p,g=>g.lengthBefore),h=xU(u,m);l(u,h,d.lengthAfter),u=h}else for(let m of p){let h=u;u=xU(u,m.lengthBefore),m.modified&&l(h,u,m.lengthAfter)}}return c}a(xdt,"combineTextEditInfos");var bU=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{a(this,"LengthMapping")}splitAt(e){let r=EU(e,this.lengthAfter);return R_e(r,$k)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,$k,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${fE(this.lengthBefore)} -> ${fE(this.lengthAfter)}`}};function vdt(t){let e=[],r=$k;for(let n of t){let o=EU(r,n.startOffset);$ne(o)||e.push(new bU(!1,o,o));let s=EU(n.startOffset,n.endOffset);e.push(new bU(!0,s,n.newLength)),r=n.endOffset}return e}a(vdt,"toLengthMapping");var IU=class t{constructor(e){this.edits=e}static{a(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new Wne(n.range,hu.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let o=fE(n.newLength);return new Wne(Cdt(n.startOffset,n.endOffset),new hu(o.lineCount,o.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new g8(h8(e.range.startLineNumber-1,e.range.startColumn-1),h8(e.range.endLineNumber-1,e.range.endColumn-1),h8(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),o=xdt(r,n);return t._fromTextEditInfo(o)}getRange(){if(this.edits.length!==0)return or.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Wne=class{constructor(e,r){this.range=e;this.newLength=r}static{a(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var jne=class{constructor(e){this.documents=e;Ql(e.length>0)}static{a(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},Gne=class{constructor(e,r,n,o,s){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=o;this.lastSelection=s;this.lastEdit=new Yd(this.base,this.lastEdits.compose())}static{a(this,"DocumentHistory")}};f();var Vne=class extends Ps{constructor(){super();this.branch=UA("branchName",void 0);this._register(Yxe((r,n)=>{this.init(n)}))}static{a(this,"ObservableGitStub")}async init(r){}};var zne=class extends Ps{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new P_e(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{a(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new Vne;this._register(KR(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=p8(),this._documentState.forEach(s=>s.applyAllEdits()))})),Mh(this,this.workspace.openDocuments,(n,o)=>{let s=n.selection.get().at(0),c=new k_e(n.id,n.value.get().value,n.languageId.get(),s);this._documentState.set(c.docId,c),s&&this._lastDocuments.push(c),o.add(Ox(this,{value:n.value,selection:n.selection,languageId:n.languageId},l=>{l.languageId.changes.length>0&&(c.languageId=l.languageId.value);let u=this._isAwaitingGitCheckoutCooldown();for(let d of l.value.changes)this._lastDocuments.push(c),c.handleEdit(d,u);l.selection.changes.length>0&&(c.handleSelection(l.selection.value.at(0)),this._lastDocuments.push(c))})),o.add(qc(()=>{let l=this._documentState.get(n.id);l&&this._lastDocuments.remove(l),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,o=100){let s=this._documentState.get(r);if(!s||!this._lastDocuments.has(s)||!await this.workspace.getDocument(r))return;let c=[],l=!1;for(let u of this._lastDocuments.getItemsReversed()){let d=u.getRecentEdit(n,o);if(d!==void 0){if(d.editCount===0&&l)break;if(await this.workspace.getDocument(u.docId)&&(u.docId===r&&(l=!0),c.push(d.history),n-=d.editCount,n<=0))break}}if(c.reverse(),!!c.some(u=>u.docId===r))return new jne(c)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=p8()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},k_e=class t{constructor(e,r,n,o){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new gu(r),this._currentValue=this._baseValue,this.handleSelection(o)}static{a(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=m8.fromEdit(e,this._currentValue),o=IU.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function s(l){return Wk(l.edits,u=>u.newText.length)}a(s,"editInsertSize");let c=this._edits.at(-1);c&&s(c.edit)<200&&K0r(e,c.edit)?(c.edit=c.edit.compose(e),c.textLengthEdit=c.textLengthEdit.compose(o),c.instant=p8(),c.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:o,instant:p8()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),o=new P1(this._edits.map(s=>s.edit));return{history:new Gne(this.docId,this.languageId,this._baseValue,o,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,o=Ca.empty,s=IU.empty,c,l=0,u=Ca.empty;for(c=this._edits.length-1;c>=0;c--){let d=this._edits[c];if(p8()-d.instant>600*1e3)break;let p=d.textLengthEdit.compose(s),m=p.getRange();Mne(m,"we only compose non-empty Edits");let h=m.endLineNumber-m.startLineNumber;if(r>0&&h>r)break;let g=Wk(d.textLengthEdit.edits,N=>N.range.endLineNumber-N.range.startLineNumber+N.newLength.lineCount);if(g>t.MAX_EDITED_LINES_PER_EDIT||Wk(d.edit.edits,N=>N.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||Wk(d.edit.edits,N=>N.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(c===this._edits.length-1)u=d.edit;else{let N=Ca.trySwap(d.edit,u);if(N)u=N.e1;else{if(g>=2)break;u=d.edit.compose(u)}}let v=d.edit.inverseOnString(n.value);n=n.apply(v);let b=d.edit.compose(o),I=gs.fromEdit(new Yd(n,b)),k=new k1(n,I).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;l=k,o=b,s=p}for(let d=0;d<=c;d++){let p=this._edits[d];this._baseValue=this._baseValue.apply(p.edit)}return this._edits=this._edits.slice(c+1),{editCount:l}}toString(){return new P1(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function Wk(t,e){let r=0;for(let n of t)r+=e(n);return r}a(Wk,"sum");function K0r(t,e){let r=e.getNewRanges();return t.edits.every(n=>Y0r(n.range,r))}a(K0r,"editExtends");function Y0r(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}a(Y0r,"doesTouch");var P_e=class{constructor(e){this.maxSize=e;this._arr=[]}static{a(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};f();f();var jk=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{a(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new zt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=BA(this.lineStartOffsetByLineIdx,s=>s<=e),n=r+1,o=e-this.lineStartOffsetByLineIdx[r]+1;return new jr(n,o)}getRange(e){return or.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return hu.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new hu(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var D_e=class{constructor(){this._transformer=void 0}static{a(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new jr(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new or(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new jk(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new or(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Oh(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var pE=class extends D_e{constructor(r){super();this.value=r;this._t=new jk(this.value)}static{a(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};f();f();f();var TU=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new bn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{a(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let o=r.tryJoinTouching(n);if(o){r=o;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let o=[...r.replacements],s=[],c=0;for(let l of n.replacements){for(;;){let m=o[0];if(!m||m.replaceRange.start+c+m.getNewLength()>=l.replaceRange.start)break;o.shift(),s.push(m),c+=m.getNewLength()-m.replaceRange.length}let u=c,d,p;for(;;){let m=o[0];if(!m||m.replaceRange.start+c>l.replaceRange.endExclusive)break;d||(d=m),p=m,o.shift(),c+=m.getNewLength()-m.replaceRange.length}if(!d)s.push(l.delta(-c));else{let m=Math.min(d.replaceRange.start,l.replaceRange.start-u),h=l.replaceRange.start-(d.replaceRange.start+u);if(h>0){let v=d.slice(zt.emptyAt(m),new zt(0,h));s.push(v)}if(!p)throw new bn("Invariant violation: lastIntersecting is undefined");let g=p.replaceRange.endExclusive+c-l.replaceRange.endExclusive;if(g>0){let v=p.slice(zt.ofStartAndLength(p.replaceRange.endExclusive,0),new zt(p.getNewLength()-g,p.getNewLength()));o.unshift(v),c-=v.getNewLength()-v.replaceRange.length}let A=new zt(m,l.replaceRange.endExclusive-c),y=l.slice(A,new zt(0,l.getNewLength()));s.push(y)}}for(;;){let l=o.shift();if(!l)break;s.push(l)}return this._createNew(s).normalize()}decomposeSplit(e){let r=[],n=[],o=0;for(let s of this.replacements)e(s)?(r.push(s),o+=s.getNewLength()-s.replaceRange.length):n.push(s.slice(s.replaceRange.delta(o),new zt(0,s.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(zt.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return l7(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new zt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let o=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+o)return n.replaceRange.start;r+=o-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new zt(r,n)}},Kne=class{constructor(e){this.replaceRange=e}static{a(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new zt(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new zt(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},Edt=class t extends TU{static{a(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var Yne=class extends TU{static{a(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((c,l)=>" ".repeat(l-c)),o=r.tryRebase(n);if(!o)return;let s=e.tryRebase(o);if(s)return{e1:o,e2:s}}apply(e){let r=[],n=0;for(let o of this.replacements)r.push(e.substring(n,o.replaceRange.start)),r.push(o.newText),n=o.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let o of this.replacements)r.push(fd.replace(zt.ofStartAndLength(o.replaceRange.start+n,o.newText.length),e(o.replaceRange.start,o.replaceRange.endExclusive))),n+=o.newText.length-o.replaceRange.length;return new Hf(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],o=0,s=0,c=0;for(;s<this.replacements.length||o<e.replacements.length;){let l=e.replacements[o],u=this.replacements[s];if(u)if(!l)n.push(new fd(u.replaceRange.delta(c),u.newText)),s++;else if(u.replaceRange.intersectsOrTouches(l.replaceRange)){if(s++,r)return}else u.replaceRange.start<l.replaceRange.start?(n.push(new fd(u.replaceRange.delta(c),u.newText)),s++):(o++,c+=l.newText.length-l.replaceRange.length);else break}return new Hf(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let o=n.removeCommonSuffixPrefix(e);o.isEmpty||r.push(o)}return new Hf(r)}normalizeEOL(e){return new Hf(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),o=fd.replace(zt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return o.isEmpty?Hf.empty:o.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new pE(this.apply(e.value))}mapData(e){return new B_e(this.replacements.map(r=>new A8(r.replaceRange,r.newText,e(r))))}},Jne=class extends Kne{constructor(r,n){super(r);this.newText=n}static{a(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),o=ZT(n,this.newText),s=Math.min(n.length-o,this.newText.length-o,Fx(n,this.newText)),c=new zt(this.replaceRange.start+o,this.replaceRange.endExclusive-s),l=this.newText.substring(o,this.newText.length-s);return new fd(c,l)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new fd(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),o=ZT(n,this.newText);return o===0?this:this.slice(this.replaceRange.deltaStart(o),new zt(o,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),o=Fx(n,this.newText);return o===0?this:this.slice(this.replaceRange.deltaEnd(-o),new zt(0,this.newText.length-o))}toEdit(){return new Hf([this])}},Hf=class t extends Yne{static{a(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new fd(e,r)])}static insert(e,r){return new t([new fd(zt.emptyAt(e),r)])}static delete(e){return new t([new fd(e,"")])}static fromJson(e){return new t(e.map(fd.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let o of e){let s=n.at(-1);!s||o.replaceRange.isBefore(s.replaceRange)?n.push(o):(r=r.compose(t.create(n.reverse())),n=[o])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},fd=class t extends Jne{static{a(this,"StringReplacement")}static insert(e,r){return new t(zt.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(zt.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var B_e=class t extends Yne{static{a(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new A8(e,r,n)])}static insert(e,r,n){return new t([new A8(zt.emptyAt(e),r,n)])}static delete(e,r){return new t([new A8(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new Hf(this.replacements.map(e=>new fd(e.replaceRange,e.newText)))}},A8=class t extends Jne{constructor(r,n,o){super(r,n);this.data=o}static{a(this,"AnnotatedStringReplacement")}static insert(r,n,o){return new t(zt.emptyAt(r),n,o)}static replace(r,n,o){return new t(r,n,o)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};f();var wU=class t{constructor(e){this.replacements=e;QA(()=>Bx(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{a(this,"TextEdit")}static fromStringEdit(e,r){let n=e.replacements.map(o=>Jd.fromStringReplacement(o,r));return new t(n)}static replace(e,r){return new t([new Jd(e,r)])}static insert(e,r){return new t([new Jd(or.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.replacements)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new Jd(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,o=0;for(let s of this.replacements){let c=s.range.getStartPosition();if(e.isBeforeOrEqual(c))break;let l=s.range.getEndPosition(),u=hu.ofText(s.text);if(e.isBefore(l)){let d=new jr(c.lineNumber+r,c.column+(c.lineNumber+r===n?o:0)),p=u.addToPosition(d);return Xne(d,p)}c.lineNumber+r!==n&&(o=0),r+=u.lineCount-(s.range.endLineNumber-s.range.startLineNumber),u.lineCount===0?l.lineNumber!==c.lineNumber?o+=u.columnCount-(l.column-1):o+=u.columnCount-(l.column-c.column):o=u.columnCount,n=l.lineNumber+r}return new jr(e.lineNumber+r,e.column+(e.lineNumber+r===n?o:0))}mapRange(e){function r(c){return c instanceof jr?c:c.getStartPosition()}a(r,"getStart");function n(c){return c instanceof jr?c:c.getEndPosition()}a(n,"getEnd");let o=r(this.mapPosition(e.getStartPosition())),s=n(this.mapPosition(e.getEndPosition()));return Xne(o,s)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new jr(1,1);for(let s of this.replacements){let c=s.range,l=c.getStartPosition(),u=c.getEndPosition(),d=Xne(n,l);d.isEmpty()||(r+=e.getValueOfRange(d)),r+=s.text,n=u}let o=Xne(n,e.endPositionExclusive);return o.isEmpty()||(r+=e.getValueOfRange(o)),r}applyToString(e){let r=new pE(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.replacements.map((n,o)=>new Jd(r[o],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,o=0;for(let s of this.replacements){let c=hu.ofText(s.text),l=jr.lift({lineNumber:s.range.startLineNumber+n,column:s.range.startColumn+(s.range.startLineNumber===r?o:0)}),u=c.createRange(l);e.push(u),n=u.endLineNumber-s.range.endLineNumber,o=u.endColumn-s.range.endColumn,r=s.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new bn;if(this.replacements.length===1)return this.replacements[0];let r=this.replacements[0].range.getStartPosition(),n=this.replacements[this.replacements.length-1].range.getEndPosition(),o="";for(let s=0;s<this.replacements.length;s++){let c=this.replacements[s];if(o+=c.text,s<this.replacements.length-1){let l=this.replacements[s+1],u=or.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),d=e.getValueOfRange(u);o+=d}}return new Jd(or.fromPositions(r,n),o)}equals(e){return p3(this.replacements,e.replacements,(r,n)=>r.equals(n))}toString(e){return e===void 0?this.replacements.map(r=>r.toString()).join(`
`):typeof e=="string"?this.toString(new pE(e)):this.replacements.length===0?"":this.replacements.map(r=>{let o=e.getValueOfRange(r.range),s=or.fromPositions(new jr(Math.max(1,r.range.startLineNumber-1),1),r.range.getStartPosition()),c=e.getValueOfRange(s);c.length>10&&(c="..."+c.substring(c.length-10));let l=or.fromPositions(r.range.getEndPosition(),new jr(r.range.endLineNumber+1,1)),u=e.getValueOfRange(l);u.length>10&&(u=u.substring(0,10)+"...");let d=o;if(d.length>10){let m=Math.floor(5);d=d.substring(0,m)+"..."+d.substring(d.length-m)}let p=r.text;if(p.length>10){let m=Math.floor(5);p=p.substring(0,m)+"..."+p.substring(p.length-m)}return d.length===0?`${c}\u2770${p}\u2771${u}`:`${c}\u2770${d}\u21A6${p}\u2771${u}`}).join(`
`)}},Jd=class t{constructor(e,r){this.range=e;this.text=r}static{a(this,"TextReplacement")}static joinReplacements(e,r){if(e.length===0)throw new bn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),o=e[e.length-1].range.getEndPosition(),s="";for(let c=0;c<e.length;c++){let l=e[c];if(s+=l.text,c<e.length-1){let u=e[c+1],d=or.fromPositions(l.range.getEndPosition(),u.range.getStartPosition()),p=r.getValueOfRange(d);s+=p}}return new t(or.fromPositions(n,o),s)}static fromStringReplacement(e,r){return new t(r.getTransformer().getRange(e.replaceRange),e.newText)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new wU([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),o=r.getValueOfRange(or.fromPositions(n.getStartPosition(),this.range.getStartPosition())),s=r.getValueOfRange(or.fromPositions(this.range.getEndPosition(),n.getEndPosition())),c=o+this.text+s;return new t(n,c)}extendToFullLine(e){let r=new or(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),o=ZT(r,n),s=hu.ofText(r.substring(0,o)).addToPosition(this.range.getStartPosition()),c=n.substring(o),l=or.fromPositions(s,this.range.getEndPosition());return new t(l,c)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),o=ZT(r,n);r=r.substring(o),n=n.substring(o);let s=Fx(r,n);return r=r.substring(0,r.length-s),n=n.substring(0,n.length-s),r===""}};function Xne(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return or.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new bn("start must be before end");return new or(t.lineNumber,t.column,e.lineNumber,e.column)}a(Xne,"rangeFromPositions");var _U=class t{constructor(e){this.replacements=e;Ql(Bx(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{a(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>y8.deserialize(r)))}static fromEdit(e,r){let n=wU.fromStringEdit(e,r);return t.fromTextEdit(n,r)}static fromTextEdit(e,r){let n=e.replacements,o=[],s=[];for(let c=0;c<n.length;c++){let l=n[c],u=c+1<n.length?n[c+1]:void 0;if(s.push(l),u&&u.range.startLineNumber===l.range.endLineNumber)continue;let d=Jd.joinReplacements(s,r);s.length=0;let p=y8.fromSingleTextEdit(d,r);o.push(p)}return new t(o)}static createFromUnsorted(e){let r=e.slice();return r.sort(Sh(n=>n.lineRange.startLineNumber,Rh)),new t(r)}isEmpty(){return this.replacements.length===0}toEdit(e){let r=[];for(let n of this.replacements){let o=n.toSingleEdit(e);r.push(o)}return new Hf(r)}toString(){return this.replacements.map(e=>e.toString()).join(",")}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Gr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.replacements){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Gr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.replacements.some(r=>e.replacements.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.replacements.map(r=>new y8(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(l,u,d,p){let m=d==="unmodified"?" ":d==="deleted"?"-":"+";p===void 0&&(p="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let h=l===-1?"   ":l.toString().padStart(3," "),g=u===-1?"   ":u.toString().padStart(3," ");r.push(`${m} ${h} ${g} ${p}`)}a(n,"pushLine");function o(){r.push("---")}a(o,"pushSeperator");let s=0,c=!0;for(let l of QR(this.replacements,(u,d)=>u.lineRange.distanceToRange(d.lineRange)<=5)){c?c=!1:o();let u=l[0].lineRange.startLineNumber-2;for(let d of l){for(let h=Math.max(1,u);h<d.lineRange.startLineNumber;h++)n(h,h+s,"unmodified",e[h-1]);let p=d.lineRange,m=d.newLines;for(let h of p.mapToLineArray(g=>g)){let g=e[h-1];n(h,-1,"deleted",g)}for(let h=0;h<m.length;h++){let g=m[h];n(-1,p.startLineNumber+s+h,"added",g)}u=p.endLineNumberExclusive,s+=d.newLines.length-d.lineRange.length}for(let d=u;d<=Math.min(u+2,e.length);d++)n(d,d+s,"unmodified",e[d-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let o of this.replacements){for(;n<o.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let s of o.newLines)r.push(s);n=o.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.replacements.map((n,o)=>new y8(r[o],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},y8=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{a(this,"LineReplacement")}static deserialize(e){return new t(Gr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Oh(e.text),o=e.range.startLineNumber,s=r.getValueOfRange(or.fromPositions(new jr(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=s+n[0];let c=e.range.endLineNumber+1,l=r.getTransformer().getLineLength(e.range.endLineNumber)+1,u=r.getValueOfRange(or.fromPositions(e.range.getEndPosition(),new jr(e.range.endLineNumber,l)));n[n.length-1]=n[n.length-1]+u;let d=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,p=e.range.endColumn===1;return d&&n[0].length===s.length&&(o++,n.shift()),n.length>0&&o<c&&p&&n[n.length-1].length===u.length&&(c--,n.pop()),new t(new Gr(o,c),n)}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let s=this.lineRange.startLineNumber-1,c=e.getTransformer().getLineLength(s)+1;n=new jr(s,c)}else n=new jr(1,1);let o=r.addToPosition(new jr(1,1));return new Jd(or.fromPositions(n,o),"")}else return new Jd(new or(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,o,s=this.lineRange.startLineNumber;return s===e.getTransformer().textLength.lineCount+2?(r=s-1,n=e.getTransformer().getLineLength(r)+1,o=this.newLines.map(c=>`
`+c).join("")):(r=s,n=1,o=this.newLines.map(c=>c+`
`).join("")),new Jd(or.fromPositions(new jr(r,n)),o)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,o=new or(this.lineRange.startLineNumber,1,r,n),s=this.newLines.join(`
`);return new Jd(o,s)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return new fd(n,r.text)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,o=0;for(;r<n&&o<this.newLines.length&&this.newLines[o]===e.getLineAt(r);)r++,o++;let s=0;for(;r<n&&s+o<this.newLines.length&&this.newLines[this.newLines.length-1-s]===e.getLineAt(n-1);)n--,s++;return o===0&&s===0?this:new t(new Gr(r,n),this.newLines.slice(o,this.newLines.length-s))}toLineEdit(){return new _U([this])}},J0r;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,a(t,"is")})(J0r||={});var C8=class{constructor(e,r){this.originalText=e;this._trackedEdit=r;let n=r.removeCommonSuffixPrefix(e);this._updatedTrackedEdit=n.mapData(()=>new Zne(!0))}static{a(this,"ArcTracker")}handleEdits(e){let r=e.mapData(s=>new Zne(!1)),o=this._updatedTrackedEdit.compose(r).decomposeSplit(s=>!s.data.isTrackedEdit).e2;this._updatedTrackedEdit=o}getTrackedEdit(){return this._updatedTrackedEdit.toStringEdit()}getAcceptedRetainedCharactersCount(){return Wk(this._updatedTrackedEdit.replacements,r=>r.getNewLength())}getOriginalCharacterCount(){return Wk(this._trackedEdit.replacements,e=>e.getNewLength())}getTrackedEditLineMetrics(){let e=this.getTrackedEdit();if(!e)return{deletedLineCounts:0,insertedLineCounts:0};let r=_U.fromEdit(e,new pE(this.originalText)),n=l7(r.replacements,s=>s.lineRange.length),o=l7(r.getNewLineRanges(),s=>s.length);return{deletedLineCounts:n,insertedLineCounts:o}}getDebugState(){return{edits:this._updatedTrackedEdit.replacements.map(e=>({range:e.replaceRange.toString(),newText:e.newText,isTrackedEdit:e.data.isTrackedEdit}))}}},Zne=class{constructor(e){this.isTrackedEdit=e}static{a(this,"IsTrackedEditData")}join(e){if(this.isTrackedEdit===e.isTrackedEdit)return this}};f();var v8=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=Hf.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{a(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let o=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${o}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),o=this._combinedEditsSinceStart.compose(e);o=o.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=o,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,o=0,s=this._originalEdits.getNewRanges(),c=X0r(s,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${s.length} edits:`);for(let d=0;d<s.length;d++){let p=this._originalEdits.replacements[d],m=this.originalText.substring(p.replaceRange.start,p.replaceRange.endExclusive),h=p.newText,g=c[d],A=this._text.substring(g.start,g.endExclusive),y=N_e(A,h),v=N_e(h,m),b=N_e(A,m);if(this._debugLog.push(`  #${d+1}: "${m}"->"${h}"->"${A}" | 4gram:${y.toFixed(2)} noRevert:(${v.toFixed(2)},${b.toFixed(2)})`),v!==1){let I=1-Math.max(b-v,0)/(1-v);n+=p.replaceRange.length*I,o+=p.replaceRange.length}e+=p.newText.length*y,r+=p.newText.length}let l=r===0?1:e/r,u=o===0?1:n/o;return this._debugLog.push(`[RESULT] fourGram: ${l.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${u.toFixed(3)} (${n.toFixed(1)}/${o.toFixed(1)})`),{fourGram:l,noRevert:u}}};function N_e(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let l=0;l<=t.length-4;l++){let u=t.substring(l,l+4),d=n.get(u)||0;n.set(u,d+1)}for(let l=0;l<=e.length-4;l++){let u=e.substring(l,l+4),d=n.get(u)||0;n.set(u,d-1)}let o=t.length-4+1+e.length-4+1,s=0;for(let l of n.values())s+=Math.abs(l);return(o-s)/o}a(N_e,"compute4GramTextSimilarity");function X0r(t,e){t=t.slice();let r=[],n=0;for(let o of e.replacements){for(;;){let c=t[0];if(!c||c.endExclusive>=o.replaceRange.start)break;t.shift(),r.push(c.delta(n))}let s=[];for(;;){let c=t[0];if(!c||!c.intersectsOrTouches(o.replaceRange))break;t.shift(),s.push(c)}for(let c=s.length-1;c>=0;c--){let l=s[c],u=l.intersect(o.replaceRange).length;l=l.deltaEnd(-u+(c===0?o.newText.length:0));let d=l.start-o.replaceRange.start;d>0&&(l=l.delta(-d)),c!==0&&(l=l.delta(o.newText.length)),l=l.delta(-(o.newText.length-o.replaceRange.length)),t.unshift(l)}n+=o.newText.length-o.replaceRange.length}for(;;){let o=t[0];if(!o)break;t.shift(),r.push(o.delta(n))}return r}a(X0r,"applyEditsToRanges");f();f();var SU=class{static{a(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new jr(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function eie(t,e,r,n=5e3){let o=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),s=new SU(t),c=new SU(e),l=[];for(let u of o.changes)for(let d of u.innerChanges??[]){let p=c.positionToOffset(d.modifiedRange.getStartPosition()),m=c.positionToOffset(d.modifiedRange.getEndPosition()),h=e.substring(p,m),g=s.positionToOffset(d.originalRange.getStartPosition()),A=s.positionToOffset(d.originalRange.getEndPosition()),y=new zt(g,A);l.push(new fd(y,h))}return new Hf(l)}a(eie,"stringEditFromDiff");f();f();var bdt=require("worker_threads");var M_e=class{constructor(){this.nextId=1;this.handlers=new Map}static{a(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,o=new Promise((s,c)=>{r=s,n=c});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:o}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function Z0r(t){let e={get:a((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...o)=>t(n,o)),r[n]),"get")};return new Proxy(Object.create(null),e)}a(Z0r,"createRpcProxy");var tie=class{constructor(e,r,n){this.responseHandler=new M_e;this.worker=new bdt.Worker(e,r),this.worker.on("message",async o=>{if("fn"in o)try{let s=await n?.[o.fn].apply(n,o.args);this.worker.postMessage({id:o.id,res:s})}catch(s){let c=s instanceof Error?s:new Error(String(s));this.worker.postMessage({id:o.id,err:c})}else this.responseHandler.handleResponse(o)}),this.worker.on("error",o=>this.handleError(o)),this.worker.on("exit",o=>{o!==0&&this.handleError(new Error(`Worker thread exited with code ${o}.`))}),this.proxy=Z0r((o,s)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:c,result:l}=this.responseHandler.createHandler();return this.worker.postMessage({id:c,fn:o,args:s}),l})}static{a(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};f();var rie=class t{static{a(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var RU=class t{static{a(this,"LineRangeMapping")}static inverse(e,r,n){let o=[],s=1,c=1;for(let u of e){let d=new t(new Gr(s,u.original.startLineNumber),new Gr(c,u.modified.startLineNumber));d.modified.isEmpty||o.push(d),s=u.original.endLineNumberExclusive,c=u.modified.endLineNumberExclusive}let l=new t(new Gr(s,r+1),new Gr(c,n+1));return l.modified.isEmpty||o.push(l),o}static clip(e,r,n){let o=[];for(let s of e){let c=s.original.intersect(r),l=s.modified.intersect(n);c&&!c.isEmpty&&l&&!l.isEmpty&&o.push(new t(c,l))}return o}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new D1(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new bn("not a valid diff");return new D1(new or(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new or(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new D1(new or(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new or(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(Idt(this.original.endLineNumberExclusive,e)&&Idt(this.modified.endLineNumberExclusive,r))return new D1(new or(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new or(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new D1(or.fromPositions(new jr(this.original.startLineNumber,1),x8(new jr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),or.fromPositions(new jr(this.modified.startLineNumber,1),x8(new jr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new D1(or.fromPositions(x8(new jr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),x8(new jr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),or.fromPositions(x8(new jr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),x8(new jr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new bn}};function x8(t,e){if(t.lineNumber<1)return new jr(1,1);if(t.lineNumber>e.length)return new jr(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new jr(t.lineNumber,r.length+1):t}a(x8,"normalizePosition");function Idt(t,e){return t>=1&&t<=e.length}a(Idt,"isValidLineNumber");var nie=class t extends RU{static{a(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=Gr.join(e.map(o=>Gr.fromRangeInclusive(o.originalRange))),n=Gr.join(e.map(o=>Gr.fromRangeInclusive(o.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},D1=class t{static{a(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.replacements.map((o,s)=>new t(o.range,r[s]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.replacements.map((o,s)=>new t(o.range,r[s]));return t.join(n)}static join(e){if(e.length===0)throw new bn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],o=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(o.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(o.modifiedRange.getStartPosition())))throw new bn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new Jd(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var wdt=require("fs");var zp=class{static{a(this,"DiffServiceImpl")}constructor(){this._worker=new Fh(()=>{let e=emr([Dne(__dirname,"diffWorker.js"),Dne(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new tie(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let o=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:o.identical,quitEarly:o.quitEarly,changes:Tdt(o.changes),moves:o.moves.map(c=>new rie(new RU(new Gr(c[0],c[1]),new Gr(c[2],c[3])),Tdt(c[4])))}}};function Tdt(t){return t.map(e=>new nie(new Gr(e[0],e[1]),new Gr(e[2],e[3]),e[4]?.map(r=>new D1(new or(r[0],r[1],r[2],r[3]),new or(r[4],r[5],r[6],r[7])))))}a(Tdt,"toLineRangeMappings");function emr(t){for(let e of t)if((0,wdt.existsSync)(e))return e}a(emr,"firstExistingPath");f();var oie=new ft("repository"),mE=class t{static{a(this,"GitBranchData")}constructor(e,r=!1){this.currentBranch=e,this.isDetachedHead=r}static detachedHead(){return new t(void 0,!0)}static branch(e){return new t(e,!1)}},og=class{static{a(this,"GitBranchLoader")}},iie=class extends og{constructor(r){super();this.loaders=r}static{a(this,"GitFallbackBranchLoader")}async getBranchInfo(r,n){for(let o of this.loaders){let s=await o.getBranchInfo(r,n);if(s)return s}}};var sie=new ft("editSurvivalReporter"),L_e=class{constructor(e,r,n,o,s,c,l){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=o;this._markedEdits=s;this._sendTelemetryEvent=c;this._customTimeouts=l;this._store=new id;this._editSurvivalTracker=new v8(this._documentTextBeforeMarkedEdits,this._markedEdits),this.captureInitialBranchInfo().then(()=>{this.setupTimeouts()}).catch(()=>{this.setupTimeouts()})}static{a(this,"BaseEditSurvivalReporter")}setupTimeouts(){if(this._store.isDisposed)return;let e=this._customTimeouts||[30*1e3,120*1e3,300*1e3,600*1e3];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}async report(e){let r=await this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs,this._arcTracker);this._sendTelemetryEvent(r)}_getLineCountInfo(){if(this._arcTracker)return this._arcTracker.getTrackedEditLineMetrics()}async triggerReport(e){await this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}async captureInitialBranchInfo(){try{let e=Rd(this._document.uri),r=this.ctx.get(og);this._initialBranchInfo=await r.getBranchInfo(this.ctx,e)}catch(e){sie.warn(this.ctx,"Failed to capture initial branch info",e),this._initialBranchInfo=void 0}}async checkBranchChange(){try{let e=Rd(this._document.uri),n=await this.ctx.get(og).getBranchInfo(this.ctx,e);if(!this._initialBranchInfo||!n)return 0;let o=this._initialBranchInfo.currentBranch,s=n.currentBranch,c=this._initialBranchInfo.isDetachedHead,l=n.isDetachedHead;return o!==s||c!==l?1:0}catch(e){return sie.warn(this.ctx,"Failed to check branch change",e),0}}async createEditSurvivalResult(e,r,n,o,s){let c=e.computeTrackedEditsSurvivalScore(),l=await this.checkBranchChange(),u=this._getLineCountInfo(),d={fourGram:c.fourGram,noRevert:c.noRevert,timeDelayMs:r,didBranchChange:l,arc:s?.getAcceptedRetainedCharactersCount(),originalCharCount:s?.getOriginalCharacterCount(),currentLineCount:u?.insertedLineCounts,currentDeletedLineCount:u?.deletedLineCounts,originalLineCount:this._initialLineCounts?.insertedLineCounts,originalDeletedLineCount:this._initialLineCounts?.deletedLineCounts,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:o};return{...d,currentLineCount:d.currentLineCount&&d.originalLineCount&&d.currentLineCount>d.originalLineCount?d.originalLineCount:d.currentLineCount,currentDeletedLineCount:d.currentDeletedLineCount&&d.originalDeletedLineCount&&d.currentDeletedLineCount>d.originalDeletedLineCount?d.originalDeletedLineCount:d.currentDeletedLineCount}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),o=await e.get(In).getOrReadTextDocument({uri:r.uri}),s=performance.now()-n;if(o.status!=="valid")throw new bn(`Document ${r.uri} is not valid, details ${JSON.stringify(o)}`);return{text:o.document.getText(),readDocumentTimeMs:s}}async computeDiffWithTiming(e,r,n){let o=performance.now(),s=await eie(r,n,e.get(zp)),c=performance.now()-o;return{edits:s,diffComputationTimeMs:c}}};var aie=class extends L_e{static{a(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,o,s,c,l){super(e,r,n,o,s,c,l),this._arcTracker=new C8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._initialLineCounts=this._getLineCountInfo()}scheduleReport(e,r){let n=new d8(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(o=>{sie.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,o),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new v8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits),this._arcTracker=new C8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new v8(this._documentTextBeforeMarkedEdits,this._markedEdits),this._arcTracker=new C8(this._documentTextBeforeMarkedEdits,this._markedEdits);await this.report(e)}catch(r){throw sie.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var _dt=new ft("editSurvivalTrackerService"),B1=class{constructor(e){this.ctx=e}static{a(this,"EditSurvivalTrackerService")}initialize(e,r,n){_dt.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let o;return{startReporter:a(s=>{(async()=>{try{let c=await eie(r,n,this.ctx.get(zp));o=new aie(this.ctx,e,r,n,c,s,[0,30*1e3,120*1e3,300*1e3,600*1e3])}catch(c){_dt.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${FA(c)}`,c)}})()},"startReporter"),cancel:a(()=>{o?.cancel()},"cancel")}}};f();var va=class extends Error{static{a(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var tmr=1e3,rmr={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:Wr.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},E8=class{static{a(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new ft("codeMapper")}async mapCode(e,r,n,o,s,c=!1,l){if(!e.resource)throw new R1("No uri found in code block");if(o.isCancellationRequested)throw new Hw;e.code.includes(yl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let u=await this.ctx.get(In).getOrReadTextDocument({uri:e.resource});if(u.status==="notfound")return s&&await this.reportCodeBlock(e,s),{code:e.code};if(u.status==="invalid"){let k=`Failed to find file ${e.resource} with status ${u.status} and reason ${u.reason}`,N=new R1(k);throw this.logger.error(this.ctx,k,N),N}let d=u.document.getText();if(d.length===0&&!e.code.includes(yl))return s&&await this.reportCodeBlock(e,s),{code:e.code};let p=new vU({documentContext:{document:u},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new uE(this.ctx)}),m=this.ctx.get(B1),h=await p.render();h=p.transformToFastApplyMessage(h),s&&await s({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Di(e.resource),editDescription:e.markdownBeforeBlock});let g=await this.ctx.get(cr).getToken(),A=await this.ctx.get(Lt).updateExPValuesAndAssignments(g),y=sy(),v=[],b=0,I=0,S=d.length+e.code.length+tmr;for(;;){let k={copilotApiProvider:"proxy",modelConfiguration:rmr,messages:h,uiKind:c?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:d},copilotEditsSessionHeader:l};this.logger.debug(this.ctx,`Send map code request ${y} in iteration ${I} with params: ${JSON.stringify(k,null,2)}`);let F=await this.ctx.get(Bs).fetchResponse(k,o,A);if(this.logger.debug(this.ctx,`Received map code response ${y} in iteration ${I} with result: ${JSON.stringify(F,null,2)}`),b=this.calculateResponseLength(F,v,b),F.type==="length"){if(b>S)throw new R1(`Code mapper might be in a loop: Rewritten length: ${b}, Document length: ${d.length}, Code block length ${e.code.length}`);h=await new vU({documentContext:{document:u},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new uE(this.ctx),inProgressRewriteContent:F.truncatedValue}).render()}else if(F.type==="success"){let O=v.join("");if(O){s&&await s({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Di(e.resource),partialText:O,languageId:u.document.detectedLanguageId,markdownCodeFence:f8(O)});let Y=m.initialize(u.document,d,O);return{code:O,editSurvivalTrackingSession:Y,telemetry:{requestSource:n.chatRequestSource,chatRequestModel:n.chatRequestModel,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:F.requestId}}}else{let Y=`No valid completion found for uri ${e.resource}`;throw new R1(Y)}}else{if(F.type==="canceled")throw new va;{let O=`Failed to map code for uri ${e.resource} with result type ${F.type}`;throw this.logger.error(this.ctx,O,F),new R1(O)}}I+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Di(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Di(e.resource)})}};f();var Xd=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{a(this,"EditConversationException")}};f();f();var $w=class{static{a(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in. If you are using a custom model, please check if the API key is still valid.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var cie=class extends Error{static{a(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var Ww=class{constructor(e,r){this.request=e;this.id=Ir();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{a(this,"EditTurn")}},F_e=class{constructor(e=[]){this.turns=[];this.turns=e}static{a(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},lie=class{constructor(e=[],r="panel",n="en"){this._id=Ir();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new F_e(e)}static{a(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new cie(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var uie=class{static{a(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new Xd({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:HT,type:"user"},new Xd({message:HT});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new Xd({message:$w.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new Xd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new Xd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new Xd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new Xd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new Xd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new Xd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new Xd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new Xd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*Rdt(t){yield Promise.resolve(t)}a(Rdt,"stringToAsyncIterable");f();f();var hE=class{static{a(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||Dl(r)}static uriToPath(e){let r=rs(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var die=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{a(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let o of this.props.history)r.push({role:"user",content:o.request.message}),o.response&&o.response.type==="model"&&r.push({role:"assistant",content:o.response.message});let n=await oy.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},[]);return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(hE.posixFilePathToUri(e))}getFilePath(e){return hE.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${CU} ${this.exampleFilePath}`,`// ${yl}`,"{ changed code }",`// ${yl}`,"{ changed code }",`// ${yl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${CU} ${this.tsExampleFilePath}`,"class Person {",`   // ${yl}`,"   age: number;",`   // ${yl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,o]of e){let s=new lm({code:o.getText(),languageId:o.detectedLanguageId,uri:n});r.push("<file>",...s.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${yl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};f();f();var fie=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{a(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var O_e="<file>",kU="```",DU="###",imr=/^(`+)([^ \n]*)/,PU="filepath:";async function*Pdt(t,e){let r=new fie(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let y=await r.peek(Math.max(kU.length,O_e.length,DU.length));if(y.startsWith(O_e)||y.startsWith(kU))break;if(y.startsWith(DU)){let v=await r.readLineIncludingLF(),b=v.substring(DU.length).trim();e(b)?n.length=0:n.push(v)}else await kdt(r,n)}if(r.endOfStream)break;let o=await r.readLineIncludingLF(),s=o.startsWith(O_e);for(;!r.endOfStream&&!o.startsWith(kU);)o=await r.readLineIncludingLF();if(r.endOfStream)break;let c=o.match(imr),l=c?c[2]:void 0,u=nXe(l?tXe(l):void 0),d=[`${u.lineComment.start} ${PU}`,`:: ${PU}`,`<!-- ${PU}`,`// ${PU}`,`# ${PU}`],p=Math.max(...d.map(y=>y.length)),m=u.lineComment.end??"",h="</file>",g,A=[];for(;!r.endOfStream;){let y=await r.peek(Math.max(kU.length,p));if(y.startsWith(kU)){let v=await r.readLineIncludingLF();if(!s)break;if(await r.peek(h.length)===h){await r.readLineIncludingLF();break}else{A.push(v);continue}}if(!g&&d.some(v=>y.startsWith(v))){let v=await r.readLineIncludingLF(),b=d.reduce((I,S)=>y.startsWith(S)?v.substring(S.length):I,v);b=b.split("-->")[0].trim(),b.endsWith(m)&&(b=b.substring(0,b.length-m.length)),b=b.trim(),g=e(b);continue}await kdt(r,A)}yield{resource:g,language:l,code:A.join(""),markdownBeforeBlock:n.join("")},n.length=0}}a(Pdt,"getCodeBlocksFromResponse");async function kdt(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}a(kdt,"pipeOneLine");function Ddt(t){if(t.startsWith(`${DU} `))return"";let e=t.indexOf(`
${DU} `);return e===-1?"":t.substring(0,e)+`
`}a(Ddt,"parseOverallDescription");f();f();var pie=class extends Error{static{a(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var omr=new ft("CopilotEditsConversations"),vl=class{constructor(e){this.editConversations=new Sr(50);this.ctx=e}static{a(this,"EditConversations")}create(e="panel",r){let n=new lie([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&omr.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new pie(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};var smr=new ft("copilotEditsService"),gE=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new Bs(e)}static{a(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),o=uie.processResult(e,n);await this.parseAndSendProgressBack(e,o,r),e.currentTurn.response={message:o,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof Hw)await this.reportEnd(e,{message:HT});else if(n instanceof Xd)await this.reportEnd(e,n.editConversationError);else{let o=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:o,type:"meta"},await this.reportEnd(e,{message:o})}}return[]}async getEditCodeResult(e,r){this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),o=await this.ctx.get(cr).getToken(),s=await this.ctx.get(Lt).updateExPValuesAndAssignments(o);this.abortIfCancelled(e,r);let c=e.userSelectedModelProviderName&&e.userSelectedModel?await w1(this.ctx,e.userSelectedModelProviderName,e.userSelectedModel):await Go.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),l=Go.transformMessages(n,c.modelFamily);return this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:c,messages:l,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,s)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=e.userSelectedModelProviderName&&e.userSelectedModel?"customized":(await Go.getModelConfiguration(this.ctx,"edits",e.userSelectedModel)).uiName,o=e.editConversation.getTurns(),s=o.length>1?o.slice(0,-1):[];return await new die({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new uE(this.ctx),modelName:n,history:s,ctx:this.ctx}).render()}abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:HT,type:"user"},new Hw;this.ctx.get(vl).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let o=Rdt(r),s=new E8(this.ctx),c=a(d=>hE.pathToUri(e,d),"createUri"),l=[],u=Ddt(r);u&&await this.ctx.get(dd).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:u}),this.abortIfCancelled(e,n);for await(let d of Pdt(o,c)){let p=s.mapCode(d,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async m=>{await this.ctx.get(dd).reportTurn(e,m)}).then(async m=>(m.editSurvivalTrackingSession&&d.resource&&await this.startEditSurvivalTrackingWithSession(e,d.resource,m.editSurvivalTrackingSession,m.telemetry),m));l.push(p)}await Promise.all(l),l.length===0&&await this.reportNoCodeBlocks(e,r)}catch(o){if(o instanceof R1||o instanceof J3)e.currentTurn.status="error",e.currentTurn.response={message:o.message,type:"meta"},await this.reportEnd(e,{message:o.message});else if(o instanceof Hw)e.currentTurn.status="cancelled",e.currentTurn.response={message:HT,type:"user"},await this.reportEnd(e,{message:HT});else throw o}}async reportNoCodeBlocks(e,r){await this.ctx.get(dd).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(dd).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(dd).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}async startEditSurvivalTrackingWithSession(e,r,n,o){try{let s=RT({uri:r,languageId:"UNKNOWN"}),c=await this.ctx.get(cr).getToken(),l=await this.ctx.get(Lt).updateExPValuesAndAssignments(c);n.startReporter(u=>{this.handleEditSurvivalTelemetry(e,u,l,s,o)})}catch(s){let c=e?.editConversationId||"unknown",l=e?.currentTurn?.id||"unknown",u=r||"unknown";smr.warn(this.ctx,`Failed to start edit survival tracking for file '${u}' in conversation '${c}', turn '${l}'.`,s)}}handleEditSurvivalTelemetry(e,r,n,o,s){VX(this.ctx,"editsPanel",{requestSource:s?.requestSource??e.editConversation.getSource(),chatRequestModel:s?.chatRequestModel??"",mapper:s?.mapper??"",headerRequestId:s?.headerRequestId??"",mode:"edit",modelId:e.userSelectedModel??"unknown",languageId:o},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}};f();var b8=class extends mf{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{a(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let o=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let s=this.getConfiguredUrls();(o.apiUrl!==s.apiUrl||o.serverUrl!==s.serverUrl)&&r.get(cr).resetToken(),r.get(Od).updateSessionConfig(s)}recalculateUrlDefaults(r,n){let{serverUrl:o,apiUrl:s}=w0({serverUrl:Mj(r,n.serverUrl),apiUrl:Mj(r,n.apiUrl)});this.baseUrlObject=new URL(o),this.apiUrl=s}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};f();var eki=new ft("exp");function Ndt(t){let e=t.get(Lt);e.registerStaticFilters(lmr(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Bi(t,qt.DebugOverrideEngine)||Bi(t,qt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>GW()?"copilot-web":t.get(un).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>Bdt(t)),e.registerDynamicFilter(q4.CopilotRelatedPluginVersionGithubCopilot,()=>Bdt(t)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>amr(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(un).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>mie(t.get(un).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>cmr(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(un).getRelatedPluginInfo()){let o=op+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(q4).includes(o)){Fj(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[o]=mie(n.version)}return r}),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(un).getEditorPluginSpecificFilters()){let o=n.isVersion?mie(n.value):n.value;r[n.filter]=o}return r})}a(Ndt,"setupExperimentationService");function Bdt(t){return mie(!t.get(wo).isProduction()&&t.get(un).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(un).getEditorPluginInfo().version)}a(Bdt,"getEditorPluginVersion");function amr(t){let e=t.get(un).getEditorPluginInfo();return e.name==="copilot"&&EC(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}a(amr,"getPluginRelease");function cmr(t){let e=t.get(un).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}a(cmr,"getTargetPopulation");function lmr(t){return umr(t)}a(lmr,"createAllFilters");function umr(t){let e=t.get(Fs);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(wo).isProduction()?l2(t):"1.999.0"}}a(umr,"createDefaultFilters");function mie(t){return t.split("-")[0]}a(mie,"trimVersionSuffix");f();var Gk=Symbol("onMCPToolsListChanged"),Mdt=Symbol("onMCPResourcesListChanged"),Ldt=Symbol("onMCPResourceUpdated"),$f=class{static{a(this,"McpManager")}};f();var cy=class{static{a(this,"McpRuntimeNotifier")}},hie=class extends cy{static{a(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var jw=class{static{a(this,"AbstractCopilotMcpSamplingConfigSender")}};f();var I8=class{static{a(this,"AbstractCopilotMessageSender")}};f();f();f();var Q_e=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{a(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},gie=class{constructor(){this._recentUserActions=[]}static{a(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new Q_e(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let l=Date.now(),u=1;for(let p of this._recentUserActions){let m=l-p.time;if(m>6e5)continue;let h=Math.exp(-m/6e5),g=p.kind==="rejected"?1.5:.8;u*=1+(g-1)*h}let d=e*u;return d=Math.min(3e3,Math.max(50,d)),d}};f();f();f();var As;(n=>{function t(o){return new U_e(o)}n.ok=t,a(t,"ok");function e(o){return new q_e(o)}n.error=e,a(e,"error");function r(o){return n.error(new Error(o))}n.fromString=r,a(r,"fromString")})(As||={});var U_e=class t{constructor(e){this.val=e}static{a(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},q_e=class{constructor(e){this.err=e}static{a(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();var Aie=class t{constructor(e){this._indexMap=e}static{a(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((o,s)=>r(e[o],e[s]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw c7(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw c7(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};f();f();var VU=Ne(xa());function Xft(t){return t.map(phr).join(`
`)}a(Xft,"stringifyChatMessages");function phr({role:t,content:e}){if(t!==VU.Raw.ChatRole.User&&t!==VU.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===VU.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==VU.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}a(phr,"stringifyMessage");f();f();var mhr=/^\w[\w\d+.-]*$/,hhr=/^\//,ghr=/^\/\//;function Ahr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!mhr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!hhr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(ghr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}a(Ahr,"_validateUri");function yhr(t,e){return!t&&!e?"file":t}a(yhr,"_schemeFix");function Chr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==py&&(e=py+e):e=py;break}return e}a(Chr,"_referenceResolution");var Ms="",py="/",vhr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,r_=class t{static{a(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,o,s,c=!1){typeof e=="object"?(this.scheme=e.scheme||Ms,this.authority=e.authority||Ms,this.path=e.path||Ms,this.query=e.query||Ms,this.fragment=e.fragment||Ms):(this.scheme=yhr(e,c),this.authority=r||Ms,this.path=Chr(this.scheme,n||Ms),this.query=o||Ms,this.fragment=s||Ms,Ahr(this,c))}get fsPath(){return NSe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:o,query:s,fragment:c}=e;return r===void 0?r=this.scheme:r===null&&(r=Ms),n===void 0?n=this.authority:n===null&&(n=Ms),o===void 0?o=this.path:o===null&&(o=Ms),s===void 0?s=this.query:s===null&&(s=Ms),c===void 0?c=this.fragment:c===null&&(c=Ms),r===this.scheme&&n===this.authority&&o===this.path&&s===this.query&&c===this.fragment?this:new t_(r,n,o,s,c)}static parse(e,r=!1){let n=vhr.exec(e);return n?new t_(n[2]||Ms,jie(n[4]||Ms),jie(n[5]||Ms),jie(n[7]||Ms),jie(n[9]||Ms),r):new t_(Ms,Ms,Ms,Ms,Ms)}static file(e){let r=Ms;if(Ow&&(e=e.replace(/\\/g,py)),e[0]===py&&e[1]===py){let n=e.indexOf(py,2);n===-1?(r=e.substring(2),e=py):(r=e.substring(2,n),e=e.substring(n)||py)}return new t_("file",r,e,Ms,Ms)}static from(e,r){return new t_(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Ow&&e.scheme==="file"?n=t.file(xc.join(NSe(e,!0),...r)).path:n=Aa.join(e.path,...r),e.with({path:n})}toString(e=!1){return MSe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new t_(e);return r._formatted=e.external??null,r._fsPath=e._sep===tpt?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var tpt=Ow?1:void 0,t_=class extends r_{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{a(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=NSe(this,!1)),this._fsPath}toString(r=!1){return r?MSe(this,!0):(this._formatted||(this._formatted=MSe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=tpt),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},rpt={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Zft(t,e,r){let n,o=-1;for(let s=0;s<t.length;s++){let c=t.charCodeAt(s);if(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c===45||c===46||c===95||c===126||e&&c===47||r&&c===91||r&&c===93||r&&c===58)o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n!==void 0&&(n+=t.charAt(s));else{n===void 0&&(n=t.substr(0,s));let l=rpt[c];l!==void 0?(o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n+=l):o===-1&&(o=s)}}return o!==-1&&(n+=encodeURIComponent(t.substring(o))),n!==void 0?n:t}a(Zft,"encodeURIComponentFast");function xhr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=rpt[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}a(xhr,"encodeURIComponentMinimal");function NSe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Ow&&(r=r.replace(/\//g,"\\")),r}a(NSe,"uriToFsPath");function MSe(t,e){let r=e?xhr:Zft,n="",{scheme:o,authority:s,path:c,query:l,fragment:u}=t;if(o&&(n+=o,n+=":"),(s||o==="file")&&(n+=py,n+=py),s){let d=s.indexOf("@");if(d!==-1){let p=s.substr(0,d);s=s.substr(d+1),d=p.lastIndexOf(":"),d===-1?n+=r(p,!1,!1):(n+=r(p.substr(0,d),!1,!1),n+=":",n+=r(p.substr(d+1),!1,!0)),n+="@"}s=s.toLowerCase(),d=s.lastIndexOf(":"),d===-1?n+=r(s,!1,!0):(n+=r(s.substr(0,d),!1,!0),n+=s.substr(d))}if(c){if(c.length>=3&&c.charCodeAt(0)===47&&c.charCodeAt(2)===58){let d=c.charCodeAt(1);d>=65&&d<=90&&(c=`/${String.fromCharCode(d+32)}:${c.substr(3)}`)}else if(c.length>=2&&c.charCodeAt(1)===58){let d=c.charCodeAt(0);d>=65&&d<=90&&(c=`${String.fromCharCode(d+32)}:${c.substr(2)}`)}n+=r(c,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),u&&(n+="#",n+=e?u:Zft(u,!1,!1)),n}a(MSe,"_asFormatted");function npt(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+npt(t.substr(3)):t}}a(npt,"decodeURIComponentGraceful");var ept=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function jie(t){return t.match(ept)?t.replace(ept,e=>npt(e)):t}a(jie,"percentDecode");f();var my=class t{constructor(e){this.uri=e;this._uri=r_.parse(Bl(this.uri))}static{a(this,"DocumentId")}static{this._cache=new Lx({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return Bne(this.uri)}get extension(){return Nne(this.uri)}toUri(){return this._uri}};var zU=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{a(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},Gie=class t{constructor(e,r,n,o,s){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=o;this.options=s;this.seqid=String(++t.ID);this.cancellationTokenSource=new Mx;this.liveDependentants=0;this.fetchIssued=!1;this._result=new pU;Ql(r.length>0),Ql(n>=0&&n<r.length)}static{a(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>KU.deserialize(r)),e.activeDocumentIdx,[],zU.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},KU=class t{constructor(e,r,n,o,s,c,l,u,d,p,m,h,g=o.length,A=new Gr(1,o.length+1),y=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=o;this.recentEdit=s;this.recentlyEditedInLinesAfterEditRange=c;this.documentBeforeEdits=l;this.recentEdits=u;this.documentAfterEditsNoShortening=d;this.toEditOnDocumentAfterEditsNoShortening=p;this.toOffsetOnDocumentAfterEditsNoShortening=m;this.toProjectedOffset=h;this.lineCountBeforeClipping=g;this.clippingRange=A;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Gr.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new gu(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{a(this,"StatelessNextEditDocument")}static deserialize(e){return new t(my.create(e.id),e.workspaceRoot?r_.parse(e.workspaceRoot):void 0,JR.create(e.languageId),e.documentLinesBeforeEdit,gs.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?or.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new gu(e.documentBeforeEdits),P1.deserialize(e.recentEdits),new gu(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Gr.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var to=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{a(this,"StatelessNextEditResult")}static noEdit(e,r){let n=As.error(e),o=r.build(n);return new t(n,o)}static edit(e,r){let n=As.ok(e),o=r.build(n);return new t(n,o)}},n_=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{a(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,o=this._prompt?Xft(this._prompt):void 0,s=o?.split(`
`).length,c=o?.length,l=e.isOk(),u=e.isOk()?void 0:e.err.kind,d;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":d=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":d=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:P7(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:l,noNextEditReasonKind:u,noNextEditReasonMessage:d,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:s,promptCharCount:c,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,Ql(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function Ehr(t,...e){let r=t;for(let n of e)r=n(r);return r}a(Ehr,"chainStatelessNextEditProviders");var P8=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:a((o,s)=>this.provideNextEditBase(o,s),"provideNextEdit")};this._impl=Ehr(n,...this._providers)}static{a(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},D8=class{constructor(e){this._baseProvider=e}static{a(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let o=n.nextEdit.val,s=o.permutation===void 0?o.edit.edits:o.permutation.apply(o.edit.edits),c=this.filterEdit(e.getActiveDocument(),s);if(c.length===s.length)return n;if(c.length===0)return new to(As.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let l=Aie.createSortPermutation(c,Sh(d=>d.lineRange.startLineNumber,Rh)),u=new gs(l.apply(c));return new to(As.ok({edit:u,permutation:l.inverse()}),n.telemetry)}},B8=class extends D8{static{a(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(o=>!this._isWhitespaceOnlyChange(o,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),o=e.newLines,s=o.length===0;if(s&&n.every(c=>c.trim()==="")||!s&&o.every(c=>c.trim()===""))return!0;if(n.length!==o.length)return!1;for(let c=0;c<n.length;c++){let l=n[c],u=o[c];if(l.trim()!==u.trim())return!1}return!0}},N8=class extends D8{static{a(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(o=>!this._isAtClippingBorder(o,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};f();f();var bhr=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),Ihr=new Map(Object.entries(bhr).map(([t,e])=>[t,{languageId:t,...e}]));function opt(t){return LSe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}a(opt,"getLanguage");function LSe(t){return Ihr.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}a(LSe,"_getLanguage");f();var M8=class t{static{a(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?Jp.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new Jp(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new Jp(new ss(0,0),new ss(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!Jp.isRange(e))throw i_("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw i_("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw i_("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var ss=class t{static{a(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let o=e[n];o.isBefore(r)&&(r=o)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let o=e[n];o.isAfter(r)&&(r=o)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw i_("line must be non-negative");if(r<0)throw i_("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw i_();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw i_();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},Jp=class t{static{a(this,"Range")}static isRange(e){return e instanceof t?!0:e?ss.isPosition(e.start)&&ss.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,o){let s,c;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof o=="number"?(s=new ss(e,r),c=new ss(n,o)):ss.isPosition(e)&&ss.isPosition(r)&&(s=e,c=r),!s||!c)throw new Error("Invalid arguments");s.isBefore(c)?(this._start=s,this._end=c):(this._start=c,this._end=s)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):ss.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=ss.Max(e.start,this._start),n=ss.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=ss.Min(e.start,this._start),n=ss.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw i_();let n;return e?ss.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return Thr(this)}};function i_(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}a(i_,"illegalArgument");function Thr(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}a(Thr,"getDebugDescriptionOfRange");f();function spt(t){let r=t.split(/\r?\n/).map(whr),n=r.filter(s=>s===1).length,o=r.filter(s=>s===2).length;return n>o}a(spt,"looksLikeCode");function whr(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(o=>t.includes(o))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),Zxe(t)||(e+=1);{Zxe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let s=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(c=>t.includes(c)?1:0).filter(c=>c).length;r+=s}return e>r?2:r>e?1:0}a(whr,"guessLineType");var L8;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,a(t,"fromString");function e(n){if(n.lineCount===0)return[];let o=[];for(let s=0;s<n.lineCount;s++)o.push(n.lineAt(s).text);return o}r.fromDocument=e,a(e,"fromDocument")})(L8||={});function _hr(t){return t.replace(/^\s+/g,"")}a(_hr,"trimLeadingWhitespace");function FSe(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}a(FSe,"isImportStatement");var Shr=new Lx(t=>{let e=opt(t),{start:r,end:n}=e.lineComment,o=`(?:${$3(r)})`,s=n?`(?:${$3(n)})?`:"";return new RegExp(`${o}(.*)${s}$`)});function OSe(t,e){let r=t.match(Shr.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let o=t.substring(0,n),s=r[0],c=_hr(r[1]||"");return{content:o,commentWithTokens:s,commentWithoutTokens:c}}a(OSe,"extractEndLineComment");function zie(t,e){let r=OSe(t,e);if(!(r&&r.content.trim().length>0&&spt(r.commentWithoutTokens)))return r}a(zie,"extractExplicativeEndLineComment");var F8=class t extends D8{static{a(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(o=>FSe(o,r))||Rhr(e,n).some(o=>FSe(o,r))}filterEdit(e,r){let n=e.languageId;return r.filter(s=>!t.isImportChange(s,n,e.documentLinesBeforeEdit))}};function Rhr(t,e){return Dze(t.lineRange.mapToLineArray(r=>e[r-1]))}a(Rhr,"getOldLines");f();var USe=Ne(xa());f();f();f();var hy;(o=>{o.serviceIds=new Map,o.DI_TARGET="$di$target",o.DI_DEPENDENCIES="$di$dependencies";function n(s){return s[o.DI_DEPENDENCIES]||[]}o.getServiceDependencies=n,a(n,"getServiceDependencies")})(hy||={});var F1=Xp("instantiationService");function khr(t,e,r){e[hy.DI_TARGET]===e?e[hy.DI_DEPENDENCIES].push({id:t,index:r}):(e[hy.DI_DEPENDENCIES]=[{id:t,index:r}],e[hy.DI_TARGET]=e)}a(khr,"storeServiceDependency");function Xp(t){if(hy.serviceIds.has(t))return hy.serviceIds.get(t);let e=a(function(r,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");khr(e,r,o)},"id");return e.toString=()=>t,hy.serviceIds.set(t,e),e}a(Xp,"createDecorator");f();f();var pm=class{static{a(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};f();var QSe=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{a(this,"Node")}},YU=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{a(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),o=this.lookupOrInsertNode(r);n.outgoing.set(o.key,o),o.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new QSe(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),o=this._findCycle(r,n);if(o)return o}}_findCycle(e,r){for(let[n,o]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let s=this._findCycle(o,r);if(s)return s;r.delete(n)}}};f();var eP=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{a(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var Phr=!1,Kie=class extends Error{static{a(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},Yie=class t{constructor(e=new eP,r=!1,n,o=Phr){this._services=e;this._strict=r;this._parent=n;this._enableTracing=o;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(F1,this),this._globalGraph=o?n?._globalGraph??new YU(s=>s):void 0}static{a(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,EX(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)$ze(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,o=new class extends t{dispose(){n._children.delete(o),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(o),r?.add(o),o}invokeFunction(e,...r){this._throwIfDisposed();let n=JU.traceInvocation(this._enableTracing,e),o=!1;try{return e({get:a(c=>{if(o)throw kze("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(c,n);if(!l)throw new Error(`[invokeFunction] unknown service '${c}'`);return l},"get")},...r)}finally{o=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,o;return e instanceof pm?(n=JU.traceCreation(this._enableTracing,e.ctor),o=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=JU.traceCreation(this._enableTracing,e),o=this._createInstance(e,r,n)),n.stop(),o}_createInstance(e,r=[],n){let o=hy.getServiceDependencies(e).sort((l,u)=>l.index-u.index),s=[];for(let l of o){let u=this._getOrCreateServiceInstance(l.id,n);u||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id}.`,!1),s.push(u)}let c=o.length>0?o[0].index:r.length;if(r.length!==c){console.trace(`[createInstance] First service dependency of ${e.name} at position ${c+1} conflicts with ${r.length} static arguments`);let l=c-r.length;l>0?r=r.concat(new Array(l)):r=r.slice(0,c)}return Reflect.construct(e,r.concat(s))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof pm)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof pm?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let o=new YU(u=>u.id.toString()),s=0,c=[{id:e,desc:r,_trace:n}],l=new Set;for(;c.length;){let u=c.pop();if(!l.has(String(u.id))){if(l.add(String(u.id)),o.lookupOrInsertNode(u),s++>1e3)throw new Kie(o);for(let d of hy.getServiceDependencies(u.desc.ctor)){let p=this._getServiceInstanceOrDescriptor(d.id);if(p||this._throwIfStrict(`[createInstance] ${e} depends on ${d.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(u.id),String(d.id)),p instanceof pm){let m={id:d.id,desc:p,_trace:u._trace.branch(d.id,!0)};o.insertEdge(u,m),c.push(m)}}}}for(;;){let u=o.roots();if(u.length===0){if(!o.isEmpty())throw new Kie(o);break}for(let{data:d}of u){if(this._getServiceInstanceOrDescriptor(d.id)instanceof pm){let m=this._createServiceInstanceWithOwner(d.id,d.desc.ctor,d.desc.staticArguments,d.desc.supportsDelayedInstantiation,d._trace);this._setCreatedServiceInstance(d.id,m)}o.removeNode(d)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],o,s){if(this._services.get(e)instanceof pm)return this._createServiceInstance(e,r,n,o,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,o,s);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],o,s,c){if(o)throw new Error("Delayed instantiation not supported");{let l=this._createInstance(r,n,s);return c.add(l),l}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var JU=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{a(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(s,c){let l=[],u=new Array(s+1).join("	");for(let[d,p,m]of c._dep)if(p&&m){r=!0,l.push(`${u}CREATES -> ${d}`);let h=n(s+1,m);h&&l.push(h)}else l.push(`${u}uses -> ${d}`);return l.join(`
`)}a(n,"printChild");let o=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(o.join(`
`))}};var Jie=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new eP(...e):e??new eP}static{a(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new Yie(this._collection,!0)}};var Zie=Xp("ITelemetrySender"),gy=Xp("IChatMLFetcher");var Xie=class{constructor(){this._stream=new wne;this._seenAnnotationTypes=new Set}static{a(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},eoe=Xp("IEndpointProvider");f();var EE=Xp("IParserService");f();var O8=class{static{a(this,"DiffChange")}constructor(e,r,n,o){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=o}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},XU=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{a(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},ZU=class{static{a(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},o_=class{static{a(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},s_=class{static{a(this,"MyArray")}static Copy(e,r,n,o,s){for(let c=0;c<s;c++)n[o+c]=e[r+c]}static Copy2(e,r,n,o,s){for(let c=0;c<s;c++)n[o+c]=e[r+c]}};var toe=class{static{a(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new O8(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},eq=class t{static{a(this,"LcsDiff")}constructor(e,r){let[n,o]=t._getElements(e),[s,c]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=o,this._modifiedStringElements=s,this._modifiedElementsOrHash=c,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let o=0,s=r.length;o<s;o++)n[o]=this._stringHash(r[o],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,o=e.length;n<o;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,o){return this.ComputeDiffRecursive(e,r,n,o)}ComputeDiffRecursive(e,r,n,o){for(;e<=r&&n<=o&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&o>=n&&this.ElementsAreEqual(r,o);)r--,o--;if(e>r||n>o){let p;return n<=o?(o_.Assert(e===r+1,"originalStart should only be one more than originalEnd"),p=[new O8(e,0,n,o-n+1)]):e<=r?(o_.Assert(n===o+1,"modifiedStart should only be one more than modifiedEnd"),p=[new O8(e,r-e+1,n,0)]):(o_.Assert(e===r+1,"originalStart should only be one more than originalEnd"),o_.Assert(n===o+1,"modifiedStart should only be one more than modifiedEnd"),p=[]),p}let s=[0],c=[0],l=this.ComputeRecursionPoint(e,r,n,o,s,c),u=s[0],d=c[0];if(l!==null)return l;{let p=this.ComputeDiffRecursive(e,u,n,d),m=this.ComputeDiffRecursive(u+1,r,d+1,o);return this.ConcatenateChanges(p,m)}}WALKTRACE(e,r,n,o,s,c,l,u,d,p,m,h,g,A,y,v,b){let I=null,S=null,k=new toe,N=r,F=n,O=g[0]-v[0]-o,Y=-1073741824,z=this.m_forwardHistory.length-1;do{let V=O+e;V===N||V<F&&d[V-1]<d[V+1]?(m=d[V+1],A=m-O-o,m<Y&&k.MarkNextChange(),Y=m,k.AddModifiedElement(m+1,A),O=V+1-e):(m=d[V-1]+1,A=m-O-o,m<Y&&k.MarkNextChange(),Y=m-1,k.AddOriginalElement(m,A+1),O=V-1-e),z>=0&&(d=this.m_forwardHistory[z],e=d[0],N=1,F=d.length-1)}while(--z>=-1);I=k.getReverseChanges(),k=new toe,N=c,F=l,O=g[0]-v[0]-u,Y=1073741824,z=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let V=O+s;V===N||V<F&&p[V-1]>=p[V+1]?(m=p[V+1]-1,A=m-O-u,m>Y&&k.MarkNextChange(),Y=m+1,k.AddOriginalElement(m+1,A+1),O=V+1-s):(m=p[V-1],A=m-O-u,m>Y&&k.MarkNextChange(),Y=m,k.AddModifiedElement(m+1,A+1),O=V-1-s),z>=0&&(p=this.m_reverseHistory[z],s=p[0],N=1,F=p.length-1)}while(--z>=-1);return S=k.getChanges(),this.ConcatenateChanges(I,S)}ComputeRecursionPoint(e,r,n,o,s,c){let l=0,u=0,d=0,p=0,m=0,h=0;e--,n--,s[0]=0,c[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let g=r-e+(o-n),A=g+1,y=new Int32Array(A),v=new Int32Array(A),b=o-n,I=r-e,S=e-n,k=r-o,F=(I-b)%2===0;y[b]=e,v[I]=r;for(let O=1;O<=g/2+1;O++){let Y=0,z=0;d=this.ClipDiagonalBound(b-O,O,b,A),p=this.ClipDiagonalBound(b+O,O,b,A);for(let V=d;V<=p;V+=2){V===d||V<p&&y[V-1]<y[V+1]?l=y[V+1]:l=y[V-1]+1,u=l-(V-b)-S;let U=l;for(;l<r&&u<o&&this.ElementsAreEqual(l+1,u+1);)l++,u++;if(y[V]=l,l+u>Y+z&&(Y=l,z=u),!F&&Math.abs(V-I)<=O-1&&l>=v[V])return s[0]=l,c[0]=u,U<=v[V]&&O<=1448?this.WALKTRACE(b,d,p,S,I,m,h,k,y,v,l,r,s,u,o,c,F):null}m=this.ClipDiagonalBound(I-O,O,I,A),h=this.ClipDiagonalBound(I+O,O,I,A);for(let V=m;V<=h;V+=2){V===m||V<h&&v[V-1]>=v[V+1]?l=v[V+1]-1:l=v[V-1],u=l-(V-I)-k;let U=l;for(;l>e&&u>n&&this.ElementsAreEqual(l,u);)l--,u--;if(v[V]=l,F&&Math.abs(V-b)<=O&&l<=y[V])return s[0]=l,c[0]=u,U>=y[V]&&O<=1448?this.WALKTRACE(b,d,p,S,I,m,h,k,y,v,l,r,s,u,o,c,F):null}if(O<=1447){let V=new Int32Array(p-d+2);V[0]=b-d+1,s_.Copy2(y,d,V,1,p-d+1),this.m_forwardHistory.push(V),V=new Int32Array(h-m+2),V[0]=I-m+1,s_.Copy2(v,m,V,1,h-m+1),this.m_reverseHistory.push(V)}}return this.WALKTRACE(b,d,p,S,I,m,h,k,y,v,l,r,s,u,o,c,F)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let o=new Array(e.length+r.length-1);return s_.Copy(e,0,o,0,e.length-1),o[e.length-1]=n[0],s_.Copy(r,1,o,e.length,r.length-1),o}else{let o=new Array(e.length+r.length);return s_.Copy(e,0,o,0,e.length),s_.Copy(r,0,o,e.length,r.length),o}}ChangesOverlap(e,r,n){if(o_.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),o_.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let o=e.originalStart,s=e.originalLength,c=e.modifiedStart,l=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(s=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(l=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new O8(o,s,c,l),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,o){if(e>=0&&e<o)return e;let s=n,c=o-n-1,l=r%2===0;if(e<0){let u=s%2===0;return l===u?0:1}else{let u=c%2===0;return l===u?o-1:o-2}}};f();function apt(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(Xut(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}a(apt,"safeStringify");var roe=!1,$Se=!0,Dhr=200,tq=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{a(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new n_(e),o=e.getActiveDocument(),s=tP(o);if(!s||!s.isEmpty())return to.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let c=o.documentLinesBeforeEdit,l=o.recentEdit.apply(c),u=[];for(let S of e.documents)S.id!==o.id&&(u.push(`RELATED DOC: ${S.getDisplayPath()}`),u.push("```patch"),u.push(...Fhr(S)),u.push("```"),u.push(""));u.push(`ORIGINAL VERSION: ${o.getDisplayPath()}`),u.push("```"),u.push(...c),u.push("```"),u.push("");let d="// ...rest of the lines omitted...",p=new Gr(1,Math.max(1,s.startLineNumber-1)),m=o.recentEdit.edits.length>0?o.recentEdit.edits[o.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,h;if(m>0&&m>=p.endLineNumberExclusive){let S=m<l.length;u.push(`IN PROGRESS VERSION ${S?" PREFIX":""}: ${o.getDisplayPath()}`),u.push("```"),u.push(...l.slice(0,m)),S&&(u.push(d),h={editRange:new Gr(p.endLineNumberExclusive,m+1),omittedMessage:d}),u.push("```"),u.push("")}u.push(`NEXT VERSION: ${o.getDisplayPath()}`),u.push("```"),u.push(...l.slice(0,p.endLineNumberExclusive-1)),u.push("");let g=l.slice(p.endLineNumberExclusive-1).join(`
`),A=await this.fetchUntilConvergence(u.join(`
`),g,r);if(r.isCancellationRequested)return to.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(A.isError())return A.err.kind==="cancel"?to.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):to.noEdit({kind:"fetchFailure",error:new Error(apt(A.err))},n);let{result:y,ttft:v}=A.val;if(v!==void 0&&n.setTtft(v),y.trim().length===0)return to.noEdit({kind:"noSuggestions"},n);let b=noe(o.languageId,l,p,void 0,y,h),I=await GSe(this._parserService,b,o,{requireEditWithinNLines:5});if(I){let S=new gs([I]);return to.edit({edit:S},n)}else return to.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};tq=pf([Ra(1,EE)],tq);var Q8=class extends tq{constructor(r,n){super(Q8.ID,r);this._chatMLFetcher=n}static{a(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,o){if(o.isCancellationRequested)return As.error({kind:"cancel"});let s=await WSe(this.ID,this._chatMLFetcher,[{role:USe.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:USe.OpenAI.ChatRole.User,content:r}],{convergence:n},o);if(s.isError())return s;let{ignored:c,result:l,ttft:u}=s.val;return l=l.replace(/^```[^\n]*\n/,""),As.ok({ignored:c,result:l,ttft:u})}};Q8=pf([Ra(0,EE),Ra(1,gy)],Q8);async function WSe(t,e,r,n,o){let s=new Xie,c=!1,l,u=s.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),d=Nhr(u,n),p=e.fetchOne(r,async(y,v,b)=>(typeof l>"u"&&(l=Date.now()),s.update(y,b),c?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},o);(async()=>{try{await p}finally{s.resolve()}})();let{ignored:m,result:h,shouldCancelRequest:g}=await d;g&&(c=!0);let A=await p;return A.type!=="success"?As.error({kind:"failure",err:new Error(`Fetch failed (${A.type}, ${A.reason})`)}):As.ok({ttft:l,ignored:m,result:h})}a(WSe,"fetchUntilConvergence");function tP(t){let e=new zt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:Bhr(t)}a(tP,"getOrDeduceSelectionFromLastEdit");function Bhr(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,o=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,s=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new or(o,s.length+1,o,s.length+1);let c=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],l=Fx(c,s),u=s.length-l+1;return new or(o,u,o,u)}a(Bhr,"deduceSelectionFromLastEdit");async function Nhr(t,e){let r=Mhr(t,e.ignoreReplyTextBefore),n=e.convergence,o=e.maxCompletionLineCount??20,s=e.convergenceNonWhitespaceCharOverlap??40,c=n.replace(/\s/g,""),l=[],u=[],d=[],p=[],m=a(h=>{let g=u[0];return{ignored:l[0]??"",result:g.substring(0,g.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let h of r){if(h.kind==="ignore"){l[h.index]=(l[h.index]??"")+h.text;continue}let g=h.text;if(u[h.index]=u[h.index]??"",u[h.index]+=g,p[h.index]=p[h.index]??"",p[h.index]+=g.replace(/\s/g,""),d[h.index]=d[h.index]??0,d[h.index]+=g.split(`
`).length-1,g.indexOf(`
`)===-1||h.index!==0)continue;if(d[h.index]>o)return m(`too many lines: ${d[h.index]}`);let A=u[h.index];if(n.startsWith(A))continue;let y=A.split(`
`).slice(-4,-1);if(y.length<3||n.indexOf(y.join(`
`)+`
`)<=0)continue;let b=p[h.index].substring(p[h.index].length-s);if(c.indexOf(b)>0)return m("convergence!")}return{ignored:l[0]??"",result:u[0]??"",shouldCancelRequest:!1}}a(Nhr,"fetchCompletionUntilConvergence");function Mhr(t,e){let r=[],n=[];return new mU(async o=>{for await(let s of t)for(let c of s.choices){let l=c.index,u=c.text??"";if(!e||r[l]){o.emitOne({kind:"completion",index:l,text:u});continue}n[l]=(n[l]??"")+u;let d=n[l].match(e);!d||typeof d.index>"u"||(r[l]=!0,o.emitOne({kind:"ignore",index:l,text:n[l].substring(0,d.index+d[0].length)}),o.emitOne({kind:"completion",index:c.index,text:n[l].substring(d.index+d[0].length)}),n[l]=void 0)}for(let s=0;s<n.length;s++)typeof n[s]<"u"&&o.emitOne({kind:"ignore",index:s,text:n[s]})})}a(Mhr,"getTextAfterFirstPattern");function Lhr(t,e,r){let n=e.startLineNumber,o=e.endLineNumberExclusive,s=r.slice(0);for(;n+1<o&&s.length>0;){let c=t[o-2],l=s[s.length-1];if(c!==l)break;o--,s.pop()}for(;n+1<o&&s.length>0;){let c=t[n-1],l=s[0];if(c!==l)break;n++,s.shift()}return new ay(new Gr(n,o),s)}a(Lhr,"createReducedLineEdit");var U8=class{constructor(e,r,n,o){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=Lhr(r,n,o);let s=new gs([this.edit]);this.newLines=s.apply(r)}static{a(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return s(r,n)<e;function s(c,l){for(let u=0;u<Math.min(c.length,l.length);u++)if(c[u]!==l[u])return u;return Math.min(c.length,l.length)}}resolveDiff(){let e=a((m,h,g)=>m.map(A=>{let y=h.lines.slice(A.originalStart,A.originalStart+A.originalLength),v=g.lines.slice(A.modifiedStart,A.modifiedStart+A.modifiedLength),b=y.join(`
`),I=v.join(`
`),{editDistance:S}=p(b,I);return new qSe(A.originalStart,A.originalLength,A.modifiedStart,A.modifiedLength,S)}),"computeEditDistances"),r=a(m=>{let h=0;for(let g of m)h+=g.editDistance;return{editDistance:h}},"computeDiffMetrics"),n=!1,o=new XU(this.oldLines,n),s=new XU(this.newLines,n),c=new eq(o,s),l=e(c.ComputeDiff(),o,s),u=r(l),d=[];{let m=0;for(let h of l)d=d.concat(this.oldLines.slice(m,h.originalStart)),d=d.concat(this.newLines.slice(h.modifiedStart,h.modifiedStart+h.modifiedLength)),m=h.originalStart+h.originalLength;d=d.concat(this.oldLines.slice(m))}if(p3(this.newLines,d))return new HSe(this.languageId,this.oldLines,this.edit,this.newLines,l,u);return lpt(this.languageId,this.oldLines,d);function p(m,h){let g=new ZU(m),A=new ZU(h),v=new eq(g,A).ComputeDiff(),b=0,I=0;for(let F of v)b+=F.originalLength,I+=F.modifiedLength;let S=m.length,k=h.length,N=b+I;return{aChanged:b,bChanged:I,aLength:S,bLength:k,editDistance:N}}}},qSe=class{constructor(e,r,n,o,s){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=o;this.editDistance=s}static{a(this,"DiffChangeWithEditDistance")}},HSe=class{constructor(e,r,n,o,s,c){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=o;this.diff=s;this.diffMetrics=c;this.parseErrorCount="unknown"}static{a(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new gs([this.edit]);{let r=this.groupInHunks();return new gs(r.map(n=>{let o=n[0],s=n[n.length-1];return new ay(new Gr(o.originalStart+1,s.originalStart+s.originalLength+1),this.newLines.slice(o.modifiedStart,s.modifiedStart+s.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!$Se)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(s=>s.originalLength===0)||n.reduce((c,l)=>c+l.editDistance,0)>Dhr&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let o of r)for(let s of o){let c=s.originalStart+1,l=s.originalStart+s.originalLength+1;if(!jSe(new Gr(c,l),e)){n=n.concat(o);break}}if(n.length===this.diff.length)return null;if(n.length>0){let o=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(o).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let o=n[n.length-1],s=this.oldLines.slice(o.originalStart+o.originalLength,r.originalStart);if(s.length>1){e.push([r]);continue}if(s[0].trim().length>10){e.push([r]);continue}if(n.reduce((u,d)=>u+d.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let o of e)r=r.concat(this.newLines.slice(n,o.modifiedStart)),r=r.concat(this.oldLines.slice(o.originalStart,o.originalStart+o.originalLength)),n=o.modifiedStart+o.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new gs([this.edit]),o=r(n);this.parseErrorCount=await rq(e,this.languageId,o)}eliminateEmptyLineChanges(){let e=a(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),o=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(c=>c.trim().length===0)){let c=this.newLines.slice(0);return c.splice(r.modifiedStart,0,...n),e(c)}continue}if(r.originalLength===0){if(o.every(c=>c.trim().length===0)){let c=this.newLines.slice(0);return c.splice(r.modifiedStart,r.modifiedLength),e(c)}continue}for(let s=0;s<n.length&&s<o.length;s++){let c=n[s],l=o[s],u=c.trim().length===0,d=l.trim().length===0;if(!(u&&d)){if(!u&&!d)break;if(u){let p=this.newLines.slice(0);return p.splice(r.modifiedStart+s,0,c),e(p)}if(d){let p=this.newLines.slice(0);return p.splice(r.modifiedStart+s,1),e(p)}}}for(let s=1;s<=n.length&&s<=o.length;s++){let c=n[n.length-s],l=o[o.length-s],u=c.trim().length===0,d=l.trim().length===0;if(!(u&&d)){if(!u&&!d)break;if(u){let p=this.newLines.slice(0);return p.splice(r.modifiedStart+r.modifiedLength-s+1,0,c),e(p)}if(d){let p=this.newLines.slice(0);return p.splice(r.modifiedStart+r.modifiedLength-s,1),e(p)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let o of this.diff){e=e.concat(this.newLines.slice(r,o.modifiedStart));let s=this.oldLines.slice(o.originalStart,o.originalStart+o.originalLength),c=this.newLines.slice(o.modifiedStart,o.modifiedStart+o.modifiedLength),{hasChanges:l,newDiffModifiedLines:u}=this._eliminateCommentsDiff(s,c);n=n||l,e=e.concat(u),r=o.modifiedStart+o.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let u=!1,d=!1;for(let p of e){if(p.trim().length===0)continue;let m=zie(p,this.languageId);m&&m.content.trim().length===0?u=!0:d=!0}if(u&&!d)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(u=>zie(u,this.languageId)),o=r.map(u=>zie(u,this.languageId)),s=n.filter(u=>!!u).length,c=o.filter(u=>!!u).length;if(s===0&&c===0)return{hasChanges:!1,newDiffModifiedLines:r};if(s>0)return{hasChanges:!1,newDiffModifiedLines:r};let l=!1;for(let u=0;u<r.length;u++){let d=r[u],p=o[u];if(!p)continue;let{content:m}=p;r[u]=d.substring(0,m.length).trimEnd(),l=!0}return{hasChanges:l,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return lpt(this.languageId,this.oldLines,e)}};function jSe(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}a(jSe,"editIsInsideEditWindow");function lpt(t,e,r){let o=e.length+1,s=r.slice(0);return new U8(t,e,new Gr(1,o),s).resolveDiff()}a(lpt,"createPossibleEditFromLines");function noe(t,e,r,n,o,s){if(o.trim().length===0)return[];let c=L8.fromString(o.trimEnd()),l=s?c.some(v=>v.indexOf(s.omittedMessage)>=0):!1,u=[],d=a((v,b)=>{u.push(new U8(t,e,v,b))},"generateEdit");function p(){n&&d(n,c)}a(p,"generateEditCompletionRange");function m(){if(l)return;let b=new Gr(r.endLineNumberExclusive,e.length+1);b.length>c.length+5||d(b,c)}a(m,"generateEditAllDoc");function h(){for(let v=1;v<c.length;v++){let I=c.slice(c.length-v).join(`
`);for(let S=r.endLineNumberExclusive-1;S<e.length;S++){let N=e.slice(S,S+v).join(`
`);I===N&&d(new Gr(r.endLineNumberExclusive,S+1),c.slice(0,c.length-v))}}}a(h,"generateEditsUsingOverlappingLines");function g(){if(!s||!l)return;let v=[];for(let b of c){if(b.indexOf(s.omittedMessage)>=0){d(s.editRange,v.map(I=>I));return}v.push(b)}}if(a(g,"generateEditWhenReplyContainsOmittedMessage"),p(),g(),m(),h(),!o.endsWith(`
`)){let v=o.substring(0,o.lastIndexOf(`
`)+1);u.push(...noe(t,e,r,n,v,s))}return A(u);function A(v){return y(v,a(I=>I.edit.lineRange.startLineNumber+","+I.edit.lineRange.endLineNumberExclusive+","+I.edit.newLines.join("|"),"keyfn"))}function y(v,b){let I=new Set,S=[];for(let k of v){let N=b(k);I.has(N)||(I.add(N),S.push(k))}return S}}a(noe,"generatePossibleEdits");async function GSe(t,e,r,n){let c=e.filter(m=>m.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(m=>m.resolveDiff()).map(m=>m.eliminateEmptyLineChanges()),l=roe?await rq(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(roe){let m=a(h=>{let g=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(h).apply(g.value)},"applyToDocumentNoShortening");await Promise.all(c.map(h=>h.resolveParseErrorCountIfPossible(t,m)))}let u=c.filter(m=>l==="unknown"?m.parseErrorCount===0:m.parseErrorCount!=="unknown"&&m.parseErrorCount<=l),d=u.length>0?u:c;d.sort((m,h)=>m.parseErrorCount===h.parseErrorCount?0:m.parseErrorCount==="unknown"?1:h.parseErrorCount==="unknown"?-1:m.parseErrorCount-h.parseErrorCount);let p=a(m=>m.diffMetrics.editDistance,"score");return d.sort((m,h)=>p(m)-p(h)),d.length>0?d[0].edit:null}a(GSe,"selectBestEdit");function Fhr(t){let r=[],n=t.documentLinesBeforeEdit,o=0,s=0,c=-1,l=a((u,d)=>{u>c+1&&r.push("[...]"),d?r.push(`-${n[u]}`):r.push(`${n[u]}`),c=u},"addOldLineIndex");for(let u of t.recentEdit.edits){for(;o<u.lineRange.startLineNumber-1;)Math.min(u.lineRange.startLineNumber-o-1,s>0?o-s-2:1073741824)<=2&&l(o,!1),o++;for(;o<u.lineRange.endLineNumberExclusive-1;)l(o,!0),o++;r.push(u.newLines.map(d=>`+${d}`).join(`
`)),s=u.lineRange.endLineNumberExclusive}for(;o<n.length;)o-s+2<=2&&l(o,!1),o++;return r.push("[...]"),r}a(Fhr,"summariseDocDiff");function upt(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),o=r.newLines;if(n.filter(c=>c.trim().length>0).length===0&&o.filter(c=>c.trim().length>0).length===0)continue;let s=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${s},${n.length} +${s},${o.length} @@`),e.push(...n.map(c=>`-${c}`)),e.push(...o.map(c=>`+${c}`))}return e}a(upt,"summarizeEditsAsUnifiedDiff");async function rq(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:a(()=>r,"getText")})?.getParseErrorCount()??"unknown"}a(rq,"getParseErrorCount");f();var bE=Ne(xa());f();var nq=Xp("ITokenizerProvider");var a_=class extends bE.PromptRenderer{constructor(r,n,o={validate:!0},s,c,l){let u=s.acquireTokenizer({tokenizer:l.tokenizerName}),d={modelMaxPromptTokens:l.tokenBudget};super(d,r,n,u);this.options=o;this._instantiationService=c}static{a(this,"PromptRenderer")}static create(r,n,o,s={validate:!0}){return r.invokeFunction(c=>{let l=c.get(nq);return new a_(n,o,s,l,r,c.get(gy))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,o){let s=await super.render(r,n);o={...{trace:!0},...o};for(let u=1;u<s.messages.length;u++){let d=s.messages[u],p=s.messages[u-1];if(d.role===bE.Raw.ChatRole.System&&p.role===bE.Raw.ChatRole.System){let m=p.content.at(-1),h=d.content.at(0);m&&h&&m.type===bE.Raw.ChatCompletionContentPartKind.Text&&h.type===bE.Raw.ChatCompletionContentPartKind.Text?(m.text=m.text.trimEnd()+`
`+h.text,p.content=p.content.concat(d.content.slice(1))):(p.content.push({type:bE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),p.content=p.content.concat(d.content)),s.messages.splice(u,1),u--}}let l=s.messages[s.messages.length-1];if(this.options.validate&&l&&l.role!==bE.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...s,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};a_=pf([Ra(3,nq),Ra(4,F1),Ra(5,gy)],a_);f();var dpt=Ne(xa());var ioe=class extends dpt.PromptElement{static{a(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();var VSe=class{static{a(this,"AbstractDocument")}rangeToOffsetRange(e){return new zt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new Jp(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},Ay=class extends VSe{constructor(r){super();this.value=r;this._transformer=new jk(this.value)}static{a(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new jr(r+1,1)),o=n+this.getLineLength(r);return this.value.substring(n,o)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return Ohr(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(Qhr(r))}_validatePosition(r){if(r.line<0)return new ss(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let s=this._transformer.getLineLength(n);return new ss(n-1,s)}if(r.character<0)return new ss(r.line,0);let o=this._transformer.getLineLength(r.line+1);return r.character>o?new ss(r.line,o):r}};function Ohr(t){return new ss(t.lineNumber-1,t.column-1)}a(Ohr,"corePositionToVSCodePosition");function Qhr(t){return new jr(t.line+1,t.character+1)}a(Qhr,"vsCodePositionToCorePosition");f();f();function fpt(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}a(fpt,"min");f();function zSe(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>zSe(n,e))}}a(zSe,"toAstNode");function ppt(t,e){let r=d3(e,c=>c.endExclusive>=t.start),n=BA(e,c=>c.start<=t.endExclusive)+1;if(r===n)return[t];let o=[],s=t.start;for(let c=r;c<n;c++){let l=e[c];l.start>s&&o.push(new zt(s,l.start)),s=l.endExclusive}return s<t.endExclusive&&o.push(new zt(s,t.endExclusive)),o}a(ppt,"subtractRange");f();f();f();var ooe=class{static{a(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=XR(e);let n=this.values,o=this.prefixSum,s=r.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(o.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=XR(e),r=XR(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=XR(e),r=XR(r);let n=this.values,o=this.prefixSum;if(e>=n.length)return!1;let s=n.length-e;return r>=s&&(r=s),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(o.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=XR(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,o=0,s=0,c=0;for(;r<=n;)if(o=r+(n-r)/2|0,s=this.prefixSum[o],c=s-this.values[o],e<c)n=o-1;else if(e>=s)r=o+1;else break;return new KSe(o,e-c)}};var KSe=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{a(this,"PrefixSumIndexOfResult")}};var iq=class{static{a(this,"PositionOffsetTransformer")}constructor(e){this._lines=Oh(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new ooe(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let o=r[n],s=this.toRange(o.replaceRange);this._acceptDeleteRange(s),this._acceptInsertText(s.start,o.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=Oh(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let o=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.line+1+s-1,0,n[s]),o[s-1]=n[s].length+this._eol.length;this._lineStarts.insertValues(e.line+1,o)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ss(r.index,Math.min(r.remainder,n))}toRange(e){return new Jp(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new zt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new M8(this.validateRange(n.range),n.newText));return new ig(r.map(n=>new Cl(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new M8(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof ss))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,o=!1;if(r<0)r=0,n=0,o=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,o=!0;else{let s=this._lines[r].length;n<0?(n=0,o=!0):n>s&&(n=s,o=!0)}return o?new ss(r,n):e}validateRange(e){return new Jp(this.validatePosition(e.start),this.validatePosition(e.end))}};var soe=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new Fh(()=>new iq(this.text));this._originalPositionOffsetTransformer=new Fh(()=>new iq(this.originalText));this._text=new Fh(()=>this.edits.apply(this.originalText))}static{a(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var YSe=class{constructor(e,r,n,o,s){this.parent=e;this.overlayNode=r;this.range=n;this.children=o;this._document=s}static{a(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},nP=class extends soe{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{a(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function coe(t,e,r){let n=[],o=[],s=[];for(let l=0;l<r.length;l++){let{document:u,overlayNodeRoot:d,selection:p}=r[l],m=u.getText(),h=p?u.rangeToOffsetRange(p):void 0,g=mpt(d,u),A=JSe.fromRootNode(g,m),y=XSe.fromNode(A,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);h&&y.visitAll(O=>O.node.range.intersectsOrTouches(h)?(O.node.children.length===0&&O.markAsSurviving(),!0):!1),n.push(y),o.push(y.getTextFragment());let v=a(O=>h?O.range.endExclusive<h.start?h.start-O.range.endExclusive:O.range.start>h.endExclusive?3*(O.range.start-h.endExclusive):0:0,"distanceScoreToSelection"),b=new Lx(O=>h?O.children.length===0?O.range.intersectsOrTouches(h)?0:Number.MAX_SAFE_INTEGER:fpt(O.children.map(Y=>b.get(Y)))+1:0),I=new Lx(O=>{let Y=O.parent?I.get(O.parent):Number.MAX_SAFE_INTEGER,z=b.get(O);return Math.min(Y,z)}),S=!!e.tryPreserveTypeChecking,k=a(O=>S&&O.node?.kind==="import_statement"?0:100*I.get(O)+O.depth+10*(v(O)/m.length),"costFn"),N=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(u):e.costFnOverride;if(N!==void 0){let O=k;k=a(Y=>{let z=O(Y);return z===!1?!1:Y.node?N(Y.node,z,u):z},"costFn")}let F=y.getDescendantsAndSelf();for(let O of F){if(!O.node.node)continue;let Y=k(O.node);Y!==!1&&s.push({idx:l,node:O,cost:Y})}}s.sort(Sh(l=>l.cost,Rh));for(let{node:l,idx:u}of s){if(l.markAsSurviving(),n.reduce((p,m)=>p+m.getTextFragment().length,0)>t)break;o[u]=n[u].getTextFragment()}let c=[];for(let l=0;l<o.length;l++){let u=o[l],{document:d}=r[l],p=new nP(d,u.toTextEditFromOriginal(d.getText().length)),m=p,h=n[l];m.getVisualization=()=>({$fileExtension:"ast.w",source:{value:p.originalText,decorations:ppt(zt.ofLength(p.originalText.length),p.edits.edits.map(g=>g.replaceRange)).map(g=>({range:[g.start,g.endExclusive],color:"lime"}))},root:zSe(h,g=>({label:(g.node.node?.kind||"unknown")+` (${s.find(A=>A.node===g)?.cost})`,range:g.node.range,children:g.childNodes,isMarked:g._surviving}))}),c.push(p)}return c}a(coe,"summarizeDocumentsSyncImpl");function mpt(t,e,r=void 0){let n=new zt(t.startIndex,t.endIndex),o=[],s=new YSe(r,t,n,o,e);for(let c of t.children)o.push(mpt(c,e,s));return s}a(mpt,"createRemovableNodeFromOverlayNode");var JSe=class t{constructor(e,r,n,o,s,c){this.node=e;this.range=r;this.children=n;this.depth=o;this.parent=s;this.document=c}static{a(this,"TextNode")}static fromRootNode(e,r){let n=new zt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let o=new zt(0,e.range.start),s=new zt(e.range.endExclusive,r.length),c=[],l=new t(void 0,n,c,0,null,r);return o.isEmpty||c.push(new t(void 0,o,[],0,l,r)),c.push(t.fromNode(e,r,1,null)),s.isEmpty||c.push(new t(void 0,s,[],0,l,r)),l}static fromNode(e,r,n=0,o=null){let s=[],c=new t(e,e.range,s,n,o,r);if(e.children.length>0){let l=e.range.start;for(let d of e.children){let p=new zt(l,d.range.start);p.isEmpty||s.push(new t(void 0,p,[],n,c,r)),s.push(t.fromNode(d,r,n+1,c)),l=d.range.endExclusive}let u=new zt(l,e.range.endExclusive);u.isEmpty||s.push(new t(void 0,u,[],n,c,r))}return c}getLeadingWs(){return Uhr(this.document,this.range)}getTrailingWs(){return qhr(this.document,this.range)}};function Uhr(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}a(Uhr,"getLeadingWs");function qhr(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}a(qhr,"getTrailingWs");var XSe=class t{constructor(e,r,n,o,s){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=o;this._alwaysUseEllipsisForElisions=s;this._surviving=!1;this._textFragment=null}static{a(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,o){let s=[],c=new t(e,r,s,n,o);for(let l of e.children){let u=t.fromNodeParent(l,c,n,o);s.push(u)}return c}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new c_(this.node.range,this.node.document);if(!this._surviving)return new rP("");let e=Array.from(QR(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,o)=>n.fragment.length===0==(o.fragment.length===0)));for(let n=0;n<e.length;n++){let o=e[n],s=o[0].fragment.length===0;if(s&&n>0&&n<e.length-1){let c=e[n-1].at(-1),l=e[n+1].at(0);if(c.fragment instanceof c_&&l.fragment instanceof c_){let u=c.fragment.trimEnd(),d=l.fragment.trimStart();if(u.endsWith("{")&&d.startsWith("}")){e[n-1][e[n-1].length-1].fragment=u,o.length=1,o[0].fragment=new rP(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=d;continue}}}if(this._alwaysUseEllipsisForElisions&&s&&(n>0||n<e.length-1)){o.length=1;let c=o.at(0).node.node.getLeadingWs(),l=c.lastIndexOf(`
`);l!==-1&&(c=c.substring(l+1));let u=o.at(-1).node.node.getTrailingWs();o[0].fragment=new rP(c+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+u)}}let r=[];for(let n of e)for(let o of n)Hhr(r,o.fragment);return aoe.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},oq=class{static{a(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,o="";function s(l){(n!==l||o.length>0)&&(r.push(new Cl(new zt(n,l),o)),o="")}a(s,"emit");function c(l){if(l instanceof aoe)for(let u of l.fragments)c(u);else l instanceof rP?o+=l.text:l instanceof c_&&(s(l.range.start),n=l.range.endExclusive)}return a(c,"process"),c(this),s(e),new ig(r)}},rP=class extends oq{constructor(r){super();this.text=r}static{a(this,"LiteralTextFragment")}get length(){return this.text.length}},c_=class t extends oq{constructor(r,n){super();this.range=r;this.originalText=n}static{a(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new zt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new zt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new zt(this.range.start,r.range.endExclusive),this.originalText):null}},aoe=class t extends oq{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{a(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new rP(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function Hhr(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof c_&&e instanceof c_){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}a(Hhr,"pushFragment");f();var loe=Ne(xa());function sq(t){if(Array.isArray(t))return t.map(r=>sq(r));let e=(0,loe.toMode)(loe.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}a(sq,"rawMessageToCAPI");f();f();var uoe=class{constructor(e,r,n,o){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=o;if(e>r)throw new bn("startIndex must be less than endIndex");let s=e;for(let c of o){if(c.startIndex<s)throw new bn("Invalid child startIndex");if(c.endIndex>r)throw new bn("Invalid child endIndex");s=Math.max(c.endIndex,s)}}static{a(this,"OverlayNode")}toString(){let e=[];function r(n,o=""){e.push(`${o}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(s=>r(s,o+"    "))}return a(r,"toString"),r(this),e.join(`
`)}};function gpt(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),o=r||{tabSize:4},s={getLineCount:a(()=>n.length,"getLineCount"),getLineContent:a(c=>n[c-1],"getLineContent"),getOptions:a(()=>o,"getOptions")};try{let c=$hr(s,e),[l]=Apt(t,c,void 0);return l.adjust(t,ypt(e)),l.toOverlayNode(t,!0)}catch{return new doe(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}a(gpt,"getStructureUsingIndentation");function Apt(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),o=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),s=[],c=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let l=e.getStartLineNumber(r),u=e.getEndLineNumber(r);if(l>o||u>o)break;let d=c;if([c,r]=Apt(t,e,r),d&&c.startLineNumber<=d.endLineNumber)throw new bn("Invalid Folding Ranges: overlapping children");if(c.startLineNumber<n)throw new bn("Invalid Folding Ranges: child starts before parent");s.push(c)}return[new doe(n,o,s),r]}a(Apt,"createFoldingRangeTree");var doe=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new bn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{a(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),o=/^[\}\]\)];?$/.test(n),s=/^<\/\w/.test(n);(o||s)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let o=this.children[n],s=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;o._adjustRegular(e,s)}}toOverlayNode(e,r){let n=[],o=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let s of this.children){for(let c=o;c<s.startLineNumber;c++){let l=ZSe(e,c,c,"LINE",[]);l&&n.push(l)}n.push(s.toOverlayNode(e,!1)),o=s.endLineNumber+1}for(let s=o;s<this.endLineNumber;s++){let c=ZSe(e,s,s,"LINE",[]);c&&n.push(c)}return ZSe(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function ZSe(t,e,r,n,o){let s=t.getOffsetAtPosition(new ss(e-1,0)),c=r<t.getLineCount()?new ss(r,0):new ss(r-1,t.getLineLength(r-1)),l=t.getOffsetAtPosition(c);return new uoe(s,l,n,o)}a(ZSe,"createOverlayNode");function $hr(t,e){return Whr(t,ypt(e))}a($hr,"generateFoldingRegions");function ypt(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}a(ypt,"isOffSide");function Whr(t,e){let r=t.getOptions().tabSize,n=new e2e,o=[],s=t.getLineCount()+1;o.push({indent:-1,endAbove:s,line:s});for(let c=t.getLineCount();c>0;c--){let l=t.getLineContent(c),u=Ghr(l,r),d=o[o.length-1];if(u===-1){e&&(d.endAbove=c);continue}if(d.indent>u){do o.pop(),d=o[o.length-1];while(d.indent>u);let p=d.endAbove-1;p-c>=1&&n.insertFirst(c,p,u)}d.indent===u?d.endAbove=c:o.push({indent:u,endAbove:c,line:c})}return n.toIndentRanges()}a(Whr,"_computeRanges");var jhr=65535,iP=16777215,hpt=4278190080,e2e=class{static{a(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>iP||r>iP)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,o=0;n>=0;n--,o++)e[o]=this._startIndexes[n],r[o]=this._endIndexes[n];return new t2e(e,r)}};function Ghr(t,e){let r=0,n=0,o=t.length;for(;n<o;){let s=t.charCodeAt(n);if(s===32)r++;else if(s===9)r=r-r%e+e;else break;n++}return n===o?-1:r}a(Ghr,"computeIndentLevel");var t2e=class{static{a(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=a((n,o)=>{let s=e[e.length-1];return this.getStartLineNumber(s)<=n&&this.getEndLineNumber(s)>=o},"isInsideLast");for(let n=0,o=this._startIndexes.length;n<o;n++){let s=this._startIndexes[n],c=this._endIndexes[n];if(s>iP||c>iP)throw new Error("startLineNumber or endLineNumber must not exceed "+iP);for(;e.length>0&&!r(s,c);)e.pop();let l=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=s+((l&255)<<24),this._endIndexes[n]=c+((l&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&iP}getEndLineNumber(e){return this._endIndexes[e]&iP}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&hpt)>>>24)+((this._endIndexes[e]&hpt)>>>16);return r===jhr?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let o=Math.floor((r+n)/2);e<this.getStartLineNumber(o)?n=o:r=o+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};f();function oP(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}a(oP,"fromUnknown");var Hl=Ne(xa());var foe="current-version",sP="next-version",vpt=2,xpt=10,Ept=.7,Vhr=/```[^\n]*\n/,l_=class extends P8{constructor(r,n,o){super(l_.ID,[s=>new F8(s),s=>new B8(s),s=>new N8(s)]);this.fetcher=r;this._parserService=n;this._instantiationService=o;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new gie}static{a(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let o=new Map(r.documents.map(c=>[c.id,c]));for(let c of n.documents){let l=o.get(c.id);if(!l||!s(l,c))return!1}return!0;function s(c,l){if(c.documentAfterEditsNoShortening.value!==l.documentAfterEditsNoShortening.value)return!1;let u=tP(c),d=u?r2e(c,u):null,p=tP(l),m=p?r2e(l,p):null;return!d||!m?!0:Math.abs(d.line-m.line)<Math.min(vpt,xpt)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let o=new n_(r),s=this._delayer.createDelaySession(),c;try{c=await this.doGetNextEdit(r,o,s,n)}catch(u){return to.noEdit({kind:"unexpected",error:oP(u)},o)}let l=s.getArtificalDelay();return l>0&&await aE(l),c}async doGetNextEdit(r,n,o,s){return r.documents.some(u=>{if(u.recentEdit.edits.length===0)return!1;for(let d of u.recentEdit.edits)if(!d.lineRange.isEmpty||d.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,o,s,n):to.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,o,s){let c=await this.createPrompt(r,o);if(!c)return to.noEdit({kind:"noSuggestions"},s);if(!c.editWindowIsInPrompt)return to.noEdit({kind:"filteredOut",message:"promptTooLarge"},s);if(await this.debounce(n,s),o.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return to.noEdit(k,s)}let{summarizedEditWindow:l,editWindowAllowedEditLineRange:u,allowedEditLineRange:d,maxCompletionLineCount:p,messages:m,completionPrefixRange:h,completionRange:g,convergence:A,activeDocument:y,activeDocumentLines:v}=c;s.setFetchStartedAt(),r.fetchIssued=!0;let b=await WSe(this.ID,this.fetcher,sq(m),{convergence:A,ignoreReplyTextBefore:Vhr,maxCompletionLineCount:p,convergenceNonWhitespaceCharOverlap:1e3},o);if(s.setFetchResultIfNotSet(b.isOk()?"success":b.err.kind==="cancel"||o.isCancellationRequested?"cancelled":"failure"),b.isOk()&&typeof b.val.ttft=="number"&&s.setTtft(b.val.ttft),o.isCancellationRequested)return to.noEdit({kind:"gotCancelled",message:"afterFetchCall"},s);if(b.isError())return b.err.kind==="cancel"?to.noEdit({kind:"gotCancelled",message:"afterFetchCall"},s):to.noEdit({kind:"fetchFailure",error:oP(b.err.err)},s);let I=b.val.result;if(I.length===0){let k=`<${sP}>
`,N=b.val.ignored.indexOf(k);N>=0&&(I=b.val.ignored.substring(N+k.length))}if(I=zhr(I),I.trim().length===0)return to.noEdit({kind:"noSuggestions"},s);let S;if(l&&u&&d){let k=Khr(y,l,u,I);if(!k||k.edits.length===0)return to.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},s);let N=Yhr(l,k);if(N.edits.length===0)return to.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},s);if(roe){let Y=await rq(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),z=N.apply(y.documentAfterEditsNoShortening.value);if(await rq(this._parserService,y.languageId,z)>Y)return to.noEdit({kind:"filteredOut",message:"More parse errors after edit"},s)}S=Jhr(y,N);let F=S.edits[0].lineRange.startLineNumber,O=S.edits[S.edits.length-1].lineRange.endLineNumberExclusive;if(!jSe(new Gr(F,O),d))return to.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},s)}else{let k=noe(y.languageId,v,h,g,I,void 0),N=await GSe(this._parserService,k,y,{requireEditWithinNLines:100});if(!N)return to.noEdit({kind:"filteredOut",message:"Could not identify best edit"},s);S=new gs([N])}return Xhr(y,S)?to.noEdit({kind:"filteredOut",message:"Undo of recent edit"},s):Zhr(y,S)?to.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},s):egr(y,S)?to.noEdit({kind:"filteredOut",message:"uncategorized"},s):tgr(y,S)?to.noEdit({kind:"filteredOut",message:"uncategorized"},s):to.edit({edit:S},s)}async debounce(r,n){let o=r.getDebounceTime();n.setDebounceTime(o),await aE(o)}async createPrompt(r,n){let o=r.getActiveDocument(),c=o.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,l=o.documentAfterEdits.value.split(c),u=tP(o);if(u===null)return;let d=r2e(o,u),p=new Ay(o.documentAfterEditsNoShortening.value),m=await igr(this._parserService,{getText:a(()=>p.getText(),"getText"),languageId:o.languageId}),{firstEditableLineInShortenedDocument:h,lastEditableLineInShortenedDocument:g,editWindow:A}=function(){let z=rgr(o.documentAfterEditsLines,u.startLineNumber),V=Math.max(1,Math.min(z,u.startLineNumber-vpt)),U=u.startLineNumber-V,H=Math.min(l.length,u.endLineNumber+xpt),ee=H-u.endLineNumber,J=d.line-U,G=d.line+ee,j=new Jp(J,0,G,p.getLineLength(G));return{firstEditableLineInShortenedDocument:V,lastEditableLineInShortenedDocument:H,editWindow:j}}(),y=coe(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:m,document:p,selection:A}])[0],v=new Gr(1,h),b=new Gr(h,g+1),I=y.text,{messages:S,prediction:k,editWindowIsInPrompt:N}=await this._renderPrompt({request:r,activeDocumentSlice:I,languageId:o.languageId},n),F=I.split(/\r\n|\r|\n/).length,O=y.projectRange(A),Y=y.positionOffsetTransformer.toOffsetRange(O);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new Gr(O.start.line+1,O.end.line+2),allowedEditLineRange:new Gr(h,g+1),messages:S,prediction:k,editWindowIsInPrompt:N,activeDocument:o,activeDocumentLines:l,completionPrefixRange:v,completionRange:b,convergence:I,expectedConvergencePrefix:Y.start,maxCompletionLineCount:F+20}}async _renderPrompt(r,n){let s=await a_.create(this._instantiationService,i2e,r).render(void 0,n,{trace:!1}),c=s.metadata.get(Aoe)?.prediction,l=!!s.metadata.get(moe);return{messages:s.messages,prediction:c,editWindowIsInPrompt:l}}};l_=pf([Ra(0,gy),Ra(1,EE),Ra(2,F1)],l_);function zhr(t){function e(r,n,o){let s=r.lastIndexOf(n);if(s===-1)return r;let c=r.slice(0,s);return c.trim().length>0?c+o:c}return a(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${sP}>`,`
`),t=e(t,`\`\`\`
</${sP}>`,`
`),t=e(t,`</${sP}>`,`
`),t}a(zhr,"removeSuffixFromReply");function r2e(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new Ay(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}a(r2e,"getCursorPositionInOuterDocument");function Khr(t,e,r,n){let o=L8.fromString(e.text),s=L8.fromString(n.trimEnd()),l=new U8(t.languageId,o,new Gr(1,o.length+1),s).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),u=e.isOriginal?l:l.containWithinLines(r);if(!u)return null;let d=$Se?u.eliminateLargeChangeHunks():u;return d?d.toLineEdit("multiple-hunks"):null}a(Khr,"generateSummarizedEditWindowEdit");function Yhr(t,e){let r=e.toEdit(new gu(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}a(Yhr,"convertSummarizedEditWindowEditToOuterDocumentEdit");function Jhr(t,e){let r=e.edits.map(o=>{let s=o.replaceRange.start,c=t.toProjectedOffset(s);return qa.replace(new zt(c,c+o.replaceRange.length),o.newText)}),n=new Yd(t.documentAfterEdits,Ca.create(r));return gs.fromEdit(n)}a(Jhr,"convertOuterDocumentEditToProjectedEdit");function Xhr(t,e){let r=e.toEdit(t.documentAfterEdits),n=bpt(t.documentAfterEdits.value,r),o=new poe,s=t.documentBeforeEdits.value;for(let c of t.recentEdits.edits)o=o.combine(bpt(s,c)),s=c.apply(s);return!!o.isUndoneBy(n)}a(Xhr,"editWouldUndo");function Zhr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!Spt(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let o=t.recentEdits.edits[n],s=r.tryRebase(o);if(!s)return!0;r=s}return!1}a(Zhr,"editWouldDeleteWhatWasJustInserted");function egr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!Spt(r))return!1;for(let n of r.edits){let o=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(OSe(o,t.languageId))return!0}return!1}a(egr,"editWouldDeleteAComment");function tgr(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=a(l=>l.trim().length>5,"isSignificantLine"),o=new Set(r.newLines.filter(n));if(o.size<=1)return!1;let s=new Set(t.documentAfterEditsLines.filter(n));return n2e(s,o)/o.size>.8}a(tgr,"editWouldDuplicateExistingLines");function Spt(t){let e=t.edits.reduce((n,o)=>n+o.range.length,0);return t.edits.reduce((n,o)=>n+o.newText.length,0)===0&&e>0}a(Spt,"editIsDeletion");function rgr(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}a(rgr,"findLineNumberAboveWithContent");var poe=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{a(this,"InformationDelta")}combine(e){return new t(Tpt(this.inserted,e.inserted),Tpt(this.deleted,e.deleted))}isUndoneBy(e){let r=wpt(e.inserted,e.deleted),n=wpt(e.deleted,e.inserted),o=n2e(n,this.inserted),s=n2e(r,this.deleted);return n.size>6&&o/n.size>Ept||r.size>6&&s/r.size>Ept}};function bpt(t,e){let r=new Set,n=new Set,o=a(c=>{if(!c)return;let l=t.substring(c.start,c.endExclusive);for(let u of l.split(/\r\n|\r|\n/)){u=u.trim();for(let d of Ipt(u))n.add(d)}},"tryAddDeleted"),s=a(c=>{for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of Ipt(l))r.add(u)}},"tryAddInserted");for(let c of e.edits){let l=c.removeCommonPrefix(t).removeCommonSuffix(t),u=c.removeCommonSuffix(t).removeCommonPrefix(t);l.isNeutral()||(o(l.range),o(u.range),o(l.range.intersect(u.range)),s(ngr(l.newText,u.newText)))}return new poe(r,n)}a(bpt,"getInformationDelta");function ngr(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let o=t.slice(0,t.length-n),s=e.slice(n);if(o===s)return o}return""}a(ngr,"trimOverlap");function Ipt(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}a(Ipt,"to4grams");function Tpt(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}a(Tpt,"setUnion");function wpt(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}a(wpt,"setMinus");function n2e(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}a(n2e,"setIntersectionCount");async function igr(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||gpt(new Ay(e.getText()),e.languageId,void 0)}a(igr,"getStructure");var i2e=class extends Hl.PromptElement{static{a(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:o,languageId:s}=this.props,c=[`<${sP}>`,`\`\`\`${s}`,`${o}`,"```",`</${sP}>`].join(`
`),l=(0,Hl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new Aoe(c)}),vscpp(Hl.SystemMessage,{priority:1e3},vscpp(ioe,null),this._getInstructions()),vscpp(Hl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((u,d)=>u.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp(Hl.Chunk,{priority:300},vscpp(hoe,{doc:u}))):vscpp(Hl.Chunk,{priority:100+d},vscpp(hoe,{doc:u}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((u,d)=>u.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp(Hl.Chunk,{priority:300},vscpp(goe,{doc:u}))):vscpp(Hl.Chunk,{priority:200+d},vscpp(goe,{doc:u}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(l,{priority:300},vscpp(Hl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new moe}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",foe,">",vscpp("br",null),"```",s,vscpp("br",null),o,vscpp("br",null),"```",vscpp("br",null),"</",foe,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",foe,"> and </",foe,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",sP,">.")}},moe=class extends Hl.PromptMetadata{static{a(this,"EditWindowMarkerMetadata")}},hoe=class extends Hl.PromptElement{static{a(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,o=[];for(let s=0;s<n.documentLinesBeforeEdit.length;s++){let c=n.documentLinesBeforeEdit[s];o.push(`${n.clippingRange.startLineNumber+s}\u2502${c}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),o.join(`
`))}},goe=class extends Hl.PromptElement{static{a(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,o=[];return o.push("```"),o.push(`---${n.getDisplayPath()}:`),o.push(`+++${n.getDisplayPath()}:`),o.push(...upt(n)),o.push("```"),vscpp(vscppf,null,o.join(`
`))}},Aoe=class extends Hl.PromptMetadata{constructor(r){super();this.prediction=r}static{a(this,"PredictionMetadata")}};f();f();function Rpt(t,e){let r=[];for(let[n,o]of t.entries())o===e&&r.push(n);return r}a(Rpt,"findIndexes");function ogr(t,e,r,n=10){if(e.length===0)return e;let o=[...e],s=e.length-1;for(;s>=0&&e[s].trim()==="";)s--;if(s<0)return e;let c=Rpt(r,e[s]).slice(0,n);for(let m of c){let h=!1,g=s;for(;g>=0&&m>=0;){let A=e[g],y=r[m];if(A===y)g--,m--;else if(y.trim()==="")m--;else{h=!0;break}}if(!h&&m===-1&&g!==e.length-1){e=e.slice(0,g+1);break}else e=[...o]}if(!e.length)return e;let l=0;for(;e.length&&e[l].trim()==="";)l++;let u=[...e],p=Rpt(t,e[l]).slice(-n).reverse();for(let m of p){let h=!1,g=l;for(;g<e.length&&m<t.length;){let A=e[g],y=t[m];if(A===y)g++,m++;else if(y.trim()==="")m++;else{h=!0;break}}if(!h&&m===t.length&&g!==0){e=e.slice(g);break}else e=[...u]}return e}a(ogr,"deduplicateEditRegion");function kpt(t,e,r){let n=t.getLines(),o=n.slice(0,e[0]),s=n.slice(e[1]+1);return{updatedEditWindow:ogr(o,r.split(/\r?\n/),s).join(`
`)}}a(kpt,"postProcessUpdatedEditWindow");f();var yoe=Ne(xa());function Ppt(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===yoe.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===yoe.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}a(Ppt,"getTextPart");function sgr(t){return{type:yoe.Raw.ChatCompletionContentPartKind.Text,text:t}}a(sgr,"toTextPart");function o2e(t){return[sgr(t)]}a(o2e,"toTextParts");f();var Coe=Xp("IDiffService");var u2e=Ne(xa());f();var voe="<|cursor|>",aP="<|code_to_edit|>",q8="<|/code_to_edit|>",Bpt="<|area_around_code_to_edit|>",Npt="<|/area_around_code_to_edit|>",agr="<|current_file_content|>",cgr="<|/current_file_content|>",lgr="<|edit_diff_history|>",ugr="<|/edit_diff_history|>",dgr="<|recently_viewed_code_snippets|>",fgr="<|/recently_viewed_code_snippets|>",pgr="<|recently_viewed_code_snippet|>",mgr="<|/recently_viewed_code_snippet|>",Mpt=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${aP} and ${q8} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${voe}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${aP} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${aP} and ${q8} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${aP} or ${q8} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function Lpt(t,e,r,n){let o=t.getActiveDocument(),s=Agr(t,n),c=hgr(t,n,2e3),l=o.workspaceRoot===void 0?o.id.path:o.id.path.startsWith(o.workspaceRoot.path)?o.id.path.substring(o.workspaceRoot.path.length+1):o.id.path;return`
\`\`\`
${dgr}
${s}
${fgr}

${agr}
current_file_path: ${l}
${e}
${cgr}

${lgr}
${c}
${ugr}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${l}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${voe}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${aP}\` and \`${q8}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}a(Lpt,"getUserPrompt");function hgr(t,e,r){let n=[];for(let c of t.xtabEditHistory.reverse()){let l=ggr(c);if(l===null)continue;let u=e(l);if(r-=u,r<0)break;n.push(l)}let o=n.reverse(),s=o.join(`

`);return o.length>0&&(s+=`
`),s}a(hgr,"getEditDiffHistory");function ggr(t){let e=[],r=gs.fromEdit(t.edit);for(let o of r.edits){let s=t.edit.base.getLines().slice(o.lineRange.startLineNumber-1,o.lineRange.endLineNumberExclusive-1),c=o.newLines;if(s.filter(u=>u.trim().length>0).length===0&&c.filter(u=>u.trim().length>0).length===0)continue;let l=o.lineRange.startLineNumber-1;e.push(`@@ -${l},${s.length} +${l},${c.length} @@`),e.push(...s.map(u=>`-${u}`)),e.push(...c.map(u=>`+${u}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}a(ggr,"generateDocDiff");function Dpt(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[pgr,n,e,mgr].join(`
`)}a(Dpt,"formatCodeSnippet");function Agr(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let o=t.getActiveDocument(),c=t.documents.filter(d=>d.id!==o.id).map(d=>({path:d.id.path,content:d.documentAfterEdits.value})),l=[],u=0;for(let d=c.length-1;d>=0;d--){let p=c[d],m=p.content.split(/\r?\n/);n&&(m=m.map((v,b)=>`${b+1}|${v}`));let h=m.map(v=>e(v)+1),g=e(Dpt(p.path,"",!0)),A=h.reduce((v,b)=>v+b,0)+g,y=!1;for(;m.length>0&&u+A>r;)m.pop(),A-=h.pop()||0,y=!0;m.length>0&&(u+=A,l.push(Dpt(p.path,m.join(`
`),y)))}return l.join(`

`)}a(Agr,"getRecentCodeSnippets");function s2e(t,e,r){if(!t.length)return[0,0];let n=r*4,o=0,s=e?t.length-1:0;for(;o<n;)if(o+=t[s].length+1,e){if(s--,s<0)break}else if(s++,s>=t.length)break;return e?[s+1,t.length]:[0,s]}a(s2e,"truncateCode");var Fpt=2,Opt=10,a2e=15,c2e=1e3,l2e=2e3;var ag=class extends P8{constructor(r,n,o){super(ag.ID,[s=>new F8(s),s=>new B8(s),s=>new N8(s)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=o;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{a(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let o=new n_(r);try{if(r.xtabEditHistory.length===0)return to.noEdit({kind:"activeDocumentHasNoEdits"},o);let s=await this.doGetNextEdit(r,n,o);return new to(s,o.build(s))}catch(s){return to.noEdit({kind:"unexpected",error:oP(s)},o)}}async doGetNextEdit(r,n,o){let s=r.getActiveDocument(),c=tP(s);if(c===null)return As.error({kind:"uncategorized",error:oP(new Error("NoSelection"))});let l=a(ne=>Math.floor(ne.length/4),"computeTokens"),u=new jr(c.endLineNumber,c.endColumn),d=s.documentAfterEdits.getTransformer().getOffset(u),p=s.documentAfterEdits.value,m=p.substring(0,d)+voe+p.substring(d),h=u.lineNumber-1,g=m.split(/\r?\n/),A=Math.max(0,h-a2e),y=Math.min(g.length,h+a2e+1),v=Fpt,b=Opt,I=Math.max(0,h-v),S=Math.min(g.length,h+b+1),k=s.documentAfterEdits.getTransformer().getOffsetRange(new or(I,0,S,0)),N;N=p.split(/\r?\n/).slice(I,S);let F=[I,S],O=g.slice(I,S),Y=[Bpt,...g.slice(A,I),aP,...O,q8,...g.slice(S,y),Npt].join(`
`),z=Y,V;{let ne=l(Y),re=0;if(ne>=l2e)V=Y,re=A;else{let fe=Math.floor((l2e-ne)/2),[ye]=s2e(g.slice(0,A),!0,fe),[,Qe]=s2e(g.slice(y),!1,fe);re=Math.max(ye,h-c2e);let we=Math.min(Qe+y,h+c2e+1);V=[...g.slice(re,A),Y,...g.slice(y,we)].join(`
`)}}let U=Lpt(r,V,z,l),H=[{role:u2e.Raw.ChatRole.System,content:o2e(Mpt)},{role:u2e.Raw.ChatRole.User,content:o2e(U)}];if(o.setPrompt(H),await this.debounce(o),n.isCancellationRequested)return As.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let ee=new M3;o.setFetchStartedAt();let J,G=await this._endpointProvider.getEndpointInfo(this.ID),j=await this._chatMLFetcher.fetchOne(sq(H),async(ne,re,fe)=>{J===void 0&&(J=ee.elapsed())},{id:G.id,name:G.name},{temperature:0},n);if(j.type==="canceled")return o.setFetchResultIfNotSet("cancelled"),As.error({kind:"gotCancelled",message:"afterFetchCall"});if(j.type==="quotaExceeded")return o.setFetchResultIfNotSet("failure"),As.error({kind:"quotaExceeded"});if(j.type!=="success")return o.setFetchResultIfNotSet("failure"),As.error({kind:"fetchFailure",error:oP(j)});o.setFetchResultIfNotSet("success"),J&&o.setTtft(J),o.setResponse(j.value);let Z=ag.getBacktickSection(j.value);return await this.generateReturnEditFormat(s,k,N.join(`
`),Z,F,o)}async generateReturnEditFormat(r,n,o,s,c,l){let{updatedEditWindow:u}=kpt(r.documentAfterEdits,c,s),d=await this.diffService.computeDiff(o,u,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),p=u.split(/\r?\n/),m=d.changes.map(h=>new ay(new Gr(c[0]+h.original.startLineNumber,c[0]+h.original.endLineNumberExclusive),p.slice(h.modified.startLineNumber-1,h.modified.endLineNumberExclusive-1)));return m.length<1?As.error({kind:"noSuggestions"}):As.ok({editWindow:n,edit:new gs(m)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,o=Math.max(0,ag.DEBOUNCE_MS-n);r.setDebounceTime(o),await aE(o)}};ag=pf([Ra(0,Coe),Ra(1,gy),Ra(2,eoe)],ag);f();var xoe=class t extends Ps{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new D7,Mh(this,r.openDocuments,(o,s)=>{s.add(Ox(this,{rootedEdits:o.value},c=>{if(c.rootedEdits.changes.length<1||c.rootedEdits.previous===void 0)return;Ql(c.rootedEdits.changes.length===1,`Expected 1 edit change but got ${c.rootedEdits.changes.length}`);let l=c.rootedEdits.changes[0];if(l.edits.length===0)return;let u=this.idToEntry.get(o.id),d=c.rootedEdits.previous,p=new Yd(d,l);if(u===void 0){this.pushToHistory(o.id,p);return}let m=u.entry.edit,h=gs.fromEdit(m),g=gs.fromEdit(p);if(!g.isEmpty()&&!h.isEmpty()&&h.edits[0].lineRange.startLineNumber===g.edits[0].lineRange.startLineNumber){u.removeFromHistory();let A=m.edit.compose(l),y=new Yd(m.base,A);this.pushToHistory(o.id,y)}else this.pushToHistory(o.id,p)}))},o=>o.id).recomputeInitiallyAndOnChange(this._store)}static{a(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let o={docId:r,edit:n},s=this.history.push(o);if(this.idToEntry.set(r,{entry:o,removeFromHistory:s}),this.history.size>this.maxHistorySize){let c=this.history.shift();if(c!==void 0){let l=this.idToEntry.get(c.docId);l!==void 0&&c===l.entry&&this.idToEntry.delete(c.docId)}}}};f();f();var d2e=Ne(require("crypto"));var aq=d2e.randomUUID.bind(d2e);var Vpt=Ne(xa()),g2e=Ne(BU());f();var Eoe=Xp("ISnippyService");f();f();var cq=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),boe=65;function Cgr(t){let e=0,r;cq.lastIndex=0;do if(r=cq.exec(t),r&&(e+=1),e>=boe)break;while(r);return e}a(Cgr,"lexemeLength");function vgr(t,e){let r=0,n;cq.lastIndex=0;do if(n=cq.exec(t),n&&(r+=1,r>=e))return cq.lastIndex;while(n);return t.length}a(vgr,"offsetFirstLexemes");function Qpt(t,e){let r=t.split("").reverse().join(""),n=vgr(r,e);return r.length-n}a(Qpt,"offsetLastLexemes");function f2e(t){return Cgr(t)>=boe}a(f2e,"hasMinLexemeLength");f();f();var Upt;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,a(t,"is")})(Upt||={});var p2e;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,a(t,"is")})(p2e||={});var qpt;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(Upt.is)}e.is=t,a(t,"is")})(qpt||={});var m2e;(e=>{function t(r){if(p2e.is(r))return As.error(r);if(qpt.is(r))return As.ok(r)}e.to=t,a(t,"to")})(m2e||={});var Hpt;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,a(t,"is")})(Hpt||={});var $pt;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,a(t,"is")})($pt||={});var Wpt;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,a(t,"is")})(Wpt||={});var jpt;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(Hpt.is)&&"page_info"in r&&$pt.is(r.page_info)&&"license_stats"in r&&Wpt.is(r.license_stats)}e.is=t,a(t,"is")})(jpt||={});var h2e;(e=>{function t(r){if(p2e.is(r))return As.error(r);if(jpt.is(r))return As.ok(r)}e.to=t,a(t,"to")})(h2e||={});var Ioe=class t{static{a(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,m2e.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,h2e.to)}async fetch(e,r,n){let o=this.ctx.get(Qr),s=await this.ctx.get(cr).getToken(),c=Hm(this.ctx,s,"origin-tracker",`${t.TWIRP_URL}/${e}`),l={Authorization:`Bearer ${s.token}`,...m0(this.ctx),"X-GitHub-Api-Version":OB},u=new AbortController,d=await o.fetch(c,{method:"POST",headers:l,json:r,signal:u.signal});if(!d.ok)throw new Error(`Failed with status ${d.status} and body: ${await d.text()}`);let p=await d.json();return n(p)}};var Gpt=new ft("[CODE REFERENCING]"),H8=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(Ioe,this.ctx)}static{a(this,"SnippyService")}async handlePostInsertion(e,r,n){let o=this.computeSourceToCheck(r,n);if(!o)return;let c=await this.ctx.get(fr).getTextDocument({uri:e.toString()});if(!c){Gpt.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let l=c.version,u;try{u=await this.fetcher.fetchMatch(o.source)}catch(g){throw g}if(!u)throw new Error(`Failed to parse match response: ${u}`);if(u.isError())throw new Error(`Failed to match: ${u.err}`);if(u.val.snippets.length===0)return;let{snippets:d}=u.val,p=d.map(async g=>{let A=await this.fetcher.fetchFilesForMatch(g.cursor);if(!A||A.isError())return;let{file_matches:y,license_stats:v}=A.val;return{match:g,files:y,licenseStats:v}}),h=(await Promise.all(p)).filter(g=>!!g);if(h.length===0){Gpt.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let g of h){let A=new Set(Object.keys(g.licenseStats?.count??{}));A.delete("NOASSERTION")&&A.add("unknown");let y=Array.from(A).sort(),v=`${g.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,b={inDocumentUri:e.toString(),offsetStart:o.startOffset,offsetEnd:o.endOffset,matchingText:v,location:{start:{line:o.startPosition.lineNumber,character:o.startPosition.column},end:{line:o.endPosition.lineNumber,character:o.endPosition.column}},version:l,details:y.map(I=>({license:I,url:`${g.match.github_url}`}))};await this.ctx.get(Df).handleIPCodeCitation(this.ctx,b)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=Ca.single(r),s=n.getNewRanges().reduce((h,g)=>h.join(g)),c=e.apply(n),l=s.start,u=c.value.substring(s.start,s.endExclusive);if(!f2e(u)){let h=c.value.slice(0,s.start),g=Qpt(h,boe);l=g,u=c.value.slice(g,s.start+r.newText.length)}if(!f2e(u))return;let d=c.getTransformer(),p=d.getPosition(l),m=d.getPosition(s.endExclusive);return{source:u,startOffset:l,endOffset:s.endExclusive,startPosition:p,endPosition:m}}};H8=pf([Ra(1,F1)],H8);async function zpt(t){let e=new Jie;return e.define(Zie,new A2e(t)),e.define(Coe,new zp),e.define(EE,new pm(y2e,[!0])),e.define(Eoe,new pm(H8,[t])),e.define(gy,await v2e.Create(t)),e.define(nq,new pm(x2e)),e.define(eoe,new C2e(t)),e.seal()}a(zpt,"createInstantiationService");var A2e=class{constructor(e){this.ctx=e;this.ctx=e}static{a(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let o=Object.fromEntries(Object.entries(r??{}).filter(([l,u])=>u!==void 0)),s=Object.fromEntries(Object.entries(n??{}).filter(([l,u])=>u!==void 0)),c=zr.createAndMarkAsIssued(o,s);Nt(this.ctx,e,c)}},y2e=class{static{a(this,"ParserServiceImpl")}getTreeSitterAST(e){}},C2e=class{constructor(e){this.ctx=e}static{a(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==ag.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments();return{id:this.ctx.get(Lt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},v2e=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{a(this,"CLSChatMLFetcher")}static async Create(e){let r=await Go.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,o,s){let c=e.map(d=>t.chatMessageToClsChatMessage(d)),l=aq(),u=await this.ctx.get(Pp).fetchAndStreamChat(this.ctx,c,xC.createEmptyConfigForTesting(),"nextEditSuggestion",l,async(d,p)=>{if(r)return await r(d,0,{text:p.text})},n,o,s);if(u.type==="success"){let d=[];if(r)for await(let m of u.choices)if(m.finishReason!=="snippy")await r(m.completionText,0,{text:m.completionText}),d.push(m.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:l,serverRequestId:m.requestId.headerRequestId};let p=d.join("");return{type:"success",value:p}}else return u.type==="failed"&&u.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:u.reason}:{type:t.clsResponseTypeToResponseType(u.type),reason:u.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:Ppt(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},x2e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new Toe("cl100k_base")}static{a(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new Toe(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},Toe=class{constructor(e){this.mode=Vpt.OutputMode.Raw;this.tokenizer=Oi(e)}static{a(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===g2e.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===g2e.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var woe=class extends Ps{constructor(r){super();this.workspace=r;this._garbageCollector=new I2e(20);this._documentCaches=new Map;Mh(this,r.openDocuments,(n,o)=>{let s=new E2e(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(s.docId,s),o.add(Ox(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{for(let l of c.value.changes)s.handleEdit(l)})),o.add(qc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{a(this,"RejectionCollector")}reject(r,n){let o=this._documentCaches.get(r);o&&o.reject(n)}isRejected(r,n){let o=this._documentCaches.get(r);return o?o.isRejected(n):!1}},E2e=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{a(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new b2e(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},b2e=class{constructor(e,r){this._edit=e;this._onDispose=r}static{a(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},I2e=class{constructor(e){this._maxSize=e;this._disposables=[]}static{a(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var lq=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{a(this,"Node")}},_oe=class{static{a(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new lq("",null),this._tail=new lq("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new lq(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let o=this._popTail();return this._cache.delete(o.key),[o.key,o.value]}}};var Soe=class extends Ps{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new _oe(50);Mh(this,r.openDocuments,(n,o)=>{let s=new T2e(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(s.docId,s),o.add(Ox(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{for(let l of c.value.changes)s.handleEdit(l)})),o.add(qc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{a(this,"NextEditCache")}setNextEdits(r,n,o){let s=this._documentCaches.get(r);s&&s.setNextEdits(n,o)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},T2e=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{a(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let o=0;o<e.edits.length;o++){let s=e.edits[o],c=this._getKey(n.value);this._sharedCache.put(c,{edit:s,subsequentN:o,source:r,documentBeforeEdit:n}),n=n.apply(s.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var Roe=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{a(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,o,s,c;if(this._request){let u=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((d,p)=>d+p.recentEdits.edits.length,0),n=u.recentEdits.edits.length,o=u.languageId,s=u.lineCountBeforeClipping,c=u.clippingRange.length}let l=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:o,activeDocumentOriginalLineCount:s,activeDocumentShortenedLineCount:c,fetchStartedAfterMs:l,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},$8=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{a(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let o=n.builder;o.setAcceptance(r),this._doSendTelemetry(o)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:o,requestN:s,providerId:c,hadStatelessNextEditProviderCall:l,statelessNextEditProviderDuration:u,nextEditProviderDuration:d,isFromCache:p,subsequentEditOrder:m,documentShorteningStrategy:h,activeDocumentLanguageId:g,activeDocumentOriginalLineCount:A,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:v,isShown:b,acceptance:I,logProbThreshold:S,documentsCount:k,editsCount:N,activeDocumentEditsCount:F,promptLineCount:O,promptCharCount:Y,isDefaultEndpoint:z,hadLowLogProbSuggestion:V,nonTerminatingError:U,nEditsSuggested:H,kthEditPicked:ee,lineDistanceToMostRecentEdit:J,debounceTime:G,hasNextEdit:j,nextEditLogprob:Z,maxLinesPerEdit:ie,noNextEditReasonKind:ne,noNextEditReasonMessage:re,firstEditStrategy:fe,firstPickStrategyOverride:ye,fetchTime:Qe,fetchResult:we,fetchError:Xe,fetchStartedAfterMs:Oe}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:o,providerId:c,documentShorteningStrategy:h,activeDocumentLanguageId:g,acceptance:I,nonTerminatingError:U,noNextEditReasonKind:ne,noNextEditReasonMessage:re,firstEditStrategy:fe,firstPickStrategyOverride:ye,fetchResult:we,fetchError:Xe},{requestN:s,hadStatelessNextEditProviderCall:this._boolToNum(l),statelessNextEditProviderDuration:u,nextEditProviderDuration:d,isFromCache:this._boolToNum(p),subsequentEditOrder:m,isDefaultEndpoint:this._boolToNum(z),activeDocumentOriginalLineCount:A,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(v),isShown:this._boolToNum(b),logProbThreshold:S,documentsCount:k,editsCount:N,activeDocumentEditsCount:F,promptLineCount:O,promptCharCount:Y,hadLowLogProbSuggestion:this._boolToNum(V),nEditsSuggested:H,kthEditPicked:ee,lineDistanceToMostRecentEdit:J,debounceTime:G,fetchStartedAfterMs:Oe,fetchTime:Qe,hasNextEdit:this._boolToNum(j),nextEditLogprob:Z,maxLinesPerEdit:ie})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};$8=pf([Ra(0,Zie)],$8);f();var W8=class{constructor(e){this.result=e}static{a(this,"NextEditResult")}};var cP=!1,Kpt=300,j8=class extends Ps{constructor(r,n,o,s,c,l,u){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=o;this._xtabHistoryTracker=s;this._parseService=c;this._instantiationService=l;this._snippyService=u;this._rejectionCollector=new woe(this._workspace);this._nextEditCache=new Soe(this._workspace);this._recentlyShownCache=new S2e;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;Mh(this,this._workspace.openDocuments,(d,p)=>{p.add(Xxe(d.value,m=>{this._cancelPendingRequestDueToDocChange(d.id,m)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance($8)}static{a(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let o=this._pendingStatelessNextEditRequest.getActiveDocument();o.id===r&&o.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,o){this._lastTriggerTime=Date.now();let s=await this._workspace.getDocument(r);if(!s)return{result:void 0};let c=s.value.get(),l=new Roe(this._statelessNextEditProvider.ID);l.setOpportunityId(n.requestUuid??aq());let u=this._recentlyShownCache.get(r,c),d=this._nextEditCache.lookupNextEdit(r),p,m,h,g;if(u)p=u[0],g=u[1],m=c,l.setHeaderRequestId(g.headerRequestId),l.setIsFromCache(),await aE(Kpt);else if(d)p=d.edit,g=d.source,m=d.documentBeforeEdit,l.setHeaderRequestId(g.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(d.subsequentN),await aE(Kpt);else{g=new _2e,l.setHeaderRequestId(g.headerRequestId);let v=s.value.get();m=v;let b=await this.fetchNextEdit(g,r,l,o),I=v.value!==s.value.get().value;if(b.isError())switch(b.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":h=b.err.error;break;default:P7(b.err)}else if(!I){let S=b.val;S.isEmpty()||(p=S.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||S.edits.length>1)&&this._nextEditCache.setNextEdits(r,S,g))}}if(l.markEndTime(),h)throw this._telemetrySender.sendTelemetry(l),h;if(!p)return this._telemetrySender.sendTelemetry(l),new W8(void 0);if(this._rejectionCollector.isRejected(r,p))return l.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(l),new W8(void 0);Ql(m!==void 0,"should be defined if edit is defined");let A=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new W8({edit:p,showRangePreference:A,documentBeforeEdits:m});return this._telemetrySender.scheduleSendingTelemetry(y,l),p.isNeutral()||this._recentlyShownCache.add(r,c,[p,g]),y}async _shortenDocument(r,n){let o=r.lastEdit.getEditedState(),{document:s,clippedRange:c}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),l=Ca.fromOffsetEdit(s.edits).inverseOnString(s.originalText),{edits:u,editLast:d}=w2e(r.lastEdits.swap(l)),p=u.compose(),m=new nP(new Ay(r.lastEdits.apply(s.originalText)),d.toOffsetEdit().inverse(u.apply(s.text))),h=new gu(s.text),A=k1.fromEdit(new Yd(h,p)).removeCommonSuffixPrefixLines(),y=u.edits.at(-1)?.getNewRanges().at(0),v;y&&(v=new gu(m.text).getTransformer().getRange(y));let b=r.lastSelection?m.projectOffsetRange(r.lastSelection):void 0,I=this._workspace.getWorkspaceRoot(r.docId),S=a(O=>{let z=new k1(new gu(m.text),O).toEdit();return Ypt(z,m)},"toEditOnDocumentAfterEditsNoShortening"),k=a(O=>m.projectBack(O),"toOffsetOnDocumentAfterEditsNoShortening"),N=a(O=>m.project(O),"toProjectedOffset"),F=new KU(r.docId,I,r.languageId,A.base.getLines(),A.edit,v,h,u,o,S,k,N,r.lastEdit.base.getTextLength().lineCount,c,b);return{recentEdit:r.lastEdit,nextEditDoc:F,projectedDocument:m}}async fetchNextEdit(r,n,o,s){let c=await this._historyContextProvider.getHistoryContext(n);if(!c)return As.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let l=w2e(c.getDocumentAndIdx(n)),u=this.getDocumentShorteningStrategy();o.setDocumentShorteningStrategy(u);let d=await Promise.all(c.documents.map(O=>this._shortenDocument(O,u))),p=d[l.idx],m=this._xtabHistoryTracker.getHistory(),h=new Gie(r.headerRequestId,d.map(O=>O.nextEditDoc),l.idx,m,this.nextEditOptions),g=this._findExistingPendingRequest(h),A,y;if(g){A=g,cP&&console.log(`=> reusing an existing request ${A.seqid}`),o.setHeaderRequestId(g.id),o.setIsFromCache(),o.setRequest(A);let O=this._hookupCancellation(A,s);try{y=await A.result}finally{O.dispose()}}else{A=h,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=A;let O=a(()=>{this._pendingStatelessNextEditRequest===A&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");o.setRequest(A);let Y=this._hookupCancellation(A,s);try{y=await this._statelessNextEditProvider.provideNextEdit(A,A.cancellationTokenSource.token),A.setResult(y)}catch(z){throw A.setResultError(z),z}finally{Y.dispose(),O()}}o.setStatelessNextEditTelemetry(y.telemetry);let v=y.nextEdit;if(v.isError())return v;let b=v.val.edit;if(b.edits.length===0)return As.error({kind:"noSuggestions"});let S=new k1(new gu(p.projectedDocument.text),b).toEdit(),k=Ypt(S,p.projectedDocument),N=S.edits.length===k.edits.length?v.val.permutation:void 0,F=k.decompose(N);return As.ok(F)}_hookupCancellation(r,n){let o=new id,s=!1,c=a(()=>{s||(s=!0,r.liveDependentants--)},"removeDependant"),l=o.add(new d8);return o.add(n.onCancellationRequested(()=>{if(c(),r.liveDependentants>0){cP&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){cP&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}l.setIfNotSet(()=>{if(r.liveDependentants>0){cP&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}cP&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),o.add(qc(()=>{c()})),r.liveDependentants++,o}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){Mne(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new nP(new Ay(r.base.value),new ig([])),clippedRange:new Gr(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),o=n.getRange(r.edit.getRange()??new zt(0,0)),s=Gr.fromRange(o);function c(m,h){return new Gr(m.startLineNumber-h,m.endLineNumberExclusive+h)}a(c,"extendRange");let l=new Gr(1,n.textLength.lineCount+1),u=w2e(l.intersect(c(s,100))),d=Gr.subtract(l,u);return{document:new nP(new Ay(r.base.value),new ig(d.map(m=>Cl.delete(n.getOffsetRange(new or(m.startLineNumber,1,m.endLineNumberExclusive,1)))))),clippedRange:u}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new zU("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let o=await Igr(this._parseService,{getText:a(()=>n.base.value,"getText"),languageId:r});if(!o)return this.getProjectedDocumentClipping(n);let s=new Ay(n.base.value),c=n.edit.edits.at(0)?.range??new zt(0,0),l;if(n.edit.edits.length!==0){let g=n.edit.edits.at(0),A=n.edit.edits.at(-1);l=s.offsetRangeToRange(new zt(g.range.start,A.range.endExclusive))}let u=Jpt(s.offsetRangeToRange(c)),d=coe(1e4,{costFnOverride:a((g,A,y)=>{let v=Jpt(y.offsetRangeToRange(g.range)),b=bgr(u,v);return b>100?!1:b},"costFnOverride")},[{overlayNodeRoot:o,document:s,selection:l}])[0],p=d.projectBack(1)-1,m=n.base.getTransformer().getPosition(p).lineNumber,h=new Gr(m,m+d.lineCount);return{document:d,clippedRange:h}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};j8=pf([Ra(4,EE),Ra(5,F1),Ra(6,Eoe)],j8);function Ypt(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return Ca.fromOffsetEdit(r)}a(Ypt,"projectBackEdit");function Jpt(t){return new Gr(t.start.line+1,t.end.line+1)}a(Jpt,"lineRangeFromVSCodeRange");function bgr(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}a(bgr,"lineRangeDist");async function Igr(t,e){return await t.getTreeSitterAST(e)?.getStructure()}a(Igr,"getStructure");function w2e(t){if(!t)throw new bn("expected value to be defined, but it was not");return t}a(w2e,"assertDefined");var _2e=class{constructor(){this.headerRequestId=aq()}static{a(this,"NextEditFetchRequest")}},S2e=class{constructor(){this._cache=new m3(10)}static{a(this,"RecentlyShownCache")}add(e,r,n){let o=this._key(e,r);this._cache.set(o,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};var Xpt=10,yy=class{constructor(e){this.lastResultsById=new Sr(Xpt);this.lastResultsByUri=new Sr(Xpt);this.ctx=e}static{a(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let o=await(this.nextEditProvider??=this.createNextEditProvider()),s=this.lastResultsByUri.get(e);s&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(s.resultId),s.isShown&&o.handleRejection(s.documentId,s.nextEditResult));let c=my.create(e),l=await o.getNextEdit(c,{triggerKind:1},n);if(l.result==null)return;let u=await this.ctx.get(fr).getTextDocument({uri:e});if(!u)return;let d=u.positionAt(l.result.edit.range.start),p=u.positionAt(l.result.edit.range.endExclusive),m=Ir(),h={resultId:m,nextEditResult:l,documentId:c,isShown:!1};return this.lastResultsById.set(m,h),this.lastResultsByUri.set(e,h),[{edit:{text:l.result?.edit.newText??"",range:{start:d,end:p},textDocument:{uri:e,version:r}},id:m}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await zpt(this.ctx),r=!1;try{let c=await this.ctx.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments();r=Tgr(this.ctx,c)}catch(c){console.error("Error updating ExP values and assignments:",c)}let n=e.createInstance(r?ag:l_),o=this.ctx.get(qA),s=new zne(o);return await dR.catch(()=>{}),e.createInstance(j8,o,n,s,new xoe(o))}};function Tgr(t,e){let r=Bi(t,qt.NESXTab);return r!==void 0?r:t.get(Lt).enableNESXTab(e)}a(Tgr,"shouldUseXTab");f();var Zpt=Ne(Ai());var koe=class extends qA{constructor(r){super();this._openDocuments=UA(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{a(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(fr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,o){let s=my.create(r);return this.addDocument({id:s,initialValue:o,languageId:JR.create(n)},void 0)}onDidChangeLspDocument(r,n){let o=my.create(r),s=this._documents.get(o);s&&s.applyLspContentChanges(n)}onUserPositionChange(r,n){let o=my.create(r),s=this._documents.get(o);s&&s.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=my.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let o=this._documents.get(r.id);if(o)return o;let s=new R2e(r.id,new gu(r.initialValue??""),[],r.languageId??JR.PlainText,()=>{this._documents.delete(r.id);let c=this._openDocuments.get(),l=c.filter(u=>u.id!==s.id);l.length!==c.length&&this._openDocuments.set(l,n,{added:[],removed:[s]})},r.workspaceRoot);return this._documents.set(r.id,s),this._openDocuments.set([...this._openDocuments.get(),s],n,{added:[s],removed:[]}),s}async getDocument(r){if(await this.ctx.get(fr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},R2e=class extends WZ{static{a(this,"MutableObservableLspDocument")}constructor(e,r,n,o,s,c){super(e,r,n,o,s,c)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new jr(e.lineNumber+1,e.column+1));this.updateSelection([new zt(r,r)])}editFromLspContentChanges(e){return new P1(e.map((n,o)=>this.editFromLspContentChange(n,o)))}editFromLspContentChange(e,r){if(Zpt.TextDocumentContentChangeEvent.isIncremental(e)){let n=this.value.get().getTransformer(),o=n.getOffset(new jr(e.range.start.line+1,e.range.start.character+1)),s=n.getOffset(new jr(e.range.end.line+1,e.range.end.character+1));if(o>s){let c=this.value.get().value,l=c.split(/\r\n|\n/).length,u=c.split(/\r\n|\r|\n/).length,d=new bn(`Invalid range: [${o}, ${s}) from ${JSON.stringify(e.range)}. Line counts: nes=${l}, lsp=${u}`);throw l<u?d.code="ObservableWorkspace_TooFewLines":l>u?d.code="ObservableWorkspace_TooManyLines":d.code="ObservableWorkspace_InvalidRange",d.code+=r>0?"_SubsequentChange":"_FirstChange",d}return Ca.replace(new zt(o,s),e.text)}throw new Error("Full replacement edits are not supported")}};f();var Cy=class{static{a(this,"AuthenticationService")}};f();var e0t=require("crypto"),O1=Ne(require("fs/promises")),t0t=require("os"),IE=Ne(require("path"));var TE=class{constructor(e){this.ctx=e;this.logger=new ft("ripgrep")}static{a(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let o=IE.extname(__filename)===".ts"?IE.resolve(__dirname,"../../../packages/ripgrep/bin"):IE.resolve(__dirname,"./bin"),s=IE.resolve(o,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let c=await O1.readFile(s),l=(0,e0t.createHash)("sha256").update(c).digest("hex"),u=IE.join((0,t0t.homedir)(),".cache/pkg",l);await O1.mkdir(u,{recursive:!0});let d=Di(Dl(s)),p=IE.join(u,d);try{await O1.stat(p)}catch{await O1.copyFile(s,p),this.logger.debug(this.ctx,`Copied ripgrep to ${p}`)}s=p,e!=="win32"&&await O1.chmod(s,493).catch(m=>{this.logger.error(this.ctx,`Failed to set executable permission for ${s}: ${m}`)})}return s}};f();var r0t=require("child_process"),k2e=require("perf_hooks");var wE=new ft("ripgrepProcessManager"),vy=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,wE.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{a(this,"RipgrepProcessManager")}dispose(){wE.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){wE.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,o,s){return new Promise((c,l)=>{if(this.taskQueue.length>=this.maxPendingTasks){wE.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),l(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(s!==void 0&&s<=0){wE.error(this.ctx,`Invalid timeout value: ${s}`),l(new Error(`Invalid timeout value: ${s}`));return}wE.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:sy(),command:e,args:r,options:o,resolve:c,reject:l,timeoutInMs:s??this.defaultTimeoutInMs,token:n});let u=this.taskQueue.map(d=>this.getTaskSimpleInfo(d)).join(`
`);wE.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${u}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=k2e.performance.now();wE.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,r0t.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let o="",s="",c,l=a(()=>{c&&clearTimeout(c),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(c=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${o}`))),l(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+o))),l(),this.runNextTask()}),n.stdout?.on("data",u=>{o+=u.toString()}),n.stderr?.on("data",u=>{s+=u.toString()}),n.on("close",u=>{let p=k2e.performance.now()-r;wE.debug(this.ctx,`Task ${e.id} completed in ${p} ms`),l(),u===0?e.resolve(o):u===1?e.resolve(""):e.reject(new Error(`Process exited with code ${u}: ${s}`)),this.runNextTask()}),n.on("error",u=>{l(),e.reject(new Error(`Failed to start process: ${u.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var G8=class extends ZC{static{a(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};f();var n0t=100,i0t=1e3*60*5;function o0t(t){let e=new P2e(t);t.get(Wc).registerContextProvider(e),t.get(YC).add(e.id)}a(o0t,"registerRelatedFilesShim");var P2e=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new $S(n0t,i0t);this.relatedFilesCache=new $S(n0t,i0t);this.resolver={resolve:a(async(r,n)=>{let o=r.documentContext.uri,s=r.documentContext.languageId;return await this.getTraits(o,s,n)},"resolve")}}static{a(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,o){try{let s=await this.ctx.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments({uri:e,languageId:n}),c={uri:e,clientLanguageId:r,detectedLanguageId:n},l=await YZ(this.ctx,c,s,o,!0);if(o?.isCancellationRequested)return;let u=l.traits.filter(p=>p.includeInPrompt).map(p=>p.promptTextOverride?{name:"OtherInformation",value:p.promptTextOverride}:p),d=new Set;for(let p of l.entries.values())for(let m of p.keys())d.add(m);this.traitCache.set(e,u),this.relatedFilesCache.set(e,Array.from(d))}catch(s){Ix(this.ctx,s,"relatedFilesShim")}}};f();f();f();var Poe=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new vs;this.onFileChange=this.emitter.event;this.status="created",this.startWatching()}static{a(this,"WorkspaceWatcher")}emitFilesCreated(e){this.emitter.fire({type:"create",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesUpdated(e){this.emitter.fire({type:"update",documents:e,workspaceFolder:this.workspaceFolder})}emitFilesDeleted(e){this.emitter.fire({type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var ef=class{constructor(e){this.ctx=e;this.watchers=new Sr(25)}static{a(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let o=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(o)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Rr.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let s of this.watchers.values())r.push(s.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),o=r.filter(s=>s.uri!==e.uri&&s.uri.startsWith(n));for(let s of o)this.terminateWatching(s);return o}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r,n,o){return this.getWatcher(e)?.onFileChange(eu(this.ctx,r,"WorkspaceWatcherProvider.onFileChange"),n,o)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var V8=class{static{a(this,"WorkspaceLifecycleListener")}start(){}didAddWorkspace(e){}didRemoveWorkspace(e){}didTerminateWorkspaceSubfolders(e,r){}didChangeFiles(e){}},wgr="workspaceLifecycleManager",tf=new ft(wgr),Q1=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=Pa(e,async()=>{r.dispose(),await this.start()})}static{a(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?tf.debug(this.ctx,`listener ${e.constructor.name} is already started`):(tf.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):tf.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);tf.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(fr).onDidChangeWorkspaceFolders(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(fr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,o=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==o&&n.startsWith(o)}async onWorkspacesAdded(e,r){if(!e.length){tf.debug(r,"No workspaces to add.");return}tf.debug(r,`Adding workspaces: ${e.map(l=>l.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];tf.debug(r,`Combined workspaces: ${n.map(l=>l.uri).join(", ")}`);let o=n.filter((l,u,d)=>d.findIndex(p=>p.uri===l.uri)===u&&!d.some(p=>t.isSubfolder(l,p)));tf.debug(r,`Filtered workspaces: ${o.map(l=>l.uri).join(", ")}`);let s=o.filter(l=>!this.watchedWorkspaces.some(u=>u.uri===l.uri));tf.debug(r,`New workspaces: ${s.map(l=>l.uri).join(", ")}`);let c=this.watchedWorkspaces.filter(l=>!o.some(u=>u.uri===l.uri));tf.debug(r,`Removed workspaces: ${c.map(l=>l.uri).join(", ")}`),this.watchedWorkspaces=o;for(let l of c){tf.debug(r,`Terminating watching for removed workspace: ${l.uri}`),r.get(ef).terminateWatching(l);for(let d of this.activeListeners)tf.debug(r,`Notifying listener of removed workspace: ${l.uri}`),await d.didRemoveWorkspace(l)}for(let l of s){if(!l.uri)continue;tf.debug(r,`Starting to watch new workspace: ${l.uri}`);let u=r.get(ef);if(u.shouldStartWatching(l)){u.startWatching(l);let d=u.terminateSubfolderWatchers(l);if(d.length){tf.debug(r,`Terminated subfolder watchers for workspace: ${l.uri}, Subfolders: ${d.map(p=>p.uri).join(", ")}`);for(let p of this.activeListeners)await p.didTerminateWorkspaceSubfolders(l,d)}for(let p of this.activeListeners)tf.debug(r,`Adding file change listener for workspace: ${l.uri}`),u.onFileChange(l,p.didChangeFiles.bind(p))}}for(let l of this.activeListeners)for(let u of s)tf.debug(r,`Notifying ${l.constructor.name} of added workspace: ${u.uri}`),await l.didAddWorkspace(u)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(ef).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(s=>s.uri!==n.uri);for(let s of this.activeListeners)await s.didRemoveWorkspace(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function Doe(t){t.set(Q1,new Q1(t))}a(Doe,"setupWorkspaceLifecycleListener");f();var a0t=require("child_process");var Boe=class extends og{static{a(this,"GitCLIBranchLoader")}runCommand(e,r,n){return new Promise((o,s)=>{(0,a0t.execFile)(r,n,{cwd:e},(c,l)=>{c?s(c):o(l)})})}async tryRunCommand(e,r,n,o){try{return await this.runCommand(r,n,o)}catch(s){oie.info(e,`Failed to run command '${n}' in ${r}:`,s);return}}async getBranchInfo(e,r){let n=rs(r);if(n===void 0)return;let o=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","branch","--show-current",...this.extraArgs()]);if(o!==void 0){let s=o.trim();return s?mE.branch(s):mE.detachedHead()}}extraArgs(){return[]}};f();var Noe=class extends og{static{a(this,"GitParsingBranchLoader")}async getBranchInfo(e,r){try{let n=e.get(Qi),o=Ki(r,".git","HEAD"),s=await n.readFileString(o);return this.parseHeadContent(s.trim())}catch(n){let o=typeof r=="string"?r:r.uri;oie.info(e,`Failed to parse git HEAD file in ${o}:`,n);return}}parseHeadContent(e){if(e.startsWith("ref: refs/heads/")){let r=e.substring(16);return mE.branch(r)}else return this.isCommitSha(e)?mE.detachedHead():mE.detachedHead()}isCommitSha(e){return/^[a-f0-9]{40}$/i.test(e)}};f();f();var Moe=class{constructor(){this._tools=new Map}static{a(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var _gr=64;var d_=(r=>(r.enabled="enabled",r.disabled="disabled",r))(d_||{}),f_={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},U1={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},D2e=class{constructor(e){this.status="enabled";this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,_gr)}static{a(this,"LanguageModelTool")}},u_=class extends D2e{static{a(this,"BaseLanguageModelTool")}constructor(e){super(e)}},ji=class{static{a(this,"LanguageModelTextPart")}constructor(e){this.value=e}},lP=class{static{a(this,"LanguageModelDataPart")}constructor(e){this.value=e}},uP=class{static{a(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var yo=class{static{a(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},c0t=E.Object({content:E.Array(E.Union([E.Object({value:E.String()}),E.Object({value:E.Unknown()})])),status:E.Optional(E.Union([E.Literal("success"),E.Literal("error"),E.Literal("cancelled")]))}),uq=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(uq||{}),l0t=E.Object({result:E.Enum(uq)});var cg=class extends u_{static{a(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:f_,type:"shared"})}};f();var Sgr=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),Rgr=new Map;for(let[t,e]of Sgr)Rgr.set(e,t);f();function z8(t){return`[${Di(t)}](${t})`}a(z8,"formatUriForFileWidget");function q1(t){let e=kgr(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}a(q1,"resolvePathInput");function kgr(t){if(t.startsWith("/")||u0t()&&Dgr(t)||u0t()&&t.startsWith("\\\\"))return Dl(t)}a(kgr,"resolveFsUri");function u0t(){return process.platform==="win32"}a(u0t,"isWindows");function Pgr(t){return t>=65&&t<=90||t>=97&&t<=122}a(Pgr,"isWindowsDriveLetter");function Dgr(t){return Pgr(t.charCodeAt(0))&&t.charCodeAt(1)===58}a(Dgr,"hasDriveLetter");function fq(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof ji?r.value:r instanceof uP?"":r instanceof lP?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}a(fq,"parseToolResultToString");function Loe(t){let{content:e}=t;return{message:fq(e)}}a(Loe,"formatToolErrorResult");function d0t(t){let{content:e}=t;return{data:e.map(r=>r instanceof ji?{type:"text",value:r.value}:r instanceof uP?{type:"text",value:"<unsupported>"}:r instanceof lP?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}a(d0t,"formatToolSuccessResult");var Foe=class extends cg{static{a(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:E.Object({filePath:E.String({description:"The absolute path of the file to edit."}),code:E.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:E.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let o=await this.mapCode(r.input,e,n),s=o.code,c=await this.invokeClientEditFileTool(e,r,s,n);return await this.getFinalEditFileResult(e,r,c,o.editSurvivalTrackingSession,o.telemetry)}catch(o){let s=o instanceof Error?o.message:"An unknown error occurred";return new yo([new ji(s)],"error")}}async mapCode(e,r,n){let{filePath:o}=e,s=q1(o);if(!s)throw new Error(`Invalid file path: ${o}`);return await new E8(r.ctx).mapCode({code:e.code,resource:s,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source,chatRequestModel:r.turn.resolvedModelConfiguration?.modelFamily??r.turn.userRequestedModel},n,void 0,!0,r.copilotEditsSessionHeader)}async invokeClientEditFileTool(e,r,n,o){let s=e.ctx.get(xl).getToolByNameAndProvider("insert_edit_into_file",U1);if(!s)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(xl).invokeTool(e,s.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},o)}async getFinalEditFileResult(e,r,n,o,s){if(n.status!=="success")return n;let c=RT({uri:q1(r.input.filePath),languageId:"UNKNOWN"});if(o){let p=await tc(e.ctx,e,void 0);o.startReporter(m=>{this.handleEditSurvivalTelemetry(e,m,p,c,s)})}let l=fq(n.content),u=[];u.push(`<file_after_edit path="${r.input.filePath}">`),u.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let d=new lm({code:l,languageId:c,noFilePath:!0});return u.push(...d.renderAsArray()),u.push("</file_after_edit>"),new yo([new ji(u.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,o,s){VX(e.ctx,"agentPanel",{requestSource:s?.requestSource??"",chatRequestModel:s?.chatRequestModel??"",mapper:s?.mapper??"",headerRequestId:s?.headerRequestId??"",mode:(e.turn.getChatModeWithDefault()??"unknown").toLowerCase(),modelId:e.turn.getResolvedModelId()??"unknown",languageId:o},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1,arc:r.arc??-1,originalCharCount:r.originalCharCount??-1,currentLineCount:r.currentLineCount??-1,currentDeletedLineCount:r.currentDeletedLineCount??-1,originalLineCount:r.originalLineCount??-1,originalDeletedLineCount:r.originalDeletedLineCount??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let o=q1(n.filePath);return{progressMessage:`Editing ${z8(o)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var f0t=new ft("findFilesTool"),Ooe=class t extends cg{static{a(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:E.Object({query:E.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:E.Optional(E.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let o;try{if(n.isCancellationRequested)return new yo([new ji("Cancelled")],"cancelled");o=await e.ctx.get(TE).resolvePath()}catch(A){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(A)}`)}let{query:s,maxResults:c=20}=r.input,l=e.turn.workspaceFolders;if(!l?.length)return new yo([new ji("Failed to invoke tool file_search since no workspace folders found")],"error");let u=e.ctx.get(vy),d={},p=l.map(async A=>{if(n.isCancellationRequested)throw new Error("Canceled");try{f0t.debug(e.ctx,`Start searching for query ${s} in workspace folder: ${A.uri.toString()}`);let y=await u.execute(o,["--files","-g",s],n,{cwd:ac(A.uri)},t.timeOutInSeconds*1e3);f0t.debug(e.ctx,`Finished searching for query ${s} in workspace folder: ${A.uri.toString()} with results: ${y}`),d[A.uri.toString()]=y.split(`
`).map(v=>v.trim()).filter(v=>v.length>0).map(v=>`${ac(Ki(A.uri,v))}`)}catch(y){let v=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${A.uri.toString()}: ${v}`)}});try{await Promise.all(p)}catch(A){let y=A instanceof Error?A.message:"An unknown error occurred";return new yo([new ji(y)],"error")}let m=[],h=c;for(;h>0;){let A=!1;for(let y in d)d[y].length>0&&h>0&&(m.push(d[y].shift()),h--,A=!0);if(!A)break}let g=m.length===0?`No files found matching query: ${s}`:m.length===1?`Found 1 file matching query: ${s}
${m[0]}`:`Found ${m.length} files matching query: ${s}
${m.join(`
`)}`;return new yo([new ji(g)],"success")}catch(o){let s=o instanceof Error?o.message:"An unknown error occurred";return new yo([new ji(s)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var p0t=new ft("findTextInFilesTool"),Qoe=class t extends cg{static{a(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:E.Object({query:E.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:E.Optional(E.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:E.Optional(E.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let o;try{if(n.isCancellationRequested)return new yo([new ji("Cancelled")],"cancelled");o=await e.ctx.get(TE).resolvePath()}catch(v){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(v)}`)}let{query:s,isRegexp:c=!1,includePattern:l}=r.input,u=20,d=e.turn.workspaceFolders;if(!d?.length)return new yo([new ji("Failed to invoke tool grep_search since no workspace folders found")],"error");let p=e.ctx.get(vy),m={},h=d.map(async v=>{if(n.isCancellationRequested)throw new Error("Canceled");try{p0t.debug(e.ctx,`Start searching for query ${s} in workspace folder: ${v.uri.toString()}`);let b=[c?"--regexp":"--fixed-strings",s,...l?["-g",l]:[],"--no-heading","--line-number","--color","never",ac(v.uri)],I=await p.execute(o,b,n,{cwd:ac(v.uri)},t.timeOutInSeconds*1e3);p0t.debug(e.ctx,`Finished searching for query ${s} in workspace folder: ${v.uri.toString()} with results: ${I}`),m[v.uri.toString()]=I.split(`
`).map(S=>S.trim()).filter(S=>S.length>0)}catch(b){let I=b instanceof Error?b.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${v.uri.toString()}: ${I}`)}});try{await Promise.all(h)}catch(v){let b=v instanceof Error?v.message:"An unknown error occurred";return new yo([new ji(b)],"error")}let g=[],A=u;for(;A>0;){let v=!1;for(let b in m)m[b].length>0&&A>0&&(g.push(m[b].shift()),A--,v=!0);if(!v)break}let y=g.length===0?`Searched text for ${s}, no results`:g.length===1?`Searched text for: ${s}, 1 result
${g[0]}`:`Searched text for: ${s}, ${g.length} results
${g.join(`
`)}`;return new yo([new ji(y)],"success")}catch(o){let s=o instanceof Error?o.message:"An unknown error occurred";return new yo([new ji(s)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var qoe=Ne(require("path"));var Uoe=class extends cg{static{a(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:E.Object({path:E.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:o}=r.input,s=e.turn.workspaceFolders,c=e.turn.workspaceFolder,l=q1(o);if(!this.isPathWithinWorkspace(l,s,c))return new yo([new ji("Error: Path is outside of workspace folders")],"error");let d=await e.ctx.get(Qi).readDirectory(l.toString());return d.length===0?new yo([new ji("Folder is empty")],"success"):new yo([new ji(d.map(([p,m])=>`${p}${m&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=q1(e.input.path);return{progressMessage:`Reading directory ${z8(n)}`}}isPathWithinWorkspace(e,r,n){return!r&&!n?!0:r&&r.length>0?r.some(o=>this.isUriWithinDirectory(e,o.uri)):n?this.isUriWithinDirectory(e,n.uri):!1}isUriWithinDirectory(e,r){let n=rs(e),o=rs(r);if(!n||!o)return!1;let s=qoe.relative(o,n);return s===""?!0:!s.startsWith("..")&&!qoe.isAbsolute(s)}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var Hoe=class extends cg{static{a(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:E.Object({filePath:E.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:E.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:E.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:o,startLineNumberBaseZero:s,endLineNumberBaseZero:c}=r.input,l=q1(o);if(!l)throw new Error(`Invalid file path: ${o}`);let d=await e.ctx.get(In).getOrReadTextDocument({uri:l});if(d.status==="valid"){let p=new lm({code:d.document.getText({start:{line:s,character:0},end:{line:c+1,character:0}}),languageId:d.document.detectedLanguageId,uri:l});return new yo([new ji(p.renderAsString(`
`))],"success")}else return new yo([new ji(`Failed to read file ${o} with result ${JSON.stringify(d)}`)],"error")}catch(o){let s=o instanceof Error?o.message:"An unknown error occurred";return new yo([new ji(s)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let o=q1(n.filePath);return{progressMessage:`Reading file ${z8(o)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function m0t(){return[new Uoe,new Hoe,new Foe,new Ooe,new Qoe]}a(m0t,"getAllClsTools");var xl=class{constructor(e){this.ctx=e;this._toolRegistry=new Moe;for(let r of m0t())this._toolRegistry.registerTool(r)}static{a(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let o=this._toolRegistry.getTool(e);if(!o)throw new Error(`Tool with id '${e}' is undefined`);return o.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,o){if(o.isCancellationRequested)throw new va;let s=this._toolRegistry.getTool(r);if(!s)throw new Error(`Tool with id '${r}' is undefined`);return await s.invoke?.(e,n,o)??new yo([],"success")}async invokeToolConfirmation(e,r,n,o){if(o.isCancellationRequested)throw new va;let s=this._toolRegistry.getTool(r);if(!s)throw new Error(`Tool with id '${r}' is undefined`);return await s.invokeConfirmation?.(e,n,o)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let u of this._toolRegistry.listTools())e.has(u.toolProvider.id)||e.set(u.toolProvider.id,[]),u.status==="enabled"&&e.get(u.toolProvider.id)?.push(u);let r=e.get(f_.id)?.find(u=>u.name==="insert_edit_into_file");r&&e.get(f_.id)?.splice(e.get(f_.id)?.indexOf(r)??0,1);let n=e.get(U1.id)?.find(u=>u.name==="insert_edit_into_file");n&&e.get(U1.id)?.splice(e.get(U1.id)?.indexOf(n)??0,1);let o=new Map;r&&n&&o.set(r.nameForModel,r);let s=e.get(U1.id)??[],c=e.get(f_.id)??[],l=Array.from(e.entries()).filter(([u])=>u!==f_.id&&u!==U1.id).flatMap(([,u])=>u);return s.forEach(u=>{o.has(u.nameForModel)||o.set(u.nameForModel,u)}),c.forEach(u=>{o.has(u.nameForModel)||o.set(u.nameForModel,u)}),l.forEach(u=>{o.has(u.nameForModel)||o.set(u.nameForModel,u)}),o}updateToolStatus(e,r){for(let n of this._toolRegistry.listTools())n.toolProvider.isFirstPartyTool&&n.name===e&&(n.status=r)}};f();f();var fP=class{static{a(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var A0t=require("crypto"),B2e=require("fs"),N2e=Ne(require("path"));var h0t="symbolDatabaseLookup",g0t="multiLanguageContextProviderDocumentSymbols",pP=class{constructor(e){this.persistenceManager=e}static{a(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(h0t,e);return r||(r=await this.createDBFile(e)),N2e.default.join(this.persistenceManager.directory,g0t,r)}async init(){let e=N2e.default.join(this.persistenceManager.directory,g0t);await this.createIfNotExists(e)}async dirExists(e){try{return await B2e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await B2e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,A0t.randomUUID)()}.db`;return await this.persistenceManager.update(h0t,e,r),r}async deleteDBFile(e){}};f();f();var pq=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{a(this,"FileWatcher")}};f();f();f();var $oe=Ne(require("path")),y0t=require("worker_threads");function C0t(t,e){return new y0t.Worker($oe.default.resolve($oe.default.extname(__filename)!==".ts"?__dirname:$oe.default.resolve(__dirname,"../../dist"),t),{workerData:e})}a(C0t,"createWorker");f();var Woe=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{a(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,o)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:o}):this.outstandingPromises.push({factory:e,c:n,e:o}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var v0t=Ne(Ai());var joe="main.js",Goe=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let o={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=C0t(joe,o),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",s=>{this.handleUnexpectedError(s)}),this.postMessageQueue=new Woe(n)}catch(o){throw console.error(`Failed to create worker: ${o.message}`),o}}static{a(this,"IndexClient")}dispose(){return this.postMessageInQueue(new yJ(this.id++),v0t.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new hJ(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new gJ(this.id++,e),r)}getContext(e,r,n,o,s,c){return this.postMessageInQueue(new AJ(this.id++,e,r,n,o,s),c,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new pJ(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new mJ(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((s,c)=>{this.promiseResolvers.set(e.id,{resolve:s,reject:c})});this.worker.postMessage(e);let o=r.onCancellationRequested(()=>{this.worker.postMessage(new fJ(e.id))});try{return await n}finally{o.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(joe+"'")&&(r=new Error(`Failed to load ${joe}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${joe} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var mq=Ne(Ai());var mm=new ft(KT),mP=class{constructor(e,r,n,o,s){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(c,l)=>{await this.indexFile(l,this.languageId(l)??"plaintext")}),this.watcher.onWorkspaceChange(async(c,l)=>{if(c===1){mm.debug(this.ctx,`workspace removed: ${l}`),await this.indexClient.tryRemoveIndex(l,mq.CancellationToken.None);return}mm.debug(this.ctx,`workspace added: ${l}`),await this.indexAddedWorkspace(l)}),this.indexClient=new Goe(o,s);for(let c of o){let l=c.rootPath;this.workspaceInit.set(l,this.doWorkspaceIndex(l).then(()=>{mm.debug(this.ctx,`workspace ${l} indexed`),this.workspaceInit.delete(l)}))}}static{a(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await Ngr(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,mq.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{mm.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){mm.debug(this.ctx,`indexing workspace ${e}`);let r=XCe.map(p=>`*${p}`);if(r.length===0)return;let o=`**/${XCe.length===1?r[0]:`{${r.join(",")}}`}`,s=this.ctx.get(J0),c=await Promise.all([s.findFiles(o,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,mq.CancellationToken.None)]),l=c[0],u=c[1],d=Array.from(new Set([...l,...u]));mm.debug(this.ctx,`found ${d.length} files to index in ${e}`),await Promise.all(d.map(async p=>{let m=this.languageId(p);m&&await this.indexFile(p.replace(/\/+$/,""),m)})),mm.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{mm.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,mq.CancellationToken.None)}catch(n){mm.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return Jje(e)}};async function Ngr(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}a(Ngr,"createIndexableWorkspaceFolder");f();f();var x0t=100,Mgr=5e3,Voe=class{static{a(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,o,s,c,l,u){let d=Date.now(),p=this.get(n,o,r,d);if(p)return this.incrementRefCount(p),u.onCancellationRequested(()=>this.decrementRefCount(p)),p.value;if(!c)return e(r,n,o,s,l,u);let m=new An.CancellationTokenSource,h=a(()=>m.cancel(),"cancel"),g=e(r,n,o,s,l,m.token);return p=this.setBasedOnLastDelimiter(n,o,r,d,g,h),this.incrementRefCount(p),u.onCancellationRequested(()=>this.decrementRefCount(p)),g}get(e,r,n,o){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>x0t)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(o-this.cachedValue.timestamp>Mgr))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,o,s,c){let l=e.substring(0,r),u=/[A-Za-z0-9]+$/.exec(l),d=r;u&&(d=u.index),r-d>x0t&&(d=r);let p={cursorPosition:d,uri:n,timestamp:o,fullText:e,value:s.finally(()=>{p.complete=!0}),refCount:0,cancel:c,uuid:Ir(),complete:!1};return this.cachedValue=p}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var zoe=class{constructor(e){this.id=KT;this.selector=Array.from(XY.keys()).map(e=>({language:e}));try{this.documentManager=e.get(fr),this.resolver=new M2e(this.documentManager,e)}catch(r){throw mm.error(e,"Failed to create multi-language context provider",r),r}}static{a(this,"MultiLanguageContextProvider")}},M2e=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new Voe}static{a(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(fP).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let o=n.indexClient;try{let s=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(s===void 0||s?.version!==e.documentContext.version)return[];let c=e.documentContext.position,l=e.documentContext.proposedEdits??[],u=t1(s,c);u=u.applyEdits(l);let d=IJe(e.activeExperiments),p=await this.cachedContextFetcher.runWithCache(o.getContext.bind(o),e.documentContext.uri,u.textDocument.getText(),u.textDocument.offsetAt(u.position),e.documentContext.languageId,u.editsWithPosition.length===0,d,r);return mm.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${p.map(m=>JSON.stringify(m)).join(", ")}`),p}catch(s){if(FY(s))return[];throw mm.error(this.ctx,"Failed to get context",s),s}}};var hq=class extends V8{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(Q1).addListener(this)}static{a(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Wc).providers.some(r=>r.id===KT)){let r=this.ctx.get(pP);this.fileWatcher=new L2e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new mP(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new F2e(this.ctx),this.ctx.set(pq,this.fileWatcher),this.ctx.set(J0,this.fileSearch),this.ctx.set(mP,this.multiLanguageContextIndexWatcher),this.ctx.get(Wc).registerContextProvider(new zoe(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments(),n=dZ(this.ctx,r);return n.includes(KT)||n.length===1&&n[0]==="*"}async didAddWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async didRemoveWorkspace(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async didTerminateWorkspaceSubfolders(r,n){if(await this.isEnabled())return super.didTerminateWorkspaceSubfolders(r,n)}async didChangeFiles(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},L2e=class extends pq{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{a(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let o of this.fileChangeListeners)await o(r,n)}async triggerWorkspaceChange(r,n){for(let o of this.workspaceChangeListeners)await o(r,n)}},F2e=class extends J0{constructor(r){super();this.ctx=r}static{a(this,"LspFileSearch")}async findFiles(r,n,o){return(await this.ctx.get(ef).getWatchedFiles(n)).map(c=>this.ctx.get(fr).getTextDocumentUnsafe(c)?.clientUri??c.uri)}};var O2e=class extends fP{static{a(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new hq(e),e.set(hq,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function E0t(t){let e=t.get(mi),r=new pP(e);t.set(pP,r),t.set(fP,new O2e(t))}a(E0t,"setupMultiLanguageContextProviderFeature");f();f();f();var H1=new Map;H1.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});H1.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});H1.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});H1.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});H1.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});H1.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var Fgr=new ft("sdk");function Koe(t,e){H1.has(t.get(un).getEditorPluginInfo().name)||Fgr.warn(t,...e)}a(Koe,"deprecationWarning");var R1t=Ne(pB()),vm=Ne(kA());f();f();f();var rr={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var pd=class extends Error{static{a(this,"SchemaValidationError")}constructor(e){super(b0t(e))}};function et(t,e){let r=na.Compile(t);return async(n,o,s)=>{if(!r.Check(s)){let c=b0t(r.Errors(s));return[null,{code:rr.InvalidParams,message:c}]}return e(n,o,s)}}a(et,"addMethodHandlerValidation");function b0t(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}a(b0t,"createErrorMessage");f();var Q2e=Ne(Ai());f();var $1=class{constructor(e){this.ctx=e}static{a(this,"AbstractCommand")}};var Yoe="github.copilot.finishDeviceFlow",U2e=class extends $1{constructor(){super(...arguments);this.name=Yoe;this.arguments=E.Tuple([])}static{a(this,"FinishDeviceFlowCommand")}async handle(r,n){let o=this.ctx.get(Pf),s=o.pendingSignIn;if(!s)throw new Q2e.ResponseError(rr.InvalidRequest,"No pending sign in");try{await this.ctx.get(zu).open(s.verificationUri)}catch(c){T0.warn(this.ctx,"Failed to open",s.verificationUri),T0.exception(this.ctx,c,Yoe)}try{return await s.status}catch(c){throw new Q2e.ResponseError(rr.DeviceFlowFailed,String(c))}finally{o.pendingSignIn=void 0}}},I0t=[U2e];f();f();var zs=class extends Sr{static{a(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var gq="github.copilot.didAcceptCompletionItem",q2e=class extends $1{constructor(){super(...arguments);this.name=gq;this.arguments=E.Tuple([E.String({minLength:1})])}static{a(this,"DidAcceptCommand")}handle(r,[n]){let s=this.ctx.get(zs).get(n);return s?(Y3(this.ctx,s),!0):!1}},T0t=[q2e];f();var Ogr="github.copilot.didAcceptNextEditSuggestionItem",H2e=class extends $1{constructor(){super(...arguments);this.name=Ogr;this.arguments=E.Tuple([E.String({minLength:1})])}static{a(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(yy).handleAcceptance(n),!0}},w0t=[H2e];f();var W2e="github.copilot.didAcceptPanelCompletionItem",$2e=class extends $1{constructor(){super(...arguments);this.name=W2e;this.arguments=E.Tuple([E.String({minLength:1})])}static{a(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[o]=n,c=this.ctx.get(zs).get(o);return c?(W7(this.ctx,c.triggerCategory,c.displayText,c.offset,c.uri,c.telemetry,{compType:"full",acceptedLength:c.displayText.length,acceptedLines:nk(c.displayText).length},c.copilotAnnotations),!0):!1}},_0t=[$2e];var Qgr=[...I0t,...T0t,...w0t,..._0t];function S0t(t,e){let r=new Map;for(let n of Qgr){let o=new n(t),s=na.Compile(o.arguments);r.set(o.name,{typeCheck:s,command:o})}return e.onExecuteCommand((n,o)=>{let s=r.get(n.command);if(!s)throw new Error(`Unknown command: ${n.command}`);let c=_E(n.arguments??[]);if(c.length<s.command.arguments.minItems&&(c.length=s.command.arguments.minItems),s.typeCheck.Check(n.arguments))return s.command.handle(o,c);throw new pd(s.typeCheck.Errors(n.arguments))}),[...r.keys()]}a(S0t,"registerCommands");f();var lg=class extends pR{constructor(r){super(new GB,new Map);this.envSettings=new Map;this.env={...r};let n;this.#e=new Promise(s=>{n=s}),this.markReady=n,["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(s=>{for(let c of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let l=`${c}${Ugr(s.replace(/^Debug/,""))}`;l in this.env&&this.envSettings.set(qt[s],this.env[l])}})}static{a(this,"AgentConfigProvider")}#e;async requireReady(){await this.#e}getOptionalOverride(r){return super.getOptionalOverride(r)??this.envSettings.get(r)}};function Ugr(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}a(Ugr,"camelCaseToSnakeCaseAllCaps");var qgr="unknown-editor",R0t="unknown-editor-plugin",Joe=class extends un{static{a(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:qgr,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:R0t,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function k0t(t){return t.getEditorPluginInfo().name!==R0t}a(k0t,"hasValidInfo");f();var SE=Ne(kA());var Hgr=new Map([[4,SE.MessageType.Log],[3,SE.MessageType.Info],[2,SE.MessageType.Warning],[1,SE.MessageType.Error]]),Xoe=class extends el{static{a(this,"NotificationLogger")}logIt(e,r,n,...o){if(r==4&&!Fee(e)&&n!=="console")return;let s={type:Hgr.get(r),message:jZe(n,...o)},c=e.get(kr).connection;try{c.sendNotification(new SE.NotificationType("window/logMessage"),s)}catch(l){if(l instanceof SE.ConnectionError)return;throw l}}};f();var P0t=Ne(Qc());var Zoe=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{a(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(kr).connection.sendNotification(new P0t.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};function D0t(t){t.get(Od).setCustomReporters(new Zoe(t),new Zoe(t,!0))}a(D0t,"setupRedirectingTelemetryReporters");f();f();var ese=class{static{a(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Nt(e,"installed.reinstall"):Nt(e,"installed.new")}handleUpgrade(e){Nt(e,"installed.upgrade")}handleUninstall(e){Nt(e,"uninstalled")}};var Aq=Ne(pB());var K8=class extends ese{static{a(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(un).getEditorPluginInfo();return await e.get(mi).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(mi).listSettings()).length>0}async markInstalled(e){let r=e.get(un).getEditorPluginInfo();await e.get(mi).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(un).getEditorPluginInfo(),n=await e.get(mi).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,Aq.gt)((0,Aq.coerce)(r.version),(0,Aq.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(un).getEditorPluginInfo();await e.get(mi).delete("versions",r.name),(await e.get(mi).listKeys("versions")).length===0&&await e.get(mi).deleteSetting("versions")}};f();var j2e=Ne(require("path")),tse=Ne(Qc());var $gr={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},W1=class t{constructor(e){this.ctx=e;this.#e=new vs;this.onDidChangeWatchedFiles=this.#e.event}static{a(this,"LspFileWatcher")}#e;static{this.requestType=new tse.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(kr).connection}init(){this.ctx.get(bs).getCapabilities().watchedFiles&&this.connection.onNotification(tse.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(bs).getCapabilities().watchedFiles)return $gr;let o=(await this.connection.sendRequest(t.requestType,e)).files,s=[],c=[],l=[];for(let u of o){typeof u=="object"&&(u=u.uri);let d=j2e.extname(u).toLowerCase();if(!mR.includes(d)){l.push({uri:u});continue}let p=await this.getValidDocument(u);if(p===void 0){c.push({uri:u});continue}s.push(p)}return{watchedFiles:s,contentRestrictedFiles:c,unknownFileExtensions:l}}async didChangeWatchedFilesHandler(e){let r=[],n=[],o=[];for(let s of e.changes){let c=s.uri,l={uri:c,isRestricted:!1,isUnknownFileExtension:!1},u=j2e.extname(s.uri).toLowerCase();if(!mR.includes(u))l.isUnknownFileExtension=!0;else{let d=await this.getValidDocument(c);d===void 0?l.isRestricted=!0:l.document=d}switch(s.type){case 1:n.push(l);break;case 2:r.push(l);break;case 3:o.push(l);break}}this.#e.fire({workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:o})}async getValidDocument(e){let n=await this.ctx.get(In).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};f();f();var Wgr=E.Object({providerName:E.String()});async function jgr(t,e,r){try{let{providerName:n}=r,o=Mw(n);if(o!==0)return[null,{code:rr.InvalidParams,message:`deleteApiKey is only supported for providers with GlobalApiKey auth type. Provider ${n} has auth type: ${o}`}];let s=new ha(t.get(mi));return await s.removeAllModelConfigs(n),await s.deleteAPIKey(n,o),[{success:!0,message:`API key and all model configurations deleted successfully for provider ${n}`},null]}catch(n){return[null,{code:rr.InternalError,message:`Failed to delete API key: ${n instanceof Error?n.message:String(n)}`}]}}a(jgr,"handleBYOKDeleteApiKeyChecked");var B0t=et(Wgr,jgr);f();var Ggr=E.Object({providerName:E.String(),modelId:E.String()});async function Vgr(t,e,r){try{let n=new ha(t.get(mi)),{providerName:o,modelId:s}=r,c=Mw(o);return await n.removeModelConfig(o,s),c===1&&await n.deleteAPIKey(o,c,s),[{success:!0,message:`Model ${s} deleted successfully for provider ${o}`},null]}catch(n){return[null,{code:rr.InternalError,message:`Failed to delete model: ${n instanceof Error?n.message:String(n)}`}]}}a(Vgr,"handleBYOKDeleteModelChecked");var N0t=et(Ggr,Vgr);f();var zgr=E.Object({providerName:E.Optional(E.String()),modelId:E.Optional(E.String())});async function Kgr(t,e,r){try{let n=new ha(t.get(mi)),{providerName:o,modelId:s}=r;if(!o){let l=t.get(mi),u=await l.listKeys("byok"),d=[];for(let p of u)if(p.endsWith("-api-key")){let m=await l.read("byok",p);if(m){let g=p.replace("-api-key","").split("-");if(g.length===1)d.push({providerName:g[0],apiKey:m});else if(g.length>=2){let A=g[0],y=g.slice(1).join("-");d.push({providerName:A,modelId:y,apiKey:m})}}}return[{apiKeys:d},null]}return[{apiKeys:[{apiKey:await n.getAPIKey(o,s)||void 0,providerName:o,modelId:s}]},null]}catch(n){return[null,{code:rr.InternalError,message:`Failed to get API key: ${n instanceof Error?n.message:String(n)}`}]}}a(Kgr,"handleBYOKListApiKeysChecked");var M0t=et(zgr,Kgr);f();f();f();f();f();f();function Rn(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}a(Rn,"__classPrivateFieldSet");function kt(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}a(kt,"__classPrivateFieldGet");f();var G2e=a(function(){let{crypto:t}=globalThis;if(t?.randomUUID)return G2e=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))},"uuid4");f();f();f();function RE(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}a(RE,"isAbortError");var yq=a(t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)},"castToError");var wn=class extends Error{static{a(this,"AnthropicError")}},wu=class t extends wn{static{a(this,"APIError")}constructor(e,r,n,o){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=o,this.requestID=o?.get("request-id"),this.error=r}static makeMessage(e,r,n){let o=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,r,n,o){if(!e||!o)return new m_({message:n,cause:yq(r)});let s=r;return e===400?new J8(e,s,n,o):e===401?new X8(e,s,n,o):e===403?new Z8(e,s,n,o):e===404?new eM(e,s,n,o):e===409?new tM(e,s,n,o):e===422?new rM(e,s,n,o):e===429?new nM(e,s,n,o):e>=500?new iM(e,s,n,o):new t(e,s,n,o)}},md=class extends wu{static{a(this,"APIUserAbortError")}constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},m_=class extends wu{static{a(this,"APIConnectionError")}constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},Y8=class extends m_{static{a(this,"APIConnectionTimeoutError")}constructor({message:e}={}){super({message:e??"Request timed out."})}},J8=class extends wu{static{a(this,"BadRequestError")}},X8=class extends wu{static{a(this,"AuthenticationError")}},Z8=class extends wu{static{a(this,"PermissionDeniedError")}},eM=class extends wu{static{a(this,"NotFoundError")}},tM=class extends wu{static{a(this,"ConflictError")}},rM=class extends wu{static{a(this,"UnprocessableEntityError")}},nM=class extends wu{static{a(this,"RateLimitError")}},iM=class extends wu{static{a(this,"InternalServerError")}};var Jgr=/^[a-z][a-z0-9+.-]*:/i,L0t=a(t=>Jgr.test(t),"isAbsoluteURL"),V2e=a(t=>(V2e=Array.isArray,V2e(t)),"isArray"),z2e=V2e;function K2e(t){return typeof t!="object"?{}:t??{}}a(K2e,"maybeObj");function F0t(t){if(!t)return!0;for(let e in t)return!1;return!0}a(F0t,"isEmptyObj");function O0t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}a(O0t,"hasOwn");var Q0t=a((t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new wn(`${t} must be an integer`);if(e<0)throw new wn(`${t} must be a positive integer`);return e},"validatePositiveInteger");var rse=a(t=>{try{return JSON.parse(t)}catch{return}},"safeJSON");f();var U0t=a(t=>new Promise(e=>setTimeout(e,t)),"sleep");f();f();var h_="0.56.0";var W0t=a(()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u","isRunningInBrowser");function Xgr(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}a(Xgr,"getDetectedPlatform");var Zgr=a(()=>{let t=Xgr();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":h_,"X-Stainless-OS":H0t(Deno.build.os),"X-Stainless-Arch":q0t(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":h_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":h_,"X-Stainless-OS":H0t(globalThis.process.platform??"unknown"),"X-Stainless-Arch":q0t(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let e=eAr();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":h_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":h_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},"getPlatformProperties");function eAr(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let o=n[1]||0,s=n[2]||0,c=n[3]||0;return{browser:e,version:`${o}.${s}.${c}`}}}return null}a(eAr,"getBrowserInfo");var q0t=a(t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown","normalizeArch"),H0t=a(t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),"normalizePlatform"),$0t,j0t=a(()=>$0t??($0t=Zgr()),"getPlatformHeaders");f();function G0t(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}a(G0t,"getDefaultFetch");function Y2e(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}a(Y2e,"makeReadableStream");function nse(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Y2e({start(){},async pull(r){let{done:n,value:o}=await e.next();n?r.close():r.enqueue(o)},async cancel(){await e.return?.()}})}a(nse,"ReadableStreamFrom");function Cq(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}a(Cq,"ReadableStreamToAsyncIterable");async function V0t(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}let e=t.getReader(),r=e.cancel();e.releaseLock(),await r}a(V0t,"CancelReadableStream");f();var z0t=a(({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),"FallbackEncoder");f();f();f();f();f();function J0t(t){let e=0;for(let o of t)e+=o.length;let r=new Uint8Array(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}a(J0t,"concatBytes");var K0t;function vq(t){let e;return(K0t??(e=new globalThis.TextEncoder,K0t=e.encode.bind(e)))(t)}a(vq,"encodeUTF8");var Y0t;function J2e(t){let e;return(Y0t??(e=new globalThis.TextDecoder,Y0t=e.decode.bind(e)))(t)}a(J2e,"decodeUTF8");var hm,gm,kE=class{static{a(this,"LineDecoder")}constructor(){hm.set(this,void 0),gm.set(this,void 0),Rn(this,hm,new Uint8Array,"f"),Rn(this,gm,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?vq(e):e;Rn(this,hm,J0t([kt(this,hm,"f"),r]),"f");let n=[],o;for(;(o=nAr(kt(this,hm,"f"),kt(this,gm,"f")))!=null;){if(o.carriage&&kt(this,gm,"f")==null){Rn(this,gm,o.index,"f");continue}if(kt(this,gm,"f")!=null&&(o.index!==kt(this,gm,"f")+1||o.carriage)){n.push(J2e(kt(this,hm,"f").subarray(0,kt(this,gm,"f")-1))),Rn(this,hm,kt(this,hm,"f").subarray(kt(this,gm,"f")),"f"),Rn(this,gm,null,"f");continue}let s=kt(this,gm,"f")!==null?o.preceding-1:o.preceding,c=J2e(kt(this,hm,"f").subarray(0,s));n.push(c),Rn(this,hm,kt(this,hm,"f").subarray(o.index),"f"),Rn(this,gm,null,"f")}return n}flush(){return kt(this,hm,"f").length?this.decode(`
`):[]}};hm=new WeakMap,gm=new WeakMap;kE.NEWLINE_CHARS=new Set([`
`,"\r"]);kE.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function nAr(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}a(nAr,"findNewlineIndex");function X0t(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}a(X0t,"findDoubleNewlineIndex");f();var ose={off:0,error:200,warn:300,info:400,debug:500},X2e=a((t,e,r)=>{if(t){if(O0t(ose,t))return t;_u(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ose))}`)}},"parseLogLevel");function xq(){}a(xq,"noop");function ise(t,e,r){return!e||ose[t]>ose[r]?xq:e[t].bind(e)}a(ise,"makeLogFn");var iAr={error:xq,warn:xq,info:xq,debug:xq},Z0t=new WeakMap;function _u(t){let e=t.logger,r=t.logLevel??"off";if(!e)return iAr;let n=Z0t.get(e);if(n&&n[0]===r)return n[1];let o={error:ise("error",e,r),warn:ise("warn",e,r),info:ise("info",e,r),debug:ise("debug",e,r)};return Z0t.set(e,[r,o]),o}a(_u,"loggerFor");var PE=a(t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t),"formatRequestDetails");var Eq,j1=class t{static{a(this,"Stream")}constructor(e,r,n){this.iterator=e,Eq.set(this,void 0),this.controller=r,Rn(this,Eq,n,"f")}static fromSSEResponse(e,r,n){let o=!1,s=n?_u(n):console;async function*c(){if(o)throw new wn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let l=!1;try{for await(let u of oAr(e,r)){if(u.event==="completion")try{yield JSON.parse(u.data)}catch(d){throw s.error("Could not parse message into JSON:",u.data),s.error("From chunk:",u.raw),d}if(u.event==="message_start"||u.event==="message_delta"||u.event==="message_stop"||u.event==="content_block_start"||u.event==="content_block_delta"||u.event==="content_block_stop")try{yield JSON.parse(u.data)}catch(d){throw s.error("Could not parse message into JSON:",u.data),s.error("From chunk:",u.raw),d}if(u.event!=="ping"&&u.event==="error")throw new wu(void 0,rse(u.data)??u.data,void 0,e.headers)}l=!0}catch(u){if(RE(u))return;throw u}finally{l||r.abort()}}return a(c,"iterator"),new t(c,r,n)}static fromReadableStream(e,r,n){let o=!1;async function*s(){let l=new kE,u=Cq(e);for await(let d of u)for(let p of l.decode(d))yield p;for(let d of l.flush())yield d}a(s,"iterLines");async function*c(){if(o)throw new wn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let l=!1;try{for await(let u of s())l||u&&(yield JSON.parse(u));l=!0}catch(u){if(RE(u))return;throw u}finally{l||r.abort()}}return a(c,"iterator"),new t(c,r,n)}[(Eq=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),o=a(s=>({next:a(()=>{if(s.length===0){let c=n.next();e.push(c),r.push(c)}return s.shift()},"next")}),"teeIterator");return[new t(()=>o(e),this.controller,kt(this,Eq,"f")),new t(()=>o(r),this.controller,kt(this,Eq,"f"))]}toReadableStream(){let e=this,r;return Y2e({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{let{value:o,done:s}=await r.next();if(s)return n.close();let c=vq(JSON.stringify(o)+`
`);n.enqueue(c)}catch(o){n.error(o)}},async cancel(){await r.return?.()}})}};async function*oAr(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wn("Attempted to iterate over a response with no body");let r=new Z2e,n=new kE,o=Cq(t.body);for await(let s of sAr(o))for(let c of n.decode(s)){let l=r.decode(c);l&&(yield l)}for(let s of n.flush()){let c=r.decode(s);c&&(yield c)}}a(oAr,"_iterSSEMessages");async function*sAr(t){let e=new Uint8Array;for await(let r of t){if(r==null)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?vq(r):r,o=new Uint8Array(e.length+n.length);o.set(e),o.set(n,e.length),e=o;let s;for(;(s=X0t(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}a(sAr,"iterSSEChunks");var Z2e=class{static{a(this,"SSEDecoder")}constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,o]=aAr(e,":");return o.startsWith(" ")&&(o=o.substring(1)),r==="event"?this.event=o:r==="data"&&this.data.push(o),null}};function aAr(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}a(aAr,"partition");async function sse(t,e){let{response:r,requestLogID:n,retryOfRequestLogID:o,startTime:s}=e,c=await(async()=>{if(e.options.stream)return _u(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):j1.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;let u=r.headers.get("content-type")?.split(";")[0]?.trim();if(u?.includes("application/json")||u?.endsWith("+json")){let m=await r.json();return eRe(m,r)}return await r.text()})();return _u(t).debug(`[${n}] response parsed`,PE({retryOfRequestLogID:o,url:r.url,status:r.status,body:c,durationMs:Date.now()-s})),c}a(sse,"defaultParseResponse");function eRe(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}a(eRe,"addRequestID");f();var bq,hP=class t extends Promise{static{a(this,"APIPromise")}constructor(e,r,n=sse){super(o=>{o(null)}),this.responsePromise=r,this.parseResponse=n,bq.set(this,void 0),Rn(this,bq,e,"f")}_thenUnwrap(e){return new t(kt(this,bq,"f"),this.responsePromise,async(r,n)=>eRe(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(kt(this,bq,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};bq=new WeakMap;var ase,tRe=class{static{a(this,"AbstractPage")}constructor(e,r,n,o){ase.set(this,void 0),Rn(this,ase,e,"f"),this.options=o,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new wn("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await kt(this,ase,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ase=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},Iq=class extends hP{static{a(this,"PagePromise")}constructor(e,r,n){super(e,r,async(o,s)=>new n(o,s.response,await sse(o,s),s.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},ug=class extends tRe{static{a(this,"Page")}constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let r=this.first_id;return r?{...this.options,query:{...K2e(this.options.query),before_id:r}}:null}let e=this.last_id;return e?{...this.options,query:{...K2e(this.options.query),after_id:e}}:null}};f();f();f();var nRe=a(()=>{if(typeof File>"u"){let{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}},"checkFileSupport");function gP(t,e,r){return nRe(),new File(t,e??"unknown_file",r)}a(gP,"makeFile");function Tq(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}a(Tq,"getName");var iRe=a(t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function","isAsyncIterable");var tmt=a(async(t,e)=>({...t,body:await uAr(t.body,e)}),"multipartFormRequestOptions"),emt=new WeakMap;function lAr(t){let e=typeof t=="function"?t:t.fetch,r=emt.get(e);if(r)return r;let n=(async()=>{try{let o="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new o(s).text()}catch{return!0}})();return emt.set(e,n),n}a(lAr,"supportsFormData");var uAr=a(async(t,e)=>{if(!await lAr(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,o])=>rRe(r,n,o))),r},"createForm"),dAr=a(t=>t instanceof Blob&&"name"in t,"isNamedBlob");var rRe=a(async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response){let n={},o=r.headers.get("Content-Type");o&&(n={type:o}),t.append(e,gP([await r.blob()],Tq(r),n))}else if(iRe(r))t.append(e,gP([await new Response(nse(r)).blob()],Tq(r)));else if(dAr(r))t.append(e,gP([r],Tq(r),{type:r.type}));else if(Array.isArray(r))await Promise.all(r.map(n=>rRe(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,o])=>rRe(t,`${e}[${n}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},"addFormValue");var rmt=a(t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function","isBlobLike"),fAr=a(t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&rmt(t),"isFileLike"),pAr=a(t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function","isResponseLike");async function cse(t,e,r){if(nRe(),t=await t,e||(e=Tq(t)),fAr(t))return t instanceof File&&e==null&&r==null?t:gP([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...r});if(pAr(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),gP(await oRe(o),e,r)}let n=await oRe(t);if(!r?.type){let o=n.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(r={...r,type:o})}return gP(n,e,r)}a(cse,"toFile");async function oRe(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(rmt(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(iRe(t))for await(let r of t)e.push(...await oRe(r));else{let r=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${mAr(t)}`)}return e}a(oRe,"getBytes");function mAr(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}a(mAr,"propsForError");f();f();f();f();var El=class{static{a(this,"APIResource")}constructor(e){this._client=e}};f();f();var nmt=Symbol.for("brand.privateNullableHeaders");function*gAr(t){if(!t)return;if(nmt in t){let{values:n,nulls:o}=t;yield*n.entries();for(let s of o)yield[s,null];return}let e=!1,r;t instanceof Headers?r=t.entries():z2e(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){let o=n[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let s=z2e(n[1])?n[1]:[n[1]],c=!1;for(let l of s)l!==void 0&&(e&&!c&&(c=!0,yield[o,null]),yield[o,l])}}a(gAr,"iterateHeaders");var zo=a(t=>{let e=new Headers,r=new Set;for(let n of t){let o=new Set;for(let[s,c]of gAr(n)){let l=s.toLowerCase();o.has(l)||(e.delete(s),o.add(l)),c===null?(e.delete(s),r.add(l)):(e.append(s,c),r.delete(l))}}return{[nmt]:!0,values:e,nulls:r}},"buildHeaders");f();function omt(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}a(omt,"encodeURIPath");var imt=Object.freeze(Object.create(null)),AAr=a((t=omt)=>a(function(r,...n){if(r.length===1)return r[0];let o=!1,s=[],c=r.reduce((p,m,h)=>{/[?#]/.test(m)&&(o=!0);let g=n[h],A=(o?encodeURIComponent:t)(""+g);return h!==n.length&&(g==null||typeof g=="object"&&g.toString===Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??imt)??imt)?.toString)&&(A=g+"",s.push({start:p.length+m.length,length:A.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),p+m+(h===n.length?"":A)},""),l=c.split(/[?#]/,1)[0],u=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,d;for(;(d=u.exec(l))!==null;)s.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(s.sort((p,m)=>p.start-m.start),s.length>0){let p=0,m=s.reduce((h,g)=>{let A=" ".repeat(g.start-p),y="^".repeat(g.length);return p=g.start+g.length,h+A+y},"");throw new wn(`Path parameters result in path with invalid segments:
${s.map(h=>h.error).join(`
`)}
${c}
${m}`)}return c},"path"),"createPathTagFunction"),rf=AAr(omt);var oM=class extends El{static{a(this,"Files")}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/files",ug,{query:o,...r,headers:zo([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])})}delete(e,r={},n){let{betas:o}=r??{};return this._client.delete(rf`/v1/files/${e}`,{...n,headers:zo([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString()},n?.headers])})}download(e,r={},n){let{betas:o}=r??{};return this._client.get(rf`/v1/files/${e}/content`,{...n,headers:zo([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}retrieveMetadata(e,r={},n){let{betas:o}=r??{};return this._client.get(rf`/v1/files/${e}`,{...n,headers:zo([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString()},n?.headers])})}upload(e,r){let{betas:n,...o}=e;return this._client.post("/v1/files",tmt({body:o,...r,headers:zo([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])},this._client))}};f();var sM=class extends El{static{a(this,"Models")}retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(rf`/v1/models/${e}?beta=true`,{...n,headers:zo([{...o?.toString()!=null?{"anthropic-beta":o?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/models?beta=true",ug,{query:o,...r,headers:zo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};f();f();f();var aM=class t{static{a(this,"JSONLDecoder")}constructor(e,r){this.iterator=e,this.controller=r}async*decoder(){let e=new kE;for await(let r of this.iterator)for(let n of e.decode(r))yield JSON.parse(n);for(let r of e.flush())yield JSON.parse(r)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,r){if(!e.body)throw r.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wn("Attempted to iterate over a response with no body");return new t(Cq(e.body),r)}};f();var cM=class extends El{static{a(this,"Batches")}create(e,r){let{betas:n,...o}=e;return this._client.post("/v1/messages/batches?beta=true",{body:o,...r,headers:zo([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(rf`/v1/messages/batches/${e}?beta=true`,{...n,headers:zo([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",ug,{query:o,...r,headers:zo([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}delete(e,r={},n){let{betas:o}=r??{};return this._client.delete(rf`/v1/messages/batches/${e}?beta=true`,{...n,headers:zo([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},n?.headers])})}cancel(e,r={},n){let{betas:o}=r??{};return this._client.post(rf`/v1/messages/batches/${e}/cancel?beta=true`,{...n,headers:zo([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},n?.headers])})}async results(e,r={},n){let o=await this.retrieve(e);if(!o.results_url)throw new wn(`No batch \`results_url\`; Has it finished processing? ${o.processing_status} - ${o.id}`);let{betas:s}=r??{};return this._client.get(o.results_url,{...n,headers:zo([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((c,l)=>aM.fromResponse(l.response,l.controller))}};f();f();f();var xAr=a(t=>{let e=0,r=[];for(;e<t.length;){let n=t[e];if(n==="\\"){e++;continue}if(n==="{"){r.push({type:"brace",value:"{"}),e++;continue}if(n==="}"){r.push({type:"brace",value:"}"}),e++;continue}if(n==="["){r.push({type:"paren",value:"["}),e++;continue}if(n==="]"){r.push({type:"paren",value:"]"}),e++;continue}if(n===":"){r.push({type:"separator",value:":"}),e++;continue}if(n===","){r.push({type:"delimiter",value:","}),e++;continue}if(n==='"'){let l="",u=!1;for(n=t[++e];n!=='"';){if(e===t.length){u=!0;break}if(n==="\\"){if(e++,e===t.length){u=!0;break}l+=n+t[e],n=t[++e]}else l+=n,n=t[++e]}n=t[++e],u||r.push({type:"string",value:l});continue}if(n&&/\s/.test(n)){e++;continue}let s=/[0-9]/;if(n&&s.test(n)||n==="-"||n==="."){let l="";for(n==="-"&&(l+=n,n=t[++e]);n&&s.test(n)||n===".";)l+=n,n=t[++e];r.push({type:"number",value:l});continue}let c=/[a-z]/i;if(n&&c.test(n)){let l="";for(;n&&c.test(n)&&e!==t.length;)l+=n,n=t[++e];if(l=="true"||l=="false"||l==="null")r.push({type:"name",value:l});else{e++;continue}continue}e++}return r},"tokenize"),lM=a(t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),lM(t);break;case"number":let r=e.value[e.value.length-1];if(r==="."||r==="-")return t=t.slice(0,t.length-1),lM(t);case"string":let n=t[t.length-2];if(n?.type==="delimiter")return t=t.slice(0,t.length-1),lM(t);if(n?.type==="brace"&&n.value==="{")return t=t.slice(0,t.length-1),lM(t);break;case"delimiter":return t=t.slice(0,t.length-1),lM(t);break}return t},"strip"),EAr=a(t=>{let e=[];return t.map(r=>{r.type==="brace"&&(r.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),r.type==="paren"&&(r.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(r=>{r==="}"?t.push({type:"brace",value:"}"}):r==="]"&&t.push({type:"paren",value:"]"})}),t},"unstrip"),bAr=a(t=>{let e="";return t.map(r=>{switch(r.type){case"string":e+='"'+r.value+'"';break;default:e+=r.value;break}}),e},"generate"),lse=a(t=>JSON.parse(bAr(EAr(lM(xAr(t))))),"partialParse");var dg,g_,wq,use,_q,Sq,dse,Rq,DE,kq,fse,pse,uM,mse,hse,sRe,smt,gse,aRe,cRe,lRe,amt,cmt="__json_buf";function lmt(t){return t.type==="tool_use"||t.type==="server_tool_use"||t.type==="mcp_tool_use"}a(lmt,"tracksToolInput");var Ase=class t{static{a(this,"BetaMessageStream")}constructor(){dg.add(this),this.messages=[],this.receivedMessages=[],g_.set(this,void 0),this.controller=new AbortController,wq.set(this,void 0),use.set(this,()=>{}),_q.set(this,()=>{}),Sq.set(this,void 0),dse.set(this,()=>{}),Rq.set(this,()=>{}),DE.set(this,{}),kq.set(this,!1),fse.set(this,!1),pse.set(this,!1),uM.set(this,!1),mse.set(this,void 0),hse.set(this,void 0),gse.set(this,e=>{if(Rn(this,fse,!0,"f"),RE(e)&&(e=new md),e instanceof md)return Rn(this,pse,!0,"f"),this._emit("abort",e);if(e instanceof wn)return this._emit("error",e);if(e instanceof Error){let r=new wn(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new wn(String(e)))}),Rn(this,wq,new Promise((e,r)=>{Rn(this,use,e,"f"),Rn(this,_q,r,"f")}),"f"),Rn(this,Sq,new Promise((e,r)=>{Rn(this,dse,e,"f"),Rn(this,Rq,r,"f")}),"f"),kt(this,wq,"f").catch(()=>{}),kt(this,Sq,"f").catch(()=>{})}get response(){return kt(this,mse,"f")}get request_id(){return kt(this,hse,"f")}async withResponse(){let e=await kt(this,wq,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let o=new t;for(let s of r.messages)o._addMessageParam(s);return o._run(()=>o._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},kt(this,gse,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let o=n?.signal,s;o&&(o.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),o.addEventListener("abort",s));try{kt(this,dg,"m",aRe).call(this);let{response:c,data:l}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(c);for await(let u of l)kt(this,dg,"m",cRe).call(this,u);if(l.controller.signal?.aborted)throw new md;kt(this,dg,"m",lRe).call(this)}finally{o&&s&&o.removeEventListener("abort",s)}}_connected(e){this.ended||(Rn(this,mse,e,"f"),Rn(this,hse,e?.headers.get("request-id"),"f"),kt(this,use,"f").call(this,e),this._emit("connect"))}get ended(){return kt(this,kq,"f")}get errored(){return kt(this,fse,"f")}get aborted(){return kt(this,pse,"f")}abort(){this.controller.abort()}on(e,r){return(kt(this,DE,"f")[e]||(kt(this,DE,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=kt(this,DE,"f")[e];if(!n)return this;let o=n.findIndex(s=>s.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(kt(this,DE,"f")[e]||(kt(this,DE,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Rn(this,uM,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Rn(this,uM,!0,"f"),await kt(this,Sq,"f")}get currentMessage(){return kt(this,g_,"f")}async finalMessage(){return await this.done(),kt(this,dg,"m",sRe).call(this)}async finalText(){return await this.done(),kt(this,dg,"m",smt).call(this)}_emit(e,...r){if(kt(this,kq,"f"))return;e==="end"&&(Rn(this,kq,!0,"f"),kt(this,dse,"f").call(this));let n=kt(this,DE,"f")[e];if(n&&(kt(this,DE,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!kt(this,uM,"f")&&!n?.length&&Promise.reject(o),kt(this,_q,"f").call(this,o),kt(this,Rq,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!kt(this,uM,"f")&&!n?.length&&Promise.reject(o),kt(this,_q,"f").call(this,o),kt(this,Rq,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",kt(this,dg,"m",sRe).call(this))}async _fromReadableStream(e,r){let n=r?.signal,o;n&&(n.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),n.addEventListener("abort",o));try{kt(this,dg,"m",aRe).call(this),this._connected(null);let s=j1.fromReadableStream(e,this.controller);for await(let c of s)kt(this,dg,"m",cRe).call(this,c);if(s.controller.signal?.aborted)throw new md;kt(this,dg,"m",lRe).call(this)}finally{n&&o&&n.removeEventListener("abort",o)}}[(g_=new WeakMap,wq=new WeakMap,use=new WeakMap,_q=new WeakMap,Sq=new WeakMap,dse=new WeakMap,Rq=new WeakMap,DE=new WeakMap,kq=new WeakMap,fse=new WeakMap,pse=new WeakMap,uM=new WeakMap,mse=new WeakMap,hse=new WeakMap,gse=new WeakMap,dg=new WeakSet,sRe=a(function(){if(this.receivedMessages.length===0)throw new wn("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},"_BetaMessageStream_getFinalMessage"),smt=a(function(){if(this.receivedMessages.length===0)throw new wn("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new wn("stream ended without producing a content block with type=text");return r.join(" ")},"_BetaMessageStream_getFinalText"),aRe=a(function(){this.ended||Rn(this,g_,void 0,"f")},"_BetaMessageStream_beginRequest"),cRe=a(function(r){if(this.ended)return;let n=kt(this,dg,"m",amt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let o=n.content.at(-1);switch(r.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",r.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",r.delta.citation,o.citations??[]);break}case"input_json_delta":{lmt(o)&&o.input&&this._emit("inputJson",r.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",r.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Rn(this,g_,n,"f");break}case"content_block_start":case"message_delta":break}},"_BetaMessageStream_addStreamEvent"),lRe=a(function(){if(this.ended)throw new wn("stream has ended, this shouldn't happen");let r=kt(this,g_,"f");if(!r)throw new wn("request ended without sending any chunks");return Rn(this,g_,void 0,"f"),r},"_BetaMessageStream_endRequest"),amt=a(function(r){let n=kt(this,g_,"f");if(r.type==="message_start"){if(n)throw new wn(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new wn(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.container=r.delta.container,n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{let o=n.content.at(r.index);switch(r.delta.type){case"text_delta":{o?.type==="text"&&(n.content[r.index]={...o,text:(o.text||"")+r.delta.text});break}case"citations_delta":{o?.type==="text"&&(n.content[r.index]={...o,citations:[...o.citations??[],r.delta.citation]});break}case"input_json_delta":{if(o&&lmt(o)){let s=o[cmt]||"";s+=r.delta.partial_json;let c={...o};if(Object.defineProperty(c,cmt,{value:s,enumerable:!1,writable:!0}),s)try{c.input=lse(s)}catch(l){let u=new wn(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${l}. JSON: ${s}`);kt(this,gse,"f").call(this,u)}n.content[r.index]=c}break}case"thinking_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,thinking:o.thinking+r.delta.thinking});break}case"signature_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},"_BetaMessageStream_accumulateMessage"),Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",o=>{let s=r.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),{next:a(async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,c)=>r.push({resolve:s,reject:c})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),"next"),return:a(async()=>(this.abort(),{value:void 0,done:!0}),"return")}}toReadableStream(){return new j1(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};f();var yse={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192};var umt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"},AP=class extends El{static{a(this,"Messages")}constructor(){super(...arguments),this.batches=new cM(this._client)}create(e,r){let{betas:n,...o}=e;o.model in umt&&console.warn(`The model '${o.model}' is deprecated and will reach end-of-life on ${umt[o.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!o.stream&&s==null){let c=yse[o.model]??void 0;s=this._client.calculateNonstreamingTimeout(o.max_tokens,c)}return this._client.post("/v1/messages?beta=true",{body:o,timeout:s??6e5,...r,headers:zo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}stream(e,r){return Ase.createMessage(this,e,r)}countTokens(e,r){let{betas:n,...o}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:o,...r,headers:zo([{"anthropic-beta":[...n??[],"token-counting-2024-11-01"].toString()},r?.headers])})}};AP.Batches=cM;var G1=class extends El{static{a(this,"Beta")}constructor(){super(...arguments),this.models=new sM(this._client),this.messages=new AP(this._client),this.files=new oM(this._client)}};G1.Models=sM;G1.Messages=AP;G1.Files=oM;f();var yP=class extends El{static{a(this,"Completions")}create(e,r){let{betas:n,...o}=e;return this._client.post("/v1/complete",{body:o,timeout:this._client._options.timeout??6e5,...r,headers:zo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}};f();f();var fg,A_,Pq,Cse,Dq,Bq,vse,Nq,BE,Mq,xse,Ese,dM,bse,Ise,uRe,dmt,dRe,fRe,pRe,mRe,fmt,pmt="__json_buf";function mmt(t){return t.type==="tool_use"||t.type==="server_tool_use"}a(mmt,"tracksToolInput");var Tse=class t{static{a(this,"MessageStream")}constructor(){fg.add(this),this.messages=[],this.receivedMessages=[],A_.set(this,void 0),this.controller=new AbortController,Pq.set(this,void 0),Cse.set(this,()=>{}),Dq.set(this,()=>{}),Bq.set(this,void 0),vse.set(this,()=>{}),Nq.set(this,()=>{}),BE.set(this,{}),Mq.set(this,!1),xse.set(this,!1),Ese.set(this,!1),dM.set(this,!1),bse.set(this,void 0),Ise.set(this,void 0),dRe.set(this,e=>{if(Rn(this,xse,!0,"f"),RE(e)&&(e=new md),e instanceof md)return Rn(this,Ese,!0,"f"),this._emit("abort",e);if(e instanceof wn)return this._emit("error",e);if(e instanceof Error){let r=new wn(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new wn(String(e)))}),Rn(this,Pq,new Promise((e,r)=>{Rn(this,Cse,e,"f"),Rn(this,Dq,r,"f")}),"f"),Rn(this,Bq,new Promise((e,r)=>{Rn(this,vse,e,"f"),Rn(this,Nq,r,"f")}),"f"),kt(this,Pq,"f").catch(()=>{}),kt(this,Bq,"f").catch(()=>{})}get response(){return kt(this,bse,"f")}get request_id(){return kt(this,Ise,"f")}async withResponse(){let e=await kt(this,Pq,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let o=new t;for(let s of r.messages)o._addMessageParam(s);return o._run(()=>o._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},kt(this,dRe,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let o=n?.signal,s;o&&(o.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),o.addEventListener("abort",s));try{kt(this,fg,"m",fRe).call(this);let{response:c,data:l}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(c);for await(let u of l)kt(this,fg,"m",pRe).call(this,u);if(l.controller.signal?.aborted)throw new md;kt(this,fg,"m",mRe).call(this)}finally{o&&s&&o.removeEventListener("abort",s)}}_connected(e){this.ended||(Rn(this,bse,e,"f"),Rn(this,Ise,e?.headers.get("request-id"),"f"),kt(this,Cse,"f").call(this,e),this._emit("connect"))}get ended(){return kt(this,Mq,"f")}get errored(){return kt(this,xse,"f")}get aborted(){return kt(this,Ese,"f")}abort(){this.controller.abort()}on(e,r){return(kt(this,BE,"f")[e]||(kt(this,BE,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=kt(this,BE,"f")[e];if(!n)return this;let o=n.findIndex(s=>s.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(kt(this,BE,"f")[e]||(kt(this,BE,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Rn(this,dM,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Rn(this,dM,!0,"f"),await kt(this,Bq,"f")}get currentMessage(){return kt(this,A_,"f")}async finalMessage(){return await this.done(),kt(this,fg,"m",uRe).call(this)}async finalText(){return await this.done(),kt(this,fg,"m",dmt).call(this)}_emit(e,...r){if(kt(this,Mq,"f"))return;e==="end"&&(Rn(this,Mq,!0,"f"),kt(this,vse,"f").call(this));let n=kt(this,BE,"f")[e];if(n&&(kt(this,BE,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!kt(this,dM,"f")&&!n?.length&&Promise.reject(o),kt(this,Dq,"f").call(this,o),kt(this,Nq,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!kt(this,dM,"f")&&!n?.length&&Promise.reject(o),kt(this,Dq,"f").call(this,o),kt(this,Nq,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",kt(this,fg,"m",uRe).call(this))}async _fromReadableStream(e,r){let n=r?.signal,o;n&&(n.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),n.addEventListener("abort",o));try{kt(this,fg,"m",fRe).call(this),this._connected(null);let s=j1.fromReadableStream(e,this.controller);for await(let c of s)kt(this,fg,"m",pRe).call(this,c);if(s.controller.signal?.aborted)throw new md;kt(this,fg,"m",mRe).call(this)}finally{n&&o&&n.removeEventListener("abort",o)}}[(A_=new WeakMap,Pq=new WeakMap,Cse=new WeakMap,Dq=new WeakMap,Bq=new WeakMap,vse=new WeakMap,Nq=new WeakMap,BE=new WeakMap,Mq=new WeakMap,xse=new WeakMap,Ese=new WeakMap,dM=new WeakMap,bse=new WeakMap,Ise=new WeakMap,dRe=new WeakMap,fg=new WeakSet,uRe=a(function(){if(this.receivedMessages.length===0)throw new wn("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},"_MessageStream_getFinalMessage"),dmt=a(function(){if(this.receivedMessages.length===0)throw new wn("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new wn("stream ended without producing a content block with type=text");return r.join(" ")},"_MessageStream_getFinalText"),fRe=a(function(){this.ended||Rn(this,A_,void 0,"f")},"_MessageStream_beginRequest"),pRe=a(function(r){if(this.ended)return;let n=kt(this,fg,"m",fmt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let o=n.content.at(-1);switch(r.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",r.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",r.delta.citation,o.citations??[]);break}case"input_json_delta":{mmt(o)&&o.input&&this._emit("inputJson",r.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",r.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Rn(this,A_,n,"f");break}case"content_block_start":case"message_delta":break}},"_MessageStream_addStreamEvent"),mRe=a(function(){if(this.ended)throw new wn("stream has ended, this shouldn't happen");let r=kt(this,A_,"f");if(!r)throw new wn("request ended without sending any chunks");return Rn(this,A_,void 0,"f"),r},"_MessageStream_endRequest"),fmt=a(function(r){let n=kt(this,A_,"f");if(r.type==="message_start"){if(n)throw new wn(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new wn(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push({...r.content_block}),n;case"content_block_delta":{let o=n.content.at(r.index);switch(r.delta.type){case"text_delta":{o?.type==="text"&&(n.content[r.index]={...o,text:(o.text||"")+r.delta.text});break}case"citations_delta":{o?.type==="text"&&(n.content[r.index]={...o,citations:[...o.citations??[],r.delta.citation]});break}case"input_json_delta":{if(o&&mmt(o)){let s=o[pmt]||"";s+=r.delta.partial_json;let c={...o};Object.defineProperty(c,pmt,{value:s,enumerable:!1,writable:!0}),s&&(c.input=lse(s)),n.content[r.index]=c}break}case"thinking_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,thinking:o.thinking+r.delta.thinking});break}case"signature_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},"_MessageStream_accumulateMessage"),Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",o=>{let s=r.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),{next:a(async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,c)=>r.push({resolve:s,reject:c})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),"next"),return:a(async()=>(this.abort(),{value:void 0,done:!0}),"return")}}toReadableStream(){return new j1(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};f();var fM=class extends El{static{a(this,"Batches")}create(e,r){return this._client.post("/v1/messages/batches",{body:e,...r})}retrieve(e,r){return this._client.get(rf`/v1/messages/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/v1/messages/batches",ug,{query:e,...r})}delete(e,r){return this._client.delete(rf`/v1/messages/batches/${e}`,r)}cancel(e,r){return this._client.post(rf`/v1/messages/batches/${e}/cancel`,r)}async results(e,r){let n=await this.retrieve(e);if(!n.results_url)throw new wn(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);return this._client.get(n.results_url,{...r,headers:zo([{Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((o,s)=>aM.fromResponse(s.response,s.controller))}};var y_=class extends El{static{a(this,"Messages")}constructor(){super(...arguments),this.batches=new fM(this._client)}create(e,r){e.model in hmt&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${hmt[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!e.stream&&n==null){let o=yse[e.model]??void 0;n=this._client.calculateNonstreamingTimeout(e.max_tokens,o)}return this._client.post("/v1/messages",{body:e,timeout:n??6e5,...r,stream:e.stream??!1})}stream(e,r){return Tse.createMessage(this,e,r)}countTokens(e,r){return this._client.post("/v1/messages/count_tokens",{body:e,...r})}},hmt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};y_.Batches=fM;f();var CP=class extends El{static{a(this,"Models")}retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(rf`/v1/models/${e}`,{...n,headers:zo([{...o?.toString()!=null?{"anthropic-beta":o?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/models",ug,{query:o,...r,headers:zo([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};f();var Lq=a(t=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()},"readEnv");var hRe,gRe,wse,gmt,oc=class{static{a(this,"BaseAnthropic")}constructor({baseURL:e=Lq("ANTHROPIC_BASE_URL"),apiKey:r=Lq("ANTHROPIC_API_KEY")??null,authToken:n=Lq("ANTHROPIC_AUTH_TOKEN")??null,...o}={}){hRe.add(this),wse.set(this,void 0);let s={apiKey:r,authToken:n,...o,baseURL:e||"https://api.anthropic.com"};if(!s.dangerouslyAllowBrowser&&W0t())throw new wn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=s.baseURL,this.timeout=s.timeout??gRe.DEFAULT_TIMEOUT,this.logger=s.logger??console;let c="warn";this.logLevel=c,this.logLevel=X2e(s.logLevel,"ClientOptions.logLevel",this)??X2e(Lq("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??c,this.fetchOptions=s.fetchOptions,this.maxRetries=s.maxRetries??2,this.fetch=s.fetch??G0t(),Rn(this,wse,z0t,"f"),this._options=s,this.apiKey=r,this.authToken=n}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(this.apiKey&&e.get("x-api-key"))&&!r.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!r.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){return zo([this.apiKeyAuth(e),this.bearerAuth(e)])}apiKeyAuth(e){if(this.apiKey!=null)return zo([{"X-Api-Key":this.apiKey}])}bearerAuth(e){if(this.authToken!=null)return zo([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new wn(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${h_}`}defaultIdempotencyKey(){return`stainless-node-retry-${G2e()}`}makeStatusError(e,r,n,o){return wu.generate(e,r,n,o)}buildURL(e,r,n){let o=!kt(this,hRe,"m",gmt).call(this)&&n||this.baseURL,s=L0t(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return F0t(c)||(r={...c,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(s.search=this.stringifyQuery(r)),s.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new wn("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(o=>({method:e,path:r,...o})))}request(e,r=null){return new hP(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){let o=await e,s=o.maxRetries??this.maxRetries;r==null&&(r=s),await this.prepareOptions(o);let{req:c,url:l,timeout:u}=this.buildRequest(o,{retryCount:s-r});await this.prepareRequest(c,{url:l,options:o});let d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=n===void 0?"":`, retryOf: ${n}`,m=Date.now();if(_u(this).debug(`[${d}] sending request`,PE({retryOfRequestLogID:n,method:o.method,url:l,options:o,headers:c.headers})),o.signal?.aborted)throw new md;let h=new AbortController,g=await this.fetchWithTimeout(l,c,u,h).catch(yq),A=Date.now();if(g instanceof Error){let b=`retrying, ${r} attempts remaining`;if(o.signal?.aborted)throw new md;let I=RE(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(r)return _u(this).info(`[${d}] connection ${I?"timed out":"failed"} - ${b}`),_u(this).debug(`[${d}] connection ${I?"timed out":"failed"} (${b})`,PE({retryOfRequestLogID:n,url:l,durationMs:A-m,message:g.message})),this.retryRequest(o,r,n??d);throw _u(this).info(`[${d}] connection ${I?"timed out":"failed"} - error; no more retries left`),_u(this).debug(`[${d}] connection ${I?"timed out":"failed"} (error; no more retries left)`,PE({retryOfRequestLogID:n,url:l,durationMs:A-m,message:g.message})),I?new Y8:new m_({cause:g})}let y=[...g.headers.entries()].filter(([b])=>b==="request-id").map(([b,I])=>", "+b+": "+JSON.stringify(I)).join(""),v=`[${d}${p}${y}] ${c.method} ${l} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${A-m}ms`;if(!g.ok){let b=this.shouldRetry(g);if(r&&b){let O=`retrying, ${r} attempts remaining`;return await V0t(g.body),_u(this).info(`${v} - ${O}`),_u(this).debug(`[${d}] response error (${O})`,PE({retryOfRequestLogID:n,url:g.url,status:g.status,headers:g.headers,durationMs:A-m})),this.retryRequest(o,r,n??d,g.headers)}let I=b?"error; no more retries left":"error; not retryable";_u(this).info(`${v} - ${I}`);let S=await g.text().catch(O=>yq(O).message),k=rse(S),N=k?void 0:S;throw _u(this).debug(`[${d}] response error (${I})`,PE({retryOfRequestLogID:n,url:g.url,status:g.status,headers:g.headers,message:N,durationMs:Date.now()-m})),this.makeStatusError(g.status,k,N,g.headers)}return _u(this).info(v),_u(this).debug(`[${d}] response start`,PE({retryOfRequestLogID:n,url:g.url,status:g.status,headers:g.headers,durationMs:A-m})),{response:g,options:o,controller:h,requestLogID:d,retryOfRequestLogID:n,startTime:m}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){let n=this.makeRequest(r,null,void 0);return new Iq(this,n,e)}async fetchWithTimeout(e,r,n,o){let{signal:s,method:c,...l}=r||{};s&&s.addEventListener("abort",()=>o.abort());let u=setTimeout(()=>o.abort(),n),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,p={signal:o.signal,...d?{duplex:"half"}:{},method:"GET",...l};c&&(p.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(u)}}shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,o){let s,c=o?.get("retry-after-ms");if(c){let u=parseFloat(c);Number.isNaN(u)||(s=u)}let l=o?.get("retry-after");if(l&&!s){let u=parseFloat(l);Number.isNaN(u)?s=Date.parse(l)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){let u=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,u)}return await U0t(s),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){let s=r-e,c=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return c*l*1e3}calculateNonstreamingTimeout(e,r){if(36e5*e/128e3>6e5||r!=null&&e>r)throw new wn("Streaming is strongly recommended for operations that may token longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}buildRequest(e,{retryCount:r=0}={}){let n={...e},{method:o,path:s,query:c,defaultBaseURL:l}=n,u=this.buildURL(s,c,l);"timeout"in n&&Q0t("timeout",n.timeout),n.timeout=n.timeout??this.timeout;let{bodyHeaders:d,body:p}=this.buildBody({options:n}),m=this.buildHeaders({options:e,method:o,bodyHeaders:d,retryCount:r});return{req:{method:o,headers:m,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"},...p&&{body:p},...this.fetchOptions??{},...n.fetchOptions??{}},url:u,timeout:n.timeout}}buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:o}){let s={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let c=zo([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...j0t(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=zo([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:nse(e)}:kt(this,wse,"f").call(this,{body:e,headers:n})}};gRe=oc,wse=new WeakMap,hRe=new WeakSet,gmt=a(function(){return this.baseURL!=="https://api.anthropic.com"},"_BaseAnthropic_baseURLOverridden");oc.Anthropic=gRe;oc.HUMAN_PROMPT=`

Human:`;oc.AI_PROMPT=`

Assistant:`;oc.DEFAULT_TIMEOUT=6e5;oc.AnthropicError=wn;oc.APIError=wu;oc.APIConnectionError=m_;oc.APIConnectionTimeoutError=Y8;oc.APIUserAbortError=md;oc.NotFoundError=eM;oc.ConflictError=tM;oc.RateLimitError=nM;oc.BadRequestError=J8;oc.AuthenticationError=X8;oc.InternalServerError=iM;oc.PermissionDeniedError=Z8;oc.UnprocessableEntityError=rM;oc.toFile=cse;var xy=class extends oc{static{a(this,"Anthropic")}constructor(){super(...arguments),this.completions=new yP(this),this.messages=new y_(this),this.models=new CP(this),this.beta=new G1(this)}};xy.Completions=yP;xy.Messages=y_;xy.Models=CP;xy.Beta=G1;var{HUMAN_PROMPT:_Ar,AI_PROMPT:SAr}=xy;var _se=class extends eg{static{a(this,"AnthropicProvider")}constructor(e){super(Mo.Anthropic,e)}async getAllModels(){await this.ensureKnownModelsCache();let e=await new ha(this.ctx.get(mi)).getAPIKey(this.providerName);if(!e)throw new Error(`API key not found for provider: ${this.providerName}`);let r=new xy({apiKey:e,fetch:RAr(this.ctx.get(Qr))});try{let n=await r.models.list(),o=[];for(let s of n.data){let c=this._knownModels?.[s.id];c&&o.push({providerName:this.providerName,modelId:s.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:c})}return o}catch(n){throw dU.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,n),n}}};function RAr(t){return async(e,r)=>{let n=kAr(e,r),o=DAr(r),s=await t.fetch(n,o);return NAr(s)}}a(RAr,"createAnthropicFetchAdapter");function kAr(t,e){return t instanceof Request?(PAr(t,e),t.url):t instanceof URL?t.toString():t}a(kAr,"convertInputToString");function PAr(t,e){e&&(e.headers??=t.headers,e.method??=t.method,!e.body&&!t.bodyUsed&&(e.body=t.body))}a(PAr,"mergeRequestInit");function DAr(t){let e;return t?.headers&&(e=BAr(t.headers)),{method:t?.method||"GET",headers:e,body:t?.body,signal:t?.signal||void 0}}a(DAr,"convertToFetchOptions");function BAr(t){let e={};if(t instanceof Headers)for(let[r,n]of t.entries())e[r]=n;else if(Array.isArray(t))for(let[r,n]of t)e[r]=n;else return t;return e}a(BAr,"convertHeaders");async function NAr(t){let e=t.body(),r=null;if(e)r=MAr(e);else{let n=await t.text();r=FAr(n)}return new globalThis.Response(r,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)})}a(NAr,"convertToWebResponse");function MAr(t){return new ReadableStream({start(e){let r=LAr(t,e);return()=>r()},cancel(){"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}})}a(MAr,"createReadableStreamFromNodeStream");function LAr(t,e){let r=a(c=>{e.enqueue(new Uint8Array(c))},"onData"),n=a(()=>{e.close(),s()},"onEnd"),o=a(c=>{e.error(c),s()},"onError"),s=a(()=>{t.off("data",r),t.off("end",n),t.off("error",o)},"cleanup");return t.on("data",r),t.on("end",n),t.on("error",o),s}a(LAr,"setupStreamHandlers");function FAr(t){return new ReadableStream({start(e){e.enqueue(new TextEncoder().encode(t)),e.close()}})}a(FAr,"createReadableStreamFromText");f();var Sse=class extends eg{static{a(this,"GeminiProvider")}constructor(e){super(Mo.Gemini,e)}};f();var Rse=class extends eg{static{a(this,"GroqProvider")}constructor(e){super(Mo.Groq,e)}};f();var kse=class extends eg{static{a(this,"OpenAIProvider")}constructor(e){super(Mo.OpenAI,e)}};f();var Amt=16e3,Pse=class extends eg{static{a(this,"OpenRouterProvider")}constructor(e){super(Mo.OpenRouter,e)}async getAllModels(){try{let e=this.getFetchModelUrl(),r={"Content-Type":"application/json"},n=await new ha(this.ctx.get(mi)).getAPIKey(this.providerName);n&&(r.Authorization=`Bearer ${n}`);let o=await this.ctx.get(Qr).fetch(e,{method:"GET",headers:r});if(!o.ok)throw new Error(`Failed to fetch models: ${o.status} ${o.statusText}`);let s=await o.json();if(s.error)throw new Error(`API Error: ${JSON.stringify(s.error)}`);let c=[];for(let l of s.data)c.push({providerName:this.providerName,modelId:l.id,isRegistered:!1,isCustomModel:!1,modelCapabilities:{name:l.name,maxInputTokens:Math.max(0,l.top_provider.context_length-Amt),maxOutputTokens:Amt,toolCalling:l.supported_parameters?.includes("tools")??!1,vision:l.architecture?.input_modalities?.includes("image")??!1}});return c}catch(e){throw dU.error(this.ctx,`Error fetching models from ${this.providerName} provider:`,e),e}}getFetchModelUrl(){return`${this.getBaseUrl()}/models?supported_parameters=tools`}};var vP=class{static{a(this,"BYOKProviderFactory")}constructor(e){this.providers=new Map([[Mo.OpenAI,new kse(e)],[Mo.Gemini,new Sse(e)],[Mo.Groq,new Rse(e)],[Mo.OpenRouter,new Pse(e)],[Mo.Anthropic,new _se(e)]])}getBYOKProvider(e){return this.providers.get(e)}};var OAr=E.Object({providerName:E.Optional(E.String()),enableFetchUrl:E.Optional(E.Boolean())});async function QAr(t,e,r){try{let{providerName:n,enableFetchUrl:o}=r,s=new ha(t.get(mi)),c=[];if(n)if(o){if(!Ene(n))return[null,{code:rr.InvalidRequest,message:`enableFetchUrl is not supported for the ${n} provider`}];if(!await s.getAPIKey(n))return[null,{code:rr.InvalidRequest,message:`API key is required to fetch models from ${n}`}];let u=t.get(vP).getBYOKProvider(n);if(u){let d=await u.getAllModels(),p=new Map;d.forEach(g=>{let A=`${g.providerName}_${g.modelId}`;p.set(A,g)});let m=await s.getStoredModelConfigs(n),h=[];Object.entries(m).forEach(([g,A])=>{h.push({providerName:n,modelId:g,deploymentUrl:A.deploymentUrl,isRegistered:A.isRegistered,isCustomModel:A.isCustomModel,modelCapabilities:A.modelCapabilities})}),h.forEach(g=>{let A=`${g.providerName}_${g.modelId}`;p.set(A,g)}),c.push(...p.values())}}else{let l=await s.getStoredModelConfigs(n);Object.entries(l).forEach(([u,d])=>{c.push({providerName:n,modelId:u,deploymentUrl:d.deploymentUrl,isRegistered:d.isRegistered,isCustomModel:d.isCustomModel,modelCapabilities:d.modelCapabilities})})}else{let l=Object.values(Mo);for(let u of l){let d=await s.getStoredModelConfigs(u);Object.entries(d).forEach(([p,m])=>{c.push({providerName:u,modelId:p,deploymentUrl:m.deploymentUrl,isRegistered:m.isRegistered,isCustomModel:m.isCustomModel,modelCapabilities:m.modelCapabilities})})}}return[{models:c},null]}catch(n){return[null,{code:rr.InternalError,message:`Failed to get models: ${n instanceof Error?n.message:String(n)}`}]}}a(QAr,"handleBYOKListModelsChecked");var ymt=et(OAr,QAr);f();var UAr=E.Object({providerName:E.String(),apiKey:E.String(),modelId:E.Optional(E.String())});async function qAr(t,e,r){try{let n=new ha(t.get(mi)),{providerName:o,apiKey:s,modelId:c}=r,l=Mw(o);if(l===1&&!c)return[null,{code:rr.InvalidRequest,message:"modelId is required for PerModelDeployment auth type"}];await n.storeAPIKey(o,s,l,c);let u=`API key saved successfully for provider ${o}`;return[{success:!0,message:c?`${u} and model ${c}`:u},null]}catch(n){return[null,{code:rr.InternalError,message:`Failed to save API key: ${n instanceof Error?n.message:String(n)}`}]}}a(qAr,"handleBYOKSaveApiKeyChecked");var Cmt=et(UAr,qAr);f();var HAr=E.Object({providerName:E.String(),modelId:E.String(),isRegistered:E.Boolean(),isCustomModel:E.Boolean(),deploymentUrl:E.Optional(E.String()),apiKey:E.Optional(E.String()),modelCapabilities:E.Optional(E.Object({name:E.String(),maxInputTokens:E.Optional(E.Number()),maxOutputTokens:E.Optional(E.Number()),toolCalling:E.Boolean(),vision:E.Boolean()}))});async function $Ar(t,e,r){try{let{providerName:n,modelId:o,isRegistered:s,isCustomModel:c,deploymentUrl:l,apiKey:u,modelCapabilities:d}=r,p=new ha(t.get(mi)),m=Mw(n);if(m===1&&!l)return[null,{code:rr.InvalidRequest,message:`deploymentUrl is required for the ${n} provider`}];if(l||d){let h={deploymentUrl:l,isRegistered:s,isCustomModel:c,modelCapabilities:d};await p.saveModelConfig(n,o,h,u,m)}else u!==void 0&&await p.storeAPIKey(n,u,m,o);return[{success:!0,message:`Model ${o} saved successfully for provider ${n}`},null]}catch(n){return[null,{code:rr.InternalError,message:`Failed to save model: ${n instanceof Error?n.message:String(n)}`}]}}a($Ar,"handleBYOKSaveModelChecked");var vmt=et(HAr,$Ar);f();var WAr=E.Object({uri:E.String({minLength:1})});async function jAr(t,e,r){let n=await t.get(In).getOrReadTextDocument(r);return[{status:ua(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}a(jAr,"handleCheckFileStatusChecked");var xmt=et(WAr,jAr);f();var GAr=E.Object({});function Emt(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}a(Emt,"calculatePercentRemaining");async function VAr(t,e,r){let n=await t.get(Mi).getSession();if(n){let o=await Ume(t,n);if(o.ok){let s=await o.json();return s.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:Emt(s.limited_user_quotas?.chat,s.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:Emt(s.limited_user_quotas?.completions,s.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:s.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:s.quota_snapshots?.chat?.percent_remaining??100,unlimited:s.quota_snapshots?.chat?.unlimited??!1,overagePermitted:s.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:s.quota_snapshots?.completions?.percent_remaining??100,unlimited:s.quota_snapshots?.completions?.unlimited??!1,overagePermitted:s.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:s.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:s.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:s.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:s.quota_reset_date??"",copilotPlan:s.copilot_plan},null]}return[null,{code:rr.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:rr.InternalError,message:"Not signed in"}]}a(VAr,"handleCheckQuotaChecked");var bmt=et(GAr,VAr);f();var zAr=E.Object({options:E.Optional(E.Object({localChecksOnly:E.Optional(E.Boolean()),forceRefresh:E.Optional(E.Boolean())}))});async function KAr(t,e,r){return[await t.get(Mi).checkAndUpdateStatus(r.options),null]}a(KAr,"handleCheckStatusChecked");var Imt=et(zAr,KAr);f();f();f();f();f();var xP={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var Ls=class{constructor(e){this.ctx=e;this.progressEntries=new Sr(250)}static{a(this,"ConversationProgress")}async begin(e,r,n){let o={status:"open",handler:n};this.progressEntries.set(e.id,o),await o.handler.begin(this.ctx,e,r)}async report(e,r,n){let o=this.getProgressEntry(e);o.status==="open"&&await o.handler.report(this.ctx,e,r,n)}async end(e,r,n){let o=this.getProgressEntry(e);o.status==="open"&&(this.progressEntries.set(e.id,{...o,status:"done",updatedAt:Date.now()}),await o.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let o=this.getProgressEntry(e);o.status==="open"&&(this.progressEntries.set(e.id,{...o,status:"cancelled",updatedAt:Date.now()}),await o.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Rr.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};f();f();f();var bl=class{static{a(this,"ConversationInspector")}};f();f();f();function Bse(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}a(Bse,"toChatModeEnum");var C_=class{constructor(e,r){this.request=e;this.telemetryId=Ir();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this._metadata=new Map;this.id=r??this.telemetryId}static{a(this,"Turn")}getResolvedModelId(){return this.resolvedModelConfiguration?.modelId}getChatModeWithDefault(){return this.chatMode??"Ask"}extractContextFilesUri(){let e=[...(this.request.references??[]).filter(r=>r.type==="file").map(r=>r.uri).filter(Boolean),...this.request.activeEditor?.uri?[this.request.activeEditor.uri]:[]];return Array.from(new Set(e))}getMetadata(e){return this._metadata.get(e)?.at(-1)}getAllMetadata(e){return this._metadata.get(e)}setMetadata(e){let r=e.constructor,n=this._metadata.get(r)??[];n.push(e),this._metadata.set(r,n)}hasMetadata(e){let r=this._metadata.get(e);return r!==void 0&&r.length>0}},Dse=class t{constructor(e=[],r="panel",n="en",o){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=Ir();this._timestamp=Date.now();this.id=o??this.telemetryId}static{a(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};f();var $l=class{constructor(){this.skills=[]}static{a(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},ARe=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{a(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},yRe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{a(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},Su=class{constructor(e,r,n,o,s,c="explicit",l=[],u=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=o;this._processor=s;this.type=c;this._examples=l;this._isAvailable=u}static{a(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new ARe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new yRe(this._processor(e),this.id)}};f();f();f();var Tmt={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},wmt="Alright, This response contains a code citation.";f();var _mt=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var Rmt=Ne(Am());var V1=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{a(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let s=this.doc.getText(r),c=s.match(/^\n*/)?.[0].length??0,l=s.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+c),end:this.expandLineToEnd(r.end.line-l)}}let o=new Ht([(0,Rmt.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(o),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),o;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?o=n:o={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let s={start:r.start,end:o.start.line>0?this.expandLineToEnd(o.start.line-1):r.start},c={start:o.start,end:n.start.line>0&&n.start.line>o.start.line?this.expandLineToEnd(n.start.line-1):o.start},l={start:n.end.line<this.doc.lineCount-1&&n.end.line<o.end.line?this.getLineStart(n.end.line+1):o.end,end:o.end},u={start:o.end.line<this.doc.lineCount-1?this.getLineStart(o.end.line+1):r.end,end:r.end},d=[[s,.6],[c,.8],[n,1],[l,.4],[u,.2]],p=new Ht(d.filter(([m,h])=>!pM(m)||h===1).map(([m,h])=>{let g;return e.addLineNumbers?g=this.addLineNumbers(m):g=this.doc.getText(m),[h==1?g:H0(g),h]}));return this.wrapInTicks(p)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||pM(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Ht([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((s,c)=>`${(e.start.line+c+1).toString().padEnd(n," ")}:${s}`).join(`
`)}};function pM(t){return t.start.line==t.end.line&&t.start.character==t.end.character}a(pM,"isEmptyRange");var kmt=Ne(require("path"));var Pmt=E.Object({uri:E.String(),visibleRange:E.Optional(Hc),selection:E.Optional(Hc)}),CRe=class{constructor(e){this.turnContext=e}static{a(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(In),n=await r.getOrReadTextDocument(e),o=ua(n);if(await this.turnContext.collectFile(nf,e.uri,o),n.status==="valid"){let s=this.turnContext.conversation.source==="inline",c=new V1(n.document,e.selection,e.visibleRange),l=r.getRelativePath(n.document);if(o==="empty")return new Ht([`The currently open file \`${l}\` is empty.`]);let u=[[`Code excerpt from the currently open file \`${l}\`:`,1],[c.fromAllCode({addLineNumbers:s}),1]],d=[];if(c.selectionIsDocument())d=[["The user is selecting the entire file.",1]];else if(s){let[p,m]=c.fromSelectedCode({trimNewLines:!0}),h=m.start.line+1;if(pM(m))d=[[`The user is selecting line ${h}, which is empty.`,1]];else{let g=m.end.line+1;d=[["The user is selecting"+(h==g?` line ${h}:`:` lines ${h} to ${g} (inclusive):`),1],[p,1]]}}else c.selectionIsEmpty()||(d=[["The user is selecting this code:",1],[c.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Ht([...u,...d])}else if(n.status==="invalid")return new Ht([`The currently open file \`${kmt.basename(e.uri)}\` is content excluded.`])}},nf="current-editor",Nse=class{constructor(e){this._resolver=e;this.id=nf;this.type="explicit"}static{a(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new CRe(e)}};f();f();var Dmt=Ne(require("fs")),Wf=Ne(require("path"));var vRe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],xRe="test_",Oq={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},Qq=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{a(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Di(e),n=Wf.extname(r).replace(".",""),o=Oq[n]??{location:"sameFolder",prefix:xRe,suffix:vRe},s=[];if(o.prefix&&s.push(o.prefix+r),o.suffix)for(let d of o.suffix??[]){let p=r.replace(`.${n}`,d+"."+n);s.push(p)}let c=o.location??"sameFolder",l;if(c==="sameFolder"){if(l=rs(Rd(e)),l===void 0)return}else{let d=rs(e);if(d===void 0)return;l=this.determineTestFolder(d,c)}for(let d of s){let p=Wf.join(l,d),m=this.parseTestFilePath(p);if(m&&await this.fileExists(m))return m}let u=Dl(l);if(await this.fileExists(u))return Ki(u,s[0])}parseTestFilePath(e){try{return Dl(e)}catch(r){pn.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Di(e),n=Wf.extname(r).replace(".",""),o=Oq[n]??{location:"sameFolder",prefix:xRe,suffix:vRe},s=[];if(o.prefix&&s.push(r.substring(o.prefix.length)),o.suffix)for(let u of o.suffix??[]){let p=r.substring(0,r.length-u.length-1-n.length)+"."+n;s.push(p)}let c=o.location??"sameFolder",l;c==="sameFolder"?l=Rd(e):l=this.determineImplFolder(e);for(let u of s){let d=Ki(l,u);if(await this.fileExists(d))return d}}findExampleTestFile(e){let r=rs(e);if(r===void 0)return;let n=Wf.extname(Di(e)).replace(".",""),o,s=Oq[n]?.location??"sameFolder";s==="sameFolder"?o=Wf.dirname(r):o=this.determineTestFolder(r,s);let c=this.findFiles(o,`.${n}`,Oq[n]);if(c.length>0)return Dl(c[0])}findFiles(e,r,n){let o=this._readdir(e),s=[];for(let c of o){let l=`${e}${Wf.sep}${c}`;n?.prefix&&c.startsWith(n.prefix)&&s.push(l),n?.suffix&&n?.suffix.some(u=>c.endsWith(u+r))&&s.push(l)}return s}_readdir(e){return Dmt.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&rs(this.baseUri))??"",o=Wf.extname(e).replace(".",""),s=this.getRelativeTestFolder(e,n,o,r);return[n,...s].filter(c=>c).join(Wf.sep)}getRelativeTestFolder(e,r,n,o){let s=Wf.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",s];case"cs":return[s.replace("src","src/tests")];case"java":case"scala":case"kt":return[s.replace(/src[\\/]main/,"src/test")];default:return o==="testFolder"?[s.replace("src","test")]:[s]}}determineImplFolder(e){let r=Wf.extname(Di(e)).replace(".",""),n=Rd(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function Uq(t){let e=Di(t),r=Wf.extname(e),n=Oq[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(s=>e.endsWith(s+r))||n.prefix&&!e.startsWith(n.prefix)):!!(vRe.some(s=>e.endsWith(s+r))||e.startsWith(xRe))}a(Uq,"isTestFile");f();var Bmt=["indexed","indexing","not_indexed"],v_=class{constructor(){this._cache=new Sr(100)}static{a(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let o=e.ctx;if(!n)return!1;let s=`repos/${r}/copilot_internal/embeddings_index`,c=await Um(o,n,s);return c.ok?(await c.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<1800*1e3}async isRepoIndexed(e,r,n,o=!1){let s=Ex(r);if(!s)return!1;let c=this._cache.get(s);if(!o&&this.isValid(c))return c.status;let l=await this.queryIndexingStatus(e,s,n);return this._cache.set(s,{status:l,timestamp:Date.now()}),l}get cache(){return this._cache}};f();f();var Mse=Ne(xI()),z1=Ne(require("fs")),Nmt=require("os"),pg=Ne(require("path")),mM=require("process");var ERe=5e4,YAr=new ft("workspaceChunks"),Lse=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Di(r.uri),o=(0,Mse.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=pg.join(JAr(),"project-context",`${n}.${o}`)}static{a(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,Mse.SHA256)(e).toString().substring(0,this.pathHashLength),n=pg.basename(e);return pg.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await z1.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await z1.promises.mkdir(pg.dirname(n),{recursive:!0}),await z1.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(o){YAr.debug(this.ctx,"Failed to set chunks cache:",o)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await z1.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await z1.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=pg.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let o=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,o?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(pg.join(this.cacheRootPath,n))}}async getFileHash(e){let r=rs(e),n="";return r&&(n=await z1.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,Mse.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,o=rs(e);if(!o)return;async function s(m){try{return(await z1.promises.stat(m)).mtimeMs}catch{return}}a(s,"getLastModified");let c=await s(o),l=await this.getChunksCache(e);if(l!==void 0&&l.version===t.CACHE_VERSION&&c!==void 0&&l.lastModified===c){this.chunksCountCache.set(o,l.documentChunks.length);return}let u=await this.getFileHash(e),d=await n();this.chunksCountCache.set(o,d.length);let p={version:t.CACHE_VERSION,filePath:e,hash:u,lastModified:c,documentChunks:d};await this.setChunksCache(e,p)}async deleteChunksForSource(e){let r=Dl(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=rs(e);if(!r)return[];let n;try{n=await z1.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let o=[];for(let s of n){let c=Dl(pg.join(r,s));o.push(...await this.deleteChunks({uri:c}))}return o}async clear(){await z1.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function JAr(){return mM.env.XDG_CACHE_HOME&&pg.isAbsolute(mM.env.XDG_CACHE_HOME)?mM.env.XDG_CACHE_HOME+"/github-copilot":(0,Nmt.platform)()==="win32"?mM.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":mM.env.HOME+"/.cache/github-copilot"}a(JAr,"getXdgCachePath");var bRe=1e4;var Fse=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new TRe;this.status="notStarted",this.workspaceChunks=new Lse(e,r),this.cancellationToken=new IRe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{a(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(ef).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>bRe&&(this._fileCountExceeded=!0,n=n.slice(0,bRe));let o=n.map(async s=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,s))});try{await Promise.all(o)}catch(s){Ja(e,s,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>ERe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async o=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(o.uri),await this._chunkLimiter.queue(()=>this._chunk(e,o)))});try{await Promise.all(n)}catch(o){Ja(e,o,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>ERe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>bRe&&(this._fileCountExceeded=!0),JYe(...r.map(o=>this.workspaceChunks.getChunks(o)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Go.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},IRe=class{constructor(){this.cancelled=!1}static{a(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},TRe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{a(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let o=e();o.then(r,n),o.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};f();f();f();var Hmt=Ne(Use()),RRe=Ne(require("path"));var $mt=500,ayr=Math.floor(.25*$mt),qse=class{static{a(this,"FixedSizeChunking")}async chunk(e,r){let n=[],o=RRe.default.extname(__filename)===".ts"?RRe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await Hmt.job(async({text:s,uri:c,tokenizerName:l,directory:u,chunkSize:d,overlap:p})=>{let h=await require(u).getTokenizerAsync(l),g=h.tokenize(s),A=g.length,y=[],v=0;for(;v<A;){let b=v+d>=A,I=b?A:v+d,S=g.slice(v,I),k=h.detokenize(S),N=s.indexOf(k);y.push({id:`${c.toString()}#${v}`,chunk:k,tokenCount:S.length,range:{start:N,end:N+k.length}}),v=b?I:I-p}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:o,chunkSize:$mt,overlap:ayr}}),n}};var cyr="fixedSize",lyr=new Map([["fixedSize",qse]]);function Wmt(t){let e=t==="default"?cyr:t,r=lyr.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}a(Wmt,"getChunkingAlgorithm");var bc=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{a(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=Wmt(r),o=new n;return new Fse(this.ctx,e,o)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let o=this.workspaceChunkingProviders.get(e.uri);return o||(o=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,o)),o}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let o=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(o)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let s=zr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Nt(e,"index.terminate",s),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),o=[];Array.isArray(r)||(r=[r]);for(let s of r)o.push(...await n.deleteFileChunks(s));return o}async chunk(e,r,n,o){let s;return n&&(Array.isArray(n)?s=n:o=n),o||(o="default"),s?await this.chunkFiles(e,r,s,o):await this.chunkFolder(e,r,o)}async chunkFolder(e,r,n="default"){let o=this.getImplementation(r,n),s=await o.chunk(e),l=zr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:o.totalFileCount,chunkCount:await o.getChunksCount(),timeTakenMs:o.chunkingTimeMs,workspaceCount:this.workspaceCount});return Nt(e,"index.chunk",l),s}async chunkFiles(e,r,n,o="default"){return await this.getImplementation(r,o).chunk(e,n)}};f();f();f();async function jmt(t,e,r,n){let o=Oi(e.tokenizer),s=r.filter(m=>o.tokenLength(m.text)<e.maxTokens);if(s.length===0)return;let c=[],l=await t.get(cr).getToken(),u=tY(t,l,"embeddings"),d=l.token,p=0;for(;p<s.length&&!n.isCancellationRequested;){let m=s.slice(p,p+e.maxBatchSize),h=await uyr(t,u,d,e.modelId,m,n);c.push(...h||[]),p+=e.maxBatchSize}return c.length?c:void 0}a(jmt,"fetchEmbeddings");async function uyr(t,e,r,n,o,s){let c=Ir(),l=o.map(p=>p.text),u=fh(t);Lv()&&(u=await FB(t,u));let d=await bx(t,e,r,void 0,c,{input:l,model:n,dimensions:1024},s,u);if(d.status!==200||s.isCancellationRequested){Ja(t,new NE(`Failed to request dense embeddings, status: ${d.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await d.json()).data.map(m=>({id:o[m.index].id,embedding:m.embedding}))}catch{return}}a(uyr,"sendEmbeddingsRequest");f();f();var Hse=class{static{a(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((c,l)=>c+l*l,0)),o=Math.sqrt(r.reduce((c,l)=>c+l*l,0));return e.reduce((c,l,u)=>c+l*r[u],0)/(n*o)}terminateScoring(){}};var dyr="cosine",fyr=new Map([["cosine",Hse]]);function Gmt(t){let e=t==="default"?dyr:t,r=fyr.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}a(Gmt,"getScoringAlgorithm");f();var ym=class{constructor(){this.workspaceScoringProviders=new Sr(25)}static{a(this,"ScoringProvider")}createImplementation(e,r){let n=Gmt(r);return new n}getImplementation(e,r,n="default"){let o=this.workspaceScoringProviders.get(r.uri);return o||(o=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,o)),o}score(e,r,n,o,s){return this.getImplementation(e,r,s).score(n,o)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var Vmt={modelFamily:oY.textEmbedding3Small,scoringType:"default",dimensions:null};async function zmt(t,e,r,n,o,s,c,l=Vmt){let u={...Vmt,...l},d=myr(t,e,r,n);Rr.debug(t,`EmbeddingsReranker: Reranking ${d.length} snippets (includes the user query)`);let p=await t.get(ya).getFirstMatchingEmbeddingModelConfiguration(u.modelFamily);if(p===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${u.modelFamily}`);let m=performance.now(),h=await jmt(t,p,d,s),g=performance.now();if(c.embeddingsTimeMs=Math.floor(g-m),h===void 0||h.length===0)return[];let A=h.findIndex(N=>N.id==="userQuery");if(A===void 0)return[];let y=h.splice(A,1)[0];if(s.isCancellationRequested)return[];let v=performance.now(),b=hyr(t,e,h,y,u.scoringType),I=performance.now();c.rerankingTimeMs=Math.floor(I-v);let S=b.slice(0,o);return Rr.debug(t,`EmbeddingsReranker: Returning ${S.length} snippets`),S.map(N=>d.find(F=>F.id===N.id).id)}a(zmt,"rerankSnippets");function myr(t,e,r,n){let o=n.map(s=>({id:s.id,text:s.chunk.toLowerCase()}));return o.push({id:"userQuery",text:r.toLowerCase()}),o}a(myr,"formatEmbeddingsInput");function hyr(t,e,r,n,o){let s=t.get(ym);return r.map(l=>({id:l.id,score:s.score(t,e,n.embedding,l.embedding,o)})).sort((l,u)=>u.score-l.score)}a(hyr,"scoreEmbeddings");f();f();f();var PRe=Ne(Use());var gyr=.75,Ayr=1.2,yyr=47,$se=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{a(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await Wse();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(l=>l.toLowerCase()),n=await this.calculateIDFValues(r),o=Math.min(10*e.length,yyr),s=Math.min(o,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,s)}async calculateIDFValues(e){let r=this.ctx.get(bc).getChunks(this.workspaceFolder),n=Dx(r,s=>({...s,chunk:s.chunk.toLowerCase()})),o=Dx(n,s=>s.chunk);return await Cyr(e,o)}async calculateBM25Scores(e,r,n,o){let s=this.ctx.get(bc).getChunks(this.workspaceFolder),c=new kRe(o);for await(let l of s){let u=await vyr({...l,chunk:l.chunk.toLowerCase()},e,r,n);c.add({...u,chunk:l.chunk})}return c.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function Cyr(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),o=[],s=0;for await(let u of e){s++;let d=PRe.job(({snippet:p,keywords:m})=>m.map(g=>p.includes(g)?1:0),{data:{snippet:u,keywords:t}}).then(p=>{for(let m=0;m<t.length;m++)Atomics.add(n,m,p[m])});o.push(d)}await Promise.all(o);let c=new Int32Array(r),l={};for(let u=0;u<t.length;u++)l[t[u]]=Math.log((s-c[u]+.5)/(c[u]+.5)+1);return l}a(Cyr,"calculateIDFValues");async function vyr(t,e,r,n){return{score:await PRe.job(({keywords:s,document:c,docLength:l,avgTokenCount:u,idfValues:d,k1:p,b:m})=>{let h=0;for(let g of s){let A=d[g],y=(c.match(new RegExp(g,"g"))||[]).length,v=A*(y*(p+1)),b=y+p*(1-m+m*l/u);h+=v/b}return h},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:Ayr,b:gyr}}),...t}}a(vyr,"calculateBM25Score");var kRe=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{a(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var Eyr="bm25",byr=new Map([["bm25",$se]]);function Kmt(t){let e=t==="default"?Eyr:t,r=byr.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}a(Kmt,"getRankingAlgorithm");var hd=class{constructor(){this.workspaceRankingProviders=new Sr(25)}static{a(this,"RankingProvider")}createImplementation(e,r,n){let o=Kmt(n);return new o(e,r)}getImplementation(e,r,n="default"){let o=this.workspaceRankingProviders.get(r.uri);return o||(o=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,o)),o}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,o="default"){await this.getImplementation(e,r,o).initialize(n)}async addChunks(e,r,n,o="default"){await this.getImplementation(e,r,o).addChunks(n)}async query(e,r,n,o){return this.getImplementation(e,r,o).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,o){return this.getImplementation(e,r,o).deleteEmbeddings(n)}};f();async function Ymt(t,e){let r=t.ctx,n=await Go.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),o={promptType:"synonyms",modelConfiguration:n},s=await r.get(gd).toPrompt(t,o);if(!s.toolConfig)return;let c={modelConfiguration:n,uiKind:"conversationPanel",messages:s.messages,tools:s.toolConfig?.tools,tool_choice:s.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},l=new Bs(r),u=await tc(r,t),d=await l.fetchResponse(c,e,u.extendedBy({messageSource:"chat.synonyms"}));if(d.type==="success"&&d.toolCalls&&d.toolCalls.length>0){let p=d.toolCalls[0],m=s.toolConfig?.extractArguments(p).keywords;return!m||!Array.isArray(m)?void 0:(Rr.debug(r,`UserQueryParser: Parsed ${m.length} keywords from the original user query: ${m.join(", ")}`),m.length?m:void 0)}else{let p="reason"in d?d.reason:"";Ja(r,new NE(`Failed to request user query synonyms, result type: ${d.type}, reason: ${p}`),"LocalSnippetProvider.parseUserQuery")}}a(Ymt,"parseUserQuery");var Jmt=Ne(Am());var NE=class extends Error{static{a(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},jse=class{constructor(){this.providerType="local"}static{a(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,o=n.get(bc),s=o.status(e.turn.workspaceFolder),c=n.get(hd),l=c.status(n,e.turn.workspaceFolder);if(s==="completed"&&l==="completed")return Promise.resolve("indexed");if(s==="started"||l==="started")return Promise.resolve("indexing");if(r){let u=e.turn.workspaceFolder;if(s==="notStarted")return Promise.race([o.chunk(n,u).then(d=>{if(o.status(u)==="completed")return c.initialize(n,u,d)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))]);if(l==="notStarted"){let d=o.getChunks(u);return Promise.race([c.initialize(n,u,d).then(()=>this.snippetProviderStatus(e,!1)),new Promise(p=>setTimeout(()=>p("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let o=e.ctx,c=await o.get(bc).chunkCount(n);if(c===0)return[];r.chunkCount=c;let l,u=performance.now();try{l=await Ymt(e,e.cancelationToken)}catch(A){let y=new NE(A);Ja(o,y,"LocalSnippetProvider.parseUserQuery")}let d=performance.now();if(r.synonymTimeMs=Math.floor(d-u),l===void 0)return[];let p=o.get(hd),m=[],h=performance.now();try{let A=await p.query(o,n,l);r.localSnippetCount=A.length,m=A}catch(A){let y=new NE(A);Ja(o,y,"LocalSnippetProvider.rankingQuery")}let g=performance.now();return r.rankingTimeMs=Math.floor(g-h),m}async rerankLocalSnippets(e,r,n){let o=e.turn.workspaceFolder;if(!o)return[];let s=e.ctx,c=tn(e.turn.request.message),l=[];try{l=await zmt(s,o,c,r,5,e.cancelationToken,n)}catch(p){let m=new NE(p);Ja(s,m,"LocalSnippetProvider.rerankSnippets")}let u=[],d=s.get(In);for(let p of l){let m=p.split("#")[0],h=await d.getOrReadTextDocument({uri:m}),g=r.find(A=>A.id===p);if(h.status==="valid"){let A=h.document.positionAt(g.range.start),y=h.document.positionAt(g.range.end),v=Is.range(A,y);u.push({uri:h.document.uri,range:v,snippet:g.chunk})}}return u}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...rJe},o=await this.collectLocalSnippets(e,n);if(o.length===0)return{snippets:[],measurements:n};let s=e.ctx;return Rr.debug(s,`LocalSnippetProvider: First pass: Found ${o.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,o,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let s=e.ctx.get(bc).checkLimits(r);if(s.fileCountExceeded||s.chunkCountExceeded)return Jmt.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var Zmt=Ne(Xmt()),zse=Ne(Use()),eht=Ne(require("os")),tht=Ne(Am());var wyr=Math.min(Math.max(Math.ceil(eht.cpus().length/2),1),10),Hq=class t{constructor(){this.isActive=!0}static{a(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new Zmt.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await zse.start({maxWorkers:wyr})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await zse.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},Wse=Hq.startWorkerPool.bind(Hq);var wYi=E.Object({uri:E.String(),snippet:E.String(),range:E.Object({start:E.Object({line:E.Number(),character:E.Number()}),end:E.Object({line:E.Number(),character:E.Number()})})}),NRe=class{constructor(e){this.turnContext=e}static{a(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(hM);return}let r=[],n=this.turnContext.ctx.get(In),o=this.removeDuplicateSnippets(e);for(let s of o){let{uri:c,snippet:l,range:u}=s,d=await n.getOrReadTextDocument(s);if(d.status==="valid"){let p=new V1(d.document,u,u),m=new Ht([l]),g=Uq(c)?.5:.8;r.push([`Code excerpt from file \`${rs(c)}\`:`,1],[p.wrapInTicks(m,g),1]),await this.turnContext.collectFile(gM,c,ua(d),u)}}if(r.length>0)return r.unshift([new Ht(["The user wants you to consider the following snippets when computing your answer."]),1]),new Ht(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let o=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[o]||(r[o]=n)}),Object.values(r)}},hM="collect-project-context",Gse=class extends V8{constructor(r,n=[new jse]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(Q1).addListener(this)}static{a(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async didAddWorkspace(r){if(!await this.isEnabled()||(this.workerPoolToken=await Wse(),!r.uri))return;let n=this.ctx.get(bc),o=this.ctx.get(ef),s=this.ctx.get(hd),c=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&o.terminateWatching(r),await s.initialize(this.ctx,r,c),await this.workerPoolToken.stopWorkerPool()}async didRemoveWorkspace(r){if(!await this.isEnabled())return;let n=this.ctx.get(bc);if(!r)return;let o=n.getParentFolder(r);if(o){let l=await n.deleteSubfolderChunks(o,r);await this.ctx.get(hd).deleteEmbeddings(this.ctx,o,l);return}n.terminateChunking(this.ctx,r),await this.ctx.get(hd).terminateRanking(this.ctx,r),this.ctx.get(ym).terminateScoring(this.ctx,r),n.workspaceCount===0&&await Hq.forceStopWorkerPool()}async didTerminateWorkspaceSubfolders(r,n){let o=this.ctx.get(bc),s=this.ctx.get(hd),c=this.ctx.get(ym);for(let l of n)o.terminateChunking(this.ctx,l),await s.terminateRanking(this.ctx,l),c.terminateScoring(this.ctx,r)}async didChangeFiles(r){if(!await this.isEnabled())return;let n=await Wse();try{let o=r.documents.map(u=>u.uri),s=r.workspaceFolder;if(!s)return;let c=this.ctx.get(bc),l=this.ctx.get(hd);if(r.type==="delete"||r.type==="update"){let u=await c.deleteFileChunks(s,o);await l.deleteEmbeddings(this.ctx,s,u)}if(r.type==="create"||r.type==="update"){let u=await c.chunk(this.ctx,s,r.documents);await l.addChunks(this.ctx,s,u)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}isEnabled(){return Promise.resolve(!0)}async resolveSkill(r){await r.steps.start(hM,"Collecting relevant project context"),await r.info(tht.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async l=>l.snippetProviderStatus(r)),o=await Promise.all(n),s="not_indexed",c;for(let l of Bmt){let u=o.findIndex(d=>d===l);if(u!==-1){s=l,c=this.snippetProviders[u];break}}switch(s){case"indexed":{let{snippets:l,measurements:u}=await c.provideSnippets(r);if(await nJe(r,c.providerType,u),l.length===0){await r.steps.error(hM,"No project context found");return}return await r.steps.finish(hM),l}case"indexing":{await r.steps.error(hM,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(hM,"No project context available");return}}}},gM="project-context",Vse=class extends Su{static{a(this,"ProjectContextSkill")}constructor(e){super(gM,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new NRe(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var rht=E.Object({labels:E.Array(E.String())}),MRe=class{constructor(e){this.turnContext=e}static{a(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Ht(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Ht([`- ${n}`]),.9]),this.turnContext.collectLabel(Ey,n)}),new Ht(r)}},Ey="project-labels",Kse=class{constructor(e){this._resolver=e;this.id=Ey;this.type="explicit"}static{a(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new MRe(e)}};f();var Yse=Ne(Am());var iht={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},oht=Yse.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,sht=Yse.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,_yr=Yse.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,LRe=`

`,nht=oht+LRe+sht;function aht(t){let e=1;if(t.length===0)return{reply:nht,vulnerabilities:e};if(t==="0")return{reply:nht,vulnerabilities:0};if(t==="help")return{reply:_yr,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let o of t)o==="p"?n+=oht+LRe:o==="c"&&(n+=sht+LRe);return{reply:n.trimEnd(),vulnerabilities:e}}a(aht,"parseVulnerabilitiesInstructions");var cht=Ne(Am());var Syr="Oops, your response got filtered. Vote down if you think this shouldn't have happened",Ryr="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",FRe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{a(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},kyr=new FRe,ORe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{a(this,"DebugUpgradePromptTemplate")}response(e){return new Ru(Ryr,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},Pyr=new ORe,QRe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{a(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let o=r.replace("info","").replace("warning","").trim(),s=[{severity:n,message:o.length>0?o:"Debug Notification"}];return new Ru("Alright, I'm producing a notification",void 0,[],s)}},Dyr=new QRe,URe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{a(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Ru(Syr,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},Byr=new URe,qRe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{a(this,"DebugDumpPromptTemplate")}async response(e){return new Ru(await uht(e))}},Nyr=new qRe,HRe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{a(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[Ey,nf]}instructions(e,r){return"Create a function that prints a christmas tree"}},Myr=new HRe,$Re=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{a(this,"DebugEchoPromptTemplate")}response(e){return new Ru(tn(e.turn.request.message))}},Lyr=new $Re,WRe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{a(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(ku).getLastTurnPrompts();if(n!==void 0&&n.size>0){let o="Here are the prompts used in the last turn:";return n.forEach((s,c)=>{o+=cht.default`

                        ### ${c} prompt
                        
                        \`\`\`\`
                        ${s}
                        \`\`\`\`
                    `}),new Ru(o)}return new Ru("No prompt available")}},Fyr=new WRe,jRe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{a(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let o,s;if(r.length>0){let c=r.split(" ");o=c[0],s=c.slice(1).join(" ")}return e.turn.request.message=s??"",new Ru(await dht(e,n,o))}},Oyr=new jRe,GRe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{a(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:o}=aht(r);for(let s=0;s<o;s++)e.turn.annotations.push(iht);return new Ru(n,void 0,e.turn.annotations)}},Qyr=new GRe,VRe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{a(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(Tmt),new Ru(wmt,void 0,e.turn.annotations)}},Uyr=new VRe,zRe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{a(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Ru(_mt)}},qyr=new zRe,KRe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{a(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},Hyr=new KRe,YRe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{a(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[gM]}},$yr=new YRe,JRe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{a(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Ru("Alright, I'm producing a notification",void 0,[],[],[],e)}},Wyr=new JRe;function lht(){return[kyr,Pyr,Dyr,Byr,Myr,Nyr,Lyr,Fyr,Oyr,Qyr,Uyr,Wyr,qyr,Hyr,$yr]}a(lht,"getDebugTemplates");f();f();function E_(t,e){if(t.length==0)return new Ht([]);let r=t.map((n,o)=>{let s;switch(e){case"linear":s=1-o/t.length;break;case"inverseLinear":s=(o+1)/t.length;break;case"positional":s=1/(o+1);break;case"inversePositional":s=1/(t.length-o);break}return Array.isArray(n)&&n.length==2&&(s*=n[1],n=n[0]),[n,s]});return new Ht(r)}a(E_,"weighElidableList");var fht=E.Object({uri:E.String(),problems:E.Array(E.Object({message:E.String(),range:Hc}))}),XRe=class{constructor(e){this.turnContext=e}static{a(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(In),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(b_,e.uri,ua(n)),n.status==="valid"){let o=r.getRelativePath(n.document);this.turnContext.collectLabel(b_,`problems in ${o}`);let s=this.getElidableProblems(e,n,o);return await this.preElideDocuments(s)}else this.turnContext.collectLabel(b_,"problem markers")}getElidableProblems(e,r,n){let o=[];return o.push(new Ht([`Problems and errors in the active document (\`${n}\`):`])),o.push(...this.createElidableProblems(e,r)),E_(o,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let o=[];o.push(new Ht([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let s=n.range,c;if(s&&(this.isEmpty(s)?c=r.document.lineAt(s.start).text:c=r.document.getText(s),c)){let l=r.document.detectedLanguageId;o.push(new Ht([["```"+l,1],[H0(c),.8],["```",1]]))}return new Ht(o)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await Go.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ht([n])}},b_="problems-in-active-document",Jse=class extends Su{static{a(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(b_,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new XRe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var Xse=class{constructor(e){this.turnContext=e}static{a(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(fr).getWorkspaceFolder(e),n=this.fileExistFn(),o=new Qq(this.turnContext.ctx,n,r?.uri),s=await o.findTestFileForSourceFile(e.uri),c=Uq(e.uri);if(s&&!c){let l=e.detectedLanguageId;if(await n(s))return await this.asTestFilePrompt(l,s);{let u=o.findExampleTestFile(e.uri);if(u)return await this.asExampleFilePrompt(l,u)}}}async fromTestFile(e){if(!Uq(e))return;let n=this.turnContext.ctx.get(fr).getWorkspaceFolder(e),o=this.fileExistFn(),c=await new Qq(this.turnContext.ctx,o,n?.uri).findImplFileForTestFile(e.uri);if(c){let l=e.detectedLanguageId;if(await o(c))return await this.asImplFilePrompt(l,c)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[o,s]=n;return new Ht([[`${jyr} \`${s}\`:`,1],["```"+e,1],[o,.9],["```",1]])}return new Ht([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[o,s]=n;return new Ht([[`${Gyr} \`${s}\`:`,1],["```"+e,1],[o,.9],["```",1]])}return new Ht([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[o,s]=n;return new Ht([[`${Vyr} \`${s}\`:`,1],["```"+e,1],[o,.9],["```",1]])}return new Ht([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(In),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(by,e,ua(n)),n.status==="valid"){let o=r.getRelativePath(n.document);return[H0(n.document.getText()),o]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(Qi).stat(e),!0}catch{return!1}}}},jyr="Code excerpt from the implementation source file",Gyr="Code excerpt from the test file",Vyr="Code excerpt from an example test file";var pht=E.Object({currentFileUri:E.String(),sourceFileUri:E.Optional(E.String()),testFileUri:E.Optional(E.String())}),eke=class{constructor(e){this.turnContext=e}static{a(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(In),n=new Xse(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let o=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(by,e.testFileUri,ua(o)),o.status==="valid")return await n.asImplFilePrompt(o.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let o=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(by,e.sourceFileUri,ua(o)),o.status==="valid")return await n.asTestFilePrompt(o.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let o=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(by,e.sourceFileUri,ua(o)),o.status==="valid")return await n.fromImplementationFile(o.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let o=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(by,e.testFileUri,ua(o)),o.status==="valid")return await n.fromTestFile(o.document)}}},by="test-context",Zse=class extends Su{static{a(this,"TestContextSkill")}constructor(e){super(by,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new eke(r))}};f();var mht=Ne(Am());var hht=E.Object({failures:E.Array(E.Object({testName:E.String(),testSuite:E.Optional(E.String()),testFileUri:E.String(),failureReason:E.Optional(E.String()),testLocation:Hc}))}),tke=class{constructor(e){this.turnContext=e}static{a(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(IP,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Ht(["The latest test run produced the following failures and errors:"]);return new Ht([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(In),n=[],o=this.groupFailuresByFile(e);for(let[s,c]of o.entries()){let l=await r.getOrReadTextDocument({uri:s});if(await this.turnContext.collectFile(IP,s,ua(l)),l.status==="valid"){let u=r.getRelativePath(l.document),d=this.createElidableFailuresOfDoc(c,u),p=this.appendCode(d,u,l.document);n.push([p,1])}}if(n.length>0)return new Ht(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let o=r.get(n.testFileUri)||[];o.push(n),r.set(n.testFileUri,o)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(o=>{let s=`\`${o.testName}\``,c=`${o.testSuite?` in suite \`${o.testSuite}\``:""}`,l=` in file \`${r}\` `,u=". ";o.failureReason&&(u=" with the following error:",o.failureReason.includes(`
`)?u+="\n```\n"+o.failureReason+"\n```\n":u+=` \`${o.failureReason}\`. `);let d=`${o.testLocation.start.line==o.testLocation.end.line?"on line "+o.testLocation.start.line:"between lines "+o.testLocation.start.line+" and "+o.testLocation.end.line}`;return[new Ht([mht.default`\n\n- Test ${s}${c}${l}failed${u}The failed test is ${d}.\n`]),1]});return new Ht(n)}appendCode(e,r,n){let o=[new Ht([`
The code of file \`${r}\` is:
`]),.6],s=[new Ht([["```"+n.detectedLanguageId,1],[H0(n.getText()),.9],["```",1]]),.7];return new Ht([[e,1],o,s])}},IP="test-failures",eae=class extends Su{static{a(this,"TestFailuresSkill")}constructor(e){super(IP,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new tke(r))}};var mg=Ne(Am());var Ru=class{constructor(e,r,n=[],o=[],s=[],c){this.message=e;this.error=r;this.annotations=n;this.notifications=o;this.references=s;this.confirmationRequest=c}static{a(this,"PromptTemplateResponse")}},TP=class{constructor(e,r,n,o,s=[],c=[],l,u=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=o;this.skills=s;this.scopes=c;this.inlinePrompt=l;this.producesCodeEdits=u}static{a(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let o;return n==="inline"?o=this.inlinePrompt??this.prompt:o=this.prompt,o+`
`+r}requiredSkills(){return this.skills}},zyr=new TP("tests","Generate unit tests","Generate Tests",mg.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[by,IP],["chat-panel","agent-panel","editor"]),Kyr=new TP("simplify","Simplify the code","Simplify This",mg.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","agent-panel","inline"],mg.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),Yyr=new TP("fix","Fix problems and compile errors","Fix This",mg.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[b_],["editor","chat-panel","agent-panel","inline"],mg.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),Jyr=new TP("explain","Explain how the code works","Explain This",mg.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","agent-panel","inline"],mg.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),Xyr=new TP("doc","Document the current selection of code","Generate Docs",mg.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","agent-panel","inline"],mg.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),rke=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel","agent-panel"]}static{a(this,"FeedbackPromptTemplate")}response(e){let r=oke(e.conversation),n=mg.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://aka.ms/copilot-jetbrains-feedback) to share your feedback.
            `;return r?new Ru(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new Ru(n)}},Zyr=new rke,nke=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel","agent-panel"]}static{a(this,"HelpPromptTemplate")}response(e){let r=ike(e.ctx).filter(o=>o!=this),n=mg.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(o=>`- \`/${o.id}\` - ${o.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Ru(n)}},eCr=new nke;function wP(){return[zyr,Kyr,Yyr,Jyr,Xyr,Zyr,eCr,...lht()]}a(wP,"getPromptTemplates");function ike(t){let e=wP();return!jF(t)&&!Xg(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}a(ike,"getUserFacingPromptTemplates");var ske=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{a(this,"ConversationHolder")}},ro=class{constructor(e){this.ctx=e;this.conversations=new Sr(100)}static{a(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:o}={}){let s=new Dse([],r??"panel",n,o),c=e?.skills??[];return e?.allSkills&&(c=this.ctx.get($l).getDescriptors().map(l=>l.id)),this.conversations.set(s.id,new ske(s,{skills:c})),s}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,o,s,c,l,u){let d=this.get(e);return r.request.references=n&&n.length>0?n:[],o&&(r.request.activeEditor=o),s&&(r.workspaceFolder=s),c&&c.length>0&&(r.workspaceFolders=c),l&&l.length>0&&(r.ignoredSkills=l.map(p=>({skillId:p}))),u&&(r.agent={agentSlug:u.agentSlug},r.confirmationResponse=u),await this.determineAndApplyAgent(d,r),await this.determineAndApplyTemplate(d,r),this.determineAndApplyPromptTemplate(this.ctx,d,r),d.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&tn(r.request.message).trim().startsWith("@")){let[n,o]=this.extractKeywordAndQuestionFromRequest(tn(r.request.message),"@");(await Y1(this.ctx)).find(l=>l.slug===n)&&(r.request.message=o,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(tn(r.request.message).trim().startsWith("/")){let[n,o]=this.extractKeywordAndQuestionFromRequest(tn(r.request.message),"/"),s=wP().find(c=>c.id===n);if(s){r.request.message=o,r.request.type="user",await this.determineAndApplyAgent(e,r);let c=s.instructions?s.instructions(this.ctx,r.request.message,e.source):o;r.template={templateId:n,userQuestion:r.request.message},r.request.message=c,r.request.type="template"}}}determineAndApplyPromptTemplate(e,r,n){if(tn(n.request.message).trim().startsWith("/")){let[o,s]=this.extractKeywordAndQuestionFromRequest(tn(n.request.message),"/"),l=e.get(iy).getPromptTemplate(o);l&&(n.request.message=`Follow instructions in [${l.name}](${l.uri}). ${s}`,n.request.references=[...n.request.references||[],{type:"file",uri:l.uri}])}}extractKeywordAndQuestionFromRequest(e,r){let[n,...o]=e.trim().split(" "),s=o.join(" ");return[n.replace(r,""),s]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get($l).getDescriptors().filter(o=>o.type==="implicit").map(o=>o.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(o=>n.includes(o))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};f();function Pht(t){return typeof t>"u"||t===null}a(Pht,"isNothing");function tCr(t){return typeof t=="object"&&t!==null}a(tCr,"isObject");function rCr(t){return Array.isArray(t)?t:Pht(t)?[]:[t]}a(rCr,"toArray");function nCr(t,e){var r,n,o,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)o=s[r],t[o]=e[o];return t}a(nCr,"extend");function iCr(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}a(iCr,"repeat");function oCr(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}a(oCr,"isNegativeZero");var sCr=Pht,aCr=tCr,cCr=rCr,lCr=iCr,uCr=oCr,dCr=nCr,Wl={isNothing:sCr,isObject:aCr,toArray:cCr,repeat:lCr,isNegativeZero:uCr,extend:dCr};function Dht(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}a(Dht,"formatError");function Wq(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Dht(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}a(Wq,"YAMLException$1");Wq.prototype=Object.create(Error.prototype);Wq.prototype.constructor=Wq;Wq.prototype.toString=a(function(e){return this.name+": "+Dht(this,e)},"toString");var Zp=Wq;function ake(t,e,r,n,o){var s="",c="",l=Math.floor(o/2)-1;return n-e>l&&(s=" ... ",e=n-l+s.length),r-n>l&&(c=" ...",r=n+l-c.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+c,pos:n-e+s.length}}a(ake,"getLine");function cke(t,e){return Wl.repeat(" ",e-t.length)+t}a(cke,"padStart");function fCr(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],o=[],s,c=-1;s=r.exec(t.buffer);)o.push(s.index),n.push(s.index+s[0].length),t.position<=s.index&&c<0&&(c=n.length-2);c<0&&(c=n.length-1);var l="",u,d,p=Math.min(t.line+e.linesAfter,o.length).toString().length,m=e.maxLength-(e.indent+p+3);for(u=1;u<=e.linesBefore&&!(c-u<0);u++)d=ake(t.buffer,n[c-u],o[c-u],t.position-(n[c]-n[c-u]),m),l=Wl.repeat(" ",e.indent)+cke((t.line-u+1).toString(),p)+" | "+d.str+`
`+l;for(d=ake(t.buffer,n[c],o[c],t.position,m),l+=Wl.repeat(" ",e.indent)+cke((t.line+1).toString(),p)+" | "+d.str+`
`,l+=Wl.repeat("-",e.indent+p+3+d.pos)+`^
`,u=1;u<=e.linesAfter&&!(c+u>=o.length);u++)d=ake(t.buffer,n[c+u],o[c+u],t.position-(n[c]-n[c+u]),m),l+=Wl.repeat(" ",e.indent)+cke((t.line+u+1).toString(),p)+" | "+d.str+`
`;return l.replace(/\n$/,"")}a(fCr,"makeSnippet");var pCr=fCr,mCr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],hCr=["scalar","sequence","mapping"];function gCr(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}a(gCr,"compileStyleAliases");function ACr(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(mCr.indexOf(r)===-1)throw new Zp('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=gCr(e.styleAliases||null),hCr.indexOf(this.kind)===-1)throw new Zp('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}a(ACr,"Type$1");var of=ACr;function ght(t,e){var r=[];return t[e].forEach(function(n){var o=r.length;r.forEach(function(s,c){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(o=c)}),r[o]=n}),r}a(ght,"compileList");function yCr(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(a(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}a(yCr,"compileMap");function uke(t){return this.extend(t)}a(uke,"Schema$1");uke.prototype.extend=a(function(e){var r=[],n=[];if(e instanceof of)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Zp("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof of))throw new Zp("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Zp("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Zp("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof of))throw new Zp("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(uke.prototype);return o.implicit=(this.implicit||[]).concat(r),o.explicit=(this.explicit||[]).concat(n),o.compiledImplicit=ght(o,"implicit"),o.compiledExplicit=ght(o,"explicit"),o.compiledTypeMap=yCr(o.compiledImplicit,o.compiledExplicit),o},"extend");var CCr=uke,vCr=new of("tag:yaml.org,2002:str",{kind:"scalar",construct:a(function(t){return t!==null?t:""},"construct")}),xCr=new of("tag:yaml.org,2002:seq",{kind:"sequence",construct:a(function(t){return t!==null?t:[]},"construct")}),ECr=new of("tag:yaml.org,2002:map",{kind:"mapping",construct:a(function(t){return t!==null?t:{}},"construct")}),bCr=new CCr({explicit:[vCr,xCr,ECr]});function ICr(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}a(ICr,"resolveYamlNull");function TCr(){return null}a(TCr,"constructYamlNull");function wCr(t){return t===null}a(wCr,"isNull");var _Cr=new of("tag:yaml.org,2002:null",{kind:"scalar",resolve:ICr,construct:TCr,predicate:wCr,represent:{canonical:a(function(){return"~"},"canonical"),lowercase:a(function(){return"null"},"lowercase"),uppercase:a(function(){return"NULL"},"uppercase"),camelcase:a(function(){return"Null"},"camelcase"),empty:a(function(){return""},"empty")},defaultStyle:"lowercase"});function SCr(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}a(SCr,"resolveYamlBoolean");function RCr(t){return t==="true"||t==="True"||t==="TRUE"}a(RCr,"constructYamlBoolean");function kCr(t){return Object.prototype.toString.call(t)==="[object Boolean]"}a(kCr,"isBoolean");var PCr=new of("tag:yaml.org,2002:bool",{kind:"scalar",resolve:SCr,construct:RCr,predicate:kCr,represent:{lowercase:a(function(t){return t?"true":"false"},"lowercase"),uppercase:a(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:a(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function DCr(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}a(DCr,"isHexCode");function BCr(t){return 48<=t&&t<=55}a(BCr,"isOctCode");function NCr(t){return 48<=t&&t<=57}a(NCr,"isDecCode");function MCr(t){if(t===null)return!1;var e=t.length,r=0,n=!1,o;if(!e)return!1;if(o=t[r],(o==="-"||o==="+")&&(o=t[++r]),o==="0"){if(r+1===e)return!0;if(o=t[++r],o==="b"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(o!=="0"&&o!=="1")return!1;n=!0}return n&&o!=="_"}if(o==="x"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(!DCr(t.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}if(o==="o"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(!BCr(t.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}}if(o==="_")return!1;for(;r<e;r++)if(o=t[r],o!=="_"){if(!NCr(t.charCodeAt(r)))return!1;n=!0}return!(!n||o==="_")}a(MCr,"resolveYamlInteger");function LCr(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}a(LCr,"constructYamlInteger");function FCr(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Wl.isNegativeZero(t)}a(FCr,"isInteger");var OCr=new of("tag:yaml.org,2002:int",{kind:"scalar",resolve:MCr,construct:LCr,predicate:FCr,represent:{binary:a(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:a(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:a(function(t){return t.toString(10)},"decimal"),hexadecimal:a(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),QCr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function UCr(t){return!(t===null||!QCr.test(t)||t[t.length-1]==="_")}a(UCr,"resolveYamlFloat");function qCr(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}a(qCr,"constructYamlFloat");var HCr=/^[-+]?[0-9]+e/;function $Cr(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Wl.isNegativeZero(t))return"-0.0";return r=t.toString(10),HCr.test(r)?r.replace("e",".e"):r}a($Cr,"representYamlFloat");function WCr(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Wl.isNegativeZero(t))}a(WCr,"isFloat");var jCr=new of("tag:yaml.org,2002:float",{kind:"scalar",resolve:UCr,construct:qCr,predicate:WCr,represent:$Cr,defaultStyle:"lowercase"}),GCr=bCr.extend({implicit:[_Cr,PCr,OCr,jCr]}),VCr=GCr,Bht=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Nht=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function zCr(t){return t===null?!1:Bht.exec(t)!==null||Nht.exec(t)!==null}a(zCr,"resolveYamlTimestamp");function KCr(t){var e,r,n,o,s,c,l,u=0,d=null,p,m,h;if(e=Bht.exec(t),e===null&&(e=Nht.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(r,n,o));if(s=+e[4],c=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(p=+e[10],m=+(e[11]||0),d=(p*60+m)*6e4,e[9]==="-"&&(d=-d)),h=new Date(Date.UTC(r,n,o,s,c,l,u)),d&&h.setTime(h.getTime()-d),h}a(KCr,"constructYamlTimestamp");function YCr(t){return t.toISOString()}a(YCr,"representYamlTimestamp");var JCr=new of("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:zCr,construct:KCr,instanceOf:Date,represent:YCr});function XCr(t){return t==="<<"||t===null}a(XCr,"resolveYamlMerge");var ZCr=new of("tag:yaml.org,2002:merge",{kind:"scalar",resolve:XCr}),hke=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function e1r(t){if(t===null)return!1;var e,r,n=0,o=t.length,s=hke;for(r=0;r<o;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}a(e1r,"resolveYamlBinary");function t1r(t){var e,r,n=t.replace(/[\r\n=]/g,""),o=n.length,s=hke,c=0,l=[];for(e=0;e<o;e++)e%4===0&&e&&(l.push(c>>16&255),l.push(c>>8&255),l.push(c&255)),c=c<<6|s.indexOf(n.charAt(e));return r=o%4*6,r===0?(l.push(c>>16&255),l.push(c>>8&255),l.push(c&255)):r===18?(l.push(c>>10&255),l.push(c>>2&255)):r===12&&l.push(c>>4&255),new Uint8Array(l)}a(t1r,"constructYamlBinary");function r1r(t){var e="",r=0,n,o,s=t.length,c=hke;for(n=0;n<s;n++)n%3===0&&n&&(e+=c[r>>18&63],e+=c[r>>12&63],e+=c[r>>6&63],e+=c[r&63]),r=(r<<8)+t[n];return o=s%3,o===0?(e+=c[r>>18&63],e+=c[r>>12&63],e+=c[r>>6&63],e+=c[r&63]):o===2?(e+=c[r>>10&63],e+=c[r>>4&63],e+=c[r<<2&63],e+=c[64]):o===1&&(e+=c[r>>2&63],e+=c[r<<4&63],e+=c[64],e+=c[64]),e}a(r1r,"representYamlBinary");function n1r(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}a(n1r,"isBinary");var i1r=new of("tag:yaml.org,2002:binary",{kind:"scalar",resolve:e1r,construct:t1r,predicate:n1r,represent:r1r}),o1r=Object.prototype.hasOwnProperty,s1r=Object.prototype.toString;function a1r(t){if(t===null)return!0;var e=[],r,n,o,s,c,l=t;for(r=0,n=l.length;r<n;r+=1){if(o=l[r],c=!1,s1r.call(o)!=="[object Object]")return!1;for(s in o)if(o1r.call(o,s))if(!c)c=!0;else return!1;if(!c)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}a(a1r,"resolveYamlOmap");function c1r(t){return t!==null?t:[]}a(c1r,"constructYamlOmap");var l1r=new of("tag:yaml.org,2002:omap",{kind:"sequence",resolve:a1r,construct:c1r}),u1r=Object.prototype.toString;function d1r(t){if(t===null)return!0;var e,r,n,o,s,c=t;for(s=new Array(c.length),e=0,r=c.length;e<r;e+=1){if(n=c[e],u1r.call(n)!=="[object Object]"||(o=Object.keys(n),o.length!==1))return!1;s[e]=[o[0],n[o[0]]]}return!0}a(d1r,"resolveYamlPairs");function f1r(t){if(t===null)return[];var e,r,n,o,s,c=t;for(s=new Array(c.length),e=0,r=c.length;e<r;e+=1)n=c[e],o=Object.keys(n),s[e]=[o[0],n[o[0]]];return s}a(f1r,"constructYamlPairs");var p1r=new of("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:d1r,construct:f1r}),m1r=Object.prototype.hasOwnProperty;function h1r(t){if(t===null)return!0;var e,r=t;for(e in r)if(m1r.call(r,e)&&r[e]!==null)return!1;return!0}a(h1r,"resolveYamlSet");function g1r(t){return t!==null?t:{}}a(g1r,"constructYamlSet");var A1r=new of("tag:yaml.org,2002:set",{kind:"mapping",resolve:h1r,construct:g1r}),Mht=VCr.extend({implicit:[JCr,ZCr],explicit:[i1r,l1r,p1r,A1r]}),T_=Object.prototype.hasOwnProperty,tae=1,Lht=2,Fht=3,rae=4,lke=1,y1r=2,Aht=3,C1r=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,v1r=/[\x85\u2028\u2029]/,x1r=/[,\[\]\{\}]/,Oht=/^(?:!|!!|![a-z\-]+!)$/i,Qht=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function yht(t){return Object.prototype.toString.call(t)}a(yht,"_class");function J1(t){return t===10||t===13}a(J1,"is_EOL");function SP(t){return t===9||t===32}a(SP,"is_WHITE_SPACE");function e0(t){return t===9||t===32||t===10||t===13}a(e0,"is_WS_OR_EOL");function yM(t){return t===44||t===91||t===93||t===123||t===125}a(yM,"is_FLOW_INDICATOR");function E1r(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}a(E1r,"fromHexCode");function b1r(t){return t===120?2:t===117?4:t===85?8:0}a(b1r,"escapedHexLen");function I1r(t){return 48<=t&&t<=57?t-48:-1}a(I1r,"fromDecimalCode");function Cht(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}a(Cht,"simpleEscapeSequence");function T1r(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}a(T1r,"charFromCodepoint");var Uht=new Array(256),qht=new Array(256);for(_P=0;_P<256;_P++)Uht[_P]=Cht(_P)?1:0,qht[_P]=Cht(_P);var _P;function w1r(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Mht,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}a(w1r,"State$1");function Hht(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=pCr(r),new Zp(e,r)}a(Hht,"generateError");function gn(t,e){throw Hht(t,e)}a(gn,"throwError");function nae(t,e){t.onWarning&&t.onWarning.call(null,Hht(t,e))}a(nae,"throwWarning");var vht={YAML:a(function(e,r,n){var o,s,c;e.version!==null&&gn(e,"duplication of %YAML directive"),n.length!==1&&gn(e,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),o===null&&gn(e,"ill-formed argument of the YAML directive"),s=parseInt(o[1],10),c=parseInt(o[2],10),s!==1&&gn(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=c<2,c!==1&&c!==2&&nae(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:a(function(e,r,n){var o,s;n.length!==2&&gn(e,"TAG directive accepts exactly two arguments"),o=n[0],s=n[1],Oht.test(o)||gn(e,"ill-formed tag handle (first argument) of the TAG directive"),T_.call(e.tagMap,o)&&gn(e,'there is a previously declared suffix for "'+o+'" tag handle'),Qht.test(s)||gn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{gn(e,"tag prefix is malformed: "+s)}e.tagMap[o]=s},"handleTagDirective")};function I_(t,e,r,n){var o,s,c,l;if(e<r){if(l=t.input.slice(e,r),n)for(o=0,s=l.length;o<s;o+=1)c=l.charCodeAt(o),c===9||32<=c&&c<=1114111||gn(t,"expected valid JSON character");else C1r.test(l)&&gn(t,"the stream contains non-printable characters");t.result+=l}}a(I_,"captureSegment");function xht(t,e,r,n){var o,s,c,l;for(Wl.isObject(r)||gn(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(r),c=0,l=o.length;c<l;c+=1)s=o[c],T_.call(e,s)||(e[s]=r[s],n[s]=!0)}a(xht,"mergeMappings");function CM(t,e,r,n,o,s,c,l,u){var d,p;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),d=0,p=o.length;d<p;d+=1)Array.isArray(o[d])&&gn(t,"nested arrays are not supported inside keys"),typeof o=="object"&&yht(o[d])==="[object Object]"&&(o[d]="[object Object]");if(typeof o=="object"&&yht(o)==="[object Object]"&&(o="[object Object]"),o=String(o),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(d=0,p=s.length;d<p;d+=1)xht(t,e,s[d],r);else xht(t,e,s,r);else!t.json&&!T_.call(r,o)&&T_.call(e,o)&&(t.line=c||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,gn(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(e,o,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[o]=s,delete r[o];return e}a(CM,"storeMappingPair");function gke(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):gn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}a(gke,"readLineBreak");function Il(t,e,r){for(var n=0,o=t.input.charCodeAt(t.position);o!==0;){for(;SP(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(e&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(J1(o))for(gke(t),o=t.input.charCodeAt(t.position),n++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&nae(t,"deficient indentation"),n}a(Il,"skipSeparationSpace");function sae(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||e0(r)))}a(sae,"testDocumentSeparator");function Ake(t,e){e===1?t.result+=" ":e>1&&(t.result+=Wl.repeat(`
`,e-1))}a(Ake,"writeFoldedLines");function _1r(t,e,r){var n,o,s,c,l,u,d,p,m=t.kind,h=t.result,g;if(g=t.input.charCodeAt(t.position),e0(g)||yM(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(o=t.input.charCodeAt(t.position+1),e0(o)||r&&yM(o)))return!1;for(t.kind="scalar",t.result="",s=c=t.position,l=!1;g!==0;){if(g===58){if(o=t.input.charCodeAt(t.position+1),e0(o)||r&&yM(o))break}else if(g===35){if(n=t.input.charCodeAt(t.position-1),e0(n))break}else{if(t.position===t.lineStart&&sae(t)||r&&yM(g))break;if(J1(g))if(u=t.line,d=t.lineStart,p=t.lineIndent,Il(t,!1,-1),t.lineIndent>=e){l=!0,g=t.input.charCodeAt(t.position);continue}else{t.position=c,t.line=u,t.lineStart=d,t.lineIndent=p;break}}l&&(I_(t,s,c,!1),Ake(t,t.line-u),s=c=t.position,l=!1),SP(g)||(c=t.position+1),g=t.input.charCodeAt(++t.position)}return I_(t,s,c,!1),t.result?!0:(t.kind=m,t.result=h,!1)}a(_1r,"readPlainScalar");function S1r(t,e){var r,n,o;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=o=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(I_(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,o=t.position;else return!0;else J1(r)?(I_(t,n,o,!0),Ake(t,Il(t,!1,e)),n=o=t.position):t.position===t.lineStart&&sae(t)?gn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);gn(t,"unexpected end of the stream within a single quoted scalar")}a(S1r,"readSingleQuotedScalar");function R1r(t,e){var r,n,o,s,c,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return I_(t,r,t.position,!0),t.position++,!0;if(l===92){if(I_(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),J1(l))Il(t,!1,e);else if(l<256&&Uht[l])t.result+=qht[l],t.position++;else if((c=b1r(l))>0){for(o=c,s=0;o>0;o--)l=t.input.charCodeAt(++t.position),(c=E1r(l))>=0?s=(s<<4)+c:gn(t,"expected hexadecimal character");t.result+=T1r(s),t.position++}else gn(t,"unknown escape sequence");r=n=t.position}else J1(l)?(I_(t,r,n,!0),Ake(t,Il(t,!1,e)),r=n=t.position):t.position===t.lineStart&&sae(t)?gn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}gn(t,"unexpected end of the stream within a double quoted scalar")}a(R1r,"readDoubleQuotedScalar");function k1r(t,e){var r=!0,n,o,s,c=t.tag,l,u=t.anchor,d,p,m,h,g,A=Object.create(null),y,v,b,I;if(I=t.input.charCodeAt(t.position),I===91)p=93,g=!1,l=[];else if(I===123)p=125,g=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),I=t.input.charCodeAt(++t.position);I!==0;){if(Il(t,!0,e),I=t.input.charCodeAt(t.position),I===p)return t.position++,t.tag=c,t.anchor=u,t.kind=g?"mapping":"sequence",t.result=l,!0;r?I===44&&gn(t,"expected the node content, but found ','"):gn(t,"missed comma between flow collection entries"),v=y=b=null,m=h=!1,I===63&&(d=t.input.charCodeAt(t.position+1),e0(d)&&(m=h=!0,t.position++,Il(t,!0,e))),n=t.line,o=t.lineStart,s=t.position,vM(t,e,tae,!1,!0),v=t.tag,y=t.result,Il(t,!0,e),I=t.input.charCodeAt(t.position),(h||t.line===n)&&I===58&&(m=!0,I=t.input.charCodeAt(++t.position),Il(t,!0,e),vM(t,e,tae,!1,!0),b=t.result),g?CM(t,l,A,v,y,b,n,o,s):m?l.push(CM(t,null,A,v,y,b,n,o,s)):l.push(y),Il(t,!0,e),I=t.input.charCodeAt(t.position),I===44?(r=!0,I=t.input.charCodeAt(++t.position)):r=!1}gn(t,"unexpected end of the stream within a flow collection")}a(k1r,"readFlowCollection");function P1r(t,e){var r,n,o=lke,s=!1,c=!1,l=e,u=0,d=!1,p,m;if(m=t.input.charCodeAt(t.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(t.kind="scalar",t.result="";m!==0;)if(m=t.input.charCodeAt(++t.position),m===43||m===45)lke===o?o=m===43?Aht:y1r:gn(t,"repeat of a chomping mode identifier");else if((p=I1r(m))>=0)p===0?gn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?gn(t,"repeat of an indentation width identifier"):(l=e+p-1,c=!0);else break;if(SP(m)){do m=t.input.charCodeAt(++t.position);while(SP(m));if(m===35)do m=t.input.charCodeAt(++t.position);while(!J1(m)&&m!==0)}for(;m!==0;){for(gke(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!c||t.lineIndent<l)&&m===32;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!c&&t.lineIndent>l&&(l=t.lineIndent),J1(m)){u++;continue}if(t.lineIndent<l){o===Aht?t.result+=Wl.repeat(`
`,s?1+u:u):o===lke&&s&&(t.result+=`
`);break}for(n?SP(m)?(d=!0,t.result+=Wl.repeat(`
`,s?1+u:u)):d?(d=!1,t.result+=Wl.repeat(`
`,u+1)):u===0?s&&(t.result+=" "):t.result+=Wl.repeat(`
`,u):t.result+=Wl.repeat(`
`,s?1+u:u),s=!0,c=!0,u=0,r=t.position;!J1(m)&&m!==0;)m=t.input.charCodeAt(++t.position);I_(t,r,t.position,!1)}return!0}a(P1r,"readBlockScalar");function Eht(t,e){var r,n=t.tag,o=t.anchor,s=[],c,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,gn(t,"tab characters must not be used in indentation")),!(u!==45||(c=t.input.charCodeAt(t.position+1),!e0(c))));){if(l=!0,t.position++,Il(t,!0,-1)&&t.lineIndent<=e){s.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,vM(t,e,Fht,!1,!0),s.push(t.result),Il(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)gn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=o,t.kind="sequence",t.result=s,!0):!1}a(Eht,"readBlockSequence");function D1r(t,e,r){var n,o,s,c,l,u,d=t.tag,p=t.anchor,m={},h=Object.create(null),g=null,A=null,y=null,v=!1,b=!1,I;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=m),I=t.input.charCodeAt(t.position);I!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,gn(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),s=t.line,(I===63||I===58)&&e0(n))I===63?(v&&(CM(t,m,h,g,A,null,c,l,u),g=A=y=null),b=!0,v=!0,o=!0):v?(v=!1,o=!0):gn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,I=n;else{if(c=t.line,l=t.lineStart,u=t.position,!vM(t,r,Lht,!1,!0))break;if(t.line===s){for(I=t.input.charCodeAt(t.position);SP(I);)I=t.input.charCodeAt(++t.position);if(I===58)I=t.input.charCodeAt(++t.position),e0(I)||gn(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(CM(t,m,h,g,A,null,c,l,u),g=A=y=null),b=!0,v=!1,o=!1,g=t.tag,A=t.result;else if(b)gn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=d,t.anchor=p,!0}else if(b)gn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=d,t.anchor=p,!0}if((t.line===s||t.lineIndent>e)&&(v&&(c=t.line,l=t.lineStart,u=t.position),vM(t,e,rae,!0,o)&&(v?A=t.result:y=t.result),v||(CM(t,m,h,g,A,y,c,l,u),g=A=y=null),Il(t,!0,-1),I=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&I!==0)gn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&CM(t,m,h,g,A,null,c,l,u),b&&(t.tag=d,t.anchor=p,t.kind="mapping",t.result=m),b}a(D1r,"readBlockMapping");function B1r(t){var e,r=!1,n=!1,o,s,c;if(c=t.input.charCodeAt(t.position),c!==33)return!1;if(t.tag!==null&&gn(t,"duplication of a tag property"),c=t.input.charCodeAt(++t.position),c===60?(r=!0,c=t.input.charCodeAt(++t.position)):c===33?(n=!0,o="!!",c=t.input.charCodeAt(++t.position)):o="!",e=t.position,r){do c=t.input.charCodeAt(++t.position);while(c!==0&&c!==62);t.position<t.length?(s=t.input.slice(e,t.position),c=t.input.charCodeAt(++t.position)):gn(t,"unexpected end of the stream within a verbatim tag")}else{for(;c!==0&&!e0(c);)c===33&&(n?gn(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(e-1,t.position+1),Oht.test(o)||gn(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),c=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),x1r.test(s)&&gn(t,"tag suffix cannot contain flow indicator characters")}s&&!Qht.test(s)&&gn(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{gn(t,"tag name is malformed: "+s)}return r?t.tag=s:T_.call(t.tagMap,o)?t.tag=t.tagMap[o]+s:o==="!"?t.tag="!"+s:o==="!!"?t.tag="tag:yaml.org,2002:"+s:gn(t,'undeclared tag handle "'+o+'"'),!0}a(B1r,"readTagProperty");function N1r(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&gn(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!e0(r)&&!yM(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&gn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}a(N1r,"readAnchorProperty");function M1r(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!e0(n)&&!yM(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&gn(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),T_.call(t.anchorMap,r)||gn(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Il(t,!0,-1),!0}a(M1r,"readAlias");function vM(t,e,r,n,o){var s,c,l,u=1,d=!1,p=!1,m,h,g,A,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=c=l=rae===r||Fht===r,n&&Il(t,!0,-1)&&(d=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;B1r(t)||N1r(t);)Il(t,!0,-1)?(d=!0,l=s,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=d||o),(u===1||rae===r)&&(tae===r||Lht===r?y=e:y=e+1,v=t.position-t.lineStart,u===1?l&&(Eht(t,v)||D1r(t,v,y))||k1r(t,y)?p=!0:(c&&P1r(t,y)||S1r(t,y)||R1r(t,y)?p=!0:M1r(t)?(p=!0,(t.tag!==null||t.anchor!==null)&&gn(t,"alias node should not have any properties")):_1r(t,y,tae===r)&&(p=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(p=l&&Eht(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&gn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,h=t.implicitTypes.length;m<h;m+=1)if(A=t.implicitTypes[m],A.resolve(t.result)){t.result=A.construct(t.result),t.tag=A.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(T_.call(t.typeMap[t.kind||"fallback"],t.tag))A=t.typeMap[t.kind||"fallback"][t.tag];else for(A=null,g=t.typeMap.multi[t.kind||"fallback"],m=0,h=g.length;m<h;m+=1)if(t.tag.slice(0,g[m].tag.length)===g[m].tag){A=g[m];break}A||gn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&A.kind!==t.kind&&gn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+A.kind+'", not "'+t.kind+'"'),A.resolve(t.result,t.tag)?(t.result=A.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):gn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||p}a(vM,"composeNode");function L1r(t){var e=t.position,r,n,o,s=!1,c;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(c=t.input.charCodeAt(t.position))!==0&&(Il(t,!0,-1),c=t.input.charCodeAt(t.position),!(t.lineIndent>0||c!==37));){for(s=!0,c=t.input.charCodeAt(++t.position),r=t.position;c!==0&&!e0(c);)c=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),o=[],n.length<1&&gn(t,"directive name must not be less than one character in length");c!==0;){for(;SP(c);)c=t.input.charCodeAt(++t.position);if(c===35){do c=t.input.charCodeAt(++t.position);while(c!==0&&!J1(c));break}if(J1(c))break;for(r=t.position;c!==0&&!e0(c);)c=t.input.charCodeAt(++t.position);o.push(t.input.slice(r,t.position))}c!==0&&gke(t),T_.call(vht,n)?vht[n](t,n,o):nae(t,'unknown document directive "'+n+'"')}if(Il(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Il(t,!0,-1)):s&&gn(t,"directives end mark is expected"),vM(t,t.lineIndent-1,rae,!1,!0),Il(t,!0,-1),t.checkLineBreaks&&v1r.test(t.input.slice(e,t.position))&&nae(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&sae(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Il(t,!0,-1));return}if(t.position<t.length-1)gn(t,"end of the stream or a document separator is expected");else return}a(L1r,"readDocument");function $ht(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new w1r(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,gn(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)L1r(r);return r.documents}a($ht,"loadDocuments");function F1r(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=$ht(t,r);if(typeof e!="function")return n;for(var o=0,s=n.length;o<s;o+=1)e(n[o])}a(F1r,"loadAll$1");function O1r(t,e){var r=$ht(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Zp("expected a single document in the stream, but found more")}}a(O1r,"load$1");var Q1r=F1r,U1r=O1r,Wht={loadAll:Q1r,load:U1r},jht=Object.prototype.toString,Ght=Object.prototype.hasOwnProperty,yke=65279,q1r=9,jq=10,H1r=13,$1r=32,W1r=33,j1r=34,dke=35,G1r=37,V1r=38,z1r=39,K1r=42,Vht=44,Y1r=45,iae=58,J1r=61,X1r=62,Z1r=63,evr=64,zht=91,Kht=93,tvr=96,Yht=123,rvr=124,Jht=125,sf={};sf[0]="\\0";sf[7]="\\a";sf[8]="\\b";sf[9]="\\t";sf[10]="\\n";sf[11]="\\v";sf[12]="\\f";sf[13]="\\r";sf[27]="\\e";sf[34]='\\"';sf[92]="\\\\";sf[133]="\\N";sf[160]="\\_";sf[8232]="\\L";sf[8233]="\\P";var nvr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ivr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ovr(t,e){var r,n,o,s,c,l,u;if(e===null)return{};for(r={},n=Object.keys(e),o=0,s=n.length;o<s;o+=1)c=n[o],l=String(e[c]),c.slice(0,2)==="!!"&&(c="tag:yaml.org,2002:"+c.slice(2)),u=t.compiledTypeMap.fallback[c],u&&Ght.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[c]=l;return r}a(ovr,"compileStyleMap");function svr(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Zp("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Wl.repeat("0",n-e.length)+e}a(svr,"encodeHex");var avr=1,Gq=2;function cvr(t){this.schema=t.schema||Mht,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Wl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=ovr(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Gq:avr,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}a(cvr,"State");function bht(t,e){for(var r=Wl.repeat(" ",e),n=0,o=-1,s="",c,l=t.length;n<l;)o=t.indexOf(`
`,n),o===-1?(c=t.slice(n),n=l):(c=t.slice(n,o+1),n=o+1),c.length&&c!==`
`&&(s+=r),s+=c;return s}a(bht,"indentString");function fke(t,e){return`
`+Wl.repeat(" ",t.indent*e)}a(fke,"generateNextLine");function lvr(t,e){var r,n,o;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(o=t.implicitTypes[r],o.resolve(e))return!0;return!1}a(lvr,"testImplicitResolving");function oae(t){return t===$1r||t===q1r}a(oae,"isWhitespace");function Vq(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==yke||65536<=t&&t<=1114111}a(Vq,"isPrintable");function Iht(t){return Vq(t)&&t!==yke&&t!==H1r&&t!==jq}a(Iht,"isNsCharOrWhitespace");function Tht(t,e,r){var n=Iht(t),o=n&&!oae(t);return(r?n:n&&t!==Vht&&t!==zht&&t!==Kht&&t!==Yht&&t!==Jht)&&t!==dke&&!(e===iae&&!o)||Iht(e)&&!oae(e)&&t===dke||e===iae&&o}a(Tht,"isPlainSafe");function uvr(t){return Vq(t)&&t!==yke&&!oae(t)&&t!==Y1r&&t!==Z1r&&t!==iae&&t!==Vht&&t!==zht&&t!==Kht&&t!==Yht&&t!==Jht&&t!==dke&&t!==V1r&&t!==K1r&&t!==W1r&&t!==rvr&&t!==J1r&&t!==X1r&&t!==z1r&&t!==j1r&&t!==G1r&&t!==evr&&t!==tvr}a(uvr,"isPlainSafeFirst");function dvr(t){return!oae(t)&&t!==iae}a(dvr,"isPlainSafeLast");function $q(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}a($q,"codePointAt");function Xht(t){var e=/^\n* /;return e.test(t)}a(Xht,"needIndentIndicator");var Zht=1,pke=2,egt=3,tgt=4,AM=5;function fvr(t,e,r,n,o,s,c,l){var u,d=0,p=null,m=!1,h=!1,g=n!==-1,A=-1,y=uvr($q(t,0))&&dvr($q(t,t.length-1));if(e||c)for(u=0;u<t.length;d>=65536?u+=2:u++){if(d=$q(t,u),!Vq(d))return AM;y=y&&Tht(d,p,l),p=d}else{for(u=0;u<t.length;d>=65536?u+=2:u++){if(d=$q(t,u),d===jq)m=!0,g&&(h=h||u-A-1>n&&t[A+1]!==" ",A=u);else if(!Vq(d))return AM;y=y&&Tht(d,p,l),p=d}h=h||g&&u-A-1>n&&t[A+1]!==" "}return!m&&!h?y&&!c&&!o(t)?Zht:s===Gq?AM:pke:r>9&&Xht(t)?AM:c?s===Gq?AM:pke:h?tgt:egt}a(fvr,"chooseScalarStyle");function pvr(t,e,r,n,o){t.dump=function(){if(e.length===0)return t.quotingType===Gq?'""':"''";if(!t.noCompatMode&&(nvr.indexOf(e)!==-1||ivr.test(e)))return t.quotingType===Gq?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),c=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(d){return lvr(t,d)}switch(a(u,"testAmbiguity"),fvr(e,l,t.indent,c,u,t.quotingType,t.forceQuotes&&!n,o)){case Zht:return e;case pke:return"'"+e.replace(/'/g,"''")+"'";case egt:return"|"+wht(e,t.indent)+_ht(bht(e,s));case tgt:return">"+wht(e,t.indent)+_ht(bht(mvr(e,c),s));case AM:return'"'+hvr(e)+'"';default:throw new Zp("impossible error: invalid scalar style")}}()}a(pvr,"writeScalar");function wht(t,e){var r=Xht(t)?String(e):"",n=t[t.length-1]===`
`,o=n&&(t[t.length-2]===`
`||t===`
`),s=o?"+":n?"":"-";return r+s+`
`}a(wht,"blockHeader");function _ht(t){return t[t.length-1]===`
`?t.slice(0,-1):t}a(_ht,"dropEndingNewline");function mvr(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var d=t.indexOf(`
`);return d=d!==-1?d:t.length,r.lastIndex=d,Sht(t.slice(0,d),e)}(),o=t[0]===`
`||t[0]===" ",s,c;c=r.exec(t);){var l=c[1],u=c[2];s=u[0]===" ",n+=l+(!o&&!s&&u!==""?`
`:"")+Sht(u,e),o=s}return n}a(mvr,"foldString");function Sht(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,o=0,s,c=0,l=0,u="";n=r.exec(t);)l=n.index,l-o>e&&(s=c>o?c:l,u+=`
`+t.slice(o,s),o=s+1),c=l;return u+=`
`,t.length-o>e&&c>o?u+=t.slice(o,c)+`
`+t.slice(c+1):u+=t.slice(o),u.slice(1)}a(Sht,"foldLine");function hvr(t){for(var e="",r=0,n,o=0;o<t.length;r>=65536?o+=2:o++)r=$q(t,o),n=sf[r],!n&&Vq(r)?(e+=t[o],r>=65536&&(e+=t[o+1])):e+=n||svr(r);return e}a(hvr,"escapeString");function gvr(t,e,r){var n="",o=t.tag,s,c,l;for(s=0,c=r.length;s<c;s+=1)l=r[s],t.replacer&&(l=t.replacer.call(r,String(s),l)),(LE(t,e,l,!1,!1)||typeof l>"u"&&LE(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=o,t.dump="["+n+"]"}a(gvr,"writeFlowSequence");function Rht(t,e,r,n){var o="",s=t.tag,c,l,u;for(c=0,l=r.length;c<l;c+=1)u=r[c],t.replacer&&(u=t.replacer.call(r,String(c),u)),(LE(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&LE(t,e+1,null,!0,!0,!1,!0))&&((!n||o!=="")&&(o+=fke(t,e)),t.dump&&jq===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=s,t.dump=o||"[]"}a(Rht,"writeBlockSequence");function Avr(t,e,r){var n="",o=t.tag,s=Object.keys(r),c,l,u,d,p;for(c=0,l=s.length;c<l;c+=1)p="",n!==""&&(p+=", "),t.condenseFlow&&(p+='"'),u=s[c],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),LE(t,e,u,!1,!1)&&(t.dump.length>1024&&(p+="? "),p+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),LE(t,e,d,!1,!1)&&(p+=t.dump,n+=p));t.tag=o,t.dump="{"+n+"}"}a(Avr,"writeFlowMapping");function yvr(t,e,r,n){var o="",s=t.tag,c=Object.keys(r),l,u,d,p,m,h;if(t.sortKeys===!0)c.sort();else if(typeof t.sortKeys=="function")c.sort(t.sortKeys);else if(t.sortKeys)throw new Zp("sortKeys must be a boolean or a function");for(l=0,u=c.length;l<u;l+=1)h="",(!n||o!=="")&&(h+=fke(t,e)),d=c[l],p=r[d],t.replacer&&(p=t.replacer.call(r,d,p)),LE(t,e+1,d,!0,!0,!0)&&(m=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,m&&(t.dump&&jq===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,m&&(h+=fke(t,e)),LE(t,e+1,p,!0,m)&&(t.dump&&jq===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,o+=h));t.tag=s,t.dump=o||"{}"}a(yvr,"writeBlockMapping");function kht(t,e,r){var n,o,s,c,l,u;for(o=r?t.explicitTypes:t.implicitTypes,s=0,c=o.length;s<c;s+=1)if(l=o[s],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,jht.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Ght.call(l.represent,u))n=l.represent[u](e,u);else throw new Zp("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}a(kht,"detectType");function LE(t,e,r,n,o,s,c){t.tag=null,t.dump=r,kht(t,r,!1)||kht(t,r,!0);var l=jht.call(t.dump),u=n,d;n&&(n=t.flowLevel<0||t.flowLevel>e);var p=l==="[object Object]"||l==="[object Array]",m,h;if(p&&(m=t.duplicates.indexOf(r),h=m!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(o=!1),h&&t.usedDuplicates[m])t.dump="*ref_"+m;else{if(p&&h&&!t.usedDuplicates[m]&&(t.usedDuplicates[m]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(yvr(t,e,t.dump,o),h&&(t.dump="&ref_"+m+t.dump)):(Avr(t,e,t.dump),h&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!c&&e>0?Rht(t,e-1,t.dump,o):Rht(t,e,t.dump,o),h&&(t.dump="&ref_"+m+t.dump)):(gvr(t,e,t.dump),h&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&pvr(t,t.dump,e,s,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Zp("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(d=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",t.dump=d+" "+t.dump)}return!0}a(LE,"writeNode");function Cvr(t,e){var r=[],n=[],o,s;for(mke(t,r,n),o=0,s=n.length;o<s;o+=1)e.duplicates.push(r[n[o]]);e.usedDuplicates=new Array(s)}a(Cvr,"getDuplicateReferences");function mke(t,e,r){var n,o,s;if(t!==null&&typeof t=="object")if(o=e.indexOf(t),o!==-1)r.indexOf(o)===-1&&r.push(o);else if(e.push(t),Array.isArray(t))for(o=0,s=t.length;o<s;o+=1)mke(t[o],e,r);else for(n=Object.keys(t),o=0,s=n.length;o<s;o+=1)mke(t[n[o]],e,r)}a(mke,"inspectNode");function vvr(t,e){e=e||{};var r=new cvr(e);r.noRefs||Cvr(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),LE(r,0,n,!0,!0)?r.dump+`
`:""}a(vvr,"dump$1");var xvr=vvr,Evr={dump:xvr};function Cke(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}a(Cke,"renamed");var vXi=Wht.load,xXi=Wht.loadAll,vke=Evr.dump;var EXi=Cke("safeLoad","load"),bXi=Cke("safeLoadAll","loadAll"),IXi=Cke("safeDump","dump");var RP=Ne(Am());var xke=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{a(this,"SkillDump")}},ku=class{constructor(){this.dump=new Sr(25);this.promptsDump=new Sr(1)}static{a(this,"ConversationDumper")}addResolvedSkill(e,r,n){let o=this.getDump(e);o.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new xke,this.dump.set(e,r)),r}addPrompt(e,r,n){let o=this.promptsDump.get(e);o===void 0&&(o=new Map,this.promptsDump.set(e,o)),o.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function rgt(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}a(rgt,"filterConversationTurns");function oke(t){return rgt(t).getLastTurn()?.id}a(oke,"getLastTurnId");async function uht(t){let e=rgt(t.conversation),r=oke(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let o=t.ctx.get(ku).getDump(r),s=Tvr(o,e.turns);pn.debug(t.ctx,`conversation.dump
`,`
`+s);let c=await wvr(o,t.ctx);return RP.default`
        ${Ivr(t.conversation,r)}
        ${bvr(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${s}
        \`\`\`${c?`
${c}`:""}
        `}a(uht,"getConversationDump");function bvr(t){let e=t.get(un);return RP.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}a(bvr,"getEditorInfoDumpMessage");function Ivr(t,e){return RP.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}a(Ivr,"getInfoDumpMessage");async function dht(t,e,r){let n=t.ctx.get($l),o="# Available skills",s=n.getDescriptors().filter(c=>t.ctx.get(ro).getSupportedSkills(t.conversation.id).includes(c.id));if(r&&(s=s.filter(c=>c.id===r)),s.length===0)return`No skill with id ${r} available`;for(let c of s)o+=`
- ${c.id}`;t.turn.request.message&&tn(t.turn.request.message).trim().length>0&&(o+=`

**User message**: ${tn(t.turn.request.message)}`);for(let c of s){o+=`
## ${c.id}`,o+=RP.default`
            \n\n
            **Description**
            
            ${c.description()}`;let l=n.getSkill(c.id),u=await l?.resolver(t).resolveSkill(t);if(u){o+=RP.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${vke(u)}
                \`\`\``;let d=await l?.processor(t).processSkill(u,t);if(d){let p=typeof d=="string"?d:d.elide(1e3).getText();o+=RP.default`
                    \n\n
                    **Processed value**
                    
                    ${p}`}else o+=`

**Unprocessable**`}else o+=`

**Unresolvable**`}return o}a(dht,"getSkillsDump");function Tvr(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,o)=>{let s={request:tn(n.request.message)};return n.response&&(s.response=tn(n.response.message)),s})};return vke(r)}a(Tvr,"toSimulationFormat");async function wvr(t,e){let r=t.resolutions.map(s=>s.files).flat(),n=r.filter((s,c)=>s&&r.indexOf(s)===c),o;for(let s of n)if(s&&s.status==="included"){o||(o=`The following files have been used:
`);let c=await e.get(In).getOrReadTextDocument(s),l;c.status==="valid"&&(l=c.document);let u=l?.getText();pn.debug(e,`conversation.dump.file
`,u),o+=`
**${s.uri}**

\`\`\`${l?.detectedLanguageId}
${u}
\`\`\``}return o}a(wvr,"fileDump");f();function Eke(t,e){let r=Oi(e.tokenizer),n=0;for(let o of t)n+=e.baseTokensPerMessage,o.role&&(n+=r.tokenize(o.role).length),o.name&&(n+=r.tokenize(o.name).length+e.baseTokensPerName),o.content&&(n+=r.tokenize(tn(o.content)).length);return n+=e.baseTokensPerCompletion,n}a(Eke,"countMessagesTokens");f();function ngt(t,e,r,n,o){let s=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),c=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),l=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",u=n?`The user is using ${n} as their operating system.`:"",d=o?`You use the ${o} large language model.`:"",p=r?`The user is logged in as ${r} on GitHub.`:"";return[s,u,d,p,l,c].filter(m=>m&&m!="").join(`
`)}a(ngt,"chatBasePrompt");f();f();f();f();f();function igt(t){let e=t.split(`
`),r=[],n=!1,o=[];for(let s of e)s.startsWith("```")?(n?(r.push([H0(o.join(`
`)),1]),o=[],r.push([new Ht([s]),1])):r.push([new Ht([s]),1]),n=!n):n?o.push(s):r.push([new Ht([s]),.8]);return n&&(r.push([H0(o.join(`
`)),1]),r.push([new Ht(["```"]),1])),new Ht(r)}a(igt,"fromMessage");function xM(t){let e=bke(t),r=[];for(let n=0;n<e.length;n++){let o=e[n],s=ogt(o.request,n+1),c=o.response&&o.response?.type!=="meta"?ogt(o.response):"",l=s;c!==""&&(l+=`
`+c+(e.length>1&&n!==e.length-1?`
`:"")),r.push(igt(l))}return r.length>0?new Ht([[new Ht(["Consider the following conversation history:"]),1],[E_(r,"inverseLinear"),1]]):null}a(xM,"fromHistory");var _vr=5;function bke(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&tn(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,_vr).reverse()}a(bke,"filterTurns");function ogt(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=tn(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${tn(t.message)}`}a(ogt,"formatTurnMessage");f();f();f();var Svr=4,Ike={skillIds:[]},aae=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{a(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,o,s){let c=e.conversation.getLastTurn().request.message;if(r.length>0){let l=await Go.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),u={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:l},d=await this.ctx.get(gd).toPrompt(e,u),p=o.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:d.tokens}),m={modelConfiguration:l,messages:d.messages,uiKind:s,llmInteraction:e.toLlmInteraction()};if(d.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");m.tool_choice=d.toolConfig.tool_choice,m.tools=d.toolConfig.tools;let h=await this.chatFetcher.fetchResponse(m,n,p);return h.type!=="success"&&(Rr.error(this.ctx,"Failed to fetch prompt context, trying again..."),h=await this.chatFetcher.fetchResponse(m,n,p)),await e.ctx.get(bl).inspectFetchResult(h),this.handleResult(h,p,tn(c),s,d.toolConfig)}else return Ike}handleResult(e,r,n,o,s){if(e.type!=="success")return this.telemetryError(r,e),Ike;let l;if(e.toolCalls&&e.toolCalls.length>0)l=s.extractArguments(e.toolCalls[0]).skillIds?.slice(0,Svr);else return Rr.error(this.ctx,"Missing tool call in meta prompt response"),Ike;let u=r.extendedBy({uiKind:o,skillIds:l?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),d=u.extendedBy({messageText:n});return Nt(this.ctx,`${pu(o)}.metaPrompt`,u,0),Nt(this.ctx,`${pu(o)}.promptContext`,d,1),{skillIds:l??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Nt(this.ctx,"conversation.promptContextError",n,1)}};f();f();f();var cae=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{a(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return he(e,r,"org.springframework.boot","Spring Boot"),he(e,r,"jakarta.jakartaee-api","Jakarta EE"),he(e,r,"javax:javaee-api","Java EE"),he(e,r,"org.apache.struts:struts2-core","Apache Struts"),he(e,r,"org.hibernate:hibernate-core","Hibernate"),he(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),he(e,r,"javax.faces:jsf-api","JSF"),he(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return he(e,r,"com.google.guava","Google Guava"),he(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),he(e,r,"org.apache.commons:commons-io","Apache Commons IO"),he(e,r,"joda-time:joda-time","Joda-Time"),he(e,r,"com.google.code.gson:gson","Google Gson"),he(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),he(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),he(e,r,"org.apache.commons:commons-net","Apache Commons Net"),he(e,r,"org.apache.poi:poi","Apache POI"),he(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),he(e,r,"junit:junit","JUnit"),he(e,r,"org.testng:testng","TestNG"),he(e,r,"org.spockframework:spock-core","Spock"),he(e,r,"io.cucumber:cucumber-java","Cucumber"),he(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return he(e,r,"org.mockito","Mockito"),he(e,r,"org.assertj","AssertJ"),he(e,r,"org.hamcrest","Hamcrest"),he(e,r,"org.powermock","PowerMock"),he(e,r,"org.jmock","JMock"),he(e,r,"org.easymock","EasyMock"),he(e,r,"org.jmockit:jmockit","JMockit"),he(e,r,"com.github.tomakehurst:wiremock","WireMock"),he(e,r,"org.dbunit:dbunit","DBUnit"),he(e,r,"com.icegreen:greenmail","GreenMail"),he(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),he(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),he(e,r,"io.rest-assured:rest-assured","Rest-Assured"),he(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),he(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},lae=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{a(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"@types/node","Node.js"),he(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||he(e,r,"react","React"),he(e,r,"angular","Angular"),he(e,r,"vue","Vue.js"),he(e,r,"ember","Ember.js"),he(e,r,"backbone","Backbone.js"),he(e,r,"meteor","Meteor"),he(e,r,"polymer","Polymer"),he(e,r,"aurelia","Aurelia"),he(e,r,"knockout","Knockout.js"),he(e,r,"dojo","Dojo Toolkit"),he(e,r,"mithril","Mithril.js"),he(e,r,"marionette","Marionette.js"),he(e,r,"marko","Marko.js"),he(e,r,"svelte","Svelte"),he(e,r,"hyperapp","Hyperapp"),he(e,r,"inferno","Inferno.js"),he(e,r,"preact","Preact"),he(e,r,"riot","Riot.js"),he(e,r,"moon","Moon.js"),he(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return he(e,r,"lodash","Lodash"),he(e,r,"moment","Moment.js"),he(e,r,"axios","Axios"),he(e,r,"redux","Redux"),he(e,r,"recoil","Recoil"),he(e,r,"jquery","jQuery"),he(e,r,"d3","D3.js"),he(e,r,"underscore","Underscore.js"),he(e,r,"ramda","Ramda"),he(e,r,"immutable","Immutable.js"),he(e,r,"rxjs","RxJS"),he(e,r,"three","Three.js"),he(e,r,"socket.io","Socket.IO"),he(e,r,"express","Express.js"),he(e,r,"next","Next.js"),he(e,r,"puppeteer","Puppeteer"),he(e,r,"cheerio","Cheerio"),he(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"jest","Jest"),he(e,r,"mocha","Mocha"),he(e,r,"jasmine","Jasmine"),he(e,r,"ava","AVA"),he(e,r,"qunit","QUnit"),he(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return he(e,r,"chai","Chai"),he(e,r,"sinon","Sinon"),he(e,r,"enzyme","Enzyme"),he(e,r,"protractor","Protractor"),he(e,r,"supertest","Supertest"),he(e,r,"nock","Nock"),he(e,r,"cypress","Cypress"),he(e,r,"@testing-library/react","React Testing Library"),r}},uae=class{constructor(){this.languageId="go"}static{a(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"github.com/gorilla/mux","Gorilla Mux"),he(e,r,"github.com/go-chi/chi","Chi"),he(e,r,"github.com/gin-gonic/gin","Gin"),he(e,r,"github.com/labstack/echo","Echo"),he(e,r,"github.com/revel/revel","Revel"),he(e,r,"github.com/astaxie/beego","Beego"),he(e,r,"github.com/go-martini/martini","Martini"),he(e,r,"github.com/gobuffalo/buffalo","Buffalo"),he(e,r,"github.com/goji/goji","Goji"),he(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return he(e,r,"net/http","net/http"),he(e,r,"fmt","fmt"),he(e,r,"io","io"),he(e,r,"time","time"),he(e,r,"math","math"),he(e,r,"strconv","strconv"),he(e,r,"strings","strings"),he(e,r,"sort","sort"),he(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"github.com/onsi/ginkgo","ginkgo"),he(e,r,"github.com/onsi/gomega","gomega"),he(e,r,"github.com/stretchr/testify","testify"),he(e,r,"gopkg.in/check.v1","gocheck"),he(e,r,"github.com/franela/goblin","goblin"),he(e,r,"github.com/DATA-DOG/godog","godog"),he(e,r,"github.com/stesla/gospec","gospec"),he(e,r,"github.com/rjeczalik/gotest","gotest"),he(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return he(e,r,"github.com/stretchr/testify","Testify"),he(e,r,"github.com/smartystreets/goconvey","GoConvey"),he(e,r,"github.com/onsi/ginkgo","Ginkgo"),he(e,r,"github.com/golang/mock","GoMock"),he(e,r,"gopkg.in/check.v1","GoCheck"),he(e,r,"github.com/franela/goblin","Goblin"),he(e,r,"github.com/DATA-DOG/godog","GoDog"),he(e,r,"github.com/onsi/gomega","Gomega"),he(e,r,"github.com/stesla/gospec","GoSpec"),he(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},dae=class{constructor(){this.languageId=["python","jupyter"]}static{a(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"flask","Flask"),he(e,r,"django","Django"),he(e,r,"pyramid","Pyramid"),he(e,r,"tornado","Tornado"),he(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return he(e,r,"requests","requests"),he(e,r,"numpy","numpy"),he(e,r,"pandas","pandas"),he(e,r,"scipy","scipy"),he(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"pytest","Pytest"),he(e,r,"unittest","Unittest"),he(e,r,"doctest","Doctest"),he(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mock","Mock"),he(e,r,"hypothesis","Hypothesis"),he(e,r,"behave","Behave"),he(e,r,"lettuce","Lettuce"),he(e,r,"testify","Testify"),he(e,r,"pyhamcrest","PyHamcrest"),r}},fae=class{constructor(){this.languageId=["php","blade"]}static{a(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"laravel/framework","Laravel"),he(e,r,"symfony/symfony","Symfony"),he(e,r,"slim/slim","Slim"),he(e,r,"cakephp/cakephp","CakePHP"),he(e,r,"yiisoft/yii2","Yii"),he(e,r,"zendframework/zendframework","Zend Framework"),he(e,r,"phalcon/cphalcon","Phalcon"),he(e,r,"bcosca/fatfree","Fat-Free"),he(e,r,"fuel/fuel","FuelPHP"),he(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return he(e,r,"monolog/monolog","Monolog"),he(e,r,"vlucas/phpdotenv","PHP dotenv"),he(e,r,"symfony/console","Symfony Console"),he(e,r,"guzzlehttp/guzzle","GuzzleHttp"),he(e,r,"ramsey/uuid","Ramsey UUID"),he(e,r,"doctrine/orm","Doctrine ORM"),he(e,r,"php-di/php-di","PHP-DI"),he(e,r,"phpunit/php-timer","PHPUnit Timer"),he(e,r,"symfony/finder","Symfony Finder"),he(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"phpunit/phpunit","PHPUnit"),he(e,r,"behat/behat","Behat"),he(e,r,"phpspec/phpspec","PHPSpec"),he(e,r,"codeception/codeception","Codeception"),he(e,r,"atoum/atoum","Atoum"),he(e,r,"pestphp/pest","PestPHP"),he(e,r,"kahlan/kahlan","Kahlan"),he(e,r,"peridot-php/peridot","Peridot"),he(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mockery/mockery","Mockery"),he(e,r,"php-mock/php-mock","PHP-Mock"),he(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),he(e,r,"padraic/mockery","Padraic Mockery"),he(e,r,"phpspec/prophecy","PHPSpec Prophecy"),he(e,r,"phpunit/php-invoker","PHPUnit Invoker"),he(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),he(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),he(e,r,"phpunit/php-timer","PHPUnit Timer"),he(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},pae=class{constructor(){this.languageId="csharp"}static{a(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"Microsoft.NETCore.App",".NET Core"),he(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return he(e,r,"EntityFramework","Entity Framework"),he(e,r,"Newtonsoft.Json","Newtonsoft.Json"),he(e,r,"AutoMapper","AutoMapper"),he(e,r,"Serilog","Serilog"),he(e,r,"Dapper","Dapper"),he(e,r,"Polly","Polly"),he(e,r,"FluentValidation","FluentValidation"),he(e,r,"MediatR","MediatR"),he(e,r,"Hangfire","Hangfire"),he(e,r,"RabbitMQ.Client","RabbitMQ.Client"),he(e,r,"MassTransit","MassTransit"),he(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),he(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),he(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),he(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"xunit","xUnit"),he(e,r,"NUnit","NUnit"),he(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return he(e,r,"Moq","Moq"),he(e,r,"FluentAssertions","FluentAssertions"),he(e,r,"Bogus","Bogus"),he(e,r,"RestSharp","RestSharp"),he(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},mae=class{constructor(){this.languageId="dart"}static{a(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"flutter","Flutter"),he(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return he(e,r,"dartx","dartx"),he(e,r,"provider","Provider"),he(e,r,"rxdart","RxDart"),he(e,r,"dio","Dio"),he(e,r,"json_serializable","json_serializable"),he(e,r,"freezed","Freezed"),he(e,r,"moor","Moor"),he(e,r,"hive","Hive"),he(e,r,"http","http"),he(e,r,"path","path"),he(e,r,"intl","intl"),he(e,r,"equatable","equatable"),he(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"test","test"),he(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mockito","mockito"),he(e,r,"bloc_test","bloc_test"),r}},hae=class{constructor(){this.languageId="ruby"}static{a(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"rails","Rails"),he(e,r,"sinatra","Sinatra"),he(e,r,"hanami","Hanami"),he(e,r,"grape","Grape"),he(e,r,"roda","Roda"),he(e,r,"padrino","Padrino"),he(e,r,"cuba","Cuba"),he(e,r,"ramaze","Ramaze"),he(e,r,"nyara","Nyara"),he(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return he(e,r,"active_record","ActiveRecord"),he(e,r,"sequel","Sequel"),he(e,r,"rom","ROM"),he(e,r,"datamapper","DataMapper"),he(e,r,"mongoid","Mongoid"),he(e,r,"neo4j","Neo4j"),he(e,r,"redis","Redis"),he(e,r,"cassandra","Cassandra"),he(e,r,"couchrest","CouchRest"),he(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"rspec","RSpec"),he(e,r,"minitest","Minitest"),he(e,r,"cucumber","Cucumber"),he(e,r,"spinach","Spinach"),he(e,r,"turnip","Turnip"),he(e,r,"bacon","Bacon"),he(e,r,"shoulda","Shoulda"),he(e,r,"test-unit","Test::Unit"),he(e,r,"wrong","Wrong"),he(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return he(e,r,"factory_bot","FactoryBot"),he(e,r,"faker","Faker"),he(e,r,"ffaker","FFaker"),he(e,r,"fabrication","Fabrication"),he(e,r,"machinist","Machinist"),he(e,r,"mocha","Mocha"),he(e,r,"flexmock","FlexMock"),he(e,r,"rr","RR"),he(e,r,"bourne","Bourne"),he(e,r,"not_a_mock","NotAMock"),r}},gae=class{constructor(){this.languageId="rust"}static{a(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"tokio","tokio"),he(e,r,"async-std","async-std"),he(e,r,"hyper","hyper"),he(e,r,"actix-web","actix-web"),he(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return he(e,r,"serde","serde"),he(e,r,"regex","regex"),he(e,r,"rand","rand"),he(e,r,"log","log"),he(e,r,"lazy_static","lazy_static"),he(e,r,"libc","libc"),he(e,r,"futures","futures"),he(e,r,"rayon","rayon"),he(e,r,"reqwest","reqwest"),he(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"test-case","test-case"),he(e,r,"proptest","proptest"),he(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mockall","mockall"),he(e,r,"double","double"),he(e,r,"rstest","rstest"),he(e,r,"mockiato","mockiato"),he(e,r,"mock_derive","mock_derive"),he(e,r,"mocktopus","mocktopus"),he(e,r,"mockers","mockers"),he(e,r,"mock_it","mock_it"),r}},Aae=class{constructor(){this.languageId=["c","cpp"]}static{a(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function he(t,e,r,n){let o=t.libraries.find(s=>s.name.toLowerCase().indexOf(r.toLowerCase())>-1);o&&e.push({name:n,version:o.version})}a(he,"addFromLibraries");var yae=class{constructor(e,r){this.languageId=e;this.delegates=r}static{a(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function agt(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}a(agt,"determineProgrammingLanguage");var sgt=[new cae,new lae,new uae,new dae,new fae,new pae,new mae,new hae,new gae,new Aae];function cgt(t){let e=sgt.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new yae(t,sgt);return new Tke(e)}a(cgt,"getMetadataLookup");var Tke=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{a(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(o=>o.name===n.name)||r.push(n)}),r}};var lgt=E.Object({name:E.String(),version:E.Optional(E.String())}),ugt=E.Object({language:E.Object({id:E.String(),name:E.String(),version:E.Optional(E.String())}),libraries:E.Array(lgt),buildTools:E.Array(lgt)}),wke=class{constructor(e){this.turnContext=e}static{a(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Ht([`The user is working on a project with the following characteristics:
`]),1]);let n=cgt(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Ht(r)}addProgrammingLanguage(e,r){let n=agt(e);this.turnContext.collectLabel(X1,n),r.push([new Ht([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(s=>{this.turnContext.collectLabel(X1,`${s.name}${s.version?" "+s.version:""}`)});let o=n.map(s=>`  - ${s.name}${s.version?" "+s.version:""}`).join(`
`);e.push([new Ht([`${r}
${o}`]),1])}}},X1="project-metadata",Cae=class{constructor(e){this._resolver=e;this.id=X1;this.type="explicit"}static{a(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new wke(e)}};f();var dgt=Ne(require("path"));var _ke=class{constructor(e){this.turnContext=e}static{a(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(In),n=[],o=this.filterIncludedFiles(e),s=(await this.toFileChunks(o,r)).filter(c=>c!==void 0).flat();if(s.length>0)return n.push([new Ht(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...s),new Ht(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),o=ua(n);if(await this.turnContext.collectFile(xae,r.uri,o),n.status==="valid"){let s=e.getRelativePath(n.document);if(o==="included"){let c=new V1(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${s}\`:`,1],[c.fromAllCode({addLineNumbers:!1}),1]]}else if(o==="empty")return[[new Ht([`The referenced file \`${s}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Ht([`The referenced file \`${dgt.basename(r.uri)}\` is content excluded.`]),1]]}},Ske=class{static{a(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},xae="references",vae=class{constructor(){this.id=xae;this.type="implicit"}static{a(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new Ske}processor(e){return new _ke(e)}};var kP=a(()=>[X1,Ey,xae,nf],"mandatorySkills"),Eae=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new aae(e,this.chatFetcher)}static{a(this,"ConversationContextCollector")}async collectContext(e,r,n,o,s,c){let l=[];if(s){let u=s.requiredSkills?await s.requiredSkills(e.ctx):[];l.push(...u.filter(d=>!kP().includes(d)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,o)).skillIds.reverse().forEach(d=>{!l.includes(d)&&!kP().includes(d)&&l.push(d)});if(c){let u=await c.additionalSkills(e.ctx);l.push(...u.filter(d=>!kP().includes(d)))}return l.push(...kP()),l=l.filter(u=>!this.isIgnoredSkill(u,e.turn)),{skillIds:e.ctx.get(ro).filterSupportedSkills(e.conversation.id,l)}}async selectableSkillDescriptors(e,r,n){let o=await this.getNonSelectableSkills(e),s=e.get(ro).getSupportedSkills(r.id),c=e.get($l).getDescriptors(),l=[];for(let u of c){if(o.includes(u.id)||!s.includes(u.id))continue;(u.isAvailable?await u.isAvailable(e):!0)&&!this.isIgnoredSkill(u.id,n)&&l.push(u)}return l}async getNonSelectableSkills(e){let r=await Y1(e),n=(await Promise.all(r.map(o=>o.additionalSkills(e)))).flat();return[...kP(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};f();f();var bae=class{constructor(e,r,n,o){this.ctx=e;this.conversation=r;this.turn=n;this.progress=o;this.rounds=[]}static{a(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,o){let s=this.getRound(e);if(s||(s={roundId:e,reply:""},this.rounds.push(s)),s.toolCalls?.find(l=>l.id===r))Rr.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let l={id:r,name:n,progressMessage:o,status:"running"};s.toolCalls=[l],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[s]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,o=>{o.status="completed",o.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let o=n.toolCalls?.filter(s=>s.status==="running").map(s=>(s.status=e,s));if(o&&o.length>0)return n.toolCalls=o,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,o=>{o.status="error",o.error=n||"Unknown error"})}async update(e,r,n){let o=this.rounds.find(c=>c.roundId===e);o||(o={roundId:e,reply:""},this.rounds.push(o));let s=o.toolCalls?.find(c=>c.id===r);s?(n(s),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})):Rr.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var Iae=class{constructor(e,r,n,o){this.ctx=e;this.conversation=r;this.turn=n;this.progress=o;this.steps=[]}static{a(this,"Steps")}async start(e,r,n){let o=this.steps.find(s=>s.id===e);if(!o)o={id:e,title:r,description:n,status:"running"},this.steps.push(o),await this.progress.report(this.conversation,this.turn,{steps:[o]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(o=>o.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Rr.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};var w_=class{constructor(e,r,n,o){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=o;this.skillResolver=new Rke(this),this.steps=new Iae(e,r,n,e.get(Ls)),this.collector=new kke(r,n,e.get(Ls)),this.agentToolCalls=new bae(e,r,n,e.get(Ls))}static{a(this,"TurnContext")}setResolvedModelConfiguration(e){this.turn.resolvedModelConfiguration=e}toLlmInteraction(){if(this.conversation.source==="inline")return Kd.user("conversation-inline",this.turn.telemetryId);{let e=this.turn.chatMode==="Agent"?"conversation-agent":"conversation-panel";return this.agentToolCalls.rounds.length?Kd.agent(e,this.turn.telemetryId):Kd.user(e,this.turn.telemetryId)}}async collectFile(e,r,n,o){let s={type:"file",collector:e,uri:r,status:n};o&&(s.range=o),await this.collector.collect(s)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(Ls).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}clearCopilotEditsSessionHeader(){this.copilotEditsSessionHeader=void 0}setCopilotEditsSessionHeader(e){this.copilotEditsSessionHeader=e}},Tae=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{a(this,"CycleError")}},zq=class extends Error{static{a(this,"ConversationAbortError")}constructor(e){super(e)}},Rke=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{a(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(ro).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(ku).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let o=await this.newlyResolve(e);return this.resolveStack.pop(),o}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new Tae(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get($l).getSkill(e);try{let o=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(o)return this.turnContext.ctx.get(ku).addResolvedSkill(this.turnContext.turn.id,e,o),o}catch(o){if(o instanceof Tae||o instanceof zq)throw o;Rr.exception(this.turnContext.ctx,o,`Error while resolving skill ${e}`)}}},kke=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{a(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function fgt(t,e){let[r,n,o]=await kvr(t,e);return o.push(...Bvr(t)),r.length>0||n.length>0?[new Ht([[new Ht(["Consider the additional context:"]),1],[E_(r,"inverseLinear"),.9],...n]),o]:[null,o]}a(fgt,"fromSkills");async function kvr(t,e){let r=[],n=[],o=[],s=[...t.turn.skills].reverse();for(let c of s){if(!await Nvr(t,c.skillId,e?.languageId??""))continue;let[l,u]=await Pvr(t,c.skillId);l&&(kP().indexOf(c.skillId)===-1?n.push(l):o.push(l)),r.push(u)}return n.reverse(),o.reverse(),r.reverse(),[n,o,r]}a(kvr,"handleSkillsInReverse");async function Pvr(t,e){let n=t.ctx.get($l).getSkill(e);try{let o=Date.now(),s=await t.skillResolver.resolve(e),c=Date.now()-o;if(s){let l=n?.processor(t),u=Date.now(),d=await l?.processSkill(s,t),p=Date.now()-u;return d?await Dvr(t,n,l,d,c,p):[void 0,await wae(t,n,"unprocessable",void 0,c,p)]}else return[void 0,await wae(t,n,"unresolvable",void 0,c)]}catch(o){if(Rr.exception(t.ctx,o,`Error while resolving skill ${e}`),o instanceof zq)throw o;return[void 0,await wae(t,n,"failed")]}}a(Pvr,"safelyProcessSkill");async function Dvr(t,e,r,n,o,s){let c;return typeof n=="string"?c=new Ht([[n,1]]):c=n,[[c,r?.value()||0],await wae(t,e,"resolved",c,o,s)]}a(Dvr,"handleProcessedSkill");async function wae(t,e,r,n,o,s){let l=t.collector.collectiblesForCollector(e?.id??"unknown").filter(d=>d.type==="file"),u={skillId:e?.id??"unknown",resolution:r,files:l,resolutionTimeMs:o,processingTimeMs:s};if(n){let d=await t.ctx.get(ya).getBestChatModelConfig(ph("user")),p=n.elide(d.maxRequestTokens).getText();u.tokensPreEliding=Oi(d.tokenizer).tokenLength(p)}return t.ctx.get(ku).addResolution(t.turn.id,u),u}a(wae,"determineResolution");function Bvr(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}a(Bvr,"handleIgnoredSkills");async function Nvr(t,e,r){if(e!==X1&&e!==Ey)return!0;let n=t.ctx.get(Lt),o=await n.fetchTokenAndUpdateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(o)?e===X1:e===Ey}a(Nvr,"includeSkill");var pgt=Ne(Am());var PP=class{static{a(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],o=xM(e.conversation.turns.slice(0,-1));o!==null&&n.push([o,.6]);let[s,c]=await this.elidableSkills(e,r);return s!==null&&(o!==null&&n.push(["",.1]),n.push([s,.8])),[new Ht(n),c]}async elidableSkills(e,r){return await fgt(e,r)}async promptContent(e,r,n){let o,s={includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1},c=e.turn.extractContextFilesUri();e.turn.workspaceFolders&&e.turn.workspaceFolders.length>0?o=await oy.getInstructions(e.ctx,e.turn.workspaceFolders,s,c):e.turn.workspaceFolder&&(o=await oy.getInstructions(e.ctx,[e.turn.workspaceFolder],s,c));let l=cm(e.conversation.getLastTurn().request.message),u;o?typeof l=="string"?u=o+`

`+l:u=[{type:"text",text:o},...l]:u=l;let[d,p]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:d},{role:"system",content:this.suffix(e)},{role:"user",content:u}],p]}},_ae=class extends PP{static{a(this,"PanelUserPromptStrategy")}suffix(e){return pgt.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var mgt=Ne(Am());var Sae=class extends PP{static{a(this,"InlineUserPromptStrategy")}suffix(e){return mgt.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var Pke=Ne(Am());var Rae=class{static{a(this,"MetaPromptStrategy")}elidableContent(e){let r=xM(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Ht(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return Pke.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=Out(e.map(n=>n.id));return E.Object({skillIds:E.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:Lw(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,o=e.examples?e.examples():[];return o.length>0&&(n+=`
Skill Examples:
${o.map(s=>`  - ${s}`).join(`
`)}`),n}promptContent(e,r,n){let o=e.conversation.getLastTurn().request.message,s=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:s},{role:"system",content:this.suffix(n)},{role:"user",content:Pke.default`
                    This is the user's question: 
                    ${tn(o).trim()} 
                `.trim()}],[]]}};f();var hgt=Ne(Am());var kae=class{static{a(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:E.Object({suggestedTitle:E.String({description:"The suggested title for the conversation"}),followUp:E.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=Lw(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return hgt.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=xM(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Ht(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var Mvr=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:E.Object({keywords:E.Array(E.Object({keyword:E.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:E.Array(E.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],Pae=class extends PP{static{a(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let o=cm(e.conversation.getLastTurn().request.message),s=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:o}];return Promise.resolve([s,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:Mvr,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=Lw(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let o=new Set;for(let s of n)if(!(!YX(s,"keyword")||!s.keyword||typeof s.keyword!="string")&&(o.add(s.keyword.toLowerCase()),!(!YX(s,"variations")||!s.variations||!Array.isArray(s.variations))))for(let c of s.variations)typeof c=="string"&&o.add(c.toLowerCase());return{keywords:Array.from(o)??[]}}}}};var Dke=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{a(this,"PromptStrategyDescriptor")}};function Kq(t,e,r){return new Dke(t,e,r)}a(Kq,"descriptor");var ggt=[Kq("user",ph("user"),()=>new _ae),Kq("inline",ph("inline"),()=>new Sae),Kq("meta",ph("meta"),()=>new Rae),Kq("suggestions",ph("suggestions"),()=>new kae),Kq("synonyms",ph("synonyms"),()=>new Pae)],Dae=class{static{a(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let o=ggt.find(s=>s.promptType===r&&s.modelFamilies.includes(n));if(!o)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return o.strategy(e)}get descriptors(){return ggt}};var ygt=require("console");var gd=class{constructor(e,r=new Dae){this.ctx=e;this.promptStrategyFactory=r}static{a(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),o=await this.ctx.get(Mi).getSession(),[s,c]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,o),r),[l,u]=this.elideChatMessages(s,r.modelConfiguration);return await this.ctx.get(bl).inspectPrompt({type:r.promptType,prompt:Agt(l),tokens:u}),this.ctx.get(ku).addPrompt(e.turn.id,Agt(l),r.promptType),{messages:l,tokens:u,skillResolutions:c,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(l=>!(typeof l.content=="string"||Array.isArray(l.content)));(0,ygt.assert)(n.length==1,"Only one elidable message is supported right now.");let o=this.computeNonElidableTokens(e,r),s=r.maxRequestTokens-o,c=e.map(l=>typeof l.content=="string"||Array.isArray(l.content)?l:{role:l.role,content:Lvr(l.content.elide(s).getText())}).filter(l=>l.content.length>0);return[c,Eke(c,r)]}computeNonElidableTokens(e,r){let n=e.filter(o=>typeof o.content=="string");return n.push({role:"user",content:""}),Eke(n,r)}safetyPrompt(e,r){let n=this.ctx.get(un).getEditorInfo().readableName??this.ctx.get(un).getEditorInfo().name,o=Fvr(process.platform);return ngt(this.ctx,n,r?.login,o,e)}};function Lvr(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}a(Lvr,"processResultOfElidableText");function Agt(t){return t.map(e=>tn(e.content)).join(`

`)}a(Agt,"debugChatMessages");function Fvr(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}a(Fvr,"mapPlatformToOs");var __=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{a(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,o){let s=await Go.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),c={promptType:"suggestions",modelConfiguration:s},l=await this.ctx.get(gd).toPrompt(e,c),u=o.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:l.tokens}),d={modelConfiguration:s,messages:l.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(l.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");d.tool_choice=l.toolConfig.tool_choice,d.tools=l.toolConfig.tools;let p=await this.chatFetcher.fetchResponse(d,r,u);if(p.type!=="success"&&(Rr.error(this.ctx,"Failed to fetch suggestions, trying again..."),p=await this.chatFetcher.fetchResponse(d,r,u)),p.type==="success"){if(!p.toolCalls||p.toolCalls.length===0){Rr.error(this.ctx,"Missing tool call in suggestions response");return}let m=p.toolCalls[0],{followUp:h,suggestedTitle:g}=l.toolConfig.extractArguments(m);if(!h||!g){Rr.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:h.trim(),suggestedTitle:g.trim(),promptTokenLen:l.tokens,numTokens:p.numTokens+m.approxNumTokens}}else if(p.type==="successMultiple"){Rr.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(p.type==="tool_calls"){Rr.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Rr.error(this.ctx,`Failed to fetch suggestions due to reason: ${p.reason}`);return}}};f();f();var DP=class extends Error{static{a(this,"CodingAgentError")}constructor(e){super(e),this.name=this.constructor.name}},Bae=class extends DP{static{a(this,"CodingAgentAuthenticationError")}constructor(e){super(e)}},BP=class extends DP{static{a(this,"CodingAgentApiError")}constructor(e){super(e)}},EM=class extends BP{static{a(this,"CodingAgentUnauthorizedError")}constructor(e){super(e)}},Iy=class extends DP{static{a(this,"CodingAgentValidationError")}constructor(e){super(e)}};var Cgt=new ft("CodingAgentClient"),Nae=class{constructor(e,r){this.ctx=e;this.timeout=r??3e4}static{a(this,"CodingAgentClient")}getBaseUrl(){return"https://api.githubcopilot.com"}async createCodingTask(e,r,n,o,s){this.validateCreateTaskParams(e,r,n,o);let c=await this.getAccessToken(),u=`${this.getBaseUrl()}/agents/swe/v0/jobs/${n}/${o}`,d={problem_statement:`${e}

${r}`,event_type:"manual"},p={Authorization:`Bearer ${c}`,"Content-Type":"application/json",Accept:"application/json",...fh(this.ctx)};if(s?.isCancellationRequested)throw new z0;Cgt.debug(this.ctx,`Creating coding agent task for ${n}/${o} with title: ${e}`);let h=await this.ctx.get(Qr).fetch(u,{method:"POST",headers:p,body:JSON.stringify(d),timeout:this.timeout});if(s?.isCancellationRequested)throw new z0;return await this.handleCreateTaskResponse(h)}validateCreateTaskParams(e,r,n,o){if(!e?.trim())throw new Iy("Title is required and cannot be empty");if(!r?.trim())throw new Iy("Body is required and cannot be empty");if(!n?.trim())throw new Iy("Owner is required and cannot be empty");if(!o?.trim())throw new Iy("Repository name is required and cannot be empty")}async getAccessToken(){let r=await this.ctx.get(Mi).getSession();if(!r?.accessToken)throw new Bae("Failed to create coding task: Not authenticated with GitHub");return r.accessToken}async handleCreateTaskResponse(e){if(!e.ok){let o=await e.text().catch(()=>e.statusText);throw e.status===401?new EM("User does not have access to create PRs or push to the specified repository."):new BP(`API request failed: HTTP ${e.status} - ${o}`)}let r;try{r=await e.json()}catch(o){let s=o instanceof Error?o.message:JSON.stringify(o);throw new BP(`Failed to parse API response as JSON: ${s}`)}let n=r.pull_request?.html_url;if(!n)throw new BP("No pull request URL returned from API");return Cgt.debug(this.ctx,`Coding task created successfully: ${n}`),n}};f();f();f();f();var Z1=Ne(xa());function Bke(t){return{isCancellationRequested:t.isCancellationRequested,onCancellationRequested:a(e=>{let r=t.onCancellationRequested(e);return{dispose:a(()=>r.dispose(),"dispose")}},"onCancellationRequested")}}a(Bke,"adaptCancellationToken");function vgt(t){return{report:a(e=>{"value"in e&&typeof e.value=="string"?t({text:e.value}):t({})},"report")}}a(vgt,"adaptProgressCallback");function xgt(t){return{modelMaxPromptTokens:t.maxRequestTokens}}a(xgt,"createEndpointInfo");function Egt(t){let e={role:Ovr(t.role),content:Qvr(t.content)};return t.role===Z1.Raw.ChatRole.Assistant&&"toolCalls"in t&&t.toolCalls&&(e.tool_calls=t.toolCalls.map(r=>({id:r.id,type:r.type,function:r.function,approxNumTokens:0}))),t.role===Z1.Raw.ChatRole.Tool&&"toolCallId"in t&&t.toolCallId&&(e.tool_call_id=t.toolCallId),Object.entries(t).forEach(([r,n])=>{["role","content","toolCalls","toolCallId"].includes(r)||(e[r]=n)}),e}a(Egt,"convertToCopilotChatMessage");function Ovr(t){switch(t){case Z1.Raw.ChatRole.System:return"system";case Z1.Raw.ChatRole.User:return"user";case Z1.Raw.ChatRole.Assistant:return"assistant";case Z1.Raw.ChatRole.Tool:return"tool";default:return"user"}}a(Ovr,"convertRole");function Qvr(t){return typeof t=="string"?t:Array.isArray(t)?t.length===1&&t[0].type===Z1.Raw.ChatCompletionContentPartKind.Text?t[0].text:t.map(e=>e.type===Z1.Raw.ChatCompletionContentPartKind.Text?{type:"text",text:e.text}:e.type===Z1.Raw.ChatCompletionContentPartKind.Image?{type:"image_url",image_url:e.imageUrl}:{type:"text",text:String(e.type)}):String(t)}a(Qvr,"convertContent");f();var FE=Ne(xa());var Mae=class extends FE.PromptRenderer{constructor(r,n,o,s,c){super(o,r,n,s);this.options=c}static{a(this,"InternalPromptRenderer")}async renderWithOptions(r,n,o){let s=await super.render(r,n);return{...this.options,...o}.collapseSystemMessages&&this.collapseConsecutiveSystemMessages(s.messages),s}collapseConsecutiveSystemMessages(r){let n=[],o=null;for(let s of r)if(s.role===FE.Raw.ChatRole.System&&o?.role===FE.Raw.ChatRole.System){let c=o.content.at(-1),l=s.content.at(0);c&&l&&c.type===FE.Raw.ChatCompletionContentPartKind.Text&&l.type===FE.Raw.ChatCompletionContentPartKind.Text?(c.text=c.text.trimEnd()+`
`+l.text,o.content=o.content.concat(s.content.slice(1))):(o.content.push({type:FE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),o.content=o.content.concat(s.content))}else n.push(s),o=s.role===FE.Raw.ChatRole.System?s:null;r.length=0,r.push(...n)}};f();f();function bgt(t){if(!t.startsWith("data:image/"))throw new Error("Could not read image: invalid base64 image string");let e=t.split(",")[1];switch(Wvr(e)){case"image/png":return Uvr(e);case"image/gif":return qvr(e);case"image/jpeg":case"image/jpg":return Hvr(e);case"image/webp":return $vr(e);default:throw new Error("Unsupported image format")}}a(bgt,"getImageDimensions");function Uvr(t){let e=atob(t.slice(0,50)).slice(16,24),r=Uint8Array.from(e,o=>o.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint32(0,!1),height:n.getUint32(4,!1)}}a(Uvr,"getPngDimensions");function qvr(t){let e=atob(t.slice(0,50)),r=Uint8Array.from(e,o=>o.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint16(6,!0),height:n.getUint16(8,!0)}}a(qvr,"getGifDimensions");function Hvr(t){let e=atob(t),r=Uint8Array.from(e,s=>s.charCodeAt(0)),n=r.length,o=2;for(;o<n;){let s=r[o]<<8|r[o+1],c=r[o+2]<<8|r[o+3];if(s>=65472&&s<=65474){let l=new DataView(r.buffer,o+5,4);return{height:l.getUint16(0,!1),width:l.getUint16(2,!1)}}o+=2+c}throw new Error("JPEG dimensions not found")}a(Hvr,"getJpegDimensions");function $vr(t){let e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);if(e.slice(0,4)!=="RIFF"||e.slice(8,12)!=="WEBP")throw new Error("Not a valid WebP image.");let n=e.slice(12,16);if(n==="VP8 "){let o=(r[26]|r[27]<<8)&16383,s=(r[28]|r[29]<<8)&16383;return{width:o,height:s}}else if(n==="VP8L"){let o=(r[21]|r[22]<<8)&16383,s=(r[23]|r[24]<<8)&16383;return{width:o,height:s}}else if(n==="VP8X"){let o=((r[24]|r[25]<<8|r[26]<<16)&16777215)+1,s=((r[27]|r[28]<<8|r[29]<<16)&16777215)+1;return{width:o,height:s}}else throw new Error("Unsupported WebP format.")}a($vr,"getWebPDimensions");function Wvr(t){if(!t||t.length<4)return;let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return e[r]}a(Wvr,"getMimeType");var NP=Ne(xa());var jvr=3,Gvr=1,Nke=class{constructor(e,r){this.tokenizer=e;this.mode=NP.OutputMode.Raw;this._cache=new Sr(5e3);this.baseTokensPerMessage=r.baseTokensPerMessage||jvr,this.baseTokensPerName=r.baseTokensPerName||Gvr}static{a(this,"PromptTsxTokenizer")}tokenLength(e){if(typeof e=="string")return this._textTokenLength(e);switch(e.type){case NP.Raw.ChatCompletionContentPartKind.Text:return this._textTokenLength(e.text);case NP.Raw.ChatCompletionContentPartKind.Opaque:return e.tokenUsage||0;case NP.Raw.ChatCompletionContentPartKind.Image:return this.calculateImageTokenCost(e.imageUrl.url,e.imageUrl.detail);case NP.Raw.ChatCompletionContentPartKind.CacheBreakpoint:return 0}}_textTokenLength(e){if(!e)return 0;let r=this._cache.get(e);return r===void 0&&(r=this.tokenizer.tokenLength(e),this._cache.set(e,r)),r}countMessageTokens(e){let r=this.baseTokensPerMessage;typeof e.content=="string"?r+=this.tokenLength(e.content):Array.isArray(e.content)&&(r+=e.content.reduce((s,c)=>s+this.tokenLength(c),0));let n=e;n.name&&(r+=this.baseTokensPerName,r+=this.tokenLength(n.name));let o=e;if(o.tool_calls){let s=o.tool_calls,c=0;for(let l of s)c+=this.countObjectTokens({id:l.id,type:l.type,function:l.function});r+=Math.floor(c*1.5)}return r}countMessagesTokens(e){let r=this.baseTokensPerMessage;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){if(!e||e.length===0)return 0;let n=16,o=8;for(let s of e)n+=o,n+=this.countObjectTokens({name:s.name,description:s.description,parameters:s.inputSchema});return Math.floor(n*1.1)}countObjectTokens(e){let r=0;for(let[n,o]of Object.entries(e||{}))if(o){if(r+=this.tokenLength(n),typeof o=="string")r+=this.tokenLength(o);else if(o&&typeof o=="object"){let s=o;if("type"in s&&s.type==="text"&&"text"in s&&typeof s.text=="string")r+=this.tokenLength(s.text);else if("type"in s&&s.type==="image_url"&&"image_url"in s){let c=s.image_url;c.url&&c.url.startsWith("data")&&(r+=this.calculateImageTokenCost(c.url,c.detail))}else r+=this.countObjectTokens(s)}}return r}calculateImageTokenCost(e,r){let{width:n,height:o}=bgt(e);if(r==="low")return 85;if(n>2048||o>2048){let l=2048/Math.max(n,o);n=Math.round(n*l),o=Math.round(o*l)}let s=768/Math.min(n,o);return n=Math.round(n*s),o=Math.round(o*s),Math.ceil(n/512)*Math.ceil(o/512)*170+85}};function Igt(t){let e=Oi(t.tokenizer);return new Nke(e,t)}a(Igt,"createPromptTsxTokenizer");var S_=class t{static{a(this,"TsxPromptRenderer")}constructor(e,r,n,o={}){let s=xgt(n),c=Igt(n);this._internalRenderer=new Mae(e,r,s,c,o)}static create(e,r,n,o={}){return new t(e,r,n,o)}async renderPrompt(e,r,n){let o=e?vgt(e):void 0,s=r?Bke(r):void 0,c=await this._internalRenderer.renderWithOptions(o,s,n);return{messages:c.messages.map(Egt),tokenCount:c.tokenCount,hasIgnoredFiles:c.hasIgnoredFiles}}async countTokens(e){let r=e?Bke(e):void 0;return(await this._internalRenderer.renderWithOptions(void 0,r)).tokenCount}};async function Mke(t,e,r,n,o,s){return await S_.create(t,e,r,s).renderPrompt(n,o,s)}a(Mke,"renderTsxPrompt");f();var _gt=Ne(xa());var Yn=class extends _gt.PromptElement{static{a(this,"CopilotPromptElement")}constructor(e){super(e)}async prepare(e,r,n){if(!this.prepareCopilot)return;let o=r?Tgt(r):void 0,s=n?wgt(n):void 0;return await this.prepareCopilot(e,o,s)}render(e,r,n,o){let s=n?Tgt(n):void 0,c=o?wgt(o):void 0;return this.renderCopilot(e,r,s,c)}};function Tgt(t){return e=>{let r=e.text||"";if(t?.report&&r){let n={value:r};t.report(n)}}}a(Tgt,"adaptProgressCallbackFromVSCode");function wgt(t){return{get isCancellationRequested(){return t?.isCancellationRequested??!1},onCancellationRequested:a((e,r)=>{let n=t?.onCancellationRequested(e,r);return{dispose:a(()=>{n?.dispose()},"dispose")}},"onCancellationRequested")}}a(wgt,"adaptCancellationTokenFromVSCode");f();f();f();var Tl=Ne(xa());function Vvr(t){let e=t.filter(n=>n.type==="image_url"),r=t.filter(n=>n.type==="text").map(n=>n.text).join("");return{imageUrls:e,textContent:r}}a(Vvr,"separateTextAndImages");function zvr(t){return t.map(e=>vscpp(Tl.Image,{src:e.image_url.url,detail:e.image_url.detail}))}a(zvr,"createImageElements");function Lae(t){let{imageUrls:e,textContent:r}=Vvr(t);return e.length===0?[vscpp(vscppf,null,r)]:[vscpp(Tl.TextChunk,null,vscpp(vscppf,null,r)),...zvr(e)]}a(Lae,"renderMixedContent");function Lke(t){return t==null?[]:t.map(r=>({id:r.id||"",type:"function",function:{name:r.function.name,arguments:typeof r.function.arguments=="string"?r.function.arguments:JSON.stringify(r.function.arguments)},approxNumTokens:r.approxNumTokens}))}a(Lke,"convertToPromptTsxToolCall");function Fae(t){switch(t.role){case"assistant":return Kvr(t);case"tool":return Yvr(t);case"user":return Jvr(t);case"system":return Xvr(t);case"function":throw new Error("ChatRole.Function is not supported in prompt-tsx conversion. Use ChatRole.Tool instead.");default:throw new Error(`Unsupported chat role: ${String(t.role)}`)}}a(Fae,"convertChatMessageToPromptTsx");function Kvr(t){return typeof t.content=="string"?vscpp(Tl.AssistantMessage,{toolCalls:Lke(t.tool_calls)},vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(Tl.AssistantMessage,{toolCalls:Lke(t.tool_calls)},Lae(t.content)):vscpp(Tl.AssistantMessage,{toolCalls:Lke(t.tool_calls)},vscpp(vscppf,null,JSON.stringify(t.content)))}a(Kvr,"renderAssistantMessage");function Yvr(t){return typeof t.content=="string"?vscpp(Tl.ToolMessage,{toolCallId:t.tool_call_id||""},vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(Tl.ToolMessage,{toolCallId:t.tool_call_id||""},Lae(t.content)):vscpp(Tl.ToolMessage,{toolCallId:t.tool_call_id||""},vscpp(vscppf,null,JSON.stringify(t.content)))}a(Yvr,"renderToolMessage");function Jvr(t){return typeof t.content=="string"?vscpp(Tl.UserMessage,null,vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(Tl.UserMessage,null,Lae(t.content)):vscpp(Tl.UserMessage,null,vscpp(vscppf,null,JSON.stringify(t.content)))}a(Jvr,"renderUserMessage");function Xvr(t){return typeof t.content=="string"?vscpp(Tl.SystemMessage,null,vscpp(vscppf,null,t.content)):Array.isArray(t.content)?vscpp(Tl.SystemMessage,null,Lae(t.content)):vscpp(Tl.SystemMessage,null,vscpp(vscppf,null,JSON.stringify(t.content)))}a(Xvr,"renderSystemMessage");var Zvr=new ft("conversationHistoryPrompt"),bM=class extends Yn{static{a(this,"ConversationHistoryPrompt")}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:cm(n.request.message)}),n.response){let o=Ine(n.response.message,!0);o.forEach(s=>r.push(this.fixToolCallsInResponse(s,o)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,o=[];for(let s of n)r.some(l=>l.role==="tool"&&l.tool_call_id===s.id)?o.push(s):Zvr.warn(this.props.ctx,`Tool call ${s.id} does not have a result in the response. Removing it from the tool calls history.`);return{...e,tool_calls:o}}return e}renderCopilot(){let e=this.createChatMessagesFromHistory(this.props.historyTurns);return vscpp(vscppf,null,e.map((r,n)=>Fae(r)))}};var Qae=Ne(xa());var Oae=class extends Yn{static{a(this,"SummaryPrompt")}renderCopilot(){return vscpp(vscppf,null,vscpp(Qae.SystemMessage,null,"You are an expert at summarizing chat conversations.",vscpp("br",null),vscpp("br",null),"You will be provided:",vscpp("br",null),vscpp("br",null),"- A series of user/assistant message pairs in chronological order",vscpp("br",null),"- A final user message indicating the user's intent.",vscpp("br",null),vscpp("br",null),"Your task is to:",vscpp("br",null),vscpp("br",null),"- Create a detailed summary of the conversation that captures the user's intent and key information.",vscpp("br",null),vscpp("br",null),"Keep in mind:",vscpp("br",null),vscpp("br",null),"- The user is iterating on a feature specification, bug fix, or other common programming task.",vscpp("br",null),"- There may be relevant code snippets or files referenced in the conversation.",vscpp("br",null),"- The user is collaborating with the assistant to refine their ideas and solutions, course-correcting the assistant as needed.",vscpp("br",null),"- The user will provide feedback on the assistant's suggestions and may request changes or improvements.",vscpp("br",null),"- Disregard messages that the user has indicated are incorrect, irrelevant, or unhelpful.",vscpp("br",null),"- Preserve relevant and actionable context and key information.",vscpp("br",null),"- If the conversation is long or discusses several tasks, keep the summary focused on the task indicated by the user's intent.",vscpp("br",null),"- Always prefer decisions in later messages over earlier ones.",vscpp("br",null),vscpp("br",null),"Structure your summary using the following format:",vscpp("br",null),vscpp("br",null),"TITLE: A brief title for the summary",vscpp("br",null),"USER INTENT: The user's goal or intent for the conversation",vscpp("br",null),"TASK DESCRIPTION: Main technical goals and user requirements",vscpp("br",null),"EXISTING: What has already been accomplished. Include file paths and other direct references.",vscpp("br",null),"PENDING: What still needs to be done. Include file paths and other direct references.",vscpp("br",null),"CODE STATE: A list of all files discussed or modified. Provide code snippets or diffs that illustrate important context.",vscpp("br",null),"RELEVANT CODE/DOCUMENTATION SNIPPETS: Key code or documentation snippets from referenced files or discussions.",vscpp("br",null),"OTHER NOTES: Any additional context or information that may be relevant."),vscpp(bM,{priority:1,ctx:this.props.ctx,historyTurns:this.props.conversationTurns}),vscpp(Qae.UserMessage,null,vscpp(vscppf,null,"Here is the conversation to summarize above. Please provide a detailed summary following the specified format.")))}};function Sgt(t){let e={title:"",userIntent:""},r=t.match(/TITLE:\s*(.+)/);r&&(e.title=r[1].trim());let n=t.match(/USER INTENT:\s*(.+)/);return n&&(e.userIntent=n[1].trim()),e}a(Sgt,"parseStructuredSummary");var Uae=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{a(this,"ChatMLConversationSummarizer")}async provideSummary(e,r,n){try{let o=e.turns.filter(h=>h.status==="success"&&h.request?.message&&h.response?.message),s=e.turns.length>0?e.turns[e.turns.length-1]:null,c=s&&s.request?.message?[...o,s]:o;if(c.length===0)return Rr.debug(this.ctx,"No turns to summarize"),"";let l=n.modelProviderName&&n.userRequestedModel?await w1(this.ctx,n.modelProviderName,n.userRequestedModel):await Go.getModelConfiguration(this.ctx,"user",n.userRequestedModel),p={messages:(await S_.create(Oae,{ctx:this.ctx,conversationTurns:c},l).renderPrompt(void 0,r)).messages,uiKind:n.uiKind,llmInteraction:n.llmInteraction,modelConfiguration:l},m=await this.chatFetcher.fetchResponse(p,r,n.telemetryWithExp,void 0);if(r.isCancellationRequested)return Rr.debug(this.ctx,"Summarization cancelled"),"";if(m.type==="success"){let h=m.value.trim();return h.match(/^".*"$/)&&(h=h.slice(1,-1)),Rr.debug(this.ctx,`Successfully generated conversation summary of length ${h.length}`),h}else{let h="reason"in m?m.reason:"unknown";return Rr.error(this.ctx,`Failed to fetch conversation summary because of response type (${m.type}) and reason (${h})`),""}}catch(o){return Rr.exception(this.ctx,o,"Error generating conversation summary"),""}}};var qae=new ft("codingAgentTurnProcessor"),Hae=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Ls),this.chatFetcher=this.chatFetcher??new Bs(e.ctx),this.turnSuggestions=new __(e.ctx,this.chatFetcher),this.codingAgentClient=new Nae(e.ctx),this.conversationSummarizer=new Uae(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{a(this,"CodingAgentTurnProcessor")}async process(e,r,n,o,s,c){try{await this.processWithCodingAgent(e,r,this.turnContext,n,o,s,c)}catch(l){Rr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,l);let u=l instanceof Error?l.message:JSON.stringify(l);this.turn.status="error",this.updateTurnResponseWithError(u),await this.endProgress({error:{message:u,code:xP.Unknown,responseIsIncomplete:!0}})}}async processWithCodingAgent(e,r,n,o,s,c,l){await this.conversationProgress.begin(this.conversation,this.turn,e);let u=await tc(this.turnContext.ctx,this.turnContext,{languageId:s?.detectedLanguageId??""});r.onCancellationRequested(async()=>{qae.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let d;if(this.turnContext.turn.workspaceFolders&&this.turnContext.turn.workspaceFolders.length>0?d=this.turnContext.turn.workspaceFolders[0]:d=this.turnContext.turn.workspaceFolder,!d)throw new Iy("No workspace folder available for git repository detection");let m=await new MA(this.turnContext.ctx).getRepo(d);if(!m||!m.isGitHub())throw new Iy("No GitHub repository found in the workspace folder");if(!m.owner||!m.name)throw new Iy("Could not determine repository owner and name");let h={owner:m.owner,name:m.name};await this.conversationProgress.report(this.conversation,this.turn,{reply:`Analyzing conversation to understand requirements...

`});let g=await this.summarizeConversation(r,u,c,l);if(r.isCancellationRequested)return;let A=tn(this.turn.request.message),y=A,v=A;g&&g.title&&(y=g.title),g&&g.userIntent&&(v=g.userIntent),await this.conversationProgress.report(this.conversation,this.turn,{reply:`Creating coding task in ${h.owner}/${h.name}: ${y}

`});let b=await this.codingAgentClient.createCodingTask(y,v,h.owner,h.name,r);if(r.isCancellationRequested)return;let I="Successfully created coding task!";I+=`

Pull Request: ${b}

`,await this.conversationProgress.report(this.conversation,this.turn,{reply:I}),this.turn.response={message:I,type:"model"},this.turn.status="success";let S={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let k=await this.fetchSuggestedTitle(r,u.extendedBy({messageSource:"chat.user"},{}));typeof k=="string"&&k!==""&&(S.suggestedTitle=k)}await this.endProgress(S)}catch(d){if(d instanceof va)qae.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,d),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(d instanceof EM)qae.warn(this.turnContext.ctx,`Unauthorized error in turn ${this.turn.id}`,d),this.turn.status="error",await this.conversationProgress.report(this.conversation,this.turn,{reply:"We are not able to create a coding task for you due to lack of permission. Please ensure you have permission to create PRs and push to the target repository. You also need to install GitHub App `GitHub Copilot IDE Plugin` to the target repository by following below steps to gain access:\n\n1. Visit https://github.com/apps/github-copilot-ide-plugin\n2. Click `Install` or `Configure` button to install the app to the owner account or organization of your target repository\n\nSend your request again after you have completed these steps."}),this.updateTurnResponseWithError(d.message),await this.endProgress({error:{message:d.message,code:xP.Default,responseIsIncomplete:!0}});else if(d instanceof DP)this.turn.status="error",this.updateTurnResponseWithError(d.message),await this.endProgress({error:{message:d.message,code:xP.Unknown,responseIsIncomplete:!0}});else throw qae.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,d),d}}async summarizeConversation(e,r,n,o){let s=await this.conversationSummarizer.provideSummary(this.conversation,e,{userRequestedModel:n||"",modelProviderName:o||"",llmInteraction:this.turnContext.toLlmInteraction(),uiKind:this.strategy.uiKind,telemetryWithExp:r});if(!s)return null;let c=Sgt(s);return Rr.debug(this.turnContext.ctx,`Generated conversation summary - Title: ${c.title}, Intent: ${c.userIntent}`),c}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return Rr.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=Ok(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();f();var Rgt="```",Yq=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,exr=String.raw`${Rgt}[\w]*?\n(?<codeblock>[\s\S]*?)\n${Rgt}`,txr=new RegExp(Yq+`
`+exr,"gs"),Fke=["replace","delete"];function Oke(t,e){let r=t.matchAll(txr),n=Array.from(r),o=[];for(let s of n){let c=s.groups;if(!c||!Fke.includes(c.mode))continue;let l=c.start?parseInt(c.start)-1:-1,u=c.end?parseInt(c.end)-1:l,p=c.codeblock.split(`
`),m=p[0].match(/^\s*/)?.[0]??"";p.forEach((y,v)=>{p[v]=y.slice(m.length)});let h={mode:c.mode,codeblock:p.join(`
`),start:l,end:u},g=Qke([h],e);if(!g)continue;let A={text:g,uri:e.uri};o.push({...h,updatedDocument:A})}return o}a(Oke,"extractEditsFromTaggedCodeblocks");function Qke(t,e){if(t.length===0)return;t.sort((n,o)=>n.start!==o.start?o.start-n.start:o.end-n.end);let r=e.getText().split(`
`);for(let n of t){let o=n.start,s=n.end,c=n.mode,l=n.codeblock.split(`
`);if(!(o<0||s<0||s<o)&&!(o>=r.length||s>=r.length)){if(c==="delete")r.splice(o,s-o+1);else if(c==="replace"){let u=r[o].match(/^\s*/)?.[0]??"";l.forEach((d,p)=>{l[p]=u+d}),r.splice(o,s-o+1,...l)}}}return r.join(`
`)}a(Qke,"applyEditsToDocument");var IM=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{a(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,o){let s="user",c=await Go.getModelConfiguration(e.ctx,s),l={promptType:s,modelConfiguration:c,languageId:r,userSelectedModelName:o};return await this.ctx.get(gd).toPrompt(e,l)}extractEditsFromResponse(e,r){return[]}},$ae=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{a(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let o=await this.getCurrentEditorSkill(e);if(!o)return;let s=await this.getDocumentIfValid(o.uri);if(!s)return;let c=n?.producesCodeEdits===!1?"user":"inline",l=await e.ctx.get(ya).getBestChatModelConfig(ph(c)),u={promptType:c,modelConfiguration:l,languageId:r};return u.promptType==="inline"&&(this.currentDocument=s),await this.ctx.get(gd).toPrompt(e,u)}async processResponse(e){let r=[],n=tn(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let o=await this.processInlineResponse(n,this.currentDocument);o&&r.push(o)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(nf);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(In).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let o=Oke(e,r).filter(c=>Fke.includes(c.mode)),s=Qke(o,r);if(s)return await this.ctx.get(bl).documentDiff({original:r.getText(),updated:s}),{uri:r.uri,text:s}}extractEditsFromResponse(e,r){return Oke(e,r)}};var Wae=class{constructor(){this.slug="github-copilot-coding-agent";this.name="GitHub Copilot Coding Agent";this.description="Create coding tasks that are executed by GitHub Copilot Coding Agent";this.avatarUrl=void 0}static{a(this,"BackendCodingAgent")}additionalSkills(e){return[]}turnProcessor(e){let r=new IM(e.ctx);return new Hae(e,r)}};f();f();f();f();function kgt(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}a(kgt,"filterUnsupportedReferences");function Pgt(t){return t?t.filter(e=>e.type==="github.web-search"):[]}a(Pgt,"convertToCopilotReferences");var Dgt=E.Object({type:E.Literal("github.web-search"),id:E.String(),data:E.Object({query:E.String(),type:E.String(),results:E.Optional(E.Array(E.Object({title:E.String(),excerpt:E.String(),url:E.String()})))}),metadata:E.Optional(E.Object({display_name:E.Optional(E.String()),display_icon:E.Optional(E.String())}))});var R_=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{a(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),s=this.mapAnnotations(r.annotations).filter(c=>!this.appliedAnnotations.includes(c.id));this.append(n,s,kgt(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,o,s){this.deltaApplier(e,r,n,o,s),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(c=>c.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(s=>({...s,type:"code_vulnerability"})),o=e.for("IPCodeCitations").map(s=>({...s,type:"ip_code_citations"}));return r.push(...n),r.push(...o),r}};f();f();var ev=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{a(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let o=await this._doGetRepositoryInfo(e);if(o?.ok){let s=await o.json();return this.githubRepositoryInfoCache.set(r,s),s}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let o=await this.ctx.get(Mi).getSession(),s;if(o&&new URL(o.serverUrl).hostname===n)s=o;else{let u=await this.ctx.get(gA).getAuthRecord({authAuthority:n});u&&(s={accessToken:u.oauth_token,apiUrl:`https://api.${n}/`})}if(!s&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let c={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};s&&(c.Authorization=`Bearer ${s.accessToken}`);let l=new URL(`repos/${e}/${r}`,s?.apiUrl||`https://api.${n}`).href;return this.ctx.get(Qr).fetch(l,{method:"GET",headers:c})}};f();f();var Bgt=E.Object({name:E.String(),url:E.String()}),Ngt=E.Object({path:E.String(),head:E.Optional(E.Object({name:E.String(),upstream:E.Optional(Bgt)})),remotes:E.Optional(E.Array(Bgt))}),Uke=class{constructor(e){this.turnContext=e}static{a(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(tv,"git repository information");let r=[];return r.push([new Ht(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Ht([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Ht([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Ht(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Ht([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Ht(r)}},tv="git-metadata",jae=class extends Su{static{a(this,"GitMetadataSkill")}constructor(e){super(tv,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new Uke(r))}};async function Mgt(t){let e=await t.skillResolver.resolve(nf);if(e){let c=e.uri,l=wT(t.ctx,c);if(Sje(l))return{repoInfo:l,skillUsed:nf}}let r=await t.skillResolver.resolve(tv);if(!r||!r.remotes||r.remotes.length===0){Rr.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let o=r.remotes.find(c=>c.name==="origin")??r.remotes[0],s=_Ce(o.url);if(s)return{repoInfo:{baseFolder:{uri:r.path},url:o.url,...s},skillUsed:tv}}a(Mgt,"extractRepoInfo");async function Lgt(t){let e=[];return await rxr(t,e),await nxr(t,e),await ixr(t,e),e}a(Lgt,"skillsToReference");async function rxr(t,e){let r=await oxr(t);r&&e.push(r)}a(rxr,"addRepositoryReference");async function nxr(t,e){let r=await sxr(t);r&&e.push(r)}a(nxr,"addSelectionReference");async function ixr(t,e){let r=[],n=await cxr(t);n&&r.push(n),r.push(...await lxr(t)),r.length>0&&e.push(...r)}a(ixr,"addFileReferences");async function oxr(t){let e=await Mgt(t);if(e){let r=t.ctx.get(ev),n=e.repoInfo.owner,o=e.repoInfo.repo,s=await r.getRepositoryInfo(e.repoInfo);if(s)return{type:"github.repository",id:`${n}/${o}`,data:{type:"repository",name:o,ownerLogin:n,id:s.id}}}}a(oxr,"gitMetadataToReference");async function sxr(t){let e=await t.skillResolver.resolve(nf);if(e&&e.selection){let n=await t.ctx.get(In).getOrReadTextDocument(e),o=ua(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,o,e.selection),n.status==="valid")return axr(e,n.document)}}a(sxr,"currentEditorToSelectionReference");function axr(t,e){if(t.selection&&!pM(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}a(axr,"extractSelection");async function cxr(t){let e=await t.skillResolver.resolve(nf);if(e){let n=await t.ctx.get(In).getOrReadTextDocument(e),o=ua(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,o),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}a(cxr,"currentEditorToFileReference");async function lxr(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(In);for(let o of r)if(o.type==="file"){let s=await n.getOrReadTextDocument(o),c=ua(s);if(await t.collectFile(t.turn.agent.agentSlug,o.uri,c,o.selection),s.status==="valid"){let l=s.document.getText();e.push({type:"client.file",id:o.uri,data:{content:l,language:s.document.detectedLanguageId}})}}}return e}a(lxr,"fileReferenceToPlatformFileReference");f();var TM=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{a(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,o,s,c,l,u){switch(XYe(this.turnContext.ctx,l,c,e.type=="offTopic",e.requestId,u,s.extendedBy({},{fileCount:this.turnContext.ctx.get(bc).workspaceCount})),await this.turnContext.ctx.get(bl).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,l,o,s,u);case"offTopic":return this.processOffTopicFetchResult(s,l,u);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:tn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:$w.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,o,s,c,l,u){if(e&&e.length>0){c.markAsDisplayed(),l.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},ZYe(this.turnContext,s,e,r,n,u,l);let d=this.computeSuggestions?await this.fetchSuggestions(o,s,c,u):void 0;if(d){let{followUp:p,suggestedTitle:m}=d;return{followup:p.message!==""?p:void 0,suggestedTitle:m!==""?m:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:tn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,o){let c=await new __(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(c===void 0)return;let l=this.enrichFollowup(c,r,n,o);return Rr.debug(this.turnContext.ctx,"Computed followup",l),Rr.debug(this.turnContext.ctx,"Computed suggested title",c.suggestedTitle),{followUp:l,suggestedTitle:c.suggestedTitle}}enrichFollowup(e,r,n,o){let s=n.extendedBy({messageSource:"chat.suggestions",suggestionId:Ir(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return iJe(this.turnContext.ctx,r,s,o),{message:e.followUp,id:s.properties.suggestionId,type:s.properties.suggestion}}processOffTopicFetchResult(e,r,n){let o="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:o,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",eJe(this.turnContext.ctx,this.turnContext.conversation,r,o,e.properties.messageId,n,e),{error:{message:o,responseIsFiltered:!0}}}};f();var Gae=E.Union([E.String(),E.Number()]),MP=E.Union([E.String(),E.Number()]),uxr=E.Union([E.Literal("included"),E.Literal("blocked"),E.Literal("notfound"),E.Literal("empty")]),Vae=E.Object({uri:E.String(),position:E.Optional(fu)}),Jq=E.Object({type:E.Literal("file"),uri:E.String(),visibleRange:E.Optional(Hc),selection:E.Optional(Hc),status:E.Optional(uxr),range:E.Optional(Hc)}),dxr=E.Object({type:E.Literal("directory"),uri:E.String()}),wM=E.Union([Jq,dxr,Dgt]),hg=E.Union([E.Literal("panel"),E.Literal("inline")]),fxr=E.Union([E.Object({type:E.Literal("text"),text:E.String()}),E.Object({type:E.Literal("image_url"),imageUrl:E.Object({url:E.String(),detail:E.Optional(E.Union([E.Literal("low"),E.Literal("high")]))})})]),qke=E.Union([E.String(),E.Array(fxr)]),Fgt=E.Object({request:qke,response:E.Optional(E.String()),agentSlug:E.Optional(E.String()),turnId:E.Optional(MP),model:E.Optional(E.String())});function zae(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}a(zae,"convertToMessageContent");function Kae(t,e){if(t=cm(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],o=n[r];return n[r]={type:"text",text:o.text+e},n}return[...t,{type:"text",text:e}]}a(Kae,"appendToMessage");var Yae=E.Union([E.Literal("Ask"),E.Literal("Agent")]),pxr=E.Object({type:E.String(),description:E.String()}),Ogt=E.Object({name:E.String(),description:E.String(),inputSchema:E.Optional(E.Object({type:E.String(),properties:E.Record(E.String(),pxr),required:E.Array(E.String())})),confirmationMessages:E.Optional(E.Object({title:E.String(),message:E.String()}))}),_M=E.Object({uri:E.String(),name:E.String()});var Hke="generate-response",Jae=class extends Error{constructor(r,n,o,s){super(r);this.authorizationUri=n;this.agentSlug=o;this.agentName=s}static{a(this,"RemoteAgentAuthorizationError")}},Xq=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(Ls),this.chatFetcher=this.chatFetcher??new Bs(r.ctx),this.postProcessor=new TM(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{a(this,"RemoteAgentTurnProcessor")}async process(e,r,n,o){try{await this.processWithAgent(e,r,this.turnContext,o)}catch(s){Rr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,s);let c=s instanceof Error?s.message:String(s);this.turn.status="error",this.turn.response={message:c,type:"meta"},s instanceof Jae?await this.endProgress({unauthorized:{authorizationUri:s.authorizationUri,agentSlug:s.agentSlug,agentName:s.agentName}}):await this.endProgress({error:{message:c,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,o){await this.conversationProgress.begin(this.conversation,this.turn,e);let s=await tc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let c=await this.buildAgentPrompt(n);if(!c)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let l={type:"user",prompt:JSON.stringify(c.messages,null,2),tokens:c.tokens};await n.ctx.get(bl).inspectPrompt(l),await n.steps.start(Hke,"Generating response");let u=this.augmentTelemetry(c,s,this.turn.template,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let d=await this.fetchConversationResponse(n,c.messages,r,s.extendedBy({messageSource:"chat.user"},{promptTokenLen:c.tokens}),u,o);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(d,n),await this.endProgress({error:d.error,followUp:d.followup,suggestedTitle:d.suggestedTitle,skillResolutions:c.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),o=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=o),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:cm(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return Ir()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return bke(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:cm(r.request.message)}),r.response&&r.response.type==="model"){let o=Pgt(r.response.references);n.push({role:"assistant",content:cm(r.response.message),copilot_references:o.length>0?o:void 0})}return n})}async computeCopilotReferences(e){return await Lgt(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,o,s,c){n.onCancellationRequested(async()=>{await this.cancelProgress()});let l=new R_((m,h,g,A,y)=>{let v=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:m,annotations:h,references:g,notifications:A.map(b=>({message:b.message,severity:"warning"})),confirmationRequest:v}),this.turn.response?(this.turn.response.message=Kae(this.turn.response.message,m),this.turn.response.references.push(...g)):this.turn.response={message:m,type:"model",references:g},this.turn.annotations.push(...h??[]),v&&(this.turn.confirmationRequest=v)}),u=await this.turnContext.ctx.get(cr).getGitHubSession(),d={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:tn(this.turn.request.message)},authToken:u?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},p=await this.chatFetcher.fetchResponse(d,n,o,(m,h)=>l.isFinishedAfter(m,h));return this.ensureAgentIsAuthorized(p),await this.postProcessor.postProcess(p,n,l.appliedText,o,s.extendedBy(this.addExtensibilityInfoTelemetry()),tn(this.turn.request.message),"conversationPanel",c)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new Jae("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,o){return x7(this.conversation,"conversationPanel",tn(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(Hke,e.error.message):await r.steps.finish(Hke)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var Zq=class{constructor(e,r,n,o,s,c){this.id=e;this.slug=r;this.name=n;this.description=o;this.avatarUrl=s;this.endpoint=c}static{a(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new Xq(this,e)}},Xae=class extends Zq{static{a(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new Xq(this,e)}};f();var mxr="github",Ty=class{static{a(this,"RemoteAgentRegistry")}},Zae=class extends Ty{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{a(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await uR(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(pn.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||pn.error(this.ctx,"Expected 'agents' to be an array")}catch(o){return r.includes("access denied")||pn.warn(this.ctx,"Invalid remote agent response:",r,o),[]}return n.filter(o=>o.slug!==mxr).map(o=>new Zq(o.id,o.slug,o.name,o.description,o.avatar_url))}};var $ke=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{a(this,"ProjectAgent")}additionalSkills(){return[gM]}};async function Y1(t){let e=[];return e.push(new Xae),e.push(...await t.get(Ty).agents()),e.push(new $ke),e.push(new Wae),e}a(Y1,"getAgents");var hxr=E.Object({});async function gxr(t,e,r){return[(await Y1(t)).map(s=>({slug:s.slug,name:s.name,description:s.description,avatarUrl:s.avatarUrl})),null]}a(gxr,"handleConversationAgentsChecked");var Qgt=et(hxr,gxr);f();f();var eH=Ne(Qc());function Axr(t,e,r){let n=zr.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Nt(t,"getCompletions.docVersionMismatch",n)}a(Axr,"telemetryVersionMismatch");async function wy(t,e,r){let o=t.get(fr).getTextDocumentUnsafe(e);if(!o)throw new eH.ResponseError(rr.InvalidParams,`Document for URI could not be found: ${e.uri}`);let s=await kx(t,e,o.getText());if(s.status==="invalid")throw t.get($o).setInactive(s.reason),new eH.ResponseError(rr.CopilotNotAvailable,s.reason);if(e.version!==void 0&&o.version!==e.version)throw r?.isCancellationRequested||(Axr(t,o,e.version),Pu.debug(t,`Requested document version was ${e.version} but actual document version was ${o.version}.`)),new eH.ResponseError(rr.ContentModified,"Document Version Mismatch");return o}a(wy,"getTextDocument");async function rv(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await wy(t,n,r)}catch(o){if(o instanceof eH.ResponseError&&o.code===rr.CopilotNotAvailable)return;throw o}}a(rv,"getTextDocumentIfAvailable");var yxr=E.Union([E.Literal("keyboard"),E.Literal("toolbar")]),Cxr=E.Object({turnId:MP,codeBlockIndex:E.Number(),source:yxr,copiedCharacters:E.Number(),totalCharacters:E.Number(),copiedText:E.String(),doc:E.Optional(Vae),textDocument:E.Optional(Rp),position:E.Optional(fu),conversationSource:E.Optional(hg)});async function vxr(t,e,r){let n=await rv(t,r,e),o={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},s=r.position??r.doc?.position;n&&s&&(o={...o,currentLine:s.line});let c=GT(r.conversationSource),l=t.get(ro).findByTurnId(r.turnId),u=await tc(t,l,{languageId:n?.detectedLanguageId??""});return Bf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:c,mode:l?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:l?.turn.getResolvedModelId()??"unknown"},o,`${pu(c)}.acceptedCopy`,u),["OK",null]}a(vxr,"handleConversationCodeCopyChecked");var Ugt=et(Cxr,vxr);f();var xxr=E.Union([E.Literal("keyboard"),E.Literal("toolbar"),E.Literal("diff")]),Exr=E.Object({turnId:MP,source:xxr,codeBlockIndex:E.Number(),acceptedLength:E.Optional(E.Number()),totalCharacters:E.Number(),newFile:E.Optional(E.Boolean()),doc:E.Optional(Vae),textDocument:E.Optional(Rp),position:E.Optional(fu),conversationSource:E.Optional(hg)});async function bxr(t,e,r){let n=await rv(t,r,e),o={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},s=r.position??r.doc?.position;n&&s&&(o={...o,insertionOffset:n.offsetAt(s),currentLine:s.line});let c=GT(r.conversationSource),l=t.get(ro).findByTurnId(r.turnId),u=await tc(t,l,{languageId:n?.detectedLanguageId??""});return Bf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:c,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full",mode:l?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:l?.turn.getResolvedModelId()??"unknown"},o,`${pu(c)}.acceptedInsert`,u),["OK",null]}a(bxr,"handleConversationCodeInsertChecked");var qgt=et(Exr,bxr);f();f();var ece=E.Array(Hc);function tce(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}a(tce,"resolveAsActiveEditor");f();var Hgt=Ne(Qc());var rce=new Hgt.ProgressType,Wke=class{constructor(e){this.progressToken=e}static{a(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(kr).connection.sendProgress(rce,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,o){await e.get(kr).connection.sendProgress(rce,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...o})}async end(e,r,n,o){await e.get(kr).connection.sendProgress(rce,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...o})}async cancel(e,r,n,o){await e.get(kr).connection.sendProgress(rce,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:o})}};function SM(t){return new Wke(t.workDoneToken)}a(SM,"createProgressHandler");f();f();f();var Ad=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{a(this,"AgentConversationError")}};f();var OE=class extends Error{static{a(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var RM=class extends Error{static{a(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();f();var jke=class{static{a(this,"TurnMetadata")}toString(){return this.constructor.name}},tH=class extends jke{constructor(r){super();this.renderedGlobalContext=r}static{a(this,"GlobalContextMessageMetadata")}};f();f();var nce=class extends Yn{static{a(this,"UserOSPrompt")}renderCopilot(e,r,n,o){let s=process.platform;return vscpp(vscppf,null,"The user's current OS is: ",s==="win32"?"Windows":s==="darwin"?"macOS":s==="linux"?"Linux":"Unknown")}};f();var ice=class extends Yn{static{a(this,"UserPreferences")}renderCopilot(e,r,n,o){return vscpp(vscppf,null)}};f();var $gt=require("path");var oce=class extends Yn{static{a(this,"UserShellPrompt")}renderCopilot(e,r,n,o){let s=this.getUserShell(),c=(0,$gt.basename)(s),l=c==="powershell.exe"?" (Windows PowerShell v5.1)":"",u="";return c==="powershell.exe"&&(u=" Use the `;` character if joining commands on a single line is needed."),vscpp(vscppf,null,`The user's default shell is: "`,c,'"',l,". When you generate terminal commands, please generate them correctly for this shell.",u)}getUserShell(){if(process.env.SHELL)return process.env.SHELL;switch(process.platform){case"win32":return process.env.ComSpec||"cmd.exe";case"darwin":case"linux":return"/bin/bash";default:return"sh"}}};f();var sce=class extends Yn{static{a(this,"WorkspaceFoldersHint")}renderCopilot(e,r,n,o){if(this.props.workspaceFolders&&this.props.workspaceFolders.length>0){let s=this.props.workspaceFolders.map(c=>` - ${rs(c.uri)}`).join(`
`);return vscpp(vscppf,null,"I am working in a workspace with the following folders:",vscpp("br",null),s)}else return vscpp(vscppf,null,"There is no workspace currently open.")}};f();f();f();function Wgt(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}a(Wgt,"partsLength");async function Ggt(t,e=1/0,r){let n=jgt(0,t,e),o=e-Wgt(n);for(;;){let s=!1,c=[];for(let l of n)if(l.type==="text")c.push(l);else if(l.type==="dir"){c.push({type:"text",uri:l.uri,value:l.value});let u=await l.getChildren();if(r?.isCancellationRequested)return Ixr();let d=jgt(l.level+1,u,o-1);d.length&&(s=!0,o-=Wgt(d)+1,c.push(...d))}if(n=c,!s)break}return{files:n.map(s=>s.uri).filter(s=>s!==void 0),tree:n.map(s=>s.value).join(`
`)}}a(Ggt,"visualFileTree");function jgt(t,e,r){let n="	".repeat(t),o=[],s=r;for(let c=0;c<e.length;++c){let l=e[c],u=n+l.name+(l.type===2?"/":"");if(u.length>s){let d=n+"...";for(;d.length>s&&o.length>0;)s+=o.pop().value.length+1;d.length<=s&&o.push({type:"text",uri:void 0,value:d});break}l.type===2?o.push({type:"dir",uri:l.uri,level:t,value:u,getChildren:l.getChildren}):o.push({type:"text",uri:l.uri,value:u}),s-=u.length,c!==e.length-1&&(s-=1)}return o}a(jgt,"toParts");var Ixr=a(()=>({tree:"",files:[]}),"emptyTree");var Txr=new ft("fileReferencesPrompt");async function Vgt(t,e,r,n){let o=await zgt(t,e,r,n);if(!o.length)return"";let s;if(o.length===1)s=o[0].tree.tree;else{s="";for(let{label:l,tree:u}of o){s+=`${l}/
`;for(let d of u.tree.split(`
`))s+=`	${d}
`}}let c=f8(s);return["I am working in a workspace that has the following structure:",c,s,c,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}a(Vgt,"generateWorkspaceStructurePrompt");async function zgt(t,e,r,n){return e.length?Promise.all(e.map(async o=>{let s=o.name,c=o.uri,l=await Ggt(await Kgt(t,o.uri,r,n),r.maxLength/e.length,n);return{label:s,uri:c,tree:l}})):[]}a(zgt,"generateWorkspaceStructure");async function Kgt(t,e,r,n){if(n.isCancellationRequested)return[];let o;try{o=await t.get(Qi).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(o.sort((s,c)=>s[1]===c[1]?s[0].localeCompare(c[0]):s[1]&2?1:-1),Promise.all(o.map(([s,c])=>{let l=Ki(e,s);return r.excludeDotFiles&&s.startsWith(".")||Sxr(l)?null:c&2?{type:2,uri:l,name:s,getChildren:a(()=>Kgt(t,l,r,n),"getChildren")}:{type:1,uri:l,name:s}})).then(s=>s.filter(c=>c!=null)))}a(Kgt,"buildFileList");var wxr=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],_xr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function Sxr(t){return!!(_xr.includes(Di(t).toLowerCase())||rs(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>wxr.includes(r)))}a(Sxr,"shouldAlwaysIgnoreFile");async function ace(t,e,r){if(r.length===0)return[];try{let n=r.map(c=>({uri:c.uri,name:Di(c.uri)})),o=await zgt(t,n,{maxLength:2e3,excludeDotFiles:!0},e),s=[];for(let{label:c,uri:l,tree:u}of o)s.push("<attachment>"),s.push(`Directory: ${c} (${ac(l)})`),s.push(u.tree),s.push("</attachment>");return s}catch(n){return Txr.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}a(ace,"processDirectoryReferences");var cce=class extends Yn{static{a(this,"WorkspaceStructure")}async renderCopilot(e,r,n,o){if(!this.props.workspaceFolders)return vscpp(vscppf,null);let s=await Vgt(this.props.ctx,this.props.workspaceFolders,{maxLength:this.props.maxSize||2e3,excludeDotFiles:this.props.excludeDotFiles??!0},o||An.CancellationToken.None);return s?vscpp(vscppf,null,s):vscpp(vscppf,null)}};f();var LP=Ne(xa());var jl=class t extends LP.PromptElement{static{a(this,"Tag")}static{this._regex=/^[a-zA-Z_][\w.-]*$/}render(){let{name:e,children:r,attrs:n={}}=this.props;if(!t._regex.test(e))throw new Error(`Invalid tag name: ${this.props.name}. Tag names must start with a letter or underscore, and can contain letters, digits, underscores, hyphens, or periods.`);let o="";for(let[c,l]of Object.entries(n))l!==void 0&&(o+=` ${c}=${JSON.stringify(l)}`);if(r?.length===0)return o?vscpp(LP.TextChunk,null,vscpp(vscppf,null,`<${e}${o} />`)):void 0;let s=(0,LP.useKeepWith)();return vscpp(vscppf,null,vscpp(s,null,vscpp(vscppf,null,`<${e}${o}>
`)),vscpp(Gke,{priority:1,flexGrow:1},r,vscpp("br",null)),vscpp(s,null,vscpp(vscppf,null,`</${e}>`)),vscpp("br",null))}},Gke=class extends LP.PromptElement{static{a(this,"TagInner")}render(){return vscpp(vscppf,null,this.props.children)}};var Ygt=Ne(xa());var rH=class extends Yn{static{a(this,"GlobalAgentContext")}renderCopilot(e,r,n,o){return vscpp(Ygt.UserMessage,null,vscpp(jl,{name:"environment_info"},vscpp(nce,{ctx:this.props.ctx}),vscpp(oce,{ctx:this.props.ctx})),vscpp(jl,{name:"workspace_info"},vscpp(sce,{ctx:this.props.ctx,workspaceFolders:this.props.workspaceFolders}),vscpp(cce,{ctx:this.props.ctx,workspaceFolders:this.props.workspaceFolders,maxSize:2e3,excludeDotFiles:!0})),vscpp(ice,{ctx:this.props.ctx,flexGrow:7,priority:800}))}};f();f();f();var kM=class extends Yn{static{a(this,"KeepGoingReminder")}renderCopilot(){return this.props.modelConfiguration.modelFamily===Wr.Gpt41||this.props.modelConfiguration.modelFamily.startsWith(Wr.Gpt5)?vscpp(vscppf,null,"You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user.",vscpp("br",null),"Your thinking should be thorough and so it's fine if it's very long. However, avoid unnecessary repetition and verbosity. You should be concise, but thorough.",vscpp("br",null),"You MUST iterate and keep going until the problem is solved.",vscpp("br",null),"You have everything you need to resolve this problem. I want you to fully solve this autonomously before coming back to me.",vscpp("br",null),"Only terminate your turn when you are sure that the problem is solved and all items have been checked off. Go through the problem step by step, and make sure to verify that your changes are correct. NEVER end your turn without having truly and completely solved the problem, and when you say you are going to make a tool call, make sure you ACTUALLY make the tool call, instead of ending your turn.",vscpp("br",null),"Take your time and think through every step - remember to check your solution rigorously and watch out for boundary cases, especially with the changes you made. Your solution must be perfect. If not, continue working on it. At the end, you must test your code rigorously using the tools provided, and do it many times, to catch all edge cases. If it is not robust, iterate more and make it perfect. Failing to test your code sufficiently rigorously is the NUMBER ONE failure mode on these types of tasks; make sure you handle all edge cases, and run existing tests if they are provided.",vscpp("br",null),"You MUST plan extensively before each function call, and reflect extensively on the outcomes of the previous function calls. DO NOT do this entire process by making function calls only, as this can impair your ability to solve the problem and think insightfully.",vscpp("br",null),"You are a highly capable and autonomous agent, and you can definitely solve this problem without needing to ask the user for further input.",vscpp("br",null)):vscpp(vscppf,null,"You are an agent - you must keep going until the user's query is completely resolved, before ending your turn and yielding back to the user. ONLY terminate your turn when you are sure that the problem is solved, or you absolutely cannot continue.",vscpp("br",null),"You take action when possible- the user is expecting YOU to take action and go to work for them. Don't ask unnecessary questions about the details if you can simply DO something useful instead.",vscpp("br",null))}};f();var Rxr=["en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],lce=class extends Yn{static{a(this,"ResponseTranslationRules")}renderCopilot(){if(this.props.languageOverride&&Rxr.find(e=>this.props.languageOverride===e)&&this.props.languageOverride!=="en")return vscpp(vscppf,null,"Respond in the following locale: ",this.props.languageOverride)}};var Jgt=Ne(xa());var uce=class extends Yn{static{a(this,"DefaultAgentPrompt")}renderCopilot(){let e=this.props.modelConfiguration.modelFamily.startsWith(Wr.Gpt5),r=this.props.toolsService.getToolMapForModel().get("semantic_search")!==void 0,n=this.props.toolsService.getToolMapForModel().get("get_errors")!==void 0,o=this.props.toolsService.getToolMapForModel().get("read_file")!==void 0,s=this.props.toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,c=this.props.toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,l=this.props.toolsService.getToolMapForModel().get("update_user_preferences")!==void 0;return vscpp(Jgt.SystemMessage,null,vscpp(jl,{name:"instructions"},"You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks.",vscpp("br",null),"The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question.",vscpp("br",null),vscpp(kM,{modelConfiguration:this.props.modelConfiguration}),e&&vscpp(vscppf,null,`Communication style: Use a friendly, confident, and conversational tone. Prefer short sentences, contractions, and concrete language. Keep it skimmable and encouraging, not formal or robotic. A tiny touch of personality is okay; avoid overusing exclamations or emoji. Avoid empty filler like "Sounds good!", "Great!", "Okay, I will\u2026", or apologies when not needed\u2014open with a purposeful preamble about what you're doing next.`,vscpp("br",null)),"If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes.",vscpp("br",null),"If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept.",vscpp("br",null),"If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context.",vscpp("br",null),e&&vscpp(vscppf,null,"Mission and stop criteria: You are responsible for completing the user's task end-to-end. Continue working until the goal is satisfied or you are truly blocked by missing information. Do not defer actions back to the user if you can execute them yourself with available tools. Only ask a clarifying question when essential to proceed.",vscpp("br",null),"Preamble and progress: Start with a brief, friendly preamble that explicitly acknowledges the user's task and states what you're about to do next. Make it engaging and tailored to the repo/task; keep it to a single sentence. If the user has not asked for anything actionable and it's only a greeting or small talk, respond warmly and invite them to share what they'd like to do\u2014do not create a checklist or run tools yet. Use the preamble only once per task; if the previous assistant message already included a preamble for this task, skip it this turn. Do not re-introduce your plan after tool calls or after creating files\u2014give a concise status and continue with the next concrete action. For multi-step tasks, keep a lightweight checklist and weave progress updates into your narration. Batch independent, read-only operations together; after a batch, share a concise progress note and what's next. If you say you will do something, execute it in the same turn using tools.",vscpp("br",null),vscpp(jl,{name:"requirementsUnderstanding"},vscpp(vscppf,null,"Always read the user's request in full before acting. Extract the explicit requirements and any reasonable implicit requirements.",vscpp("br",null),"If a requirement cannot be completed with available tools, state why briefly and propose a viable alternative or follow-up."))),r&&vscpp(vscppf,null,"Prefer using the ","semantic_search"," tool to search for context unless you know the exact string or filename pattern you're searching for.",vscpp("br",null)),"Don't make assumptions about the situation-gather context first, then perform the task or answer the question.",vscpp("br",null),e&&vscpp(vscppf,null,"Under-specification policy: If details are missing, infer 1-2 reasonable assumptions from the repository conventions and proceed. Note assumptions briefly and continue; ask only when truly blocked.",vscpp("br",null),"Proactive extras: After satisfying the explicit ask, implement small, low-risk adjacent improvements that clearly add value (tests, types, docs, wiring). If a follow-up is larger or risky, list it as next steps.",vscpp("br",null),"Anti-laziness: Avoid generic restatements and high-level advice. Prefer concrete edits, running tools, and verifying outcomes over suggesting what the user should do.",vscpp("br",null),vscpp(jl,{name:"engineeringMindsetHints"},vscpp(vscppf,null,"Think like a software engineer\u2014when relevant, prefer to:",vscpp("br",null),'- Outline a tiny "contract" in 2-4 bullets (inputs/outputs, data shapes, error modes, success criteria).',vscpp("br",null),"- List 3-5 likely edge cases (empty/null, large/slow, auth/permission, concurrency/timeouts) and ensure the plan covers them.",vscpp("br",null),"- Write or update minimal reusable tests first (happy path + 1-2 edge/boundary) in the project's framework; then implement until green.")),vscpp(jl,{name:"qualityGatesHints"},vscpp(vscppf,null,'Before wrapping up, prefer a quick "quality gates" triage: Build, Lint/Typecheck, Unit tests, and a small smoke test. Ensure there are no syntax/type errors across the project; fix them or clearly call out any intentionally deferred ones. Report deltas only (PASS/FAIL). Include a brief "requirements coverage" line mapping each requirement to its status (Done/Deferred + reason).')),vscpp(jl,{name:"responseModeHints"},vscpp(vscppf,null,"Choose response mode based on task complexity. Prefer a lightweight answer when it's a greeting, small talk, or a trivial/direct Q&A that doesn't require tools or edits: keep it short, skip todo lists and progress checkpoints, and avoid tool calls unless necessary. Use the full engineering workflow (checklist, phases, checkpoints) when the task is multi-step, requires edits/builds/tests, or has ambiguity/unknowns. Escalate from light to full only when needed; if you escalate, say so briefly and continue.")),"Validation and green-before-done: After any substantive change, run the relevant build/tests/linters automatically. For runnable code that you created or edited, immediately run a test to validate the code works (fast, minimal input) yourself using terminal tools. Prefer automated code-based tests where possible. Then provide optional fenced code blocks with commands for larger or platform-specific runs. Don't end a turn with a broken build if you can fix it. If failures occur, iterate up to three targeted fixes; if still failing, summarize the root cause, options, and exact failing output. For non-critical checks (e.g., a flaky health check), retry briefly (2-3 attempts with short backoff) and then proceed with the next step, noting the flake.",vscpp("br",null),"Never invent file paths, APIs, or commands. Verify with tools (search/read/list) before acting when uncertain.",vscpp("br",null),"Security and side-effects: Do not exfiltrate secrets or make network calls unless explicitly required by the task. Prefer local actions first.",vscpp("br",null),"Reproducibility and dependencies: Follow the project's package manager and configuration; prefer minimal, pinned, widely-used libraries and update manifests or lockfiles appropriately. Prefer adding or updating tests when you change public behavior.",vscpp("br",null),'Build characterization: Before stating that a project "has no build" or requires a specific build step, verify by checking the provided context or quickly looking for common build config files (for example: `package.json`, `pnpm-lock.yaml`, `requirements.txt`, `pyproject.toml`, `setup.py`, `Makefile`, `Dockerfile`, `build.gradle`, `pom.xml`). If uncertain, say what you know based on the available evidence and proceed with minimal setup instructions; note that you can adapt if additional build configs exist.',vscpp("br",null),"Deliverables for non-trivial code generation: Produce a complete, runnable solution, not just a snippet. Create the necessary source files plus a small runner or test/benchmark harness when relevant, a minimal `README.md` with usage and troubleshooting, and a dependency manifest (for example, `package.json`, `requirements.txt`, `pyproject.toml`) updated or added as appropriate. If you intentionally choose not to create one of these artifacts, briefly say why.",vscpp("br",null)),"Think creatively and explore the workspace in order to make a complete fix.",vscpp("br",null),"Don't repeat yourself after a tool call, pick up where you left off.",vscpp("br",null),"NEVER print out a codeblock with file changes unless the user asked for it. Use the"," ","insert_edit_into_file"," ",c?"or replace_string_in_file":""," tool instead.",vscpp("br",null),s&&vscpp(vscppf,null,"NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the ","run_in_terminal"," tool instead.",vscpp("br",null)),"You don't need to read a file if it's already provided in context."),vscpp(jl,{name:"toolUseInstructions"},"When using a tool, follow the json schema very carefully and make sure to include ALL required properties.",vscpp("br",null),"Always output valid JSON when using a tool.",vscpp("br",null),"If a tool exists to do a task, use the tool instead of asking the user to manually take an action.",vscpp("br",null),"If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission.",vscpp("br",null),"Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs.",vscpp("br",null),"Never say the name of a tool to a user.",vscpp("br",null),"For example, instead of saying that you'll use the ","run_in_terminal",` tool, say "I'll run the command in a terminal".`,vscpp("br",null),"If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call ","semantic_search"," in parallel.",vscpp("br",null),e&&vscpp(vscppf,null,"Before notable tool batches, briefly tell the user what you're about to do and why. After the results return, briefly interpret them and state what you'll do next. Don't narrate every trivial call.",vscpp("br",null),`You MUST preface each tool call batch with a one-sentence "why/what/outcome" preamble (why you're doing it, what you'll run, expected outcome). If you make many tool calls in a row, you MUST checkpoint progress after roughly every 3-5 calls: what you ran, key results, and what you'll do next. If you create or edit more than ~3 files in a burst, checkpoint immediately with a compact bullet summary.`,vscpp("br",null),"If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call ","semantic_search"," in parallel. Parallelize read-only, independent operations only; do not parallelize edits or dependent steps.",vscpp("br",null),"Context acquisition: Trace key symbols to their definitions and usages. Read sufficiently large, meaningful chunks to avoid missing context. Prefer semantic or codebase search when you don't know the exact string; prefer exact search or direct reads when you do. Avoid redundant reads when the content is already attached and sufficient.",vscpp("br",null),"Verification preference: For service or API checks, prefer a tiny code-based test (unit/integration or a short script) over shell probes. Use shell probes (e.g., curl) only as optional documentation or quick one-off sanity checks, and mark them as optional.",vscpp("br",null)),o&&vscpp(vscppf,null,"When using the ","read_file"," tool, prefer reading a large section over calling the"," ","read_file"," tool many times in sequence. You can also think of all the pieces you may be interested in and read them in parallel. Read large enough context to ensure you get what you need.",vscpp("br",null)),"If ","semantic_search"," returns the full contents of the text files in the workspace, you have all the workspace context.",vscpp("br",null),s&&vscpp(vscppf,null,"Don't call the ","run_in_terminal"," tool multiple times in parallel. Instead, run one command and wait for the output before running the next command.",vscpp("br",null)),l&&vscpp(vscppf,null,"After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the"," ","update_user_preferences"," tool to save their preferences.",vscpp("br",null))),vscpp(jl,{name:"editFileInstructions"},c?vscpp(vscppf,null,"Before you edit an existing file, make sure you either already have it in the provided context, or read it with the ","read_file"," tool, so that you can make proper changes.",vscpp("br",null),"Use the ","replace_string_in_file"," tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file.",vscpp("br",null),"Use the ","insert_edit_into_file"," tool to insert code into a file.",vscpp("br",null),"When editing files, group your changes by file.",vscpp("br",null),e&&vscpp(vscppf,null,"Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical.",vscpp("br",null)),"NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user.",vscpp("br",null),"NEVER print a codeblock that represents a change to a file, use ","insert_edit_into_file"," or"," ","replace_string_in_file"," instead.",vscpp("br",null),"For each file, give a short description of what needs to be changed, then use the"," ","replace_string_in_file"," or ","insert_edit_into_file"," tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.",vscpp("br",null)):vscpp(vscppf,null,"Don't try to edit an existing file without reading it first, so you can make changes properly.",vscpp("br",null),"Use the ","insert_edit_into_file"," tool to edit files. When editing files, group your changes by file.",vscpp("br",null),e&&vscpp(vscppf,null,"Make the smallest set of edits needed and avoid reformatting or moving unrelated code. Preserve existing style and conventions, and keep imports, exports, and public APIs stable unless the task requires changes. Prefer completing all edits for a file within a single message when practical.",vscpp("br",null)),"NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user.",vscpp("br",null),"NEVER print a codeblock that represents a change to a file, use ","insert_edit_into_file"," ",c?"or replace_string_in_file":""," instead.",vscpp("br",null),"For each file, give a short description of what needs to be changed, then use the"," ",c?"replace_string_in_file or":""," ","insert_edit_into_file"," tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.",vscpp("br",null)),"Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ",s?'with "npm install" or ':"",'creating a "requirements.txt".',vscpp("br",null),n&&vscpp(vscppf,null,"After editing a file, you MUST call ","get_errors"," to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed.",vscpp("br",null)),"The ","insert_edit_into_file"," tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints.",vscpp("br",null),"When you use the ","insert_edit_into_file"," tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:",vscpp("br",null),"// ",yl,vscpp("br",null),"changed code",vscpp("br",null),"// ",yl,vscpp("br",null),"changed code",vscpp("br",null),"// ",yl,vscpp("br",null),vscpp("br",null),"Here is an example of how you should format an edit to an existing Person class:",vscpp("br",null),["class Person {",`	// ${yl}`,"	age: number;",`	// ${yl}`,"	getAge() {","		return this.age;","	}","}"].join(`
`)),vscpp(lce,{languageOverride:this.props.languageOverride}))}};f();var dce=class extends Yn{static{a(this,"CopilotIdentityRules")}renderCopilot(){return vscpp(vscppf,null,'When asked for your name, you must respond with "GitHub Copilot".',vscpp("br",null),"Follow the user's requirements carefully & to the letter.")}},fce=class extends Yn{static{a(this,"GPT5CopilotIdentityRule")}renderCopilot(){return vscpp(vscppf,null,"Your name is GitHub Copilot.",vscpp("br",null))}};f();var pce=class extends Yn{static{a(this,"SafetyRules")}renderCopilot(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, or violent, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}},mce=class extends Yn{static{a(this,"Gpt5SafetyRule")}renderCopilot(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, or violent, only respond with "Sorry, I can't assist with that."`,vscpp("br",null))}};var Xgt=Ne(xa());var hce=class extends Yn{static{a(this,"SystemInstructionsPrompt")}renderCopilot(){let e=this.props.turnContext.ctx.get(un).getEditorInfo().name;return vscpp(vscppf,null,vscpp(Xgt.SystemMessage,null,"You are an expert AI programming assistant, working with a user in the ",e," editor.",vscpp("br",null),this.props.modelConfiguration.modelFamily.startsWith(Wr.Gpt5)?vscpp(vscppf,null,vscpp(fce,null),vscpp(mce,null)):vscpp(vscppf,null,vscpp(dce,null),vscpp(pce,null))),vscpp(uce,{toolsService:this.props.toolsService,modelConfiguration:this.props.modelConfiguration,languageOverride:this.props.turnContext.conversation.userLanguage}))}};f();var Zgt=Ne(xa());var gce=class extends Yn{static{a(this,"ToolCallHistoryPrompt")}renderCopilot(){let e=Ine(this.props.currentTurn.response?.message,!0),r=e.length>0;return vscpp(vscppf,null,e.map((n,o)=>Fae(n)),r&&vscpp(Zgt.UserMessage,null,vscpp(vscppf,null,"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself.")))}};f();f();var Ace=class extends Yn{static{a(this,"CurrentDatePrompt")}renderCopilot(){let e=this.props.date?.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})||new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return vscpp(vscppf,null,"The current date is ",e,".")}};f();var yce=class extends Yn{static{a(this,"EditingReminder")}renderCopilot(){return vscpp(vscppf,null,"When using the ","insert_edit_into_file"," tool, avoid repeating existing code, instead use a line comment with `",yl,"` to represent regions of unchanged code.")}};f();var Cce=class extends Yn{static{a(this,"ExplanationReminder")}renderCopilot(){if(this.props.modelConfiguration.modelFamily.startsWith(Wr.Gpt5))return vscpp(vscppf,null,`Skip filler acknowledgements like "Sounds good" or "Okay, I will\u2026". Open with a purposeful one-liner about what you're doing next.`,vscpp("br",null),"When sharing setup or run steps, present terminal commands in fenced code blocks with the correct language tag. Keep commands copyable and on separate lines.",vscpp("br",null),"Avoid definitive claims about the build or runtime setup unless verified from the provided context (or quick tool checks). If uncertain, state what's known from attachments and proceed with minimal steps you can adapt later.",vscpp("br",null),"When you create or edit runnable code, run a test yourself to confirm it works; then share optional fenced commands for more advanced runs.",vscpp("br",null),'For non-trivial code generation, produce a complete, runnable solution: necessary source files, a tiny runner or test/benchmark harness, a minimal `README.md`, and updated dependency manifests (e.g., `package.json`, `requirements.txt`, `pyproject.toml`). Offer quick "try it" commands and optional platform-specific speed-ups when relevant.',vscpp("br",null),"Your goal is to act like a pair programmer: be friendly and helpful. If you can do more, do more. Be proactive with your solutions, think about what the user needs and what they want, and implement it proactively.",vscpp("br",null),vscpp(jl,{name:"importantReminders"},"Before starting a task, review and follow the guidance in <responseModeHints>, <engineeringMindsetHints>, and <requirementsUnderstanding>. ALWAYS start your response with a brief task receipt and a concise high-level plan for how you will proceed.",vscpp("br",null),"DO NOT state your identity or model name unless the user explicitly asks you to. ",vscpp("br",null),this.props.hasTodoTool&&vscpp(vscppf,null,"You MUST use the todo list tool to plan and track your progress. NEVER skip this step, and START with this step whenever the task is multi-step. This is essential for maintaining visibility and proper execution of large tasks. Follow the todoListToolInstructions strictly.",vscpp("br",null)),!this.props.hasTodoTool&&vscpp(vscppf,null,"Break down the request into clear, actionable steps and present them as a checklist at the beginning of your response before proceeding with implementation. This helps maintain visibility and ensures all requirements are addressed systematically.",vscpp("br",null)),"When referring to a filename or symbol in the user's workspace, wrap it in backticks.",vscpp("br",null)))}};f();f();f();f();var QE=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{a(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new lm({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var kxr=new ft("activeEditorPrompt");async function eAt(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new va;let o=await t.textDocumentProvider.getByUri(n.uri);if(o.status==="valid")if(n.selection&&Pxr(n.selection)){let s=new QE(o,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Di(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...s.render());let c=new QE(o,void 0,["User's active file for additional context:"]);r.push(...c.render())}else if(n.visibleRange){let s=new QE(o,n.visibleRange,["User's current visible code:",`Excerpt from ${Di(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...s.render())}else{let s=new QE(o,void 0,["User's active file for additional context:"]);r.push(...s.render())}else kxr.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${o.status} and reason ${o.status==="notfound"?o.message:o.reason}`)}return r}a(eAt,"processActiveEditor");function Pxr(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}a(Pxr,"notEmptySelection");var Dxr=new ft("fileReferencesPrompt");async function tAt(t,e){let r=t.turnContext.turn.request.references?.filter(m=>m.type==="file")||[],n=t.turnContext.turn.request.references?.filter(m=>m.type==="directory")||[],o=["png","jpg","jpeg","bmp","gif","webp"],s=r.filter(m=>{let h=m.uri.toLowerCase();return!o.some(g=>h.endsWith(`.${g}`))});if(s.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[c,l,u]=await Promise.all([Promise.all(s.map(async m=>{if(e.isCancellationRequested)throw new va;let h=[],g=await t.textDocumentProvider.getByUri(m.uri);if(g.status==="valid"){let A=new QE(g,void 0,[]);A&&h.push(...A.render())}else Dxr.warn(t.context,`Failed to read file ${m.uri} with status ${g.status} and reason ${g.status==="notfound"?g.message:g.reason}`);return h})),eAt(t,e),ace(t.context,e,n)]),d=c.flat(),p=u||[];return d.length>0||l.length>0||p.length>0?["<attachments>",...d,...l,...p,"</attachments>"]:[]}a(tAt,"processFileReferences");var rAt=Ne(xa());var Bxr=new ft("fileReferences"),vce=class extends Yn{static{a(this,"FileReferences")}async renderCopilot(e,r,n,o){let s=o??new An.CancellationTokenSource().token,c=[];try{c=await tAt({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.props.ctx},s)}catch(l){Bxr.debug(this.props.ctx,"Failed to process file references",l)}return c.length===0?vscpp(vscppf,null):vscpp(Vke,{fileReferencesParts:c})}},Vke=class extends Yn{static{a(this,"FileReferencesSection")}renderCopilot(){return vscpp(rAt.TextChunk,null,[this.props.fileReferencesParts.join(`
`)])}};var PM=Ne(xa());var xce=class extends Yn{static{a(this,"UserRequestPrompt")}renderCopilot(e,r,n,o){let s=tn(this.props.userRawMessage),c=fU(this.props.userRawMessage)?this.props.userRawMessage.filter(l=>l.type==="image_url"):[];return vscpp(PM.UserMessage,null,vscpp(PM.TokenLimit,{max:r.tokenBudget/6,flexGrow:3,priority:898},vscpp(vce,{ctx:this.props.ctx,turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider}),c.map(l=>vscpp(PM.Image,{src:l.image_url.url,detail:l.image_url.detail}))),vscpp(jl,{name:"context"},vscpp(Ace,null)),vscpp(jl,{name:"reminderInstructions"},vscpp(kM,{modelConfiguration:this.props.modelConfiguration}),vscpp(yce,null),vscpp(Cce,{modelConfiguration:this.props.modelConfiguration,hasTodoTool:!1})),vscpp(jl,{name:"userRequest",priority:900,flexGrow:7},vscpp(vscppf,null,s)))}};var nH=Ne(xa());var zke=new ft("agentPrompt"),Ece=class extends Yn{static{a(this,"AgentPrompt")}constructor(e){super(e),this.ctx=e.turnContext.ctx,this.turnContext=e.turnContext,this.currentTurn=e.turnContext.turn}async renderCopilot(e,r,n,o){let s=vscpp(vscppf,null,vscpp(hce,{turnContext:this.turnContext,modelConfiguration:this.props.modelConfiguration,toolsService:this.props.toolsService}),await this.getAgentCustomInstructions(),vscpp(nH.UserMessage,null,await this.getOrCreateGlobalAgentContext())),c=this.turnContext.conversation.turns.slice(0,-1);return vscpp(vscppf,null,s,vscpp(bM,{flexGrow:1,priority:700,historyTurns:c,ctx:this.ctx}),vscpp(xce,{flexGrow:2,priority:900,ctx:this.ctx,turnContext:this.turnContext,userRawMessage:this.props.userRawMessage,workspaceFolders:this.props.workspaceFolders,textDocumentProvider:this.props.textDocumentProvider,toolsService:this.props.toolsService,modelConfiguration:this.props.modelConfiguration}),vscpp(gce,{flexGrow:2,priority:899,currentTurn:this.currentTurn}))}async getOrCreateGlobalAgentContext(){let e=await this.getOrCreateGlobalAgentContextContent();return e?Nxr(e):[vscpp(rH,{ctx:this.ctx,workspaceFolders:this.props.workspaceFolders})]}async getOrCreateGlobalAgentContextContent(){let e=`${this.turnContext.conversation.id}/${this.turnContext.turn.id}`,r=this.turnContext.conversation.turns.at(0);if(r){let s=r.getMetadata(tH);if(s?.renderedGlobalContext)return zke.info(this.ctx,`Reusing cached global context from first turn for conversation/turn ${e}`),s.renderedGlobalContext}zke.info(this.ctx,`Rendering fresh global context for conversation/turn ${e}`);let o=(await Mke(rH,{ctx:this.ctx,workspaceFolders:this.props.workspaceFolders},this.props.modelConfiguration)).messages.at(0)?.content;if(o)return r?.setMetadata(new tH(o)),o}async getAgentCustomInstructions(){try{if(!this.props.workspaceFolders||this.props.workspaceFolders.length===0)return vscpp(vscppf,null);let e=this.props.workspaceFolders.map(n=>({uri:n.uri,name:n.name})),r=await oy.getInstructions(this.ctx,e,{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});if(r)return vscpp(nH.UserMessage,null,vscpp(vscppf,null,r))}catch(e){zke.warn(this.ctx,"Failed to get custom instructions",e)}return vscpp(vscppf,null)}};function Nxr(t){return typeof t=="string"?[t]:t.map(e=>{if(e.type==="text")return e.text;if(e.type==="image_url")return vscpp(nH.Image,{src:e.image_url.url,detail:e.image_url.detail})}).filter(e=>e!==void 0)}a(Nxr,"renderedMessageToTsxChildren");var nAt=128,Mxr=100,Lxr=200,k_=new ft("toolCallingLoop"),bce=class t{constructor(e,r,n,o){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=o;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(Ls),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(xl),this.agentPromptProps={turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new uE(this.turnContext.ctx),toolsService:this.toolsService,modelConfiguration:this.modelConfiguration},this.requestId=Ir(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId});let s=LBe()?Lxr:Mxr;this.maxToolCallingLoop=Math.min(s,Bi(e.ctx,qt.MaxToolCallingLoop))}static{a(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n),this.turnContext.clearCopilotEditsSessionHeader();let o=performance.now(),s=await this.runOne(r,e);if(sJe(this.turnContext.ctx,this.turnContext,r,performance.now()-o,this.baseTelemetryWithExp),n={...s},this.toolCallRounds.push(s.round),!s.round.toolCalls.length||s.response.type!=="success"&&s.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let o=(await S_.create(Ece,this.agentPromptProps,this.modelConfiguration).renderPrompt(void 0,r,{collapseSystemMessages:!0})).messages,s="",c=new R_((p,m,h,g)=>{let A=p.trim().match(Yq)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:m,references:h,hideText:A,notifications:g.map(y=>({severity:"warning",message:y.message})),editAgentRounds:[{roundId:e,reply:p}]}),this.turn.annotations.push(...m??[]),s+=p});this.abortIfCanceled(r);let l=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let u={messages:o,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(l),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(u),k_.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(u,null,2)}`);let d=await this.chatFetcher.fetchResponse(u,r,this.baseTelemetryWithExp,(p,m)=>c.isFinishedAfter(p,m));return this.processChatFetchResult(e,d,s,l,r)}async processChatFetchResult(e,r,n,o,s){switch(this.abortIfCanceled(s),k_.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return r.toolCalls&&r.toolCalls.length>0?await this.handleToolCalls({type:"tool_calls",requestId:r.requestId,toolCalls:r.toolCalls,copilotEditsSessionHeader:r.copilotEditsSessionHeader},n,o,e,s):(this.turn.status="success",this.addToolCallModelResponseToTurn(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}});case"offTopic":throw this.turn.status="off-topic",new Ad({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new va;case"failed":throw this.turn.status="error",new Ad({message:$w.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new Ad({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new Ad({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new Ad({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new Ad({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new Ad({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new Ad({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new Ad({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,o,e,s);case"successMultiple":case"unknown":default:throw this.turn.status="error",new Ad({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,o,s){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");this.turnContext.setCopilotEditsSessionHeader(e.copilotEditsSessionHeader);let c=e.toolCalls.map(l=>{if(!l.id){let u=`cls_${t.NextToolCallId++}`;l.id=u}return l});this.addToolCallModelResponseToTurn(r,c);for(let l of c)await this.handleSingleToolCall(l,n,o,s);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:c.map(l=>({id:l.id,name:l.function.name,arguments:JSON.stringify(l.function.arguments)}))}}}async handleSingleToolCall(e,r,n,o){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let s=this.findToolByName(r,e.function.name);if(s){let c=performance.now(),l="success";try{let u=Lw(e),d=this.toolsService.prepareInvocation(s.id,{input:u},o),p=this.shouldRequireToolConfirmation(s.id,u);k_.debug(this.turnContext.ctx,"need tool confirmation",p),await this.requestToolInvocationApproval(d,p,s.id,u,n,e.id,s.annotations,o),this.abortIfCanceled(o),await this.turnContext.agentToolCalls.start(n,e.id,s.name,d.progressMessage||`Running ${s.displayName} tool`);let m=await this.toolsService.invokeTool(this.turnContext,s.id,{toolInvocationToken:e.id,input:u,roundId:n,toolCallId:e.id},o);if(this.abortIfCanceled(o),m.status==="success"){let h=d0t(m);await this.turnContext.agentToolCalls.result(n,e.id,h)}else if(m.status==="error"){let h=Loe(m);await this.turnContext.agentToolCalls.error(n,e.id,h.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.addToolCallResultToTurn(m,e.id)}catch(u){if(u instanceof OE||u instanceof va)throw this.turn.status="cancelled",l="cancelled",this.addToolCallResultToTurn(new yo([new ji("")],"cancelled"),e.id),new OE(u.message);{k_.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${FA(u)}`,u),l="error";let d=new yo([new ji(FA(u).substring(0,300))],"error");this.addToolCallResultToTurn(d,e.id),this.abortIfCanceled(o);let p=Loe(d);await this.turnContext.agentToolCalls.error(n,e.id,p.message)}}finally{let u=performance.now()-c;aJe(this.turnContext.ctx,this.turnContext,s,e.id,n,u,l,this.baseTelemetryWithExp)}}else{let c=`Tool with name ${e.function.name} not found in registered tools`;k_.error(this.turnContext.ctx,c);let l=new yo([new ji(c)],"error");this.addToolCallResultToTurn(l,e.id);let u=Loe(l);await this.turnContext.agentToolCalls.error(n,e.id,u.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}addToolCallModelResponseToTurn(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.turn.response?this.turn.response.message=Ok(this.turn.response.message,n):this.turn.response={message:[n],type:"model"}}addToolCallResultToTurn(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let o=n+fq(e.content),s={role:"tool",content:o,tool_call_id:r};if(!this.turn.response)this.turn.response={message:[s],type:"model"};else{if(bne(this.turn.response.message)&&this.turn.response.message.find(l=>l.role==="tool"&&l.tool_call_id===r)){k_.info(this.turnContext.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.turn.response.message=Ok(this.turn.response.message,s)}}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}shouldRequireToolConfirmation(e,r){if(e.includes("run_in_terminal")){let o=r.command,c=this.turnContext.ctx.get(sE).isCommandAutoApproved(o);if(c.result==="denied")return!0;if(c.result==="approved")return!1}return Bi(this.turnContext.ctx,qt.ToolConfirmAutoApprove)===!0?!1:this.turnContext.turn.needToolCallConfirmation??!1}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new va}async requestToolInvocationApproval(e,r,n,o,s,c,l,u){if(e.confirmationMessages&&r){let d=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:o,roundId:s,toolCallId:c,annotations:l},u);switch(d.result){case"dismiss":throw this.turn.status="cancelled",new OE("Cancelled by user");case"accept":return Promise.resolve();default:throw new OE(`Invalid confirmation result ${d.result}`)}}else k_.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>this.maxToolCallingLoop)throw k_.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${this.maxToolCallingLoop} for turn ${this.turn.id}`),new RM}checkChatPayload(e){if(e.messages.length===0)throw new Ad({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>nAt)throw new Ad({message:`You may not include more than ${nAt} tools in your request.`,responseIsFiltered:!1})}};var Ice=new ft("agenticTurnProcessor"),Tce=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Ls),this.chatFetcher=this.chatFetcher??new Bs(e.ctx),this.turnSuggestions=new __(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{a(this,"AgenticTurnProcessor")}async process(e,r,n,o,s,c){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,o,s,c)}catch(l){Rr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,l);let u=l instanceof Error?l.message:String(l);this.turn.status="error",this.updateTurnResponseWithError(u),await this.endProgress({error:{message:u,code:xP.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,o,s,c,l){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let u=await tc(this.turnContext.ctx,this.turnContext,{languageId:s?.detectedLanguageId??""});r.onCancellationRequested(async()=>{Ice.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});let d=wP().find(p=>p.id===this.turn.template?.templateId);if(d?.response){await this.handleTemplateResponse(d,this.turn.template.userQuestion,r);return}try{let p=l&&c?await w1(this.turnContext.ctx,l,c):await Go.getModelConfiguration(this.turnContext.ctx,"edits",c);this.turnContext.setResolvedModelConfiguration(p),await new bce(this.turnContext,this.chatFetcher,p,u).run(r);let h={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let g=await this.fetchSuggestedTitle(r,u.extendedBy({messageSource:"chat.user"},{}));typeof g=="string"&&g!==""&&(h.suggestedTitle=g)}await this.endProgress(h)}catch(p){if(p instanceof OE)Ice.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,p),this.turn.status="cancelled",await this.cancelProgress();else if(p instanceof va)Ice.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,p),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(p instanceof RM)this.turn.status="error",this.updateTurnResponseWithError(p.message),await this.endProgress({error:{message:p.message,code:xP.ToolRoundExceedError,responseIsIncomplete:!0}});else if(p instanceof Ad)this.turn.status="error",this.updateTurnResponseWithError(p.message),await this.endProgress({error:p.conversationError});else throw Ice.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,p),p}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return Rr.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=Ok(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}async handleTemplateResponse(e,r,n){if(!e.response)return;let o=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:o.message},this.turn.status=o.error?.responseIsFiltered?"filtered":o.error?.responseIsIncomplete?"error":"success",o.error?.responseIsFiltered||o.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:o.annotations,notifications:o.notifications,references:o.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:o.message,code:o.error?.code||0,responseIsIncomplete:o.error?.responseIsIncomplete,responseIsFiltered:o.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:o.message,annotations:o.annotations,notifications:o.notifications,references:o.references,confirmationRequest:o.confirmationRequest}),await this.endProgress())}};f();var Kke="collect-context",Yke="generate-response",wce=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Ls),this.chatFetcher=this.chatFetcher??new Bs(e.ctx),this.postProcessor=new TM(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{a(this,"ModelTurnProcessor")}async process(e,r,n,o,s,c){try{await this.processWithModel(e,r,this.turnContext,n,o,s,c)}catch(l){Rr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,l);let u=l instanceof Error?l.message:String(l);this.turn.status="error",this.turn.response={message:u,type:"meta"},await this.endProgress({error:{message:u,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,o,s,c,l){await this.conversationProgress.begin(this.conversation,this.turn,e);let u=await tc(this.turnContext.ctx,this.turnContext,{languageId:s?.detectedLanguageId??""});if(u=u.extendedBy({mode:this.turn.getChatModeWithDefault().toLowerCase(),...this.turn.userRequestedModel&&{modelId:this.turn.userRequestedModel}}),r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let d=wP().find(g=>g.id===this.turn.template?.templateId);if(d?.response){await this.handleTemplateResponse(d,this.turn.template.userQuestion,r);return}let p=(await Y1(this.turnContext.ctx)).find(g=>g.slug===this.turn.agent?.agentSlug);if(p){let g=await this.checkAgentPreconditions(p);if(g){await this.endProgress(g);return}}await n.steps.start(Kke,"Collecting context"),await this.collectContext(n,r,u,this.strategy.uiKind,d,p);let m;l?m="customized":c?m=(await this.turnContext.ctx.get(ya).getBestChatModelConfig([c])).uiName:m=void 0;let h=await this.strategy.buildConversationPrompt(n,s?.detectedLanguageId??"",void 0,m);if(!h)await n.steps.error(Kke,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(Kke),await n.steps.start(Yke,"Generating response");let g=this.augmentTelemetry(h,u,d,o,s);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let A=await this.fetchConversationResponse(h.messages,r,u.extendedBy({messageSource:"chat.user"},{promptTokenLen:h.tokens}),g,s,c,l),y=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(A,n),await this.endProgress({error:A.error,followUp:A.followup,suggestedTitle:A.suggestedTitle,skillResolutions:h.skillResolutions,updatedDocuments:y}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Rr.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let o=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:o.message},this.turn.status=o.error?.responseIsFiltered?"filtered":o.error?.responseIsIncomplete?"error":"success",o.error?.responseIsFiltered||o.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:o.annotations,notifications:o.notifications,references:o.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:o.message,code:o.error?.code||0,responseIsIncomplete:o.error?.responseIsIncomplete,responseIsFiltered:o.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:o.message,annotations:o.annotations,notifications:o.notifications,references:o.references,confirmationRequest:o.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,o,s,c){let u=await new Eae(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,o,s,c);return this.turn.skills=u.skillIds.map(d=>({skillId:d})),u}async fetchConversationResponse(e,r,n,o,s,c,l){r.onCancellationRequested(async()=>{await this.cancelProgress()});let u="",d=0,p=new R_((y,v,b,I)=>{let S=y.trim().match(Yq)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:y,annotations:v,references:b,hideText:S,notifications:I.map(k=>({severity:"warning",message:k.message}))}),this.turn.response?this.turn.response.message=Kae(this.turn.response.message,y):this.turn.response={message:y,type:"model"},this.turn.annotations.push(...v??[]),u+=y,this.strategy.currentDocument){let k=this.strategy.extractEditsFromResponse(u,this.strategy.currentDocument);k&&k.length>0&&(u="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:k}),d+=k.length)}}),m=l&&c?await w1(this.turnContext.ctx,l,c):await Go.getModelConfiguration(this.turnContext.ctx,"user",c);e=Go.transformMessages(e,m.modelFamily),this.turnContext.setResolvedModelConfiguration(m);let h=this.turn.getResolvedModelId();h&&(o=o.extendedBy({modelId:h}));let g={modelConfiguration:m,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:tn(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},A=await this.chatFetcher.fetchResponse(g,r,n,(y,v)=>p.isFinishedAfter(y,v));return o=o.extendedBy(void 0,{numCodeEdits:d}),await this.postProcessor.postProcess(A,r,p.appliedText,n,o,tn(this.turn.request.message),this.strategy.uiKind,s)}augmentTelemetry(e,r,n,o,s){let c;return o?(this.turn.request.type="follow-up",tJe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,tn(this.turn.request.message),e.tokens,o.type,o.id,s,r),c=x7(this.conversation,this.strategy.uiKind,tn(this.turn.request.message).length,e.tokens,o.type,o.id,r,e.skillResolutions)):c=x7(this.conversation,this.strategy.uiKind,tn(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),c}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(Yke,e.error.message):await r.steps.finish(Yke)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();f();var iAt=Ne(Qc()),oAt=Ne(kA());var jf=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new iAt.ProtocolRequestType("conversation/context");this.typeCheck=na.Compile(n)}static{a(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(kr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},o;try{let s=await r.sendRequest(this.requestType,n),[c,l]=s;if(l){let u=new oAt.ResponseError(l.code,l.message,l.data);Rr.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,u);return}o=c}catch(s){Rr.error(this.ctx,`Error while resolving skill ${this.skillId}`,s);return}if(o!=null){if(!this.typeCheck.Check(o))throw new pd(this.typeCheck.Errors(o));return o}}};var Jke=class{constructor(e,r,n="",o="",s=[],c=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=o;this.skills=s;this.references=c}static{a(this,"SyntheticTurn")}},UE=class{constructor(){this.turns=[]}static{a(this,"SyntheticTurns")}add(e,r,n="",o="",s=[],c=[]){let l=new Jke(e,r,n,o,s,c);return this.turns.push(l),l}get(e){return this.turns.find(r=>r.progressToken===e)}},_ce=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(Ls)}static{a(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Rr.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let o=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:o,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:o,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(ro).getCapabilities(this.turnContext.conversation.id),o=e.skills.filter(s=>n.skills.includes(s));for(let s of o){let l=await new jf(this.turnContext.ctx,s,E.Object({value:E.String()})).resolveSkill(this.turnContext);l&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:l.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await KC(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:Ir()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var qE=class{static{a(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let o=e.ctx.get(UE).get(r);if(o)return new _ce(e,o);let c=(await Y1(e.ctx)).find(u=>u.slug===e.turn.agent?.agentSlug);if(c?.turnProcessor)return c.turnProcessor(e);let l;return e.conversation.source==="inline"?l=new $ae(e.ctx):l=new IM(e.ctx),n!==void 0&&(l.computeSuggestions=n),e.turn.chatMode==="Agent"?new Tce(e,l):new wce(e,l)}};f();var sAt=Ne(Qc());var DM=class{static{a(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new sAt.ResponseError(rr.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};f();function Sce(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Di(t.uri)}]}a(Sce,"resolveAsWorkspaceFolders");f();f();var Fxr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),af=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=a((e,r)=>this._isCancelled?Fxr(e,r):(this.handlers.push(e.bind(r)),{dispose:a(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{a(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var Gf=class{constructor(){this.tokens=new Sr(250)}static{a(this,"ProgressTokens")}add(e,r){let n=new An.CancellationTokenSource,o=new af([r,n.token]);return this.tokens.set(e.toString(),n),o}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var Oxr=E.Object({conversationId:E.Optional(Gae),workDoneToken:E.Union([E.String(),E.Number()]),turns:E.Array(Fgt,{minItems:1}),capabilities:E.Optional(E.Object({allSkills:E.Optional(E.Boolean()),skills:E.Optional(E.Array(E.String()))})),doc:E.Optional(Rp),textDocument:E.Optional(Rp),selection:E.Optional(Hc),visibleRanges:E.Optional(ece),computeSuggestions:E.Optional(E.Boolean()),references:E.Optional(E.Array(wM)),source:E.Optional(hg),workspaceFolder:E.Optional(E.String()),workspaceFolders:E.Optional(E.Array(_M)),ignoredSkills:E.Optional(E.Array(E.String())),userLanguage:E.Optional(E.String()),model:E.Optional(E.String()),modelProviderName:E.Optional(E.String()),chatMode:E.Optional(Yae),needToolCallConfirmation:E.Optional(E.Boolean())});async function Qxr(t,e,r){DM.validate(r.workspaceFolders);let n=await rv(t,r,e),o=t.get(ro).create(r);await Uxr(t,o,r,n);let s=o.turns[o.turns.length-1],c=SM(r),l=t.get(Gf).add(c.progressToken,e),u=new w_(t,o,s,l);return await(await t.get(qE).createProcessor(u,c.progressToken,r.computeSuggestions)).process(c,l,void 0,n,r.model,r.modelProviderName),[{conversationId:o.id,turnId:s.id,agentSlug:s.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}a(Qxr,"handleConversationCreateChecked");async function Uxr(t,e,r,n){for(let o of r.turns){let s=zae(o.request),c=new C_({message:s,type:"user"},o.turnId);o.response&&(c.response={message:o.response,type:"model"}),o.agentSlug&&(c.agent={agentSlug:o.agentSlug}),c.chatMode=Bse(r.chatMode),c.userRequestedModel=o.model??r.model,c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Sce(l),d=tce({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(ro).addTurn(e.id,c,r.references,d,l,u,r.ignoredSkills,void 0)}}a(Uxr,"addTurns");var aAt=et(Oxr,Qxr);f();var qxr=E.Object({conversationId:E.String()});function Hxr(t,e,r){return t.get(ro).destroy(r.conversationId),["OK",null]}a(Hxr,"handleConversationDestroyChecked");var cAt=et(qxr,Hxr);f();var $xr=E.Object({turnId:E.String(),acceptedFileCount:E.Number({minimum:0}),totalFileCount:E.Number({minimum:1})}),Wxr=new ft("conversationNotifyCodeAcceptance");async function jxr(t,e,r){let n=t.get(ro).findByTurnId(r.turnId);if(!n)return Wxr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let o=await tc(t,n,{languageId:""});return Bf(t,void 0,{mode:n?.turn.getChatModeWithDefault()?.toLowerCase()??"unknown",modelId:n?.turn.getResolvedModelId()??"unknown"},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${pu("agentPanel")}.codeAcceptance`,o),["OK",null]}a(jxr,"handleConversationNotifyCodeAcceptanceChecked");var lAt=et($xr,jxr);f();var Gxr=E.Object({});function Vxr(t,e,r){return[{path:t.get(mi).directory},null]}a(Vxr,"handleConversationPersistenceChecked");var uAt=et(Gxr,Vxr);f();f();var Xke=class{static{a(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(Mi).getSession(),n=e.get(su);return r&&r.githubAppId&&r.githubAppId!==_0?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},Zke=class{static{a(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(cr).getToken()).envelope.chat_enabled?"ok":"failed"}}},zxr=[new Xke,new Zke],gg=class{constructor(e,r=zxr){this.ctx=e;this.checks=r;this.emitter=new vs;this.onChange=this.emitter.event;Pa(e,async()=>{await this.check()})}static{a(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(o=>o.check(this.ctx))));let r=e.every(o=>o.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emitter.fire(n),n}};var Kxr=E.Object({forceCheck:E.Optional(E.Boolean())});async function Yxr(t,e,r){let n=r.forceCheck??!1;return[await t.get(gg).check(n),null]}a(Yxr,"handleConversationPreconditionsChecked");var dAt=et(Kxr,Yxr);f();var Jxr=E.Object({turnId:E.String(),rating:E.Number(),doc:E.Optional(Rp),textDocument:E.Optional(Rp),source:E.Optional(hg)});async function Xxr(t,e,r){let n=await rv(t,r,e),o=GT(r.source),s="unrated";r.rating>0?s="positive":r.rating<0&&(s="negative");let c=await tc(t,t.get(ro).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Bf(t,n,{rating:s,uiKind:o},{},`${pu(o)}.messageRating`,c),["OK",null]}a(Xxr,"handleConversationRatingChecked");var fAt=et(Jxr,Xxr);f();f();var Rce=class extends u_{static{a(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:U1,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let o={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(Fw).invokeClientTool(e,o)}catch(s){throw new Error(`Failed to invoke client tool ${this.name}: ${String(s)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new va;let o={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(rg).invokeClientToolConfirmation(e,o)}catch(s){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(s)}`)}}};var Zxr=E.Object({tools:E.Array(Ogt)});function eEr(t,e,r){let n=t.get(xl);return r.tools.forEach(s=>{n.registerTool(new Rce({name:s.name,description:s.description,inputSchema:s.inputSchema,confirmationMessages:s.confirmationMessages}))}),[n.getToolsForModel().filter(s=>s.type!=="mcp"),null]}a(eEr,"conversationRegisterToolsChecked");var pAt=et(Zxr,eEr);f();var tEr=E.Object({workspaceFolders:E.Optional(E.Array(_M))});async function rEr(t,e,r){let n=ike(t).map(s=>({id:s.id,description:s.description,shortDescription:s.shortDescription,scopes:s.scopes})),o=t.get(iy);if(r.workspaceFolders&&r.workspaceFolders.length>0){let c=(await o.collectPromptFiles(t,r.workspaceFolders)).filter(l=>!n.some(u=>u.id===l.name)).map(l=>({id:l.name,description:l.description||"",shortDescription:"",scopes:["chat-panel","agent-panel"]}));n.push(...c)}return[n,null]}a(rEr,"handleConversationTemplatesChecked");var mAt=et(tEr,rEr);f();var nEr=E.Object({workDoneToken:E.Union([E.String(),E.Number()]),conversationId:Gae,turnId:E.Optional(MP),message:qke,followUp:E.Optional(E.Object({id:E.String(),type:E.String()})),doc:E.Optional(Rp),textDocument:E.Optional(Rp),selection:E.Optional(Hc),visibleRanges:E.Optional(ece),computeSuggestions:E.Optional(E.Boolean()),references:E.Optional(E.Array(wM)),workspaceFolder:E.Optional(E.String()),workspaceFolders:E.Optional(E.Array(_M)),ignoredSkills:E.Optional(E.Array(E.String())),confirmationResponse:Qut,model:E.Optional(E.String()),modelProviderName:E.Optional(E.String()),chatMode:E.Optional(Yae),needToolCallConfirmation:E.Optional(E.Boolean()),agentSlug:E.Optional(E.String())});async function iEr(t,e,r){DM.validate(r.workspaceFolders);let n=await rv(t,r,e),o=t.get(ro),s=o.get(r.conversationId),c=zae(r.message),l=new C_({message:c,type:"user"},r.turnId);l.chatMode=Bse(r.chatMode),l.userRequestedModel=r.model,l.needToolCallConfirmation=r.needToolCallConfirmation,r.agentSlug&&(l.agent={agentSlug:r.agentSlug});let u=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,d=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Sce(u),p=tce({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});l=await o.addTurn(s.id,l,r.references,p,u,d,r.ignoredSkills,r.confirmationResponse);let m=SM(r),h=t.get(Gf).add(m.progressToken,e),g=new w_(t,s,l,h);return await(await t.get(qE).createProcessor(g,m.progressToken,r.computeSuggestions)).process(m,h,r.followUp,n,r.model,r.modelProviderName),[{conversationId:s.id,turnId:l.id,agentSlug:l.agent?.agentSlug,modelFamily:r.model,modelProviderName:r.modelProviderName},null]}a(iEr,"handleConversationTurnChecked");var hAt=et(nEr,iEr);f();var oEr=E.Object({conversationId:E.String(),turnId:E.String(),source:E.Optional(hg)});async function sEr(t,e,r){t.get(ro).deleteTurn(r.conversationId,r.turnId);let o=GT(r.source),s=await tc(t,t.get(ro).findByTurnId(r.turnId),{languageId:""});return Bf(t,void 0,{messageId:r.turnId,uiKind:o,conversationId:r.conversationId},{},`${pu(o)}.messageDelete`,s),["OK",null]}a(sEr,"handleConversationTurnDeleteChecked");var gAt=et(oEr,sEr);f();var aEr=E.Object({toolIds:E.Array(E.String())});function cEr(t,e,r){let n=t.get(xl);return r.toolIds.forEach(s=>{n.unregisterTool(s)}),[n.getToolsForModel().filter(s=>s.type!=="mcp"),null]}a(cEr,"conversationUnregisterToolsChecked");var AAt=et(aEr,cEr);f();var lEr=E.Object({tools:E.Array(E.Object({name:E.String(),status:E.Enum(d_)}))});function uEr(t,e,r){let n=t.get(xl);return r.tools.forEach(s=>{n.updateToolStatus(s.name,s.status)}),[n.getToolsForModel().filter(s=>s.type!=="mcp"),null]}a(uEr,"conversationUpdateToolsStatusChecked");var yAt=et(lEr,uEr);f();var dEr=E.Object({document:E.Object({uri:E.String(),text:E.String(),languageId:E.String(),version:E.Number()}),selection:E.Object({start:E.Object({line:E.Number(),character:E.Number()}),end:E.Object({line:E.Number(),character:E.Number()})})});function fEr(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}a(fEr,"buildSystemMessage");function pEr(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,o=t.selection.end.line+1,s=r.map((c,l)=>{let u=t.selection.start.line+l+1;return`/* ${u>n&&u<o?"Selected ":""}Line ${u} */${c}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${o}`,s,"```","","</currentChange>"].join(`
`)}a(pEr,"buildUserMessage");function mEr(t,e){let r=[],n=t.text.split(`
`),o=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,s;for(;(s=o.exec(e))!==null;){let[c,l,u,d,p,m,h]=s;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(p.toLowerCase()))continue;let g=parseInt(u)-1;if(g<0||g>=n.length)continue;let A=n[g],y=Math.max(A.search(/\S/),0),v=A.trimEnd().length,b={uri:t.uri,range:{start:{line:g,character:y},end:{line:g,character:v}},message:h.trim(),kind:p.toLowerCase(),severity:m.toLowerCase()};r.push(b)}return r}a(mEr,"parseReviewComments");async function hEr(t,e,r){if(!r.document.text)return[null,{code:rr.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:rr.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:rr.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:rr.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:rr.InvalidRequest,message:"Selection start line must be before end line"}];let o=t.get(Bs),s=await Go.getModelConfiguration(t,"codeReview"),c=[{role:"system",content:fEr()},{role:"user",content:pEr(r)}],l=await t.get(cr).getToken(),u=await t.get(Lt).updateExPValuesAndAssignments(l),d=await o.fetchResponse({modelConfiguration:s,messages:c,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Kd.user("code-review",Ir())},e,u);if(d.type!=="success")return[null,{code:rr.InternalError,message:"Failed to generate code review"}];let p=mEr(r.document,d.value);return p.sort((m,h)=>m.range.start.line-h.range.start.line),[{comments:p},null]}a(hEr,"handleCopilotCodeReviewChecked");var CAt=et(dEr,hEr);f();f();var iH=class t{constructor(e){this.ctx=e;this.name="ReviewChangesProvider"}static{a(this,"ReviewChangesProvider")}static{this.DEFAULT_TIMEOUT=120*1e3}async fetchCodeReview(e,r){let n=await this.ctx.get(cr).getToken(),o=Hm(this.ctx,n,"api","agents/github-code-review"),c=fh(this.ctx)["Copilot-Integration-Id"];return bx(this.ctx,o,n.token,void 0,sy(),e,r,{"X-Copilot-Code-Review-Mode":"ide","Copilot-Integration-Id":c},t.DEFAULT_TIMEOUT)}static changesToReference(e){return{type:"github.pull_request",id:"1",data:{type:"pull-request",headFileContents:e.map(r=>({path:r.path,content:r.headContent})),baseFileContents:e.map(r=>({path:r.path,content:r.baseContent}))}}}static createReviewRequest(e){return{messages:[{role:"user",copilot_references:[t.changesToReference(e)]}]}}};f();f();var kce=/```suggestion(\u0020*(\r\n|\n))((?<suggestion>[\s\S]*?)(\r\n|\n))?```/g;var Pce=class t{static{a(this,"ReviewChangesResponseParser")}static findFirstNonWhitespaceCharacterIndex(e){let r=e.match(/\S/);return r?r.index:e.length}static removeSuggestion(e){return e.replaceAll(kce,"")}static extractSuggestionAndText(e){kce.lastIndex=0;let n=kce.exec(e)?.groups?.suggestion||null,o=t.removeSuggestion(e);return{suggestion:n,textWithoutSuggestion:o}}static ghCommentToReviewComment(e,r){let n=r.headContent.split(`
`)[e.data.line-1],o=n.trimEnd().length,s={start:{line:e.data.start_line?e.data.start_line-1:e.data.line-1,character:t.findFirstNonWhitespaceCharacterIndex(n)},end:{line:e.data.line-1,character:o}},c=e.data.body,{suggestion:l,textWithoutSuggestion:u}=t.extractSuggestionAndText(c);return{uri:r.uri,range:s,message:u,kind:e.data.problem_type,severity:"medium",suggestion:l}}static parseLine(e){if(e==="data: [DONE]")return[];if(e==="")return[];let r=JSON.parse(e.replace("data: ",""));return Array.isArray(r.copilot_references)&&r.copilot_references.length>0?r.copilot_references.filter(n=>n.type):[]}static parseReviewResponse(e,r){let n=e.split(`
`),o=[];for(let s of n){let c=t.parseLine(s);for(let l of c.filter(u=>u.type==="github.generated-pull-request-comment")){if(l.data.side!=="RIGHT")continue;let u=r.find(p=>p.path===l.data.path);if(!u)continue;let d=t.ghCommentToReviewComment(l,u);o.push(d)}}return o}};var gEr=E.Object({uri:E.String(),path:E.String(),baseContent:E.String(),headContent:E.String()}),AEr=E.Object({changes:E.Array(gEr)}),oH;async function yEr(t,e,r){oH&&(oH.cancel(),oH.dispose()),oH=new An.CancellationTokenSource;let n=new af([e,oH.token]),o=new iH(t);if(!(await t.get(cr).getToken()).isCopilotCodeReviewEnabled)return[null,{code:rr.InternalError,message:"GitHub Copilot Code Review is not enabled."}];let c=iH.createReviewRequest(r.changes),l=await o.fetchCodeReview(c,n);if(!l.ok)return l.status===402?[null,{code:l.status,message:"You have reached your GitHub Copilot Code Review quota limit."}]:[null,{code:rr.InternalError,message:"Failed to generate code review."}];let u=await l.text();return[{comments:Pce.parseReviewResponse(u,r.changes)},null]}a(yEr,"handleCopilotCodeReviewReviewChangesChecked");var vAt=et(AEr,yEr);f();f();var P_=class{constructor(e,r,n,o,s,c){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=o;this.userSelectedModel=s;this.userSelectedModelProviderName=c;this.workingSetUriToPathMap=new Map;for(let l of n.workingSet)this.workingSetUriToPathMap.set(l.uri,hE.uriToPath(l.uri))}static{a(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return Kd.user("conversation-edits",this.editTurnId)}};f();async function Dce(t,e,r,n){let s=t.get(vl).create("panel","en"),c=new Ww({message:"",type:"user"},[]),l="file:///path/to/HelloWorld.java",u=new P_(t,s,c,n,Wr.Gpt4o),d=t.get(dd);await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${l})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:l}),await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:l,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let p="file:///path/to/HelloWorld.py";await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${p})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:p}),await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:p,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:p,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await d.reportTurn(u,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:p,partialText:"",languageId:"python",markdownCodeFence:"```"})}a(Dce,"streamMockedResult");f();var CEr=E.Object({enableMock:E.Boolean()}),nv=class{constructor(){this.enableMock=!1}static{a(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function vEr(t,e,r){return t.get(nv).setMockEnabled(r.enableMock),["OK",null]}a(vEr,"handleTestingSetCopilotEditsResponseChecked");var xAt=et(CEr,vEr);var xEr=E.Object({request:E.String(),response:E.Optional(E.String())}),EEr=E.Union([E.Literal("panel")]),bEr=E.Object({partialResultToken:E.Union([E.String(),E.Number()]),turns:E.Array(xEr,{minItems:1}),workingSet:E.Optional(E.Array(Jq)),source:E.Optional(EEr),workspaceFolder:E.Optional(E.String()),userLanguage:E.Optional(E.String()),model:E.Optional(E.String()),modelProviderName:E.Optional(E.String())});function IEr(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let o=new Ww({message:n.request,type:"user"},e.workingSet);n.response&&(o.response={message:n.response,type:"model"}),e.workspaceFolder&&(o.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,o)}return r}a(IEr,"buildEditConversation");async function TEr(t,e,r){if(t.get(nv).isMockEnabled())return await Dce(t,Ir(),Ir(),r.partialResultToken),[[],null];let n=IEr(t.get(vl),r),o=n.getLastTurn(),s=new P_(t,n,o,r.partialResultToken,r.model,r.modelProviderName),c=t.get(Gf).add(r.partialResultToken,e);return[await t.get(gE).createOrContinueEditConversation(s,c),null]}a(TEr,"handleEditConversationCreateChecked");var EAt=et(bEr,TEr);f();var wEr=E.Object({editConversationId:E.String()});function _Er(t,e,r){return t.get(vl).destroy(r.editConversationId),["OK",null]}a(_Er,"handleEditConversationDestroyChecked");var bAt=et(wEr,_Er);f();var SEr=E.Object({partialResultToken:E.Union([E.String(),E.Number()]),editConversationId:E.String(),message:E.String(),workingSet:E.Optional(E.Array(Jq)),workspaceFolder:E.Optional(E.String()),userLanguage:E.Optional(E.String()),model:E.Optional(E.String())});function REr(t,e,r){let n=t.get(e),o=new Ww({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(o.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,o),n}a(REr,"buildEditConversation");async function kEr(t,e,r){if(t.get(nv).isMockEnabled())return await Dce(t,r.editConversationId,Ir(),r.partialResultToken),[[],null];let n=t.get(vl),o=REr(n,r.editConversationId,r),s=o.getLastTurn(),c=new P_(t,o,s,r.partialResultToken,r.model),l=t.get(Gf).add(r.partialResultToken,e);return[await t.get(gE).createOrContinueEditConversation(c,l),null]}a(kEr,"handleEditConversationTurnChecked");var IAt=et(SEr,kEr);f();var PEr=E.Object({editConversationId:E.String(),editTurnId:E.String(),source:E.Optional(hg)});async function DEr(t,e,r){t.get(vl).deleteTurn(r.editConversationId,r.editTurnId);let o=await WR(t,r.editTurnId,r.editConversationId,{languageId:""});return Bf(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${pu("editsPanel")}.copilotEditsMessageDelete`,o),["OK",null]}a(DEr,"handleEditConversationTurnDeleteChecked");var TAt=et(PEr,DEr);f();var BEr=E.Object({}),NEr=E.Object({servers:E.Array(E.Object({name:E.String(),tools:E.Array(E.Object({name:E.String(),status:E.Enum(d_)}))}))}),MEr=E.Object({serverName:E.String(),promptName:E.String(),arguments:E.Optional(E.Record(E.String(),E.String()))}),LEr=E.Object({serverName:E.String(),promptName:E.String(),argumentName:E.String(),prefix:E.String(),alreadyResolved:E.Optional(E.Record(E.String(),E.String()))}),FEr=E.Object({serverName:E.String(),uri:E.String()});function OEr(t,e,r){return[t.get($f).getAllTools(),null]}a(OEr,"handleGetMCPToolsChecked");function QEr(t,e,r){for(let{name:o,tools:s}of r.servers)for(let{name:c,status:l}of s)t.get($f).updateMCPToolStatus(o,c,l);return[t.get($f).getAllTools(),null]}a(QEr,"handleUpdateMCPToolsStatusChecked");async function UEr(t,e,r){return[await t.get($f).readResource(r.serverName,r.uri),null]}a(UEr,"handleReadResourceChecked");async function qEr(t,e,r){let{serverName:n,promptName:o,arguments:s={}}=r;return[await t.get($f).getPrompt(n,o,s),null]}a(qEr,"handleGetPromptChecked");async function HEr(t,e,r){let{serverName:n,promptName:o,argumentName:s,prefix:c,alreadyResolved:l={}}=r;return[await t.get($f).completePrompt(n,o,s,c,l),null]}a(HEr,"handleCompletePromptChecked");var wAt=et(BEr,OEr),_At=et(NEr,QEr),SAt=et(FEr,UEr),RAt=et(MEr,qEr),kAt=et(LEr,HEr);f();var $Er=E.Object({});async function WEr(t,e,r){let n=await t.get(cr).getToken();return[jEr(await t.get(rd).getMetadata(),n),null]}a(WEr,"handleCopilotModelsChecked");function jEr(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=hh.filterModelsWithEditorPreviewFeatures(t,r),o=[];return n.forEach(s=>{if(s.model_picker_enabled===!0){let c=[];s.capabilities.type==="chat"?(c.push("chat-panel"),c.push("edit-panel"),c.push("inline"),!iY.has(s.capabilities.family)&&s.capabilities.supports?.tool_calls&&(s.capabilities.limits?.max_prompt_tokens??!1)&&c.push("agent-panel"),o.push({modelFamily:s.capabilities.family,modelName:s.name,modelPolicy:s.policy,scopes:c,id:s.id,preview:s.preview??!1,isChatDefault:s.is_chat_default??!1,isChatFallback:s.is_chat_fallback??!1,capabilities:{supports:{vision:s.capabilities.supports?.vision??!1}},billing:s.billing?{isPremium:s.billing?.is_premium??!0,multiplier:s.billing?.multiplier??0}:void 0})):s.capabilities.type==="completion"?o.push({modelFamily:s.capabilities.family,modelName:s.name,modelPolicy:s.policy,scopes:["completion"],id:s.id,preview:s.preview??!1,isChatDefault:s.is_chat_default??!1,isChatFallback:s.is_chat_fallback??!1,capabilities:{supports:{vision:s.capabilities.supports?.vision??!1}},billing:s.billing?{isPremium:s.billing?.is_premium??!0,multiplier:s.billing?.multiplier??0}:void 0}):o.push({modelFamily:s.capabilities.family,modelName:s.name,modelPolicy:s.policy,scopes:c,id:s.id,preview:s.preview??!1,isChatDefault:s.is_chat_default??!1,isChatFallback:s.is_chat_fallback??!1,capabilities:{supports:{vision:s.capabilities.supports?.vision??!1}},billing:s.billing?{isPremium:s.billing?.is_premium??!0,multiplier:s.billing?.multiplier??0}:void 0})}}),o}a(jEr,"filterModels");var PAt=et($Er,WEr);f();var GEr=E.Object({model:E.Optional(E.String()),status:E.Optional(E.String())});async function VEr(t,e,r){return r.model&&r.status==="enabled"?await t.get(rd).acceptModelPolicy(r.model)?["OK",null]:[null,{code:rr.InternalError,message:"Failed to accept model policy"}]:[null,{code:rr.InvalidRequest,message:"Invalid model or status"}]}a(VEr,"handleCopilotModelsPolicyChecked");var DAt=et(GEr,VEr);f();f();f();f();function zEr(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}a(zEr,"panelPositionForDocument");async function*BAt(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}a(BAt,"trimChoices");var BM=class{constructor(e,r,n,o){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=o;this.targetPosition=zEr(this.textDocument,this.startPosition)}static{a(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function ePe(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await ePe(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}a(ePe,"reportSolutions");async function tPe(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:tPe(t,e)}}a(tPe,"generateSolutionsStream");function Bce(t){return t.replace(/\s+/g,"")}a(Bce,"normalizeCompletionText");async function NAt(t,e,r,n,o,s){let c=e.targetPosition,l=e.textDocument,u=wT(t,l.uri),d=Ir(),p=zr.createAndMarkAsIssued({headerRequestId:d,languageId:l.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Lt).fetchTokenAndUpdateExPValuesAndAssignments({uri:l.uri,languageId:l.detectedLanguageId},p),o&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({engineName:o})),s&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({comparisonRequestId:s}));let m=await z3(t,d,t1(l,c),e.savedTelemetryData);if(m.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(m.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(m.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(m.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(m.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let h=m.prompt,g=m.trailingWs;return g.length>0&&(e.startPosition=Is.position(e.startPosition.line,e.startPosition.character-g.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...MD(h),solutionCount:e.solutionCountTarget,promptEndPos:l.offsetAt(c)}),n.debug(t,"prompt:",h),Nt(t,"solution.requested",e.savedTelemetryData),{prompt:h,trailingWs:g,telemetryData:e.savedTelemetryData,repoInfo:u,ourRequestId:d}}a(NAt,"setupPromptAndTelemetry");function MAt(t,e,r,n,o,s){let c=t.get(_A).forLanguage(t,e.detectedLanguageId,s),l=q0(e.detectedLanguageId),u=gZ(e,r),d={language:e.detectedLanguageId,next_indent:u.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},p={};c==="parsing"&&!l&&(p.stop=[`

`,`\r
\r
`]);let m=TT(t,s),h;switch(c){case"server":h=a(()=>{},"finishedCb"),d.force_indent=u.prev??-1,d.trim_by_indentation=!0;break;case"parsingandserver":h=l?I7(t,e,o.startPosition):()=>{},d.force_indent=u.prev??-1,d.trim_by_indentation=!0;break;case"parsing":default:h=l?I7(t,e,o.startPosition):()=>{};break}return{extra:d,postOptions:p,finishedCb:h,engineInfo:m}}a(MAt,"setupCompletionParams");var rPe=new ft("solutions");async function KEr(t,e){let r=e.targetPosition,n=e.textDocument,o=await NAt(t,e,"open copilot",rPe);if("status"in o)return o;let{prompt:s,trailingWs:c,telemetryData:l,repoInfo:u,ourRequestId:d}=o,{extra:p,postOptions:m,finishedCb:h,engineInfo:g}=MAt(t,n,r,s,e,l),A=e.cancellationToken,y={prompt:s,languageId:n.detectedLanguageId,repoInfo:u,ourRequestId:d,engineModelId:g.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:m,headers:g.headers,extra:p},v=await t.get(Pp).fetchAndStreamCompletions(t,y,l.extendedBy(),h,A);if(v.type==="failed"||v.type==="canceled")return{status:"FinishedWithError",error:`${v.type}: ${v.reason}`};let b=v.choices;b=BAt(b),b=v7(b,k=>O7(t,n,r,k,!1,rPe));let I=v7(b,async k=>{let N=k.completionText;rPe.info(t,`Open Copilot completion: [${k.completionText}]`);let F=await QJe(t,n,r,k.completionText)??Is.position(r.line,0),[O]=ew(n.getText(Is.range(F,r)));N=O+N;let Y=k.completionText;c.length>0&&Y.startsWith(c)&&(Y=Y.substring(c.length));let z=k.meanLogProb,V=z!==void 0?Math.exp(z):0,U=l.extendedBy({choiceIndex:k.choiceIndex.toString()});return{completionText:Y,insertText:N,range:Is.range(F,r),meanProb:V,meanLogProb:z||0,requestId:k.requestId,choiceIndex:k.choiceIndex,telemetryData:U,copilotAnnotations:k.copilotAnnotations}});return tPe(A,I[Symbol.asyncIterator]())}a(KEr,"launchSolutions");async function Nce(t,e,r){return t.get($o).withProgress(async()=>{let o=KEr(t,e);return await ePe(o,r)})}a(Nce,"runSolutions");var FAt=Ne(xI()),aH=Ne(Qc());f();f();function Mce(t,e){let r=t.split(`
`),n=e,o=e,s=r[e.line],c=s.indexOf("%");c!==-1&&(s=s.substring(0,c)+s.substring(c+1),n={line:e.line,character:c});let l=s.indexOf("^");if(l!==-1){let u=s.indexOf("^",l+1);if(u===-1)throw new Error("Challenge document must contain zero or two ^ characters.");s=s.substring(0,l)+s.substring(l+1,u)+s.substring(u+1),n={line:e.line,character:e.character},o={line:e.line,character:e.character+u-l-1}}return{cursorLine:s,lines:r,start:n,end:o}}a(Mce,"parseChallengeDoc");var YEr=E.Object({text:E.String(),score:E.Number()}),JEr=E.Object({documents:E.Array(YEr),options:E.Optional(E.Object({}))});async function Lce(t,e,r){let n=Ir();for(let o=0;o<e.length&&o<10;o++){let{text:s,score:c}=e[o],{cursorLine:l,lines:u,start:d}=Mce(s,t),p=[l.slice(Math.min(d.character,t.character))].concat(u.slice(t.line+1)).join(`
`);r.offset=u.slice(0,t.line).reduce((m,h)=>m+h.length+1,0)+d.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:p,insertText:p,range:{start:t,end:t},meanProb:c,meanLogProb:-1,choiceIndex:o,telemetryData:xC.createEmptyConfigForTesting()})}await r.onFinishedNormally()}a(Lce,"runTestSolutions");var _y=class{constructor(e){this.documents=e}static{a(this,"ExternalTestingPanelCompletionDocuments")}};function XEr(t,e,r){return t.forceSet(_y,new _y(r.documents)),["OK",null]}a(XEr,"handleTestingSetPanelCompletionDocumentsChecked");var LAt=et(JEr,XEr);var OAt=wX.type;function ZEr(t,e,r,n,o){let s=Bce(n.completionText),c=(0,FAt.SHA256)(s).toString();return t.get(zs).set(c,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:c,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:o-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:c}),{range:n.range,insertText:n.insertText,command:{command:W2e,title:`Accept completion ${o}`,arguments:[c]}}}a(ZEr,"makeCompletion");function iPe(t,e){return`${t}/${e}`}a(iPe,"progressMessage");var nPe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{a(this,"SolutionHandler")}get service(){return this.ctx.get(kr)}async onSolution(e){this.count+=1;let r=ZEr(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(aH.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:iPe(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return ebr(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(aH.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function ebr(t,e,r=0){t!==void 0&&await e.connection.sendProgress(aH.WorkDoneProgress.type,t,{kind:"end",message:iPe(r,10)})}a(ebr,"reportDone");var sH;async function tbr(t,e,r){let n=await wy(t,r.textDocument,e),o=r.position;r.workDoneToken!==void 0&&await t.get(kr).connection.sendProgress(aH.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:iPe(0,10),percentage:0});let s=[],c=a(p=>(s.push(p),Promise.resolve()),"onCompletion"),l=r.partialResultToken;l!==void 0&&(c=a(async p=>{await t.get(kr).connection.sendProgress(wX.partialResult,l,{items:[p]})},"onCompletion"));let u=new nPe(t,r,c),d=t.get(_y);if(d.documents){let p=d.documents;await Lce(o,p,u)}else{u.offset=n.offsetAt(o);let p=new BM(n,o,e,10);await Nce(t,p,u)}return u.error!==void 0?[null,{code:rr.InternalError,message:u.error}]:[{items:s},null]}a(tbr,"handleChecked");async function rbr(t,e,r){sH&&(sH.cancel(),sH.dispose()),sH=new An.CancellationTokenSource;let n=sH.token,o=new af([e,n]);try{return await tbr(t,o,r)}catch(s){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:rr.ServerCancelled,message:"Request was superseded by a new request"}];throw s}}a(rbr,"handleCheckedWithAbort");var QAt=et(sKe,rbr);f();f();f();function ibr(t,e,r){let{apiUrl:n,serverUrl:o}=r||t.get(mf).getConfiguredUrls(),s=new URL("login/device",o).href,c=new URL("_ping",e.proxy).href,l=new URL("_ping",e.api).href,u=new URL("_ping",e.telemetry).href;function d(p){return new URL(p).host}return a(d,"label"),[{label:d(s),url:s},{label:d(n),url:n,session:r},{label:d(c),url:c},{label:d(l),url:l,session:r},{label:d(u),url:u}]}a(ibr,"urlsToCheck");async function UAt(t,e,r=Q4(t),n,o){let s=ibr(t,r,n).map(async({label:c,url:l,session:u})=>{let{message:d,status:p}=await obr(e,l,u,o);return{label:c,url:l,message:d,status:p}});return await Promise.all(s)}a(UAt,"checkReachability");async function obr(t,e,r,n){try{let o=new AbortController;n?.onCancellationRequested(()=>o.abort());let s=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:o.signal}),c=s.status>=200&&s.status<400?"reachable":"unreachable";return{message:`HTTP ${s.status}`+(s.statusText?` - ${s.statusText}`:""),status:c}}catch(o){return{message:String(o),status:"unreachable"}}}a(obr,"determineReachability");var Cm=Ne(require("os")),NM=Ne(require("tls"));async function HAt(t,e){let r=await t.get(Qr).getImplementation(),n=await t.get(cr).getGitHubSession(),o=await t.get(cr).getToken().catch(()=>{});return{sections:[abr(t),sbr(t,n),cbr(t,r),await lbr(t,r,o?.endpoints,n,e)]}}a(HAt,"collectDiagnostics");function $At(t){return t.sections.map(ubr).join(Cm.EOL+Cm.EOL)+Cm.EOL}a($At,"formatDiagnosticsAsMarkdown");function sbr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:l2(t),"GitHub Account":n,"Session ID":t.get(Fs).sessionId,"Send Restricted Telemetry":LD(t)?"enabled":"disabled","Content Exclusion":t.get(fl).enabled?"enabled":"unavailable"}}}a(sbr,"collectCopilotSection");function abr(t){let e={Plugin:fbr(t),Editor:dbr(t),"Operating System":`${Cm.type()} ${Cm.release()} (${Cm.arch()})`};return iv(e,"NODE_OPTIONS"),{name:"Environment",items:e}}a(abr,"collectEnvironmentSection");function cbr(t,e){let r=t.get(Lc).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":NM.rootCertificates.length,"TLS Default Min Version":NM.DEFAULT_MIN_VERSION,"TLS Default Max Version":NM.DEFAULT_MAX_VERSION};return iv(n,"http_proxy"),iv(n,"https_proxy"),iv(n,"no_proxy"),iv(n,"SSL_CERT_FILE"),iv(n,"SSL_CERT_DIR"),iv(n,"OPENSSL_CONF"),iv(n,"NODE_EXTRA_CA_CERTS"),iv(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}a(cbr,"collectNetworkConfigSection");async function lbr(t,e,r,n,o){return{name:"Reachability",items:Object.fromEntries((await UAt(t,e,r,n,o)).map(({label:c,message:l})=>[c,l]))}}a(lbr,"collectReachabilitySection");function qAt(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}a(qAt,"quoteCode");function iv(t,e){let r=process.env[e];r&&(t[qAt(e)]=qAt(r)),r!==process.env[e.toUpperCase()]&&iv(t,e.toUpperCase())}a(iv,"addEnvironmentVariable");function ubr(t){return`## ${t.name}`+Cm.EOL+Cm.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(Cm.EOL)}a(ubr,"formatSectionAsMarkdown");function dbr(t){let e=t.get(un).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}a(dbr,"getEditorDisplayVersion");function fbr(t){let e=t.get(un).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}a(fbr,"getPluginDisplayVersion");var pbr=E.Object({});async function mbr(t,e){return[{report:$At(await HAt(t,e))},null]}a(mbr,"handleDiagnosticsChecked");var WAt=et(pbr,mbr);f();f();f();f();function jAt(t,e,r){function n(s,c,l){let u=new RegExp(`^(${c})+`,"g");return s.split(`
`).map(d=>{let p=d.replace(u,""),m=d.length-p.length;return l(m)+p}).join(`
`)}a(n,"replace");let o;if(t.tabSize===void 0||typeof t.tabSize=="string"?o=4:o=t.tabSize,t.insertSpaces===!1){let s=a(c=>n(c," ",l=>"	".repeat(Math.floor(l/o))+" ".repeat(l%o)),"r");e.displayText=s(e.displayText),e.completionText=s(e.completionText)}else if(t.insertSpaces===!0){let s=a(c=>n(c,"	",l=>" ".repeat(l*o)),"r");if(e.displayText=s(e.displayText),e.completionText=s(e.completionText),r){let c=a(l=>{if(l==="")return l;let u=l.split(`
`)[0],d=u.length-u.trimStart().length,p=d%o;if(p!==0&&d>0){let m=" ".repeat(p);return n(l,m,h=>" ".repeat((Math.floor(h/o)+1)*o))}else return l},"re");e.displayText=c(e.displayText),e.completionText=c(e.completionText)}}return e}a(jAt,"normalizeIndentCharacter");function GAt(t,e,r,n,o,s,c){let l=n.lineAt(o),u=e.map(d=>{let p=Is.range(Is.position(o.line,0),Is.position(o.line,o.character+d.suffixCoverage)),m="";if(s&&(d.completion=jAt(s,d.completion,l.isEmptyOrWhitespace)),l.isEmptyOrWhitespace&&(d.completion.displayNeedsWsOffset||d.completion.completionText.startsWith(l.text)))m=d.completion.completionText;else{let g=Is.range(p.start,o);m=n.getText(g)+d.completion.displayText}return{uuid:Ir(),insertText:m,range:p,uri:n.uri,index:d.completion.completionIndex,telemetry:d.telemetry,displayText:d.completion.displayText,position:o,offset:n.offsetAt(o),resultType:r,copilotAnnotations:d.copilotAnnotations,clientCompletionId:d.clientCompletionId}});if(r===2&&c!==void 0){let d=u.find(p=>p.index===c);if(d){let p=u.filter(m=>m.index!==c);u=[d,...p]}}return u}a(GAt,"completionsFromGhostTextResults");async function oPe(t,e,r,n={}){let o=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),o=e.position.character-n.selectedCompletionInfo.range.end.character);let s=await CEe(t,e,r,n);if(s.type!=="success")return s;let[c,l]=s.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:s.telemetryBlob}};let u=qZe(t,e.textDocument,e.position,l),d=GAt(t,c,l,e.textDocument,e.position,n.formattingOptions,u);if(d.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:s.telemetryData};if(l!==2){e=e.applyEdits([{newText:d[0].insertText,range:d[0].range}]);let m={isSpeculative:!0,opportunityId:n.opportunityId},h=a(()=>CEe(t,e,void 0,m),"fn");t.get(Nh).set(d[0].clientCompletionId,h)}let p=d.map(m=>{let{start:h,end:g}=m.range,A=An.Range.create(h,An.Position.create(g.line,g.character-o));return{...m,range:A}});return{...s,value:p}}a(oPe,"getInlineCompletionsResult");async function Fce(t,e,r,n,o={}){hbr(t,e,r);let s=await oPe(t,t1(e,r),n,o);return gJe(t,s)}a(Fce,"getInlineCompletions");function hbr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),o=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});tZ.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(o)}.`)}a(hbr,"logCompletionLocation");var XAt=Ne(Qc());f();var VAt=require("crypto");var MM=class{static{a(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new aPe(e,this.id)}},aPe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{a(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let o=this.ctx.get(kr),s=(0,VAt.randomUUID)(),c=o.connection.onProgress(bX.type,s,l=>{n.push(...l)});r.onCancellationRequested(()=>{c?.dispose()});try{let l=await o.connection.sendRequest(bX.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:s},r);n.push(...l)}finally{c?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function LM(t,e,r){try{let n=t.get(Wc),o=new Map;n.providers.forEach(s=>{o.set(s.id,s)}),e.providers.forEach(s=>{let c=o.get(s.id);c&&c instanceof MM&&c.resolver.setContextItems(s.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(s=>{let c=o.get(s);c&&c instanceof MM&&(c.resolver.setUpdate(!0),c.resolver.data=r)})}catch(n){pn.error(t,"Failed to set context items on context providers",n)}}a(LM,"setContextItems");var sPe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};function zAt(t,e,r){return e.map(o=>{try{if(typeof o=="string")return $c(r.uri,o,sPe);if(typeof o=="object"){let s=!0;return"language"in o&&(s&&=r.languageId==(o.language||"")),"scheme"in o&&(s&&=$c(r.uri,o.scheme||"",sPe)),"pattern"in o&&(s&&=$c(r.uri,o.pattern||"",sPe)),s}}catch{return!1}return!1}).some(Boolean)?10:0}a(zAt,"match");f();var gbr=E.Object({documents:E.Array(E.String()),basename:E.Optional(E.String()),options:E.Optional(E.Object({}))}),B_=class{constructor(e,r){this.documents=e;this.basename=r}static{a(this,"ExternalTestingCompletionDocuments")}};function Abr(t,e,r){return t.forceSet(B_,new B_(r.documents,r.basename||"")),["OK",null]}a(Abr,"handleTestingSetCompletionDocumentsChecked");var KAt=new ft("setCompletionDocuments"),JAt=et(gbr,Abr);function Oce(t,e,r,n){let o=t.get(B_);if(o.documents){let s=n?3:1;if(r&&o.basename&&o.basename.trim().length>0){KAt.debug(t,`Returning filtered completions by basename ${o.basename}`);let c=ybr(o,r);return c&&c.length>0?YAt(c,s,e):void 0}else return KAt.debug(t,"Returning completions for all pre-set documents"),YAt(o.documents,s,e)}}a(Oce,"getTestCompletions");function YAt(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:o,lines:s,start:c,end:l}=Mce(n,r);return{insertText:[o.slice(Math.min(c.character,r.character))].concat(s.slice(r.line+1)).join(`
`),range:{start:c,end:l}}})}a(YAt,"sliceAndMapCompletions");function ybr(t,e){return t.basename===Di(e)?t.documents||[]:[]}a(ybr,"getFilteredDocs");var ZAt=E.Object({doc:E.Object({position:fu,insertSpaces:E.Optional(E.Boolean()),tabSize:E.Optional(E.Number()),uri:u7,version:E.Number()}),contextItems:E.Optional(vxe)}),cH;async function eyt(t,e,r,n){cH&&(cH.cancel(),cH.dispose()),cH=new An.CancellationTokenSource;let o=new af([e,cH.token]);r.contextItems&&LM(t,r.contextItems);let s=Oce(t,r.doc.position,r.doc.uri,n);if(s)return[{completions:s.map(h=>({uuid:Ir(),text:h.insertText,displayText:h.insertText,position:r.doc.position,range:h.range,docVersion:r.doc.version}))},null];let c;try{c=await wy(t,r.doc,o)}catch(m){if(!(m instanceof XAt.ResponseError))throw m;switch(m.code){case rr.CopilotNotAvailable:case rr.ContentModified:return[{completions:[]},null]}throw m}let l=r.doc.position,u=await Fce(t,c,l,o,{isCycling:n,formattingOptions:r.doc});if(!u)return[{completions:[]},null];let d=t.get(zs);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{completions:u.map(m=>({uuid:m.uuid,text:m.insertText,range:m.range,displayText:m.displayText,position:m.position,docVersion:c.version}))},null]}a(eyt,"handleGetCompletionsHelper");var tyt=et(ZAt,(t,e,r)=>eyt(t,e,r,!1)),ryt=et(ZAt,(t,e,r)=>eyt(t,e,r,!0));f();var nyt=Ne(xI()),FM=Ne(Qc());var Cbr=E.Object({doc:E.Object({position:fu,uri:u7,version:E.Number()}),panelId:E.String()});function vbr(t,e,r,n,o){let s=Bce(o.completionText),c=(0,nyt.SHA256)(s).toString();return t.get(zs).set(c,{displayText:o.insertText,insertText:o.completionText,offset:n,uuid:c,range:r,uri:e.doc.uri,telemetry:o.telemetryData,index:o.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:o.copilotAnnotations,clientCompletionId:c}),{panelId:e.panelId,range:r,completionText:o.completionText,displayText:o.insertText,score:o.meanProb,solutionId:c}}a(vbr,"makeSolution");var cPe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{a(this,"SolutionHandler")}get service(){return this.ctx.get(kr)}onSolution(e){return this.service.connection.sendNotification(new FM.NotificationType("PanelSolution"),vbr(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return iyt(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new FM.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function iyt(t,e){return e.connection.sendNotification(new FM.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}a(iyt,"reportDone");var lH;async function xbr(t,e,r){lH&&(lH.cancel(),lH.dispose()),lH=new An.CancellationTokenSource;let n=new af([e,lH.token]),o=r.doc.position,s=Is.range(o,o),c=new cPe(t,r,s),l=t.get(_y);if(l.documents){let u=l.documents;Lce(o,u,c)}else{let u;try{u=await wy(t,r.doc,n)}catch(p){if(!(p instanceof FM.ResponseError))throw p;switch(p.code){case rr.CopilotNotAvailable:case rr.ContentModified:return Ebr(t,r)}throw p}c.offset=u.offsetAt(o);let d=new BM(u,o,n,10);Nce(t,d,c)}return[{solutionCountTarget:10},null]}a(xbr,"handleGetPanelCompletionsChecked");async function Ebr(t,e){return await iyt(e.panelId,t.get(kr)),[{solutionCountTarget:0},null]}a(Ebr,"produceEmptySolutions");var oyt=et(Cbr,xbr);f();var bbr=E.Object({});function Ibr(t,e,r){return[{version:t.get(wo).getDisplayVersion(),buildType:EC(t),runtimeVersion:`node/${process.versions.node}`},null]}a(Ibr,"handleGetVersionChecked");var syt=et(bbr,Ibr);f();var Tbr=E.Object({changes:E.Array(E.String()),userCommits:E.Array(E.String()),recentCommits:E.Array(E.String()),workspaceFolder:E.Optional(E.String()),userLanguage:E.Optional(E.String())});async function wbr(t,e,r){if(r.changes.length===0)return[null,{code:rr.InvalidRequest,message:"No changes provided"}];let n=t.get(ro),o=n.create({capabilities:{skills:[tv]}}),s=new C_({message:"",type:"user"});await n.addTurn(o.id,s);let c=SM({workDoneToken:Ir()});await t.get(Ls).begin(o,s,c);let d=(await new w_(t,o,s,e).skillResolver.resolve(tv))?.head?.name,m=await t.get(Hk).generateCommitMessage(t,e,r,d);return m==null?[null,{code:rr.InternalError,message:"Failed to generate commit message"}]:[{commitMessage:m},null]}a(wbr,"handleGitCommitGenerateChecked");var ayt=et(Tbr,wbr);f();var lyt=Sve.type,uH;function cyt(t){return{title:"Completion Accepted",command:gq,arguments:[t]}}a(cyt,"makeCommand");async function _br(t,e,r){uH&&(uH.cancel(),uH.dispose());let n=r.context.triggerKind===1;uH=new An.CancellationTokenSource;let o=uH.token,s=new af([e,o]);r.contextItems&&LM(t,r.contextItems,r.data);let c=Oce(t,r.position,r.textDocument.uri,n);if(c)return[{items:c.map(g=>({command:cyt(Ir()),...g}))},null];let l=await wy(t,r.textDocument,s),u=r.position,d=await Fce(t,l,u,s,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!d)return e.isCancellationRequested?[null,{code:rr.RequestCancelled,message:"Request was canceled"}]:o.isCancellationRequested?[null,{code:rr.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let p=t.get(zs);for(let h of d)p.set(h.uuid,{...h,triggerCategory:"ghostText"});return[{items:d.map(h=>({command:cyt(h.uuid),insertText:h.insertText,range:h.range}))},null]}a(_br,"handleChecked");var uyt=et(oZ,(t,e,r)=>_br(t,e,r));f();var dyt=Pve.type,dH;async function Rbr(t,e,r){dH&&(dH.cancel(),dH.dispose());let n=r.context.triggerKind===1;dH=new An.CancellationTokenSource;let o=dH.token,s=new af([e,o]);r.contextItems&&LM(t,r.contextItems);let c=await wy(t,r.textDocument,s),l=await oPe(t,t1(c,r.position),s,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(l.type!=="promptOnly")throw new Error(`Unexpected result type ${l.type}`);return[{prompt:l.prompt},null]}a(Rbr,"handleChecked");var fyt=et(oZ,(t,e,r)=>Rbr(t,e,r));f();f();function lPe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,o=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return OM(o)}a(lPe,"asReadableCert");function OM(t){return t.replace(/\s/g,"")}a(OM,"normalizeNewlines");var Pbr=E.Object({});async function Dbr(t){return[{certificates:(await t.get(Al).getAllRootCAs()).map(OM)},null]}a(Dbr,"handleListCertificatesChecked");var pyt=et(Pbr,Dbr);f();f();var hyt=E.Object({url:E.String(),source:E.String(),id:E.String()}),gyt=E.Object({version:E.String(),release_date:E.String(),is_latest:E.Boolean()}),Bbr=E.Object({id:E.String(),name:E.String(),description:E.String(),status:E.Optional(E.Union([E.Literal("active"),E.Literal("deprecated")])),repository:E.Optional(hyt),version_detail:gyt}),uxo=E.Object({servers:E.Array(Bbr),next:E.Optional(E.String()),total_count:E.Number()}),myt=E.Union([E.Object({type:E.Literal("positional"),description:E.Optional(E.String()),is_required:E.Optional(E.Boolean()),format:E.Optional(E.Union([E.Literal("string"),E.Literal("number"),E.Literal("boolean"),E.Literal("filepath")])),value:E.Optional(E.String()),is_secret:E.Optional(E.Boolean()),default:E.Optional(E.String()),choices:E.Optional(E.Array(E.String())),value_hint:E.Optional(E.String()),is_repeated:E.Optional(E.Boolean())}),E.Object({type:E.Literal("named"),name:E.String(),description:E.Optional(E.String()),is_required:E.Optional(E.Boolean()),format:E.Optional(E.Union([E.Literal("string"),E.Literal("number"),E.Literal("boolean"),E.Literal("filepath")])),value:E.Optional(E.String()),is_secret:E.Optional(E.Boolean()),default:E.Optional(E.String()),choices:E.Optional(E.Array(E.String())),is_repeated:E.Optional(E.Boolean())})]),Ayt=E.Object({name:E.String(),description:E.Optional(E.String()),is_required:E.Optional(E.Boolean()),format:E.Optional(E.Union([E.Literal("string"),E.Literal("number"),E.Literal("boolean"),E.Literal("filepath")])),value:E.Optional(E.String()),is_secret:E.Optional(E.Boolean()),default:E.Optional(E.String()),choices:E.Optional(E.Array(E.String()))}),Nbr=E.Object({registry_name:E.String(),name:E.String(),version:E.String(),runtime_hint:E.Optional(E.String()),runtime_arguments:E.Optional(E.Array(myt)),package_arguments:E.Optional(E.Array(myt)),environment_variables:E.Optional(E.Array(Ayt))}),Mbr=E.Object({transport_type:E.Union([E.Literal("streamable"),E.Literal("sse")]),url:E.String(),headers:E.Optional(E.Array(Ayt))}),dxo=E.Object({id:E.String(),name:E.String(),description:E.String(),status:E.Optional(E.Union([E.Literal("active"),E.Literal("deprecated")])),repository:E.Optional(hyt),version_detail:gyt,packages:E.Optional(E.Array(Nbr)),remotes:E.Optional(E.Array(Mbr))}),yyt=E.Object({baseUrl:E.String(),limit:E.Optional(E.Number({minimum:1})),offset:E.Optional(E.Number({minimum:0,default:0}))}),Cyt=E.Object({baseUrl:E.String(),id:E.String(),version:E.Optional(E.String())});async function Lbr(t,e,r){if(!r.baseUrl)return[null,{code:rr.InvalidParams,message:"Base URL is required"}];let n=t.get(Qr),o=new URLSearchParams;r.limit!==void 0&&o.append("limit",r.limit.toString()),r.offset!==void 0&&o.append("offset",r.offset.toString());let s=`${r.baseUrl}${o.toString()?`?${o.toString()}`:""}`;try{let c=await n.fetch(s,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!c.ok)return[null,{code:rr.InternalError,message:`MCP Registry API error: HTTP ${c.status}`}];let l=await c.text();return[JSON.parse(l),null]}catch(c){return[null,{code:rr.InternalError,message:`Failed to fetch servers from MCP Registry: ${c instanceof Error?c.message:String(c)}`}]}}a(Lbr,"handleListServersChecked");async function Fbr(t,e,r){if(!r.baseUrl)return[null,{code:rr.InvalidParams,message:"Base URL is required"}];if(!r.id)return[null,{code:rr.InvalidParams,message:"Server ID is required"}];let n=t.get(Qr),o=new URLSearchParams;r.version!==void 0&&o.append("version",r.version);let s=`${r.baseUrl}/${r.id}${o.toString()?`?${o.toString()}`:""}`;try{let c=await n.fetch(s,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(c.status===404)return[null,{code:rr.InternalError,message:"Server not found"}];if(!c.ok)return[null,{code:rr.InternalError,message:`MCP Registry API error: HTTP ${c.status}`}];let l=await c.text();return[JSON.parse(l),null]}catch(c){return[null,{code:rr.InternalError,message:`Failed to fetch server from MCP Registry: ${c instanceof Error?c.message:String(c)}`}]}}a(Fbr,"handleGetServerChecked");var vyt=et(yyt,Lbr),xyt=et(Cyt,Fbr);f();async function Obr(t,e,r){let n=t.get(yy);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let o=Bl(r.textDocument.uri);t.get(qA).onUserPositionChange(o,new jr(r.position.line,r.position.character));let s=await n.handleNextEditRequest(o,r.textDocument.version,e);return s?[{edits:s.map(l=>({text:l.edit.text,textDocument:l.edit.textDocument,range:l.edit.range,command:{title:"Accept inline edit",command:gq,arguments:[l.id]}}))},null]:[{edits:[]},null]}a(Obr,"handleChecked");var Eyt=et(iKe,Obr);f();var Ubr=E.Object({uuid:E.String({minLength:1}),acceptedLength:E.Optional(E.Number({minimum:1}))});function qbr(t,e,r){let n=t.get(zs),o=n.get(r.uuid);return o&&(Hbr(r,o)==="full"?(n.delete(r.uuid),Y3(t,o,o.triggerCategory)):Mee(t,o,r.acceptedLength,0,o.triggerCategory,"cumulative")),["OK",null]}a(qbr,"notifyAcceptedChecked");function Hbr(t,e){return t.acceptedLength===void 0?"full":t.acceptedLength<e.insertText.length?"partial":"full"}a(Hbr,"getCompletionType");var byt=et(Ubr,qbr);f();var $br=E.Object({uuids:E.Array(E.String())});function Wbr(t,e,r){let n=t.get(zs),o=r.uuids.flatMap(s=>n.get(s)??[]);if(o.length>0){let s=o[0];for(let l of r.uuids)n.delete(l);let c=o.map(l=>({completionText:l.displayText,completionTelemetryData:l.telemetry}));Nee(t,"ghostText",s.offset,s.uri,c),t.get(od).resetState()}return["OK",null]}a(Wbr,"notifyRejectedChecked");var Iyt=et($br,Wbr);f();var jbr=E.Object({uuid:E.String({minLength:1})});function Gbr(t,e,r){let o=t.get(zs).get(r.uuid);return o&&rZ(t,o.triggerCategory,o),["OK",null]}a(Gbr,"notifyShownChecked");var Tyt=et(jbr,Gbr);f();var Vbr=RJe;function zbr(t,e,r){let n=t.get(Wc),o={unregistered:[],registered:[]};return r.providers.forEach(s=>{try{let c=new MM(t,s.id,s.selector);n.registerContextProvider(c),o.registered.push(s.id)}catch{o.unregistered.push(s.id)}}),[o,null]}a(zbr,"registerContextProviders");var wyt=et(Vbr,zbr);f();f();var Kbr=E.Object({uri:E.Optional(E.String())}),Ybr=E.Object({showEditorCompletions:E.Optional(E.Boolean()),enableAutoCompletions:E.Optional(E.Boolean()),delayCompletions:E.Optional(E.Boolean()),filterCompletions:E.Optional(E.Boolean())}),Syt=E.Object({github:E.Optional(E.Object({copilot:E.Optional(E.Object({}))})),[NBe]:E.Optional(Kbr),http:E.Optional(Fje),telemetry:E.Optional(E.Object({telemetryLevel:E.Optional(E.String())}))}),fH=Object.keys(Syt.properties).filter(t=>t!=="github"),Jbr=E.Intersect([Syt,Ybr]),Xbr=E.Object({settings:E.Optional(E.Union([E.Object({}),E.Array(E.Unknown(),{maxItems:0})])),authProvider:E.Optional(E.Never())}),_yt=na.Compile(Xbr),uPe=na.Compile(Jbr);async function Uce(t,e){if(!_yt.Check(e))throw Qce(t),new pd(_yt.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;return r&&Zbr(t,r),Qce(t,r),Promise.resolve()}a(Uce,"notifyChangeConfiguration");function Zbr(t,e){for(let n of uPe.Errors(e)){let o=n.path.split("/")?.[1];Pu.warn(t,`Invalid ${n.path.slice(1).replace(/\//g,".")} setting:`,n.message),delete e[o]}if(!uPe.Check(e))throw new pd(uPe.Errors(e));e.http&&dPe(t,e.http);let r=e["github-enterprise"];r&&tNe(t,r.uri),e.github?.copilot&&eIr(t,e.github.copilot)}a(Zbr,"applySettingsToConfiguration");function eIr(t,e){let r=t.get(lg),n={};for(let o of Object.values(qt)){let s=Uje(e,o);n[o]=s}r.setCopilotSettings(n),typeof e.mcp=="string"&&nIr(t,e.mcp),e.agent&&typeof e.agent=="object"&&iIr(t,e.agent),tIr(t,e.globalCopilotInstructions||""),rIr(t,e.globalGitCommitInstructions||"")}a(eIr,"applyCopilotConfiguration");function tIr(t,e){try{t.get(_1).setGlobalCopilotInstructions(e)}catch(r){Pu.error(t,"Failed to apply global Copilot instructions configuration",r)}}a(tIr,"applyGlobalCopilotInstructionsConfiguration");function rIr(t,e){try{t.get(_1).setGlobalGitCommitInstructions(e)}catch(r){Pu.error(t,"Failed to apply global Git commit instructions configuration",r)}}a(rIr,"applyGlobalGitCommitInstructionsConfiguration");function dPe(t,e){let r=t.get(lg);e.proxy===void 0&&(e=Oje(r.env));try{r.setHttpSettings(FO(e))}catch(n){if(!(n instanceof TypeError))throw n;Pu.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}a(dPe,"applyHttpConfiguration");async function nIr(t,e){try{let r=JSON.parse(e||"{}");await t.get($f).updateMCPServers(r)}catch(r){Pu.error(t,"Failed to apply MCP configuration",r)}}a(nIr,"applyMCPConfiguration");function iIr(t,e){try{let r=e;t.get(sE).updateConfiguration(r.tools?.terminal?.autoApprove)}catch(r){Pu.error(t,"Failed to apply settings configuration",r)}}a(iIr,"applyTerminalAutoApproveConfiguration");function Qce(t,e){if(t.get(lg).markReady(),!t.get(bs).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Od).initialize(r)}}a(Qce,"initializePostConfigurationDependencies");var Ryt=E.Object({name:E.String(),version:E.String(),readableName:E.Optional(E.String())}),oIr=E.Object({editorInfo:Ryt,editorPluginInfo:Ryt,editorConfiguration:E.Optional(E.Object({}))});async function sIr(t,e,r){t.get(un).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),Koe(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),await Uce(t,{settings:r.editorConfiguration}),Nt(t,"setEditorInfo");for(let n of["github",...fH])r.editorConfiguration&&n in r.editorConfiguration&&Nt(t,`setEditorInfo.editorConfiguration.${n}`);return["OK",null]}a(sIr,"handleSetEditorInfoChecked");var kyt=et(oIr,sIr);f();var aIr=E.Object({options:E.Optional(E.Object({}))});async function cIr(t,e,r){let n=t.get(Pf),o=n.pendingSignIn?.status;if(o===void 0)return[null,{code:rr.InvalidRequest,message:"No pending sign in"}];let s;try{return s=await o,[s,null]}catch(c){return[null,{code:rr.DeviceFlowFailed,message:String(c)}]}finally{n.pendingSignIn=void 0}}a(cIr,"handleSignInConfirmChecked");var Pyt=et(aIr,cIr);f();var lIr=E.Object({options:E.Optional(E.Object({})),githubAppId:E.Optional(E.String())});async function uIr(t,e,r){try{let o=await t.get(Mi).checkAndUpdateStatus({githubAppId:r.githubAppId});if(o.status==="OK")return[{status:"AlreadySignedIn",user:o.user},null];let c=await t.get(Pf).initiate(r);return[{status:"PromptUserDeviceFlow",userCode:c.user_code,verificationUri:c.verification_uri,expiresIn:c.expires_in,interval:c.interval,command:{command:Yoe,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof ka))throw n;return[null,{code:rr.DeviceFlowFailed,message:n.message}]}}a(uIr,"handleSignInInitiateChecked");var fPe=et(lIr,uIr);f();var dIr=E.Object({githubToken:E.String({minLength:1}),user:E.String({minLength:1}),githubAppId:E.Optional(E.String({minLength:1}))});async function fIr(t,e,r){let n=r.githubToken,o=r.user,s=r.githubAppId,c=t.get(Mi);return[await t.get(Pf).save({...c.getConfiguredUrls(),accessToken:n,login:o,githubAppId:s}),null]}a(fIr,"handleSignInWithGithubTokenChecked");var Dyt=et(dIr,fIr);f();var pIr=E.Object({options:E.Optional(E.Object({}))});async function mIr(t,e,r){return[await t.get(Pf).abandon(),null]}a(mIr,"handleSignOutChecked");var Byt=et(pIr,mIr);f();var hIr=E.Object({transaction:E.Optional(E.String()),stacktrace:E.Optional(E.String()),properties:E.Optional(E.Record(E.String(),E.String())),platform:E.Optional(E.String()),exception_detail:E.Optional(E.Array(E.Object({type:E.Optional(E.String()),value:E.Optional(E.String()),stacktrace:E.Optional(E.Array(E.Object({filename:E.Optional(E.String()),lineno:E.Optional(E.Union([E.String(),E.Integer()])),colno:E.Optional(E.Union([E.String(),E.Integer()])),function:E.Optional(E.String()),in_app:E.Optional(E.Boolean())})))})))}),pPe=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{a(this,"AgentEditorError")}};function gIr(t,e,r){let n=t.get(wo),o=t.get(un).getEditorPluginInfo(),s=r.properties||{},c;r.platform&&r.exception_detail&&H1.has(o.name)&&(c=Object.assign({rollup_id:"auto",context:upe(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},H1.get(o.name)),r.transaction&&(c.transaction=r.transaction),n.getBuildType()!=="dev"&&(c.release=`${c.app}@${o.version}`));let l=new pPe(r.stacktrace??"N/A",o.name);return l.stack=void 0,Ja(t,l,void 0,s,c),["OK",null]}a(gIr,"handleTelemetryExceptionChecked");var Nyt=et(hIr,gIr);f();f();f();function mPe(t){let e=Date.now()+((t?.refresh_in??0)+cV)*1e3;return new u2({token:`test token ${Ir()}`,refresh_in:0,expires_at:e,...t},void 0,e)}a(mPe,"createTestCopilotToken");var QM=class extends ou{constructor(){super(...arguments);this.defaultToken=mPe({token:"tid=test;rt=1"})}static{a(this,"FakeCopilotTokenFetcherFromSession")}fetchTokenResult(r,n){switch(n.accessToken){case"":return{copilotToken:this.defaultToken};case"valid-github-token":return{copilotToken:mPe({token:"tid=valid-copilot-token"})};case void 0:return{failureKind:"NotSignedIn"};case"notauth-github-token":return{failureKind:"NotAuthorized",message:"notauth",canSignUpForLimited:!0};case"bogus-github-token":return{failureKind:"NotAuthorized",message:"bogus",canSignUpForLimited:!1};case"expired-github-token":return{failureKind:"HTTP401",message:"expired"};default:throw new Error("Don't have a valid GitHub token")}}};var qce=class extends ou{constructor(r){super();this.envelopeFn=r}static{a(this,"StaticCopilotTokenFetcher")}async fetchTokenResult(){return{copilotToken:mPe(await this.envelopeFn())}}};var AIr=E.Object({options:E.Optional(E.Object({}))});async function yIr(t,e,r){let n=new QM;return t.get(Mi).setTransientSession({accessToken:"valid-github-token",login:"always auth"}),t.forceSet(ou,n),t.get($o).forceNormal(),await new Promise(o=>setTimeout(o,0)),["OK",null]}a(yIr,"handleTestingAlwaysAuthChecked");var Myt=et(AIr,yIr);f();var CIr=E.Object({messages:E.Array(E.Object({role:E.Enum(ga),content:E.String(),name:E.Optional(E.String())})),modelFamily:E.Optional(E.Enum(Wr)),stop:E.Optional(E.Array(E.String())),conversationOptions:E.Optional(E.Object({maxResponseTokens:E.Optional(E.Number()),temperature:E.Optional(E.Number())}))});async function vIr(t,e,r){let n=new Bs(t),o=await t.get(ya).getBestChatModelConfig([r.modelFamily??Wr.CopilotBase]),s=await WR(t,"","");return[await n.fetchResponse({modelConfiguration:o,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:Kd.user("test",Ir())},e,s),null]}a(vIr,"handleChatMLChecked");var Lyt=et(CIr,vIr);f();f();f();var WM=Ne(UCt(),1),PTo={ALPN_HTTP2:WM.default.ALPN_HTTP2,ALPN_HTTP2C:WM.default.ALPN_HTTP2C,ALPN_HTTP1_1:WM.default.ALPN_HTTP1_1,ALPN_HTTP1_0:WM.default.ALPN_HTTP1_0},{fetch:DTo,context:qCt,reset:BTo,noCache:NTo,h1:MTo,keepAlive:LTo,h1NoCache:FTo,keepAliveNoCache:OTo,cacheStats:QTo,clearCache:UTo,offPush:qTo,onPush:HTo,createUrl:$To,timeoutSignal:WTo,Body:jTo,Headers:HCt,Request:GTo,Response:VTo,AbortController:zTo,AbortError:ile,AbortSignal:KTo,FetchBaseError:YTo,FetchError:JTo,ALPN_HTTP2:XTo,ALPN_HTTP2C:ZTo,ALPN_HTTP1_1:ewo,ALPN_HTTP1_0:two}=WM.default;var WCt=require("crypto"),jCt=require("http"),GCt=require("stream"),VCt=require("util"),GM=Ne(kA());var Hwr=9e4,$wr=new GM.ProtocolRequestType("copilot/fetch"),Wwr=new GM.ProtocolRequestType("copilot/fetchCancel"),jwr=new GM.ProgressType,Gwr=new GM.ProtocolRequestType("copilot/fetchDisconnectAll"),ov=class extends Error{static{a(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},jM=class extends Qr{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(wo).getVersion()}`}static{a(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(kr).connection.sendRequest(Gwr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:o}=n,s=this.ctx.get(kr).connection,c=(0,WCt.randomUUID)(),l=new An.CancellationTokenSource,u=new GCt.PassThrough,d=a(()=>{s.sendRequest(Wwr,{workDoneToken:c})},"sendCancelRequest"),p=a(()=>{u.emit("error",new ile("EditorFetch request aborted")),u.end()},"destroyBodyStream");if(o){if(!(o instanceof AbortSignal))throw new ov("EditorFetcher received unexpected abort signal");if(o.aborted)throw new ile("EditorFetcher signal aborted before fetch");o.addEventListener("abort",d)}s.onProgress(jwr,c,h=>{h.kind==="end"?(o?.removeEventListener("abort",d),o?.removeEventListener("abort",p),h.error&&u.emit("error",new ov(h.error)),u.end()):h.kind==="report"&&u.write(h.chunk)});let m=await new Promise((h,g)=>{let A=setTimeout(()=>{g(new ov("Request timed out from lsp server"))},n.timeout??Hwr),y=a(()=>{g(new ile("EditorFetcher request aborted"))},"rejectIfAborted");o?.addEventListener("abort",y),s.sendRequest($wr,zwr(r,c,n),l.token).then(h).catch(v=>{let b="EditorFetcher request failed";v&&typeof v=="object"&&"message"in v&&(b+=`: ${String(v.message)}`),v&&typeof v=="object"&&"data"in v&&(b+=`: ${(0,VCt.inspect)(v.data)}`),g(new ov(b))}).finally(()=>{o?.removeEventListener("abort",y),clearTimeout(A)})});if(!m.status)throw new ov("EditorFetcher received invalid response");return o?.addEventListener("abort",p),new yI(m.status,jCt.STATUS_CODES[m.status]??"",new HCt(m.headers),()=>Vwr(u),()=>u)}};function Vwr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",o=>n+=String(o))})}a(Vwr,"consumeStream");function zwr(t,e,r){let{timeout:n,method:o}=r,s=r.headers??{},c=r.json?JSON.stringify(r.json):r.body;return r.json&&(s["content-type"]="application/json"),{url:t,headers:s,body:c,timeout:n,method:o,workDoneToken:e}}a(zwr,"convertOptionsToParams");var Kwr=E.Object({url:E.String(),headers:E.Optional(E.Record(E.String(),E.String())),body:E.Optional(E.String()),timeout:E.Optional(E.Number()),method:E.Optional(E.Union([E.Literal("GET"),E.Literal("POST"),E.Literal("DELETE")])),cancelBeforeRequest:E.Optional(E.Boolean()),cancelAfterRequest:E.Optional(E.Boolean()),cancelAfterFirstChunk:E.Optional(E.Boolean())});async function Ywr(t,e,r){let n=new jM(t),o=new AbortController,s=o.signal,{url:c,cancelBeforeRequest:l,cancelAfterRequest:u,cancelAfterFirstChunk:d,...p}=r;l&&o.abort();let m=n.fetch(c,{signal:s,...p});u&&o.abort();let h;try{h=await m}catch(y){return[{error:`Fetch stream error: ${y instanceof ov?y.message:String(y)}`},null]}let{status:g}=h,A=Object.fromEntries(Array.from(h.headers));try{if(d){let v=h.body();for await(let b of v){let I=b.toString();return o.abort(),[{status:g,headers:A,body:I},null]}}let y=await h.text();return[{status:g,headers:A,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof ov?y.message:String(y)}`},null]}}a(Ywr,"handleTestingFetchChecked");var zCt=et(Kwr,Ywr);f();var Jwr=E.Object({});async function Xwr(t,e,r){return await t.get(tl).flush(),["OK",null]}a(Xwr,"handleTestingFlushPromiseQueueChecked");var KCt=et(Jwr,Xwr);f();var Zwr=E.Object({filePath:E.String(),code:E.String(),offset:E.Number(),languageId:E.String(),timeout:E.Optional(E.Number()),waitForContext:E.Optional(E.Boolean())});async function e_r(t,e,r){try{await t.get(Q1).start();let n=t.get(mP),o=r.timeout??1e3,s=Date.now(),c=[],l=!0;for(;l;)try{c=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,iZ,e)}catch{}finally{l=(r.waitForContext??!1)&&c.length==0&&Date.now()-s<o}return[{initialized:!0,context:c},null]}catch{return[{initialized:!1,context:[]},null]}}a(e_r,"handleTestingGetContextChecked");var YCt=et(Zwr,e_r);f();var t_r=E.Object({uri:E.String()});async function r_r(t,e,r){let o=await t.get(fr).getTextDocument(r);return[{uri:r.uri,languageId:o?.clientLanguageId??"unknown",version:o?.version??-1,text:o?.getText()??""},null]}a(r_r,"handleGetDocumentChecked");var JCt=et(t_r,r_r);f();var n_r=E.Object({options:E.Optional(E.Object({}))});async function i_r(t,e,r){t.get(Mi).setTransientSession({});try{await t.get(cr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}a(i_r,"handleTestingNeverAuthChecked");var XCt=et(n_r,i_r);f();f();f();var $Pe=class extends Al{constructor(r){super();this.certificates=r}static{a(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},ZCt=a(t=>new $Pe(t),"createTestCertificateReader");function jPe(t,e,r){let n=new WPe;n.set("x-github-request-id","1");for(let[o,s]of Object.entries(r||{}))n.set(o,s);return new yI(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}a(jPe,"createFakeResponse");function e1t(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),jPe(t,n,Object.assign({"content-type":"application/json"},r))}a(e1t,"createFakeJsonResponse");var vH=class extends Qr{constructor(){super(...arguments);this.name="FakeFetcher"}static{a(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var ole=class extends vH{static{a(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var WPe=class{constructor(){this.headers=new Map}static{a(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var GPe=class extends vH{static{a(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(e1t(200,this.fullConfig)):Promise.resolve(jPe(404,""))}},sle=class extends GPe{constructor(r,n){super(r);this.delegate=n}static{a(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var o_r=E.Object({expFlags:E.Record(E.String(),E.Union([E.String(),E.Number(),E.Boolean()]))});function s_r(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(Qr,new sle(n,t.get(Qr)))}return["OK",null]}a(s_r,"handleTestingOverrideExpFlagsChecked");var t1t=et(o_r,s_r);f();var a_r=E.Object({rules:oxe});function c_r(t,e,r){return t.get(fl).setTestingRules(r.rules),["OK",null]}a(c_r,"handleTestingSetContentExclusionRulesChecked");var r1t=et(a_r,c_r);f();var l_r=E.Object({workDoneToken:E.Union([E.String(),E.Number()]),chunks:E.Array(E.String()),followUp:E.Optional(E.String()),suggestedTitle:E.Optional(E.String()),skills:E.Optional(E.Array(E.String())),references:E.Optional(E.Array(wM)),options:E.Optional(E.Object({}))});function u_r(t,e,r){return t.get(UE).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}a(u_r,"handleTestingSetSyntheticTurnsChecked");var n1t=et(l_r,u_r);f();var d_r=E.Object({});async function f_r(t,e,r){let n=t.get(sc),o=t.get(el);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(c=>s(3,"response from message request",c?.title)).catch(c=>s(1,"error sending show message request",c)),["OK",null];function s(c,l,u){return o.logIt(t,c,"triggerShowMessage",`${l} (${String(u)})`)}a(s,"sendNotification")}a(f_r,"handleTriggerShowMessageChecked");var i1t=et(d_r,f_r);f();f();f();f();var o1t=Ne(require("tls"));var ale=class{static{a(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(Al)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=o1t.createSecureContext({_vscodeAdditionalCaCerts:e}),o=n.context;for(let s of e)o.addCACert(s);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var VM=class extends Qr{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new ale(r),this.proxySocketFactory=r.get(I1),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(Lc).onDidChangeHttpSettings(o=>{this.fetchApi=this.createFetchApi(r,o)}),this.fetchApi=this.createFetchApi(r,r.get(Lc).getHttpSettings())}static{a(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let o=new URL(r.proxy);return async s=>(s.rejectUnauthorized=r.proxyStrictSSL,s.timeout=n,await this.certificateConfigurator.applyToRequestOptions(s),await this.proxySocketFactory.createSocket(s,{hostname:o.hostname,port:o.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let o=r.get(wo),s=this.proxySocketTimeoutForTesting;return qCt({userAgent:`GithubCopilot/${o.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,s),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let o=n.signal,s=!1;if(n.timeout){let d=new AbortController;setTimeout(()=>{d.abort(),s=!0},n.timeout),n.signal?.addEventListener("abort",()=>d.abort()),n.signal?.aborted&&d.abort(),o=d.signal}let c={...n,body:n.body?n.body:n.json,signal:o};await this.certificateConfigurator.applyToRequestOptions(c);let l=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(l);let u=await this.fetchApi.fetch(r,c).catch(d=>{throw s?new HF(`Request to <${r}> timed out after ${n.timeout}ms`,d):d});return new yI(u.status,u.statusText,u.headers,()=>u.text(),()=>u.body)}disconnectAll(){return this.fetchApi.reset()}};f();f();var xH=require("fs"),s1t=require("path");var zM=class extends Qi{static{a(this,"LocalFileSystem")}async readFileString(e){return(await xH.promises.readFile(ac(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:o}=await this.statWithLink(ac(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,o)}}async readDirectory(e){let r=ac(e),n=await xH.promises.readdir(r,{withFileTypes:!0}),o=[];for(let s of n){let{targetStat:c,lstat:l,stat:u}=await this.statWithLink((0,s1t.join)(r,s.name));o.push([s.name,this.getFileType(c,l,u)])}return o}async statWithLink(e){let r=await xH.promises.lstat(e);if(r.isSymbolicLink())try{let n=await xH.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let o=0;return e.isFile()&&(o=1),e.isDirectory()&&(o=2),r.isSymbolicLink()&&n&&(o|=64),o}};f();var cle=class extends Ty{constructor(r=[]){super();this._agents=r}static{a(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var lle=class extends bl{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{a(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};f();var ule=class extends J0{constructor(){super(...arguments);this.allowedFiles=[]}static{a(this,"TestingFileSearch")}addAllowedFiles(r){this.allowedFiles.push(...r)}findFiles(r,{uri:n},o){return Promise.resolve(this.allowedFiles)}};f();function p_r(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}a(p_r,"fakeChatModelConfiguration");function m_r(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}a(m_r,"fakeEmbeddingModelConfiguration");var dle=class extends ya{static{a(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(p_r(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(m_r(e))}};f();var fle=class extends zu{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Bh}static{a(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},ple=class extends sc{constructor(){super();this.sentMessages=[];this.warningPromises=[];this.informationPromises=[]}static{a(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let o;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")o=Promise.resolve(void 0);else{let s=n.find(c=>c.title===this.actionToPerform);o=s?Promise.resolve(s):Promise.resolve(void 0)}else o=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(o),o}showInformationMessage(r,...n){this.sentMessages.push(r);let o;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")o=Promise.resolve(void 0);else{let s=n.find(c=>c.title===this.actionToPerform);o=s?Promise.resolve(s):Promise.resolve(void 0)}else o=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.informationPromises.push(o),o}async waitForMessages(){await Promise.all(this.warningPromises),await Promise.all(this.informationPromises)}};f();function a1t(t,e,r,n){return Rx.create(Nj(t),e,r,n,e)}a(a1t,"createTextDocument");var VPe=class extends fr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this.didFocusTextDocumentEmitter=new vs;this.onDidFocusTextDocument=this.didFocusTextDocumentEmitter.event;this.didChangeTextDocumentEmitter=new vs;this.onDidChangeTextDocument=this.didChangeTextDocumentEmitter.event;this.didOpenTextDocumentEmitter=new vs;this.onDidOpenTextDocument=this.didOpenTextDocumentEmitter.event;this.didCloseTextDocumentEmitter=new vs;this.onDidCloseTextDocument=this.didCloseTextDocumentEmitter.event;this.didChangeWorkspaceFoldersEmitter=new vs;this.onDidChangeWorkspaceFolders=this.didChangeWorkspaceFoldersEmitter.event}static{a(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Di(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,o){let s=a1t(r,n,0,o);return this._openTextDocuments.push(s),s}updateTextDocument(r,n){let o=this._openTextDocuments.findIndex(c=>c.uri===r.toString());if(o<0)throw new Error("Document not found");let s=this._openTextDocuments[o];this._openTextDocuments[o]=a1t(r,s.clientLanguageId,s.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}},mle=class extends VPe{constructor(r){super(r);this.contents=new Map}static{a(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var zPe=class extends el{static{a(this,"NullLog")}logIt(...e){}},KPe=class extends Mi{static{a(this,"TestAuthManager")}constructor(e,r){super(e,{}),this.transientSession=r&&Promise.resolve(r)}getPersistedSession(){return Promise.resolve(void 0)}};function h_r(t){let e=new y3;e.set(Lc,t),e.set(pR,t);let r=new KPe(e,{accessToken:"",login:"user"});e.set(Mi,r),e.set(wo,new wo),e.set(qm,new qm({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(Al,ZCt([])),e.set(I1,yne(e)),e.set(bC,new bC),e.set(AA,new pV);let n=new QM;e.set(ou,n),e.set(cr,new cr(e,!0));let o=new qu(e);return o.updateFromToken(n.defaultToken),e.set(qu,o),e.set(Vu,new Vu),e.set(dC,new dC),e.set(sc,new ple),e.set(zu,new fle),e.set(cC,new X3),e.set(el,new zPe),e.set(hp,new hp),e.set(Fs,new Fs("test-session","test-machine")),e.set(mf,new b8(e)),e.set(Zg,new U4),e.set(Od,new Od(e,"copilot-test")),e.set(Lt,new Lt(e)),e.set(LA,new LA),e.set(_A,new jB),e.set($o,new fV),e.set(tl,new tl),e.set(zC,new zC(e)),e.set(J0,new ule),e.set(HA,new HA(e)),e.set(Ux,Tee(e)),e.set(od,new od),e.set(Mp,new Mp),e.set(qx,qx.default),e.set(hh,new hh(e,!1)),e.set(su,new su),e.set(In,new In(e)),e.set(Df,new AX),e.set(pl,new pl),e.set(Wc,cZ(e,(s,c,l)=>c.find(u=>u==="*")?1:c.find(u=>typeof u!="string"&&u.language===l.languageId)?10:0)),e.set(Dp,new Dp(e)),g_r(e),e.set(kp,new kp(e)),e.set(bs,new bs),e.set(ZC,new G8),e.set(Nh,new Nh),e.set(zp,new zp),e.set(B1,new B1(e)),e}a(h_r,"_createBaselineContext");function g_r(t){t.set(ro,new ro(t)),t.set(Ls,new Ls(t)),t.set(gd,new gd(t)),t.set($l,new $l),t.set(ku,new ku),t.set(bl,new lle),t.set(gg,new gg(t,[])),t.set(ya,new dle),t.set(Ty,new cle),t.set(ev,new ev(t)),t.set(v_,new v_),t.set(bc,new bc(t)),t.set(hd,new hd),t.set(ym,new ym)}a(g_r,"registerConversation");function c1t(){let t=h_r(new pR(new GB,new Map));return t.set(Qr,new ole),t.set(un,new YPe),t.set(fr,new mle(t)),t.set(Qi,new zM),t.set(fl,new fl(t)),t.set(vl,new vl(t)),t.set(dd,new qne(t)),t.set(kh,new kh(t)),t.set(YC,new k3),t.set(cy,new hie),Doe(t),t}a(c1t,"createLibTestingContext");var YPe=class extends un{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},o=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=o}static{a(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var u1t=Ne(require("fs"));var l1t=`${process.env.HOME}/.copilot-testing-gh-token`,hle,gle;function d1t(t){let e=f1t(),r=new qce(A_r);return t.forceSet(ou,r),t.get(Mi).setTransientSession(e),r}a(d1t,"setIntegrationTokenManager");var A_r=a(async()=>{if(gle)return gle;let t=await f1t(),e=c1t(),r=new VM(e);return e.forceSet(Qr,r),gle=Qme(e,t).then(n=>{if(n.copilotToken)return{token:n.copilotToken.token,refresh_in:n.copilotToken.envelope.refresh_in};throw new ka('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),gle},"getEnvelope");async function f1t(){let t=Wme(process.env);if(t)return t;try{hle??=(await u1t.promises.readFile(l1t)).toString().trim()}catch{hle??=process.env.GITHUB_TOKEN??""}if(!hle)throw new Error(`Tests: either GH_COPILOT_TOKEN, GITHUB_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${l1t}. Run "npm run get_token" to get one.`);return{...w0({}),accessToken:hle,login:"copilot-client tests"}}a(f1t,"getTestingGitHubSession");var y_r=E.Object({options:E.Optional(E.Object({})),githubAppId:E.Optional(E.String())});async function C_r(t,e,r){return d1t(t),await t.get(cr).primeToken(),["OK",null]}a(C_r,"handleTestingUseTestingTokenChecked");var p1t=et(y_r,C_r);f();var v_r=E.Object({});async function x_r(t,e,r){return await new K8().uninstall(t),["OK",null]}a(x_r,"handleUninstallChecked");var m1t=et(v_r,x_r);f();var E_r=kJe;function b_r(t,e,r){let n=t.get(Wc),o={unregistered:[],notUnregistered:[]};return r.providers.forEach(s=>{try{n.unregisterContextProvider(s.id),o.unregistered.push(s.id)}catch{o.notUnregistered.push(s.id)}}),[o,null]}a(b_r,"unregisterContextProviders");var h1t=et(E_r,b_r);f();var JPe=Ne(require("os"));var I_r=E.Object({expectedCertificate:E.String()});async function T_r(t,e,r){let o=(await Ane(t).getAllRootCAs()).map(OM),s=OM(r.expectedCertificate);return o.includes(s)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${lPe(s)}. Only found those installed on the system:${JPe.EOL}${o.map(c=>"- "+lPe(c)).join(JPe.EOL)}`},null]}a(T_r,"handleVerifyCertificateChecked");var g1t=et(I_r,T_r);f();var w_r=E.Object({});async function __r(){return[{status:!!await new uU().load()},null]}a(__r,"handleVerifyKerberosChecked");var A1t=et(w_r,__r);f();var S_r=E.Object({source:E.String(),version:E.Number(),uri:E.String()});async function R_r(t,e,r){let o=await t.get(fr).getTextDocument(r);return o?o.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${o.getText()} !== [Request] ${r.source}`},null]:o.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${o.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}a(R_r,"handleVerifyStateChecked");var y1t=et(S_r,R_r);f();var k_r=E.Object({});function P_r(t,e,r){return[t.get(fr).getWorkspaceFolders().map(o=>{let s=new URL(o.uri),c=decodeURIComponent(s.pathname);return{...o,path:c}}),null]}a(P_r,"handleVerifyWorkspaceStateChecked");var C1t=et(k_r,P_r);var qP=class{constructor(e){this.handlers=e}static{a(this,"MethodHandlers")}};function v1t(){let t=new Map;return t.set(lyt.method,uyt),t.set(dyt.method,fyt),t.set("getCompletions",tyt),t.set("getCompletionsCycling",ryt),t.set("getPanelCompletions",oyt),t.set(OAt.method,QAt),t.set("getVersion",syt),t.set("setEditorInfo",kyt),t.set("checkStatus",Imt),t.set("checkQuota",bmt),t.set("checkFileStatus",xmt),t.set("signInInitiate",fPe),t.set("signIn",fPe),t.set("signInConfirm",Pyt),t.set("signInWithGithubToken",Dyt),t.set("signOut",Byt),t.set("notifyShown",Tyt),t.set("notifyAccepted",byt),t.set("notifyRejected",Iyt),t.set("telemetry/exception",Nyt),t.set("textDocument/copilotInlineEdit",Eyt),t.set("testing/overrideExpFlags",t1t),t.set("testing/alwaysAuth",Myt),t.set("testing/neverAuth",XCt),t.set("testing/useTestingToken",p1t),t.set("testing/setCompletionDocuments",JAt),t.set("testing/setPanelCompletionDocuments",LAt),t.set("testing/triggerShowMessageRequest",i1t),t.set("testing/flushPromiseQueue",KCt),t.set("testing/getDocument",JCt),t.set("testing/chatml",Lyt),t.set("testing/setSyntheticTurns",n1t),t.set("testing/fetch",zCt),t.set("testing/setContentExclusionRules",r1t),t.set("testing/setCopilotEditsResponse",xAt),t.set("testing/getContext",YCt),t.set("uninstall",m1t),t.set("debug/diagnostics",WAt),t.set("debug/listCertificates",pyt),t.set("debug/verifyState",y1t),t.set("debug/verifyCertificate",g1t),t.set("debug/verifyKerberos",A1t),t.set("debug/verifyWorkspaceState",C1t),t.set("context/registerProviders",wyt),t.set("context/unregisterProviders",h1t),t.set("conversation/preconditions",dAt),t.set("conversation/persistence",uAt),t.set("conversation/create",aAt),t.set("conversation/turn",hAt),t.set("conversation/turnDelete",gAt),t.set("conversation/destroy",cAt),t.set("conversation/rating",fAt),t.set("conversation/copyCode",Ugt),t.set("conversation/insertCode",qgt),t.set("conversation/templates",mAt),t.set("conversation/agents",Qgt),t.set("conversation/registerTools",pAt),t.set("conversation/unregisterTools",AAt),t.set("conversation/updateToolsStatus",yAt),t.set("conversation/notifyCodeAcceptance",lAt),t.set("copilot/models",PAt),t.set("copilot/byok/saveModel",vmt),t.set("copilot/byok/deleteModel",N0t),t.set("copilot/byok/listModels",ymt),t.set("copilot/byok/saveApiKey",Cmt),t.set("copilot/byok/deleteApiKey",B0t),t.set("copilot/byok/listApiKeys",M0t),t.set("copilot/setModelPolicy",DAt),t.set("copilot/codeReview",CAt),t.set("copilot/codeReview/reviewChanges",vAt),t.set("git/commitGenerate",ayt),t.set("editConversation/create",EAt),t.set("editConversation/turn",IAt),t.set("editConversation/turnDelete",TAt),t.set("editConversation/destroy",bAt),t.set("mcp/getTools",wAt),t.set("mcp/updateToolsStatus",_At),t.set("mcp/readResource",SAt),t.set("mcp/registry/listServers",vyt),t.set("mcp/registry/getServer",xyt),t.set("mcp/getPrompt",RAt),t.set("mcp/completePrompt",kAt),new qP(t)}a(v1t,"getAllMethods");f();f();f();var x1t=Ne(kA());var yg=class{constructor(e){this.ctx=e}static{a(this,"AbstractNotification")}get type(){return new x1t.NotificationType(this.name)}};var XPe=class extends yg{constructor(){super(...arguments);this.name="copilot/didChangeToken";this.params=E.Unknown()}static{a(this,"DidChangeTokenNotificationHandler")}handle(){this.ctx.get(cr).resetToken()}},E1t=[XPe];f();var D_r=new ft("agentCopilotTokenManager");function e5e(t){try{let e=new URL(t||"https://api.github.com");if(e.protocol==="https:"&&e.hostname.startsWith("api."))return`${e.origin}/`}catch{}}a(e5e,"tokenEndpointToApiUrl");function B_r(t,e){if(!e.tokenEndpoint)return w0(e);let r=e5e(e.tokenEndpoint);return r||D_r.warn(t,`Invalid token endpoint URL <${e.tokenEndpoint}>`),w0({apiUrl:r})}a(B_r,"getUrlsFromParams");var ZPe=class extends yg{constructor(){super(...arguments);this.name=Ive.method;this.params=Gze}static{a(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(Mi),o=B_r(this.ctx,r);this.ctx.get(mf).setConfiguredUrls(this.ctx,o);let s=r.handle||r.login;s&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:s,githubAppId:r.githubAppId,...o}):n.setTransientSession({githubAppId:r.githubAppId,...o})}},b1t=[ZPe];f();var t5e=class extends yg{constructor(){super(...arguments);this.name=Rve.method;this.params=eKe}static{a(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],s=this.ctx.get(zs).get(n);s&&HZe(this.ctx,s)}},r5e=class extends yg{constructor(){super(...arguments);this.name=Dve.method;this.params=oKe}static{a(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(yy).handleShown(n)}},n5e=class extends yg{constructor(){super(...arguments);this.name=kve.method;this.params=tKe}static{a(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=r.acceptedLength,s=this.ctx.get(zs),c=s.get(n);c&&(o>=c.insertText.length?(s.delete(n),Y3(this.ctx,c)):Mee(this.ctx,c,o,void 0,void 0,"cumulative"))}},I1t=[t5e,r5e,n5e];f();var Ale=class extends yg{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=E.Object({token:E.Union([E.String(),E.Number()])})}static{a(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(Gf).cancel(r.token)}};var N_r=[...E1t,...b1t,...I1t,Ale];function T1t(t,e){for(let r of N_r){let n=new r(t),o=na.Compile(n.params);e.onNotification(n.type,eu(t,async s=>{_E(s),o.Check(s)?await n.handle(s):Pu.error(t,`Notification ${n.name}:`,new pd(o.Errors(s)))},`Notification ${n.name}`))}}a(T1t,"registerNotifications");f();var yle=Ne(Qc());var w1t=new ft("AgentTextDocumentConfiguration"),i5e=class{constructor(e){this.ctx=e;this.#e=new vs;this.onDidChange=this.#e.event}static{a(this,"AgentTextDocumentsConfiguration")}#e;create(e,r,n,o){try{return Rx.create(e,r,n,o)}catch(s){throw w1t.exception(this.ctx,s,".create"),s}}update(e,r,n){try{let o=[];for(let c of r)if(yle.TextDocumentContentChangeEvent.isIncremental(c)){let l={range:c.range,rangeOffset:e.offsetAt(c.range.start),rangeLength:e.offsetAt(c.range.end)-e.offsetAt(c.range.start),text:c.text};o.push(l)}let s={document:{uri:e.uri,version:n},contentChanges:o};return this.#e.fire(s),Rx.withChanges(e,r,n)}catch(o){throw w1t.exception(this.ctx,o,".update"),o}}},L_=class extends fr{constructor(){super(...arguments);this.#e=new vs;this.onDidOpenTextDocument=this.#e.event;this.#t=new vs;this.onDidCloseTextDocument=this.#t.event;this.#i=new vs;this.onDidFocusTextDocument=this.#i.event;this._textDocumentConfiguration=new i5e(this.ctx);this.onDidChangeTextDocument=this._textDocumentConfiguration.onDidChange;this._documents=new Map;this._notebookDocuments=new yle.NotebookDocuments(this._textDocumentConfiguration);this.workspaceFolders=[];this.#n=new vs;this.onDidChangeWorkspaceFolders=this.#n.event}static{a(this,"AgentTextDocumentManager")}#e;#t;#i;#n;get connection(){return this.ctx.get(kr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let o=n.textDocument,s=this._textDocumentConfiguration.create(o.uri,o.languageId,o.version,o.text);this._documents.set(Bl(o.uri),s),this.#e.fire({document:{...o,uri:s.uri}})}),this.connection.onDidChangeTextDocument(n=>{let o=n.textDocument,s=n.contentChanges,{version:c}=o;if(c==null)throw new Error(`Received document change event for ${o.uri} without valid version identifier`);let l=Bl(o.uri),u=this._documents.get(l);u!==void 0&&(u=this._textDocumentConfiguration.update(u,s,c),this._documents.set(l,u))}),this.connection.onDidCloseTextDocument(n=>{let o=Bl(n.textDocument.uri);this._documents.delete(o),this.#t.fire({document:{uri:o}})}),this.connection.onNotification(_ve.type,n=>{let o=("textDocument"in n?n.textDocument:n)??{};this.#i.fire("uri"in o?{document:o}:{})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r),r.length>0&&this.#n.fire({workspaceFolders:this.workspaceFolders,added:r,removed:[]})}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n)),this.#n.fire({workspaceFolders:this.workspaceFolders,added:r.added,removed:r.removed})}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(o=>o.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.find(n=>n.uri===r.uri)||this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(Bl(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:a(()=>n.cells.map((o,s)=>this.wrapCell(o,s)).filter(o=>!!o),"getCells"),getCellFor:a(({uri:o})=>{let s=n.cells.findIndex(c=>c.document===o);return s!==-1?this.wrapCell(n.cells[s],s):void 0},"getCellFor")}}wrapCell(r,n){let o=this._notebookDocuments.getCellTextDocument(r);if(o)return{kind:r.kind,metadata:r.metadata??{},index:n,document:o}}};var _1t=na.Compile(Jze);function _E(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=_E(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=_E(e[r])}return t}}a(_E,"purgeNulls");var S1t=["github.copilot",...fH],kr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.deactivated=!1;this.handleDidChangeConfiguration=a(async e=>{try{if(this.#t?.workspace?.configuration&&e&&typeof e=="object"&&!("settings"in e)){let n=await this.connection.workspace.getConfiguration(S1t.map(s=>({section:s}))),o={github:{copilot:n.shift()}};for(let s of fH)o[s]=n.shift();e.settings=o}return Uce(this.ctx,_E(e))}catch(r){Pu.exception(this.ctx,r,"didChangeConfiguration")}},"handleDidChangeConfiguration");this.#i=this.ctx.get(el)}static{a(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),T1t(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(wo).getDisplayVersion(),nodeVersion:process.versions.node};function o(c){try{e.get(L_).didChangeWorkspaceFolders(c)}catch(l){Pu.exception(e,l,"didChangeWorkspaceFolders")}}a(o,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:c,uri:l})=>o({added:[{uri:l,name:c??l}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:c,uri:l})=>o({added:[],removed:[{uri:l,name:c??l}]})),r.onInitialize(c=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=c.capabilities;let l=c.capabilities.copilot,u=_E(c.initializationOptions);if(u){if(!_1t.Check(u))throw new pd(_1t.Errors(u));let h=u,g=e.get(un);h.editorPluginInfo?g.setEditorAndPluginInfo({version:"unknown",...h.editorPluginInfo},h.editorInfo&&{version:"unknown",...h.editorInfo},h.relatedPluginInfo??[]):Pu.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),h.copilotIntegrationId&&g.setCopilotIntegrationId(h.copilotIntegrationId),h.githubAppId&&(e.get(su).githubAppId=h.githubAppId),h.copilotCapabilities&&(l=h.copilotCapabilities)}let d=c.capabilities.workspace?.workspaceFolders??!1;e.get(L_).init(c.workspaceFolders??[]),kXe(this.ctx),l&&(e.get(bs).setCapabilities(l),"openURL"in l&&Koe(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let m=a(async()=>{this.initialized||(this.initialized=!0,Pu.info(e,`${n.name} ${n.version} initialized`),e.get(cr).primeToken(),d&&r.workspace.onDidChangeWorkspaceFolders(o),c.capabilities.workspace?.didChangeConfiguration?.dynamicRegistration&&await r.client.register(vm.DidChangeConfigurationNotification.type,{section:S1t}),c.capabilities.workspace?.configuration?await this.handleDidChangeConfiguration({}):await Promise.race([this.ctx.get(lg).requireReady().then(()=>!0),new Promise(A=>setTimeout(()=>A(!1),200))])||Qce(e),!this.deactivated&&new K8().startup(e).catch(()=>{}))},"onInitialized");return r.onInitialized(eu(e,m,"onInitialized")),e.get(W1).init(),l?.token&&e.get(Mi).setTransientSession({}),l?.redirectedTelemetry&&D0t(e),R1t.lt(process.versions.node,"22.0.0")&&Pu.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 22 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:vm.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:d,changeNotifications:d}},executeCommandProvider:{commands:S0t(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(c=>void this.handleDidChangeConfiguration(c)),r.listen();let s=new Xoe;this.ctx.forceSet(el,s)}async messageHandler(e,r,n){let o=this.ctx.get(qP).handlers.get(e);if(!o)return new vm.ResponseError(rr.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new vm.ResponseError(rr.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new vm.ResponseError(rr.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!k0t(this.ctx.get(un)))throw new vm.ResponseError(rr.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),_E(r);try{let[s,c]=await o(this.ctx,n,r);return c?new vm.ResponseError(c.code,c.message,c.data):s}catch(s){if(n.isCancellationRequested)return new vm.ResponseError(rr.RequestCancelled,"Request was canceled");if(s instanceof ka)return new vm.ResponseError(rr.NoCopilotToken,`Not authenticated: ${s.message}`);throw s instanceof vm.ResponseError||Pu.exception(this.ctx,s,`Request ${e}`),s}}async onExit(){try{this.ctx.get(vy).dispose()}catch(e){Pu.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(el,this.#i),await(this.#e??=this.deactivate())}markDeactivated(){this.deactivated=!0,this.ctx.get(lg).markReady()}async deactivate(){let e=this.ctx;this.markDeactivated(),kEe(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(tl).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Vu).deactivate()])}dispose(){this.markDeactivated(),this.connection.dispose()}},Pu=new ft("lsp");var Cle=class t extends ek{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{a(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(kr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",o="CSharpRoslynCompletionRelatedContextProvider",s="CppCopilotCompletionContextProvider",c="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case o:return"related/csharproslyn";case s:return"related/cpp";case c:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let o of r.entries){let s={type:t.mapProviderNameToNeighboringFileType(o.providerName),uris:o.uris};n.entries.push(s),s.type==="related/other"&&!this.reportedUnknownProviders.has(o.providerName)&&(this.reportedUnknownProviders.add(o.providerName),Ul.warn(this.context,`unknown providerName ${o.providerName}`))}return n}async getRelatedFilesResponse(r,n,o){Ul.debug(this.context,`Fetching related files for ${r.uri}`);let s=this.context.get(bs).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,s),!s)return Ul.debug(this.context,"`copilot/related` not supported"),DXe;try{let c=await this.service.connection.sendRequest(Bve.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},o);return this.convert(c)}catch(c){Ul.exception(this.context,c,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,o){try{if(!o||t.telemetrySent)return;t.telemetrySent=!0,Nt(r,"copilotRelated.hasRelatedCapability",n)}catch(s){Ul.exception(r,s,"copilotRelated")}}};f();f();f();var vle=new ft("OAuth Code Flow");function o5e(t,e,r=(n,o)=>n===o){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,o=t.length;n<o;n++)if(!r(t[n],e[n]))return!1;return!0}a(o5e,"arrayEquals");function k1t(t){return t===HP.providerId?{client_id:_0,client_secret:qje}:null}a(k1t,"getClientInfoFromAuthServer");var s5e=`
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GitHub Copilot Authentication</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                text-align: center;
                padding: 50px;
            }
            .container {
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                padding-top: 50px;
            }
            .success {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #28a745;
            }
            .error {
                font-size: 28px;
                font-weight: 300;
                margin: 0 0 12px 0;
                color: #cccccc;
            }
            .message {
                font-size: 18px;
                margin: 20px 0;
            }
            .detail {
                font-size: 14px;
                color: #f85149;
                opacity: 0.7;
                margin: 0;
            }

            body.error .success-message {
                display: none;
            }

            body:not(.error) .error-message {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="success-message">
                <h1 class="success">\u2713</h1>
                <h1 class="success">Authentication Successful!</h1>
                <p class="message">You can now return to your IDE and continue using GitHub Copilot.</p>
            </div>
            <div class="error-message">
                <h1 class="error">An error occurred while signing in:</h1>
                <div class="detail"></div>
            </div>
        </div>
        <script>
            const urlParams = new URLSearchParams(window.location.search);

            const error = urlParams.get('error');
            if (error) {
                document.querySelector('.error-message > .detail').textContent = error;
                document.querySelector('body').classList.add('error');
            }
        </script>
    </body>
</html>`;var HP=class t{constructor(e){this.id=t.providerId;this.label="GitHub";this.supportsMultipleAccounts=!1;this.authorizationServers=[t.providerId];this.ctx=e,this._sessionsPromise=this.readSessions().then(r=>(setTimeout(()=>r.forEach(n=>void this.afterSessionLoad(n)),1e3),r))}static{a(this,"GitHubAuthenticationProvider")}static{this.providerId="https://github.com/login/oauth"}async getSessions(e,r){await this.checkSessionsExpiration();let n=await this._sessionsPromise,o=e?.sort()||[];return o.length?n.filter(c=>o5e([...c.scopes].sort(),o)):n}async afterSessionLoad(e){}async readSessions(){let e=await this.ctx.get(mi).read("oauth",this.id);return e||[]}async createSession(e,r){let n=[...e].sort(),o=await this._sessionsPromise,s=await this.tokenToSession(r,e);this.afterSessionLoad(s);let c=o.findIndex(u=>u.account.id===s.account.id&&o5e([...u.scopes].sort(),n)),l=new Array;return c>-1?l.push(...o.splice(c,1,s)):o.push(s),await this.storeSessions(o),s}async storeSessions(e){this._sessionsPromise=Promise.resolve(e),await this.ctx.get(mi).update("oauth",this.id,e)}async tokenToSession(e,r){let n=await this.getUserInfo(e);return{id:crypto.getRandomValues(new Uint32Array(2)).reduce((o,s)=>o+=s.toString(16),""),accessToken:e,account:{label:n.accountName,id:n.id},scopes:r}}async getUserInfo(e){let r="https://api.github.com/user",n;try{n=await this.ctx.get(Qr).fetch(new URL(r).href,{method:"GET",headers:{Authorization:`token ${e}`}})}catch(o){return vle.error(this.ctx,"Failed to fetch user info: ",o),{id:"",accountName:""}}if(n.ok)try{let o=await n.json();return{id:`${o.id}`,accountName:o.login}}catch(o){return vle.error(this.ctx,"Failed to fetch user info: ",o),{id:"",accountName:""}}else{let o=n.statusText;try{let s=await n.json();s.message&&(o=s.message)}catch{}return vle.error(this.ctx,"Failed to fetch user info: ",o),{id:"",accountName:""}}}async removeSession(e){let r=await this._sessionsPromise,n=r.findIndex(o=>o.id===e);if(n>-1)r.splice(n,1),await this.storeSessions(r);else throw new Error(`No session with id '${e}' found.`)}async checkSessionsExpiration(){let e=await this._sessionsPromise;if(e.length!==0)for(let r of e)await this.isSessionExpired(r)&&await this.removeSession(r.id)}async isSessionExpired(e){let{accessToken:r}=e,{id:n,accountName:o}=await this.getUserInfo(r);return!n||!o}};var xle=class extends Cy{constructor(r){super();this._authenticationProviders=new Map;this.ctx=r}static{a(this,"CLSAuthenticationService")}registerAuthenticationProvider(r,n){this._authenticationProviders.set(r,n)}getOrActivateProviderIdForServer(r){for(let n of this._authenticationProviders.values())if(n.authorizationServers?.some(o=>o===r))return Promise.resolve(n.id);return Promise.resolve(void 0)}createAuthenticationProvider(r){if(r===HP.providerId){let n=new HP(this.ctx);return this.registerAuthenticationProvider(n.id,n),n}}getProvider(r){if(this._authenticationProviders.has(r))return this._authenticationProviders.get(r);throw new Error(`No authentication provider '${r}' is currently registered.`)}async getSessions(r,n,o,s=!1){let c=this._authenticationProviders.get(r);if(c){if(o?.authorizationServer){let l=o.authorizationServer;if(!c.authorizationServers?.some(u=>u===l))throw new Error(`The authorization server '${l}' is not supported by the authentication provider '${r}'.`)}return await c.getSessions(n,{...o})}else throw new Error(`No authentication provider '${r}' is currently registered.`)}};f();var P1t=Ne(Qc());var a5e=new ft("agentCopilotTokenManager"),M_r={type:new P1t.ProtocolRequestType("copilot/token")},Ele=class extends ou{constructor(){super(...arguments);this.networkFetcher=new aV}static{a(this,"AgentCopilotTokenFetcher")}async fetchTokenResult(r,n,o){if(!r.get(bs).getCapabilities().token)return this.networkFetcher.fetchTokenResult(r,n,o);let s=r.get(kr).connection;try{let c=await s.sendRequest(M_r.type,{force:!1,session:n});if(!c?.envelope)return a5e.debug(r,"Envelope missing from copilot/token response"),{failureKind:"HTTP401",message:"Editor did not return a token"};let{envelope:l,tokenEndpoint:u}=c;if(a5e.debug(r,"Retrieved envelope from copilot/token"),l.expires_at*1e3<Date.now())throw new ka("Expired token in copilot/token response");return u!==void 0&&e5e(u)!==n.apiUrl&&a5e.exception(r,new Error(`Token endpoint ${u} does not match API URL ${n.apiUrl}`),".fetchTokenResult"),{copilotToken:new u2(l,void 0,l.expires_at)}}catch(c){throw c instanceof Error?new ka(c.message,c):c}}};f();var L_r=new ft("Public Code References"),ble=class extends Df{static{a(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",o=r.location?.start.character!==void 0?r.location.start.character+1:"-",s=(r.matchingText??"").replace(/[\r\n]/g," ");L_r.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${o}] near ${s}...:`+r.details.map((c,l)=>`
  ${l+1}) [${c.license}] ${c.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(bs).getCapabilities().ipCodeCitation===!0&&await e.get(kr).connection.sendNotification(Tve.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};f();f();function D1t(t){F_r(t)}a(D1t,"activateExtensibilityPlatformFeature");function F_r(t){t.set(Ty,new Zae(t)),t.set(ev,new ev(t))}a(F_r,"registerContextDependencies");f();var B1t=E.String(),c5e=class{constructor(e){this.turnContext=e}static{a(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Tle,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},Tle="build-logs",Ile=class extends Su{static{a(this,"BuildLogsSkill")}constructor(e){super(Tle,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new c5e(r))}};f();var l5e=class{constructor(e){this.turnContext=e}static{a(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await ace(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let o=[[new Ht(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let s of n)o.push([new Ht([s]),1]);return new Ht(o)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},u5e=class{static{a(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},O_r="directory-references",wle=class{constructor(){this.id=O_r;this.type="implicit"}static{a(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new u5e}processor(e){return new l5e(e)}};f();var Q_r=E.Object({uri:E.String(),visibleRange:E.Optional(Hc),openedAt:E.Optional(E.String()),activeAt:E.Optional(E.String())}),N1t=E.Object({files:E.Array(Q_r)}),U_r=3,d5e=class{constructor(e){this.turnContext=e}static{a(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),o=E_(n,"inversePositional");return await this.preElideDocuments(o)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(In),o=[];for(let s of r){let c=await n.getOrReadTextDocument(s),l=ua(c);if(await this.turnContext.collectFile(Sle,s.uri,l),c.status==="valid"&&l!=="empty"&&(o.push([c.document,s]),o.length===U_r))break}return o.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,o]=r,s=this.turnContext.ctx.get(In).getRelativePath(n),c=new V1(n,void 0,o.visibleRange);return new Ht([[`Code excerpt from file \`${s}\`:`,1],[c.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await Go.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ht([n])}},Sle="recent-files",_le=class extends Su{static{a(this,"RecentFilesSkill")}constructor(e){super(Sle,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new d5e(r))}};f();var M1t=E.String(),f5e=class{constructor(e){this.turnContext=e}static{a(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(kle,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},kle="runtime-logs",Rle=class extends Su{static{a(this,"RuntimeLogsSkill")}constructor(e){super(kle,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new f5e(r))}};f();var Ple=Ne(kA());var Dle=class extends bl{constructor(r){super();this.ctx=r}static{a(this,"AgentConversationInspector")}shouldInspect(){return Dj(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(kr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new Ple.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new Ple.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new Ple.NotificationType("conversation/documentDiff"),r)}};f();var L1t=Ne(Qc());var EH=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(gg).onChange(r=>{this.sendNotification(r)})}static{a(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(kr).connection.sendNotification(new L1t.NotificationType(this.notificationEndpoint),e)}};function F1t(t){q_r(t),H_r(t),D1t(t)}a(F1t,"activateConversationFeature");function q_r(t){t.set(ro,new ro(t)),t.set(ku,new ku),t.set(gd,new gd(t)),t.set(ya,new Une(t)),t.set(UE,new UE),t.set(Ls,new Ls(t)),t.set(gg,new gg(t)),t.set(EH,new EH(t)),t.set(rd,new nY(t,new rY(t))),t.set(qE,new qE),t.set(v_,new v_),t.set(bl,new Dle(t)),t.set(bc,new bc(t)),t.set(hd,new hd),t.set(ym,new ym)}a(q_r,"registerContextDependencies");function H_r(t){let e=new $l;e.registerSkill(new Vse(new Gse(t))),e.registerSkill(new Cae(new jf(t,X1,ugt))),e.registerSkill(new Kse(new jf(t,Ey,rht))),e.registerSkill(new Nse(new jf(t,nf,Pmt))),e.registerSkill(new vae),e.registerSkill(new wle),e.registerSkill(new _le(new jf(t,Sle,N1t))),e.registerSkill(new jae(new jf(t,tv,Ngt))),e.registerSkill(new Jse(new jf(t,b_,fht))),e.registerSkill(new Rle(new jf(t,kle,M1t))),e.registerSkill(new Ile(new jf(t,Tle,B1t))),e.registerSkill(new Zse(new jf(t,by,pht))),e.registerSkill(new eae(new jf(t,IP,hht))),t.set($l,e)}a(H_r,"registerSkills");f();var O1t=Ne(Ai());var Ble=class extends dd{static{a(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(kr).connection.sendProgress(new O1t.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};f();var Q1t=Ne(Qc()),U1t=Ne(kA());var Nle=class extends rg{constructor(){super(...arguments);this.requestType=new Q1t.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=na.Compile(l0t)}static{a(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let o=this.ctx.get(kr).connection,s;try{let c=await o.sendRequest(this.requestType,n),[l,u]=c;if(u){let d=new U1t.ResponseError(u.code,u.message,u.data);throw Rr.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,d),new Error(`Failed to invoke client tool confirmation ${n.name}: ${u.message}`)}s=l}catch(c){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(c)}`)}if(s==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(s))throw new pd(this.typeCheck.Errors(s));return s}};f();var q1t=Ne(Qc()),H1t=Ne(kA());var Mle=class extends Fw{constructor(){super(...arguments);this.requestType=new q1t.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=na.Compile(c0t)}static{a(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let o=this.ctx.get(kr).connection,s;try{let c=await o.sendRequest(this.requestType,n),[l,u]=c;if(u){let d=new H1t.ResponseError(u.code,u.message,u.data);throw Rr.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,d),new Error(`Failed to invoke client tool ${n.name}: ${u.message}`)}s=l}catch(c){throw new Error(`Failed to invoke client tool ${n.name}: ${String(c)}`)}if(s==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(s))throw new pd(this.typeCheck.Errors(s));return this.transformToToolResult(s)}transformToToolResult(r){let n=r.content.map(o=>typeof o.value=="string"?new ji(o.value):new uP(o.value));return new yo(n,r.status??"success")}};f();f();function $1t(t,e,r){try{let n=t.get(Lt).javaContextProviderParams(r);if(n){let o=JSON.parse(n);for(let[s,c]of Object.entries(o))e.set(s,c)}}catch(n){return pn.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}a($1t,"fillInJavaActiveExperiments");var p5e=Ne(kA());var $_r={type:new p5e.NotificationType("featureFlagsNotification")},W_r={type:new p5e.NotificationType("copilot/didChangeFeatureFlags")},bH=class{constructor(e){this.ctx=e;Pa(e,r=>this.sendNotification(r))}static{a(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,o=await r.get(Lt).updateExPValuesAndAssignments(e),s={};r.get(Lt).excludeRelatedFiles(o)&&(s.ExcludeRelatedFiles=!0);let c=Ixe(r,o);c.length>0&&(s.ExpContextProviders=c);let l=new Map;vJe(r,c,l,o),nZ(r,l,o),$1t(r,l,o);for(let[p,m]of l.entries())s[p]=m;let u=r.get(bs),d=r.get(kr).connection;if(u.getCapabilities().didChangeFeatureFlags)await d.sendNotification(W_r.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:s});else{let p={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:s};e.getTokenValue("agent_mode")==="0"&&(p.agent_mode=!1),e.getTokenValue("mcp")==="0"&&(p.mcp=!1),e.envelope.xcode_chat&&e.envelope.chat_enabled&&(p.xc=!0),await d.sendNotification($_r.type,p)}}};f();var Lle=class extends $o{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{a(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(kr).connection.sendNotification(Nve.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(kr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};f();var W1t=new zM;f();f();f();var an=new ft("CopilotMCP");async function m5e(t,e){await t.get(cy).notifyLog(e)}a(m5e,"notifyMCPRuntimeLog");async function yd(t,e){await m5e(t,{...e,level:"error"})}a(yd,"notifyMCPRuntimeError");async function $P(t,e){await m5e(t,{...e,level:"warning"})}a($P,"notifyMCPRuntimeWarning");async function ys(t,e){await m5e(t,{...e,level:"info"})}a(ys,"notifyMCPRuntimeInfo");f();f();var Lo;(function(t){t.assertEqual=o=>o;function e(o){}a(e,"assertIs"),t.assertIs=e;function r(o){throw new Error}a(r,"assertNever"),t.assertNever=r,t.arrayToEnum=o=>{let s={};for(let c of o)s[c]=c;return s},t.getValidEnumValues=o=>{let s=t.objectKeys(o).filter(l=>typeof o[o[l]]!="number"),c={};for(let l of s)c[l]=o[l];return t.objectValues(c)},t.objectValues=o=>t.objectKeys(o).map(function(s){return o[s]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{let s=[];for(let c in o)Object.prototype.hasOwnProperty.call(o,c)&&s.push(c);return s},t.find=(o,s)=>{for(let c of o)if(s(c))return c},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function n(o,s=" | "){return o.map(c=>typeof c=="string"?`'${c}'`:c).join(s)}a(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(o,s)=>typeof s=="bigint"?s.toString():s})(Lo||(Lo={}));var g5e;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(g5e||(g5e={}));var Pr=Lo.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),VE=a(t=>{switch(typeof t){case"undefined":return Pr.undefined;case"string":return Pr.string;case"number":return isNaN(t)?Pr.nan:Pr.number;case"boolean":return Pr.boolean;case"function":return Pr.function;case"bigint":return Pr.bigint;case"symbol":return Pr.symbol;case"object":return Array.isArray(t)?Pr.array:t===null?Pr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Pr.promise:typeof Map<"u"&&t instanceof Map?Pr.map:typeof Set<"u"&&t instanceof Set?Pr.set:typeof Date<"u"&&t instanceof Date?Pr.date:Pr.object;default:return Pr.unknown}},"getParsedType"),Qt=Lo.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),j_r=a(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),xm=class t extends Error{static{a(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(s){return s.message},n={_errors:[]},o=a(s=>{for(let c of s.issues)if(c.code==="invalid_union")c.unionErrors.map(o);else if(c.code==="invalid_return_type")o(c.returnTypeError);else if(c.code==="invalid_arguments")o(c.argumentsError);else if(c.path.length===0)n._errors.push(r(c));else{let l=n,u=0;for(;u<c.path.length;){let d=c.path[u];u===c.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(c))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}},"processError");return o(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Lo.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let o of this.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};xm.create=t=>new xm(t);var JM=a((t,e)=>{let r;switch(t.code){case Qt.invalid_type:t.received===Pr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Qt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Lo.jsonStringifyReplacer)}`;break;case Qt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Lo.joinValues(t.keys,", ")}`;break;case Qt.invalid_union:r="Invalid input";break;case Qt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Lo.joinValues(t.options)}`;break;case Qt.invalid_enum_value:r=`Invalid enum value. Expected ${Lo.joinValues(t.options)}, received '${t.received}'`;break;case Qt.invalid_arguments:r="Invalid function arguments";break;case Qt.invalid_return_type:r="Invalid function return type";break;case Qt.invalid_date:r="Invalid date";break;case Qt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Lo.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Qt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Qt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Qt.custom:r="Invalid input";break;case Qt.invalid_intersection_types:r="Intersection results could not be merged";break;case Qt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Qt.not_finite:r="Number must be finite";break;default:r=e.defaultError,Lo.assertNever(t)}return{message:r}},"errorMap"),z1t=JM;function G_r(t){z1t=t}a(G_r,"setErrorMap");function Fle(){return z1t}a(Fle,"getErrorMap");var Ole=a(t=>{let{data:e,path:r,errorMaps:n,issueData:o}=t,s=[...r,...o.path||[]],c={...o,path:s};if(o.message!==void 0)return{...o,path:s,message:o.message};let l="",u=n.filter(d=>!!d).slice().reverse();for(let d of u)l=d(c,{data:e,defaultError:l}).message;return{...o,path:s,message:l}},"makeIssue"),V_r=[];function Ar(t,e){let r=Fle(),n=Ole({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===JM?void 0:JM].filter(o=>!!o)});t.common.issues.push(n)}a(Ar,"addIssueToContext");var cf=class t{static{a(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let o of r){if(o.status==="aborted")return Jn;o.status==="dirty"&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let o of r){let s=await o.key,c=await o.value;n.push({key:s,value:c})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let o of r){let{key:s,value:c}=o;if(s.status==="aborted"||c.status==="aborted")return Jn;s.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof c.value<"u"||o.alwaysSet)&&(n[s.value]=c.value)}return{status:e.value,value:n}}},Jn=Object.freeze({status:"aborted"}),YM=a(t=>({status:"dirty",value:t}),"DIRTY"),Vf=a(t=>({status:"valid",value:t}),"OK"),A5e=a(t=>t.status==="aborted","isAborted"),y5e=a(t=>t.status==="dirty","isDirty"),WP=a(t=>t.status==="valid","isValid"),wH=a(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function Qle(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}a(Qle,"__classPrivateFieldGet");function K1t(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}a(K1t,"__classPrivateFieldSet");var rn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(rn||(rn={}));var IH,TH,vg=class{static{a(this,"ParseInputLazyPath")}constructor(e,r,n,o){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},j1t=a((t,e)=>{if(WP(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new xm(t.common.issues);return this._error=r,this._error}}},"handleResult");function vi(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:o}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:a((c,l)=>{var u,d;let{message:p}=t;return c.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(u=p??n)!==null&&u!==void 0?u:l.defaultError}:c.code!=="invalid_type"?{message:l.defaultError}:{message:(d=p??r)!==null&&d!==void 0?d:l.defaultError}},"customMap"),description:o}}a(vi,"processCreateParams");var xi=class{static{a(this,"ZodType")}get description(){return this._def.description}_getType(e){return VE(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:VE(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new cf,ctx:{common:e.parent.common,data:e.data,parsedType:VE(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(wH(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let o={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:VE(e)},s=this._parseSync({data:e,path:o.path,parent:o});return j1t(o,s)}"~validate"(e){var r,n;let o={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:VE(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:o});return WP(s)?{value:s.value}:{issues:o.common.issues}}catch(s){!((n=(r=s?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),o.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:o}).then(s=>WP(s)?{value:s.value}:{issues:o.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:VE(e)},o=this._parse({data:e,path:n.path,parent:n}),s=await(wH(o)?o:Promise.resolve(o));return j1t(n,s)}refine(e,r){let n=a(o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r,"getIssueProperties");return this._refinement((o,s)=>{let c=e(o),l=a(()=>s.addIssue({code:Qt.custom,...n(o)}),"setError");return typeof Promise<"u"&&c instanceof Promise?c.then(u=>u?!0:(l(),!1)):c?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,o)=>e(n)?!0:(o.addIssue(typeof r=="function"?r(n,o):r),!1))}_refinement(e){return new Em({schema:this,typeName:jn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a(r=>this["~validate"](r),"validate")}}optional(){return Cg.create(this,this._def)}nullable(){return av.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return KE.create(this)}promise(){return Q_.create(this,this._def)}or(e){return JP.create([this,e],this._def)}and(e){return XP.create(this,e,this._def)}transform(e){return new Em({...vi(this._def),schema:this,typeName:jn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new n5({...vi(this._def),innerType:this,defaultValue:r,typeName:jn.ZodDefault})}brand(){return new _H({typeName:jn.ZodBranded,type:this,...vi(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new i5({...vi(this._def),innerType:this,catchValue:r,typeName:jn.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return SH.create(this,e)}readonly(){return o5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},z_r=/^c[^\s-]{8,}$/i,K_r=/^[0-9a-z]+$/,Y_r=/^[0-9A-HJKMNP-TV-Z]{26}$/i,J_r=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,X_r=/^[a-z0-9_-]{21}$/i,Z_r=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eSr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tSr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rSr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",h5e,nSr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,iSr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,oSr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,sSr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aSr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cSr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Y1t="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",lSr=new RegExp(`^${Y1t}$`);function J1t(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}a(J1t,"timeRegexSource");function uSr(t){return new RegExp(`^${J1t(t)}$`)}a(uSr,"timeRegex");function X1t(t){let e=`${Y1t}T${J1t(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}a(X1t,"datetimeRegex");function dSr(t,e){return!!((e==="v4"||!e)&&nSr.test(t)||(e==="v6"||!e)&&oSr.test(t))}a(dSr,"isValidIP");function fSr(t,e){if(!Z_r.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return!(typeof o!="object"||o===null||!o.typ||!o.alg||e&&o.alg!==e)}catch{return!1}}a(fSr,"isValidJWT");function pSr(t,e){return!!((e==="v4"||!e)&&iSr.test(t)||(e==="v6"||!e)&&sSr.test(t))}a(pSr,"isValidCidr");var F_=class t extends xi{static{a(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Pr.string){let s=this._getOrReturnCtx(e);return Ar(s,{code:Qt.invalid_type,expected:Pr.string,received:s.parsedType}),Jn}let n=new cf,o;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){let c=e.data.length>s.value,l=e.data.length<s.value;(c||l)&&(o=this._getOrReturnCtx(e,o),c?Ar(o,{code:Qt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Ar(o,{code:Qt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")tSr.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"email",code:Qt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")h5e||(h5e=new RegExp(rSr,"u")),h5e.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"emoji",code:Qt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")J_r.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"uuid",code:Qt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")X_r.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"nanoid",code:Qt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")z_r.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"cuid",code:Qt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")K_r.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"cuid2",code:Qt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")Y_r.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"ulid",code:Qt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),Ar(o,{validation:"url",code:Qt.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"regex",code:Qt.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?X1t(s).test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?lSr.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?uSr(s).test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?eSr.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"duration",code:Qt.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?dSr(e.data,s.version)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"ip",code:Qt.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?fSr(e.data,s.alg)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"jwt",code:Qt.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?pSr(e.data,s.version)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"cidr",code:Qt.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?aSr.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"base64",code:Qt.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?cSr.test(e.data)||(o=this._getOrReturnCtx(e,o),Ar(o,{validation:"base64url",code:Qt.invalid_string,message:s.message}),n.dirty()):Lo.assertNever(s);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(o=>e.test(o),{validation:r,code:Qt.invalid_string,...rn.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...rn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...rn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...rn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...rn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...rn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...rn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...rn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...rn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...rn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...rn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...rn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...rn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...rn.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...rn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...rn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...rn.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...rn.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...rn.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...rn.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...rn.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...rn.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...rn.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...rn.errToObj(r)})}nonempty(e){return this.min(1,rn.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};F_.create=t=>{var e;return new F_({checks:[],typeName:jn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...vi(t)})};function mSr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,s=parseInt(t.toFixed(o).replace(".","")),c=parseInt(e.toFixed(o).replace(".",""));return s%c/Math.pow(10,o)}a(mSr,"floatSafeRemainder");var jP=class t extends xi{static{a(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Pr.number){let s=this._getOrReturnCtx(e);return Ar(s,{code:Qt.invalid_type,expected:Pr.number,received:s.parsedType}),Jn}let n,o=new cf;for(let s of this._def.checks)s.kind==="int"?Lo.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ar(n,{code:Qt.invalid_type,expected:"integer",received:"float",message:s.message}),o.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Ar(n,{code:Qt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Ar(n,{code:Qt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="multipleOf"?mSr(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),Ar(n,{code:Qt.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ar(n,{code:Qt.not_finite,message:s.message}),o.dirty()):Lo.assertNever(s);return{status:o.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,rn.toString(r))}gt(e,r){return this.setLimit("min",e,!1,rn.toString(r))}lte(e,r){return this.setLimit("max",e,!0,rn.toString(r))}lt(e,r){return this.setLimit("max",e,!1,rn.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:rn.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:rn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rn.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:rn.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:rn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rn.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Lo.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};jP.create=t=>new jP({checks:[],typeName:jn.ZodNumber,coerce:t?.coerce||!1,...vi(t)});var GP=class t extends xi{static{a(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Pr.bigint)return this._getInvalidInput(e);let n,o=new cf;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Ar(n,{code:Qt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Ar(n,{code:Qt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ar(n,{code:Qt.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):Lo.assertNever(s);return{status:o.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return Ar(r,{code:Qt.invalid_type,expected:Pr.bigint,received:r.parsedType}),Jn}gte(e,r){return this.setLimit("min",e,!0,rn.toString(r))}gt(e,r){return this.setLimit("min",e,!1,rn.toString(r))}lte(e,r){return this.setLimit("max",e,!0,rn.toString(r))}lt(e,r){return this.setLimit("max",e,!1,rn.toString(r))}setLimit(e,r,n,o){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:rn.toString(o)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rn.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:rn.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};GP.create=t=>{var e;return new GP({checks:[],typeName:jn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...vi(t)})};var VP=class extends xi{static{a(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Pr.boolean){let n=this._getOrReturnCtx(e);return Ar(n,{code:Qt.invalid_type,expected:Pr.boolean,received:n.parsedType}),Jn}return Vf(e.data)}};VP.create=t=>new VP({typeName:jn.ZodBoolean,coerce:t?.coerce||!1,...vi(t)});var zP=class t extends xi{static{a(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Pr.date){let s=this._getOrReturnCtx(e);return Ar(s,{code:Qt.invalid_type,expected:Pr.date,received:s.parsedType}),Jn}if(isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return Ar(s,{code:Qt.invalid_date}),Jn}let n=new cf,o;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(o=this._getOrReturnCtx(e,o),Ar(o,{code:Qt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Lo.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:rn.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:rn.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};zP.create=t=>new zP({checks:[],coerce:t?.coerce||!1,typeName:jn.ZodDate,...vi(t)});var XM=class extends xi{static{a(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==Pr.symbol){let n=this._getOrReturnCtx(e);return Ar(n,{code:Qt.invalid_type,expected:Pr.symbol,received:n.parsedType}),Jn}return Vf(e.data)}};XM.create=t=>new XM({typeName:jn.ZodSymbol,...vi(t)});var KP=class extends xi{static{a(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==Pr.undefined){let n=this._getOrReturnCtx(e);return Ar(n,{code:Qt.invalid_type,expected:Pr.undefined,received:n.parsedType}),Jn}return Vf(e.data)}};KP.create=t=>new KP({typeName:jn.ZodUndefined,...vi(t)});var YP=class extends xi{static{a(this,"ZodNull")}_parse(e){if(this._getType(e)!==Pr.null){let n=this._getOrReturnCtx(e);return Ar(n,{code:Qt.invalid_type,expected:Pr.null,received:n.parsedType}),Jn}return Vf(e.data)}};YP.create=t=>new YP({typeName:jn.ZodNull,...vi(t)});var O_=class extends xi{static{a(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Vf(e.data)}};O_.create=t=>new O_({typeName:jn.ZodAny,...vi(t)});var zE=class extends xi{static{a(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Vf(e.data)}};zE.create=t=>new zE({typeName:jn.ZodUnknown,...vi(t)});var ky=class extends xi{static{a(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return Ar(r,{code:Qt.invalid_type,expected:Pr.never,received:r.parsedType}),Jn}};ky.create=t=>new ky({typeName:jn.ZodNever,...vi(t)});var ZM=class extends xi{static{a(this,"ZodVoid")}_parse(e){if(this._getType(e)!==Pr.undefined){let n=this._getOrReturnCtx(e);return Ar(n,{code:Qt.invalid_type,expected:Pr.void,received:n.parsedType}),Jn}return Vf(e.data)}};ZM.create=t=>new ZM({typeName:jn.ZodVoid,...vi(t)});var KE=class t extends xi{static{a(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),o=this._def;if(r.parsedType!==Pr.array)return Ar(r,{code:Qt.invalid_type,expected:Pr.array,received:r.parsedType}),Jn;if(o.exactLength!==null){let c=r.data.length>o.exactLength.value,l=r.data.length<o.exactLength.value;(c||l)&&(Ar(r,{code:c?Qt.too_big:Qt.too_small,minimum:l?o.exactLength.value:void 0,maximum:c?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(Ar(r,{code:Qt.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(Ar(r,{code:Qt.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((c,l)=>o.type._parseAsync(new vg(r,c,r.path,l)))).then(c=>cf.mergeArray(n,c));let s=[...r.data].map((c,l)=>o.type._parseSync(new vg(r,c,r.path,l)));return cf.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:rn.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:rn.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:rn.toString(r)}})}nonempty(e){return this.min(1,e)}};KE.create=(t,e)=>new KE({type:t,minLength:null,maxLength:null,exactLength:null,typeName:jn.ZodArray,...vi(e)});function KM(t){if(t instanceof t0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Cg.create(KM(n))}return new t0({...t._def,shape:a(()=>e,"shape")})}else return t instanceof KE?new KE({...t._def,type:KM(t.element)}):t instanceof Cg?Cg.create(KM(t.unwrap())):t instanceof av?av.create(KM(t.unwrap())):t instanceof sv?sv.create(t.items.map(e=>KM(e))):t}a(KM,"deepPartialify");var t0=class t extends xi{static{a(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Lo.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Pr.object){let d=this._getOrReturnCtx(e);return Ar(d,{code:Qt.invalid_type,expected:Pr.object,received:d.parsedType}),Jn}let{status:n,ctx:o}=this._processInputParams(e),{shape:s,keys:c}=this._getCached(),l=[];if(!(this._def.catchall instanceof ky&&this._def.unknownKeys==="strip"))for(let d in o.data)c.includes(d)||l.push(d);let u=[];for(let d of c){let p=s[d],m=o.data[d];u.push({key:{status:"valid",value:d},value:p._parse(new vg(o,m,o.path,d)),alwaysSet:d in o.data})}if(this._def.catchall instanceof ky){let d=this._def.unknownKeys;if(d==="passthrough")for(let p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:o.data[p]}});else if(d==="strict")l.length>0&&(Ar(o,{code:Qt.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let p of l){let m=o.data[p];u.push({key:{status:"valid",value:p},value:d._parse(new vg(o,m,o.path,p)),alwaysSet:p in o.data})}}return o.common.async?Promise.resolve().then(async()=>{let d=[];for(let p of u){let m=await p.key,h=await p.value;d.push({key:m,value:h,alwaysSet:p.alwaysSet})}return d}).then(d=>cf.mergeObjectSync(n,d)):cf.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return rn.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:a((r,n)=>{var o,s,c,l;let u=(c=(s=(o=this._def).errorMap)===null||s===void 0?void 0:s.call(o,r,n).message)!==null&&c!==void 0?c:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=rn.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:a(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:a(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:jn.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Lo.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:a(()=>r,"shape")})}omit(e){let r={};return Lo.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:a(()=>r,"shape")})}deepPartial(){return KM(this)}partial(e){let r={};return Lo.objectKeys(this.shape).forEach(n=>{let o=this.shape[n];e&&!e[n]?r[n]=o:r[n]=o.optional()}),new t({...this._def,shape:a(()=>r,"shape")})}required(e){let r={};return Lo.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Cg;)s=s._def.innerType;r[n]=s}}),new t({...this._def,shape:a(()=>r,"shape")})}keyof(){return Z1t(Lo.objectKeys(this.shape))}};t0.create=(t,e)=>new t0({shape:a(()=>t,"shape"),unknownKeys:"strip",catchall:ky.create(),typeName:jn.ZodObject,...vi(e)});t0.strictCreate=(t,e)=>new t0({shape:a(()=>t,"shape"),unknownKeys:"strict",catchall:ky.create(),typeName:jn.ZodObject,...vi(e)});t0.lazycreate=(t,e)=>new t0({shape:t,unknownKeys:"strip",catchall:ky.create(),typeName:jn.ZodObject,...vi(e)});var JP=class extends xi{static{a(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function o(s){for(let l of s)if(l.result.status==="valid")return l.result;for(let l of s)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let c=s.map(l=>new xm(l.ctx.common.issues));return Ar(r,{code:Qt.invalid_union,unionErrors:c}),Jn}if(a(o,"handleResults"),r.common.async)return Promise.all(n.map(async s=>{let c={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:c}),ctx:c}})).then(o);{let s,c=[];for(let u of n){let d={...r,common:{...r.common,issues:[]},parent:null},p=u._parseSync({data:r.data,path:r.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:d}),d.common.issues.length&&c.push(d.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let l=c.map(u=>new xm(u));return Ar(r,{code:Qt.invalid_union,unionErrors:l}),Jn}}get options(){return this._def.options}};JP.create=(t,e)=>new JP({options:t,typeName:jn.ZodUnion,...vi(e)});var GE=a(t=>t instanceof ZP?GE(t.schema):t instanceof Em?GE(t.innerType()):t instanceof e5?[t.value]:t instanceof t5?t.options:t instanceof r5?Lo.objectValues(t.enum):t instanceof n5?GE(t._def.innerType):t instanceof KP?[void 0]:t instanceof YP?[null]:t instanceof Cg?[void 0,...GE(t.unwrap())]:t instanceof av?[null,...GE(t.unwrap())]:t instanceof _H||t instanceof o5?GE(t.unwrap()):t instanceof i5?GE(t._def.innerType):[],"getDiscriminator"),Ule=class t extends xi{static{a(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Pr.object)return Ar(r,{code:Qt.invalid_type,expected:Pr.object,received:r.parsedType}),Jn;let n=this.discriminator,o=r.data[n],s=this.optionsMap.get(o);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(Ar(r,{code:Qt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Jn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let o=new Map;for(let s of r){let c=GE(s.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of c){if(o.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);o.set(l,s)}}return new t({typeName:jn.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:o,...vi(n)})}};function C5e(t,e){let r=VE(t),n=VE(e);if(t===e)return{valid:!0,data:t};if(r===Pr.object&&n===Pr.object){let o=Lo.objectKeys(e),s=Lo.objectKeys(t).filter(l=>o.indexOf(l)!==-1),c={...t,...e};for(let l of s){let u=C5e(t[l],e[l]);if(!u.valid)return{valid:!1};c[l]=u.data}return{valid:!0,data:c}}else if(r===Pr.array&&n===Pr.array){if(t.length!==e.length)return{valid:!1};let o=[];for(let s=0;s<t.length;s++){let c=t[s],l=e[s],u=C5e(c,l);if(!u.valid)return{valid:!1};o.push(u.data)}return{valid:!0,data:o}}else return r===Pr.date&&n===Pr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}a(C5e,"mergeValues");var XP=class extends xi{static{a(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=a((s,c)=>{if(A5e(s)||A5e(c))return Jn;let l=C5e(s.value,c.value);return l.valid?((y5e(s)||y5e(c))&&r.dirty(),{status:r.value,value:l.data}):(Ar(n,{code:Qt.invalid_intersection_types}),Jn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,c])=>o(s,c)):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};XP.create=(t,e,r)=>new XP({left:t,right:e,typeName:jn.ZodIntersection,...vi(r)});var sv=class t extends xi{static{a(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pr.array)return Ar(n,{code:Qt.invalid_type,expected:Pr.array,received:n.parsedType}),Jn;if(n.data.length<this._def.items.length)return Ar(n,{code:Qt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Jn;!this._def.rest&&n.data.length>this._def.items.length&&(Ar(n,{code:Qt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...n.data].map((c,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new vg(n,c,n.path,l)):null}).filter(c=>!!c);return n.common.async?Promise.all(s).then(c=>cf.mergeArray(r,c)):cf.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};sv.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sv({items:t,typeName:jn.ZodTuple,rest:null,...vi(e)})};var qle=class t extends xi{static{a(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pr.object)return Ar(n,{code:Qt.invalid_type,expected:Pr.object,received:n.parsedType}),Jn;let o=[],s=this._def.keyType,c=this._def.valueType;for(let l in n.data)o.push({key:s._parse(new vg(n,l,n.path,l)),value:c._parse(new vg(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?cf.mergeObjectAsync(r,o):cf.mergeObjectSync(r,o)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof xi?new t({keyType:e,valueType:r,typeName:jn.ZodRecord,...vi(n)}):new t({keyType:F_.create(),valueType:e,typeName:jn.ZodRecord,...vi(r)})}},eL=class extends xi{static{a(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pr.map)return Ar(n,{code:Qt.invalid_type,expected:Pr.map,received:n.parsedType}),Jn;let o=this._def.keyType,s=this._def.valueType,c=[...n.data.entries()].map(([l,u],d)=>({key:o._parse(new vg(n,l,n.path,[d,"key"])),value:s._parse(new vg(n,u,n.path,[d,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of c){let d=await u.key,p=await u.value;if(d.status==="aborted"||p.status==="aborted")return Jn;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),l.set(d.value,p.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of c){let d=u.key,p=u.value;if(d.status==="aborted"||p.status==="aborted")return Jn;(d.status==="dirty"||p.status==="dirty")&&r.dirty(),l.set(d.value,p.value)}return{status:r.value,value:l}}}};eL.create=(t,e,r)=>new eL({valueType:e,keyType:t,typeName:jn.ZodMap,...vi(r)});var tL=class t extends xi{static{a(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Pr.set)return Ar(n,{code:Qt.invalid_type,expected:Pr.set,received:n.parsedType}),Jn;let o=this._def;o.minSize!==null&&n.data.size<o.minSize.value&&(Ar(n,{code:Qt.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&n.data.size>o.maxSize.value&&(Ar(n,{code:Qt.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());let s=this._def.valueType;function c(u){let d=new Set;for(let p of u){if(p.status==="aborted")return Jn;p.status==="dirty"&&r.dirty(),d.add(p.value)}return{status:r.value,value:d}}a(c,"finalizeSet");let l=[...n.data.values()].map((u,d)=>s._parse(new vg(n,u,n.path,d)));return n.common.async?Promise.all(l).then(u=>c(u)):c(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:rn.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:rn.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};tL.create=(t,e)=>new tL({valueType:t,minSize:null,maxSize:null,typeName:jn.ZodSet,...vi(e)});var Hle=class t extends xi{static{a(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Pr.function)return Ar(r,{code:Qt.invalid_type,expected:Pr.function,received:r.parsedType}),Jn;function n(l,u){return Ole({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Fle(),JM].filter(d=>!!d),issueData:{code:Qt.invalid_arguments,argumentsError:u}})}a(n,"makeArgsIssue");function o(l,u){return Ole({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Fle(),JM].filter(d=>!!d),issueData:{code:Qt.invalid_return_type,returnTypeError:u}})}a(o,"makeReturnsIssue");let s={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof Q_){let l=this;return Vf(async function(...u){let d=new xm([]),p=await l._def.args.parseAsync(u,s).catch(g=>{throw d.addIssue(n(u,g)),d}),m=await Reflect.apply(c,this,p);return await l._def.returns._def.type.parseAsync(m,s).catch(g=>{throw d.addIssue(o(m,g)),d})})}else{let l=this;return Vf(function(...u){let d=l._def.args.safeParse(u,s);if(!d.success)throw new xm([n(u,d.error)]);let p=Reflect.apply(c,this,d.data),m=l._def.returns.safeParse(p,s);if(!m.success)throw new xm([o(p,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:sv.create(e).rest(zE.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||sv.create([]).rest(zE.create()),returns:r||zE.create(),typeName:jn.ZodFunction,...vi(n)})}},ZP=class extends xi{static{a(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ZP.create=(t,e)=>new ZP({getter:t,typeName:jn.ZodLazy,...vi(e)});var e5=class extends xi{static{a(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return Ar(r,{received:r.data,code:Qt.invalid_literal,expected:this._def.value}),Jn}return{status:"valid",value:e.data}}get value(){return this._def.value}};e5.create=(t,e)=>new e5({value:t,typeName:jn.ZodLiteral,...vi(e)});function Z1t(t,e){return new t5({values:t,typeName:jn.ZodEnum,...vi(e)})}a(Z1t,"createZodEnum");var t5=class t extends xi{static{a(this,"ZodEnum")}constructor(){super(...arguments),IH.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return Ar(r,{expected:Lo.joinValues(n),received:r.parsedType,code:Qt.invalid_type}),Jn}if(Qle(this,IH,"f")||K1t(this,IH,new Set(this._def.values),"f"),!Qle(this,IH,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return Ar(r,{received:r.data,code:Qt.invalid_enum_value,options:n}),Jn}return Vf(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};IH=new WeakMap;t5.create=Z1t;var r5=class extends xi{static{a(this,"ZodNativeEnum")}constructor(){super(...arguments),TH.set(this,void 0)}_parse(e){let r=Lo.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Pr.string&&n.parsedType!==Pr.number){let o=Lo.objectValues(r);return Ar(n,{expected:Lo.joinValues(o),received:n.parsedType,code:Qt.invalid_type}),Jn}if(Qle(this,TH,"f")||K1t(this,TH,new Set(Lo.getValidEnumValues(this._def.values)),"f"),!Qle(this,TH,"f").has(e.data)){let o=Lo.objectValues(r);return Ar(n,{received:n.data,code:Qt.invalid_enum_value,options:o}),Jn}return Vf(e.data)}get enum(){return this._def.values}};TH=new WeakMap;r5.create=(t,e)=>new r5({values:t,typeName:jn.ZodNativeEnum,...vi(e)});var Q_=class extends xi{static{a(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Pr.promise&&r.common.async===!1)return Ar(r,{code:Qt.invalid_type,expected:Pr.promise,received:r.parsedType}),Jn;let n=r.parsedType===Pr.promise?r.data:Promise.resolve(r.data);return Vf(n.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Q_.create=(t,e)=>new Q_({type:t,typeName:jn.ZodPromise,...vi(e)});var Em=class extends xi{static{a(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===jn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),o=this._def.effect||null,s={addIssue:a(c=>{Ar(n,c),c.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),o.type==="preprocess"){let c=o.transform(n.data,s);if(n.common.async)return Promise.resolve(c).then(async l=>{if(r.value==="aborted")return Jn;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?Jn:u.status==="dirty"||r.value==="dirty"?YM(u.value):u});{if(r.value==="aborted")return Jn;let l=this._def.schema._parseSync({data:c,path:n.path,parent:n});return l.status==="aborted"?Jn:l.status==="dirty"||r.value==="dirty"?YM(l.value):l}}if(o.type==="refinement"){let c=a(l=>{let u=o.refinement(l,s);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Jn:(l.status==="dirty"&&r.dirty(),c(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Jn:(l.status==="dirty"&&r.dirty(),c(l.value).then(()=>({status:r.value,value:l.value}))))}if(o.type==="transform")if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!WP(c))return c;let l=o.transform(c.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>WP(c)?Promise.resolve(o.transform(c.value,s)).then(l=>({status:r.value,value:l})):c);Lo.assertNever(o)}};Em.create=(t,e,r)=>new Em({schema:t,typeName:jn.ZodEffects,effect:e,...vi(r)});Em.createWithPreprocess=(t,e,r)=>new Em({schema:e,effect:{type:"preprocess",transform:t},typeName:jn.ZodEffects,...vi(r)});var Cg=class extends xi{static{a(this,"ZodOptional")}_parse(e){return this._getType(e)===Pr.undefined?Vf(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Cg.create=(t,e)=>new Cg({innerType:t,typeName:jn.ZodOptional,...vi(e)});var av=class extends xi{static{a(this,"ZodNullable")}_parse(e){return this._getType(e)===Pr.null?Vf(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};av.create=(t,e)=>new av({innerType:t,typeName:jn.ZodNullable,...vi(e)});var n5=class extends xi{static{a(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Pr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};n5.create=(t,e)=>new n5({innerType:t,typeName:jn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...vi(e)});var i5=class extends xi{static{a(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return wH(o)?o.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new xm(n.common.issues)},input:n.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new xm(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};i5.create=(t,e)=>new i5({innerType:t,typeName:jn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...vi(e)});var rL=class extends xi{static{a(this,"ZodNaN")}_parse(e){if(this._getType(e)!==Pr.nan){let n=this._getOrReturnCtx(e);return Ar(n,{code:Qt.invalid_type,expected:Pr.nan,received:n.parsedType}),Jn}return{status:"valid",value:e.data}}};rL.create=t=>new rL({typeName:jn.ZodNaN,...vi(t)});var hSr=Symbol("zod_brand"),_H=class extends xi{static{a(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},SH=class t extends xi{static{a(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return a(async()=>{let s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Jn:s.status==="dirty"?(r.dirty(),YM(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})},"handleAsync")();{let o=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Jn:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:jn.ZodPipeline})}},o5=class extends xi{static{a(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=a(o=>(WP(o)&&(o.value=Object.freeze(o.value)),o),"freeze");return wH(r)?r.then(o=>n(o)):n(r)}unwrap(){return this._def.innerType}};o5.create=(t,e)=>new o5({innerType:t,typeName:jn.ZodReadonly,...vi(e)});function G1t(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}a(G1t,"cleanParams");function evt(t,e={},r){return t?O_.create().superRefine((n,o)=>{var s,c;let l=t(n);if(l instanceof Promise)return l.then(u=>{var d,p;if(!u){let m=G1t(e,n),h=(p=(d=m.fatal)!==null&&d!==void 0?d:r)!==null&&p!==void 0?p:!0;o.addIssue({code:"custom",...m,fatal:h})}});if(!l){let u=G1t(e,n),d=(c=(s=u.fatal)!==null&&s!==void 0?s:r)!==null&&c!==void 0?c:!0;o.addIssue({code:"custom",...u,fatal:d})}}):O_.create()}a(evt,"custom");var gSr={object:t0.lazycreate},jn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(jn||(jn={}));var ASr=a((t,e={message:`Input not instance of ${t.name}`})=>evt(r=>r instanceof t,e),"instanceOfType"),tvt=F_.create,rvt=jP.create,ySr=rL.create,CSr=GP.create,nvt=VP.create,vSr=zP.create,xSr=XM.create,ESr=KP.create,bSr=YP.create,ISr=O_.create,TSr=zE.create,wSr=ky.create,_Sr=ZM.create,SSr=KE.create,RSr=t0.create,kSr=t0.strictCreate,PSr=JP.create,DSr=Ule.create,BSr=XP.create,NSr=sv.create,MSr=qle.create,LSr=eL.create,FSr=tL.create,OSr=Hle.create,QSr=ZP.create,USr=e5.create,qSr=t5.create,HSr=r5.create,$Sr=Q_.create,V1t=Em.create,WSr=Cg.create,jSr=av.create,GSr=Em.createWithPreprocess,VSr=SH.create,zSr=a(()=>tvt().optional(),"ostring"),KSr=a(()=>rvt().optional(),"onumber"),YSr=a(()=>nvt().optional(),"oboolean"),JSr={string:a(t=>F_.create({...t,coerce:!0}),"string"),number:a(t=>jP.create({...t,coerce:!0}),"number"),boolean:a(t=>VP.create({...t,coerce:!0}),"boolean"),bigint:a(t=>GP.create({...t,coerce:!0}),"bigint"),date:a(t=>zP.create({...t,coerce:!0}),"date")},XSr=Jn,R=Object.freeze({__proto__:null,defaultErrorMap:JM,setErrorMap:G_r,getErrorMap:Fle,makeIssue:Ole,EMPTY_PATH:V_r,addIssueToContext:Ar,ParseStatus:cf,INVALID:Jn,DIRTY:YM,OK:Vf,isAborted:A5e,isDirty:y5e,isValid:WP,isAsync:wH,get util(){return Lo},get objectUtil(){return g5e},ZodParsedType:Pr,getParsedType:VE,ZodType:xi,datetimeRegex:X1t,ZodString:F_,ZodNumber:jP,ZodBigInt:GP,ZodBoolean:VP,ZodDate:zP,ZodSymbol:XM,ZodUndefined:KP,ZodNull:YP,ZodAny:O_,ZodUnknown:zE,ZodNever:ky,ZodVoid:ZM,ZodArray:KE,ZodObject:t0,ZodUnion:JP,ZodDiscriminatedUnion:Ule,ZodIntersection:XP,ZodTuple:sv,ZodRecord:qle,ZodMap:eL,ZodSet:tL,ZodFunction:Hle,ZodLazy:ZP,ZodLiteral:e5,ZodEnum:t5,ZodNativeEnum:r5,ZodPromise:Q_,ZodEffects:Em,ZodTransformer:Em,ZodOptional:Cg,ZodNullable:av,ZodDefault:n5,ZodCatch:i5,ZodNaN:rL,BRAND:hSr,ZodBranded:_H,ZodPipeline:SH,ZodReadonly:o5,custom:evt,Schema:xi,ZodSchema:xi,late:gSr,get ZodFirstPartyTypeKind(){return jn},coerce:JSr,any:ISr,array:SSr,bigint:CSr,boolean:nvt,date:vSr,discriminatedUnion:DSr,effect:V1t,enum:qSr,function:OSr,instanceof:ASr,intersection:BSr,lazy:QSr,literal:USr,map:LSr,nan:ySr,nativeEnum:HSr,never:wSr,null:bSr,nullable:jSr,number:rvt,object:RSr,oboolean:YSr,onumber:KSr,optional:WSr,ostring:zSr,pipeline:VSr,preprocess:GSr,promise:$Sr,record:MSr,set:FSr,strictObject:kSr,string:tvt,symbol:xSr,transformer:V1t,tuple:NSr,undefined:ESr,union:PSr,unknown:TSr,void:_Sr,NEVER:XSr,ZodIssueCode:Qt,quotelessJson:j_r,ZodError:xm});var $le="2025-06-18";var Wle="2.0",ivt=R.union([R.string(),R.number().int()]),ovt=R.string(),ZSr=R.object({progressToken:R.optional(ivt)}).passthrough(),xg=R.object({_meta:R.optional(ZSr)}).passthrough(),r0=R.object({method:R.string(),params:R.optional(xg)}),RH=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),cv=R.object({method:R.string(),params:R.optional(RH)}),Eg=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),jle=R.union([R.string(),R.number().int()]),e2r=R.object({jsonrpc:R.literal(Wle),id:jle}).merge(r0).strict();var t2r=R.object({jsonrpc:R.literal(Wle)}).merge(cv).strict();var r2r=R.object({jsonrpc:R.literal(Wle),id:jle,result:Eg}).strict();var n2r=R.object({jsonrpc:R.literal(Wle),id:jle,error:R.object({code:R.number().int(),message:R.string(),data:R.optional(R.unknown())})}).strict();var VNo=R.union([e2r,t2r,r2r,n2r]),svt=Eg.strict(),avt=cv.extend({method:R.literal("notifications/cancelled"),params:RH.extend({requestId:jle,reason:R.string().optional()})}),kH=R.object({name:R.string(),title:R.optional(R.string())}).passthrough(),cvt=kH.extend({version:R.string()}),i2r=R.object({experimental:R.optional(R.object({}).passthrough()),sampling:R.optional(R.object({}).passthrough()),elicitation:R.optional(R.object({}).passthrough()),roots:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),o2r=r0.extend({method:R.literal("initialize"),params:xg.extend({protocolVersion:R.string(),capabilities:i2r,clientInfo:cvt})});var s2r=R.object({experimental:R.optional(R.object({}).passthrough()),logging:R.optional(R.object({}).passthrough()),completions:R.optional(R.object({}).passthrough()),prompts:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough()),resources:R.optional(R.object({subscribe:R.optional(R.boolean()),listChanged:R.optional(R.boolean())}).passthrough()),tools:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),a2r=Eg.extend({protocolVersion:R.string(),capabilities:s2r,serverInfo:cvt,instructions:R.optional(R.string())}),c2r=cv.extend({method:R.literal("notifications/initialized")});var lvt=r0.extend({method:R.literal("ping")}),l2r=R.object({progress:R.number(),total:R.optional(R.number()),message:R.optional(R.string())}).passthrough(),uvt=cv.extend({method:R.literal("notifications/progress"),params:RH.merge(l2r).extend({progressToken:ivt})}),Gle=r0.extend({params:xg.extend({cursor:R.optional(ovt)}).optional()}),Vle=Eg.extend({nextCursor:R.optional(ovt)}),dvt=R.object({uri:R.string(),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}).passthrough(),fvt=dvt.extend({text:R.string()}),pvt=dvt.extend({blob:R.string().base64()}),mvt=kH.extend({uri:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}),u2r=kH.extend({uriTemplate:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}),d2r=Gle.extend({method:R.literal("resources/list")}),f2r=Vle.extend({resources:R.array(mvt)}),p2r=Gle.extend({method:R.literal("resources/templates/list")}),m2r=Vle.extend({resourceTemplates:R.array(u2r)}),h2r=r0.extend({method:R.literal("resources/read"),params:xg.extend({uri:R.string()})}),g2r=Eg.extend({contents:R.array(R.union([fvt,pvt]))}),A2r=cv.extend({method:R.literal("notifications/resources/list_changed")}),y2r=r0.extend({method:R.literal("resources/subscribe"),params:xg.extend({uri:R.string()})}),C2r=r0.extend({method:R.literal("resources/unsubscribe"),params:xg.extend({uri:R.string()})}),v2r=cv.extend({method:R.literal("notifications/resources/updated"),params:RH.extend({uri:R.string()})}),x2r=R.object({name:R.string(),description:R.optional(R.string()),required:R.optional(R.boolean())}).passthrough(),E2r=kH.extend({description:R.optional(R.string()),arguments:R.optional(R.array(x2r)),_meta:R.optional(R.object({}).passthrough())}),b2r=Gle.extend({method:R.literal("prompts/list")}),I2r=Vle.extend({prompts:R.array(E2r)}),T2r=r0.extend({method:R.literal("prompts/get"),params:xg.extend({name:R.string(),arguments:R.optional(R.record(R.string()))})}),v5e=R.object({type:R.literal("text"),text:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),x5e=R.object({type:R.literal("image"),data:R.string().base64(),mimeType:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),E5e=R.object({type:R.literal("audio"),data:R.string().base64(),mimeType:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),w2r=R.object({type:R.literal("resource"),resource:R.union([fvt,pvt]),_meta:R.optional(R.object({}).passthrough())}).passthrough(),_2r=mvt.extend({type:R.literal("resource_link")}),hvt=R.union([v5e,x5e,E5e,_2r,w2r]),S2r=R.object({role:R.enum(["user","assistant"]),content:hvt}).passthrough(),R2r=Eg.extend({description:R.optional(R.string()),messages:R.array(S2r)}),k2r=cv.extend({method:R.literal("notifications/prompts/list_changed")}),P2r=R.object({title:R.optional(R.string()),readOnlyHint:R.optional(R.boolean()),destructiveHint:R.optional(R.boolean()),idempotentHint:R.optional(R.boolean()),openWorldHint:R.optional(R.boolean())}).passthrough(),D2r=kH.extend({description:R.optional(R.string()),inputSchema:R.object({type:R.literal("object"),properties:R.optional(R.object({}).passthrough()),required:R.optional(R.array(R.string()))}).passthrough(),outputSchema:R.optional(R.object({type:R.literal("object"),properties:R.optional(R.object({}).passthrough()),required:R.optional(R.array(R.string()))}).passthrough()),annotations:R.optional(P2r),_meta:R.optional(R.object({}).passthrough())}),B2r=Gle.extend({method:R.literal("tools/list")}),N2r=Vle.extend({tools:R.array(D2r)}),gvt=Eg.extend({content:R.array(hvt).default([]),structuredContent:R.object({}).passthrough().optional(),isError:R.optional(R.boolean())}),zNo=gvt.or(Eg.extend({toolResult:R.unknown()})),M2r=r0.extend({method:R.literal("tools/call"),params:xg.extend({name:R.string(),arguments:R.optional(R.record(R.unknown()))})}),L2r=cv.extend({method:R.literal("notifications/tools/list_changed")}),Avt=R.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),F2r=r0.extend({method:R.literal("logging/setLevel"),params:xg.extend({level:Avt})}),O2r=cv.extend({method:R.literal("notifications/message"),params:RH.extend({level:Avt,logger:R.optional(R.string()),data:R.unknown()})}),Q2r=R.object({name:R.string().optional()}).passthrough(),U2r=R.object({hints:R.optional(R.array(Q2r)),costPriority:R.optional(R.number().min(0).max(1)),speedPriority:R.optional(R.number().min(0).max(1)),intelligencePriority:R.optional(R.number().min(0).max(1))}).passthrough(),q2r=R.object({role:R.enum(["user","assistant"]),content:R.union([v5e,x5e,E5e])}).passthrough(),H2r=r0.extend({method:R.literal("sampling/createMessage"),params:xg.extend({messages:R.array(q2r),systemPrompt:R.optional(R.string()),includeContext:R.optional(R.enum(["none","thisServer","allServers"])),temperature:R.optional(R.number()),maxTokens:R.number().int(),stopSequences:R.optional(R.array(R.string())),metadata:R.optional(R.object({}).passthrough()),modelPreferences:R.optional(U2r)})}),$2r=Eg.extend({model:R.string(),stopReason:R.optional(R.enum(["endTurn","stopSequence","maxTokens"]).or(R.string())),role:R.enum(["user","assistant"]),content:R.discriminatedUnion("type",[v5e,x5e,E5e])}),W2r=R.object({type:R.literal("boolean"),title:R.optional(R.string()),description:R.optional(R.string()),default:R.optional(R.boolean())}).passthrough(),j2r=R.object({type:R.literal("string"),title:R.optional(R.string()),description:R.optional(R.string()),minLength:R.optional(R.number()),maxLength:R.optional(R.number()),format:R.optional(R.enum(["email","uri","date","date-time"]))}).passthrough(),G2r=R.object({type:R.enum(["number","integer"]),title:R.optional(R.string()),description:R.optional(R.string()),minimum:R.optional(R.number()),maximum:R.optional(R.number())}).passthrough(),V2r=R.object({type:R.literal("string"),title:R.optional(R.string()),description:R.optional(R.string()),enum:R.array(R.string()),enumNames:R.optional(R.array(R.string()))}).passthrough(),z2r=R.union([W2r,j2r,G2r,V2r]),K2r=r0.extend({method:R.literal("elicitation/create"),params:xg.extend({message:R.string(),requestedSchema:R.object({type:R.literal("object"),properties:R.record(R.string(),z2r),required:R.optional(R.array(R.string()))}).passthrough()})}),Y2r=Eg.extend({action:R.enum(["accept","decline","cancel"]),content:R.optional(R.record(R.string(),R.unknown()))}),J2r=R.object({type:R.literal("ref/resource"),uri:R.string()}).passthrough();var X2r=R.object({type:R.literal("ref/prompt"),name:R.string()}).passthrough(),Z2r=r0.extend({method:R.literal("completion/complete"),params:xg.extend({ref:R.union([X2r,J2r]),argument:R.object({name:R.string(),value:R.string()}).passthrough(),context:R.optional(R.object({arguments:R.optional(R.record(R.string(),R.string()))}))})}),eRr=Eg.extend({completion:R.object({values:R.array(R.string()).max(100),total:R.optional(R.number().int()),hasMore:R.optional(R.boolean())}).passthrough()}),tRr=R.object({uri:R.string().startsWith("file://"),name:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}).passthrough(),rRr=r0.extend({method:R.literal("roots/list")}),nRr=Eg.extend({roots:R.array(tRr)}),iRr=cv.extend({method:R.literal("notifications/roots/list_changed")}),KNo=R.union([lvt,o2r,Z2r,F2r,T2r,b2r,d2r,p2r,h2r,y2r,C2r,M2r,B2r]),YNo=R.union([avt,uvt,c2r,iRr]),JNo=R.union([svt,$2r,Y2r,nRr]),XNo=R.union([lvt,H2r,K2r,rRr]),ZNo=R.union([avt,uvt,O2r,v2r,A2r,L2r,k2r]),e8o=R.union([svt,a2r,eRr,R2r,I2r,f2r,m2r,g2r,gvt,N2r]);f();async function s5(t,e,r,n,o){return await t.get(Qr).fetch(new URL(e).href,{method:r,headers:n,body:o})}a(s5,"fetchOauthServer");async function b5e(t){try{return await t.text()}catch{return t.statusText}}a(b5e,"getErrText");f();var yvt="/.well-known",I5e=`${yvt}/oauth-protected-resource`,Cvt=`${yvt}/oauth-authorization-server`;function vvt(t){return typeof t!="object"||t===null?!1:t.resource!==void 0}a(vvt,"isAuthorizationProtectedResourceMetadata");function xvt(t){return typeof t!="object"||t===null?!1:t.issuer!==void 0}a(xvt,"isAuthorizationServerMetadata");function Evt(t){let e=t.split(" "),r=e[0],n={};return e.length>1&&e.slice(1).join(" ").split(",").forEach(s=>{let[c,l]=s.split("=").map(u=>u.trim().replace(/"/g,""));n[c]=l}),{scheme:r,params:n}}a(Evt,"parseWWWAuthenticateHeader");function bvt(t){let e=new URL(t.issuer);return{...t,authorization_endpoint:t.authorization_endpoint??new URL("/authorize",e).toString(),token_endpoint:t.token_endpoint??new URL("/token",e).toString(),registration_endpoint:t.registration_endpoint??new URL("/register",e).toString()}}a(bvt,"getMetadataWithDefaultValues");function Ivt(t){return{issuer:t.toString(),authorization_endpoint:new URL("/authorize",t).toString(),token_endpoint:new URL("/token",t).toString(),registration_endpoint:new URL("/register",t).toString(),response_types_supported:["code","id_token","id_token token"]}}a(Ivt,"getDefaultMetadataForUrl");function Tvt(t){let e=new URL(t);if(!e.pathname.startsWith(I5e))throw new Error(`Invalid discovery URL: expected path to start with ${I5e}`);let r=e.pathname.substring(I5e.length),n=new URL(e.origin);return n.pathname=r||"/",n.toString()}a(Tvt,"getResourceServerBaseUrlFromDiscoveryUrl");var T5e=class{static{a(this,"AuthMetadata")}},zle=class extends T5e{static{a(this,"MCPAuthMetadata")}constructor(e){super(),this.ctx=e}async getMetadataFromOriginalUrl(e,r){let n=await this.getResourceMetadataChallenge(e),o,s,c,l=await this.getResourceMetadata(n,{url:e,headers:r??{}});l.resource&&(o=l.authorization_servers?.[0],s=l.scopes_supported,c=l);let u=new URL(e).origin,d={};o||(o=u,d=r??{});let p;try{let h=await this.getAuthorizationServerMetadata(o,d),g=bvt(h);return p={authorizationServer:o,serverMetadata:g,resourceMetadata:c},an.info(this.ctx,"authMetadata",p),p}catch(h){an.warn(this.ctx,`Error populating auth metadata: ${String(h)}`)}let m=Ivt(new URL(u));return m.scopes_supported=s??m.scopes_supported??[],p={authorizationServer:o,serverMetadata:m,resourceMetadata:c},p}async getResourceMetadataChallenge(e){let r=await s5(this.ctx,e,"POST"),n;if(r.status===401&&r.headers.has("WWW-Authenticate")){let o=r.headers.get("WWW-Authenticate"),{scheme:s,params:c}=Evt(o);s==="Bearer"&&c.resource_metadata&&(n=c.resource_metadata)}return n}async getResourceMetadata(e,r){if(!e)return{resource:""};let n=new URL(e),o=new URL(r.url),s={};n.origin===o.origin&&(s=r.headers);let c=await s5(this.ctx,e,"GET",{...s,Accept:"application/json","MCP-Protocol-Version":$le});if(c.status!==200)throw new Error(`Failed to fetch resource metadata: ${c.status} ${await b5e(c)}`);let l=await c.json();if(vvt(l)){let u=Tvt(e);if(l.resource!==u)throw new Error(`Protected Resource Metadata resource "${l.resource}" does not match MCP server resolved resource "${u}". The MCP server must follow OAuth spec https://datatracker.ietf.org/doc/html/rfc9728#PRConfigurationValidation`);return l}else throw new Error(`Invalid resource metadata: ${JSON.stringify(l)}`)}async getAuthorizationServerMetadata(e,r){let n=new URL(e),o=n.pathname==="/"?"":n.pathname,s=new URL(Cvt,e).toString()+o,c=await s5(this.ctx,s,"GET",{...r,Accept:"application/json","MCP-Protocol-Version":$le});if(c.status!==200&&(c=await s5(this.ctx,Ki(e,".well-known","openid-configuration"),"GET",{...r,Accept:"application/json","MCP-Protocol-Version":$le}),c.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${c.status} ${await b5e(c)}`);let l=await c.json();if(xvt(l))return l;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(l)}`)}};f();f();f();f();f();var bg=class{static{a(this,"MCPNotificationHandler")}constructor(e,r){this.ctx=e,this.serverName=r}};var PH=class extends bg{static{a(this,"LoggingMessageNotificationHandler")}constructor(e,r){super(e,r)}handle(e){let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":an.info(this.ctx,`MCP server ${this.serverName} log:`,r),ys(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;case"warning":an.warn(this.ctx,`MCP server ${this.serverName} log:`,r),$P(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;case"error":case"critical":case"alert":case"emergency":an.error(this.ctx,`MCP server ${this.serverName} log:`,r),yd(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break;default:an.info(this.ctx,`MCP server ${this.serverName} log:`,r),ys(this.ctx,{message:`Notification message: ${r}`,server:this.serverName});break}}};f();var DH=class extends bg{static{a(this,"PromptListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){an.info(this.ctx,"Prompts list changed, refreshing tools..."),ys(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.serverName}),this.emitter.emit(Gk)}};f();var BH=class extends bg{static{a(this,"ResourceListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){an.info(this.ctx,"Resource list changed, refreshing resources..."),ys(this.ctx,{message:"Resource list changed, refreshing resources...",server:this.serverName}),this.emitter.emit(Mdt)}};f();var NH=class extends bg{static{a(this,"ResourceUpdatedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){an.info(this.ctx,`Resource updated for URI: ${e.params.uri}`),ys(this.ctx,{message:`Resource updated: ${e.params.uri}`,server:this.serverName}),this.emitter.emit(Ldt)}};f();var Kle=class{static{a(this,"MCPRequestHandler")}constructor(e,r){this.ctx=e,this.serverName=r}},MH=class extends Kle{static{a(this,"ListRootsRequestHandler")}constructor(e,r){super(e,r)}handle(e){an.info(this.ctx,`MCP server ${this.serverName} requested roots list`);let r=[];try{(this.ctx.get(fr).getWorkspaceFolders()||[]).forEach(o=>{r.push(o)}),ys(this.ctx,{message:`Requested roots list and found ${r.length} root(s).`,server:this.serverName})}catch(n){an.error(this.ctx,`Error getting workspace folders for MCP server ${this.serverName}:`,n),yd(this.ctx,{message:`Error getting workspace folders for MCP server ${this.serverName}: ${n instanceof Error?n.message:String(n)}`,server:this.serverName})}return{roots:r}}};f();var LH=class extends bg{static{a(this,"ToolListChangedNotificationHandler")}constructor(e,r,n){super(e,r),this.emitter=n}handle(e){an.info(this.ctx,"Tool list changed, refreshing tools..."),ys(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.serverName}),this.emitter.emit(Gk)}};f();f();var nL="2025-06-18";var wvt=[nL,"2025-03-26","2024-11-05","2024-10-07"],Yle="2.0",_vt=R.union([R.string(),R.number().int()]),Svt=R.string(),oRr=R.object({progressToken:R.optional(_vt)}).passthrough(),Tg=R.object({_meta:R.optional(oRr)}).passthrough(),n0=R.object({method:R.string(),params:R.optional(Tg)}),FH=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),lv=R.object({method:R.string(),params:R.optional(FH)}),wg=R.object({_meta:R.optional(R.object({}).passthrough())}).passthrough(),Jle=R.union([R.string(),R.number().int()]),Rvt=R.object({jsonrpc:R.literal(Yle),id:Jle}).merge(n0).strict(),Xle=a(t=>Rvt.safeParse(t).success,"isJSONRPCRequest"),kvt=R.object({jsonrpc:R.literal(Yle)}).merge(lv).strict(),Pvt=a(t=>kvt.safeParse(t).success,"isJSONRPCNotification"),Dvt=R.object({jsonrpc:R.literal(Yle),id:Jle,result:wg}).strict(),OH=a(t=>Dvt.safeParse(t).success,"isJSONRPCResponse"),Ig;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Ig||(Ig={}));var Bvt=R.object({jsonrpc:R.literal(Yle),id:Jle,error:R.object({code:R.number().int(),message:R.string(),data:R.optional(R.unknown())})}).strict(),Nvt=a(t=>Bvt.safeParse(t).success,"isJSONRPCError"),U_=R.union([Rvt,kvt,Dvt,Bvt]),a5=wg.strict(),Zle=lv.extend({method:R.literal("notifications/cancelled"),params:FH.extend({requestId:Jle,reason:R.string().optional()})}),QH=R.object({name:R.string(),title:R.optional(R.string())}).passthrough(),Mvt=QH.extend({version:R.string()}),sRr=R.object({experimental:R.optional(R.object({}).passthrough()),sampling:R.optional(R.object({}).passthrough()),elicitation:R.optional(R.object({}).passthrough()),roots:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),aRr=n0.extend({method:R.literal("initialize"),params:Tg.extend({protocolVersion:R.string(),capabilities:sRr,clientInfo:Mvt})});var cRr=R.object({experimental:R.optional(R.object({}).passthrough()),logging:R.optional(R.object({}).passthrough()),completions:R.optional(R.object({}).passthrough()),prompts:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough()),resources:R.optional(R.object({subscribe:R.optional(R.boolean()),listChanged:R.optional(R.boolean())}).passthrough()),tools:R.optional(R.object({listChanged:R.optional(R.boolean())}).passthrough())}).passthrough(),w5e=wg.extend({protocolVersion:R.string(),capabilities:cRr,serverInfo:Mvt,instructions:R.optional(R.string())}),Lvt=lv.extend({method:R.literal("notifications/initialized")}),Fvt=a(t=>Lvt.safeParse(t).success,"isInitializedNotification"),eue=n0.extend({method:R.literal("ping")}),lRr=R.object({progress:R.number(),total:R.optional(R.number()),message:R.optional(R.string())}).passthrough(),tue=lv.extend({method:R.literal("notifications/progress"),params:FH.merge(lRr).extend({progressToken:_vt})}),rue=n0.extend({params:Tg.extend({cursor:R.optional(Svt)}).optional()}),nue=wg.extend({nextCursor:R.optional(Svt)}),Ovt=R.object({uri:R.string(),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}).passthrough(),Qvt=Ovt.extend({text:R.string()}),_5e=R.string().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),Uvt=Ovt.extend({blob:_5e}),qvt=QH.extend({uri:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}),uRr=QH.extend({uriTemplate:R.string(),description:R.optional(R.string()),mimeType:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}),dRr=rue.extend({method:R.literal("resources/list")}),S5e=nue.extend({resources:R.array(qvt)}),fRr=rue.extend({method:R.literal("resources/templates/list")}),R5e=nue.extend({resourceTemplates:R.array(uRr)}),pRr=n0.extend({method:R.literal("resources/read"),params:Tg.extend({uri:R.string()})}),k5e=wg.extend({contents:R.array(R.union([Qvt,Uvt]))}),P5e=lv.extend({method:R.literal("notifications/resources/list_changed")}),mRr=n0.extend({method:R.literal("resources/subscribe"),params:Tg.extend({uri:R.string()})}),hRr=n0.extend({method:R.literal("resources/unsubscribe"),params:Tg.extend({uri:R.string()})}),D5e=lv.extend({method:R.literal("notifications/resources/updated"),params:FH.extend({uri:R.string()})}),gRr=R.object({name:R.string(),description:R.optional(R.string()),required:R.optional(R.boolean())}).passthrough(),ARr=QH.extend({description:R.optional(R.string()),arguments:R.optional(R.array(gRr)),_meta:R.optional(R.object({}).passthrough())}),yRr=rue.extend({method:R.literal("prompts/list")}),B5e=nue.extend({prompts:R.array(ARr)}),CRr=n0.extend({method:R.literal("prompts/get"),params:Tg.extend({name:R.string(),arguments:R.optional(R.record(R.string()))})}),N5e=R.object({type:R.literal("text"),text:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),M5e=R.object({type:R.literal("image"),data:_5e,mimeType:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),L5e=R.object({type:R.literal("audio"),data:_5e,mimeType:R.string(),_meta:R.optional(R.object({}).passthrough())}).passthrough(),vRr=R.object({type:R.literal("resource"),resource:R.union([Qvt,Uvt]),_meta:R.optional(R.object({}).passthrough())}).passthrough(),xRr=qvt.extend({type:R.literal("resource_link")}),Hvt=R.union([N5e,M5e,L5e,xRr,vRr]),ERr=R.object({role:R.enum(["user","assistant"]),content:Hvt}).passthrough(),F5e=wg.extend({description:R.optional(R.string()),messages:R.array(ERr)}),O5e=lv.extend({method:R.literal("notifications/prompts/list_changed")}),bRr=R.object({title:R.optional(R.string()),readOnlyHint:R.optional(R.boolean()),destructiveHint:R.optional(R.boolean()),idempotentHint:R.optional(R.boolean()),openWorldHint:R.optional(R.boolean())}).passthrough(),IRr=QH.extend({description:R.optional(R.string()),inputSchema:R.object({type:R.literal("object"),properties:R.optional(R.object({}).passthrough()),required:R.optional(R.array(R.string()))}).passthrough(),outputSchema:R.optional(R.object({type:R.literal("object"),properties:R.optional(R.object({}).passthrough()),required:R.optional(R.array(R.string()))}).passthrough()),annotations:R.optional(bRr),_meta:R.optional(R.object({}).passthrough())}),TRr=rue.extend({method:R.literal("tools/list")}),Q5e=nue.extend({tools:R.array(IRr)}),iL=wg.extend({content:R.array(Hvt).default([]),structuredContent:R.object({}).passthrough().optional(),isError:R.optional(R.boolean())}),mMo=iL.or(wg.extend({toolResult:R.unknown()})),wRr=n0.extend({method:R.literal("tools/call"),params:Tg.extend({name:R.string(),arguments:R.optional(R.record(R.unknown()))})}),U5e=lv.extend({method:R.literal("notifications/tools/list_changed")}),$vt=R.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),_Rr=n0.extend({method:R.literal("logging/setLevel"),params:Tg.extend({level:$vt})}),q5e=lv.extend({method:R.literal("notifications/message"),params:FH.extend({level:$vt,logger:R.optional(R.string()),data:R.unknown()})}),SRr=R.object({name:R.string().optional()}).passthrough(),RRr=R.object({hints:R.optional(R.array(SRr)),costPriority:R.optional(R.number().min(0).max(1)),speedPriority:R.optional(R.number().min(0).max(1)),intelligencePriority:R.optional(R.number().min(0).max(1))}).passthrough(),kRr=R.object({role:R.enum(["user","assistant"]),content:R.union([N5e,M5e,L5e])}).passthrough(),H5e=n0.extend({method:R.literal("sampling/createMessage"),params:Tg.extend({messages:R.array(kRr),systemPrompt:R.optional(R.string()),includeContext:R.optional(R.enum(["none","thisServer","allServers"])),temperature:R.optional(R.number()),maxTokens:R.number().int(),stopSequences:R.optional(R.array(R.string())),metadata:R.optional(R.object({}).passthrough()),modelPreferences:R.optional(RRr)})}),PRr=wg.extend({model:R.string(),stopReason:R.optional(R.enum(["endTurn","stopSequence","maxTokens"]).or(R.string())),role:R.enum(["user","assistant"]),content:R.discriminatedUnion("type",[N5e,M5e,L5e])}),DRr=R.object({type:R.literal("boolean"),title:R.optional(R.string()),description:R.optional(R.string()),default:R.optional(R.boolean())}).passthrough(),BRr=R.object({type:R.literal("string"),title:R.optional(R.string()),description:R.optional(R.string()),minLength:R.optional(R.number()),maxLength:R.optional(R.number()),format:R.optional(R.enum(["email","uri","date","date-time"]))}).passthrough(),NRr=R.object({type:R.enum(["number","integer"]),title:R.optional(R.string()),description:R.optional(R.string()),minimum:R.optional(R.number()),maximum:R.optional(R.number())}).passthrough(),MRr=R.object({type:R.literal("string"),title:R.optional(R.string()),description:R.optional(R.string()),enum:R.array(R.string()),enumNames:R.optional(R.array(R.string()))}).passthrough(),LRr=R.union([DRr,BRr,NRr,MRr]),FRr=n0.extend({method:R.literal("elicitation/create"),params:Tg.extend({message:R.string(),requestedSchema:R.object({type:R.literal("object"),properties:R.record(R.string(),LRr),required:R.optional(R.array(R.string()))}).passthrough()})}),ORr=wg.extend({action:R.enum(["accept","decline","cancel"]),content:R.optional(R.record(R.string(),R.unknown()))}),QRr=R.object({type:R.literal("ref/resource"),uri:R.string()}).passthrough();var URr=R.object({type:R.literal("ref/prompt"),name:R.string()}).passthrough(),qRr=n0.extend({method:R.literal("completion/complete"),params:Tg.extend({ref:R.union([URr,QRr]),argument:R.object({name:R.string(),value:R.string()}).passthrough(),context:R.optional(R.object({arguments:R.optional(R.record(R.string(),R.string()))}))})}),$5e=wg.extend({completion:R.object({values:R.array(R.string()).max(100),total:R.optional(R.number().int()),hasMore:R.optional(R.boolean())}).passthrough()}),HRr=R.object({uri:R.string().startsWith("file://"),name:R.optional(R.string()),_meta:R.optional(R.object({}).passthrough())}).passthrough(),W5e=n0.extend({method:R.literal("roots/list")}),$Rr=wg.extend({roots:R.array(HRr)}),WRr=lv.extend({method:R.literal("notifications/roots/list_changed")}),hMo=R.union([eue,aRr,qRr,_Rr,CRr,yRr,dRr,fRr,pRr,mRr,hRr,wRr,TRr]),gMo=R.union([Zle,tue,Lvt,WRr]),AMo=R.union([a5,PRr,ORr,$Rr]),yMo=R.union([eue,H5e,FRr,W5e]),CMo=R.union([Zle,tue,q5e,D5e,P5e,U5e,O5e]),vMo=R.union([a5,w5e,$5e,F5e,B5e,S5e,R5e,k5e,iL,Q5e]),Du=class extends Error{static{a(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var iue=class{constructor(){this.defaultTemperature=.7;this.ongoingMcpSamplingCalls=!1}static{a(this,"McpSamplingService")}async handleSamplingRequest(e,r,n,o,s,c){try{if(this.ongoingMcpSamplingCalls)throw new Du(-32603,"Another MCP sampling request is already in progress.");this.ongoingMcpSamplingCalls=!0;let l=sy();an.info(e.ctx,`MCP server ${o} requested sampling:`,n.params),await ys(e.ctx,{message:`Sampling request received from ${o}: ${JSON.stringify({messageCount:n.params.messages.length,systemPrompt:n.params.systemPrompt?"provided":"none",maxTokens:n.params.maxTokens,temperature:n.params.temperature})}`,server:o});let u=await e.ctx.get(jw).readMcpSamplingConfig({serverName:o});if(u.alwaysDeny)throw new Error("User has chosen to always deny MCP tools with this mcp server.");if(!u.alwaysAllow){let y=n.params.messages.filter(I=>I.role==="user"),v=y[y.length-1];if((await e.ctx.get(rg).invokeClientToolConfirmation(e,{name:o,title:`Allow MCP tools from "${o}" to make LLM requests?`,message:`The MCP server "${o}" has issued a request to make a language model call. Do you want to allow it to make requests during chat?`,input:v,conversationId:e.conversation.id,roundId:s??e.agentToolCalls.getRound(0).roundId,turnId:e.turn.id,toolCallId:c??e.agentToolCalls.getRound(0).toolCalls[0].id})).result==="dismiss")throw new va}let d=await this.getModelConfiguration(e.ctx,n,u),p=this.convertMCPMessagesToChatML(e.ctx,n.params.messages,n.params.systemPrompt),m=(await WR(e.ctx,l,sy())).extendedBy({messageSource:"mcp.sampling"}),g=new An.CancellationTokenSource().token,A=await r.fetchResponse({modelConfiguration:d,messages:p,uiKind:"conversationPanel",llmInteraction:Kd.user("conversation-panel",l),temperature:n.params.temperature??this.defaultTemperature,stop:n.params.stopSequences},g,m);return this.processFetchResult(A,d.uiName)}catch(l){let u=`Failed to process sampling request: ${l instanceof Error?l.message:String(l)}`;throw an.error(e.ctx,u,l),await yd(e.ctx,{message:u,server:o}),new Du(-32603,u)}finally{this.ongoingMcpSamplingCalls=!1}}convertMCPMessagesToChatML(e,r,n){let o=[];n&&o.push({role:"system",content:n});for(let s of r){let c;if(s.content.type==="text")c=s.content.text;else if(s.content.type==="image")c=[{type:"image_url",image_url:{url:atob(s.content.data)}}];else throw an.warn(e,`Unknown MCP content type: ${s.content.type}, defaulting to empty array`),new Error(`Unknown MCP content type: ${s.content.type}`);let l;switch(s.role){case"user":l="user";break;case"assistant":l="assistant";break;default:l="user",an.warn(e,`Unknown MCP role: ${s.role}, defaulting to user`)}o.push({role:l,content:c})}return o}processFetchResult(e,r){if(e.type!=="success"){let n=`Unexpected fetch result type: ${e.type}.`;throw"reason"in e&&(n+=` Reason: ${e.reason}`),new Error(n)}return{model:r,role:"assistant",content:{type:"text",text:e.value}}}async getModelConfiguration(e,r,n){let o=await this.getAvailableBYOKModels(e),s=[...await this.getAvailableModels(e),...o.map(d=>d.name)];if(!s)throw new Error("No available models found");let c=n.allowedModels&&n.allowedModels.length>0?s.filter(d=>n.allowedModels.some(p=>p.toLowerCase()===d.toLowerCase())):s;if(!c||c.length===0)throw new Error("No available models found");let l;r.params.modelPreferences?.hints&&(l=this.mapFindFirst(r.params.modelPreferences.hints,d=>c.find(p=>p.toLowerCase().includes(d.name.toLowerCase())))),l=l??c[0];let u=o.find(d=>d.name===l);return u?w1(e,u.provider,l):await e.get(ya).getBestChatModelConfig([l])}async getAvailableModels(e){return(await e.get(rd).getMetadata()).filter(n=>n.capabilities.type&&!iY.has(n.capabilities.family)&&n.capabilities.supports?.tool_calls&&(n.capabilities.limits?.max_prompt_tokens??!1)).map(n=>n.capabilities.family)}async getAvailableBYOKModels(e){return(await new ha(e.get(mi)).getAllModels()).filter(n=>n.capabilities?.toolCalling)}mapFindFirst(e,r){for(let n of e){let o=r(n);if(o!==void 0)return o}}};f();var j5e=/[^a-z0-9_-]/gi;var GRr=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Wvt(){let t={};for(let e of GRr){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}a(Wvt,"getDefaultEnvironment");async function jvt(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;an.warn(t,n),await $P(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(j5e.lastIndex=0,j5e.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;an.warn(t,n),await $P(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(j5e,"_")}else e._nameForModel=e.name;return e}a(jvt,"normalizeTool");var oue=class{constructor(){this.seenPrefixes=new Set}static{a(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let o=2;this.seenPrefixes.has(n);o++)n=r+o;return this.seenPrefixes.add(n),n}};f();f();var VRr=6e4,sue=class{static{a(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(Zle,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(tue,r=>{this._onprogress(r)}),this.setRequestHandler(eue,r=>({}))}_setupTimeout(e,r,n,o,s=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(o,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:s,onTimeout:o})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Du(Ig.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,n,o;this._transport=e;let s=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{s?.(),this._onclose()};let c=(n=this.transport)===null||n===void 0?void 0:n.onerror;this._transport.onerror=u=>{c?.(u),this._onerror(u)};let l=(o=this._transport)===null||o===void 0?void 0:o.onmessage;this._transport.onmessage=(u,d)=>{l?.(u,d),OH(u)||Nvt(u)?this._onresponse(u):Xle(u)?this._onrequest(u,d):Pvt(u)?this._onnotification(u):this._onerror(new Error(`Unknown message type: ${JSON.stringify(u)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new Du(Ig.ConnectionClosed,"Connection closed");for(let o of r.values())o(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(o=>this._onerror(new Error(`Uncaught error in notification handler: ${o}`)))}_onrequest(e,r){var n,o,s,c;let l=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(l===void 0){(o=this._transport)===null||o===void 0||o.send({jsonrpc:"2.0",id:e.id,error:{code:Ig.MethodNotFound,message:"Method not found"}}).catch(p=>this._onerror(new Error(`Failed to send an error response: ${p}`)));return}let u=new AbortController;this._requestHandlerAbortControllers.set(e.id,u);let d={signal:u.signal,sessionId:(s=this._transport)===null||s===void 0?void 0:s.sessionId,_meta:(c=e.params)===null||c===void 0?void 0:c._meta,sendNotification:a(p=>this.notification(p,{relatedRequestId:e.id}),"sendNotification"),sendRequest:a((p,m,h)=>this.request(p,m,{...h,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>l(e,d)).then(p=>{var m;if(!u.signal.aborted)return(m=this._transport)===null||m===void 0?void 0:m.send({result:p,jsonrpc:"2.0",id:e.id})},p=>{var m,h;if(!u.signal.aborted)return(m=this._transport)===null||m===void 0?void 0:m.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(p.code)?p.code:Ig.InternalError,message:(h=p.message)!==null&&h!==void 0?h:"Internal error"}})}).catch(p=>this._onerror(new Error(`Failed to send response: ${p}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,o=Number(r),s=this._progressHandlers.get(o);if(!s){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let c=this._responseHandlers.get(o),l=this._timeoutInfo.get(o);if(l&&c&&l.resetTimeoutOnProgress)try{this._resetTimeout(o)}catch(u){c(u);return}s(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),OH(e))n(e);else{let o=new Du(e.error.code,e.error.message,e.error.data);n(o)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:o,resumptionToken:s,onresumptiontoken:c}=n??{};return new Promise((l,u)=>{var d,p,m,h,g,A;if(!this._transport){u(new Error("Not connected"));return}((d=this._options)===null||d===void 0?void 0:d.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(p=n?.signal)===null||p===void 0||p.throwIfAborted();let y=this._requestMessageId++,v={...e,jsonrpc:"2.0",id:y};n?.onprogress&&(this._progressHandlers.set(y,n.onprogress),v.params={...e.params,_meta:{...((m=e.params)===null||m===void 0?void 0:m._meta)||{},progressToken:y}});let b=a(k=>{var N;this._responseHandlers.delete(y),this._progressHandlers.delete(y),this._cleanupTimeout(y),(N=this._transport)===null||N===void 0||N.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:y,reason:String(k)}},{relatedRequestId:o,resumptionToken:s,onresumptiontoken:c}).catch(F=>this._onerror(new Error(`Failed to send cancellation: ${F}`))),u(k)},"cancel");this._responseHandlers.set(y,k=>{var N;if(!(!((N=n?.signal)===null||N===void 0)&&N.aborted)){if(k instanceof Error)return u(k);try{let F=r.parse(k.result);l(F)}catch(F){u(F)}}}),(h=n?.signal)===null||h===void 0||h.addEventListener("abort",()=>{var k;b((k=n?.signal)===null||k===void 0?void 0:k.reason)});let I=(g=n?.timeout)!==null&&g!==void 0?g:VRr,S=a(()=>b(new Du(Ig.RequestTimeout,"Request timed out",{timeout:I})),"timeoutHandler");this._setupTimeout(y,I,n?.maxTotalTimeout,S,(A=n?.resetTimeoutOnProgress)!==null&&A!==void 0?A:!1),this._transport.send(v,{relatedRequestId:o,resumptionToken:s,onresumptiontoken:c}).catch(k=>{this._cleanupTimeout(y),u(k)})})}async notification(e,r){var n,o;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((o=(n=this._options)===null||n===void 0?void 0:n.debouncedNotificationMethods)!==null&&o!==void 0?o:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var u;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let d={...e,jsonrpc:"2.0"};(u=this._transport)===null||u===void 0||u.send(d,r).catch(p=>this._onerror(p))});return}let l={...e,jsonrpc:"2.0"};await this._transport.send(l,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(o,s)=>Promise.resolve(r(e.parse(o),s)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function Gvt(t,e){return Object.entries(e).reduce((r,[n,o])=>(o&&typeof o=="object"?r[n]=r[n]?{...r[n],...o}:o:r[n]=o,r),{...t})}a(Gvt,"mergeCapabilities");var zEt=Ne(VEt(),1);var Tue=class extends sue{static{a(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{},this._ajv=new zEt.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Gvt(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:nL,capabilities:this._capabilities,clientInfo:this._clientInfo}},w5e,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!wvt.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,o,s,c;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((s=this._serverCapabilities)===null||s===void 0)&&s.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((c=this._serverCapabilities)===null||c===void 0)&&c.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},a5,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},$5e,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},a5,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},F5e,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},B5e,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},S5e,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},R5e,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},k5e,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},a5,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},a5,r)}async callTool(e,r=iL,n){let o=await this.request({method:"tools/call",params:e},r,n),s=this.getToolOutputValidator(e.name);if(s){if(!o.structuredContent&&!o.isError)throw new Du(Ig.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(o.structuredContent)try{if(!s(o.structuredContent))throw new Du(Ig.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(s.errors)}`)}catch(c){throw c instanceof Du?c:new Du(Ig.InvalidParams,`Failed to validate structured content: ${c instanceof Error?c.message:String(c)}`)}}return o}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let r of e)if(r.outputSchema)try{let n=this._ajv.compile(r.outputSchema);this._cachedToolOutputValidators.set(r.name,n)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,r){let n=await this.request({method:"tools/list",params:e},Q5e,r);return this.cacheToolOutputSchemas(n.tools),n}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var KEt=Ne(require("events"));var W_=class{constructor(e,r,n){this.transport=null;this.emitter=new KEt.default;this.ongoingMcpToolCalls=[];this.isSamplingEnabled=!1;this.ctx=e,this.isSamplingEnabled=Bi(e,qt.IsSamplingEnabled)??!1,this.isSamplingEnabled&&(this.samplingService=new iue),this.mcp=new Tue({name:r,version:n},{capabilities:{roots:{listChanged:!0},...this.isSamplingEnabled?{sampling:{}}:{}}}),this.name=r}static{a(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw an.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw an.error(this.ctx,"Connection failed:",r),await yd(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async handleMCPOperationError(e,r,n,o){try{return await e()}catch(s){let c=s;if(c.code===-32601)return an.info(this.ctx,`${r} not supported by server ${this.name}:`,c.message),o??n;let l=`Failed to ${r} from server ${this.name}: ${c.message||String(c)}`;return an.error(this.ctx,l),await yd(this.ctx,{message:l,server:this.name}),n}}async getPromptsList(){return this.transport?await this.handleMCPOperationError(async()=>(await this.mcp.listPrompts()).prompts,"get prompts",[]):[]}async getResources(){return this.transport?await this.handleMCPOperationError(async()=>{let r=(await this.mcp.listResources()).resources,n=`Discovered ${r.length} resources`;return ys(this.ctx,{message:n,server:this.name}),r},"get resources",[]):[]}async getResourceTemplates(){return this.transport?await this.handleMCPOperationError(async()=>{let r=(await this.mcp.listResourceTemplates()).resourceTemplates,n=`Discovered ${r.length} resource templates`;return ys(this.ctx,{message:n,server:this.name}),r},"get resource templates",[]):[]}async readResource(e){return this.transport?await this.handleMCPOperationError(async()=>await this.mcp.readResource({uri:e}),`read resource ${e}`,null,{contents:[]}):null}async subscribeResource(e){this.transport&&await this.handleMCPOperationError(async()=>{await this.mcp.subscribeResource({uri:e})},`subscribe resource ${e}`,void 0)}async unsubscribeResource(e){this.transport&&await this.handleMCPOperationError(async()=>{await this.mcp.unsubscribeResource({uri:e})},`unsubscribe resource ${e}`,void 0)}async getToolsList(){return this.transport?await this.handleMCPOperationError(async()=>{let e=await this.mcp.listTools(),r=await Promise.all(e.tools.map(async o=>{let s={name:o.name,description:o.description,inputSchema:{...o.inputSchema||{},properties:o.inputSchema?.properties||{},type:o.inputSchema?.type||"object"},_status:"enabled",_nameForModel:o.name,annotations:o.annotations};return await jvt(this.ctx,s,this.name),s})),n=`Discovered ${e.tools.length} tools`;return ys(this.ctx,{message:n,server:this.name}),r},"list tools",[]):[]}async callTool(e,r,n,o,s,c){let l=new yo([],"error"),u=sy();this.ongoingMcpToolCalls.push({requestId:u,toolName:e,turnContext:o,roundId:s,toolCallId:c});let d=await this.handleMCPOperationError(async()=>{let p=new AbortController;n.onCancellationRequested(()=>{p.abort()});let m=await this.mcp.callTool({name:e,arguments:r,_meta:{progressToken:u}},iL,{onprogress:a(h=>{an.info(this.ctx,`${e} calling progress`,h),ys(this.ctx,{message:`${e} calling progress:`+JSON.stringify(h),server:this.name})},"onprogress"),resetTimeoutOnProgress:!0,signal:p.signal});if(m&&typeof m=="object"){if(m.content)return this.formatToolResult(m);{let h=`Error calling tool ${e}: `+JSON.stringify(m);return an.error(this.ctx,h),await yd(this.ctx,{message:h,server:this.name,tool:e}),l.content.push(new ji(h)),l}}else{let h=`Error calling tool ${e}: `+JSON.stringify(m);return an.error(this.ctx,h),await yd(this.ctx,{message:h,server:this.name,tool:e}),l.content.push(new ji(h)),l}},`call tool ${e}`,l);return this.ongoingMcpToolCalls=this.ongoingMcpToolCalls.filter(p=>p.requestId!==u),d}async getPrompt(e,r){return(await this.mcp.getPrompt({name:e,arguments:r})).messages}async completePrompt(e,r,n,o){return(await this.mcp.complete({ref:{type:"ref/prompt",name:e},argument:{name:r,value:n},context:{arguments:o}})).completion.values}addListeners(){this.mcp.onclose=()=>{an.info(this.ctx,`MCP server ${this.name} connection closed.`),ys(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{an.error(this.ctx,`MCP server ${this.name} error:`,e),yd(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(q5e,e=>new PH(this.ctx,this.name).handle(e)),this.mcp.setNotificationHandler(U5e,e=>new LH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setNotificationHandler(O5e,e=>new DH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setNotificationHandler(P5e,e=>new BH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setNotificationHandler(D5e,e=>new NH(this.ctx,this.name,this.emitter).handle(e)),this.mcp.setRequestHandler(W5e,e=>(this.initRootsTracker(),new MH(this.ctx,this.name).handle(e))),this.isSamplingEnabled&&this.mcp.setRequestHandler(H5e,async(e,r)=>{if(!this.samplingService){let o="Sampling is not enabled.";throw an.error(this.ctx,o),new Du(-32603,o)}if(this.ongoingMcpToolCalls.length===0){let o="No ongoing tool call context found for sampling request.";throw an.error(this.ctx,o),new Du(-32603,o)}let n=this.ongoingMcpToolCalls[this.ongoingMcpToolCalls.length-1];return await this.samplingService.handleSamplingRequest(n.turnContext,new Bs(this.ctx),e,this.name,n.roundId,n.toolCallId)})}formatToolResult(e){let r=new yo([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new ji(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new lP({mimeType:n.mimeType,data:n.data}));return r}initRootsTracker(){let e=this.ctx.get(fr);this.rootsTracker=e.onDidChangeWorkspaceFolders(r=>{this.mcp.sendRootsListChanged().then(()=>{this.rootsTracker?.dispose()})})}getEmitter(){return this.emitter}async cleanup(){this.transport&&(await this.mcp.close(),this.rootsTracker?.dispose())}};f();function wPr(t){return a(async(r,n)=>{let o=r instanceof URL?r.toString():r,s;if(n?.headers)if(n.headers instanceof Headers){s={};for(let[p,m]of n.headers.entries())s[p]=m}else if(Array.isArray(n.headers)){s={};for(let[p,m]of n.headers)s[p]=m}else s=n.headers;let c={method:n?.method||"GET",headers:s,body:n?.body,signal:n?.signal||void 0},l=await t.fetch(o,c),u=l.body(),d=null;if(u)d=new ReadableStream({start(p){let m=a(y=>{p.enqueue(new Uint8Array(y))},"onData"),h=a(()=>{p.close(),A()},"onEnd"),g=a(y=>{p.error(y),A()},"onError"),A=a(()=>{u.off("data",m),u.off("end",h),u.off("error",g)},"cleanup");u.on("data",m),u.on("end",h),u.on("error",g)},cancel(){u&&"destroy"in u&&typeof u.destroy=="function"&&u.destroy()}});else{let p=await l.text();d=new ReadableStream({start(m){m.enqueue(new TextEncoder().encode(p)),m.close()}})}return new globalThis.Response(d,{status:l.status,statusText:l.statusText,headers:new Headers(l.headers)})},"fetchLike")}a(wPr,"createFetchAdapter");function wue(t,e){let r=t.get(Qr),n=wPr(r);return{...e,fetch:n}}a(wue,"createConfigWithFetch");f();f();f();var _ue=class extends Error{static{a(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function g4e(t){}a(g4e,"noop");function Sue(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=g4e,onError:r=g4e,onRetry:n=g4e,onComment:o}=t,s="",c=!0,l,u="",d="";function p(y){let v=c?y.replace(/^\xEF\xBB\xBF/,""):y,[b,I]=_Pr(`${s}${v}`);for(let S of b)m(S);s=I,c=!1}a(p,"feed");function m(y){if(y===""){g();return}if(y.startsWith(":")){o&&o(y.slice(y.startsWith(": ")?2:1));return}let v=y.indexOf(":");if(v!==-1){let b=y.slice(0,v),I=y[v+1]===" "?2:1,S=y.slice(v+I);h(b,S,y);return}h(y,"",y)}a(m,"parseLine");function h(y,v,b){switch(y){case"event":d=v;break;case"data":u=`${u}${v}
`;break;case"id":l=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?n(parseInt(v,10)):r(new _ue(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:b}));break;default:r(new _ue(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:v,line:b}));break}}a(h,"processField");function g(){u.length>0&&e({id:l,event:d||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),l=void 0,u="",d=""}a(g,"dispatchEvent");function A(y={}){s&&y.consume&&m(s),c=!0,l=void 0,u="",d="",s=""}return a(A,"reset"),{feed:p,reset:A}}a(Sue,"createParser");function _Pr(t){let e=[],r="",n=0;for(;n<t.length;){let o=t.indexOf("\r",n),s=t.indexOf(`
`,n),c=-1;if(o!==-1&&s!==-1?c=Math.min(o,s):o!==-1?c=o:s!==-1&&(c=s),c===-1){r=t.slice(n);break}else{let l=t.slice(n,c);e.push(l),n=c+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}a(_Pr,"splitLines");var kue=class extends Event{static{a(this,"ErrorEvent")}constructor(e,r){var n,o;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(o=r?.message)!=null?o:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(YEt(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(YEt(this),r)}};function SPr(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}a(SPr,"syntaxError");function A4e(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(A4e).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${A4e(t.cause)}`:t.message:`${t}`}a(A4e,"flattenError");function YEt(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}a(YEt,"inspectableError");var XEt=a(t=>{throw TypeError(t)},"__typeError"),T4e=a((t,e,r)=>e.has(t)||XEt("Cannot "+r),"__accessCheck"),no=a((t,e,r)=>(T4e(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Gl=a((t,e,r)=>e.has(t)?XEt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Ha=a((t,e,r,n)=>(T4e(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),YE=a((t,e,r)=>(T4e(t,e,"access private method"),r),"__privateMethod"),i0,u5,oL,Rue,Pue,$H,cL,WH,j_,sL,lL,aL,qH,Py,y4e,C4e,v4e,JEt,x4e,E4e,HH,b4e,I4e,d5=class extends EventTarget{static{a(this,"EventSource")}constructor(e,r){var n,o;super(),Gl(this,Py),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,Gl(this,i0),Gl(this,u5),Gl(this,oL),Gl(this,Rue),Gl(this,Pue),Gl(this,$H),Gl(this,cL),Gl(this,WH,null),Gl(this,j_),Gl(this,sL),Gl(this,lL,null),Gl(this,aL,null),Gl(this,qH,null),Gl(this,C4e,async s=>{var c;no(this,sL).reset();let{body:l,redirected:u,status:d,headers:p}=s;if(d===204){YE(this,Py,HH).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(u?Ha(this,oL,new URL(s.url)):Ha(this,oL,void 0),d!==200){YE(this,Py,HH).call(this,`Non-200 status code (${d})`,d);return}if(!(p.get("content-type")||"").startsWith("text/event-stream")){YE(this,Py,HH).call(this,'Invalid content type, expected "text/event-stream"',d);return}if(no(this,i0)===this.CLOSED)return;Ha(this,i0,this.OPEN);let m=new Event("open");if((c=no(this,qH))==null||c.call(this,m),this.dispatchEvent(m),typeof l!="object"||!l||!("getReader"in l)){YE(this,Py,HH).call(this,"Invalid response body, expected a web ReadableStream",d),this.close();return}let h=new TextDecoder,g=l.getReader(),A=!0;do{let{done:y,value:v}=await g.read();v&&no(this,sL).feed(h.decode(v,{stream:!y})),y&&(A=!1,no(this,sL).reset(),YE(this,Py,b4e).call(this))}while(A)}),Gl(this,v4e,s=>{Ha(this,j_,void 0),!(s.name==="AbortError"||s.type==="aborted")&&YE(this,Py,b4e).call(this,A4e(s))}),Gl(this,x4e,s=>{typeof s.id=="string"&&Ha(this,WH,s.id);let c=new MessageEvent(s.event||"message",{data:s.data,origin:no(this,oL)?no(this,oL).origin:no(this,u5).origin,lastEventId:s.id||""});no(this,aL)&&(!s.event||s.event==="message")&&no(this,aL).call(this,c),this.dispatchEvent(c)}),Gl(this,E4e,s=>{Ha(this,$H,s)}),Gl(this,I4e,()=>{Ha(this,cL,void 0),no(this,i0)===this.CONNECTING&&YE(this,Py,y4e).call(this)});try{if(e instanceof URL)Ha(this,u5,e);else if(typeof e=="string")Ha(this,u5,new URL(e,RPr()));else throw new Error("Invalid URL")}catch{throw SPr("An invalid or illegal string was specified")}Ha(this,sL,Sue({onEvent:no(this,x4e),onRetry:no(this,E4e)})),Ha(this,i0,this.CONNECTING),Ha(this,$H,3e3),Ha(this,Pue,(n=r?.fetch)!=null?n:globalThis.fetch),Ha(this,Rue,(o=r?.withCredentials)!=null?o:!1),YE(this,Py,y4e).call(this)}get readyState(){return no(this,i0)}get url(){return no(this,u5).href}get withCredentials(){return no(this,Rue)}get onerror(){return no(this,lL)}set onerror(e){Ha(this,lL,e)}get onmessage(){return no(this,aL)}set onmessage(e){Ha(this,aL,e)}get onopen(){return no(this,qH)}set onopen(e){Ha(this,qH,e)}addEventListener(e,r,n){let o=r;super.addEventListener(e,o,n)}removeEventListener(e,r,n){let o=r;super.removeEventListener(e,o,n)}close(){no(this,cL)&&clearTimeout(no(this,cL)),no(this,i0)!==this.CLOSED&&(no(this,j_)&&no(this,j_).abort(),Ha(this,i0,this.CLOSED),Ha(this,j_,void 0))}};i0=new WeakMap,u5=new WeakMap,oL=new WeakMap,Rue=new WeakMap,Pue=new WeakMap,$H=new WeakMap,cL=new WeakMap,WH=new WeakMap,j_=new WeakMap,sL=new WeakMap,lL=new WeakMap,aL=new WeakMap,qH=new WeakMap,Py=new WeakSet,y4e=a(function(){Ha(this,i0,this.CONNECTING),Ha(this,j_,new AbortController),no(this,Pue)(no(this,u5),YE(this,Py,JEt).call(this)).then(no(this,C4e)).catch(no(this,v4e))},"connect_fn"),C4e=new WeakMap,v4e=new WeakMap,JEt=a(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...no(this,WH)?{"Last-Event-ID":no(this,WH)}:void 0},cache:"no-store",signal:(t=no(this,j_))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),x4e=new WeakMap,E4e=new WeakMap,HH=a(function(t,e){var r;no(this,i0)!==this.CLOSED&&Ha(this,i0,this.CLOSED);let n=new kue("error",{code:e,message:t});(r=no(this,lL))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),b4e=a(function(t,e){var r;if(no(this,i0)===this.CLOSED)return;Ha(this,i0,this.CONNECTING);let n=new kue("error",{code:e,message:t});(r=no(this,lL))==null||r.call(this,n),this.dispatchEvent(n),Ha(this,cL,setTimeout(no(this,I4e),no(this,$H)))},"scheduleReconnect_fn"),I4e=new WeakMap,d5.CONNECTING=0,d5.OPEN=1,d5.CLOSED=2;function RPr(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}a(RPr,"getBaseURL");f();f();var w4e;w4e=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function kPr(t){return(await w4e).getRandomValues(new Uint8Array(t))}a(kPr,"getRandomValues");async function PPr(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await kPr(t);for(let o=0;o<t;o++){let s=n[o]%e.length;r+=e[s]}return r}a(PPr,"random");async function DPr(t){return await PPr(t)}a(DPr,"generateVerifier");async function BPr(t){let e=await(await w4e).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}a(BPr,"generateChallenge");async function _4e(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await DPr(t),r=await BPr(e);return{code_verifier:e,code_challenge:r}}a(_4e,"pkceChallenge");f();var ZEt=R.object({resource:R.string().url(),authorization_servers:R.array(R.string().url()).optional(),jwks_uri:R.string().url().optional(),scopes_supported:R.array(R.string()).optional(),bearer_methods_supported:R.array(R.string()).optional(),resource_signing_alg_values_supported:R.array(R.string()).optional(),resource_name:R.string().optional(),resource_documentation:R.string().optional(),resource_policy_uri:R.string().url().optional(),resource_tos_uri:R.string().url().optional(),tls_client_certificate_bound_access_tokens:R.boolean().optional(),authorization_details_types_supported:R.array(R.string()).optional(),dpop_signing_alg_values_supported:R.array(R.string()).optional(),dpop_bound_access_tokens_required:R.boolean().optional()}).passthrough(),S4e=R.object({issuer:R.string(),authorization_endpoint:R.string(),token_endpoint:R.string(),registration_endpoint:R.string().optional(),scopes_supported:R.array(R.string()).optional(),response_types_supported:R.array(R.string()),response_modes_supported:R.array(R.string()).optional(),grant_types_supported:R.array(R.string()).optional(),token_endpoint_auth_methods_supported:R.array(R.string()).optional(),token_endpoint_auth_signing_alg_values_supported:R.array(R.string()).optional(),service_documentation:R.string().optional(),revocation_endpoint:R.string().optional(),revocation_endpoint_auth_methods_supported:R.array(R.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:R.array(R.string()).optional(),introspection_endpoint:R.string().optional(),introspection_endpoint_auth_methods_supported:R.array(R.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:R.array(R.string()).optional(),code_challenge_methods_supported:R.array(R.string()).optional()}).passthrough(),NPr=R.object({issuer:R.string(),authorization_endpoint:R.string(),token_endpoint:R.string(),userinfo_endpoint:R.string().optional(),jwks_uri:R.string(),registration_endpoint:R.string().optional(),scopes_supported:R.array(R.string()).optional(),response_types_supported:R.array(R.string()),response_modes_supported:R.array(R.string()).optional(),grant_types_supported:R.array(R.string()).optional(),acr_values_supported:R.array(R.string()).optional(),subject_types_supported:R.array(R.string()),id_token_signing_alg_values_supported:R.array(R.string()),id_token_encryption_alg_values_supported:R.array(R.string()).optional(),id_token_encryption_enc_values_supported:R.array(R.string()).optional(),userinfo_signing_alg_values_supported:R.array(R.string()).optional(),userinfo_encryption_alg_values_supported:R.array(R.string()).optional(),userinfo_encryption_enc_values_supported:R.array(R.string()).optional(),request_object_signing_alg_values_supported:R.array(R.string()).optional(),request_object_encryption_alg_values_supported:R.array(R.string()).optional(),request_object_encryption_enc_values_supported:R.array(R.string()).optional(),token_endpoint_auth_methods_supported:R.array(R.string()).optional(),token_endpoint_auth_signing_alg_values_supported:R.array(R.string()).optional(),display_values_supported:R.array(R.string()).optional(),claim_types_supported:R.array(R.string()).optional(),claims_supported:R.array(R.string()).optional(),service_documentation:R.string().optional(),claims_locales_supported:R.array(R.string()).optional(),ui_locales_supported:R.array(R.string()).optional(),claims_parameter_supported:R.boolean().optional(),request_parameter_supported:R.boolean().optional(),request_uri_parameter_supported:R.boolean().optional(),require_request_uri_registration:R.boolean().optional(),op_policy_uri:R.string().optional(),op_tos_uri:R.string().optional()}).passthrough(),ebt=NPr.merge(S4e.pick({code_challenge_methods_supported:!0})),R4e=R.object({access_token:R.string(),id_token:R.string().optional(),token_type:R.string(),expires_in:R.number().optional(),scope:R.string().optional(),refresh_token:R.string().optional()}).strip(),tbt=R.object({error:R.string(),error_description:R.string().optional(),error_uri:R.string().optional()}),MPr=R.object({redirect_uris:R.array(R.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:R.string().optional(),grant_types:R.array(R.string()).optional(),response_types:R.array(R.string()).optional(),client_name:R.string().optional(),client_uri:R.string().optional(),logo_uri:R.string().optional(),scope:R.string().optional(),contacts:R.array(R.string()).optional(),tos_uri:R.string().optional(),policy_uri:R.string().optional(),jwks_uri:R.string().optional(),jwks:R.any().optional(),software_id:R.string().optional(),software_version:R.string().optional(),software_statement:R.string().optional()}).strip(),LPr=R.object({client_id:R.string(),client_secret:R.string().optional(),client_id_issued_at:R.number().optional(),client_secret_expires_at:R.number().optional()}).strip(),rbt=MPr.merge(LPr),h9o=R.object({error:R.string(),error_description:R.string().optional()}).strip(),g9o=R.object({token:R.string(),token_type_hint:R.string().optional()}).strip();f();function nbt(t){let e=typeof t=="string"?new URL(t):new URL(t.href);return e.hash="",e}a(nbt,"resourceUrlFromServerUrl");function ibt({requestedResource:t,configuredResource:e}){let r=typeof t=="string"?new URL(t):new URL(t.href),n=typeof e=="string"?new URL(e):new URL(e.href);if(r.origin!==n.origin||r.pathname.length<n.pathname.length)return!1;let o=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",s=n.pathname.endsWith("/")?n.pathname:n.pathname+"/";return o.startsWith(s)}a(ibt,"checkResourceAllowed");f();var wl=class extends Error{static{a(this,"OAuthError")}constructor(e,r){super(e),this.errorUri=r,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}},jH=class extends wl{static{a(this,"InvalidRequestError")}};jH.errorCode="invalid_request";var f5=class extends wl{static{a(this,"InvalidClientError")}};f5.errorCode="invalid_client";var p5=class extends wl{static{a(this,"InvalidGrantError")}};p5.errorCode="invalid_grant";var m5=class extends wl{static{a(this,"UnauthorizedClientError")}};m5.errorCode="unauthorized_client";var GH=class extends wl{static{a(this,"UnsupportedGrantTypeError")}};GH.errorCode="unsupported_grant_type";var VH=class extends wl{static{a(this,"InvalidScopeError")}};VH.errorCode="invalid_scope";var zH=class extends wl{static{a(this,"AccessDeniedError")}};zH.errorCode="access_denied";var JE=class extends wl{static{a(this,"ServerError")}};JE.errorCode="server_error";var KH=class extends wl{static{a(this,"TemporarilyUnavailableError")}};KH.errorCode="temporarily_unavailable";var YH=class extends wl{static{a(this,"UnsupportedResponseTypeError")}};YH.errorCode="unsupported_response_type";var JH=class extends wl{static{a(this,"UnsupportedTokenTypeError")}};JH.errorCode="unsupported_token_type";var XH=class extends wl{static{a(this,"InvalidTokenError")}};XH.errorCode="invalid_token";var ZH=class extends wl{static{a(this,"MethodNotAllowedError")}};ZH.errorCode="method_not_allowed";var e$=class extends wl{static{a(this,"TooManyRequestsError")}};e$.errorCode="too_many_requests";var t$=class extends wl{static{a(this,"InvalidClientMetadataError")}};t$.errorCode="invalid_client_metadata";var r$=class extends wl{static{a(this,"InsufficientScopeError")}};r$.errorCode="insufficient_scope";var obt={[jH.errorCode]:jH,[f5.errorCode]:f5,[p5.errorCode]:p5,[m5.errorCode]:m5,[GH.errorCode]:GH,[VH.errorCode]:VH,[zH.errorCode]:zH,[JE.errorCode]:JE,[KH.errorCode]:KH,[YH.errorCode]:YH,[JH.errorCode]:JH,[XH.errorCode]:XH,[ZH.errorCode]:ZH,[e$.errorCode]:e$,[t$.errorCode]:t$,[r$.errorCode]:r$};var o0=class extends Error{static{a(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};function abt(t,e){let r=t.client_secret!==void 0;return e.length===0?r?"client_secret_post":"none":r&&e.includes("client_secret_basic")?"client_secret_basic":r&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":r?"client_secret_post":"none"}a(abt,"selectClientAuthMethod");function cbt(t,e,r,n){let{client_id:o,client_secret:s}=e;switch(t){case"client_secret_basic":FPr(o,s,r);return;case"client_secret_post":OPr(o,s,n);return;case"none":QPr(o,n);return;default:throw new Error(`Unsupported client authentication method: ${t}`)}}a(cbt,"applyClientAuthentication");function FPr(t,e,r){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");let n=btoa(`${t}:${e}`);r.set("Authorization",`Basic ${n}`)}a(FPr,"applyBasicAuth");function OPr(t,e,r){r.set("client_id",t),e&&r.set("client_secret",e)}a(OPr,"applyPostAuth");function QPr(t,e){e.set("client_id",t)}a(QPr,"applyPublicAuth");async function P4e(t){let e=t instanceof Response?t.status:void 0,r=t instanceof Response?await t.text():t;try{let n=tbt.parse(JSON.parse(r)),{error:o,error_description:s,error_uri:c}=n,l=obt[o]||JE;return new l(s||"",c)}catch(n){let o=`${e?`HTTP ${e}: `:""}Invalid OAuth error response: ${n}. Raw body: ${r}`;return new JE(o)}}a(P4e,"parseErrorResponse");async function G_(t,e){var r,n;try{return await k4e(t,e)}catch(o){if(o instanceof f5||o instanceof m5)return await((r=t.invalidateCredentials)===null||r===void 0?void 0:r.call(t,"all")),await k4e(t,e);if(o instanceof p5)return await((n=t.invalidateCredentials)===null||n===void 0?void 0:n.call(t,"tokens")),await k4e(t,e);throw o}}a(G_,"auth");async function k4e(t,{serverUrl:e,authorizationCode:r,scope:n,resourceMetadataUrl:o,fetchFn:s}){let c,l;try{c=await qPr(e,{resourceMetadataUrl:o},s),c.authorization_servers&&c.authorization_servers.length>0&&(l=c.authorization_servers[0])}catch{}l||(l=e);let u=await UPr(e,t,c),d=await GPr(l,{fetchFn:s}),p=await Promise.resolve(t.clientInformation());if(!p){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let y=await YPr(l,{metadata:d,clientMetadata:t.clientMetadata});await t.saveClientInformation(y),p=y}if(r!==void 0){let y=await t.codeVerifier(),v=await zPr(l,{metadata:d,clientInformation:p,authorizationCode:r,codeVerifier:y,redirectUri:t.redirectUrl,resource:u,addClientAuthentication:t.addClientAuthentication,fetchFn:s});return await t.saveTokens(v),"AUTHORIZED"}let m=await t.tokens();if(m?.refresh_token)try{let y=await KPr(l,{metadata:d,clientInformation:p,refreshToken:m.refresh_token,resource:u,addClientAuthentication:t.addClientAuthentication});return await t.saveTokens(y),"AUTHORIZED"}catch(y){if(!(!(y instanceof wl)||y instanceof JE))throw y}let h=t.state?await t.state():void 0,{authorizationUrl:g,codeVerifier:A}=await VPr(l,{metadata:d,clientInformation:p,state:h,redirectUrl:t.redirectUrl,scope:n||t.clientMetadata.scope,resource:u});return await t.saveCodeVerifier(A),await t.redirectToAuthorization(g),"REDIRECT"}a(k4e,"authInternal");async function UPr(t,e,r){let n=nbt(t);if(e.validateResourceURL)return await e.validateResourceURL(n,r?.resource);if(r){if(!ibt({requestedResource:n,configuredResource:r.resource}))throw new Error(`Protected resource ${r.resource} does not match expected ${n} (or origin)`);return new URL(r.resource)}}a(UPr,"selectResourceURL");function n$(t){let e=t.headers.get("WWW-Authenticate");if(!e)return;let[r,n]=e.split(" ");if(r.toLowerCase()!=="bearer"||!n)return;let s=/resource_metadata="([^"]*)"/.exec(e);if(s)try{return new URL(s[1])}catch{return}}a(n$,"extractResourceMetadataUrl");async function qPr(t,e,r=fetch){let n=await WPr(t,"oauth-protected-resource",r,{protocolVersion:e?.protocolVersion,metadataUrl:e?.resourceMetadataUrl});if(!n||n.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!n.ok)throw new Error(`HTTP ${n.status} trying to load well-known OAuth protected resource metadata.`);return ZEt.parse(await n.json())}a(qPr,"discoverOAuthProtectedResourceMetadata");async function D4e(t,e,r=fetch){try{return await r(t,{headers:e})}catch(n){if(n instanceof TypeError)return e?D4e(t,void 0,r):void 0;throw n}}a(D4e,"fetchWithCorsRetry");function HPr(t,e="",r={}){return e.endsWith("/")&&(e=e.slice(0,-1)),r.prependPathname?`${e}/.well-known/${t}`:`/.well-known/${t}${e}`}a(HPr,"buildWellKnownPath");async function sbt(t,e,r=fetch){return await D4e(t,{"MCP-Protocol-Version":e},r)}a(sbt,"tryMetadataDiscovery");function $Pr(t,e){return!t||t.status===404&&e!=="/"}a($Pr,"shouldAttemptFallback");async function WPr(t,e,r,n){var o,s;let c=new URL(t),l=(o=n?.protocolVersion)!==null&&o!==void 0?o:nL,u;if(n?.metadataUrl)u=new URL(n.metadataUrl);else{let p=HPr(e,c.pathname);u=new URL(p,(s=n?.metadataServerUrl)!==null&&s!==void 0?s:c),u.search=c.search}let d=await sbt(u,l,r);if(!n?.metadataUrl&&$Pr(d,c.pathname)){let p=new URL(`/.well-known/${e}`,c);d=await sbt(p,l,r)}return d}a(WPr,"discoverMetadataWithFallback");function jPr(t){let e=typeof t=="string"?new URL(t):t,r=e.pathname!=="/",n=[];if(!r)return n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/openid-configuration",e.origin),type:"oidc"}),n;let o=e.pathname;return o.endsWith("/")&&(o=o.slice(0,-1)),n.push({url:new URL(`/.well-known/oauth-authorization-server${o}`,e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL(`/.well-known/openid-configuration${o}`,e.origin),type:"oidc"}),n.push({url:new URL(`${o}/.well-known/openid-configuration`,e.origin),type:"oidc"}),n}a(jPr,"buildDiscoveryUrls");async function GPr(t,{fetchFn:e=fetch,protocolVersion:r=nL}={}){var n;let o={"MCP-Protocol-Version":r},s=jPr(t);for(let{url:c,type:l}of s){let u=await D4e(c,o,e);if(!u)throw new Error(`CORS error trying to load ${l==="oauth"?"OAuth":"OpenID provider"} metadata from ${c}`);if(!u.ok){if(u.status>=400&&u.status<500)continue;throw new Error(`HTTP ${u.status} trying to load ${l==="oauth"?"OAuth":"OpenID provider"} metadata from ${c}`)}if(l==="oauth")return S4e.parse(await u.json());{let d=ebt.parse(await u.json());if(!(!((n=d.code_challenge_methods_supported)===null||n===void 0)&&n.includes("S256")))throw new Error(`Incompatible OIDC provider at ${c}: does not support S256 code challenge method required by MCP specification`);return d}}}a(GPr,"discoverAuthorizationServerMetadata");async function VPr(t,{metadata:e,clientInformation:r,redirectUrl:n,scope:o,state:s,resource:c}){let l="code",u="S256",d;if(e){if(d=new URL(e.authorization_endpoint),!e.response_types_supported.includes(l))throw new Error(`Incompatible auth server: does not support response type ${l}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(u))throw new Error(`Incompatible auth server: does not support code challenge method ${u}`)}else d=new URL("/authorize",t);let p=await _4e(),m=p.code_verifier,h=p.code_challenge;return d.searchParams.set("response_type",l),d.searchParams.set("client_id",r.client_id),d.searchParams.set("code_challenge",h),d.searchParams.set("code_challenge_method",u),d.searchParams.set("redirect_uri",String(n)),s&&d.searchParams.set("state",s),o&&d.searchParams.set("scope",o),o?.includes("offline_access")&&d.searchParams.append("prompt","consent"),c&&d.searchParams.set("resource",c.href),{authorizationUrl:d,codeVerifier:m}}a(VPr,"startAuthorization");async function zPr(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:o,redirectUri:s,resource:c,addClientAuthentication:l,fetchFn:u}){var d;let p="authorization_code",m=e?.token_endpoint?new URL(e.token_endpoint):new URL("/token",t);if(e?.grant_types_supported&&!e.grant_types_supported.includes(p))throw new Error(`Incompatible auth server: does not support grant type ${p}`);let h=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),g=new URLSearchParams({grant_type:p,code:n,code_verifier:o,redirect_uri:String(s)});if(l)l(h,g,t,e);else{let y=(d=e?.token_endpoint_auth_methods_supported)!==null&&d!==void 0?d:[],v=abt(r,y);cbt(v,r,h,g)}c&&g.set("resource",c.href);let A=await(u??fetch)(m,{method:"POST",headers:h,body:g});if(!A.ok)throw await P4e(A);return R4e.parse(await A.json())}a(zPr,"exchangeAuthorization");async function KPr(t,{metadata:e,clientInformation:r,refreshToken:n,resource:o,addClientAuthentication:s,fetchFn:c}){var l;let u="refresh_token",d;if(e){if(d=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(u))throw new Error(`Incompatible auth server: does not support grant type ${u}`)}else d=new URL("/token",t);let p=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),m=new URLSearchParams({grant_type:u,refresh_token:n});if(s)s(p,m,t,e);else{let g=(l=e?.token_endpoint_auth_methods_supported)!==null&&l!==void 0?l:[],A=abt(r,g);cbt(A,r,p,m)}o&&m.set("resource",o.href);let h=await(c??fetch)(d,{method:"POST",headers:p,body:m});if(!h.ok)throw await P4e(h);return R4e.parse({refresh_token:n,...await h.json()})}a(KPr,"refreshAuthorization");async function YPr(t,{metadata:e,clientMetadata:r,fetchFn:n}){let o;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");o=new URL(e.registration_endpoint)}else o=new URL("/register",t);let s=await(n??fetch)(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw await P4e(s);return rbt.parse(await s.json())}a(YPr,"registerClient");var B4e=class extends Error{static{a(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},Due=class{static{a(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._resourceMetadataUrl=void 0,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch}async _authThenStart(){var e;if(!this._authProvider)throw new o0("No auth provider");let r;try{r=await G_(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new o0;return await this._startOrAuth()}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}_startOrAuth(){var e,r,n;let o=(n=(r=(e=this===null||this===void 0?void 0:this._eventSourceInit)===null||e===void 0?void 0:e.fetch)!==null&&r!==void 0?r:this._fetch)!==null&&n!==void 0?n:fetch;return new Promise((s,c)=>{this._eventSource=new d5(this._url.href,{...this._eventSourceInit,fetch:a(async(l,u)=>{let d=await this._commonHeaders();d.set("Accept","text/event-stream");let p=await o(l,{...u,headers:d});return p.status===401&&p.headers.has("www-authenticate")&&(this._resourceMetadataUrl=n$(p)),p},"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=l=>{var u;if(l.code===401&&this._authProvider){this._authThenStart().then(s,c);return}let d=new B4e(l.code,l.message,l);c(d),(u=this.onerror)===null||u===void 0||u.call(this,d)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",l=>{var u;let d=l;try{if(this._endpoint=new URL(d.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(p){c(p),(u=this.onerror)===null||u===void 0||u.call(this,p),this.close();return}s()}),this._eventSource.onmessage=l=>{var u,d;let p=l,m;try{m=U_.parse(JSON.parse(p.data))}catch(h){(u=this.onerror)===null||u===void 0||u.call(this,h);return}(d=this.onmessage)===null||d===void 0||d.call(this,m)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new o0("No auth provider");if(await G_(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new o0("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,o;if(!this._endpoint)throw new Error("Not connected");try{let s=await this._commonHeaders();s.set("content-type","application/json");let c={...this._requestInit,method:"POST",headers:s,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},l=await((n=this._fetch)!==null&&n!==void 0?n:fetch)(this._endpoint,c);if(!l.ok){if(l.status===401&&this._authProvider){if(this._resourceMetadataUrl=n$(l),await G_(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new o0;return this.send(e)}let u=await l.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${l.status}): ${u}`)}}catch(s){throw(o=this.onerror)===null||o===void 0||o.call(this,s),s}}setProtocolVersion(e){this._protocolVersion=e}};var Bue=class extends W_{constructor(r,n,o){super(r,n,o);this.transport=null}static{a(this,"MCPSSEServer")}initTransport(r){let n=wue(this.ctx,r);return new Due(new URL(r.url),n)}};f();f();var Xbt=Ne(Ybt(),1),i$=Ne(require("node:process"),1),Zbt=require("node:stream");f();var Mue=class{static{a(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),b5r(r)}clear(){this._buffer=void 0}};function b5r(t){return U_.parse(JSON.parse(t))}a(b5r,"deserializeMessage");function Jbt(t){return JSON.stringify(t)+`
`}a(Jbt,"serializeMessage");var I5r=i$.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function T5r(){let t={};for(let e of I5r){let r=i$.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}a(T5r,"getDefaultEnvironment");var Lue=class{static{a(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new Mue,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new Zbt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,o,s,c,l;this._process=(0,Xbt.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:{...T5r(),...this._serverParams.env},stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:i$.default.platform==="win32"&&w5r(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,p;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}r(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(s=this._process.stdin)===null||s===void 0||s.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(c=this._process.stdout)===null||c===void 0||c.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(l=this._process.stdout)===null||l===void 0||l.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}get pid(){var e,r;return(r=(e=this._process)===null||e===void 0?void 0:e.pid)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let o=Jbt(e);this._process.stdin.write(o)?r():this._process.stdin.once("drain",r)})}};function w5r(){return"type"in i$.default}a(w5r,"isElectron");var $4e=require("child_process"),W4e=require("util");var Fue=class extends W_{constructor(r,n,o){super(r,n,o);this.transport=null}static{a(this,"MCPStdioServer")}initTransport(r){return r.env={...Wvt(),...r.env||{}},r.stderr="pipe",new Lue(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{$P(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}async cleanup(){if(this.transport){if(process.platform==="win32"){let r=null;"pid"in this.transport&&typeof this.transport.pid=="number"&&(r=this.transport.pid),r&&await this.isUvProcess(r)&&await this.forceKillWindowsProcess(r)}await this.mcp.close()}}async isUvProcess(r){try{let s=(await(0,W4e.promisify)($4e.exec)(`tasklist /fi "PID eq ${r}" /fo csv /nh`,{timeout:5e3})).stdout.trim().split(`
`);if(s.length>0){let l=s[0].split(",");if(l.length>0){let u=l[0].replace(/"/g,"").toLowerCase();return u==="uv.exe"||u==="uv"}}return!1}catch(n){return an.debug(this.ctx,`Failed to get process info for PID ${r}:`,n),!1}}async forceKillWindowsProcess(r){try{let n=(0,W4e.promisify)($4e.exec);an.info(this.ctx,`Force killing Windows process with PID ${r} for MCP server ${this.name}`),ys(this.ctx,{message:`Force killing Windows process with PID ${r}`,server:this.name}),await n(`taskkill /pid ${r} /t /f`,{timeout:1e4}),an.info(this.ctx,`Successfully force killed process ${r}`)}catch(n){an.debug(this.ctx,`Failed to kill process ${r} (process may not exist):`,n),yd(this.ctx,{message:`Failed to kill process ${r} (process may not exist): ${n instanceof Error?n.message:String(n)}`,server:this.name})}}};f();f();f();var Oue=class extends TransformStream{static{a(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let o;super({start(s){o=Sue({onEvent:a(c=>{s.enqueue(c)},"onEvent"),onError(c){e==="terminate"?s.error(c):typeof e=="function"&&e(c)},onRetry:r,onComment:n})},transform(s){o.feed(s)}})}};var _5r={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},o$=class extends Error{static{a(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},Que=class{static{a(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:_5r}async _authThenStart(){var e;if(!this._authProvider)throw new o0("No auth provider");let r;try{r=await G_(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new o0;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let o=await this._authProvider.tokens();o&&(r.Authorization=`Bearer ${o.access_token}`)}this._sessionId&&(r["mcp-session-id"]=this._sessionId),this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion);let n=this._normalizeHeaders((e=this._requestInit)===null||e===void 0?void 0:e.headers);return new Headers({...r,...n})}async _startOrAuthSse(e){var r,n,o;let{resumptionToken:s}=e;try{let c=await this._commonHeaders();c.set("Accept","text/event-stream"),s&&c.set("last-event-id",s);let l=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,{method:"GET",headers:c,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!l.ok){if(l.status===401&&this._authProvider)return await this._authThenStart();if(l.status===405)return;throw new o$(l.status,`Failed to open SSE stream: ${l.statusText}`)}this._handleSseStream(l.body,e,!0)}catch(c){throw(o=this.onerror)===null||o===void 0||o.call(this,c),c}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,o=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),o)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}_scheduleReconnection(e,r=0){var n;let o=this._reconnectionOptions.maxRetries;if(o>0&&r>=o){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${o}) exceeded.`));return}let s=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(c=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,new Error(`Failed to reconnect SSE stream: ${c instanceof Error?c.message:String(c)}`)),this._scheduleReconnection(e,r+1)})},s)}_handleSseStream(e,r,n){if(!e)return;let{onresumptiontoken:o,replayMessageId:s}=r,c;a(async()=>{var u,d,p,m;try{let h=e.pipeThrough(new TextDecoderStream).pipeThrough(new Oue).getReader();for(;;){let{value:g,done:A}=await h.read();if(A)break;if(g.id&&(c=g.id,o?.(g.id)),!g.event||g.event==="message")try{let y=U_.parse(JSON.parse(g.data));s!==void 0&&OH(y)&&(y.id=s),(u=this.onmessage)===null||u===void 0||u.call(this,y)}catch(y){(d=this.onerror)===null||d===void 0||d.call(this,y)}}}catch(h){if((p=this.onerror)===null||p===void 0||p.call(this,new Error(`SSE stream disconnected: ${h}`)),n&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:c,onresumptiontoken:o,replayMessageId:s},0)}catch(g){(m=this.onerror)===null||m===void 0||m.call(this,new Error(`Failed to reconnect: ${g instanceof Error?g.message:String(g)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new o0("No auth provider");if(await G_(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new o0("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,o,s,c;try{let{resumptionToken:l,onresumptiontoken:u}=r||{};if(l){this._startOrAuthSse({resumptionToken:l,replayMessageId:Xle(e)?e.id:void 0}).catch(v=>{var b;return(b=this.onerror)===null||b===void 0?void 0:b.call(this,v)});return}let d=await this._commonHeaders();d.set("content-type","application/json"),d.set("accept","application/json, text/event-stream");let p={...this._requestInit,method:"POST",headers:d,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},m=await((o=this._fetch)!==null&&o!==void 0?o:fetch)(this._url,p),h=m.headers.get("mcp-session-id");if(h&&(this._sessionId=h),!m.ok){if(m.status===401&&this._authProvider){if(this._resourceMetadataUrl=n$(m),await G_(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new o0;return this.send(e)}let v=await m.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${m.status}): ${v}`)}if(m.status===202){Fvt(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(v=>{var b;return(b=this.onerror)===null||b===void 0?void 0:b.call(this,v)});return}let A=(Array.isArray(e)?e:[e]).filter(v=>"method"in v&&"id"in v&&v.id!==void 0).length>0,y=m.headers.get("content-type");if(A)if(y?.includes("text/event-stream"))this._handleSseStream(m.body,{onresumptiontoken:u},!1);else if(y?.includes("application/json")){let v=await m.json(),b=Array.isArray(v)?v.map(I=>U_.parse(I)):[U_.parse(v)];for(let I of b)(s=this.onmessage)===null||s===void 0||s.call(this,I)}else throw new o$(-1,`Unexpected content type: ${y}`)}catch(l){throw(c=this.onerror)===null||c===void 0||c.call(this,l),l}}get sessionId(){return this._sessionId}async terminateSession(){var e,r,n;if(this._sessionId)try{let o=await this._commonHeaders(),s={...this._requestInit,method:"DELETE",headers:o,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},c=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,s);if(!c.ok&&c.status!==405)throw new o$(c.status,`Failed to terminate session: ${c.statusText}`);this._sessionId=void 0}catch(o){throw(n=this.onerror)===null||n===void 0||n.call(this,o),o}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}};var Uue=class extends W_{constructor(r,n,o){super(r,n,o);this.transport=null}static{a(this,"MCPStreamableServer")}initTransport(r){let n=wue(this.ctx,r);return new Que(new URL(r.url),n)}};f();var que=class extends u_{static{a(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(e,r,r.input,n)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new va;let o={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(rg).invokeClientToolConfirmation(e,o)}catch(s){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(s)}`)}}};var jue=Ne(Qc());f();f();YK();var fL=class extends zu{constructor(r,n=new j4e){super();this.ctx=r;this.fallback=n}static{a(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(kr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await Promise.race([n.connection.window.showDocument({uri:r,external:!0}),new Promise((s,c)=>setTimeout(()=>c(new Error("window/showDocument timed out")),15e3))])).success))return this.fallback.open(r)}},j4e=class extends zu{static{a(this,"SpawnUrlOpener")}async open(e){await uO(e)}};f();var eIt=require("crypto"),tIt=Ne(require("http"));var Hue=class{constructor(e){this.nonce=(0,eIt.randomBytes)(16).toString("base64");if(!e)throw new Error("startingRedirect must be defined");this._startingRedirect=new URL(e);let r;this._resultPromise=new Promise((o,s)=>r={resolve:o,reject:s});let n=`&app_name=${encodeURIComponent("GitHub Copilot")}`;this._server=tIt.createServer((o,s)=>{let c=new URL(o.url,`http://${o.headers.host}`);switch(c.pathname){case"/signin":{(c.searchParams.get("nonce")??"").replace(/ /g,"+")!==this.nonce&&(s.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),s.end()),this._startingRedirect.searchParams.set("redirect_uri",`http://127.0.0.1:${this.port}/callback`),s.writeHead(302,{location:this._startingRedirect.toString()}),s.end();break}case"/callback":{let l=c.searchParams.get("code")??void 0,u=c.searchParams.get("state")??void 0,d=new URL(u||"").searchParams.get("nonce")??void 0;if(!l||!u||!d){s.writeHead(400),s.end();return}if(this.state!==u)throw s.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}${n}`}),s.end(),new Error("State does not match.");if(this.nonce!==d)throw s.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}${n}`}),s.end(),new Error("Nonce does not match.");r.resolve({code:l,state:u}),s.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),s.end(s5e);break}default:s.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),s.end(s5e)}})}static{a(this,"LoopbackAuthServer")}set state(e){e?this._startingRedirect.searchParams.set("state",e):this._startingRedirect.searchParams.delete("state")}get state(){return this._startingRedirect.searchParams.get("state")??void 0}start(){return new Promise((e,r)=>{if(this._server.listening)throw new Error("Server is already started");let n=setTimeout(()=>{r(new Error("Timeout waiting for port"))},5e3);this._server.on("listening",()=>{let o=this._server.address();if(typeof o=="string")this.port=parseInt(o);else if(o instanceof Object)this.port=o.port;else throw new Error("Unable to determine port");clearTimeout(n),this.state=`http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`,e(this.port)}),this._server.on("error",o=>{r(new Error(`Error listening to server: ${o}`))}),this._server.on("close",()=>{r(new Error("Closed"))}),this._server.listen(0,"127.0.0.1")})}stop(){return new Promise((e,r)=>{if(!this._server.listening)throw new Error("Server is not started");this._server.close(n=>{n?r(n):e()})})}waitForOAuthResponse(){return this._resultPromise}};var S5r="Timed out",G4e=class{static{a(this,"CodeFlow")}},$ue=class extends G4e{static{a(this,"CLSCodeFlow")}constructor(e){super(),this.ctx=e}async auth(e,r,n){let o=k1t(e);if(!o)return"";let{client_id:s,client_secret:c}=o,l=new URLSearchParams([["client_id",s],["scope",(n?.scopes_supported??[]).join(" ")],["prompt","select_account"]]),u=r.authorization_endpoint+"?"+l.toString(),d=new Hue(u),p=await d.start(),m=`http://127.0.0.1:${p}/signin?nonce=${encodeURIComponent(d.nonce)}`;pn.info(this.ctx,"auth url: ",m),await new fL(this.ctx).open(m);let h;try{h=(await Promise.race([d.waitForOAuthResponse(),new Promise((y,v)=>setTimeout(()=>v(new Error(S5r)),3e5))])).code}finally{setTimeout(()=>{d.stop()},5e3)}return await this.exchangeCodeForToken({endpointUri:r.token_endpoint,redirectUri:`http://127.0.0.1:${p}/callback`,code:h,client_id:s,client_secret:c})}async exchangeCodeForToken({endpointUri:e,redirectUri:r,code:n,client_id:o,client_secret:s}){let c=new URLSearchParams([["code",n],["client_id",o],["redirect_uri",r],["client_secret",s]]),l=await s5(this.ctx,e,"POST",{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},c.toString());if(l.ok)return(await l.json()).access_token;{let u=await l.text(),d=new Error(u);throw d.name="GitHubTokenExchangeError",d}}};var Wue=class t extends $f{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new oue;this.isMcpEnabled=!1;this.storedMCPServersConfig={};this.ctx=r,Pa(this.ctx,async n=>{this.isMcpEnabled=this.isTokenMcpEnabled(n),this.isMcpEnabled?await this.updateMCPServers(this.storedMCPServersConfig):(an.info(this.ctx,"MCP is disabled, clearing all servers and tools"),this.clearAllServers())})}static{a(this,"CLSMCPManager")}static{this.toolsNotificationType=new jue.ProtocolNotificationType("copilot/mcpTools")}static{this.oauthRequestType=new jue.ProtocolRequestType("copilot/mcpOAuth")}isTokenMcpEnabled(r){if(!r)return!0;try{return r.getTokenValue("mcp")!=="0"}catch(n){return an.warn(this.ctx,`Error reading MCP value from token: ${n instanceof Error?n.message:String(n)}`),!0}}async updateMCPServers(r){if(this.storedMCPServersConfig=r,!!this.isMcpEnabled){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}}getAllTools(){return this.isMcpEnabled?this.cachedMCPServerTools:[]}updateMCPToolStatus(r,n,o){if(!this.isMcpEnabled){an.warn(this.ctx,`MCP is disabled, cannot update tool status for ${r}.${n}`);return}let s=this.getTool(r,n),c=this.getServerPrefix(r);if(!s){an.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}s._status=o,o==="enabled"?this.ctx.get(xl).getToolById(`${r}.${n}`)||this.registerTool(r,c,s):this.unregisterTool(r,n)}async callTool(r,n,o,s,c,l,u){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot call tool ${r}.${n}`);let d=this.MCPServersMap.get(r);if(d){let{status:p,server:m}=d;if(p==="running"&&m)return await m.callTool(n,o,s,c,l,u)}throw new Error(`MCP server ${r} is not running`)}async getPrompt(r,n,o){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot get prompt ${r}.${n}`);let s=this.MCPServersMap.get(r);if(s){let{status:c,server:l}=s;if(c==="running"&&l)return await l.getPrompt(n,o)}throw new Error(`MCP server ${r} is not running`)}async completePrompt(r,n,o,s,c){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot complete prompt ${r}.${n}`);let l=this.MCPServersMap.get(r);if(l){let{status:u,server:d}=l;if(u==="running"&&d)return await d.completePrompt(n,o,s,c)}throw new Error(`MCP server ${r} is not running`)}async readResource(r,n){if(!this.isMcpEnabled)throw new Error(`MCP is disabled, cannot read resource from ${r}: ${n}`);let o=this.MCPServersMap.get(r);if(o){let{status:s,server:c}=o;if(s==="running"&&c)return await c.readResource(n)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let s=this.getAllTools().find(c=>c.name===r)?.tools;return!s||s.length===0?null:s.find(c=>c.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let o=this.MCPServersMap.get(n);try{if(o.status==="running"&&o.server){let s=await o.server.getToolsList();s.forEach(d=>{let p=d.name,m=this.getToolStatus(n,p);m&&(d._status=m)});let c=await o.server.getResources(),l=await o.server.getResourceTemplates(),u=await o.server.getPromptsList();r.push({name:n,prefix:this.getServerPrefix(n),status:o.status,tools:s,resources:c,resourceTemplates:l,prompts:u})}else o.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:o.status,tools:[],resources:[],resourceTemplates:[],prompts:[],error:o.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:o.status,tools:[],resources:[],resourceTemplates:[],prompts:[]})}catch(s){let c=`Failed to get tools list for MCP server ${n}.`+(s instanceof Error?` message: ${s.message} stack: ${s.stack}`:String(s));an.error(this.ctx,c),await yd(this.ctx,{message:c,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:o.status,tools:[],resources:[],resourceTemplates:[],prompts:[],error:c})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let o=this.getTool(r,n);return o?o._status:null}getServerPrefix(r){let o=this.getAllTools().find(s=>s.name===r);return o?o.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await ys(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new Bue(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new Uue(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new Fue(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(Gk,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await ys(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(an.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let s=/Error POSTing to endpoint \(HTTP (\d+)\):/,c=n.message.match(s);if(c&&"url"in r&&r.type!=="sse"&&c[1]!=="401"&&Number(c[1])>=400&&Number(c[1])<500){let l=`${c[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;an.info(this.ctx,l),ys(this.ctx,{message:l,server:r.name});let u={...r,type:"sse"};return await this.addServer(u)}else if(c&&"url"in r&&r.type!=="sse"&&c[1]==="401"){let l=await this.getAuthMetadata(r),u=await this.getToken(r.url,l.authorizationServer,l.serverMetadata,l.resourceMetadata);if(!u){an.error(this.ctx,`Failed to get token for server: ${r.name}`);return}let d={...r,requestInit:{...r.requestInit??{},headers:{...r.requestInit?.headers??{},Authorization:`Bearer ${u}`}}};return await this.addServer(d)}}let o=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await yd(this.ctx,{message:o,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:o}),this.ctx.get(sc).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(kr).connection.sendNotification(t.toolsNotificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:o,tools:s}=r;for(let c of s)this.registerTool(n,o,c)}}registerTool(r,n,o){let{name:s,description:c,inputSchema:l,_status:u,_nameForModel:d,annotations:p}=o;an.debug(this.ctx,"register MCP Tool:",{...o}),u!=="disabled"&&this.ctx.get(xl).registerTool(new que({serverName:r,serverNamePrefix:n,name:d,displayName:s,description:c||"",displayDescription:c||"",inputSchema:l,annotations:p},(m,h,g,A)=>(an.debug(this.ctx,"copilot MCP Invoker:",r,s,g),this.callTool(r,s,g,A,m,h.roundId,h.toolCallId?.toString()))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:o}=r;for(let s of o){let{name:c}=s;this.unregisterTool(n,c)}}}unregisterTool(r,n){this.ctx.get(xl).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:o}=this.MCPServersMap.get(r);n==="running"&&o&&(await ys(this.ctx,{message:`Stopping server ${r}`,server:r}),o.getEmitter().removeAllListeners(Gk),await o.cleanup())}this.MCPServersMap.clear()}async getAuthMetadata(r){return await new zle(this.ctx).getMetadataFromOriginalUrl(r.url,r.requestInit?.headers)}async getToken(r,n,o,s){let c=await this.ctx.get(Cy).getOrActivateProviderIdForServer(n);if(!c){let p=this.ctx.get(Cy).createAuthenticationProvider(n);if(!p){an.error(this.ctx,`No authentication provider found for server: ${n}`),await ys(this.ctx,{message:`No authentication provider found for authserver: ${n}`,server:r});return}c=p.id}let l=s?.scopes_supported||o.scopes_supported||[],u=await this.ctx.get(Cy).getSessions(c,l,{authorizationServer:n},!0);if(u.length)return u[0].accessToken;let d=this.ctx.get(Cy).getProvider(c);try{let{confirm:p}=await this.ctx.get(kr).connection.sendRequest(t.oauthRequestType,{mcpServer:r,authLabel:d.label});if(!p){an.warn(this.ctx,"no confirmation for OAuth request");return}}catch(p){an.warn(this.ctx,"no confirmation for OAuth request",p);return}try{let p=await new $ue(this.ctx).auth(n,o,s),m=await d.createSession(l,p);return this.ctx.get(sc).showInformationMessageOnlyOnce("Authentication successful",`You have already authenticated with ${d.label}.`,{title:"OK"}),m.accessToken}catch(p){this.ctx.get(sc).showWarningMessageOnlyOnce("Authentication failed",`You need to restart the IDE to authenticate the MCP server again. ${p instanceof Error?p.message:String(p)}`);return}}};f();var rIt=Ne(Qc());var Gue=class t extends cy{static{a(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new rIt.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(kr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var nIt=Ne(Qc());var R5r=new nIt.ProtocolRequestType("copilot/readMcpSamplingConfig"),Vue=class extends jw{constructor(r){super();this.ctx=r}static{a(this,"CopilotMcpSamplingConfigSender")}async readMcpSamplingConfig(r){let n=this.ctx.get(kr).connection,o;try{o=await n.sendRequest(R5r,r)}catch(l){throw new Error(`Request copilot/readMcpSamplingConfig failed with message: ${FA(l)}`)}let[s,c]=o;if(c)throw new Error(`Request copilot/readMcpSamplingConfig failed with code: ${c.code}, message: ${c.message}`);return s}};f();var Kue=Ne(Qc());var k5r=new Kue.ProtocolRequestType("copilot/showPanelMessageRequest"),P5r=new Kue.ProtocolNotificationType("copilot/showPanelMessage"),zue=class extends I8{constructor(r){super();this.ctx=r}static{a(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(kr).connection.sendNotification(P5r,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(kr).connection,o;try{o=await n.sendRequest(k5r,r)}catch(l){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${FA(l)}`)}let[s,c]=o;if(c)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${c.code}, message: ${c.message}`);return s}};f();f();var D5r=new ft("fetcher"),B5r="https://default.exp-tas.com/",Yue=class extends Qr{constructor(r,n,o,s){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=o;this.onFallbackSuccess=s}static{a(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(o){if(Sd(o)||`${r}/`.startsWith(B5r))throw o;D5r.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,o);let s=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),s}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var iIt=new ft("fetcher"),Jue=class extends Qr{constructor(r,n=new VM(r),o=new jM(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=o;this.updateFetcher=a(()=>{let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let o=Bi(this.ctx,qt.DebugUseEditorFetcher);o?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):o?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(iIt.debug(this.ctx,n),this.currentFetcher=r)},"updateFetcher");this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new Yue(r,n,o,()=>{iIt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(bs).onDidSetCapabilities(this.updateFetcher),r.get(Lc).onDidChangeCopilotSettings(this.updateFetcher)}static{a(this,"AgentDelegatingFetcher")}get fetchStrategy(){return Bi(this.ctx,qt.FetchStrategy)}get editorFetcherCapability(){return this.ctx.get(bs).getCapabilities().fetch??!1}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};f();var Xue=class extends sc{constructor(r){super();this.ctx=r}static{a(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(kr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}showInformationMessage(r,...n){return this.connection.window.showInformationMessage(r,...n)}};f();f();var oIt=Ne(require("crypto")),sIt=require("os");var N5r=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function M5r(t){let e=t.replace(/-/g,":").toLowerCase();return!N5r.has(e)}a(M5r,"validateMacAddress");function L5r(){let t=(0,sIt.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(M5r(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}a(L5r,"getMac");var V4e;function F5r(){try{let t=L5r();return oIt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}a(F5r,"getMacMachineId");function aIt(){return V4e||(V4e=F5r()||Ir()),V4e}a(aIt,"getMachineId");var O5r=Ir()+Date.now(),cIt=new Fs(O5r,aIt());f();f();var Zue=class extends Poe{static{a(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(W1).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;let e=this.ctx.get(W1);this._watcher=e.onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this._watcher?.dispose(),this._watcher=void 0}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(c=>!c.isRestricted&&!c.isUnknownFileExtension);if(n.length){let c=n.map(l=>l.document).filter(l=>l!==void 0);this.emitFilesCreated(c)}let o=e.changed.filter(c=>!c.isRestricted&&!c.isUnknownFileExtension);if(o.length){let c=o.map(l=>l.document).filter(l=>l!==void 0);this.emitFilesUpdated(c)}let s=e.deleted.filter(c=>!c.isRestricted&&!c.isUnknownFileExtension);s.length&&this.emitFilesDeleted(s.map(c=>({uri:c.uri})))}};var ede=class extends ef{static{a(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new Zue(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(bs).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function lIt(t){let e=new lg(process.env),r=Mut(e);r.set(lg,e),r.set(Qr,new Jue(r)),r.set(Bs,new Bs(r)),dPe(r,{});let n=Gje();r.set(mi,n);let o=new Ele;r.set(ou,o);let s=new gA(r,n);r.set(gA,s),r.set(Mi,new dV(r,process.env)),r.set(Pf,new Pf(r)),r.set(Od,new Od(r,"agent")),r.set(Fs,cIt),r.set(un,new Joe),r.set(qP,v1t()),r.set(zs,new zs),r.set(Qi,W1t),r.set(ek,new Cle(r)),r.set(ef,new ede(r)),r.set(W1,new W1(r)),r.set(pl,new pl),r.set(Wc,cZ(r,zAt)),r.set(Dp,new Dp(r)),r.set(YC,new k3),o0t(r),Doe(r),E0t(r),Hje(r),r.set(kr,new kr(r,t)),r.set(sc,new Xue(r)),r.set(I8,new zue(r)),r.set(jw,new Vue(r)),r.set(zu,new fL(r)),r.set($o,new Lle(r)),r.set(bH,new bH(r));let c=new L_(r);return r.set(fr,c),r.set(L_,c),r.set(mf,new b8(r,process.env)),r.set(Zg,new U4),r.set(fl,new fl(r)),F1t(r),Ndt(r),r.set(Gf,new Gf),r.set(B_,new B_),r.set(_y,new _y),r.set(Df,new ble),r.set(nv,new nv),r.set(qA,new koe(r)),r.set(ZC,new G8),r.set(yy,new yy(r)),r.set(gE,new gE(r)),r.set(vl,new vl(r)),r.set(dd,new Ble(r)),r.set(Fw,new Mle(r)),r.set(rg,new Nle(r)),r.set(xl,new xl(r)),r.set(TE,new TE(r)),r.set(vy,new vy(r)),r.set(sE,new sE(r)),r.set($f,new Wue(r)),r.set(cy,new Gue(r)),r.set(Hk,new Hk),r.set(Cy,new xle(r)),r.set(_1,new _1),r.set(qk,new qk),r.set(iy,new iy),r.set(zp,new zp),r.set(B1,new B1(r)),r.set(og,new iie([new Boe,new Noe])),r.set(vP,new vP(r)),r}a(lIt,"createLanguageServerContext");f();var z4e=require("events"),s$=Ne(require("fs"));YK();var rde=Ne(Qc());f();var dIt=Ne(require("fs")),fIt=Ne(require("http")),pL=Ne(require("path"));var tde=class{constructor(e,r){this.port=e;let n;this.server=fIt.createServer((o,s)=>{if(o.headers.accept&&o.headers.accept=="text/event-stream")switch(s.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),o.url){case"/stdin":r.on("read",l=>{uIt(s,JSON.stringify(l))});return;case"/stdout":r.on("write",l=>{uIt(s,JSON.stringify(l))});return;default:s.writeHead(404),s.end();return}s.writeHead(200,{"Content-Type":"text/html"});let c=__dirname;pL.basename(__dirname)!=="debug"&&(c=pL.dirname(__dirname)),n??=dIt.readFileSync(pL.join(c,"dist","debugServer.html")).toString(),s.write(n),s.end()}),this.server.on("error",o=>{console.error(o)})}static{a(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function uIt(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}a(uIt,"writeData");var K4e=class extends rde.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{a(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},Y4e=class extends rde.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{a(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function pIt(t,e,r){let n,o=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(o)){n??=new z4e.EventEmitter;let l=new tde(o,n).listen();o===0&&await uO(`http://localhost:${l.getPort()}`)}let s=t.GITHUB_COPILOT_RECORD??"",c;try{let l=Date.now().toString();s==="1"||s==="true"?c=s$.openSync(`stdio${l}.log`,"w"):s&&s!=="0"&&s!=="false"&&(c=s$.openSync(s.replaceAll("%s",l),"w"))}catch(l){console.error(l)}if(c){let l=a(u=>{c&&s$.appendFile(c,u,d=>{d&&(c=void 0,console.error(d))})},"log");n??=new z4e.EventEmitter,n.on("read",u=>l(`<-- ${JSON.stringify(u)}
`)),n.on("write",u=>l(`--> ${JSON.stringify(u)}
`))}return n&&(e=new Y4e(e,n),r=new K4e(r,n)),[e,r]}a(pIt,"wrapTransports");async function gIt(){let t=Ize(process.argv.slice(2)).version(new wo().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new _g.IPCMessageReader(process),n=new _g.IPCMessageWriter(process)):e.stdio?(r=new _g.StreamMessageReader(process.stdin),n=new _g.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await XE.mkdtemp(mIt.default.tmpdir()+"/github-copilot-"));try{let l=jCe(),u=JSON.parse(await XE.readFile(a$.join(l,"hosts.json"),"utf8")),d={};try{d=JSON.parse(await XE.readFile(a$.join(l,"apps.json"),"utf8"))}catch{}let p=!1;for(let m of Object.keys(u)){let h=`${m}:${_0}`;d[h]||!u[m].user||!u[m].oauth_token||(d[h]={user:u[m].user,oauth_token:u[m].oauth_token,githubAppId:_0},p=!0)}p&&await XE.writeFile(a$.join(l,"apps.json"),JSON.stringify(d)+`
`,"utf8"),await XE.rm(a$.join(l,"hosts.json"),{force:!0})}catch{}let o=(0,_g.createConnection)(_g.ProposedFeatures.all,...await pIt(process.env,r,n)),s=lIt(o);console=wGe(s);let c=s.get(kr);r.onClose(()=>c.onExit()),process.on("SIGINT",()=>{c.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{c.onExit().finally(()=>process.exit(143)).catch(()=>{})}),$je(s),c.listen()}a(gIt,"main");hIt.isMainThread?require.main===module&&gIt():IGe()&&TGe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
